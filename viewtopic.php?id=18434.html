<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Planex (PCI) MZK-W04NU Atheros AP81 platform router with USB</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 24 Mar 2018 and 6 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 3</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=18434&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=18434&amp;p=3.html">3</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p79631">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">RoundSparrow</div>
					<div class="post-datetime">
						14 Jan 2009, 18:56					</div>
				</div>
				<div class="post-content content">
					<p>I got my router in today, opened it up and took high-res photos of the system board.&nbsp; Both the firmware and the chips confirm it is an Atheros AP81 router platform.</p><p><img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br /><strong>OpenWRT current status</strong></p><p>Trunk now has support to flash this router.&nbsp; See the threads on the Trendnet TEW-652BRP (similar Atheros AP81, but flash is not identical).</p><p>1. USB port is working perfect, reports later in the thread.<br />2. [s]LAN interface is not yet working (eth0).&nbsp; Linux does not have drivers for the Atheros AR8216 / AR8316 Ethernet switch parts. [/s] A new change checked in SVN 14655 to get the LAN ports working.&nbsp; So now LAN and WAN ports should be working fine (please provide test feedback).<br />3. see the Trendnet TEW-652BRP thread for issues with limitations and performance of the ath9k wireless driver.&nbsp; <a href="http://forum.openwrt.org/viewtopic.php?id=18314">http://forum.openwrt.org/viewtopic.php?id=18314</a></p><p>I have asked Planex to provide a GPL release for this router including u-boot.&nbsp; No response so far.</p><p><img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>For reference, if you need to flash from u-boot, here is instructions:</p><div class="codebox"><pre><code>ar7100&gt; erase 0xbf050000 +0x770000
ar7100&gt; setenv serverip 192.168.1.254; setenv ipaddr 192.168.1.1
ar7100&gt; tftp 0xa0800000 openwrt-ar71xx-mzk-w04nu-squashfs.bin
ar7100&gt; cp.b 0xa0800000 0xbf050000 0x770000
ar7100&gt; reset</code></pre></div><p>You do NOT need to flash from u-boot, you can flash from the web interface.&nbsp; but one time by accident I managed to flash a build with no working LAN or wifi drivers, so I&#039;m putting instructions here in case anyone else does this <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p><img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br /><strong>Hardware Information</strong></p><p>This should have the 3x3 MIMO AR9103 radio chip on it. This is the only consumer retail Atheros AP81 I know of shipping with USB port standard.&nbsp; This unit also has 8MB of FLASH, most only have 4MB.</p><p>High res photos:<br /><a href="http://sites.google.com/site/stephengutknecht/Home/MZK-W04NU_054_work1_crop.jpg">http://sites.google.com/site/stephengut … 1_crop.jpg</a><br /><a href="http://sites.google.com/site/stephengutknecht/Home/MZK-W04NU_021_work1.JPG">http://sites.google.com/site/stephengut … _work1.JPG</a></p><p>Note that in these photos I has already moved around the internal antenna cables in the router.&nbsp; Originally they were all 3 run under the metal tab on the outside edge of the router.&nbsp; I moved the antenna cables for clearer photos and to untangle them a bit.</p><p>The antennas are all 3 removable, use the same Reverse SMA jack as the Trendnet TEW-632BRP, TEW-652BRP and TP-Link TL-WR941ND.&nbsp; The antennas themselves are about 40% to 50% longer on the Trendnet and T-Link than the Trendnet ones. </p><p>The Trendnet and Plenex use nearly identical power supplies in the USA, same Jentec brand but Trendnet is 5v 2.5amp, Planex is 5v 3amp.&nbsp; FCC ID of the Planex: sj9-mzkw04nu</p><p>There does not seem to be any form of http or tftp recovery if you botch the firmware.&nbsp; If you plan on building your own (untested) firmware, I suggest to get a Nokia DKU-5 cable or other rs232 solution on hand in case you have to flash from u-boot with serial port.&nbsp; The binaries I distribute: I try to test before I post them, so the are possibly safer.</p><p>serial port pinout:&nbsp; pin 1 (square box) = +3.3V, pin 2 = RX, pin 3 = TX, pin 4 = Ground.&nbsp; You only need to connect pin 2,3,4 (for a total of three wires).</p><br /><p><strong>Sourcing</strong></p><p>These routers are selling for $59.99 including free shipping on Amazon.com in both the USA and Japan.&nbsp; Looks like Planex (PCI) is selling them directly.&nbsp; &nbsp;[s]UPDATE:&nbsp; As of Feburary 2, 2009 - Amazon.com no longer has any in stock, hopefully Planex will return to selling them in the USA.[/s] UPDATE:&nbsp; Feburary 11, 2009 - back on sale on Amazon.com in USA again.</p><p><strong>Vendor firmware boot</strong></p><p>Since we are still trying to tune the wireless drivers on these devices, I&#039;m preserving full boot logs incase these noisy messages later reveal some secret chipset tuning or features.&nbsp; Planex vendor firmware version 1.00.03 Build Date Wed Nov 28 21:03:53 JST 2007:</p><div class="codebox"><pre><code>U-Boot 1.1.4 (Oct 25 2007 - 15:28:59)

AP81 (ar7100) U-boot
DRAM:  
sri
32 MB
Top of RAM usable for U-Boot at: 82000000
Reserving 222k for U-Boot at: 81fc8000
Reserving 192k for malloc() at: 81f98000
Reserving 44 Bytes for Board Info at: 81f97fd4
Reserving 36 Bytes for Global Data at: 81f97fb0
Reserving 128k for boot params() at: 81f77fb0
Stack Pointer at: 81f77f98
Now running in RAM - U-Boot at: 81fc8000
id read 0x100000ff
flash size 8MB, sector count = 128
Flash:  8 MB
*** Warning - bad CRC, using default environment

In:    serial
Out:   serial
Err:   serial
Net:   ag7100_enet_initialize...
Fetching MAC Address from 0x81fedb10
eth0: 00:90:cc:f4:9c:a6
dup 1 speed 100
eth0 up
eth0
====check reset button function====
### main_loop entered: bootdelay=4

### main_loop: bootcmd=&quot;bootm 0xbf050000&quot;
Hit any key to stop autoboot:  0 
## Booting image at bf050000 ...
   Image Name:   Linux Kernel Image
   Created:      2007-11-28  12:04:01 UTC
   Image Type:   MIPS Linux Kernel Image (gzip compressed)
   Data Size:    1361970 Bytes =  1.3 MB
   Load Address: 80060000
   Entry Point:  80301000
   Verifying Checksum ... OK
   Uncompressing Kernel Image ... OK
No initrd
## Transferring control to Linux (at address 80301000) ...
## Giving linux memsize in bytes, 33554432

Starting kernel ...

Linux version 2.6.15--LSDK-7.1.2.32 (ttajima@localhost.localdomain) (gcc version 3.4.4) #238 Wed Nov 28 21:03:53 JST 
2007
flash_size passed from bootloader = 8
arg 1: console=ttyS0,115200
arg 2: root=31:03
arg 3: rootfstype=jffs2
arg 4: init=/sbin/init
arg 5: mtdparts=ar7100-nor0:256k(u-boot),64k(u-boot-env),1408k(uImage),6208k(rootfs),128k(config),128k(ART)
arg 6: mem=32M
CPU revision is: 00019374
Determined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
User-defined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
Built 1 zonelists
Kernel command line: console=ttyS0,115200 root=31:03 rootfstype=jffs2 init=/sbin/init mtdparts=ar7100-nor0:256k(u-boo
t),64k(u-boot-env),1408k(uImage),6208k(rootfs),128k(config),128k(ART) mem=32M 
Primary instruction cache 64kB, physically tagged, 4-way, linesize 32 bytes.
Primary data cache 32kB, 4-way, linesize 32 bytes.
Synthesized TLB refill handler (20 instructions).
Synthesized TLB load handler fastpath (32 instructions).
Synthesized TLB store handler fastpath (32 instructions).
Synthesized TLB modify handler fastpath (31 instructions).
Cache parity protection disabled
PID hash table entries: 256 (order: 8, 4096 bytes)
Using 200.000 MHz high precision timer.
Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
Memory: 29152k/32768k available (1985k kernel code, 3600k reserved, 702k data, 112k init, 0k highmem)
Mount-cache hash table entries: 512
Checking for &#039;wait&#039; instruction...  available.
NET: Registered protocol family 16
SCSI subsystem initialized
usbcore: registered new driver usbfs
usbcore: registered new driver hub
AR7100 GPIOC major 0
JFFS2 version 2.2. (C) 2001-2003 Red Hat, Inc.
Initializing Cryptographic API
io scheduler noop registered
io scheduler deadline registered
Serial: 8250/16550 driver $Revision: #2 $ 1 ports, IRQ sharing disabled
serial8250.0: ttyS0 at MMIO 0x0 (irq = 19) is a 16550A
PPP generic driver version 2.4.2
PPP Deflate Compression module registered
PPP BSD Compression module registered
NET: Registered protocol family 24
Creating 6 MTD partitions on &quot;ar7100-nor0&quot;:
0x00000000-0x00040000 : &quot;u-boot&quot;
0x00040000-0x00050000 : &quot;u-boot-env&quot;
0x00050000-0x001b0000 : &quot;uImage&quot;
0x001b0000-0x007c0000 : &quot;rootfs&quot;
0x007c0000-0x007e0000 : &quot;config&quot;
0x007e0000-0x00800000 : &quot;ART&quot;
Port Status c000004 
ar7100-ehci ar7100-ehci.0: ATH EHCI
ar7100-ehci ar7100-ehci.0: new USB bus registered, assigned bus number 1
ar7100-ehci ar7100-ehci.0: irq 3, io mem 0x1b000000
hcc_params addr 0xbb000108 val 0x6 hcs_params addr 0xbb000104 val 0x10011
ar7100-ehci ar7100-ehci.0: USB 2.0 started, EHCI 1.00, driver 10 Dec 2004
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 1 port detected
Initializing USB Mass Storage driver...
usbcore: registered new driver usb-storage
USB Mass Storage support registered.
Netfilter messages via NETLINK v0.30.
NET: Registered protocol family 2
IP route cache hash table entries: 512 (order: -1, 2048 bytes)
TCP established hash table entries: 2048 (order: 1, 8192 bytes)
TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
TCP: Hash tables configured (established 2048 bind 2048)
TCP reno registered
ip_conntrack version 2.4 (256 buckets, 2048 max) - 232 bytes per conntrack
ip_tables: (C) 2000-2002 Netfilter core team
arp_tables: (C) 2002 David S. Miller
TCP bic registered
NET: Registered protocol family 1
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
ar7100wdt_init: Registering WDT success
VFS: Mounted root (jffs2 filesystem) readonly.
Freeing unused kernel memory: 112k freed
mount: Mounting devpts on /dev/pts failed: No such file or directory
ag7100_mod: module license &#039;unspecified&#039; taints kernel.
AG7100: Length per segment 1536
AG7100: Max segments per packet 1
AG7100: Max tx descriptor count    40
AG7100: Max rx descriptor count    252
AG7100: fifo cfg 3 00780008
AG7100CHH: Mac address for unit 0
AG7100CHH: 00:90:cc:f4:9c:a6 
AG7100CHH: Mac address for unit 1
AG7100CHH: 00:90:cc:f4:9c:a7 
AG7100: cfg1 0xf cfg2 0x7014
AG7100: unit 0 phy is up...RMii 100Mbps full duplex
AG7100: pll reg 0x18050014: 0x13000a44  AG7100: cfg_1: 0x7ff0000
AG7100: cfg_2: 0xfff
AG7100: cfg_3: 0x780008
AG7100: cfg_4: 0xffff
AG7100: cfg_5: 0x7ffef
AG7100: done cfg2 0x7115 ifctl 0x10000 miictrl 0x13 
Writing 4
AG7100: cfg1 0xf cfg2 0x7014
ATHRS26: resetting s26
ATHRS26: s26 reset done
AG7100: unit 1: phy not up carrier 1
Writing 6
EOPNOTSUPP
device eth0 entered promiscuous mode
br0: port 1(eth0) entering learning state

 (none) mips #238 Wed Nov 28 21:03:53 JST 2007 
(none) login: EOPNOTSUPP
EOPNOTSUPP
ath_hal: 0.9.17.1 (AR5416, DEBUG, REGOPS_FUNC, WRITE_EEPROM, 11D)
wlan: 0.8.4.2 (Atheros/multi-bss)
ath_rate_atheros: Copyright (c) 2001-2005 Atheros Communications, Inc, All Rights Reserved
ath_dev: no version for &quot;_ath_hal_attach&quot; found: kernel tainted.
ath_dev: Copyright (c) 2001-2007 Atheros Communications, Inc, All Rights Reserved
ath_ahb: 0.9.4.5 (Atheros/multi-bss)
=====simple_config_callback registered=====
wifi0: Atheros AR9100 WiSoC: mem=0xb80c0000, irq=2
wlan: mac acl policy registered
ath_set_config: Setting ATH parameter
ath_set_config: Setting ATH parameter
ath_set_config: Setting ATH parameter
ath_set_config: Setting ATH parameter
ath_set_config: Setting ATH parameter
ieee80211_ioctl_setparam: CHH Calling ieee80211_open
EOPNOTSUPP
EOPNOTSUPP
RF 0x98b0 V 0x1e5795e5
RF 0x98e0 V 0x2008020
RF 0x98b0 V 0x2108421
RF 0x98ec V 0x8
RF 0x98b0 V 0xe73ff17
RF 0x98e0 V 0x420
RF 0x98f0 V 0x1c00018
RF 0x989c V 0x0
RF 0x989c V 0x0
RF 0x989c V 0x0
RF 0x989c V 0xe00000
RF 0x989c V 0x5e0000
RF 0x989c V 0x120000
RF 0x989c V 0x620000
RF 0x989c V 0x20000
RF 0x989c V 0xff0000
RF 0x989c V 0xff0000
RF 0x989c V 0xff0000
RF 0x989c V 0x40ff0000
RF 0x989c V 0x5f0000
RF 0x989c V 0x870000
RF 0x989c V 0xf90000
RF 0x989c V 0x7b0000
RF 0x989c V 0xff0000
RF 0x989c V 0xf50000
RF 0x989c V 0xdc0000
RF 0x989c V 0x110000
RF 0x989c V 0x6100a8
RF 0x989c V 0x423022
RF 0x989c V 0x2014008f
RF 0x989c V 0xc40002
RF 0x989c V 0x3000f2
RF 0x989c V 0x440016
RF 0x989c V 0x410040
RF 0x989c V 0x1805e
RF 0x989c V 0xc0ab
RF 0x989c V 0xe1
RF 0x989c V 0x80
RF 0x989c V 0xd4
RF 0x98d0 V 0x10000f
RF 0x989c V 0x500
RF 0x989c V 0x800
RF 0x98cc V 0xe
Force rf_pwd_icsyndiv to 1 on 2412 (1 0)
RF 0x989c V 0x0
RF 0x989c V 0x0
RF 0x989c V 0x0
RF 0x989c V 0xe00000
RF 0x989c V 0x5e0000
RF 0x989c V 0x120000
RF 0x989c V 0x620000
RF 0x989c V 0x20000
RF 0x989c V 0xff0000
RF 0x989c V 0xff0000
RF 0x989c V 0xff0000
RF 0x989c V 0x40ff0000
RF 0x989c V 0x5f0000
RF 0x989c V 0x870000
RF 0x989c V 0xf90000
RF 0x989c V 0x7b0000
RF 0x989c V 0xff0000
RF 0x989c V 0xf50000
RF 0x989c V 0xdc0000
RF 0x989c V 0x110000
RF 0x989c V 0x6100a8
RF 0x989c V 0x423022
RF 0x989c V 0x1014008f
RF 0x989c V 0xc40002
RF 0x989c V 0x3000f2
RF 0x989c V 0x440016
RF 0x989c V 0x410040
RF 0x989c V 0x1805e
RF 0x989c V 0xc0ab
RF 0x989c V 0xe1
RF 0x989c V 0x80
RF 0x989c V 0xd4
RF 0x98d0 V 0x10000f
--AP ar5416InitUserSettings ahp-&gt;ah_miscMode 0x8
ar5416Reset Setting CFG 0x10a
Country ie is &lt;6&gt;RF 0x98b0 V 0x1e5795e5
RF 0x98e0 V 0x2008020
RF 0x98b0 V 0x2108421
RF 0x98ec V 0x8
RF 0x98b0 V 0xe73ff17
RF 0x98e0 V 0x420
RF 0x98f0 V 0x1c00018
RF 0x989c V 0x0
RF 0x989c V 0x0
RF 0x989c V 0x0
RF 0x989c V 0xe00000
RF 0x989c V 0x5e0000
RF 0x989c V 0x120000
RF 0x989c V 0x620000
RF 0x989c V 0x20000
RF 0x989c V 0xff0000
RF 0x989c V 0xff0000
RF 0x989c V 0xff0000
RF 0x989c V 0x40ff0000
RF 0x989c V 0x5f0000
RF 0x989c V 0x870000
RF 0x989c V 0xf90000
RF 0x989c V 0x7b0000
RF 0x989c V 0xff0000
RF 0x989c V 0xf50000
RF 0x989c V 0xdc0000
RF 0x989c V 0x110000
RF 0x989c V 0x6100a8
RF 0x989c V 0x423022
RF 0x989c V 0x2014008f
RF 0x989c V 0xc40002
RF 0x989c V 0x3000f2
RF 0x989c V 0x440016
RF 0x989c V 0x410040
RF 0x989c V 0x1805e
RF 0x989c V 0xc0ab
RF 0x989c V 0xe1
RF 0x989c V 0x80
RF 0x989c V 0xd4
RF 0x98d0 V 0x10000f
RF 0x989c V 0x500
RF 0x989c V 0x800
RF 0x98cc V 0xe
Force rf_pwd_icsyndiv to 2 on 2422 (1 0)
RF 0x989c V 0x0
RF 0x989c V 0x0
RF 0x989c V 0x0
RF 0x989c V 0xe00000
RF 0x989c V 0x5e0000
RF 0x989c V 0x120000
RF 0x989c V 0x620000
RF 0x989c V 0x20000
RF 0x989c V 0xff0000
RF 0x989c V 0xff0000
RF 0x989c V 0xff0000
RF 0x989c V 0x40ff0000
RF 0x989c V 0x5f0000
RF 0x989c V 0x870000
RF 0x989c V 0xf90000
RF 0x989c V 0x7b0000
RF 0x989c V 0xff0000
RF 0x989c V 0xf50000
RF 0x989c V 0xdc0000
RF 0x989c V 0x110000
RF 0x989c V 0x6100a8
RF 0x989c V 0x423022
RF 0x989c V 0x2014008f
RF 0x989c V 0xc40002
RF 0x989c V 0x3000f2
RF 0x989c V 0x440016
RF 0x989c V 0x410040
RF 0x989c V 0x1805e
RF 0x989c V 0xc0ab
RF 0x989c V 0xe1
RF 0x989c V 0x80
RF 0x989c V 0xd4
RF 0x98d0 V 0x10000f
--AP ar5416InitUserSettings ahp-&gt;ah_miscMode 0x8
ar5416Reset Setting CFG 0x10a
device ath0 entered promiscuous mode
br0: port 2(ath0) entering learning state
../../common/MasterControl/Info.cpp(66):Info::SetWscConfigPath: called
                                                                      ../../common/MasterControl/Info.cpp(79):Info::S
etAPNumRadio: called

                    ******************************************************
                                                                          Wi-Fi Simple Config Application - Atheros C
ommuncations
            *********************************************************
                                                                     ../../common/UdpLib/UdpLib.cpp(78):Entered udp_o
pen
   ../../common/UdpLib/UdpLib.cpp(96):Socket open successful, sd: 3
                                                                   ../../common/UdpLib/UdpLib.cpp(114):Entered udp_bi
nd
  ../../common/UdpLib/UdpLib.cpp(129):Binding successful for socket [3]
                                                                       ../../common/WscCmd/WscCmd.cpp(405):WscCmd:Act
ualCBThreadProc: Started
                        ../../common/WscCmd/WscCmd.cpp(1111):WscCmd:ActualUIThreadProc: Started.
                                                                                                killall: udhcpd: no p
rocess killed
             killall: udhcpc: no process killed
                                               ../../common/MasterControl/MasterControl.cpp(88):MasterControl constru
ctor
    ../../common/WscCmd/WscCmd.cpp(243):WscCmd::MC instantiated ok
                                                                  ../../common/Transport/Transport.cpp(79):CTransport
 Construction
             ../../common/MasterControl/MasterControl.cpp(209):MC::Init: Init complete ok
                                                                                         ../../common/WscCmd/WscCmd.c
pp(245):WscCmd::MC intialized ok
                                ../../common/WscCmd/WscCmd.cpp(119):WscCmd::Init ok, starting stack...
                                                                                                      ../../common/Ma
sterControl/Info.cpp(156):Read WSC Config File:/tmp/ath/wsc_config.txt
                                                                      ../../common/MasterControl/Info.cpp(171):Info::
ReadConfigFile:File open ok
                           ../../common/MasterControl/Info.cpp(1273):Use eth0 address  0:90:cc:f4:9c:a6
                                                                                                       ../../common/T
ransport/Transport.cpp(154):In CTransport::ActualCBThreadProc
                                                             ../../common/Transport/Transport.cpp(158):Calling Dequeu
e
 ../../common/MasterControl/MasterControl.cpp(1222):MC::SwitchModeOn: EModeApProxyRegistrar enter
                                                                                                 ../../common/StateMa
chine/StateMachine.cpp(71):RegistrarSM constructor
                                                  ../../common/MasterControl/MasterControl.cpp(2961):***** WPA_PSK = 

../../common/StateMachine/RegistrarSM.cpp(73):InitializeSM, locEna=1, Passthr=1
                                                                               ../../common/InbEap/InbEap.cpp(95):CIn
bEap Construction
                 ../../common/InbEap/InbEap.cpp(114):Sizeof(WSC_NOTIFY_DATA) = 19
                                                                                 ../../common/UdpLib/UdpLib.cpp(78):E
ntered udp_open
               ../../common/UdpLib/UdpLib.cpp(96):Socket open successful, sd: 7
                                                                               ../../common/UdpLib/UdpLib.cpp(114):En
tered udp_bind
              ../../common/UdpLib/UdpLib.cpp(129):Binding successful for socket [7]
                                                                                   ../../common/InbWlan/InbWlan.cpp(7
3):CInbWlan Construction
                        ../../common/UdpLib/UdpLib.cpp(78):Entered udp_open
                                                                           ../../common/UdpLib/UdpLib.cpp(96):Socket 
open successful, sd: 8
                      ../../common/UdpLib/UdpLib.cpp(114):Entered udp_bind
                                                                          ../../common/UdpLib/UdpLib.cpp(129):Binding
 successful for socket [8]
                          ../../common/InbEap/InbEap.cpp(360):In CInbEap::StaticRecvThread
                                                                                          ../../common/InbEap/InbEap.
cpp(372):CInbEap::ActualRecvThread Started
                                          ../../common/StateMachine/StateMachine.cpp(71):RegistrarSM constructor
                                                                                                                ../..
/common/MasterControl/MasterControl.cpp(2757):Generated devPwd: 12345670
                                                                        ../../common/WscCmd/WscCmd.cpp(450):WscCmd:Ac
tualCBThreadProc: CB_MAIN_PUSH_MSG recd
                                       ../../common/WscCmd/WscCmd.cpp(1433):WscCmd::CallbackProc Enqueue done
                                                                                                             ../../co
mmon/MasterControl/MasterControl.cpp(1370):*** Init Enrolle Stat machine
                                                                        ../../common/MasterControl/MasterControl.cpp(
1379):MC::SwitchModeOn: Starting AP
                                   ../../common/WscCmd/WscCmd.cpp(502):WscCmd:ActualCBThreadProc: CB_MAIN_START_AP re
cd
  ../../common/MasterControl/Info.cpp(73):Info::GetWscConfigPath: called
                                                                        ../../common/WscCmd/WscCmd.cpp(1446):WscCmd::
AP tmp file =cp /tmp/ath/hostapd.open
                                     ../../common/MasterControl/Info.cpp(73):Info::GetWscConfigPath: called
                                                                                                           ../../comm
on/WscCmd/WscCmd.cpp(1433):WscCmd::CallbackProc Enqueue done
                                                            ../../common/MasterControl/MasterControl.cpp(1419):MC::Sw
itchModeOn: Exit
                ../../common/MasterControl/MasterControl.cpp(352):MC::StartStack: Informing app of mode
                                                                                                       ../../common/W
scCmd/WscCmd.cpp(1433):WscCmd::CallbackProc Enqueue done
                                                        ../../common/MasterControl/MasterControl.cpp(371):MC::SwitchM
odeOn: Done callback
                    ../../common/WscCmd/WscCmd.cpp(123):WscCmd:: Stack started ok
                                                                                 ../../common/InbWlan/InbWlan.cpp(288
):In CInbWlan::StaticRecvThread
                               ../../common/InbWlan/InbWlan.cpp(313):CInbWlan::ActualRecvThread Started
                                                                                                       ../../common/I
nbWlan/InbWlan.cpp(317):Inside the thread
                                         ../../common/UdpLib/UdpLib.cpp(210):Entered udp_read
                                                                                             ../../common/WscCmd/WscC
md.cpp(1452):WscCmd::AP Config file copied: cmd=cp /tmp/ath/hostapd.open /tmp/ath/hostapd.conf
                                                                                              ../../common/MasterCont
rol/Info.cpp(73):Info::GetWscConfigPath: called
                                               ../../common/MasterControl/Info.cpp(73):Info::GetWscConfigPath: called

ssid=planexuser
               ../../common/WscCmd/WscCmd.cpp(1621):WscCmd::Params added to AP config file
                                                                                          ../../common/MasterControl/
Info.cpp(73):Info::GetWscConfigPath: called
                                           ../../common/MasterControl/Info.cpp(73):Info::GetWscConfigPath: called
                                                                                                                 ssid
=planexuser
           ../../common/WscCmd/WscCmd.cpp(1621):WscCmd::Params added to AP config file
                                                                                      ../../common/MasterControl/Info
.cpp(374):mb_nwKeySet = 1
                         ../../common/MasterControl/Info.cpp(382):m_nwKey = 
                                                                            ../../common/MasterControl/Info.cpp(73):I
nfo::GetWscConfigPath: called
                             route: SIOC[ADD|DEL]RT: No such process
                                                                    Configuration file: /tmp/ath/hostapd.conf
                                                                                                             ath_netd
ev_stop: The stopping of the running
br0: port 2(ath0) entering disabled state
Using interface ieee80211_ioctl_setparam: CHH Calling ieee80211_open
ath0 with hwaddr 00:90:cc:f4:9c:a6 and ssid &#039;planexuser&#039;
                                                        RF 0x98b0 V 0x1e5795e5
RF 0x98e0 V 0x2008020
RF 0x98b0 V 0x2108421
RF 0x98ec V 0x8
RF 0x98b0 V 0xe73ff17
RF 0x98e0 V 0x420
RF 0x98f0 V 0x1c00018
RF 0x989c V 0x0
RF 0x989c V 0x0
RF 0x989c V 0x0
RF 0x989c V 0xe00000
RF 0x989c V 0x5e0000
RF 0x989c V 0x120000
RF 0x989c V 0x620000
RF 0x989c V 0x20000
RF 0x989c V 0xff0000
RF 0x989c V 0xff0000
RF 0x989c V 0xff0000
RF 0x989c V 0x40ff0000
RF 0x989c V 0x5f0000
RF 0x989c V 0x870000
RF 0x989c V 0xf90000
RF 0x989c V 0x7b0000
RF 0x989c V 0xff0000
RF 0x989c V 0xf50000
RF 0x989c V 0xdc0000
RF 0x989c V 0x110000
RF 0x989c V 0x6100a8
RF 0x989c V 0x423022
RF 0x989c V 0x2014008f
RF 0x989c V 0xc40002
RF 0x989c V 0x3000f2
RF 0x989c V 0x440016
RF 0x989c V 0x410040
RF 0x989c V 0x1805e
RF 0x989c V 0xc0ab
RF 0x989c V 0xe1
RF 0x989c V 0x80
RF 0x989c V 0xd4
RF 0x98d0 V 0x10000f
RF 0x989c V 0x500
RF 0x989c V 0x800
RF 0x98cc V 0xe
Force rf_pwd_icsyndiv to 2 on 2422 (1 0)
RF 0x989c V 0x0
RF 0x989c V 0x0
RF 0x989c V 0x0
RF 0x989c V 0xe00000
RF 0x989c V 0x5e0000
RF 0x989c V 0x120000
RF 0x989c V 0x620000
RF 0x989c V 0x20000
RF 0x989c V 0xff0000
RF 0x989c V 0xff0000
RF 0x989c V 0xff0000
RF 0x989c V 0x40ff0000
RF 0x989c V 0x5f0000
RF 0x989c V 0x870000
RF 0x989c V 0xf90000
RF 0x989c V 0x7b0000
RF 0x989c V 0xff0000
RF 0x989c V 0xf50000
RF 0x989c V 0xdc0000
RF 0x989c V 0x110000
RF 0x989c V 0x6100a8
RF 0x989c V 0x423022
RF 0x989c V 0x2014008f
RF 0x989c V 0xc40002
RF 0x989c V 0x3000f2
RF 0x989c V 0x440016
RF 0x989c V 0x410040
RF 0x989c V 0x1805e
RF 0x989c V 0xc0ab
RF 0x989c V 0xe1
RF 0x989c V 0x80
RF 0x989c V 0xd4
RF 0x98d0 V 0x10000f
--AP ar5416InitUserSettings ahp-&gt;ah_miscMode 0x8
ar5416Reset Setting CFG 0x10a
Country ie is &lt;6&gt;br0: port 2(ath0) entering learning state
../../common/InbWlan/InbWlan.cpp(241):UDP recv m_recvPort[0]= 2048
                                                                  ../../common/InbWlan/InbWlan.cpp(321):WLAN Received
 Data; Length = 5
                 ../../common/InbWlan/InbWlan.cpp(331):PORT received; continueing..
                                                                                   ../../common/InbWlan/InbWlan.cpp(3
17):Inside the thread
                     ../../common/UdpLib/UdpLib.cpp(210):Entered udp_read
                                                                         Flushing old station entries
                                                                                                     Deauthenticate a
ll stations
           l2_packet_receive - recvfrom: Network is down
                                                        l2_packet_receive - recvfrom: Network is down
                                                                                                     ../../common/Mas
terControl/Info.cpp(85):Info::GetAPNumRadio: called
                                                   ../../common/WscCmd/WscCmd.cpp(590):WscCmd: ******AP started
                                                                                                               ../../
common/WscCmd/WscCmd.cpp(616):WscCmd:ActualCBThreadProc: CB_MAIN_PUSH_MODE recd
                                                                               ../../common/WscCmd/WscCmd.cpp(629):
                                                                                                                   **
***** MODE: Access Point *******
                                ../../common/WscCmd/WscCmd.cpp(1131):WscCmd:ActualUIThreadProc: Started.
                                                                                                        ../../common/
InbEap/InbEap.cpp(246):********TimeoutEnable = 0 
                                                 ../../common/StateMachine/RegistrarSM.cpp(105):REGSM: Passthrug=1
                                                                                                                  ../
../common/InbWlan/InbWlan.cpp(452):In CInbWlan::SetBeaconIE  Length = 40
                                                                        ../../common/InbWlan/InbWlan.cpp(395):In CInb
Wlan::SendDataDown buffer Length = 51
                                     ../../common/UdpLib/UdpLib.cpp(173):Entered udp_write
                                                                                          ../../common/InbWlan/InbWla
n.cpp(421):data has been send to lower layer port 0
                                                   ../../common/MasterControl/MasterControl.cpp(1553):MC::SetBeaconIE
: call to trans-&gt;SetBeaconIE() ok
                                 ../../common/InbWlan/InbWlan.cpp(507):In CInbWlan::SetProbeRespIE  Length = 126
                                                                                                                ../..
/common/InbWlan/InbWlan.cpp(395):In CInbWlan::SendDataDown buffer Length = 137
                                                                              ../../common/UdpLib/UdpLib.cpp(173):Ent
ered udp_write
              ../../common/InbWlan/InbWlan.cpp(421):data has been send to lower layer port 0
                                                                                            ../../common/MasterContro
l/MasterControl.cpp(1745):MC::SetProbeRespIE: call to trans-&gt;SetProbeRespIE() ok
                                                                                ../../common/MasterControl/MasterCont
rol.cpp(3044):ENRSM:setProcessStatus:0 
                                       ../../common/StateMachine/StateMachine.cpp(442):SM: Restarting the State Machi
ne
  ../../common/StateMachine/StateMachine.cpp(375):SM: Deleting regData
                                                                      ../../common/StateMachine/StateMachine.cpp(442)
:SM: Restarting the State Machine
                                 ../../common/StateMachine/StateMachine.cpp(375):SM: Deleting regData
                                                                                                     br0: topology ch
ange detected, propagating
br0: port 1(eth0) entering forwarding state
br0: topology change detected, propagating
br0: port 2(ath0) entering forwarding state

 router mips #238 Wed Nov 28 21:03:53 JST 2007 
router login:</code></pre></div><p>Planex vendor firmware Version 1.00.16 Build Date Wed Jul 9 16:45:32 JST 2008:</p><div class="codebox"><pre><code>U-Boot 1.1.4 (Oct 25 2007 - 15:28:59)

AP81 (ar7100) U-boot
DRAM:  
sri
32 MB
Top of RAM usable for U-Boot at: 82000000
Reserving 222k for U-Boot at: 81fc8000
Reserving 192k for malloc() at: 81f98000
Reserving 44 Bytes for Board Info at: 81f97fd4
Reserving 36 Bytes for Global Data at: 81f97fb0
Reserving 128k for boot params() at: 81f77fb0
Stack Pointer at: 81f77f98
Now running in RAM - U-Boot at: 81fc8000
id read 0x100000ff
flash size 8MB, sector count = 128
Flash:  8 MB
*** Warning - bad CRC, using default environment

In:    serial
Out:   serial
Err:   serial
Net:   ag7100_enet_initialize...
Fetching MAC Address from 0x81fedb10
eth0: 00:90:cc:f4:9c:a6
dup 1 speed 100
eth0 up
eth0
====check reset button function====
### main_loop entered: bootdelay=4

### main_loop: bootcmd=&quot;bootm 0xbf050000&quot;
Hit any key to stop autoboot:  0 
## Booting image at bf050000 ...
   Image Name:   Linux Kernel Image
   Created:      2008-07-09  11:26:59 UTC
   Image Type:   MIPS Linux Kernel Image (gzip compressed)
   Data Size:    1358397 Bytes =  1.3 MB
   Load Address: 80060000
   Entry Point:  80301000
   Verifying Checksum ... OK
   Uncompressing Kernel Image ... OK
No initrd
## Transferring control to Linux (at address 80301000) ...
## Giving linux memsize in bytes, 33554432

Starting kernel ...

Linux version 2.6.15--LSDK-7.1.3.58 (ttajima@localhost.localdomain) (gcc version 3.4.4) #226 Wed Jul 9 16:45:32 JST 8
flash_size passed from bootloader = 8
arg 1: console=ttyS0,115200
arg 2: root=31:03
arg 3: rootfstype=jffs2
arg 4: init=/sbin/init
arg 5: mtdparts=ar7100-nor0:256k(u-boot),64k(u-boot-env),1408k(uImage),6208k(rootfs),128k(config),128k(ART)
arg 6: mem=32M
CPU revision is: 00019374
Determined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
User-defined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
Built 1 zonelists
Kernel command line: console=ttyS0,115200 root=31:03 rootfstype=jffs2 init=/sbin/init mtdparts=ar7100-nor0:256k(u-bo 
Primary instruction cache 64kB, physically tagged, 4-way, linesize 32 bytes.
Primary data cache 32kB, 4-way, linesize 32 bytes.
Synthesized TLB refill handler (20 instructions).
Synthesized TLB load handler fastpath (32 instructions).
Synthesized TLB store handler fastpath (32 instructions).
Synthesized TLB modify handler fastpath (31 instructions).
Cache parity protection disabled
PID hash table entries: 256 (order: 8, 4096 bytes)
Using 200.000 MHz high precision timer.
Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
Memory: 29152k/32768k available (1979k kernel code, 3600k reserved, 708k data, 112k init, 0k highmem)
Mount-cache hash table entries: 512
Checking for &#039;wait&#039; instruction...  available.
NET: Registered protocol family 16
SCSI subsystem initialized
usbcore: registered new driver usbfs
usbcore: registered new driver hub
AR7100 GPIOC major 0
JFFS2 version 2.2. (C) 2001-2003 Red Hat, Inc.
Initializing Cryptographic API
io scheduler noop registered
io scheduler deadline registered
Serial: 8250/16550 driver $Revision: #1 $ 1 ports, IRQ sharing disabled
serial8250.0: ttyS0 at MMIO 0x0 (irq = 19) is a 16550A
PPP generic driver version 2.4.2
PPP Deflate Compression module registered
PPP BSD Compression module registered
NET: Registered protocol family 24
Creating 6 MTD partitions on &quot;ar7100-nor0&quot;:
0x00000000-0x00040000 : &quot;u-boot&quot;
0x00040000-0x00050000 : &quot;u-boot-env&quot;
0x00050000-0x001b0000 : &quot;uImage&quot;
0x001b0000-0x007c0000 : &quot;rootfs&quot;
0x007c0000-0x007e0000 : &quot;config&quot;
0x007e0000-0x00800000 : &quot;ART&quot;
Port Status c000004 
ar7100-ehci ar7100-ehci.0: ATH EHCI
ar7100-ehci ar7100-ehci.0: new USB bus registered, assigned bus number 1
ar7100-ehci ar7100-ehci.0: irq 3, io mem 0x1b000000
hcc_params addr 0xbb000108 val 0x6 hcs_params addr 0xbb000104 val 0x10011
ar7100-ehci ar7100-ehci.0: USB 2.0 started, EHCI 1.00, driver 10 Dec 2004
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 1 port detected
Initializing USB Mass Storage driver...
usbcore: registered new driver usb-storage
USB Mass Storage support registered.
Netfilter messages via NETLINK v0.30.
NET: Registered protocol family 2
IP route cache hash table entries: 512 (order: -1, 2048 bytes)
TCP established hash table entries: 2048 (order: 1, 8192 bytes)
TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
TCP: Hash tables configured (established 2048 bind 2048)
TCP reno registered
ip_conntrack version 2.4 (256 buckets, 2048 max) - 212 bytes per conntrack
ip_tables: (C) 2000-2002 Netfilter core team
arp_tables: (C) 2002 David S. Miller
TCP bic registered
NET: Registered protocol family 1
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
ar7100wdt_init: Registering WDT success
VFS: Mounted root (jffs2 filesystem) readonly.
Freeing unused kernel memory: 112k freed
mount: Mounting devpts on /dev/pts failed: No such file or directory
ag7100_mod: module license &#039;unspecified&#039; taints kernel.
AG7100: Length per segment 1536
AG7100: Max segments per packet 1
AG7100: Max tx descriptor count    40
AG7100: Max rx descriptor count    252
AG7100: fifo cfg 3 00780008
AG7100CHH: Mac address for unit 0
AG7100CHH: 00:90:cc:f4:9c:a6
AG7100CHH: Mac address for unit 1
AG7100CHH: 00:90:cc:f4:9c:a7
ag7100_ring_alloc Allocated 480 at 0x803b3200
ag7100_ring_alloc Allocated 3024 at 0x80313000
AG7100: cfg1 0x3f cfg2 0x7014
AG7100: unit 0 phy is up...RMii 100Mbps full duplex
AG7100: pll reg 0x18050014: 0x13000a44  AG7100: cfg_1: 0x7ff0000
AG7100: cfg_2: 0xfff
AG7100: cfg_3: 0x780008
AG7100: cfg_4: 0xffff
AG7100: cfg_5: 0x7efef
AG7100: done cfg2 0x7115 ifctl 0x10000 miictrl 0x13 
Writing 4
ag7100_ring_alloc Allocated 480 at 0x8122ee00
ag7100_ring_alloc Allocated 3024 at 0x8132d000
AG7100: cfg1 0x2f cfg2 0x7014
AG7100: unit 1: phy not up carrier 1
Writing 6
ag7100_ring_free Freeing at 0x803b3200
ag7100_ring_free Freeing at 0x80313000
ag7100_ring_alloc Allocated 480 at 0x803b3200
ag7100_ring_alloc Allocated 3024 at 0x80313000
AG7100: cfg1 0x3f cfg2 0x7014
AG7100: unit 0 phy is up...RMii 100Mbps full duplex
AG7100: pll reg 0x18050014: 0x13000a44  AG7100: cfg_1: 0x7ff0000
AG7100: cfg_2: 0xfff
AG7100: cfg_3: 0x780008
AG7100: cfg_4: 0xffff
AG7100: cfg_5: 0x7efef
AG7100: done cfg2 0x7115 ifctl 0x10000 miictrl 0x13 
Writing 4
ag7100_ring_free Freeing at 0x8122ee00
ag7100_ring_free Freeing at 0x8132d000
ag7100_ring_alloc Allocated 480 at 0x8122ee00
ag7100_ring_alloc Allocated 3024 at 0x8132d000
AG7100: cfg1 0x2f cfg2 0x7014
Writing 6
# EOPNOTSUPP
device eth0 entered promiscuous mode
br0: port 1(eth0) entering learning state
br0: topology change detected, propagating
br0: port 1(eth0) entering forwarding state
killall: udhcpd: no process killed
loEOPNOTSUPP
        no wirelEOPNOTSUPP
ess extensions.

eth0      no wireless extensions.

eth1      no wireless extensions.

br0       no wireless extensions.

Args: 1
ath_hal: 0.9.17.1 (AR5416, REGOPS_FUNC, WRITE_EEPROM, 11D)
wlan: 0.8.4.2 (Atheros/multi-bss)
ath_rate_atheros: Copyright (c) 2001-2005 Atheros Communications, Inc, All Rights Reserved
ath_dev: no version for &quot;_ath_hal_attach&quot; found: kernel tainted.
killall: udhcpc: no process killed
ath_dev: Copyright (c) 2001-2007 Atheros Communications, Inc, All Rights Reserved
ath_ahb: 0.9.4.5 (Atheros/multi-bss)
Howl Revision ID 0xb5
No MBSSID aggregation support=====simple_config_callback registered=====
wifi0: Atheros AR9100 WiSoC: mem=0xb80c0000, irq=2
route: SIOC[ADD|DEL]RT: No such process
wlan: mac acl policy registered
Creating ap for planexuser on
Added ath0 mode master
Interface doesn&#039;t accept private ioctl...
HALDbg (8BE0): Operation not permitted
ieee80211_ioctl_setmode: CHH Mode: 11NGHT40PLUS
ath_set_config: Setting ATH parameter
ath_set_config: Setting ATH parameter
ath_set_config: Setting ATH parameter
ath_set_config: Setting ATH parameter
ath_set_config: Setting ATH parameter
ieee80211_ioctl_setparam: CHH Calling ieee80211_open
Created ath0 mode ap for planexuser
../../common/MasterControl/Info.cpp(66):Info::SetWscConfigPath: called
../../common/MasterControl/Info.cpp(79):Info::SetAPNumRadio: called
../../common/UdpLib/UdpLib.cpp(78):Entered udp_open
../../common/UdpLib/UdpLib.cpp(96):Socket open successful, sd: 4
../../common/UdpLib/UdpLib.cpp(114):Entered udp_bind
../../common/UdpLib/UdpLib.cpp(129):Binding successful for socket [4]
../../common/WscCmd/WscCmd.cpp(425):WscCmd:ActualCBThreadProc: Started
loEOPNOTSUPP
        no wirelEOPNOTSUPP
ess extensions.

eth0      no wireless extensions.

eth1      no wireless extensions.

br0       no wireless extensions.

wifi0     no wireless extensions.

Force rf_pwd_icsyndiv to 1 on 2412 (1 0)
--AP ar5416InitUserSettings ahp-&gt;ah_miscMode 0xc
ar5416Reset Setting CFG 0x10a
Howl Revision ID 0xb5
Country ie is &lt;6&gt;Force rf_pwd_icsyndiv to 2 on 2422 (1 0)
--AP ar5416InitUserSettings ahp-&gt;ah_miscMode 0xc
ar5416Reset Setting CFG 0x10a
Howl Revision ID 0xb5
device ath0 entered promiscuous mode
br0: port 2(ath0) entering learning state
br0: topology change detected, propagating
br0: port 2(ath0) entering forwarding state
ARPING to 192.168.1.1 from 192.168.1.1 via br0
Sent 1 probes (1 broadcast(s))
Received 0 reply
../../common/WscCmd/WscCmd.cpp(1131):WscCmd:ActualUIThreadProc: Started.
../../common/MasterControl/MasterControl.cpp(88):MasterControl constructor
../../common/WscCmd/WscCmd.cpp(243):WscCmd::MC instantiated ok
../../common/Transport/Transport.cpp(79):CTransport Construction
../../common/MasterControl/MasterControl.cpp(209):MC::Init: Init complete ok
../../common/WscCmd/WscCmd.cpp(245):WscCmd::MC intialized ok
../../common/WscCmd/WscCmd.cpp(119):WscCmd::Init ok, starting stack...
../../common/MasterControl/Info.cpp(156):Read WSC Config File:/var/wsc_config.txt
../../common/MasterControl/Info.cpp(171):Info::ReadConfigFile:File open ok
../../common/MasterControl/Info.cpp(1273):Use eth0 address  0:90:cc:f4:9c:a6
../../common/Transport/Transport.cpp(154):In CTransport::ActualCBThreadProc
../../common/Transport/Transport.cpp(158):Calling Dequeue
../../common/MasterControl/MasterControl.cpp(1222):MC::SwitchModeOn: EModeApProxyRegistrar enter
../../common/StateMachine/StateMachine.cpp(71):RegistrarSM constructor
../../common/MasterControl/MasterControl.cpp(2961):***** WPA_PSK = 
../../common/StateMachine/RegistrarSM.cpp(73):InitializeSM, locEna=1, Passthr=1
../../common/InbEap/InbEap.cpp(95):CInbEap Construction
../../common/InbEap/InbEap.cpp(114):Sizeof(WSC_NOTIFY_DATA) = 19
../../common/UdpLib/UdpLib.cpp(78):Entered udp_open
../../common/UdpLib/UdpLib.cpp(96):Socket open successful, sd: 8
../../common/UdpLib/UdpLib.cpp(114):Entered udp_bind
../../common/UdpLib/UdpLib.cpp(129):Binding successful for socket [8]
../../common/InbEap/InbEap.cpp(360):In CInbEap::StaticRecvThread
../../common/InbEap/InbEap.cpp(372):CInbEap::ActualRecvThread Started
../../common/InbWlan/InbWlan.cpp(73):CInbWlan Construction
../../common/UdpLib/UdpLib.cpp(78):Entered udp_open
../../common/UdpLib/UdpLib.cpp(96):Socket open successful, sd: 9
../../common/UdpLib/UdpLib.cpp(114):Entered udp_bind
../../common/UdpLib/UdpLib.cpp(129):Binding successful for socket [9]
../../common/InbWlan/InbWlan.cpp(288):In CInbWlan::StaticRecvThread
../../common/InbWlan/InbWlan.cpp(313):CInbWlan::ActualRecvThread Started
../../common/InbWlan/InbWlan.cpp(317):Inside the thread
../../common/UdpLib/UdpLib.cpp(210):Entered udp_read
../../common/StateMachine/StateMachine.cpp(71):RegistrarSM constructor
../../common/MasterControl/MasterControl.cpp(2757):Generated devPwd: 12345670
../../common/WscCmd/WscCmd.cpp(470):WscCmd:ActualCBThreadProc: CB_MAIN_PUSH_MSG recd
../../common/WscCmd/WscCmd.cpp(1453):WscCmd::CallbackProc Enqueue done
../../common/MasterControl/MasterControl.cpp(1370):*** Init Enrolle Stat machine
../../common/MasterControl/MasterControl.cpp(1379):MC::SwitchModeOn: Starting AP
../../common/WscCmd/WscCmd.cpp(522):WscCmd:ActualCBThreadProc: CB_MAIN_START_AP recd
../../common/MasterControl/Info.cpp(73):Info::GetWscConfigPath: called
../../common/WscCmd/WscCmd.cpp(1466):WscCmd::AP tmp file =cp /var/hostapd.open
../../common/MasterControl/Info.cpp(73):Info::GetWscConfigPath: called
../../common/WscCmd/WscCmd.cpp(1453):WscCmd::CallbackProc Enqueue done
../../common/MasterControl/MasterControl.cpp(1419):MC::SwitchModeOn: Exit
../../common/MasterControl/MasterControl.cpp(352):MC::StartStack: Informing app of mode
../../common/WscCmd/WscCmd.cpp(1453):WscCmd::CallbackProc Enqueue done
../../common/MasterControl/MasterControl.cpp(371):MC::SwitchModeOn: Done callback
../../common/WscCmd/WscCmd.cpp(123):WscCmd:: Stack started ok
../../common/WscCmd/WscCmd.cpp(1472):WscCmd::AP Config file copied: cmd=cp /var/hostapd.open /var/hostapd.conf
../../common/MasterControl/Info.cpp(73):Info::GetWscConfigPath: called
../../common/MasterControl/Info.cpp(73):Info::GetWscConfigPath: called
../../common/WscCmd/WscCmd.cpp(1641):WscCmd::Params added to AP config file
../../common/MasterControl/Info.cpp(73):Info::GetWscConfigPath: called
../../common/MasterControl/Info.cpp(73):Info::GetWscConfigPath: called
../../common/WscCmd/WscCmd.cpp(1641):WscCmd::Params added to AP config file
../../common/MasterControl/Info.cpp(374):mb_nwKeySet = 1
../../common/MasterControl/Info.cpp(382):m_nwKey = 
../../common/MasterControl/Info.cpp(73):Info::GetWscConfigPath: called
ath_netdev_stop: The stopping of the running
br0: port 2(ath0) entering disabled state
ieee80211_ioctl_setparam: CHH Calling ieee80211_open
Force rf_pwd_icsyndiv to 2 on 2422 (1 0)
--AP ar5416InitUserSettings ahp-&gt;ah_miscMode 0xc
ar5416Reset Setting CFG 0x10a
Howl Revision ID 0xb5
Country ie is &lt;6&gt;br0: port 2(ath0) entering learning state
br0: topology change detected, propagating
br0: port 2(ath0) entering forwarding state
../../common/InbWlan/InbWlan.cpp(241):UDP recv m_recvPort[0]= 2048
../../common/InbWlan/InbWlan.cpp(321):WLAN Received Data; Length = 5
../../common/InbWlan/InbWlan.cpp(331):PORT received; continueing..
../../common/InbWlan/InbWlan.cpp(317):Inside the thread
../../common/UdpLib/UdpLib.cpp(210):Entered udp_read
l2_packet_receive - recvfrom: Network is down
l2_packet_receive - recvfrom: Network is down
../../common/MasterControl/Info.cpp(85):Info::GetAPNumRadio: called
../../common/WscCmd/WscCmd.cpp(610):WscCmd: ******AP started
../../common/WscCmd/WscCmd.cpp(636):WscCmd:ActualCBThreadProc: CB_MAIN_PUSH_MODE recd
../../common/WscCmd/WscCmd.cpp(649):
******* MODE: Access Point *******
../../common/WscCmd/WscCmd.cpp(1151):WscCmd:ActualUIThreadProc: Started.
../../common/InbEap/InbEap.cpp(246):********TimeoutEnable = 0 
../../common/StateMachine/RegistrarSM.cpp(105):REGSM: Passthrug=1
../../common/InbWlan/InbWlan.cpp(452):In CInbWlan::SetBeaconIE  Length = 40
../../common/InbWlan/InbWlan.cpp(395):In CInbWlan::SendDataDown buffer Length = 51
../../common/UdpLib/UdpLib.cpp(173):Entered udp_write
../../common/InbWlan/InbWlan.cpp(421):data has been send to lower layer port 0
../../common/MasterControl/MasterControl.cpp(1553):MC::SetBeaconIE: call to trans-&gt;SetBeaconIE() ok
../../common/InbWlan/InbWlan.cpp(507):In CInbWlan::SetProbeRespIE  Length = 126
../../common/InbWlan/InbWlan.cpp(395):In CInbWlan::SendDataDown buffer Length = 137
../../common/UdpLib/UdpLib.cpp(173):Entered udp_write
../../common/InbWlan/InbWlan.cpp(421):data has been send to lower layer port 0
../../common/MasterControl/MasterControl.cpp(1745):MC::SetProbeRespIE: call to trans-&gt;SetProbeRespIE() ok
../../common/MasterControl/MasterControl.cpp(3044):ENRSM:setProcessStatus:0 
../../common/StateMachine/StateMachine.cpp(442):SM: Restarting the State Machine
../../common/StateMachine/StateMachine.cpp(375):SM: Deleting regData
../../common/StateMachine/StateMachine.cpp(442):SM: Restarting the State Machine
../../common/StateMachine/StateMachine.cpp(375):SM: Deleting regData

# uname -a
Linux router 2.6.15--LSDK-7.1.3.58 #226 Wed Jul 9 16:45:32 JST 2008 mips unknown
#
# cat /proc/mtd
dev:    size   erasesize  name
mtd0: 00040000 00010000 &quot;u-boot&quot;
mtd1: 00010000 00010000 &quot;u-boot-env&quot;
mtd2: 00160000 00010000 &quot;uImage&quot;
mtd3: 00610000 00010000 &quot;rootfs&quot;
mtd4: 00020000 00010000 &quot;config&quot;
mtd5: 00020000 00010000 &quot;ART&quot;
#</code></pre></div><p>plug in USB memory stick:</p><div class="codebox"><pre><code># usb 1-1: new high speed USB device using ar7100-ehci and address 4
ehci-9130: hub_port_reset 
scsi1 : SCSI emulation for USB Mass Storage devices
  Vendor:           Model: USB Flash Memory  Rev: PMAP
  Type:   Direct-Access                      ANSI SCSI revision: 00
SCSI device sda: 15667200 512-byte hdwr sectors (8022 MB)
sda: Write Protect is off
sda: assuming drive cache: write through
SCSI device sda: 15667200 512-byte hdwr sectors (8022 MB)
sda: Write Protect is off
sda: assuming drive cache: write through
 sda: sda1
sd 1:0:0:0: Attached scsi removable disk sda
FAT: utf8 is not a recommended IO charset for FAT filesystems, filesystem will be case sensitive!</code></pre></div>											<p class="post-edited">(Last edited by <strong>RoundSparrow</strong> on 27 Mar 2009, 17:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80145">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">RoundSparrow</div>
					<div class="post-datetime">
						23 Jan 2009, 00:24					</div>
				</div>
				<div class="post-content content">
					<p>u-boot tftpboot of &quot;KAMIKAZE (bleeding edge, r14147)&quot; with same positive results of the other Planex AP81 model.&nbsp; Wireless works with ath9k driver.&nbsp; A machine profile in OpenWRT needs to be built for this model to get the cabled network ports and USB working.</p><p>One of these routers is going in the mail to Gabor <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>RoundSparrow</strong> on 23 Jan 2009, 00:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81163">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">RoundSparrow</div>
					<div class="post-datetime">
						5 Feb 2009, 19:22					</div>
				</div>
				<div class="post-content content">
					<p>This router should now be flashable in Trunk with USB support and all.&nbsp; Trying it out today.</p><p>Sadly, it seems in the past week Planex (PCI) may have stop selling this unit in the USA, I will keep checking Amazon and report back if they return to selling them.&nbsp; For now, seems only sold in Japan.&nbsp; Was a unique AP81 router with USB and 8MB of flash for $59.99 free shipping.&nbsp; <a href="http://www.amazon.com/gp/product/B000YDS0YG">http://www.amazon.com/gp/product/B000YDS0YG</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81167">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">RoundSparrow</div>
					<div class="post-datetime">
						5 Feb 2009, 19:43					</div>
				</div>
				<div class="post-content content">
					<p>Upgrade from web GUI firmare flash, first boot:</p><div class="codebox"><pre><code># Restarting system.
.
ï¿½

U-Boot 1.1.4 (Oct 25 2007 - 15:28:59)

AP81 (ar7100) U-boot
DRAM:  
sri
32 MB
Top of RAM usable for U-Boot at: 82000000
Reserving 222k for U-Boot at: 81fc8000
Reserving 192k for malloc() at: 81f98000
Reserving 44 Bytes for Board Info at: 81f97fd4
Reserving 36 Bytes for Global Data at: 81f97fb0
Reserving 128k for boot params() at: 81f77fb0
Stack Pointer at: 81f77f98
Now running in RAM - U-Boot at: 81fc8000
id read 0x100000ff
flash size 8MB, sector count = 128
Flash:  8 MB
*** Warning - bad CRC, using default environment

In:    serial
Out:   serial
Err:   serial
Net:   ag7100_enet_initialize...
Fetching MAC Address from 0x81fedb10
eth0: 00:90:cc:f4:9c:a6
dup 1 speed 100
eth0 up
eth0
====check reset button function====
### main_loop entered: bootdelay=4

### main_loop: bootcmd=&quot;bootm 0xbf050000&quot;
Hit any key to stop autoboot:  0 
## Booting image at bf050000 ...
   Image Name:   MIPS OpenWrt Linux-2.6.28.2
   Created:      2009-02-05  17:21:35 UTC
   Image Type:   MIPS Linux Kernel Image (gzip compressed)
   Data Size:    1053088 Bytes =  1 MB
   Load Address: 80060000
   Entry Point:  80060000
   Verifying Checksum ... OK
   Uncompressing Kernel Image ... OK
No initrd
## Transferring control to Linux (at address 80060000) ...
## Giving linux memsize in bytes, 33554432

Starting kernel ...

Linux version 2.6.28.2 (adminsag@ipcmedialinux1) (gcc version 4.1.2) #2 Thu Feb 5 11:21:21 CST 2009
console [early0] enabled
CPU revision is: 00019374 (MIPS 24Kc)
Atheros AR9132 rev 1 (id:0xb5), CPU:400.000 MHz, AHB:200.000 MHz, DDR:400.000 MHz
Determined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00002000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00002000
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
Kernel command line: rootfstype=squashfs,yaffs,jffs2 noinitrd console=ttyS0,115200 init=/etc/preinit
Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
Writing ErrCtl register=00000000
Readback ErrCtl register=00000000
PID hash table entries: 128 (order: 7, 512 bytes)
Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
Memory: 29716k/32768k available (1816k kernel code, 3052k reserved, 326k data, 132k init, 0k highmem)
SLUB: Genslabs=6, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
Calibrating delay loop... 266.24 BogoMIPS (lpj=1331200)
Mount-cache hash table entries: 512
net_namespace: 480 bytes
NET: Registered protocol family 16
MIPS: machine is Planex MZK-W04NU
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 1024 (order: 1, 8192 bytes)
TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
TCP: Hash tables configured (established 1024 bind 1024)
TCP reno registered
NET: Registered protocol family 1
squashfs: version 3.0 (2006/03/15) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) (SUMMARY)  Â© 2001-2006 Red Hat, Inc.
yaffs Feb  4 2009 16:27:08 Installing. 
msgmni has been set to 58
io scheduler noop registered
io scheduler deadline registered (default)
Serial: 8250/16550 driver1 ports, IRQ sharing disabled
serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A
console handover: boot [early0] -&gt; real [ttyS0]
ag71xx_mdio: probed
eth0: Atheros AG71xx at 0xb9000000, irq 4
eth1: Atheros AG71xx at 0xba000000, irq 5
Atheros AR71xx SPI Controller driver version 0.2.2
m25p80 spi0.0: m25p64 (8192 Kbytes)
Searching for RedBoot partition table in spi0.0 at offset 0x7e0000
Searching for RedBoot partition table in spi0.0 at offset 0x7f0000
No RedBoot partition table detected in spi0.0
Creating 6 MTD partitions on &quot;spi0.0&quot;:
0x00000000-0x00040000 : &quot;u-boot&quot;
0x00040000-0x00050000 : &quot;u-boot-env&quot;
0x00050000-0x001b0000 : &quot;uImage&quot;
0x001b0000-0x007c0000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; set to be root filesystem
mtd: partition &quot;rootfs_data&quot; created automatically, ofs=3E0000, len=3E0000 
0x003e0000-0x007c0000 : &quot;rootfs_data&quot;
0x007c0000-0x007e0000 : &quot;config&quot;
0x007e0000-0x00800000 : &quot;art&quot;
Atheros AR71xx hardware watchdog driver version 0.1.0
TCP vegas registered
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Mounted root (squashfs filesystem) readonly.
Freeing unused kernel memory: 132k freed
Please be patient, while OpenWrt loads ...
Algorithmics/MIPS FPU Emulator v1.5
- preinit -
Press CTRL-C for failsafe
jffs2 not ready yet; using ramdisk
mini_fo: using base directory: /
mini_fo: using storage directory: /tmp/root
- init -

Please press Enter to activate this console. eth0: link up (100Mbps/Full duplex)
device eth0 entered promiscuous mode
br-lan: topology change detected, propagating
br-lan: port 1(eth0) entering forwarding state
cfg80211: Using static regulatory domain info
cfg80211: Regulatory domain: US
        (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
        (2402000 KHz - 2472000 KHz @ 40000 KHz), (600 mBi, 2700 mBm)
        (5170000 KHz - 5190000 KHz @ 40000 KHz), (600 mBi, 2300 mBm)
        (5190000 KHz - 5210000 KHz @ 40000 KHz), (600 mBi, 2300 mBm)
        (5210000 KHz - 5230000 KHz @ 40000 KHz), (600 mBi, 2300 mBm)
        (5230000 KHz - 5330000 KHz @ 40000 KHz), (600 mBi, 2300 mBm)
        (5735000 KHz - 5835000 KHz @ 40000 KHz), (600 mBi, 3000 mBm)
cfg80211: Calling CRDA for country: US
br-lan: port 1(eth0) entering disabled state
br-lan: topology change detected, propagating
br-lan: port 1(eth0) entering forwarding state
cfg80211: Calling CRDA for country: AM
phy0: Atheros AR9100 MAC/BB Rev:0, AR2133 RF Rev:a1, mem=0xb80c0000, irq=2
PPP generic driver version 2.4.2
ip_tables: (C) 2000-2006 Netfilter Core Team
nf_conntrack version 0.5.0 (512 buckets, 2048 max)
CONFIG_NF_CT_ACCT is deprecated and will be removed soon. Please use
nf_conntrack.acct=1 kernel paramater, acct=1 nf_conntrack module option or
sysctl net.netfilter.nf_conntrack_acct=1 to enable it.
jffs2_scan_eraseblock(): End of filesystem marker found at 0x0
jffs2_build_filesystem(): unlocking the mtd device... done.
jffs2_build_filesystem(): erasing all blocks after the end marker... done.
mini_fo: using base directory: /
mini_fo: using storage directory: /jffs



BusyBox v1.11.3 (2009-02-04 16:13:57 CST) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 KAMIKAZE (bleeding edge, r14413) -------------------
  * 10 oz Vodka       Shake well with ice and strain
  * 10 oz Triple sec  mixture into 10 shot glasses.
  * 10 oz lime juice  Salute!
 ---------------------------------------------------
root@OpenWrt:/#</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81191">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">RoundSparrow</div>
					<div class="post-datetime">
						5 Feb 2009, 23:47					</div>
				</div>
				<div class="post-content content">
					<p>Booted latest trunk and inserted a USB flash drive, here is output</p><div class="codebox"><pre><code> |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 KAMIKAZE (bleeding edge, r14413) -------------------
  * 10 oz Vodka       Shake well with ice and strain
  * 10 oz Triple sec  mixture into 10 shot glasses.
  * 10 oz lime juice  Salute!
 ---------------------------------------------------
root@OpenWrt:/# 
root@OpenWrt:/# 
usb 1-1: new high speed USB device using ar71xx-ehci and address 2
usb 1-1: configuration #1 chosen from 1 choice
scsi0 : SCSI emulation for USB Mass Storage devices
scsi 0:0:0:0: Direct-Access              USB Flash Memory PMAP PQ: 0 ANSI: 0 CCS
sd 0:0:0:0: [sda] 15667200 512-byte hardware sectors: (8.02 GB/7.47 GiB)
sd 0:0:0:0: [sda] Write Protect is off
sd 0:0:0:0: [sda] Assuming drive cache: write through
sd 0:0:0:0: [sda] 15667200 512-byte hardware sectors: (8.02 GB/7.47 GiB)
sd 0:0:0:0: [sda] Write Protect is off
sd 0:0:0:0: [sda] Assuming drive cache: write through
 sda: sda1
sd 0:0:0:0: [sda] Attached SCSI removable disk
sd 0:0:0:0: Attached scsi generic sg0 type 0
yaffs: dev is 8388609 name is &quot;sda1&quot;
yaffs: passed flags &quot;&quot;
yaffs: Attempting MTD mount on 8.1, &quot;sda1&quot;
yaffs: dev is 8388609 name is &quot;sda1&quot;
yaffs: passed flags &quot;&quot;
yaffs: Attempting MTD mount on 8.1, &quot;sda1&quot;

root@OpenWrt:/# 
root@OpenWrt:/# df -h
Filesystem                Size      Used Available Use% Mounted on
rootfs                    2.9M      2.9M         0 100% /
/dev/root                 2.9M      2.9M         0 100% /rom
tmpfs                    14.6M     48.0k     14.5M   0% /tmp
tmpfs                   512.0k         0    512.0k   0% /dev
/dev/mtdblock4            3.3M    276.0k      3.0M   8% /jffs
mini_fo:/jffs             2.9M      2.9M         0 100% /
/dev/sda1                 7.5G      2.5G      4.9G  34% /mnt/sda1
root@OpenWrt:/#</code></pre></div><p>Here is some performance info on the USB of the AP81 platform.&nbsp; From a USB flash drive, copy of file size&nbsp; &nbsp;1031322502 here is time:<br /></p><div class="codebox"><pre><code>root@OpenWrt:/tmp/root/mnt/sda1# time cp bigfile1 /dev/null
real    1m 0.04s
user    0m 0.23s
sys     0m 11.51s</code></pre></div>											<p class="post-edited">(Last edited by <strong>RoundSparrow</strong> on 5 Feb 2009, 23:57)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81700">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">RoundSparrow</div>
					<div class="post-datetime">
						12 Feb 2009, 09:06					</div>
				</div>
				<div class="post-content content">
					<p>FYI:&nbsp; Amazon.com in USA has these back in stock for $59.99 with free shipping.&nbsp; The LAN ports are still not working... and ath9k wireless needs some maturing...&nbsp; but anyone wanting to work on 802.11n support in OpenWRT should consider this router.&nbsp; Right now it would be an ideal USB host box for LAN... as the USB and WAN Ethernet port work great.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81967">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">hkubota</div>
					<div class="post-datetime">
						16 Feb 2009, 14:11					</div>
				</div>
				<div class="post-content content">
					<p>I need a Draft-n compatible router and since this one is not only available, but also cheap and can run OpenWRT and it has USB and a lot of flash, that was an easy choice.</p><p>2 questions:</p><p>1. Is WDS working? If not, is client mode stable? AP is the only mode I don&#039;t use at all.</p><p>2. Compared with a Broadcom 4704@266 MHz, how &#039;fast&#039; is that 400MHz Atheros CPU?<br />I understand we are moving at the lower bound of useable CPUs here (for running Linux),<br />so I am not expecting a speed daemon. I just wonder if it&#039;s about 50% faster as the MHz<br />would expect, or much faster or possibly be even slower. I ask because if it&#039;s at least as<br />fast, I&#039;ll misuse that router as a wireless Linux embedded controller. For that much money<br />you don&#039;t even get a 802.11g embedded module...</p><p>Harald</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81982">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">RoundSparrow</div>
					<div class="post-datetime">
						16 Feb 2009, 17:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hkubota wrote:</cite><blockquote><p>1. Is WDS working? If not, is client mode stable? AP is the only mode I don&#039;t use at all.</p><p>2. Compared with a Broadcom 4704@266 MHz, how &#039;fast&#039; is that 400MHz Atheros CPU?<br />I understand we are moving at the lower bound of useable CPUs here (for running Linux),<br />so I am not expecting a speed daemon. I just wonder if it&#039;s about 50% faster as the MHz<br />would expect, or much faster or possibly be even slower. I ask because if it&#039;s at least as<br />fast, I&#039;ll misuse that router as a wireless Linux embedded controller. For that much money<br />you don&#039;t even get a 802.11g embedded module...</p></blockquote></div><p>Hello Harald,</p><p>Welcome to the bleeding edge... WDS doesn&#039;t exist at all in ath9k right now.&nbsp; It is not a part of the 802.11n standard.&nbsp; they are open to adding it, but it isn&#039;t getting much current attention.&nbsp; As for client mode, the ath9k driver on this router is actually running poorly in client mode, limiting to 800Kb/second... this issue is being reported to developers and I&#039;m hoping within a few weeks that will be resolved.</p><p>I have not benchmarked the CPU.&nbsp; Can you suggest an easy way to do this... I have a Broadcom LinkSys WRT310N I can compare with... both running OpenWRT.</p><p>Right now we are still early in the 802.11n device driver game.&nbsp; The more people testing and using I think the more likely we have good results... and you clearly see the hardware is attractive for the price. Yet, it isn&#039;t ready yet - but the more attention on the subject, the better.</p><p>P.S. The vendor firmware that comes with this router, 2.6.15 kernel with binary-only madwifi - should work with WDS, but I haven&#039;t tested it.&nbsp; It does not have the client mode performance issues.&nbsp; But you would be giving up OpenWRT.&nbsp; I&#039;m just trying to clarify that the real issue is the level of maturity in the newer totally-free Ath9K driver vs. the older and binary-only madwifi driver.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82179">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">hkubota</div>
					<div class="post-datetime">
						19 Feb 2009, 07:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>RoundSparrow wrote:</cite><blockquote><p>I have not benchmarked the CPU.&nbsp; Can you suggest an easy way to do this... I have a Broadcom LinkSys WRT310N I can compare with... both running OpenWRT.</p><p>Right now we are still early in the 802.11n device driver game.&nbsp; The more people testing and using I think the more likely we have good results... and you clearly see the hardware is attractive for the price. Yet, it isn&#039;t ready yet - but the more attention on the subject, the better.</p><p>P.S. The vendor firmware that comes with this router, 2.6.15 kernel with binary-only madwifi - should work with WDS, but I haven&#039;t tested it.&nbsp; It does not have the client mode performance issues.&nbsp; But you would be giving up OpenWRT.&nbsp; I&#039;m just trying to clarify that the real issue is the level of maturity in the newer totally-free Ath9K driver vs. the older and binary-only madwifi driver.</p></blockquote></div><p>As for the benchmark: anything simple comparable will do. E.g.:</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # date ; i=0; while [ $i -lt 50000 ] ; do let i=i+1 ; done ; date<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Thu Feb 19 14:16:30 JST 2009<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Thu Feb 19 14:16:57 JST 2009</p><p>That&#039;s on a BCM4704@266MHz using /bin/ash from busybox-1.4.2-2. If your busybox is not identical, then this is not comparable to yours, but if you have the same OpenWRT release on both of your routers, it&#039;s very comparable and would give me a good idea about what performance to expect.</p><p>800kB/S is not too bad for a broken client mode and with a good chance of it being fixed. No WDS is a bummer though.<br />Until WDS is working, client mode will do and I&#039;m helping out where I can to get it into a usable state, although my possibilities are limited to testing and reporting results.</p><p>Missing out OpenWRT would not work: it&#039;s the main reason I want that router. The built-in applications are not &#039;good enough&#039; for me since I usually have other opinions on how this and that works (e.g. I like NFS much more than CIFS since there&#039;s no Windows machine in this house, but lots of Linux and Macs here).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82648">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">RoundSparrow</div>
					<div class="post-datetime">
						25 Feb 2009, 19:42					</div>
				</div>
				<div class="post-content content">
					<p>Good news, I think Gabor just checked in support for the LAN ports on this router!&nbsp; see: <a href="https://dev.openwrt.org/changeset/14655/trunk">https://dev.openwrt.org/changeset/14655/trunk</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82721">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">RoundSparrow</div>
					<div class="post-datetime">
						26 Feb 2009, 18:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hkubota wrote:</cite><blockquote><p>As for the benchmark: anything simple comparable will do. E.g.:</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # date ; i=0; while [ $i -lt 50000 ] ; do let i=i+1 ; done ; date<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Thu Feb 19 14:16:30 JST 2009<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Thu Feb 19 14:16:57 JST 2009</p></blockquote></div><p>I haven&#039;t had a chance to tinker on the Broadcom, but here is with the Atheros AP81 (I used the Trendnet, but shouldn&#039;t matter)&nbsp; <strong>NOTE:&nbsp; I tippled the loop for more accuracy</strong></p><div class="codebox"><pre><code>root@OpenWrt:/# date ; i=0; while [ $i -lt 150000 ] ; do let i=i+1 ; done ; date         
Thu Feb 26 16:33:00 UTC 2009
Thu Feb 26 16:33:21 UTC 2009
root@OpenWrt:/# uname -a
Linux OpenWrt 2.6.28.6 #5 Thu Feb 26 01:15:11 CST 2009 mips unknown
root@OpenWrt:/# cat /proc/cpuinfo
system type             : Atheros AR9130 rev 1 (id:0xb4)
machine                 : TRENDnet TEW-632BRP
processor               : 0
cpu model               : MIPS 24Kc V7.4
BogoMIPS                : 266.24
wait instruction        : yes
microsecond timers      : yes
tlb_entries             : 16
extra interrupt vector  : yes
hardware watchpoint     : yes, count: 4, address/irw mask: [0x0000, 0x0ff8, 0x0ffb, 0x0ff8]
ASEs implemented        : mips16
shadow register sets    : 1
core                    : 0
VCED exceptions         : not available
VCEI exceptions         : not available</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82797">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">GizmoGuy</div>
					<div class="post-datetime">
						27 Feb 2009, 15:52					</div>
				</div>
				<div class="post-content content">
					<p>Hi RoundSparrow,</p><p>How does the Atheros CPU do &quot;heatwise&quot; without a cooling solution @400mhz?<br />Does it seem to run cool enough?</p><p>~</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82800">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">RoundSparrow</div>
					<div class="post-datetime">
						27 Feb 2009, 16:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>GizmoGuy wrote:</cite><blockquote><p>How does the Atheros CPU do &quot;heatwise&quot; without a cooling solution @400mhz?<br />Does it seem to run cool enough?</p></blockquote></div><p>It runs hot.&nbsp; But I don&#039;t know how serious it is as I&#039;ve not used my routers directly for more than just&nbsp; a few hours of testing.&nbsp; the ath9k driver just isn&#039;t&#039; working well enough yet, and the vendor firmware isn&#039;t to my liking ... and my main AP I run another device <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>I personally think some people overreact to the heat... to me there must be carefully studied proof of instability.&nbsp; just high temp alone does not mean to me that it is exceeding the design. I think it is designed to run rather hot, they put no heatsink on it - none of the models I have seen for the AP81 routers do.&nbsp; the ar71xx chip runs up to 680Mhz with some overclocking to 800... so Atheros was pretty conservative putting the ar9130/ar9132 at 400Mhz.</p><p>Again, I do not know how serious an issue it is.&nbsp; A comprehensive review of one of these routers shows they don&#039;t draw more than 6 watts of power (gigabit LAN ports draw more power, which the Planex does not have).&nbsp; See here: <a href="http://en.network01.net/modules/newbb/viewtopic.php?topic_id=15&amp;forum=2">http://en.network01.net/modules/newbb/v … mp;forum=2</a></p><p>Since Planex is on vertical I think less an issue... the similar Trendnet is poorly ventilated case in my view.</p><p>Many brands and models of routers overheat.&nbsp; Even the modern Linksys 310N (which I have) has many people post reports on Linksys forum of overheating (Broadcom 266Mhz).&nbsp; But they have actual failures associated (disconnects, such).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82808">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">GizmoGuy</div>
					<div class="post-datetime">
						27 Feb 2009, 17:39					</div>
				</div>
				<div class="post-content content">
					<p>Hey, thanks for all the good info. I have tons of heatsinks laying around, so I&#039;ll probably just slap one on mine. Even if its within specs, I get that comfy cozy feeling knowing its just a little farther from crossing the danger line...thats obviously just a personal preference, hehe&nbsp; <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>I ordered one and it should be here next week sometime, so I expect you to have all these bugs ironed out by then, ok? lol, j/k.</p><p>I really appreciate all the effort you put into this. I wish I was better at code, I would enjoy contributing more.</p><p>~</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p83190">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">RoundSparrow</div>
					<div class="post-datetime">
						4 Mar 2009, 09:54					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve uploaded a pre-built firmware for this router based off SVN 14745 here: <a href="http://sites.google.com/site/stephengutknecht/">http://sites.google.com/site/stephengutknecht/</a></p><p>I suggest keeping up on the Trendnet forum thread, most of it applies.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p83243">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">thalience</div>
					<div class="post-datetime">
						5 Mar 2009, 00:41					</div>
				</div>
				<div class="post-content content">
					<p>Just got one of these in the mail today <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>RoundSparrow&#039;s pre-built package works for me. Wireless performance is acceptable, but I have not measured cpu load when transferring files yet.</p><p>PS. Thanks, RoundSparrow.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p83458">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">RoundSparrow</div>
					<div class="post-datetime">
						8 Mar 2009, 17:41					</div>
				</div>
				<div class="post-content content">
					<p>I uploaded a new build today: <a href="http://sites.google.com/site/stephengutknecht/">http://sites.google.com/site/stephengutknecht/</a>&nbsp; The wireless drivers should be a little better.&nbsp; look for openwrt_14786-manyUSB-ar71xx-mzk-w04nu-squashfs file.&nbsp; I included a large number of USB device drivers... webcams, serial port, printer... just to tinker on.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p83518">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">hkubota</div>
					<div class="post-datetime">
						9 Mar 2009, 12:56					</div>
				</div>
				<div class="post-content content">
					<p>Stupid question: How to open this case? I&#039;m sure there are randomly places plastic snappers inside, yet I have no idea where exactly.<br />Is there a picture available which shows the location of those or a known working method to open one of those?</p><p>Brute force can open everything, but then it looks ugly as hell and the plastic case is nice and shiny still, and if at all possible, I&#039;d like to keep it like that.</p><p>For mac mini there are instructions how to open it all over the place...is there something for the Planex routers? Especially for the MZK-W04NU?</p><p>Harald</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p83527">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">hkubota</div>
					<div class="post-datetime">
						9 Mar 2009, 14:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>RoundSparrow wrote:</cite><blockquote><p>I uploaded a new build today: <a href="http://sites.google.com/site/stephengutknecht/">http://sites.google.com/site/stephengutknecht/</a>&nbsp; The wireless drivers should be a little better.&nbsp; look for openwrt_14786-manyUSB-ar71xx-mzk-w04nu-squashfs file.&nbsp; I included a large number of USB device drivers... webcams, serial port, printer... just to tinker on.</p></blockquote></div><p>Is the config file available for this build? When I created an OpenWRT build for my BCM4704 router (see <a href="http://wiki.openwrt.org/OpenWrtDocs/Hardware/Buffalo/WZR-RS-G54HP)">http://wiki.openwrt.org/OpenWrtDocs/Har … -RS-G54HP)</a>, I found it very useful to have a proper example to start working on.</p><p>Harald</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p83701">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">RoundSparrow</div>
					<div class="post-datetime">
						11 Mar 2009, 21:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hkubota wrote:</cite><blockquote><p>Stupid question: How to open this case? I&#039;m sure there are randomly places plastic snappers inside, yet I have no idea where exactly.<br />Is there a picture available which shows the location of those or a known working method to open one of those?</p><p>Brute force can open everything, but then it looks ugly as hell and the plastic case is nice and shiny still, and if at all possible, I&#039;d like to keep it like that.</p></blockquote></div><p>I suck at opening cases, but this one I didn&#039;t have that much problem.&nbsp; Study the seams. The side with the PCI logo printed on it comes off like a lid.&nbsp; Right above the LAN/WAN/USB ports is the seam... and there are 3 tabs.&nbsp; 1) Left side of the power jack, 2) left side of LAN port #2,&nbsp; 3) right of the WAN port.</p><p>BTW, eCost.com in USA has these for $44.99 but charges for shipping.&nbsp; i found the best shipping price comes if you purchase 6 of them... comes out significantly less than Amazon.com&#039;s price.&nbsp; Maybe get your local users group together on a group purchase.&nbsp; <a href="http://www.ecost.com/Detail.aspx?edp=43510668">http://www.ecost.com/Detail.aspx?edp=43510668</a>&nbsp; (If you aren&#039;t an experienced mail order vendor, I highly recommend you go with Amazon, eCost isn&#039;t the best).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p83742">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">hkubota</div>
					<div class="post-datetime">
						12 Mar 2009, 15:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>RoundSparrow wrote:</cite><blockquote><p>I suck at opening cases, but this one I didn&#039;t have that much problem.&nbsp; Study the seams. The side with the PCI logo printed on it comes off like a lid.&nbsp; Right above the LAN/WAN/USB ports is the seam... and there are 3 tabs.&nbsp; 1) Left side of the power jack, 2) left side of LAN port #2,&nbsp; 3) right of the WAN port.</p></blockquote></div><p>Indeed, opening was not that difficult. All I needed was a knife and bend the cover in all possible directions.<br />There are 7 plastic snappers though: 3 in the back as described, plus 2 on the bottom and top side. Simple bending (about 1mm) of the main plastic body outwards will unsnap them.</p><p>I broke 1.&nbsp; 6 to go :-)</p><p>I&#039;m sure the serial port is described somewhere, but where? J1 looks like the serial port, Pin 4 is ground. Where&#039;s RxD and TxD?</p><p>Harald</p>											<p class="post-edited">(Last edited by <strong>hkubota</strong> on 13 Mar 2009, 15:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p84257">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">whuddell</div>
					<div class="post-datetime">
						20 Mar 2009, 15:14					</div>
				</div>
				<div class="post-content content">
					<p>Would you be willing to post the .config you used to compile the manyUSB version on the firware that you compiled.&nbsp; I&#039;d like to do some testing on my own with this router.&nbsp; Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p84261">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">Eri Hyva</div>
					<div class="post-datetime">
						20 Mar 2009, 18:28					</div>
				</div>
				<div class="post-content content">
					<p>Is Planex MZK-W04N</p><p><a href="http://www.planex.net/product/router/mzk-w04n.htm">http://www.planex.net/product/router/mzk-w04n.htm</a><br /><a href="http://www.ecost.com/Detail.aspx?edp=43042067&amp;navid=155441519">http://www.ecost.com/Detail.aspx?edp=43 … =155441519</a><br />$29,99 <br />based on Atheros AP81, too?</p><p>or only</p><p><a href="http://www.planex.net/product/router/mzk-w04nu.htm">http://www.planex.net/product/router/mzk-w04nu.htm</a><br /><a href="http://www.ecost.com/Detail.aspx?edp=43510668&amp;navid=155441519">http://www.ecost.com/Detail.aspx?edp=43 … =155441519</a><br />$49,99 <br />Planex MZK-W04NU, which has one USB port.</p><p>I don&#039;t need any more USB ports, so why to pay for them <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />Thanks. <br />I prefer this vertical stand to horizontal stands.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p84287">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">hkubota</div>
					<div class="post-datetime">
						21 Mar 2009, 01:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Eri Hyva wrote:</cite><blockquote><p>Is Planex MZK-W04N</p><p><a href="http://www.planex.net/product/router/mzk-w04n.htm">http://www.planex.net/product/router/mzk-w04n.htm</a><br /><a href="http://www.ecost.com/Detail.aspx?edp=43042067&amp;navid=155441519">http://www.ecost.com/Detail.aspx?edp=43 … =155441519</a><br />$29,99 <br />based on Atheros AP81, too?<br />[...]<br />Planex MZK-W04NU, which has one USB port.</p></blockquote></div><p>Both look identical from the outside (excluding the connectors in the back and the WPS button).<br />Both can stand vertically or lay flat down.<br />But the inside is different. Different CPU and radio.</p><p>Harald</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p84288">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">tusc</div>
					<div class="post-datetime">
						21 Mar 2009, 01:05					</div>
				</div>
				<div class="post-content content">
					<p>I just received this router and cannot seem to upload the firmware properly via the web ui? I&#039;ve tried to upload openwrt_14786-manyUSB-ar71xx-mzk-w04nu-squashfs.webui from your site but the web interface seems to timeout. Checking the router log file there&#039;s an error about a cgi timeout. Anything special I need to do? Thanks.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 3</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=18434&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=18434&amp;p=3.html">3</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>