<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> SDK Backfire x86_64 for ar71xx</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p164769">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">jlanza</div>
					<div class="post-datetime">
						17 Apr 2012, 13:34					</div>
				</div>
				<div class="post-content content">
					<p>Is there any intention to publish a SDK x86_64 for backfire and ar71xx architecture? For Kamikaze there is one <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>I know I can compile it by myself, but I have some questions. Does the SDK have any relation with the buildroot configuration (make menuconfig) besides the architecture selected and gcc toolchain. Should then I get the config file from the repositories and use it as the initial one?</p><p>Any comment is welcome.</p><p>TA <br />Jorge</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p164771">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						17 Apr 2012, 13:50					</div>
				</div>
				<div class="post-content content">
					<p>Why do you need a x86_64 version? We publish a x86 one which will work just fine on x86_64 if you install ia32-libs on your distro.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p164773">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">jlanza</div>
					<div class="post-datetime">
						17 Apr 2012, 14:03					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jow wrote:</cite><blockquote><p>Why do you need a x86_64 version? We publish a x86 one which will work just fine on x86_64 if you install ia32-libs on your distro.</p></blockquote></div><p>After posting I was thinking so <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> Post without thinking too much about it. </p><p>I will check it out, but I guess you are right as this is the way I proceed to run x86 apps.</p><p>TA</p><p>Edit:<br />I have some problems with svn access. It seems that svn.openwrt.org hangs when accesing some directories. Does it happens to others? I have checked in several computers and it is the same for all.</p>											<p class="post-edited">(Last edited by <strong>jlanza</strong> on 17 Apr 2012, 14:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p164776">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						17 Apr 2012, 14:35					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jlanza wrote:</cite><blockquote><p>Edit:<br />I have some problems with svn access. It seems that svn.openwrt.org hangs when accesing some directories. Does it happens to others? I have checked in several computers and it is the same for all.</p></blockquote></div><p>no</p><div class="codebox"><pre><code>svn co svn://svn.openwrt.org/openwrt/trunk/</code></pre></div><p>works fine here:</p><div class="codebox"><pre><code>Checked out revision 31328.</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p164785">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">jlanza</div>
					<div class="post-datetime">
						17 Apr 2012, 16:27					</div>
				</div>
				<div class="post-content content">
					<p>Concerning the SVN it is my network... I have check at home and it works fine, but don&#039;t know why it doesn&#039;t at office. I will tunnel ssh to home.</p><p>Thanks all.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p164802">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">jlanza</div>
					<div class="post-datetime">
						17 Apr 2012, 19:48					</div>
				</div>
				<div class="post-content content">
					<p>Target system: TL-703N<br />SDK for ar71xx </p><p>I&#039;ve been trying to compile my package and I&#039;ve found several problems, that I don&#039;t know if they are my fault (probably) or a bug:</p><p>1.- When trying to compile package from feeds (nano for instance) I get the following error:<br /></p><div class="codebox"><pre><code>user@fuj2:~/OpenWrt-SDK-ar71xx-for-Linux-i686-gcc-4.3.3+cs_uClibc-0.9.30.1$ make package/nano/compile V=99
Collecting package info: done
make[3]: Entering directory `/home/user/OpenWrt/OpenWrt-SDK-ar71xx-for-Linux-i686-gcc-4.3.3+cs_uClibc-0.9.30.1/scripts/config&#039;
make[3]: *** No rule to make target `mconf.o&#039;, needed by `mconf&#039;.  Stop.
make[3]: Leaving directory `/home/user/OpenWrt/OpenWrt-SDK-ar71xx-for-Linux-i686-gcc-4.3.3+cs_uClibc-0.9.30.1/scripts/config&#039;
make[2]: *** [scripts/config/mconf] Error 2
make[1]: *** [.config] Error 2
make: *** [package/nano/compile] Error 2</code></pre></div><p>I have fix this by applying the following patch:</p><div class="codebox"><pre><code>--- scripts/config/lkc.h        2011-11-14 10:34:44.000000000 +0100
+++ ../lkc.h    2012-04-17 18:17:59.699385084 +0200
@@ -88,6 +88,8 @@
 struct gstr {
        size_t len;
        char  *s;
+
+       int max_width;
 };
 struct gstr str_new(void);
 struct gstr str_assign(const char *s);</code></pre></div><p>Then entering the scripts/config directory --&gt; make clean &amp;&amp; make</p><p>After that a menu is displayed when I execute --&gt; <br /></p><div class="codebox"><pre><code>$ ./scripts/feed update -a
$ ./scripts/feed install nano
$ make package/nano
......
Configuring NCURSES 5.7 ABI 5 (Tue Apr 17 19:04:04 CEST 2012)
checking build system type... x86_64-pc-linux-gnu
checking host system type... configure: error: /bin/sh ./config.sub -openwrt-linux failed</code></pre></div><p>And the compilation procedure is stopped.</p><p>2.- As the above didn&#039;t work I decided to start again from scratch with a package made by myself (gsoap package). I have managed to compile gsoap using the toolchain for ar71xx from the trunk. However when I run it as a package using the SDK for Backfire I get the following error in the config.log:<br /></p><div class="codebox"><pre><code>/home/user/OpenWrt-SDK-ar71xx-for-Linux-i686-gcc-4.3.3+cs_uClibc-0.9.30.1/staging_dir/toolchain-mips_r2_gcc-4.3.3+cs_uClibc-0.9.30.1/usr/lib/libc.so: undefined reference to `_dl_app_init_array&#039;
/home/user/OpenWrt-SDK-ar71xx-for-Linux-i686-gcc-4.3.3+cs_uClibc-0.9.30.1/staging_dir/toolchain-mips_r2_gcc-4.3.3+cs_uClibc-0.9.30.1/usr/lib/libc.so: undefined reference to `_dl_app_fini_array&#039;
/home/user/OpenWrt-SDK-ar71xx-for-Linux-i686-gcc-4.3.3+cs_uClibc-0.9.30.1/staging_dir/toolchain-mips_r2_gcc-4.3.3+cs_uClibc-0.9.30.1/usr/lib/libc.so: undefined reference to `_dl_loaded_modules&#039;
collect2: ld returned 1 exit status</code></pre></div><p>I don&#039;t know what I&#039;m doing wrong. A while ago I did a similar procedure to compile some packages for brcm and kamikaze without such issues <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>Any help is more than welcome.</p><p>P.D.: I will try tomorrow to do it with the complete build system. But today I have tried and I got also problems.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p164816">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						17 Apr 2012, 22:08					</div>
				</div>
				<div class="post-content content">
					<p>1) never seen errors like that, seems your host system is really odd (strange shell?)<br />2) known issue, see <a href="https://dev.openwrt.org/ticket/10822">https://dev.openwrt.org/ticket/10822</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p164823">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">jlanza</div>
					<div class="post-datetime">
						18 Apr 2012, 00:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jow wrote:</cite><blockquote><p>1) never seen errors like that, seems your host system is really odd (strange shell?)</p></blockquote></div><p>I just get the feeds updated and then install nano. After that I run the command to make nano and ... voila the error.</p><div class="quotebox"><cite>jow wrote:</cite><blockquote><p>2) known issue, see <a href="https://dev.openwrt.org/ticket/10822">https://dev.openwrt.org/ticket/10822</a></p></blockquote></div><p>I will therefore download the source and compile everything from scratch.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p164899">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">jlanza</div>
					<div class="post-datetime">
						18 Apr 2012, 10:23					</div>
				</div>
				<div class="post-content content">
					<p>Hi again,</p><p>I don&#039;t know what I&#039;m doing wrong. I have compile the complete platform from buildroot to generate the OpenWrt SDK.</p><p>This are the steps followed to use the resulting SDK to build nano: (ubuntu 10.10 x64) <br />$ tar xfj OpenWrt-SDK<br />$ cd OpenWrt-SDK<br />$ ./scripts/feeds update -a<br />$ ./scripts/feeds install nano<br />$ make package/nano V=99</p><p>And executing nano I get a screen similar to the one with make menuconfig --&gt; OpenWrt Attitude Adjustment (r31340) Configuration<br />I enable the nano and libncurses packages and then save and exit.</p><p>After that I get: make[1]: *** No rule to make target `package/nano&#039;.&nbsp; Stop.</p><p>TA</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p165106">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">jlanza</div>
					<div class="post-datetime">
						19 Apr 2012, 20:44					</div>
				</div>
				<div class="post-content content">
					<p>Finally the solution has been to do everything from the svn sources. I have created my own image compiling from scratch. It took me more time, but at least it works. </p><p>I have tried using the SDK but haven&#039;t been able to make it working. The Image generator works as expected (I have added my own packages).</p><p>Let&#039;s see if some day I find out what can be happening with the sdk <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>Thanks all for your help.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p165113">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						19 Apr 2012, 21:46					</div>
				</div>
				<div class="post-content content">
					<p>The correct make target would&#039;ve been &quot;make package/nano/compile V=99&quot;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p165183">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">jlanza</div>
					<div class="post-datetime">
						20 Apr 2012, 10:03					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jow wrote:</cite><blockquote><p>The correct make target would&#039;ve been &quot;make package/nano/compile V=99&quot;</p></blockquote></div><p>My fault when putting the line in the forum. I did try like that. Actually this is the way I&#039;m doing it now using my custom system from BuildRoot. When I finish my developments I will try again using the SDK (probably in another computer, just in case it is something that is not well configured on mine)</p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p165220">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">jlanza</div>
					<div class="post-datetime">
						20 Apr 2012, 16:23					</div>
				</div>
				<div class="post-content content">
					<p>I think I found out some clues that might help finding the problem.</p><p>It seems that one of the problems using my compiled SDK seems that the target architecture is not well defined. In the error logs I got the following:</p><p>make[3]: openwrt-linux-gcc: Command not found<br />make[3]: [uncompr.o] Error 127 (ignored)<br />openwrt-linux-gcc -fhonour-copts -Wno-error=unused-but-set-variable&nbsp; &nbsp;-c -o zutil.o zutil.c<br />make[3]: openwrt-linux-gcc: Command not found<br />make[3]: [zutil.o] Error 127 (ignored)<br />openwrt-linux-ar rc libz.a adler32.o compress.o crc32.o deflate.o gzclose.o gzlib.o gzread.o gzwrite.o infback.o inffast.o inflate.o inftrees.o trees.o uncompr.o zutil.o <br />make[3]: openwrt-linux-ar: Command not found<br />make[3]: [libz.a] Error 127 (ignored)<br />make[3]: *** No rule to make target `libz.so.1.2.5&#039;.&nbsp; Stop.<br />make[3]: Leaving directory `/home/user/OpenWrt-SDK-ar71xx-for-Linux-x86_64-gcc-4.6-linaro_uClibc-0.9.33/build_dir/target-_-/zlib-1.2.5&#039;</p><p>As you can see it seems that the target architecutre is not well included in the gcc and other commands:<br />mips-openwrt-linux-gcc</p><p>Besides that the directory is targer-_- in stead of the toolchain name.</p><p>See you</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>