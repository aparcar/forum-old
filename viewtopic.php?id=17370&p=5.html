<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> New Broadcom BCM63xx codebase with GPL&#039;d Ethernet and USB support</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 8 Feb 2018 and 7 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 5 of 30</div><nav><ul><li><a href="viewtopic.php%3Fid=17370&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=17370&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=17370&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li><li><a href="viewtopic.php%3Fid=17370&amp;p=6.html">6</a></li><li><a href="viewtopic.php%3Fid=17370&amp;p=7.html">7</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=17370&amp;p=30.html">30</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p77036">
				<div class="post-metadata">
					<div class="post-num">Post #101</div>
					<div class="post-author">spirit</div>
					<div class="post-datetime">
						25 Nov 2008, 09:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>misteroX wrote:</cite><blockquote><p>Even after i have inserted the required parameters, at every boot i see this.</p><p>I&#039;m unable to send something via tftp.</p><p>what can it be? </p><p>Thanks<br />MisteroX</p></blockquote></div><p>Take a look at the OpenWrtDocs/Hardware/Netgear/DG834GT:<br /></p><div class="codebox"><pre><code>Board IP address                : 192.168.1.1:ffffff00
Host IP address                 : 192.168.1.100
Gateway IP address              :
Run from flash/host (f/h)       : f
Default host run file name      : vmlinux
Default host flash file name    : bcm963xx_fs_kernel
Boot delay (0-9 seconds)        : 1
Board Id Name                   : 96348GW-10
Psi size in KB                  : 16
Number of MAC Addresses (1-32)  : 2
Base MAC Address                : 00:1b:2f:32:ab:31
Ethernet PHY Type               : Internal
Memory size in MB               : 16</code></pre></div><p>The BCM6348 has two ethernet ports ... so I guess, you have to enter two for the number of macs.<br />And normally the cfe supports http-firmware upgrade, if the addresses are set correct.</p><p>So enter your settings, stop the auto run and try to upload the original netgear firmware.<br />http://&lt;router-address&gt;</p><p>Hope that helps</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p77049">
				<div class="post-metadata">
					<div class="post-num">Post #102</div>
					<div class="post-author">bluegeek</div>
					<div class="post-datetime">
						25 Nov 2008, 13:00					</div>
				</div>
				<div class="post-content content">
					<p>What&#039;s exactly the state of this port? can I build the firmware and upload to my router using the web interface (Comtrend 536+)?</p><p>Keep the good work!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p77050">
				<div class="post-metadata">
					<div class="post-num">Post #103</div>
					<div class="post-author">sblanco</div>
					<div class="post-datetime">
						25 Nov 2008, 13:30					</div>
				</div>
				<div class="post-content content">
					<p>Yes you can build it up yourself and install it, although you must have a serial cable for the flash and some knowledge of what you are doing. DSL modem as far as I know won&#039;t work, but WiFi, switch and USB should do fine.</p><p>Follow what T3l3m4k0 said in some posts (although most of those things are already impkemented in the trunk).</p><p>Greetings</p><br /><br /><div class="quotebox"><cite>bluegeek wrote:</cite><blockquote><p>What&#039;s exactly the state of this port? can I build the firmware and upload to my router using the web interface (Comtrend 536+)?</p><p>Keep the good work!</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p77052">
				<div class="post-metadata">
					<div class="post-num">Post #104</div>
					<div class="post-author">bluegeek</div>
					<div class="post-datetime">
						25 Nov 2008, 14:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>sblanco wrote:</cite><blockquote><p>Yes you can build it up yourself and install it, although you must have a serial cable for the flash and some knowledge of what you are doing. DSL modem as far as I know won&#039;t work, but WiFi, switch and USB should do fine.</p></blockquote></div><p>Thanks sblanco. Is it possible to build an image for upgrading via the Web interface or TFTP? is only a matter of adding some binary info in the header of the firmware? can we do this with an hex editor?</p><p>-- blue</p>											<p class="post-edited">(Last edited by <strong>bluegeek</strong> on 25 Nov 2008, 14:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p77055">
				<div class="post-metadata">
					<div class="post-num">Post #105</div>
					<div class="post-author">sblanco</div>
					<div class="post-datetime">
						25 Nov 2008, 14:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>bluegeek wrote:</cite><blockquote><div class="quotebox"><cite>sblanco wrote:</cite><blockquote><p>Yes you can build it up yourself and install it, although you must have a serial cable for the flash and some knowledge of what you are doing. DSL modem as far as I know won&#039;t work, but WiFi, switch and USB should do fine.</p></blockquote></div><p>Thanks sblanco. Is it possible to build an image for upgrading via the Web interface or TFTP? is only a matter of adding some binary info in the header of the firmware? can we do this with an hex editor?</p><p>-- blue</p></blockquote></div><p>The thing is nobody reported a way to flash the router with the binary file from the webinterface, every single flash was done by CFE as far as I know, using serial cable to access the console. And still after a good flashing, t3l3m4k0 posted a network setting that must be changed in order to get the switch working (I don&#039;t know if it was patched in the trunk for making it unnecessary).</p><p>If you want to you can try without serial cable, but almost for sure you will need it later for unbricking. I &quot;build&quot; it up myself, bought a cheap DKU-5 cable for Nokia phones and checked where goes each cable and that&#039;s it. It is already a USB-&gt;Serial cable with level converter for connecting to serial consoles with 3,3 V TTL levels.</p><p>Greetings</p>											<p class="post-edited">(Last edited by <strong>sblanco</strong> on 25 Nov 2008, 14:41)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p77090">
				<div class="post-metadata">
					<div class="post-num">Post #106</div>
					<div class="post-author">snipers</div>
					<div class="post-datetime">
						26 Nov 2008, 00:50					</div>
				</div>
				<div class="post-content content">
					<p>hi</p><br /><p>i complite new kmz for bcm96348, i have netgear dg834GT and i would like to flash, but i dont know how, i try tftp but no work, i search solution on google but i dont find anythink, if somebody can write how to flash this router i be happy <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>br</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p77092">
				<div class="post-metadata">
					<div class="post-num">Post #107</div>
					<div class="post-author">t3l3m4k0</div>
					<div class="post-datetime">
						26 Nov 2008, 01:27					</div>
				</div>
				<div class="post-content content">
					<p>@snipers,</p><p>like previous post says, usign serial cable</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p77101">
				<div class="post-metadata">
					<div class="post-num">Post #108</div>
					<div class="post-author">misteroX</div>
					<div class="post-datetime">
						26 Nov 2008, 10:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>t3l3m4k0 wrote:</cite><blockquote><p>1.- try with boards ID number 4 and 2, and more mac (try 11 macs)<br />2.- try with flashimage ip_tftp_server:name_firmware<br />3.- try other cfe</p><p>good luck</p></blockquote></div><p>Hi t3l3m4k0,<br />I inserted more parameters ..<br />all board number 1,2,3,4,5,6,7 and more mac numbers 1,2,3,4,5,6,7,8,9,10,1,12 <br /> but the result is the same(see post <a href="http://forum.openwrt.org/viewtopic.php?pid=76955#p76955)">http://forum.openwrt.org/viewtopic.php? … 55#p76955)</a>.</p><p>Can you post me link where download a compatible CFE.bin for DG834GT ?</p><br /><p>Thanks<br />MisteroX</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p77111">
				<div class="post-metadata">
					<div class="post-num">Post #109</div>
					<div class="post-author">t3l3m4k0</div>
					<div class="post-datetime">
						26 Nov 2008, 14:27					</div>
				</div>
				<div class="post-content content">
					<p>I don&#039;t have any cfe for DG834GT , maybe lamaatge can send one copy to you.</p><p>If you would, i can send one from Asus (bcm96348gw-11 board) to try, it is working on my Comtrend 536.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p77114">
				<div class="post-metadata">
					<div class="post-num">Post #110</div>
					<div class="post-author">misteroX</div>
					<div class="post-datetime">
						26 Nov 2008, 15:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>t3l3m4k0 wrote:</cite><blockquote><p>I don&#039;t have any cfe for DG834GT , maybe lamaatge can send one copy to you.</p><p>If you would, i can send one from Asus (bcm96348gw-11 board) to try, it is working on my Comtrend 536.</p></blockquote></div><p>Ok, please&nbsp; send to me your copy from Asus (bcm96348gw-11 board) and I will try with it.</p><br /><p>Thanks<br />MisteroX</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p77128">
				<div class="post-metadata">
					<div class="post-num">Post #111</div>
					<div class="post-author">snipers</div>
					<div class="post-datetime">
						26 Nov 2008, 20:54					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://rapidshare.com/files/167661492/netgear_dg834gt.rar">http://rapidshare.com/files/167661492/n … g834gt.rar</a></p><p>BSP<br />CFE<br />KERNEL<br />WHOLEFLASH<br />NVRAM</p><p>mtd0<br />mtd1<br />mtd2<br />mtd3</p><p>in pack, from working NETGEAR DG834GT </p><p>br</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p77134">
				<div class="post-metadata">
					<div class="post-num">Post #112</div>
					<div class="post-author">misteroX</div>
					<div class="post-datetime">
						27 Nov 2008, 00:52					</div>
				</div>
				<div class="post-content content">
					<p>Hi snipers, <br />I&#039;ve successfully recovered the router thanks to your package and i would like to thank you for all your help. </p><p>Bye<br />MisteroX</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p77143">
				<div class="post-metadata">
					<div class="post-num">Post #113</div>
					<div class="post-author">harry1985</div>
					<div class="post-datetime">
						27 Nov 2008, 04:13					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys,<br />I&#039;m a new comer. I&#039;ve got a ADSL modem based on BCM6358. The model is RG100A-AA. It&#039;s from Shanghai Bell. With 16MB flash and 32MB ram. I&#039;ve tryed to connect it by a TTL-USB cable. But it does not work. The cable is good. I use it to connect another modem LINKSYS WAG354G V2. So can you guys give some suggestions?<br />And best wish for thanksgiving.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p77173">
				<div class="post-metadata">
					<div class="post-num">Post #114</div>
					<div class="post-author">neubauten</div>
					<div class="post-datetime">
						28 Nov 2008, 00:42					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />I&#039;ve been working to build openwrt for a comtrend (96348W-11 board).<br />I have managed to compile a working copy with ethernet and wifi support following the comments in this post, to get the wireless driver I extracted the firmware as described in <a href="http://linuxwireless.org/en/users/Drivers/b43#devicefirmware">http://linuxwireless.org/en/users/Drive … cefirmware</a>. I have copied the resulting folder (b43) in ..../build_dir/linux-brcm63xx/linux-2.6.27.7/firmware/<br />The I compile as follows:</p><p>make kernel_menuconfig<br />&nbsp; &nbsp; Device Drivers --&gt; Network Device Support --&gt; Wireless LAN --&gt; Broadcom 43xx<br />make menuconfig<br />make V=99</p><p>The firmware builds correctly and wireless driver works, but I am still having a problem. I want to use this router as a wireless bridge, to do so i configure br-lan as follows: </p><p>root@OpenWrt:/# brctl addif br-lan wlan0<br />device wlan0 entered promiscuous mode<br />root@OpenWrt:/# iwconfig wlan0 mode managed key a1a2a3b1b2b3c1c2c3d1d2d3e1 essid<br /> strategies<br />root@OpenWrt:/# brctl addif br-lan wlan0<br />device wlan0 entered promiscuous mode<br />root@OpenWrt:/# ping 192.168.1.253<br />root@OpenWrt:/# ifconfig wlan0 up<br />firmware: requesting b43/ucode5.fw<br />firmware: requesting b43/pcm5.fw<br />firmware: requesting b43/b0g0initvals5.fw<br />firmware: requesting b43/b0g0bsinitvals5.fw<br />b43-phy0: Loading firmware version 410.2160 (2007-05-26 15:32:10)<br />root@OpenWrt:/# br-lan: topology change detected, propagating<br />br-lan: port 2(wlan0) entering forwarding state<br />root@OpenWrt:/# ping 192.168.1.253<br />PING 192.168.1.253 (192.168.1.253): 56 data bytes<br />64 bytes from 192.168.1.253: seq=0 ttl=64 time=12.981 ms<br />64 bytes from 192.168.1.253: seq=1 ttl=64 time=6.167 ms<br />64 bytes from 192.168.1.253: seq=2 ttl=64 time=5.606 ms<br />64 bytes from 192.168.1.253: seq=3 ttl=64 time=5.239 ms<br />^C<br />--- 192.168.1.253 ping statistics ---<br />4 packets transmitted, 4 packets received, 0% packet loss<br />round-trip min/avg/max = 5.239/7.498/12.981 ms</p><p>I changed the uci code as explained in a previous post to get lan working. However bridge doesn&#039;t work, packets are not being forwarded from lan to wireless network, has anybody tried to get this working?</p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p77219">
				<div class="post-metadata">
					<div class="post-num">Post #115</div>
					<div class="post-author">misteroX</div>
					<div class="post-datetime">
						29 Nov 2008, 01:30					</div>
				</div>
				<div class="post-content content">
					<p>Hi all, <br />I started testing openwrt on my debricked DG834GT and I am able to boot the router but it seems that there is no chance to write on the flash: I can&#039;t change root passwd or start webif.</p><br /><p>Log:<br /><a href="http://docs.google.com/Doc?id=ddkms8f9_8dgvpzcfp">http://docs.google.com/Doc?id=ddkms8f9_8dgvpzcfp</a></p><p>I&#039;ve added this rows to :&nbsp; target/linux/brcm63xx/image/Makefile<br /></p><div class="quotebox"><blockquote><p>define Image/Build<br />&nbsp; &nbsp; &nbsp; &nbsp; $(STAGING_DIR_HOST)/bin/trx -o $(BIN_DIR)/openwrt-$(BOARD)-$(1).trx -f $(KDIR)/loader.gz -f $(KDIR)/vmlinux.lzma $(call trxalign/$(1)) -f $(KDIR)/root.$(1)<br />&nbsp; &nbsp; &nbsp; &nbsp; $(call Image/Build/CFE,$(1),96345GW2,6345)<br />&nbsp; &nbsp; &nbsp; &nbsp; $(call Image/Build/CFE,$(1),96348GW,6348)<br />&nbsp; &nbsp; &nbsp; &nbsp; # Neufbox4<br />&nbsp; &nbsp; &nbsp; &nbsp; $(call Image/Build/CFE,$(1),96358VW,6358)<br />&nbsp; &nbsp; &nbsp; &nbsp; # Comtrend 536<br />&nbsp; &nbsp; &nbsp; &nbsp; $(call Image/Build/CFE,$(1),96348GW-11,6348)<br />&nbsp; &nbsp; &nbsp; &nbsp; # DG834GT<br />&nbsp; &nbsp; &nbsp; &nbsp; $(call Image/Build/CFE,$(1),96348GW-10,6348)<br />endef</p></blockquote></div><p>I&#039;ve added this rows to : /build_dir/linux-brcm63xx/linux-2.6.27.7/arch/mips/bcm63xx/boards/board_bcm963xx.c<br /></p><div class="quotebox"><blockquote><p>static struct board_info __initdata board_96348gw_10 = {<br />&nbsp; &nbsp; &nbsp; &nbsp; .name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= &quot;96348GW-10&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; .expected_cpu_id&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 0x6348,</p><p>&nbsp; &nbsp; &nbsp; &nbsp; .has_enet0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 1,<br />&nbsp; &nbsp; &nbsp; &nbsp; .has_enet1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 1,<br />&nbsp; &nbsp; &nbsp; &nbsp; .has_pci&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 1,</p><p>&nbsp; &nbsp; &nbsp; &nbsp; .enet0 = {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .has_phy&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 1,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .use_internal_phy&nbsp; &nbsp; &nbsp; &nbsp;= 1,<br />&nbsp; &nbsp; &nbsp; &nbsp; },</p><p>&nbsp; &nbsp; &nbsp; &nbsp; .enet1 = {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .force_speed_100&nbsp; &nbsp; &nbsp; &nbsp; = 1,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .force_duplex_full&nbsp; &nbsp; &nbsp; = 1,<br />&nbsp; &nbsp; &nbsp; &nbsp; },</p><br /><p>&nbsp; &nbsp; &nbsp; &nbsp; .has_ohci0 = 1,<br />&nbsp; &nbsp; &nbsp; &nbsp; .has_pccard = 1,<br />&nbsp; &nbsp; &nbsp; &nbsp; .has_ehci0 = 1,<br />};</p><br /><p>/*<br /> * all boards<br /> */<br />static const struct board_info __initdata *bcm963xx_boards[] = {<br />#ifdef CONFIG_BCM63XX_CPU_6348<br />&nbsp; &nbsp; &nbsp; &nbsp; &amp;board_96348r,<br />&nbsp; &nbsp; &nbsp; &nbsp; &amp;board_96348gw,<br />&nbsp; &nbsp; &nbsp; &nbsp; &amp;board_96348gw_10,<br />&nbsp; &nbsp; &nbsp; &nbsp; &amp;board_96348gw_11,<br />#endif</p></blockquote></div><p>Thanks.<br />MisteroX</p>											<p class="post-edited">(Last edited by <strong>misteroX</strong> on 29 Nov 2008, 18:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p77273">
				<div class="post-metadata">
					<div class="post-num">Post #116</div>
					<div class="post-author">misteroX</div>
					<div class="post-datetime">
						30 Nov 2008, 12:06					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,</p><p>There are some problems to boot the router example:</p><p> br-lan: port 1(eth1) entering forwarding state<br />b43: Unknown symbol pcmcia_disable_device<br />b43: Unknown symbol pcmcia_unregister_driver<br />b43: Unknown symbol pcmcia_map_mem_page<br />b43: Unknown symbol pccard_get_first_tuple<br />b43: Unknown symbol pcmcia_request_window<br />b43: Unknown symbol pcmcia_request_configuration<br />b43: Unknown symbol ssb_bus_pcmciabus_register<br />b43: Unknown symbol pccard_get_tuple_data<br />b43: Unknown symbol pcmcia_register_driver<br />b43: Unknown symbol pccard_parse_tuple<br />b43: Unknown symbol pcmcia_request_irq<br />PPP generic driver version 2.4.2</p><br /><p>jffs2_build_filesystem(): unlocking the mtd device... done.<br />jffs2_build_filesystem(): erasing all blocks after the end marker... &lt;4&gt;Erase at 0x001b0000 failed immediately: -EROFS. Is the sector locked?<br />Erase at 0x001a0000 failed immediately: -EROFS. Is the sector locked?<br />...<br />Erase at 0x00000000 failed immediately: -EROFS. Is the sector locked?<br />done.<br />mini_fo: using base directory: /<br />mini_fo: using storage directory: /jffs<br />mini_fo: build_sto_structure: failed to create storage dir [1].<br />mini_fo: get_neg_sto_dentry: ERROR building sto structure.</p><br /><p>The password you fail to change even in serial console. <br />Not able to write in filesystem.</p><p>I have updated the trunk to version 13427 but the result is always the same.<br />dmesg and various information about the /proc/... : <a href="http://docs.google.com/View?docid=ddkms8f9_9hpg62pcx">http://docs.google.com/View?docid=ddkms8f9_9hpg62pcx</a></p><p>Bye<br />MisteroX</p>											<p class="post-edited">(Last edited by <strong>misteroX</strong> on 30 Nov 2008, 12:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p77275">
				<div class="post-metadata">
					<div class="post-num">Post #117</div>
					<div class="post-author">lamaatje</div>
					<div class="post-datetime">
						30 Nov 2008, 14:12					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>sblanco wrote:</cite><blockquote><div class="quotebox"><cite>bluegeek wrote:</cite><blockquote><div class="quotebox"><cite>sblanco wrote:</cite><blockquote><p>Yes you can build it up yourself and install it, although you must have a serial cable for the flash and some knowledge of what you are doing. DSL modem as far as I know won&#039;t work, but WiFi, switch and USB should do fine.</p></blockquote></div><p>Thanks sblanco. Is it possible to build an image for upgrading via the Web interface or TFTP? is only a matter of adding some binary info in the header of the firmware? can we do this with an hex editor?</p><p>-- blue</p></blockquote></div><p>The thing is nobody reported a way to flash the router with the binary file from the webinterface, every single flash was done by CFE as far as I know, using serial cable to access the console. And still after a good flashing, t3l3m4k0 posted a network setting that must be changed in order to get the switch working (I don&#039;t know if it was patched in the trunk for making it unnecessary).</p><p>If you want to you can try without serial cable, but almost for sure you will need it later for unbricking. I &quot;build&quot; it up myself, bought a cheap DKU-5 cable for Nokia phones and checked where goes each cable and that&#039;s it. It is already a USB-&gt;Serial cable with level converter for connecting to serial consoles with 3,3 V TTL levels.</p><p>Greetings</p></blockquote></div><p>Well in the end I succeded in building such an image, because my CFE version only supports tftp or web interface. </p><p>The requirements:</p><p>1.&nbsp; The kernel image needs to be compressed with broadcom lzma<br />2.&nbsp; In the image rootfs has to be first then kernel image<br />3.&nbsp; All the CRC&#039;s in the image tag have to be correct.<br />4.&nbsp; The kernel image has to start at 0x100 fold address<br />5.&nbsp; The rootfs has to end at a 0x10000 (erase block size) fold address<br />6.&nbsp; You need to create your own rootfs_data in bcm963xx-flash.c <br />Specific for davolink CFE<br />7.&nbsp; The markers for jffs&nbsp; 0xdeadc0de are not allowed to be part of the image otherwise a modification of the flash <br />&nbsp; &nbsp; is seen and the backup is installed</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p77281">
				<div class="post-metadata">
					<div class="post-num">Post #118</div>
					<div class="post-author">t3l3m4k0</div>
					<div class="post-datetime">
						30 Nov 2008, 18:12					</div>
				</div>
				<div class="post-content content">
					<p>@ misteroX,<br /></p><div class="codebox"><pre><code>0x00010100-0x000cb6f8 : &quot;kernel&quot;
mtd: partition &quot;kernel&quot; doesn&#039;t start on an erase block boundary -- force read-only
0x000d0000-0x003effff : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; doesn&#039;t end on an erase block -- force read-only
mtd: partition &quot;rootfs&quot; set to be root filesystem
mtd: partition &quot;rootfs_data&quot; created automatically, ofs=220000, len=1CFFFF
0x00220000-0x003effff : &quot;rootfs_data&quot;
mtd: partition &quot;rootfs_data&quot; doesn&#039;t end on an erase block -- force read-only
0x003effff-0x003fffff : &quot;nvram&quot;
mtd: partition &quot;nvram&quot; doesn&#039;t start on an erase block boundary -- force read-only</code></pre></div><p>Thereis something broken on last updates, i have same problem.<br />when mtd driver atempts to create partitons, all are read-only and rootfs_data must be writable.</p><p>@ lamaatje,<br />Great news!!!, nice to see you again.<br />Can you post your bcm963xx-flash.c?<br />What tools do you use to create images?, i have tried with broadcom tools but they put rootfs before kernel.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p77283">
				<div class="post-metadata">
					<div class="post-num">Post #119</div>
					<div class="post-author">neubauten</div>
					<div class="post-datetime">
						30 Nov 2008, 18:47					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>b43: Unknown symbol pcmcia_disable_device<br />b43: Unknown symbol pcmcia_unregister_driver<br />b43: Unknown symbol pcmcia_map_mem_page<br />b43: Unknown symbol pccard_get_first_tuple<br />b43: Unknown symbol pcmcia_request_window<br />b43: Unknown symbol pcmcia_request_configuration<br />b43: Unknown symbol ssb_bus_pcmciabus_register<br />b43: Unknown symbol pccard_get_tuple_data<br />b43: Unknown symbol pcmcia_register_driver<br />b43: Unknown symbol pccard_parse_tuple<br />b43: Unknown symbol pcmcia_request_irq</p><p>This error is caused because you are building the firmware without loading the firmware for the b43xx driver (broadcom wireless), you can fix it creating a folder named ..build_dir/linux-brcm63xx/linux-2.6.27.7/firmware/b43 which should contain the firmware extracted from the broadcom proprietary driver. Yo can find how to do this in <a href="http://linuxwireless.org/en/users/Drivers/b43#devicefirmware">http://linuxwireless.org/en/users/Drive … cefirmware</a>.</p><p>I think the problem with the filesystem is different. I understand from previous posts you have recovered your router flashing a CFE from an asus model. I think it&#039;s quite possible that the actual hardware in both routers isn&#039;t the same. For example I am using a comtrend 536+, and this one uses a 29lv320 flash. If I load the CFE form a different router it might have a different flash chip (which I think is described in CFE), and so the hardware addresses for the filesystem would be different.</p>											<p class="post-edited">(Last edited by <strong>neubauten</strong> on 30 Nov 2008, 20:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p77383">
				<div class="post-metadata">
					<div class="post-num">Post #120</div>
					<div class="post-author">misteroX</div>
					<div class="post-datetime">
						1 Dec 2008, 19:05					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>t3l3m4k0 wrote:</cite><blockquote><p>....<br />Thereis something broken on last updates, i have same problem.<br />when mtd driver atempts to create partitons, all are read-only and rootfs_data must be writable.<br />......</p></blockquote></div><p>Hi t3l3m4k0,<br />can you tell me what trunk revision boots correctly and is able to write on the flash?</p><p>Thanks<br />Misterox</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p77389">
				<div class="post-metadata">
					<div class="post-num">Post #121</div>
					<div class="post-author">t3l3m4k0</div>
					<div class="post-datetime">
						1 Dec 2008, 20:01					</div>
				</div>
				<div class="post-content content">
					<p>hi, misteroX<br />for me, builds up to 13370 are working fine.<br />lastest build, i think,&nbsp; do not take good values to create mtd partitions (only read-only).</p><p>salut</p><p>@ neubauten,<br />maybe you has reason, but because early builds are working fine?</p><p>Thx.</p>											<p class="post-edited">(Last edited by <strong>t3l3m4k0</strong> on 1 Dec 2008, 20:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p77392">
				<div class="post-metadata">
					<div class="post-num">Post #122</div>
					<div class="post-author">t3l3m4k0</div>
					<div class="post-datetime">
						1 Dec 2008, 20:07					</div>
				</div>
				<div class="post-content content">
					<p>i think this change: <br />@13379&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;[13379]&nbsp; &nbsp;&nbsp; &nbsp; 4 days&nbsp; &nbsp; &nbsp; florian&nbsp; &nbsp; &nbsp;&nbsp; [brcm63xx] bcm63xx MTD driver cleanup and fixes: - convert to â€¦<br />don&#039;t like my router, specialy i think with &quot;roundup&quot; function.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p77397">
				<div class="post-metadata">
					<div class="post-num">Post #123</div>
					<div class="post-author">misteroX</div>
					<div class="post-datetime">
						1 Dec 2008, 21:24					</div>
				</div>
				<div class="post-content content">
					<p>Many thanks,<br />I will download trunk 13370 and I will check on if it will work. </p><p>Bye <br />Misterox</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p77447">
				<div class="post-metadata">
					<div class="post-num">Post #124</div>
					<div class="post-author">misteroX</div>
					<div class="post-datetime">
						2 Dec 2008, 13:30					</div>
				</div>
				<div class="post-content content">
					<p>Hi t3l3m4k0,<br />the revision 13370 boot without problems on my DG834GT. <br />I can change the password, and maintain the changes to reboot.</p><p>Bye<br />MisteroX</p>											<p class="post-edited">(Last edited by <strong>misteroX</strong> on 2 Dec 2008, 13:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p77479">
				<div class="post-metadata">
					<div class="post-num">Post #125</div>
					<div class="post-author">misteroX</div>
					<div class="post-datetime">
						3 Dec 2008, 01:00					</div>
				</div>
				<div class="post-content content">
					<p>Hi t3l3m4k0,<br /> are you able to use adsl feature of your router with this firmware (13370)?<br />And if so how have you done it?&nbsp; </p><br /><p>Bye<br />MisteroX</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 5 of 30</div><nav><ul><li><a href="viewtopic.php%3Fid=17370&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=17370&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=17370&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li><li><a href="viewtopic.php%3Fid=17370&amp;p=6.html">6</a></li><li><a href="viewtopic.php%3Fid=17370&amp;p=7.html">7</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=17370&amp;p=30.html">30</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>