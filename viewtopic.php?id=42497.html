<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> auto-accept access point&#039;s terms of service</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 10 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p192975">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">stephenliss</div>
					<div class="post-datetime">
						24 Feb 2013, 06:42					</div>
				</div>
				<div class="post-content content">
					<p>I get Internet access from my city&#039;s free wifi access point 125 meters away, across the street. </p><p>I wrote a short Java program to automatically accept the terms of service on the city&#039;s AP login page. The idea is<br />to run this from my Ubuntu pc at startup (i.e. after a power failure) and periodically from a crontab,<br /> so that my internet connection stays up without intervention from me. The Ubuntu pc is connected <br />to the AP through an OpenWRT router that is configured as a client. </p><p>I don&#039;t have a Java Runtime Environment on my OpenWRT router, which is why I don&#039;t run it directly on <br />the OpenWRT router. </p><p>I suppose you could modify this to connect to Starbucks etc. or any other AP that requires acceptance of <br />its terms of service. You would have to modify the code for your particular case. </p><p>I want to tweak this so that it is configurable at runtime, handles exceptions gracefully and directs<br />messages to syslog on a logserver. The logserver happens to be the same machine that this code will be running from.</p><p>This executes directly the same javascript that fires when you click on the &#039;Accept&#039; button to accept<br />terms of service of the City of Bellevue&#039;s BellevueConnect free wifi service.</p><p>The code relies on <a href="http://htmlunit.sourceforge.net/">HTMLUnit</a>, which has a few <a href="http://htmlunit.sourceforge.net/dependencies.html"> dependencies </a> that you need to make available<br />in your build path when you compile this. </p><p>Here&#039;s the code:<br /></p><div class="codebox"><pre><code>package bc;

import com.gargoylesoftware.htmlunit.WebClient;
import com.gargoylesoftware.htmlunit.html.HtmlPage;

public class BellevueConnect {

    /**
     * @param args
     */
    public static void main(String[] args) throws Exception{
        final WebClient webClient = new WebClient();
        final HtmlPage page =  (HtmlPage) webClient.getPage(&quot;https://1.1.1.1/fs/customwebauth/login.html&quot;);
        //final ScriptResult page2 =  page.executeJavaScript(&quot;submitAction()&quot;);
        page.executeJavaScript(&quot;submitAction()&quot;);
    }
}</code></pre></div>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>