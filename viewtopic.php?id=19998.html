<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Configuration of stock 8.09 images</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 4 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p86470">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">horatio</div>
					<div class="post-datetime">
						23 Apr 2009, 18:45					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,</p><p>I was trying to build some kernel modules (misdn) using the a svn checkout of the 8.09 _tag_. I compiled 8.09 for the brcm47xx (2.6) -target using the &quot;select all packages&quot; in the menuconfig. I also could compile the kernel module via a make modules based on the 8.09 tree. Yet insmodding the module would immediately reboot my box (Asus 500W, using a _stock_ (binary)&nbsp; image from ftp). After looking at serial console, doing some debugging, I figured that it is most probably due to a different config of the stock kernel image compared to my build, resulting in a deviation in kernel headers. Some CONFIG_-defines in skbuff.h e.g. would change the sk_buf -struct so that offsets would not match any more when moving buffers between my module to stock modules in the kernel.</p><p>Note that the above approach had worked for me for the previous release (7.09). Looking at the all the patches also going into kernel headers and their dependency on kernel config, I start to believe that I just might have been lucky...</p><p>I am somewhat shying away from using my full custom build, as I would rather use the stock images in order to e.g. install kernel mods from &quot;official&quot; opkg-repositories and would not need to build everything on my own. I am a little scared that the above would mean that once I start using my own builds, I will have to stick to them (at least for all kernel-related stuff)...<br />Also, I noticed that my self-compiled .trx image for the brcm47xx would be _exactly_ (coincidence or some point I missed?) 256k smaller than the binary stock images. So I was wondering what mine might be missing... or maybe have built as a module instead statically in the kernel. As mentioned, in make menuconfig, I only set the abovementioned target and selected &quot;Select all packages by default&quot;, that was it.</p><p>So: is it possible to get an exact configuration of the kernel (headers) of the stock builds? Would the SDK contain those? I was not able to find an SDK for 8.09 on ftp.</p><p>Hope I make sense at all,<br />thanks &amp; regards,<br />H.</p>											<p class="post-edited">(Last edited by <strong>horatio</strong> on 23 Apr 2009, 18:47)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>