<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> wndr3700 no space openwrt</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p160051">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">jigglywiggly</div>
					<div class="post-datetime">
						8 Mar 2012, 06:55					</div>
				</div>
				<div class="post-content content">
					<p>so i was trying to install neorouter, it&#039;s 750 KB</p><p>I have a v1 wndr3700<br />it complained about no space (said I had 70% free initially)<br />Now it is at 8%</p><p>It did not clean up after itslef, how do I clean it up? Also why is there such little space? Neorouter would be great...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p160052">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jigglywiggly</div>
					<div class="post-datetime">
						8 Mar 2012, 07:28					</div>
				</div>
				<div class="post-content content">
					<p>also i dont think my configuration is saving either<br />i cannot disable my 5ghz i even tried deleting it, it&#039;s just staying there</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p160066">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">JamesA</div>
					<div class="post-datetime">
						8 Mar 2012, 10:20					</div>
				</div>
				<div class="post-content content">
					<p>You may be struggling to save config changes due to lack of space. You need to see what packages were installed to satisfy neorouter dependencies and remove them manually.</p><p>Another option is to reset it to defaults and start again.</p><p>In general, these devices have very limited amounts of storage as they are routers and not full PCs. You need to take that into account when deciding what to install. If your device has a USB port, you can try setting up EXTROOT to give you more space on a usb storage device. <a href="http://wiki.openwrt.org/doc/howto/extroot">http://wiki.openwrt.org/doc/howto/extroot</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p160212">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">jigglywiggly</div>
					<div class="post-datetime">
						9 Mar 2012, 11:27					</div>
				</div>
				<div class="post-content content">
					<p>I added usb drive, and I clicked the root thing, it&#039;s /dev/sda</p><p>it&#039;s also a network share</p><p>how do I install packages to it<br /><a href="http://wiki.openwrt.org/doc/howto/usb.storage">http://wiki.openwrt.org/doc/howto/usb.storage</a></p><p>this is a tldr, anyone got a quick explanation</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p160218">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">jigglywiggly</div>
					<div class="post-datetime">
						9 Mar 2012, 12:55					</div>
				</div>
				<div class="post-content content">
					<p>Hmm tried installing no go</p><br /><p>root@OpenWrt sda1# opkg -dest usb install <a href="http://download.neorouter.com/Downloads/NRFree/Update_1.7.0">http://download.neorouter.com/Downloads … date_1.7.0</a><br />.3300/inabox/Backfire/nrclient-1.7.0.3300-free-backfire-ar71xx.ipk<br />Downloading <a href="http://download.neorouter.com/Downloads/NRFree/Update_1.7.0.3300/inabox/Backfire/nrclient-1.7.0.3300-free-backfire-ar71xx.ipk">http://download.neorouter.com/Downloads … ar71xx.ipk</a>.<br />Installing nrclient (1.7-0.3300) to usb...<br />Multiple packages (libpthread and libpthread) providing same name marked HOLD or PREFER. Using latest.<br />Multiple packages (kmod-tun and kmod-tun) providing same name marked HOLD or PREFER. Using latest.<br />Configuring nrclient.<br />/opt//usr/lib/opkg/info/nrclient.postinst: line 14: /etc/init.d/nrclient.sh: not found<br />/opt//usr/lib/opkg/info/nrclient.postinst: line 19: /usr/bin/cruclient: not found<br />/opt//usr/lib/opkg/info/nrclient.postinst: line 23: /etc/init.d/nrclient.sh: not found<br />Collected errors:<br /> * pkg_run_script: package &quot;nrclient&quot; postinst script returned status 127.<br /> * opkg_configure: nrclient.postinst returned 127.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p160225">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">JamesA</div>
					<div class="post-datetime">
						9 Mar 2012, 14:00					</div>
				</div>
				<div class="post-content content">
					<p>Ok what I would do at this point would be to wipe the device back to defaults so its as if you have just flashed OpenWRT. Remove your USB stick, follow the failsafe boot procedure and then erase the root FS: <a href="http://wiki.openwrt.org/doc/howto/generic.failsafe">http://wiki.openwrt.org/doc/howto/generic.failsafe</a></p><p>Once you have done that, boot it back up and configure it onto your network so it can see the internet and install the packages for USB storage and EXTROOT as documented here: <a href="http://wiki.openwrt.org/doc/howto/extroot">http://wiki.openwrt.org/doc/howto/extroot</a></p><p>You may also want to install nano as i find it far easier to use for editing config files than vi.</p><p>After that&#039;s sorted out, you should be able to put your stick in and mount it to make sure its all working. I would recommend partitioning and formatting the stick on a proper linux PC rather than trying to do it via the router. Depending on the size of your stick you may want to add some swap space or 2nd storage partition. I use an 8gb sandisk &#039;Fit&#039; drive as its tiny. Its got 512mb swap part, 3.5gb EXT4 for the root fs, and the rest as FAT32 storage as this can be mounted by the router or plugged into my windows PC.</p><p>Next follow these instructions as given to me by the very helpful &#039;Twinclouds&#039; here on the forum, just change your mount points if your partitions layout on the USB stick is different:<br /></p><div class="quotebox"><blockquote><p>1. Format then mount the USB drive (I mount to /mnt/sda1 so I can copy the copy statement directly, but you can mount it to anywhere).<br />2. Modify the /etc/config/fstab.&nbsp; The relevant sections are as follows:<br />config mount<br />&nbsp; &nbsp; &nbsp; &nbsp; option is_rootfs 1<br />&nbsp; &nbsp; &nbsp; &nbsp; option target&nbsp; &nbsp;/overlay<br />&nbsp; &nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp;/dev/sda1<br />&nbsp; &nbsp; &nbsp; &nbsp; option fstype&nbsp; &nbsp;ext4<br />&nbsp; &nbsp; &nbsp; &nbsp; option options&nbsp; rw,sync<br />&nbsp; &nbsp; &nbsp; &nbsp; option enabled&nbsp; 1<br />&nbsp; &nbsp; &nbsp; &nbsp; option enabled_fsck 0</p><p>config swap<br />&nbsp; &nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp;/dev/sda2<br />&nbsp; &nbsp; &nbsp; &nbsp; option enabled&nbsp; 1</p><p>Note that I formated sda1 to ext4.&nbsp; To wear and tear, I disabled its journal function.&nbsp; In addition, I used /dev/sda2 as swap partition.&nbsp; It may not be necessary.&nbsp; To make sure swap is always turned on, I added &quot;swapon /dev/sda2&quot; in /etc/rc.local</p><p>3. Copy the overlay content to the USB by:<br />tar -C /overlay -cvf - . | tar -C /mnt/sda1 -xf -<br />4. Reboot router.&nbsp; Do a df to see if rootfs and overlay have a lot of memory space now.<br />That&#039;s it.&nbsp; Good luck</p></blockquote></div><p>I&#039;ve used this on 2 different routers now and it has worked well, but bear in mind your router may be different.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p160253">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">jigglywiggly</div>
					<div class="post-datetime">
						9 Mar 2012, 21:50					</div>
				</div>
				<div class="post-content content">
					<p>so if i make my usb drive root file system would I lose the ability for it to be a network share? Reason I ask because it&#039;s a 250gb 7200rpm laptop hd and I want files on it as well as the root fs<br />Unless you suggest I partition it with like 1gb for root f/s and the rest for network share.</p>											<p class="post-edited">(Last edited by <strong>jigglywiggly</strong> on 10 Nov 2013, 21:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p160263">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">got_milk</div>
					<div class="post-datetime">
						10 Mar 2012, 01:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jigglywiggly wrote:</cite><blockquote><p>so if i make my usb drive root file system would I lose the ability for it to be a network share? Reason I ask because it&#039;s a 250gb 7200rpm laptop hd and I want files on it as well as the root fs<br />Unless you suggest I partition it with like 1gb for root f/s and the rest for network share.</p><p>imo there shud just be a check box for all this stuff &gt;.&gt;... since I highly doubt this is not uncommon</p></blockquote></div><p>You could partition the drive however you like (such as individual partitions for swap space, the root filesystem and whatever space left on a different partition), then simply set up network sharing using the third partition for everything else.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p160265">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">jigglywiggly</div>
					<div class="post-datetime">
						10 Mar 2012, 02:03					</div>
				</div>
				<div class="post-content content">
					<p>Hmm so I took an weird approach<br />however it&#039;s complaining about libssl </p><br /><div class="codebox"><pre><code>root@OpenWrt /# umount /usr/bin -l
root@OpenWrt /# mount --bind /mnt/sda1/usr/bin /usr/bin
root@OpenWrt /# chmod -R 0777 /usr/bin
root@OpenWrt /# opkg -dest usb install http://download.neorouter.com/Downloads/N
RFree/Update_1.7.0.3300/inabox/Backfire/nrclient-1.7.0.3300-free-backfire-ar71xx
.ipk
Downloading http://download.neorouter.com/Downloads/NRFree/Update_1.7.0.3300/inabox/Backfire/nrclient-1.7.0.3300-free-backfire-ar71xx.ipk.
Installing nrclient (1.7-0.3300) to usb...
Configuring nrclient.
/usr/bin/nrservice: can&#039;t load library &#039;libssl.so.0.9.8&#039; //where is this, where can I get it???
root@OpenWrt /# umount /usr/bin -l
root@OpenWrt /# opkg -dest usb install http://download.neorouter.com/Downloads/N
RFree/Update_1.7.0.3300/inabox/Backfire/nrclient-1.7.0.3300-free-backfire-ar71xx
.ipk
Downloading http://download.neorouter.com/Downloads/NRFree/Update_1.7.0.3300/inabox/Backfire/nrclient-1.7.0.3300-free-backfire-ar71xx.ipk.
Installing nrclient (1.7-0.3300) to usb...
Configuring nrclient.
/etc/rc.common: line 82: /usr/bin/nrservice: not found  //obviously not found because it&#039;s look at the normal file system and it&#039;s obv not there
root@OpenWrt /# mount --bind /mnt/sda1/usr/bin /usr/bin
root@OpenWrt /# chmod -R 0777 /usr/bin
root@OpenWrt /#</code></pre></div><p>What I did was made /usr/lib point to the usb drive but I copied the all the files in /usr/lib beforehand and then put appropriate permissions</p>											<p class="post-edited">(Last edited by <strong>jigglywiggly</strong> on 10 Mar 2012, 02:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p160266">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">jigglywiggly</div>
					<div class="post-datetime">
						10 Mar 2012, 02:19					</div>
				</div>
				<div class="post-content content">
					<p>Hmm so I did the same for usr lib but when I try going to luci it gives me<br />I also copied and renamed the 1.0.0 to 0.9.8 and such<br /></p><div class="codebox"><pre><code>/usr/lib/lua/luci/dispatcher.lua:284: No valid theme found
stack traceback:
    [C]: in function &#039;assert&#039;
    /usr/lib/lua/luci/dispatcher.lua:284: in function &#039;dispatch&#039;
    /usr/lib/lua/luci/dispatcher.lua:195: in function &lt;/usr/lib/lua/luci/dispatcher.lua:194&gt;</code></pre></div><p>Why would it do this? Permisisons are 777???</p><p>Then I try running it again and I get this<br /></p><div class="codebox"><pre><code>Downloading http://download.neorouter.com/Downloads/NRFree/Update_1.7.0.3300/inabox/Backfire/nrclient-1.7.0.3300-free-backfire-ar71xx.ipk.
Installing nrclient (1.7-0.3300) to usb...
Configuring nrclient.
root@OpenWrt /root# /usr/bin/nrservice: can&#039;t resolve symbol &#039;pthread_atfork&#039; in lib &#039;/usr/bin/nrservice&#039;.</code></pre></div><p>Can I just install openwrt on /mnt/sda1 my usb hd?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p160267">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">jigglywiggly</div>
					<div class="post-datetime">
						10 Mar 2012, 02:26					</div>
				</div>
				<div class="post-content content">
					<p>So I tried what you did<br /></p><div class="codebox"><pre><code>        option is_rootfs 1
        option target   /overlay
        option device   /dev/sda1
        option fstype   ext4
        option options  rw,sync
        option enabled  1
        option enabled_fsck 0</code></pre></div><p>but nothing happened :?</p><p>it&#039;s all ext4<br />/mnt/sda1</p><br /><p>EDIT: wait it worked, software manager shows 200 gigs<br />but my internet is so slow</p>											<p class="post-edited">(Last edited by <strong>jigglywiggly</strong> on 10 Mar 2012, 02:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p160268">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">jigglywiggly</div>
					<div class="post-datetime">
						10 Mar 2012, 02:38					</div>
				</div>
				<div class="post-content content">
					<p>reboot seems to have fixed slow internet</p><p>it says 189/200gigs free and then when&nbsp; Iinstall<br /></p><div class="codebox"><pre><code>Downloading http://download.neorouter.com/Downloads/NRFree/Update_1.7.0.3300/inabox/Backfire/nrclient-1.7.0.3300-free-backfire-ar71xx.ipk.
Installing nrclient (1.7-0.3300) to root...
Collected errors:
 * copy_file_chunk: write: No space left on device.
 * pkg_write_filelist: Failed to open //usr/lib/opkg/info/nrclient.list: No space left on device.
 * opkg_install_pkg: Failed to extract data files for nrclient. Package debris may remain!
 * opkg_install_cmd: Cannot install package nrclient.
 * opkg_conf_write_status_files: Can&#039;t open status file //usr/lib/opkg/status: No space left on device.
 * opkg_conf_write_status_files: Can&#039;t open status file /opt//usr/lib/opkg/status: No space left on device.</code></pre></div><p>why is it trying to install in the wrong place?</p><br /><br /><br /><br /><p>is my configuration wrong?<br /></p><div class="codebox"><pre><code>src/gz snapshots http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages
src/gz arokh http://enduser.subsignal.org/~trondah/packages
dest root /
dest ram /tmp
lists_dir ext /var/opkg-lists
option overlay_root /overlay
dest usb /opt</code></pre></div><p>Shoild I delete dest root /?<br />I tried anyawy but then it said </p><div class="codebox"><pre><code>Downloading http://download.neorouter.com/Downloads/NRFree/Update_1.7.0.3300/inabox/Backfire/nrclient-1.7.0.3300-free-backfire-ar71xx.ipk.
Installing nrclient (1.7-0.3300) to ram...
Collected errors:
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for nrclient:
 *     uclibcxx *     libpthread *     libuuid *     libopenssl *     kmod-tun * 
 * opkg_install_cmd: Cannot install package nrclient.</code></pre></div><p>I am confused, I think this error happens before it&#039;s even attempting to install. So what should I do...?</p><br /><p>EDIT: more confused<br />/mnt/sda1 is showing up as only 700 kilobytes now, wut</p><p>i have no idea what /mnt/sda1 is anymore I had lots of files in there now all i see is a folder called usr in the with .minidlna and the total capicaity is 700 kilobytes.</p><p>can I get some 1337 users help, I am sure some of you guys have done this</p><p>EDIT&nbsp; I am getting 4 megabits on speedtest on dl now and 15 on upload. I used to get 60 megabits on the DL &gt;.&gt; and I don&#039;t see why my config would effect speeds. Maybe cause the HD acting as root file system is causing problems ? I duno, but whatever.</p>											<p class="post-edited">(Last edited by <strong>jigglywiggly</strong> on 24 Apr 2012, 07:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p160539">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">JamesA</div>
					<div class="post-datetime">
						12 Mar 2012, 13:33					</div>
				</div>
				<div class="post-content content">
					<p>No idea what you have done by trying to move individual mount points around. Did you do a wipe and reset again before you tried my instructions? Did you do EVERYTHING in the instructions? I&#039;ve done it on 2 TP-Link routers now and its been fine, but like i said your router may be different as its a netgear.</p><p>As far as your drive goes you can do either of the following:</p><p>&nbsp; &nbsp; Set up your external HDD with a small swap partition, a couple of gig for root and the rest as a 3rd part that can be shared.<br />or<br />&nbsp; &nbsp; Hook up a USB hub and use a USB stick for swap and root, then hook up your 200G drive to share once its all configured.</p><div class="quotebox"><cite>jigglywiggly wrote:</cite><blockquote><p>EDIT fuck this I am getting 4 megabits on speedtest on dl now and 15 on upload. I used to get 60 megabits on the DL &gt;.&gt; and I don&#039;t see why my config would effect speeds.</p></blockquote></div><p>You mean apart from OpenWRT giving you the ability to change every configuration and royally screw things up on your connection? <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /><br />No idea really mate, remember that factory firmware does most of the hard work for you. You probably need to find out what the optimum settings for your connection type are and then work out how to implement that in OpenWRT. If wifi speed is the problem, maybe have a look at this thread: <a href="https://forum.openwrt.org/viewtopic.php?pid=160155">https://forum.openwrt.org/viewtopic.php?pid=160155</a></p><p>Other than this, I don&#039;t think i can help much more as I&#039;m pretty new to all this stuff myself. </p><p>Remember that these are very low power devices not really designed to run most of what we try to through at them. All the extra stuff we crowbar in is bound to have an effect on performance.</p>											<p class="post-edited">(Last edited by <strong>JamesA</strong> on 12 Mar 2012, 13:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161031">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">jigglywiggly</div>
					<div class="post-datetime">
						16 Mar 2012, 06:54					</div>
				</div>
				<div class="post-content content">
					<p>Nah it was wired.<br />I did restart it from stock and did your settings.<br />I gave up ;/ mounting it for os functions<br />maybe it works better with usb thumbsticks and not hds<br />I just use the drive as a network share to boot ps2 games off of <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> (openps2)</p><p>Performance isn&#039;t spectacular like 10 MB/s, but it&#039;s sufficient. I just had to disable hd idle otherwise problems occured in loadings in games.</p><p>ALso I coulda gotten neorouter working if I changed where it was looking for the files if I edited the script. Stupid me, but I don&#039;t need it to act as a VPN server anymore.</p>											<p class="post-edited">(Last edited by <strong>jigglywiggly</strong> on 24 Apr 2012, 07:05)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>