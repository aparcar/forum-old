<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Compilation of tcpdump fail on AR71XX</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 27 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p209815">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">etness</div>
					<div class="post-datetime">
						14 Aug 2013, 22:33					</div>
				</div>
				<div class="post-content content">
					<p>I trying to compile tcpdump on my AR71XX, this is my configuration:</p><p><a href="http://pastebin.com/raw.php?i=623DvCbU">http://pastebin.com/raw.php?i=623DvCbU</a></p><p>but when I tried to enable tcpdump in &quot;menu config&quot; the compilation give me this error:</p><div class="codebox"><pre><code>make[3]: Entering directory `/mnt/data/openwrt/package/network/utils/tcpdump&#039;
(cd /mnt/data/openwrt/build_dir/target-mips_r2_uClibc-0.9.33.2/tcpdump-full/tcpdump-4.2.1/./; if [ -x ./configure ]; then /usr/bin/find /mnt/data/openwrt/build_dir/target-mips_r2_uClibc-0.9.33.2/tcpdump-full/tcpdump-4.2.1/ -name config.guess | xargs -r chmod u+w; /usr/bin/find /mnt/data/openwrt/build_dir/target-mips_r2_uClibc-0.9.33.2/tcpdump-full/tcpdump-4.2.1/ -name config.guess | xargs -r -n1 cp /mnt/data/openwrt/scripts/config.guess; /usr/bin/find /mnt/data/openwrt/build_dir/target-mips_r2_uClibc-0.9.33.2/tcpdump-full/tcpdump-4.2.1/ -name config.sub | xargs -r chmod u+w; /usr/bin/find /mnt/data/openwrt/build_dir/target-mips_r2_uClibc-0.9.33.2/tcpdump-full/tcpdump-4.2.1/ -name config.sub | xargs -r -n1 cp /mnt/data/openwrt/scripts/config.sub; AR=mips-openwrt-linux-uclibc-ar AS=&quot;mips-openwrt-linux-uclibc-gcc -c -Os -pipe -mips32r2 -mtune=34kc -mno-branch-likely -fno-caller-saves -fhonour-copts -Wno-error=unused-but-set-variable -msoft-float -ffunction-sections -fdata-sections&quot; LD=mips-openwrt-linux-uclibc-ld NM=mips-openwrt-linux-uclibc-nm CC=&quot;mips-openwrt-linux-uclibc-gcc&quot; GCC=&quot;mips-openwrt-linux-uclibc-gcc&quot; CXX=&quot;mips-openwrt-linux-uclibc-g++&quot; RANLIB=mips-openwrt-linux-uclibc-ranlib STRIP=mips-openwrt-linux-uclibc-strip OBJCOPY=mips-openwrt-linux-uclibc-objcopy OBJDUMP=mips-openwrt-linux-uclibc-objdump SIZE=mips-openwrt-linux-uclibc-size CFLAGS=&quot;-Os -pipe -mips32r2 -mtune=34kc -mno-branch-likely -fno-caller-saves -fhonour-copts -Wno-error=unused-but-set-variable -msoft-float -mips16 -minterlink-mips16 -ffunction-sections -fdata-sections &quot; CXXFLAGS=&quot;-Os -pipe -mips32r2 -mtune=34kc -mno-branch-likely -fno-caller-saves -fhonour-copts -Wno-error=unused-but-set-variable -msoft-float -mips16 -minterlink-mips16 -ffunction-sections -fdata-sections &quot; CPPFLAGS=&quot;-I/mnt/data/openwrt/staging_dir/target-mips_r2_uClibc-0.9.33.2/usr/include -I/mnt/data/openwrt/staging_dir/target-mips_r2_uClibc-0.9.33.2/include -I/mnt/data/openwrt/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/usr/include -I/mnt/data/openwrt/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/include &quot; LDFLAGS=&quot;-L/mnt/data/openwrt/staging_dir/target-mips_r2_uClibc-0.9.33.2/usr/lib -L/mnt/data/openwrt/staging_dir/target-mips_r2_uClibc-0.9.33.2/lib -L/mnt/data/openwrt/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/usr/lib -L/mnt/data/openwrt/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib -Wl,--gc-sections &quot;  BUILD_CC=&quot;mips-openwrt-linux-uclibc-gcc&quot; HOSTCC=&quot;gcc&quot; td_cv_buggygetaddrinfo=&quot;no&quot; ac_cv_linux_vers= ac_cv_header_rpc_rpcent_h=no ac_cv_lib_rpc_main=no ac_cv_path_PCAP_CONFIG=&quot;&quot;  ./configure --target=mips-openwrt-linux --host=mips-openwrt-linux --build=x86_64-linux-gnu --program-prefix=&quot;&quot; --program-suffix=&quot;&quot; --prefix=/usr --exec-prefix=/usr --bindir=/usr/bin --sbindir=/usr/sbin --libexecdir=/usr/lib --sysconfdir=/etc --datadir=/usr/share --localstatedir=/var --mandir=/usr/man --infodir=/usr/info --disable-nls   --without-crypto --enable-ipv6 ; fi; )
configure: loading site script /mnt/data/openwrt/include/site/mips-openwrt-linux-uclibc
checking build system type... x86_64-pc-linux-gnu
checking host system type... mips-openwrt-linux-gnu
checking for mips-openwrt-linux-gcc... mips-openwrt-linux-uclibc-gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... yes
checking for suffix of executables...
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether mips-openwrt-linux-uclibc-gcc accepts -g... yes
checking for mips-openwrt-linux-uclibc-gcc option to accept ISO C89... none needed
checking gcc version... 4
checking for inline... inline
checking for __attribute__... yes
checking whether __attribute__((format)) can be applied to function pointers... yes
checking how to run the C preprocessor... mips-openwrt-linux-uclibc-gcc -E
checking for grep that handles long lines and -e... /mnt/data/openwrt/staging_dir/host/bin/grep
checking for egrep... /mnt/data/openwrt/staging_dir/host/bin/grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking fcntl.h usability... yes
checking fcntl.h presence... yes
checking for fcntl.h... yes
checking rpc/rpc.h usability... no
checking rpc/rpc.h presence... no
checking for rpc/rpc.h... no
checking for rpc/rpcent.h... (cached) no
checking netdnet/dnetdb.h usability... no
checking netdnet/dnetdb.h presence... no
checking for netdnet/dnetdb.h... no
checking for net/pfvar.h... no
checking for netinet/if_ether.h... yes
checking whether time.h and sys/time.h may both be included... yes
checking Linux kernel version... (cached) 2
checking smi.h usability... no
checking smi.h presence... no
checking for smi.h... no
checking for smiInit in -lsmi... no
checking whether to enable the possibly-buggy SMB printer... yes
configure: WARNING: The SMB printer may have exploitable buffer overflows!!!
checking whether to drop root privileges by default... no
checking whether to chroot... no
checking whether to enable ipv6... yes
checking ipv6 stack type... linux-glibc
checking for library containing getaddrinfo... none required
checking getaddrinfo bug... (cached) good
checking for getnameinfo... yes
checking for dnet_htoa declaration in netdnet/dnetdb.h... no
checking for addrinfo... yes
checking for NI_MAXSERV... yes
checking for NI_NAMEREQD... yes
checking for sockaddr_storage... yes
checking for vfprintf... yes
checking for strcasecmp... yes
checking for strlcat... yes
checking for strlcpy... yes
checking for strdup... yes
checking for strsep... yes
checking for fork... yes
checking for vfork... yes
checking for strftime... (cached) yes
checking for setlinebuf... yes
checking for alarm... yes
checking for vsnprintf... (cached) yes
checking for snprintf... yes
checking return type of signal handlers... void
checking for sigaction... yes
checking for library containing dnet_htoa... no
checking for main in -lrpc... (cached) no
checking for library containing getrpcbynumber... no
checking for library containing gethostbyname... none required
checking for library containing socket... none required
checking for library containing putmsg... no
checking for mips-openwrt-linux-pcap-config... (cached) no
checking for pcap-config... no
checking for main in -lpcap... no
checking for pcap-config... (cached) no
checking for pcap_loop... no
configure: error: Report this to tcpdump-workers@lists.tcpdump.org, and include the
config.log file in your report
make[3]: *** [/mnt/data/openwrt/build_dir/target-mips_r2_uClibc-0.9.33.2/tcpdump-full/tcpdump-4.2.1/.configured_] Error 1
make[3]: Leaving directory `/mnt/data/openwrt/package/network/utils/tcpdump&#039;
make[2]: *** [package/network/utils/tcpdump/compile] Error 2
make[2]: Leaving directory `/mnt/data/openwrt&#039;
make[1]: *** [/mnt/data/openwrt/staging_dir/target-mips_r2_uClibc-0.9.33.2/stamp/.package_compile] Error 2
make[1]: Leaving directory `/mnt/data/openwrt&#039;
make: *** [world] Error 2</code></pre></div><p>May other packages compile without problems. Where is the problem?</p><p>Thank you for your help</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209816">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						14 Aug 2013, 22:39					</div>
				</div>
				<div class="post-content content">
					<p>Nobody knows. Now please upload /mnt/data/openwrt/build_dir/target-mips_r2_uClibc-0.9.33.2/tcpdump-full/tcpdump-4.2.1/config.log somewhere and link it here.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209817">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">etness</div>
					<div class="post-datetime">
						14 Aug 2013, 23:52					</div>
				</div>
				<div class="post-content content">
					<p>This is config.log <a href="http://pastebin.com/raw.php?i=XCW1DVmJ">http://pastebin.com/raw.php?i=XCW1DVmJ</a><br />The problem is missing libpcap, but in my configuration libpcap is enabled.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209905">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">etness</div>
					<div class="post-datetime">
						15 Aug 2013, 20:45					</div>
				</div>
				<div class="post-content content">
					<p>I resolved the problem, I delete all and restarted from git clone, maybe the next time I will try before with a make clean.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>