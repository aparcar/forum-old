<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TP-Link TL-WR941N WR941ND - Atheros AP81 platform, USB port</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 13 Jun 2015 and 6 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 4 of 8</div><nav><ul><li><a href="viewtopic.php%3Fid=18354&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=18354&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=18354&amp;p=3.html">3</a></li><li class="pagination-current"><span>4</span></li><li><a href="viewtopic.php%3Fid=18354&amp;p=5.html">5</a></li><li><a href="viewtopic.php%3Fid=18354&amp;p=6.html">6</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=18354&amp;p=8.html">8</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p83851">
				<div class="post-metadata">
					<div class="post-num">Post #76</div>
					<div class="post-author">prisma</div>
					<div class="post-datetime">
						14 Mar 2009, 10:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>D- to D+ resistance<br />TP-Link 941:&nbsp; 5.94 Ohms</p></blockquote></div><p>hm strange. I get infinity resistance (=NC)</p><div class="quotebox"><blockquote><p>So I try D- and D+ to ground, I see:<br />TP-Link:&nbsp; 2.20 Ohms on both D- and D+</p></blockquote></div><p>I get sth. like 16MOhms here. What kind of voltmeter did you use?</p><div class="quotebox"><blockquote><p>I have read that you tryed some usb modules with original sdk with some sucess and i think its easy as solder a usb port on, but reading your posts again i see that the board seems don&#039;t have a 12v to 5v dc-dc conv, so if i plug a external hd with its own power suplly it will work ?</p></blockquote></div><p>No, that is not gonna work. You need two 15kohm pulldown resistors to ground and the vcc must be connected to the router somehow as well. (for hight/low speed detection, see <a href="http://www.beyondlogic.org/usbnutshell/usb2.htm">here</a> or <a href="http://www.codemercs.com/phpBB2/viewtopic.php?f=2&amp;t=1290">here</a>)<br />I ll try to get some 15kohm resistors and try again...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p83853">
				<div class="post-metadata">
					<div class="post-num">Post #77</div>
					<div class="post-author">prisma</div>
					<div class="post-datetime">
						14 Mar 2009, 12:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>Comment:&nbsp; TP-Link opted to use only one of the Ethernet interfaces provided by the CPU and let the switch do the logical split between LAN and WAN port.&nbsp; I speculate... doing full duplex transfers between LAN and WAN, this means you could run into situations where the same CPU Ethernet interface (eth0) is used to traverse WAN to LAN...&nbsp; &nbsp;I mention this as some of the other AP81 routers using both ports have been benchmarked as capable of 95Mbps WAN to LAN (Trendnet TEW-652BRP).&nbsp; This particular router design may not do as well.&nbsp; I have not benchmarked the TP-Link, just pointing out the issue. I know some people have been seeking this platform for the 400Mhz CPU and capability to saturate the Ethernet.</p></blockquote></div><p>Because i was curious i did some benchmarking:<br /></p><div class="codebox"><pre><code>NETIO - Network Throughput Benchmark, Version 1.26
(C) 1997-2005 Kai Uwe Rommel

TCP connection established.
Packet size  1k bytes:  10901 KByte/s Tx,  10748 KByte/s Rx.
Packet size  2k bytes:  11035 KByte/s Tx,  10375 KByte/s Rx.
Packet size  4k bytes:  11005 KByte/s Tx,  10787 KByte/s Rx.
Packet size  8k bytes:  10973 KByte/s Tx,  10803 KByte/s Rx.
Packet size 16k bytes:  11101 KByte/s Tx,  10810 KByte/s Rx.
Packet size 32k bytes:  10991 KByte/s Tx,  10791 KByte/s Rx.
Done.</code></pre></div><p>I bridged all five interfaces and connected one switchport and the wan port...<br />If there is only one port connected to the CPU why do i get these results? Fullduplex between switch and CPU?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p83864">
				<div class="post-metadata">
					<div class="post-num">Post #78</div>
					<div class="post-author">lark</div>
					<div class="post-datetime">
						14 Mar 2009, 15:52					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>prisma wrote:</cite><blockquote><div class="quotebox"><blockquote><p>Comment:&nbsp; TP-Link opted to use only one of the Ethernet interfaces provided by the CPU and let the switch do the logical split between LAN and WAN port.&nbsp; I speculate... doing full duplex transfers between LAN and WAN, this means you could run into situations where the same CPU Ethernet interface (eth0) is used to traverse WAN to LAN...&nbsp; &nbsp;I mention this as some of the other AP81 routers using both ports have been benchmarked as capable of 95Mbps WAN to LAN (Trendnet TEW-652BRP).&nbsp; This particular router design may not do as well.&nbsp; I have not benchmarked the TP-Link, just pointing out the issue. I know some people have been seeking this platform for the 400Mhz CPU and capability to saturate the Ethernet.</p></blockquote></div><p>Because i was curious i did some benchmarking:<br /></p><div class="codebox"><pre><code>NETIO - Network Throughput Benchmark, Version 1.26
(C) 1997-2005 Kai Uwe Rommel

TCP connection established.
Packet size  1k bytes:  10901 KByte/s Tx,  10748 KByte/s Rx.
Packet size  2k bytes:  11035 KByte/s Tx,  10375 KByte/s Rx.
Packet size  4k bytes:  11005 KByte/s Tx,  10787 KByte/s Rx.
Packet size  8k bytes:  10973 KByte/s Tx,  10803 KByte/s Rx.
Packet size 16k bytes:  11101 KByte/s Tx,  10810 KByte/s Rx.
Packet size 32k bytes:  10991 KByte/s Tx,  10791 KByte/s Rx.
Done.</code></pre></div><p>I bridged all five interfaces and connected one switchport and the wan port...<br />If there is only one port connected to the CPU why do i get these results? Fullduplex between switch and CPU?</p></blockquote></div><p>I am not sure. Because you are doing bi-direction throughput test, even with full duplex, you can&#039;t get these numbers. Are you sure that lan/wan port are in different vlan, and traffic must be forwarded by CPU? Maybe you should try smaller packets, 64 bytes or 128 bytes. The switch fabric can handle 64 bytes packet at line speed, but CPU can&#039;t.</p><p>In one of my earlier post, I pointed out that both interfaces of CPU are connected to switch. My speculation is this PCB supports both 88E6060 and 88E606xB (which supports bypass). TP-Link decided to use 88E6060 though.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p83866">
				<div class="post-metadata">
					<div class="post-num">Post #79</div>
					<div class="post-author">RoundSparrow</div>
					<div class="post-datetime">
						14 Mar 2009, 16:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>prisma wrote:</cite><blockquote><p>I bridged all five interfaces and connected one switchport and the wan port...<br />If there is only one port connected to the CPU why do i get these results? Fullduplex between switch and CPU?</p></blockquote></div><p>I assume it is full duplex (eth0 capable of 200Mbps in proper circumstances).</p><p>For the theoretical bottleneck to appear, traffic would have to do something like this:</p><p>[host A] &lt;---- WAN port &lt;--- [router CPU] ----&gt; LAN port ----&gt; [host B]</p><p>You would have to do a download (wget) from host A to host B, at the same time as host B to host A was doing download.&nbsp; In real world this would have to be something like a full duplex video conference or perhaps a perfect per-to-peer exchange situation (bittorrent equal trading).. AND exceeding 100Mbps in one direction.</p><p>I really don&#039;t know, I was just curious on the matter.&nbsp; you know, it might prove in practice to be a BETTER design to use only one of the interfaces combined with VLAN - as less IRQ activity / less CPU usage?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p83869">
				<div class="post-metadata">
					<div class="post-num">Post #80</div>
					<div class="post-author">prisma</div>
					<div class="post-datetime">
						14 Mar 2009, 18:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>I am not sure. Because you are doing bi-direction throughput test, even with full duplex, you can&#039;t get these numbers. Are you sure that lan/wan port are in different vlan, and traffic must be forwarded by CPU? Maybe you should try smaller packets, 64 bytes or 128 bytes. The switch fabric can handle 64 bytes packet at line speed, but CPU can&#039;t.</p></blockquote></div><p>Just to clarify it&#039;s not a full duplex test. Its first the TX and then the RX. I was doing a new benchmark using masquerading (thats definitley via CPU) and got the same results. Softirq raises to 85 %. If i reduce packet size to 64bytes or 16bytes i get the same results and same softirq. That&#039;s a little odd...</p><div class="quotebox"><blockquote><p>You would have to do a download (wget) from host A to host B, at the same time as host B to host A was doing download.&nbsp; In real world this would have to be something like a full duplex video conference or perhaps a perfect per-to-peer exchange situation (bittorrent equal trading).. AND exceeding 100Mbps in one direction.</p></blockquote></div><p>That&#039;s a very heavy constructed case :-)</p><div class="quotebox"><blockquote><p>I ll try to get some 15kohm resistors and try again...</p></blockquote></div><p>Unfortunatley this is not working for me. For now i&#039;ve given up USB on the WT941ND...</p><p>Maybe a MMC mod via GPIO. Does anyone know how to find gpio pins?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p84437">
				<div class="post-metadata">
					<div class="post-num">Post #81</div>
					<div class="post-author">RoundSparrow</div>
					<div class="post-datetime">
						24 Mar 2009, 09:31					</div>
				</div>
				<div class="post-content content">
					<p>Somebody upgrade the FLASH chip on the TP-Link.&nbsp; Source: <a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=40041&amp;start=60">http://www.dd-wrt.com/phpBB2/viewtopic. … p;start=60</a></p><div class="quotebox"><blockquote><p>sam.vanratt</p><p>PostPosted: Mon Mar 09, 2009 9:28 pm&nbsp; &nbsp; Post subject: TP-Link WR941ND Rev.2.4; Layout V1.1 &nbsp; &nbsp; Reply with quote<br />Hi All,<br />I changed yesterday my Flashrom to a 128MBit Chip, replacing my default Intel 320S33B</p><p>CPU: Atheros AR9132-AC1E 400MHz<br />Switch: Marvell 88E6060-RCJ1<br />Memory: HY5DU561622FTP-5 (16Mbx16, 32MB)<br />Flash: Numonyx(INTEL) M25P128 (16MB) SOP16/300mil/RM.5<br />Radio: AR9104</p><p>With a small adapter to my Flasher I first flashed the chip with the default TP-Link firmware (as I still have no other (...wrt) binary found) and it works. As the RM0.5 is very comfortable (comp to others) it&#039;s really easy. Maybe a MX25L12805D could work as well, but I have not tried to flash internally to verify the segment/block flashing capability. Maybe this helps<br />Cheers<br />Sam</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p86304">
				<div class="post-metadata">
					<div class="post-num">Post #82</div>
					<div class="post-author">_bbb_</div>
					<div class="post-datetime">
						20 Apr 2009, 23:25					</div>
				</div>
				<div class="post-content content">
					<p>I think I bricked my WR941... <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> Tried to go back to original firmware (to look at some log output from the binary Madwifi driver it ships with):</p><div class="codebox"><pre><code>Autobooting in 1 seconds, press &quot;tp&quot; to stop
ar7100&gt; setenv serverip 192.168.84.9; setenv ipaddr 192.168.84.1
ar7100&gt; tftp 0x80800000 wr941n_en_up_boot_090324.bin
set link to 100M full by lqm.
dup 1 speed 100
Using eth0 device
TFTP from server 192.168.84.9; our IP address is 192.168.84.1
Filename &#039;wr941n_en_up_boot_090324.bin&#039;.
Load address: 0x80800000
Loading: #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         ##############
done
Bytes transferred = 4063744 (3e0200 hex)
ar7100&gt; erase 0xbf020000 +0x3e0200

First 0x2 last 0x40 sector size 0x10000
  64
Erased 63 sectors
ar7100&gt; cp.b 0x80800000 0xbf020000 0x3e0200
Copy to Flash... write addr: bf020000
done
ar7100&gt; reset

Resetting...
FATAL: term closed</code></pre></div><p>Thought I was being really smart when I changed that length param to erase/cp.b. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> Unfortunately the router did not agree. <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> Seems like there is something at the end of the flash there that is needed to even get into U-Boot.</p><p>Any way to get it back? Buy a &quot;Flasher&quot; as above? <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> Or maybe JTAG?</p>											<p class="post-edited">(Last edited by <strong>_bbb_</strong> on 20 Apr 2009, 23:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p86494">
				<div class="post-metadata">
					<div class="post-num">Post #83</div>
					<div class="post-author">colrack</div>
					<div class="post-datetime">
						23 Apr 2009, 23:17					</div>
				</div>
				<div class="post-content content">
					<p>Is there someone owning a rev 1? <br />Are there any info about it? <br />Is it ap81 based too?</p>											<p class="post-edited">(Last edited by <strong>colrack</strong> on 23 Apr 2009, 23:18)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95491">
				<div class="post-metadata">
					<div class="post-num">Post #84</div>
					<div class="post-author">finger</div>
					<div class="post-datetime">
						7 Oct 2009, 11:24					</div>
				</div>
				<div class="post-content content">
					<p>so did anybody get USB working on this?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p99335">
				<div class="post-metadata">
					<div class="post-num">Post #85</div>
					<div class="post-author">maksym</div>
					<div class="post-datetime">
						26 Dec 2009, 07:59					</div>
				</div>
				<div class="post-content content">
					<p>Wonder if anybody got USB working on D-615. I populated the two data traces with 22Ohm resistors and attached the two 15kOhm pulldowns to the ground. I tried to use one of the +5 traces on the router as Acc, as well as a use a powered hub with a flash drive. However, the router does not seem to recognize the drive - I don&#039;t get /dev/scsi folder, though this might be a software problem.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p101750">
				<div class="post-metadata">
					<div class="post-num">Post #86</div>
					<div class="post-author">Kapac</div>
					<div class="post-datetime">
						30 Jan 2010, 07:53					</div>
				</div>
				<div class="post-content content">
					<p>Who has got something to add a USB?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p101765">
				<div class="post-metadata">
					<div class="post-num">Post #87</div>
					<div class="post-author">DummyPLUG</div>
					<div class="post-datetime">
						30 Jan 2010, 16:06					</div>
				</div>
				<div class="post-content content">
					<p>I just do a quick test on my 1043ND, which basically the same as 941ND, and also seems just using only one interface.<br />I use iperf to do bi-direction benchmark, found out the sum is nearly 13XMb/s, same as in single direction. and CPU load is sky high.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p102333">
				<div class="post-metadata">
					<div class="post-num">Post #88</div>
					<div class="post-author">alif</div>
					<div class="post-datetime">
						7 Feb 2010, 00:36					</div>
				</div>
				<div class="post-content content">
					<p>I connected the device (tl-wr941nd v4) to your my computer. and this is what I saw:</p><p>U-Boot 1.1.4 (Aug&nbsp; 4 2009 - 14:30:25)</p><p>AP93 (ar7240) U-boot<br />D<br />RAM:&nbsp; <br />sri</p><p>#### TAP VALUE 1 = 8, 2 = 9<br />32 MB<br />id read 0x100000ff<br />flash size 4194304<br />, sector count = 64<br />Flash:&nbsp; 4 MB<br />Using default environment</p><br /><p>In:&nbsp; &nbsp; serial<br />Out:&nbsp; &nbsp;serial<br />Err:&nbsp; &nbsp;serial<br />Net:&nbsp; &nbsp;ag7240_enet_i<br />nitialize...<br />No valid address in Flash. Using fixed address</p><p>: cfg1 0xf cfg2 0x7014<br />eth0: 00:03:7f:09:0b:ad</p><p>eth0 up<br />No valid address in Flash. Using fixed address<br />: cfg1 0xf cfg2 0x7214</p><p>eth1: 00:03:7f:09:0b:ad<br />ATHRS26: resetting s26<br />ATHRS26: s26 reset done</p><p>eth1 up<br />eth0, eth1<br />Autobooting in 1 seconds</p><p>cat /proc/cpuinfo<br />system type\0x09\0x09: Atheros AR7240 (Python)<br />processor\0x09\0x09: 0<br />cpu model\0x09\0x09: MIPS<br /> 24K V7.4<br />BogoMIPS\0x09\0x09: 265.21<br />wait instruction\0x09: yes<br />microsecond timers\0x09: yes<br />tlb_entries\0x09\0x09: 16<br />extra interrupt vector\0x09: yes<br />hardware watchpoint\0x09: yes<br />ASEs implemented\0x09: mips16<br />VCED exceptions\0x09\0x09: not available<br />VCEI exceptions\0x09\0x09: not available</p><br /><p>Can anything be said on this device? Can I flash it?</p>											<p class="post-edited">(Last edited by <strong>alif</strong> on 15 Feb 2010, 19:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103059">
				<div class="post-metadata">
					<div class="post-num">Post #89</div>
					<div class="post-author">alif</div>
					<div class="post-datetime">
						16 Feb 2010, 20:14					</div>
				</div>
				<div class="post-content content">
					<p>I have some news:<br />## Booting image at 81000000 ...<br />&nbsp; &nbsp;Uncompressing Kernel Image ... <br />OK</p><p>Starting kernel ...</p><p>Linux version 2.6.32.7 (admin@serversmb.localdomain) (gcc <br />version 4.3.3 (GCC) ) #1 Tue Feb 9 13:02:23 ALMT 2010<br />bootconsole [early0] enabled<br />CPU revision is: 00019374 (MIPS 24Kc)<br />Atheros AR7240 rev 2, CPU:400.000 MHz, AHB:200.000 MHz, DDR:400.000 MHz<br />Determined physical RAM map:<br /> memory: 02000000 @ 00000000 (usable)<br />Initrd not found or empty - disabling initrd<br />Zone PFN ranges:<br />&nbsp; Normal&nbsp; &nbsp;0x00000000 -&gt; 0x00002000<br />Movable zone start PFN for each node<br />early_node_map[1] active PFN ranges<br />&nbsp; &nbsp; 0: 0x00000000 -&gt; 0x00002000<br />Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 8128<br />Kernel command line: rootfstype=squashfs,yaffs,jffs2 noinitrd console=ttyS0,115200 board=TL-WR941ND<br />PID hash table entries: 128 (order: -3, 512 bytes)<br />Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)<br />Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.<br />Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes<br />Writing ErrCtl register=00000000<br />Readback ErrCtl register=00000000<br />Memory: 28064k/32768k available (2002k kernel code, 4704k reserved, 378k data, 1540k init, 0k highmem)<br />SLUB: Genslabs=7, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br />Hierarchical RCU implementation.<br />NR_IRQS:56<br />Calibrating delay loop... <br />266.24 BogoMIPS (lpj=1331200)<br />Mount-cache hash table entries: 512<br />devtmpfs: ini<br />tialized<br />NET: Registered protocol family 16<br />MIPS: machine is TP-LINK TL-WR941ND</p><p>bio: create slab &lt;bio-0&gt; at 0<br />Switching to clocksource MIPS</p><p>NET: Registered protocol family 2<br />IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP established hash table entries: 1024 (order: 1, 8192 bytes)<br />TCP bind hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP: Hash tables configured (established 1024 bind 1024)<br />TCP reno registered<br />NET: Registered protocol family 1</p><p>squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />Registering mini_fo version $<br />Id$<br />JFFS2 version 2.2. (NAND) (SUMMARY)&nbsp; \0xc2\0xa9 2001-2006 Red Hat, Inc.<br />yaffs Feb&nbsp; 9 2010 12:58:25 Installing. <br />msgmni has been set to 54<br />io scheduler noop registered<br />io scheduler deadline registered (default)<br />Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled<br />serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A<br />console [ttyS0] enabled, bootconsole disabled<br />console [ttyS0] enabled, bootconsole disabled<br />Atheros AR71xx SPI Controller driver version 0.2.4<br />m25p80 spi0.0: w25q32 (4096 Kbytes)<br />Searching for RedBoot partition table in spi0.0 at offset 0x3fe000<br />Searching for RedBoot partition table in spi0.0 at offset 0x3ff000<br />No RedBoot partition table detected in spi0.0<br />spi0.0: no WRT160NL signature found<br />Creating 5 MTD partitions on &quot;spi0.0&quot;:<br />0x000000000000-0x000000020000 : &quot;u-boot&quot;<br />0x000000020000-0x000000160000 : &quot;kernel&quot;<br />0x000000160000-0x0000003f0000 : &quot;rootfs&quot;<br />mtd: partition &quot;rootfs&quot; set to be root filesystem<br />split_squashfs: no squashfs found in &quot;spi0.0&quot;<br />0x0000003f0000-0x000000400000 : &quot;art&quot;<br />0x000000020000-0x0000003f0000 : &quot;firmware&quot;<br />ag71xx_mdio: probed<br />eth0: Atheros AG71xx at 0xb9000000, irq 4</p><p>Atheros AR71xx hardware watchdog driver version 0.1.0<br />TCP west<br />wood registered<br />NET: Registered protocol family 17<br />Distributed Switch Architecture driver version 0.1<br />eth0[0]: could not detect attached switch<br />eth0[0]: couldn&#039;t create dsa switch instance (error -22)<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />Freeing unused kernel memory: 1540k freed</p><p>gpio-buttons driver version 0.1.2<br />input: gpio-buttons as /devices/platform/gpio-buttons/input/input0</p><p>Button Hotplug driver version 0.3.1<br />eth0: link up (100Mbps/Full duplex)<br />- preinit -<br />Registered led device: tl-wr941nd:green:system<br />Registered led device: tl-wr941nd:red:qss<br />Registered led device: tl-wr941nd:green:qss<br />Press Press f&lt;ENTER&gt; to enter failsafe mode</p><p>- regular preinit -</p><p>Please press Enter to activate this console. <br />Generic kernel compatibility enabled based on linux-next next-20100113</p><p>cfg80211: Calling CRDA to update world regulatory domain</p><p>ath9k ath9k: request_irq failed<br />ath9k: probe of ath9k failed with error -16</p><p>PPP generic driver version 2.4.2<br />ip_tables: (C) 2000-2006 Netfilter Core Team</p><p>NET: Registered protocol family 24<br />nf_conntrack version 0.5.0 (462 buckets, 1848 max)</p><p>but wireless is not work(</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103061">
				<div class="post-metadata">
					<div class="post-num">Post #90</div>
					<div class="post-author">69350</div>
					<div class="post-datetime">
						16 Feb 2010, 21:22					</div>
				</div>
				<div class="post-content content">
					<p>chips of wr941n(d)-v4&nbsp; is&#039;t the same as wr941n(d)-v2<br />AP93 (ar7240)&nbsp; is CPU+Switch,not the same as wr941n v2(CPU: Atheros AR9132 400MHz Switch: Marvell 88E6060-RCJ1)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103062">
				<div class="post-metadata">
					<div class="post-num">Post #91</div>
					<div class="post-author">alif</div>
					<div class="post-datetime">
						16 Feb 2010, 21:38					</div>
				</div>
				<div class="post-content content">
					<p>I understand it is not supported now? Can I be of any help to accelerate the process of porting? Any logs or photos of the device?<br />in make menuconfig:<br />Target System (Atheros AR71XX/AR7240/AR913x) ---&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^^^^^<br />May be try another driver? Madwifi?</p>											<p class="post-edited">(Last edited by <strong>alif</strong> on 16 Feb 2010, 21:46)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103063">
				<div class="post-metadata">
					<div class="post-num">Post #92</div>
					<div class="post-author">69350</div>
					<div class="post-datetime">
						16 Feb 2010, 21:38					</div>
				</div>
				<div class="post-content content">
					<p>chips 0f wr841n v5 supported by openwrt is AP93 (ar7240),maybe some one will add support to wr941n(d) v4 quickly</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103065">
				<div class="post-metadata">
					<div class="post-num">Post #93</div>
					<div class="post-author">alif</div>
					<div class="post-datetime">
						16 Feb 2010, 21:47					</div>
				</div>
				<div class="post-content content">
					<p>Thank you) tomorrow i will try it) Sorry for my english)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103081">
				<div class="post-metadata">
					<div class="post-num">Post #94</div>
					<div class="post-author">69350</div>
					<div class="post-datetime">
						17 Feb 2010, 09:40					</div>
				</div>
				<div class="post-content content">
					<p>if i were you,i will try the basic openwrt in the AP93 (ar7240)<br />i speculate the wr941n(d)v4 is the same as wr841n(d)v5 except of the wireless and the flash modules</p><p>than according to this <a href="https://forum.openwrt.org/viewtopic.php?pid=92761#p92761">https://forum.openwrt.org/viewtopic.php … 761#p92761</a><br />to try others modules</p><p>i want to know the wr941nd v4 hardware details,i will appreciate if you can post the photos of this router</p><p>and good luck</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103112">
				<div class="post-metadata">
					<div class="post-num">Post #95</div>
					<div class="post-author">alif</div>
					<div class="post-datetime">
						17 Feb 2010, 18:39					</div>
				</div>
				<div class="post-content content">
					<p>I do not understand how to spread this photo here)</p><p><a href="http://s002.radikal.ru/i198/1002/3b/5c5df065201f.jpg">http://s002.radikal.ru/i198/1002/3b/5c5df065201f.jpg</a><br /><a href="http://s54.radikal.ru/i144/1002/b0/82aaaaa0f134.jpg">http://s54.radikal.ru/i144/1002/b0/82aaaaa0f134.jpg</a></p><p>How to disable the attempt to update when compiling?<br />I have a gprs connection(<br />&quot;Resolving downloads.openwrt.org... failed: Temporary failure in name resolution.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />wget: unable to resolve host address `downloads.openwrt.org&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Download failed.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />No more mirrors to try - giving up.&quot; <br />And i have no binaries(</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103118">
				<div class="post-metadata">
					<div class="post-num">Post #96</div>
					<div class="post-author">alif</div>
					<div class="post-datetime">
						17 Feb 2010, 19:20					</div>
				</div>
				<div class="post-content content">
					<p>Filename &#039;openwrt-ar71xx-tl-wr841nd-v5-squashfs-universal.bin&#039;.<br />....<br />ar7240&gt; <br />bootm</p><p>## Booting image at 81000000 ...<br />&nbsp; &nbsp;Uncompressing Kernel Image <br />... <br />OK</p><p>Starting kernel ...</p><p>Linux version 2.6.32.7 (buildbot@tksite) (gcc version<br /> 4.3.3 (GCC) ) #1 Wed Feb 3 15:28:03 CST 2010<br />bootconsole [early0] enabled<br />CPU revision is: 00019374 (MIPS 24Kc)<br />Atheros AR7240 rev 2, CPU:400.000 MHz, AHB:200.000 MHz, DDR:400.000 MHz<br />Determined physical RAM map:<br /> memory: 02000000 @ 00000000 (usable)<br />Initrd not found or empty - disabling initrd<br />Zone PFN ranges:<br />&nbsp; Normal&nbsp; &nbsp;0x00000000 -&gt; 0x00002000<br />Movable zone start PFN for each node<br />early_node_map[1] active PFN ranges<br />&nbsp; &nbsp; 0: 0x00000000 -&gt; 0x00002000<br />Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 8128<br />Kernel command line: rootfstype=squashfs,yaffs,jffs2 noinitrd console=ttyS0,115200 board=TL-WR741ND<br />PID hash table entries: 128 (order: -3, 512 bytes)<br />Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)<br />Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.<br />Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes<br />Writing ErrCtl register=00000000<br />Readback ErrCtl register=00000000<br />Memory: 29272k/32768k available (2101k kernel code, 3496k reserved, 458k data, 152k init, 0k highmem)<br />SLUB: Genslabs=7, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br />Hierarchical RCU implementation.<br />NR_IRQS:56<br />Calibrating delay loop... <br />266.24 BogoMIPS (lpj=1331200)<br />Mount-cache hash table entries: <br />512<br />devtmpfs: initialized<br />NET: Registered protocol family 16<br />MIPS: machine is TP-LINK TL-WR741ND</p><p>registering PCI controller with io_map_base unset<br />bio: crea<br />te slab &lt;bio-0&gt; at 0<br />PCI: fixup device 0000:00:00.0<br />pci 0000:00:00.0: PME# supported from D0 D1 D3hot<br />pci 0000:00:00.0: PME# disabled<br />PCI: mapping irq 48 to pin1@0000:00:00.0<br />Switching to clocksource MIPS<br />NET: Registered protocol family 2<br />IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP established hash table entries: 1024 (order: 1, 8192 bytes)<br />TCP bind hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP: Hash tables configured (established 1024 bind 1024)<br />TCP reno registered<br />NET: Registered protocol family 1<br />squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />Registering mini_fo version $Id$<br />JFFS2 version 2.2. (NAND) (SUMMARY)&nbsp; \0xc2\0xa9 2001-2006 Red Hat, Inc.<br />yaffs Feb&nbsp; 3 2010 15:21:29 Installing. <br />msgmni has been set to 57<br />alg: No test for stdrng (krng)<br />io scheduler noop registered<br />io scheduler deadline registered (default)<br />Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled<br />serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A<br />console [ttyS0] enabled, bootconsole disabled<br />console [ttyS0] enabled, bootconsole disabled<br />Atheros AR71xx SPI Controller driver version 0.2.4<br />m25p80 spi0.0: unrecognized JEDEC id ef4016<br />ag71xx_mdio: probed<br />eth0: Atheros AG71xx at 0xba000000, irq 5</p><p>eth1: Atheros AG71xx at 0xb9000000, irq 4</p><p>Atheros AR71xx hardware watchdog driver version 0.1.0<br />TCP w<br />estwood registered<br />NET: Registered protocol family 17<br />Bridge firewalling registered<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />VFS: Cannot open root device &quot;&lt;NULL&gt;&quot; or unknown-block(0,0)<br />Please append a correct &quot;root=&quot; boot option; here are the available partitions:<br />Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103124">
				<div class="post-metadata">
					<div class="post-num">Post #97</div>
					<div class="post-author">69350</div>
					<div class="post-datetime">
						17 Feb 2010, 20:33					</div>
				</div>
				<div class="post-content content">
					<p>w9425g6eh-5h is ram,the AR7240 is under the radiator</p><p>i think the flash is not compatible when use &quot;openwrt-ar71xx-tl-wr841nd-v5-squashfs-universal.bin&quot;</p>											<p class="post-edited">(Last edited by <strong>69350</strong> on 19 Feb 2010, 18:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103160">
				<div class="post-metadata">
					<div class="post-num">Post #98</div>
					<div class="post-author">alif</div>
					<div class="post-datetime">
						18 Feb 2010, 05:44					</div>
				</div>
				<div class="post-content content">
					<p>They differ only in flash? It possible to combine firmware 941n v5 and 841n v5? Any idea?)</p><p>Maybe the problem is this:<br /></p><div class="quotebox"><blockquote><p>Just be warned that at some point the flash chip in these devices has changed.</p><p>It was a winbond chip identified by the kernel as s25sl032a</p><p>now it&#039;s an hynix 934A HY5DU561622FTP-5<br />Kernel sees this as<br />m25p80 spi0.0: unrecognized JEDEC id ef4016</p></blockquote></div><p>How can I do?</p>											<p class="post-edited">(Last edited by <strong>alif</strong> on 18 Feb 2010, 06:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103165">
				<div class="post-metadata">
					<div class="post-num">Post #99</div>
					<div class="post-author">alif</div>
					<div class="post-datetime">
						18 Feb 2010, 06:16					</div>
				</div>
				<div class="post-content content">
					<p>I found the forum a few devices with 7240. Maybe they&#039;re in something similar?<br /><a href="https://forum.openwrt.org/viewtopic.php?id=23260">https://forum.openwrt.org/viewtopic.php?id=23260</a><br /><a href="https://forum.openwrt.org/viewtopic.php?pid=100576">https://forum.openwrt.org/viewtopic.php?pid=100576</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103214">
				<div class="post-metadata">
					<div class="post-num">Post #100</div>
					<div class="post-author">69350</div>
					<div class="post-datetime">
						18 Feb 2010, 21:32					</div>
				</div>
				<div class="post-content content">
					<p>comparing to the two of your posting of the system log,<br />the first seems the flash is right but the switch not compatible<br />the sencond seems the switch right but the flash not compatible</p><p>i think the flash(maybe eeprom) of 941n v4 is the same as 941n v2,<br />and the circuit is the same as 841n v5</p><p>anyone has a good idea<br />please help to support TL-WR941ND v4</p><p>thanks</p>											<p class="post-edited">(Last edited by <strong>69350</strong> on 19 Feb 2010, 18:28)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 4 of 8</div><nav><ul><li><a href="viewtopic.php%3Fid=18354&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=18354&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=18354&amp;p=3.html">3</a></li><li class="pagination-current"><span>4</span></li><li><a href="viewtopic.php%3Fid=18354&amp;p=5.html">5</a></li><li><a href="viewtopic.php%3Fid=18354&amp;p=6.html">6</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=18354&amp;p=8.html">8</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>