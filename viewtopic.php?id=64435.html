<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Which network mode and setup?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p321232">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">rm312</div>
					<div class="post-datetime">
						25 Apr 2016, 19:08					</div>
				</div>
				<div class="post-content content">
					<p>EDIT - is it possible to connect a openWRT router in client mode to a standard wireless access point?</p><br /><p>Heya, I&#039;m very new to this and not experienced with networking so please be patient.</p><p>I am using a build of openWRT to run fadecandy server on a tplink TL-WR703N - found here <a href="http://blog.nemik.net/2014/02/standalone-openwrt-fadecandy-server-for-led-control/">http://blog.nemik.net/2014/02/standalon â€¦ d-control/</a></p><p>I have successfully set it up and changed the config file for the fadecandy server but I cannot successfully change the wireless networking settings so it will work on my home network and not broadcast its own...</p><p>currently the /etc/config/wireless file looks like this:</p><div class="codebox"><pre><code>config wifi-device  radio0
        option type     mac80211
        option channel  11
        option hwmode   11ng
        option path     &#039;platform/ar933x_wmac&#039;
        option htmode   HT20
        list ht_capab   SHORT-GI-20
        list ht_capab   SHORT-GI-40
        list ht_capab   RX-STBC1
        list ht_capab   DSSS_CCK-40
        # REMOVE THIS LINE TO ENABLE WIFI:
        # option disabled 1

config wifi-iface
        option device   radio0
        option network  wan
        option mode     ap
        option ssid     Fadecandy
        option encryption none</code></pre></div><p>I need it to join my home wifi network, I changed the &quot;ap&quot; to &quot;sta&quot; and the ssid and added the key in wifi-iface but it didnt connect so currently running in failsafe mode. The ssid is &quot;PlusnetWireless0658F9&quot; but im not sure what else to add/change and which network mode to use. I want everything to connect to the same network so I can use the internet while connected to the fadecandy server.</p><p>Any help would be much appreciated!!</p><p>Cheers<br />Rich</p>											<p class="post-edited">(Last edited by <strong>rm312</strong> on 25 Apr 2016, 19:46)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p321235">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">rm312</div>
					<div class="post-datetime">
						25 Apr 2016, 19:33					</div>
				</div>
				<div class="post-content content">
					<p>I wasn&#039;t sure about that as the wifi was working with that line in place before - isn&#039;t it commented out?!</p><p>to start please could you suggest the correct network mode - I think it should be &quot;sta&quot; or client mode</p><p>I am connecting to a router providing internet via wifi and want other computers to be able to connect the the openWRT router via wifi whilst still having internet access.</p><p>I&#039;ve read the wiki and being new to networking a lot of the terms are going over my head!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p321237">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Max Hopper</div>
					<div class="post-datetime">
						25 Apr 2016, 20:08					</div>
				</div>
				<div class="post-content content">
					<p>sta(tion) is the correct mode for the router to act as a client to a wireless a(ccess) p(oint).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p321242">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">rm312</div>
					<div class="post-datetime">
						25 Apr 2016, 20:40					</div>
				</div>
				<div class="post-content content">
					<p>thanks! </p><p>should I need to change anything else other than the /etc/config/wireless file? finding conflicting info about also changing the /etc/config/network file too...</p><p>this isn&#039;t working yet </p><div class="codebox"><pre><code>config wifi-device  radio0
        option type     mac80211
        option channel  11
        option hwmode   11ng
        option path     &#039;platform/ar933x_wmac&#039;
        option htmode   HT20
        list ht_capab   SHORT-GI-20
        list ht_capab   SHORT-GI-40
        list ht_capab   RX-STBC1
        list ht_capab   DSSS_CCK-40
        # REMOVE THIS LINE TO ENABLE WIFI:
         option disabled 0

config wifi-iface
        option device   radio0
        option network  wan
        option mode     sta
         option wds 1
        option ssid     PlusnetWireless0658F9
        option encryption psk
        option key      ###########</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p321243">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">slh</div>
					<div class="post-datetime">
						25 Apr 2016, 20:41					</div>
				</div>
				<div class="post-content content">
					<p>To just about any (including non-OpenWrt-) AP, yes <a href="https://wiki.openwrt.org/doc/recipes/relayclient">Routed Client with relayd (Pseudobridge)</a>. </p><p>However if your primary router is also running OpenWrt, <a href="https://wiki.openwrt.org/doc/recipes/atheroswds">Atheros and MAC80211 WDS to implement a wireless network bridge (wireless repeater)</a> is a better choice, as it&#039;s transparent to IPv6 and other low(er) level features.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p321265">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Max Hopper</div>
					<div class="post-datetime">
						26 Apr 2016, 00:32					</div>
				</div>
				<div class="post-content content">
					<p>WDS and STA(tion) aka <em>wpa_supplicant</em> mode are in conflict.</p><p>Post <em>/etc/config/network</em></p><p>EDIT: corrected executable name that provides STA functionality</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p322417">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">rm312</div>
					<div class="post-datetime">
						3 May 2016, 20:58					</div>
				</div>
				<div class="post-content content">
					<p>ok so the /etc/config/network is as follow:</p><br /><div class="codebox"><pre><code>config interface &#039;loopback&#039;
        option ifname &#039;lo&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;127.0.0.1&#039;
        option netmask &#039;255.0.0.0&#039;

config interface &#039;lan&#039;
        option ifname &#039;eth0&#039;
        option proto &#039;dhcp&#039;

config interface &#039;wan&#039;
        option ifname &#039;wlan0&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;192.168.1.24&#039;
        option netmask &#039;255.255.255.0&#039;</code></pre></div><p>and I&#039;ve removed the WDS line. </p><p>The main router is not openWRT. I am trying to run a websocket server on the openWRT AP which a laptop can connect to while still getting the internet from the main router.</p><p>Thanks for the help so far!!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p322418">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Max Hopper</div>
					<div class="post-datetime">
						3 May 2016, 21:07					</div>
				</div>
				<div class="post-content content">
					<p>The websocket server, being an endpoint, has no relevance to configuring the router as a STA(tion) to the modem.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p323077">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">rm312</div>
					<div class="post-datetime">
						9 May 2016, 11:31					</div>
				</div>
				<div class="post-content content">
					<p>ok thanks, I just want to make sure that the websocket server is still reachable at the same address once it is set up or i&#039;ll be totally lost.</p><p>Does the config/network file need work? can it be connected using dhcp or is a static ip best?</p>											<p class="post-edited">(Last edited by <strong>rm312</strong> on 9 May 2016, 11:47)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>