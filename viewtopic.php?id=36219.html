<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Possible bug in switch driver Atheros AR8316 please help</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p164592">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">darkwin</div>
					<div class="post-datetime">
						15 Apr 2012, 20:36					</div>
				</div>
				<div class="post-content content">
					<p>Hello, i have a Buffalo WBMR-HP-G300H with actual trunk.</p><p>It isn´t possible to make traffic between lan Ports.</p><p><a href="https://dev.openwrt.org/ticket/11143">https://dev.openwrt.org/ticket/11143</a></p><p>If i configure the switch in /etc/config/network</p><div class="codebox"><pre><code>config switch
  option name &#039;switch0&#039;
  option reset &#039;1&#039;
  option enable_vlan &#039;1&#039;

config switch_vlan
  option device &#039;switch0&#039;
  option vlan &#039;1&#039;
  option ports &#039;0 1 2 3 4 5&#039;</code></pre></div><p>after reboot, the switch is unusable. <br />I mean it isn´t possible to connect my pc to the switch. No DCHP, no Internet..... the switch is death.</p><br /><p>Would someone please look at the driver code so that I can use the switch?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p166835">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">ash87</div>
					<div class="post-datetime">
						8 May 2012, 18:12					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Are you able to post dmesg output? It might be useful. I wonder if this is adding a port which shouldn&#039;t be.</p><p>I would suggest changing:</p><p>option ports &#039;0 1 2 3 4 5&#039;</p><p>to:</p><p>option ports &#039;0 1 2 3 5&#039;</p><p>or:</p><p>option ports &#039;0 1 2 3 4&#039;</p><p>and retrying. If that doesn&#039;t work, try removing others singly and then doubly etc and see which ones can talk to each other, if any. Don&#039;t know if it will help, but it&#039;s worth a try....</p><p>Ash</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p166840">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">darkwin</div>
					<div class="post-datetime">
						8 May 2012, 18:48					</div>
				</div>
				<div class="post-content content">
					<p>Hi, thanks for your help but I sent the router back.<br />Not only that I could not use the switch, the router has established connection to the Internet is no longer connected.<br />DSL sync was ok, there was no connect.</p>											<p class="post-edited">(Last edited by <strong>darkwin</strong> on 8 May 2012, 18:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p166843">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">nass</div>
					<div class="post-datetime">
						8 May 2012, 19:04					</div>
				</div>
				<div class="post-content content">
					<p>ash87 I have the same router, soon enough I&#039;ll put openwrt in it (have ddwrt running at the moment) and try what you said</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p166923">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">ash87</div>
					<div class="post-datetime">
						9 May 2012, 23:12					</div>
				</div>
				<div class="post-content content">
					<p>nass, if you have dd-wrt running still, maybe you could find some of vlan settings there and see how they differ from the above? I&#039;ve never used dd-wrt, so I don&#039;t know if there is a similar config option somewhere?</p>											<p class="post-edited">(Last edited by <strong>ash87</strong> on 9 May 2012, 23:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p166968">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">nass</div>
					<div class="post-datetime">
						10 May 2012, 11:47					</div>
				</div>
				<div class="post-content content">
					<p>ok will do, probably will find some time over the weekend</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p166988">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">ash87</div>
					<div class="post-datetime">
						10 May 2012, 16:20					</div>
				</div>
				<div class="post-content content">
					<p>Awesome. It might be wise to make sure you set up wireless access as darkwin&#039;s posts suggest that getting the vlan wrong disables wired access somehow. Do you have a serial connection to it or anything, just in case? <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p166992">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">nass</div>
					<div class="post-datetime">
						10 May 2012, 16:52					</div>
				</div>
				<div class="post-content content">
					<p>no unfortunately not yet, but I have ordered a usb -to- UART adaptor, should arrive in a few days</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167055">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">darkwin</div>
					<div class="post-datetime">
						11 May 2012, 09:34					</div>
				</div>
				<div class="post-content content">
					<p>Hi, despite the switch config it was always possible to connect the router via wireless.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167067">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">nass</div>
					<div class="post-datetime">
						11 May 2012, 11:35					</div>
				</div>
				<div class="post-content content">
					<p>yes that is very help full indeed:)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167232">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">sachaz</div>
					<div class="post-datetime">
						13 May 2012, 13:45					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />I&#039;m planning to buy this modem and use it whith openwrt, but only if I can make traffic between lan ports.<br />what is the state of this request and <a href="https://dev.openwrt.org/ticket/11143">https://dev.openwrt.org/ticket/11143</a> ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167280">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">nass</div>
					<div class="post-datetime">
						14 May 2012, 00:41					</div>
				</div>
				<div class="post-content content">
					<p>hello everyone, sorry it tool me so long to reply <br />I was not familiar with dd-wrt so i spent sometime trying to understand it.</p><p>here is the relevant post it ddwrt forum..</p><p>to sum up, trying to configure theswitch does not brick the wired access to the router, but it doesn&#039;t do what i want either.<br />it appears the switch configuration is never &#039;downloaded&#039; to the switch itself to change it. bummer.</p><p>I also have problems connecting to the internet (PPPoE, annex A) but thats another problem... in the meantime, i do have a serial connection so if you guys have any clever thought, we can work it out probably.<br />also for the time being, i&#039;ll avoid switching to openwrt since i don&#039;t have a way to go back to ddwrt, should things not work...<br />of course if its as easy as copying the firmware using mtd or smth, i&#039;m more than willing to try it...:)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167299">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">darkwin</div>
					<div class="post-datetime">
						14 May 2012, 09:11					</div>
				</div>
				<div class="post-content content">
					<p>Hi, you can bring your router back to ddwrt with mtd.<br />but you will not want to, because openwrt is simply great</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167312">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">nass</div>
					<div class="post-datetime">
						14 May 2012, 11:35					</div>
				</div>
				<div class="post-content content">
					<p>you can ? hm indeed I thought you couldn&#039;t because of this <br /><a href="http://forums.buffalotech.com/t5/Wireless/Unbrick-Buffalo-WBMR-HP-G300H/td-p/96228">http://forums.buffalotech.com/t5/Wirele … td-p/96228</a><br />but indeed it was his error</p><p>anyhow i will try openwrt soon enough.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167314">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">sachaz</div>
					<div class="post-datetime">
						14 May 2012, 11:54					</div>
				</div>
				<div class="post-content content">
					<p>Sorry to re-answear but: is the traffic between lan ports works now on openwrt ?</p><div class="quotebox"><cite>sachaz wrote:</cite><blockquote><p>Hi,<br />I&#039;m planning to buy this modem and use it whith openwrt, but only if I can make traffic between lan ports.<br />what is the state of this request and <a href="https://dev.openwrt.org/ticket/11143">https://dev.openwrt.org/ticket/11143</a> ?</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167328">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">darkwin</div>
					<div class="post-datetime">
						14 May 2012, 16:46					</div>
				</div>
				<div class="post-content content">
					<p>I have yet heard of anyone who says that it works</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p169949">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">peps1iko</div>
					<div class="post-datetime">
						13 Jun 2012, 23:18					</div>
				</div>
				<div class="post-content content">
					<p>Build r32336</p><p>and it doesn&#039;t work. Today I flashed from ddwrt 18024 (lan worked) to this build.</p><p>What could it be?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>