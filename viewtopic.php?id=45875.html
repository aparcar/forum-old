<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Accidentally revert to wrong image.</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p210232">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mastermindsos</div>
					<div class="post-datetime">
						20 Aug 2013, 15:08					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I need help. <br />I wanted to revert my openwrt to stock tplink. But instead of using the tplink image, I accidentally used openwrt image.</p><p>Now, only power led and my ethernet(1) led are on. How can I fix this?<br />Please lead me. Thank you.</p><p>ps: I have wrn1043nd.</p>											<p class="post-edited">(Last edited by <strong>mastermindsos</strong> on 20 Aug 2013, 15:09)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210234">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						20 Aug 2013, 15:19					</div>
				</div>
				<div class="post-content content">
					<p>i don&#039;t see the problem in flashing an openwrt image instead of a tp-link one.. was it built for your router model?</p><p>i assume you cannot ping the router anymore at default ip, right?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210235">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mastermindsos</div>
					<div class="post-datetime">
						20 Aug 2013, 15:26					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I cannot ping 192.168.1.1 <br />It says destination host unreachable.<br />I used squash-factory image for 1043nd.</p><p>I wanted to revert to stock tplink and then apply latest openwrt image.<br />I used this command, &quot;mtd -r write tplink.bin firmware&quot; where tplink.bin is the openwrt image.</p>											<p class="post-edited">(Last edited by <strong>mastermindsos</strong> on 20 Aug 2013, 15:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210239">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">fernandocunha</div>
					<div class="post-datetime">
						20 Aug 2013, 16:11					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m NOT sure, but I think the <em>factory</em> firmware is to be used only when the router is flashed with the stock firmware.</p><br /><p>So, when you flashed the 1043nd with another <em>factory</em>, you&#039;ve just bricked it...</p><p>If I&#039;m right, you now have a beautiful peace of plastic waiting to be accessed by serial... =/</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210245">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						20 Aug 2013, 17:36					</div>
				</div>
				<div class="post-content content">
					<p>no, factory image contains spcial header and image padding compatible with TP-Link GUI, but you can flash it also via mtd or sysupgrade, that should NOT be a problem at all.</p><p>have you already tried failsafe mode? did you ever see the SYS led blinking?</p>											<p class="post-edited">(Last edited by <strong>nebbia88</strong> on 20 Aug 2013, 17:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210246">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">fernandocunha</div>
					<div class="post-datetime">
						20 Aug 2013, 17:40					</div>
				</div>
				<div class="post-content content">
					<p>Thanks nebbia88!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210249">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">mastermindsos</div>
					<div class="post-datetime">
						20 Aug 2013, 17:59					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>During flash, it failed i think because putty comes out error, reconnecting loop. I cancelled it, and tried reconnecting again, but failed.</p><p>I power-ed off the router, only power led is blinking.<br />Dont failsafe requires the Sys led to blink?</p>											<p class="post-edited">(Last edited by <strong>mastermindsos</strong> on 20 Aug 2013, 18:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210250">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						20 Aug 2013, 18:27					</div>
				</div>
				<div class="post-content content">
					<p>well if you got errors&nbsp; during upgrade i&#039;m afraid you will need a TTL (3.3V) serial adapter to unbrick it...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210251">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">mastermindsos</div>
					<div class="post-datetime">
						20 Aug 2013, 18:33					</div>
				</div>
				<div class="post-content content">
					<p>ok, thank you.</p><p>I have the usb ttl ready, but never got a chance to try it. <br />Is there no other way to fix it other than using the ttl? It seems difficult.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210435">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">mastermindsos</div>
					<div class="post-datetime">
						22 Aug 2013, 16:08					</div>
				</div>
				<div class="post-content content">
					<p>I have trouble to fix it using the usb-ttl.</p><p>I have installed the driver for the usb.<br />In the Device Manager, (COM3) -<br />a) bits per second 115200<br />b) data bits 8<br />c) parity none<br />d) stop bits 1<br />e) flow control none</p><p>I have the stock tplink image ready.<br />Using tftpd32, I pointed the directory to the folder of the image.<br />I connected the wire to the router, gnd to gnd, tx to rx, rx to tx. (I&#039;m not sure if the vcc is needed? My usb has both 3.3v and 5v)<br />I set putty serial the same setting as above.<br />Set my network adapter ip address to 192.168.0.5 and subnet to 255.255.255.0<br />Plug the lan cable to pc and router.<br />Switch on the router.<br />Click open in putty.</p><p>But nothing happened...<br />Please help where did I do wrong.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210442">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						22 Aug 2013, 16:34					</div>
				</div>
				<div class="post-content content">
					<p>VCC is not needed and it&#039;s DANGEROUS, do not connect it.</p><p>you should open putty before powering on the router, else you won&#039;t see the boot messages.</p><p>eventually try to swap rx and tx cables (sometimes they are mislabeled on adapter side..)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210446">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">mastermindsos</div>
					<div class="post-datetime">
						22 Aug 2013, 16:57					</div>
				</div>
				<div class="post-content content">
					<p>thank you. i will try it and update.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210449">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						22 Aug 2013, 17:40					</div>
				</div>
				<div class="post-content content">
					<p>Can you enter the terminal/console session during the boot using the serial cable and putty?<br />It may require a few key presses during the early boot (pressing tpl in your case, based on wiki)</p><p>File transfer is the next step, but to me it is unclear have you got connectivity using the serial cable.</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 22 Aug 2013, 17:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210450">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">mastermindsos</div>
					<div class="post-datetime">
						22 Aug 2013, 17:42					</div>
				</div>
				<div class="post-content content">
					<p>It doesn&#039;t work.&nbsp; Tried swapping the cables, &quot;open&quot; first before turning on the router.<br />I&#039;m expecting something to come out, perhaps a command prompt.<br />But nothing.</p><p>When you press &quot;open&quot; on putty, will it open something even though the router is not turned on?<br />What am I missing?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210452">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						22 Aug 2013, 18:04					</div>
				</div>
				<div class="post-content content">
					<p>well you should see at least a black window after pressing &quot;open&quot;!! </p><p>you can try to shortcut rx and tx pin on adapter (without router) and see if you get back what you type in the putty window..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210456">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">mastermindsos</div>
					<div class="post-datetime">
						22 Aug 2013, 18:52					</div>
				</div>
				<div class="post-content content">
					<p>There is nothing happened after I pressed &quot;open&quot;. <br />Is it suppose to open the black window even with router is off?</p><p>I noticed at my router, it doesn&#039;t look identical as the one in <a href="http://wiki.openwrt.org/_detail/inbox/wr1043ndserial.jpg?id=toh%3Atp-link%3Atl-wr1043nd">here</a></p><p>Instead, it looks like <a href="http://wiki.openwrt.org/_detail/media/tl-wr1043nd.rxjumper.png?id=toh%3Atp-link%3Atl-wr1043nd">this.</a></p><p>The area under the &quot;JP1&quot; are not soldered.</p><p>&quot;If you find that the serial console will not accept write commands, check with a multimeter that you have continuity between RX and R362.&quot;<br />For the above statement I copied from the wiki, I believe for this issue, the black window opens, but it does not accepting input from keyboard right? So this is a different case from mine?</p>											<p class="post-edited">(Last edited by <strong>mastermindsos</strong> on 22 Aug 2013, 18:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210457">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">hyujitong</div>
					<div class="post-datetime">
						22 Aug 2013, 19:03					</div>
				</div>
				<div class="post-content content">
					<p>I can&#039;t comment on the hardware issue as I have no idea how your board looks from those pictures alone but how are you using putty?&nbsp; Are you using serial and the right setting in putty or just clicking open without any additional setting?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210459">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">mastermindsos</div>
					<div class="post-datetime">
						22 Aug 2013, 19:33					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />I set it this way.<br />a) bits per second 115200<br />b) data bits 8<br />c) parity none<br />d) stop bits 1<br />e) flow control none</p><p>On device manager (COM3) &amp; putty serial.<br />This is my usb-ttl, <a href="http://www.ebay.com/itm/180953299346?ssPageName=STRK:MEWNX:IT&amp;_trksid=p3984.m1497.l2649)#shId">link.</a></p><p>If it could help, I took some screenshots of my router, <a href="http://postimg.org/gallery/81x4i2b0/0a6fd32f/">link.</a></p>											<p class="post-edited">(Last edited by <strong>mastermindsos</strong> on 22 Aug 2013, 20:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210464">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						22 Aug 2013, 20:32					</div>
				</div>
				<div class="post-content content">
					<p>If you Open in putty in serial mode set to a valid COM port, a black screen should open even if the router is offline. If putty is set to use a no existing com port, putty gives error.</p><p>Have you ever used that serial converter successfully? When you plug it in, is a new com port created? And is that com3?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210486">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">mastermindsos</div>
					<div class="post-datetime">
						23 Aug 2013, 03:52					</div>
				</div>
				<div class="post-content content">
					<p>When I plugged in the usb, no driver is installed automatically. I downloaded the driver and installed it.<br />COM1 is created.<br />When I plugged the usb wire to the router, COM3 is created.<br />Both port I had set it as the above setting.<br />Here is the picture.<br /><span class="postimg"><img src="http://s23.postimg.org/klb0c2897/Capture.png" alt="http://s23.postimg.org/klb0c2897/Capture.png" /></span></p><p>I tried both COM1 and 3 in putty(with the router connected), but putty doesn&#039;t open the command box after I pressed &quot;open&quot;.<br />I tried non exist port, COM4 in putty (with the router connected), putty doesn&#039;t give an error.</p><p>If I dont connect the router using the usb, will putty gives an error after I press &quot;open&quot;?</p>											<p class="post-edited">(Last edited by <strong>mastermindsos</strong> on 23 Aug 2013, 04:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210507">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						23 Aug 2013, 10:31					</div>
				</div>
				<div class="post-content content">
					<p>no, putty does not know what you connect to serial... try teraterm or other serial terminal...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210523">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">mastermindsos</div>
					<div class="post-datetime">
						23 Aug 2013, 11:51					</div>
				</div>
				<div class="post-content content">
					<p>Hi hnyman, I have never used the usb-ttl before. I have also never perform debricking before.<br />Hi nebbia, I downloaded teraterm, and I got this page opened.<br /><span class="postimg"><img src="http://s21.postimg.org/npy63blfr/Capture.png" alt="http://s21.postimg.org/npy63blfr/Capture.png" /></span><br />I believe this is the page you are talking about, I leave it on and it goes into an endless loop.<br />I read that I need to pass &quot;tpl&quot; when it is in autobooting stage right?</p>											<p class="post-edited">(Last edited by <strong>mastermindsos</strong> on 23 Aug 2013, 12:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210534">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						23 Aug 2013, 13:01					</div>
				</div>
				<div class="post-content content">
					<p>great!</p><p>yes you should type &quot;tpl&quot; (without quotes, without pressing enter) really fast, just when you see &quot;Autobooting..&quot;, or maybe some fractions of seconds before!</p><p>it should stop booting and you will never see the &quot;booting image&quot; message.</p><p>usually i copy &quot;tpl&quot; from a notepad and paste it many times in the terminal using some shortcut combination, in teraterm (and also in putty) the right button of the mouse can paste things <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210550">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">mastermindsos</div>
					<div class="post-datetime">
						23 Aug 2013, 14:47					</div>
				</div>
				<div class="post-content content">
					<p>I have done it successfully. It is back to a working state. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />Thank you very much for all of you guys&#039; help.</p>											<p class="post-edited">(Last edited by <strong>mastermindsos</strong> on 23 Aug 2013, 16:35)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>