<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Support for Marvell 88F5xx81 based routers</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 18 Jan 2014 and 6 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 36 of 46</div><nav><ul><li><a href="viewtopic.php%3Fid=12358&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=34.html">34</a></li><li><a href="viewtopic.php%3Fid=12358&amp;p=35.html">35</a></li><li class="pagination-current"><span>36</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=37.html">37</a></li><li><a href="viewtopic.php%3Fid=12358&amp;p=38.html">38</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=46.html">46</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p109870">
				<div class="post-metadata">
					<div class="post-num">Post #876</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						25 May 2010, 21:08					</div>
				</div>
				<div class="post-content content">
					<p>Has anyone already created a WRT350Nv2 config for the <a href="http://www.denx.de/wiki/view/DULG/HowCanIAccessUBootEnvironmentVariablesInLinux">U-Boot envtools</a>? (opkg install uboot-envtools)</p><p>I get some output with the following /etc/fw_env.config but I do not know if this is 100% correct (I do not dare to write yet):<br /></p><div class="codebox"><pre><code># WRT350N v2
# MTD device name    Device offset    Env. size    Flash sector size
/dev/mtd5        0x0003c000    0x00002000    0x00001000</code></pre></div><p>What the output should look like can be seen in <a href="https://forum.openwrt.org/viewtopic.php?pid=60299#p60299">post #5</a> (3rd code part).</p><p><span class="bbu">Update:</span><br />The first three entries are correct. (Will re-check in Linksys GPL source if time allows)<br />The fourth parameter is questionable. Writing is not possible, maybe due to the big mtd erase size of 0x00010000 (a zero more behind the one).<br />Can the erase size be reduced/changed for /dev/mtd5 only?</p>											<p class="post-edited">(Last edited by <strong>maddes.b</strong> on 14 Jun 2010, 19:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p109925">
				<div class="post-metadata">
					<div class="post-num">Post #877</div>
					<div class="post-author">jcwoltz</div>
					<div class="post-datetime">
						27 May 2010, 02:54					</div>
				</div>
				<div class="post-content content">
					<p>@maddes.b: Thank you! Thank you! Thank you! I&#039;m able to compile trunk with no issues. </p><p>From Nilfred post#858:<br /></p><div class="quotebox"><blockquote><p>Erik&#039;s (rectified) patch for the mwl8k driver from ticket #7209 was committed to trunk with r21167.<br />Hunting season for AP firmware is now officially open.</p></blockquote></div><p>I have seen another thread talking about the firmware for the wireless in the WNR854T, but am unable to find it at the moment. Is anyone working on this? I am willing to help out testing, or digging through code (I&#039;m no programmer), or lending access to hardware. How can I help in this area? </p><p>Thank you</p>											<p class="post-edited">(Last edited by <strong>jcwoltz</strong> on 27 May 2010, 02:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p109932">
				<div class="post-metadata">
					<div class="post-num">Post #878</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						27 May 2010, 07:20					</div>
				</div>
				<div class="post-content content">
					<p>It&#039;s all set, but AP firmware missing.<br />Right now you can use it in STA mode.<br />The driver checks if firmware is AP or STA mode, can&#039;t be fooled.<br />Go help upstream or ask Marvell directly. Also apply for the job, as both developers left Marvell.</p>											<p class="post-edited">(Last edited by <strong>Nilfred</strong> on 27 May 2010, 15:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p109950">
				<div class="post-metadata">
					<div class="post-num">Post #879</div>
					<div class="post-author">buytenh</div>
					<div class="post-datetime">
						27 May 2010, 14:41					</div>
				</div>
				<div class="post-content content">
					<p>mwl8k author speaking.&nbsp; (I don&#039;t generally monitor this forum, but was sent a link to this thread.)</p><p>First of all, the linked patch in r21167 isn&#039;t really correct -- PCI ID 0x2a02 corresponds to a 8361P card, not a 8363 card. Is this patch confirmed to make mwl8k work on the WNR854T (which seems to contain a 8361P) in STA mode? Can anyone post a full dmesg of that happening somewhere?</p><p>The difference between AP and STA firmware is not merely a magic bit that &quot;unlocks&quot; AP functionality in the driver -- STA firmware simply doesn&#039;t contain the necessary logic to implement AP mode.</p><p>Also, Nicolas Pitre (which I assume you&#039;re referring to) and I didn&#039;t leave Marvell because of being fired.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p109955">
				<div class="post-metadata">
					<div class="post-num">Post #880</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						27 May 2010, 15:56					</div>
				</div>
				<div class="post-content content">
					<p>Nice to hear from you.<br />As you can see <a href="https://forum.openwrt.org/viewtopic.php?pid=107194#p107194">here</a> is firmware 8XX0 loaded, renamed to 8363, working.<br />Does 8361P AP firmware exist? Even the extracted from original firmware seems to be an STA one.<br />OK, I edited the last (incorrect) sentence.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p110004">
				<div class="post-metadata">
					<div class="post-num">Post #881</div>
					<div class="post-author">erik___</div>
					<div class="post-datetime">
						28 May 2010, 00:24					</div>
				</div>
				<div class="post-content content">
					<p>Hi Lennert.</p><p>The 8361P (PCI ID 0x2a02) works with fw:48c79b085f7f5a590d3dbc15647e519f in STA mode. <br />It seems a bit buggy/slow and I havent had the time to do complete performance testing on it yet. ( Thats why i didnt post it upstreams.). </p><p>I can only refer to FW files by the md5sums because I cant find the fw that the driver is refering to. <br />What is the hashes of the FW files that the driver refers to, and where can I find them? <br />If you cant include the fw files in the kernel tree because of legal reasons, could you maybe refer to them by hashes instead of names like 8363, 8687 etc?<br />This would really help when we extract them. </p><br /><p>Example:<br />MODULE_FIRMWARE(&quot;mwl8k/48c79b085f7f5a590d3dbc15647e519f.fw&quot;);<br />MODULE_FIRMWARE(&quot;mwl8k/0fe11f415adbbd5e8ca03641705c4a6c.helper.fw&quot;);<br />instead of:<br />MODULE_FIRMWARE(&quot;mwl8k/fmimage_8363.fw&quot;);<br />MODULE_FIRMWARE(&quot;mwl8k/helper_8363.fw&quot;);</p><br /><p>The dmesg from my wnr854t with fw:48c79b085f7f5a590d3dbc15647e519f and helper:0fe11f415adbbd5e8ca03641705c4a6c is <br /></p><div class="codebox"><pre><code>Marvell TOPDOG(R) 802.11 Wireless Network Driver version 0.12
phy0: Selected rate control algorithm &#039;minstrel&#039;
phy0: 88w8363 v4, 00:18:4d:20:2a:bf, STA firmware 2.1.4.25</code></pre></div><p>Im happy to provide any additional dmesgs or help. </p><p>Thanks for your work on mwl8k!<br />Erik.</p>											<p class="post-edited">(Last edited by <strong>erik___</strong> on 28 May 2010, 00:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p110005">
				<div class="post-metadata">
					<div class="post-num">Post #882</div>
					<div class="post-author">zing</div>
					<div class="post-datetime">
						28 May 2010, 00:30					</div>
				</div>
				<div class="post-content content">
					<p>The &quot;linkstation kernel&quot; is for the 88F5182, and there are upstream patches for 88F5281. For the Orion 1, there is no other sources then the Linkys/Netgear ones.<br />Offline</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p110037">
				<div class="post-metadata">
					<div class="post-num">Post #883</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						28 May 2010, 10:08					</div>
				</div>
				<div class="post-content content">
					<p>Side note:<br />The MAC changing issues (<a href="https://dev.openwrt.org/ticket/7111">#7111</a>) are now solved in trunk (<a href="https://dev.openwrt.org/changeset/21577">r21577</a>, <a href="https://dev.openwrt.org/changeset/21595">r21595</a>) and also for Backfire 10.03.1 (<a href="https://dev.openwrt.org/changeset/21581">r21581</a>, <a href="https://dev.openwrt.org/changeset/21596">r21596</a>).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p110039">
				<div class="post-metadata">
					<div class="post-num">Post #884</div>
					<div class="post-author">buytenh</div>
					<div class="post-datetime">
						28 May 2010, 10:36					</div>
				</div>
				<div class="post-content content">
					<p>Erik,</p><p>mwl8k doesn&#039;t refer to any 8361P firmware files at all, so the question what the hashes are of the 8361P firmware files that mwl8k refers to is something I can&#039;t answer. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Even for the currently supported chips, 8363 and 8366, the idea is that you can use any firmware version as long as it conforms to the firmware interface API/ABI that mwl8k supports. Referring to firmware images by md5 sum would break this capability. The firmware images are referred to by chip name intentionally, as this allows easy identification of what chip a given firmware image is for.</p><p>The last patch I saw floating around for 8361P support in mwl8k breaks 8363 support, or at least, breaks being able to use 8361P and 8363 concurrently. If you want to add 8361P support, you should do something like this:</p><p>&nbsp; &nbsp;<a href="http://www.wantstofly.org/~buytenh/mwl8k-8361p.diff">http://www.wantstofly.org/~buytenh/mwl8k-8361p.diff</a></p><p>(and name the firmware image files accordingly).</p><p>Can you post a full dmesg somewhere (i.e. of _all_ the kernel boot messages on your machine including the mwl8k bits)?</p><p>Also, can you email me the 8361P helper and firmware images you extracted?</p><p>Firmware isn&#039;t included in the kernel tree anymore, there&#039;s the linux-firmware git tree for that these days. I will contact some people at Marvell to ask whether 8361P firmware can be included there.</p><br /><p>thanks,<br />Lennert</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p110200">
				<div class="post-metadata">
					<div class="post-num">Post #885</div>
					<div class="post-author">erik___</div>
					<div class="post-datetime">
						30 May 2010, 14:54					</div>
				</div>
				<div class="post-content content">
					<p>Lennert, </p><p>I know that I shouldnt have paired the 0x2a02 pci id with the name fmimage_8363.fw.<br />My misstake. I will remove the patch.</p><p>The reason that I wanted to include the hashes of the fw was so it would be easy for us to identify them after extraction. <br />Can you get the FW files any other way? They are not in the linux-fw-git-tree. How did you get yours?<br />So far we have used the mrv8k_extract_fw tool as our only source for FW.<br />( Im talking about the regular 8363, 8687, 8366 fw )</p><p>I will send you the FW-files I used. </p><br /><p>Full demsg:<br /></p><div class="codebox"><pre><code>Linux version 2.6.32.12 (erik@thinkpad) (gcc version 4.3.3 (GCC) ) #3 Wed May 5 22:22:43 CEST 2010
CPU: Feroceon [41069260] revision 0 (ARMv5TEJ), cr=a0053177
CPU: VIVT data cache, VIVT instruction cache
Machine: Netgear WNR854T
Clearing invalid memory bank 0KB@0xffffffff
Clearing invalid memory bank 0KB@0xffffffff
Clearing invalid memory bank 0KB@0xffffffff
Ignoring unrecognised tag 0x00000000
Ignoring unrecognised tag 0x00000000
Ignoring unrecognised tag 0x00000000
Memory policy: ECC disabled, Data cache writeback
On node 0 totalpages: 8192
free_area_init_node: node 0, pgdat c0249a08, node_mem_map c025b000
  Normal zone: 64 pages used for memmap
  Normal zone: 0 pages reserved
  Normal zone: 8128 pages, LIFO batch:0
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
Kernel command line: root=/dev/mtdblock1 rootfstype=squashfs,jffs2 noinitrd console=ttyS0,115200
PID hash table entries: 128 (order: -3, 512 bytes)
Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
Memory: 32MB = 32MB total
Memory: 30076KB available (2144K code, 132K data, 92K init, 0K highmem)
Hierarchical RCU implementation.
NR_IRQS:64
Calibrating delay loop... 332.59 BogoMIPS (lpj=1662976)
Mount-cache hash table entries: 512
CPU: Testing write buffer coherency: ok
NET: Registered protocol family 16
Orion ID: MV88F5181-Rev-B1. TCLK=166666667.
Applying Orion-1/Orion-NAS PCIe config read transaction workaround
pci 0000:00:00.0: reg 10 64bit mmio pref: [0xf1000000-0xf10fffff]
pci 0000:00:00.0: reg 18 32bit mmio: [0x000000-0x1ffffff]
PCI: bus0: Fast back to back transfers disabled
pci 0000:01:00.0: reg 10 64bit mmio pref: [0x000000-0x1ffffff]
pci 0000:01:00.0: reg 18 64bit mmio pref: [0x10000000-0x1fffffff]
pci 0000:01:00.0: reg 20 64bit mmio: [0xf1000000-0xf10fffff]
pci 0000:01:00.0: reg 30 32bit mmio pref: [0xe0000000-0xe7ffffff]
pci 0000:01:00.0: supports D1 D2
pci 0000:01:00.0: PME# supported from D0 D1 D2 D3hot
pci 0000:01:00.0: PME# disabled
pci 0000:01:07.0: reg 10 32bit mmio: [0x40000000-0x4000ffff]
pci 0000:01:07.0: reg 14 32bit mmio: [0x40010000-0x4001ffff]
PCI: bus1: Fast back to back transfers enabled
bio: create slab &lt;bio-0&gt; at 0
Switching to clocksource orion_clocksource
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 1024 (order: 1, 8192 bytes)
TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
TCP: Hash tables configured (established 1024 bind 1024)
TCP reno registered
NET: Registered protocol family 1
squashfs: version 4.0 (2009/01/31) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) (SUMMARY)  © 2001-2006 Red Hat, Inc.
msgmni has been set to 58
io scheduler noop registered
io scheduler deadline registered (default)
Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled
serial8250.0: ttyS0 at MMIO 0xf1012000 (irq = 3) is a 16550A
console [ttyS0] enabled
physmap platform flash device: 00800000 at f4000000
physmap-flash.0: Found 1 x16 devices at 0x0 in 16-bit bank
 Intel/Sharp Extended Query Table at 0x0031
 Intel/Sharp Extended Query Table at 0x0031
Using buffer write method
cfi_cmdset_0001: Erase suspend on write enabled
erase region 0: offset=0x0,size=0x20000,blocks=64
cmdlinepart partition parsing not available
RedBoot partition parsing not available
Using physmap partition information
Creating 4 MTD partitions on &quot;physmap-flash.0&quot;:
0x000000000000-0x000000100000 : &quot;kernel&quot;
0x000000100000-0x000000760000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; set to be root filesystem
mtd: partition &quot;rootfs_data&quot; created automatically, ofs=260000, len=500000 
0x000000260000-0x000000760000 : &quot;rootfs_data&quot;
0x000000760000-0x0000007a0000 : &quot;uboot&quot;
0x000000000000-0x000000760000 : &quot;image&quot;
MV-643xx 10/100/1000 ethernet driver version 1.4
mv643xx_eth smi: probed
net eth0: port 0 with MAC address 00:00:00:00:51:81
i2c /dev entries driver
TCP westwood registered
NET: Registered protocol family 17
Distributed Switch Architecture driver version 0.1
eth0[0]: detected a Marvell 88E6131 switch
dsa slave smi: probed
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
drivers/rtc/hctosys.c: unable to open rtc device (rtc0)
VFS: Mounted root (squashfs filesystem) readonly on device 31:1.
Freeing init memory: 92K
Please be patient, while OpenWrt loads ...
mini_fo: using base directory: /
mini_fo: using storage directory: /overlay
eth0: link up, 1000 Mb/s, full duplex, flow control disabled
device lan3 entered promiscuous mode
device eth0 entered promiscuous mode
device lan4 entered promiscuous mode
device lan1 entered promiscuous mode
device lan2 entered promiscuous mode
Generic kernel compatibility enabled based on linux-next next-20100113
cfg80211: Calling CRDA to update world regulatory domain
cfg80211: World regulatory domain updated:
    (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
    (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
    (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
    (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
    (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
    (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
Marvell TOPDOG(R) 802.11 Wireless Network Driver version 0.12
phy0: Selected rate control algorithm &#039;minstrel&#039;
phy0: 88w8363 v4, 00:18:4d:20:2a:bf, STA firmware 2.1.4.25
PPP generic driver version 2.4.2
ip_tables: (C) 2000-2006 Netfilter Core Team
NET: Registered protocol family 24
nf_conntrack version 0.5.0 (471 buckets, 1884 max)
lan3: link up, 1000 Mb/s, full duplex, flow control disabled
br-lan: port 1(lan3) entering forwarding state
egisteredlash.0: Found 1 x16 devices at 0x0 in 16-bit bank
io scheduler deadline registered (default)
Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled
serial8250.0: ttyS0 at MMIO 0xf1012000 (irq = 3) is a 16550A
console [ttyS0] enabled
physmap platform flash device: 00800000 at f4000000
physmap-flash.0: Found 1 x16 devices at 0x0 in 16-bit bank
 Intel/Sharp Extended Query Table at 0x0031
 Intel/Sharp Extended Query Table at 0x0031
Using buffer write method
cfi_cmdset_0001: Erase suspend on write enabled
erase region 0: offset=0x0,size=0x20000,blocks=64
cmdlinepart partition parsing not available
RedBoot partition parsing not available
Using physmap partition information
Creating 4 MTD partitions on &quot;physmap-flash.0&quot;:
0x000000000000-0x000000100000 : &quot;kernel&quot;
0x000000100000-0x000000760000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; set to be root filesystem
mtd: partition &quot;rootfs_data&quot; created automatically, ofs=260000, len=500000 
0x000000260000-0x000000760000 : &quot;rootfs_data&quot;
0x000000760000-0x0000007a0000 : &quot;uboot&quot;
0x000000000000-0x000000760000 : &quot;image&quot;
MV-643xx 10/100/1000 ethernet driver version 1.4
mv643xx_eth smi: probed
net eth0: port 0 with MAC address 00:00:00:00:51:81
i2c /dev entries driver
TCP westwood registered
NET: Registered protocol family 17
Distributed Switch Architecture driver version 0.1
eth0[0]: detected a Marvell 88E6131 switch
dsa slave smi: probed
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;</code></pre></div><p>//Erik</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p110202">
				<div class="post-metadata">
					<div class="post-num">Post #886</div>
					<div class="post-author">buytenh</div>
					<div class="post-datetime">
						30 May 2010, 15:08					</div>
				</div>
				<div class="post-content content">
					<p>Erik,</p><p>Firmware images for 8687 exist in the linux-firmware git tree:</p><p>&nbsp; &nbsp;<a href="http://git.kernel.org/?p=linux/kernel/git/dwmw2/linux-firmware.git;a=commit;h=bdd4d91e6feea9f48039171e35bf4ae665247a73">http://git.kernel.org/?p=linux/kernel/g … e665247a73</a></p><p>Firmware for 8363 and 8366 (and possibly 8361 as well) should ideally also be obtainable from the linux-firmware git tree in the future.&nbsp; I will work to try to make this happen.</p><p>How well does mwl8k in its current state work on your 8361 card?&nbsp; Can you associate/ping/etc?</p><br /><p>thanks,<br />Lennert</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p110208">
				<div class="post-metadata">
					<div class="post-num">Post #887</div>
					<div class="post-author">erik___</div>
					<div class="post-datetime">
						30 May 2010, 16:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>buytenh wrote:</cite><blockquote><p>Erik,</p><p>Firmware images for 8687 exist in the linux-firmware git tree:</p><p>&nbsp; &nbsp;<a href="http://git.kernel.org/?p=linux/kernel/git/dwmw2/linux-firmware.git;a=commit;h=bdd4d91e6feea9f48039171e35bf4ae665247a73">http://git.kernel.org/?p=linux/kernel/g … e665247a73</a></p><p>Firmware for 8363 and 8366 (and possibly 8361 as well) should ideally also be obtainable from the linux-firmware git tree in the future.&nbsp; I will work to try to make this happen.</p><p>How well does mwl8k in its current state work on your 8361 card?&nbsp; Can you associate/ping/etc?</p><br /><p>thanks,<br />Lennert</p></blockquote></div><p>I can do pretty much everything with it at a limited speed. <br />associate, ping, transfer files, etc. <br />[edit]<br />I actually forgot to mount the antennas <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" />. Turns out speed is great. 2MB/s at 10cm distance. <br />[/edit]</p><p>Yes, getting the FW in the linux-fw-tree would be great! <br />BTW, <a href="https://forum.openwrt.org/viewtopic.php?pid=110204#p110204">I just managed</a> to extract the real 8361P AP fw from a binary only driver anyway. So it would only be goodwill for Marwell to release them. </p><p>//Erik</p>											<p class="post-edited">(Last edited by <strong>erik___</strong> on 30 May 2010, 17:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p110235">
				<div class="post-metadata">
					<div class="post-num">Post #888</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						30 May 2010, 22:09					</div>
				</div>
				<div class="post-content content">
					<p>Low yours weapons: Hunting AP season in now officially ended. THANKS Erik.<br /></p><div class="quotebox"><cite>buytenh wrote:</cite><blockquote><p>Erik,<br />&lt;cut&gt;<br />If <strong>you</strong> <span style="color: red">(Erik, us, not Lennert)</span> want to add 8361P support, <strong>you</strong> <span style="color: red">(again)</span> <strong>should do</strong> something <strong>like</strong> this:<br />&lt;cut&gt;<br />thanks,<br />Lennert</p></blockquote></div><p>@Erik, I read between lines that&#039;s <strong>your baby</strong> now. So, do not remove, <strong>replace</strong> the patch without mention where you get it from.<br />Go, Erik, go!</p><p>@buytenh, THANKS. Please confirm if this only be know to archive.org and self-destroy in 10 seconds.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p110240">
				<div class="post-metadata">
					<div class="post-num">Post #889</div>
					<div class="post-author">buytenh</div>
					<div class="post-datetime">
						31 May 2010, 00:28					</div>
				</div>
				<div class="post-content content">
					<p>Erik,</p><p>2MB/s (I assume you mean megabyte here) doesn&#039;t seem all that great -- as this is 11n capable hardware, you should be able to get a lot more than 16 megabit out of it. Do you get the same performance with other APs (if you have any)?</p><p>Nilfred,</p><p>If I had 8361 hardware myself I wouldn&#039;t mind doing the work myself to try and get this working, but I don&#039;t, so what I can contribute here is somewhat limited.&nbsp; I&#039;ll see if I can get a 8361 card somewhere.</p><br /><p>thanks,<br />Lennert</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p110286">
				<div class="post-metadata">
					<div class="post-num">Post #890</div>
					<div class="post-author">StrikerNL</div>
					<div class="post-datetime">
						31 May 2010, 20:05					</div>
				</div>
				<div class="post-content content">
					<p>I expanded the wiki, explaining the download mode a bit less verbosely than DaBigMac did, for people like me with too little time on their hands <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>Also in my explanation I recommend simply flashing the openwrt recovery.bin as opposed to the stock linksys one.</p><p><a href="http://wiki.openwrt.org/toh/linksys/wrt350nv2#download.mode">http://wiki.openwrt.org/toh/linksys/wrt … nload.mode</a></p>											<p class="post-edited">(Last edited by <strong>StrikerNL</strong> on 31 May 2010, 20:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p110412">
				<div class="post-metadata">
					<div class="post-num">Post #891</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						2 Jun 2010, 14:19					</div>
				</div>
				<div class="post-content content">
					<p>Compiled latest Backfire branch r21649 for Orion, and uploaded to <a href="ftp://ftp.maddes.net/openwrt/backfire/orion/">ftp://ftp.maddes.net/openwrt/backfire/orion/</a><br />As always use at your own risk and keep a local copy of the repository as this ftp space is just temporary until final release of 10.03.1.<br />Remember that you can test a ramdisk image via tftpboot if you have serial access.</p><p>The general and WRT350Nv2 MAC fixes have been committed into trunk and the Backfire branch.</p><p>@StrikerNL:<br />Thanks a lot.<br />But you should use the &quot;Preview&quot; function a little bit more often. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>maddes.b</strong> on 6 Jun 2010, 17:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p110414">
				<div class="post-metadata">
					<div class="post-num">Post #892</div>
					<div class="post-author">StrikerNL</div>
					<div class="post-datetime">
						2 Jun 2010, 14:25					</div>
				</div>
				<div class="post-content content">
					<p>Well done, maddes. I hope backfire 10.03.1 will be released soon so we can finally put this mac address misery behind us.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p110633">
				<div class="post-metadata">
					<div class="post-num">Post #893</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						6 Jun 2010, 17:39					</div>
				</div>
				<div class="post-content content">
					<p>Compiled latest trunk r21682 for Orion with kernel 2.6.34, and uploaded to <a href="ftp://ftp.maddes.net/openwrt/trunk/orion/">ftp://ftp.maddes.net/openwrt/trunk/orion/</a><br />As always use at your own risk and keep a local copy of the repository as this ftp space is just temporary until final release of 10.03.1.<br />Remember that you can test a ramdisk image via tftpboot if you have serial access.</p>											<p class="post-edited">(Last edited by <strong>maddes.b</strong> on 6 Jun 2010, 17:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p111073">
				<div class="post-metadata">
					<div class="post-num">Post #894</div>
					<div class="post-author">Watha</div>
					<div class="post-datetime">
						12 Jun 2010, 13:43					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve started using the wireless in my router regularly, and it&#039;s dying every few days now. A simple &#039;wifi&#039; fixes it for a few minutes, but then it stops again. Also, speed when it is working drops to about a tenth of normal: 200kiB/s vs nearly 2MiB/s on 802.11g. This is my /etc/config/wireless: </p><div class="quotebox"><blockquote><p>config &#039;wifi-device&#039; &#039;phy0&#039;<br />&nbsp; &nbsp; option &#039;type&#039; &#039;mac80211&#039;<br />&nbsp; &nbsp; option macaddr&nbsp; &nbsp; 00:xx:xx:xx:xx:xx<br />&nbsp; &nbsp; option &#039;channel&#039; &#039;6&#039;<br />&nbsp; &nbsp; option &#039;hwmode&#039; &#039;11ng&#039;<br />&nbsp; &nbsp; option &#039;htmode&#039; &#039;HT20&#039;<br />&nbsp; &nbsp; list &#039;ht_capab&#039; &#039;SHORT-GI-40&#039;<br />&nbsp; &nbsp; list &#039;ht_capab&#039; &#039;DSSS_CCK-40&#039;<br />&nbsp; &nbsp; option &#039;country&#039; &#039;AU&#039;</p><p>config &#039;wifi-iface&#039;<br />&nbsp; &nbsp; option &#039;device&#039; &#039;phy0&#039;<br />&nbsp; &nbsp; option &#039;network&#039; &#039;lan&#039;<br />&nbsp; &nbsp; option &#039;mode&#039; &#039;ap&#039;<br />&nbsp; &nbsp; option &#039;ssid&#039; &#039;redacted&#039;<br />&nbsp; &nbsp; option &#039;encryption&#039; &#039;mixed-psk+ccmp&#039;<br />&nbsp; &nbsp; option &#039;key&#039; &#039;redacted&#039;<br />&nbsp; &nbsp; option &#039;eap_type&#039; &#039;TLS&#039;</p></blockquote></div>											<p class="post-edited">(Last edited by <strong>Watha</strong> on 12 Jun 2010, 13:54)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p111082">
				<div class="post-metadata">
					<div class="post-num">Post #895</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						12 Jun 2010, 16:03					</div>
				</div>
				<div class="post-content content">
					<p>If a &quot;wifi up&quot; doesn&#039;t fix it, then try a daily reboot as mentioned in <a href="https://forum.openwrt.org/viewtopic.php?pid=102856#p102856">post #751</a>.<br />Also try &quot;11g&quot; mode only (no N mode).</p>											<p class="post-edited">(Last edited by <strong>maddes.b</strong> on 12 Jun 2010, 16:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p111097">
				<div class="post-metadata">
					<div class="post-num">Post #896</div>
					<div class="post-author">Watha</div>
					<div class="post-datetime">
						12 Jun 2010, 20:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>maddes.b wrote:</cite><blockquote><p>If a &quot;wifi up&quot; doesn&#039;t fix it, then try a daily reboot as mentioned in <a href="https://forum.openwrt.org/viewtopic.php?pid=102856#p102856">post #751</a>.<br />Also try &quot;11g&quot; mode only (no N mode).</p></blockquote></div><p>A daily reboot would fix it, but I dislike having my connections interrupted. I&#039;ll try 11g mode.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p111187">
				<div class="post-metadata">
					<div class="post-num">Post #897</div>
					<div class="post-author">StrikerNL</div>
					<div class="post-datetime">
						14 Jun 2010, 10:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Watha wrote:</cite><blockquote><div class="quotebox"><cite>maddes.b wrote:</cite><blockquote><p>If a &quot;wifi up&quot; doesn&#039;t fix it, then try a daily reboot as mentioned in <a href="https://forum.openwrt.org/viewtopic.php?pid=102856#p102856">post #751</a>.<br />Also try &quot;11g&quot; mode only (no N mode).</p></blockquote></div><p>A daily reboot would fix it, but I dislike having my connections interrupted. I&#039;ll try 11g mode.</p></blockquote></div><p>As maddes says, switching 11ng to 11g mode will likely fix it. We have multiple devices, and the wifi devices seem to differ between 2.0 and 2.1. On some of these it seems it will only work well with mode set to 11g, and for some it will only work well with mode set to 11ng. This is what I&#039;ve experienced anyway.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p111227">
				<div class="post-metadata">
					<div class="post-num">Post #898</div>
					<div class="post-author">redhat27</div>
					<div class="post-datetime">
						15 Jun 2010, 04:02					</div>
				</div>
				<div class="post-content content">
					<p>Absolute newbie here... Please forgive if it is off-topic or has been answered.</p><p>I have a WNR854T that I originally flashed with <a href="http://downloads.x-wrt.org/xwrt/backfire/10.03/orion/generic/default/openwrt-wnr854t-squashfs-webupgrade.img">http://downloads.x-wrt.org/xwrt/backfir … pgrade.img</a> from the stock Netgear web ui.</p><p>As a result of doing so, I lost the ability to upgrade further, and the flashing page said that the functionality has not been implemented.</p><p>So I tried the flashing method described in <a href="https://forum.openwrt.org/viewtopic.php?pid=103114#p103114">post #764</a> to the (then) latest backfire build (r20728).<br />But now I still cannot update further using sysupgrade or via luci.</p><p>Here are some info from my router:<br /></p><div class="quotebox"><blockquote><p>root@WNR854T:/lib/upgrade# cat /proc/mtd<br />dev:&nbsp; &nbsp; size&nbsp; &nbsp;erasesize&nbsp; name<br />mtd0: 00100000 00020000 &quot;kernel&quot;<br />mtd1: 00660000 00020000 &quot;rootfs&quot;<br />mtd2: 004c0000 00020000 &quot;rootfs_data&quot;<br />mtd3: 00040000 00020000 &quot;uboot&quot;<br />mtd4: 00760000 00020000 &quot;image&quot;</p><br /><p>root@WNR854T:/lib/upgrade# cat platform.sh<br /># use default &quot;image&quot; for PART_NAME<br /># use default for platform_do_upgrade()</p><p>platform_check_image() {<br />&nbsp; &nbsp; &nbsp; &nbsp; [ &quot;${ARGC}&quot; -gt 1 ] &amp;&amp; { echo &#039;Too many arguments. Only flash file expected.&#039;; return 1; }</p><p>&nbsp; &nbsp; &nbsp; &nbsp; local hardware=`sed -n /Hardware/s/.*:.//p /proc/cpuinfo`<br />&nbsp; &nbsp; &nbsp; &nbsp; local magic=&quot;$(get_magic_word &quot;$1&quot;)&quot;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; case &quot;${hardware}&quot; in<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# hardware with padded uImage + padded rootfs<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&#039;Netgear WNR854T&#039; | &#039;Linksys WRT350N v2&#039;)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [ &quot;${magic}&quot; != &#039;2705&#039; ] &amp;&amp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo &quot;Invalid image type ${magic}.&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return 1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return 0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;;<br />&nbsp; &nbsp; &nbsp; &nbsp; esac</p><p>&nbsp; &nbsp; &nbsp; &nbsp; echo &quot;Sysupgrade is not yet supported on ${hardware}.&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; return 1<br />}</p><br /><p>root@WNR854T:/lib/upgrade# cd /tmp<br />root@WNR854T:/tmp# wget <a href="http://downloads.openwrt.org/backfire/10.03/orion/openwrt-wnr854t-squashfs.img">http://downloads.openwrt.org/backfire/1 … uashfs.img</a><br />Connecting to downloads.openwrt.org (78.24.191.177:80)<br />openwrt-wnr854t-squa 100% |***************************************************************************|&nbsp; 2816k 00:00:00 ETA<br />root@WNR854T:/tmp# sysupgrade -n -v /tmp/openwrt-wnr854t-squashfs.img<br />Invalid image type 8519.<br />Image check &#039;platform_check_image&#039; failed.</p><br /><p>root@WNR854T:/tmp# wget <a href="http://downloads.x-wrt.org/xwrt/kamikaze/snapshots/orion/extra/openwrt-wnr854t-squashfs.img">http://downloads.x-wrt.org/xwrt/kamikaz … uashfs.img</a><br />Connecting to downloads.x-wrt.org (88.198.39.176:80)<br />openwrt-wnr854t-squa 100% |***************************************************************************|&nbsp; 3200k 00:00:00 ETA<br />root@WNR854T:/tmp# sysupgrade -n -v /tmp/openwrt-wnr854t-squashfs.img<br />Invalid image type 8519.<br />Image check &#039;platform_check_image&#039; failed.</p></blockquote></div><p>Any idea what to do next? I&#039;d like to<br />[1] Either go back to stock firmware till wireless is implemented [or]<br />[2] At least have the ability to sysupgrade or use the luci upgrade interface.<br />Also,<br />[3] Is there a way to set the boot_wait on this router? I tried to tftp a firmware from a connected PC, but without boot_wait, it is not happening?</p><br /><p>Thanks in advance</p>											<p class="post-edited">(Last edited by <strong>redhat27</strong> on 15 Jun 2010, 20:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p111260">
				<div class="post-metadata">
					<div class="post-num">Post #899</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						15 Jun 2010, 16:16					</div>
				</div>
				<div class="post-content content">
					<p>Just downloaded an official Backfire release [1] and an image of my latest trunk build [2].<br />Both had an extra header before the U-Boot image, so the correct magic word seems to be &quot;8519&quot;.</p><p>Can somebody explain if this is a standard, Netgear specific or WNR854T specific header?<br />Must the header be removed before flashing?</p><p>Change the platform.sh to the following code and retry <strong>at your own risk</strong> as the extra header my brick your router:<br /></p><div class="codebox"><pre><code>...
      case &quot;${hardware}&quot; in
         # hardware with padded uImage + padded rootfs
         &#039;Linksys WRT350N v2&#039;)
                [ &quot;${magic}&quot; != &#039;2705&#039; ] &amp;&amp; {
                        echo &quot;Invalid image type ${magic}.&quot;
                        return 1
                }
                return 0
                ;;
         # special hardware with extra header before uImage
         &#039;Netgear WNR854T&#039;)
                [ &quot;${magic}&quot; != &#039;8519&#039; ] &amp;&amp; {
                        echo &quot;Invalid image type ${magic}.&quot;
                        return 1
                }
                return 0
                ;;
        esac
...</code></pre></div><p>[1] <a href="http://downloads.openwrt.org/backfire/10.03/orion/openwrt-wnr854t-squashfs.img">http://downloads.openwrt.org/backfire/1 … uashfs.img</a><br />[2] <a href="ftp://ftp.maddes.net/openwrt/trunk/orion/build_21682/squashfs/openwrt-wnr854t-squashfs.release-luci+ipv6.img">ftp://ftp.maddes.net/openwrt/trunk/orio … i+ipv6.img</a></p>											<p class="post-edited">(Last edited by <strong>maddes.b</strong> on 15 Jun 2010, 16:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p111290">
				<div class="post-metadata">
					<div class="post-num">Post #900</div>
					<div class="post-author">redhat27</div>
					<div class="post-datetime">
						16 Jun 2010, 02:33					</div>
				</div>
				<div class="post-content content">
					<p>Thank you very much maddes for helping me, I will edit platform.sh to allow for 8519 magic word. Any idea what is the probability that this extra header may brick my router? I don&#039;t have jtag... <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> Also, I am in North America, I noticed Netgear have a separate firmware just for here. Not sure if if the hardware for North America and rest of the world is different on the WNT854T...</p><p>Also, I&#039;m guessing there is no way to make the WNR854T wait for a firmware image on booting? No nvram variables to manipulate to set boot_wait on?</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 36 of 46</div><nav><ul><li><a href="viewtopic.php%3Fid=12358&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=34.html">34</a></li><li><a href="viewtopic.php%3Fid=12358&amp;p=35.html">35</a></li><li class="pagination-current"><span>36</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=37.html">37</a></li><li><a href="viewtopic.php%3Fid=12358&amp;p=38.html">38</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=46.html">46</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>