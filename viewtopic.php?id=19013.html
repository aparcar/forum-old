<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Sparklan WAPD-170AG (IXP425) with Kamikaze - can&#039;t write anything</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p82323">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">dajhard</div>
					<div class="post-datetime">
						21 Feb 2009, 21:42					</div>
				</div>
				<div class="post-content content">
					<p>Hi, some days ago I got a WAPD-170AG board (IXP425) that comes with some old version of Kamikaze preinstalled.<br />It boots, works, but i can&#039;t write anything on it. After reboot it&#039;s all on defaults.</p><p>I think there is some issue with jffs2, it can&#039;t be mounted... dont know why. Here is what it says...</p><p><em><br />- preinit -<br />switching to jffs2<br />jffs2: Too few erase blocks (1)<br />jffs2 not ready yet; using ramdisk<br />mini_fo: using base directory: /<br />mini_fo: using storage directory: /tmp/root<br />- init -<br /></em></p><p>Can anyone help?</p><div class="codebox"><pre><code>IXP4XX-Flash.0: Found 1 x16 devices at 0x0 in 16-bit bank
 Intel/Sharp Extended Query Table at 0x0031
Using buffer write method
cfi_cmdset_0001: Erase suspend on write enabled
Searching for RedBoot partition table in IXP4XX-Flash.0 at offset 0xfe0000
6 RedBoot partitions found on MTD device IXP4XX-Flash.0
Creating 6 MTD partitions on &quot;IXP4XX-Flash.0&quot;:
0x00000000-0x00080000 : &quot;RedBoot&quot;
0x00080000-0x001c0000 : &quot;kernel&quot;
0x001c0000-0x002e0000 : &quot;rootfs&quot;
0x002c0000-0x002e0000 : &quot;rootfs_data&quot;
0x002e0000-0x00fe0000 : &quot;unallocated&quot;
0x00fe0000-0x00fff000 : &quot;FIS directory&quot;
0x00fff000-0x01000000 : &quot;RedBoot config&quot;
nf_conntrack version 0.5.0 (512 buckets, 4096 max)
ip_tables: (C) 2000-2006 Netfilter Core Team
TCP westwood registered
NET: Registered protocol family 1
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
XScale DSP coprocessor detected.
ixp4xx_mac driver 0.3.1: eth0 on NPE-B with PHY[1] initialized
ixp4xx_mac driver 0.3.1: eth1 on NPE-C with PHY[-1] initialized
VFS: Mounted root (squashfs filesystem) readonly.
Freeing init memory: 72K
Warning: unable to open an initial console.
Image loaded to NPE-B Func:0, Rel: 2:1, Status: 80800000
- preinit -
switching to jffs2
jffs2: Too few erase blocks (1)
jffs2 not ready yet; using ramdisk
mini_fo: using base directory: /
mini_fo: using storage directory: /tmp/root
- init -
init started:  BusyBox v1.4.2 (2007-11-15 20:17:31 CST) multi-call binary

Please press Enter to activate this console. eth0: link up, 100Mbps, full-duplex
, lpa 0xC5E1
PPP generic driver version 2.4.2
wlan: 0.8.4.2 (svn r2568)
ath_hal: module license &#039;Proprietary&#039; taints kernel.
ath_hal: 0.9.30.13 (AR5210, AR5211, AR5212, AR5416, RF5111, RF5112, RF2413, RF54
13, RF2133, REGOPS_FUNC)
ath_rate_minstrel: Minstrel automatic rate control algorithm 1.2 (svn r2568)
ath_rate_minstrel: look around rate set to 10%
ath_rate_minstrel: EWMA rolloff level set to 75%
ath_rate_minstrel: max segment size in the mrr set to 6000 us
wlan: mac acl policy registered
ath_pci: 0.9.4.5 (svn r2568)
PCI: enabling device 0000:00:01.0 (0340 -&gt; 0342)
ath_pci: switching rfkill capability off
Unable to load needed module: ath_rate_sample; no support for automatic module l
oading
Rate control module &quot;ath_rate_sample&quot; not available
Using &quot;ath_rate_minstrel&quot; instead.
ath_pci: switching per-packet transmit power control off
wifi0: 11a rates: 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps
wifi0: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps
wifi0: 11g rates: 1Mbps 2Mbps 5.5Mbps 11Mbps 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36
Mbps 48Mbps 54Mbps
wifi0: turboG rates: 6Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps
wifi0: H/W encryption support: WEP AES AES_CCM TKIP
wifi0: mac 10.5 phy 6.1 radio 6.3
wifi0: Use hw queue 1 for WME_AC_BE traffic
wifi0: Use hw queue 0 for WME_AC_BK traffic
wifi0: Use hw queue 2 for WME_AC_VI traffic
wifi0: Use hw queue 3 for WME_AC_VO traffic
wifi0: Use hw queue 8 for CAB traffic
wifi0: Use hw queue 9 for beacons
wifi0: Atheros 5212: mem=0x48000000, irq=28
jffs2: Too few erase blocks (1)



BusyBox v1.4.2 (2007-11-15 20:17:31 CST) Built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

  _______                  _    _   ___ __ _
 |    ___|.-----.----.----| |_.| | | . |  \ |
 \___    \|  _  | -  |   _|   /| |_| _ | .  |
 |_______||   __|___||__| |_\_\|___|_|_|_|\_|
          |__| W I R E L E S S   F R E E D O M
  SparkLAN LiteSDK V1.3 ----------------------------
  *
  * Built at 2007,11,15 Taiwan (WAPD-170AG)
  *
 ---------------------------------------------------
root@SparkLAN:/#</code></pre></div><div class="codebox"><pre><code>root@SparkLAN:/# firstboot
Unlocking rootfs_data ...
Erasing rootfs_data ...
jffs2: Too few erase blocks (1)
mount: mounting /dev/mtdblock3 on /jffs failed
mini_fo: using base directory: /
mini_fo: using storage directory: /jffs
Unable to handle kernel NULL pointer dereference at virtual address 00000006
pgd = c3998000
[00000006] *pgd=0383e031, *pte=00000000, *ppte=00000000
Internal error: Oops: f3 [#1]
Modules linked in: ath_pci wlan_xauth wlan_wep wlan_tkip wlan_ccmp wlan_acl ath_
rate_minstrel ath_hal(P) wlan_scan_sta wlan_scan_ap wlan ppp_async ppp_generic s
lhc crc_ccitt
CPU: 0
pc : [&lt;c00af744&gt;]    lr : [&lt;c007a2f4&gt;]    Tainted: P
sp : c3935d28  ip : c3935ccc  fp : c3935d5c
r10: c3f7df40  r9 : c3f9e478  r8 : c025f240
r7 : 00000000  r6 : 00000000  r5 : 00000000  r4 : c3f9e478
r3 : c3f9e190  r2 : 20000013  r1 : 20000093  r0 : fffffffe
Flags: nZCv  IRQs on  FIQs on  Mode SVC_32  Segment user
Control: 39FF
Table: 03998000  DAC: 00000015
Process mount (pid: 2697, stack limit = 0xc3934250)
Stack: (0xc3935d28 to 0xc3936000)
5d20:                   c0079638 fffffffe 00000000 c3f9e478 c396c400 00000000
5d40: 00000000 c025f240 c3b13000 c3f7df40 c3935d88 c3935d60 c00b3d94 c00af6c0
5d60: 00000000 c396c400 c396c400 00008000 c00b3bdc c0260328 c3e80000 c3935da8
5d80: c3935d8c c006b3bc c00b3be8 c03288a0 fffffff4 c3f44000 c3b13000 c3935dbc
5da0: c3935dac c00b36f4 c006b37c c03288a0 c3935de4 c3935dc0 c006ae2c c00b36dc
5dc0: c03288a0 c0260328 ffffffed c3b13000 c3f44000 00008000 c3935e00 c3935de8
5de0: c006aebc c006ade0 00000000 00000000 00000000 c3935f74 c3935e04 c007f71c
5e00: c006ae90 c0020704 c0020588 ffffffec c386cbf4 c3961e9c c037dd40 c3935e60
5e20: c3935e2c c0020960 c00206ec c3935e38 c007c16c 00000017 ffffffff c025c6d8
5e40: 00000017 c3935f0c 0009f000 20000013 00000000 c3935f08 c3935e64 c0020af8
5e60: c002076c c3935e88 c3935e74 c00afbc0 c00654dc 00000000 00000000 c3935f44
5e80: 000041ed bee67998 00000060 00000000 00000400 c006c048 00000400 473bfd2d
5ea0: c025ee74 20000013 00000002 c025ee60 c3935f00 c3935ec0 c0054b40 c005438c
5ec0: 00000044 000200d0 c025f0f4 00000000 00000000 00000001 00000000 0009e040
5ee0: 000000d0 c025f0f0 ffffffff c3935f40 00000040 c3f9e114 c0328f20 c3935f74
5f00: c3935f0c c001a7c0 00000001 00000001 00000000 00000000 0009f000 00001000
5f20: 0009e040 00000040 c3b13000 c3935f84 c3934000 00000000 c3935f74 00000000
5f40: c3935f54 00000000 c021071c 00000000 c3972000 bee67f80 00008000 c001ad24
5f60: c3934000 00000000 c3935fa4 c3935f78 c007f814 c007f1e8 c3b13000 c3f44000
5f80: c3e80000 c3b13000 0009e040 00008000 00000000 00000015 00000000 c3935fa8
5fa0: c001ab80 c007f794 0009e040 00008000 bee67f80 bee67f86 bee67f64 00008000
5fc0: 0009e040 00008000 00000000 0009e040 bee67d88 bee67ea8 00000000 00000000
5fe0: 4008c4bc bee679e4 00064618 4008c4c8 20000010 bee67f80 0000008e 000a2e3c
Backtrace:
Function entered at [&lt;c00af6b4&gt;] from [&lt;c00b3d94&gt;]
Function entered at [&lt;c00b3bdc&gt;] from [&lt;c006b3bc&gt;]
Function entered at [&lt;c006b370&gt;] from [&lt;c00b36f4&gt;]
 r7 = C3B13000  r6 = C3F44000  r5 = FFFFFFF4  r4 = C03288A0
Function entered at [&lt;c00b36d0&gt;] from [&lt;c006ae2c&gt;]
Function entered at [&lt;c006add4&gt;] from [&lt;c006aebc&gt;]
 r8 = 00008000  r7 = C3F44000  r6 = C3B13000  r5 = FFFFFFED
 r4 = C0260328
Function entered at [&lt;c006ae84&gt;] from [&lt;c007f71c&gt;]
 r6 = 00000000  r5 = 00000000  r4 = 00000000
Function entered at [&lt;c007f1dc&gt;] from [&lt;c007f814&gt;]
Function entered at [&lt;c007f788&gt;] from [&lt;c001ab80&gt;]
 r7 = 00000015  r6 = 00000000  r5 = 00008000  r4 = 0009E040
Code: e59f0280 e3a02017 ebff06ac e50b0030 (e5903008)
creating directories... done
setting up symlinks... done</code></pre></div><p>Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82726">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Kaloz</div>
					<div class="post-datetime">
						26 Feb 2009, 19:43					</div>
				</div>
				<div class="post-content content">
					<p>We don&#039;t have a board, so there was no official support for it ever.. Your best bet is to check their SDK and create a patch for trunk.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>