<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Need Experts Help to unbrick tp-link wr741nd v4.3</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p193660">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Morphine</div>
					<div class="post-datetime">
						3 Mar 2013, 05:57					</div>
				</div>
				<div class="post-content content">
					<p><span class="postimg"><img src="http://imageshack.us/a/img534/5310/mymodel.jpg" alt="http://imageshack.us/a/img534/5310/mymodel.jpg" /></span><br /><span class="postimg"><img src="http://imageshack.us/a/img202/1097/mymodeldesc.jpg" alt="http://imageshack.us/a/img202/1097/mymodeldesc.jpg" /></span><br />Hello there,<br />I have a tl-wr741nd version 4.3 TP-Link router, wireless bridge didn’t work. So I flashed the device using the web GUI with ….. and it booted normally with wireless off as expected, but there was no web GUI installed so I tried to install LuCi, but it didn’t work so I re flashed&nbsp; the device using putty telnet with “openwrt-ar71xx-generic-tl-wr741nd-v4-jffs2-sysupgrade.bin” and it was the same still no GUI, so I tried to flash my device with “openwrt-ar71xx-tl-wr741nd-v1-squashfs-factory.bin” only after pressed enter and the writing process started I realized that this firmware is for version 1 and not for version 4.3, I let the process continue hoping that no bad things well happen but with no luck, and input output error message was displayed, I don’t remember the correct syntax of the error because putty closed afterwards. So the router rebooted and all LEDs were blinking and my PC was not able to ping the router, and the Local area device showed that there was no cable plugged. I searched the net for this problem and found out that the only way to fix it is by serial recovery (tried failsafe nothing happened), I’m don’t have that experience to do the whole process at my own, I found the pins on the router PCB Vcc, Tx, Rx, and Gnd and the connection that should be made in the router from Tx to CPU <br />Form: <a href="http://wiki.openwrt.org/toh/tp-link/tl-wr741nd">http://wiki.openwrt.org/toh/tp-link/tl-wr741nd</a><br />&quot;WR741ND ver. 4<br />The version 4 of the board uses the standard TP-Link pinout, however the TX pin is not connected to the CPU. In order to make the TX line working, the two points on the bottom side of the PCB must be connected with a small wire.<br />Version 4.20 needs the same wire for TX, even if the layout is a tiny bit different. The pin at the SOC is labeled TP18, the one at the serial connector is labeled TP28. Output level is 2.5V with good flanks (measured with digital oscilloscope). Input is via a 1k/3k voltage divider, which does not make the RX line 5V tolerant! Connection needs a 3.3V RS232 level shifter, or can be directly done with, e.g., the Bus Pirate. Pins on the connector in the photo are from the left TX-RX-GND-3V3, as expected.&quot;<br /><span class="postimg"><img src="http://imageshack.us/a/img268/1921/wikipcb.jpg" alt="http://imageshack.us/a/img268/1921/wikipcb.jpg" /></span></p><p>And there I was lost, there are too many guide on the net which made me confused. First, on the routers PCB the wire from CPU to TX is from the red box to TX not the black box to TX. and TX RX GND and VCC should be as the following right?<br /><span class="postimg"><img src="http://imageshack.us/a/img443/109/mypcb.jpg" alt="http://imageshack.us/a/img443/109/mypcb.jpg" /></span></p><p>Second, I live in Syria so ordering cables from the net is out of reach. Third, based on the guides I read I searched for a RS232 to TTL cable in the nearby local electronic stores, but with no luck (they didn’t recognize that cable, maybe I explained wrong), so I decided to make the cable on my own using this chart …. <br /><span class="postimg"><img src="http://imageshack.us/a/img521/2246/cimage.jpg" alt="http://imageshack.us/a/img521/2246/cimage.jpg" /></span><br /><span class="postimg"><img src="http://imageshack.us/a/img515/4342/cimage2.jpg" alt="http://imageshack.us/a/img515/4342/cimage2.jpg" /></span><br />Source: <a href="https://forum.openwrt.org/viewtopic.php?id=36740">https://forum.openwrt.org/viewtopic.php?id=36740</a></p><p>My questions are:<br />1. Will the cable work if I used a 9pin serial cable, cut one end and attaching it circuit and attach the circuit Rx,Tx,Gnd to the router PCB like above image (note in the picture above it’s a different model so Tx,Rx and Gnd positions are different ), and connect the other end of the serial cable to my pc ? <br />2. Do I need to use VCC ? and are there any risks of damaging the router by voltage with and without discarding Vcc?.<br />3. Is the router even recoverable using serial taking into consideration that all LEDS are flashing, to be precise the power LED stays on, the 2nd LED and PC4 LED turn on 1st then a split second later the remaining LEDS turn on then off (expect the power) .<br />And thanks in advance.<br />First, sorry for my bad English Second,&nbsp; pretty much sorry for the too much info, but since I&#039;m new to this field I don’t know what are the important details to present.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p193731">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Morphine</div>
					<div class="post-datetime">
						4 Mar 2013, 04:28					</div>
				</div>
				<div class="post-content content">
					<p>Bump, still no answer</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p193759">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">nozombian</div>
					<div class="post-datetime">
						4 Mar 2013, 12:37					</div>
				</div>
				<div class="post-content content">
					<p>This router really needs connecting tp18 and tp28 with a wire and does not need 10k resistor between tx and vcc as some other tp-links, but you know this if seen the picture, it seems right.</p><p>As for the cable, are you sure you asked for nokia data cable, which is quite cheap and easily to obtain even in third world countries? You can use either nokia DKU5 or CA42 with this router and it is well documented. I&#039;m not a big electro guru, but from my experience vcc was not needed when using nokia usb cable, but usb has power. If you are going to attach router directly to rs 232, maybe you will need the vcc though, but this what I dont know. I&#039;d try without vcc first and if you will not get any output, you can attach the vcc then. The scheme you have looks like ttl converter, so if you do it right, you should not fry your port.</p><p>I&#039;d still prefer to obtain the nokia cable though, because it is very well documented and tested, there are even youtube videos.</p>											<p class="post-edited">(Last edited by <strong>nozombian</strong> on 4 Mar 2013, 12:38)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>