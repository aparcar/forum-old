<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Installing OpenWRT on desktop PC (x86) with SATA drives</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 21 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p182760">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">andypi</div>
					<div class="post-datetime">
						9 Nov 2012, 01:07					</div>
				</div>
				<div class="post-content content">
					<p>I’m trying to install openwrt on a desktop PC with SATA hard drives, but so far all attempts have resulted in a grub error 21 message (at boot).</p><p>On the first attempt I booted up the PC with a LiveCD then did the following:</p><div class="codebox"><pre><code>wget http://downloads.openwrt.org/backfire/10.03.1/x86_generic/openwrt-x86-generic-combined-ext2.img.gz
gunzip openwrt-x86-generic-combined-ext2.img.gz
dd if=openwrt-x86-generic-combined-ext2.img of=/dev/sda bs=1M count=100</code></pre></div><p>After the above failed, I thought it might be because I’m using SATA drives.&nbsp; I then thought I’d try to compile my own image (this time from a VirtualBox instance of Ubuntu Desktop 12.04.1 LTS (32 bit):</p><div class="codebox"><pre><code>sudo apt-get install subversion build-essential
mkdir ~/openwrt
svn co svn://svn.openwrt.org/openwrt/branches/backfire
cd ~/openwrt/backfire/
./scripts/feeds update –a
./scripts/feeds install –a
sudo apt-get install build-essential subversion git-core libncurses5-dev zlib1g-dev gawk flex quilt libssl-dev xsltproc libxml-parser-perl
make defconfig
make prereq
make menuconfig</code></pre></div><p>I wasn’t entirely sure what to include at this point so any suggestions would be appreciated.</p><div class="codebox"><pre><code>make</code></pre></div><p>Once completed I copied the image file (from the bin directory) to a USB stick, booted the target PC with a LiveCD, copied the file across, gunzip’d it, and then used the dd command to copy to disk:</p><div class="codebox"><pre><code>sudo su -
cd /home/ubuntu
dd if=openwrt-x86-generic-combined-ext2.img of=/dev/sda bs=1M count=100</code></pre></div><p>Again, on reboot, I receive the grub error 21 message.</p><p>I think I need the “pata_jmicron” module installed but I don’t see it in “make menuconfig”.&nbsp; Also, if anyone knows how to install the “solos-pci” module – that would be really great!&nbsp; It is normally included in the Linux kernel.</p><p>Appreciate any help you can give, cheers.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p182808">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">andypi</div>
					<div class="post-datetime">
						9 Nov 2012, 15:01					</div>
				</div>
				<div class="post-content content">
					<p>Does anyone know what I might be doing wrong here?&nbsp; Any information about how a newbie can get this working on a x86 machine (with SATA hdd) would be great!</p><p>Just in case this helps, please see the below link for my .config file (too long to post here) - maybe something&#039;s wrong here?</p><p><a href="https://www.dropbox.com/s/2g7u02ba91lwa0g/config.txt">https://www.dropbox.com/s/2g7u02ba91lwa0g/config.txt</a></p><p>Cheers,<br />Andy</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>