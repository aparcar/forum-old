<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> QoS L7 not recognizing packets</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 21 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p21489">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">eatnumber1</div>
					<div class="post-datetime">
						24 Feb 2006, 09:17					</div>
				</div>
				<div class="post-content content">
					<p>I have QoS setup (according to the wiki), but most packets that i filter using L7 (with the exception of ssl and bittorrent) is never recognized (shows 0 in the pkts and bytes section when i run iptables -t mangle -L -v). Anyone know the possible problem?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21491">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">olli</div>
					<div class="post-datetime">
						24 Feb 2006, 11:28					</div>
				</div>
				<div class="post-content content">
					<p>The qosfw-scripts v0.5 package requires nbd&#039;s latest pre-RC5 <a href="http://downloads.openwrt.org/people/nbd/whiterussian/">snapshot</a> (or build your own firmware from latest White Russian subversion revision).</p>											<p class="post-edited">(Last edited by <strong>olli</strong> on 24 Feb 2006, 11:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21492">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">eatnumber1</div>
					<div class="post-datetime">
						24 Feb 2006, 11:34					</div>
				</div>
				<div class="post-content content">
					<p>are there older versions that I can use?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21493">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">olli</div>
					<div class="post-datetime">
						24 Feb 2006, 11:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>eatnumber1 wrote:</cite><blockquote><p>are there older versions that I can use?</p></blockquote></div><p>Yes. But it&#039;s always recommended to use the newest availiable versions. There is no support for older or unofficial versions.</p>											<p class="post-edited">(Last edited by <strong>olli</strong> on 24 Feb 2006, 11:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21494">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">eatnumber1</div>
					<div class="post-datetime">
						24 Feb 2006, 11:39					</div>
				</div>
				<div class="post-content content">
					<p>i don&#039;t particularly care about support... if i&#039;m willing to void the warranty on my WRT54GS to put OpenWRT on it, i think that shows it.</p><p>do you know the latest version that I can use in RC4?</p><p>Edit: and where I can get it?</p><p>Edit (again): On second thought... is the pre-RC5 particularly buggy? Is it in pre-beta, or beta, or what... if it&#039;s stable, i guess i can use that.</p>											<p class="post-edited">(Last edited by <strong>eatnumber1</strong> on 24 Feb 2006, 11:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21495">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">macsat</div>
					<div class="post-datetime">
						24 Feb 2006, 11:53					</div>
				</div>
				<div class="post-content content">
					<p>preRC5 seems a lot LESS buggy than RC4 to me. (If you ask me RC4 was close to beeing a horrible release).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21496">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">eatnumber1</div>
					<div class="post-datetime">
						24 Feb 2006, 11:56					</div>
				</div>
				<div class="post-content content">
					<p>i&#039;ll try it, thx</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21500">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">eatnumber1</div>
					<div class="post-datetime">
						24 Feb 2006, 13:24					</div>
				</div>
				<div class="post-content content">
					<p>ok, i&#039;m running pre-RC5 and the router is recognizing more packets than it used to, but it&#039;s still not seeing http on L7 (for me, the most important)</p><p>Edit: Wait... no, I lied... it saw ONE http packet.<br />Also, i have it setup to prioritize worldofwarcraft packets (<a href="http://l7-filter.sourceforge.net/protocols.en">http://l7-filter.sourceforge.net/protocols.en</a>) and its not seeing those (along with a bunch of others)</p>											<p class="post-edited">(Last edited by <strong>eatnumber1</strong> on 24 Feb 2006, 13:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p25056">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">orb360</div>
					<div class="post-datetime">
						12 Apr 2006, 09:35					</div>
				</div>
				<div class="post-content content">
					<p>Im getting the same problem...</p><p>So...</p><p>I decided to manipulate iptables -t mangle</p><p>First, for every chain, do &quot;iptables -t mangle -F &lt;chain&gt;&quot;<br />Then add all your rules such as:</p><p>&quot;iptables -t mangle -A POSTROUTING -m ipp2p --ipp2p -j MARK --set-mark 0x4&quot;</p><p>and so on for every rule. Since then, mine have marked everything.</p><p>I started with ndb&#039;s QoS script, but the script does some confusing things with the iptables...</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>