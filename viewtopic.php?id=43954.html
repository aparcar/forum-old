<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> wbmr-hp-g300h brick</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 2 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p200562">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">wb</div>
					<div class="post-datetime">
						3 May 2013, 18:52					</div>
				</div>
				<div class="post-content content">
					<p>Hi, </p><p>I think I&#039;ve done something very stupid and could need some help. <br />OpenWRT was running on this router (12.09) but I wanted to move to dd-wrt. <br />So I flashed the FW via mtd. Big mistake, as it doesn&#039;t boot any longer. Only orange power light. When I press AOSS before powering up a second led lights up. </p><p>I set up a TFTP server on my OSX machine (firewall disabled,192.168.11.2 on computer) and wanted to upload firmware.ram as described in the help pages. It didn&#039;t work. Nothing happened. <br />Wireshark showed no tftp requests from the router at all.</p><p>Could you please help me? How can I flash dd-wrt?<br />(OpenWRT didn&#039;t seem to have a webinterface so I want to return to the perfectly fine running DD-WRT)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200570">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">angelos</div>
					<div class="post-datetime">
						3 May 2013, 20:05					</div>
				</div>
				<div class="post-content content">
					<p>I think you have to &quot;cut&quot; some bytes from the dd-wrt image first and then use the modified file for flashing from OpenWrt to dd-wrt. But I haven&#039;t tried it, so just wait for someone who has or knows for sure. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>About unbricking now... you may have to repeat the procedure if it fails. Just keep the AOSS button pressed until you see the tftp session in wireshark and then release it.</p><p>I would suggest to give OpenWrt another chance because it is much better than dd-wrt and you can do almost anything with it. You just have to spend some time reading. OpenWrt has a web interface, but you have to install it first. More info here...<br /><a href="http://wiki.openwrt.org/doc/howto/luci.essentials">http://wiki.openwrt.org/doc/howto/luci.essentials</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200572">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">wb</div>
					<div class="post-datetime">
						3 May 2013, 20:34					</div>
				</div>
				<div class="post-content content">
					<p>Thank you. Usually I prefer OpenWRT (I already have some experience with an older router). I was just shocked that there&#039;s no web interface. I should have gone to bed. It was late already.</p><p>There&#039;s lots of ARP, followed by MDNS, SSDP and some IPv6. But no tftp. No matter how long I press the button and how often I try.</p><p>Am I doomed? Please tell me no. <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200577">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">angelos</div>
					<div class="post-datetime">
						3 May 2013, 21:20					</div>
				</div>
				<div class="post-content content">
					<p>No, you&#039;re not doomed. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>If you like, you can use my own ramdisk image.</p><p>It is trunk release 35205 (kernel 3.7.2) and it was built in January, but the date in my linux box was not set correctly when I built it, so busybox reports &quot;March 2013&quot;. Anyway, this doesn&#039;t matter as it is only for debricking purposes.</p><p>I have tested personally and it works.<br />Here it is...<br /><a href="http://www72.zippyshare.com/v/61386340/file.html">http://www72.zippyshare.com/v/61386340/file.html</a></p><p>Are you sure you have setup the tftp server correctly?<br />If you run &quot;telnet 192.168.11.2 69&quot; from another pc or &quot;telnet 127.0.0.1 69&quot; from localhost, does it work?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200578">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">wb</div>
					<div class="post-datetime">
						3 May 2013, 21:31					</div>
				</div>
				<div class="post-content content">
					<p>Thank you for your image! And your help, of course.</p><p>Interestingly Wireshark showed me &quot;Who has 192.168.11.2? Tell 192.168.11.1&quot;. Like mentioned in some tutorials I set the MAC address from my router on my computer for 192.168.11.1.</p><p>To be on the safe side I currently use the tftp command from osx (put). I also see the command in Wireshark. But I can&#039;t locally connect to 127.0.0.1 69 via telnet: connection refused.</p><p>I can&#039;t try from a second computer since the computer is directly connected to the bricked router and isolated from my network. Also I made sure the OSX firewall is turned off.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200586">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">angelos</div>
					<div class="post-datetime">
						3 May 2013, 21:54					</div>
				</div>
				<div class="post-content content">
					<p>Well, I was never an osx user so can&#039;t help you much with that but I think if everything was OK, you would be able to connect to the tftp server from localhost without any problems with the telnet command.</p><p>I remember having a similar problem under windows with the firewall turned-off and the solution was to turn the firewall on and add a rule that allows inbound and outbound traffic for the specific app (tftp server). Don&#039;t know if this helps under osx...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200593">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">wb</div>
					<div class="post-datetime">
						3 May 2013, 22:46					</div>
				</div>
				<div class="post-content content">
					<p>I guess I can&#039;t test the tftp connection from the host since I specified 192.168.11.1 as target..! Almost forgot about that. So this is probably not the problem.</p><p>Maybe I completely destroyed the bootloader of the router? What to do in such a case?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200594">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">angelos</div>
					<div class="post-datetime">
						3 May 2013, 23:13					</div>
				</div>
				<div class="post-content content">
					<p>I wouldn&#039;t worry about that, my (little) experience with the WBMR has showed me that is not that easy to destroy the boot loader.</p><p>Just connect it to a linux or windows machine and do the job there.</p><p>tftp-hpa under linux does the job for sure and without any problems.</p><p>If you don&#039;t have any linux machine available, try tftpd32 under windows with the firewall turned-off and if this doesn&#039;t work turn the firewall on and create the appropriate rules for the tftp server.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200595">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">wb</div>
					<div class="post-datetime">
						3 May 2013, 23:24					</div>
				</div>
				<div class="post-content content">
					<p>I am familiar with linux and it&#039;s cli (Ubuntu, SuSE, Fedora..) and I can run a livecd on a computer at home. Even my mac I think.<br />So I will try this tomorrow. (it&#039;s late now)</p><p>Could you give me a brief explanation what to do? I have no experience with tftp-hpa.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200597">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">angelos</div>
					<div class="post-datetime">
						4 May 2013, 00:01					</div>
				</div>
				<div class="post-content content">
					<p>I use Arch Linux whenever I want to setup a linux host, but the arch installation is not what we call &quot;user friendly&quot;, so if you&#039;re not familiar with it, there is no need to waste time by reading the arch wiki in order to setup a linux host just for tftp server.</p><p>After all, the &quot;linux way&quot; is always the same, no matter what distro you choose. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>1. You install the tftp-hpa package.<br />2. You configure the service (not always needed) by editing the configuration file.<br />3. You start the service.</p><p>Tftp server has a root folder.<br />The firmware.ram file should be put there.</p><p>Once the tftpd service has started, you continue with the rest (power the router off - push AOSS button - turn the router on, check traffic with wireshark etc...)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200710">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">wb</div>
					<div class="post-datetime">
						4 May 2013, 23:15					</div>
				</div>
				<div class="post-content content">
					<p>Thank you, you&#039;re awesome <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>My router is up and running again! I installed Ubuntu, tftp worked perfectly. Set up an ftp server and downloaded the image on my router via ftp (wget). Then I successfully flashed openwrt.</p><p>Now I try to get the webinterface installed.</p><p>EDIT:</p><p>Please let me know if you ever come to Austria. I owe you all the beer you can drink. It&#039;s all up and running right now.<br />Some of it was quite some work to set up (I didn&#039;t know you have to manually install DSL drivers, set annex a via cli) but it works.<br />Thank you so much!</p><p>What still needs to be done:</p><p>-configuring transmissiond (working on it, but it&#039;s running)<br />-automatic wifi up and down at day and night (wrote a cronjob, hope it will work)<br />-LEDs (have to figure out how configuration works, doesn&#039;t bug me so much)</p><p>It&#039;s been a hard day&#039;s night, but now it finally works. Thank you again!</p>											<p class="post-edited">(Last edited by <strong>wb</strong> on 5 May 2013, 02:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200763">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">angelos</div>
					<div class="post-datetime">
						5 May 2013, 10:25					</div>
				</div>
				<div class="post-content content">
					<p>Glad you made it.<br />And thanks for the invitation... <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>I don&#039;t know about transmissiond as I don&#039;t use it, but the led configuration must be put in /etc/config/system<br />You can configure it through cli, but it&#039;s a lot of writing so better use the web interface.</p><p>Here is mine, as an example...</p><p>( &quot;wifi&quot; and &quot;security&quot; leds blink both on wireless activity, &quot;dsl&quot; and &quot;internet&quot; leds blink on PPP/Internet activity, &quot;power&quot; led and &quot;usb&quot; led on the back are always on, and the blue &quot;movie engine&quot; led blinks every one second, without any particular reason... <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /> )</p><div class="codebox"><pre><code>config led
    option default &#039;0&#039;
    option name &#039;power&#039;
    option sysfs &#039;soc:green:power&#039;
    option trigger &#039;default-on&#039;

config led
    option default &#039;0&#039;
    option name &#039;power2&#039;
    option sysfs &#039;soc:red:power&#039;
    option trigger &#039;none&#039;

config led
    option default &#039;0&#039;
    option name &#039;wifi&#039;
    option sysfs &#039;soc:green:wlan&#039;
    option trigger &#039;phy0tpt&#039;

config led
    option default &#039;0&#039;
    option name &#039;security&#039;
    option sysfs &#039;soc:red:security&#039;
    option trigger &#039;phy0tpt&#039;

config led
    option default &#039;0&#039;
    option name &#039;dsl&#039;
    option sysfs &#039;soc:green:adsl&#039;
    option trigger &#039;netdev&#039;
    option dev &#039;nas0&#039;
    option mode &#039;link tx rx&#039;

config led
    option default &#039;0&#039;
    option name &#039;online&#039;
    option sysfs &#039;soc:green:internet&#039;
    option trigger &#039;none&#039;

config led
    option default &#039;0&#039;
    option name &#039;online2&#039;
    option sysfs &#039;soc:red:internet&#039;
    option trigger &#039;netdev&#039;
    option dev &#039;nas0&#039;
    option mode &#039;tx rx&#039;

config led
    option default &#039;0&#039;
    option name &#039;usb&#039;
    option sysfs &#039;soc:green:usb&#039;
    option trigger &#039;default-on&#039;

config led
    option default &#039;0&#039;
    option name &#039;movie&#039;
    option sysfs &#039;soc:blue:movie&#039;
    option trigger &#039;timer&#039;
    option delayon &#039;1000&#039;
    option delayoff &#039;1000&#039;</code></pre></div>											<p class="post-edited">(Last edited by <strong>angelos</strong> on 5 May 2013, 10:29)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200783">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">benm</div>
					<div class="post-datetime">
						5 May 2013, 13:06					</div>
				</div>
				<div class="post-content content">
					<p>I have also just installed OpenWRT on my WBMR-HP-G300H, and am delighted with the result. Getting everything set up did involve a lot of trawling through the forum though, and I am very grateful to all the people, including angelos, who have posted helpful information in the past.</p><p>I have now started to update the wiki, so as to document all the steps necessary for a fully working configuration in one place. I have not got very far yet, but will add more in the next few days. However, I do already have a question for wb. Am I right in thinking that when you flashed OpenWRT for the first time, before bricking the router trying to go back again, you used the web interface in DD-WRT? Did this work OK? I tried to do this several times. Each time when I rebooted after flashing I ended up back in DD-WRT. So I ended up going down the TFTP route. But it would be useful to know what I should have done for the wiki.</p>											<p class="post-edited">(Last edited by <strong>benm</strong> on 5 May 2013, 13:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200822">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">wb</div>
					<div class="post-datetime">
						5 May 2013, 21:12					</div>
				</div>
				<div class="post-content content">
					<p>@angelos:<br />Your LED configuration works fine, of course. And who doesn&#039;t want some randomly flashing blue LED on his router?<br />Thank you again. Transmission and smbd is running fine. I also configured avahi-daemon so it appears as Airport in OSX&#039;s Finder <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />Wifi toggle at night needs some more work, but I found a script somewhere here, will give it a try later.</p><p>@benm:<br />I&#039;m delighted too. I like this easy way to install opkgs directly into the flash memory. Over all OpenWRT seems very clean and elegant in every aspect (installation of software, configuration files).</p><p>But when I was running DD-WRT I got the same results as you. After a reboot there was no sign of OpenWRT.</p><p>What I did was logging in via telnet, cd /tmp, wget image (my router was online that time), and flash it using mtd (mtd -r write image.whatever linux if I remember correctly, please verify on your own).<br />Of course you have to be online with the router, but there&#039;s no need for setting up a tftp server and messing around too much. It&#039;s platform independent (I wasn&#039;t able to tftp on OSX) and quite straight forward.</p>											<p class="post-edited">(Last edited by <strong>wb</strong> on 6 May 2013, 00:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200833">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">benm</div>
					<div class="post-datetime">
						5 May 2013, 23:23					</div>
				</div>
				<div class="post-content content">
					<p>Aha! Thanks for the explanation. I&#039;m pleased it wasn&#039;t just me. <br />I&#039;ll update the wiki. And of course if you or anyone else reading this has anything else to add please don&#039;t hesitate ...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200836">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">wb</div>
					<div class="post-datetime">
						6 May 2013, 00:07					</div>
				</div>
				<div class="post-content content">
					<p>You&#039;re welcome. If I can contribute something I will do so.</p><p>Edit:</p><br /><p>I got Wifi Up/Down working with a cronjob:<br />30 00 * * * wifi down<br />00 09 * * * wifi up</p><p>But it seems like to get it actually work I had to restart cron afterwards. This should happen automatically if you press submit at the webinterface.</p>											<p class="post-edited">(Last edited by <strong>wb</strong> on 6 May 2013, 12:10)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>