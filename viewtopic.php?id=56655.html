<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> luci/uhttpd against pasword bruteforcing</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p271166">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">jcb</div>
					<div class="post-datetime">
						3 Apr 2015, 21:32					</div>
				</div>
				<div class="post-content content">
					<p>Hello, everyone.<br />Currently I&#039;m using BB 14.07 wuth luci-ssl available on wan interface with properly signed certificate.<br />How can I protect my OpenWRT installation from password brute forcing? Does luci or uhttpd have any protection (lockout) against this threat or at least save any logs on (un)succesful logons?<br />Took a look in their documentation, but found nothing.<br />Does anybody here able to help me?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p271258">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						4 Apr 2015, 19:51					</div>
				</div>
				<div class="post-content content">
					<p>I hope to be corrected if I&#039;m wrong, but I don&#039;t think there&#039;s anything like fail2ban for openwrt.</p><p>Lacking better advise from more experienced users here&#039;s what I would have tried.</p><p>If brute-forcing is a concern to you, I&#039;d try to limit the attack vector time wise -- maybe only allow ssh login with the keys, disable uhttpd and only bring it up (via ssh) when needed (or not bring it up at all)?</p><p>Another option would be to only allow uhttpd access from a certain local IP/mac-address.</p><p>Hopefully someone else will chime in.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p271260">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">drawz</div>
					<div class="post-datetime">
						4 Apr 2015, 20:06					</div>
				</div>
				<div class="post-content content">
					<p>I think one of the community builds limited the # of login attempts over a certain amount of time</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p271353">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">jcb</div>
					<div class="post-datetime">
						5 Apr 2015, 16:06					</div>
				</div>
				<div class="post-content content">
					<p>Thank you guys for your interest! Did not found that build, found one but only with ssh protection built-in.<br />Surely I can disable web interface on WAN or start it manually, but it&#039;s not right - I can forget to stop uhttpd or I can easily find myself in situation when no ssh client is available.<br />I also cannot restrict access only from known IP-addresses, because they are random, I&#039;m accessing router from different countries..</p>											<p class="post-edited">(Last edited by <strong>jcb</strong> on 5 Apr 2015, 16:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p271372">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						5 Apr 2015, 18:08					</div>
				</div>
				<div class="post-content content">
					<p>You can use port knocking or a VPN service to access luci securely from WAN.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p271373">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">zloop</div>
					<div class="post-datetime">
						5 Apr 2015, 18:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>How can I protect my OpenWRT installation from password brute forcing?</p></blockquote></div><p>Dont run a service that is globally reachable. Especially a Webserver that does the same thing like shell access does.</p><div class="quotebox"><blockquote><p>Does luci or uhttpd have any protection (lockout) against this threat or at least save any logs on (un)succesful logons?</p></blockquote></div><p>afaik luci2 has user management<br />You can submit logs via tcp to other computers/syslog servers or you can setup a &quot;real&quot; syslog server.</p><div class="quotebox"><blockquote><p>but I don&#039;t think there&#039;s anything like fail2ban for openwrt.</p></blockquote></div><p>OpenWrt should support the full python package. If you dont have enough space use a router with more flash, use extroot or routers with SATA support.</p><div class="quotebox"><blockquote><p>I also cannot restrict access only from known IP-addresses, because they are random, I&#039;m accessing router from different countries..</p></blockquote></div><p>This smells like bad practise. IPv6 has personal address space afaik and there are VPS with SSH access where you can chain your SSH connections. Since providers have fixed IPv4 space (see RIPE &amp; other databases) you have small ipranges to allow in these cases (dedicated servers have fixed IPs)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p271820">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">jcb</div>
					<div class="post-datetime">
						9 Apr 2015, 17:51					</div>
				</div>
				<div class="post-content content">
					<p>OpenVPN seems like the most acceptable workaround for now. Thank you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p271834">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">SCF</div>
					<div class="post-datetime">
						9 Apr 2015, 20:59					</div>
				</div>
				<div class="post-content content">
					<p>If OpenVPN is acceptable, then just using SSH to forward port 80 of the router should be acceptable too. To be more secure use a public key instead of a password for SSH auth.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p272406">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">whbjr</div>
					<div class="post-datetime">
						14 Apr 2015, 05:05					</div>
				</div>
				<div class="post-content content">
					<p>iptables &quot;recent&quot; module is the perfect solution to brute force attacks.&nbsp; See, for example, <a href="https://forum.openwrt.org/viewtopic.php?id=48001">https://forum.openwrt.org/viewtopic.php?id=48001</a></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>