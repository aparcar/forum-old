<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> BCM4704 CPU router with atheros miniPCI on kamikaze 2.6 Problems</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 4 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p54499">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">hgnan</div>
					<div class="post-datetime">
						24 Aug 2007, 10:55					</div>
				</div>
				<div class="post-content content">
					<p>My router is BCM4704 CPU&nbsp; with atheros miniPCI&nbsp; .&nbsp; flashed kamikaze 2.6 .</p><p>When wifi is working sta mode , ath0 cann&#039;t bridged with ethX&nbsp; .&nbsp; <br />root@OpenWrt:~/root/etc/config# vi wi* </p><br /><div class="codebox"><pre><code>config wifi-device  wifi0
        option type     atheros
#       option channel  5

        # REMOVE THIS LINE TO ENABLE WIFI:
#       option disabled 1

config wifi-iface
        option device   wifi0
        option network  lan
        option mode     sta
        option ssid     GMCC
        option encryption none
~


#### Loopback configuration           
config interface loopback             
        option ifname   &quot;lo&quot;          
        option proto    static
        option ipaddr   127.0.0.1
        option netmask  255.0.0.0
                                 
                                 
#### LAN configuration           
config interface lan             
        option type     bridge   
        option ifname   &quot;eth0&quot;
        option macaddr  &quot;00:0D:0B:0D:06:A6&quot;
        option proto    dhcp               
#       option ipaddr   192.168.1.1        
#       option netmask  255.255.255.0      
                                           
                                           
#### WAN configuration               
config interface        wan          
        option ifname   &quot;eth1&quot;       
        option macaddr  &quot;00:0d:0b:0d:06:a7&quot;
        option proto    dhcp</code></pre></div><p>Frequently output this msg from conlose&nbsp; :<br /></p><div class="codebox"><pre><code>br-lan: port 2(ath0) entering disabled state
br-lan: port 2(ath0) entering learning state
br-lan: topology change detected, propagating
br-lan: port 2(ath0) entering forwarding state
br-lan: port 2(ath0) entering disabled state
br-lan: port 2(ath0) entering learning state
br-lan: topology change detected, propagating
br-lan: port 2(ath0) entering forwarding state
br-lan: port 2(ath0) entering disabled state
br-lan: port 2(ath0) entering learning state
br-lan: topology change detected, propagating
br-lan: port 2(ath0) entering forwarding state
br-lan: port 2(ath0) entering disabled state
br-lan: port 2(ath0) entering learning state
br-lan: topology change detected, propagating
br-lan: port 2(ath0) entering forwarding state</code></pre></div><p>wifi is working in wds mode ,the route frequently output from console :<br /></p><div class="codebox"><pre><code>ath0: received packet with  own address as source address
ath0: received packet with  own address as source address
ath0: received packet with  own address as source address
ath0: received packet with  own address as source address
ath0: received packet with  own address as source address
ath0: received packet with  own address as source address
ath0: received packet with  own address as source address
ath0: received packet with  own address as source address
ath0: received packet with  own address as source address</code></pre></div>											<p class="post-edited">(Last edited by <strong>hgnan</strong> on 24 Aug 2007, 11:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54502">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">hgnan</div>
					<div class="post-datetime">
						24 Aug 2007, 11:08					</div>
				</div>
				<div class="post-content content">
					<p>I have turn on STP and delif ethX ,but it is no use<br /></p><div class="codebox"><pre><code>root@OpenWrt:/etc/config# brctl stp br-lan on
root@OpenWrt:/etc/config# brctl show
bridge name    bridge id        STP enabled    interfaces
br-lan        8000.000d0b0d06a6    yes        eth0
                        ath0
root@OpenWrt:/#brctl delif br-lan eth0
root@OpenWrt:/# brctl showstp br-lan
 bridge id        8000.0014a46c665e
 designated root    8000.0014a46c665e
 root port           0            path cost           0
 max age          20.00            bridge max age          50.00
 hello time           2.00            bridge hello time       5.00
 forward delay           0.00            bridge forward delay       0.00
 ageing time         300.00
 hello timer           0.02            tcn timer           0.00
 topology change timer      16.14            gc timer         291.96
 flags            TOPOLOGY_CHANGE TOPOLOGY_CHANGE_DETECTED 


ath0 (2)
 port id        8002            state             forwarding
 designated root    8000.0014a46c665e    path cost         100
 designated bridge    8000.0014a46c665e    message age timer       0.00
 designated port    8002            forward delay timer       0.00
 designated cost       0            hold timer           0.00
 flags</code></pre></div>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>