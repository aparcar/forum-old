<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Lantiq XWAY WAVE300</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 30 Mar 2018 and 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 4 of 6</div><nav><ul><li><a href="viewtopic.php%3Fid=45047&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=45047&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=45047&amp;p=3.html">3</a></li><li class="pagination-current"><span>4</span></li><li><a href="viewtopic.php%3Fid=45047&amp;p=5.html">5</a></li><li><a href="viewtopic.php%3Fid=45047&amp;p=6.html">6</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p364633">
				<div class="post-metadata">
					<div class="post-num">Post #76</div>
					<div class="post-author">cornelus2009</div>
					<div class="post-datetime">
						31 Aug 2017, 00:03					</div>
				</div>
				<div class="post-content content">
					<p>brrrrr, nop.</p><p>now i build again.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364637">
				<div class="post-metadata">
					<div class="post-num">Post #77</div>
					<div class="post-author">cornelus2009</div>
					<div class="post-datetime">
						31 Aug 2017, 00:30					</div>
				</div>
				<div class="post-content content">
					<p>stuck again<br />lnl error fixed</p><div class="codebox"><pre><code>.............................................
../../../wireless/shared/libmtlkwls.a ../../../tools/shared/linux/libmtlkc.a -Wl,--end-group -lpthread -lrt -lm -lnl 
mips-openwrt-linux-gcc: warning: environment variable &#039;STAGING_DIR&#039; not defined
mips-openwrt-linux-gcc: warning: environment variable &#039;STAGING_DIR&#039; not defined
/home/cornelus/source-master/WAVE300/driver/builds/ugw5.1-vrx288-nand/tools/shared/linux/libmtlkc.a(mtlknlink.o): In function `parse_nl_cb&#039;:
mtlknlink.c:(.text+0x48): undefined reference to `genlmsg_parse&#039;
/home/cornelus/source-master/WAVE300/driver/builds/ugw5.1-vrx288-nand/tools/shared/linux/libmtlkc.a(mtlknlink.o): In function `mtlk_nlink_create&#039;:
mtlknlink.c:(.text+0x13c): undefined reference to `genl_connect&#039;
mtlknlink.c:(.text+0x154): undefined reference to `genl_ctrl_resolve&#039;
collect2: error: ld returned 1 exit status
make[4]: *** [drvhlpr] Error 1
make[4]: Leaving directory `/home/cornelus/source-master/WAVE300/driver/builds/ugw5.1-vrx288-nand/tools/mttools/drvhlpr&#039;
make[3]: *** [install-recursive] Error 1
make[3]: Leaving directory `/home/cornelus/source-master/WAVE300/driver/builds/ugw5.1-vrx288-nand/tools/mttools&#039;
make[2]: *** [install-recursive] Error 1
make[2]: Leaving directory `/home/cornelus/source-master/WAVE300/driver/builds/ugw5.1-vrx288-nand/tools&#039;
make[1]: *** [install-recursive] Error 1
make[1]: Leaving directory `/home/cornelus/source-master/WAVE300/driver/builds/ugw5.1-vrx288-nand&#039;
make: *** [all] Error 2</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364639">
				<div class="post-metadata">
					<div class="post-num">Post #78</div>
					<div class="post-author">iliushin</div>
					<div class="post-datetime">
						31 Aug 2017, 00:44					</div>
				</div>
				<div class="post-content content">
					<p>Can you send me the whole folder, so I can try to compile it on my machine? It is possible that there is something in ENV not set right</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364645">
				<div class="post-metadata">
					<div class="post-num">Post #79</div>
					<div class="post-author">blackadder1000</div>
					<div class="post-datetime">
						31 Aug 2017, 03:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>@blackadder1000, have you used the original firmware files (.bin) for your TD-W8980 router? I was wondering if, in order to have this &quot;CHI magic&quot; coming, we need to upload the specific firmware for the chipset. In this case yours is PSB8224</p></blockquote></div><p>@Mandrake<br />I&#039;m using the original firmware files from the 8980 firmware dated 14/05/2015 (I believe the last one issued). Extracted the files using binwalk from /lib/firmware</p><p>Here&#039;s a listing of the files there (ignore the permissions):<br /></p><div class="codebox"><pre><code>rw-rw---- 1 root everybody  24000 2017-08-30 19:19 ProgModel_A_CB_38_RevA_wave300.bin
-rw-rw---- 1 root everybody  48000 2017-08-30 19:19 ProgModel_A_CB_wave300.bin
-rw-rw---- 1 root everybody  24000 2017-08-30 19:19 ProgModel_A_nCB_38_RevA.bin
-rw-rw---- 1 root everybody  24000 2017-08-30 19:19 ProgModel_A_nCB_38_RevA_wave300.bin
-rw-rw---- 1 root everybody  48000 2017-08-30 19:20 ProgModel_A_nCB_wave300.bin
-rw-rw---- 1 root everybody 190208 2017-08-30 19:19 ap_upper_wave300.bin
-rw-rw---- 1 root everybody  90496 2017-08-30 19:19 contr_lm.bin</code></pre></div><p>I renamed ap_upper_wave300.bin to ap_upper.bin. I also copied it as sta_upper.bin</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364665">
				<div class="post-metadata">
					<div class="post-num">Post #80</div>
					<div class="post-author">cornelus2009</div>
					<div class="post-datetime">
						31 Aug 2017, 10:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>iliushin wrote:</cite><blockquote><p>Can you send me the whole folder, so I can try to compile it on my machine? It is possible that there is something in ENV not set right</p></blockquote></div><p>here is folder</p><p><a href="https://www.dropbox.com/s/nfjxddgroo2tvnc/WAVE300.zip?dl=0">https://www.dropbox.com/s/nfjxddgroo2tv â€¦ 0.zip?dl=0</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364666">
				<div class="post-metadata">
					<div class="post-num">Post #81</div>
					<div class="post-author">apirak.pu</div>
					<div class="post-datetime">
						31 Aug 2017, 10:35					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,</p><p>I&#039;m trying to enable 5 GHz wireless on my TP-LINK 9980 (it use WAVE 300 too) for a while.<br />From this I read this topic, I don&#039;t sure if WAVE 300 5 GHz work on openWrt now or not ?</p><p>I&#039;ve download from Mandrake-Lee and vittorio88 &#039;s github.<br />and unrar it, I don&#039;t know how to install it. Can you guide me how to install it on openWrt ? what command to execute ?</p><br /><p>for my information<br />I&#039;ve use flash version 8970 and I can now bring up 2.4 GHz.</p><div class="codebox"><pre><code>root@OpenWrt:~# lspci
00:0e.0 Wireless controller: Lantiq Wave300 PSB8224 [Hyperion III] (rev 01)
01:00.0 PCI bridge: Lantiq MIPS SoC PCI Express Port (rev 01)
02:00.0 Network controller: Qualcomm Atheros AR9287 Wireless Network Adapter (PCI-Express) (rev 01)</code></pre></div><p>thanks.</p>											<p class="post-edited">(Last edited by <strong>apirak.pu</strong> on 31 Aug 2017, 10:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364668">
				<div class="post-metadata">
					<div class="post-num">Post #82</div>
					<div class="post-author">vittorio88</div>
					<div class="post-datetime">
						31 Aug 2017, 12:22					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>cornelus2009 wrote:</cite><blockquote><p>same error</p><br /><div class="codebox"><pre><code>LDFLAGS=&quot;-L${STAGING_DIR}/target-mips_24kc_musl/usr/lib/&quot;
LDFLAGS=&quot;-L${DEFAULT_TOOLCHAIN_PATH}/usr/lib/&quot;</code></pre></div></blockquote></div><br /><p>You are overwriting the LDFLAGS variable instead of adding to it.<br />In my environment, the first variable is correct, and you shouldn&#039;t point to the TOOLCHAIN path, yet the target-mips path for -L of LDFLAGS.</p><br /><p>Good luck!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364669">
				<div class="post-metadata">
					<div class="post-num">Post #83</div>
					<div class="post-author">vittorio88</div>
					<div class="post-datetime">
						31 Aug 2017, 12:30					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>apirak.pu wrote:</cite><blockquote><p>Hi all,</p><p>I&#039;m trying to enable 5 GHz wireless on my TP-LINK 9980 (it use WAVE 300 too) for a while.<br />From this I read this topic, I don&#039;t sure if WAVE 300 5 GHz work on openWrt now or not ?</p><p>I&#039;ve download from Mandrake-Lee and vittorio88 &#039;s github.<br />and unrar it, I don&#039;t know how to install it. Can you guide me how to install it on openWrt ? what command to execute ?</p><br /><p>for my information<br />I&#039;ve use flash version 8970 and I can now bring up 2.4 GHz.</p><div class="codebox"><pre><code>root@OpenWrt:~# lspci
00:0e.0 Wireless controller: Lantiq Wave300 PSB8224 [Hyperion III] (rev 01)
01:00.0 PCI bridge: Lantiq MIPS SoC PCI Express Port (rev 01)
02:00.0 Network controller: Qualcomm Atheros AR9287 Wireless Network Adapter (PCI-Express) (rev 01)</code></pre></div><p>thanks.</p></blockquote></div><br /><p>Nobody has gotten it to work yet, however it seems good progress is being made.<br />You need to download the OpenWRT SDK first.<br />You can then follow the instructions in INSTRUCTIONS.txt to compile the driver.</p><p>If you are not familiar with cross-compiling, then you should wait until someone gets the driver to work unless you intend to spend hundreds of hours on it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364671">
				<div class="post-metadata">
					<div class="post-num">Post #84</div>
					<div class="post-author">apirak.pu</div>
					<div class="post-datetime">
						31 Aug 2017, 12:42					</div>
				</div>
				<div class="post-content content">
					<p>thanks vittorio88,</p><p>I&#039;ll try follow your instruction, don&#039;t care what time it takes. <br />If I can help this chip work, there will be new things to do with this device a lot more.</p><p>I&#039;ll update you if I go any further.</p><p>fight on!!!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364672">
				<div class="post-metadata">
					<div class="post-num">Post #85</div>
					<div class="post-author">vittorio88</div>
					<div class="post-datetime">
						31 Aug 2017, 13:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>apirak.pu wrote:</cite><blockquote><p>thanks vittorio88,</p><p>I&#039;ll try follow your instruction, don&#039;t care what time it takes. <br />If I can help this chip work, there will be new things to do with this device a lot more.</p><p>I&#039;ll update you if I go any further.</p><p>fight on!!!</p></blockquote></div><br /><p><img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364791">
				<div class="post-metadata">
					<div class="post-num">Post #86</div>
					<div class="post-author">Mandrake</div>
					<div class="post-datetime">
						2 Sep 2017, 15:01					</div>
				</div>
				<div class="post-content content">
					<p>Hello everyone,</p><ul><li><p>I have merged all changes from Vittorio88 into the branch &quot;Dual-license&quot;</p></li><li><p>Also I have made some fixes and updated the instructions.txt in order to show a workaround for the &quot;-lnl&quot; issue. I will explain here at the end</p></li><li><p>Please all testers, download the sources from <a href="https://github.com/Mandrake-Lee/WAVE300/tree/Dual-license-BSD_GPL">https://github.com/Mandrake-Lee/WAVE300 â€¦ se-BSD_GPL</a>.</p></li><li><p>Our goal is to make everything self-explanatory but cross-compiling is not an out-of-the-box thing. You need to invest some time reading and learning</p></li><li><p>Also you can check the wiki <a href="https://github.com/Mandrake-Lee/WAVE300/wiki">https://github.com/Mandrake-Lee/WAVE300/wiki</a> and support it. I will try to do updates whenever it is significant</p></li></ul><p>Regarding the -lnl issue, bear in mind this only happens if MTTOOLS are to be built. Basically the original code was designed to use libnl package. For our purposes, libnl-tiny is good enough and this is also the default package in openwrt/LEDE. Therefore the code is searching for a library named &quot;libnl.so&quot; whereas we have a &quot;libnl-tiny.so&quot;.</p><p>If this is your case, just rename the file to &quot;libnl.so&quot; and you will have it. At least that worked for me <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Regards!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364980">
				<div class="post-metadata">
					<div class="post-num">Post #87</div>
					<div class="post-author">vittorio88</div>
					<div class="post-datetime">
						5 Sep 2017, 19:05					</div>
				</div>
				<div class="post-content content">
					<p>Hello everybody!</p><p>Thanks Mandrake for taking the time to bring in my code.<br />I advise everybody to work off of Mandrake&#039;s branch now.</p><p>I am still stuck at the driver not printing anything.</p><p>In order to further troubleshoot, I would be grateful if one (Mandrake or blackadder1000) of you shared your built kernel modules with me. (I have shared my contact info on this thread already)</p><p>I am working with the following specs:<br /></p><ul><li><p>Mandrake&#039;s latest sources on branch Dual-License-BSD_GPL</p></li><li><p>target: UGW5.1 for VRX288</p></li><li><p>package: libnl-tiny</p></li><li><p>distro: lede-sdk-17.01.2-lantiq-xrx200_gcc-5.4.0_musl-1.1.16.Linux-x86_64</p></li></ul><p>It doesn&#039;t have to match all the specs, but I believe VRX288 and lede 17.x.y are hard-requirements for the kernel module to load on my target.</p><p>Thanks,<br />Vittorio</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p365325">
				<div class="post-metadata">
					<div class="post-num">Post #88</div>
					<div class="post-author">vittorio88</div>
					<div class="post-datetime">
						13 Sep 2017, 19:30					</div>
				</div>
				<div class="post-content content">
					<p>GPL Dumps! We have fresh GPL Dumps! Get &#039;em while they&#039;re hot!</p><p><a href="https://www.downloads.netgear.com/files/GPL/D6100-V1.0.0.46_0.0.46-GPL.zip">https://www.downloads.netgear.com/files â€¦ 46-GPL.zip</a><br />Note: there is also a 1.0.0.50 version, however, it appears Netgear has pulled it because I get an invalid link error...</p><br /><p>In here I found:<br />D6100_V1.0.0.46_0.0.46_src_GPL/package/lantiq-wave300/src-3.4.1.0.22_Custom.00.09.71efed499d43</p><p>Before you get too excited, I checked, and it appears the driver source files have been omitted <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>There are, however, interesting release notes, and a bucket-load of firmware images. </p><p>I hope this can help, possibly those that are stuck &quot;waiting for CHI magic&quot;.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p365710">
				<div class="post-metadata">
					<div class="post-num">Post #89</div>
					<div class="post-author">wyatt_</div>
					<div class="post-datetime">
						22 Sep 2017, 18:33					</div>
				</div>
				<div class="post-content content">
					<p>Hello guys.<br />I&#039;ve got a question. Where I can find bin files for driver?</p><p>I was able to compile driver for my TD-W9980 and I&#039;d like to test it.</p><p>Cheers wyatt_</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p365711">
				<div class="post-metadata">
					<div class="post-num">Post #90</div>
					<div class="post-author">Mandrake</div>
					<div class="post-datetime">
						22 Sep 2017, 18:44					</div>
				</div>
				<div class="post-content content">
					<p>Hi Wyatt_,</p><p>I&#039;d suggest you get the ones in the post of Vittorio88, the bins with &quot;wave300&quot; in the name.</p><p>You have to dig a bit in the tarball but it&#039;s not complicated.</p><p>I&#039;d say <em>that firmware it&#039;s the best bet we can make today.</em></p><p>You will have to rename some files though.</p><p><a href="https://www.downloads.netgear.com/files/GPL/D6100-V1.0.0.46_0.0.46-GPL.zip">https://www.downloads.netgear.com/files â€¦ 46-GPL.zip</a></p><p>Mandrake</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p365713">
				<div class="post-metadata">
					<div class="post-num">Post #91</div>
					<div class="post-author">wyatt_</div>
					<div class="post-datetime">
						22 Sep 2017, 19:22					</div>
				</div>
				<div class="post-content content">
					<p>Thanks Mandrake</p><p>There are lot&#039;s of files. How do you know which files are required? I was following INSTRUCTIONS.txt and bin files have different than in netgear zip.</p><p>I&#039;m aware that you&#039;re still working on it.</p><p>wyatt_</p>											<p class="post-edited">(Last edited by <strong>wyatt_</strong> on 22 Sep 2017, 19:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p365714">
				<div class="post-metadata">
					<div class="post-num">Post #92</div>
					<div class="post-author">wyatt_</div>
					<div class="post-datetime">
						22 Sep 2017, 20:19					</div>
				</div>
				<div class="post-content content">
					<p>Hi again.</p><p>If someone is interested, below can find my dmesg:<br /></p><div class="codebox"><pre><code>[ 3560.592202] mtlkroot: module license &#039;Proprietary&#039; taints kernel.
[ 3560.596982] Disabling lock debugging due to kernel taint
[ 3560.607135] [0003260840] mtlk0(mtlk_cdev_init:316): Max nodex set to 1048575
 
 
[ 3647.241527] mtlk: unknown parameter &#039;cdebug&#039; ignored
[ 3647.245735] [0003347480] mtlk2(mtlk_dfg_init:681): Starting MTLK
[ 3647.251153] [0003347488] mtlk0(__mtlk_print_endianess:3867): The system is Big endian (0xbeadfeed, 0xedfeadbe)
[ 3647.261123] [0003347496] mtlk1(mtlk_df_proc_node_create:125): Proc node root/ created
[ 3647.268964] [0003347504] mtlk1(mtlk_df_proc_node_create:127): Proc node root/mtlk created
[ 3647.277139] [0003347512] mtlk1(mtlk_df_proc_node_add_seq_entry:438): Proc entry mtlk/version created
[ 3647.286275] [0003347520] mtlk1(mtlk_df_proc_node_add_seq_entry:438): Proc entry mtlk/topology created
[ 3647.295596] [0003347532] mtlk0(mtlk_fast_mem_print_info:105): Using normal memory for hot context
[ 3647.304403] PCI: Enabling device 0000:00:0e.0 (0000 -&gt; 0002)
[ 3647.310067] [0003347544] mtlk2(_mtlk_bus_drv_map_resource:247): BAR0=0x18800000 Len=0x1000 VA=0xb8800000
[ 3647.319522] [0003347556] mtlk2(_mtlk_bus_drv_map_resource:247): BAR1=0x18000000 Len=0x800000 VA=0xb8000000
[ 3647.329260] [0003347564] mtlk0(_mtlk_df_user_alloc_devname:6511): NDEV Name pattern: wlan%d
[ 3647.337610] [0003347572] mtlk1(mtlk_df_proc_node_create:127): Proc node mtlk/wlan1 created
[ 3647.345823] [0003347580] mtlk1(mtlk_df_proc_node_create:127): Proc node wlan1/Debug created
[ 3647.354179] [0003347588] mtlk1(mtlk_df_proc_node_add_seq_entry:438): Proc entry wlan1/hw_limits created
[ 3647.363573] [0003347600] mtlk1(mtlk_df_proc_node_add_seq_entry:438): Proc entry wlan1/reg_limits created
[ 3647.373062] [0003347608] mtlk1(mtlk_df_proc_node_add_seq_entry:438): Proc entry wlan1/antenna_gain created
[ 3647.382734] [0003347620] mtlk1(_mtlk_df_proc_node_add_entry:229): Proc entry wlan1/do_debug_assert created
[ 3647.392382] [0003347628] mtlk1(_mtlk_df_proc_node_add_entry:229): Proc entry wlan1/lm created
[ 3647.400913] [0003347636] mtlk1(_mtlk_df_proc_node_add_entry:229): Proc entry wlan1/um created
[ 3647.409443] [0003347644] mtlk1(_mtlk_df_proc_node_add_entry:229): Proc entry wlan1/shram created
[ 3647.418243] [0003347652] mtlk1(mtlk_df_proc_node_add_seq_entry:438): Proc entry Debug/General created
[ 3647.427470] [0003347664] mtlk1(mtlk_df_proc_node_add_seq_entry:438): Proc entry Debug/MACStats created
[ 3647.436774] [0003347672] mtlk1(mtlk_df_proc_node_add_seq_entry:438): Proc entry wlan1/igmp created
[ 3647.445738] [0003347680] mtlk1(_mtlk_df_proc_node_add_entry:229): Proc entry Debug/ResetStats created
[ 3647.454964] [0003347692] mtlk1(mtlk_df_proc_node_add_seq_entry:438): Proc entry wlan1/aocs_history created
[ 3647.464624] [0003347700] mtlk1(mtlk_df_proc_node_add_seq_entry:438): Proc entry wlan1/aocs_table created
[ 3647.474112] [0003347708] mtlk1(mtlk_df_proc_node_add_seq_entry:438): Proc entry wlan1/aocs_channels created
[ 3647.483863] [0003347720] mtlk1(mtlk_df_proc_node_add_seq_entry:438): Proc entry wlan1/aocs_penalties created
[ 3647.493697] [0003347728] mtlk1(_mtlk_df_proc_node_add_entry:229): Proc entry Debug/aocs_cl created
[ 3647.502661] [0003347736] mtlk1(mtlk_df_proc_node_add_seq_entry:438): Proc entry Debug/L2NAT created
[ 3647.511714] [0003347748] mtlk1(_mtlk_df_proc_node_add_entry:229): Proc entry Debug/L2NAT_ClearTable created
[ 3647.521463] [0003347756] mtlk1(mtlk_df_proc_node_add_seq_entry:438): Proc entry Debug/ReorderingStats created
[ 3647.531382] [0003347768] mtlk1(mtlk_df_proc_node_add_seq_entry:438): Proc entry wlan1/EECaps created
[ 3647.540523] [0003347776] mtlk1(mtlk_df_proc_node_add_seq_entry:438): Proc entry Debug/SendQueue created
[ 3647.549923] [0003347784] mtlk1(mtlk_df_proc_node_add_seq_entry:438): Proc entry Debug/serializer_dump created
[ 3647.559853] [0003347796] mtlk1(mtlk_print_drv_info:8042): *********************************************************
[ 3647.570270] [0003347804] mtlk1(mtlk_print_drv_info:8043): * Driver Compilation Details:
[ 3647.578272] [0003347812] mtlk1(mtlk_print_drv_info:8044): *********************************************************
[ 3647.588749] [0003347824] mtlk1(mtlk_print_drv_info:8046): * CONFIG=PLATFORM_UGW51_VRX288_NAND COMPONENTS LIN_DRV BUS_PCI_PCIE LINDRV_HW LINDRV_HW_PCIE LINDRV_HW_PCIG3 RF_MANAGEMENT_MTLK HOSTAP_06 DEBUG TXMM_HISTORY_LENGTH=3 NO_FW_RESET_ON_STOP RT_LOGGER_FUNCTIONS MAX_DLEVEL=2 USE_GENL_DEF USE_GENL DEVELOPMENT_PLATFORM ENVIRONMENT_NAME=&quot;ugw5.1-vrx288-nand&quot; HOST_TYPE=&quot;mips-linux&quot;
[ 3647.622315] [0003347856] mtlk1(mtlk_print_drv_info:8046): * CFLAGS=
[ 3647.628579] [0003347864] mtlk1(mtlk_print_drv_info:8046): * MTLK_KERNEL_CFLAGS=
[ 3647.635896] [0003347872] mtlk1(mtlk_print_drv_info:8046): * KERNELDIR=/home/dawid/source/build_dir/target-mips_24kc_musl-1.1.16/linux-lantiq_xrx200/linux-4.4.87
[ 3647.650265] [0003347884] mtlk1(mtlk_print_drv_info:8046): * CROSS_COMPILE=/home/dawid/WAVE300/driver/builds/ugw5.1-vrx288-nand/../../support/mtlkfront.sh /home/dawid/source/staging_dir/toolchain-mips_24kc_gcc-5.4.0_musl-1.1.16/bin/mips-openwrt-linux-
[ 3647.672446] [0003347908] mtlk1(mtlk_print_drv_info:8046): * HOSTNAME=
[ 3647.678890] [0003347916] mtlk1(mtlk_print_drv_info:8049): *********************************************************
[ 3647.689349] [0003347924] mtlk0(mtlk_core_pdb_fast_handles_open:33): Open Hot-path parameters
[ 3647.697891] [0003347932] mtlk1(mtlk_qos_set_map:152): Set 802.11 TID-to-AC mapping
[ 3647.705394] [0003347940] mtlk2(_mtlk_20_40_set_limit_to_20:1207): Limit to 20 flag is set to 0
[ 3647.713980] [0003347948] mtlk2(_mtlk_core_ability_control_callback:12248): called
[ 3647.721471] [0003347956] mtlk2(_mtlk_core_ability_control_callback:12248): called
[ 3647.729098] [0003347964] mtlk2(_mtlk_bus_drv_init:336): mtlk IRQ 0x1e
[ 3647.786496] [0003348020] mtlk2(_mtlk_mmb_load_firmware:1763): Loading &#039;sta_upper.bin&#039; of 190208 bytes
[ 3647.820358] [0003348056] mtlk2(_mtlk_mmb_load_firmware:1792): Loading &#039;contr_lm.bin&#039; of 90496 bytes
[ 3647.894797] [0003348132] mtlk3(_mtlk_mmb_wait_chi_magic:2099): Wait for CHI Magic failed (wait_res=0 value=0x23502350)
[ 3647.904793] [0003348140] mtlk3(MTLK_STEPS_ERROR_SD:54): STARTCTRL: hw_mmb_card:HW_WAIT_CHI_MAGIC_START FAILED! step (152)
[ 3647.915304] [0003348152] mtlk3(MTLK_STEPS_ERROR_S:48): STARTCTRL: hw_mmb_card START FAILED! Initiating rollback...
[ 3647.925756] [0003348160] mtlk3(MTLK_STEPS_ERROR_SD:54): STARTCTRL: bus_drv:BUS_MMB_START_CARD_INIT FAILED! step (152)
[ 3647.936432] [0003348172] mtlk3(MTLK_STEPS_ERROR_S:48): STARTCTRL: bus_drv INIT FAILED! Initiating rollback...
[ 3647.946454] [0003348180] mtlk0(mtlk_txmm_cleanup:917): Usage Peak=0 (Total=2)
[ 3647.953564] [0003348188] mtlk0(mtlk_txmm_cleanup:917): Usage Peak=0 (Total=32)
[ 3647.960865] CPU 0 Unable to handle kernel paging request at virtual address 00000044, epc == 81495a34, ra == 81495a14
[ 3647.971389] Oops[#1]:
[ 3647.973605] CPU: 0 PID: 15205 Comm: insmod Tainted: P                4.4.61 #0
[ 3647.980824] task: 81c14f18 ti: 82f46000 task.ti: 82f46000
[ 3647.986214] $ 0   : 00000000 00000001 00000002 82452400
[ 3647.991435] $ 4   : 8245243c 8260619c 00000000 00000017
[ 3647.996657] $ 8   : 00000000 8245243c ad922b40 4b955af7
[ 3648.001880] $12   : 00070010 00000001 00000000 ffffffff
[ 3648.007102] $16   : 82d6de40 02080020 0000001c 00000001
[ 3648.012324] $20   : 00000024 814a0000 82606180 00000005
[ 3648.017547] $24   : 00000000 00000100                  
[ 3648.022769] $28   : 82f46000 82f47aa0 82452414 81495a14
[ 3648.027993] Hi    : 0000005f
[ 3648.030865] Lo    : 59999b17
[ 3648.033748] epc   : 81495a34 0x81495a34 [mtlkroot@81490000+0xd4a0]
[ 3648.039925] ra    : 81495a14 0x81495a14 [mtlkroot@81490000+0xd4a0]
[ 3648.046096] Status: 1100fc03 KERNEL EXL IE
[ 3648.050276] Cause : 00800008 (ExcCode 02)
[ 3648.054278] BadVA : 00000044
[ 3648.057152] PrId  : 00019556 (MIPS 34Kc)
[ 3648.061067] Modules linked in: mtlk(P+) mtlkroot(P) ltq_ptm_vr9 ath9k ath9k_common iptable_nat ath9k_hw ath wireguard pppoe nf_nat_ipv4 nf_conntrack_ipv6 nf_conntrack_ipv4 mac80211 ipt_REJECT ipt_MASQUERADE cfg80211 xt_time xt_tcpudp xt_state xt_nat xt_multiport xt_mark xt_mac xt_limit xt_hashlimit xt_conntrack xt_comment xt_TCPMSS xt_REDIRECT xt_LOG xt_CT pppox ppp_async owl_loader nf_reject_ipv4 nf_nat_redirect nf_nat_masquerade_ipv4 nf_nat nf_log_ipv4 nf_defrag_ipv6 nf_defrag_ipv4 nf_conntrack_rtcache nf_conntrack ltq_deu_vr9 iptable_mangle iptable_filter ip_tables crc_ccitt compat drv_dsl_cpe_api ledtrig_usbport drv_mei_cpe ip6t_REJECT nf_reject_ipv6 nf_log_ipv6 nf_log_common ip6table_mangle ip6table_filter ip6_tables x_tables pppoatm ppp_generic slhc ip6_udp_tunnel udp_tunnel br2684 atm drv_ifxos usb_storage uhci_hcd ohci_platform ohci_hcd sd_mod scsi_mod f2fs ext4 jbd2 mbcache crc32c_generic dwc2 gpio_button_hotplug cryptomgr aead crypto_null
[ 3648.145242] Process insmod (pid: 15205, threadinfo=82f46000, task=81c14f18, tls=77dd1d48)
[ 3648.153416] Stack : 80cc0664 80440000 00000003 81031ca0 00000000 00000001 82606180 8149c5a0
[ 3648.153416]    81cbb9a8 0000001c 00000000 00000000 80cc0664 b8800000 804d0000 814942a0
[ 3648.153416]    838ac800 80cc0000 80cc0664 00000002 00000005 00070010 804b8060 81cbb980
[ 3648.153416]    fffffff9 80cc0000 80cc0000 838ac800 80cc0000 8149437c 8308e14d 00300000
[ 3648.153416]    82fe1400 fffffff9 80cc0000 81c64000 fffffff9 80cc0000 80cc0000 838ac800
[ 3648.153416]    ...
[ 3648.188928] Call Trace:[&lt;814942a0&gt;] 0x814942a0 [mtlkroot@81490000+0xd4a0]
[ 3648.195746] [&lt;8149437c&gt;] 0x8149437c [mtlkroot@81490000+0xd4a0]
[ 3648.201582] [&lt;80c57958&gt;] 0x80c57958 [mtlk@80c00000+0xc6ea0]
[ 3648.207150] [&lt;80c82294&gt;] 0x80c82294 [mtlk@80c00000+0xc6ea0]
[ 3648.212711] [&lt;8176cccc&gt;] 0x8176cccc [mtlk@80c00000+0xc6ea0]
[ 3648.218313] [&lt;801f4b24&gt;] 0x801f4b24
[ 3648.221746] [&lt;8021d7a4&gt;] 0x8021d7a4
[ 3648.225246] [&lt;8021dfc8&gt;] 0x8021dfc8
[ 3648.228709] [&lt;800a24ec&gt;] 0x800a24ec
[ 3648.232210] [&lt;8021e240&gt;] 0x8021e240
[ 3648.235674] [&lt;8021e1b4&gt;] 0x8021e1b4
[ 3648.239154] [&lt;8021c01c&gt;] 0x8021c01c
[ 3648.242642] [&lt;803d23f4&gt;] 0x803d23f4
[ 3648.246136] [&lt;8021d49c&gt;] 0x8021d49c
[ 3648.249604] [&lt;80c34d64&gt;] 0x80c34d64 [mtlk@80c00000+0xc6ea0]
[ 3648.255184] [&lt;8021e884&gt;] 0x8021e884
[ 3648.258658] [&lt;8176cfc0&gt;] 0x8176cfc0 [mtlk@80c00000+0xc6ea0]
[ 3648.264233] [&lt;801bbb64&gt;] 0x801bbb64
[ 3648.267714] [&lt;8176ce30&gt;] 0x8176ce30 [mtlk@80c00000+0xc6ea0]
[ 3648.273274] [&lt;8000c88c&gt;] 0x8000c88c
[ 3648.276762] [&lt;8003e8f0&gt;] 0x8003e8f0
[ 3648.280273] [&lt;800779d8&gt;] 0x800779d8
[ 3648.283725] [&lt;800b9154&gt;] 0x800b9154
[ 3648.287213] [&lt;80079024&gt;] 0x80079024
[ 3648.290689] [&lt;80077000&gt;] 0x80077000
[ 3648.294176] [&lt;8002723c&gt;] 0x8002723c
[ 3648.297647] [&lt;800794ec&gt;] 0x800794ec
[ 3648.301137] [&lt;8000482c&gt;] 0x8000482c
[ 3648.304611] [&lt;80006c58&gt;] 0x80006c58
[ 3648.308091]
[ 3648.309565]
[ 3648.309565] Code: 8fa2004c  24e7ffff  00e23821 &lt;8c020044&gt; 00e2102b  14400013  3c03804d  3c10814a  9202c680
[ 3648.319554] ---[ end trace b81ef30ce6e4079b ]---</code></pre></div><p>For me it doesn&#039;t speak to much.</p><p>wyatt_</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p365722">
				<div class="post-metadata">
					<div class="post-num">Post #93</div>
					<div class="post-author">lpm11</div>
					<div class="post-datetime">
						22 Sep 2017, 23:08					</div>
				</div>
				<div class="post-content content">
					<p>This new driver source is useless <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>1) <br />Only usable sources are from 3.2 branch, from <a href="https://github.com/Mandrake-Lee/WAVE300,">https://github.com/Mandrake-Lee/WAVE300,</a> even GPLed 3.1 is useless (missing sources for RF). And radio fw should match to this version - so you should try firmware from 3.2.<br />I think the newest you can find is TD-W8980_V1_131012.zip , please extract them with 7zip or download from here<br /><a href="https://ufile.io/yha8i">https://ufile.io/yha8i</a></p><p>You should modprobe mtlk driver with parameter ap=1 - this is necessary to set an access point!</p><p>This should be sufficient to boot radio chip (fw sends CHI Magic packet to driver and unusable mtlk0 interface appears).</p><p>Next stages:<br />2) you should copy 4 ProgModel files, to be able to do scanning (it is necessary to bring interface up, as mtlk driver verifies for possible bandwidth 40/20 MHz)<br />3) verify with ifconfig mtlk0 up - it will take start scanning and finally brings interface up (you will see a new wireless network)<br />...<br />4) For WPA, an old version for hostapd is needed (1.1 works, I don&#039;t remeber if 2.1 too). wpad from LEDE will not work - mtlk driver for hostapd conflicts with LEDE patches, and after compiling it just doesn&#039;t work.<br />I can find a binary blob, customized to work with OpenWRT AA (in both AP and sta mode). Atheros/Qualcomm driver should use standard wpad from LEDE.<br />5) I have the driver for OpenWRT to work with mtlk driver, it needs LuCI patches and library patching to get statistics (IOCTL) about connected clients. It should work with LEDE</p>											<p class="post-edited">(Last edited by <strong>lpm11</strong> on 22 Sep 2017, 23:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p365752">
				<div class="post-metadata">
					<div class="post-num">Post #94</div>
					<div class="post-author">Mandrake</div>
					<div class="post-datetime">
						23 Sep 2017, 09:50					</div>
				</div>
				<div class="post-content content">
					<p>Wow Lpm11!</p><p>This seems like the last piece of the jigsaw in order to bring up the driver. Greatly appreciated.</p><p>Gents (Vittorio, Wyatt_, Apirak, Blackadder), if you can confirm points 1 to 3, I will update the sources with these instructions and the link with the only useable firmware files.</p><p>Unfortunately, my platform utilizes PCIe and the lantiq driver is broken. I need first to repair that before testing anything.</p><p>@Lpm11, is there a kind of checking between the loaded firmware and rflib? If so, it could be removed from the sources and be more flexible.</p><p>Regarding point 4; it would be great if you could share what you made and we will figure out how to overcome the wpa issue.</p><p>Little by little guys,<br />Mandrake</p><div class="quotebox"><cite>lpm11 wrote:</cite><blockquote><p>This new driver source is useless <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>1) <br />Only usable sources are from 3.2 branch, from <a href="https://github.com/Mandrake-Lee/WAVE300,">https://github.com/Mandrake-Lee/WAVE300,</a> even GPLed 3.1 is useless (missing sources for RF). And radio fw should match to this version - so you should try firmware from 3.2.<br />I think the newest you can find is TD-W8980_V1_131012.zip , please extract them with 7zip or download from here<br /><a href="https://ufile.io/yha8i">https://ufile.io/yha8i</a></p><p>You should modprobe mtlk driver with parameter ap=1 - this is necessary to set an access point!</p><p>This should be sufficient to boot radio chip (fw sends CHI Magic packet to driver and unusable mtlk0 interface appears).</p><p>Next stages:<br />2) you should copy 4 ProgModel files, to be able to do scanning (it is necessary to bring interface up, as mtlk driver verifies for possible bandwidth 40/20 MHz)<br />3) verify with ifconfig mtlk0 up - it will take start scanning and finally brings interface up (you will see a new wireless network)<br />...<br />4) For WPA, an old version for hostapd is needed (1.1 works, I don&#039;t remeber if 2.1 too). wpad from LEDE will not work - mtlk driver for hostapd conflicts with LEDE patches, and after compiling it just doesn&#039;t work.<br />I can find a binary blob, customized to work with OpenWRT AA (in both AP and sta mode). Atheros/Qualcomm driver should use standard wpad from LEDE.<br />5) I have the driver for OpenWRT to work with mtlk driver, it needs LuCI patches and library patching to get statistics (IOCTL) about connected clients. It should work with LEDE</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p365764">
				<div class="post-metadata">
					<div class="post-num">Post #95</div>
					<div class="post-author">vittorio88</div>
					<div class="post-datetime">
						23 Sep 2017, 15:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>lpm11 wrote:</cite><blockquote><p>This new driver source is useless <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>1) <br />Only usable sources are from 3.2 branch, from <a href="https://github.com/Mandrake-Lee/WAVE300,">https://github.com/Mandrake-Lee/WAVE300,</a> even GPLed 3.1 is useless (missing sources for RF). And radio fw should match to this version - so you should try firmware from 3.2.<br />I think the newest you can find is TD-W8980_V1_131012.zip , please extract them with 7zip or download from here<br /><a href="https://ufile.io/yha8i">https://ufile.io/yha8i</a></p><p>You should modprobe mtlk driver with parameter ap=1 - this is necessary to set an access point!</p><p>This should be sufficient to boot radio chip (fw sends CHI Magic packet to driver and unusable mtlk0 interface appears).</p></blockquote></div><br /><p>I can confirm the firmware shared by lpm11 works.</p><div class="codebox"><pre><code>root@vitto-rtr1:~/badder_mtlk_v3# insmod mtlkroot.ko 
[  546.688696] [0000246644] mtlk0(mtlk_cdev_init:316): Max nodex set to 1048575
root@vitto-rtr1:~/badder_mtlk_v3# insmod mtlk.ko 
[  550.782194] [0000250736] mtlk0(__mtlk_print_endianess:3869): The system is Big endian (0xbeadfeed, 0xedfeadbe)
[  550.791070] [0000250744] mtlk0(mtlk_fast_mem_print_info:105): Using normal memory for hot context
[  550.799776] PCI: Enabling device 0000:00:0e.0 (0000 -&gt; 0002)
[  550.805569] [0000250760] mtlk0(_mtlk_df_user_alloc_devname:6511): NDEV Name pattern: wlan%d
[  550.814109] [0000250768] mtlk0(mtlk_core_pdb_fast_handles_open:33): Open Hot-path parameters
[  550.924063] [0000250880] mtlk3(_mtlk_mmb_wait_chi_magic:2086): Value output from CHI VA 0xbeadfeed)
[  550.957647] [0000250912] mtlk0(_mtlk_core_start:9001): CID-0000: Driver version: 3.2.1.1.48..PciG3.PcieG3.Debug
[  550.957647] MAC/PHY versions:
[  550.957647] sta_upper.bin: @@@ VERSION INFO @@@ version number: FW_3.2.1_r5437 MIPS:  Upper CPU(TMC AGG STA) interface: PCI  phy type: real phy on Mar 28 2012 at 11:00:19@@@ END @@@
[  550.957647] contr_lm.bin: @@@ VERSION INFO @@@ version number: FW_3.2.1_r5437 MIPS:  Lower MAC  interface: --  phy type: real phy on Mar 28 2012 at 10:59:46@@@ END @@@
[  550.957647] 
[  552.099480] [0000252052] mtlk0(mtlk_eeprom_check_ee_data:2094): Options mask is 0x00
[  552.107045] [0000252060] mtlk4(load_default_hw_table:1768): No HW limits is available for this platform (0x1a30:0x0700, type 0x38 rev 0x42)
[  552.121541] CPU 1 Unable to handle kernel paging request at virtual address 00000000, epc == 8614b6f4, ra == 8614b6e4
[  552.130790] Oops[#1]:
[  552.132995] CPU: 1 PID: 1542 Comm: insmod Tainted: P                4.4.79 #0
[  552.140119] task: 878c9038 ti: 86ad6000 task.ti: 86ad6000
[  552.145511] $ 0   : 00000000 00000001 00000000 00098600
[  552.150721] $ 4   : 86bdcd04 38010000 86ed1326 0000001e
[  552.155949] $ 8   : 00000000 86ad7aba 00000010 86ef0a80
[  552.161168] $12   : 000000fc 000000fc 00000000 00000000
[  552.166388] $16   : 86ad7ab4 86bdcd04 861f0000 861d1114
[  552.171611] $20   : 861d3e90 861f0000 861d0000 861d0000
[  552.176837] $24   : 00000010 00000000                  
[  552.182058] $28   : 86ad6000 86ad7a68 861d0000 8614b6e4
[  552.187278] Hi    : 70e3b671
[  552.190165] Lo    : b5d28736
[  552.194003] epc   : 8614b6f4 mtlk_df_ui_set_mac_addr+0x58/0x84 [mtlk]
[  552.200483] ra    : 8614b6e4 mtlk_df_ui_set_mac_addr+0x48/0x84 [mtlk]
[  552.205918] Status: 1100c303 KERNEL EXL IE 
[  552.210090] Cause : 0080000c (ExcCode 03)
[  552.214100] BadVA : 00000000
[  552.216977] PrId  : 00019556 (MIPS 34Kc)
[  552.220882] Modules linked in: mtlk(P+) mtlkroot(P) ltq_ptm_vr9 pppoe nf_conntrack_ipv6 iptable_nat ipt_REJECT ipt_MASQUERADE xt_time xt_tcpudp xt_state xt_nat xt_multiport xt_mark xt_mac xt_limit xt_]
[  552.285739] Process insmod (pid: 1542, threadinfo=86ad6000, task=878c9038, tls=77a39d48)
[  552.293822] Stack : 861f0000 861d1114 861d3e90 861f0000 861d0000 86951804 868c6a00 861290fc
          861dd728 00000006 00000024 861cd304 861d11a0 861d6eec 00000000 000000c3
          861d11a0 861d0000 86ecf798 00098600 00000000 00000000 00000000 00000000
          00000000 00000000 868c6a00 861dd728 00000000 861f0000 00000000 861ddb24
          861d0000 861d0000 861f0000 86155b38 86ad7b34 86154a6c 86951000 868c6a00
          ...
[  552.329330] Call Trace:
[  552.332786] [&lt;8614b6f4&gt;] mtlk_df_ui_set_mac_addr+0x58/0x84 [mtlk]
[  552.339772] [&lt;861290fc&gt;] mtlk_core_get_is_ht_cfg+0x2380/0x672c [mtlk]
[  552.345745] 
[  552.346242] 
Code: 8c420004  9a030003  8c420204 &lt;a8430000&gt; b8430003  92030004  a0430004  92030005  a0430005 
[  552.356255] ---[ end trace 0af25bcb6ac2793f ]---
[  552.364070] Fatal exception: panic in 5 seconds</code></pre></div><br /><p>It panics shortly later. I have yet to determine why (code porting incomplete or binary mismatch).<br />I am currently using drivers built for me by blackadder1000 for OpenWRT on LEDE (???) because the modules I build do not print or do anything even though they appear to insmod properly.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p365818">
				<div class="post-metadata">
					<div class="post-num">Post #96</div>
					<div class="post-author">wyatt_</div>
					<div class="post-datetime">
						24 Sep 2017, 10:54					</div>
				</div>
				<div class="post-content content">
					<p>Hello</p><p>The same situation here.</p><div class="codebox"><pre><code>[58956.451820] [0058658312] mtlk0(mtlk_fast_mem_print_info:105): Using normal memory for hot context
[58956.460541] PCI: Enabling device 0000:00:0e.0 (0000 -&gt; 0002)
[58956.466251] [0058658324] mtlk0(_mtlk_df_user_alloc_devname:6511): NDEV Name pattern: wlan%d
[58956.474764] [0058658332] mtlk0(mtlk_core_pdb_fast_handles_open:33): Open Hot-path parameters
[58956.483072] [0058658340] mtlk4(_mtlk_core_get_max_stas_supported_by_fw:3227): Cannot get MAX STAs supported by FW. Forcing default
[58956.672810] [0058658532] mtlk0(_mtlk_core_start:9001): CID-0000: Driver version: 3.2.1.1.48..PciG3.PcieG3.Debug
[58956.672810] MAC/PHY versions:
[58956.672810] ap_upper.bin: @@@ VERSION INFO @@@ version number: FW_3.2.1_r5437 MIPS:  Upper CPU(TMC AGG AP) interface: PCI  phy type: real phy on Mar 28 2012 at 11:00:01@@@ END @@@
[58956.672810] contr_lm.bin: @@@ VERSION INFO @@@ version number: FW_3.2.1_r5437 MIPS:  Lower MAC  interface: --  phy type: real phy on Mar 28 2012 at 10:59:46@@@ END @@@
[58956.672810] 
[58957.812633] [0058659672] mtlk0(mtlk_eeprom_check_ee_data:2094): Options mask is 0x00
[58957.819549] [0058659680] mtlk4(load_default_hw_table:1768): No HW limits is available for this platform (0x1a30:0x0700, type 0x38 rev 0x41)
[58957.832450] CPU 0 Unable to handle kernel paging request at virtual address 00000000, epc == 81b46770, ra == 81b46760
[58957.842286] Oops[#1]:
[58957.844434] CPU: 0 PID: 2293 Comm: insmod Tainted: P                4.4.61 #0
[58957.851566] task: 82615420 ti: 82322000 task.ti: 82322000
[58957.856956] $ 0   : 00000000 80610000 00000000 00098600
[58957.862178] $ 4   : 82085684 38010000 00000000 82354120
[58957.867400] $ 8   : 00000000 82323b0a 00000010 00002710
[58957.872622] $12   : 00000000 00000000 00000000 0007ca34
[58957.877845] $16   : 82323b04 82085684 81bc0000 00000000
[58957.883067] $20   : 81bc0000 82fca200 81917200 b8800000
[58957.888290] $24   : 00000010 ea01dd17                  
[58957.893512] $28   : 82322000 82323ac0 804d0000 81b46760
[58957.898735] Hi    : 70e3b671
[58957.901607] Lo    : b5d28736
[58957.904491] epc   : 81b46770 0x81b46770 [mtlk@81b00000+0xc6ea0]
[58957.910406] ra    : 81b46760 0x81b46760 [mtlk@81b00000+0xc6ea0]
[58957.916317] Status: 1100fc03    KERNEL EXL IE 
[58957.920497] Cause : 0080000c (ExcCode 03)
[58957.924498] BadVA : 00000000
[58957.927373] PrId  : 00019556 (MIPS 34Kc)
[58957.931287] Modules linked in: mtlk(P+) mtlkroot(P) ltq_ptm_vr9 ath9k ath9k_common iptable_nat ath9k_hw ath wireguard pppoe nf_nat_ipv4 nf_conntrack_ipv6 nf_conntrack_ipv4 mac80211 ipt_REJECT ipt_MASQUERADE cfg80211 xt_time xt_tcpudp xt_state xt_nat xt_multiport xt_mark xt_mac xt_limit xt_hashlimit xt_conntrack xt_comment xt_TCPMSS xt_REDIRECT xt_LOG xt_CT pppox ppp_async owl_loader nf_reject_ipv4 nf_nat_redirect nf_nat_masquerade_ipv4 nf_nat nf_log_ipv4 nf_defrag_ipv6 nf_defrag_ipv4 nf_conntrack_rtcache nf_conntrack ltq_deu_vr9 iptable_mangle iptable_filter ip_tables crc_ccitt compat drv_dsl_cpe_api ledtrig_usbport drv_mei_cpe ip6t_REJECT nf_reject_ipv6 nf_log_ipv6 nf_log_common ip6table_mangle ip6table_filter ip6_tables x_tables pppoatm ppp_generic slhc ip6_udp_tunnel udp_tunnel br2684 atm drv_ifxos usb_storage uhci_hcd ohci_platform ohci_hcd sd_mod scsi_mod f2fs ext4 jbd2 mbcache crc32c_generic dwc2 gpio_button_hotplug cryptomgr aead crypto_null
[58958.015462] Process insmod (pid: 2293, threadinfo=82322000, task=82615420, tls=77bb7d48)
[58958.023549] Stack : 81bc0000 00000000 81bc0000 81911804 81911804 81911804 82fca200 81b26414
[58958.023549]       81917690 82034e6c 81910000 8203c800 81bb7558 00000000 81bc5c10 00000002
[58958.023549]       00000012 00098600 0000010c 00000000 00000000 00000000 00000000 00000000
[58958.023549]       82fca200 00000000 81bc0000 81bc0000 00000000 81b4f3f4 81b81fc8 82fca200
[58958.023549]       819103b0 8191026c 8191026c 81b4ec18 82085804 00000000 82085804 82fca200
[58958.023549]       ...
[58958.059061] Call Trace:[&lt;81b26414&gt;] 0x81b26414 [mtlk@81b00000+0xc6ea0]
[58958.065599] [&lt;82034e6c&gt;] 0x82034e6c [mtlkroot@82030000+0xd4a0]
[58958.071440] [&lt;81b4f3f4&gt;] 0x81b4f3f4 [mtlk@81b00000+0xc6ea0]
[58958.077001] [&lt;81b81fc8&gt;] 0x81b81fc8 [mtlk@81b00000+0xc6ea0]
[58958.082578] [&lt;81b4ec18&gt;] 0x81b4ec18 [mtlk@81b00000+0xc6ea0]
[58958.088166] [&lt;8262cbd8&gt;] 0x8262cbd8 [mtlk@81b00000+0xc6ea0]
[58958.093756] [&lt;801f4b24&gt;] 0x801f4b24
[58958.097189] [&lt;8021d7a4&gt;] 0x8021d7a4
[58958.100689] [&lt;8021dfc8&gt;] 0x8021dfc8
[58958.104152] [&lt;800a24ec&gt;] 0x800a24ec
[58958.107653] [&lt;8021e240&gt;] 0x8021e240
[58958.111117] [&lt;8021e1b4&gt;] 0x8021e1b4
[58958.114597] [&lt;8021c01c&gt;] 0x8021c01c
[58958.118085] [&lt;803d23f4&gt;] 0x803d23f4
[58958.121579] [&lt;8021d49c&gt;] 0x8021d49c
[58958.125047] [&lt;81b34d64&gt;] 0x81b34d64 [mtlk@81b00000+0xc6ea0]
[58958.130627] [&lt;8021e884&gt;] 0x8021e884
[58958.134101] [&lt;8262cfc0&gt;] 0x8262cfc0 [mtlk@81b00000+0xc6ea0]
[58958.139677] [&lt;801bbb64&gt;] 0x801bbb64
[58958.143158] [&lt;8262ce30&gt;] 0x8262ce30 [mtlk@81b00000+0xc6ea0]
[58958.148717] [&lt;8000c88c&gt;] 0x8000c88c
[58958.152206] [&lt;8003e8f0&gt;] 0x8003e8f0
[58958.155713] [&lt;800779d8&gt;] 0x800779d8
[58958.159168] [&lt;800b9154&gt;] 0x800b9154
[58958.162656] [&lt;80079024&gt;] 0x80079024
[58958.166132] [&lt;80077000&gt;] 0x80077000
[58958.169620] [&lt;8002723c&gt;] 0x8002723c
[58958.173090] [&lt;800794ec&gt;] 0x800794ec
[58958.176580] [&lt;8000482c&gt;] 0x8000482c
[58958.180054] [&lt;80006c58&gt;] 0x80006c58
[58958.183534] 
[58958.185008] 
[58958.185008] Code: 8c420004  9a030003  8c420200 &lt;a8430000&gt; b8430003  92030004  a0430004  92030005  a0430005 
[58958.195039] ---[ end trace 36e978c98dada3d6 ]---</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p365829">
				<div class="post-metadata">
					<div class="post-num">Post #97</div>
					<div class="post-author">Mandrake</div>
					<div class="post-datetime">
						24 Sep 2017, 13:55					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,</p><p>Sad to say but I&#039;m quite used now to not progress as far as we want.</p><p>Nonetheless, this a big leap forward!</p><p>I have updated the documentation in the git in order to reflect the latest findings regarding the firmware.</p><p>In particular I have created a README_FW inside /lantiq_fw. Here we can find the link to the working binaries.</p><p>&nbsp; &nbsp; <a href="https://github.com/Mandrake-Lee/WAVE300/tree/Dual-license-BSD_GPL">https://github.com/Mandrake-Lee/WAVE300 â€¦ se-BSD_GPL</a></p><p>Take care,<br />Mandrake</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p365830">
				<div class="post-metadata">
					<div class="post-num">Post #98</div>
					<div class="post-author">blackadder1000</div>
					<div class="post-datetime">
						24 Sep 2017, 13:56					</div>
				</div>
				<div class="post-content content">
					<p>I am pleased to report that lpm11&#039;s firmware loads correctly on my hardware.</p><p>Please see the OTT dmesg log here:<br /><a href="https://pastebin.com/wkQ7yNjm">https://pastebin.com/wkQ7yNjm</a></p><p>I loaded the kernel modules as follows:<br />insmod mtlkroot.ko cdebug=2<br />insmod mtlk.ko ap=1 debug=2</p><p>(note that mtlk.ko uses debug and mtlkroot.ko uses cdebug)</p><p>I copied lpm11&#039;s ProgModel files to /lib/firmware</p><p>However, I can&#039;t currently bring the interface up. I have a new interface wlan1 but the command:<br />ifconfig wlan1 up<br />errors &quot;ifconfig: SIOCSIFFLAGS: Resource temporarily unavailable&quot;</p><p>I&#039;ll keep working this problem</p><p>Thanks all!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p365846">
				<div class="post-metadata">
					<div class="post-num">Post #99</div>
					<div class="post-author">blackadder1000</div>
					<div class="post-datetime">
						24 Sep 2017, 18:05					</div>
				</div>
				<div class="post-content content">
					<p>when I try to bring the interface up dmesg reports:</p><p>[0000182056] mtlk3(_mtlk_core_ap_set_initial_channel:3319): CID-0000: Failed to open - Country not specified<br />[&nbsp; 482.178127] [0000182064] mtlk3(_mtlk_core_activate:3384): Cannot set initial channel (-14)</p><p>Does anyone know how to set the country code?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p365863">
				<div class="post-metadata">
					<div class="post-num">Post #100</div>
					<div class="post-author">Mandrake</div>
					<div class="post-datetime">
						25 Sep 2017, 00:02					</div>
				</div>
				<div class="post-content content">
					<p>Hi Blackadder,</p><p>Maybe it&#039;s a longshot, but in the sources from Vittorio88, there&#039;s a folder /scripts that looks to me like a CLI to setup the wave300.<br />&nbsp; &nbsp; <a href="https://www.downloads.netgear.com/files/GPL/D6100-V1.0.0.46_0.0.46-GPL.zip">https://www.downloads.netgear.com/files â€¦ 46-GPL.zip</a></p><p>More in particular, there&#039;s a script called mtk_init_country.sh<br />&nbsp; &nbsp; <a href="https://pastebin.com/Ya25wQ2C">https://pastebin.com/Ya25wQ2C</a></p><p>I believe this can be of some help.</p><p>Good luck!<br />Mandrake</p><div class="quotebox"><cite>blackadder1000 wrote:</cite><blockquote><p>when I try to bring the interface up dmesg reports:</p><p>[0000182056] mtlk3(_mtlk_core_ap_set_initial_channel:3319): CID-0000: Failed to open - Country not specified<br />[&nbsp; 482.178127] [0000182064] mtlk3(_mtlk_core_activate:3384): Cannot set initial channel (-14)</p><p>Does anyone know how to set the country code?</p></blockquote></div>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 4 of 6</div><nav><ul><li><a href="viewtopic.php%3Fid=45047&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=45047&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=45047&amp;p=3.html">3</a></li><li class="pagination-current"><span>4</span></li><li><a href="viewtopic.php%3Fid=45047&amp;p=5.html">5</a></li><li><a href="viewtopic.php%3Fid=45047&amp;p=6.html">6</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>