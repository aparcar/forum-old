<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Transformerless switch mode power supply circuit that may be useful</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 24 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p345185">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">peanutbutter101</div>
					<div class="post-datetime">
						29 Nov 2016, 11:37					</div>
				</div>
				<div class="post-content content">
					<p>12V/120mA switch mode power supply circuit.<br />Transformer less switch mode power supplies have become very popular these days. The circuit shown below is of a 12V/120mA output, 85 to 230V AC input transformerless switch mode power supply using <a href="http://www.kynix.com/Detail/7986/LNK304G.html">LNK304 IC</a><br />. Applications of a power supply based on this IC includes hand held devices, timers, small appliances, LED drivers, industrial gadgets etc.<br />LNK304 is a low component count, efficient off-line switcher IC that can support buck, buck-boost and flyback topologies. The IC has a built in auto start circuit for short circuit and open loop fault protection. Other features of LNK304 includes low temperature variation, thermal shut down,high break down voltage, good line &amp; load regulation, high band width , wide input voltage range (85 to 230V AC) etc. In general the LNK304 has a better performance when compared to the many other discrete buck regulators.<br /> <span class="postimg"><img src="http://www.circuitstoday.com/wp-content/uploads/2011/06/LNK304-pin-configuration-typical-application.png" alt="http://www.circuitstoday.com/wp-content/uploads/2011/06/LNK304-pin-configuration-typical-application.png" /></span></p> <br /><p>The pin configuration and the typical application diagram of LNK304 are shown above. Drain (D) pin the drain connection of the built in power MOSFET. The external by pass capacitor (0.1uF) is connected to the BYPASS (BP) terminal. FEEDBACK (FB) pin controls the switching of the built in power MOSFET. A current above than 49uA delivered to this pin will inhibit the switching. The internal power MOSFETs source is connected to the SOURCE (S) pin.<br />LNK304 based switch mode power supply circuit.<br /><span class="postimg"><img src="http://www.circuitstoday.com/wp-content/uploads/2011/06/12V-transformerless-switching-power-supply.png" alt="http://www.circuitstoday.com/wp-content/uploads/2011/06/12V-transformerless-switching-power-supply.png" /></span><br />12V /120 switch mode power supply circuit<br />The circuit diagram of a practical 12V/120mA transformerless switch mode power supply is shown above. Resistor R1, capacitors C1 and C2, diodes D1 and D2 and inductor L1 forms the input stage. D1 and D2 forms the rectifier section while C1 and C2 are input filters. Resistor R1 which is a fusible resistor limits the inrush current, increases differential mode noise attenuation and also serves as an input safety fuse.</p><p>The next stage is the regulator stage which consists of IC LNK304, diodes D3 and D4, capacitors C3, C4 and C5, resistors R3, R4 and R5 and inductor L2. D3 is the freewheeling diode while L2 is the output choke. C5 is the output filter capacitor which limits the output ripple voltage to a value as low as possible. The IC LNK304 is so configured that the power supply operated in the most discontinuous mode and that’s why a fast recovery diode (UF4005) is used as the freewheeling diode (D3). UF4005 has a reverse recovery time of around 75nS and it is well enough for the given situation.</p><p>The voltage drop across diodes D3 and D4 are practically same and so the voltage across C4 tracks the output voltage and this voltage is picked by the network comprising of resistors R2, R3 and is fed to the feedback pin. R2 and R3 sets the output voltage and for 12V output the voltage at the feedback pin must be 1.65V DC. The circuit attains regulation by skipping the switching cycles. When the output voltage rise, the current at the feedback pin also rises and when the current rises above the threshold value, subsequent cycles are skipped until the current at the feedback pin goes below the threshold and thus a constant output voltage is maintained.</p><p>The IC will auto restart if no cycles are skipped during a 50mS time period and this limits the maximum output power to 6% of the maximum over load power. That’s how over load protection is attained. Resistor R4 serves as a small preload which nullifies the effects of tracking error.</p><p>Notes.</p><p>Assemble the circuit on a good quality PCB.<br />LNK304 is a very high efficiency switching regulator IC that has a hand full of applications.<br />LNK304 is commonly available in SMD package (DIP is also available) and care must be taken while soldering it.<br />D1 and D2 are standard 1N4007 silicon rectifier diodes.<br />D3 (UF4005) is a fast recovery diode.<br />D4 (1N4005GP) is a glass passivated diode.<br />C3 can be a ceramic capacitor.<br />C1,C2 and C4 are polyester capacitors.<br />C5 can be electrolytic or polyester capacitor.<br />Voltage ratings of the capacitors are shown in the circuit diagram.<br />R1 is a fusible, fire proof resistor.<br />Maximum possible output current is 120mA.<br />Input voltage range is 85 to 230V AC.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p345255">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						30 Nov 2016, 00:47					</div>
				</div>
				<div class="post-content content">
					<p>Hmm, distance of high voltage drain pin to low voltage pins should be 50% higher at 230V to be safe even in high humidity conditions. This can end up pretty dangerous, if you don&#039;t know exactly, what you are doing.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347297">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						21 Dec 2016, 18:16					</div>
				</div>
				<div class="post-content content">
					<p>Nice <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>This is a good PCB layout to use</p><p><span class="postimg"><img src="https://www.power.com/sites/default/files/forum/files/lnk304_sch.PNG" alt="https://www.power.com/sites/default/files/forum/files/lnk304_sch.PNG" /></span></p><p>I would also suggest to put a ultrarapid fuse of 0.5A in series of the main line, also a two layers PCB might help to improve isolation.<br />Put a 2.2 megaohm resistor in series to the C2 of 4,7 uF 400V (C5 on the lower diagram) to let it slowly discharging when the main supply is removed.</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 21 Dec 2016, 18:27)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>