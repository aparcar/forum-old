<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> uhttpd not setting up CGI variables under barrier-breaker rc3?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 23 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p244253">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">rcp100</div>
					<div class="post-datetime">
						19 Aug 2014, 16:57					</div>
				</div>
				<div class="post-content content">
					<p>Hi all.</p><p>I have a CGI program written in C which is loaded by uhttpd. All seems to work fine except that<br />when it is invoked getenv(&quot;REQUEST_METHOD&quot;) seg faults. It appears that the CGI variables are<br />not being set up.</p><p>The code worked fine under AA and recent trunk. I have the following packages selected (there<br />are others of course but these seem the most likely to be relevent)</p><p>uhttpd<br />uhttpd-mod-tls<br />uhttpd-mod-ubus</p><p>luci-ssl</p><p>Before I submit a ticket does anyone have any suggestions as to what I could try next?<br />Has anyone else noticed similar problems? I&#039;ve spent nearly a week on this so far.</p><p>I should add that I&#039;m working on the TP-LINK WR1043ND V2 and the problem manifests on both<br />BB RC2 and RC3</p><p>Rick</p>											<p class="post-edited">(Last edited by <strong>rcp100</strong> on 19 Aug 2014, 17:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p244269">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						19 Aug 2014, 19:37					</div>
				</div>
				<div class="post-content content">
					<p>Can you attach the relevant parts of your code here? There have been no recent changes to uhttpd that would explain your described issues.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p244273">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">zo0ok</div>
					<div class="post-datetime">
						19 Aug 2014, 20:38					</div>
				</div>
				<div class="post-content content">
					<p>I also have my own C-cgi-program with the line:<br />&nbsp; reqm=getenv(&quot;REQUEST_METHOD&quot;);</p><p>I have no problem.<br /> - TP-Link WDR4900<br /> - BB RC2 (and uhttpd)<br /> - Toolchain from BB RC2<br /> - powerpc-openwrt-linux-uclibcspe-gcc -O2 cgi-program.c</p><p>I have uhttpd and uhttpd-mod-ubus installed, but not uhttpd-mod-tls and luci-ssl.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p244390">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">rcp100</div>
					<div class="post-datetime">
						20 Aug 2014, 19:12					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,</p><p>Thank you for your input. I&#039;ve now managed to resolve this problem. It turns out it had nothing<br />whatsoever to do with cgi variables (*blush*) but rather the absence of the ip command. I now<br />have things working as expected - a big relief.</p><p>Anyone know how to install the ip command? Haven&#039;t managed to find any reference to iproute2<br />or another package that contains ip yet.</p><p>Apologies for wasting bandwidth</p><p>Regards</p><p>Rick</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p244401">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">rcp100</div>
					<div class="post-datetime">
						20 Aug 2014, 20:11					</div>
				</div>
				<div class="post-content content">
					<p>In reply to my own query about the ip command/iproute2:</p><p>&nbsp; &nbsp; make menuconfig -&gt; network/Routing and direction -&gt; ip</p><p>and/or</p><p>&nbsp; &nbsp; make menuconfig -&gt; network/Routing and direction -&gt; ip-full</p><p>Rick</p>											<p class="post-edited">(Last edited by <strong>rcp100</strong> on 20 Aug 2014, 20:12)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>