<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Wrt1900AC v1 - WAN led doesn&#039;t work</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 21 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p305938">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">angelos</div>
					<div class="post-datetime">
						2 Jan 2016, 23:43					</div>
				</div>
				<div class="post-content content">
					<p>Hi.</p><p>I want to make the orange internet led (&quot;mamba:amber:wan&quot;), blink when there is internet traffic (tx rx), but it doesn&#039;t work. I&#039;m I doin&#039; something wrong? I&#039;m using trunk 48016.</p><div class="quotebox"><blockquote><p>config led<br />&nbsp; &nbsp; &nbsp; &nbsp; option default &#039;0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option name &#039;WAN&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option sysfs &#039;mamba:white:wan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option trigger &#039;none&#039;</p><p>config led<br />&nbsp; &nbsp; &nbsp; &nbsp; option default &#039;0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option name &#039;WAN_AMBER&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option sysfs &#039;mamba:amber:wan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option trigger &#039;netdev&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode &#039;tx rx&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option dev &#039;eth1&#039;</p></blockquote></div><p>PS: The white led doesn&#039;t work either.</p>											<p class="post-edited">(Last edited by <strong>angelos</strong> on 2 Jan 2016, 23:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305939">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">davidc502</div>
					<div class="post-datetime">
						2 Jan 2016, 23:54					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m on my own build base trunk with kernel 4.1.13, and the orange wan light works fine. I just made the change in Luci with no problem.</p><p>Are you on the release candidate kernel (4.4.x RC)? because I think I remember reading about issues dealing with the lights.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305940">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">anomeome</div>
					<div class="post-datetime">
						3 Jan 2016, 00:03					</div>
				</div>
				<div class="post-content content">
					<p>There is an issue with kernels &gt; 4.1, see this:<br /><a href="https://forum.openwrt.org/viewtopic.php?pid=305717#p305717">https://forum.openwrt.org/viewtopic.php â€¦ 17#p305717</a><br />But it is not the whole answer as I have made the fix and still do not have working wan/usb leds of 4.4rc build.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305941">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">angelos</div>
					<div class="post-datetime">
						3 Jan 2016, 00:03					</div>
				</div>
				<div class="post-content content">
					<p>@davidc502<br />I use the official release from downloads.openwrt.org (Dec. 31 2015, kernel 4.1.13).</p><p>I just noticed something which is also strange.<br />If I do a &quot;/etc/init.d/network restart&quot;, sometimes (not always) the led (white or orange) turns on but doesn&#039;t blink, it just stays always on.</p><p>Are the devs aware of it or should I open a ticket?<br />Or just wait for a newer snapshot?</p><p>------</p><p>@ anomeome<br />So... I just wait for the fix?</p>											<p class="post-edited">(Last edited by <strong>angelos</strong> on 3 Jan 2016, 00:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305943">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">davidc502</div>
					<div class="post-datetime">
						3 Jan 2016, 00:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>angelos wrote:</cite><blockquote><p>@davidc502<br />I use the official release from downloads.openwrt.org (Dec. 31 2015, kernel 4.1.13).</p><p>I just noticed something which is also strange.<br />If I do a &quot;/etc/init.d/network restart&quot;, sometimes (not always) the led (white or orange) turns on but doesn&#039;t blink, it just stays always on.</p><p>Are the devs aware of it or should I open a ticket?<br />Or just wait for a newer snapshot?</p><p>------</p><p>@ anomeome<br />So... I just wait for the fix?</p></blockquote></div><p>If it&#039;s not a big deal you may want to hold off putting in a ticket.</p><p>By the way, it&#039;s the very far Right hand side light that should turn Orange and blink right? That&#039;s the one that&#039;s blinking orange for me.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305944">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">anomeome</div>
					<div class="post-datetime">
						3 Jan 2016, 00:15					</div>
				</div>
				<div class="post-content content">
					<p>I have not had this issue with 4.1, but I&#039;m not currently using a trunk build. I have used the 4.1 trunk without issue in the past. I tried an arokh r48014-2 build yesterday that as far as I noticed had all leds were working. 4.1/nand</p><p>This is the second from the left I believe.</p>											<p class="post-edited">(Last edited by <strong>anomeome</strong> on 3 Jan 2016, 00:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305946">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">angelos</div>
					<div class="post-datetime">
						3 Jan 2016, 00:27					</div>
				</div>
				<div class="post-content content">
					<p>OK guys, I&#039;ll think I&#039;ll wait for a newer build and see how it goes and if it&#039;s fixed.</p><p>Yes, I&#039;m talking about the second from the left.<br />The last from left / first from right is the WPS which works fine, I put a timer and made it blink every one second.</p><p>My whole led config:<br /></p><div class="quotebox"><blockquote><p>config led<br />&nbsp; &nbsp; option default &#039;0&#039;<br />&nbsp; &nbsp; option name &#039;POWER&#039;<br />&nbsp; &nbsp; option sysfs &#039;mamba:white:power&#039;<br />&nbsp; &nbsp; option trigger &#039;default-on&#039;</p><p>config led<br />&nbsp; &nbsp; option default &#039;0&#039;<br />&nbsp; &nbsp; option name &#039;WAN&#039;<br />&nbsp; &nbsp; option sysfs &#039;mamba:white:wan&#039;<br />&nbsp; &nbsp; option trigger &#039;none&#039;</p><p>config led<br />&nbsp; &nbsp; option default &#039;0&#039;<br />&nbsp; &nbsp; option name &#039;WAN_AMBER&#039;<br />&nbsp; &nbsp; option sysfs &#039;mamba:amber:wan&#039;<br />&nbsp; &nbsp; option trigger &#039;netdev&#039;<br />&nbsp; &nbsp; option dev &#039;eth1&#039;<br />&nbsp; &nbsp; option mode &#039;tx rx&#039;</p><p>config led<br />&nbsp; &nbsp; option default &#039;0&#039;<br />&nbsp; &nbsp; option name &#039;WLAN_2G&#039;<br />&nbsp; &nbsp; option sysfs &#039;mamba:white:wlan_2g&#039;<br />&nbsp; &nbsp; option trigger &#039;phy0radio&#039;</p><p>config led<br />&nbsp; &nbsp; option default &#039;0&#039;<br />&nbsp; &nbsp; option name &#039;WLAN_5G&#039;<br />&nbsp; &nbsp; option sysfs &#039;mamba:white:wlan_5g&#039;<br />&nbsp; &nbsp; option trigger &#039;phy1radio&#039;</p><p>config led<br />&nbsp; &nbsp; option default &#039;0&#039;<br />&nbsp; &nbsp; option name &#039;USB2&#039;<br />&nbsp; &nbsp; option sysfs &#039;mamba:white:usb2&#039;<br />&nbsp; &nbsp; option trigger &#039;usbdev&#039;</p><p>config led<br />&nbsp; &nbsp; option default &#039;0&#039;<br />&nbsp; &nbsp; option name &#039;USB3_1&#039;<br />&nbsp; &nbsp; option sysfs &#039;mamba:white:usb3_1&#039;<br />&nbsp; &nbsp; option trigger &#039;usbdev&#039;</p><p>config led<br />&nbsp; &nbsp; option default &#039;0&#039;<br />&nbsp; &nbsp; option name &#039;USB3_2&#039;<br />&nbsp; &nbsp; option sysfs &#039;mamba:white:usb3_2&#039;<br />&nbsp; &nbsp; option trigger &#039;usbdev&#039;</p><p>config led<br />&nbsp; &nbsp; option default &#039;0&#039;<br />&nbsp; &nbsp; option name &#039;ESATA&#039;<br />&nbsp; &nbsp; option sysfs &#039;mamba:white:esata&#039;<br />&nbsp; &nbsp; option trigger &#039;none&#039;</p><p>config led<br />&nbsp; &nbsp; option default &#039;0&#039;<br />&nbsp; &nbsp; option name &#039;WPS&#039;<br />&nbsp; &nbsp; option sysfs &#039;mamba:white:wps&#039;<br />&nbsp; &nbsp; option trigger &#039;none&#039;</p><p>config led<br />&nbsp; &nbsp; option default &#039;0&#039;<br />&nbsp; &nbsp; option name &#039;WPS_AMBER&#039;<br />&nbsp; &nbsp; option sysfs &#039;mamba:amber:wps&#039;<br />&nbsp; &nbsp; option trigger &#039;timer&#039;<br />&nbsp; &nbsp; option delayon &#039;500&#039;<br />&nbsp; &nbsp; option delayoff &#039;500&#039;</p></blockquote></div>											<p class="post-edited">(Last edited by <strong>angelos</strong> on 3 Jan 2016, 01:41)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305948">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">davidc502</div>
					<div class="post-datetime">
						3 Jan 2016, 00:33					</div>
				</div>
				<div class="post-content content">
					<p>The second one from the left doesn&#039;t blink unless it&#039;s trying to establish a connection. A solid amber light indicates a possible configuration issue or internet issue.</p><p>It&#039;s the far right had led that should blink with internet Activity or Traffic.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305951">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">anomeome</div>
					<div class="post-datetime">
						3 Jan 2016, 00:37					</div>
				</div>
				<div class="post-content content">
					<p>Second from left is wan/hearbeat/activity indicator</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305952">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">angelos</div>
					<div class="post-datetime">
						3 Jan 2016, 00:40					</div>
				</div>
				<div class="post-content content">
					<p>OK, here is a pic...<br /><span class="postimg"><img src="http://s9.postimg.org/5nm979iu7/1900acv1.jpg" alt="http://s9.postimg.org/5nm979iu7/1900acv1.jpg" /></span></p><p>I&#039;m talking about the Internet led, which I want to make it blink when there is transmit/receive traffic.</p>											<p class="post-edited">(Last edited by <strong>angelos</strong> on 3 Jan 2016, 00:41)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305954">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">anomeome</div>
					<div class="post-datetime">
						3 Jan 2016, 00:44					</div>
				</div>
				<div class="post-content content">
					<p>Right (wait... left), which has worked on every build I&#039;ve tried &lt; 4.4rc.</p>											<p class="post-edited">(Last edited by <strong>anomeome</strong> on 3 Jan 2016, 00:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305957">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">davidc502</div>
					<div class="post-datetime">
						3 Jan 2016, 00:53					</div>
				</div>
				<div class="post-content content">
					<p>The far right hand side (Past the 4) is the up/down arrow -- that&#039;s the activity light for WAN.</p><p>Not being argumentative here -- lol</p><p>Uploading picture</p>											<p class="post-edited">(Last edited by <strong>davidc502</strong> on 3 Jan 2016, 00:57)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305958">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">angelos</div>
					<div class="post-datetime">
						3 Jan 2016, 00:54					</div>
				</div>
				<div class="post-content content">
					<p>OK, as I said before, I&#039;ll wait for a newer build and see how it goes.</p><p>A last question (at the moment).<br />To go to a newer snapshot...<br />Should I flash OEM firmware first and then OpenWrt again, or just use a sysupgrade image?<br />I think I&#039;ve read that the factory image works too if I want to &quot;jump&quot; to a newer version, is it safe?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305959">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">anomeome</div>
					<div class="post-datetime">
						3 Jan 2016, 01:02					</div>
				</div>
				<div class="post-content content">
					<p>So david, your router flashes the wps led for wan activity? Is this your image, or did you mod the led setting? I did not think this was the default behaviour. The behaviour I&#039;ve noticed with &lt; 4.4 builds was the internet led coming on when a link was established, then solid(openwrt), and with stock firmware it blinks, but appears to be a heartbeat rather than an activity indicator.</p><p>I currently have to flash back to stock before moving forward with an openwrt image. This changed recently as I used to just flash forward openwrt images. YMMV</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305965">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">davidc502</div>
					<div class="post-datetime">
						3 Jan 2016, 01:23					</div>
				</div>
				<div class="post-content content">
					<p>Cracks me up... When I think about it, I&#039;ve only used Factory FW for a day or two before going to OpenWrt, and never looked back.. After some reading, yes that is the wps LED... the kinda up/down arrow, which I thought made perfect sense for &quot;activity&quot; LOL</p><p>So yes, it&#039;s the WPS, which I like better than the &quot;Internet&quot; light. Now, I have them both which is kind of cool.</p><p>Technically, my build is as &quot;snapshot&quot; of current trunk 4.1.13.</p><p>Thanks for pointing that out.</p><p>The below change in Luci is what gave me the blinking WPS LED for WAN Activity.</p><p>Reading below it does say &quot;WPS&quot; Doh!!!&nbsp; I was wondering what the hell that meant when I chose it.</p><p><span class="postimg"><img src="http://personalpages.tds.net/~davidc502/RouterStats/WANLED.JPG" alt="LED" /></span></p>											<p class="post-edited">(Last edited by <strong>davidc502</strong> on 3 Jan 2016, 01:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305966">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">anomeome</div>
					<div class="post-datetime">
						3 Jan 2016, 01:28					</div>
				</div>
				<div class="post-content content">
					<p>So if you have working leds than the op should have them as well. This must be a configuration issue?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305967">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">davidc502</div>
					<div class="post-datetime">
						3 Jan 2016, 01:31					</div>
				</div>
				<div class="post-content content">
					<p>Here is what the blinking Orange WPS LED looks like. </p><p><span class="postimg"><img src="http://personalpages.tds.net/~davidc502/RouterStats/20160102_170949.jpg" alt="LED" /></span></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305971">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">davidc502</div>
					<div class="post-datetime">
						3 Jan 2016, 02:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>anomeome wrote:</cite><blockquote><p>So if you have working leds than the op should have them as well. This must be a configuration issue?</p></blockquote></div><p>system config for WPS led to blink orange with WAN send/recieve.</p><p>config led &#039;led_wan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option name &#039;WAN&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option trigger &#039;netdev&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option dev &#039;eth1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode &#039;tx rx&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option sysfs &#039;mamba:amber:wps&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option default &#039;1&#039;</p><p>config if you want &quot;WAN&quot; light to blink Orange with WAN Transmit/Recieve</p><p>config led &#039;led_wan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option name &#039;WAN&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option trigger &#039;netdev&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option dev &#039;eth1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode &#039;tx rx&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option default &#039;0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option sysfs &#039;mamba:amber:wan&#039;</p>											<p class="post-edited">(Last edited by <strong>davidc502</strong> on 3 Jan 2016, 02:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p335981">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">chessman</div>
					<div class="post-datetime">
						26 Aug 2016, 06:40					</div>
				</div>
				<div class="post-content content">
					<p>Just an update to this, I was having the same problem with WAN led not working but with the WRT1900ACS v2 which is the same hardware as the WRT1900AC v2 (both taking the cobra image) with the only exception the CPU speed is faster in the ACS at 1.6Ghz.</p><p>I built my image from CC 15.05 source and in make menuconfig you need to select:<br />Kernel modules -&gt; Led modules -&gt; kmod-leds-pca963x<br />else after flashing you&#039;ll only see two leds in led config:<br />cobra:white:power and cobra:white:sata.</p><p>Now I have the whole lot and WAN led worked straight away.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336085">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">anomeome</div>
					<div class="post-datetime">
						27 Aug 2016, 01:36					</div>
				</div>
				<div class="post-content content">
					<p>This fire was put out a long time back. I don&#039;t know if you have a reason for hanging back at CC, but if so you should at least build to 15.05.1 and get the latest mwlwifi in your build. Since you do your own build, to take advantage of the HW (BM,CESA etc) available, I would suggest a move to DD or LEDE.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336101">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">chessman</div>
					<div class="post-datetime">
						27 Aug 2016, 10:45					</div>
				</div>
				<div class="post-content content">
					<p>This is the first result that comes up in a google search for &quot;wrt1900acs wan led&quot;, i&#039;m hanging back with CC as its labeled as a stable version. Its actually 15.05.1 i&#039;m using, but the git repo at dev.openwrt.org is labeled as 15.05 and seems to have all the patches etc...&nbsp; I haven&#039;t had any problems with it and is stable for what i&#039;m using it for with public wifi hotspots etc...</p><p>I&#039;m waiting for LEDE to release a stable version too plus some of my hardware wont run Trunk/DD/LEDE with the packages I require due insufficient flash eg the tplink tl-wa801/901 series which only has 4mb, CC with my packages fits on these routers but only with something like &lt; 50kb to spare.</p><p>Edit: I just tried the latest development version of LEDE and its the same you need to manually select kmod-leds-pca963x in make menuconfig when building for the WRT1900AC(S)</p>											<p class="post-edited">(Last edited by <strong>chessman</strong> on 28 Aug 2016, 03:04)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>