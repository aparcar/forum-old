<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Router with stable AP+Client mode?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 17 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p230211">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">srynoname</div>
					<div class="post-datetime">
						14 Apr 2014, 22:54					</div>
				</div>
				<div class="post-content content">
					<p>I need 2 routers, one shall function as AP (WDS) and another as Client (WDS too). I am currently running two TP-Link WR841ND routers for that, but at least one of them often ends up with<br /></p><div class="quotebox"><blockquote><p>ath: Failed to stop TX DMA, queues=0x004&quot;</p></blockquote></div><p>which is a known bug according to <a href="https://dev.openwrt.org/ticket/11862">https://dev.openwrt.org/ticket/11862</a>, unfortunately without any real solution.</p><p>So, can anyone recommend a router which works fine in both, AP and client mode? In addition I need 300 Mbit WLAN, that are basically all my requirements.</p><p>Thanks for any hint on this!</p>											<p class="post-edited">(Last edited by <strong>srynoname</strong> on 14 Apr 2014, 23:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230216">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						14 Apr 2014, 23:28					</div>
				</div>
				<div class="post-content content">
					<p>are you using lastest trunk?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230218">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">srynoname</div>
					<div class="post-datetime">
						14 Apr 2014, 23:44					</div>
				</div>
				<div class="post-content content">
					<p>as the comments on the bug reports didn&#039;t sound much promising about newer versions, I yet didn&#039;t try it. Maybe I&#039;ll try, but reading the comments it looks like one is probably better off getting another router or at least already collecting informations about possible alternatives ;-)<br />edit: fixed link in opening post.</p>											<p class="post-edited">(Last edited by <strong>srynoname</strong> on 14 Apr 2014, 23:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230229">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">nozombian</div>
					<div class="post-datetime">
						15 Apr 2014, 01:07					</div>
				</div>
				<div class="post-content content">
					<p>The bug is probably not 100% fixed, but haven&#039;t run into tx dma error for a long time. I&#039;ve two remote places where I have currently bridges between wr841ns as aps and wr741ns as wds clients, BB trunk is working fine. Maybe it&#039;s no longer necessary, but I&#039;m still doing morning restarts from the cron, because the places are hard to reach and I don&#039;t want to risk a trip <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> Can&#039;t speak for uptime because of cron restarts, but wifi on AA was very bad and BB has wifi ok.</p>											<p class="post-edited">(Last edited by <strong>nozombian</strong> on 15 Apr 2014, 01:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230637">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">srynoname</div>
					<div class="post-datetime">
						18 Apr 2014, 17:37					</div>
				</div>
				<div class="post-content content">
					<p>hmm on AA wlan works stable for me as long as I don&#039;t do downloads with like 20 threads. Maybe I&#039;l give it a try with BB. Still I am interested if anyone can recommend a router which does AP and client stable and without problems. All this fiddling takes much time ):</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230655">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">3zl</div>
					<div class="post-datetime">
						18 Apr 2014, 19:49					</div>
				</div>
				<div class="post-content content">
					<p>how about considering batman-adv used as&nbsp; L2-wifi-bridges&nbsp; ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230735">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">srynoname</div>
					<div class="post-datetime">
						19 Apr 2014, 14:50					</div>
				</div>
				<div class="post-content content">
					<p>I installed BB yesterday (only on the AP) and after first tests, problem seems to be gone :-) however, for me the problem occured often but not reliable always, so longterm testing will show if it really works stable now.<br />@3zl: I think it&#039;s a problem with Atheros, so probably my search criteria is also not that good, as it&#039;s probably not a AP-Client problem.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p231114">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">srynoname</div>
					<div class="post-datetime">
						23 Apr 2014, 20:21					</div>
				</div>
				<div class="post-content content">
					<p>damn it. just got it again, there wasn&#039;t even load on the network (this was when it normally happened). at least this time it took 5 days till it happened. maybe I&#039;ll try the automatic reboot way...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p231192">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">cconn</div>
					<div class="post-datetime">
						24 Apr 2014, 17:17					</div>
				</div>
				<div class="post-content content">
					<p>I have the same problem on&nbsp; a TP-LINK 1043nd.&nbsp; I have this issue in post-387xx trunk builds.</p><p><a href="https://forum.openwrt.org/viewtopic.php?id=50055">https://forum.openwrt.org/viewtopic.php?id=50055</a></p><p>I started a thread which died, as I hadn&#039;t identified this problem as being the known bugs.&nbsp; After building and re-building trunks I ended up ditching the TP-LINK and built it on a DIR-835, and am using a collection of DIR-615s as WDS clients.&nbsp; the 835 and 615s can be WDS access-points and have so far been 100% reliable.&nbsp; The TP-Links would die after 6-24 hours.</p><p>I am toying with the idea of trying Batman-adv, just haven&#039;t had the time to learn about it yet.</p>											<p class="post-edited">(Last edited by <strong>cconn</strong> on 24 Apr 2014, 17:18)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p231214">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">srynoname</div>
					<div class="post-datetime">
						24 Apr 2014, 23:02					</div>
				</div>
				<div class="post-content content">
					<p>cconn, which revision of the dir-615 do you have? did you ever use the dir-615 as AP? shounds like you mainly used it as client? thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p231217">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">cconn</div>
					<div class="post-datetime">
						24 Apr 2014, 23:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>srynoname wrote:</cite><blockquote><p>cconn, which revision of the dir-615 do you have? did you ever use the dir-615 as AP? shounds like you mainly used it as client? thanks!</p></blockquote></div><p>I have 2 DIR-615s, they are E3/E4 revision.</p><p>They don&#039;t have gig ports so if that is needed, the 835 might be a decent choice.&nbsp; I got one for 90$ canadian <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>but I use all three platforms as WDS AP and they have not failed me so far, I am running trunk 40535</p><p>PS, the 835 has 16MB of flash and 128M of RAM, its a very capable router!</p>											<p class="post-edited">(Last edited by <strong>cconn</strong> on 24 Apr 2014, 23:18)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232337">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">srynoname</div>
					<div class="post-datetime">
						4 May 2014, 20:57					</div>
				</div>
				<div class="post-content content">
					<p>hmm, I gave up and bought an ASUS RT-N66U and used TomatoUSB. Basically same problem (suddelny high ping, slow down...) though the router doesn&#039;t even have an atheros chipset. I then used wifi analyzer (android) and saw that there are many wifi networks around me and on the same channel. I now reverted back to the wr841nd with another channel - auto selecting channel seems to suck. note that I had to change the firmware to dd wrt, as I am using a channel higher than 11, which is not really supported/wanted using openwrt. <br />short story: think about changing channel instead of only the firmware. my place simply seems to be to wifi crowded...</p>											<p class="post-edited">(Last edited by <strong>srynoname</strong> on 4 May 2014, 20:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232343">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">nozombian</div>
					<div class="post-datetime">
						4 May 2014, 21:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>srynoname wrote:</cite><blockquote><p>note that I had to change the firmware to dd wrt, as I am using a channel higher than 11, which is not really supported/wanted using openwrt. <br />short story: think about changing channel instead of only the firmware. my place simply seems to be to wifi crowded...</p></blockquote></div><p>Wrong. Openwrt supports channels up to 14, but you have to set correct country and either to compile yourself with regdomain respect enabled, or instlall jow&#039;s reghack.</p><p>Btw. wr1043nd v2 works fine in here, but I&#039;m not claiming there&#039;s not a bug <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> The last bug I run into was annoying mainly with weak signal, in the same room it worked quite good too.</p>											<p class="post-edited">(Last edited by <strong>nozombian</strong> on 4 May 2014, 21:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232345">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">srynoname</div>
					<div class="post-datetime">
						4 May 2014, 21:20					</div>
				</div>
				<div class="post-content content">
					<p>I know, maybe correct statement would be: channel &gt; 11 involves too much fiddling for such a simple thing.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232346">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">nozombian</div>
					<div class="post-datetime">
						4 May 2014, 21:22					</div>
				</div>
				<div class="post-content content">
					<p>I don&#039;t understand, why it is not enabled. It sucks, you&#039;re right.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232349">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">makro</div>
					<div class="post-datetime">
						4 May 2014, 21:42					</div>
				</div>
				<div class="post-content content">
					<p>See this bug report for why available frequencies are limited in default builds: <a href="https://dev.openwrt.org/ticket/8624">https://dev.openwrt.org/ticket/8624</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232427">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">nozombian</div>
					<div class="post-datetime">
						5 May 2014, 10:05					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the link...<br /></p><div class="quotebox"><cite>angryopenwrtuser wrote:</cite><blockquote><p>and please tell us WHO does not allow you to distribute images with ATH_USER_REGD set so we can tell them to respect local laws!</p></blockquote></div><p>There&#039;s a discussion on this topic once in a while here and there, but no one really explained, WHO does not allow to change the county to the one where you are actually running the router. Openwrt is free, right? So why the developers can&#039;t do whatever they want? Ubiquiti devices has &quot;compliance test&quot; mode in their firmware, which allows you to violate every regulation available and use frequencies far outside the wifi spectrum, yet no one gives a damn. It&#039;s the user&#039;s responsibility to stick with regulations.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p233338">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">halycon</div>
					<div class="post-datetime">
						14 May 2014, 12:06					</div>
				</div>
				<div class="post-content content">
					<p>I had much trouble with setting up stable wds ap/client environment. Finally i activated STP on the lan interfaces which are briged to the wds-wlan-ifs and, most important, switched security from wpa2/ccmp(aes) to wpa2/tkip. Running TKIP security everything is running stable and fine. Routers are on latest barrier braker. I only have signal strength between 50-60 % on the wds link, but no disconnects or something similar. i dont&#039;t know the exact bandwidth, but streaming 1080p mkv and downloading with 12MB/s i working fine. At the same time and over the wds link for sure. That&#039;s all i ever wanted <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> Routers are tplink 3600 on 5ghz with wmm mode turned on.</p>											<p class="post-edited">(Last edited by <strong>halycon</strong> on 14 May 2014, 12:09)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p235142">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">srynoname</div>
					<div class="post-datetime">
						30 May 2014, 17:03					</div>
				</div>
				<div class="post-content content">
					<p>Just as long time feedback: Running on another channel finally solved my problem :-) <br />Thanks for all the other replies though!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p235151">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">valentt</div>
					<div class="post-datetime">
						30 May 2014, 17:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>srynoname wrote:</cite><blockquote><p>Just as long time feedback: Running on another channel finally solved my problem :-) <br />Thanks for all the other replies though!</p></blockquote></div><p>Really? How come only changing channel fixes this issue?!? I&#039;m really skeptical.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>