<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Getting hotplug for usb to work on reboot</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 7 Feb 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p250347">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">3ndymion</div>
					<div class="post-datetime">
						13 Oct 2014, 13:16					</div>
				</div>
				<div class="post-content content">
					<p>Hello.&nbsp; I&#039;m working on a heavy script to detect &amp; mount usb devices (mainly external hdd&#039;s) with hotplug in a very easy way that can be used &amp; understood by anyone, not just super advanced, highly knowledgeable tech people.&nbsp; So far, I have it working, but I need help.&nbsp; I&#039;ve searched around &amp; can&#039;t find what I&#039;m looking for.</p><p>I want to be able to get hotplug to fire off its variables on reboot.&nbsp; Is there a way to do this???&nbsp; I guess another way to describe it is coldplug.&nbsp; I want the devices to be coldplugged.&nbsp; I have the script in /etc/hotplug.d/usb, &amp; it works great.&nbsp; But I want it to work on reboot too.&nbsp; Is there a way to get hotplug to work on reboot???&nbsp; I&#039;m working with Barrier Breaker r41846 &amp; newer.&nbsp; Please help.&nbsp; Thanks in advance.&nbsp; <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /> <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /> <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p>											<p class="post-edited">(Last edited by <strong>3ndymion</strong> on 13 Oct 2014, 13:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250630">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">3ndymion</div>
					<div class="post-datetime">
						15 Oct 2014, 10:10					</div>
				</div>
				<div class="post-content content">
					<p>To add more info to this, I&#039;m trying to get hotplug to work with devices that aren&#039;t recognized by the block-mount package or fstab, during startup / reboot.</p><p><a href="http://wiki.openwrt.org/doc/techref/block_mount">From the block-mount wiki page:</a><br />&quot;block info cannot detect btrfs (r39399), xfs , jfs and some other FS. Use manual scripting to mount them. &quot;</p><p>In my case, I&#039;m working with LUKS encrypted devices.&nbsp; I have scripts to decrypt the devices with hidden password files &amp; mount them, &amp; the hotplug script I put in /etc/hotplug.d/usb runs those scripts.&nbsp; Hotplug works perfectly like this, but I can&#039;t figure out how to do this on startup / reboot.&nbsp; udev does this, but I&#039;m trying to replace udev with hotplug because udev is a huge size.&nbsp; It seems that hotplug used to do this coldplugging a long time ago, but the functionality was removed.&nbsp; If udev can do it, there&#039;s gotta be a way to coldplug the devices.</p><p>So basically, the goal is to detect the usb devices on startup &amp; be able to run scripts for them.&nbsp; Devices will be /dev/sda, /dev/sdb, etc...&nbsp; Getting hotplug to fire off its events for the devices, or finding the devices &amp; all needed values on my own, would accomplish this.&nbsp; From what I&#039;m finding so far, I&#039;m thinking that maybe everything needed for this would be located in /sys.&nbsp; I&#039;m still learning more about this.</p><p>I&#039;d love to contribute towards the development of OpenWRT &amp; making it a little easier for everyone to use.&nbsp; I think this would be a great thing for OpenWRT to be able to do, but I&#039;m still stuck halfway through.&nbsp; If anyone can help with some info &amp; knowledge about coldplugging in OpenWRT, it&#039;d be greatly appreciated.&nbsp; In the meantime, I&#039;ll keep searching in whatever time I can spare.&nbsp; Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269130">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">maglev</div>
					<div class="post-datetime">
						18 Mar 2015, 16:45					</div>
				</div>
				<div class="post-content content">
					<p>Hotplug is working on boot in the previous version (Attitude Adjustment 12.09). and its broken on Barrier Breaker 14.07.<br />I believe its something todo with the change to procd. I don&#039;t know how to report this too, googling to nowhere.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269230">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">3ndymion</div>
					<div class="post-datetime">
						19 Mar 2015, 14:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>maglev wrote:</cite><blockquote><p>Hotplug is working on boot in the previous version (Attitude Adjustment 12.09). and its broken on Barrier Breaker 14.07.<br />I believe its something todo with the change to procd. I don&#039;t know how to report this too, googling to nowhere.</p></blockquote></div><p>Ohai there.&nbsp; And thanks for replying.&nbsp; : )&nbsp; I am working on this almost every day of my life.&nbsp; I successfully conquered the problems stated above, &amp; I&#039;m building a setup for everyone to use.&nbsp; Hotplugging &amp; coldplugging will no longer be a problem once I&#039;m finished.&nbsp; So far, it is already working perfect, &amp; the program is getting stronger with each passing day.&nbsp; Unfortunately, I&#039;m still pretty busy, &amp; my work goes slow.&nbsp; But, it is definitely coming along very nicely.</p><p>My program is intended to replace that infernal udev for detecting &amp; auto mounting your usb devices.&nbsp; No longer will it require a full education just to plug in your device &amp; actually see it work (how absurd!!!).&nbsp; My program will be so easy that even a person who doesn&#039;t even know what Linux is will be able to use it.</p><p>I suspect it will be at least a few more months before I finally have it ready for the public.&nbsp; It&#039;s gonna take some time, but I assure you, it will be well worth the wait.&nbsp; I&#039;ll be putting some updates on my Google+ page every now &amp; then.&nbsp; Be sure to keep an eye out in the months to come.&nbsp; I will be making a big deal out of it, &amp; I intend to give it a grand entrance upon arrival.&nbsp; XD</p><p>If there are any developers planning on doing something with the hotplug system, please don&#039;t waste your time.&nbsp; I will deliver the solution to the world, &amp; it will be great.&nbsp; EZ-Hotplug is coming...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269564">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						22 Mar 2015, 11:48					</div>
				</div>
				<div class="post-content content">
					<p>Please keep us updated on this, thanks.</p><p>Maurizio</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269682">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">3ndymion</div>
					<div class="post-datetime">
						23 Mar 2015, 15:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pilovis wrote:</cite><blockquote><p>Please keep us updated on this, thanks.</p><p>Maurizio</p></blockquote></div><p>Yes sir.&nbsp; It&#039;s gonna take me a long time to get this program done, but I&#039;ll try &amp; do that.&nbsp; If not here, it&#039;ll likely be on my page here:</p><p><a href="https://plus.google.com/114618796889786741595">https://plus.google.com/114618796889786741595</a></p><p>I&#039;m spending a lot of time making sure everything works right, &amp; is completely universal &amp; customizable, so that anybody can use it on any device.&nbsp; Trust me, when the time finally comes, I will let it be known everywhere.&nbsp; <img src="https://forum.openwrt.org/img/smilies/cool.png" width="15" height="15" alt="cool" /></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>