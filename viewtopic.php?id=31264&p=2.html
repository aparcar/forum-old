<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> ALFA R36 Router Hacking</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 25 Mar 2018 and 1 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 4</div><nav><ul><li><a href="viewtopic.php%3Fid=31264&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=31264&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=31264&amp;p=4.html">4</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p167318">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">traxsboy</div>
					<div class="post-datetime">
						14 May 2012, 12:41					</div>
				</div>
				<div class="post-content content">
					<p>im having big problems getting this to boot built the firmware but i could of done it wrong this is what i&#039;m getting</p><br /><p>## Booting image at bf050000 ...<br />&nbsp; &nbsp;Image Name:&nbsp; &nbsp;MIPS OpenWrt Linux-3.3.5<br />&nbsp; &nbsp;Created:&nbsp; &nbsp; &nbsp; 2012-05-14&nbsp; &nbsp;8:41:15 UTC<br />&nbsp; &nbsp;Image Type:&nbsp; &nbsp;MIPS Linux Kernel Image (lzma compressed)<br />&nbsp; &nbsp;Data Size:&nbsp; &nbsp; 833354 Bytes = 813.8 kB<br />&nbsp; &nbsp;Load Address: 80000000<br />&nbsp; &nbsp;Entry Point:&nbsp; 80000000<br />&nbsp; &nbsp;Verifying Checksum ... OK<br />&nbsp; &nbsp;Uncompressing Kernel Image ... OK<br />No initrd<br />## Transferring control to Linux (at address 80000000) ...<br />## Giving linux memsize in MB, 32</p><p>Starting kernel ...</p><p>[&nbsp; &nbsp; 0.000000] Linux version 3.3.5 (traxsboy@traxsboy-Aspire-7720G) (gcc version 4.6.3 20120201 (prerelease) (Linaro GCC 4.6-2012.02) ) #8 Mon May 14 09:41:11 BST 2012<br />[&nbsp; &nbsp; 0.000000] bootconsole [early0] enabled<br />[&nbsp; &nbsp; 0.000000] CPU revision is: 0001964c (MIPS 24KEc)<br />[&nbsp; &nbsp; 0.000000] Ralink RT3350 id:1 rev:2 running at 320.00 MHz<br />[&nbsp; &nbsp; 0.000000] Determined physical RAM map:<br />[&nbsp; &nbsp; 0.000000]&nbsp; memory: 02000000 @ 00000000 (usable)<br />[&nbsp; &nbsp; 0.000000] Initrd not found or empty - disabling initrd<br />[&nbsp; &nbsp; 0.000000] Zone PFN ranges:<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal&nbsp; &nbsp;0x00000000 -&gt; 0x00002000<br />[&nbsp; &nbsp; 0.000000] Movable zone start PFN for each node<br />[&nbsp; &nbsp; 0.000000] Early memory PFN ranges<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp; &nbsp;0: 0x00000000 -&gt; 0x00002000<br />[&nbsp; &nbsp; 0.000000] Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 8128<br />[&nbsp; &nbsp; 0.000000] Kernel command line:&nbsp; console=ttyS1,115200n8 root=/dev/mtdblock4 board=W502U rootfstype=squashfs,jffs2 noinitrd rootfstype=squashfs,jffs2<br />[&nbsp; &nbsp; 0.000000] PID hash table entries: 128 (order: -3, 512 bytes)<br />[&nbsp; &nbsp; 0.000000] Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)<br />[&nbsp; &nbsp; 0.000000] Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)<br />[&nbsp; &nbsp; 0.000000] Primary instruction cache 32kB, VIPT, 4-way, linesize 32 bytes.<br />[&nbsp; &nbsp; 0.000000] Primary data cache 16kB, 4-way, VIPT, no aliases, linesize 32 bytes<br />[&nbsp; &nbsp; 0.000000] Writing ErrCtl register=000076a0<br />[&nbsp; &nbsp; 0.000000] Readback ErrCtl register=000076a0<br />[&nbsp; &nbsp; 0.000000] Memory: 29968k/32768k available (1911k kernel code, 2800k reserved, 319k data, 168k init, 0k highmem)<br />[&nbsp; &nbsp; 0.000000] SLUB: Genslabs=9, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br />[&nbsp; &nbsp; 0.000000] NR_IRQS:48<br />[&nbsp; &nbsp; 0.000000] console [ttyS1] enabled, bootconsole disabled<br />[&nbsp; &nbsp; 0.000000] console [ttyS1] enabled, bootconsole disabled<br />[&nbsp; &nbsp; 0.010000] Calibrating delay loop... 212.58 BogoMIPS (lpj=1062912)<br />[&nbsp; &nbsp; 0.090000] pid_max: default: 32768 minimum: 301<br />[&nbsp; &nbsp; 0.090000] Mount-cache hash table entries: 512<br />[&nbsp; &nbsp; 0.100000] NET: Registered protocol family 16<br />[&nbsp; &nbsp; 0.110000] MIPS: machine is ALFA Networks W502U<br />[&nbsp; &nbsp; 0.110000] gpiochip_add: registered GPIOs 0 to 23 on device: RT305X-GPIO0<br />[&nbsp; &nbsp; 0.120000] gpiochip_add: registered GPIOs 24 to 39 on device: RT305X-GPIO1<br />[&nbsp; &nbsp; 0.120000] gpiochip_add: registered GPIOs 40 to 51 on device: RT305X-GPIO2<br />[&nbsp; &nbsp; 0.140000] bio: create slab &lt;bio-0&gt; at 0<br />[&nbsp; &nbsp; 0.150000] Switching to clocksource MIPS<br />[&nbsp; &nbsp; 0.160000] NET: Registered protocol family 2<br />[&nbsp; &nbsp; 0.170000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.180000] TCP established hash table entries: 1024 (order: 1, 8192 bytes)<br />[&nbsp; &nbsp; 0.180000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.190000] TCP: Hash tables configured (established 1024 bind 1024)<br />[&nbsp; &nbsp; 0.200000] TCP reno registered<br />[&nbsp; &nbsp; 0.200000] UDP hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.210000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.210000] NET: Registered protocol family 1<br />[&nbsp; &nbsp; 0.260000] squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />[&nbsp; &nbsp; 0.270000] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.<br />[&nbsp; &nbsp; 0.280000] msgmni has been set to 58<br />[&nbsp; &nbsp; 0.290000] io scheduler noop registered<br />[&nbsp; &nbsp; 0.290000] io scheduler deadline registered (default)<br />[&nbsp; &nbsp; 0.300000] Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled<br />[&nbsp; &nbsp; 0.300000] serial8250: ttyS0 at MMIO 0x10000500 (irq = 13) is a 16550A<br />[&nbsp; &nbsp; 0.310000] serial8250: ttyS1 at MMIO 0x10000c00 (irq = 20) is a 16550A<br />[&nbsp; &nbsp; 0.320000] physmap platform flash device: 00800000 at bf000000<br />[&nbsp; &nbsp; 0.330000] physmap-flash.0: Found 1 x16 devices at 0x0 in 16-bit bank. Manufacturer ID 0x0000c2 Chip ID 0x0022cb<br />[&nbsp; &nbsp; 0.340000] Amd/Fujitsu Extended Query Table at 0x0040<br />[&nbsp; &nbsp; 0.350000]&nbsp; &nbsp;Amd/Fujitsu Extended Query version 1.1.<br />[&nbsp; &nbsp; 0.350000] number of CFI chips: 1<br />[&nbsp; &nbsp; 0.370000] TCP westwood registered<br />[&nbsp; &nbsp; 0.380000] NET: Registered protocol family 17<br />[&nbsp; &nbsp; 0.380000] 8021q: 802.1Q VLAN Support v1.8<br />[&nbsp; &nbsp; 0.390000] VFS: Cannot open root device &quot;mtdblock4&quot; or unknown-block(0,0)<br />[&nbsp; &nbsp; 0.390000] Please append a correct &quot;root=&quot; boot option; here are the available partitions:<br />[&nbsp; &nbsp; 0.400000] 1f00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 8192 mtdblock0&nbsp; (driver?)<br />[&nbsp; &nbsp; 0.410000] Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167412">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">traxsboy</div>
					<div class="post-datetime">
						15 May 2012, 17:59					</div>
				</div>
				<div class="post-content content">
					<p>so far I&#039;ve got it to boot from the sysupgrade file from a generic build going to test it more to see how it goes used option 2 and it booted</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177143">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">badger32d</div>
					<div class="post-datetime">
						6 Sep 2012, 19:46					</div>
				</div>
				<div class="post-content content">
					<p>traxsboy - are you saying you got it booting using the openwrt-ramips-rt305x-w502u-squashfs-sysupgrade.bin build after compiling?</p><p>I&#039;ve got it successfully booting via the aforementioned option 2 and tftp flashing the openwrt-ramips-rt305x-w502u-squashfs-sysupgrade.bin build after compiling from svn.</p><p>I&#039;m going to attempt a web interface .img file, if I can get it working I&#039;ll update the wiki page for the R36/w502u since they are the same.</p><p>Anyone else even still interested in this? Took me long enough to pull this project back out and hack on it, and I don&#039;t see much traffic on it these days.</p><br /><p>edit: quick dump of what I&#039;ve got on pastebin. I&#039;m going to clean it up and write a &quot;how to&quot; based on the serial option 2 flash of the w502u build. <a href="http://pastebin.com/T1Vv67Sx">http://pastebin.com/T1Vv67Sx</a></p>											<p class="post-edited">(Last edited by <strong>badger32d</strong> on 6 Sep 2012, 19:54)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177175">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">lsoltero</div>
					<div class="post-datetime">
						7 Sep 2012, 00:04					</div>
				</div>
				<div class="post-content content">
					<p>&gt;Anyone else even still interested in this? Took me long enough to pull this project back out and hack on it, and I don&#039;t see much traffic on it these days.</p><p>we are definitely interested and actively using this board with openwrt.&nbsp; It works very well.&nbsp; We dont install from the sysupgrade however. we install the kernel and squashfs as two separate images.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177176">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">badger32d</div>
					<div class="post-datetime">
						7 Sep 2012, 00:08					</div>
				</div>
				<div class="post-content content">
					<p>I tried the kernel and squashfs several times as per ma.terol&#039;s guide on page 1 comment 6. Failed every time. Rebuilt without the HW550-3G designation (so all ramips-305x boards) and flashed the w502u image, that is what worked for me.</p><p>I&#039;d be interested in how to do the other method - I&#039;m addicted to tinkering with this right now, so it&#039;s a good time to figure this all out!</p><p>Thanks for the response lsoltero, I look forward to hearing what others are doing with this.</p><p>--Badger</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177178">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">lsoltero</div>
					<div class="post-datetime">
						7 Sep 2012, 00:19					</div>
				</div>
				<div class="post-content content">
					<p>what works for us is to build from a current svn update using RT288x/RT3xxx and RT305x based boards.<br />then select option 4 from uboot and ... where cp.b is modified appropriately for the size of the image.</p><br /><br /><p>setenv bootargs &#039;console=ttyS1,115200n8 root=/dev/mtdblock4 board=W502U rootfstype=squashfs,jffs2 noinitrd&#039;<br />saveenv</p><br /><p>tftp 0x80600000 openwrt-ramips-rt305x-uImage.bin<br />erase 0xbf050000 0xbf11ffff<br />cp.b 0x80600000 0xbf050000 c933b</p><p>tftp 0x80600000 openwrt-ramips-rt305x-root.squashfs<br />erase 0xbf120000 0xbf7fffff<br />cp.b 0x80600000 0xbf120000 003a0000</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177179">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">badger32d</div>
					<div class="post-datetime">
						7 Sep 2012, 00:21					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ll try again - the only difference in what I did was the board in bootargs, I compiled for and used the HW550-3G. I did change the image size in the cp.b statement, but maybe the 550 build was corrupt.</p><p>Thanks for the response again.</p><p>--Badger</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p178564">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">lsoltero</div>
					<div class="post-datetime">
						18 Sep 2012, 03:49					</div>
				</div>
				<div class="post-content content">
					<p>hello all,</p><p>so... i just did an svn update to get to the latest version of attitude adjustment and guess what... the ethernet ports now seem to be broken again.&nbsp; The VLAN s get created but neither static or DHCP address are assigned to the units.&nbsp; You can manually use ifconfig to assign the adaptes static IP addresses and you can ping then while logged in to the router but not over the network.&nbsp; This was the same symptom we had before</p><p><a href="https://dev.openwrt.org/changeset/29969">https://dev.openwrt.org/changeset/29969</a></p><p>however... i just checked and the patch has been applied to the new code.&nbsp; So its a mystery to me why this is not working.</p><p>I have a version of AA with kernel 3.2.5 that runs fine on this board.&nbsp; However,&nbsp; kernel 3.3.8 does not....</p><p>anyone have any ideas how to get the ethernet ports working again?</p><p>BTW... the wifi and all other devices seem to work as before.&nbsp; So... as far as I can tell only the Ethernet ports are broken although I do get the occasinal watch dog reset in the kernel logs.</p><p>--luis</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p178622">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">lsoltero</div>
					<div class="post-datetime">
						18 Sep 2012, 15:44					</div>
				</div>
				<div class="post-content content">
					<p>hello all again,</p><p>i just opened a second ticket which deals with USB sound card problems.</p><p><a href="https://dev.openwrt.org/ticket/12209">https://dev.openwrt.org/ticket/12209</a></p><p>--luis</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180417">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">karolis</div>
					<div class="post-datetime">
						13 Oct 2012, 10:32					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Attempting to install openwrt to R36, I can&#039;t get any serial data from R36. Any help would be appreciated.</p><p>Here is what I have been doing so far: Connect the pins as shown in picture:</p><p><a href="http://www.image-share.com/ijpg-1793-285.html"><span class="postimg"><img src="http://www.image-share.com/upload/1793/285m.jpg" alt="http://www.image-share.com/upload/1793/285m.jpg" /></span></a></p><p>Then execute this on bus pirate:</p><div class="codebox"><pre><code>HiZ&gt;m
1. HiZ
2. 1-WIRE
3. UART
4. I2C
5. SPI
6. 2WIRE
7. 3WIRE
8. LCD
9. DIO
x. exit(without change)

(1)&gt;3
Set serial port speed: (bps)
 1. 300
 2. 1200
 3. 2400
 4. 4800
 5. 9600
 6. 19200
 7. 38400
 8. 57600
 9. 115200
10. BRG raw value

(1)&gt;9
Data bits and parity:
 1. 8, NONE *default
 2. 8, EVEN
 3. 8, ODD
 4. 9, NONE
(1)&gt;1
Stop bits:
 1. 1 *default
 2. 2
(1)&gt;1
Receive polarity:
 1. Idle 1 *default
 2. Idle 0
(1)&gt;1
Select output type:
 1. Open drain (H=Hi-Z, L=GND)
 2. Normal (H=3.3V, L=GND)

(1)&gt;1
Ready
UART&gt;(0)
 0.Macro menu
 1.Transparent bridge
 2. Live monitor
 3.Bridge with flow control
UART&gt;(1)
UART bridge
Reset to exit
Are you sure? y </code></pre></div><p>As far as I understand, this switches bus pirate to transparent bridge mode and should display output from R36 serial interface, but I am getting no output at all. I have tried enabling/disabling flow control, changing rx/tx pins around. I also tried loopback test on bus pirate which worked OK.</p><p>thanks<br />Karolis</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180446">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">lsoltero</div>
					<div class="post-datetime">
						13 Oct 2012, 17:10					</div>
				</div>
				<div class="post-content content">
					<p>the serial port pinout for the w502u is identical to that of the Hornet.&nbsp; &nbsp;Pin 1 is the one closest to the USB connector.<br />serial port settings are 115200,8,n,1 no flow control or carrier detect.</p><p>take care</p><p>--luis</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180571">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">karolis</div>
					<div class="post-datetime">
						14 Oct 2012, 19:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>lsoltero wrote:</cite><blockquote><p>the serial port pinout for the w502u is identical to that of the Hornet.&nbsp; &nbsp;Pin 1 is the one closest to the USB connector.</p></blockquote></div><p>Not sure what the Hornet is, but I am quite sure I have the pins figured out. It should be GND / TX / RX / VCC starting from pin 1.</p><br /><div class="quotebox"><cite>lsoltero wrote:</cite><blockquote><p>serial port settings are 115200,8,n,1 no flow control or carrier detect.</p></blockquote></div><p>Isn&#039;t this exactly what I have bus pirate configured for? Since I am new to bus pirate, I copy/pasted the output here.</p><p>thanks,<br />Karolis</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180573">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">lsoltero</div>
					<div class="post-datetime">
						14 Oct 2012, 19:41					</div>
				</div>
				<div class="post-content content">
					<p>here is the link to the alfa hornet-ub <br /><a href="http://wiki.openwrt.org/toh/alfa.network/hornet-ub">http://wiki.openwrt.org/toh/alfa.network/hornet-ub</a><br />you will find the pintout there.</p><p>if this is not working then either<br />1. your serial port lever converter is not working<br />2. you don&#039;t have the pins assigned correctly<br />3. your terminal emulator does not work the way you think it does (i use kermit on a mac)<br />4. your R36 is busted.</p><p>sorry i could not be of more help...</p><p>take care.</p><p>--luis</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181193">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">dx.zone</div>
					<div class="post-datetime">
						22 Oct 2012, 14:36					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m having a problem flashing my Alfa Network R36 with OpenWRT (openwrt-ramips-rt305x-uImage.bin &amp; openwrt-ramips-rt305x-root.squashfs) from SVN. There is an error saying &quot;VFS: Cannot open root device &quot;mtdblock4&quot; or unknown-block(0,0)&quot;. I&#039;ve tried to re-flash the R36 over &amp; over getting stuck with this error. </p><p>This is the output of the step taken during the flashing:</p><p>U-Boot 1.1.3 (May 14 2012 - 14:18:32)</p><p>Board: Ralink APSoC DRAM:&nbsp; 32 MB<br />relocate_code Pointer at: 81fb0000<br />flash_protect ON: from 0xBF000000 to 0xBF01D423<br />flash_protect ON: from 0xBF030000 to 0xBF030FFF<br />============================================<br />Ralink UBoot Version: 3.3<br />--------------------------------------------<br />ASIC 3052_MP2 (Port5&lt;-&gt;None)<br />DRAM component: 256 Mbits SDR<br />DRAM bus: 16 bit<br />Total memory: 32 MBytes<br />Flash component: NOR Flash<br />Date:May 14 2012&nbsp; Time:14:18:32<br />============================================<br />icache: sets:256, ways:4, linesz:32 ,total:32768<br />dcache: sets:128, ways:4, linesz:32 ,total:16384</p><p> ##### The CPU freq = 320 MHZ ####</p><p>SDRAM bus set to 16 bit<br /> SDRAM size =32 Mbytes</p><p>Please choose the operation:<br />&nbsp; &nbsp;1: Load system code to SDRAM via TFTP.<br />&nbsp; &nbsp;2: Load system code then write to Flash via TFTP.<br />&nbsp; &nbsp;3: Boot system code via Flash (default).<br />&nbsp; &nbsp;4: Entr boot command line interface.<br />&nbsp; &nbsp;9: Load Boot Loader code then write to Flash via TFTP.</p><p>You choosed 4</p><p> 0</p><br /><p>4: System Enter Boot Command Line Interface.</p><p>U-Boot 1.1.3 (May 14 2012 - 14:18:32)<br />RT3052 # setenv bootargs &#039;console=ttyS1,115200n8 root=/dev/mtdblock4 board=W502U<br /> rootfstype=squashfs,jffs2 noinitrd&#039;<br />RT3052 # saveenv<br />Saving Environment to Flash...<br />File: env_flash.c, Func: saveenv, Line: 302<br />copy old content: sect_addr: BF030000&nbsp; env_addr: BF030000&nbsp; offset: 00000000<br />Protect off BF030000 ... BF03FFFF</p><p> b_end =BF7FFFFF<br />Un-Protecting sectors 10..10 in bank 1<br />Un-Protected 1 sectors<br />Erasing Flash...<br /> b_end =BF7FFFFF<br />Erase Flash from 0xbf030000 to 0xbf03ffff in Bank # 1</p><p> erase sector&nbsp; = 10<br />sect = 10,s_last = 10,erase poll = 884456<br /> done<br />Erased 1 sectors<br />Writing to Flash... done</p><p> b_end =BF7FFFFF<br />Protecting sectors 10..10 in bank 1<br />Protected 1 sectors<br />RT3052 # tftp 0x80600000 openwrt-ramips-rt305x-uImage.bin</p><p> netboot_common, argc= 3</p><p> NetTxPacket = 0x81FE5640</p><p> KSEG1ADDR(NetTxPacket) = 0xA1FE5640</p><p> NetLoop,call eth_halt !</p><p> NetLoop,call eth_init !<br />Trying Eth0 (10/100-M)</p><p> Waitting for RX_DMA_BUSY status Start... done</p><p> Header Payload scatter function is Disable !!</p><p> ETH_STATE_ACTIVE!!<br />Using Eth0 (10/100-M) device<br />TFTP from server 10.10.10.3; our IP address is 10.10.10.123<br />Filename &#039;openwrt-ramips-rt305x-uImage.bin&#039;.</p><p> TIMEOUT_COUNT=10,Load address: 0x80600000<br />Loading: Got ARP REPLY, set server/gtwy eth addr (c8:2a:14:01:85:06)<br />Got it<br />T Got ARP REQUEST, return our IP<br />#<br /> first block received<br />################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;##################################<br />done<br />Bytes transferred = 839013 (ccd65 hex)<br />NetBootFileXferSize= 000ccd65<br />RT3052 # erase 0xbf050000 0xbf11ffff</p><p> b_end =BF7FFFFF<br />Erase Flash from 0xbf050000 to 0xbf11ffff in Bank # 1</p><p> erase sector&nbsp; = 12<br />sect = 12,s_last = 24,erase poll = 923626</p><p> erase sector&nbsp; = 13<br />sect = 13,s_last = 24,erase poll = 920885</p><p> erase sector&nbsp; = 14<br />*sect = 14,s_last = 24,erase poll = 907302</p><p> erase sector&nbsp; = 15<br />sect = 15,s_last = 24,erase poll = 912879</p><p> erase sector&nbsp; = 16<br />*sect = 16,s_last = 24,erase poll = 949205</p><p> erase sector&nbsp; = 17<br />sect = 17,s_last = 24,erase poll = 928922</p><p> erase sector&nbsp; = 18<br />*sect = 18,s_last = 24,erase poll = 902496</p><p> erase sector&nbsp; = 19<br />sect = 19,s_last = 24,erase poll = 938975</p><p> erase sector&nbsp; = 20<br />sect = 20,s_last = 24,erase poll = 922256</p><p> erase sector&nbsp; = 21<br />*sect = 21,s_last = 24,erase poll = 913729</p><p> erase sector&nbsp; = 22<br />sect = 22,s_last = 24,erase poll = 913854</p><p> erase sector&nbsp; = 23<br />*sect = 23,s_last = 24,erase poll = 925475</p><p> erase sector&nbsp; = 24<br />sect = 24,s_last = 24,erase poll = 930973<br /> done<br />Erased 13 sectors<br />RT3052 # cp.b 0x80600000 0xbf050000 ccd65<br />Copy to Flash...<br /> Copy 839013 byte to Flash...<br /> addr = 0xBF0B187E ,cnt=439527<br /> addr = 0xBF113112 ,cnt=40019 done<br />RT3052 # tftp 0x80600000 openwrt-ramips-rt305x-root.squashfs</p><p> netboot_common, argc= 3</p><p> KSEG1ADDR(NetTxPacket) = 0xA1FE5640</p><p> NetLoop,call eth_halt !</p><p> NetLoop,call eth_init !<br />Trying Eth0 (10/100-M)</p><p> ETH_STATE_ACTIVE!!<br />*** ERROR: `serverip&#039; not set<br />RT3052 #reset</p><p>U-Boot 1.1.3 (May 14 2012 - 14:18:32)</p><p>Board: Ralink APSoC DRAM:&nbsp; 32 MB<br />relocate_code Pointer at: 81fb0000<br />flash_protect ON: from 0xBF000000 to 0xBF01D423<br />flash_protect ON: from 0xBF030000 to 0xBF030FFF<br />============================================<br />Ralink UBoot Version: 3.3<br />--------------------------------------------<br />ASIC 3052_MP2 (Port5&lt;-&gt;None)<br />DRAM component: 256 Mbits SDR<br />DRAM bus: 16 bit<br />Total memory: 32 MBytes<br />Flash component: NOR Flash<br />Date:May 14 2012&nbsp; Time:14:18:32<br />============================================<br />icache: sets:256, ways:4, linesz:32 ,total:32768<br />dcache: sets:128, ways:4, linesz:32 ,total:16384</p><p> ##### The CPU freq = 320 MHZ ####</p><p>SDRAM bus set to 16 bit<br /> SDRAM size =32 Mbytes</p><p>Please choose the operation:<br />&nbsp; &nbsp;1: Load system code to SDRAM via TFTP.<br />&nbsp; &nbsp;2: Load system code then write to Flash via TFTP.<br />&nbsp; &nbsp;3: Boot system code via Flash (default).<br />&nbsp; &nbsp;4: Entr boot command line interface.<br />&nbsp; &nbsp;9: Load Boot Loader code then write to Flash via TFTP.</p><p>You choosed 4</p><p> 0</p><br /><p>4: System Enter Boot Command Line Interface.</p><p>U-Boot 1.1.3 (May 14 2012 - 14:18:32)<br />RT3052 # tftp 0x80600000 openwrt-ramips-rt305x-root.squashfs</p><p> netboot_common, argc= 3</p><p> NetTxPacket = 0x81FE5640</p><p> KSEG1ADDR(NetTxPacket) = 0xA1FE5640</p><p> NetLoop,call eth_halt !</p><p> NetLoop,call eth_init !<br />Trying Eth0 (10/100-M)</p><p> Waitting for RX_DMA_BUSY status Start... done</p><p> Header Payload scatter function is Disable !!</p><p> ETH_STATE_ACTIVE!!<br />Using Eth0 (10/100-M) device<br />TFTP from server 10.10.10.3; our IP address is 10.10.10.123<br />Filename &#039;openwrt-ramips-rt305x-root.squashfs&#039;.</p><p> TIMEOUT_COUNT=10,Load address: 0x80600000<br />Loading: Got ARP REPLY, set server/gtwy eth addr (c8:2a:14:01:85:06)<br />Got it<br />T #<br /> first block received<br />################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;########<br />done<br />Bytes transferred = 1703936 (1a0000 hex)<br />NetBootFileXferSize= 001a0000<br />RT3052 # erase 0xbf120000 0xbf7fffff</p><p> b_end =BF7FFFFF<br />Erase Flash from 0xbf120000 to 0xbf7fffff in Bank # 1</p><p> erase sector&nbsp; = 25<br />sect = 25,s_last = 134,erase poll = 905793</p><p> erase sector&nbsp; = 26<br />sect = 26,s_last = 134,erase poll = 913961</p><p> erase sector&nbsp; = 27<br />*sect = 27,s_last = 134,erase poll = 914332</p><p> erase sector&nbsp; = 28<br />sect = 28,s_last = 134,erase poll = 937357</p><p> erase sector&nbsp; = 29<br />*sect = 29,s_last = 134,erase poll = 916634</p><p> erase sector&nbsp; = 30<br />sect = 30,s_last = 134,erase poll = 917960</p><p> erase sector&nbsp; = 31<br />*sect = 31,s_last = 134,erase poll = 911410</p><p> erase sector&nbsp; = 32<br />sect = 32,s_last = 134,erase poll = 905120</p><p> erase sector&nbsp; = 33<br />sect = 33,s_last = 134,erase poll = 921065</p><p> erase sector&nbsp; = 34<br />*sect = 34,s_last = 134,erase poll = 915220</p><p> erase sector&nbsp; = 35<br />sect = 35,s_last = 134,erase poll = 919786</p><p> erase sector&nbsp; = 36<br />*sect = 36,s_last = 134,erase poll = 904544</p><p> erase sector&nbsp; = 37<br />sect = 37,s_last = 134,erase poll = 907201</p><p> erase sector&nbsp; = 38<br />*sect = 38,s_last = 134,erase poll = 906665</p><p> erase sector&nbsp; = 39<br />sect = 39,s_last = 134,erase poll = 936327</p><p> erase sector&nbsp; = 40<br />sect = 40,s_last = 134,erase poll = 941321</p><p> erase sector&nbsp; = 41<br />*sect = 41,s_last = 134,erase poll = 893844</p><p> erase sector&nbsp; = 42<br />sect = 42,s_last = 134,erase poll = 911130</p><p> erase sector&nbsp; = 43<br />*sect = 43,s_last = 134,erase poll = 908383</p><p> erase sector&nbsp; = 44<br />sect = 44,s_last = 134,erase poll = 924135</p><p> erase sector&nbsp; = 45<br />*sect = 45,s_last = 134,erase poll = 935341</p><p> erase sector&nbsp; = 46<br />sect = 46,s_last = 134,erase poll = 906005</p><p> erase sector&nbsp; = 47<br />*sect = 47,s_last = 134,erase poll = 931963</p><p> erase sector&nbsp; = 48<br />sect = 48,s_last = 134,erase poll = 916189</p><p> erase sector&nbsp; = 49<br />sect = 49,s_last = 134,erase poll = 730565</p><p> erase sector&nbsp; = 50<br />*sect = 50,s_last = 134,erase poll = 759247</p><p> erase sector&nbsp; = 51<br />sect = 51,s_last = 134,erase poll = 905761</p><p> erase sector&nbsp; = 52<br />*sect = 52,s_last = 134,erase poll = 927495</p><p> erase sector&nbsp; = 53<br />sect = 53,s_last = 134,erase poll = 923289</p><p> erase sector&nbsp; = 54<br />sect = 54,s_last = 134,erase poll = 931667</p><p> erase sector&nbsp; = 55<br />*sect = 55,s_last = 134,erase poll = 894431</p><p> erase sector&nbsp; = 56<br />sect = 56,s_last = 134,erase poll = 906941</p><p> erase sector&nbsp; = 57<br />*sect = 57,s_last = 134,erase poll = 922321</p><p> erase sector&nbsp; = 58<br />sect = 58,s_last = 134,erase poll = 945511</p><p> erase sector&nbsp; = 59<br />*sect = 59,s_last = 134,erase poll = 905686</p><p> erase sector&nbsp; = 60<br />sect = 60,s_last = 134,erase poll = 905562</p><p> erase sector&nbsp; = 61<br />sect = 61,s_last = 134,erase poll = 913183</p><p> erase sector&nbsp; = 62<br />*sect = 62,s_last = 134,erase poll = 925926</p><p> erase sector&nbsp; = 63<br />sect = 63,s_last = 134,erase poll = 907480</p><p> erase sector&nbsp; = 64<br />*sect = 64,s_last = 134,erase poll = 905694</p><p> erase sector&nbsp; = 65<br />sect = 65,s_last = 134,erase poll = 935981</p><p> erase sector&nbsp; = 66<br />*sect = 66,s_last = 134,erase poll = 944697</p><p> erase sector&nbsp; = 67<br />sect = 67,s_last = 134,erase poll = 945201</p><p> erase sector&nbsp; = 68<br />*sect = 68,s_last = 134,erase poll = 943822</p><p> erase sector&nbsp; = 69<br />sect = 69,s_last = 134,erase poll = 918539</p><p> erase sector&nbsp; = 70<br />sect = 70,s_last = 134,erase poll = 934037</p><p> erase sector&nbsp; = 71<br />*sect = 71,s_last = 134,erase poll = 916747</p><p> erase sector&nbsp; = 72<br />sect = 72,s_last = 134,erase poll = 905754</p><p> erase sector&nbsp; = 73<br />*sect = 73,s_last = 134,erase poll = 905842</p><p> erase sector&nbsp; = 74<br />sect = 74,s_last = 134,erase poll = 924517</p><p> erase sector&nbsp; = 75<br />*sect = 75,s_last = 134,erase poll = 929249</p><p> erase sector&nbsp; = 76<br />sect = 76,s_last = 134,erase poll = 936047</p><p> erase sector&nbsp; = 77<br />sect = 77,s_last = 134,erase poll = 906590</p><p> erase sector&nbsp; = 78<br />*sect = 78,s_last = 134,erase poll = 922481</p><p> erase sector&nbsp; = 79<br />sect = 79,s_last = 134,erase poll = 941176</p><p> erase sector&nbsp; = 80<br />*sect = 80,s_last = 134,erase poll = 894832</p><p> erase sector&nbsp; = 81<br />sect = 81,s_last = 134,erase poll = 907660</p><p> erase sector&nbsp; = 82<br />*sect = 82,s_last = 134,erase poll = 943173</p><p> erase sector&nbsp; = 83<br />sect = 83,s_last = 134,erase poll = 913677</p><p> erase sector&nbsp; = 84<br />*sect = 84,s_last = 134,erase poll = 968274</p><p> erase sector&nbsp; = 85<br />sect = 85,s_last = 134,erase poll = 910459</p><p> erase sector&nbsp; = 86<br />sect = 86,s_last = 134,erase poll = 924996</p><p> erase sector&nbsp; = 87<br />*sect = 87,s_last = 134,erase poll = 966647</p><p> erase sector&nbsp; = 88<br />sect = 88,s_last = 134,erase poll = 912712</p><p> erase sector&nbsp; = 89<br />*sect = 89,s_last = 134,erase poll = 928316</p><p> erase sector&nbsp; = 90<br />sect = 90,s_last = 134,erase poll = 913635</p><p> erase sector&nbsp; = 91<br />*sect = 91,s_last = 134,erase poll = 923367</p><p> erase sector&nbsp; = 92<br />sect = 92,s_last = 134,erase poll = 930663</p><p> erase sector&nbsp; = 93<br />*sect = 93,s_last = 134,erase poll = 906048</p><p> erase sector&nbsp; = 94<br />sect = 94,s_last = 134,erase poll = 907363</p><p> erase sector&nbsp; = 95<br />sect = 95,s_last = 134,erase poll = 920027</p><p> erase sector&nbsp; = 96<br />*sect = 96,s_last = 134,erase poll = 906230</p><p> erase sector&nbsp; = 97<br />sect = 97,s_last = 134,erase poll = 918468</p><p> erase sector&nbsp; = 98<br />*sect = 98,s_last = 134,erase poll = 910242</p><p> erase sector&nbsp; = 99<br />sect = 99,s_last = 134,erase poll = 907736</p><p> erase sector&nbsp; = 100<br />*sect = 100,s_last = 134,erase poll = 955930</p><p> erase sector&nbsp; = 101<br />sect = 101,s_last = 134,erase poll = 917131</p><p> erase sector&nbsp; = 102<br />sect = 102,s_last = 134,erase poll = 933836</p><p> erase sector&nbsp; = 103<br />*sect = 103,s_last = 134,erase poll = 906082</p><p> erase sector&nbsp; = 104<br />sect = 104,s_last = 134,erase poll = 939863</p><p> erase sector&nbsp; = 105<br />*sect = 105,s_last = 134,erase poll = 923453</p><p> erase sector&nbsp; = 106<br />sect = 106,s_last = 134,erase poll = 895255</p><p> erase sector&nbsp; = 107<br />*sect = 107,s_last = 134,erase poll = 923853</p><p> erase sector&nbsp; = 108<br />sect = 108,s_last = 134,erase poll = 926763</p><p> erase sector&nbsp; = 109<br />*sect = 109,s_last = 134,erase poll = 906215</p><p> erase sector&nbsp; = 110<br />sect = 110,s_last = 134,erase poll = 911742</p><p> erase sector&nbsp; = 111<br />sect = 111,s_last = 134,erase poll = 937213</p><p> erase sector&nbsp; = 112<br />*sect = 112,s_last = 134,erase poll = 909709</p><p> erase sector&nbsp; = 113<br />sect = 113,s_last = 134,erase poll = 927478</p><p> erase sector&nbsp; = 114<br />*sect = 114,s_last = 134,erase poll = 918589</p><p> erase sector&nbsp; = 115<br />sect = 115,s_last = 134,erase poll = 906213</p><p> erase sector&nbsp; = 116<br />*sect = 116,s_last = 134,erase poll = 908162</p><p> erase sector&nbsp; = 117<br />sect = 117,s_last = 134,erase poll = 930556</p><p> erase sector&nbsp; = 118<br />sect = 118,s_last = 134,erase poll = 935583</p><p> erase sector&nbsp; = 119<br />*sect = 119,s_last = 134,erase poll = 917271</p><p> erase sector&nbsp; = 120<br />sect = 120,s_last = 134,erase poll = 906237</p><p> erase sector&nbsp; = 121<br />*sect = 121,s_last = 134,erase poll = 911978</p><p> erase sector&nbsp; = 122<br />sect = 122,s_last = 134,erase poll = 920181</p><p> erase sector&nbsp; = 123<br />*sect = 123,s_last = 134,erase poll = 907766</p><p> erase sector&nbsp; = 124<br />sect = 124,s_last = 134,erase poll = 945507</p><p> erase sector&nbsp; = 125<br />sect = 125,s_last = 134,erase poll = 920109</p><p> erase sector&nbsp; = 126<br />*sect = 126,s_last = 134,erase poll = 934846</p><p> erase sector&nbsp; = 127<br />sect = 127,s_last = 134,erase poll = 922319</p><p> erase sector&nbsp; = 128<br />*sect = 128,s_last = 134,erase poll = 927529</p><p> erase sector&nbsp; = 129<br />sect = 129,s_last = 134,erase poll = 895298</p><p> erase sector&nbsp; = 130<br />*sect = 130,s_last = 134,erase poll = 921419</p><p> erase sector&nbsp; = 131<br />sect = 131,s_last = 134,erase poll = 921916</p><p> erase sector&nbsp; = 132<br />*sect = 132,s_last = 134,erase poll = 942516</p><p> erase sector&nbsp; = 133<br />sect = 133,s_last = 134,erase poll = 923465</p><p> erase sector&nbsp; = 134<br />sect = 134,s_last = 134,erase poll = 917343<br /> done<br />Erased 110 sectors<br />RT3052 # cp.b 0x80600000 0xbf120000 1a0000<br />Copy to Flash...<br /> Copy 1703936 byte to Flash...<br /> addr = 0xBF181882 ,cnt=1304446<br /> addr = 0xBF1E3150 ,cnt=904880<br /> addr = 0xBF244A00 ,cnt=505344<br /> addr = 0xBF2A67E8 ,cnt=104472 done<br />RT3052 # reset</p><br /><br /><p>This is the output after rebooting the R36:</p><br /><p>U-Boot 1.1.3 (May 14 2012 - 14:18:32)</p><p>Board: Ralink APSoC DRAM:&nbsp; 32 MB<br />relocate_code Pointer at: 81fb0000<br />flash_protect ON: from 0xBF000000 to 0xBF01D423<br />flash_protect ON: from 0xBF030000 to 0xBF030FFF<br />============================================<br />Ralink UBoot Version: 3.3<br />--------------------------------------------<br />ASIC 3052_MP2 (Port5&lt;-&gt;None)<br />DRAM component: 256 Mbits SDR<br />DRAM bus: 16 bit<br />Total memory: 32 MBytes<br />Flash component: NOR Flash<br />Date:May 14 2012&nbsp; Time:14:18:32<br />============================================<br />icache: sets:256, ways:4, linesz:32 ,total:32768<br />dcache: sets:128, ways:4, linesz:32 ,total:16384</p><p> ##### The CPU freq = 320 MHZ ####</p><p>SDRAM bus set to 16 bit<br /> SDRAM size =32 Mbytes</p><p>Please choose the operation:<br />&nbsp; &nbsp;1: Load system code to SDRAM via TFTP.<br />&nbsp; &nbsp;2: Load system code then write to Flash via TFTP.<br />&nbsp; &nbsp;3: Boot system code via Flash (default).<br />&nbsp; &nbsp;4: Entr boot command line interface.<br />&nbsp; &nbsp;9: Load Boot Loader code then write to Flash via TFTP.<br /> 0</p><p>3: System Boot system code via Flash.<br />## Booting image at bf050000 ...<br />&nbsp; &nbsp;Image Name:&nbsp; &nbsp;MIPS OpenWrt Linux-3.3.8<br />&nbsp; &nbsp;Created:&nbsp; &nbsp; &nbsp; 2012-10-01&nbsp; 19:54:42 UTC<br />&nbsp; &nbsp;Image Type:&nbsp; &nbsp;MIPS Linux Kernel Image (lzma compressed)<br />&nbsp; &nbsp;Data Size:&nbsp; &nbsp; 838949 Bytes = 819.3 kB<br />&nbsp; &nbsp;Load Address: 80000000<br />&nbsp; &nbsp;Entry Point:&nbsp; 80000000<br />&nbsp; &nbsp;Verifying Checksum ... OK<br />&nbsp; &nbsp;Uncompressing Kernel Image ... OK<br />No initrd<br />## Transferring control to Linux (at address 80000000) ...<br />## Giving linux memsize in MB, 32</p><p>Starting kernel ...</p><p>[&nbsp; &nbsp; 0.000000] Linux version 3.3.8 (user@netbox) (gcc version 4.6.3 20120201 (pr<br />erelease) (Linaro GCC 4.6-2012.02) ) #1 Mon Oct 1 15:54:38 AST 2012<br />[&nbsp; &nbsp; 0.000000] bootconsole [early0] enabled<br />[&nbsp; &nbsp; 0.000000] CPU revision is: 0001964c (MIPS 24KEc)<br />[&nbsp; &nbsp; 0.000000] Ralink RT3350 id:1 rev:2 running at 320.00 MHz<br />[&nbsp; &nbsp; 0.000000] Determined physical RAM map:<br />[&nbsp; &nbsp; 0.000000]&nbsp; memory: 02000000 @ 00000000 (usable)<br />[&nbsp; &nbsp; 0.000000] Initrd not found or empty - disabling initrd<br />[&nbsp; &nbsp; 0.000000] Zone PFN ranges:<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal&nbsp; &nbsp;0x00000000 -&gt; 0x00002000<br />[&nbsp; &nbsp; 0.000000] Movable zone start PFN for each node<br />[&nbsp; &nbsp; 0.000000] Early memory PFN ranges<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp; &nbsp;0: 0x00000000 -&gt; 0x00002000<br />[&nbsp; &nbsp; 0.000000] Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pag<br />es: 8128<br />[&nbsp; &nbsp; 0.000000] Kernel command line:&nbsp; console=ttyS1,115200n8 root=/dev/mtdblock4<br />board=W502U rootfstype=squashfs,jffs2 noinitrd rootfstype=squashfs,jffs2<br />[&nbsp; &nbsp; 0.000000] PID hash table entries: 128 (order: -3, 512 bytes)<br />[&nbsp; &nbsp; 0.000000] Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)<br />[&nbsp; &nbsp; 0.000000] Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)<br />[&nbsp; &nbsp; 0.000000] Primary instruction cache 32kB, VIPT, 4-way, linesize 32 bytes.<br />[&nbsp; &nbsp; 0.000000] Primary data cache 16kB, 4-way, VIPT, no aliases, linesize 32 byt<br />es<br />[&nbsp; &nbsp; 0.000000] Writing ErrCtl register=0002aac9<br />[&nbsp; &nbsp; 0.000000] Readback ErrCtl register=0002aac9<br />[&nbsp; &nbsp; 0.000000] Memory: 29820k/32768k available (1920k kernel code, 2948k reserve<br />d, 327k data, 172k init, 0k highmem)<br />[&nbsp; &nbsp; 0.000000] SLUB: Genslabs=9, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, No<br />des=1<br />[&nbsp; &nbsp; 0.000000] NR_IRQS:48<br />[&nbsp; &nbsp; 0.000000] console [ttyS1] enabled, bootconsole disabled<br />[&nbsp; &nbsp; 0.000000] console [ttyS1] enabled, bootconsole disabled<br />[&nbsp; &nbsp; 0.010000] Calibrating delay loop... 212.58 BogoMIPS (lpj=1062912)<br />[&nbsp; &nbsp; 0.090000] pid_max: default: 32768 minimum: 301<br />[&nbsp; &nbsp; 0.090000] Mount-cache hash table entries: 512<br />[&nbsp; &nbsp; 0.100000] NET: Registered protocol family 16<br />[&nbsp; &nbsp; 0.110000] MIPS: machine is ALFA Networks W502U<br />[&nbsp; &nbsp; 0.110000] gpiochip_add: registered GPIOs 0 to 23 on device: RT305X-GPIO0<br />[&nbsp; &nbsp; 0.120000] gpiochip_add: registered GPIOs 24 to 39 on device: RT305X-GPIO1<br />[&nbsp; &nbsp; 0.120000] gpiochip_add: registered GPIOs 40 to 51 on device: RT305X-GPIO2<br />[&nbsp; &nbsp; 0.150000] bio: create slab &lt;bio-0&gt; at 0<br />[&nbsp; &nbsp; 0.160000] Switching to clocksource MIPS<br />[&nbsp; &nbsp; 0.170000] NET: Registered protocol family 2<br />[&nbsp; &nbsp; 0.180000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.190000] TCP established hash table entries: 1024 (order: 1, 8192 bytes)<br />[&nbsp; &nbsp; 0.190000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.200000] TCP: Hash tables configured (established 1024 bind 1024)<br />[&nbsp; &nbsp; 0.210000] TCP reno registered<br />[&nbsp; &nbsp; 0.210000] UDP hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.220000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.220000] NET: Registered protocol family 1<br />[&nbsp; &nbsp; 0.270000] squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />[&nbsp; &nbsp; 0.280000] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY<br />) (c) 2001-2006 Red Hat, Inc.<br />[&nbsp; &nbsp; 0.290000] msgmni has been set to 58<br />[&nbsp; &nbsp; 0.300000] io scheduler noop registered<br />[&nbsp; &nbsp; 0.300000] io scheduler deadline registered (default)<br />[&nbsp; &nbsp; 0.310000] Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled<br />[&nbsp; &nbsp; 0.310000] serial8250: ttyS0 at MMIO 0x10000500 (irq = 13) is a 16550A<br />[&nbsp; &nbsp; 0.320000] serial8250: ttyS1 at MMIO 0x10000c00 (irq = 20) is a 16550A<br />[&nbsp; &nbsp; 0.330000] physmap platform flash device: 00800000 at bf000000<br />[&nbsp; &nbsp; 0.340000] physmap-flash.0: Found 1 x16 devices at 0x0 in 16-bit bank. Manuf<br />acturer ID 0x0000c2 Chip ID 0x0022cb<br />[&nbsp; &nbsp; 0.350000] Amd/Fujitsu Extended Query Table at 0x0040<br />[&nbsp; &nbsp; 0.360000]&nbsp; &nbsp;Amd/Fujitsu Extended Query version 1.1.<br />[&nbsp; &nbsp; 0.360000] number of CFI chips: 1<br />[&nbsp; &nbsp; 0.380000] ramips-wdt ramips-wdt: timeout value must be 0 &lt; timeout &lt;= 40, u<br />sing 40<br />[&nbsp; &nbsp; 0.390000] TCP cubic registered<br />[&nbsp; &nbsp; 0.390000] NET: Registered protocol family 17<br />[&nbsp; &nbsp; 0.400000] 8021q: 802.1Q VLAN Support v1.8<br />[&nbsp; &nbsp; 0.400000] VFS: Cannot open root device &quot;mtdblock4&quot; or unknown-block(0,0)<br />[&nbsp; &nbsp; 0.410000] Please append a correct &quot;root=&quot; boot option; here are the availab<br />le partitions:<br />[&nbsp; &nbsp; 0.420000] 1f00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 8192 mtdblock0&nbsp; (driver?)<br />[&nbsp; &nbsp; 0.430000] Kernel panic - not syncing: VFS: Unable to mount root fs on unkno<br />wn-block(0,0)</p><br /><p>Am I missing something or doing something wrong? Can anyone help me on this?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p184272">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">lsoltero</div>
					<div class="post-datetime">
						25 Nov 2012, 17:30					</div>
				</div>
				<div class="post-content content">
					<p>if using the AA 12.09 beta then in uboot select 2 and then point it to the sysupgrade.bin file.</p><p>however... note that the ethernet ports do not work in this build.</p><p>--luis</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p184606">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">lichtwald</div>
					<div class="post-datetime">
						28 Nov 2012, 21:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>lsoltero wrote:</cite><blockquote><p>if using the AA 12.09 beta then in uboot select 2 and then point it to the sysupgrade.bin file.</p><p>however... note that the ethernet ports do not work in this build.</p><p>--luis</p></blockquote></div><p>I got my R36 flashing successfully, but ran into the no ethernet problem you mentioned.&nbsp; Is there a known working build that I should try to run?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p184607">
				<div class="post-metadata">
					<div class="post-num">Post #42</div>
					<div class="post-author">lsoltero</div>
					<div class="post-datetime">
						28 Nov 2012, 21:45					</div>
				</div>
				<div class="post-content content">
					<p>yes...</p><br /><p>we got the ethernet ports for the R36 working with the latest version of OpenWRT AA using the fix proposed by @gunther<br /><a href="https://dev.openwrt.org/ticket/12125#comment:12">https://dev.openwrt.org/ticket/12125#comment:12</a></p><p>this makes me suspect that @thess (<a href="https://dev.openwrt.org/ticket/12125#comment:13">https://dev.openwrt.org/ticket/12125#comment:13</a>)</p><p>is correct when he states that the problem is caused by</p><p>In addition, the new esw driver expects the bootloader to have setup the switch config default for the router. Unfortunately, most Uboot based RT305x routers have the switch configured in &quot;dump&quot; mode where all ports are enabled and vlans disabled. I suspect there needs to be additional board specific setup (in mach_xxxx.c files) done for the default switch configuration on each these devices.</p><br /><p>--luis</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p185154">
				<div class="post-metadata">
					<div class="post-num">Post #43</div>
					<div class="post-author">lichtwald</div>
					<div class="post-datetime">
						4 Dec 2012, 01:38					</div>
				</div>
				<div class="post-content content">
					<p>Thanks Luis,</p><p>Pulled from trunk and built, but still none of the interfaces work.&nbsp; I haven&#039;t delved into the code yet, but is the AA branch different than the bleeding edge?</p><p>All that aside, I&#039;m eager to start fiddling the code and figure out what&#039;s going on.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p185158">
				<div class="post-metadata">
					<div class="post-num">Post #44</div>
					<div class="post-author">lsoltero</div>
					<div class="post-datetime">
						4 Dec 2012, 02:30					</div>
				</div>
				<div class="post-content content">
					<p>i wonder why that didn&#039;t work for you... i am using r34332 which is pretty close to bleeding edge.</p><p>try reverting to 34332 and then apply @gunthers work around.</p><p>see if have any luck with that you.&nbsp; You should... i did....</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p187856">
				<div class="post-metadata">
					<div class="post-num">Post #45</div>
					<div class="post-author">beyondcr</div>
					<div class="post-datetime">
						4 Jan 2013, 12:03					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>lsoltero wrote:</cite><blockquote><p>i wonder why that didn&#039;t work for you... i am using r34332 which is pretty close to bleeding edge.</p><p>try reverting to 34332 and then apply @gunthers work around.</p><p>see if have any luck with that you.&nbsp; You should... i did....</p></blockquote></div><p>Ok I am new at this but slowly learning. If you don&#039;t mind me asking, What are you using for the config target profile? I could not get it to show the W502U in menuconfig.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p187881">
				<div class="post-metadata">
					<div class="post-num">Post #46</div>
					<div class="post-author">lsoltero</div>
					<div class="post-datetime">
						4 Jan 2013, 17:30					</div>
				</div>
				<div class="post-content content">
					<p>you use the RT305X profile and then select Default for the target. this will build all of the RT305X routers.&nbsp; The make will fail however if your image is larger than 4Mb since the Default profile builds both 8M and 4M images.&nbsp; If you image is to be larger than 4Mb then you will need to edit the make files to either remove the 4Mb routers or add a profile specifically for the w502u router.</p><p>take care.</p><p>--luis</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p188285">
				<div class="post-metadata">
					<div class="post-num">Post #47</div>
					<div class="post-author">beyondcr</div>
					<div class="post-datetime">
						8 Jan 2013, 12:40					</div>
				</div>
				<div class="post-content content">
					<p>Thank you, I got it working. Now I have a problem when connecting as a client via a usb wifi card, everything connects but when doing a speed test I get around 400kbs on a 25mbps line... and if I put a little load on the router eventually the usb wifi locks up, I think it has somthing to do with mem... here is the top command without the router being under load.</p><br /><br /><p>Mem: 21484K used, 8504K free, 0K shrd, 2176K buff, 6916K cached<br />CPU:&nbsp; &nbsp;0% usr&nbsp; &nbsp;1% sys&nbsp; &nbsp;0% nic&nbsp; 97% idle&nbsp; &nbsp;0% io&nbsp; &nbsp;0% irq&nbsp; &nbsp;0% sirq<br />Load average: 0.00 0.01 0.11 1/46 7868<br />&nbsp; PID&nbsp; PPID USER&nbsp; &nbsp; &nbsp;STAT&nbsp; &nbsp;VSZ %VSZ %CPU COMMAND<br /> 6632&nbsp; &nbsp; &nbsp;1 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1396&nbsp; &nbsp;5%&nbsp; &nbsp;1% hostapd -P /var/run/wifi-phy0.pid -B<br /> 7868&nbsp; &nbsp;375 root&nbsp; &nbsp; &nbsp;R&nbsp; &nbsp; &nbsp;1508&nbsp; &nbsp;5%&nbsp; &nbsp;1% top<br />&nbsp; &nbsp; 3&nbsp; &nbsp; &nbsp;2 root&nbsp; &nbsp; &nbsp;SW&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;0%&nbsp; &nbsp;0% [ksoftirqd/0]<br />&nbsp; 511&nbsp; &nbsp; &nbsp;1 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1540&nbsp; &nbsp;5%&nbsp; &nbsp;0% /sbin/netifd<br />&nbsp; 497&nbsp; &nbsp; &nbsp;1 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1516&nbsp; &nbsp;5%&nbsp; &nbsp;0% /sbin/syslogd -C16<br /> 6808&nbsp; &nbsp;511 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1516&nbsp; &nbsp;5%&nbsp; &nbsp;0% udhcpc -p /var/run/udhcpc-wlan1.pid -<br />&nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp;0 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1512&nbsp; &nbsp;5%&nbsp; &nbsp;0% init<br />&nbsp; 374&nbsp; &nbsp; &nbsp;1 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1512&nbsp; &nbsp;5%&nbsp; &nbsp;0% init<br /> 1136&nbsp; &nbsp; &nbsp;1 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1508&nbsp; &nbsp;5%&nbsp; &nbsp;0% /usr/sbin/ntpd -n -p 0.openwrt.pool.n<br /> 5204&nbsp; &nbsp;511 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1508&nbsp; &nbsp;5%&nbsp; &nbsp;0% udhcpc -p /var/run/udhcpc-eth0.2.pid<br />&nbsp; 618&nbsp; &nbsp; &nbsp;1 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1508&nbsp; &nbsp;5%&nbsp; &nbsp;0% /sbin/watchdog -t 5 /dev/watchdog<br />&nbsp; 375&nbsp; &nbsp; &nbsp;1 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1508&nbsp; &nbsp;5%&nbsp; &nbsp;0% /bin/ash --login<br /> 1081&nbsp; &nbsp; &nbsp;1 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1500&nbsp; &nbsp;5%&nbsp; &nbsp;0% /usr/sbin/telnetd -l /bin/login.sh<br />&nbsp; 499&nbsp; &nbsp; &nbsp;1 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1496&nbsp; &nbsp;5%&nbsp; &nbsp;0% /sbin/klogd<br /> 6768&nbsp; &nbsp; &nbsp;1 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1392&nbsp; &nbsp;5%&nbsp; &nbsp;0% wpa_supplicant -B -P /var/run/wifi-wl<br /> 1089&nbsp; &nbsp; &nbsp;1 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1156&nbsp; &nbsp;4%&nbsp; &nbsp;0% /usr/sbin/uhttpd -f -h /www -r OpenWr<br /> 1068&nbsp; &nbsp;507 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1156&nbsp; &nbsp;4%&nbsp; &nbsp;0% /usr/sbin/dropbear -F -P /var/run/dro<br />&nbsp; 507&nbsp; &nbsp; &nbsp;1 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1020&nbsp; &nbsp;3%&nbsp; &nbsp;0% /sbin/procd<br /> 6888&nbsp; &nbsp; &nbsp;1 nobody&nbsp; &nbsp;S&nbsp; &nbsp; &nbsp; 956&nbsp; &nbsp;3%&nbsp; &nbsp;0% /usr/sbin/dnsmasq -C /var/etc/dnsmasq<br />&nbsp; 515&nbsp; &nbsp;507 root&nbsp; &nbsp; &nbsp;S &lt;&nbsp; &nbsp; 876&nbsp; &nbsp;3%&nbsp; &nbsp;0% ubusd</p><br /><p>When the wifi locks here is a snip of output from the console, </p><br /><br /><p>[&nbsp; 243.700000] [&lt;80059e84&gt;] 0x80059e84<br />[&nbsp; 243.700000] [&lt;8002a988&gt;] 0x8002a988<br />[&nbsp; 243.700000] [&lt;800033d0&gt;] 0x800033d0<br />[&nbsp; 243.700000] [&lt;8002a900&gt;] 0x8002a900<br />[&nbsp; 243.700000] [&lt;800033c0&gt;] 0x800033c0<br />[&nbsp; 243.700000]<br />[&nbsp; 243.700000] Mem-Info:<br />[&nbsp; 243.700000] Normal per-cpu:<br />[&nbsp; 243.700000] CPU&nbsp; &nbsp; 0: hi:&nbsp; &nbsp; 0, btch:&nbsp; &nbsp;1 usd:&nbsp; &nbsp;0<br />[&nbsp; 243.700000] active_anon:525 inactive_anon:33 isolated_anon:0<br />[&nbsp; 243.700000]&nbsp; active_file:962 inactive_file:952 isolated_file:0<br />[&nbsp; 243.700000]&nbsp; unevictable:0 dirty:0 writeback:0 unstable:0<br />[&nbsp; 243.700000]&nbsp; free:68 slab_reclaimable:304 slab_unreclaimable:3484<br />[&nbsp; 243.700000]&nbsp; mapped:379 shmem:101 pagetables:81 bounce:0<br />[&nbsp; 243.700000] Normal free:272kB min:720kB low:900kB high:1080kB active_anon:2100kB inactive_anon:132kB active_file:3848kB inactive_file:3808kB unevictable:0kB isolated(anon):0kB isolated(file):0kB present:32512kB mlocked:0kB dirty:0kB writeback:0kB mapped:1516kB shmem:404kB slab_reclaimable:1216kB slab_unreclaimable:13936kB kernel_stack:392kB pagetables:324kB unstable:0kB bounce:0kB writeback_tmp:0kB pages_scanned:0 all_unreclaimable? no<br />[&nbsp; 243.700000] lowmem_reserve[]: 0 0<br />[&nbsp; 243.700000] Normal: 20*4kB 16*8kB 0*16kB 0*32kB 1*64kB 0*128kB 0*256kB 0*512kB 0*1024kB 0*2048kB 0*4096kB = 272kB<br />[&nbsp; 243.700000] 2015 total pagecache pages<br />[&nbsp; 243.700000] 0 pages in swap cache<br />[&nbsp; 243.700000] Swap cache stats: add 0, delete 0, find 0/0<br />[&nbsp; 243.700000] Free swap&nbsp; = 0kB<br />[&nbsp; 243.700000] Total swap = 0kB<br />[&nbsp; 243.700000] 8192 pages RAM<br />[&nbsp; 243.700000] 711 pages reserved<br />[&nbsp; 243.700000] 2223 pages shared<br />[&nbsp; 243.700000] 6243 pages non-shared<br />[&nbsp; 248.930000] wlan3: authenticate with 00:11:22:33:44:55<br />[&nbsp; 249.100000] wlan3: send auth to 00:11:22:33:44:55 (try 1/3)<br />[&nbsp; 249.310000] wlan3: send auth to 00:11:22:33:44:55 (try 2/3)<br />[&nbsp; 249.520000] wlan3: send auth to 00:11:22:33:44:55 (try 3/3)<br />[&nbsp; 249.730000] wlan3: authentication with 00:11:22:33:44:55 timed out<br />[&nbsp; 243.700000] Normal free:272kB min:720kB low:900kB high:1080kB active_anon:2100kB inactive_anon:132kB active_file:3848kB inactive_file:3808kB unevictable:0kB isolated(a</p><br /><br /><p>Has anyone else run into this issue, If so any ideas how to fix?</p>											<p class="post-edited">(Last edited by <strong>beyondcr</strong> on 8 Jan 2013, 12:41)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p188315">
				<div class="post-metadata">
					<div class="post-num">Post #48</div>
					<div class="post-author">lsoltero</div>
					<div class="post-datetime">
						8 Jan 2013, 18:26					</div>
				</div>
				<div class="post-content content">
					<p>in my experience the w502u only works well for slow USB 1.1 (full speed) devices.&nbsp; Higher speed devices such as USB sound cards will cause USB exceptions and kernel panics.</p><p>I suggest you look at the hornet board from the same company. It uses an AR9331 chipset and as long as your devices are 2.0 it works very well with the USB. USB 1.1 devices work as well but you need to have a 2.0 Hub installed between the route and the device.</p><p>Alfa does sell a complete router based on the hornet board called the AP121U.&nbsp; </p><p>--luis</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202021">
				<div class="post-metadata">
					<div class="post-num">Post #49</div>
					<div class="post-author">forzic</div>
					<div class="post-datetime">
						17 May 2013, 11:31					</div>
				</div>
				<div class="post-content content">
					<p>sorry for isoltero please!!send me go to mail firmware openwrt with patch gounter ramips changest 33298 for port ethernet??? new A.A 12.09 final not work in this router RT3050F ethernet port clouse!!! thanks!!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202022">
				<div class="post-metadata">
					<div class="post-num">Post #50</div>
					<div class="post-author">forzic</div>
					<div class="post-datetime">
						17 May 2013, 11:35					</div>
				</div>
				<div class="post-content content">
					<p>use the router R36 together alpha AWUS036H (RTL8187L)</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 2 of 4</div><nav><ul><li><a href="viewtopic.php%3Fid=31264&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=31264&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=31264&amp;p=4.html">4</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>