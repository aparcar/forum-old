<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> usb disk problem</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p150204">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">lucapost</div>
					<div class="post-datetime">
						3 Dec 2011, 17:22					</div>
				</div>
				<div class="post-content content">
					<p>Hi all.<br />I have a problem with external usb hardrive. I have connected it to my fonera 2.0g via external usb hub with AC adaptor.<br />I have openwrt backfire rc6, with kmod-fs-ext4 and all kmod needed.<br />can anybody help me?<br />this is logread output:<br /></p><div class="codebox"><pre><code>Dec  3 15:42:00 kozlic user.info kernel: usb 1-1: USB disconnect, address 28
Dec  3 15:42:00 kozlic user.info kernel: usb 1-1.1: USB disconnect, address 29
Dec  3 15:42:00 kozlic user.info kernel: usb 1-1: new high speed USB device using ehci_hcd and address 30
Dec  3 15:42:00 kozlic user.info kernel: usb 1-1: configuration #1 chosen from 1 choice
Dec  3 15:42:00 kozlic user.info kernel: hub 1-1:1.0: USB hub found
Dec  3 15:42:00 kozlic user.info kernel: hub 1-1:1.0: 4 ports detected
Dec  3 15:42:01 kozlic user.info kernel: usb 1-1.1: new high speed USB device using ehci_hcd and address 31
Dec  3 15:42:01 kozlic user.info kernel: usb 1-1.1: configuration #1 chosen from 1 choice
Dec  3 15:42:01 kozlic user.info kernel: scsi12 : SCSI emulation for USB Mass Storage devices
Dec  3 15:42:01 kozlic user.debug kernel: usb-storage: device found at 31
Dec  3 15:42:01 kozlic user.debug kernel: usb-storage: waiting for device to settle before scanning
Dec  3 15:42:06 kozlic user.notice kernel: scsi 12:0:0:0: Direct-Access     ST910082 4A               3.04 PQ: 0 ANSI: 0
Dec  3 15:42:06 kozlic user.debug kernel: usb-storage: device scan complete
Dec  3 15:42:06 kozlic user.notice kernel: sd 12:0:0:0: [sdb] 195371568 512-byte hardware sectors: (100 GB/93.1 GiB)
Dec  3 15:42:06 kozlic user.notice kernel: sd 12:0:0:0: [sdb] Write Protect is off
Dec  3 15:42:06 kozlic user.debug kernel: sd 12:0:0:0: [sdb] Mode Sense: 03 00 00 00
Dec  3 15:42:06 kozlic user.err kernel: sd 12:0:0:0: [sdb] Assuming drive cache: write through
Dec  3 15:42:07 kozlic user.err kernel: sd 12:0:0:0: [sdb] Assuming drive cache: write through
Dec  3 15:42:07 kozlic user.info kernel:  sdb: sdb1
Dec  3 15:42:07 kozlic user.notice kernel: sd 12:0:0:0: [sdb] Attached SCSI disk
Dec  3 15:43:14 kozlic user.info kernel: usb 1-1: USB disconnect, address 30
Dec  3 15:43:14 kozlic user.info kernel: usb 1-1.1: USB disconnect, address 31
Dec  3 15:43:14 kozlic user.info kernel: usb 1-1: new high speed USB device using ehci_hcd and address 32
Dec  3 15:43:15 kozlic user.info kernel: usb 1-1: configuration #1 chosen from 1 choice
Dec  3 15:43:15 kozlic user.info kernel: hub 1-1:1.0: USB hub found
Dec  3 15:43:15 kozlic user.info kernel: hub 1-1:1.0: 4 ports detected
Dec  3 15:43:15 kozlic user.info kernel: usb 1-1.1: new high speed USB device using ehci_hcd and address 33
Dec  3 15:43:15 kozlic user.info kernel: usb 1-1.1: configuration #1 chosen from 1 choice
Dec  3 15:43:15 kozlic user.info kernel: scsi13 : SCSI emulation for USB Mass Storage devices
Dec  3 15:43:15 kozlic user.debug kernel: usb-storage: device found at 33
Dec  3 15:43:16 kozlic user.debug kernel: usb-storage: waiting for device to settle before scanning
Dec  3 15:43:21 kozlic user.notice kernel: scsi 13:0:0:0: Direct-Access     ST910082 4A               3.04 PQ: 0 ANSI: 0
Dec  3 15:43:21 kozlic user.debug kernel: usb-storage: device scan complete
Dec  3 15:43:21 kozlic user.notice kernel: sd 13:0:0:0: [sdb] 195371568 512-byte hardware sectors: (100 GB/93.1 GiB)
Dec  3 15:43:21 kozlic user.notice kernel: sd 13:0:0:0: [sdb] Write Protect is off
Dec  3 15:43:21 kozlic user.debug kernel: sd 13:0:0:0: [sdb] Mode Sense: 03 00 00 00
Dec  3 15:43:21 kozlic user.err kernel: sd 13:0:0:0: [sdb] Assuming drive cache: write through
Dec  3 15:43:21 kozlic user.err kernel: sd 13:0:0:0: [sdb] Assuming drive cache: write through
Dec  3 15:43:21 kozlic user.info kernel:  sdb: sdb1
Dec  3 15:43:21 kozlic user.notice kernel: sd 13:0:0:0: [sdb] Attached SCSI disk
Dec  3 15:44:01 kozlic user.info kernel: usb 1-1: USB disconnect, address 32
Dec  3 15:44:01 kozlic user.info kernel: usb 1-1.1: USB disconnect, address 33
Dec  3 15:44:02 kozlic user.info kernel: usb 1-1: new high speed USB device using ehci_hcd and address 34
Dec  3 15:44:02 kozlic user.info kernel: usb 1-1: configuration #1 chosen from 1 choice
Dec  3 15:44:02 kozlic user.info kernel: hub 1-1:1.0: USB hub found
Dec  3 15:44:02 kozlic user.info kernel: hub 1-1:1.0: 4 ports detected
Dec  3 15:44:02 kozlic user.info kernel: usb 1-1.1: new high speed USB device using ehci_hcd and address 35
Dec  3 15:44:03 kozlic user.info kernel: usb 1-1.1: configuration #1 chosen from 1 choice
Dec  3 15:44:03 kozlic user.info kernel: scsi14 : SCSI emulation for USB Mass Storage devices
Dec  3 15:44:03 kozlic user.debug kernel: usb-storage: device found at 35
Dec  3 15:44:03 kozlic user.debug kernel: usb-storage: waiting for device to settle before scanning
Dec  3 15:44:08 kozlic user.notice kernel: scsi 14:0:0:0: Direct-Access     ST910082 4A               3.04 PQ: 0 ANSI: 0
Dec  3 15:44:08 kozlic user.debug kernel: usb-storage: device scan complete
Dec  3 15:44:08 kozlic user.notice kernel: sd 14:0:0:0: [sdb] 195371568 512-byte hardware sectors: (100 GB/93.1 GiB)
Dec  3 15:44:08 kozlic user.notice kernel: sd 14:0:0:0: [sdb] Write Protect is off
Dec  3 15:44:08 kozlic user.debug kernel: sd 14:0:0:0: [sdb] Mode Sense: 03 00 00 00
Dec  3 15:44:08 kozlic user.err kernel: sd 14:0:0:0: [sdb] Assuming drive cache: write through
Dec  3 15:44:08 kozlic user.err kernel: sd 14:0:0:0: [sdb] Assuming drive cache: write through
Dec  3 15:44:08 kozlic user.info kernel:  sdb: sdb1
Dec  3 15:44:09 kozlic user.notice kernel: sd 14:0:0:0: [sdb] Attached SCSI disk
Dec  3 15:44:23 kozlic user.info kernel: usb 1-1: USB disconnect, address 34
Dec  3 15:44:23 kozlic user.info kernel: usb 1-1.1: USB disconnect, address 35
Dec  3 15:44:23 kozlic user.info kernel: usb 1-1: new high speed USB device using ehci_hcd and address 36
Dec  3 15:44:24 kozlic user.info kernel: usb 1-1: configuration #1 chosen from 1 choice
Dec  3 15:44:24 kozlic user.info kernel: hub 1-1:1.0: USB hub found
Dec  3 15:44:24 kozlic user.info kernel: hub 1-1:1.0: 4 ports detected
Dec  3 15:44:24 kozlic user.info kernel: usb 1-1.1: new high speed USB device using ehci_hcd and address 37
Dec  3 15:44:24 kozlic user.info kernel: usb 1-1.1: configuration #1 chosen from 1 choice
Dec  3 15:44:24 kozlic user.info kernel: scsi15 : SCSI emulation for USB Mass Storage devices
Dec  3 15:44:24 kozlic user.debug kernel: usb-storage: device found at 37
Dec  3 15:44:24 kozlic user.debug kernel: usb-storage: waiting for device to settle before scanning
Dec  3 15:44:30 kozlic user.notice kernel: scsi 15:0:0:0: Direct-Access     ST910082 4A               3.04 PQ: 0 ANSI: 0
Dec  3 15:44:30 kozlic user.debug kernel: usb-storage: device scan complete
Dec  3 15:44:30 kozlic user.notice kernel: sd 15:0:0:0: [sdb] 195371568 512-byte hardware sectors: (100 GB/93.1 GiB)
Dec  3 15:44:30 kozlic user.notice kernel: sd 15:0:0:0: [sdb] Write Protect is off
Dec  3 15:44:30 kozlic user.debug kernel: sd 15:0:0:0: [sdb] Mode Sense: 03 00 00 00
Dec  3 15:44:30 kozlic user.err kernel: sd 15:0:0:0: [sdb] Assuming drive cache: write through
Dec  3 15:44:30 kozlic user.err kernel: sd 15:0:0:0: [sdb] Assuming drive cache: write through
Dec  3 15:44:30 kozlic user.info kernel:  sdb: sdb1
Dec  3 15:44:30 kozlic user.notice kernel: sd 15:0:0:0: [sdb] Attached SCSI disk
Dec  3 15:45:02 kozlic daemon.info hostapd: ath0: STA 00:22:5f:d1:7c:28 WPA: group key handshake completed (RSN)
Dec  3 15:45:02 kozlic daemon.info hostapd: ath0: STA 5c:4c:a9:87:8a:76 WPA: group key handshake completed (RSN)</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p150211">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">3zl</div>
					<div class="post-datetime">
						3 Dec 2011, 19:09					</div>
				</div>
				<div class="post-content content">
					<p>...so what is THE&nbsp; problem??</p><p>My fantasy coul tell me alot, but..... <img src="https://forum.openwrt.org/img/smilies/roll.png" width="15" height="15" alt="roll" /></p><p>So if you dont tell exactly where your see your problem, nobody is able to help</p><br /><p>regards<br />3zl</p>											<p class="post-edited">(Last edited by <strong>3zl</strong> on 3 Dec 2011, 19:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p150213">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">lucapost</div>
					<div class="post-datetime">
						3 Dec 2011, 19:26					</div>
				</div>
				<div class="post-content content">
					<p>sorry, I think that log are good for understand the problem.<br />the problem is that openwrt disconnect disk automaticaly after few I/O. I dont&#039; know how...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p150222">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">3zl</div>
					<div class="post-datetime">
						3 Dec 2011, 21:44					</div>
				</div>
				<div class="post-content content">
					<p>...i can not see any problem in the log.</p><p>So simply give some more information what exactly you did, and what response the system gave to you.</p><p>Describe your rest as best as possible.</p><p>regards<br />3zl</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p150224">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">lucapost</div>
					<div class="post-datetime">
						3 Dec 2011, 21:50					</div>
				</div>
				<div class="post-content content">
					<p>this is my /etc/config/fstab: <br /></p><div class="codebox"><pre><code>config global automount
    option from_fstab 1
    option anon_mount 1
    
config global autoswap
    option from_fstab 1
    option anon_swap 0
    
config mount
    option target    /mnt/usb
    option uuid    dcb8b8f7-e8d4-4ac1-aaf8-fbb9e865ab19
    option fstype    ext4
    option options    rw,sync
    option enabled    1
    option enabled_fsck 1</code></pre></div><p>and /etc/init.d/fstab is enabled.<br />After /etc/init.d/transmission start, it write to /mn/usb/transmission and after some seconds sda1 crash in loop.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p152351">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">lucapost</div>
					<div class="post-datetime">
						29 Dec 2011, 17:30					</div>
				</div>
				<div class="post-content content">
					<p>the same problem with 10.03.1.<br />openwrt cannot detect my usb disk. </p><p>here opkg list_installed <br /></p><div class="codebox"><pre><code>base-files - 43.32-r29592
blkid - 1.41.11-1
block-mount - 0.1.0-2.2
busybox - 1.15.3-3.4
dnsmasq - 2.55-6.1
dropbear - 0.53.1-5
e2fsprogs - 1.41.11-1
fdisk - 2.13.0.1-4
firewall - 2-34.8
gpioctl - 1.0-1
hotplug2 - 1.0-beta-3
iptables - 1.4.6-3.1
iptables-mod-conntrack - 1.4.6-3.1
iptables-mod-nat - 1.4.6-3.1
kernel - 2.6.30.10-1
kmod-crc-ccitt - 2.6.30.10-1
kmod-crc16 - 2.6.30.10-1
kmod-fs-ext4 - 2.6.30.10-1
kmod-fs-mbcache - 2.6.30.10-1
kmod-ipt-conntrack - 2.6.30.10-1
kmod-ipt-core - 2.6.30.10-1
kmod-ipt-nat - 2.6.30.10-1
kmod-ipt-nathelper - 2.6.30.10-1
kmod-madwifi - 2.6.30.10+r3314-5
kmod-ppp - 2.6.30.10-1
kmod-pppoe - 2.6.30.10-1
kmod-scsi-core - 2.6.30.10-1
kmod-usb-core - 2.6.30.10-1
kmod-usb-storage - 2.6.30.10-1
kmod-usb2 - 2.6.30.10-1
libblkid - 1.41.11-1
libc - 0.9.30.1-43.32
libext2fs - 1.41.11-1
libgcc - 4.3.3+cs-43.32
libip4tc - 1.4.6-3.1
libiwinfo - 18
libiwinfo-lua - 18
liblua - 5.1.4-7
libnl-tiny - 0.1-1
libpthread - 0.9.30.1-43.32
librt - 0.9.30.1-43.32
libuci - 12012009.7-4
libuci-lua - 12012009.7-4
libusb-1.0 - 1.0.8-1
libuuid - 1.41.11-1
libxtables - 1.4.6-3.1
lua - 5.1.4-7
luci - 0.10.0-1
luci-app-firewall - 0.10.0-1
luci-i18n-english - 0.10.0-1
luci-lib-core - 0.10.0-1
luci-lib-ipkg - 0.10.0-1
luci-lib-lmo - 0.10.0-1
luci-lib-nixio - 0.10.0-1
luci-lib-sys - 0.10.0-1
luci-lib-web - 0.10.0-1
luci-mod-admin-core - 0.10.0-1
luci-mod-admin-full - 0.10.0-1
luci-proto-core - 0.10.0-1
luci-proto-ppp - 0.10.0-1
luci-sgi-cgi - 0.10.0-1
luci-theme-base - 0.10.0-1
luci-theme-openwrt - 0.10.0-1
mtd - 13
opkg - 576-2
ppp - 2.4.4-16.1
ppp-mod-pppoe - 2.4.4-16.1
swconfig - 9
uci - 12012009.7-4
udevtrigger - 106-1
uhttpd - 28
usbutils - 003-1
wireless-tools - 29-4
wpad-mini - 20111103-2
zlib - 1.2.3-5</code></pre></div><p>the pendrive is inserted correctly, but lsusb can&#039;t detect it:<br /></p><div class="codebox"><pre><code>root@kozlic:~# lsusb 
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub</code></pre></div><p>can anybody help me?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p152552">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">ZeRaler</div>
					<div class="post-datetime">
						31 Dec 2011, 22:14					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>have you try to install kmod-usb-ohci package?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>