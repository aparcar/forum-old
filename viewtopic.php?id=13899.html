<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Help to unbrick WRT-54GL</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 20 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p60934">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">wifimonkey</div>
					<div class="post-datetime">
						27 Dec 2007, 23:54					</div>
				</div>
				<div class="post-content content">
					<p>I loaded OpenWrt onto a WRT54GL 1.1 and added some extra packages and ended up screwing it up to the point that although the software boots I cannot get access to it afterwards.</p><p>So I want to return it to a clean version of OpenWRT.</p><p>I have tried the Linksys method of holding the reset for 30 secs etc but that doesn&#039;t work.</p><p>What does work is that by pressing reset when dmz is lit allows me to get Telnet access to the router. But I have tried to tftp a new image to the router but tftp returns a message of being unable to get a response from the server.</p><p>So can anyone guide me in how to get the firmware reflashed onto the router when all I can do is ping and telnet into it by pressing reset after the dmz lights up (failsafe?)</p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60935">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">TheCompWiz</div>
					<div class="post-datetime">
						27 Dec 2007, 23:56					</div>
				</div>
				<div class="post-content content">
					<p>*cough* serial console *cough*</p><p>if you can get into a telnet session... just scp an image to the drive &amp; use mtd</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60937">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">wifimonkey</div>
					<div class="post-datetime">
						28 Dec 2007, 01:01					</div>
				</div>
				<div class="post-content content">
					<p>*cough* oops <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Tried that but didn&#039;t see the speling mistake and assumed the worst LOL</p><p>Could you give me the actual mtd command? What&#039;s the device identifer?</p><p>I assume it&#039;s something like</p><p>mtd -write openwrt.bin -e -r &lt;device&gt;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60939">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">forum2006</div>
					<div class="post-datetime">
						28 Dec 2007, 01:21					</div>
				</div>
				<div class="post-content content">
					<p>Try in that order:</p><p>1) Failsafe mode (<a href="http://wiki.openwrt.org/OpenWrtDocs/Hardware/Linksys/WRT54GL#head-e6119119e65d0eeac4a827a78a6a31420a6b4c41">http://wiki.openwrt.org/OpenWrtDocs/Har … 420a6b4c41</a>)<br />2) TFTP a new image if you had set boot_wait=on (<a href="http://wiki.openwrt.org/OpenWrtDocs/Hardware/Linksys/WRT54GL#head-a84d5e126d0fb757f33913db0922b1f591af31c8">http://wiki.openwrt.org/OpenWrtDocs/Har … f591af31c8</a>)<br />3) Serial console (<a href="http://wiki.openwrt.org/OpenWrtDocs/Hardware/Linksys/WRT54GL#head-de235b41c621bd63cc210f4bf37b7d148094e76a">http://wiki.openwrt.org/OpenWrtDocs/Har … 148094e76a</a>)<br />4) Last option is JTAG</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60952">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">wifimonkey</div>
					<div class="post-datetime">
						28 Dec 2007, 03:40					</div>
				</div>
				<div class="post-content content">
					<p>ok, this might help others <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>regardless of what I have done so far I have been able to recover either to a Telnet console (and then did what TheCompWiz suggested and scp&#039;d a new bin to /tmp and then mtd -r write /tmp/openwrt.bin linux to recover) or have been able to resurrect it using TFTP by first holding the reset button in with the power connected for 30 seconds, then running a ping -n 1000 192.168.1.1 and removing power, holding the reset button in and reapplying power and holding reset until the pc recognises that the ethernet is reconnected and then releasing the reset button. At that point TFTP uploads a new flash AS LONG AS it&#039;s a more recent version of the firmware - my copy of TFTP will not &#039;downgrade&#039; to an older version.</p><p>These techniques have worked so far despite my continued attempts to brick it LOL</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>