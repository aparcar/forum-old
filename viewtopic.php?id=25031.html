<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> script to reboot DSL router</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 17 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p110187">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">jlazkano</div>
					<div class="post-datetime">
						30 May 2010, 11:21					</div>
				</div>
				<div class="post-content content">
					<p>Hello everybody!</p><p>I have a OpenWRT router pluged to my ISP DSL router, sometimes I need to reboot the DSL router, I make manually this way:</p><p>1. connect to telnet 192.168.1.1<br />2. enter user/pass<br />3. write 12 (Save and Reboot)<br />4. 1 (confirm)</p><p>How can I make a script to execute automatically (cron) to reboot my DSL router ones a week (sunday 3:00AM)?</p><p>Thanks and regards.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p110279">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jlazkano</div>
					<div class="post-datetime">
						31 May 2010, 18:18					</div>
				</div>
				<div class="post-content content">
					<p>Hello, I read on some forums that the best way is with &quot;expect&quot; software, but there is no any package on kamikaze repository.</p><p>How can I install it?</p><p>Thanks and regards.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p110285">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">ecc</div>
					<div class="post-datetime">
						31 May 2010, 19:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jlazkano wrote:</cite><blockquote><p>I have a OpenWRT router pluged to my ISP DSL router, sometimes I need to reboot the DSL router, I make manually this way:</p><p>1. connect to telnet 192.168.1.1<br />2. enter user/pass<br />3. write 12 (Save and Reboot)<br />4. 1 (confirm)</p><p>How can I make a script to execute automatically (cron) to reboot my DSL router ones a week (sunday 3:00AM)?</p></blockquote></div><p>You could just set up your routing so another Linux machine on your network can reach 192.168.1.1, and run expect + cron from there.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p110337">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">jlazkano</div>
					<div class="post-datetime">
						1 Jun 2010, 15:25					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for your post but I have not another Linux machine on my network, I want to try with the router.</p><p>I use to connect to the router from outside and then reset the DSL, but it will be great to make automatically.</p><p>Thanks and regards.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p110359">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						1 Jun 2010, 20:06					</div>
				</div>
				<div class="post-content content">
					<p>expect is a TCL script.<br />You must install TCL package, then use <a href="http://expect.sourceforge.net/">the script</a><br />Is there a LUA port? I ask because LUA is already installed. EDIT: <a href="http://lua-users.org/lists/lua-l/2009-05/msg00403.html">Found</a></p>											<p class="post-edited">(Last edited by <strong>Nilfred</strong> on 1 Jun 2010, 20:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p110363">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">jlazkano</div>
					<div class="post-datetime">
						1 Jun 2010, 20:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Nilfred wrote:</cite><blockquote><p>expect is a TCL script.<br />You must install TCL package, then use <a href="http://expect.sourceforge.net/">the script</a><br />Is there a LUA port? I ask because LUA is already installed. EDIT: <a href="http://lua-users.org/lists/lua-l/2009-05/msg00403.html">Found</a></p></blockquote></div><p>Thankyou for reply, I installed TCL this way:</p><div class="codebox"><pre><code># opkg install tcl</code></pre></div><p>I found this script:</p><div class="codebox"><pre><code>#!/usr/local/bin/expect
spawn telnet &lt;machine ip&gt;
expect &quot;login:&quot;
send &quot;&lt;username&gt;\n&quot;
expect &quot;Password:&quot;
send &quot;&lt;password&gt;\n&quot;
send &quot;bash\n&quot;
send &quot;cd /opt\n&quot;
interact</code></pre></div><p>I must modify some code, but the problem is that I don&#039;t have any expect file on /usr/local/bin/</p><p>Is not any easy way to do that with bash script?</p><p>Thanks for all.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p110366">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						1 Jun 2010, 21:02					</div>
				</div>
				<div class="post-content content">
					<p>Are you <a href="http://expect.sourceforge.net/#unix">read impaired</a>?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p110367">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">jlazkano</div>
					<div class="post-datetime">
						1 Jun 2010, 21:10					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Nilfred wrote:</cite><blockquote><p>Are you <a href="http://expect.sourceforge.net/#unix">read impaired</a>?</p></blockquote></div><p>I read and downloaded this file: <a href="http://expect.sourceforge.net/expect.tar.gz">http://expect.sourceforge.net/expect.tar.gz</a></p><p>After uncompress it has 1.7MB, I read the README, but I don&#039;t know how to install it. It looks very complicated. I will continue reading more info.</p><p>Thanks.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>