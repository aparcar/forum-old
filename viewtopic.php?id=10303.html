<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Outbound VPN passthrough setup for White Russian 0.9?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 9 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p46384">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">hjacobson</div>
					<div class="post-datetime">
						13 Apr 2007, 19:41					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m trying to configure the Xwrt Default version of WhiteRussian 0.9 installed on my Buffalo WHR-HP-G54 to VPN out from machines inside the network (typically Windows XP using its native VPN (PPTP/IPsec) to VPN servers out there in the internet. I&#039;ve pulled up and read wiki docs (Setting up PPTP and PPTPD) and forum messages. I&#039;m having difficulty pulling the variety of information together into a simple &#039;Quick Start&#039;. Unfortunately to me the wiki and forum messages appear outdated - referring to RC5. Sometimes I can&#039;t locate referenced files; maybe they&#039;ve changed name or location in White Russion 0.9? Some docs suggest iptables statements with fixed IP addresses but I can&#039;t do that as VPN connections are to a varying pool of VPN servers. </p><p>I know this is an openWRT configuration issue not a computer or ISP issue. I&#039;ve successfully VPN&#039;d to my work location and my wife&#039;s work locations with the factory installed Buffalo firmware and also the DD-WRT v23 sp2 dd-wrt.v23_generic.bin firmware. I&#039;d rather use OpenWrt with Xwrt.</p><p>I think I&#039;ve crawled closer to the solution:<br />At first the Windows XP VPN connection would immediately return error 619. <br />After some reading I installed these ipkgs: <br />pptp (1.6.0-3)<br />kmod-gre (2.4.30-brcm-5)<br />kmod-mppe (2.4.30-brcm-5)<br />kmod-crypto (2.4.30-brcm-5)<br />After that the Windows XP VPN connection pauses for about 30 seconds at ‘Verifying username and password’ before returning error 619.</p><p>Maybe it would work &#039;out of the box&#039; with the PPTP version from <a href="http://xwrt.kicks-ass.org/xwrt/firmware_images/whiterussian/0.9/milestone-2.75/pptp/">http://xwrt.kicks-ass.org/xwrt/firmware … 2.75/pptp/</a>?</p><p>Maybe just a few simple statements in iptables?</p><p>Help?</p><p>Thank you,<br />Harry</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p46433">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">hjacobson</div>
					<div class="post-datetime">
						14 Apr 2007, 19:36					</div>
				</div>
				<div class="post-content content">
					<p>OK, thunderous response; let me be more specific:</p><p>The PPTPClientHowto <a href="http://wiki.openwrt.org/PPTPClientHowto">http://wiki.openwrt.org/PPTPClientHowto</a> suggests specifying a link name, VPN server name or IP address in /etc/ppp/peers/peer_name (or /etc/ppp/peers directory; I&#039;m not sure which). Why? Isn&#039;t there a way for the outbound Windows XP VPN connection to connect successfully without first specifying the connection, as I&#039;ve experienced in DD-WRT v23 sp2?</p><p>The PPTPClientHowto suggests adding lines to /etc/modules for slhc, ppp_generic, ppp_async, ppp_mppe_mppc, arc4, and sha1. I haven&#039;t done that. Maybe that&#039;s why failure to connect?</p><p>The PPTPClientHowto also suggests starting the pptpd process. Why? I&#039;m not at this time configuring for inbound connections; only outbound.</p><p>Unfortunately I can&#039;t presently work with my Buffalo router with OpenWrt-Xwrt installed; I had to revert to my old hardware so my wife could VPN to her company cloud. At my next opportunity I&#039;ll go back to play with the Buffalo router.</p><p>Can anyone answer the question, &quot;Will the PPTP version of OpenWrt-Xwrt allow outbound PPTP VPN connections &#039;out of the box&#039; without further configuration?&quot; If this turns out to be true at my next opportunity I&#039;ll put the PPTP version of the milestone-2.75 firmware.</p><p>Thank you,<br />Harry</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p46737">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">stuffa</div>
					<div class="post-datetime">
						19 Apr 2007, 18:58					</div>
				</div>
				<div class="post-content content">
					<p>Harry</p><p>Just tyo let you know...&nbsp; You should be able to...&nbsp; I do<br />You shouldn&#039;t need any other modules except &quot;iptables-mod-nat&quot;</p><p>I am running RC6 and I have multiple PPTP tunnels running from both Linux and windows workstations without any issues.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p46756">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">hjacobson</div>
					<div class="post-datetime">
						19 Apr 2007, 23:48					</div>
				</div>
				<div class="post-content content">
					<p>Stuffa,</p><p>I returned to DD-WRT to examine the DD-WRT iptables --list. I&#039;ve just reinstalled the milestone 2.75 OpenWrt-Xwrt firmware and restored my saved config0.tgz. I haven&#039;t re-installed the ipkgs pptp (1.6.0-3), kmod-gre (2.4.30-brcm-5), kmod-mppe (2.4.30-brcm-5), kmod-crypto (2.4.30-brcm-5).</p><p>I installed the ipkg iptables-mod-nat then tried making a Windows XP VPN connection; failed with error 619.</p><p>Have you installed those other pkgs? Did you make other modifications to the default xwrt-openwrt-brcm-2.4-squashfs.trx (or your hardware&#039;s equivalent) other than setting up the router and installing the iptables-mod-nat; VPN passthrough works?</p><p>I suspect there are iptables changes to be made.</p><p>Harry</p>											<p class="post-edited">(Last edited by <strong>hjacobson</strong> on 19 Apr 2007, 23:54)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p46783">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">combro2k</div>
					<div class="post-datetime">
						20 Apr 2007, 11:05					</div>
				</div>
				<div class="post-content content">
					<p>ipkg install kmod-ipt-nat-pptp<br />worked for me.. good luck <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p46802">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">hjacobson</div>
					<div class="post-datetime">
						20 Apr 2007, 18:23					</div>
				</div>
				<div class="post-content content">
					<p>Combro2k,</p><p>I installed the ipkg kmod-ipt-nat-pptp. </p><p>First time Windows XP VPN connection failed with error 619. I tried several more times, discovered it connects intermittantly.</p><p>How to reduce intermittent connection failures? I researched the ipkg kmod-ipt-nat-pptp. Hmm. Not much about it: &quot;Netfilter (IPv4) NAT kernel modules for GRE and PPTP&quot;. </p><p>My wife won&#039;t tolerate intermittant VPN connections. <img src="https://forum.openwrt.org/img/smilies/roll.png" width="15" height="15" alt="roll" /> If I can&#039;t make VPN passthrough connection stable, i.e., no intermittant failures, I&#039;ll have to revert to DD-WRT v23 sp2 or my older hardware. Then I won&#039;t have much opportunity to explore OpenWRT. <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" />&nbsp; &nbsp;</p><p>Harry</p>											<p class="post-edited">(Last edited by <strong>hjacobson</strong> on 20 Apr 2007, 21:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p46972">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">combro2k</div>
					<div class="post-datetime">
						23 Apr 2007, 18:37					</div>
				</div>
				<div class="post-content content">
					<p>loaded the module?</p><p>insmod ip_nat_pptp ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p46974">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">hjacobson</div>
					<div class="post-datetime">
						23 Apr 2007, 18:47					</div>
				</div>
				<div class="post-content content">
					<p>Didn&#039;t think to check as ipkg install auto-configured startup parameters of other modules. I&#039;ll check that out tonight.</p><p>Harry</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>