<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> PPP accomp+pcomp</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p302931">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">kubco2</div>
					<div class="post-datetime">
						8 Dec 2015, 21:16					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>is possible to set up these two directives for ppp connections?<br />I need it for 3g modem, where another client can get IP, but openwrt cannot get IP, and this is probably the reason, because I cant see another difference.<br />On mikrotik I can see: <br /></p><div class="codebox"><pre><code>rcvd ConfReq accomp pcomp
sent ConfAck accomp pcomp</code></pre></div><p>On openwrt:<br /></p><div class="codebox"><pre><code>rcvd ConfReq accomp pcomp
sent ConfRej accomp pcomp
then some rcvd/send packets about magic and then:
rcvd TermReq
sent TermAck</code></pre></div><p>I tried edit /etc/ppp/options and comment noaccomp and nopcomp, but in logs I see that openwrt always refuse these two directives.</p><p>EDIT:<br />I checked running openwrt client with same 3g and it works <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> .... <br /></p><div class="codebox"><pre><code>Tue Dec  8 20:25:50 2015 daemon.debug pppd[4424]: sent [LCP ConfReq id=0x1 &lt;asyncmap 0x0&gt; &lt;magic 0x412e523&gt;]
Tue Dec  8 20:25:50 2015 daemon.debug pppd[4424]: rcvd [LCP ConfReq id=0x1 &lt;accomp&gt; &lt;pcomp&gt; &lt;asyncmap 0x0&gt; &lt;mru 1500&gt; &lt;magic 0x545&gt; &lt;auth chap MD5&gt;]
Tue Dec  8 20:25:50 2015 daemon.debug pppd[4424]: No auth is possible
Tue Dec  8 20:25:50 2015 daemon.debug pppd[4424]: sent [LCP ConfRej id=0x1 &lt;accomp&gt; &lt;pcomp&gt; &lt;auth chap MD5&gt;]
Tue Dec  8 20:25:50 2015 daemon.debug pppd[4424]: rcvd [LCP ConfAck id=0x1 &lt;asyncmap 0x0&gt; &lt;magic 0x412e523&gt;]
Tue Dec  8 20:25:50 2015 daemon.debug pppd[4424]: rcvd [LCP ConfReq id=0x2 &lt;asyncmap 0x0&gt; &lt;mru 1500&gt; &lt;magic 0x545&gt;]
Tue Dec  8 20:25:50 2015 daemon.debug pppd[4424]: sent [LCP ConfAck id=0x2 &lt;asyncmap 0x0&gt; &lt;mru 1500&gt; &lt;magic 0x545&gt;]
Tue Dec  8 20:25:50 2015 daemon.debug pppd[4424]: sent [LCP EchoReq id=0x0 magic=0x412e523]
Tue Dec  8 20:25:50 2015 daemon.debug pppd[4424]: sent [IPCP ConfReq id=0x1 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 0.0.0.0&gt; &lt;ms-dns2 0.0.0.0&gt;]
Tue Dec  8 20:25:50 2015 daemon.debug pppd[4424]: sent [IPV6CP ConfReq id=0x1 &lt;addr fe80::9110:6e0e:5c0b:344e&gt;]
Tue Dec  8 20:25:50 2015 daemon.debug pppd[4424]: rcvd [LCP EchoRep id=0x0 magic=0x545]
Tue Dec  8 20:25:50 2015 daemon.debug pppd[4424]: rcvd [IPCP ConfReq id=0x1]
Tue Dec  8 20:25:50 2015 daemon.debug pppd[4424]: sent [IPCP ConfNak id=0x1 &lt;addr 0.0.0.0&gt;]
Tue Dec  8 20:25:50 2015 daemon.err openvpn(management_client)[1579]: write UDPv4: Network is unreachable (code=128)
Tue Dec  8 20:25:50 2015 daemon.debug pppd[4424]: rcvd [LCP ProtRej id=0x3 80 57 01 01 00 0e 01 0a 91 10 6e 0e 5c 0b 34 4e]
Tue Dec  8 20:25:50 2015 daemon.debug pppd[4424]: Protocol-Reject for &#039;IPv6 Control Protocol&#039; (0x8057) received
Tue Dec  8 20:25:50 2015 daemon.debug pppd[4424]: rcvd [IPCP ConfNak id=0x1 &lt;ms-dns1 0.0.0.0&gt; &lt;ms-dns2 0.0.0.0&gt;]
Tue Dec  8 20:25:50 2015 daemon.debug pppd[4424]: sent [IPCP ConfReq id=0x2 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 0.0.0.0&gt; &lt;ms-dns2 0.0.0.0&gt;]
Tue Dec  8 20:25:50 2015 daemon.debug pppd[4424]: rcvd [IPCP ConfReq id=0x2]
Tue Dec  8 20:25:50 2015 daemon.debug pppd[4424]: sent [IPCP ConfAck id=0x2]
Tue Dec  8 20:25:50 2015 daemon.debug pppd[4424]: rcvd [IPCP ConfNak id=0x2 &lt;addr 100.64.42.15&gt; &lt;ms-dns1 10.50.24.160&gt; &lt;ms-dns2 10.50.24.161&gt;]
Tue Dec  8 20:25:50 2015 daemon.debug pppd[4424]: sent [IPCP ConfReq id=0x3 &lt;addr 100.64.42.15&gt; &lt;ms-dns1 10.50.24.160&gt; &lt;ms-dns2 10.50.24.161&gt;]
Tue Dec  8 20:25:50 2015 daemon.debug pppd[4424]: rcvd [IPCP ConfAck id=0x3 &lt;addr 100.64.42.15&gt; &lt;ms-dns1 10.50.24.160&gt; &lt;ms-dns2 10.50.24.161&gt;]
Tue Dec  8 20:25:50 2015 daemon.warn pppd[4424]: Could not determine remote IP address: defaulting to 10.64.64.64
Tue Dec  8 20:25:50 2015 daemon.notice pppd[4424]: local  IP address 100.64.42.15
Tue Dec  8 20:25:50 2015 daemon.notice pppd[4424]: remote IP address 10.64.64.64
Tue Dec  8 20:25:50 2015 daemon.notice pppd[4424]: primary   DNS address 10.50.24.160
Tue Dec  8 20:25:50 2015 daemon.notice pppd[4424]: secondary DNS address 10.50.24.161</code></pre></div><p>But doesnt work on new openwrt <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p>											<p class="post-edited">(Last edited by <strong>kubco2</strong> on 8 Dec 2015, 21:29)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>