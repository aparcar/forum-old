<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Request to update RTSP conntrack and NAT helper to kernel 3.14</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 24 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p242030">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">jfm</div>
					<div class="post-datetime">
						29 Jul 2014, 14:18					</div>
				</div>
				<div class="post-content content">
					<p>My IPTV pay per view service is based on RTSP. I’ve built the latest trunk with kernel 3.14 and included the RTSP conntrack/NAT helper but it doesn’t work.</p><p>In my setup, each set-top box has a LAN IP delivered via DHCP from the router, as any other device. I’ve made a tcpdump and the RTSP session is properly negotiated and natted (these are TCP packages) but then streaming starts (UDP) from a new IP and port and it is not natted to the set-top box. Traffic is accepted in the WAN interface but not forwarded. It seems to me that the NAT helper is not working properly because iptables doesn’t see this incoming traffic as RELATED.</p><p>I can force (DNAT) traffic to a single STB and it works, but that is not the proper solution for me as I have more STBs.</p><p>I contacted Mike, at <a href="http://mike.it-loops.com/item/31">http://mike.it-loops.com/item/31</a>, but he answered this:<br /></p><div class="quotebox"><cite>Mike wrote:</cite><blockquote><p>I no longer have the infrastructure do do any development on it. It appears that something in the more recent kernel versions changed and therefore the modules are just broken.<br />Sorry that I can&#039;t help you with that.</p></blockquote></div><p>Please, help, I don’t have any programming knowledge. Any developer could update these modules so that they work with kernel 3.14? It might be useful for other people with similar IPTV services.</p><p>Thank you very much.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>