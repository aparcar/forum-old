<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> I&#039;ve Bricked My Netgear DG834G v3 - Please Help.</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 15 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p79871">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Mad Professor</div>
					<div class="post-datetime">
						19 Jan 2009, 13:19					</div>
				</div>
				<div class="post-content content">
					<p>Good Day All. </p><p>I am hoping someone here more wise then me can help me unbrick my Netgear DG834G v3 Router. </p><p>Here are some details I have pulled from the router before I bricked it.</p><p>--------------------------------------------------------------------------------------------</p><p>Make: Netgear<br />Model: DG843G v3<br />Firmware: v4.01.40</p><p>--------------------------------------------------------------------------------------------</p><p>BusyBox v0.61.pre (2008.06.11-10:37+0000) Built-in shell (ash)<br />Enter &#039;help&#039; for a list of built-in commands.</p><p># cat /proc/version<br />Linux version 2.4.17_mvl21-malta-mips_fp_le (root@Build_Server) (gcc version 2.95.3 20010315 (release/MontaVista)) #2 Mon Jun 25 15:11:54 CST 2007</p><p># cat /proc/cpuinfo<br />processor&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 0<br />cpu model&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: MIPS 4KEc V4.8<br />BogoMIPS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 211.35<br />wait instruction&nbsp; &nbsp; &nbsp; &nbsp; : no<br />microsecond timers&nbsp; &nbsp; &nbsp; : yes<br />extra interrupt vector&nbsp; : yes<br />hardware watchpoint&nbsp; &nbsp; &nbsp;: yes<br />VCED exceptions&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: not available<br />VCEI exceptions&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: not available</p><br /><p># cat /proc/meminfo<br />&nbsp; &nbsp; &nbsp; &nbsp; total:&nbsp; &nbsp; used:&nbsp; &nbsp; free:&nbsp; shared: buffers:&nbsp; cached:<br />Mem:&nbsp; 14680064 14270464&nbsp; &nbsp;409600&nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; 1097728&nbsp; 5152768<br />Swap:&nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 0<br />MemTotal:&nbsp; &nbsp; &nbsp; &nbsp; 14336 kB<br />MemFree:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;400 kB<br />MemShared:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 kB<br />Buffers:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1072 kB<br />Cached:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5032 kB<br />SwapCached:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 kB<br />Active:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;3388 kB<br />Inactive:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;4288 kB<br />HighTotal:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 kB<br />HighFree:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 kB<br />LowTotal:&nbsp; &nbsp; &nbsp; &nbsp; 14336 kB<br />LowFree:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;400 kB<br />SwapTotal:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 kB<br />SwapFree:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 kB</p><p>--------------------------------------------------------------------------------------------</p><p>mtd0.bin 3136 kb - MD5: 0a28fdd0c7daf1b9d5e2f08ec1f5b5aa<br />mtd1.bin&nbsp; 704 kb - MD5: d915619057b3f9e0729d6a9762fd53b8<br />mtd2.bin&nbsp; 128 kb - MD5: 999ce96c3393b7eaf7b3e6367bea882b<br />mtd3.bin&nbsp; &nbsp;64 kb - MD5: 06907252db7d7b952676df909b9daf7d<br />mtd4.bin&nbsp; &nbsp;64 kb - MD5: acef71faa8e211656ceb857fd43df344</p><p>--------------------------------------------------------------------------------------------</p><p>The new firmware I was trying to load failed so I tried the Netgear Recovery Program. </p><p>I pressed and held the reset button wile pluging in the power to the router, then you get the two flashing led&#039;s on the front, I then ran the Netgear Recovery Program, it found the router, and started to run, then the program bluescreened and the computer restarted. </p><p>Now I can&#039;t get the router into Recovery mode. </p><p>So I built a Serial Interface so I can connect the router to my computer, and see what is going on.</p><p>Heres what I get when the router is powered up.</p><p>-------------------------------------------------------------------------------------------- <br />ADAM2 Revision 0.22.02<br />(C) Copyright 1996-2003 Texas Instruments Inc. All Rights Reserved.<br />(C) Copyright 2003 Telogy Networks, Inc.<br />memsize == 0x01000000Usage: setmfreq [-d] [-s sys_freq, in MHz] [cpu_freq, in MHz]<br />maca&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; xx:xx:xx:xx:xx:xx<br />macb&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; xx:xx:xx:xx:xx:xx<br />memsize&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x01000000<br />flashsize&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x00400000<br />modetty0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 115200,n,8,1,hw<br />modetty1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 115200,n,8,1,hw<br />bootserport&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;tty0<br />cpufrequency&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 211968000<br />sysfrequency&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 105984000<br />bootloaderVersion&nbsp; &nbsp; &nbsp;0.22.02<br />ProductID&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DG834<br />HWRevision&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Unknown<br />SerialNumber&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; none<br />my_ipaddress&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 192.168.0.1<br />prompt&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DG834<br />firstfreeaddress&nbsp; &nbsp; &nbsp; 0x9401bd20<br />req_fullrate_freq&nbsp; &nbsp; &nbsp;125000000<br />mtd0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x900d0000,0x903e0000<br />mtd1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x90020000,0x900d0000<br />mtd2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x90000000,0x90020000<br />mtd3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x903e0000,0x903f0000<br />mtd4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x903f0000,0x90400000<br />oam_lb_timeout&nbsp; &nbsp; &nbsp; &nbsp; 100<br />DSL_FEATURE_CNTL_1&nbsp; &nbsp; 0x00000020<br />mtd5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x90020000,0x903e0000</p><p>DG834 &gt; addr=90020000<br />File for wrong Endian!<br />gocommand even2<br />Download.<br />Copying download from b0017000 to b4020000</p><p>CAUSE&nbsp; &nbsp; = 0x30808028&nbsp; Reserved Instruction<br />STATUS&nbsp; &nbsp;= 0x00400002&nbsp; &nbsp; &nbsp; EPC&nbsp; &nbsp; &nbsp; = 0xb4020000<br />BADVADDR = 0xbfc00000&nbsp; &nbsp; &nbsp; ERROREPC = 0x90000000</p><p>$ 0(zr):0x00000000&nbsp; $ 8(t0):0x94010b0c&nbsp; $16(s0):0x00000001&nbsp; $24(t8):0x00000000<br />$ 1(at):0x00000001&nbsp; $ 9(t1):0x00000020&nbsp; $17(s1):0x00000001&nbsp; $25(t9):0x00000000<br />$ 2(v0):0xffffffff&nbsp; $10(t2):0x94010ad4&nbsp; $18(s2):0x94010cb4&nbsp; $26(k0):0x00000000<br />$ 3(v1):0xffffffff&nbsp; $11(t3):0x00000010&nbsp; $19(s3):0xb03f070b&nbsp; $27(k1):0x00000000<br />$ 4(a0):0x00000001&nbsp; $12(t4):0x00000078&nbsp; $20(s4):0x9000889c&nbsp; $28(gp):0x94008d70<br />$ 5(a1):0x90005bd0&nbsp; $13(t5):0x94010b0c&nbsp; $21(s5):0x00000000&nbsp; $29(sp):0x94010c4c<br />$ 6(a2):0x00006000&nbsp; $14(t6):0x00000000&nbsp; $22(s6):0x00000000&nbsp; $30(s8):0x01000000<br />$ 7(a3):0xfffffff9&nbsp; $15(t7):0x00000061&nbsp; $23(s7):0x00000000&nbsp; $31(ra):0x9000235c<br />-------------------------------------------------------------------------------------------- </p><p>This happens in a endless loop. </p><p>I guess I am going to have to built a new interface cable to use with the JTAG port so that I can reprogram my router. </p><p>Can anyone please confirm the JTAG Pin Data on my DG834G v3.<br />-----------------------------<br />(2)(4)(6)(8)(10)(12)(14)<br />[1](3)(5)(7)(9)(11)(13)<br />-----------------------------<br />JTAG Pin1: nTRST<br />JTAG Pin2: GND<br />JTAG Pin3: TDI<br />JTAG Pin4: GND<br />JTAG Pin5: TDO<br />JTAG Pin6: GND<br />JTAG Pin7: TMS<br />JTAG Pin8: GND<br />JTAG Pin9: TCK<br />JTAG Pin10: GND<br />JTAG Pin11: nSRST<br />JTAG Pin12: N/A<br />JTAG Pin13: N/A<br />JTAG Pin14: VCC</p><p>Can someone please advice me how and if I can unbrick my router. </p><p>Thanks for your time.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79918">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">nas</div>
					<div class="post-datetime">
						19 Jan 2009, 21:29					</div>
				</div>
				<div class="post-content content">
					<p>Hello Professor,</p><p>You&#039;ll need to build the following cable: <a href="http://ciclamab.altervista.org/JTAG_Circ.htm">http://ciclamab.altervista.org/JTAG_Circ.htm</a> and use Ciclamab suite <a href="http://ciclamab.altervista.org">http://ciclamab.altervista.org</a>/ to flash the bootloader into the box.</p><p>If I understood you correctly you tried to load OpenWRT into this box? It&#039;s going to be dead end if you keep ADAM2 bootloader - OpenWRT willl boot but the ethernet interface will not work. So far I discovered the only way of having working copy of OpenWRT on this box is by substituting ADAM2 with PSPBoot. </p><p><a href="https://dev.openwrt.org/ticket/3782">https://dev.openwrt.org/ticket/3782</a><br /><a href="https://dev.openwrt.org/ticket/3124">https://dev.openwrt.org/ticket/3124</a></p><p>Download <a href="http://mcmcc.bat.ru/dlinkt/acorp-russia/psp_boot/psp_boot_Acorp_W400G-1.4.0.4.rar">http://mcmcc.bat.ru/dlinkt/acorp-russia … .4.0.4.rar</a> and flash it into 0x90000000,0x90010000. Then you can continue by using ftp interface of PSPBoot.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79931">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Mad Professor</div>
					<div class="post-datetime">
						20 Jan 2009, 00:44					</div>
				</div>
				<div class="post-content content">
					<p>I ended up making two JTAG cables. </p><p>Xilinx<br /><span class="postimg"><img src="http://ciclamab.altervista.org/Interfaces/JTag-Xilinx.gif" alt="http://ciclamab.altervista.org/Interfaces/JTag-Xilinx.gif" /></span></p><p>&quot;Very Poor Man&quot; Wiggler<br /><span class="postimg"><img src="http://ciclamab.altervista.org/Interfaces/JTag-Wiggler.gif" alt="http://ciclamab.altervista.org/Interfaces/JTag-Wiggler.gif" /></span></p><p>When using the Xilinx cable both &quot;HairyDairyMaid Debrick Utility v4.8&quot; and &quot;EJTAG Debrick Utility v2.1.4&quot; can now detect my router, but after Probing Flash for a few min&#039;s it comes back with &quot;Unknow or No Flash Chip Detected&quot;. </p><p>I have also download yet another program this one is called &quot;CICLaMaB&quot; this will detect my router with the Xilinx or &quot;Very Poor Man&quot; Wiggler cable. <br />But each time I try and backup any data using it after a few sec&#039;s of it running it will just crash on me. </p><p>I only have one laptop with a Printer port, and that is a old Sony Vaio running Windows XP SP3, as the program was crashing I even formated the hard drive and reinstalled windows xp just encase it was a problem with the OS. </p><p>I guess my next step should be to find another computer or laptop with a printer port and try again. </p><p>Unless there is any other programs I can try.</p><p>Thanks for your time.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79933">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">nas</div>
					<div class="post-datetime">
						20 Jan 2009, 01:08					</div>
				</div>
				<div class="post-content content">
					<p>With your Xilinx cable you can try to specify the flash type manually, it is MX29LV320B 2Mx16 BotB (4MB) [/fc:29]</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79951">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Mad Professor</div>
					<div class="post-datetime">
						20 Jan 2009, 10:01					</div>
				</div>
				<div class="post-content content">
					<p>Here is some details from a few of the main chips in my router.</p><p>-----------------<br />Infineon<br />PSB7200ZDW<br />7CA087W<br />-----------------<br />SPANSION<br />S29GL032A90TFIR4<br />735RBP64 MM<br />(C)04 SPANSION<br />-----------------<br />EtronTech<br />EM639165TS-6G<br />L238129ADJ42621ZM<br />-----------------</p><p>Am I right in saying that the &quot;Spansion S29GL032A90TFIR4&quot; is my flash chip?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79952">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">nas</div>
					<div class="post-datetime">
						20 Jan 2009, 10:12					</div>
				</div>
				<div class="post-content content">
					<p>Yes, that&#039;s correct.</p><p>But is looks like you have DG934G - a modified DG834G for Sky community.</p>											<p class="post-edited">(Last edited by <strong>nas</strong> on 20 Jan 2009, 10:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79953">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Mad Professor</div>
					<div class="post-datetime">
						20 Jan 2009, 10:16					</div>
				</div>
				<div class="post-content content">
					<p>The router was supplied by AOL.</p><p>I have just looked at the list of flash chips in the programs and the closest match I could find was. </p><p>/fc:74 S29GL032M BotB<br />/fc:75 S29GL032M TopB</p><p>As my flash chip is S29GL032A and the one in the program is S29GL032M are thease compatible, and if so how can I tell if it&#039;s BotB or TopB?</p><p>Thanks again for your time.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79957">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">nas</div>
					<div class="post-datetime">
						20 Jan 2009, 10:51					</div>
				</div>
				<div class="post-content content">
					<p>Well, I might be wrong but the difference between BotB and TopB is the start and the end of flash. The TopB starts from 0 and goes till 31, and BotB starts at 1 and goes to 32. This is where my knowledge ends, as I don&#039;t know when you need to choose one over another, but you can try to save flash using both of them (trials and errors path).</p><p>P.S. In order to ressurect the router the only partition you need to recover is bootloader. Simply recover the mtd2 (0x90000000,0x90020000) parition and after that you must be able to use Netgear Recovery Utility.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79958">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Mad Professor</div>
					<div class="post-datetime">
						20 Jan 2009, 11:25					</div>
				</div>
				<div class="post-content content">
					<p>I am running a backup as I type &quot;tjtagv2.exe -backup:cfe /fc:74&quot; most of the data is just zero&#039;s, I will also run the same command with /fc:75, and compair the start and end address, file size, and MD5.</p><p>As I already have backup&#039;s of the mtd&#039;s, is it just a case of renaming the need mtd and using the program to reprogram that block of the router. </p><p>mtd0.bin 3136 kb - MD5: 0a28fdd0c7daf1b9d5e2f08ec1f5b5aa<br />mtd1.bin&nbsp; 704 kb - MD5: d915619057b3f9e0729d6a9762fd53b8<br />mtd2.bin&nbsp; 128 kb - MD5: 999ce96c3393b7eaf7b3e6367bea882b<br />mtd3.bin&nbsp; &nbsp;64 kb - MD5: 06907252db7d7b952676df909b9daf7d<br />mtd4.bin&nbsp; &nbsp;64 kb - MD5: acef71faa8e211656ceb857fd43df344 </p><p>you say that mtd2 is the bootloader, in the program what would that be called, cfe, nvram, kernel, custom, bsp, wholeflash?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79961">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">nas</div>
					<div class="post-datetime">
						20 Jan 2009, 11:59					</div>
				</div>
				<div class="post-content content">
					<p>The mtd0 and mtd1 could be zeroed by Netgear Recovery Utility, but as you see a lot of zeros inside mtd2 partition (particulary the first 64k of it) then something is not working right.</p><p>The tjtagv2.exe -backup:cfe /fc:74 command might not work well, because CFE bootloader usually occupies the 64k of flash, while ADAM2 on this unit is 128k.</p><p>So it might be better to use the following commands:<br />tjtagv2.exe -backup:custom /start:0x90000000 /length:0x00020000 /window:0x90000000 /fc:74 /f:mtd2-74<br />tjtagv2.exe -backup:custom /start:0x90000000 /length:0x00020000 /window:0x90000000 /fc:75 /f:mtd2-75</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79964">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">Mad Professor</div>
					<div class="post-datetime">
						20 Jan 2009, 12:44					</div>
				</div>
				<div class="post-content content">
					<p>I have just run your custom command line. </p><p>mtd2-74.bin - 128KB (131,072bytes) - MD5: 940F6167298FE4866491C1490AC5B034.<br />mtd2-75.bin - 128KB (131,072bytes) - MD5: B1E1969D43EFE171ADB3CACACAB42DF5.</p><p>With your command there was alot more data upto around the half way mark then there was alot of zero&#039;s and f&#039;s.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79965">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Mad Professor</div>
					<div class="post-datetime">
						20 Jan 2009, 13:11					</div>
				</div>
				<div class="post-content content">
					<p>When I was talking about my flash chip I forgot to add that when I was &quot;CICLaMaB&quot; and told it to probe my router it comes up with the following.</p><p>JTag info - Port: &quot;LPT1:&quot;, Interface: &quot;Xilinx&quot;<br />CPU Chip:<br />- ID 00000000000000000001000000001111 (0x0000100F)<br />- Instruction Length set to 5<br />- TI AR7WRD TNETD7300GDU Rev 1 CPU<br />EJTAG<br />- IMPCODE: 0x41404000<br />- Version: 2.6<br />Issuing Processor / Peripheral Reset... Done!<br />Halting processor... Done!<br />Clearing watchdog... Done!<br />Probing &quot;Flash&quot; at (Flash Window: 0x90000000)... Done!<br />- Vendor ID: 00000000000000000000000000000001 (0x00000001)<br />- Device ID: 00000000000000000010001000000000 (0x00002200)<br />- AMD 29lv320MB 2Mx16 BotB (4MB)<br />- Window Start/Length&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 0x90000000 / 0x00400000<br />- BootLoader Area Start/Length: 0x90000000 / 0x00010000<br />- MTD3 Area Start/Length&nbsp; &nbsp; &nbsp; : 0x901f0000 / 0x00010000<br />- MTD0/1 Area Start/Length&nbsp; &nbsp; : 0x90010000 / 0x003f0000</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79966">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">nas</div>
					<div class="post-datetime">
						20 Jan 2009, 13:24					</div>
				</div>
				<div class="post-content content">
					<p>Good, that means your JTAG is working.</p><p>I would suggest you to backup another two partitions mtd3 (0x903e0000,0x903f0000) and mtd4 (0x903f0000,0x90400000) before going further.</p><p>I don&#039;t know which flash type worked for you, so here is examples for both.</p><p>tjtagv2.exe -backup:custom /start:0x903e0000 /length:0x00010000 /window:0x90000000 /fc:74 /f:mtd3-74<br />tjtagv2.exe -backup:custom /start:0x903e0000 /length:0x00010000 /window:0x90000000 /fc:75 /f:mtd3-75</p><p>tjtagv2.exe -backup:custom /start:0x903f0000 /length:0x00010000 /window:0x90000000 /fc:74 /f:mtd4-74<br />tjtagv2.exe -backup:custom /start:0x903f0000 /length:0x00010000 /window:0x90000000 /fc:75 /f:mtd4-75</p><p>And then you can flash the copy of your bootloader back to the unit, you will need to flash the whole 128k because the recovery instructions are located somewhere between 0x90010000 and 0x90020000.</p><p>tjtagv2.exe -flash:custom /start:0x90000000 /length:0x00020000 /window:0x90000000 /fc:74 /f:mtd2-74.bin<br />tjtagv2.exe -flash:custom /start:0x90000000 /length:0x00020000 /window:0x90000000 /fc:75 /f:mtd2-75.bin</p><p>P.S. There no sense to give the md5 sum of any partition on this unit, the only hash that makes a sense must be computed over first 64k of mtd2 partition (0x90000000,0x90010000). The problem with computing hash for the whole mtd2 partition (0x90000000,0x90020000) is that something constantly changing bytes there and will not get stable result. So here is mine hash for 0x90000000,0x90010000: 561933ff0782ee624ab7831aa6799044</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79968">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">nas</div>
					<div class="post-datetime">
						20 Jan 2009, 13:33					</div>
				</div>
				<div class="post-content content">
					<p>Assuming that Ciclamab detects the flash as 29lv320MB type (which is 29) you can use debrick-mod.exe to back things up:</p><p>debrick-mod.exe -backup:custom /start:0x90000000 /length:0x00020000 /window:0x90000000 /f:mtd2<br />debrick-mod.exe -backup:custom /start:0x903e0000 /length:0x00010000 /window:0x90000000 /f:mtd3<br />debrick-mod.exe -backup:custom /start:0x903f0000 /length:0x00010000 /window:0x90000000 /f:mtd4</p><p>And then flash the bootloader:</p><p>debrick-mod.exe -flash:custom /start:0x90000000 /length:0x00020000 /window:0x90000000 /f:mtd2.bin</p><p>P.S. Remember you need to flash the data you saved before using Netgear Recovery Utility.</p>											<p class="post-edited">(Last edited by <strong>nas</strong> on 20 Jan 2009, 13:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79975">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">Mad Professor</div>
					<div class="post-datetime">
						20 Jan 2009, 15:15					</div>
				</div>
				<div class="post-content content">
					<p>I have to add /xilinx to the end of the command for it to work. </p><p>I have made the extra backups. and moved them into a new folder.</p><p>I then copy the backup copy of mtd2.bin before the router messed up into the same folder as debrick-mod.exe</p><p>I then run &quot;debrick-mod.exe -flash:custom /start:0x90000000 /length:0x00020000 /window:0x90000000 /f:mtd2.bin /xilinx&quot;</p><p>The process keeps on stopping, it starts programing the blocks, and can get as far as 2% or it might only do a few blocks then just sits there. </p><p>I have waited upto 10 min&#039;s just to see if it will carry on, but it just sit&#039;s there.</p><p>Does it matter how I have the printer port setup, Normal, SPP, ECP, EPP, Ect?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79976">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">nas</div>
					<div class="post-datetime">
						20 Jan 2009, 15:20					</div>
				</div>
				<div class="post-content content">
					<p>I haven&#039;t had any successful expirience with Xilinx type cables, so I can&#039;t tell you what it might be because of.</p><p>But if you try it with tjtag?</p><p>tjtagv2.exe -flash:custom /start:0x90000000 /length:0x00020000 /window:0x90000000 /fc:74 /f:mtd2-74.bin</p><p>It does matter how the printer port is configured, but as you&#039;re able to detect CPU and flash it looks like not an issue to me.</p>											<p class="post-edited">(Last edited by <strong>nas</strong> on 20 Jan 2009, 15:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79982">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">Mad Professor</div>
					<div class="post-datetime">
						20 Jan 2009, 18:20					</div>
				</div>
				<div class="post-content content">
					<p>nas: Thanks for all your help. </p><p>It now looks like I have unbricked my router. </p><p>I remade the &quot;Xilinx&quot; cable with more grounds, and made a little batch file.</p><p>&quot;nas-reflash.bat&quot;</p><p>@ECHO OFF<br />cls<br />debrick-mod.exe -flash:custom /start:0x90000000 /length:0x00020000 /window:0x90000000 /f:mtd2.bin /xilinx<br />debrick-mod.exe -flash:custom /start:0x903e0000 /length:0x00010000 /window:0x90000000 /f:mtd3.bin /xilinx<br />debrick-mod.exe -flash:custom /start:0x903f0000 /length:0x00010000 /window:0x90000000 /f:mtd4.bin /xilinx</p><p>I put all my backups mtd&#039;s into the same folder as &quot;debrick-mod.exe&quot;.<br />I ran the &quot;nas-reflash.bat&quot; and ran fine no halting, errors, ect. <br />Once it was finished I powered down the router and held the reset button wile connecting the power, ran the Netgear Recovery Utility in windows xp not vista this time, once again no problems. <br />Disconnected the power and powered up the router again, network came back to life, and I can now get into the router via the web interface. </p><p>I have yet to set it all backup to make sure eveything is working ok, but I will report back as soon as I know. </p><p>Thanks again for your time and help with debricking my router. </p><p>I owe you a beer or two.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79985">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">nas</div>
					<div class="post-datetime">
						20 Jan 2009, 19:34					</div>
				</div>
				<div class="post-content content">
					<p>You are welcome and congratulations!</p><p>But didn&#039;t you want to put OpenWRT into this box?</p><p>P.S. Be forewarned that wireless most likely will not work.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79989">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">Mad Professor</div>
					<div class="post-datetime">
						20 Jan 2009, 20:53					</div>
				</div>
				<div class="post-content content">
					<p>Well I am back online using my bricked / debricked router. </p><p>Eveything seems to be working fine atm, all the lan ports, and wifi is also working.</p><p>Yes I did indeed want to install OpenWRT on this router, but I am just glad to have my internet back again, it was a royal pain in the back side to keep going round a mates house to use there internet when I needed to reply or read a post.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79990">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">nas</div>
					<div class="post-datetime">
						20 Jan 2009, 21:21					</div>
				</div>
				<div class="post-content content">
					<p>With nearby JTAG and experience you gained, you&#039;ll be able to be up and running in 40 minutes next time.</p><p>In any case, as I said if plan to install OpenWRT into this this box note that most likely the wireless card will not work, and you will need to replace bootloader to PSPBoot.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p86704">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">HellFire</div>
					<div class="post-datetime">
						27 Apr 2009, 01:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nas wrote:</cite><blockquote><p>Hello Professor,</p><p>You&#039;ll need to build the following cable: <a href="http://ciclamab.altervista.org/JTAG_Circ.htm">http://ciclamab.altervista.org/JTAG_Circ.htm</a> and use Ciclamab suite <a href="http://ciclamab.altervista.org">http://ciclamab.altervista.org</a>/ to flash the bootloader into the box.</p><p>If I understood you correctly you tried to load OpenWRT into this box? It&#039;s going to be dead end if you keep ADAM2 bootloader - OpenWRT willl boot but the ethernet interface will not work. So far I discovered the only way of having working copy of OpenWRT on this box is by substituting ADAM2 with PSPBoot. </p><p><a href="https://dev.openwrt.org/ticket/3782">https://dev.openwrt.org/ticket/3782</a><br /><a href="https://dev.openwrt.org/ticket/3124">https://dev.openwrt.org/ticket/3124</a></p><p><a href="http://mcmcc.bat.ru/dlinkt/acorp-russia/psp_boot/psp_boot_Acorp_W400G-1.4.0.4.rarDownload">http://mcmcc.bat.ru/dlinkt/acorp-russia … arDownload</a> <a href="http://mcmcc.bat.ru/dlinkt/acorp-russia/psp_boot/psp_boot_Acorp_W400G-1.4.0.4.rar">http://mcmcc.bat.ru/dlinkt/acorp-russia … .4.0.4.rar</a> and flash it into 0x90000000,0x90010000. Then you can continue by using ftp interface of PSPBoot.</p></blockquote></div><p>Would writing pspboot to it over telnet with dd work? (Currently i don&#039;t have the stuff to make a cable).</p><p>Can someone confirm the md5 for pspboot? (Link doesn&#039;t work, i found another with google).<br />d7f9a9e753c6a50bd65a585e5a465c4a *psp_boot_Acorp_W400G-1.4.0.4.bin</p><p>Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87130">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">nas</div>
					<div class="post-datetime">
						2 May 2009, 09:52					</div>
				</div>
				<div class="post-content content">
					<p>HellFire,</p><p>Yup you can flash the new bootloader with dd, but if something goes wrong then you&#039;ll need to find the cable stuff.</p><p>The file you&#039;ve found have the same checksum as mine.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87337">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">HellFire</div>
					<div class="post-datetime">
						5 May 2009, 14:00					</div>
				</div>
				<div class="post-content content">
					<p>Well i&#039;ve just managed to get my DG834Gv2 working (i have no idea how). I overwrote ADAM2 while connected to it&#039;s FTP server, after that it wouldn&#039;t boot anymore. Today i added a serial console (pinout on the wiki is wrong, it has Rx &amp; Tx swapped) and it booted. So i&#039;ll probably try and put OpenWRT on that too (i&#039;ve lost the wifi card so there&#039;s not really much i can do with it.. except modem/router).</p>											<p class="post-edited">(Last edited by <strong>HellFire</strong> on 5 May 2009, 14:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87340">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">nas</div>
					<div class="post-datetime">
						5 May 2009, 14:09					</div>
				</div>
				<div class="post-content content">
					<p>Well, if it booted ... then yo didn&#039;t overwrite your bootloader (ADAM2 in your case).</p><p>The DG834V2 is working fine with OpenWRT even with ADAM2.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87454">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">HellFire</div>
					<div class="post-datetime">
						6 May 2009, 21:09					</div>
				</div>
				<div class="post-content content">
					<p>Now it doesn&#039;t boot again (netgear&#039;s recovery app hung while it was reflashing)<br />boot output:<br /></p><div class="codebox"><pre><code>ADAM2 Revision 0.18.01
(C) Copyright 1996-2003 Texas Instruments Inc. All Rights Reserved.
(C) Copyright 2003 Telogy Networks, Inc.
Usage: setmfreq [-d] [-s sys_freq, in MHz] [cpu_freq, in MHz]
Memory optimization Complete!

DGB34 &gt;
CAUSE    = 0x10808010
CAUSE    = 0x10808008
CAUSE    = 0x10808008
CAUSE    = 0x10808008
CAUSE    = 0x10808008
CAUSE    = 0x10808008
CAUSE    = 0x10808008
CAUSE    = 0x10808008
CAUSE    = 0x10808008
CAUSE    = 0x10808008
etc...</code></pre></div>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>