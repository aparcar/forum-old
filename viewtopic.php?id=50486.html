<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> How long is too long?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 14 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p232516">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">evansste</div>
					<div class="post-datetime">
						5 May 2014, 23:50					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m trying to put the original firmware back onto my TP-MR3040 router.&nbsp; I got to the final step where I type the following at the command prompt:</p><p>mtd -r write /tmp/newname.bin firmware</p><p>&quot;newname.bin&quot; is the name of the modified file where I followed the procedure to get the file size down to 3,932,160 bytes.</p><p>After entering the above &quot;mtd&quot; command at the prompt, the computer started working.&nbsp; However, now it seems to be stuck on the &quot;rebooting ...&quot; stage.&nbsp; The screen has been showing &quot;rebooting ...&quot; for at least the past half hour.&nbsp; How long is too long?&nbsp; Does it normally take this long to complete this stage, or is something wrong?</p><p>The longer it takes, the more worried I get.&nbsp; I&#039;m afraid to just shut the whole thing down for fear that doing so may cause some sort of damage.&nbsp; Does anyone know how long this process is typically supposed to take?&nbsp; I can let it run overnight.&nbsp; However, if it comes to taking that long, am I just screwed and something went terribly wrong?</p><p>Before typing the &quot;mtd&quot; command at the prompt, I had uploaded the larger, non-abbreviated, firmware from TP-Link to the /etc directory on the router.&nbsp; I thought that putting it in the directory was the first step before cutting it down to the 3,932,160 bytes.&nbsp; Once I realized that shrinking the file is something that is supposed to be done on my PC, I made the smaller file, and then uploaded it to the /etc directory on the router.&nbsp; So there was one file that was too big, and the newer file called &quot;newname.bin&quot;, which is the correct size, both residing in the router&#039;s /etc directory.</p><p>Before running the &quot;mtd&quot; command on the &quot;newname.bin&quot; file, I ran the following line at the prompt to make sure that the correct bits were deleted.</p><p>hexdump -C original_filename.bin | grep 00020200 -B 3</p><p>The response looked similar to the example given on the OpenWRT page, so I&#039;m pretty sure that the &quot;newname.bin&quot; file is okay.&nbsp; However is it a problem that I ran the &quot;mtd&quot; command on &quot;newname.bin&quot; while the larger firmware file was also in the /etc directory?&nbsp; Did I royally mess something up, or am I overreacting that it&#039;s taking so long?</p><p>Thanks for your time.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232526">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">dabyd64</div>
					<div class="post-datetime">
						6 May 2014, 02:59					</div>
				</div>
				<div class="post-content content">
					<p>You should have copied the firm to /tmp , it is stored in RAM.<br />Then just do&nbsp; sysupgrade /tmp/StockFW.bin</p><p>I&#039;ve done it hundreds of times</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232538">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						6 May 2014, 07:19					</div>
				</div>
				<div class="post-content content">
					<p>anyway it&#039;s normal that after &quot;rebooting&quot; you should close that window and try to connect to the router web page..</p><p>check default ip for stock firmware...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232624">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">evansste</div>
					<div class="post-datetime">
						7 May 2014, 03:14					</div>
				</div>
				<div class="post-content content">
					<p>Thank you so much for your responses.</p><p>The thing was taking so long that I left it running while I ran some errands.&nbsp; When I got back, around two hours later, I noticed that it had stopped running and printed out a message saying that it was unable to complete the write, or something like that.&nbsp; However, because I had a prompt again, I wasn&#039;t afraid of stopping some critical process.</p><p>So I tried connecting to the router by following the instructions that came with the router, and was glad to see it start up like normal.&nbsp; Just to be sure, I reinstalled the firmware again via their tools, and everything seems to be working well.</p><p>I was running a live version of linux from a CD when I was running that command.&nbsp; I don&#039;t know if that had anything to do with what happened, or not.&nbsp; Either way, I&#039;m very happy to have gotten success!</p><p>Thank you both for responding to my post.&nbsp; It&#039;s always great to know that there are others who are willing to help.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>