<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Wifi connect on dual-boot laptop fails in Ubuntu, but not Mac OS X</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p330177">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">prwood</div>
					<div class="post-datetime">
						30 Jun 2016, 07:53					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m running Ubuntu Desktop 16.04 on a MacBook 13&quot; (on which I also dual-boot Mac OS X 10.7.5). This laptop has a Broadcom wireless card: &quot;Broadcom BCM4328 802.11 Wireless Controller&quot; according to Mac OS X. In Ubuntu, I&#039;m using the proprietary Broadcom STA Wireless Driver.</p><p>I connect the laptop wirelessly to a TP-Link WDR-3600 wifi router, which is running OpenWRT 15.05.1. It has two Atheros wifi chips built in, one for the 2.4GHz band and one for the 5GHz band. I have a separate SSID for each band, but both are set up with the same authentication credentials. In OpenWRT, the hardware for the 2.4GHz band is listed as &quot;Generic MAC80211 802.11bgn&quot; and the 5GHz band is listed as &quot;Atheros AR9580 802.11an&quot;.</p><p>The problem I&#039;m experiencing right now is that, when I choose to connect to the 2.4GHz band SSID using Ubuntu, my passphrase is accepted, and the connection seems to negotiate for a minute or so, and then either shows as disconnected, or shows as connected but has no IP connectivity. Either way, there is no actual IP connectivity when I try to ping other hosts or browse the web. If I then attempt to connect to the 5GHz band SSID, the connection is successful almost immediately, and ping/web browsing/etc works normally. The problem with connecting to the 2.4GHz band persists across deleting/recreating the wireless connections in the network manager, as well as across reboots.</p><p>When I reboot the computer into Mac OS X and try to connect to the 2.4GHz network, it works immediately, as does the 5GHz network.</p><p>No other Mac or Linux computers, or iDevices, in the household are having this same issue.</p><p>I&#039;m trying to determine whether the problem lies in the computer hardware, operating system, router hardware, or router operating system, or if it&#039;s some unique combination of all four factors that causes the issue. Right now, my best guess is that Ubuntu&#039;s DHCP client isn&#039;t getting along well with OpenWRT&#039;s DHCP server, but I&#039;m not sure why or who&#039;s to blame, or what to do further to diagnose the issue.</p><p>If anyone has suggestions on how to proceed, please let me know. I&#039;ve included relevant log file data as Gists on Github. I plan to cross-post this in the Ubuntu forums.</p><p>Connecting from Ubuntu:<br />Syslog from Ubuntu when trying+failing to connect to the 2.4GHz band: <a href="https://gist.github.com/prwood/7dd822e5323fe1fad7d578609c0f586a">https://gist.github.com/prwood/7dd822e5 … 609c0f586a</a><br />Syslog from Ubuntu when connecting to the 5GHz band: <a href="https://gist.github.com/prwood/5d218c32033ed45fb58c154d4be9a9dc">https://gist.github.com/prwood/5d218c32 … 4d4be9a9dc</a><br />Syslog from OpenWRT when trying+failing to connect to the 2.4GHz band: <a href="https://gist.github.com/prwood/4ea38f6d782f1ace7db65024a3b1bc03">https://gist.github.com/prwood/4ea38f6d … 24a3b1bc03</a><br />Syslog from OpenWRT when connecting to the 5GHz band: <a href="https://gist.github.com/prwood/00b0fb7a991004f177d5dbfb43e29c61">https://gist.github.com/prwood/00b0fb7a … fb43e29c61</a></p><p>Connecting from Mac OS X:<br />Syslog from Mac OS X when connecting to the 2.4GHz band: <a href="https://gist.github.com/prwood/40c2d877dc5e6c40bc03849776688b73">https://gist.github.com/prwood/40c2d877 … 9776688b73</a><br />Syslog from Mac OS X when connecting to the 5GHz band: <a href="https://gist.github.com/prwood/08f0cd4105381f6e5b3b8618ee1d334c">https://gist.github.com/prwood/08f0cd41 … 18ee1d334c</a><br />Syslog from OpenWRT when connecting to the 2.4GHz band: <a href="https://gist.github.com/prwood/c550044c4791c8db86c775c6f98d8ffc">https://gist.github.com/prwood/c550044c … c6f98d8ffc</a><br />Syslog from OpenWRT when connecting to the 5GHz band: <a href="https://gist.github.com/prwood/af3b52dce6b2d22fe2bb8803895b42b0">https://gist.github.com/prwood/af3b52dc … 03895b42b0</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p330276">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">prwood</div>
					<div class="post-datetime">
						1 Jul 2016, 16:26					</div>
				</div>
				<div class="post-content content">
					<p>Just to post an update here, I still haven&#039;t been successful in getting the laptop running Ubuntu to connect to the router using the 2.4GHz band. I&#039;ve tried some additional diagnostics, and it seems that the problem also occurs whether I&#039;m using DHCP or a static IP address.</p><p>I have also tried a Mac desktop in the same house that&#039;s also dual-booting Mac OS X and Ubuntu, and it has the same problem when connecting to the 2.4GHz band in Ubuntu, but works fine on the 5GHz band.</p><p>At this point I can summarize the problem as follows:</p><p><em><strong>I cannot gain TCP/IP connectivity on Mac desktops or laptops running the Ubuntu OS when connecting to a TP-Link Router running the OpenWRT OS, over the 2.4GHz band.</strong></em></p><p>???</p><p>Here&#039;s a link to the parallel thread on the Ubuntu forums, which has a lot more detail:</p><p><a href="http://ubuntuforums.org/showthread.php?t=2329313">http://ubuntuforums.org/showthread.php?t=2329313</a></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>