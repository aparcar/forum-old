<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Compile C Program using libwebsocket for OpenWRT</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p309149">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">wqsa007gg</div>
					<div class="post-datetime">
						27 Jan 2016, 06:23					</div>
				</div>
				<div class="post-content content">
					<p>Hello all, I am having trouble cross-compiling a C program that uses libwebsocket for OpenWRT. I cannot find any document for doing so. Has anyone ever done it or is there any other easier way to run libwebsocket server on OpenWRT?</p><p>Thanks in advance.</p><p>===Update===<br />There is a makefile: <a href="https://github.com/warmcat/libwebsockets/blob/master/cross-openwrt-makefile">https://github.com/warmcat/libwebsocket … t-makefile</a><br />But I am not sure how to use it correctly. Do I just copy it to /openwrt dir, rename it as Makefile and run make?</p>											<p class="post-edited">(Last edited by <strong>wqsa007gg</strong> on 27 Jan 2016, 16:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p309153">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						27 Jan 2016, 07:12					</div>
				</div>
				<div class="post-content content">
					<p>If you post the compilation log here, you will get a better chance to receive helps from readers here. Until then, I don&#039;t suppose anyone here knows what troubles you are talking about.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p309164">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">bolvan</div>
					<div class="post-datetime">
						27 Jan 2016, 10:14					</div>
				</div>
				<div class="post-content content">
					<p>Recent trunk versions contain gcc build system. I found its very comfortable to compile on the router itself.<br />Although some steps are required.<br />First, you need external storage. Not possible on routers without USB. Also at least have 64 mb. Will be very hard to compile anything on 32 mb system. Even 64 mb will require swap sometimes.<br />Second, you need to compile firmware youself. In the build root locale required /usr/include and /usr/lib/*.a&nbsp; &nbsp;and copy to the router.<br />Third, need to create some empty libs and make some symbolic links.&nbsp; &nbsp;&quot;ar cr /usr/lib/libm.a&quot;&nbsp; &nbsp;&quot;ln -s /lib/libc.so /lib/ld-musl-mips.so.1&quot;.<br />Fourth, sometimes bash cause problems when used in Makefile. Do not install bash. Its not installed by default.</p>											<p class="post-edited">(Last edited by <strong>bolvan</strong> on 27 Jan 2016, 10:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p309214">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">wqsa007gg</div>
					<div class="post-datetime">
						27 Jan 2016, 16:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mazilo wrote:</cite><blockquote><p>If you post the compilation log here, you will get a better chance to receive helps from readers here. Until then, I don&#039;t suppose anyone here knows what troubles you are talking about.</p></blockquote></div><p>I just updated the question.</p>											<p class="post-edited">(Last edited by <strong>wqsa007gg</strong> on 27 Jan 2016, 16:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p309240">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">karlp</div>
					<div class="post-datetime">
						27 Jan 2016, 19:13					</div>
				</div>
				<div class="post-content content">
					<p>libwebsockets is already packaged for openwrt in both CC and trunk.&nbsp; Just follow <a href="https://wiki.openwrt.org/doc/devel/packages">https://wiki.openwrt.org/doc/devel/packages</a> or <a href="https://wiki.openwrt.org/doc/devel/crosscompile">https://wiki.openwrt.org/doc/devel/crosscompile</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p309253">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">wqsa007gg</div>
					<div class="post-datetime">
						27 Jan 2016, 21:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>karlp wrote:</cite><blockquote><p>libwebsockets is already packaged for openwrt in both CC and trunk.&nbsp; Just follow <a href="https://wiki.openwrt.org/doc/devel/packages">https://wiki.openwrt.org/doc/devel/packages</a> or <a href="https://wiki.openwrt.org/doc/devel/crosscompile">https://wiki.openwrt.org/doc/devel/crosscompile</a></p></blockquote></div><p>Thanks for your reply. Can you provide more specific steps? Do I upgrade my router and use this <a href="http://git.openwrt.org/?p=15.05/openwrt.git;a=tree;hb=HEAD">http://git.openwrt.org/?p=15.05/openwrt … ee;hb=HEAD</a> for cross-compile?</p>											<p class="post-edited">(Last edited by <strong>wqsa007gg</strong> on 27 Jan 2016, 21:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p309277">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">wqsa007gg</div>
					<div class="post-datetime">
						27 Jan 2016, 23:01					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for all the responses. I just solved the problem.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p343681">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">rcetin</div>
					<div class="post-datetime">
						14 Nov 2016, 15:49					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,</p><p>@wqsa007gg how did you cross compile libwebsockets? i cant do it. Can you describe your steps please? thank you.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>