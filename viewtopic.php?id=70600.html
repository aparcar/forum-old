<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Letting some machines punch through Default VPN gateway to ISP one.</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 21 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p356264">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">tuxwrt</div>
					<div class="post-datetime">
						14 Apr 2017, 17:33					</div>
				</div>
				<div class="post-content content">
					<p>Ok sounds a little complex I know, but it really should not be. So I set up my OpenWRT router to act as the VPN router routing all traffic over it to the VPN provider, but some machines on my LAN need access to the domestic gateway that the router is using to get out to the VPN provider. </p><p>How do I allow exceptions to pass through by-passing the VPN while accessing the ISP&#039;s gateway? I tried using ip route triggers which seemed to work for a little while but then the client machines would drop off the internet again. </p><p>Is there a preferred method to allow a list of machines that are allowed to by-pass the VPN route and have access to the internet but still be subject to incoming rules protection/services of the firewall?</p><p>Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p356265">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">westrem</div>
					<div class="post-datetime">
						14 Apr 2017, 17:52					</div>
				</div>
				<div class="post-content content">
					<p>Luci-app-vpnbypass</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p356267">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">tuxwrt</div>
					<div class="post-datetime">
						14 Apr 2017, 17:57					</div>
				</div>
				<div class="post-content content">
					<p>&gt; luci-app-vpnbypass</p><p>Don&#039;t see that in the repo?</p><div class="quotebox"><blockquote><p>opkg list |grep vpn|grep luci<br />luci-app-openvpn - git-16.018.33482-3201903-1 - LuCI Support for OpenVPN<br />luci-i18n-openvpn-ca - git-16.018.33482-3201903-1 - Translation for luci-app-openvpn - Català (Catalan)<br />luci-i18n-openvpn-cs - git-16.018.33482-3201903-1 - Translation for luci-app-openvpn - Čeština (Czech)<br />luci-i18n-openvpn-de - git-16.018.33482-3201903-1 - Translation for luci-app-openvpn - Deutsch (German)<br />luci-i18n-openvpn-el - git-16.018.33482-3201903-1 - Translation for luci-app-openvpn - Ελληνικά (Greek)<br />luci-i18n-openvpn-en - git-16.018.33482-3201903-1 - Translation for luci-app-openvpn - English<br />luci-i18n-openvpn-es - git-16.018.33482-3201903-1 - Translation for luci-app-openvpn - Español (Spanish)<br />luci-i18n-openvpn-fr - git-16.018.33482-3201903-1 - Translation for luci-app-openvpn - Français (French)<br />luci-i18n-openvpn-he - git-16.018.33482-3201903-1 - Translation for luci-app-openvpn - עִבְרִית (Hebrew)<br />luci-i18n-openvpn-hu - git-16.018.33482-3201903-1 - Translation for luci-app-openvpn - Magyar (Hungarian)<br />luci-i18n-openvpn-it - git-16.018.33482-3201903-1 - Translation for luci-app-openvpn - Italiano (Italian)<br />luci-i18n-openvpn-ja - git-16.018.33482-3201903-1 - Translation for luci-app-openvpn - 日本語 (Japanese)<br />luci-i18n-openvpn-ms - git-16.018.33482-3201903-1 - Translation for luci-app-openvpn - Bahasa Melayu (Malay)<br />luci-i18n-openvpn-no - git-16.018.33482-3201903-1 - Translation for luci-app-openvpn - Norsk (Norwegian)<br />luci-i18n-openvpn-pl - git-16.018.33482-3201903-1 - Translation for luci-app-openvpn - Polski (Polish)<br />luci-i18n-openvpn-pt - git-16.018.33482-3201903-1 - Translation for luci-app-openvpn - Português (Portuguese)<br />luci-i18n-openvpn-pt-br - git-16.018.33482-3201903-1 - Translation for luci-app-openvpn - Português do Brasil (Brazialian Portuguese)<br />luci-i18n-openvpn-ro - git-16.018.33482-3201903-1 - Translation for luci-app-openvpn - Română (Romanian)<br />luci-i18n-openvpn-ru - git-16.018.33482-3201903-1 - Translation for luci-app-openvpn - Русский (Russian)<br />luci-i18n-openvpn-sk - git-16.018.33482-3201903-1 - Translation for luci-app-openvpn - Slovenčina (Slovak)<br />luci-i18n-openvpn-sv - git-16.018.33482-3201903-1 - Translation for luci-app-openvpn - Svenska (Swedish)<br />luci-i18n-openvpn-tr - git-16.018.33482-3201903-1 - Translation for luci-app-openvpn - Türkçe (Turkish)<br />luci-i18n-openvpn-uk - git-16.018.33482-3201903-1 - Translation for luci-app-openvpn - украї́нська (Ukrainian)<br />luci-i18n-openvpn-vi - git-16.018.33482-3201903-1 - Translation for luci-app-openvpn - Tiếng Việt (Vietnamese)<br />luci-i18n-openvpn-zh-cn - git-16.018.33482-3201903-1 - Translation for luci-app-openvpn - 普通话 (Chinese)<br />luci-i18n-openvpn-zh-tw - git-16.018.33482-3201903-1 - Translation for luci-app-openvpn - 臺灣華語 (Taiwanese)</p></blockquote></div><p>Where do I find it?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p356293">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						15 Apr 2017, 00:45					</div>
				</div>
				<div class="post-content content">
					<p>luci-app-vpnbypass is in the OpenWrt DD trunk/LEDE snapshot repositories. For OpenWrt CC 15.05.1/LEDE 17.01.0 see&nbsp; <a href="https://stangri.github.io/openwrt-repo/.">https://stangri.github.io/openwrt-repo/.</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p356319">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">tuxwrt</div>
					<div class="post-datetime">
						15 Apr 2017, 14:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>stangri wrote:</cite><blockquote><p>luci-app-vpnbypass is in the OpenWrt DD trunk/LEDE snapshot repositories. For OpenWrt CC 15.05.1/LEDE 17.01.0 see&nbsp; <a href="https://stangri.github.io/openwrt-repo/.">https://stangri.github.io/openwrt-repo/.</a></p></blockquote></div><br /><p>Ahh I see. Ok.. seems very handy so I will add and test. Hope this makes it into the main trunk as there seems <a href="http://www.dslreports.com/shownews/VPN-Traffic-Use-Spikes-in-Wake-of-Death-of-User-Privacy-Rules-139365"> renewed vigour into VPN solutions</a> these days. </p><p>Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p356322">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						15 Apr 2017, 15:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>tuxwrt wrote:</cite><blockquote><p>Hope this makes it into the main trunk as there seems <a href="http://www.dslreports.com/shownews/VPN-Traffic-Use-Spikes-in-Wake-of-Death-of-User-Privacy-Rules-139365"> renewed vigour into VPN solutions</a> these days.</p></blockquote></div><p>It is in the &quot;main trunk&quot; and current snapshots repository, but it was submitted after the 17.01 forked so if you&#039;re using a stable release (as you probably should), it&#039;s not in that release repository.<br />You may also check out the README on the OpenVPN Policy Routing package as it&#039;s a more powerful solution.</p>											<p class="post-edited">(Last edited by <strong>stangri</strong> on 15 Apr 2017, 15:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p356323">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">tuxwrt</div>
					<div class="post-datetime">
						15 Apr 2017, 15:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>It is in the &quot;main trunk&quot; and current snapshots repository, but it was submitted after the 17.01 forked so if you&#039;re using a stable release (as you probably should), it&#039;s not in that release repository.</p></blockquote></div><p>Yup.. I am running 15.05 Chaos Calmer and it is running very well thank you. I have tested online banking and other Geospecific services and they all seem to work splendidly. So thank you very much for your efforts. </p><div class="quotebox"><blockquote><p>You may also check out the README on the OpenVPN Policy Routing package as it&#039;s a more powerful solution.</p></blockquote></div><p>I intend to look at it. Seems to me this is what Linux excels at and once again think it can reaches places that other OS&#039;s cannot. I am looking at you pf/opnsense. </p><p>I owe you a beer my friend!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p356443">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">tuxwrt</div>
					<div class="post-datetime">
						17 Apr 2017, 12:51					</div>
				</div>
				<div class="post-content content">
					<p>Just one caveat and it might be specific to my set up but upon reboot the local dns queries broke. That is 127.0.0.1 could not resolve anything. I am not using DNSMasq as intended though. I have my own DNS/DHCP&nbsp; server on the network. In the end I just could not get dnsmasq to behave so I installed bind-server instead and it all seems to work as intended. </p><p>Not sure it is the fault of any thing really but just thought I would mention test your config by a reboot make sure it comes up as you expect it to.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>