<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> anyone found way to install nodeJS on openWRT?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 23 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p275572">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">vandeputp</div>
					<div class="post-datetime">
						7 May 2015, 17:45					</div>
				</div>
				<div class="post-content content">
					<p>Really want to have nodeJS installed so it is much easier to develop</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p275580">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						7 May 2015, 18:50					</div>
				</div>
				<div class="post-content content">
					<p>This Wiki on <a href="http://wiki.openwrt.org/doc/howto/nodejs">nodeJS</a> seems to explain how to enable to build nodeJS. However, the link on the wiki seems to be broken. Nevertheless, you can do a search <a href="https://github.com/search?utf8=%E2%9C%93&amp;q=nodejs+openwrt"><em>nodejs openwrt</em> on Github</a> and find a lot of nodeJS packages for OpenWRT. It looks to me the ones from <a href="https://github.com/xinpascal/openwrt-nodejs">xinpascal</a>, <a href="https://github.com/lixuande/openwrt-nodejs">lixuande</a>, and <a href="https://github.com/AlexMarlo/nodejs-openwrt">AlexMarlo</a> seem to include the OpenWRT Makefile for the nodeJS package. To use one of them to build your own, do the following:<br /></p><ol class="decimal"><li><p>Edit your feeds.conf file to include one of the git repos. For instance, if you choose the git repo from <a href="https://github.com/xinpascal/openwrt-nodejs">xinpascal</a>, then add this line <strong>src-git xinpascal git://github.com/xinpascal/openwrt-nodejs.git</strong> to your feeds.conf file.</p></li><li><p>Once you have done the above, you can execute <em>scripts/feeds update xinpascal; scripts/feeds install nodejs</em></p></li><li><p>Execute <em>make menuconfig</em> to select the nodJS packag.</p></li><li><p>Run <em>make package/nodejs/compile</em> to compile nodeJS package.</p></li></ol><p>That&#039;s all there to it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p275635">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">zo0ok</div>
					<div class="post-datetime">
						8 May 2015, 08:28					</div>
				</div>
				<div class="post-content content">
					<p>I build Nodejs 0.12.2 for Barrier Breaker just a few days ago.<br />Two minor patches where required for my platform (ARM / Raspberry Pi).</p><p>You can read about it here:<br />&nbsp; <a href="http://techfindings.one/archives/1954">http://techfindings.one/archives/1954</a></p><br /><p>The build script clearly contains stuff that is not needed there. Also, I would like to build without SSL but I had problems with that.<br />If you can improve (the build script) and/or replicate on other targets, please let us know <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>zo0ok</strong> on 27 Sep 2015, 17:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p275648">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">peterg</div>
					<div class="post-datetime">
						8 May 2015, 11:05					</div>
				</div>
				<div class="post-content content">
					<p>I have a MIPS based system and modified the makefile to remove the ARM|X86 dependencies.<br />I can&#039;t build it though - I guess there is a reason MIPS is excluded. Can anybody elaborate or have some tips on how I can build it for a MIPS target?</p><br /><p>---- <br />[...]<br />v8.cc:(.text+0x3c): undefined reference to `v8::internal::CPU::SetUp()&#039;<br />v8.cc:(.text+0x44): undefined reference to `v8::internal::CPU::SupportsCrankshaft()&#039;<br />/home/pgerten/build/openwrt/build_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/node-v0.10.25/out/Release/obj.target/deps/v8/tools/gyp/libv8_base.a(platform-posix.o): In function `v8::internal::init_fast_sin_function()&#039;:<br />platform-posix.cc:(.text+0x638): undefined reference to `v8::internal::CreateTranscendentalFunction(v8::internal::TranscendentalCache::Type)&#039;<br />/home/pgerten/build/openwrt/build_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/node-v0.10.25/out/Release/obj.target/deps/v8/tools/gyp/libv8_base.a(platform-posix.o): In function `v8::internal::init_fast_cos_function()&#039;:<br />platform-posix.cc:(.text+0x690): undefined reference to `v8::internal::CreateTranscendentalFunction(v8::internal::TranscendentalCache::Type)&#039;<br />/home/pgerten/build/openwrt/build_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/node-v0.10.25/out/Release/obj.target/deps/v8/tools/gyp/libv8_base.a(platform-posix.o): In function `v8::internal::init_fast_tan_function()&#039;:<br />platform-posix.cc:(.text+0x6e8): undefined reference to `v8::internal::CreateTranscendentalFunction(v8::internal::TranscendentalCache::Type)&#039;<br />/home/pgerten/build/openwrt/build_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/node-v0.10.25/out/Release/obj.target/deps/v8/tools/gyp/libv8_base.a(platform-posix.o): In function `v8::internal::init_fast_log_function()&#039;:<br />platform-posix.cc:(.text+0x740): undefined reference to `v8::internal::CreateTranscendentalFunction(v8::internal::TranscendentalCache::Type)&#039;<br />/home/pgerten/build/openwrt/build_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/node-v0.10.25/out/Release/obj.target/deps/v8/tools/gyp/libv8_base.a(platform-posix.o): In function `v8::internal::init_fast_sqrt_function()&#039;:<br />platform-posix.cc:(.text+0x794): undefined reference to `v8::internal::CreateSqrtFunction()&#039;<br />collect2: error: ld returned 1 exit status<br />make[5]: *** [/home/pgerten/build/openwrt/build_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/node-v0.10.25/out/Release/node] Error 1<br />make[5]: Leaving directory `/home/pgerten/build/openwrt/build_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/node-v0.10.25/out&#039;<br />make[4]: *** [node] Error 2<br />make[4]: Leaving directory `/home/pgerten/build/openwrt/build_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/node-v0.10.25&#039;<br />make[3]: *** [/home/pgerten/build/openwrt/build_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/node-v0.10.25/.built] Error 2<br />make[3]: Leaving directory `/home/pgerten/build/openwrt/feeds/nodejs/nodejs&#039;<br />make[2]: *** [package/feeds/nodejs/nodejs/compile] Error 2<br />make[2]: Leaving directory `/home/pgerten/build/openwrt&#039;<br />make[1]: *** [/home/pgerten/build/openwrt/staging_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/stamp/.package_compile] Error 2<br />make[1]: Leaving directory `/home/pgerten/build/openwrt&#039;<br />make: *** [world] Error 2</p>											<p class="post-edited">(Last edited by <strong>peterg</strong> on 8 May 2015, 11:05)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p275700">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						8 May 2015, 19:11					</div>
				</div>
				<div class="post-content content">
					<p>I don&#039;t know if <a href="https://github.com/nneves/openwrt_mips_ar9331_nodejs">this</a> will help or not. it is also a MIPs platform.</p>											<p class="post-edited">(Last edited by <strong>mazilo</strong> on 8 May 2015, 19:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p275702">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">mkschreder</div>
					<div class="post-datetime">
						8 May 2015, 19:20					</div>
				</div>
				<div class="post-content content">
					<p>If we get node js running in conjunction with luciexpress then we can have a completely javascript based control. I&#039;m a bit concerned though about the resource consumption of node under openwrt. On a desktop node can sometimes eat up a lot of memory, specially when your project depends on a bunch of npm libraries which in turn depend on others and so on. So when you launch your app you have to keep thousands of lines of javascript code in memory. </p><p>If you run node, it is probably a good idea to restrict usage to only things that are currently done in bash scripts (except node is not bash and some things are actually much easier to do in bash). So you don&#039;t have node daemons running but only start scripts that exit as soon as they are done.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p275740">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">peterg</div>
					<div class="post-datetime">
						9 May 2015, 06:15					</div>
				</div>
				<div class="post-content content">
					<p>I am running on a RT5350 platform. Would that be binary compatible to AR9331?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p275742">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						9 May 2015, 06:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>peterg wrote:</cite><blockquote><p>I am running on a RT5350 platform. Would that be binary compatible to AR9331?</p></blockquote></div><p>Sorry that I can&#039;t help you on that. <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p275756">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">jagspaul</div>
					<div class="post-datetime">
						9 May 2015, 12:58					</div>
				</div>
				<div class="post-content content">
					<p>You can try this</p><p><a href="http://giorgiocefaro.com/blog/installing-node-js-on-arduino-yun">http://giorgiocefaro.com/blog/installin … rduino-yun</a></p><p>I have build node.js with my custom openwrt from source.</p><p>download node.js package from <a href="https://github.com/giorrrgio/nodejs-linino.">https://github.com/giorrrgio/nodejs-linino.</a> Put it under package folder of wrt source.<br />make menuconfig<br />select node under languages sub menu (<a href="http://wiki.openwrt.org/doc/howto/nodejs#build">http://wiki.openwrt.org/doc/howto/nodejs#build</a>)<br />save &amp; exit<br />make</p><p>N.B. You must have a live internet connection while running make.</p><p>/jags</p>											<p class="post-edited">(Last edited by <strong>jagspaul</strong> on 9 May 2015, 13:29)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p275770">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">zo0ok</div>
					<div class="post-datetime">
						9 May 2015, 16:17					</div>
				</div>
				<div class="post-content content">
					<p>I have entertained myself trying to build Node.js 0.12.2 for ar71xx (same way as I successfully built for brcm2708 mentioned above).</p><p>I run into floating point problems though...<br />V8 is not supposed to support &quot;soft floats&quot; since a while ago.<br />I anyway attempted to build it for soft floats, but I always end up with:</p><div class="codebox"><pre><code># dmesg | tail -n 1
[16489.990000] FPU emulator disabled, make sure your toolchainwas compiled with software floating point support (soft-float)</code></pre></div><p>In config.ar71xx_generic (for BB):<br />CONFIG_SOFT_FLOAT=y</p><p>As I see it there are two possible ways to get Nodejs.running<br />1) Building it to not use floats (unsupported by V8, but may work for a while)<br />2) Building it to use floats, and let Linux kernel handle that via exceptions</p><p>In the second case... do I need to<br />1) Rebuild toolchain and firmware from scratch?<br />2) Build/obtain/load just a kernel module?<br />3) Just active/enable FPU emulator somehow?<br />4) Give up, becuase this can never work anyway?</p><p>Any suggestions are appreciated. Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p275923">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						11 May 2015, 11:05					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mkschreder wrote:</cite><blockquote><p>If we get node js running in conjunction with luciexpress then we can have a completely javascript based control.</p></blockquote></div><p>I&#039;d very much dislike a dependency on node.js. Seriously, this is embedded stuff, at some point you have to deal with low level languages, be it scripts, C or uncommon languages like Lua. I&#039;m specifically worried about the portability of node.js to other architectures besides vanilla ARM, x86 or MIPS.</p><p>In my opinion it is the wrong approach to shove all the web environment stuff onto OpenWrt just because it is more familiar, one should work with and understand the limitations of small embedded environments and make proper tradeoffs.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p275928">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">zo0ok</div>
					<div class="post-datetime">
						11 May 2015, 14:07					</div>
				</div>
				<div class="post-content content">
					<p>jow, I agree to 100%.<br />OpenWrt should not be dependent on Node.js.<br />Node.js depends rather heavily on FPU, and typical OpenWrt targets lack FPU.</p><p>However, I find OpenWrt an interesting platform for deploying Node.js services.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p279631">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">roger_</div>
					<div class="post-datetime">
						10 Jun 2015, 20:53					</div>
				</div>
				<div class="post-content content">
					<p>Someone should contribute a Makefile to the packages feed on GitHub.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p279684">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">zo0ok</div>
					<div class="post-datetime">
						11 Jun 2015, 10:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>roger_ wrote:</cite><blockquote><p>Someone should contribute a Makefile to the packages feed on GitHub.</p></blockquote></div><p>I think someone would, unless<br /> - it was seriously hard to build Node.js (esp current release) for most OpenWrt targets<br /> - many/most OpenWrt targets will never have Node.js because of lack of V8 support<br /> - Node.js had quite poor performance on typical OpenWrt targets<br /> - Node.js is ~15Mb when build, and does not deploy well to most OpenWrt targets</p><p>It is quite easy to build a static Node.js for x86, x86_64 and perhaps some newer ARMs using the toolchain.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p280200">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">zo0ok</div>
					<div class="post-datetime">
						15 Jun 2015, 23:40					</div>
				</div>
				<div class="post-content content">
					<p>In case anyone care, I built and run Node.js v0.10.38 for ramips/mt7620:<br /><a href="http://techfindings.one/archives/2064">http://techfindings.one/archives/2064</a></p><p>Perhaps LuaNode would be more suitable for OpenWrt?</p>											<p class="post-edited">(Last edited by <strong>zo0ok</strong> on 27 Sep 2015, 17:22)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>