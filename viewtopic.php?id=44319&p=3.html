<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TP-Link TL-WR941ND v5.0</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 31 Mar 2018 and 27 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 3 of 3</div><nav><ul><li><a href="viewtopic.php%3Fid=44319&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=44319&amp;p=2.html">2</a></li><li class="pagination-current"><span>3</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p248335">
				<div class="post-metadata">
					<div class="post-num">Post #51</div>
					<div class="post-author">xacop</div>
					<div class="post-datetime">
						28 Sep 2014, 03:03					</div>
				</div>
				<div class="post-content content">
					<p>Hey guys. Excuse my ignorance, ive been needing some help and i m not sure if this is the correct thread for this kind of stuff but ive checked every resourceful page there is about this problem. Right now i really regret upgrading my tl wr941nd v5 (new) to openwrt just because the coverege has really been reduced. If there is anyone out there who can tell me how to revert back to my original tp link firmware, it would be much appreciated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p253782">
				<div class="post-metadata">
					<div class="post-num">Post #52</div>
					<div class="post-author">andrenl</div>
					<div class="post-datetime">
						10 Nov 2014, 04:13					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys I&#039;ve instaled the firmware provide in this topic, works fine but after I used the image creator and make a custom image to put tor in it, but the router bricked. Only power Light is on all other off&nbsp; when I plug a cable in wan or lan port it appears as disconect in PC, so I guess serial is my Last hope. </p><p>I wanna know if in this device a USB to Db9 is enoguht to make a conection or just a Nokia cable. I see that there are some routers that need some advanced hack, like put transistor and etc to handle the voltage mismach. </p><p>Thanks.</p>											<p class="post-edited">(Last edited by <strong>andrenl</strong> on 10 Nov 2014, 04:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257359">
				<div class="post-metadata">
					<div class="post-num">Post #53</div>
					<div class="post-author">thiagoc</div>
					<div class="post-datetime">
						11 Dec 2014, 14:42					</div>
				</div>
				<div class="post-content content">
					<p>I have sucessfully flash the 14.07 image on this device. First flash the image provided by thothypous, after that upgrade using the command &quot;sysupgrade -F&quot; using the 841N v8 image.</p><p>It&#039;s working so far, I will update if something doesn&#039;t work.</p><p>EDIT: the last LAN ethernet port becomes the first on the switch configuration on LuCi.</p>											<p class="post-edited">(Last edited by <strong>thiagoc</strong> on 11 Dec 2014, 20:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259143">
				<div class="post-metadata">
					<div class="post-num">Post #54</div>
					<div class="post-author">c4dc4d</div>
					<div class="post-datetime">
						30 Dec 2014, 08:38					</div>
				</div>
				<div class="post-content content">
					<p>Hi! I have a v5 and before proceeding I have a question:</p><p>Does the image provided by thothypous work on both FCC-ID TE7WR941NXV4 and TE7WR941NXV5? They are&nbsp; definitely not the same for DD-WRT (<a href="http://svn.dd-wrt.com/ticket/3003">http://svn.dd-wrt.com/ticket/3003</a>) so I was wondering if I risk bricking in case of using that image.</p><p>Thank you!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p260408">
				<div class="post-metadata">
					<div class="post-num">Post #55</div>
					<div class="post-author">d123</div>
					<div class="post-datetime">
						7 Jan 2015, 14:29					</div>
				</div>
				<div class="post-content content">
					<p>Dear sirs,</p><p>did anyone try to install 14.07 r3 in an wr940n directely?</p><p>I bought a new one (wr940 v.5) and I need to install it.</p><p>Yours,</p><p>D123</p>											<p class="post-edited">(Last edited by <strong>d123</strong> on 7 Jan 2015, 14:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p260722">
				<div class="post-metadata">
					<div class="post-num">Post #56</div>
					<div class="post-author">d123</div>
					<div class="post-datetime">
						9 Jan 2015, 19:53					</div>
				</div>
				<div class="post-content content">
					<p>Dear All,</p><p>I installed 841N v8 version into my TL-WR941ND v5. It is working without problems.</p><p>My contribution shall be my kernel log and the screenshot of the router overview.</p><p>Does someone tried a different firmware version?</p><p>Yours,</p><p>D123.</p><p>Edit 2015.01.13: The leds of ethernet connections are not working.</p><p><span class="postimg"><img src="http://s2.postimg.org/g5fgv4w5l/Captura_de_Tela_2015_01_09_s_3_49_56_PM.png" alt="Router overview" /></span></p><div class="codebox"><pre><code>[    0.000000] Linux version 3.10.49 (bb@builder1) (gcc version 4.8.3 (OpenWrt/Linaro GCC 4.8-2014.04 r42625) ) #3 Wed Oct 1 14:00:51 CEST 2014
[    0.000000] MyLoader: sysp=d27e3a26, boardp=87017989, parts=bf805f02
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU revision is: 0001974c (MIPS 74Kc)
[    0.000000] SoC: Atheros AR9341 rev 3
[    0.000000] Clocks: CPU:535.000MHz, DDR:400.000MHz, AHB:200.000MHz, Ref:25.000MHz
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 02000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone ranges:
[    0.000000]   Normal   [mem 0x00000000-0x01ffffff]
[    0.000000] Movable zone start for each node
[    0.000000] Early memory node ranges
[    0.000000]   node   0: [mem 0x00000000-0x01ffffff]
[    0.000000] On node 0 totalpages: 8192
[    0.000000] free_area_init_node: node 0, pgdat 80334b60, node_mem_map 81000000
[    0.000000]   Normal zone: 64 pages used for memmap
[    0.000000]   Normal zone: 0 pages reserved
[    0.000000]   Normal zone: 8192 pages, LIFO batch:0
[    0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
[    0.000000] pcpu-alloc: s0 r0 d32768 u32768 alloc=1*32768
[    0.000000] pcpu-alloc: [0] 0 
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
[    0.000000] Kernel command line:  board=TL-WR841N-v8 console=ttyS0,115200 rootfstype=squashfs,jffs2 noinitrd
[    0.000000] PID hash table entries: 128 (order: -3, 512 bytes)
[    0.000000] Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
[    0.000000] Writing ErrCtl register=00000000
[    0.000000] Readback ErrCtl register=00000000
[    0.000000] Memory: 28588k/32768k available (2369k kernel code, 4180k reserved, 621k data, 272k init, 0k highmem)
[    0.000000] SLUB: HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.000000] NR_IRQS:51
[    0.070000] Calibrating delay loop... 266.64 BogoMIPS (lpj=1333248)
[    0.080000] pid_max: default: 32768 minimum: 301
[    0.080000] Mount-cache hash table entries: 512
[    0.090000] NET: Registered protocol family 16
[    0.100000] MIPS: machine is TP-LINK TL-WR841N/ND v8
[    0.510000] bio: create slab &lt;bio-0&gt; at 0
[    0.520000] Switching to clocksource MIPS
[    0.530000] NET: Registered protocol family 2
[    0.530000] TCP established hash table entries: 512 (order: 0, 4096 bytes)
[    0.530000] TCP bind hash table entries: 512 (order: -1, 2048 bytes)
[    0.540000] TCP: Hash tables configured (established 512 bind 512)
[    0.540000] TCP: reno registered
[    0.550000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.550000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.560000] NET: Registered protocol family 1
[    0.560000] PCI: CLS 0 bytes, default 32
[    0.580000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.590000] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.600000] msgmni has been set to 55
[    0.600000] io scheduler noop registered
[    0.600000] io scheduler deadline registered (default)
[    0.610000] Serial: 8250/16550 driver, 16 ports, IRQ sharing enabled
[    0.640000] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A
[    0.650000] console [ttyS0] enabled, bootconsole disabled
[    0.660000] ath79-spi ath79-spi: master is unqueued, this is deprecated
[    0.670000] m25p80 spi0.0: found s25sl032p, expected m25p80
[    0.680000] m25p80 spi0.0: s25sl032p (4096 Kbytes)
[    0.680000] 5 tp-link partitions found on MTD device spi0.0
[    0.690000] Creating 5 MTD partitions on &quot;spi0.0&quot;:
[    0.690000] 0x000000000000-0x000000020000 : &quot;u-boot&quot;
[    0.700000] 0x000000020000-0x00000012e660 : &quot;kernel&quot;
[    0.710000] mtd: partition &quot;kernel&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
[    0.720000] 0x00000012e660-0x0000003f0000 : &quot;rootfs&quot;
[    0.730000] mtd: partition &quot;rootfs&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
[    0.740000] mtd: device 2 (rootfs) set to be root filesystem
[    0.750000] 1 squashfs-split partitions found on MTD device rootfs
[    0.750000] 0x000000340000-0x0000003f0000 : &quot;rootfs_data&quot;
[    0.760000] 0x0000003f0000-0x000000400000 : &quot;art&quot;
[    0.770000] 0x000000020000-0x0000003f0000 : &quot;firmware&quot;
[    0.790000] libphy: ag71xx_mdio: probed
[    1.350000] ag71xx ag71xx.0: connected to PHY at ag71xx-mdio.1:00 [uid=004dd042, driver=Generic PHY]
[    1.360000] eth0: Atheros AG71xx at 0xb9000000, irq 4, mode:MII
[    1.910000] ag71xx-mdio.1: Found an AR934X built-in switch
[    2.950000] eth1: Atheros AG71xx at 0xba000000, irq 5, mode:GMII
[    2.960000] TCP: cubic registered
[    2.960000] NET: Registered protocol family 17
[    2.970000] Bridge firewalling registered
[    2.970000] 8021q: 802.1Q VLAN Support v1.8
[    2.980000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
[    2.990000] Freeing unused kernel memory: 272K (8034c000 - 80390000)
[    7.200000] eth1: link up (1000Mbps/Full duplex)
[    9.930000] jffs2: notice: (322) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (1 unchecked, 0 orphan) and 17 of xref (0 dead, 3 orphan) found.
[    9.980000] eth1: link down
[   11.500000] NET: Registered protocol family 10
[   11.510000] nf_conntrack version 0.5.0 (450 buckets, 1800 max)
[   11.530000] ip6_tables: (C) 2000-2006 Netfilter Core Team
[   11.540000] Loading modules backported from Linux version master-2014-05-22-0-gf2032ea
[   11.550000] Backport generated by backports.git backports-20140320-37-g5c33da0
[   11.560000] ip_tables: (C) 2000-2006 Netfilter Core Team
[   11.610000] xt_time: kernel timezone is -0000
[   11.670000] cfg80211: Calling CRDA to update world regulatory domain
[   11.670000] cfg80211: World regulatory domain updated:
[   11.680000] cfg80211:  DFS Master region: unset
[   11.680000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (dfs_cac_time)
[   11.690000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
[   11.700000] cfg80211:   (2457000 KHz - 2482000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
[   11.710000] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (N/A, 2000 mBm), (N/A)
[   11.720000] cfg80211:   (5170000 KHz - 5250000 KHz @ 160000 KHz), (N/A, 2000 mBm), (N/A)
[   11.730000] cfg80211:   (5250000 KHz - 5330000 KHz @ 160000 KHz), (N/A, 2000 mBm), (0 s)
[   11.730000] cfg80211:   (5490000 KHz - 5730000 KHz @ 160000 KHz), (N/A, 2000 mBm), (0 s)
[   11.740000] cfg80211:   (5735000 KHz - 5835000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)
[   11.750000] cfg80211:   (57240000 KHz - 63720000 KHz @ 2160000 KHz), (N/A, 0 mBm), (N/A)
[   11.780000] PPP generic driver version 2.4.2
[   11.780000] NET: Registered protocol family 24
[   11.860000] ath: EEPROM regdomain: 0x0
[   11.860000] ath: EEPROM indicates default country code should be used
[   11.860000] ath: doing EEPROM country-&gt;regdmn map search
[   11.860000] ath: country maps to regdmn code: 0x3a
[   11.860000] ath: Country alpha2 being used: US
[   11.860000] ath: Regpair used: 0x3a
[   11.870000] ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;
[   11.880000] ieee80211 phy0: Atheros AR9340 Rev:0 mem=0xb8100000, irq=47
[   11.890000] cfg80211: Calling CRDA for country: US
[   11.890000] cfg80211: Regulatory domain changed to country: US
[   11.900000] cfg80211:  DFS Master region: FCC
[   11.900000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (dfs_cac_time)
[   11.910000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (N/A, 3000 mBm), (N/A)
[   11.920000] cfg80211:   (5170000 KHz - 5250000 KHz @ 80000 KHz), (N/A, 1700 mBm), (N/A)
[   11.930000] cfg80211:   (5250000 KHz - 5330000 KHz @ 80000 KHz), (N/A, 2300 mBm), (0 s)
[   11.940000] cfg80211:   (5735000 KHz - 5835000 KHz @ 80000 KHz), (N/A, 3000 mBm), (N/A)
[   11.950000] cfg80211:   (57240000 KHz - 63720000 KHz @ 2160000 KHz), (N/A, 4000 mBm), (N/A)
[   20.100000] IPv6: ADDRCONF(NETDEV_UP): eth1: link is not ready
[   20.100000] device eth1 entered promiscuous mode
[   20.110000] IPv6: ADDRCONF(NETDEV_UP): br-lan: link is not ready
[   20.120000] IPv6: ADDRCONF(NETDEV_UP): eth0: link is not ready
[   20.750000] eth1: link up (1000Mbps/Full duplex)
[   20.750000] br-lan: port 1(eth1) entered listening state
[   20.760000] br-lan: port 1(eth1) entered listening state
[   20.760000] IPv6: ADDRCONF(NETDEV_CHANGE): eth1: link becomes ready
[   22.460000] eth0: link up (100Mbps/Full duplex)
[   22.550000] IPv6: ADDRCONF(NETDEV_CHANGE): eth0: link becomes ready
[   22.720000] IPv6: ADDRCONF(NETDEV_UP): wlan0: link is not ready
[   22.760000] br-lan: port 1(eth1) entered learning state
[   22.760000] device wlan0 entered promiscuous mode
[   22.770000] br-lan: port 2(wlan0) entered listening state
[   22.770000] br-lan: port 2(wlan0) entered listening state
[   23.550000] br-lan: port 2(wlan0) entered disabled state
[   24.760000] br-lan: topology change detected, propagating
[   24.760000] br-lan: port 1(eth1) entered forwarding state
[   24.770000] IPv6: ADDRCONF(NETDEV_CHANGE): br-lan: link becomes ready
[   25.180000] br-lan: port 2(wlan0) entered listening state
[   25.190000] br-lan: port 2(wlan0) entered listening state
[   25.190000] IPv6: ADDRCONF(NETDEV_CHANGE): wlan0: link becomes ready
[   27.190000] br-lan: port 2(wlan0) entered learning state
[   29.190000] br-lan: topology change detected, propagating
[   29.190000] br-lan: port 2(wlan0) entered forwarding state
[ 3290.910000] ath: phy0: Failed to stop TX DMA, queues=0x005!
[ 6988.520000] nf_conntrack: automatic helper assignment is deprecated and it will be removed soon. Use the iptables CT target to attach helpers instead.
[20870.830000] device wlan0 left promiscuous mode
[20870.830000] br-lan: port 2(wlan0) entered disabled state
[42471.330000] IPv6: ADDRCONF(NETDEV_UP): wlan0: link is not ready
[42471.350000] device wlan0 entered promiscuous mode
[42472.860000] br-lan: port 2(wlan0) entered listening state
[42472.870000] br-lan: port 2(wlan0) entered listening state
[42472.880000] IPv6: ADDRCONF(NETDEV_CHANGE): wlan0: link becomes ready
[42474.870000] br-lan: port 2(wlan0) entered learning state
[42476.870000] br-lan: topology change detected, propagating
[42476.870000] br-lan: port 2(wlan0) entered forwarding state
[48028.610000] eth0: link down
[48028.690000] eth1: link down
[48029.610000] br-lan: port 1(eth1) entered disabled state
[48030.190000] eth1: link up (1000Mbps/Full duplex)
[48030.190000] br-lan: port 1(eth1) entered listening state
[48030.200000] br-lan: port 1(eth1) entered listening state
[48030.610000] eth0: link up (100Mbps/Full duplex)
[48032.200000] br-lan: port 1(eth1) entered learning state
[48034.200000] br-lan: topology change detected, propagating
[48034.200000] br-lan: port 1(eth1) entered forwarding state</code></pre></div>											<p class="post-edited">(Last edited by <strong>d123</strong> on 13 Jan 2015, 14:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p265166">
				<div class="post-metadata">
					<div class="post-num">Post #57</div>
					<div class="post-author">johnsmithtalmud</div>
					<div class="post-datetime">
						11 Feb 2015, 20:44					</div>
				</div>
				<div class="post-content content">
					<p>I have the TP-Link TL-WR940N V2.1. According to <a href="http://wiki.openwrt.org/toh/tp-link/tl-wr940n">this wiki post</a> I should be using thotypous&#039;s modified firmware. Can anyone confirm success using on TL-WR940N V2.1? Any special instruction? Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269188">
				<div class="post-metadata">
					<div class="post-num">Post #58</div>
					<div class="post-author">leeandy</div>
					<div class="post-datetime">
						19 Mar 2015, 03:20					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>johnsmithtalmud wrote:</cite><blockquote><p>I have the TP-Link TL-WR940N V2.1. According to <a href="http://wiki.openwrt.org/toh/tp-link/tl-wr940n">this wiki post</a> I should be using thotypous&#039;s modified firmware. Can anyone confirm success using on TL-WR940N V2.1? Any special instruction? Thanks.</p></blockquote></div><p>Yep, I success flash 841n_v8 on 940n_v2.1 without problem except two lan led not blink.<br />No need follow thotypous instructions, just flash 841n_v8 firmware by command:<br /></p><div class="codebox"><pre><code>sysupgrade -n -F 841nxxxx.bin</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269229">
				<div class="post-metadata">
					<div class="post-num">Post #59</div>
					<div class="post-author">nelus008</div>
					<div class="post-datetime">
						19 Mar 2015, 14:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>thotypous wrote:</cite><blockquote><p>I have just put a TL-WR941ND v5.0 router on production with OpenWrt. You can use the same firmware file as TL-WR841N v8, but you need to modify the header in order for the TP-Link web-interface to recognize it as a valid firmware for WR941ND v5.0 hardware.</p><p>For the impatient, I have put my modified firmware online: <a href="https://hal9k.ifsc.usp.br/~matias/floss/openwrt/tl-wr941nd_v5.0.bin">tl-wr941nd_v5.0.bin</a>. MD5 is: db062f1699c760775c5046cc303cba91. It worked perfectly with my router (I did not need to open it at all), but no warranties it will not brick your router, though.</p><p>If you want to modify the firmware yourself, do as follows:</p><ol class="decimal"><li><p>Download <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin">openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin</a></p></li><li><p>Open it in a hex editor. Look at offset 0x40. There should be the following bytes: <strong>08 41 00 08</strong>. Modify to: <strong>09 41 00 05</strong></p></li><li><p>Get <a href="https://dev.openwrt.org/browser/trunk/tools/firmware-utils/src/mktplinkfw.c?format=raw">mktplinkfw.c</a>, <a href="https://dev.openwrt.org/browser/trunk/tools/firmware-utils/src/md5.c?format=raw">md5.c</a> and <a href="https://dev.openwrt.org/browser/trunk/tools/firmware-utils/src/md5.h?format=raw">md5.h</a>. Compile the tool: <strong>gcc -Os mktplinkfw.c md5.c -o mktplinkfw</strong>.</p></li><li><p>Run: <strong>./mktplinkfw -i *-factory.bin</strong></p></li><li><p>Look for the expected MD5Sum1: <strong>expected : e5 67 34 4d 04 99 20 60 f5 76 c6 04 15 81 ab f8 </strong></p></li><li><p>Open the hex editor again, go to offset 0x4c, and copy the MD5 above (it should span from offset 0x4c to offset 0x5b).</p></li><li><p>Go and upload the resulting file to firmware upgrade (in TP-Link web-interface). Good luck.</p></li></ol><p>Many thanks to LOM from DD-WRT and to cable007 for <a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=172673&amp;postdays=0&amp;postorder=asc&amp;start=30">reporting</a> this approach worked with DD-WRT.</p></blockquote></div><br /><p>Please help! I did what you say there, everything was ok, just that I have one problem: the bitrate is very low, somewhere under 60mbit/s.&nbsp; Usually I should have over 100mbit/s. Why is that problem? What can I do to fix that? <br />Can I get back to the original frimware (for 941nd, v5.1)? If yes, how??? <br />Thank you!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p273674">
				<div class="post-metadata">
					<div class="post-num">Post #60</div>
					<div class="post-author">Sport</div>
					<div class="post-datetime">
						24 Apr 2015, 02:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nelus008 wrote:</cite><blockquote><p>Please help! I did what you say there, everything was ok, just that I have one problem: the bitrate is very low, somewhere under 60mbit/s.&nbsp; Usually I should have over 100mbit/s. Why is that problem? What can I do to fix that? <br />Can I get back to the original frimware (for 941nd, v5.1)? If yes, how??? <br />Thank you!</p></blockquote></div><p>To return to original firmware (uninstall OpenWrt):</p><p>1: Download latest firmware from tp-link : <a href="http://www.tp-link.us/resources/software/TL-WR941ND_V5_140627.zip">www.tp-link.us/resources/software/TL-WR941ND_V5_140627.zip</a><br />(extract and have a &quot;boot&quot; in its name, ex.: &quot;wr941ndv5_en_3_15_9_up_boot(140627).bin&quot;). </p><p>2: Download a app called &quot;winscp517&quot;.</p><p>3: Download a app called &quot;putty&quot;.</p><p>4: With &quot;winscp&quot;, login (SCP mode) as: </p><p>hostname: 192.168.1.1 (or one you configured in connection - lan)</p><p>username: root</p><p>password: (if you have created in openwrt)</p><p>and copy the firmware file to &quot;/tmp&quot; folder (rename to orig.bin before).</p><p>5. Open PuTTY as SSH to 192.168.1.1 and perform the following commands:</p><p>cd tmp</p><p>dd if=orig.bin of=tplink.bin skip=257 bs=512</p><p>mtd -r write /tmp/tplink.bin firmware</p><p>and wait until flash complete!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p279771">
				<div class="post-metadata">
					<div class="post-num">Post #61</div>
					<div class="post-author">evandrocarlosv</div>
					<div class="post-datetime">
						12 Jun 2015, 01:42					</div>
				</div>
				<div class="post-content content">
					<p>Sport your tip using Putty and WinSPC to recover this router and return to the original. Very valuable tip your friend . I had used the WRT to my TL- WR941ND and did not like the result. I was thinking of undoing via serial, but with the Use WIinSCP and Putty tip or had to use more rustic means. Grateful.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p303123">
				<div class="post-metadata">
					<div class="post-num">Post #62</div>
					<div class="post-author">tushar</div>
					<div class="post-datetime">
						10 Dec 2015, 09:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>niti.sumitsharma wrote:</cite><blockquote><div class="quotebox"><cite>Iltd wrote:</cite><blockquote><p>I have a tp-link wr940n V2</p><p>&quot;Firmware Version: 3.14.5 Build 130709 Rel.36000n<br /> Hardware Version: WR940N v2/WR941ND v5 00000000&quot;. </p><p>Can i use this firmware <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin">http://downloads.openwrt.org/attitude_a … actory.bin</a> for my device?</p><p>Firmwares (on official site) for TL-WR841ND v8 (130506) and TL-WR941ND_V5 (130709) are different. Although, WR941ND_V5&nbsp; and WR940N v2 are the same (130709).</p><br /><p>Thanks!</p></blockquote></div><br /><br /><p>I have same router as yours. <br />Use modded firmware by thotypous&nbsp; tl-wr941nd_v5.0.bin this works. Before updating don&#039;t forget to factory reset router.&nbsp; <br />Note! Do not update by wifi use lan connection.</p></blockquote></div><p>Hello Sir,</p><p>Purchased Same Router TP-Link WR940N after reading this thread.</p><p>I want to confirm before installing OpenWRT on my WR940N. Should i use the image directly provided by &quot;thothypous&quot; worked well without any problem Modded one</p><p>Firmware Version: 3.14.5 Build 130709 Rel.36000n<br />Hardware Version: WR940N v2/WR941ND v5 00000000<br />FCC ID: TE7WR941NXV5</p><p><a href="http://postimg.org/image/xyobqh5zl/full/"><span class="postimg"><img src="http://s24.postimg.org/bzhx39p5h/image.jpg" alt="http://s24.postimg.org/bzhx39p5h/image.jpg" /></span></a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313020">
				<div class="post-metadata">
					<div class="post-num">Post #63</div>
					<div class="post-author">kritikal</div>
					<div class="post-datetime">
						29 Feb 2016, 06:59					</div>
				</div>
				<div class="post-content content">
					<p>hey guys, does this router work easily with the latest open wrt?</p><p>Can i just flash through the normal web ui firmware upgrade? </p><p>Attitude Adjustment 12.09 is what i want according to the wiki? or will chaos calmer work?</p>											<p class="post-edited">(Last edited by <strong>kritikal</strong> on 29 Feb 2016, 07:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p329809">
				<div class="post-metadata">
					<div class="post-num">Post #64</div>
					<div class="post-author">johndoe</div>
					<div class="post-datetime">
						26 Jun 2016, 00:07					</div>
				</div>
				<div class="post-content content">
					<p>I see the following images are available. Has anyone tried them?</p><div class="codebox"><pre><code>openwrt-15.05.1-ar71xx-generic-tl-wr941nd-v5-squashfs-factory.bin     3932160    15-Mar-2016 17:48
openwrt-15.05.1-ar71xx-generic-tl-wr941nd-v5-squashfs-sysupgrade.bin     3407876    15-Mar-2016 17:48</code></pre></div><p>Since last year, I have had a pile of WR941NDs version 5.1, waiting to see some OpenWrt goodness <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> However, I had to put them on hold because I don&#039;t like the idea of hacking and flashing a firmware meant for another model, plus there&#039;s also uncertainty about whether the third antenna works when you do it. If version 5.x is now officially supported, that&#039;s excellent news.</p><p>Also, what about bootloader mods? Have any of you installed u-boot_mod or BREED on this version? If so, which BINs should be used? Having the safety net of recovering from a bad flash without using the serial port is invaluable to me.</p><p>Thanks in advance for any feedback!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p332246">
				<div class="post-metadata">
					<div class="post-num">Post #65</div>
					<div class="post-author">hoatienii</div>
					<div class="post-datetime">
						20 Jul 2016, 10:42					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>thotypous wrote:</cite><blockquote><p>I have just put a TL-WR941ND v5.0 router on production with OpenWrt. You can use the same firmware file as TL-WR841N v8, but you need to modify the header in order for the TP-Link web-interface to recognize it as a valid firmware for WR941ND v5.0 hardware.</p><p>For the impatient, I have put my modified firmware online: <a href="https://hal9k.ifsc.usp.br/~matias/floss/openwrt/tl-wr941nd_v5.0.bin">tl-wr941nd_v5.0.bin</a>. MD5 is: db062f1699c760775c5046cc303cba91. It worked perfectly with my router (I did not need to open it at all), but no warranties it will not brick your router, though.</p><p>If you want to modify the firmware yourself, do as follows:</p><ol class="decimal"><li><p>Download <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin">openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin</a></p></li><li><p>Open it in a hex editor. Look at offset 0x40. There should be the following bytes: <strong>08 41 00 08</strong>. Modify to: <strong>09 41 00 05</strong></p></li><li><p>Get <a href="https://dev.openwrt.org/browser/trunk/tools/firmware-utils/src/mktplinkfw.c?format=raw">mktplinkfw.c</a>, <a href="https://dev.openwrt.org/browser/trunk/tools/firmware-utils/src/md5.c?format=raw">md5.c</a> and <a href="https://dev.openwrt.org/browser/trunk/tools/firmware-utils/src/md5.h?format=raw">md5.h</a>. Compile the tool: <strong>gcc -Os mktplinkfw.c md5.c -o mktplinkfw</strong>.</p></li><li><p>Run: <strong>./mktplinkfw -i *-factory.bin</strong></p></li><li><p>Look for the expected MD5Sum1: <strong>expected : e5 67 34 4d 04 99 20 60 f5 76 c6 04 15 81 ab f8 </strong></p></li><li><p>Open the hex editor again, go to offset 0x4c, and copy the MD5 above (it should span from offset 0x4c to offset 0x5b).</p></li><li><p>Go and upload the resulting file to firmware upgrade (in TP-Link web-interface). Good luck.</p></li></ol><p>Many thanks to LOM from DD-WRT and to cable007 for <a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=172673&amp;postdays=0&amp;postorder=asc&amp;start=30">reporting</a> this approach worked with DD-WRT.</p></blockquote></div><br /><p>I use your file but get error in my tplink 940n v2</p><div class="codebox"><pre><code>DRAM:  32 MB
Flash Manuf Id 0xc8, DeviceId0 0x40, DeviceId1 0x16
flash size 4MB, sector count = 64
Flash:  4 MB
Using default environment

In:    serial
Out:   serial
Err:   serial
Net:   ag934x_enet_initialize...
No valid address in Flash. Using fixed address
No valid address in Flash. Using fixed address
 wasp  reset mask:c03300
WASP ----&gt; S27 PHY
file: ag934x.c,line: 189==: set LAN&amp;WAN SWAP. --debug by HouXB
GMAC: cfg1 0x80000000 cfg2 0x7114
eth0: ba:be:fa:ce:08:41
s27 reg init
athrs27_phy_setup ATHR_PHY_CONTROL 4 :0x1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 4 :0x10
eth0 up
WASP ----&gt; S27 PHY
file: ag934x.c,line: 189==: set LAN&amp;WAN SWAP. --debug by HouXB
GMAC: cfg1 0xf cfg2 0x7214
eth1: ba:be:fa:ce:08:41
s27 reg init lan
ATHRS27: resetting s27
ATHRS27: s27 reset done
athrs27_phy_setup ATHR_PHY_CONTROL 0 :0x1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 0 :0x10
athrs27_phy_setup ATHR_PHY_CONTROL 1 :0x1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 1 :0x10
athrs27_phy_setup ATHR_PHY_CONTROL 2 :0x1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 2 :0x10
athrs27_phy_setup ATHR_PHY_CONTROL 3 :0x1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 3 :0x10
eth1 up
eth0, eth1
Autobooting in 1 seconds
## Booting image at 9f020000 ...
   Uncompressing Kernel Image ... OK

Starting kernel ...

[    0.000000] Linux version 3.3.8 (blogic@Debian-60-squeeze-64-minimal) (gcc vers                                                                                      ion 4.6.3 20120201 (prerelease) (Linaro GCC 4.6-2012.02) ) #1 Sat Mar 23 16:49:30                                                                                       UTC 2013
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU revision is: 0001974c (MIPS 74Kc)
[    0.000000] SoC: Atheros AR9341 rev 3
[    0.000000] Clocks: CPU:535.000MHz, DDR:400.000MHz, AHB:200.000MHz, Ref:25.000M                                                                                      Hz
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 02000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone PFN ranges:
[    0.000000]   Normal   0x00000000 -&gt; 0x00002000
[    0.000000] Movable zone start PFN for each node
[    0.000000] Early memory PFN ranges
[    0.000000]     0: 0x00000000 -&gt; 0x00002000
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages                                                                                      : 8128
[    0.000000] Kernel command line:  board=TL-WR841N-v8 console=ttyS0,115200 rootf                                                                                      stype=squashfs,jffs2 noinitrd
[    0.000000] PID hash table entries: 128 (order: -3, 512 bytes)
[    0.000000] Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
[    0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 by                                                                                      tes
[    0.000000] Writing ErrCtl register=00000000
[    0.000000] Readback ErrCtl register=00000000
[    0.000000] Memory: 29000k/32768k available (2211k kernel code, 3768k reserved,                                                                                       418k data, 212k init, 0k highmem)
[    0.000000] SLUB: Genslabs=9, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Node                                                                                      s=1
[    0.000000] NR_IRQS:51
[    0.000000] Calibrating delay loop... 266.64 BogoMIPS (lpj=1333248)
[    0.080000] pid_max: default: 32768 minimum: 301
[    0.080000] Mount-cache hash table entries: 512
[    0.090000] NET: Registered protocol family 16
[    0.090000] gpiochip_add: registered GPIOs 0 to 22 on device: ath79
[    0.100000] MIPS: machine is TP-LINK TL-WR841N/ND v8
[    0.510000] bio: create slab &lt;bio-0&gt; at 0
[    0.520000] Switching to clocksource MIPS
[    0.530000] NET: Registered protocol family 2
[    0.530000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.530000] TCP established hash table entries: 1024 (order: 1, 8192 bytes)
[    0.540000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
[    0.540000] TCP: Hash tables configured (established 1024 bind 1024)
[    0.550000] TCP reno registered
[    0.550000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.560000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.560000] NET: Registered protocol family 1
[    0.580000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.590000] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY)                                                                                       (c) 2001-2006 Red Hat, Inc.
[    0.600000] msgmni has been set to 56
[    0.600000] Block layer SCSI generic (bsg) driver version 0.4 loaded (major 254                                                                                      )
[    0.610000] io scheduler noop registered
[    0.620000] io scheduler deadline registered (default)
[    0.620000] Serial: 8250/16550 driver, 16 ports, IRQ sharing enabled
[    0.650000] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A
[    0.660000] console [ttyS0] enabled, bootconsole disabled
[    0.660000] console [ttyS0] enabled, bootconsole disabled
[    0.670000] m25p80 spi0.0: unrecognized JEDEC id c84016
[    0.700000] ag71xx_mdio: probed
[    0.700000] eth0: Atheros AG71xx at 0xb9000000, irq 4
[    1.260000] ag71xx ag71xx.0: eth0: connected to PHY at ag71xx-mdio.1:00 [uid=00                                                                                      4dd042, driver=Generic PHY]
[    1.270000] eth1: Atheros AG71xx at 0xba000000, irq 5
[    1.830000] eth1: Found an AR934X built-in switch
[    2.860000] TCP cubic registered
[    2.860000] NET: Registered protocol family 17
[    2.860000] Bridge firewalling registered
[    2.870000] 8021q: 802.1Q VLAN Support v1.8
[    2.870000] VFS: Cannot open root device &quot;(null)&quot; or unknown-block(0,0)
[    2.880000] Please append a correct &quot;root=&quot; boot option; here are the available                                                                                       partitions:
[    2.890000] Kernel panic - not syncing: VFS: Unable to mount root fs on unknown                                                                                      -block(0,0)</code></pre></div>											<p class="post-edited">(Last edited by <strong>hoatienii</strong> on 20 Jul 2016, 10:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p334488">
				<div class="post-metadata">
					<div class="post-num">Post #66</div>
					<div class="post-author">thotypous</div>
					<div class="post-datetime">
						14 Aug 2016, 20:10					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>johndoe wrote:</cite><blockquote><p>I see the following images are available. Has anyone tried them?</p><div class="codebox"><pre><code>openwrt-15.05.1-ar71xx-generic-tl-wr941nd-v5-squashfs-factory.bin     3932160    15-Mar-2016 17:48
openwrt-15.05.1-ar71xx-generic-tl-wr941nd-v5-squashfs-sysupgrade.bin     3407876    15-Mar-2016 17:48</code></pre></div><p>Since last year, I have had a pile of WR941NDs version 5.1, waiting to see some OpenWrt goodness <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> However, I had to put them on hold because I don&#039;t like the idea of hacking and flashing a firmware meant for another model, plus there&#039;s also uncertainty about whether the third antenna works when you do it. If version 5.x is now officially supported, that&#039;s excellent news.</p></blockquote></div><p>Hi, I have just upgraded the WR941ND v5 device which was running with the TL-WR841N v8 firmware:</p><div class="codebox"><pre><code>sysupgrade -v openwrt-15.05.1-ar71xx-generic-tl-wr941nd-v5-squashfs-sysupgrade.bin</code></pre></div><p>It booted well and appears to be working like a charm.</p><p>The factory image should work for a fresh install too, although I did not test it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p335129">
				<div class="post-metadata">
					<div class="post-num">Post #67</div>
					<div class="post-author">trananhhuy1910</div>
					<div class="post-datetime">
						20 Aug 2016, 02:57					</div>
				</div>
				<div class="post-content content">
					<p>I have used the TP-Link TL-WR940N V2.1 and upgraded to firmware openwrt for TL-WR941nd-v5 successfully.<br />Firmware: openwrt-15.05.1-ar71xx-generic-tl-wr941nd-v5-squashfs-factory.bin<br />Dowload: <a href="https://downloads.openwrt.org/chaos_calmer/15.05.1/ar71xx/generic/openwrt-15.05.1-ar71xx-generic-tl-wr941nd-v5-squashfs-factory.bin">https://downloads.openwrt.org/chaos_cal … actory.bin</a><br />Topic: <a href="https://wiki.openwrt.org/toh/hwdata/tp-link/tp-link_tl-wr941nd_v5">https://wiki.openwrt.org/toh/hwdata/tp- … wr941nd_v5</a><br /></p><div class="quotebox"><blockquote><p>How to Upgrade:<br />Click System Tools -&gt;Firmware Upgrade, click the Browse button to choose<br />the firmware you already extracted in the folder.<br />Click the Upgrade button. The device will reboot automatically after the<br />upgrading has been finished. Please wait about 3 minutes.<br /><span style="color: red">Note: remember rename openwrt-15.05.1-ar71xx-generic-tl-wr941nd-v5-squashfs-factory.bin =&gt; abc.bin or any other name </span></p></blockquote></div><p>It is working without problems and even all the leds of ethernet connections are working well.<br />Using as a repeater very good!<br /><span class="postimg"><img src="https://uphinhnhanh.com/images/2016/08/20/14054881_1410654335616310_1796438812_n19d19.jpg" alt="https://uphinhnhanh.com/images/2016/08/20/14054881_1410654335616310_1796438812_n19d19.jpg" /></span><br /><span class="postimg"><img src="https://uphinhnhanh.com/images/2016/08/20/Untitledc38d1.jpg" alt="https://uphinhnhanh.com/images/2016/08/20/Untitledc38d1.jpg" /></span><br /><span class="postimg"><img src="https://uphinhnhanh.com/images/2016/08/20/Untitled1dafbf.png" alt="https://uphinhnhanh.com/images/2016/08/20/Untitled1dafbf.png" /></span><br />Thanks!</p>											<p class="post-edited">(Last edited by <strong>trananhhuy1910</strong> on 20 Aug 2016, 03:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352965">
				<div class="post-metadata">
					<div class="post-num">Post #68</div>
					<div class="post-author">dulinux</div>
					<div class="post-datetime">
						26 Feb 2017, 03:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>thotypous wrote:</cite><blockquote><p>I have just put a TL-WR941ND v5.0 router on production with OpenWrt. You can use the same firmware file as TL-WR841N v8, but you need to modify the header in order for the TP-Link web-interface to recognize it as a valid firmware for WR941ND v5.0 hardware.<br />(...)</p></blockquote></div><p>Hello:</p><p>The same procedure has worked on my TP-Link TL-WR941ND(BR) Ver:5.1 but with a more recent image file: openwrt-15.05.1-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin, the one listed for TL-WR841N(D) Version 8.</p><p>I had to perform the same hex modification (from 08 41 00 08 to 09 41 00 05) and then adjust the expected MD5Sum1 (b1 b3 6a fa 00 e8 d4 47 ff 1a 49 f7 04 54 f6 53). Then, renamed the bin file to a smaller name &quot;image.bin&quot; and the upload process via web admin page was easy and smooth.</p><p>The router is working just fine.</p><p>Thanks.</p>											<p class="post-edited">(Last edited by <strong>dulinux</strong> on 26 Feb 2017, 03:29)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 3 of 3</div><nav><ul><li><a href="viewtopic.php%3Fid=44319&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=44319&amp;p=2.html">2</a></li><li class="pagination-current"><span>3</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>