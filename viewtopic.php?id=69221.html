<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> DIR-615 E3 with OpenVPN?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 27 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p348455">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">appyface</div>
					<div class="post-datetime">
						5 Jan 2017, 04:11					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>My first post here and new to OpenWrt.&nbsp; Terminology is confusing to me, so please understand I may not be using correct terminology or descriptions in the below, and please accept my apologies. </p><p>I use a D-Link DIR-615 E3 router in a remote family member&#039;s household, I tunnel in to the router so I can access their LAN computers (all Windows PCs) from remote and help out.</p><p>The DIR-615 E3 currently has DD-WRT on it and SSHd configured, I connect to the router from my Windows PC using Putty.</p><p>I have installed TightVNC server on all their computers, so once I have connected the SSH tunnel I use TightVNC to do file transfers or remote control the PCs.&nbsp; </p><p>This works well and I&#039;ve no real complaints.&nbsp; </p><p>But this method does have some inconvenience, I have to disturb the PC user with remote control when all I need is a quick file transfer, for instance. That or install file transfer software on all the PCs to avoid a remote control session.</p><p>It was suggested on another forum that OpenVPN on the router could make my remote connection behave as just another PC on the local LAN?&nbsp; I could transfer files using Windows Explorer across file shares same I as I could if my PC was on the LAN locally?&nbsp; This appeals to me as it means I don&#039;t have to install additional software on the computers just to get around using TightVNC for file transfers.</p><p>I have a spare DIR-615 E3 I can try this out on in my home network, and swap it with the remote unit if it all works out.</p><p>So, I have been pouring over the Wiki, the site, this forum, to find out how to do this.&nbsp; </p><p>Thanks to a tip in a forum post I now have OpenWrt Barrier Breaker for the E4 running on my spare DIR-615 E3.&nbsp; (Tip was to edit the last number in the binary from hex 35 to hex 31 to make it load on an E3)</p><p>I see the DIR-615 E3 doesn&#039;t have much flash memory.&nbsp; So I think the next step for me is to learn how to make a custom binary, removing things I don&#039;t need and adding OpenVPN?</p><p>The DIR-615 E3 only has to do these things:</p><p>1.&nbsp; Plug in to the home&#039;s main router (LAN port to LAN port, or DIR-615 WAN switch to LAN port, whichever is best) as a static IP on the same LAN</p><p>2.&nbsp; Run the code to update an internet DDNS service when WAN IP changes</p><p>3.&nbsp; Provide my remote connection capabilities</p><p>The DIR-615 E3 doesn&#039;t need Wifi, doesn&#039;t need other devices plugged in to it, doesn&#039;t acquire a WAN IP, doesn&#039;t provide DNS or DHCP, in short doesn&#039;t do anything except handle my remote internet connection into the existing LAN and keep the internet DDNS service updated with the WAN IP.</p><p>Is it possible/feasible with a DIR-615 E3 to use OpenWrt and OpenVPN to accomplish this?</p><p>I have read a little about the custom binary process but it is largely over my head at this point.&nbsp; I could use some more tips!&nbsp; Thank you in advance for reading all of this and for any insights or info.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p348478">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						5 Jan 2017, 11:31					</div>
				</div>
				<div class="post-content content">
					<p><strong>appyface</strong>, I don&#039;t understand, why you can&#039;t use your main router to update ddns and run OpenVPN-server.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p348485">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">appyface</div>
					<div class="post-datetime">
						5 Jan 2017, 15:06					</div>
				</div>
				<div class="post-content content">
					<p>It&#039;s not an option to me, I&#039;m sorry I forgot to mention that.&nbsp; Thank you for reading the long thread and for any help.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p348487">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						5 Jan 2017, 15:30					</div>
				</div>
				<div class="post-content content">
					<p>So auxiliary router should update ddns and run OpenVPN-server? In this case main router should perform port forwarding to auxiliary router to enable OpenVPN connection.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p348489">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">appyface</div>
					<div class="post-datetime">
						5 Jan 2017, 15:54					</div>
				</div>
				<div class="post-content content">
					<p>DIR-615 E3 as aux (second) router needs to update DDNS, yes.&nbsp; Port forwarding and static ip assignment to aux router already in place from main router, so yes.</p><p>So it is OpenVPN server (not client) that needs to run on aux router?&nbsp; I&#039;m confused by the different types of installs mentioned in the OpenWrt guides, which type of install would this be?&nbsp; </p><p>I also need to determine how to remove features from OpenWrt in order to make room for adding OpenVPN, I assume I have to make a custom binary.&nbsp; Is there a guide on what goes with what and what function it serves somewhere?&nbsp; I am struggling with identification of what can be removed.</p><p>Thanks again for your help.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p348490">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						5 Jan 2017, 16:04					</div>
				</div>
				<div class="post-content content">
					<p>For your need you can use usual PC running OpenVPN-server with port forwarding on main router. For you it is better to use bridge (tap) (<a href="https://wiki.openwrt.org/doc/howto/vpn.server.openvpn.tap">https://wiki.openwrt.org/doc/howto/vpn. â€¦ penvpn.tap</a>). You can build custom image with only needed components. So have you tried to install image from repository and install as package openvpn-openssl afterwards?</p>											<p class="post-edited">(Last edited by <strong>ulmwind</strong> on 5 Jan 2017, 16:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p348491">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">appyface</div>
					<div class="post-datetime">
						5 Jan 2017, 16:18					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m sorry, I&#039;m unclear... In earlier post you mentioned installing OpenVPN Server on router... I also need to run OpenVPN server on my PC that I will connect in with?&nbsp; I&#039;ve never used OpenVPN so I don&#039;t have any idea how it works, sorry for my lack of understanding.&nbsp; Do I put the bridge mode server install on both the router and on my PC?</p><p>I have Barrier Breaker installed on my spare DIR-615 E3 router.&nbsp; I have not tried to do anything further with it as I&#039;ve read it doesn&#039;t have enough memory (it is a 4MB flash router).&nbsp; So that&#039;s why I think I have to make a new binary.&nbsp; </p><p>How do I determine what are the &#039;needed&#039; components?&nbsp; I&#039;m stuck here too.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p348493">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						5 Jan 2017, 16:45					</div>
				</div>
				<div class="post-content content">
					<p>You should have single instance of OpenVPN server. It can run on auxiliary router (because you don&#039;t want to install on main) or usual PC. Main router should forward packets with specific port to LAN IP of device running OpenVPN server. You should remove e.g. luci due to lack of space, and install openvpn-openssl.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p348494">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">appyface</div>
					<div class="post-datetime">
						5 Jan 2017, 16:54					</div>
				</div>
				<div class="post-content content">
					<p>What do you mean by &#039;or usual PC&#039;?&nbsp; What is that?&nbsp; Are you saying I don&#039;t need to install OpenVPN Server on the aux router to accomplish my goals?&nbsp; Sorry for my confusion, I&#039;m just trying to relate your suggestions to my OP questions.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p348504">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						5 Jan 2017, 19:09					</div>
				</div>
				<div class="post-content content">
					<p>You are going to use only one port of auxiliary router. In this case it could be easily replaced by usual PC. You should decide, where to run OpenVPN server, on auxiliary router, or usual PC.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p348510">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">appyface</div>
					<div class="post-datetime">
						5 Jan 2017, 19:51					</div>
				</div>
				<div class="post-content content">
					<p>What is this &#039;usual PC&#039;?&nbsp; I don&#039;t know what that is?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p348517">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						5 Jan 2017, 20:45					</div>
				</div>
				<div class="post-content content">
					<p>Usual personal computer, desktop, running Linux.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>