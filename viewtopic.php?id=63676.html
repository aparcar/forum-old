<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> extroot: ext4 vs f2fs?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 19 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p316693">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						25 Mar 2016, 22:18					</div>
				</div>
				<div class="post-content content">
					<p>Is it advisable or not - to use the so called &quot;FLASH-friendly file system&quot;, a.k.a. <strong>f2fs</strong> on OpenWrt?</p><p>As one can see - the size of the <strong>kmod-fs f2fs</strong> is almost 3 (three) times smaller than the <strong>kmod-fs-ext4</strong>&#039;s.</p><p>Any down-sides to <strong>kmod-fs f2fs</strong>? Any gotchas?</p><p>I need to <strong><em>extroot</em></strong> 8GB miniSDHC sitting in the slot of Huawei E3131 USB-modem.</p><p>Please comment.</p>											<p class="post-edited">(Last edited by <strong>booBot</strong> on 25 Mar 2016, 22:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316701">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						25 Mar 2016, 23:48					</div>
				</div>
				<div class="post-content content">
					<p>Found <a href="https://forum.openwrt.org/viewtopic.php?pid=311332#p311332">this gotcha</a>, need the patched <strong>block</strong> to extroot the f2fs.<br /><img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>											<p class="post-edited">(Last edited by <strong>booBot</strong> on 31 Mar 2016, 00:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316760">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">bolvan</div>
					<div class="post-datetime">
						26 Mar 2016, 08:30					</div>
				</div>
				<div class="post-content content">
					<p>I found f2fs broken on mips ar71xx arch. F2fs tools not working properly, display bad data and filesystem corrupts. On arm all seems ok. Test carefully before use</p>											<p class="post-edited">(Last edited by <strong>bolvan</strong> on 26 Mar 2016, 08:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316805">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						26 Mar 2016, 15:00					</div>
				</div>
				<div class="post-content content">
					<p>How can I check the ramips/rt305x version of <strong>f2fs</strong> for problems?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316827">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">bolvan</div>
					<div class="post-datetime">
						26 Mar 2016, 17:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>booBot wrote:</cite><blockquote><p>How can I check the ramips/rt305x version of <strong>f2fs</strong> for problems?</p></blockquote></div><p>Install f2fs tools and try to format fs on the router.<br />If it fails format f2fs on PC then run dumpf2fs on the router. Check if it shows crap.<br />Read/write some data, mount/umount/reboot, check if fs is sane</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316934">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						27 Mar 2016, 11:45					</div>
				</div>
				<div class="post-content content">
					<p>I tried this on Lubuntu (14.04.3) notebook - f2fs fails for me even there...<br />I must be doing something wrong...</p><p>Also, installing the &quot;f2fs-tools&quot; did not bring me the &quot;dumpf2fs&quot; utility.</p>											<p class="post-edited">(Last edited by <strong>booBot</strong> on 27 Mar 2016, 11:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316946">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">bolvan</div>
					<div class="post-datetime">
						27 Mar 2016, 14:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>booBot wrote:</cite><blockquote><p>Also, installing the &quot;f2fs-tools&quot; did not bring me the &quot;dumpf2fs&quot; utility.</p></blockquote></div><p>dump.f2fs</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316948">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						27 Mar 2016, 14:22					</div>
				</div>
				<div class="post-content content">
					<p>Thanks!</p><p>It took quite a lot of shamanry to make it work on Lubuntu.<br /><img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />I expected it would be supported automagically - just like any other recognised FS. Apparently, only ext4 is.</p><p>Hope, f2fs will now work on OpenWrt CC 15.05.1 too.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316955">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						27 Mar 2016, 14:55					</div>
				</div>
				<div class="post-content content">
					<p>Managed to obtain seemingly reasonable <a href="http://pastebin.com/AkkWx3MJ"><strong>dump.f2fs</strong> report</a> on the unmounted <strong>/dev/sdc1</strong> device.</p>											<p class="post-edited">(Last edited by <strong>booBot</strong> on 27 Mar 2016, 15:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p317460">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						31 Mar 2016, 00:22					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve patched the <strong>block</strong> utility and now I can <em>extroot</em> manually - from CLI.<br />If I try booting into the extrooted configuration - it locks my router.</p><p>To get in I have to eject the miniSDHC card from modem&#039;s slot.</p><p>I suspect it is because of either the modem driver (<strong>usb-modeswitch</strong> may be) is occupying all <strong>/dev/ttyUSBx</strong> devices (even those that are for storage I/O), or it is because I did not announce the FS type of the miniSDHC - which is on <strong>f2fs</strong>.</p><ol class="decimal"><li><p>how can I <a href="https://wiki.openwrt.org/doc/howto/extroot">announce the FS type</a> in the <strong><em>/etc/config/fstab</em></strong>?</p></li><li><p>how can I make modem to initialise at the very last moment - when everything else is up and running?</p></li></ol><p>I recall I saw someone swapping two scripts in the run order - exactly for that, but I can&#039;t find that articale any more.</p>											<p class="post-edited">(Last edited by <strong>booBot</strong> on 31 Mar 2016, 00:33)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>