<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Self reboots when using WPA/2 - Ubnt RouterStation</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 4 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p94927">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">aXik</div>
					<div class="post-datetime">
						25 Sep 2009, 02:34					</div>
				</div>
				<div class="post-content content">
					<p>When I connect to my RouterStation using wpa/wpa2 it reboots. Sometimes when connecting and sometimes when requesting something from internet<br />I&#039;m using Kamikaze r17679 and 2 wifi cards TP-LINK TL-WN360G</p><p>serial terminal output:<br /></p><div class="codebox"><pre><code>+
ADM6996FC PHY found on MAC0
ADM6996FC PHY found on MAC1
Ethernet eth0: MAC address 00:15:6d:c1:22:a5
IP: 192.168.1.20/255.255.255.0, Gateway: 0.0.0.0
Default server: 0.0.0.0

RedBoot(tm) bootstrap and debug environment [ROMRAM]
Ubiquiti Networks certified release, version 0.9.00318.0905071532 - built 15:33:10, May  7 2009

Copyright (C) 2000, 2001, 2002, 2003, 2004 Red Hat, Inc.

Board: Ubiquiti Ubiquiti AR71xx-based board (Ubiquiti RouterStation detected)

 Arch: ar7100
  RAM: 0x80000000-0x84000000, [0x8003bf00-0x83fe1000] available
Flash: 0xbf000000-0xc0000000, in 256 blocks of 0x00010000 bytes each
== Executing boot script in 1.000 seconds - enter ^C to abort
RedBoot&gt; fis load -d -e kernel
Trying LZMA decompression...
Image loaded from 0x80060000-0x802e2200
Image is not ELF, skipping ELF parsing...
RedBoot&gt; exec
Now booting linux kernel:
 Base address 0x80050000 Entry 0x80060000
 memsize=0x04000000
 modetty0=0,n,8,1,hw
 board=Ubiquiti AR71xx-based board
 ethaddr=00.15.6d.c1.22.a5
Linux version 2.6.30.7 (buildslave@laptop) (gcc version 4.1.2) #1 Wed Sep 23 10:37:09 CDT 2009
console [early0] enabled
CPU revision is: 00019374 (MIPS 24Kc)
Atheros AR7161 rev 2, CPU:680.000 MHz, AHB:170.000 MHz, DDR:340.000 MHz
Determined physical RAM map:
 memory: 04000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00004000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00004000
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
Kernel command line: rootfstype=squashfs,yaffs,jffs2 noinitrd console=ttyS0,115200 board=UBNT-RS board=Ubiquiti AR71xx-based board ethaddr=00.15.6d.c1.22.a5
Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
Writing ErrCtl register=00057fb2
Readback ErrCtl register=00057fb2
NR_IRQS:56
PID hash table entries: 256 (order: 8, 1024 bytes)
Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
Memory: 61852k/65536k available (1994k kernel code, 3612k reserved, 436k data, 140k init, 0k highmem)
SLUB: Genslabs=7, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
Calibrating delay loop... 452.19 BogoMIPS (lpj=2260992)
Mount-cache hash table entries: 512
net_namespace: 1008 bytes
NET: Registered protocol family 16
MIPS: machine is Ubiquiti RouterStation
registering PCI controller with io_map_base unset
bio: create slab &lt;bio-0&gt; at 0
pci 0000:00:00.0: PME# supported from D0 D1 D2 D3hot
pci 0000:00:00.0: PME# disabled
PCI: mapping irq 48 to pin1@0000:00:11.0
PCI: mapping irq 49 to pin1@0000:00:12.0
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 2048 (order: 2, 16384 bytes)
TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
TCP: Hash tables configured (established 2048 bind 2048)
TCP reno registered
NET: Registered protocol family 1
squashfs: version 4.0 (2009/01/31) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) (SUMMARY)  Â© 2001-2006 Red Hat, Inc.
yaffs Sep 23 2009 10:30:41 Installing. 
msgmni has been set to 120
alg: No test for lzma (lzma-generic)
alg: No test for stdrng (krng)
io scheduler noop registered
io scheduler deadline registered (default)
Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A
console handover: boot [early0] -&gt; real [ttyS0]
ag71xx_mdio: probed
eth0: Atheros AG71xx at 0xb9000000, irq 4
eth1: Atheros AG71xx at 0xba000000, irq 5
Atheros AR71xx SPI Controller driver version 0.2.4
m25p80 spi0.0: mx25l128 (16384 Kbytes)
Searching for RedBoot partition table in spi0.0 at offset 0xfe0000
Searching for RedBoot partition table in spi0.0 at offset 0xff0000
5 RedBoot partitions found on MTD device spi0.0
Creating 5 MTD partitions on &quot;spi0.0&quot;:
0x000000000000-0x000000030000 : &quot;RedBoot&quot;
0x000000030000-0x000000110000 : &quot;kernel&quot;
0x000000110000-0x000000ff0000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; set to be root filesystem
mtd: partition &quot;rootfs_data&quot; created automatically, ofs=240000, len=DB0000 
0x000000240000-0x000000ff0000 : &quot;rootfs_data&quot;
0x000000ff0000-0x000000fff000 : &quot;FIS directory&quot;
0x000000fff000-0x000001000000 : &quot;RedBoot config&quot;
Atheros AR71xx hardware watchdog driver version 0.1.0
TCP westwood registered
NET: Registered protocol family 17
Bridge firewalling registered
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
Freeing unused kernel memory: 140k freed
Please be patient, while OpenWrt loads ...
- preinit -
Registered led device: ubnt:green:rf
Press CTRL-C for failsafe
gpio-buttons driver version 0.1.1
input: gpio-buttons as /devices/platform/gpio-buttons/input/input0
Button Hotplug driver version 0.3.1
switching to jffs2
mini_fo: using base directory: /
mini_fo: using storage directory: /jffs
- init -

Please press Enter to activate this console. device eth0 entered promiscuous mode
eth1: link up (100Mbps/Full duplex)
PPP generic driver version 2.4.2
ip_tables: (C) 2000-2006 Netfilter Core Team
nf_conntrack version 0.5.0 (1024 buckets, 4096 max)
CONFIG_NF_CT_ACCT is deprecated and will be removed soon. Please use
nf_conntrack.acct=1 kernel paramater, acct=1 nf_conntrack module option or
sysctl net.netfilter.nf_conntrack_acct=1 to enable it.
eth0: link up (100Mbps/Full duplex)
br-lan: port 1(eth0) entering forwarding state
ath_hal: module license &#039;Proprietary&#039; taints kernel.
Disabling lock debugging due to kernel taint
ath_hal: 2009-05-08 (AR5210, AR5211, AR5212, AR5416, RF5111, RF5112, RF2413, RF5413, RF2133, RF2425, REGOPS_FUNC, XR)
ath_pci: trunk
wlan: trunk
wlan: mac acl policy registered
ath_rate_minstrel: Minstrel automatic rate control algorithm 1.2 (trunk)
ath_rate_minstrel: look around rate set to 10%
ath_rate_minstrel: EWMA rolloff level set to 75%
ath_rate_minstrel: max segment size in the mrr set to 6000 us
PCI: Enabling device 0000:00:11.0 (0000 -&gt; 0002)
Atheros HAL provided by OpenWrt, DD-WRT and MakSat Technologies
wifi0: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps
wifi0: 11g rates: 1Mbps 2Mbps 5.5Mbps 11Mbps 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps
wifi0: H/W encryption support: WEP AES AES_CCM TKIP
ath_pci: wifi0: Atheros 2417: mem=0x10000000, irq=48
PCI: Enabling device 0000:00:12.0 (0000 -&gt; 0002)
Atheros HAL provided by OpenWrt, DD-WRT and MakSat Technologies
wifi1: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps
wifi1: 11g rates: 1Mbps 2Mbps 5.5Mbps 11Mbps 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps
wifi1: H/W encryption support: WEP AES AES_CCM TKIP
ath_pci: wifi1: Atheros 2417: mem=0x10010000, irq=49
device ath0 entered promiscuous mode
br-lan: port 2(ath0) entering forwarding state
br-lan: port 2(ath0) entering disabled state
br-lan: port 1(eth0) entering disabled state
device ath0 left promiscuous mode
br-lan: port 2(ath0) entering disabled state
device eth0 left promiscuous mode
br-lan: port 1(eth0) entering disabled state
eth0: link down
eth1: link down
device eth0 entered promiscuous mode
device ath0 entered promiscuous mode
br-lan: port 2(ath0) entering forwarding state
eth1: link up (100Mbps/Full duplex)
eth1: link down
eth1: link up (100Mbps/Full duplex)
br-lan: port 2(ath0) entering disabled state
device ath0 left promiscuous mode
br-lan: port 2(ath0) entering disabled state
eth0: link up (100Mbps/Full duplex)
br-lan: port 1(eth0) entering forwarding state
device ath0 entered promiscuous mode
br-lan: port 2(ath0) entering forwarding state
device ath0 left promiscuous mode
br-lan: port 2(ath0) entering disabled state
device ath0 entered promiscuous mode
br-lan: port 2(ath0) entering forwarding state
Unhandled kernel unaligned access[#1]:
Cpu 0
$ 0   : 00000000 802e0000 c49b9c5f 00000000
$ 4   : c49b9c5b 00000000 83020674 00000013
$ 8   : 1000f400 1000001e 00000000 00000000
$12   : c49b9c17 c49b9c17 00000000 00000000
$16   : 802a5d58 8c620044 00000000 00000010
$20   : 00000000 83bc0300 83039a04 80020000
$24   : 831203bc 00000002+</code></pre></div><p>next errors with same configuration<br /></p><div class="codebox"><pre><code>Data bus error, epc == 800a08a8, ra == 80071950                                                                                    
Oops[#1]:                                                                                                                           
Cpu 0                                                                                                                               
$ 0   : 00000000 802e0000 994f41e3 83144560                                                                                         
$ 4   : 00000000 80254010 8313a92c 00000000                                                                                         
$ 8   : 1000f401 1000001e c74cc7b0 00000000                                                                                         
$12   : 3b9ac9ff ffffffff 802a5d68 0098966a                                                                                         
$16   : 8314455c 8313a92c 00000000 00000004                                                                                         
$20   : c74d0993 00000000 802a5db0 00030000                                                                                         
$24   : 00000000 8007092c                                                                                                           
$28   : 802a4000 802a5cb0 80030000 80071950                                                                                         
Hi    : 0033b0cb                                                                                                                    
Lo    : c74cc7b0                                                                                                                    
epc   : 800a08a8 0x800a08a8

CPU 0 Unable to handle kernel paging request at virtual address 4ab780e0, epc == 800b0ce0, ra == 801c9cb8
Oops[#1]:
Cpu 0
$ 0   : 00000000 00000001 00000001 8314dc80
$ 4   : 4ab780e0 81062160 8310b000 801c982c
$ 8   : 802bf8ec 800643e0 83915490 00000000
$12   : 83b70000 00000000 00000000 00000000
$16   : 839eac00 0000000c 00000001 838b5700
$20   : 00000000 ffffb984 80060000 838b5400
$24   : 00000000 801a2c98                  
$28   : 802a4000 802a5de8 838b5714 801c9cb8
Hi    : 000014e6n

Reserved instruction in kernel code[#1]:
Cpu 0
$ 0   : 00000000 802e0000 6cc1e850 00000000
$ 4   : 00000030 83be0000 802e0000 802a4000
$ 8   : 1000f400 1000001f 00000000 83876000
$12   : 802a9998 0098966c 839359d8 0098966c
$16   : 1000f401 83be0000 83be0300 83bf0000
$20   : 80019274 00000000 80060000 80020000
$24   : 00000000 8006a108                  
$28   : 802a4000 802a5e28 80030000 800a2c14
Hi    : 0000001d
Lo    : 123c6700
epc   : 83112260 0x83112260
.
.
.
.
Reserved instruction in kernel code[#99]:
Cpu 0
$ 0   : 00000000 802e0000 0000001f 00000001
$ 4   : 802a9ea0 0000dc4d 00000001 19d60000
$ 8   : 000000e2 802b0000 802f0000 802f0000
$12   : 802f0000 00000005 839359d8 0098966c
$16   : 8029e1a0 00000020 30800028 802f0000
$20   : 80019274 00000000 80060000 80020000
$24   : 00000000 80190f24                  
$28   : 8029e000 8029e110 80030000 8006e3c0
Hi    : 00000000
Lo    : 19d60000
epc   : 8006e3c0 0x8006e3c0</code></pre></div><p>I&#039;m trying to solve this for a week (uprading to newer revision).<br />I&#039;m getting confused because DD-WRT works well but I had to buy license.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p101721">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">huncut</div>
					<div class="post-datetime">
						29 Jan 2010, 21:34					</div>
				</div>
				<div class="post-content content">
					<p>Did you found some solution? I have exactly the same problem, with the same configuration: Routerstation Pro and TP-LINK TL-WN360G. I have latest Kamikaze build and using madwifi.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p101756">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">huncut</div>
					<div class="post-datetime">
						30 Jan 2010, 10:18					</div>
				</div>
				<div class="post-content content">
					<p>Hmmm, this is not a problem with encryption. Routerstation is rebooting even if I enable unencrypted wifi. I can connect only for few seconds and that RS pro reboot. Maybe some problem with compatibility with Atheros 5006X :-(</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p101894">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">aXik</div>
					<div class="post-datetime">
						1 Feb 2010, 20:09					</div>
				</div>
				<div class="post-content content">
					<p>after days of flashing/configuring/rebooting I&#039;ve found working FW at <a href="http://dd-wrt.com">http://dd-wrt.com</a>/ but its price is 20Euro ..there are small problems but I&#039;m using it for months now without crash problems</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p104056">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">partizann</div>
					<div class="post-datetime">
						2 Mar 2010, 00:34					</div>
				</div>
				<div class="post-content content">
					<p>I had a similar problem on my new RouterStation Pro with TL-WN562AG wifi (Atheros 5006X) on KAMIKAZE (bleeding edge, r19921).<br />I was aware that the wifi is working correctly because when i created the ath0 interface (wlanconfig ath0 create wlandev wifi0 wlanmode ap) and assigned to it an essid, channel and IP by iwconfig and ifconfig it worked flawlesly. But when i tried to start the hostapd by hand i just get an error that hwmode &quot;11g&quot; is unsupported, so i just cleaned out the value in option &#039;hwmode&#039; &#039;&#039; line of&nbsp; /etc/config/wireless. And after that i was able to start the hostapd and it worked. <br />I hope this will help you out too.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p109613">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">renekliment</div>
					<div class="post-datetime">
						21 May 2010, 21:26					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys. <br />I have bought the exactly same hardware (RouterStation Pro and TP-LINK TL-WN360G).<br />I am using OpenWRT and I have used the Madwifi driver for Atheros cards.<br />The device was always restarting itself and I wanted to get rid of it as soon as possible, because it was getting me crazy.<br />I&#039;ve tried the last solution I though out - change the Wi-Fi card driver ... and ... wait for it ... it works!<br />I&#039;ve just replaced the madwifi driver with ath5k and it works perfectly!</p><p>I hope, that my comment will help you, bye!</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>