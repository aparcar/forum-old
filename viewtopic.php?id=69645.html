<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Changing Flash Partitions on WRT1200AC</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 25 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p350702">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">emrahayanoglu</div>
					<div class="post-datetime">
						31 Jan 2017, 08:42					</div>
				</div>
				<div class="post-content content">
					<p>Hi All,</p><p>I think it is a beginner question for the OpenWRT. I have custom applications to install on my WRT1200 AC router; however, current partition on flash is not enough to store my applications. </p><p>Therefore, I&#039;d like change the partition. Does anyone know how to do that?</p><p>Cheers,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p350704">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">nitroshift</div>
					<div class="post-datetime">
						31 Jan 2017, 08:43					</div>
				</div>
				<div class="post-content content">
					<p>You&#039;re better off using extroot.</p><p>nitroshift</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p350705">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">emrahayanoglu</div>
					<div class="post-datetime">
						31 Jan 2017, 08:50					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nitroshift wrote:</cite><blockquote><p>You&#039;re better off using extroot.</p><p>nitroshift</p></blockquote></div><p>Although your suggested solution looks easy to integrate, it is not possible on my use case. Actually, I&#039;ve tried to put my all software into the bulk image and flash it. That works well; however, my update software scenario screws up everything in that scenario.</p><p>So, only logical solution on my case is to change the partitions of the flash...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p350706">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">neda.72</div>
					<div class="post-datetime">
						31 Jan 2017, 09:27					</div>
				</div>
				<div class="post-content content">
					<p>tanx</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p350708">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">nitroshift</div>
					<div class="post-datetime">
						31 Jan 2017, 09:36					</div>
				</div>
				<div class="post-content content">
					<p>@emrahayanoglu</p><p>Changing partitions is not straight forward and involves editing the device tree then recompiling the image. Also, bear in mind that these units have 2 partitions on flash (main and back-up).</p><p>nitroshift</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p350710">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">emrahayanoglu</div>
					<div class="post-datetime">
						31 Jan 2017, 10:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nitroshift wrote:</cite><blockquote><p>@emrahayanoglu</p><p>Changing partitions is not straight forward and involves editing the device tree then recompiling the image. Also, bear in mind that these units have 2 partitions on flash (main and back-up).</p><p>nitroshift</p></blockquote></div><p>That&#039;s also my estimation as well. I&#039;m familiar with image building with custom software and patches.&nbsp; Actually, I&#039;ve checked within source codes and found some related patches for changing the partitions, but i&#039;m not %100 sure that patches are related about that. </p><p>Could you show me one patch in OpenWRT source code about changing the partition? then, I&#039;ll try to create my own patch...</p><p>Thanks a lot,</p><p>Cheers,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p350711">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">nitroshift</div>
					<div class="post-datetime">
						31 Jan 2017, 10:11					</div>
				</div>
				<div class="post-content content">
					<p><a href="https://github.com/openwrt/openwrt/blob/master/target/linux/mvebu/patches-4.4/208-ARM-mvebu-385-ap-Add-partitions.patch">https://github.com/openwrt/openwrt/blob â€¦ ions.patch</a></p><p>nitroshift</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p350721">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">emrahayanoglu</div>
					<div class="post-datetime">
						31 Jan 2017, 10:55					</div>
				</div>
				<div class="post-content content">
					<p>Thanks a lot nitroshift. That&#039;s what i would like to have. I&#039;ll try to change my partition with similar patch and hope that it won&#039;t screw up my router <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>I&#039;ll keep writing my experience in here...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351329">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">emrahayanoglu</div>
					<div class="post-datetime">
						7 Feb 2017, 10:42					</div>
				</div>
				<div class="post-content content">
					<p>Hi Again,<br />I&#039;ve tested different partition configuration via changing the following file:<br />target/linux/mvebu/files/arch/arm/boot/dts/armada-385-linksys.dtsi</p><p>Main goal is to reduce syscfg partition and give it to the rootfs partitions; however, after building the new images, my router was bricked twice.</p><p>So, anyone can help me about that?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351358">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">nitroshift</div>
					<div class="post-datetime">
						7 Feb 2017, 18:07					</div>
				</div>
				<div class="post-content content">
					<p>Bare in mind that partitions are also defined in u-boot.</p><p>nitroshift</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351407">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">emrahayanoglu</div>
					<div class="post-datetime">
						8 Feb 2017, 08:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nitroshift wrote:</cite><blockquote><p>Bare in mind that partitions are also defined in u-boot.</p><p>nitroshift</p></blockquote></div><p>I think you mean U-Boot Configuration variable &quot;mtdparts&quot;. There are some examples especially for ar71xx architecture on the OpenWrt source code. </p><p>However, I could not find any configuration on the U-Boot for mvebu architecture. So, could you show me where can i find the setting U-Boot environment variables on the boot-time?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>