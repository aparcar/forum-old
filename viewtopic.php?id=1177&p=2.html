<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Bug reports for Experimental</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 2 Apr 2018 and 6 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 3</div><nav><ul><li><a href="viewtopic.php%3Fid=1177&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=1177&amp;p=3.html">3</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p5959">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">Kurgan</div>
					<div class="post-datetime">
						6 Apr 2005, 19:55					</div>
				</div>
				<div class="post-content content">
					<p>dsouth, </p><p>I have seen such a behaviour on a WRT54G with original firmware from Linksys... maybe it&#039;s a bug in some driver. I was copying lots of files from the LAN to a wireless notebook (Intel Centrino) and the router rebooted several times in about 30 minutes, while copying about 8 gig of data.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5969">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">TheRoDent</div>
					<div class="post-datetime">
						7 Apr 2005, 02:40					</div>
				</div>
				<div class="post-content content">
					<p>The rebooting during heavy traffic has been discussed (albeit without much result) on a number of other forums, uncluding the Sveasoft, and linksysinfo.org sites.</p><p>Happens not just with OpenWRT but with other firmware too. Either there&#039;s a bad batch of WRT&#039;s out there, or there is some kind of driver problem in the latest firmware that most builds are now based off.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5970">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">manoj</div>
					<div class="post-datetime">
						7 Apr 2005, 03:28					</div>
				</div>
				<div class="post-content content">
					<p>So, since no one&#039;s had time to debug my traffic shaping issue above, any<br />suggestions for how I can go about debugging this? Is there a System.map<br />for the current openwrt experimental kernel build so I can try pulling<br />out a stack trace at least?</p><p>I have a tiny bit of experience with kernel debugging, and none with<br />cross-compilation.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5985">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">trevorj</div>
					<div class="post-datetime">
						7 Apr 2005, 12:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>The rebooting during heavy traffic has been discussed (albeit without much result) on a number of other forums, uncluding the Sveasoft, and linksysinfo.org sites.</p><p>Happens not just with OpenWRT but with other firmware too. Either there&#039;s a bad batch of WRT&#039;s out there, or there is some kind of driver problem in the latest firmware that most builds are now based off.</p></blockquote></div><p>Oh man am I glad I&#039;m not the only person having this rebooting issue with wireless. It only happens on the experimental builds for me. Stable works fine. wrt54g 1.0.</p><p>It seemed to happen when the speed on a sustained download went over 300k/s, which would agree with the large packet size. Smaller operations worked just fine.</p><p>I went back to stable, and it works great as it always did, although I don&#039;t get that warm and fuzzy experimental feeling. Maybe it&#039;s a bug with the new kernel/drivers ? Makes me wish I had a serial console for my wrt.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5997">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">TheRoDent</div>
					<div class="post-datetime">
						7 Apr 2005, 22:44					</div>
				</div>
				<div class="post-content content">
					<p>Alright, not entirely sure if this is related to &#039;reboot-during-heavy-file-transfers&#039; problem, but I&#039;ve managed to get a koops on my development wrt2.2 today, constantly as I was trying to compile perl using the uclibc mipsel rootfs.</p><div class="codebox"><pre><code>virtual address 00000150, epc == 800d5cfc, ra
== 800d5ca0
Oops in fault.c::do_page_fault, line 206:
$0 : 00000000 80210000 00000000 00000000 80191180 028f5c29 0000270f 1000fc01
$8 : 00000045 00000001 00000002 214fc000 00000000 80ff6800 00000000 00000000
$16: 80ab62c0 803e3a60 80a71810 1000fc01 00000074 00000074 80d1c930 00000000
$24: 00000000 0047ac34                   80800000 80801a60 8073ca20 800d5ca0
Hi : 000012b9
Lo : 63d75523
epc   : 800d5cfc    Tainted: P
Status: 1000fc02
Cause : 00000008
PrId  : 00029007
Process sh (pid: 4756, stackpage=80800000)
Stack:    80ab68c0 00000000 80ab62c0 803e3a60 80ab62c0 c00c68c8 800b4fbc
 00000000 00000000 80191078 80250e00 801911a8 80cb4720 c00cb70c 80cb4720
 c00c8218 00000000 0047ac34 803e3a60 c00cb70c 80cb4720 c00c6704 00000074
 00000074 80d1c930 800d671c 00000000 80191078 fffffff3 800169b8 00000128
 00000000 00000001 80191070 00000000 80016610 00000003 80b109ac 00000001
 c01420a4 ...
Call Trace:   [&lt;c00c68c8&gt;] [&lt;800b4fbc&gt;] [&lt;c00cb70c&gt;] [&lt;c00c8218&gt;] [&lt;c00cb70c&gt;]
 [&lt;c00c6704&gt;] [&lt;800d671c&gt;] [&lt;800169b8&gt;] [&lt;80016610&gt;] [&lt;c01420a4&gt;] [&lt;c0144258&gt;]
 [&lt;c0143e30&gt;] [&lt;800eced8&gt;] [&lt;800ecc88&gt;] [&lt;80143780&gt;] [&lt;800eced8&gt;] [&lt;800b4fbc&gt;]
 [&lt;c00cb70c&gt;] [&lt;c0143c94&gt;] [&lt;c01442f0&gt;] [&lt;c0141214&gt;] [&lt;c0140b88&gt;] [&lt;c0145d14&gt;]
 [&lt;c0145d14&gt;] [&lt;c0171aa8&gt;] [&lt;c01460d0&gt;] [&lt;c0140950&gt;] [&lt;c0171e44&gt;] [&lt;c0171e34&gt;]
 [&lt;c0171f00&gt;] [&lt;c0172010&gt;] [&lt;c01720c8&gt;] [&lt;c01720a4&gt;] [&lt;c01719e8&gt;] [&lt;c0175a68&gt;]
 [&lt;c01724fc&gt;] [&lt;c017249c&gt;] [&lt;80025588&gt;] [&lt;8002fdf4&gt;] [&lt;80025684&gt;] ...

Code: 10400012  00000000  3c028021 &lt;8c42cf64&gt; 1040000e  00000000  40016000  30e70001  3421
0001
Kernel panic: Aiee, killing interrupt handler!
In interrupt handler - not syncing
 &lt;0&gt;Rebooting in 3 seconds..Please stand by while rebooting the system...</code></pre></div><p>Will do ksymoops analysis shortly.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p6000">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">TheRoDent</div>
					<div class="post-datetime">
						7 Apr 2005, 23:07					</div>
				</div>
				<div class="post-content content">
					<p>OK, a ksymoops analysis of the kernel dump indicates that et.o (the ethernet driver) is most likely to blame.</p><div class="codebox"><pre><code>Oops in fault.c::do_page_fault, line 206:
Oops in fault.c::do_page_fault, line 206:
$0 : 00000000 80210000 00000000 00000000 80191180 028f5c29 0000270f 1000fc01
$0 : 00000000 80210000 00000000 00000000 80191180 028f5c29 0000270f 1000fc01
$8 : 00000045 00000001 00000002 214fc000 00000000 80ff6800 00000000 00000000
$8 : 00000045 00000001 00000002 214fc000 00000000 80ff6800 00000000 00000000
$16: 80ab62c0 803e3a60 80a71810 1000fc01 00000074 00000074 80d1c930 00000000
$16: 80ab62c0 803e3a60 80a71810 1000fc01 00000074 00000074 80d1c930 00000000
$24: 00000000 0047ac34                   80800000 80801a60 8073ca20 800d5ca0
$24: 00000000 0047ac34                   80800000 80801a60 8073ca20 800d5ca0
Hi : 000012b9
Hi : 000012b9
Lo : 63d75523
Lo : 63d75523
epc   : 800d5cfc    Tainted: P
epc   : 800d5cfc    Tainted: P
Using defaults from ksymoops -a i386
Status: 1000fc02
Status: 1000fc02
Cause : 00000008
Cause : 00000008
PrId  : 00029007
Process sh (pid: 4756, stackpage=80800000)
Process sh (pid: 4756, stackpage=80800000)
Stack:    80ab68c0 00000000 80ab62c0 803e3a60 80ab62c0 c00c68c8 800b4fbc
Stack:    80ab68c0 00000000 80ab62c0 803e3a60 80ab62c0 c00c68c8 800b4fbc
 00000000 00000000 80191078 80250e00 801911a8 80cb4720 c00cb70c 80cb4720
 00000000 00000000 80191078 80250e00 801911a8 80cb4720 c00cb70c 80cb4720
 c00c8218 00000000 0047ac34 803e3a60 c00cb70c 80cb4720 c00c6704 00000074
 c00c8218 00000000 0047ac34 803e3a60 c00cb70c 80cb4720 c00c6704 00000074
 00000074 80d1c930 800d671c 00000000 80191078 fffffff3 800169b8 00000128
 00000074 80d1c930 800d671c 00000000 80191078 fffffff3 800169b8 00000128
 00000000 00000001 80191070 00000000 80016610 00000003 80b109ac 00000001
 00000000 00000001 80191070 00000000 80016610 00000003 80b109ac 00000001
 c01420a4 ...
Call Trace:   [&lt;c00c68c8&gt;] [&lt;800b4fbc&gt;] [&lt;c00cb70c&gt;] [&lt;c00c8218&gt;] [&lt;c00cb70c&gt;]
 c01420a4 ...
Call Trace:   [&lt;c00c68c8&gt;] [&lt;800b4fbc&gt;] [&lt;c00cb70c&gt;] [&lt;c00c8218&gt;] [&lt;c00cb70c&gt;]
 [&lt;c00c6704&gt;] [&lt;800d671c&gt;] [&lt;800169b8&gt;] [&lt;80016610&gt;] [&lt;c01420a4&gt;] [&lt;c0144258&gt;]
 [&lt;c00c6704&gt;] [&lt;800d671c&gt;] [&lt;800169b8&gt;] [&lt;80016610&gt;] [&lt;c01420a4&gt;] [&lt;c0144258&gt;]
 [&lt;c0143e30&gt;] [&lt;800eced8&gt;] [&lt;800ecc88&gt;] [&lt;80143780&gt;] [&lt;800eced8&gt;] [&lt;800b4fbc&gt;]
 [&lt;c0143e30&gt;] [&lt;800eced8&gt;] [&lt;800ecc88&gt;] [&lt;80143780&gt;] [&lt;800eced8&gt;] [&lt;800b4fbc&gt;]
 [&lt;c00cb70c&gt;] [&lt;c0143c94&gt;] [&lt;c01442f0&gt;] [&lt;c0141214&gt;] [&lt;c0140b88&gt;] [&lt;c0145d14&gt;]
 [&lt;c00cb70c&gt;] [&lt;c0143c94&gt;] [&lt;c01442f0&gt;] [&lt;c0141214&gt;] [&lt;c0140b88&gt;] [&lt;c0145d14&gt;]
 [&lt;c0145d14&gt;] [&lt;c0171aa8&gt;] [&lt;c01460d0&gt;] [&lt;c0140950&gt;] [&lt;c0171e44&gt;] [&lt;c0171e34&gt;]
 [&lt;c0145d14&gt;] [&lt;c0171aa8&gt;] [&lt;c01460d0&gt;] [&lt;c0140950&gt;] [&lt;c0171e44&gt;] [&lt;c0171e34&gt;]
 [&lt;c0171f00&gt;] [&lt;c0172010&gt;] [&lt;c01720c8&gt;] [&lt;c01720a4&gt;] [&lt;c01719e8&gt;] [&lt;c0175a68&gt;]
 [&lt;c0171f00&gt;] [&lt;c0172010&gt;] [&lt;c01720c8&gt;] [&lt;c01720a4&gt;] [&lt;c01719e8&gt;] [&lt;c0175a68&gt;]
 [&lt;c01724fc&gt;] [&lt;c017249c&gt;] [&lt;80025588&gt;] [&lt;8002fdf4&gt;] [&lt;80025684&gt;] ...
 [&lt;c01724fc&gt;] [&lt;c017249c&gt;] [&lt;80025588&gt;] [&lt;8002fdf4&gt;] [&lt;80025684&gt;] ...
Warning (Oops_trace_line): garbage &#039;...&#039; at end of trace line ignored

Code: 10400012  00000000  3c028021 &lt;8c42cf64&gt; 1040000e  00000000  40016000  30e70001  3421
Code: 10400012  00000000  3c028021 &lt;8c42cf64&gt; 1040000e  00000000  40016000  30e70001  3421
/usr/bin/objdump: /tmp/ksymoops.58kTzK: File format not recognized
Error (pclose_local): Oops_decode_part pclose failed 0x100
Error (Oops_decode_part): no objdump lines read for /tmp/ksymoops.58kTzK


&gt;&gt;$1; 80210000 &lt;ip_nat_irc_helpers+10c/1e0&gt;
&gt;&gt;$4; 80191180 &lt;softnet_data+0/180&gt;
&gt;&gt;$13; 80ff6800 &lt;_end+dd87f0/3fe8e8a0&gt;
&gt;&gt;$16; 80ab62c0 &lt;_end+8982b0/3fe8e8a0&gt;
&gt;&gt;$17; 803e3a60 &lt;_end+1c5a50/3fe8e8a0&gt;
&gt;&gt;$18; 80a71810 &lt;_end+853800/3fe8e8a0&gt;
&gt;&gt;$22; 80d1c930 &lt;_end+afe920/3fe8e8a0&gt;
&gt;&gt;$28; 80800000 &lt;_end+5e1ff0/3fe8e8a0&gt;
&gt;&gt;$29; 80801a60 &lt;_end+5e3a50/3fe8e8a0&gt;
&gt;&gt;$30; 8073ca20 &lt;_end+51ea10/3fe8e8a0&gt;
&gt;&gt;$31; 800d5ca0 &lt;netif_rx+20/318&gt;

&gt;&gt;???; 800d5cfc &lt;netif_rx+7c/318&gt;   &lt;=====

Trace; c00c68c8 &lt;[et]et_sendup+fc/140&gt;
Trace; 800b4fbc &lt;dma_rx+bc/e4&gt;
Trace; c00cb70c &lt;[et]bcm47xx_et_chops+0/5c&gt;
Trace; c00c8218 &lt;[et]chiprx+20/48&gt;
Trace; c00cb70c &lt;[et]bcm47xx_et_chops+0/5c&gt;
Trace; c00c6704 &lt;[et]et_dpc+54/11c&gt;
Trace; 800d671c &lt;net_rx_action+b0/1dc&gt;
Trace; 800169b8 &lt;tasklet_action+94/104&gt;
Trace; 80016610 &lt;do_softirq+b0/170&gt;
Trace; c01420a4 &lt;[sunrpc]rpc_restart_call+16c0/1878&gt;
Trace; c0144258 &lt;[sunrpc]xprt_transmit+7a8/7d8&gt;
Trace; c0143e30 &lt;[sunrpc]xprt_transmit+380/7d8&gt;
Trace; 800eced8 &lt;ip_rcv_finish+0/2e8&gt;
Trace; 800ecc88 &lt;ip_rcv+51c/590&gt;
Trace; 80143780 &lt;vlan_skb_recv+320/56c&gt;
Trace; 800eced8 &lt;ip_rcv_finish+0/2e8&gt;
Trace; 800b4fbc &lt;dma_rx+bc/e4&gt;
Trace; c00cb70c &lt;[et]bcm47xx_et_chops+0/5c&gt;
Trace; c0143c94 &lt;[sunrpc]xprt_transmit+1e4/7d8&gt;
Trace; c01442f0 &lt;[sunrpc]xprt_reserve+68/1c8&gt;
Trace; c0141214 &lt;[sunrpc]rpc_restart_call+830/1878&gt;
Trace; c0140b88 &lt;[sunrpc]rpc_restart_call+1a4/1878&gt;
Trace; c0145d14 &lt;[sunrpc]rpc_delay+158/490&gt;
Trace; c0145d14 &lt;[sunrpc]rpc_delay+158/490&gt;
Trace; c0171aa8 &lt;[nfs]nfs_destroy_nfspagecache+1760/1b4c&gt;
Trace; c01460d0 &lt;[sunrpc]rpc_execute+84/29c&gt;
Trace; c0140950 &lt;[sunrpc]rpc_call_setup+50/98&gt;
Trace; c0171e44 &lt;[nfs]nfs_destroy_nfspagecache+1afc/1b4c&gt;
Trace; c0171e34 &lt;[nfs]nfs_destroy_nfspagecache+1aec/1b4c&gt;
Trace; c0171f00 &lt;[nfs]nfs_pagein_list+6c/b8&gt;
Trace; c0172010 &lt;[nfs]nfs_scan_lru_read+78/d0&gt;
Trace; c01720c8 &lt;[nfs]nfs_pagein_inode+60/3c4&gt;
Trace; c01720a4 &lt;[nfs]nfs_pagein_inode+3c/3c4&gt;
Trace; c01719e8 &lt;[nfs]nfs_destroy_nfspagecache+16a0/1b4c&gt;
Trace; c0175a68 &lt;[nfs]nfs_sync_file+94/bc&gt;
Trace; c01724fc &lt;[nfs]nfs_readpage+d0/124&gt;
Trace; c017249c &lt;[nfs]nfs_readpage+70/124&gt;
Trace; 80025588 &lt;add_to_page_cache_unique+144/15c&gt;
Trace; 8002fdf4 &lt;_alloc_pages+24/30&gt;
Trace; 80025684 &lt;page_cache_read+e4/130&gt;

0001
0001
Kernel panic: Aiee, killing interrupt handler!
Kernel panic: Aiee, killing interrupt handler!
In interrupt handler - not syncing
 &lt;0&gt;Rebooting in 3 seconds..Please stand by while rebooting the system...</code></pre></div><p>Unfortunately I don&#039;t have a mipsel targetted ksymoops to get an instruction dump, but the symbol names definately look correct.</p><p>This _does_ appear to be related to the problem others are experiencing seeing as I was doing a massive perl compile over an nfs mounted volume on another host.</p><p>Looks like the new ethernet driver dies under high load.&nbsp; <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" />&nbsp; <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p6004">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">TheRoDent</div>
					<div class="post-datetime">
						8 Apr 2005, 01:42					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve dropped the MTU to 1024 on my NFS host, and my WRT and the crashes appears to have gone away...&nbsp; :?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p6009">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">dsouth</div>
					<div class="post-datetime">
						8 Apr 2005, 06:16					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;d love to say that dropping the mtu to 1024 on my hosts cured the<br />issue, but it didn&#039;t.&nbsp; It did make the wrt hang in there longer during<br />a heavy transfer before finally rebooing though.</p><p>On the good side, if it&#039;s a bug in the linksys driver, there&#039;s the possiblity<br />of a fix in a future code drop.</p><p>--<br />Dale</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p6047">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">Kurgan</div>
					<div class="post-datetime">
						9 Apr 2005, 15:39					</div>
				</div>
				<div class="post-content content">
					<p>Some tests about the reset under heavy traffic issue:</p><p>I am running the tests on GS v1.1 with the previous experimental version (14/3/2005), with WPA enabled. I am transferring data between the LAN ports and the wireless port, so I am just bridging and not routing. Client is win2000 with a Netgear MiniPci b+g card. </p><br /><p>I have tried using FTP, and transferring groups of files (60 files about 2 megs each) and single big files (80 megs) back and forth. I am using the serial port to monitor the console. I had no issues at all, with a sustained transfer rate of about 15 Mb/sec.</p><p>I then have tried using SMB transfers, with a sustained rate of about 13 Mb/sec and I have experienced just one glitch. The SMB session stopped transferring data and got disconnected, but pinging across the wrt did not fail, and just trying again to connect to the smb share worked without resetting anything. No messages where printed in the WRT&#039;s syslog or console. Trying again allowed me to transfer 2 GB of data in about 10 files without any issue. </p><p>Clearly I have lots of big (1500 bytes) packets, since I transfer big files.</p><p>So, it seems that my WRT does not reset on heavy wireless to wired (bridging) load. I&#039;ll have to try with routing, now.</p><br /><p><span style="color: red">UPDATE</span><br />I have tried routing from WAN to LAN (wireless) and from WAN to LAN (wired) and even if I had no resets (and nothing in the syslog) I have found two problems:</p><p>1- maximum attainable speed (using 100 megabit connections) if the connection goes through the WRT (with default NAT rules and nothing more) is about 20 megabit instead of the expected 70 (70 is what I get if I don&#039;t go through the WRT). During this test i have run &quot;top&quot; and noticed something strange. While &quot;load average&quot; stays under 1%, the process &quot;ksoftirqd_CPU0&quot; uses up more than 90% cpu time. Does this set the speed limit of the WRT to a sad 20 Mbit? I know that ordinary users don&#039;t have a 20Mbit internet connection, but I thought I could get more from a 200 MHz CPU. I have tried removing every firewall rule other than the masquerade one, and still I get 20 Mbit. What&#039;s worse is that wireless connection speed is limited to about 13 Mbit/sec, with ksoftirqd_CPU0 at 75% load. This is true even for LAN-to-WLAN transfers, without routing involved.</p><br /><p>2- lots of times I see my SMB session die on me while I transfer the same file, so there is some pattern in that file that sistematically makes the WRT drop the (TCP, I suppose) connection. The WRT does not reboot or show any other misbehaviour, if I ping continuously, I can see pings go through, even when the SMB session dies. </p><p>If I connect the WRT just as a switch (that is, the server and the client for the tests are both connected on wired LAN ports) I get 70 MB as expected, and also I can transfer the &quot;faulty&quot; file without the SMB session dying, so it&#039;s not a switch chip issue.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p6058">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">dsouth</div>
					<div class="post-datetime">
						9 Apr 2005, 19:00					</div>
				</div>
				<div class="post-content content">
					<p>As at datapoint, my 2.2 resets with heavy scp/rsync transfers between<br />two wireless hosts (b to b).&nbsp; Heavy transfers from wan to wireless or<br />vice-versa are fine, it&#039;s just the wireless to wireless lan stuff that causes<br />a reset.</p><p>I have another 54g in the box, so I should _really_ get around to<br />trying some experiment son the second router.&nbsp; [So many projects, so<br />little time...]</p><p>--<br />Dale</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p6144">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">TheRoDent</div>
					<div class="post-datetime">
						12 Apr 2005, 14:00					</div>
				</div>
				<div class="post-content content">
					<p>I think I may have found an ugly workaround.</p><p>I insmod et.o let it configure the broadcom switch, and then rmmod it again. This is the new 3.60 driver</p><p>Then, I insert the old ethernet driver v 3.50 (which I renamed to old_et.o) do the normal vconfig stuff again and it actually works.&nbsp; :shock:&nbsp; Things are pingable etc...</p><p>I&#039;m now doing some nfs based compiles again, to see if I can get the same driver oops as I did with the 3.60 driver. </p><p>Summary: Use the new driver to initialize the switch, remove it, and then use the old driver.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p6200">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">jobster</div>
					<div class="post-datetime">
						15 Apr 2005, 11:37					</div>
				</div>
				<div class="post-content content">
					<p>I bought a WRT54G v2.2 two weeks ago, expierienced the &quot;hight-load &amp; reboot&quot; issues that people are talking about, so i convinced the store to let me exchange the wrt54g to an asus WL500g (about the same hardware as a wrt54).. same problems here.. works fine with the obsolete stable-release of openwrt and with the original firmware, but with the experimental release of openwrt it dies after just a couple of megabytes of transered data at speeds of just 1MiB/sec</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p6209">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">sendo</div>
					<div class="post-datetime">
						15 Apr 2005, 22:47					</div>
				</div>
				<div class="post-content content">
					<p>Well, as someone might have noticed I overread the latest posts in this thread and opened a new one concerning the high-load-issue.<br />I have a Asus WL-500g here and have the crashing router-problem using wlan with wpa and wep and without encryption on heavy load.</p><p>I hope someone comes with new ideas on how to fix this, &#039;cause I don&#039;t want to revert to the snapshot-releases <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>Cheers,<br />Sendo</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p6211">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">sendo</div>
					<div class="post-datetime">
						15 Apr 2005, 22:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>I think I may have found an ugly workaround.</p><p>I insmod et.o let it configure the broadcom switch, and then rmmod it again. This is the new 3.60 driver</p><p>Then, I insert the old ethernet driver v 3.50 (which I renamed to old_et.o) do the normal vconfig stuff again and it actually works.&nbsp; :shock:&nbsp; Things are pingable etc...</p><p>I&#039;m now doing some nfs based compiles again, to see if I can get the same driver oops as I did with the 3.60 driver. </p><p>Summary: Use the new driver to initialize the switch, remove it, and then use the old driver.</p></blockquote></div><br /><p>Well, I&#039;d like to test that as well, but would you mind posting the 3.50 driver in this forum?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p6218">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">disq</div>
					<div class="post-datetime">
						16 Apr 2005, 09:13					</div>
				</div>
				<div class="post-content content">
					<p>i&#039;m having the same high load &amp; reboot problem you guys are having, but it&#039;s on a microsoft mn700 flashed with PMON (as the bootloader) and openwrt.</p><p>crashes with downloading FROM the wireless link (over wds, that is)<br />no crashes if i just download from the ethernet (from the local httpd, made up a cgi script that would cat /usr/bin/kismet_drone 20 times)</p><p>my two other wrt54g&#039;s (which are v2&#039;s) are fine with the same firmware though.</p><br /><p>also sometimes i&#039;m experiencing random reboots on the mn700 (even with no traffic) and trying to find a way to attach an UART chip to the uart header so i can get the serial port working and read the kernel panic messages. (if there are any, of course)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p6228">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">sendo</div>
					<div class="post-datetime">
						17 Apr 2005, 23:31					</div>
				</div>
				<div class="post-content content">
					<p>Me again. I looked up where the et.o and wl.o come from and found out that that it comes precompiled from openwrt.openbsd-geek.de. The problem is that I do not understand with which source-code these drivers were compiled and how I can compile them on my own to test if my bandwidth-problem are a matter of them.<br />Would someone lend me a hand so I can test this in the experimental build?</p><p>BTW: In the meantime I compiled and tested the old snapshot and also a precompiled version of olegs WL500g-firmware, both didn&#039;t have the problem of rebooting (and as the matter of that a broken connection) on high wlan-bandwidth.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p6299">
				<div class="post-metadata">
					<div class="post-num">Post #42</div>
					<div class="post-author">davygrvy</div>
					<div class="post-datetime">
						20 Apr 2005, 10:43					</div>
				</div>
				<div class="post-content content">
					<p>for RADVD, please change the default pid file location from &#039;/tmp/run&#039; to &#039;/var/run&#039; please</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p6304">
				<div class="post-metadata">
					<div class="post-num">Post #43</div>
					<div class="post-author">tosuja</div>
					<div class="post-datetime">
						20 Apr 2005, 14:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Kurgan wrote:</cite><blockquote><p>1- maximum attainable speed (using 100 megabit connections) if the connection goes through the WRT (with default NAT rules and nothing more) is about 20 megabit instead of the expected 70 (70 is what I get if I don&#039;t go through the WRT). During this test i have run &quot;top&quot; and noticed something strange. While &quot;load average&quot; stays under 1%, the process &quot;ksoftirqd_CPU0&quot; uses up more than 90% cpu time. Does this set the speed limit of the WRT to a sad 20 Mbit? I know that ordinary users don&#039;t have a 20Mbit internet connection, but I thought I could get more from a 200 MHz CPU. I have tried removing every firewall rule other than the masquerade one, and still I get 20 Mbit. What&#039;s worse is that wireless connection speed is limited to about 13 Mbit/sec, with ksoftirqd_CPU0 at 75% load. This is true even for LAN-to-WLAN transfers, without routing involved.</p></blockquote></div><p>To be honest, I was disappointed too with the speed of WRT. When I connected from LAN to WAN with only necessary NAT rules I&#039;ve got 34Mbits (which is quite slow), when I added 512 rules for IP accounting and bandwidth shaping I was not able to get more than 13Mbit.</p><p>ksoftirqd_CPU0 CPU usage is normal since the CPU obviously has to serve lot (thousands) of interrupts from NIC&#039;s and it is weak CPU despite it&#039;s 200MHz speed. Speed is just the number, it has almost nothing to do with real performance (you see it on the desktops - AMD CPU&#039;s are as fast as Intel ones running at 1.5 times higher frequency....). This CPU is VERY simple and slow....</p>											<p class="post-edited">(Last edited by <strong>tosuja</strong> on 20 Apr 2005, 15:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p6305">
				<div class="post-metadata">
					<div class="post-num">Post #44</div>
					<div class="post-author">acidbits</div>
					<div class="post-datetime">
						20 Apr 2005, 14:17					</div>
				</div>
				<div class="post-content content">
					<p>I have some WRT54G in a Wlan (<a href="http://santafe1.dyndns.org/public/SFprov.pdf">http://santafe1.dyndns.org/public/SFprov.pdf</a>) most of them (the ones who handle the main traffic) have OpenWRT. I&#039;m having big trouble with &quot;Congo&quot; (look at my network diagram), it crashes every 8-10 hours and have to reset it manually unppluging the power supply and plugging it again, It its located at the top of a Builidng. Don&#039;t know exactly if it is version 1.1 or 2.0.</p><p>It crashes, it doesn&#039;t reset itself. It stops responding to anything and all the Wlan can&#039;t acces Internet.</p><p>Congo is wired to the &quot;Xina&quot; a Debian Linux box. Users from Wlan have acces to Internet through it and&nbsp; a sort of FTP account linked with a multiuser P2P. India&#039;s P2P is used by Wlan users to download stuff to the server, then they FTP it to their computer through the WLAN.</p><p>Yesterday I did some testings and seems like I found what could be the problem. I thought that the problem could be that India is sending much more traffic that Congo can handle and send to the WLAN. What I did is to limit the bandwith Xina sends to Corea to 500 Kbytes/sec. Went to different users&#039; place and started to download. I transfered over 2 GB and it didn&#039;t crash. Firsts users I tried had a good link till Congo so they downloaded at full speed (500 Kbytes/sec).</p><p>Went to a user who has a poor link between his WRT54G and &quot;India&quot; (the main AP for users), there I only could download at 300 KBytes/sec. So Xina was sending traffic at 500 KBytes/sec and user was recieving at 300 KBytes/sec, Congo was recieving more traffic that it could forward till user. After a while Congo crashed.</p><p>This happened before with Sveasoft&#039;s firmware but not so often, maybe 2-3 times per month. Could you point me to some &quot;stable&quot; OpenWRT firmware that I could use at Congo?</p><p>Hope it helps somehow,</p><p>aCiDBiTS</p>											<p class="post-edited">(Last edited by <strong>acidbits</strong> on 20 Apr 2005, 15:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p6340">
				<div class="post-metadata">
					<div class="post-num">Post #45</div>
					<div class="post-author">_marc_</div>
					<div class="post-datetime">
						21 Apr 2005, 13:50					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>tosuja wrote:</cite><blockquote><p>ksoftirqd_CPU0 CPU usage is normal since the CPU obviously has to serve lot (thousands) of interrupts from NIC&#039;s and it is weak CPU despite it&#039;s 200MHz speed. Speed is just the number, it has almost nothing to do with real performance (you see it on the desktops - AMD CPU&#039;s are as fast as Intel ones running at 1.5 times higher frequency....). This CPU is VERY simple and slow....</p></blockquote></div><p>yes, I can say this too, because I have writen a while(...) loop in interpreted language (ember). On my linux desktop, 1Million can be reached in 1 second, but with a linksys 200Mhz CPU, I can loop only between 1000 to 10,000 in one second.</p><p>May be we could run a MIPS bench (nsieve) or bogomips.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p6361">
				<div class="post-metadata">
					<div class="post-num">Post #46</div>
					<div class="post-author">Kurgan</div>
					<div class="post-datetime">
						22 Apr 2005, 11:23					</div>
				</div>
				<div class="post-content content">
					<p>Acidbits,</p><p>These crashes under heavy load are a mistery which I can&#039;t understand, but we have some clues.</p><p>You have a 54G that crashes when the trafic coming in from the LAN comes at a faster rate than it goes out of the WLAN. Maybe that&#039;s an overflow in some buffer in the Broadcom driver that makes the router crash because it leaks out of its allocated space and overwrites something? We should maybe think of it... maybe it&#039;s not the trafic itself, but the difference between &quot;incoming&quot; and &quot;outgoing&quot; speed.</p><p>A frend of mine has a 54G (don&#039;t know the revision) with original firmware that crashes when I download something from the LAN to the WLAN, and this seems to be your same issue (trafic comes in from the LAN at more than 70 Mbit/sec, and goes out of the WLAN at no more than 10 Mbit/sec). I have not tried reversing the traffic direction, uploading from the WLAN to the LAN. If the &quot;buffer full&quot; theory is right, this way it should not crash. I will try to test it as soon as I can. </p><p>I also have two 54GS v1.1 (with Broadcom chips) with experimental OpenWrt that I use for tests, and I have experienced low speed with high cpu load, and even two disconnections in SMB session while testing (maybe packets get lost and the SMB protocol gets badly confused? I should TCPdump everything and then go through it), but not a single (visible) glitch in the WRTs. No reboots, no kernel messages, nothing on the serial console. This setup seems not to have the supposed &quot;buffer problem&quot;, even if it uses the same experimental build that other users say crashes frequently under heavy load. </p><p>Maybe the issue is caused by a combination of new driver (experimental) and old hardware? </p><p>We still have lots of questions and no answers.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p6362">
				<div class="post-metadata">
					<div class="post-num">Post #47</div>
					<div class="post-author">acidbits</div>
					<div class="post-datetime">
						22 Apr 2005, 13:04					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m not a linux guru and haven&#039;t enough skills to tarce &amp; serach for the bug. The WRT now is been running for 2 days without crashing because I disabled the &quot;FTP service&quot; that produced high traffic (LAN-&gt;WLAN) and crashed it (even having it limited at 500 KBytes/sec). </p><p>Users want that service so I&#039;ll have to put again Linksys firmware till bug is fixed. If someone has a provisional fix or an experimental build that fix this I can be your tester ... Right now I&#039;m going to try the 1024 MTU solution, I&#039;ve set MTU to 1024 in &quot;both sides of the wire&quot;, at linux server and WRT.</p><p>I&#039;m not an expert on traffic but agree that something is happening with buffers or droping packets when buffer are full. It seems to work right for a while, after a certain time (some minutes 10-20) it crashes.</p>											<p class="post-edited">(Last edited by <strong>acidbits</strong> on 22 Apr 2005, 13:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p6387">
				<div class="post-metadata">
					<div class="post-num">Post #48</div>
					<div class="post-author">Kurgan</div>
					<div class="post-datetime">
						23 Apr 2005, 09:58					</div>
				</div>
				<div class="post-content content">
					<p>Acidbits,</p><p>What is the model and hardware revision of you crashing WRT? I&#039;d like to see if my friend&#039;s and your WRT have the same HW revision.</p><p>If it&#039;s an old one (which it should be, or else it should not work with stable version of OpenWrt) maybe you could try using the old ethernet driver with&nbsp; the unstable openwrt, as explained before in this thread. You even don&#039;t need to load the new driver first and then the old one, because you have the old chipset so you don&#039;t need the new driver to set up the vlans in the switch.</p><p>If you try this, anyway, you&#039;d better have a serial port, because you could easily break ethernet&nbsp; connection.</p>											<p class="post-edited">(Last edited by <strong>Kurgan</strong> on 23 Apr 2005, 09:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p6396">
				<div class="post-metadata">
					<div class="post-num">Post #49</div>
					<div class="post-author">acidbits</div>
					<div class="post-datetime">
						23 Apr 2005, 16:30					</div>
				</div>
				<div class="post-content content">
					<p>The WLan has 25-30 WRT54G, since it worked really bad and decided to switch to openwrt now it is in &quot;testing&quot; process. Everytime we try some modifications we move them from place to place, replace them and really don&#039;t know wich one is it, Some of them are placed at the top of buildings and is dangerous to reach them. Will write down exactly what we have when everything works right. The oldest version I remember to see is 1.1.</p><p>Tested the &quot;mtu 1024&quot; and also crashed, next step is to install linksys firmware to see hoe it works.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p6469">
				<div class="post-metadata">
					<div class="post-num">Post #50</div>
					<div class="post-author">dsouth</div>
					<div class="post-datetime">
						26 Apr 2005, 02:40					</div>
				</div>
				<div class="post-content content">
					<p>No specfic info, but the 24 Apr experimental release is &quot;crash-o-matic&quot; on<br />my v2.2 g.&nbsp; Runs fine as long as I don&#039;t do anything, but any amount of<br />serious traffic across the wireless causes it to lock up.</p><p>I&#039;ll try running some regression tests on my non-production wrt.&nbsp; [Both <br />are v2.2 hardware, so even the production one has to run either experimental<br />or therodent.]</p><p>--</p><p>Dale</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 2 of 3</div><nav><ul><li><a href="viewtopic.php%3Fid=1177&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=1177&amp;p=3.html">3</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>