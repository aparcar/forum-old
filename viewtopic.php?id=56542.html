<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> D-Link DWR-116</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 23 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p270482">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">zzztidurvirus</div>
					<div class="post-datetime">
						30 Mar 2015, 11:50					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://www.dlink.com/uk/en/support/product/dwr-116-wireless-n300-multi-wan-router">http://www.dlink.com/uk/en/support/prod … wan-router</a></p><p>Can I install OpenWRT on this? I can&#039;t seem to find any guides on how to install it.<br />Is there anyone else using this router?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p270484">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">zo0ok</div>
					<div class="post-datetime">
						30 Mar 2015, 12:00					</div>
				</div>
				<div class="post-content content">
					<p>It seems completely unknown to OpenWRT:<br /><a href="http://wiki.openwrt.org/toh/start">http://wiki.openwrt.org/toh/start</a> (also see unsupported/unknown/possible/wip)</p><p>I also find no images whatsoever that to match (in the unlikely event that it is supported/working and completely undocumented).</p><p>It should be added to the unknown-list above (I will not do it now).<br />If you are willing to find information about it to help figure out if it can be supported you can read on the wiki about it:<br /><a href="http://wiki.openwrt.org/doc/devel/hw.hacking.first.steps">http://wiki.openwrt.org/doc/devel/hw.ha … irst.steps</a><br />...and there is much more...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p270485">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">zloop</div>
					<div class="post-datetime">
						30 Mar 2015, 12:18					</div>
				</div>
				<div class="post-content content">
					<p>according to wikidevi this router is MediaTek based </p><p>see for incomplete specs: <a href="https://wikidevi.com/wiki/D-Link_DWR-116_rev_A1">https://wikidevi.com/wiki/D-Link_DWR-116_rev_A1</a></p><p>this means supporting this router should be possible</p><p>But for the devs probably more info is needed</p><p>support should be provided with profiles in arch: ramips/mt7620<br />and a device tree file (dts) is needed - see other similar files in target/linux/ramips/dts<br />this describes the hardware (and settings) of the device</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p270486">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">zzztidurvirus</div>
					<div class="post-datetime">
						30 Mar 2015, 12:22					</div>
				</div>
				<div class="post-content content">
					<p>How can I help? I just installed Lubuntu 14.10 32bit, and I&#039;m still too new to Linux terminal commands. Any guides on how to do this?</p><p>~~Lubuntu 14.10 32bit iso clean install + XP dual boot...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p270494">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">zo0ok</div>
					<div class="post-datetime">
						30 Mar 2015, 13:49					</div>
				</div>
				<div class="post-content content">
					<p>I added it to the wiki:<br /><a href="http://wiki.openwrt.org/toh/possible#d-link">http://wiki.openwrt.org/toh/possible#d-link</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p294129">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Sui2015</div>
					<div class="post-datetime">
						1 Oct 2015, 05:49					</div>
				</div>
				<div class="post-content content">
					<p>did u succeed installing it, i have one d-link dwr 116 myself?</p>											<p class="post-edited">(Last edited by <strong>Sui2015</strong> on 2 Oct 2015, 14:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p294572">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">zzztidurvirus</div>
					<div class="post-datetime">
						4 Oct 2015, 06:16					</div>
				</div>
				<div class="post-content content">
					<p>I dont even know how to install it. Ok, when im in the tools &gt; firmware update page, it asks for the update file, which is the stock 1.04 dwr 116 firmware file in .bin file. For OpenWRT, what .bin file should I install on this dwr 116? Maybe I need to crack it open to see the PCB writings? I will upload the PCB images later.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p294588">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">jaceq</div>
					<div class="post-datetime">
						4 Oct 2015, 11:40					</div>
				</div>
				<div class="post-content content">
					<p>First you need to get console access, so basically you need to open it and try to find console connector.<br />Once you have this you can update wiki page about this router with original boot log etc.<br />Next step I&#039;d suggest to try to find as similar router that is supported and take it from there really.<br />It&#039;s not the most trivial but doable, I in the past manage to port OpenWRT to 2 devices (Netgear and D-link)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p304247">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">zzztidurvirus</div>
					<div class="post-datetime">
						19 Dec 2015, 20:03					</div>
				</div>
				<div class="post-content content">
					<p><a href="https://drive.google.com/folderview?id=0B2Yr_VEvulrBX2tBbnF5WEJjcUE&amp;usp=sharing">https://drive.google.com/folderview?id= … sp=sharing</a></p><p>The images are all there. Yes, its the mediatek 7620n chip. now, how to connect to console connector?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363732">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">pietrasagh</div>
					<div class="post-datetime">
						15 Aug 2017, 13:45					</div>
				</div>
				<div class="post-content content">
					<p>This router is very popular in Poland in combination with LTE modems (from Play, Cyfrowy Polsat etc.). <br />I managed to get part of boot dump. UART is at JP1 [TX, GND ,VCC ,NC ,RX] with 57600n8<br />Unfortunately console stops at&nbsp; line </p><div class="quotebox"><blockquote><p>switch register base addr to system register 0xb0000000</p></blockquote></div><p> and I can&#039;t get prompt or any further messages.<br />I can only access JRecovery console (hold reset during boot) but it have very limited commands. <br />Any ideas? <br />I found only one blurry Youtube video where guy got console prompt after boot on DWR-113 so in principle it should work.</p><p>[edit] Nevermind. Bashing randomly CTRL-C during boot helped.</p><p>JRecovery<br /></p><div class="codebox"><pre><code>CDW561DL_003 Jboot B676
JRecovery Version R1.2 2013/07/11 13:29
SPI FLASH: W25Q64BV 8M
.
Reset button had been pressed
.Reset button had been pressed
IP=192.168.123.254 NA=6C:72:20:A5:F4:21
# help
command list...
reboot
info
load &lt;adr&gt;
go &lt;adr&gt;
dm &lt;adr&gt;
wm &lt;adr&gt; &lt;val&gt;
rm &lt;adr&gt;
copy &lt;src&gt; &lt;dst&gt; &lt;size&gt;
ip [ip]
mac [mac]
ping &lt;ip&gt;
areacode</code></pre></div><p>Bootdump<br /></p><div class="codebox"><pre><code>CDW561DL_003 Jboot B676
JRecovery Version R1.2 2013/07/11 13:29
SPI FLASH: W25Q64BV 8M
.
..................
Starting kernel @80000000...

LINUX started...

 THIS IS ASIC
Linux version 2.6.36 (leaf@SI2) (gcc version 4.3.5 (Buildroot 2011.05) ) #14 Tue Jul 22 15:26:49 CST 2014
CMD_LINE:console=ttyS1,57600n8 root=/dev/mtdblock3

 The CPU feqenuce set to 580 MHz
 PCIE: bypass PCIe DLL.
 PCIE: Elastic buffer control: Addr:0x68 -&gt; 0xB4
 disable all power about PCIe
 PCIE: PLL power down for MT7620N
CPU revision is: 00019650 (MIPS 24Kc)
Determined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00002000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00002000
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
Kernel command line: console=ttyS1,57600n8 root=/dev/mtdblock3
PID hash table entries: 128 (order: -3, 512 bytes)
Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
Primary data cache 32kB, 4-way, PIPT, no aliases, linesize 32 bytes
Writing ErrCtl register=0002bb3d
Readback ErrCtl register=0002bb3d
Memory: 28836k/32768k available (2693k kernel code, 3932k reserved, 679k data, 164k init, 0k highmem)
Hierarchical RCU implementation.
  RCU debugfs-based tracing is enabled.
  Verbose stalled-CPUs detection is disabled.
NR_IRQS:128
Console: colour dummy device 80x25
console [ttyS1] enabled
Calibrating delay loop... 386.04 BogoMIPS (lpj=772096)
pid_max: default: 32768 minimum: 301
Mount-cache hash table entries: 512
NET: Registered protocol family 16
bio: create slab &lt;bio-0&gt; at 0
SCSI subsystem initialized
usbcore: registered new interface driver usbfs
usbcore: registered new interface driver hub
usbcore: registered new device driver usb
Switching to clocksource MIPS
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 1024 (order: 1, 8192 bytes)
TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
TCP: Hash tables configured (established 1024 bind 1024)
TCP reno registered
UDP hash table entries: 256 (order: 0, 4096 bytes)
UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
NET: Registered protocol family 1
RT3xxx EHCI/OHCI init.
squashfs: version 4.0 (2009/01/31) Phillip Lougher
msgmni has been set to 56
Block layer SCSI generic (bsg) driver version 0.4 loaded (major 254)
io scheduler noop registered (default)
HDLC line discipline maxframe=4096
N_HDLC line discipline registered.
Ralink gpio driver initialized
Enable Ralink GDMA Controller Module 
GDMA IP Version=3
======================================
   SPI driver, modified by Jason
======================================
&lt;-----
0x60: 0x000080dd
-----
spidrv_major = 217
Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled
serial8250: ttyS0 at MMIO 0x10000500 (irq = 37) is a 16550A
serial8250: ttyS1 at MMIO 0x10000c00 (irq = 12) is a 16550A
brd: module loaded
deice id : ef 40 17 0 0 (40170000)
W25Q64BV(ef 40170000) (8192 Kbytes)
mtd .name = raspi, .size = 0x00800000 (0M) .erasesize = 0x00000008 (0K) .numeraseregions = 4096
Creating 6 MTD partitions on &quot;raspi&quot;:
0x000000000000-0x000000800000 : &quot;Whole&quot;
0x000000000000-0x000000010000 : &quot;Bootloader&quot;
0x000000010000-0x000000150000 : &quot;Kernel&quot;
0x000000150000-0x000000710000 : &quot;RootFS&quot;
0x000000710010-0x0000007f0000 : &quot;UI&quot;
mtd: partition &quot;UI&quot; doesn&#039;t start on an erase block boundary -- force read-only
0x0000007f0000-0x000000800000 : &quot;Config&quot;
rdm_major = 253
SMACCR1 -- : 0x0000000c
SMACCR0 -- : 0x432880e1
Ralink APSoC Ethernet Driver Initilization. v3.0  256 rx/tx descriptors allocated, mtu = 1500!
NAPI enable, Tx Ring = 256, Rx Ring = 256
SMACCR1 -- : 0x0000000c
SMACCR0 -- : 0x43288064
PROC INIT OK!
PPP generic driver version 2.4.2
PPP Deflate Compression module registered
PPP BSD Compression module registered
NET: Registered protocol family 24
ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
rt3xxx-ehci rt3xxx-ehci: Ralink EHCI Host Controller
rt3xxx-ehci rt3xxx-ehci: new USB bus registered, assigned bus number 1
rt3xxx-ehci rt3xxx-ehci: irq 18, io mem 0x101c0000
rt3xxx-ehci rt3xxx-ehci: USB 0.0 started, EHCI 1.00
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 1 port detected
ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
rt3xxx-ohci rt3xxx-ohci: RT3xxx OHCI Controller
rt3xxx-ohci rt3xxx-ohci: new USB bus registered, assigned bus number 2
rt3xxx-ohci rt3xxx-ohci: irq 18, io mem 0x101c1000
hub 2-0:1.0: USB hub found
hub 2-0:1.0: 1 port detected
u32 classifier
Netfilter messages via NETLINK v0.30.
nf_conntrack version 0.5.0 (450 buckets, 1800 max)
xt_time: kernel timezone is -0000
ip_tables: (C) 2000-2006 Netfilter Core Team, Type=Restricted Cone
arp_tables: (C) 2002 David S. Miller
TCP cubic registered
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Mounted root (squashfs filesystem) readonly on device 31:3.
Freeing unused kernel memory: 164k freed
Inter-|   Receive    Raeth v3.0 (  NAPI
  ,SkbRecycle )
     
phy_tx_ring = 0x01f58000, tx_ring = 0xa1f58000

phy_rx_ring0 = 0x01f59000, rx_ring0 = 0xa1f59000
SMACCR1 -- : 0x0000000c
SMACCR0 -- : 0x43288064
  CDMA_CSG_CFG = 81000000
  GDMA1_FWD_CFG = 20710000
                              |  Transmit
 face |bytes    packets errs drop fifo frame compressed multicast|bytes    packets errs drop fifo colls carrier compressed
    lo:       0       0    0    0    0     0          0         0        0       0    0    0    0     0       0          0
  eth2:       0       0    0    0    0     0          0         0        0       0    0    0    0     0       0          0
 flash_open: flash_fd=3
Mount D Section.
mount: /dev/mtdblock4 is write-protected, mounting read-only
 flash_open: flash_fd=10
switch register base addr to system register 0xb0000000</code></pre></div>											<p class="post-edited">(Last edited by <strong>pietrasagh</strong> on 15 Aug 2017, 14:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p368557">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">xabolcs</div>
					<div class="post-datetime">
						21 Nov 2017, 12:22					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pietrasagh wrote:</cite><blockquote><p>This router is very popular in Poland in combination with LTE modems (from Play, Cyfrowy Polsat etc.). <br />I managed to get part of boot dump. UART is at JP1 [TX, GND ,VCC ,NC ,RX] with 57600n8</p></blockquote></div><p>Thanks for the dump.</p><p>Mine has <strong>25Q64FVSIG</strong> flash on it&#039;s board which is 8M too.</p><p>It has some random ports open, but it has a <strong>telnetd</strong> on the standard 23 port. The username is <strong>root</strong>, but the <strong>amittima</strong> password doesn&#039;t work! <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /><br />The extracted rootfs has the hash for <strong>amittima</strong>, but it really doesn&#039;t work. <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>											<p class="post-edited">(Last edited by <strong>xabolcs</strong> on 22 Nov 2017, 01:13)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p368607">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">xabolcs</div>
					<div class="post-datetime">
						22 Nov 2017, 03:41					</div>
				</div>
				<div class="post-content content">
					<p>Hmm.</p><p>The previous post is for the latest firmware:<br /></p><div class="codebox"><pre><code>Current Firmware Version :     V1.06(EU)    
Current Firmware Date :     2015/10/01</code></pre></div><br /><p>After downgrading to <strong>V1.02</strong> I managed to log in through <strong>port 2300</strong> with <strong>amittima</strong>.<br /></p><div class="codebox"><pre><code>Current Firmware Version :     V1.02
Current Firmware Date :     2013/10/30</code></pre></div><p>I had to reset my router to factory settings after firmware downgrade.</p><p>My DWR-116 is rev A2.</p><p>Some system information (with a plugged in Huawei E3372-153h USB Stick):</p><p><strong>dmesg</strong><br /></p><div class="codebox"><pre><code># dmesg
Linux version 2.6.36 (wayne@SI) (gcc version 4.3.5 (Buildroot 2011.05) ) #13 Mon Oct 28 10:14:07 CST 2013
CMD_LINE:console=ttyS1,57600n8 root=/dev/mtdblock3

 The CPU feqenuce set to 580 MHz
 PCIE: bypass PCIe DLL.
 PCIE: Elastic buffer control: Addr:0x68 -&gt; 0xB4
 disable all power about PCIe
 PCIE: PLL power down for MT7620N
CPU revision is: 00019650 (MIPS 24Kc)
Determined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00002000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00002000
On node 0 totalpages: 8192
free_area_init_node: node 0, pgdat 80322380, node_mem_map 81000000
  Normal zone: 64 pages used for memmap
  Normal zone: 0 pages reserved
  Normal zone: 8128 pages, LIFO batch:0
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
Kernel command line: console=ttyS1,57600n8 root=/dev/mtdblock3
PID hash table entries: 128 (order: -3, 512 bytes)
Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
Primary data cache 32kB, 4-way, PIPT, no aliases, linesize 32 bytes
Writing ErrCtl register=00000000
Readback ErrCtl register=00000000
Memory: 29012k/32768k available (2563k kernel code, 3756k reserved, 646k data, 156k init, 0k highmem)
Hierarchical RCU implementation.
        RCU debugfs-based tracing is enabled.
        Verbose stalled-CPUs detection is disabled.
NR_IRQS:128
Console: colour dummy device 80x25
console [ttyS1] enabled
Calibrating delay loop... 386.04 BogoMIPS (lpj=772096)
pid_max: default: 32768 minimum: 301
Mount-cache hash table entries: 512
NET: Registered protocol family 16
bio: create slab &lt;bio-0&gt; at 0
usbcore: registered new interface driver usbfs
usbcore: registered new interface driver hub
usbcore: registered new device driver usb
Switching to clocksource MIPS
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 1024 (order: 1, 8192 bytes)
TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
TCP: Hash tables configured (established 1024 bind 1024)
TCP reno registered
UDP hash table entries: 256 (order: 0, 4096 bytes)
UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
NET: Registered protocol family 1
RT3xxx EHCI/OHCI init.
squashfs: version 4.0 (2009/01/31) Phillip Lougher
msgmni has been set to 56
Block layer SCSI generic (bsg) driver version 0.4 loaded (major 254)
io scheduler noop registered (default)
HDLC line discipline maxframe=4096
N_HDLC line discipline registered.
Ralink gpio driver initialized
Enable Ralink GDMA Controller Module
GDMA IP Version=3
spidrv_major = 217
Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled
serial8250: ttyS0 at MMIO 0x10000500 (irq = 37) is a 16550A
serial8250: ttyS1 at MMIO 0x10000c00 (irq = 12) is a 16550A
brd: module loaded
deice id : ef 40 17 0 0 (40170000)
W25Q64BV(ef 40170000) (8192 Kbytes)
mtd .name = raspi, .size = 0x00800000 (0M) .erasesize = 0x00000008 (0K) .numeraseregions = 4096
Creating 6 MTD partitions on &quot;raspi&quot;:
0x000000000000-0x000000800000 : &quot;Whole&quot;
0x000000000000-0x000000010000 : &quot;Bootloader&quot;
0x000000010000-0x000000150000 : &quot;Kernel&quot;
0x000000150000-0x000000710000 : &quot;RootFS&quot;
0x000000710010-0x0000007f0000 : &quot;UI&quot;
mtd: partition &quot;UI&quot; doesn&#039;t start on an erase block boundary -- force read-only
0x0000007f0000-0x000000800000 : &quot;Config&quot;
rdm_major = 253
SMACCR1 -- : 0x0000000c
SMACCR0 -- : 0x432880e1
Ralink APSoC Ethernet Driver Initilization. v3.0  256 rx/tx descriptors allocated, mtu = 1500!
NAPI enable, Tx Ring = 256, Rx Ring = 256
SMACCR1 -- : 0x0000000c
SMACCR0 -- : 0x432880e4
PROC INIT OK!
PPP generic driver version 2.4.2
PPP Deflate Compression module registered
PPP BSD Compression module registered
NET: Registered protocol family 24
ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
rt3xxx-ehci rt3xxx-ehci: Ralink EHCI Host Controller
rt3xxx-ehci rt3xxx-ehci: new USB bus registered, assigned bus number 1
rt3xxx-ehci rt3xxx-ehci: irq 18, io mem 0x101c0000
rt3xxx-ehci rt3xxx-ehci: USB 0.0 started, EHCI 1.00
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 1 port detected
ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
rt3xxx-ohci rt3xxx-ohci: RT3xxx OHCI Controller
rt3xxx-ohci rt3xxx-ohci: new USB bus registered, assigned bus number 2
rt3xxx-ohci rt3xxx-ohci: irq 18, io mem 0x101c1000
hub 2-0:1.0: USB hub found
hub 2-0:1.0: 1 port detected
u32 classifier
Netfilter messages via NETLINK v0.30.
nf_conntrack version 0.5.0 (453 buckets, 1812 max)
ip_tables: (C) 2000-2006 Netfilter Core Team, Type=Restricted Cone
arp_tables: (C) 2002 David S. Miller
TCP cubic registered
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Mounted root (squashfs filesystem) readonly on device 31:3.
Freeing unused kernel memory: 156k freed
Algorithmics/MIPS FPU Emulator v1.5
Raeth v3.0 (NAPI
,SkbRecycle)

phy_tx_ring = 0x01f4a000, tx_ring = 0xa1f4a000

phy_rx_ring0 = 0x01f4b000, rx_ring0 = 0xa1f4b000
SMACCR1 -- : 0x0000000c
SMACCR0 -- : 0x432880e4
ESW: Link Status Changed - Port3 Link UP
CDMA_CSG_CFG = 81000000
GDMA1_FWD_CFG = 20710000
switch register base addr to system register 0xb0000000
write offset 0x60, value 0x16e1
device eth2 entered promiscuous mode
device eth2.1 entered promiscuous mode
phy 4, reg 0, val 0x800
phy 3, reg 0, val 0x800
ESW: Link Status Changed - Port3 Link Down
phy 2, reg 0, val 0x800
phy 1, reg 0, val 0x800
phy 0, reg 0, val 0x800
phy 4, reg 0, val 0x3300
phy 3, reg 0, val 0x3300
phy 2, reg 0, val 0x3300
phy 1, reg 0, val 0x3300
phy 0, reg 0, val 0x3300
br0: port 1(eth2.1) entering forwarding state
br0: port 1(eth2.1) entering forwarding state
ESW: Link Status Changed - Port4 Link UP
ESW: Link Status Changed - Port3 Link UP
ramtd_erase: addr:7f0000 len:0
ramtd_write: to:7f0000 len:10
ramtd_write: to:7f0010 len:4b4
ramtd_write: to:7f0000 len:1
hw_nat: module license &#039;Proprietary&#039; taints kernel.
Disabling lock debugging due to kernel taint
Length of MAC:6
 mac:de:ad:be:ef:de:ad:
----
ESW: Link Status Changed - Port3 Link Down
ESW: Link Status Changed - Port3 Link UP
0x1300 = 00064380
Ralink APSoC Hardware Watchdog Timer
Started WatchDog Timer.
Started WatchDog Timer. LoadVlaue: 36600 sysclk: 145000000 TIMEOUT: 60
device ra0 entered promiscuous mode
br0: port 2(ra0) entering forwarding state
br0: port 2(ra0) entering forwarding state
usb 1-1: new high speed USB device using rt3xxx-ehci and address 2
usb 1-1: USB disconnect, address 2
usb 1-1: new high speed USB device using rt3xxx-ehci and address 3
usbcore: registered new interface driver usbserial
USB Serial support registered for generic
usbcore: registered new interface driver usbserial_generic
usbserial: USB Serial Driver core
USB Serial support registered for GSM modem (1-port)
option 1-1:1.1: GSM modem (1-port) converter detected
usb 1-1: GSM modem (1-port) converter now attached to ttyUSB0
usbcore: registered new interface driver option
option: v0.7.2:USB Driver for GSM modems</code></pre></div><br /><p><strong>cpuinfo</strong><br /></p><div class="codebox"><pre><code># cat /proc/cpuinfo
system type             : Ralink SoC
processor               : 0
cpu model               : MIPS 24Kc V5.0
BogoMIPS                : 386.04
wait instruction        : yes
microsecond timers      : yes
tlb_entries             : 32
extra interrupt vector  : yes
hardware watchpoint     : yes, count: 4, address/irw mask: [0x0ffc, 0x0ffc, 0x0ffb, 0x0ffb]
ASEs implemented        : mips16 dsp
shadow register sets    : 1
core                    : 0
VCED exceptions         : not available
VCEI exceptions         : not available</code></pre></div><br /><p><strong>meminfo</strong><br /></p><div class="codebox"><pre><code># cat /proc/meminfo
MemTotal:          29168 kB
MemFree:            5432 kB
Buffers:            2484 kB
Cached:             8952 kB
SwapCached:            0 kB
Active:             5680 kB
Inactive:           7648 kB
Active(anon):       2528 kB
Inactive(anon):     1648 kB
Active(file):       3152 kB
Inactive(file):     6000 kB
Unevictable:           0 kB
Mlocked:               0 kB
SwapTotal:             0 kB
SwapFree:              0 kB
Dirty:                 0 kB
Writeback:             0 kB
AnonPages:          1912 kB
Mapped:             1444 kB
Shmem:              2284 kB
Slab:               6604 kB
SReclaimable:        656 kB
SUnreclaim:         5948 kB
KernelStack:         456 kB
PageTables:          368 kB
NFS_Unstable:          0 kB
Bounce:                0 kB
WritebackTmp:          0 kB
CommitLimit:       14584 kB
Committed_AS:       9132 kB
VmallocTotal:    1048372 kB
VmallocUsed:        2164 kB
VmallocChunk:    1038388 kB</code></pre></div><br /><p><strong>interrupts</strong><br /></p><div class="codebox"><pre><code># cat /proc/interrupts
           CPU0
  3:      20830          Ralink  eth2
  4:      78139          Ralink  ra0
  5:     311061          Ralink  timer
  6:          0          Ralink  ralink_gpio
  7:          0          Ralink  Ralink_DMA
 12:       4016          Ralink  serial
 17:          6          Ralink  Ralink_ESW
 18:        629          Ralink  ehci_hcd:usb1, ohci_hcd:usb2

ERR:          0</code></pre></div><br /><p><strong>partitions</strong><br /></p><div class="codebox"><pre><code># cat /proc/partitions
major minor  #blocks  name

  31        0       8192 mtdblock0
  31        1         64 mtdblock1
  31        2       1280 mtdblock2
  31        3       5888 mtdblock3
  31        4        895 mtdblock4
  31        5         64 mtdblock5</code></pre></div><br /><p><strong>mtd</strong><br /></p><div class="codebox"><pre><code># cat /proc/mtd
dev:    size   erasesize  name
mtd0: 00800000 00001000 &quot;Whole&quot;
mtd1: 00010000 00001000 &quot;Bootloader&quot;
mtd2: 00140000 00001000 &quot;Kernel&quot;
mtd3: 005c0000 00001000 &quot;RootFS&quot;
mtd4: 000dfff0 00001000 &quot;UI&quot;
mtd5: 00010000 00001000 &quot;Config&quot;</code></pre></div><br /><p><strong>iomem</strong><br /></p><div class="codebox"><pre><code># cat /proc/iomem
00000000-01ffffff : System RAM
  00000000-00280f63 : Kernel code
  00280f64-003229ff : Kernel data
101c0000-101c0fff : rt3xxx-ehci
  101c0000-101c0fff : ehci_hcd
101c1000-101c1fff : rt3xxx-ohci
  101c1000-101c1fff : ohci_hcd</code></pre></div><br /><p><strong>devices</strong><br /></p><div class="codebox"><pre><code># cat /proc/bus/usb/devices

T:  Bus=02 Lev=00 Prnt=00 Port=00 Cnt=00 Dev#=  1 Spd=12  MxCh= 1
B:  Alloc=  0/900 us ( 0%), #Int=  0, #Iso=  0
D:  Ver= 1.10 Cls=09(hub  ) Sub=00 Prot=00 MxPS=64 #Cfgs=  1
P:  Vendor=1d6b ProdID=0001 Rev= 2.06
S:  Manufacturer=Linux 2.6.36 ohci_hcd
S:  Product=RT3xxx OHCI Controller
S:  SerialNumber=rt3xxx-ohci
C:* #Ifs= 1 Cfg#= 1 Atr=e0 MxPwr=  0mA
I:* If#= 0 Alt= 0 #EPs= 1 Cls=09(hub  ) Sub=00 Prot=00 Driver=hub
E:  Ad=81(I) Atr=03(Int.) MxPS=   2 Ivl=255ms

T:  Bus=01 Lev=00 Prnt=00 Port=00 Cnt=00 Dev#=  1 Spd=480 MxCh= 1
B:  Alloc=  0/800 us ( 0%), #Int=  1, #Iso=  0
D:  Ver= 2.00 Cls=09(hub  ) Sub=00 Prot=00 MxPS=64 #Cfgs=  1
P:  Vendor=1d6b ProdID=0002 Rev= 2.06
S:  Manufacturer=Linux 2.6.36 ehci_hcd
S:  Product=Ralink EHCI Host Controller
S:  SerialNumber=rt3xxx
C:* #Ifs= 1 Cfg#= 1 Atr=e0 MxPwr=  0mA
I:* If#= 0 Alt= 0 #EPs= 1 Cls=09(hub  ) Sub=00 Prot=00 Driver=hub
E:  Ad=81(I) Atr=03(Int.) MxPS=   4 Ivl=256ms

T:  Bus=01 Lev=01 Prnt=01 Port=00 Cnt=01 Dev#=  3 Spd=480 MxCh= 0
D:  Ver= 2.10 Cls=00(&gt;ifc ) Sub=00 Prot=00 MxPS=64 #Cfgs=  1
P:  Vendor=12d1 ProdID=1506 Rev= 1.02
S:  Manufacturer=HUAWEI_MOBILE
S:  Product=HUAWEI_MOBILE
C:* #Ifs= 5 Cfg#= 1 Atr=80 MxPwr=  2mA
I:* If#= 0 Alt= 0 #EPs= 2 Cls=ff(vend.) Sub=02 Prot=12 Driver=(none)
E:  Ad=82(I) Atr=02(Bulk) MxPS= 512 Ivl=0ms
E:  Ad=02(O) Atr=02(Bulk) MxPS= 512 Ivl=0ms
I:* If#= 1 Alt= 0 #EPs= 3 Cls=ff(vend.) Sub=02 Prot=01 Driver=option
E:  Ad=84(I) Atr=03(Int.) MxPS=  10 Ivl=32ms
E:  Ad=83(I) Atr=02(Bulk) MxPS= 512 Ivl=0ms
E:  Ad=03(O) Atr=02(Bulk) MxPS= 512 Ivl=0ms
I:* If#= 2 Alt= 0 #EPs= 1 Cls=ff(vend.) Sub=02 Prot=16 Driver=(none)
E:  Ad=86(I) Atr=03(Int.) MxPS=  16 Ivl=2ms
I:  If#= 2 Alt= 1 #EPs= 3 Cls=ff(vend.) Sub=02 Prot=16 Driver=(none)
E:  Ad=86(I) Atr=03(Int.) MxPS=  16 Ivl=2ms
E:  Ad=85(I) Atr=02(Bulk) MxPS= 512 Ivl=0ms
E:  Ad=04(O) Atr=02(Bulk) MxPS= 512 Ivl=0ms
I:* If#= 3 Alt= 0 #EPs= 2 Cls=08(stor.) Sub=06 Prot=50 Driver=(none)
E:  Ad=87(I) Atr=02(Bulk) MxPS= 512 Ivl=0ms
E:  Ad=05(O) Atr=02(Bulk) MxPS= 512 Ivl=125us
I:* If#= 4 Alt= 0 #EPs= 2 Cls=08(stor.) Sub=06 Prot=50 Driver=(none)
E:  Ad=88(I) Atr=02(Bulk) MxPS= 512 Ivl=0ms
E:  Ad=06(O) Atr=02(Bulk) MxPS= 512 Ivl=125us</code></pre></div><br /><br /><p><strong>gpiodump</strong><br /></p><div class="codebox"><pre><code># ./gpiodump-mipsel-static
GPIOMODE = 0x000017e1
  SUTIF_SHARE_MODE     = 0, disabled       [default]
  WDT_RST_MODE         = 0, WDT_RST_N      [default]
  PA_G_GPIO_MODE       = 0, normal
  ND_SD_GPIO_MODE      = 0, NAND
  PERST_GPIO_MODE      = 0, PERST_N
  EPHY_LED_GPIO_MODE   = 0, normal         [default]
  WLED_GPIO_MODE       = 0, normal
  SPI_REFCLK0_MODE     = 1, GPIO           [default]
  SPI_GPIO_MODE        = 0, normal         [default]
  RGMII2_GPIO_MODE     = 1, GPIO           [default]
  RGMII1_GPIO_MODE     = 1, GPIO           [default]
  MDIO_GPIO_MODE       = 3, reserved
  UARTL_GPIO_MODE      = 1, GPIO           [default]
  UARTF_SHARE_MODE     = 0, UARTF
  I2C_GPIO_MODE        = 1, GPIO           [default]</code></pre></div><br /><p><strong>ifconfig</strong><br /></p><div class="codebox"><pre><code># ifconfig -a
br0       Link encap:Ethernet  HWaddr DE:AD:BE:EF:DE:AD
          inet addr:192.168.0.1  Bcast:192.168.0.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:5143 errors:0 dropped:0 overruns:0 frame:0
          TX packets:4643 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:579100 (565.5 KiB)  TX bytes:1410050 (1.3 MiB)

eth2      Link encap:Ethernet  HWaddr 00:0C:43:DE:AD:BE
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:8808 errors:0 dropped:0 overruns:0 frame:0
          TX packets:7767 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:1654464 (1.5 MiB)  TX bytes:1886982 (1.7 MiB)
          Interrupt:3

eth2.1    Link encap:Ethernet  HWaddr DE:AD:BE:EF:DE:AD
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:5143 errors:0 dropped:0 overruns:0 frame:0
          TX packets:4614 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:599672 (585.6 KiB)  TX bytes:1413972 (1.3 MiB)

eth2.2    Link encap:Ethernet  HWaddr DE:AD:BE:EF:DE:AC
          inet addr:xx.xx.xx.xx  Bcast:xx.xx.xx.xx  Mask:xx.xx.xx.xx
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:3663 errors:0 dropped:0 overruns:0 frame:0
          TX packets:3153 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:930290 (908.4 KiB)  TX bytes:473010 (461.9 KiB)

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:3 errors:0 dropped:0 overruns:0 frame:0
          TX packets:3 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:180 (180.0 B)  TX bytes:180 (180.0 B)

ra0       Link encap:Ethernet  HWaddr DE:AD:BE:EF:DE:AD
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)
          Interrupt:4

wds0      Link encap:Ethernet  HWaddr DE:AD:BE:EF:DE:AD
          BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

wds1      Link encap:Ethernet  HWaddr DE:AD:BE:EF:DE:AD
          BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

wds2      Link encap:Ethernet  HWaddr DE:AD:BE:EF:DE:AD
          BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

wds3      Link encap:Ethernet  HWaddr DE:AD:BE:EF:DE:AD
          BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

#</code></pre></div><br /><p><strong>brctl</strong><br /></p><div class="codebox"><pre><code># brctl show
bridge name     bridge id               STP enabled     interfaces
br0             8000.deadbeefdead       no              eth2.1
                                                        ra0</code></pre></div>											<p class="post-edited">(Last edited by <strong>xabolcs</strong> on 22 Nov 2017, 23:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370804">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">xabolcs</div>
					<div class="post-datetime">
						12 Jan 2018, 01:03					</div>
				</div>
				<div class="post-content content">
					<p>Now I got a <strong>H/W Ver.: A1</strong> model too, running the same <strong>V1.02</strong> firmware. It&#039;s dmesg is slightly different, but nothing special.</p><br /><p><strong>dmesg</strong><br /></p><div class="codebox"><pre><code># dmesg
Linux version 2.6.36 (wayne@SI) (gcc version 4.3.5 (Buildroot 2011.05) ) #13 Mon Oct 28 10:14:07 CST 2013
CMD_LINE:console=ttyS1,57600n8 root=/dev/mtdblock3

 The CPU feqenuce set to 580 MHz
 PCIE: bypass PCIe DLL.
 PCIE: Elastic buffer control: Addr:0x68 -&gt; 0xB4
 disable all power about PCIe
 PCIE: PLL power down for MT7620N
CPU revision is: 00019650 (MIPS 24Kc)
Determined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00002000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00002000
On node 0 totalpages: 8192
free_area_init_node: node 0, pgdat 80322380, node_mem_map 81000000
  Normal zone: 64 pages used for memmap
  Normal zone: 0 pages reserved
  Normal zone: 8128 pages, LIFO batch:0
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
Kernel command line: console=ttyS1,57600n8 root=/dev/mtdblock3
PID hash table entries: 128 (order: -3, 512 bytes)
Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
Primary data cache 32kB, 4-way, PIPT, no aliases, linesize 32 bytes
Writing ErrCtl register=0003bac4
Readback ErrCtl register=0003bac4
Memory: 29012k/32768k available (2563k kernel code, 3756k reserved, 646k data, 156k init, 0k highmem)
Hierarchical RCU implementation.
        RCU debugfs-based tracing is enabled.
        Verbose stalled-CPUs detection is disabled.
NR_IRQS:128
Console: colour dummy device 80x25
console [ttyS1] enabled
Calibrating delay loop... 386.04 BogoMIPS (lpj=772096)
pid_max: default: 32768 minimum: 301
Mount-cache hash table entries: 512
NET: Registered protocol family 16
bio: create slab &lt;bio-0&gt; at 0
usbcore: registered new interface driver usbfs
usbcore: registered new interface driver hub
usbcore: registered new device driver usb
Switching to clocksource MIPS
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 1024 (order: 1, 8192 bytes)
TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
TCP: Hash tables configured (established 1024 bind 1024)
TCP reno registered
UDP hash table entries: 256 (order: 0, 4096 bytes)
UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
NET: Registered protocol family 1
RT3xxx EHCI/OHCI init.
squashfs: version 4.0 (2009/01/31) Phillip Lougher
msgmni has been set to 56
Block layer SCSI generic (bsg) driver version 0.4 loaded (major 254)
io scheduler noop registered (default)
HDLC line discipline maxframe=4096
N_HDLC line discipline registered.
Ralink gpio driver initialized
Enable Ralink GDMA Controller Module
GDMA IP Version=3
spidrv_major = 217
Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled
serial8250: ttyS0 at MMIO 0x10000500 (irq = 37) is a 16550A
serial8250: ttyS1 at MMIO 0x10000c00 (irq = 12) is a 16550A
brd: module loaded
deice id : c2 20 17 c2 20 (2017c220)
MX25L6405D(c2 2017c220) (8192 Kbytes)
mtd .name = raspi, .size = 0x00800000 (0M) .erasesize = 0x00000008 (0K) .numeraseregions = 4096
Creating 6 MTD partitions on &quot;raspi&quot;:
0x000000000000-0x000000800000 : &quot;Whole&quot;
0x000000000000-0x000000010000 : &quot;Bootloader&quot;
0x000000010000-0x000000150000 : &quot;Kernel&quot;
0x000000150000-0x000000710000 : &quot;RootFS&quot;
0x000000710010-0x0000007f0000 : &quot;UI&quot;
mtd: partition &quot;UI&quot; doesn&#039;t start on an erase block boundary -- force read-only
0x0000007f0000-0x000000800000 : &quot;Config&quot;
rdm_major = 253
SMACCR1 -- : 0x0000000c
SMACCR0 -- : 0x432880e1
Ralink APSoC Ethernet Driver Initilization. v3.0  256 rx/tx descriptors allocated, mtu = 1500!
NAPI enable, Tx Ring = 256, Rx Ring = 256
SMACCR1 -- : 0x0000000c
SMACCR0 -- : 0x432880e4
PROC INIT OK!
PPP generic driver version 2.4.2
PPP Deflate Compression module registered
PPP BSD Compression module registered
NET: Registered protocol family 24
ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
rt3xxx-ehci rt3xxx-ehci: Ralink EHCI Host Controller
rt3xxx-ehci rt3xxx-ehci: new USB bus registered, assigned bus number 1
rt3xxx-ehci rt3xxx-ehci: irq 18, io mem 0x101c0000
rt3xxx-ehci rt3xxx-ehci: USB 0.0 started, EHCI 1.00
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 1 port detected
ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
rt3xxx-ohci rt3xxx-ohci: RT3xxx OHCI Controller
rt3xxx-ohci rt3xxx-ohci: new USB bus registered, assigned bus number 2
rt3xxx-ohci rt3xxx-ohci: irq 18, io mem 0x101c1000
hub 2-0:1.0: USB hub found
hub 2-0:1.0: 1 port detected
u32 classifier
Netfilter messages via NETLINK v0.30.
nf_conntrack version 0.5.0 (453 buckets, 1812 max)
ip_tables: (C) 2000-2006 Netfilter Core Team, Type=Restricted Cone
arp_tables: (C) 2002 David S. Miller
TCP cubic registered
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Mounted root (squashfs filesystem) readonly on device 31:3.
Freeing unused kernel memory: 156k freed
Algorithmics/MIPS FPU Emulator v1.5
Raeth v3.0 (NAPI
,SkbRecycle)

phy_tx_ring = 0x01f48000, tx_ring = 0xa1f48000

phy_rx_ring0 = 0x01f49000, rx_ring0 = 0xa1f49000
SMACCR1 -- : 0x0000000c
SMACCR0 -- : 0x432880e4
ESW: Link Status Changed - Port2 Link UP
CDMA_CSG_CFG = 81000000
GDMA1_FWD_CFG = 20710000
switch register base addr to system register 0xb0000000
write offset 0x60, value 0x16e1
ramtd_erase: addr:7f0000 len:0
ramtd_write: to:7f0000 len:10
ramtd_write: to:7f0010 len:33e
ramtd_write: to:7f0000 len:1
device eth2 entered promiscuous mode
device eth2.1 entered promiscuous mode
phy 4, reg 0, val 0x800
phy 3, reg 0, val 0x800
phy 2, reg 0, val 0x800
ESW: Link Status Changed - Port2 Link Down
phy 1, reg 0, val 0x800
phy 0, reg 0, val 0x800
phy 4, reg 0, val 0x3300
phy 3, reg 0, val 0x3300
phy 2, reg 0, val 0x3300
phy 1, reg 0, val 0x3300
phy 0, reg 0, val 0x3300
br0: port 1(eth2.1) entering forwarding state
br0: port 1(eth2.1) entering forwarding state
ESW: Link Status Changed - Port2 Link UP
ramtd_erase: addr:7f0000 len:0
ramtd_write: to:7f0000 len:10
ramtd_write: to:7f0010 len:44a
ramtd_write: to:7f0000 len:1
hw_nat: module license &#039;Proprietary&#039; taints kernel.
Disabling lock debugging due to kernel taint
ramtd_erase: addr:7f0000 len:0
ramtd_write: to:7f0000 len:10
ramtd_write: to:7f0010 len:45e
ramtd_write: to:7f0000 len:1
Length of MAC:6
 mac:de:ad:be:ef:de:ad:
----
ramtd_erase: addr:7f0000 len:0
ramtd_write: to:7f0000 len:10
ramtd_write: to:7f0010 len:460
ramtd_write: to:7f0000 len:1
ESW: Link Status Changed - Port2 Link Down
ESW: Link Status Changed - Port2 Link UP
0x1300 = 00064380
Ralink APSoC Hardware Watchdog Timer
Started WatchDog Timer.
Started WatchDog Timer. LoadVlaue: 36600 sysclk: 145000000 TIMEOUT: 60
device ra0 entered promiscuous mode
br0: port 2(ra0) entering forwarding state
br0: port 2(ra0) entering forwarding state
ramtd_erase: addr:7f0000 len:0
ramtd_write: to:7f0000 len:10
ramtd_write: to:7f0010 len:474
ramtd_write: to:7f0000 len:1</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p371780">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">xabolcs</div>
					<div class="post-datetime">
						6 Feb 2018, 16:49					</div>
				</div>
				<div class="post-content content">
					<p>FYI.</p><p>If anyone have problems with the jboot web gui (time out, connection reset, failing update): use the curl command below and try to disable antivirus / firewall if you are on Windows!</p><div class="codebox"><pre><code>$ curl -F FN=@20131030_D-link_DWR-116_V1.02b03.bin hxxp://192.168.123.254/upg</code></pre></div><br /><p>The <strong>20131030_D-link_DWR-116_V1.02b03.bin</strong> could be any official D-Link firmware.</p>											<p class="post-edited">(Last edited by <strong>xabolcs</strong> on 8 Feb 2018, 08:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p371784">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">chkdsk</div>
					<div class="post-datetime">
						6 Feb 2018, 19:16					</div>
				</div>
				<div class="post-content content">
					<p>Xabolcs, thanks for help me. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Little info for rest of people:</p><p>1. The known versions of DWR-116 is: A1, A2 EU and A2 PL. I&#039;am looking for another versions. If somenone have other version, please let me know.<br />2. Here is PR about A1 version:<br />htt*s://github.com/openwrt/openwrt/pull/675 (I can&#039;t add links)<br />Please install and report if it works on A1.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p372097">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">chkdsk</div>
					<div class="post-datetime">
						13 Feb 2018, 08:19					</div>
				</div>
				<div class="post-content content">
					<p>Little update:</p><p>I made binaries, so everyone can test if he/she want.</p><p>A1:<br /><a href="https://www.dropbox.com/s/vx7mrzmm2rhmqj0/openwrt-ramips-mt7620-dlink_dwr-116-a1-squashfs-factory.bin?dl=0">https://www.dropbox.com/s/vx7mrzmm2rhmq … y.bin?dl=0</a><br /><a href="https://www.dropbox.com/s/lnp60kozwqv07p2/openwrt-ramips-mt7620-dlink_dwr-116-a1-squashfs-sysupgrade.bin?dl=0">https://www.dropbox.com/s/lnp60kozwqv07 … e.bin?dl=0</a></p><p>A2:<br />EU:<br /><a href="https://www.dropbox.com/s/hq1a5zcht0nzttc/openwrt-ramips-mt7620-dlink_dwr-116-a2eu-squashfs-factory.bin?dl=0">https://www.dropbox.com/s/hq1a5zcht0nzt … y.bin?dl=0</a><br /><a href="https://www.dropbox.com/s/lt17py8094eysfo/openwrt-ramips-mt7620-dlink_dwr-116-a2eu-squashfs-sysupgrade.bin?dl=0">https://www.dropbox.com/s/lt17py8094eys … e.bin?dl=0</a><br />PL:<br /><a href="https://www.dropbox.com/s/uqfhyhpc30it09c/openwrt-ramips-mt7620-dlink_dwr-116-a2pl-squashfs-factory.bin?dl=0">https://www.dropbox.com/s/uqfhyhpc30it0 … y.bin?dl=0</a><br /><a href="https://www.dropbox.com/s/dxucft1hq1yjyii/openwrt-ramips-mt7620-dlink_dwr-116-a2pl-squashfs-sysupgrade.bin?dl=0">https://www.dropbox.com/s/dxucft1hq1yjy … e.bin?dl=0</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p373286">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">xabolcs</div>
					<div class="post-datetime">
						5 Mar 2018, 18:29					</div>
				</div>
				<div class="post-content content">
					<p>I found the switching register line below in <strong>/usr/bin/switch</strong> and in <strong>linux/src/drivers/net/rt_rdm/rt_rdm.o.g</strong> from the GPL package <strong>DWR-116_GPL_V1.00(EU)b02_20131101_v1</strong>.</p><div class="codebox"><pre><code>switch register base addr to system register 0xb0000000</code></pre></div><p>That <strong>rt_rdm</strong> can be found in Padavan&#039;s <a href="http://bitbucket.org/padavan/rt-n56u/src/e58fdd76639c/trunk/linux-3.4.x/drivers/net/rt_rdm/">rt-n56u</a>.</p><br /><p>There is another tool: <strong>/usr/bin/reg</strong>:<br /></p><div class="codebox"><pre><code># reg
syntax: reg [method(r/w/s/d/f)] [offset(Hex)] [value(hex, w only)]
read example : reg r 18
write example : reg w 18 12345678
dump example : reg d 18
dump example [FPGA emulation]: reg f 18
modify example : reg m [Offset:Hex] [Data:Hex] [StartBit:Decimal] [DataLen:Decimal]
To use system register: reg s 0
To use wireless register: reg s 1
To use other base address offset: reg s [offset]
for example: reg s 0xa0500000
for example: reg m c8 1 31 1
To show current base address offset: reg s 2</code></pre></div><p>If I write &quot;reg s 0&quot; then a message is appearing in the dmesg:<br /></p><div class="codebox"><pre><code>switch register base addr to system register 0xb0000000</code></pre></div><p>Therefore I did a search for &quot;reg s 0&quot;, and ...<br /></p><div class="codebox"><pre><code># grep -ir &quot;reg s 0&quot; /usr/sbin
/usr/sbin/commander:reg s 0; reg w 60 0x16c1
/usr/sbin/commander:reg s 0; reg w 60 0x16e1</code></pre></div><div class="codebox"><pre><code># grep -ir &quot;reg s 0&quot; /usr/bin
/usr/bin/AGPServer:reg s 0; reg w 60 0x37e1
/usr/bin/reg:To use system register: reg s 0
/usr/bin/reg:for example: reg s 0xa0500000</code></pre></div><p>In the original dmesg the message after that line is (which can&#039;t be seen through serial console as it is now disabled):<br /></p><div class="codebox"><pre><code>write offset 0x60, value 0x16e1</code></pre></div><p>So I searched again for &quot;reg&quot;, but for now &quot;reg w 60&quot;<br /></p><div class="codebox"><pre><code># grep -ir &quot;reg w 60&quot; /usr/
/usr/bin/AGPServer:reg s 0; reg w 60 0x37e1
/usr/sbin/commander:reg s 0; reg w 60 0x16c1
/usr/sbin/commander:reg s 0; reg w 60 0x16e1</code></pre></div><p>So the <strong>/usr/sbin/commander</strong> disables the UART.</p><p>Interestingly that register at offset 60 has other value:<br /></p><div class="codebox"><pre><code># reg r 60
0x17e1</code></pre></div>											<p class="post-edited">(Last edited by <strong>xabolcs</strong> on 5 Mar 2018, 22:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p373312">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">xabolcs</div>
					<div class="post-datetime">
						5 Mar 2018, 23:03					</div>
				</div>
				<div class="post-content content">
					<p>There is&nbsp; an svn.list file, full of private svn repository links to AMIT.</p><p><strong>/usr/etc/svn.list</strong><br /></p><div class="codebox"><pre><code># cat /usr/etc/svn.list
svn://svn.atc.amit.com.tw/Mascot/RT305XL/branches/SI_trunk -r 12312
svn://svn.atc.amit.com.tw/Gobi/jboot/trunk -r 676
svn://svn.atc.amit.com.tw/Sahara/Ralink_SDK4.0.0.0/trunk/linux-2.6.36.x -r 288
svn://svn.atc.amit.com.tw/Sahara/OasisHeader/trunk -r 1797
svn://svn.atc.amit.com.tw/Gobi/CornerHeader/trunk -r 28
svn://svn.atc.amit.com.tw/Gobi/AmitUpgBuf/trunk -r 80
svn://svn.atc.amit.com.tw/Gobi/CSMan/trunk -r 135
svn://svn.atc.amit.com.tw/Gobi/GetPsec/trunk -r 25
svn://svn.atc.amit.com.tw/Gobi/Uyghur/trunk -r 109
svn://svn.atc.amit.com.tw/Gobi/WSL/WS-BAKSET/trunk -r 312
svn://svn.atc.amit.com.tw/Gobi/WSL/WS-DAS/trunk -r 95
svn://svn.atc.amit.com.tw/Gobi/WSL/WS-ESP/trunk -r 310
svn://svn.atc.amit.com.tw/Gobi/WSL/WS-FLUPL/trunk -r 309
svn://svn.atc.amit.com.tw/Gobi/WSL/WS-FWUPG/trunk -r 311
svn://svn.atc.amit.com.tw/Gobi/WSL/WS-UIR/trunk -r 238
svn://svn.atc.amit.com.tw/Sahara/Siwa/SyncDate/branches/94526 -r 56
svn://svn.atc.amit.com.tw/Gobi/AMIT_BEID/trunk -r 31
svn://svn.atc.amit.com.tw/Gobi/ConntrackViewer/trunk -r 17
svn://svn.atc.amit.com.tw/Gobi/OMailtool/trunk -r 59
svn://svn.atc.amit.com.tw/Gobi/RlogAlert/trunk -r 38
svn://svn.atc.amit.com.tw/Gobi/RlogReader/trunk -r 34
svn://svn.atc.amit.com.tw/Sahara/Siwa/ScriptLib/trunk -r 63
svn://svn.atc.amit.com.tw/Gobi/TrafficStatus/trunk -r 42
svn://svn.atc.amit.com.tw/Sahara/Libpopt/LibExpat -r 28
svn://svn.atc.amit.com.tw/Gobi/WanDiscover/trunk -r 18
svn://svn.atc.amit.com.tw/Gobi/WhttpdThread/trunk -r 297
svn://svn.atc.amit.com.tw/Sahara/NTPClient/trunk -r 18
svn://svn.atc.amit.com.tw/Sahara/OBridgeUtil/trunk -r 5
svn://svn.atc.amit.com.tw/Sahara/ODNRD/trunk -r 18
svn://svn.atc.amit.com.tw/Sahara/OTC/trunk -r 17
svn://svn.atc.amit.com.tw/Sahara/OWget/trunk -r 10
svn://svn.atc.amit.com.tw/Gobi/CommanderRT305XL/branches/SI_PROJECT -r 4980
svn://svn.atc.amit.com.tw/Gobi/CheckFlashSection/trunk -r 25
svn://svn.atc.amit.com.tw/Sahara/Libpopt/Libflex -r 203
svn://svn.atc.amit.com.tw/Sahara/ODHCP20175/trunk -r 271
svn://svn.atc.amit.com.tw/Sahara/OPPP244/trunk -r 211
svn://svn.atc.amit.com.tw/Sahara/OPPPoE/trunk -r 174
svn://svn.atc.amit.com.tw/Sahara/OPPTP/branches/CIH573AM_U11_20110816 -r 147
svn://svn.atc.amit.com.tw/Sahara/OL2TP/branches/CIH573AM_U11_20110816 -r 168
svn://svn.atc.amit.com.tw/Gobi/O3G/trunk2 -r 2490
svn://svn.atc.amit.com.tw/Sahara/ODHCP20175/trunk -r 271
svn://svn.atc.amit.com.tw/Sahara/OPPP244/trunk -r 211
svn://svn.atc.amit.com.tw/Sahara/IPhoneTethering/trunk -r 30
svn://svn.atc.amit.com.tw/Gobi/AmitNATServ/branches/BT_test -r 705
svn://svn.atc.amit.com.tw/Sahara/OIPTables142/trunk -r 55
svn://svn.atc.amit.com.tw/Gobi/OSPAP_IPtables142/branches/MULTIWAN -r 30
svn://svn.atc.amit.com.tw/Sahara/OZebraRouting/trunk -r 53
svn://svn.atc.amit.com.tw/Sahara/Libpopt/Libreadline -r 12
svn://svn.atc.amit.com.tw/Gobi/ODDNSc/trunk -r 73
svn://svn.atc.amit.com.tw/Sahara/ODHCP20175/trunk -r 271
svn://svn.atc.amit.com.tw/Sahara/OIGMP3/trunk -r 24
svn://svn.atc.amit.com.tw/Gobi/AmitNATServ/branches/BT_test -r 705
svn://svn.atc.amit.com.tw/Sahara/OIPTables142/trunk -r 55
svn://svn.atc.amit.com.tw/Gobi/AmitURLBlock_IPtables142/trunk -r 33
svn://svn.atc.amit.com.tw/Gobi/AmitNATServ/branches/BT_test -r 705
svn://svn.atc.amit.com.tw/Sahara/OIPTables142/trunk -r 55
svn://svn.atc.amit.com.tw/Gobi/AmitNATServ/branches/BT_test -r 705
svn://svn.atc.amit.com.tw/Sahara/OIPTables142/trunk -r 55
svn://svn.atc.amit.com.tw/Gobi/AmitNATServ/branches/BT_test -r 705
svn://svn.atc.amit.com.tw/Sahara/OIPTables142/trunk -r 55
svn://svn.atc.amit.com.tw/Gobi/AmitNATServ/branches/BT_test -r 705
svn://svn.atc.amit.com.tw/Sahara/OIPTables142/trunk -r 55
svn://svn.atc.amit.com.tw/Sahara/OSNMP/trunk -r 183
svn://svn.atc.amit.com.tw/Sahara/Libpopt/OMiniUPnP -r 310
 -r
svn://svn.atc.amit.com.tw/Gobi/RalinkAppGPIO/trunk -r 37
svn://svn.atc.amit.com.tw/Gobi/RalinkMiiMgr/trunk -r 3
svn://svn.atc.amit.com.tw/Sahara/OWirelessTool/trunk -r 7
svn://svn.atc.amit.com.tw/Gobi/RalinkRT2860AP-150/trunk2 -r 844
svn://svn.atc.amit.com.tw/Gobi/O3G/trunk2 -r 2490
svn://svn.atc.amit.com.tw/Gobi/OAGPServer/trunk -r 534</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p374052">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">xabolcs</div>
					<div class="post-datetime">
						19 Mar 2018, 16:30					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zzztidurvirus wrote:</cite><blockquote><p><a href="http://www.dlink.com/uk/en/support/product/dwr-116-wireless-n300-multi-wan-router">http://www.dlink.com/uk/en/support/prod … wan-router</a></p><p>Can I install OpenWRT on this? I can&#039;t seem to find any guides on how to install it.<br />Is there anyone else using this router?</p></blockquote></div><br /><p>Now the <a href="http://github.com/openwrt/openwrt/pull/675">PR</a> is <a href="http://git.openwrt.org/?p=openwrt/openwrt.git;a=commitdiff;h=a5bd8de0bd80b83e43ce90ddc6623890344ad33d">merged</a> and the first snapshot builds are done, you could install OpenWrt on this! <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /><br /></p><ul><li><p><a href="http://downloads.openwrt.org/snapshots/targets/ramips/mt7620/openwrt-ramips-mt7620-dlink_dwr-116-a1-squashfs-factory.bin">dlink_dwr-116-a1-squashfs-factory.bin</a></p></li><li><p><a href="http://downloads.openwrt.org/snapshots/targets/ramips/mt7620/openwrt-ramips-mt7620-dlink_dwr-116-a1-squashfs-sysupgrade.bin">dlink_dwr-116-a1-squashfs-sysupgrade.bin</a></p></li></ul><br /><p>Thanks <strong>chkdsk</strong>! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><br /><div class="codebox"><pre><code>The DWR-116-A1/2 Wireless Router is based on the MT7620N SoC.

Specification:

  MediaTek MT7620N (580 Mhz)
  32 MB of RAM
  8 MB of FLASH
  802.11bgn radio
  5x 10/100 Mbps Ethernet (1 WAN and 4 LAN)
  2x external, non-detachable antennas
  UART (J1 in A1, JP1 in A2) header on PCB (57600 8n1)
  6x LED (GPIO-controlled), 2x button
  JBOOT bootloader

Known issues:
WAN LED is drived by uartl tx pin. I decide to use this pin as
uartlite tx pin.

Installation:
Apply factory image via http web-gui.</code></pre></div>											<p class="post-edited">(Last edited by <strong>xabolcs</strong> on 19 Mar 2018, 16:32)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>