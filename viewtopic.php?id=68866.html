<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Help me with EV-iMX287-Micro</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p346121">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">godjil</div>
					<div class="post-datetime">
						9 Dec 2016, 00:22					</div>
				</div>
				<div class="post-content content">
					<p>Build OpewnWRT from src.<br />burn mxs-duckbill-sdcard-vfat-ext4.img to mSD<br />but EV-iMX287 not booting</p><p>how i can set LOADADDR ???</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346134">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">godjil</div>
					<div class="post-datetime">
						9 Dec 2016, 07:30					</div>
				</div>
				<div class="post-content content">
					<p>anyone ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346138">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">wigyori</div>
					<div class="post-datetime">
						9 Dec 2016, 10:47					</div>
				</div>
				<div class="post-content content">
					<p>Duckbill is an i.MX283, the board You have is an i.MX287, there can be subtle differences, both for the bootloader and for the DTS/kernel part. Which DTS do you use? Do you get output on the console at all?</p><p>-w-</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347845">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">godjil</div>
					<div class="post-datetime">
						27 Dec 2016, 23:58					</div>
				</div>
				<div class="post-content content">
					<p>ok<br />i get latest mainline source and build it<br />burn openwrt-16.09-mxs-duckbill-sdcard.img on mSD</p><p>and</p><p>its BOOT!!!! im happy now!</p><p>but i cant see some devices</p><p>can i use MX287 dts in duckbill ?<br />where i can edit this&amp;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347846">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">godjil</div>
					<div class="post-datetime">
						27 Dec 2016, 23:59					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>[    0.000000] Booting Linux on physical CPU 0x0
[    0.000000] Linux version 4.4.14 (godjil@g-X250) (gcc version 5.3.0 (OpenWrt GCC 5.3.0 50019) ) #2 Tue Dec 27 20:58:32 UTC 2016
[    0.000000] CPU: ARM926EJ-S [41069265] revision 5 (ARMv5TEJ), cr=0005317f
[    0.000000] CPU: VIVT data cache, VIVT instruction cache
[    0.000000] Machine model: I2SE Duckbill
[    0.000000] Memory policy: Data cache writeback
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 32512
[    0.000000] Kernel command line: console=ttyAMA0,115200 root=/dev/mmcblk0p2 rootwait bootsys=1 panic=1
[    0.000000] PID hash table entries: 512 (order: -1, 2048 bytes)
[    0.000000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)
[    0.000000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Memory: 124908K/131072K available (3234K kernel code, 93K rwdata, 1212K rodata, 152K init, 187K bss, 6164K reserved, 0K cma-reserved)
[    0.000000] Virtual kernel memory layout:
[    0.000000]     vector  : 0xffff0000 - 0xffff1000   (   4 kB)
[    0.000000]     fixmap  : 0xffc00000 - 0xfff00000   (3072 kB)
[    0.000000]     vmalloc : 0xc8800000 - 0xff800000   ( 880 MB)
[    0.000000]     lowmem  : 0xc0000000 - 0xc8000000   ( 128 MB)
[    0.000000]     modules : 0xbf000000 - 0xc0000000   (  16 MB)
[    0.000000]       .text : 0xc0008000 - 0xc045fd6c   (4448 kB)
[    0.000000]       .init : 0xc0460000 - 0xc0486000   ( 152 kB)
[    0.000000]       .data : 0xc0486000 - 0xc049d708   (  94 kB)
[    0.000000]        .bss : 0xc049d708 - 0xc04cc704   ( 188 kB)
[    0.000000] SLUB: HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.000000] NR_IRQS:16 nr_irqs:16 16
[    0.000000] clocksource: mxs_timer: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 79635851949 ns
[    0.000024] sched_clock: 32 bits at 24MHz, resolution 41ns, wraps every 89478484971ns
[    0.000322] Calibrating delay loop... 226.09 BogoMIPS (lpj=1130496)
[    0.080322] pid_max: default: 32768 minimum: 301
[    0.081288] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.081342] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.085485] CPU: Testing write buffer coherency: ok
[    0.087458] Setting up static identity map for 0x40008400 - 0x40008458
[    0.156701] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604462750000 ns
[    0.157419] pinctrl core: initialized pinctrl subsystem
[    0.171501] NET: Registered protocol family 16
[    0.173094] DMA: preallocated 256 KiB pool for atomic coherent allocations
[    0.180751] cpuidle: using governor ladder
[    0.180913] cpuidle: using governor menu
[    0.247068] Serial: AMBA PL011 UART driver
[    0.248979] 80074000.serial: ttyAMA0 at MMIO 0x80074000 (irq = 216, base_baud = 0) is a PL011 rev2
[    0.546668] console [ttyAMA0] enabled
[    0.651101] mxs-dma 80004000.dma-apbh: initialized
[    0.673729] mxs-dma 80024000.dma-apbx: initialized
[    0.686380] usbcore: registered new interface driver usbfs
[    0.692775] usbcore: registered new interface driver hub
[    0.698640] usbcore: registered new device driver usb
[    0.705235] pps_core: LinuxPPS API ver. 1 registered
[    0.710237] pps_core: Software ver. 5.3.6 - Copyright 2005-2007 Rodolfo Giometti &lt;giometti@linux.it&gt;
[    0.719925] PTP clock support registered
[    0.733354] clocksource: Switched to clocksource mxs_timer
[    0.750817] NET: Registered protocol family 2
[    0.758455] TCP established hash table entries: 1024 (order: 0, 4096 bytes)
[    0.765635] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
[    0.772042] TCP: Hash tables configured (established 1024 bind 1024)
[    0.778856] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.784869] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.792363] NET: Registered protocol family 1
[    0.806997] futex hash table entries: 256 (order: -1, 3072 bytes)
[    1.082584] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    1.088667] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    1.142600] io scheduler noop registered
[    1.146794] io scheduler deadline registered (default)
[    1.155114] Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled
[    1.167085] Serial: AMBA driver
[    1.297712] libphy: fec_enet_mii_bus: probed
[    1.307587] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[    1.314363] ehci-platform: EHCI generic platform driver
[    1.321241] i2c /dev entries driver
[    1.383463] mxs-mmc 80010000.ssp: initialized
[    1.403941] NET: Registered protocol family 10
[    1.437097] NET: Registered protocol family 17
[    1.443886] bridge: automatic filtering via arp/ip/ip6tables has been deprecated. Update your scripts to load br_netfilter if you need this.
[    1.456746] 8021q: 802.1Q VLAN Support v1.8
[    1.476545] hctosys: unable to open rtc device (rtc0)
[    1.498997] uart-pl011 80074000.serial: no DMA platform data
[    1.505629] Waiting for root device /dev/mmcblk0p2...
[    1.519153] mmc0: host does not support reading read-only switch, assuming write-enable
[    1.529655] mmc0: new high speed SD card at address 0001
[    1.539766] mmcblk0: mmc0:0001 MS 1.84 GiB 
[    1.549637]  mmcblk0: p1 p2 p3
[    1.555643] mmcblk0: p3 size 2097152 extends beyond EOD, truncated
[    1.616830] EXT4-fs (mmcblk0p2): couldn&#039;t mount as ext3 due to feature incompatibilities
[    1.626973] EXT4-fs (mmcblk0p2): couldn&#039;t mount as ext2 due to feature incompatibilities
[    1.662723] EXT4-fs (mmcblk0p2): mounted filesystem without journal. Opts: (null)
[    1.670626] VFS: Mounted root (ext4 filesystem) readonly on device 179:2.
[    1.678608] Freeing unused kernel memory: 152K (c0460000 - c0486000)
[    1.872013] init: Can&#039;t open /sys/block/zram0/disksize: No such file or directory
[    1.881413] init: Console is alive
[    2.055601] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
[    2.067214] ohci-platform: OHCI generic platform driver
[    2.118707] 80080000.usb supply vbus not found, using dummy regulator
[    2.147888] ci_hdrc ci_hdrc.0: EHCI Host Controller
[    2.152978] ci_hdrc ci_hdrc.0: new USB bus registered, assigned bus number 1
[    2.172291] init: - preinit -
[    2.193631] ci_hdrc ci_hdrc.0: USB 2.0 started, EHCI 1.00
[    2.234946] hub 1-0:1.0: USB hub found
[    2.241872] hub 1-0:1.0: 1 port detected
[    2.252916] random: procd urandom read with 7 bits of entropy available
Press the [f] key and hit [enter] to enter failsafe mode
Press the [1], [2], [3] or [4] key and hit [enter] to select the debug level
[    5.762580] mount_root: mounting /dev/root
[    5.767524] EXT4-fs (mmcblk0p2): warning: mounting unchecked fs, running e2fsck is recommended
[    5.781984] EXT4-fs (mmcblk0p2): re-mounted. Opts: (null)
[    5.818359] procd: - early -
[    6.540448] procd: - ubus -
[    6.626104] procd: - init -
Please press Enter to activate this console.
[    8.792704] PPP generic driver version 2.4.2
[    8.807931] NET: Registered protocol family 24</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347866">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">godjil</div>
					<div class="post-datetime">
						28 Dec 2016, 08:56					</div>
				</div>
				<div class="post-content content">
					<p>Ok, my next steps:</p><p>create target/linux/mxs/profiles/04-mx28evk.mk<br /></p><div class="codebox"><pre><code>define Profile/mx28evk
  NAME:=mx28evk TRY
  DEPENDS:=+@TARGET_ROOTFS_INCLUDE_KERNEL +@TARGET_ROOTFS_INCLUDE_DTB
  FEATURES+=usbgadget
  PACKAGES+= \
    -dnsmasq -firewall -ppp -ip6tables -iptables -6relayd -mtd uboot-envtools \
    kmod-leds-gpio kmod-ledtrig-timer kmod-usb-mxs-phy -kmod-ipt-nathelper \
    kmod-i2c-mxs kmod-spi-mxs uboot-mxs-mx28evk
endef

define Profile/mx287evk/Description
    mx28evk try
endef

$(eval $(call Profile,mx28evk))</code></pre></div><p>edit package/boot/uboot-mxs/Makefile<br /></p><div class="codebox"><pre><code>diff --git a/package/boot/uboot-mxs/Makefile b/package/boot/uboot-mxs/Makefile
index 3b82db5..2ca6bcc 100644
--- a/package/boot/uboot-mxs/Makefile
+++ b/package/boot/uboot-mxs/Makefile
@@ -37,8 +37,14 @@ define uboot/duckbill
   TITLE:=U-Boot 2016.01 for the I2SE Duckbill
 endef
 
+define uboot/mx287evk
+  TITLE:=U-Boot 2016.01 for the mx287evk
+endef
+
+
 UBOOTS := \
        mx23_olinuxino \
+       mx287evk \
        duckbill
 
 define Package/uboot/template</code></pre></div><p>and try build this...<br /></p><div class="codebox"><pre><code>Configuring libgcc.
Configuring libc.
Configuring terminfo.
Configuring libnl-tiny.
Configuring libubox.
Configuring libuci.
Configuring libiwinfo.
Configuring iwinfo.
Configuring libuclient.
Configuring uclient-fetch.
Configuring opkg.
Configuring kernel.
Configuring kmod-nls-base.
Configuring kmod-usb-core.
Configuring libpthread.
Configuring libubus.
Configuring libjson-c.
Configuring libblobmsg-json.
Configuring ubusd.
Configuring ubus.
Configuring iw.
Configuring busybox.
Configuring odhcpd.
Configuring ip-full.
Configuring chat.
Configuring swconfig.
Configuring kmod-lib-crc-ccitt.
Configuring kmod-ledtrig-usbdev.
Configuring kmod-spi-mxs.
Configuring kmod-slhc.
Configuring kmod-ppp.
Configuring kmod-pppox.
Configuring kmod-pppoe.
Configuring jshn.
Configuring netifd.
Configuring libjson-script.
Configuring ubox.
Configuring procd.
Configuring jsonfilter.
Configuring usign.
Configuring fstools.
Configuring base-files.
Configuring kmod-usb-ohci.
Configuring librt.
Configuring libusb-1.0.
Configuring usbutils.
Configuring libuuid.
Configuring libblkid.
Configuring kmod-cfg80211.
Configuring hostapd-common.
Configuring kmod-mac80211.
Configuring kmod-lib-crc-itu-t.
Configuring kmod-rt2x00-lib.
Configuring libiconv-full.
Configuring kmod-i2c-core.
Configuring libcharset.
Configuring iconv.
Configuring kmod-nls-cp1251.
Configuring kmod-usb2.
Configuring comgt.
Configuring libevent2.
Configuring odhcp6c.
Configuring uci.
Configuring wpad-mini.
Configuring dropbear.
Configuring kmod-usb-gadget.
Configuring kmod-usb-chipidea-imx.
Configuring kmod-usb-mxs-phy.
Configuring libstdcpp.
Configuring mtd.
Configuring modem_control.
Configuring ppp.
Configuring kmod-leds-gpio.
Configuring kmod-gpio-button-hotplug.
Configuring logd.
Configuring librpc.
Configuring libintl-full.
Configuring rt2800-pci-firmware.
Configuring libmount.
Configuring libncursesw.
Configuring zlib.
Configuring kmod-i2c-mxs.
Configuring kmod-nls-cp866.
Configuring uboot-mxs-duckbill.
Configuring kmod-eeprom-93cx6.
Configuring libopenssl.
Configuring ppp-mod-pppoe.
Setting flags for package kernel to hold.
Setting flags for package kmod-i2c-core to hold.
Setting flags for package kmod-leds-gpio to hold.
Setting flags for package kmod-ledtrig-usbdev to hold.
Setting flags for package kmod-lib-crc-ccitt to hold.
Setting flags for package kmod-lib-crc-itu-t to hold.
Setting flags for package kmod-slhc to hold.
Setting flags for package kmod-ppp to hold.
Setting flags for package kmod-pppox to hold.
Setting flags for package kmod-pppoe to hold.
Setting flags for package kmod-nls-base to hold.
Setting flags for package kmod-nls-cp866 to hold.
Setting flags for package kmod-nls-cp1251 to hold.
Setting flags for package kmod-eeprom-93cx6 to hold.
Setting flags for package kmod-usb-core to hold.
Setting flags for package kmod-usb-gadget to hold.
Setting flags for package kmod-usb-ohci to hold.
Setting flags for package kmod-usb2 to hold.
Setting flags for package kmod-usb-chipidea-imx to hold.
Setting flags for package kmod-usb-mxs-phy to hold.
Setting flags for package kmod-spi-mxs to hold.
Setting flags for package kmod-i2c-mxs to hold.
Setting flags for package libc to hold.
Setting flags for package libgcc to hold.
Setting flags for package libstdcpp to hold.
Setting flags for package libpthread to hold.
Setting flags for package librt to hold.
make[3]: Entering directory &#039;/home/godjil/dev/openwrt_main&#039;
make[3]: Nothing to be done for &#039;package/preconfig&#039;.
make[3]: Leaving directory &#039;/home/godjil/dev/openwrt_main&#039;
sed -i &quot;s/Installed-Time: .*/Installed-Time: 1482850841/&quot; /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/usr/lib/opkg/status
rm -f /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/usr/lib/opkg/info/*.postinst*
rm -f /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/usr/lib/opkg/info/*.prerm*
make[2]: Leaving directory &#039;/home/godjil/dev/openwrt_main&#039;
make[2]: Entering directory &#039;/home/godjil/dev/openwrt_main&#039;
make[3]: Entering directory &#039;/home/godjil/dev/openwrt_main/target/linux&#039;
make[4]: Entering directory &#039;/home/godjil/dev/openwrt_main/target/linux/mxs&#039;
/home/godjil/dev/openwrt_main/scripts/kconfig.pl  + /home/godjil/dev/openwrt_main/target/linux/generic/config-4.4 /home/godjil/dev/openwrt_main/target/linux/mxs/config-4.4 &gt; /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.target
awk &#039;/^(#[[:space:]]+)?CONFIG_KERNEL/{sub(&quot;CONFIG_KERNEL_&quot;,&quot;CONFIG_&quot;);print}&#039; /home/godjil/dev/openwrt_main/.config &gt;&gt; /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.target
echo &quot;# CONFIG_KALLSYMS_EXTRA_PASS is not set&quot; &gt;&gt; /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.target
echo &quot;# CONFIG_KALLSYMS_ALL is not set&quot; &gt;&gt; /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.target
echo &quot;CONFIG_KALLSYMS_UNCOMPRESSED=y&quot; &gt;&gt; /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.target
/home/godjil/dev/openwrt_main/scripts/metadata.pl kconfig /home/godjil/dev/openwrt_main/tmp/.packageinfo /home/godjil/dev/openwrt_main/.config 4.4 &gt; /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.override
/home/godjil/dev/openwrt_main/scripts/kconfig.pl &#039;m+&#039; &#039;+&#039; /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.target /dev/null /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.override &gt; /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.set
mv /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.set /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.old
grep -v INITRAMFS /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.old &gt; /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.set
echo &#039;CONFIG_INITRAMFS_SOURCE=&quot;&quot;&#039; &gt;&gt; /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.set
rm -rf /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/modules
cmp -s /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.set /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.prev || { cp /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.set /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config; cp /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.set /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.prev; }
export MAKEFLAGS= ; [ -d /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/user_headers ] || make -C /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14 HOSTCFLAGS=&quot;-O2 -I/home/godjil/dev/openwrt_main/staging_dir/host/include -I/home/godjil/dev/openwrt_main/staging_dir/host/usr/include  -Wall -Wmissing-prototypes -Wstrict-prototypes&quot; CROSS_COMPILE=&quot;arm-openwrt-linux-muslgnueabi-&quot; ARCH=&quot;arm&quot; KBUILD_HAVE_NLS=no KBUILD_BUILD_USER=&quot;&quot; KBUILD_BUILD_HOST=&quot;&quot; CONFIG_SHELL=&quot;bash&quot; V=&#039;&#039;  CC=&quot;ccache_cc&quot; INSTALL_HDR_PATH=/home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/user_headers headers_install
. /home/godjil/dev/openwrt_main/include/shell.sh; grep &#039;=[ym]&#039; /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.set | LC_ALL=C sort | md5s &gt; /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.vermagic
touch /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.configured
rm -f /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/init
make -C /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14 HOSTCFLAGS=&quot;-O2 -I/home/godjil/dev/openwrt_main/staging_dir/host/include -I/home/godjil/dev/openwrt_main/staging_dir/host/usr/include  -Wall -Wmissing-prototypes -Wstrict-prototypes&quot; CROSS_COMPILE=&quot;arm-openwrt-linux-muslgnueabi-&quot; ARCH=&quot;arm&quot; KBUILD_HAVE_NLS=no KBUILD_BUILD_USER=&quot;&quot; KBUILD_BUILD_HOST=&quot;&quot; CONFIG_SHELL=&quot;bash&quot; V=&#039;&#039;  CC=&quot;ccache_cc&quot; zImage dtbs modules
make[5]: Entering directory &#039;/home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14&#039;
  CHK     include/config/kernel.release
  CHK     include/generated/uapi/linux/version.h
  CHK     include/generated/utsrelease.h
make[6]: &#039;include/generated/mach-types.h&#039; is up to date.
  CHK     include/generated/bounds.h
  CHK     include/generated/timeconst.h
  CHK     include/generated/asm-offsets.h
  CALL    scripts/checksyscalls.sh
  CHK     include/generated/compile.h
  LINK    vmlinux
  LD      vmlinux.o
  MODPOST vmlinux.o
  GEN     .version
  CHK     include/generated/compile.h
  UPD     include/generated/compile.h
  CC      init/version.o
  LD      init/built-in.o
  KSYM    .tmp_kallsyms1.o
  KSYM    .tmp_kallsyms2.o
  LD      vmlinux
  SORTEX  vmlinux
  SYSMAP  System.map
  OBJCOPY arch/arm/boot/Image
  Kernel: arch/arm/boot/Image is ready
  Kernel: arch/arm/boot/Image is ready
  XZKERN  arch/arm/boot/compressed/piggy.xzkern
  AS      arch/arm/boot/compressed/piggy.xzkern.o
  LD      arch/arm/boot/compressed/vmlinux
  OBJCOPY arch/arm/boot/zImage
  Kernel: arch/arm/boot/zImage is ready
  Building modules, stage 2.
  MODPOST 85 modules
make[5]: Leaving directory &#039;/home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14&#039;
cmp -s /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/vmlinux /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/vmlinux.debug || { arm-openwrt-linux-muslgnueabi-objcopy -O binary -R .reginfo -R .notes -R .note -R .comment -R .mdebug -R .note.gnu.build-id -S /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/vmlinux /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/vmlinux; arm-openwrt-linux-muslgnueabi-objcopy -R .reginfo -R .notes -R .note -R .comment -R .mdebug -R .note.gnu.build-id -S /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/vmlinux /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/vmlinux.elf; cp -fpR /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/vmlinux /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/vmlinux.debug;  cp -fpR /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/arch/arm/boot//zImage /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/zImage;  }
touch /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.image
make -C image compile install TARGET_BUILD=
make[5]: Entering directory &#039;/home/godjil/dev/openwrt_main/target/linux/mxs/image&#039;
bash: *1024*1024/1024: syntax error: operand expected (error token is &quot;*1024*1024/1024&quot;)
make[5]: Nothing to be done for &#039;compile&#039;.
mkdir -p /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/tmp
# Use symbolic permissions to avoid clobbering SUID/SGID/sticky bits
find /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs -type f -not -perm /0100 -not -name &#039;ssh_host*&#039; -not -name &#039;shadow&#039; -print0 | xargs -r -0 chmod u+rw,g+r,o+r
find /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs -type f -perm /0100 -print0 | xargs -r -0 chmod u+rwx,g+rx,o+rx
find /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs -type d -print0 | xargs -r -0 chmod u+rwx,g+rx,o+rx
install -d -m0755 /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/tmp /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/overlay
chmod 1777 /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/tmp
mkimage -A arm -O linux -T kernel -C none -a 0x40008000 -e 0x40008000 -n &#039;ARM OpenWrt Linux-4.4.14&#039; -d /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/zImage /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/uImage
Image Name:   ARM OpenWrt Linux-4.4.14
Created:      Tue Dec 27 15:00:41 2016
Image Type:   ARM Linux Kernel Image (uncompressed)
Data Size:    1544104 Bytes = 1507.91 kB = 1.47 MB
Load Address: 40008000
Entry Point:  40008000
cp /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/uImage /home/godjil/dev/openwrt_main/bin/mxs/openwrt-16.09-mxs-uImage
mkdir -p /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/boot
cp /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/zImage /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/boot/
mkdir -p /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/boot
cp /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/uImage /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/boot/
mkdir -p /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/boot
cp -fpR /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/arch/arm/boot/dts/imx23-olinuxino.dtb /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/boot/
cp -fpR /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/arch/arm/boot/dts/imx28-m28evk.dtb /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/boot/
cp -fpR /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/arch/arm/boot/dts/imx28-duckbill.dtb /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/boot/
/home/godjil/dev/openwrt_main/staging_dir/host/bin/make_ext4fs -l 1073741824 -b 4096 -i 6000 -m 1 -J -T 1482850841 /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/root.ext4 /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/
Creating filesystem with parameters:
    Size: 1073741824
    Block size: 4096
    Blocks per group: 32768
    Inodes per group: 752
    Inode size: 256
    Journal blocks: 0
    Label: 
    Blocks: 262144
    Block groups: 8
    Reserved blocks: 2621
    Reserved block group size: 63
Created filesystem with 751/6016 inodes and 4112/262144 blocks
tar -cp --numeric-owner --owner=0 --group=0 --sort=name --mtime=&quot;@1482850841&quot; -C /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/ . | gzip -9n &gt; /home/godjil/dev/openwrt_main/bin/mxs/openwrt-16.09-mxs-mx28evk-rootfs.tar.gz
rm -f /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/boot.img
mkdosfs /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/boot.img -C 
mkfs.fat 3.0.27 (2014-11-12)
mkdosfs: Need intended size with -C.
Makefile:94: recipe for target &#039;install&#039; failed
make[5]: *** [install] Error 1
make[5]: Leaving directory &#039;/home/godjil/dev/openwrt_main/target/linux/mxs/image&#039;
Makefile:27: recipe for target &#039;install&#039; failed
make[4]: *** [install] Error 2
make[4]: Leaving directory &#039;/home/godjil/dev/openwrt_main/target/linux/mxs&#039;
Makefile:13: recipe for target &#039;install&#039; failed
make[3]: *** [install] Error 2
make[3]: Leaving directory &#039;/home/godjil/dev/openwrt_main/target/linux&#039;
target/Makefile:21: recipe for target &#039;target/linux/install&#039; failed
make[2]: *** [target/linux/install] Error 2
make[2]: Leaving directory &#039;/home/godjil/dev/openwrt_main&#039;
target/Makefile:17: recipe for target &#039;/home/godjil/dev/openwrt_main/staging_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/stamp/.target_install&#039; failed
make[1]: *** [/home/godjil/dev/openwrt_main/staging_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/stamp/.target_install] Error 2
make[1]: Leaving directory &#039;/home/godjil/dev/openwrt_main&#039;
/home/godjil/dev/openwrt_main/include/toplevel.mk:192: ошибка выполнения рецепта для цели «world»
make: *** [world] Ошибка 2</code></pre></div><br /><br /><p>I think error there&nbsp; in action &quot;mkdosfs $(KDIR)/boot.img -C $(FAT32_BLOCKS)&quot;<br /></p><div class="codebox"><pre><code>make -C image compile install TARGET_BUILD=
make[5]: Entering directory &#039;/home/godjil/dev/openwrt_main/target/linux/mxs/image&#039;
bash: *1024*1024/1024: syntax error: operand expected (error token is &quot;*1024*1024/1024&quot;)
make[5]: Nothing to be done for &#039;compile&#039;.</code></pre></div><br /><br /><p>wats wrong???</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347867">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">godjil</div>
					<div class="post-datetime">
						28 Dec 2016, 09:06					</div>
				</div>
				<div class="post-content content">
					<p>my board<br /><a href="https://goo.gl/photos/DZWYWSLSnJgx7p7q6">https://goo.gl/photos/DZWYWSLSnJgx7p7q6</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347875">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						28 Dec 2016, 12:20					</div>
				</div>
				<div class="post-content content">
					<p><strong>godjil</strong>, it looks like incorrect substitution of $(FAT32_BLOCKS), it expects first parameter, that is missing. Try to find, where it is defined, also run make V=s in more verbose mode.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347880">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">godjil</div>
					<div class="post-datetime">
						28 Dec 2016, 13:15					</div>
				</div>
				<div class="post-content content">
					<p>ok,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347883">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">godjil</div>
					<div class="post-datetime">
						28 Dec 2016, 13:47					</div>
				</div>
				<div class="post-content content">
					<p>OK - THETS IT !!!!</p><div class="codebox"><pre><code>diff --git a/package/boot/uboot-mxs/Makefile b/package/boot/uboot-mxs/Makefile
index 3b82db5..76c3ca0 100644
--- a/package/boot/uboot-mxs/Makefile
+++ b/package/boot/uboot-mxs/Makefile
@@ -37,8 +37,14 @@ define uboot/duckbill
   TITLE:=U-Boot 2016.01 for the I2SE Duckbill
 endef
 
+define uboot/mx28evk
+  TITLE:=U-Boot 2016.01 for the mx287evk
+endef
+
+
 UBOOTS := \
        mx23_olinuxino \
+       mx28evk \
        duckbill
 
 define Package/uboot/template
diff --git a/package/network/utils/iperf/Makefile b/package/network/utils/iperf/Makefile
index 11970d1..daa3bf9 100644
--- a/package/network/utils/iperf/Makefile
+++ b/package/network/utils/iperf/Makefile
@@ -14,7 +14,7 @@ PKG_RELEASE:=1
 PKG_BUILD_DIR:=$(BUILD_DIR)/$(PKG_NAME)-$(BUILD_VARIANT)/$(PKG_NAME)-$(PKG_VERSION)
 PKG_SOURCE:=$(PKG_NAME)-$(PKG_VERSION).tar.gz
 PKG_SOURCE_URL:=@SF/iperf2
-PKG_MD5SUM:=1bb3a1d98b1973aee6e8f171933c0f61
+PKG_MD5SUM:=351b018b71176b8cb25f20eef6a9e37c
 
 PKG_MAINTAINER:=Felix Fietkau &lt;nbd@nbd.name&gt;
 PKG_LICENSE:=BSD-3-Clause
diff --git a/target/linux/mxs/image/Makefile b/target/linux/mxs/image/Makefile
index 94fed82..cb7f50f 100644
--- a/target/linux/mxs/image/Makefile
+++ b/target/linux/mxs/image/Makefile
@@ -10,6 +10,7 @@ include $(INCLUDE_DIR)/image.mk
 
 BOARDS:= \
        imx23-olinuxino \
+       imx28-m28evk \
        imx28-duckbill
 
 FAT32_BLOCK_SIZE=1024
@@ -68,6 +69,10 @@ define Image/Build/SDCard-ext4-ext4
                $(CONFIG_TARGET_ROOTFS_PARTSIZE)
 endef
 
+define Image/Build/Profile/m28evk
+       $(call Image/Build/SDCard-ext4-ext4,$(1),$(2),imx28-m28evk,mx28evk)
+endef
+
 define Image/Build/Profile/olinuxino-maxi
        $(call Image/Build/SDCard-vfat-ext4,$(1),$(2),imx23-olinuxino,mx23_olinuxino)
 endef</code></pre></div><p>make process<br /></p><div class="codebox"><pre><code>make[3]: Entering directory &#039;/home/godjil/dev/openwrt_main&#039;
make[3]: Nothing to be done for &#039;package/preconfig&#039;.
make[3]: Leaving directory &#039;/home/godjil/dev/openwrt_main&#039;
sed -i &quot;s/Installed-Time: .*/Installed-Time: 1482850841/&quot; /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/usr/lib/opkg/status
rm -f /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/usr/lib/opkg/info/*.postinst*
rm -f /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/usr/lib/opkg/info/*.prerm*
make[2]: Leaving directory &#039;/home/godjil/dev/openwrt_main&#039;
make[2]: Entering directory &#039;/home/godjil/dev/openwrt_main&#039;
make[3]: Entering directory &#039;/home/godjil/dev/openwrt_main/target/linux&#039;
make[4]: Entering directory &#039;/home/godjil/dev/openwrt_main/target/linux/mxs&#039;
/home/godjil/dev/openwrt_main/scripts/kconfig.pl  + /home/godjil/dev/openwrt_main/target/linux/generic/config-4.4 /home/godjil/dev/openwrt_main/target/linux/mxs/config-4.4 &gt; /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.target
awk &#039;/^(#[[:space:]]+)?CONFIG_KERNEL/{sub(&quot;CONFIG_KERNEL_&quot;,&quot;CONFIG_&quot;);print}&#039; /home/godjil/dev/openwrt_main/.config &gt;&gt; /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.target
echo &quot;# CONFIG_KALLSYMS_EXTRA_PASS is not set&quot; &gt;&gt; /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.target
echo &quot;# CONFIG_KALLSYMS_ALL is not set&quot; &gt;&gt; /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.target
echo &quot;CONFIG_KALLSYMS_UNCOMPRESSED=y&quot; &gt;&gt; /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.target
/home/godjil/dev/openwrt_main/scripts/metadata.pl kconfig /home/godjil/dev/openwrt_main/tmp/.packageinfo /home/godjil/dev/openwrt_main/.config 4.4 &gt; /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.override
/home/godjil/dev/openwrt_main/scripts/kconfig.pl &#039;m+&#039; &#039;+&#039; /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.target /dev/null /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.override &gt; /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.set
mv /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.set /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.old
grep -v INITRAMFS /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.old &gt; /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.set
echo &#039;CONFIG_INITRAMFS_SOURCE=&quot;&quot;&#039; &gt;&gt; /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.set
rm -rf /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/modules
cmp -s /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.set /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.prev || { cp /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.set /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config; cp /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.set /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.prev; }
export MAKEFLAGS= ; [ -d /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/user_headers ] || make -C /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14 HOSTCFLAGS=&quot;-O2 -I/home/godjil/dev/openwrt_main/staging_dir/host/include -I/home/godjil/dev/openwrt_main/staging_dir/host/usr/include  -Wall -Wmissing-prototypes -Wstrict-prototypes&quot; CROSS_COMPILE=&quot;arm-openwrt-linux-muslgnueabi-&quot; ARCH=&quot;arm&quot; KBUILD_HAVE_NLS=no KBUILD_BUILD_USER=&quot;&quot; KBUILD_BUILD_HOST=&quot;&quot; CONFIG_SHELL=&quot;bash&quot; V=&#039;&#039;  CC=&quot;ccache_cc&quot; INSTALL_HDR_PATH=/home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/user_headers headers_install
. /home/godjil/dev/openwrt_main/include/shell.sh; grep &#039;=[ym]&#039; /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.config.set | LC_ALL=C sort | md5s &gt; /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.vermagic
touch /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.configured
rm -f /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/init
make -C /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14 HOSTCFLAGS=&quot;-O2 -I/home/godjil/dev/openwrt_main/staging_dir/host/include -I/home/godjil/dev/openwrt_main/staging_dir/host/usr/include  -Wall -Wmissing-prototypes -Wstrict-prototypes&quot; CROSS_COMPILE=&quot;arm-openwrt-linux-muslgnueabi-&quot; ARCH=&quot;arm&quot; KBUILD_HAVE_NLS=no KBUILD_BUILD_USER=&quot;&quot; KBUILD_BUILD_HOST=&quot;&quot; CONFIG_SHELL=&quot;bash&quot; V=&#039;&#039;  CC=&quot;ccache_cc&quot; zImage dtbs modules
make[5]: Entering directory &#039;/home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14&#039;
  CHK     include/config/kernel.release
  CHK     include/generated/uapi/linux/version.h
  CHK     include/generated/utsrelease.h
make[6]: &#039;include/generated/mach-types.h&#039; is up to date.
  CHK     include/generated/bounds.h
  CHK     include/generated/timeconst.h
  CHK     include/generated/asm-offsets.h
  CALL    scripts/checksyscalls.sh
  CHK     include/generated/compile.h
  LINK    vmlinux
  LD      vmlinux.o
  MODPOST vmlinux.o
  GEN     .version
  CHK     include/generated/compile.h
  UPD     include/generated/compile.h
  CC      init/version.o
  LD      init/built-in.o
  KSYM    .tmp_kallsyms1.o
  KSYM    .tmp_kallsyms2.o
  LD      vmlinux
  SORTEX  vmlinux
  SYSMAP  System.map
  OBJCOPY arch/arm/boot/Image
  Kernel: arch/arm/boot/Image is ready
  Kernel: arch/arm/boot/Image is ready
  XZKERN  arch/arm/boot/compressed/piggy.xzkern
  AS      arch/arm/boot/compressed/piggy.xzkern.o
  LD      arch/arm/boot/compressed/vmlinux
  OBJCOPY arch/arm/boot/zImage
  Kernel: arch/arm/boot/zImage is ready
  Building modules, stage 2.
  MODPOST 85 modules
make[5]: Leaving directory &#039;/home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14&#039;
cmp -s /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/vmlinux /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/vmlinux.debug || { arm-openwrt-linux-muslgnueabi-objcopy -O binary -R .reginfo -R .notes -R .note -R .comment -R .mdebug -R .note.gnu.build-id -S /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/vmlinux /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/vmlinux; arm-openwrt-linux-muslgnueabi-objcopy -R .reginfo -R .notes -R .note -R .comment -R .mdebug -R .note.gnu.build-id -S /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/vmlinux /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/vmlinux.elf; cp -fpR /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/vmlinux /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/vmlinux.debug;  cp -fpR /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/arch/arm/boot//zImage /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/zImage;  }
touch /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/.image
make -C image compile install TARGET_BUILD=
make[5]: Entering directory &#039;/home/godjil/dev/openwrt_main/target/linux/mxs/image&#039;
make[5]: Nothing to be done for &#039;compile&#039;.
mkdir -p /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/tmp
# Use symbolic permissions to avoid clobbering SUID/SGID/sticky bits
find /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs -type f -not -perm /0100 -not -name &#039;ssh_host*&#039; -not -name &#039;shadow&#039; -print0 | xargs -r -0 chmod u+rw,g+r,o+r
find /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs -type f -perm /0100 -print0 | xargs -r -0 chmod u+rwx,g+rx,o+rx
find /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs -type d -print0 | xargs -r -0 chmod u+rwx,g+rx,o+rx
install -d -m0755 /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/tmp /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/overlay
chmod 1777 /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/tmp
mkimage -A arm -O linux -T kernel -C none -a 0x40008000 -e 0x40008000 -n &#039;ARM OpenWrt Linux-4.4.14&#039; -d /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/zImage /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/uImage
Image Name:   ARM OpenWrt Linux-4.4.14
Created:      Tue Dec 27 15:00:41 2016
Image Type:   ARM Linux Kernel Image (uncompressed)
Data Size:    1544264 Bytes = 1508.07 kB = 1.47 MB
Load Address: 40008000
Entry Point:  40008000
cp /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/uImage /home/godjil/dev/openwrt_main/bin/mxs/openwrt-16.09-mxs-uImage
mkdir -p /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/boot
cp /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/zImage /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/boot/
mkdir -p /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/boot
cp /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/uImage /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/boot/
mkdir -p /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/boot
cp -fpR /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/arch/arm/boot/dts/imx23-olinuxino.dtb /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/boot/
cp -fpR /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/arch/arm/boot/dts/imx28-m28evk.dtb /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/boot/
cp -fpR /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/linux-4.4.14/arch/arm/boot/dts/imx28-duckbill.dtb /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/boot/
/home/godjil/dev/openwrt_main/staging_dir/host/bin/make_ext4fs -l 1048576000 -b 4096 -i 6000 -m 1 -J -T 1482850841 /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/root.ext4 /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/
Creating filesystem with parameters:
    Size: 1048576000
    Block size: 4096
    Blocks per group: 32768
    Inodes per group: 752
    Inode size: 256
    Journal blocks: 0
    Label: 
    Blocks: 256000
    Block groups: 8
    Reserved blocks: 2560
    Reserved block group size: 63
Created filesystem with 747/6016 inodes and 3955/256000 blocks
tar -cp --numeric-owner --owner=0 --group=0 --sort=name --mtime=&quot;@1482850841&quot; -C /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/root-mxs/ . | gzip -9n &gt; /home/godjil/dev/openwrt_main/bin/mxs/openwrt-16.09-mxs-m28evk-rootfs.tar.gz
./gen_sdcard_ext4_ext4.sh /home/godjil/dev/openwrt_main/bin/mxs/openwrt-16.09-mxs-m28evk-sdcard.img /home/godjil/dev/openwrt_main/bin/mxs/uboot-mxs-mx28evk/uboot-mxs-mx28evk.sb /home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/root.ext4 1000
+ &#039;[&#039; 4 -eq 4 &#039;]&#039;
+ OUTPUT=/home/godjil/dev/openwrt_main/bin/mxs/openwrt-16.09-mxs-m28evk-sdcard.img
+ UBOOT=/home/godjil/dev/openwrt_main/bin/mxs/uboot-mxs-mx28evk/uboot-mxs-mx28evk.sb
+ ROOTFS=/home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/root.ext4
+ ROOTFSSIZE=1000
+ head=4
+ sect=63
++ ptgen -o /home/godjil/dev/openwrt_main/bin/mxs/openwrt-16.09-mxs-m28evk-sdcard.img -h 4 -s 63 -l 1024 -t 53 -p 1M -t 83 -p 1000M -t 83 -p 1000M
+ set 1048576 1048576 3145728 1048576000 1052770304 1048576000
+ ROOTFS1OFFSET=6144
+ ROOTFS1SIZE=2048000
+ ROOTFS2OFFSET=2056192
+ ROOTFS2SIZE=2048000
+ dd bs=512 if=/home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/root.ext4 of=/home/godjil/dev/openwrt_main/bin/mxs/openwrt-16.09-mxs-m28evk-sdcard.img seek=6144 conv=notrunc
2048000+0 records in
2048000+0 records out
1048576000 bytes (1.0 GB, 1000 MiB) copied, 9.1273 s, 115 MB/s
+ dd bs=512 if=/home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/root.ext4 of=/home/godjil/dev/openwrt_main/bin/mxs/openwrt-16.09-mxs-m28evk-sdcard.img seek=2056192 conv=notrunc
2048000+0 records in
2048000+0 records out
1048576000 bytes (1.0 GB, 1000 MiB) copied, 15.1263 s, 69.3 MB/s
+ sdimage -d /home/godjil/dev/openwrt_main/bin/mxs/openwrt-16.09-mxs-m28evk-sdcard.img -f /home/godjil/dev/openwrt_main/bin/mxs/uboot-mxs-mx28evk/uboot-mxs-mx28evk.sb
write first firmware
write second firmware
done
dd if=/home/godjil/dev/openwrt_main/build_dir/target-arm_arm926ej-s_musl-1.1.15_eabi/linux-mxs/root.ext4 of=/home/godjil/dev/openwrt_main/bin/mxs/openwrt-16.09-mxs-root.ext4 bs=128k conv=sync
8000+0 records in
8000+0 records out
1048576000 bytes (1.0 GB, 1000 MiB) copied, 15.2187 s, 68.9 MB/s</code></pre></div><p>Burn process<br /></p><div class="codebox"><pre><code>dd if=bin/mxs/openwrt-16.09-mxs-m28evk-sdcard.img of=/dev/mmcblk0</code></pre></div><br /><p>Boot process<br /></p><div class="codebox"><pre><code>HTLLCLLC

U-Boot 2016.01 (Dec 27 2016 - 15:00:41 +0000)

CPU:   Freescale i.MX28 rev1.2 at 454 MHz
BOOT:  SSP SD/MMC #0, 3V3
SPI:   ready
DRAM:  128 MiB
NAND:  256 MiB
MMC:   MXS MMC: 0
*** Warning - bad CRC, using default environment

Video: MXSFB: &#039;videomode&#039; variable not set!
In:    serial
Out:   serial
Err:   serial
Net:   FEC0 [PRIME], FEC1
Hit any key to stop autoboot:  0 
switch to partitions #0, OK
mmc0 is current device
** Unrecognized filesystem type **
** Unrecognized filesystem type **
Booting from net ...
FEC0: Autonegotiation timeout
BOOTP broadcast 1
BOOTP broadcast 2
BOOTP broadcast 3
BOOTP broadcast 4
BOOTP broadcast 5
BOOTP broadcast 6
BOOTP broadcast 7
BOOTP broadcast 8
BOOTP broadcast 9
BOOTP broadcast 10
BOOTP broadcast 11
BOOTP broadcast 12
BOOTP broadcast 13
BOOTP broadcast 14
BOOTP broadcast 15
BOOTP broadcast 16

Bad Linux ARM zImage magic!</code></pre></div><p>Where and how i can set default boot command in u-boot in build tree????</p>											<p class="post-edited">(Last edited by <strong>godjil</strong> on 28 Dec 2016, 13:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347886">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						28 Dec 2016, 14:11					</div>
				</div>
				<div class="post-content content">
					<p>I don&#039;t know, only can suggest to check &quot;burning&quot; process. Is /dev/mmcblk0 correct?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347899">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">godjil</div>
					<div class="post-datetime">
						28 Dec 2016, 17:54					</div>
				</div>
				<div class="post-content content">
					<p>all done<br />I need only how to set uboot env&amp;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p348228">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">wigyori</div>
					<div class="post-datetime">
						2 Jan 2017, 17:56					</div>
				</div>
				<div class="post-content content">
					<p>(Where did you get &quot;openwrt-16.09&quot; from? )</p><p>For the u-boot env, first you should check &quot;printenv&quot; at the u-boot prompt. You can try to manually override the bootparams and try to boot the image. Then go to the u-boot source, include/configs/mx28evk.h, and change what&#039;s required.</p><p>Regards,<br />-w-</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p348317">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">wigyori</div>
					<div class="post-datetime">
						3 Jan 2017, 17:04					</div>
				</div>
				<div class="post-content content">
					<p>BTW, I plan to do a u-boot upgrade to the latest release for the mxs target. Can You check if 2016.11 has direct support for your board? </p><p>(There seems to be some difference between the EV-iMX287 called Alienboard, and the official Freescale/NXP i.MX28evk board.)</p><p>Regards,<br />-w-</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p348760">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">godjil</div>
					<div class="post-datetime">
						8 Jan 2017, 16:52					</div>
				</div>
				<div class="post-content content">
					<p>EV-iMX287<br />This one is my card</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p348994">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">godjil</div>
					<div class="post-datetime">
						10 Jan 2017, 23:07					</div>
				</div>
				<div class="post-content content">
					<p><span class="postimg"><img src="http://evodbg.com/uploads/posts/2015-08/1438785909_ev-imx287-micro-1.jpg" alt="http://evodbg.com/uploads/posts/2015-08/1438785909_ev-imx287-micro-1.jpg" /></span></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>