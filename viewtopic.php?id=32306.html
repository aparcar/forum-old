<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> DIR-300 B1 LEDs</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p145388">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">doofclown</div>
					<div class="post-datetime">
						8 Oct 2011, 17:15					</div>
				</div>
				<div class="post-content content">
					<p>Hello,<br />my DIR-300B1 was unable to control WAN led indicator, so I decided to fix this.<br />The only bad thing after patch - it dosnt light WAN led on cable plug at all, you need to set it manually via&nbsp; /sys/class/leds/d-link:amber:wan/brightness or&nbsp; /sys/class/leds/d-link:green:wan/brightness via script or luci leds triggers.<br /></p><div class="codebox"><pre><code>...
#define DIR_300B_GPIO_LED_WAN_AMBER    14
#define DIR_300B_GPIO_LED_WAN_GREEN    12
...

...
    , {
        .name        = &quot;d-link:amber:wan&quot;,
        .gpio        = DIR_300B_GPIO_LED_WAN_AMBER,
        .active_low    = 1,
    }, {
        .name        = &quot;d-link:green:wan&quot;,
        .gpio        = DIR_300B_GPIO_LED_WAN_GREEN,
        .active_low    = 1,
    },
...</code></pre></div><p>these changes go to <a href="https://dev.openwrt.org/browser/trunk/target/linux/ramips/files/arch/mips/ralink/rt305x/mach-dir-300-revb.c">https://dev.openwrt.org/browser/trunk/t â€¦ 300-revb.c</a><br />sorry, I dont know how to exactly create a patch, so I&#039;ll post just changes and somebody maybe formalize if find it useful.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145389">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						8 Oct 2011, 17:22					</div>
				</div>
				<div class="post-content content">
					<p>This is a bit lengthy and concentrates on GIT, but I think there was a small section for the program &quot;patch&quot; as well in it:</p><p><a href="http://www.youtube.com/watch?v=LLBrBBImJt4">http://www.youtube.com/watch?v=LLBrBBImJt4</a></p><p>(You dont need flash to watch it, there is 720p WebM version of the video: <a href="http://www.youtube.com/html5)">http://www.youtube.com/html5)</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145391">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">doofclown</div>
					<div class="post-datetime">
						8 Oct 2011, 17:49					</div>
				</div>
				<div class="post-content content">
					<p>Oh, thats how unix-way works - you watch 40minutes lecture to make one 1kb patch.. <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /><br />I know how to diff two files, but no idea how the resulting patch will fit in openwrt&#039;s own building infrastructure.<br />Anyways, thank you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145394">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						8 Oct 2011, 18:23					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://patchwork.midlink.org/project/openwrt/list/">http://patchwork.midlink.org/project/openwrt/list/</a></p><p>I am sure there is better introduction/manual for &quot;patch&quot; then this video, it&#039; simply something that popped into my head.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p165337">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">chienkuo</div>
					<div class="post-datetime">
						21 Apr 2012, 16:12					</div>
				</div>
				<div class="post-content content">
					<p>why the dir-300 revb developer doesn&#039;t repair this led issue.<br />i cannot understand! they do not brower form?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p165344">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						21 Apr 2012, 16:38					</div>
				</div>
				<div class="post-content content">
					<p>There are more important issues than making the shiny leds blink, like making stuff work at all.<br />If there is no ticket yet, make one. If there is one already then wait.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p165795">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">oliver_fg</div>
					<div class="post-datetime">
						25 Apr 2012, 22:03					</div>
				</div>
				<div class="post-content content">
					<p>I included the fix in my local trunk and ran &quot;make&quot;. After that I upgraded my router with the latest build, but I can not control the wan leds:</p><p>root @ OpenWrt /sys/class/leds # ll<br />drwxr-xr-x&nbsp; &nbsp; 2 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 Jan&nbsp; 1&nbsp; 1970 .<br />drwxr-xr-x&nbsp; &nbsp;17 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 Jan&nbsp; 1&nbsp; 1970 ..<br />lrwxrwxrwx&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 Jan&nbsp; 1&nbsp; 1970 d-link:amber:status -&gt; ../../devices/platform/leds-gpio/leds/d-link:amber:status<br />lrwxrwxrwx&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 Jan&nbsp; 1&nbsp; 1970 d-link:blue:wps -&gt; ../../devices/platform/leds-gpio/leds/d-link:blue:wps<br />lrwxrwxrwx&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 Jan&nbsp; 1&nbsp; 1970 d-link:green:status -&gt; ../../devices/platform/leds-gpio/leds/d-link:green:status<br />lrwxrwxrwx&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 Jan&nbsp; 1&nbsp; 1970 rt2800pci-phy0::assoc -&gt; ../../devices/platform/rt2800_wmac.0/leds/rt2800pci-phy0::assoc<br />lrwxrwxrwx&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 Jan&nbsp; 1&nbsp; 1970 rt2800pci-phy0::quality -&gt; ../../devices/platform/rt2800_wmac.0/leds/rt2800pci-phy0::quality<br />lrwxrwxrwx&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 Jan&nbsp; 1&nbsp; 1970 rt2800pci-phy0::radio -&gt; ../../devices/platform/rt2800_wmac.0/leds/rt2800pci-phy0::radio</p><p>Do I need to include special packages into my image to make this work?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p172282">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">oliver_fg</div>
					<div class="post-datetime">
						14 Jul 2012, 20:31					</div>
				</div>
				<div class="post-content content">
					<p>Has somebody tried this fix? Are there any other results then mine?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>