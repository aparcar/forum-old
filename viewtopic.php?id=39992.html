<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> mksh Compilation error  &gt;&gt; whether compile-time assertions pass... no</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 14 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p180900">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">cj1324</div>
					<div class="post-datetime">
						18 Oct 2012, 15:46					</div>
				</div>
				<div class="post-content content">
					<p>==&gt; if to use persistent history... no (cached)<br />... whether compile-time assertions pass<br />$ mips-openwrt-linux-uclibc-gcc -Os -pipe -mips32r2 -mtune=mips32r2 -fno-caller-saves -fhonour-copts -Wno-error=unused-but-set-variable -msoft-float -fno-strict-aliasing -fwrapv -flto=jobserver -std=gnu99 -Wall -fno-inline -Wno-overflow -I. -DMKSH_SMALL=1 -DMKSH_ASSUME_UTF8=0 -D_GNU_SOURCE -DSETUID_CAN_FAIL_WITH_EAGAIN -DHAVE_ATTRIBUTE_BOUNDED=0 -DHAVE_ATTRIBUTE_FORMAT=1 -DHAVE_ATTRIBUTE_NONNULL=1 -DHAVE_ATTRIBUTE_NORETURN=1 -DHAVE_ATTRIBUTE_UNUSED=1 -DHAVE_ATTRIBUTE_USED=1 -DHAVE_SYS_BSDTYPES_H=0 -DHAVE_SYS_FILE_H=1 -DHAVE_SYS_MKDEV_H=0 -DHAVE_SYS_MMAN_H=1 -DHAVE_SYS_PARAM_H=1 -DHAVE_SYS_SELECT_H=1 -DHAVE_SYS_SYSMACROS_H=1 -DHAVE_BSTRING_H=0 -DHAVE_GRP_H=1 -DHAVE_LIBGEN_H=1 -DHAVE_LIBUTIL_H=0 -DHAVE_PATHS_H=1 -DHAVE_STDINT_H=1 -DHAVE_STRINGS_H=1 -DHAVE_ULIMIT_H=1 -DHAVE_VALUES_H=1 -D_FILE_OFFSET_BITS=64 -DHAVE_CAN_INTTYPES=1 -DHAVE_CAN_UCBINTS=1 -DHAVE_CAN_INT8TYPE=1 -DHAVE_CAN_UCBINT8=1 -DHAVE_RLIM_T=1 -DHAVE_SIG_T=1 -DHAVE_SYS_SIGNAME=0 -DHAVE_SYS_SIGLIST=0 -DHAVE_STRSIGNAL=1 -DHAVE_GETRUSAGE=1 -DHAVE_KILLPG=1 -DHAVE_MKNOD=0 -DHAVE_MKSTEMP=1 -DHAVE_NICE=0 -DHAVE_REVOKE=0 -DHAVE_SETLOCALE_CTYPE=0 -DHAVE_LANGINFO_CODESET=0 -DHAVE_SELECT=1 -DHAVE_SETRESUGID=1 -DHAVE_SETGROUPS=1 -DHAVE_STRCASESTR=1 -DHAVE_STRLCPY=1 -DHAVE_FLOCK_DECL=0 -DHAVE_REVOKE_DECL=1 -DHAVE_SYS_SIGLIST_DECL=1 -DHAVE_PERSISTENT_HISTORY=0 -L/var/data/hc-wrt/trunk/staging_dir/target-mips_r2_uClibc-0.9.33.2/usr/lib -L/var/data/hc-wrt/trunk/staging_dir/target-mips_r2_uClibc-0.9.33.2/lib -L/var/data/hc-wrt/trunk/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/usr/lib -L/var/data/hc-wrt/trunk/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib -fuse-linker-plugin -Wno-error conftest.c&nbsp; || for _f in ${tcfn}*; do test x&quot;${_f}&quot; = x&quot;mksh.1&quot; || rm -f &quot;${_f}&quot;; done<br />] conftest.c:22:1: error: variably modified &#039;ari_sign_32_bit_and_wrap&#039; at file scope<br />==&gt; whether compile-time assertions pass... no<br />make[3]: Leaving directory `/var/data/hc-wrt/trunk/feeds/packages/utils/mksh&#039;</p><br /><br /><p>2217 blocks<br />make[3]: *** [/var/data/hc-wrt/trunk/build_dir/target-mips_r2_uClibc-0.9.33.2/mksh/.built] Error 1<br />make[2]: *** [package/feeds/packages/mksh/compile] Error 2<br />make[1]: *** [/var/data/hc-wrt/trunk/staging_dir/target-mips_r2_uClibc-0.9.33.2/stamp/.package_compile] Error 2<br />make: *** [world] Error 2</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180910">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						18 Oct 2012, 16:59					</div>
				</div>
				<div class="post-content content">
					<p>And now we&#039;re supposed to waste our time guessing what you want?<br />If you want other people to answer you then at least put in some minimal effort to write a comprehendable question in plain english.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181834">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">RonaldDuck</div>
					<div class="post-datetime">
						30 Oct 2012, 11:03					</div>
				</div>
				<div class="post-content content">
					<p>Hi, Guys!</p><p>I luckily found that topic, because I have the same issue compiling OpenWRT from trunk.</p><p>The trunk revision I checked out is 33969.<br />I applied the first three patches from George Kashperko (<a href="http://www.znau.edu.ua/temp/asus-rt-n16/openwrt-bcm4716-README.txt">http://www.znau.edu.ua/temp/asus-rt-n16 … README.txt</a>) for ASUS RT-N16 support.</p><p>The build machine is a Ubuntu 10.04 VM on a Mac OS X (10.8.2) host OS.<br />I installed the &quot;packages&quot;, &quot;xwrt&quot; and &quot;luci&quot; feed, although I think I could have had disabled the xwrt feed, because I will use luci as web interface.</p><p>The compiling endet at the exact same point it has ended for cj1324.</p><p>Is there any way to get more information why this behavior comes up? Are there any &quot;make logs&quot; (other than running make with V=99)?</p><p>My next try is to disable xwrt and try to make it again… I will report…</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181864">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">RonaldDuck</div>
					<div class="post-datetime">
						30 Oct 2012, 15:52					</div>
				</div>
				<div class="post-content content">
					<p>Okay… So, I removed the whole trunk directory and did the following steps:</p><p>- checkout of trunk at revision 33969 (because George Kashperko&#039;s RT-N16 patches rely on that rev.)<br />- deactivating xwrt feed (adding leading # to feeds.conf.default)<br />- installed both existing feeds (packages and luci)<br />- applied all three patches from George (000, 001, 002 - in that order)<br />- &quot;make prereq&quot; to ensure that all binaries that are needed are present<br />- &quot;make download&quot; to download any source needed before building<br />- in &quot;make menuconfig&quot; I just tagged those packages I really (I mean REALLY) need on my router (openvpn, tcpdump, usb stuff, luci, etc.)<br />- &quot;make V=99&quot;</p><p>It successfully build the packages and the image.</p><p>That behavior where it stopes building everything (like in the first post) comes up when I tag the option &quot;Global build settings&quot;-&gt;&quot;Select all packages by default&quot;...</p><p>Somehow I can&#039;t build &quot;everything&quot; for the RT-N16...</p><p>Is there any log or hint I can investigate to know which package raises that &quot;error&quot;?</p>											<p class="post-edited">(Last edited by <strong>RonaldDuck</strong> on 30 Oct 2012, 15:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181865">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						30 Oct 2012, 16:09					</div>
				</div>
				<div class="post-content content">
					<p>Use &quot;make V=99 IGNORE_ERRORS=m&quot; when doing a build with all packages. There&#039;ll always be broken packages.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181867">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">RonaldDuck</div>
					<div class="post-datetime">
						30 Oct 2012, 16:14					</div>
				</div>
				<div class="post-content content">
					<p>Thank you jow!</p><p>But, how do I get notified which package has been broken?<br />Or is it just try&#039;n&#039;error if the build has finished and a package I need isn&#039;t there?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181869">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						30 Oct 2012, 16:17					</div>
				</div>
				<div class="post-content content">
					<p>The above command will abort if a builtin package is broken, but it will skip ones which are broken and marked as &lt;M&gt;.<br />You can pass BUILD_LOG=1 to make a log for each make target in logs/.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181871">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">RonaldDuck</div>
					<div class="post-datetime">
						30 Oct 2012, 16:36					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for your hints!</p><p>I think those hints will help the topic creator as well <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Next approach: building everything (that&#039;s possible *haha*)</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>