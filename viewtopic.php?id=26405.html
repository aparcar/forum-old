<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Huawei HG521</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 11 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p116397">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">routednbooted</div>
					<div class="post-datetime">
						3 Sep 2010, 20:18					</div>
				</div>
				<div class="post-content content">
					<p>Anybody care to comment on this one?</p><p>Huawei HG521 <a href="http://www.huaweidevice.com/worldwide/productFeatures.do?pinfoId=2490&amp;directoryId=2663&amp;treeId=663">http://www.huaweidevice.com/worldwide/p … treeId=663</a><br />CPU: RTL8671 (two chip + RTL8271 ADSL2+) 200MHz Mips r3k according to <a href="http://www.realtek.com.tw/products/productsView.aspx?Langid=1&amp;PNid=8&amp;PFid=10&amp;Level=4&amp;Conn=3&amp;ProdID=87">http://www.realtek.com.tw/products/prod … ;ProdID=87</a> and /proc/cpuinfo<br />RAM: 16MB<br />Flash: 4MB SPI<br />WiFi: RTL8191 b/g/n, via USB according to boot log</p><p>definitely runs linux. I have requested a copy of the source cd but had no answer so far.<br />Console (115200 8n1) and jtag headers with pinouts printed on board.</p><p>Console:<br /></p><div class="codebox"><pre><code>Booting
Press &#039;ESC&#039; to enter BOOT console...
Using Int. PHY
(c)Copyright Realtek, Inc. 2009
Project RTL867X LOADER (LZMA)
Version 00.00.10 (Dec 25 2009 11:27:08)

&lt;RTL867X&gt;help
help
info
reboot
r [addr]
w [addr] [val]
d [addr] &lt;len&gt;
ferase [offset] &lt;len&gt;
xmodem [address]
tftp [ip] [server ip] [file name]
web
&lt;RTL867X&gt;info
(c)Copyright Realtek, Inc. 2009
Project RTL867X LOADER (LZMA)
Version 00.00.10 (Dec 25 2009 11:27:08)

&lt;RTL867X&gt;BootLine: file
MAC Address [0]: 00:23:79:11:22:33
Entry Point: 0x80000000
Load Address: 0x80000000
Application Address: 0xBFC11000
Wrong Flash Setting!
Memory Configuration: ROW:4K COL:512 Bank:4Banks
MII Selection: 0 (0: Int. PHY  1: Ext. PHY)

&lt;RTL867X&gt;reboot


Booting
Press &#039;ESC&#039; to enter BOOT console...
Using Int. PHY
Listening Multicast upgrade packets....0
Decompress file... ok!
Linux version 2.6.21.5 (root@g40420m) (gcc version 3.4.6-1.3.6) #4 Thu Mar 25 17:44:34 CST 2010
CPU revision is: 0000ff00
Determined physical RAM map:
 memory: 01000000 @ 00000000 (usable)
User-defined physical RAM map:
 memory: 01000000 @ 00000000 (usable)
Built 1 zonelists.  Total pages: 4064
Kernel command line: console=ttyS0, 115200 mem=16M root=31:2
Primary instruction cache 16kB, linesize 16 bytes.
Primary data cache 8kB, linesize 16 bytes.
Synthesized TLB refill handler (17 instructions).
Synthesized TLB load handler fastpath (31 instructions).
Synthesized TLB store handler fastpath (31 instructions).
Synthesized TLB modify handler fastpath (25 instructions).
PID hash table entries: 64 (order: 6, 256 bytes)
Dentry cache hash table entries: 2048 (order: 1, 8192 bytes)
Inode-cache hash table entries: 1024 (order: 0, 4096 bytes)
Memory: 12200k/16384k available (3036k kernel code, 4184k reserved, 364k data, 104k init, 0k highmem)
Mount-cache hash table entries: 512
Checking for &#039;wait&#039; instruction...  disabled.
bhal: bhalInit entry

MXIC matched!!get SPI chip driver!
NET: Registered protocol family 16
usbcore: registered new interface driver usbfs
usbcore: registered new interface driver hub
usbcore: registered new device driver usb
Sangoma WANPIPE Router v1.1 (c) 1995-2000 Sangoma Technologies Inc.
NET: Registered protocol family 8
NET: Registered protocol family 20
NET: Registered protocol family 2
IP route cache hash table entries: 128 (order: -3, 512 bytes)
TCP established hash table entries: 512 (order: 0, 4096 bytes)
TCP bind hash table entries: 512 (order: -1, 2048 bytes)
TCP: Hash tables configured (established 512 bind 512)
TCP reno registered
squashfs: version 3.2-r2 (2007/01/15) Phillip Lougher
squashfs: LZMA suppport for slax.org by jro
io scheduler noop registered (default)
Serial: 8250/16550 driver $Revision: 1.3 $ 1 ports, IRQ sharing disabled
netlog start
serial8250: ttyS0 at MMIO 0x0 (irq = 12) is a 16550A
PPP generic driver version 2.4.2
NET: Registered protocol family 24
IMQ starting with 3 devices...
IMQ driver loaded successfully.
        Hooking IMQ before NAT on PREROUTING.
        Hooking IMQ after NAT on POSTROUTING.
flash device: 0x400000 at 0xbfc00000

MXIC matched!!get SPI chip driver!
Physically mapped flash: Found an alies 0x400000 for the chip at 0x0, mxic device detect.
Creating 3 MTD partitions on &quot;Physically mapped flash&quot;:
0x00000000-0x00010000 : &quot;boot&quot;
0x00010000-0x00011000 : &quot;flag&quot;
mtd: partition &quot;flag&quot; doesn&#039;t end on an erase block -- force read-only
0x00011000-0x00400000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-only
MoniterInit entry

Led_module_init ok&lt;6&gt;REALTEK NIC Ethernet driver v0.1 (Feb 13, 2009)
eth0.5: RTL-8139C+ at 0xb8018000, 00:e0:4d:xx:xx:xx, IRQ 26
RTL8672 NIC100 Probing..
Enable 8671G 1 function
Enable 8671 0 function
Enable 8672 function
initFreeRxSkbList
initFreeRxSkbList free_rx_skb_producer=48
ratm: Realtek SAR v1.02 (Feb 17, 2009)
RTL8192SU(for RTL8672 platform) driver version 0.13.3 (2008-10-08 - 2009-12-24)
usbcore: registered new interface driver RTL8192SU(for RTL8672 platform)
dwc_otg: version 2.60a 22-NOV-2006
----init hcd-----
DWC_otg: Using DMA mode
dwc_otg lm0: DWC OTG Controller
dwc_otg lm0: new USB bus registered, assigned bus number 1
dwc_otg lm0: irq 11, io mem 0xb8030000
DWC_otg: Init: Port Power? op_state=1
DWC_otg: Init: Power Port (0)
usb usb1: configuration #1 chosen from 1 choice
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 1 port detected
GACT probability on
Mirror/redirect action on
u32 classifier
    input device check on
    Actions configured
Netfilter messages via NETLINK v0.30.
nf_conntrack version 0.5.0 (128 buckets, 1024 max)
nf_conntrack_rtsp v0.6.21 loading
nf_nat_rtsp v0.6.21 loading
ip_tables: (C) 2000-2006 Netfilter Core Team
ipt_time loading
TCP cubic registered
NET: Registered protocol family 1
NET: Registered protocol family 17
Ebtables v2.0 registered
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Mounted root (squashfs filesystem) readonly.
Freeing unused kernel memory: 104k freed
init started: BusyBox vv1.9.1 (2010-03-25 17:45:09 CST)
starting pid 70, tty &#039;&#039;: &#039;/etc/init.d/rcS&#039;
rcs
RCS DONE
starting pid 73, tty &#039;&#039;: &#039;/bin/sh&#039;


BusyBox vv1.9.1 (2010-03-25 17:45:09 CST) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

usb 1-1: new high speed USB device using dwc_otg and address 2
usb 1-1: configuration #1 chosen from 1 choice
Boot from EFUSE
Autoload OK!!
Chip Version ID: VERSION_8192S_BCUT.
TX_FEW_INT patch --------- pool alloc
Loading drivers and kernel modules...
Start mic now ...
load cfm ok.
start log proc...
ADSL FirmwareVersion : 2.9.0.68
ADSL DRV: version : 2.9.0.68
ifconfig: SIOCSIFNETMASK: Cannot assign requested address

InitAdslMode....

InitAdsl

 RTL: Adsl DOWN.

 RTL: Adsl DOWN.

 RTL: Adsl DOWN.
Use default bin /var/cwmp now ...
ratm(itf 0): open 0.65
create: ch0 (0/65) 7679,0
sar_set_atm_data_mode
initFreeRxSkbList
initFreeRxSkbList free_rx_skb_producer=48
Enable 8671G 1 function
Enable 8671 0 function
Enable 8672 function
create: ch0 (0/65) 7679,0
applying workaround...done
++XTM f(xtmapi.c)-l(139): XTM link monitor process...1-&gt;1
device wl0 is not a slave of br0
device wl0.1 is not a slave of br0
device wl0.2 is not a slave of br0
device wl0.3 is not a slave of br0

 begin WlanUpInterfaces...
No 0  block_relay=0
acCmd:iwpriv wl0 set_mib qos_enable=1
chan = 20,chan2=0

 begin WlanStartServices...
WlanInitNvram...
START WPS SETUP!


Writing file /var/wscd.conf...
int data: 3
int data: 10
int data: 10
int data: 2
int data: 2
string data: QRWFJ6UE
ssid: TALKTALK-xxxxxx

WiFi Simple Config v1.5 (2010.03.25-09:44+0000).

device wl0 entered promiscuous mode
RCR is 0x0
A class
MacConfigBeforeFwDownload
firmware_version: 7fff, fw_EMEM_len: 43784, fw_IMEM_len: 35848
Load IMEM
urb_len=24032, txLength=24000 (USB_HWDESC_HEADER_LEN=32)
urb_len=11880, txLength=11848 (USB_HWDESC_HEADER_LEN=32)
Load EMEM
urb_len=24032, txLength=24000 (USB_HWDESC_HEADER_LEN=32)
urb_len=19816, txLength=19784 (USB_HWDESC_HEADER_LEN=32)
Load DMEM
LoadDMEMIMG(3050)
urb_len=80, txLength=48 (USB_HWDESC_HEADER_LEN=32)
LoadDMEMIMG(3052)
RTL8192 Firmware version: 32767
Load firmware successful!
&lt;---MacConfigAfterFwDownload()
finish config MAC
finish config BB
FIXME: init_beacon 4165
phy_SetUsbRFReg(): Set RegAddr(0x1e) = 0x31059 Fail!!!
phy_SetUsbRFReg(): Set RegAddr(0x1e) = 0x3105b Fail!!!
IQK: Cal fail!
[rtl8190_open, 3745]BSSID=xxxxxxxxxxxx
old txpkt_count=0, new_txpkt_count=3
br0: port 1(wl0) entering learning state
br0: topology change detected, propagating
br0: port 1(wl0) entering forwarding state
device wl0.1 is not a slave of br0
device wl0.2 is not a slave of br0
device wl0.3 is not a slave of br0

 begin WlanSetupBridge...

 wlan wps enabled
device eth0.5 entered promiscuous mode
eth0.5: Promiscuous mode enabled.
br0: port 2(eth0.5) entering learning state
br0: topology change detected, propagating
br0: port 2(eth0.5) entering forwarding state
arp uses obsolete (PF_INET,SOCK_PACKET)
atp: cur kernel version:[2.6.21.5]
device nas_0_65 entered promiscuous mode
br0: port 3(nas_0_65) entering learning state
br0: topology change detected, propagating
br0: port 3(nas_0_65) entering forwarding state
killall: ddnsc: no process killed
close atm port mirror!
++XTM f(xtmapi.c)-l(139): XTM link monitor process...1-&gt;1
br0: port 2(eth0.5) entering disabled state
++XTM f(xtmapi.c)-l(139): XTM link monitor process...1-&gt;1
eth0.5: Promiscuous mode enabled.
br0: port 2(eth0.5) entering learning state
br0: topology change detected, propagating
br0: port 2(eth0.5) entering forwarding state
++XTM f(xtmapi.c)-l(139): XTM link monitor process...1-&gt;1
ifconfig: SIOCSIFFLAGS: Cannot assign requested address
bridge br0:9 doesn&#039;t exist; can&#039;t delete it
Append upnp ssdp listener ok.
Use default bin /var/upnp now ...
printk: 131 messages suppressed.

Use default bin /var/console now ...
-------------------------------
-----Welcome to ATP Cli------
-------------------------------

Login: admin
Password:
ATP&gt;?
cls
debug
help
save
?
exit
ATP&gt;sh


BusyBox vv1.9.1 (2010-03-25 17:45:09 CST) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

# cat /proc/cpuinfo
system type             : RTL8672
processor               : 0
cpu model               : R3000 V0.0
BogoMIPS                : 398.95
wait instruction        : no
microsecond timers      : no
tlb_entries             : 32
extra interrupt vector  : no
hardware watchpoint     : no
ASEs implemented        :
VCED exceptions         : not available
VCEI exceptions         : not available</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118480">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">routednbooted</div>
					<div class="post-datetime">
						5 Oct 2010, 10:21					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for that. I&#039;ve been trying to find all the info i can on this thing. Requests for the source to terminal@huawei.com have been 100% ignored but i have found a project here that seems to support this chip <a href="http://wive-ng.sourceforge.net">http://wive-ng.sourceforge.net</a> but thats in russian and doesn&#039;t seem to want to translate properly. Project gitweb <a href="http://wive-ng.git.sourceforge.net/git/gitweb.cgi?p=wive-ng/wive-ng-dsl;a=summary">http://wive-ng.git.sourceforge.net/git/ … ;a=summary</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118516">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">routednbooted</div>
					<div class="post-datetime">
						5 Oct 2010, 17:34					</div>
				</div>
				<div class="post-content content">
					<p>wive-ng-dsl</p><p><a href="http://sourceforge.net/projects/wive-ng/">http://sourceforge.net/projects/wive-ng/</a></p><p>&quot;Alternative firmware and software with open source for platforms based on some<br /> SoC (Realtek RTL8186 - Wive-NG, Realtek RTL8671B/RTL8671BH/RTL8672 -<br /> Wive-NG-DSL, Ralink RT3050/RT3052 - Wive-NG-RTNL) . &quot;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119960">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">routednbooted</div>
					<div class="post-datetime">
						29 Oct 2010, 06:33					</div>
				</div>
				<div class="post-content content">
					<p>Source code cd is on the way.</p>											<p class="post-edited">(Last edited by <strong>routednbooted</strong> on 30 Oct 2010, 15:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140196">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">asbokid</div>
					<div class="post-datetime">
						29 Jul 2011, 00:14					</div>
				</div>
				<div class="post-content content">
					<p>No source code ever arrived from Huawei?&nbsp; This is standard practice for Huawei. There&#039;s almost no code in the firmware of these devices that Huawei has developed itself. It simply pilfers other people&#039;s contributions made under the GPL.&nbsp; Has someone got the time to pen a formal letter to Huawei HQ, with a cc: to gpl violations?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140269">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">routednbooted</div>
					<div class="post-datetime">
						30 Jul 2011, 00:04					</div>
				</div>
				<div class="post-content content">
					<p>I give up on this and give the device away. I did eventually after plenty of pestering get an email back from Huawei, they wanted 20 quid to send a cd of the source code. There&#039;s no way i&#039;ll pay that for a cd.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140271">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">jerrry94087</div>
					<div class="post-datetime">
						30 Jul 2011, 02:29					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>routednbooted wrote:</cite><blockquote><p>I give up on this and give the device away. I did eventually after plenty of pestering get an email back from Huawei, they wanted 20 quid to send a cd of the source code. There&#039;s no way i&#039;ll pay that for a cd.</p></blockquote></div><p>What is &quot;quid&quot;? <a href="http://en.wikipedia.org/wiki/Quid">http://en.wikipedia.org/wiki/Quid</a> says that quid can stand either for Euro or for Australian dollar.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140282">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">routednbooted</div>
					<div class="post-datetime">
						30 Jul 2011, 14:32					</div>
				</div>
				<div class="post-content content">
					<p>We use quid for GBPound. Anyway, i can&#039;t remember if it was Euro or GBP, either way im not paying that.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140329">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">tului</div>
					<div class="post-datetime">
						31 Jul 2011, 11:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jerrry94087 wrote:</cite><blockquote><div class="quotebox"><cite>routednbooted wrote:</cite><blockquote><p>I give up on this and give the device away. I did eventually after plenty of pestering get an email back from Huawei, they wanted 20 quid to send a cd of the source code. There&#039;s no way i&#039;ll pay that for a cd.</p></blockquote></div><p>What is &quot;quid&quot;? <a href="http://en.wikipedia.org/wiki/Quid">http://en.wikipedia.org/wiki/Quid</a> says that quid can stand either for Euro or for Australian dollar.</p></blockquote></div><p>I&#039;ve always assumed it to mean the &quot;quid&quot; from &quot;quid pro quo&quot;. Since you give this to get that. This = money.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190513">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Pteridium</div>
					<div class="post-datetime">
						31 Jan 2013, 13:14					</div>
				</div>
				<div class="post-content content">
					<p>There is a project for the RTL8672. Tested in a Huawei HG532c and works, but it needs improvements.<br /><a href="http://www.uswrt.com/download/dl/fw/rtl8672/readme.for.rtl8672.txt">http://www.uswrt.com/download/dl/fw/rtl … tl8672.txt</a><br /><a href="http://www.uswrt.com/download/dl/fw/rtl8672/">http://www.uswrt.com/download/dl/fw/rtl8672/</a></p><p>The wiki of this router:<br /><a href="http://wiki.openwrt.org/toh/huawei/hg532c">http://wiki.openwrt.org/toh/huawei/hg532c</a></p><p>Bootlog:<br /><a href="http://pastebin.com/nUquZXjN">http://pastebin.com/nUquZXjN</a></p>											<p class="post-edited">(Last edited by <strong>Pteridium</strong> on 7 Feb 2013, 00:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192903">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">wlkn</div>
					<div class="post-datetime">
						23 Feb 2013, 16:22					</div>
				</div>
				<div class="post-content content">
					<p>You can download new Beta Firmware at : <a href="http://downloads.talktalk-labs.com/trials/HG521-Beta-Firmware-Trial.zip">http://downloads.talktalk-labs.com/tria … -Trial.zip</a></p><p><em>Source: <a href="http://downloads.talktalk-labs.com/trials/">http://downloads.talktalk-labs.com/trials/</a></em></p><p>Modifying firmware&#039;s web interface process is easier thanks to the magnificent <em>Firmware Mod Kit</em> (FMK) by Craig Heffner, Jeremy Collake, et. al.</p><p><a href="http://code.google.com/p/firmware-mod-kit/">http://code.google.com/p/firmware-mod-kit/</a></p><p>Choose the firmware image from which to extract the webidx and webimg files.</p><p>And using the new tool extract-ng from the FMK toolkit, extract the squashfs root file system from the firmware image.</p><p>In that extracted file system, the two files webidx and webimg will be found under ~/fmk/rootfs/etc/</p><p>You can extract files from webimg and rebuild webimg from modified files by using webflate tool by asbokid</p><p>The filesystem and the firmware image are reconstructed using the reverse of the above.</p><p>Source (read more at): <a href="http://huaweihg612hacking.wordpress.com/2011/09/25/a-new-tool-webflate-for-building-a-new-web-interface/">http://huaweihg612hacking.wordpress.com … interface/</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p193054">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">wlkn</div>
					<div class="post-datetime">
						24 Feb 2013, 22:42					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>Please let me know if you get source codes from Huawei, or a new firmware from Huawei or your ISP.</p><p>I would like to share them on our website for other owners: <a href="http://openwag.sourceforge.net/HG521/">http://openwag.sourceforge.net/HG521/</a></p><p>Best wishes,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p281295">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">asa1365</div>
					<div class="post-datetime">
						25 Jun 2015, 08:50					</div>
				</div>
				<div class="post-content content">
					<p>where can I find source code wive-ng-dsl for rtl8671 ,I jast can find bin files.<br />please you introduce a source for it</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>