<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> ar8236 how to enable switch?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p231537">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">p1</div>
					<div class="post-datetime">
						28 Apr 2014, 12:00					</div>
				</div>
				<div class="post-content content">
					<p>I have a router TP-LINK 881N， The cpu is qca9588 and whith a switch chip ar8236.</p><p> ath79_init_mac(ath79_eth0_data.mac_addr, mac, -1);<br />I use the code </p><br /><p>&nbsp; &nbsp; &nbsp; &nbsp; ath79_init_mac(ath79_eth0_data.mac_addr, mac, -1);</p><p>&nbsp; &nbsp; &nbsp; &nbsp; /* GMAC1 is connected to the internal switch */<br />&nbsp; &nbsp; &nbsp; &nbsp; ath79_switch_data.phy4_mii_en = 1;<br />&nbsp; &nbsp; &nbsp; &nbsp; ath79_switch_data.phy_poll_mask = BIT(4);<br />&nbsp; &nbsp; &nbsp; &nbsp; ath79_eth0_data.phy_if_mode = PHY_INTERFACE_MODE_MII;<br />&nbsp; &nbsp; &nbsp; &nbsp; ath79_eth0_data.speed = SPEED_100;<br />&nbsp; &nbsp; &nbsp; &nbsp; ath79_eth0_data.duplex = DUPLEX_FULL;<br />//&nbsp; &nbsp; &nbsp; ath79_eth0_data.phy_mask = BIT(4);<br />&nbsp; &nbsp; &nbsp; &nbsp; ath79_eth0_data.mii_bus_dev = &amp;ath79_mdio0_device.dev;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; ath79_register_eth(0);</p><p>but it‘s seems all ports&nbsp; change to be wan. <br />the command # swconfig list <br />show nothing<br />this is the dmesg log</p><p>[&nbsp; &nbsp; 1.090000] eth0: Atheros AG71xx at 0xb9000000, irq 4, mode:MII<br />[&nbsp; &nbsp; 1.100000] TCP: cubic registered<br />[&nbsp; &nbsp; 1.100000] NET: Registered protocol family 17<br />[&nbsp; &nbsp; 1.110000] 8021q: 802.1Q VLAN Support v1.8</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240198">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">ranfish</div>
					<div class="post-datetime">
						14 Jul 2014, 08:35					</div>
				</div>
				<div class="post-content content">
					<h5>I got a wr941n v7 which based on qca9558+ar8236<br />Can someone help me get it working on openwrt? I&#039;am willing to donate with BTC</h5>											<p class="post-edited">(Last edited by <strong>ranfish</strong> on 14 Jul 2014, 08:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p245711">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">scscat</div>
					<div class="post-datetime">
						2 Sep 2014, 07:21					</div>
				</div>
				<div class="post-content content">
					<p>For 881n v1 and wr941n v7, ar8236 has the wrong phyid(0xff), you can make a fake phyid to get it working.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>