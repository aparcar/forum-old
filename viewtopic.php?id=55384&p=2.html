<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> PC-Engines - ALIX, APU, SW versions and related Questions</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 1 Apr 2018 and 3 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=55384&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p265492">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						14 Feb 2015, 15:00					</div>
				</div>
				<div class="post-content content">
					<p>I think I sorted the time issue.&nbsp; I had daylight savings on.&nbsp; It now looks to be adjusted for time zones correctly</p><p>RangerZ</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p265495">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">mirko_47</div>
					<div class="post-datetime">
						14 Feb 2015, 15:16					</div>
				</div>
				<div class="post-content content">
					<p>No, there isn&#039;t any, i written &quot;clear&quot; there, since i was convinced that i was writing on terminal, my bad.<br />in any case, now I&#039;m trying to include all the module that you need and build it on BB buildroot, than I&#039;ll buid again on CC trunk.<br />I&#039;ve only a question:<br />Does the Geode processor support also the digest (output of hash function) acceleration?<br />i&#039;ve find <a href="https://drive.google.com/file/d/0B1K0OQEXWad0SGpManptVUZXN0U/view?usp=sharing">this option</a> under libopenssl configuration, if u think that it can be usefull, i can add it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p265500">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						14 Feb 2015, 15:55					</div>
				</div>
				<div class="post-content content">
					<p>Mirko_47</p><p>I have not read anything that indicates digest is done in hardware.&nbsp; &nbsp;I am not clear from the screen shot if this is for hardware support or general digest support.&nbsp; if the latter then yes.&nbsp; Is there a downside to including this?&nbsp; Space is not an issue.&nbsp; the image takes only about 35% of the partition.</p><p>This seems to be the goto article on the subject, but I do not fully understand this.<br /><a href="http://www.twam.info/hardware/alix/using-geodes-aes-engine-on-alix3d3">http://www.twam.info/hardware/alix/usin … on-alix3d3</a></p><p>If you are building on BB expect that the Luci-Openvpn will not be found.&nbsp; Not sure about the dependencies.</p><p>Best Regards.... RangerZ</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p265502">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">mirko_47</div>
					<div class="post-datetime">
						14 Feb 2015, 16:25					</div>
				</div>
				<div class="post-content content">
					<p>yes, first i&#039;ve tyed with BB, since I&#039;ve already setted the buildroot, but i can&#039;t get compiled (even if I&#039;ve selected PC Engine Alix as target, it compile it as&nbsp; Google Chrome laptop, no idea why... but is known that BB isn&#039;t very good for x86 at the moment), so now I&#039;ll try with trunk.</p><p>Your last link is very usefull, as I tought CBC and ECB is needed, and by default event if hw acc. for geode is selected they aren&#039;t checked.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p265507">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						14 Feb 2015, 16:36					</div>
				</div>
				<div class="post-content content">
					<p>Mirko_47</p><p>Does the build process generate a file that indicates the options/packages, and/or is there a way to extract this for future use/reference?&nbsp; </p><p>Indirectly related, I use a USB drive with Ubuntu 14 on it mostly for G-Parted.&nbsp; Can you suggest a program (GUI based)&nbsp; that I can use to create/restore an image file (ISO probably, but I do not really care) to/from a CF card.&nbsp; I have no unused CF cards, and would like to archive an existing OpenWRT system in case I want it in the future.</p><p>Thanks... RangerZ</p>											<p class="post-edited">(Last edited by <strong>RangerZ</strong> on 14 Feb 2015, 16:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p265514">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">mirko_47</div>
					<div class="post-datetime">
						14 Feb 2015, 17:10					</div>
				</div>
				<div class="post-content content">
					<p>regarding a GUI based program:<br />if I&#039;ve to be honest i&#039;ve no idea, I use linux (ubuntu) as primary operating system, when I&#039;ve time i try to google it<br />Regarding packages: <br />if I don&#039;t mistake, the buildroot download the makefile from openwrt.org and then use this file to generate the package with .ipk extension.<br />Now I&#039;m building from trunk CC, if I get it compiled (keep my finger crossed) I&#039;ll try to collect all the compiled package</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p265517">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">mirko_47</div>
					<div class="post-datetime">
						14 Feb 2015, 17:46					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve just uploaded all here: <a href="https://drive.google.com/folderview?id=0B1K0OQEXWad0fjJLM2VxN0RnRzU0eW81eHRuMGhyRFBzVXMteVpLQk5BeUs3RnIwU1pWNjQ&amp;usp=sharing">https://drive.google.com/folderview?id= … sp=sharing</a></p><p>let me know if it works.</p><p>EDIT: Even fi I&#039;ve uploaded also the compiled package I suggest you to download all the package wich you&#039;re interested, from download.openwrt.org:<br /><a href="http://downloads.openwrt.org/snapshots/trunk/x86/generic/packages/">http://downloads.openwrt.org/snapshots/ … /packages/</a></p>											<p class="post-edited">(Last edited by <strong>mirko_47</strong> on 14 Feb 2015, 17:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p265522">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						14 Feb 2015, 18:47					</div>
				</div>
				<div class="post-content content">
					<p>Hi Mirko_47</p><p>Thank you very much!&nbsp; I have the 3 files.</p><p>I see a file in the packages base called base-files_157-r44445_x86.ipk.&nbsp; Is the CC build version R44445?</p><p>I am downloading the packages now.</p><p>I am not clear I understand your comments in post 31.&nbsp; In the screenshots&nbsp; see the different selections you make to create the IMG (not sure of the correct terms for each item which is part of the problem).&nbsp; I see at the top of the page .config. and some of the reading leads me to believe there is a file that contains the selections (maybe separate from the IPK files).&nbsp; From the page <a href="http://wiki.openwrt.org/doc/howto/build">http://wiki.openwrt.org/doc/howto/build</a>&nbsp; just above &quot;Explanations&quot; <br /></p><div class="quotebox"><blockquote><p>When you save your configuration, the file &lt;buildroot dir&gt;/.config will be created according to your configuration.</p></blockquote></div><p>Am I correct that this file, once created, can be reused to rerun the build?<br />Is it still usable if the package versions change?<br />Does it have the &quot;parameters&quot; =&gt; Support for Geode&quot; etc?</p><p>Again, a lot of the process I do not understand yet.&nbsp; Maybe there&#039;s a youtube on this.</p><p>We are expecting 18&quot; of snow to begin shortly, and I need to go out before it starts.</p><p>Best Regards... RangerZ</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p265534">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">mirko_47</div>
					<div class="post-datetime">
						14 Feb 2015, 19:58					</div>
				</div>
				<div class="post-content content">
					<p>No wait, .ipk files are the files that contains the packages or modules of OpenWRT, such .exe for windows.<br />THe built image, as the previously that I&#039;ve uploaded has .img.gz extension.</p><p>On the previously linked google drive folder I&#039;ve uploaded the image, MD5 checksum, and an archive that contains all the built packages.<br />[spoiler]<br />as I wrote in previous post, to flash the image, since you&#039;ve said that you can run Ubuntu &quot;live&quot; from your USB drive, I suggest you to use it for flash the image on CF, so:<br />-Run gparted to clear the partition table on the CF, take note of the drive path (for example: /dev/sdd)<br />-Run terminal, then &quot;cd&quot; to the path where the image is stored, and decompress the image running:<br /></p><div class="codebox"><pre><code>gunzip image_name.img.gz</code></pre></div><p>-flash the uncompressed image via dd:<br /></p><div class="codebox"><pre><code>sudo dd if=image_name of=CF_path BS=1M</code></pre></div><p>To sum up, with an example, after you&#039;ve cleared the partition table:<br /></p><div class="codebox"><pre><code>cd /home/mirko/Desktop/openwrt/
gunzip openwrt-x86-alix2-combined-ext4.img.gz
sudo dd if=openwrt-x86-alix2-combined-ext4.img of=/dev/sdd BS=1M</code></pre></div><p>[/spoiler]</p><p>Regarding the .config file:<br />yes, this file is the output of &quot;make menuconfig&quot; command, and contains the index of the package selected into the buildroot.<br />However your case, there isn&#039;t only one .config file, output of make menuconfig command, but there&#039;s also another one, this time output of make kernel_menuconfig command.</p><p>As you say, if stored it can be used for rebuid an image (unless upgrading the buildroot, that sometimes can bring changes into package names/dependencies, especially into trunk subversion, wich at the moment is the only one that it works properly with our x86 boards)</p><p>Nwo I&#039;m out of home, but next time that I&#039;ll turn on the desktop that i&#039;ve used to build the image, I&#039;ll uplad the 2 .config files, and the output of diffconfig.sh command wich helps you to see wich package/modules were included into the image.</p><p>In any case, I&#039;ve selected all the parameters required to use hw encryption acceleration; obviously I&#039;m not sure that will work, but according to the description of the selected packages, and the excellet article that you&#039;ve found, should work this time.</p><br /><p>Good luck with the snow <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><br /><br /><p>EDIT: I think that I&#039;ve just made a (very) stupid thing, I&#039;ve drag n drop the 2 .config files into a folder on Ubuntu, which than I&#039;ve renamed it into .config; and int seems that doing this I&#039;ve lost the folder....</p>											<p class="post-edited">(Last edited by <strong>mirko_47</strong> on 15 Feb 2015, 13:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p265631">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						15 Feb 2015, 17:53					</div>
				</div>
				<div class="post-content content">
					<p>Undo?&nbsp; &nbsp;Undelete?&nbsp; &nbsp;Is it easy enough to summarize the major changes from base that you made in some simple text or was it mostly the 2 screen shots?</p><p>I think I understand.&nbsp; I have built a Ubunto VM since yesterday, and have nothing but problems.&nbsp; Just finding applications is too hard compared to windows and I am having trouble mounting the CF reader.&nbsp; I thought it would be more intuitive.&nbsp; All I wanted to do was learn DD to back up a CF card.&nbsp; </p><p>Based on this link:&nbsp; <a href="http://askubuntu.com/questions/491082/steps-to-create-dd-image-file-from-usb-and-restore-image-to-a-different-usb">http://askubuntu.com/questions/491082/s … ferent-usb</a>&nbsp; &nbsp;If I want to copy a CF card (complete) will this be correct?<br /></p><div class="codebox"><pre><code>sudo -i
dd if=/dev/sdc1 of=/dev/sda/home/[user]/AA1209_VPN.img bs-512 count=1</code></pre></div><p>where the CF card is mounted in sdc1 and the output file is AA1209_VPN.img on sda in my &quot;documents&quot; folder.</p><p>To restore<br /></p><div class="codebox"><pre><code>sudo -i
dd if=/dev/sda/home/[user]/AA1209_VPN.img of=/dev/sdc1 bs=512 count=1</code></pre></div><p>12&quot; so far last night, almost 90&quot; since 1/23/15.</p><p>Thanks again for your help.... RangerZ</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p265655">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">mirko_47</div>
					<div class="post-datetime">
						15 Feb 2015, 20:28					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve tried also to perform an &quot;undo&quot;, but it doesn&#039;t work... if I have to be honest this is the first time that I ran into this problem.... quite strange problem...<br />In any case, when I&#039;ve 20mins free I will rebuild it and then I will upload the 2 .config.</p><p>Regarding backup, I never did something similar, but: <br />Typically Ubuntu &quot;mounts&quot; the local devices on<br /></p><div class="codebox"><pre><code>/media/</code></pre></div><p>If tou want to be sure, I suggest you:<br />-open a gparted or disk utility window, and take note of the CF path, it will be /dev/sdXY <br />&nbsp; (&quot;X&quot; refers to the drive letter, and &quot;Y&quot; refers to the partition number, since you&#039;ve to copy the entire drive, including the partition table &amp; MBR, you need only to know the drive letter &quot;X&quot;)<br />-reach via GUI to the folder where you want to store the CF backup<br />-right click on the folder, ad take note of the path (it will be /home/username/path or someting similar)<br />-open a terminal window, and according of what is written into the article you&#039;ve linked, perform the backup running:<br /></p><div class="codebox"><pre><code>sudo dd if=/dev/sdX of=/media/username/path/backup.img bs=512 count=1</code></pre></div><p>To restore the backup:<br />-open a terminal window<br />-cd to the folder where the image is stored, so for example:<br /></p><div class="codebox"><pre><code>cd /home/username/path</code></pre></div><p>-restore the backup running:<br /></p><div class="codebox"><pre><code>sudo dd if=backup.img of=/dev/sdX</code></pre></div><br /><p>... So what you&#039;ve written it&#039;s correct just replace sdc1 with sdc.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266005">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">mirko_47</div>
					<div class="post-datetime">
						18 Feb 2015, 11:23					</div>
				</div>
				<div class="post-content content">
					<p><a href="https://drive.google.com/folderview?id=0B1K0OQEXWad0fnYydGE0dFgzTllJU2NldkRzd1kybkZGbXlRTTVERGZXSWRpUWE4SXBaNUk&amp;usp=sharing">https://drive.google.com/folderview?id= … sp=sharing</a><br />This itme I&#039;ve uploaded: image, packages, .config (output of make menuconfig), .config (output of make kernel_menuconfig), and a list of the seected packages (output of diffconfig.sh)</p><p>Quite strange fact: running diffconfig.sh It says that there are some unmet dependencies with libopenssl (see upoloaded screenshot), but as you can see I&#039;ve included it (see diffout.txt or CC_menu.config).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266053">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						18 Feb 2015, 18:21					</div>
				</div>
				<div class="post-content content">
					<p>Hi Mirko_47</p><p>I have installed the previous IMG file and it appears to work fine.&nbsp; I say &quot;appears&quot; as GParted indicates there is a problem with the boot partition.&nbsp; I got the following message:</p><div class="codebox"><pre><code>Unable to read the contents of this file system!
Because of this some operations may be unavailable.
The cause might be a missing software package.
The following list of software packages is required for ext2 file system support:  e2fsprogs.</code></pre></div><p>..but I also get this on the original image too when I checked it in GParted (V.18).&nbsp; I did not get this on my AA image.&nbsp; What is interesting is that when I rebooted Ubunto the next day I did not get the errors.&nbsp; It turns out there is a package e2fsprogs which is related to the file system support for ext2.&nbsp; I have in any event downloaded and installed the package.</p><p>I did not have the package on any of the lists I sent you, and do no know if this is any kind of real issue (it boots).</p><p>I have also got VPN up and running, but am sorry to say I see no performance difference with the tweaks.&nbsp; </p><p>I was able to make a backup image of a CF card, as well as restore it.&nbsp; The image file is the size of the card, with lots of unallocated&nbsp; space.&nbsp; I was able to &quot;Truncate&quot; the img file.&nbsp; &nbsp;I was surprised that I was able to DD a large file onto a smaller disk, so truncated or not I can restore the IMG file.&nbsp; I was not as successful saving the partition and MBR, and the individual partitions. Gparted indicated file system issues, and I did not try to boot the card. </p><p>Regarding the new files of this morning, I also see that the kmod-crypto-ocf is not in the diffout.txt.&nbsp; It should have been the only one of the 3 referenced in the screen print on my list.&nbsp; I also see that from the diffout.txt there are other missing kmod-crypto packages. (aead, aes, arc4, cbc, core, ecb, hash, hw-geode, manage, ocf, pcompress, sha1).&nbsp; I do not know what the diffout.txt file represents, so I can not say it is wrong.</p><p>Is this built on the files from today?</p><p>I have no idea what this means, but when I ran the OpenSSL speed test there was a reference to &quot;unused-but-set-variable&quot;<br /></p><div class="codebox"><pre><code> root@OpenWrt:~# openssl speed -evp aes-128-cbc -engine cryptodev
engine &quot;cryptodev&quot; set.
Doing aes-128-cbc for 3s on 16 size blocks: 117832 aes-128-cbc&#039;s in 0.11s
Doing aes-128-cbc for 3s on 64 size blocks: 112429 aes-128-cbc&#039;s in 0.12s
Doing aes-128-cbc for 3s on 256 size blocks: 94550 aes-128-cbc&#039;s in 0.07s
Doing aes-128-cbc for 3s on 1024 size blocks: 60887 aes-128-cbc&#039;s in 0.07s
Doing aes-128-cbc for 3s on 8192 size blocks: 13500 aes-128-cbc&#039;s in 0.04s
OpenSSL 1.0.2 22 Jan 2015
built on: reproducible build, date unspecified
options:bn(64,32) rc4(ptr,char) des(idx,cisc,2,long) aes(partial) blowfish(ptr)
compiler: i486-openwrt-linux-uclibc-gcc -I. -I.. -I../include  -fPIC -DOPENSSL_P                                                         IC -DZLIB_SHARED -DZLIB -DOPENSSL_THREADS -D_REENTRANT -DDSO_DLFCN -DHAVE_DLFCN_                                                         H -I/home/mirko/Desktop/OpenWRT/trunk/staging_dir/target-i386_geode_uClibc-0.9.3                                                         3.2/usr/include -I/home/mirko/Desktop/OpenWRT/trunk/staging_dir/target-i386_geod                                                         e_uClibc-0.9.33.2/include -I/home/mirko/Desktop/OpenWRT/trunk/staging_dir/toolch                                                         ain-i386_geode_gcc-4.9-linaro_uClibc-0.9.33.2/usr/include -I/home/mirko/Desktop/                                                         OpenWRT/trunk/staging_dir/toolchain-i386_geode_gcc-4.9-linaro_uClibc-0.9.33.2/in                                                         clude -DOPENSSL_SMALL_FOOTPRINT -DHAVE_CRYPTODEV -DUSE_CRYPTODEV_DIGESTS -DOPENS                                                         SL_NO_ERR -DTERMIOS -Os -pipe -march=geode -mmmx -m3dnow -fno-caller-saves -fhon                                                         our-copts -Wno-error=unused-but-set-variable -fpic -fomit-frame-pointer -Wall
The &#039;numbers&#039; are in 1000s of bytes per second processed.
type             16 bytes     64 bytes    256 bytes   1024 bytes   8192 bytes
aes-128-cbc      17139.20k    59962.13k   345782.86k   890689.83k  2764800.00k</code></pre></div><p>I only mention it as it relates to openssl.&nbsp; The test string is from the ALIX wiki.&nbsp; I am thinking that an unused parameter in the string means the required pkg may be missing or not configured.</p><p>I will need to put this aside until the weekend, but will load the image and let you know what is actually it it as soon as I can.</p><p>Best regards.... RangerZ</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266084">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">mirko_47</div>
					<div class="post-datetime">
						18 Feb 2015, 23:31					</div>
				</div>
				<div class="post-content content">
					<p>Now,</p><p>About the performance improvements, honestly I don&#039;t know what to say... the wiki is quite clear, as the link you&#039;ve&nbsp; previously posted, and I&#039;ve followed all the described procedures.</p><p>Regarding the &quot;error&quot; that I get performing diffconfig.sh; well I think that this isn&#039;t an error since the dependencies (libopenssl) that it says that is missing aren&#039;t missing, if you try to open the file named CC_MENU (if u&#039;re using win, try notepad++) you can see what I&#039;m talking about.<br />This is valid also for the packages that you&#039;ve mentioned (aead, aes, arc4, cbc, core, ecb, hash, hw-geode, manage, ocf, pcompress, sha1), give a look into cc_menu, all of this where set with &quot;y&quot;</p><p>The google drive folder linked today contains the image (, packages, ...) built this morning.<br />If also this one doesn&#039;t work properly, i&#039;ll suggest you to try to contact the mantainer of the package that for sure they will be more informed than me.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267458">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						3 Mar 2015, 05:27					</div>
				</div>
				<div class="post-content content">
					<p>Hi Mirko_47</p><p>I am sorry it has taken me so long to get back to you on this.&nbsp; Busy with winter damage and other matters.</p><p>I appreciate all the help you have been able to give on this so far.&nbsp; You have been very generous with your time.&nbsp; As you suggest I am composing a new note on the crypto issues, as they have not improved with the latest build.</p><p>I have a question on the work you have done.&nbsp; I found some information at the very bottom of this post&nbsp; <a href="http://wiki.openwrt.org/inbox/benchmark.openssl">http://wiki.openwrt.org/inbox/benchmark.openssl</a> in the &quot;Enable hardware acceleration&quot; section.&nbsp; I do not think I saw this before.&nbsp; While the libopenssl module is included, do you know if the configuration of this feature was something that you ever found?&nbsp; &nbsp;I do not see a reference in the CC_Menu or CC_Kernel config called &quot;Crypto acceleration support&quot;.&nbsp; &nbsp;I do see something called &quot;CONFIG_OPENSSL_ENGINE_CRYPTO=y&quot; in the CC_Menu_Config, which I think may be the &quot;code&quot; for it.&nbsp; &nbsp; I would like to try to understand this for my note.</p><p>Thank you.... RangerZ</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267648">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">mirko_47</div>
					<div class="post-datetime">
						4 Mar 2015, 19:50					</div>
				</div>
				<div class="post-content content">
					<p>Sorry about the damage of the blizzard/winter, I hope that you are able to fix the problems without too many complications.</p><p>I&#039;ve added a screenshot to the previously liked google drive folder: <a href="https://drive.google.com/open?id=0B1K0OQEXWad0T0NPUDJTTl9NME0&amp;authuser=0">https://drive.google.com/open?id=0B1K0O … authuser=0</a><br />As u can see from the package description, the result selecting &quot;Crypto acceleration support&quot; under </p><div class="codebox"><pre><code>make menuconfig-&gt;Libraries-&gt;SSL-&gt;LibopenSSL-&gt;Config </code></pre></div><p> menu is set <br /></p><div class="codebox"><pre><code>CONFIG_OPENSSL_ENGINE_CRYPTO</code></pre></div><p>to &quot;y&quot;, as were setted into the last build.</p><p>In any case I&#039;m not sure if this 3 option:<br /></p><div class="codebox"><pre><code>CONFIG_OPENSSL_WITH_EC
CONFIG_OPENSSL_WITH_EC2M
CONFIG_OPENSSL_WITH_SSL3</code></pre></div><p>(in the last build they were set to y)<br />Must be selected to work with the Geode AES engine; when I&#039;ve some free time I&#039;ll try to build a new image without these three option disabled.<br />The fact is that I wasn&#039;t able to find if that option are required, so the only way to proceed is by trial and error...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267845">
				<div class="post-metadata">
					<div class="post-num">Post #42</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						6 Mar 2015, 05:15					</div>
				</div>
				<div class="post-content content">
					<p>Hi Mirko_47</p><p>At the moment I am of the opinion that you have things correctly configured, and that what is not documented is the need to have the application that uses the encryption engine specifically call for it.</p><p>This is the best note so far.&nbsp; &nbsp;<a href="http://www.fantaghost.com/openvpn-accelerator-on-alixboard-using-pfsense">http://www.fantaghost.com/openvpn-accel … ng-pfsense</a>&nbsp; &nbsp;If I </p><div class="codebox"><pre><code>$ dmesg | grep AES</code></pre></div><p> I get the message </p><div class="codebox"><pre><code>geode-aes: GEODE AES engine enabled</code></pre></div><p> which leads me to believe that the configuration is correct.&nbsp; </p><p>If you look at the second graphic (click on it) near the bottom it tells me to add the string </p><div class="codebox"><pre><code> engine cryptodev;</code></pre></div><p> to my OpenVPN script.</p><p>I have added the parameter, but am not sure that I am seeing a difference.&nbsp; The variance in the test data is so wide (30-50%), it is hard to be sure that I am seeing a real improvement.&nbsp; It&#039;s not the 4x performance this article suggests <a href="http://www.twam.info/hardware/alix/using-geodes-aes-engine-on-alix3d3">http://www.twam.info/hardware/alix/usin … on-alix3d3</a></p><p>Cheers ... RangerZ</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267891">
				<div class="post-metadata">
					<div class="post-num">Post #43</div>
					<div class="post-author">mirko_47</div>
					<div class="post-datetime">
						6 Mar 2015, 15:51					</div>
				</div>
				<div class="post-content content">
					<p>You didn&#039;t noticed the same performance improvement described on twam.info because you&#039;re running tests on VPN instead of running test on disk encryption, infact the results on twam.info refers to encryption performance with LUKS.<br />If you want to compare the performance that you get with something comparable, you can have a look of <a href="https://doc.pfsense.org/index.php/Are_cryptographic_accelerators_supported">this case of use</a>, where the board were used for the same purpose.<br />However, if adding the string:<br /></p><div class="codebox"><pre><code>engine cryptodev;</code></pre></div><p>to your OpenVPN script brings you a performance improvement of about 30%, if I don&#039;t mistake comparing that result with the ones in the previous link<br /><span class="postimg"><img src="https://doc.pfsense.org/images/6/6e/Alix2d3_vpn_throughput.png" alt="https://doc.pfsense.org/images/6/6e/Alix2d3_vpn_throughput.png" /></span><br />we can say that there&#039;s no a huge difference, right?</p><br /><p>In any case tomorrow I already&nbsp; have to build an image for my APU1d, so if you think that into two .config previously uploaded on google drive is still missing something, you can indicate here what must change, and then I can load it into the image builder, and try build a new image with the specified changes.</p><p>regards <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267974">
				<div class="post-metadata">
					<div class="post-num">Post #44</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						7 Mar 2015, 08:55					</div>
				</div>
				<div class="post-content content">
					<p>Mirko_47</p><p>I did a little research on the three items, and tend to think I do not need these.<br /></p><div class="codebox"><pre><code>CONFIG_OPENSSL_WITH_EC
CONFIG_OPENSSL_WITH_EC2M
CONFIG_OPENSSL_WITH_SSL3</code></pre></div><p><a href="https://www.openssl.org/docs/apps/ec.html">https://www.openssl.org/docs/apps/ec.html</a><br /><a href="https://www.openssl.org/docs/apps/ciphers.html">https://www.openssl.org/docs/apps/ciphers.html</a><br />As best I can tell EC2M is dependent on EC.&nbsp; One note i found talked about the size, and implied that space was the concern.&nbsp; Not my concern with a CF card.<br /><a href="https://lists.openwrt.org/pipermail/openwrt-devel/2013-June/020406.html">https://lists.openwrt.org/pipermail/ope … 20406.html</a></p><p>I also do not think the <span class="bbu">CONFIG_PACKAGE_libpolarssl</span> is needed.&nbsp; PolarSSL and OpenSSL are not the same package.</p><p>I do not really understand the section n the .config graphic at the bottom (Selected by:...).&nbsp; If I am reading this correctly it is 3 sets of parameters.&nbsp; I believe UML is user mode linux, but this does not mean anything to me in terms of config.</p><p>Looking at this page, <a href="http://wiki.openwrt.org/doc/hardware/cryptographic.hardware.accelerators">http://wiki.openwrt.org/doc/hardware/cr … celerators</a> it sounds like we do not want both cryptodev-lnux and OCF.&nbsp; There is a note under &quot;With OCF&quot; </p><div class="quotebox"><blockquote><p>This must not be combined with cryptodev-linux.</p></blockquote></div><p> Not sure how this impacts the options in the <span class="bbu">OPENSSL_ENGINE_CRYPTO</span> section you showed in the graphic which reference this module.</p><p>Below that is &quot;Adding libraries&quot;.&nbsp; The <span class="bbu">libgnutls</span> has not been included, though I do not know what it&#039;s use is.</p><p>Finally, in the &quot;Enabling Specific Hardware&quot;&nbsp; section, I am considering purchasing a Soekris vpn1411 card to improve performance, so the related items could also be added.<br /></p><ul><li><p>kmod-crypto-des[*/]</p></li><li><p>kmod-crypto-hw-hifn-795x&nbsp; </p></li></ul><p>Regarding the use case, I was wondering the same, but this was a link from the ALIX Wiki.&nbsp; </p><p>As for the pfSence comparison of VPNs, this was an impressive find, but a disappointing result for the HW Crypto.&nbsp; The difference with and with out crypto is very small.&nbsp; I think 30% is within my margin of error.&nbsp; I do not get a 3600x performance boost with the Openssl speed test, but maybe half of that, which is still quite large (but apparently meaningless if the real increase is 30%)</p><p>How did you embed the graphic???</p><p>Cheers... RangerZ</p>											<p class="post-edited">(Last edited by <strong>RangerZ</strong> on 7 Mar 2015, 08:57)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267984">
				<div class="post-metadata">
					<div class="post-num">Post #45</div>
					<div class="post-author">mirko_47</div>
					<div class="post-datetime">
						7 Mar 2015, 12:31					</div>
				</div>
				<div class="post-content content">
					<p>This is the link to the new build:<br /><a href="https://drive.google.com/folderview?id=0B1K0OQEXWad0fmtKcUM3RWJ0bDRSOXV5TmJ2dktDRWxPUmZNS2tSNUlTa0Z3dENjQkNfOGs&amp;usp=sharing">https://drive.google.com/folderview?id= … sp=sharing</a></p><p>major changes:<br /><strong>.1:</strong> disabled OCF: as you written this must not combined with cryptodev-linux (sorry for the previous build that were combined), so now cryptodev only is enabled.<br />(<span class="bbu">polarssl can&#039;t be disabled</span>)<br /><strong>.2:</strong> disabled elliptic curve support for SSL: <br />so,<br /></p><div class="codebox"><pre><code>CONFIG_OPENSSL_WITH_EC
CONFIG_OPENSSL_WITH_EC2M
CONFIG_OPENSSL_WITH_SSL3</code></pre></div><p>Were set to &quot;n&quot;, but I&#039;m quite sure that it doesn&#039;t make any difference, in terms of performance.<br />I&#039;ve disabled these options only to be sure that it can&#039;t cause further problems.</p><p><strong>.3:</strong> enabled libgnutls whith cryptographic acceleration support:<br />so<br /></p><div class="codebox"><pre><code>libgnutls</code></pre></div><p>were set to &quot;y&quot;, as the sub-option <br /></p><div class="codebox"><pre><code> /dev/crypto support</code></pre></div><p><strong>.4:</strong> disabled &quot;size optimization&quot; under OpenVPN/OpenSSL:<br />(A brief description <a href="https://drive.google.com/file/d/0B1K0OQEXWad0b3BlclZrZUMyUFk/view?usp=sharing">here</a>)<br />I&#039;m not sure that it can help, but generally run code that were not optimized for size will be faster.<br /><strong>.5:</strong> compiled with GCC optimization set to -O3:<br />same reason described above, this shuld help the code to be faster.</p><p>Regards.</p><div class="quotebox"><cite>RangerZ wrote:</cite><blockquote><p>How did you embed the graphic???</p></blockquote></div><p><a href="https://forum.openwrt.org/help.php?section=img">https://forum.openwrt.org/help.php?section=img</a></p>											<p class="post-edited">(Last edited by <strong>mirko_47</strong> on 7 Mar 2015, 15:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p268409">
				<div class="post-metadata">
					<div class="post-num">Post #46</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						11 Mar 2015, 16:43					</div>
				</div>
				<div class="post-content content">
					<p>Hi Mirko_47</p><p>Well I hit the wall as we say.</p><p>I upgraded to the latest OpenVPN client SW so the new OpenSSL library would match the one in the image, and everything has slowed to a crawl.&nbsp; I now can only get .5Mb/s.&nbsp; This is with the R44462 version of OpenWRT.&nbsp; I have spent 3 days trying to resolve this, including uninstalling and returning to the previous version of OpenVPN.&nbsp; I think it&#039;s PC/browser related, as I can get slightly better from Mozilla (~1.5-2 Mb/s).&nbsp; I have also gone back to V44445 with no improvement in browser speed.</p><p>I did load the newest image Tuesday.&nbsp; I wanted to see if this would make a difference.&nbsp; Unfortunately OpenVPN will not start.&nbsp; I guess one of the modules we took out was important, probably OCF.&nbsp; The Crypto Hardware page and ALIX wiki are in conflict on OCF.</p><p>I posted a question on the OpenVPN forum, and realized that I have been struggling with this solution for 6 months.&nbsp; While I intend to see if there are any solutions that present themselves from that front, I am of the opinion that I may have to abandon this project.&nbsp; It&#039;s just sucking up too much time.</p><p>I appreciate all you the help and support you have given.</p><p>Best Regards...RangerZ</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=55384&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>