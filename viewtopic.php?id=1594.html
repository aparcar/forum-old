<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WDS Performance Poll</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 8 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p7593">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">JamesX2</div>
					<div class="post-datetime">
						26 May 2005, 12:15					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I&#039;ve tried HyperWRT and DD-WRT, &quot;didn&#039;t want to try Svea$oft&quot;, and have speed tested two routers bridged via WDS and they are both the same speed at 1.5MBytes/sec when transfering a 2GByte file.</p><p>Could anyone please tell me what WDS speeds they get when bridging two routers as I am looking for the fastest WDS firmware and being a Linux Newbie I&#039;m intrigued by OpenWRT <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><br /><p>Cheers,</p><p>JamesX2.....</p>											<p class="post-edited">(Last edited by <strong>JamesX2</strong> on 26 May 2005, 12:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p7631">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">wirelessjoe</div>
					<div class="post-datetime">
						27 May 2005, 05:34					</div>
				</div>
				<div class="post-content content">
					<p>wds is slow, if you want fast stuff, then remove wds and break the Bridge, teach your wrt to how to route each packet. I know that if you remove wds then you&#039;ll have to set almost everything by your self. but !!! you want fast, </p><p>fine tune your iptables firewall rules<br />unload all unused modules<br />remove everything that you never use</p><p>don&#039;t install any service on the router<br />keep it very simple</p><p>now you can transfer your 2GB file in a second.<br />hah</p><p>I set up a network, that almost enterprise level, not a hummmm. Thank you OpenWrt</p><p>wj</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p7641">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">JamesX2</div>
					<div class="post-datetime">
						27 May 2005, 11:35					</div>
				</div>
				<div class="post-content content">
					<p>Thanks Wirelessjoe,</p><p>This sounds like a great solution, I had considered routing before and even tested it on other WRT54G firmware but always got 1.5MBytes/sec.</p><p>I&#039;m guessing that these firmwares all had briding enabled by default and so this explains the slow performance.</p><p>I have one concern though with routing and that is if I have a lot of clients connected and they are hammering the network with perhaps thousands of concurrent TCP/IP connections will the router get overwhelmed....</p><p>I&#039;m not sure if the router keeps track of TCP/IP connections in a table or something as if this is the case the table will have a limited size and so the router could get knocked out I&#039;m guessing !!!</p><p>I&#039;m confident that with WDS this would not be a problem as WDS is a layer2 thing <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Does this sound correct or am I being Dim <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><br /><p>Cheers, JamesX2.....</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p8650">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">wirelessjoe</div>
					<div class="post-datetime">
						22 Jun 2005, 21:26					</div>
				</div>
				<div class="post-content content">
					<p>JamesX2 You are correct, if you have more clients then you will need more routers</p><p>yes WDS won&#039;t work without a Bridge :- however this is fine if we have more APs</p><p>Client-A------[AP-A-WDS]_____[WRT-AA-[BR]-WDS].............[WRT-BB-[BR]-WDS]____[AP-B-WDS]-----Client-B</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p8824">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">trebiani</div>
					<div class="post-datetime">
						28 Jun 2005, 09:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>wirelessjoe wrote:</cite><blockquote><p>now you can transfer your 2GB file in a second.<br />hah</p></blockquote></div><p>hi wirelessjoe!<br />your transfer speed sounds great!! i want that too!!! ;-)<br />can you explain your configuration a little bit (the steps to get a really fast config)?</p><p>what router are you using and which revision? is it really stable?</p><p>greetings,<br />treb</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p8825">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">sbingner</div>
					<div class="post-datetime">
						28 Jun 2005, 09:30					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>trebiani wrote:</cite><blockquote><div class="quotebox"><cite>wirelessjoe wrote:</cite><blockquote><p>now you can transfer your 2GB file in a second.<br />hah</p></blockquote></div><p>hi wirelessjoe!<br />your transfer speed sounds great!! i want that too!!! ;-)<br />can you explain your configuration a little bit (the steps to get a really fast config)?</p><p>what router are you using and which revision? is it really stable?</p><p>greetings,<br />treb</p></blockquote></div><p>You cannot transfer a 2GB file in one second.</p><p>It&#039;s actually possible to use routing over WDS links with WPA, but you have to hack the kernel a little so it dosnt shut down the ports when spanning tree turns them off... I have something working but I want to work out all the bugs before I post it widely.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p8827">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">trebiani</div>
					<div class="post-datetime">
						28 Jun 2005, 10:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>sbingner wrote:</cite><blockquote><div class="quotebox"><cite>trebiani wrote:</cite><blockquote><div class="quotebox"><cite>wirelessjoe wrote:</cite><blockquote><p>now you can transfer your 2GB file in a second.<br />hah</p></blockquote></div><p>hi wirelessjoe!<br />your transfer speed sounds great!! i want that too!!! ;-)<br />can you explain your configuration a little bit (the steps to get a really fast config)?</p><p>what router are you using and which revision? is it really stable?</p><p>greetings,<br />treb</p></blockquote></div><p>You cannot transfer a 2GB file in one second.</p><p>It&#039;s actually possible to use routing over WDS links with WPA, but you have to hack the kernel a little so it dosnt shut down the ports when spanning tree turns them off... I have something working but I want to work out all the bugs before I post it widely.</p></blockquote></div><p>thanx for your explanation! the wds thing sounds quite complicated. i wait for an downloadable image ;-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p8851">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">wirelessjoe</div>
					<div class="post-datetime">
						28 Jun 2005, 19:52					</div>
				</div>
				<div class="post-content content">
					<p>You cannot transfer a 2GB file in one second, sorry I was just kidding !</p><p>Transfer 5GB in 30-40 min is My True answer with WPA-PSK-AES-WDS ad_hoc mode</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p8852">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">trebiani</div>
					<div class="post-datetime">
						28 Jun 2005, 20:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>wirelessjoe wrote:</cite><blockquote><p>You cannot transfer a 2GB file in one second, sorry I was just kidding !</p><p>Transfer 5GB in 30-40 min is My True answer with WPA-PSK-AES-WDS ad_hoc mode</p></blockquote></div><p>1GB/sec would be nice&nbsp; =-0<br />well i know that&#039;s way to fast, but your postings sounds like you know how to performance tune a wrt router.</p><p>within the next few days i would like to create a - hopefully - stable configuration with 5 seperated vlans (internet, dmz1, dmz2, wireless, intranet) connected by the router and controlled by a firewall. any suggestions or hints are appreciated. after finishing this task i want to post my experiences on this forum - with a small howto.</p><p>greetings,<br />treb</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p8854">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">wirelessjoe</div>
					<div class="post-datetime">
						28 Jun 2005, 20:37					</div>
				</div>
				<div class="post-content content">
					<p>Dear Trebiani:</p><p>Yes we can tune TCP Protocol stack</p><p>when we need Large and Fast the Cisco IOS software and Hardware is hard to beat :-</p><p>if you don&#039;t have a good hand on Linux don&#039;t break the bridge, stay with the bridge<br />if you need good security - easy setup (I mean WPA) then stick by Linksys Original Firmware like Hyperwrt - read this post <a href="http://forum.openwrt.org/viewtopic.php?id=1835">http://forum.openwrt.org/viewtopic.php?id=1835</a> ,&nbsp; you will need help, so please ask as you go </p><p>I used Unix/BSD/Linux IBM Mainframe for Last 10 years, C Programmer,&nbsp; and Network Hardware Technician, but still have problems, still learning how to compile the kernel (I don&#039;t feel bad about it) we together build Linux Old Router,&nbsp; I am still holding that mirror here is the link <a href="http://upnet.dyndns.org/lrp/">http://upnet.dyndns.org/lrp/</a> I don&#039;t know what happend to Charles Steinkuehler, I hope he is doing well and wish him ALL the Best</p><p>Linksys and Cisco came later but :-<br />I am so glad to see Openwrt and Linksys doing this. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>whatever Linksys WRT54G do I can still do in my 486 PC ? and that is the power of GOD and Thanks to Linus&#039;s Linux and All of YOU !</p><p>No matter how much you know, how much you have don&#039;t over load your router, keep it nice and clean always !</p><p>more reading<br /><a href="http://www.hyperwrt.org/forum/viewtopic.php?id=274">http://www.hyperwrt.org/forum/viewtopic.php?id=274</a><br /><a href="http://www.hyperwrt.org/forum/viewtopic.php?id=300">http://www.hyperwrt.org/forum/viewtopic.php?id=300</a><br /><a href="http://www.hyperwrt.org/forum/viewtopic.php?id=227">http://www.hyperwrt.org/forum/viewtopic.php?id=227</a></p><p>if you have a large network then read Linux Load Blancing</p>											<p class="post-edited">(Last edited by <strong>wirelessjoe</strong> on 28 Jun 2005, 22:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p8862">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">trebiani</div>
					<div class="post-datetime">
						28 Jun 2005, 23:12					</div>
				</div>
				<div class="post-content content">
					<p>Hello WirelessJoe!</p><div class="quotebox"><cite>wirelessjoe wrote:</cite><blockquote><p>if you don&#039;t have a good hand on Linux don&#039;t break the bridge, stay with the bridge</p></blockquote></div><p>i configured some linux firewalls and i love the solid-rock linux iptables firewalls. i bought a LInksys WRT54GS V1.1 to use it with openwrt. i want to break the birdge to seperate the wireless traffic from my intranet! the only problem left is howto create the vlans 2 to 4 and howto associate the vlan to a single port of the pridge. <br />setting the nvram parameters vlan1ports vlan1hwname ist not enough.</p><br /><div class="quotebox"><cite>wirelessjoe wrote:</cite><blockquote><p>if you need good security - easy setup (I mean WPA) then stick by Linksys Original Firmware like Hyperwrt - read this post <a href="http://forum.openwrt.org/viewtopic.php?id=1835">http://forum.openwrt.org/viewtopic.php?id=1835</a> ,&nbsp; you will need help, so please ask as you go</p></blockquote></div><p>oh yes - i want good security. easy setup is not very important to me.</p><div class="quotebox"><cite>wirelessjoe wrote:</cite><blockquote><p>I am so glad to see Openwrt and Linksys doing this. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>me too!</p><p>Thanx for all the tips and hints!<br />Treb</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p8863">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">trebiani</div>
					<div class="post-datetime">
						28 Jun 2005, 23:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>trebiani wrote:</cite><blockquote><p>the only problem left is howto create the vlans 2 to 4 and howto associate the vlan to a single port of the pridge.</p></blockquote></div><p>found it:</p><p>nvram set vlan2ports=&quot;2 5&quot;<br />nvram set vlan2hwname=et0</p><p>nvram set dmz1_ifname=vlan2<br />nvram set dmz1_proto=static<br />nvram set dmz1_ipaddr=10.10.100.1<br />nvram set dmz1_netmask=255.255.255.0<br />nvram set dmz1_hwaddr=00:11:22:33:44:55</p><p>in the S40network startup script i added the line:<br />ifup dmz1</p><p>one question left:<br />do i need vlan2ports=&quot;2 5&quot; or vlan2ports=&quot;2 5*&quot;</p><p>greetings,<br />treb</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p8864">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">wirelessjoe</div>
					<div class="post-datetime">
						29 Jun 2005, 00:57					</div>
				</div>
				<div class="post-content content">
					<p>yep you got it</p><p>here little more, if you have lot, lots of wan lan traffics, you might wanna try this</p><p>echo 4096 &gt; /proc/sys/net/ipv4/ip_conntrack_max<br />echo 1 &gt; /proc/sys/net/ipv4/icmp_echo_ignore_broadcasts<br />echo 1 &gt; /proc/sys/net/ipv4/icmp_ignore_bogus_error_responses<br />echo 512 &gt; /proc/sys/net/ipv4/neigh/default/gc_thresh1<br />echo 2048 &gt; /proc/sys/net/ipv4/neigh/default/gc_thresh2<br />echo 4096 &gt; /proc/sys/net/ipv4/neigh/default/gc_thresh3<br />echo &quot;600 1800 120 60 120 120 10 60 30 120&quot; &gt; /proc/sys/net/ipv4/ip_conntrack_tcp_timeouts</p><p>if everyting work, then add it to one of your startup script in /etc/init.d/</p><p>wj</p>											<p class="post-edited">(Last edited by <strong>wirelessjoe</strong> on 29 Jun 2005, 01:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p8957">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">trebiani</div>
					<div class="post-datetime">
						1 Jul 2005, 08:31					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>wirelessjoe wrote:</cite><blockquote><p>yep you got it</p><p>here little more, if you have lot, lots of wan lan traffics, you might wanna try this</p><p>echo 4096 &gt; /proc/sys/net/ipv4/ip_conntrack_max<br />echo 1 &gt; /proc/sys/net/ipv4/icmp_echo_ignore_broadcasts<br />echo 1 &gt; /proc/sys/net/ipv4/icmp_ignore_bogus_error_responses<br />echo 512 &gt; /proc/sys/net/ipv4/neigh/default/gc_thresh1<br />echo 2048 &gt; /proc/sys/net/ipv4/neigh/default/gc_thresh2<br />echo 4096 &gt; /proc/sys/net/ipv4/neigh/default/gc_thresh3<br />echo &quot;600 1800 120 60 120 120 10 60 30 120&quot; &gt; /proc/sys/net/ipv4/ip_conntrack_tcp_timeouts</p><p>if everyting work, then add it to one of your startup script in /etc/init.d/</p><p>wj</p></blockquote></div><p>installed it (with a startup script) and it&#039;s working without any problems. i made some heavy load stresstests, transfered a lot of gig&#039;s and the router was running stable for one day.</p><p>what maximum lan-to-lan speed can you get out of this box. i&#039;ve read some postings about the poor switch performance. it would be nice to have some comparison to know if there is some tuning work to do ;-)</p><p>once again: many thanx for helping me!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p8959">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">sophana</div>
					<div class="post-datetime">
						1 Jul 2005, 10:27					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve setup wds with my original asus wl500g deluxe firmware with a belkin f5d7231.<br />I had 3Mbytes/s lan to lan (maybe because afterburner is shut off in wds)</p><p>I don&#039;t understand why are you talking about tuning the tcp stack... <br />Isn&#039;t all wifi stuff made at the ethernet level?<br />There is also something which I don&#039;t understand. The wifi hardware seems to have its own ethernet device to the processor (eth1) and the lan has another device (eth0)<br />All ethernet communications between lan and wifi are bridged through the cpu?<br />Why aren&#039;t they directly connected? I&#039;ve seen that some device have wifi and lan on the same ethernet device. This means that wifi to lan communication implies absolutely NO intervention from the cpu.<br />Also, isn&#039;t all crypting made at the hardware level?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p8962">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">Kurgan</div>
					<div class="post-datetime">
						1 Jul 2005, 10:53					</div>
				</div>
				<div class="post-content content">
					<p>I really don&#039;t know, but I suppose that crypting is made by the CPU, and also that switching between interfaces seems to put load on the CPU. Obviously bridging uses the CPU, too.&nbsp; This may be a bad idea for performance, but it allows to breake the bridge and set up a routed path between lan and wan. Also, you can control trafic a lot better even by using bridging and ebtables.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p8966">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">sophana</div>
					<div class="post-datetime">
						1 Jul 2005, 11:25					</div>
				</div>
				<div class="post-content content">
					<p>I was not talking between lan and wan, but between wifi and lan.<br />ethernet bridging should be low cpu consuming compared to ip routing.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p8971">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">Kurgan</div>
					<div class="post-datetime">
						1 Jul 2005, 11:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>sophana wrote:</cite><blockquote><p>I was not talking between lan and wan, but between wifi and lan.<br />ethernet bridging should be low cpu consuming compared to ip routing.</p></blockquote></div><p>Well it seems that something in the hardware prevents the WRT from going over 22 Mbit/s in any case, even when only the switch is involved.</p><p><span style="color: red">EDIT: This is plain WRONG. Switching only (in the same VLAN) does NOT affect performace, I get 70MB/sec if switching only.</span></p>											<p class="post-edited">(Last edited by <strong>Kurgan</strong> on 6 Jul 2005, 11:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p8972">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">sophana</div>
					<div class="post-datetime">
						1 Jul 2005, 11:57					</div>
				</div>
				<div class="post-content content">
					<p>do you mean that afterburner/speedbooster is complete bullshit?<br />I had a slightly better performance when I set AP versus client mode (ethernet bridging). I had peeks at 3.3Mbytes/s</p><p>afterburner doesn&#039;t work in wds mode (as stated in the asus web interface)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p8977">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">Kurgan</div>
					<div class="post-datetime">
						1 Jul 2005, 12:20					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>sophana wrote:</cite><blockquote><p>do you mean that afterburner/speedbooster is complete bullshit?</p></blockquote></div><p>AFAIK, afterburner is the &quot;funky&quot; name for the now quite common technique of altering framing size on wirleless to get 108 Mbit instead of 54. <br />You already know that 54 Mbit actually means 20 or so, so I suppose that 108 should mean 43 or so. Which anyway is far more better than the 25 or so that I have obtained from some USR stuff that I was testing some times ago (totally unrelated to the WRTs), that promises 108 Mbit when using their own hardware for both the AP and the NICs.</p><p>Back to WRTs, my tests (run with two P4 2600 PCs with Linux and Windows, and 100 Mbit wired LAN, using an Atheros minipci G as the client and a WRT54GS v1.1 as the AP) show that:</p><p>- real wired ethernet SMB transfer speed without the WRT is 80 Mbit/s</p><p>- if the ethernet goes through the WRT, speed slows to 22 Mbit/s in both a routed (WAN to LAN) and simply switched (LAN to LAN) configuration. While routing surely eats up CPU, I really don&#039;t understand why simply switching packets should be limited to 22Mbit/s, when my cheap D-Link switch allows for 80 Mbit/s transfers.</p><p>- when routing between WAN and WLAN, or bridging between LAN and WLAN, using WPA-PSK with an old experimental (March 2005, if I recall correctly) I have got no more than 13 Mbit/s.</p><br /><p>Your performance seems to be better than mine, anyway, since 3,3 Mbytes/sec is about&nbsp; 26 Mbit/s. I suppose anyway that my wireless performance could be enhanced by removing 802.11b compatibility, for example, and that maybe by using two WRTs instead of my Atheros mini-pci as a client could perform better. Anyway, if there really is a bottleneck in the wired switch, you will never go faster than that.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p9026">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">sophana</div>
					<div class="post-datetime">
						2 Jul 2005, 11:30					</div>
				</div>
				<div class="post-content content">
					<p>the 26MBit performance was without openwrt.<br />it was with original asus firmware between two asus wl500gd.</p><p>I had 24mbit/s between the asus and the belkin in wds.<br />samba file transfer, task manager measurement.</p><p>I have to try with a real afterburner client, (I don&#039;t have one yet), because afterburner is not supposed to work in wds. and I suspect that the asus client mode (ethernet bridging) does not activate afterburner correctly.</p><p>I will do some testing with openwrt as soon as I succeed in installing white russian. (I have experimental right now)</p>											<p class="post-edited">(Last edited by <strong>sophana</strong> on 2 Jul 2005, 11:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p9131">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">trebiani</div>
					<div class="post-datetime">
						5 Jul 2005, 07:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>wirelessjoe wrote:</cite><blockquote><p>here little more, if you have lot, lots of wan lan traffics, you might wanna try this</p><p>echo 4096 &gt; /proc/sys/net/ipv4/ip_conntrack_max<br />echo 1 &gt; /proc/sys/net/ipv4/icmp_echo_ignore_broadcasts<br />echo 1 &gt; /proc/sys/net/ipv4/icmp_ignore_bogus_error_responses<br />echo 512 &gt; /proc/sys/net/ipv4/neigh/default/gc_thresh1<br />echo 2048 &gt; /proc/sys/net/ipv4/neigh/default/gc_thresh2<br />echo 4096 &gt; /proc/sys/net/ipv4/neigh/default/gc_thresh3<br />echo &quot;600 1800 120 60 120 120 10 60 30 120&quot; &gt; /proc/sys/net/ipv4/ip_conntrack_tcp_timeouts</p><p>if everyting work, then add it to one of your startup script in /etc/init.d/</p><p>wj</p></blockquote></div><p>the router is still working fine but i can&#039;t see a higher performance. with scp i still transfer 2.6MBytes/s (no Firewall/NAT enabled)<br />my old linux firewall/router (AMD Athlon 700MHz, 512MB Ram) i had an everage transfer rate of 7.9MBytes/s (with Firewall and NAT)</p><p>has someone higher transfer rates?</p><p>btw: i switched to the &quot;whiterussian&quot; build.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p9175">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">kaldek</div>
					<div class="post-datetime">
						6 Jul 2005, 05:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Kurgan wrote:</cite><blockquote><div class="quotebox"><cite>sophana wrote:</cite><blockquote><p>I was not talking between lan and wan, but between wifi and lan.<br />ethernet bridging should be low cpu consuming compared to ip routing.</p></blockquote></div><p>Well it seems that something in the hardware prevents the WRT from going over 22 Mbit/s in any case, even when only the switch is involved.</p></blockquote></div><p>This should *not* be the case, because the BCM5325 switch in the WRT54Gv2.2 has a non-blocking switching fabric, which basically means all the switch ports can go fully loaded to literally 100 megabits per second on each port and packets will not be dropped.&nbsp; This is only for switching within the same VLAN of course.&nbsp; I assume the ADMTek switch used in various other hardware versions is also nonblocking.&nbsp; There&#039;s no reason it *wouldn&#039;t* be, because to do that speed is easy and cheap to do in the hardware these days.&nbsp; 100mb/s has been around for a *long* time.</p><p>If you&#039;re getting max 22mb/s even across the switch ports on the same VLAN, I suggest you check other things, such as whether the problem is on the computers you are using for testing.&nbsp; Many applications find it hard to thrash a 100mb/s link - I suggest an FTP transfer of a large file (200MB+)&nbsp; between two fast PCs.&nbsp; This way you&#039;ll be probably maxing out your PC NIC card, and not losing anything due to TCP overheads since each packet will be the maximum MTU size.&nbsp; I would realistically expect to see around 70mb/s of throughput - about 7 megabytes per second.</p><p>Kaldek</p><p>P.S.&nbsp; Personally, I&#039;ve had two laptop PCs running Windows XP on either side of a 100mb/s load balanced firewall cluster hit right on 10 megabytes per second, so FTP is plenty capable of the throughput.&nbsp; This was with Cerberus FTP server BTW.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p9176">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">kaldek</div>
					<div class="post-datetime">
						6 Jul 2005, 05:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>trebiani wrote:</cite><blockquote><p>the router is still working fine but i can&#039;t see a higher performance. with scp i still transfer 2.6MBytes/s (no Firewall/NAT enabled)<br />my old linux firewall/router (AMD Athlon 700MHz, 512MB Ram) i had an everage transfer rate of 7.9MBytes/s (with Firewall and NAT)</p><p>has someone higher transfer rates?</p><p>btw: i switched to the &quot;whiterussian&quot; build.</p></blockquote></div><p>It&#039;s hard to say exactly why the throughput of the router seems fairly low, but there are definite differences between your old Linux firewall and the wireless router.&nbsp; Specifically, the usage of VLANs.&nbsp; Each packet that crosses from one routed interface to another must enter the O/S and have VLAN tags either added or stripped off the ethernet frame.&nbsp; This may add enough overhead to the CPU on these things that it nerfs the bandwidth, considering that the O/S is *also* doing the usual IP routing tasks.&nbsp; The old adage of&nbsp; the &quot;straw that broke the camel&#039;s back&quot; is the statement that matches what I&#039;m saying here.</p><p>Since the whole hardware design is based on a 5-port switch with VLAN support to enable the creation of the &quot;WAN&quot; interface, you&#039;re kinda stuck with it, if indeed that&#039;s the cause of the performancde limitation.</p><p>Bear in mind that you&#039;re also using &quot;scp&quot; as a means of testing throughput. SCP uses cryptography, and cryptography = CPU time.&nbsp; An Athlon 700mhz is going to laugh at encrypting an scp data stream, especially considering its monstrous floating point performance.&nbsp; As I can recall, these little Broadcom 4712 CPUs in these things don&#039;t even have a dedicated floating point unit and emulate one in software.&nbsp; Ergo, fairly poor crypto performance.&nbsp; Just last night I was copying files over from my WPA-secured wireless link into a wired PC and it was maxed out at 18mb/s (802.11g is capable of about 25mb/s best case).&nbsp; Running &quot;top&quot; in OpenWRT showed my CPU right up there at 89% for the whole session.&nbsp; In other words, pretty flat out.</p><p>Kaldek</p>											<p class="post-edited">(Last edited by <strong>kaldek</strong> on 6 Jul 2005, 05:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p9180">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">trebiani</div>
					<div class="post-datetime">
						6 Jul 2005, 10:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>kaldek wrote:</cite><blockquote><p>Bear in mind that you&#039;re also using &quot;scp&quot; as a means of testing throughput. SCP uses cryptography, and cryptography = CPU time.&nbsp; An Athlon 700mhz is going to laugh at encrypting an scp data stream, especially considering its monstrous floating point performance.&nbsp; As I can recall, these little Broadcom 4712 CPUs in these things don&#039;t even have a dedicated floating point unit and emulate one in software.&nbsp; Ergo, fairly poor crypto performance.&nbsp; Just last night I was copying files over from my WPA-secured wireless link into a wired PC and it was maxed out at 18mb/s (802.11g is capable of about 25mb/s best case).&nbsp; Running &quot;top&quot; in OpenWRT showed my CPU right up there at 89% for the whole session.&nbsp; In other words, pretty flat out.</p></blockquote></div><p>well, encryption and decryption takes place at the 2 workstations used for load testing. the router has to route between the 2 vlans - i&#039;ll check the routers cpu load but tagging and untagging ip packages should not be the problem for the 200MHz CPU (which is running at 216MHz cause of this &quot;heavy-load-bug&quot;). next i&#039;ll check the transfer speed within the same subnet (same vlan).</p><p>it is quite essential to get the maximum transfer out of this little box: i neeeeeed 100mbit between lan and dmz!</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>