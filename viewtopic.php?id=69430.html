<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Mesh Network</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p349544">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">alfredlim</div>
					<div class="post-datetime">
						17 Jan 2017, 18:44					</div>
				</div>
				<div class="post-content content">
					<p>Anyone is using mesh network? Can you share how you set it up?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p349575">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">ckm</div>
					<div class="post-datetime">
						18 Jan 2017, 01:42					</div>
				</div>
				<div class="post-content content">
					<p><a href="https://www.youtube.com/watch?v=RptSreJcJs8">https://www.youtube.com/watch?v=RptSreJcJs8</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p349590">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">netgeppo</div>
					<div class="post-datetime">
						18 Jan 2017, 09:46					</div>
				</div>
				<div class="post-content content">
					<p>Good morning Ckm!<br />This configuration can be used on any devices?<br />Thank you<br />Gep..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p349610">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						18 Jan 2017, 16:55					</div>
				</div>
				<div class="post-content content">
					<p>If you have compatible hardware (Atheros, especialy ath9k, or Ralink/MediaTek), the 802.11s mesh is built in to the driver and mostly built into the UCI system.&nbsp; However you will need to edit config files manually rather than using LUCI.</p><p>All the routers that you want to mesh must be set to the same wifi channel.&nbsp; Set the channel in the wifi-device block with the common radio parameters.</p><p>Create a mesh interface in /etc/config/wireless.&nbsp; It is almost exactly like an AP interface except you use mode &#039;mesh&#039; and option mesh_id &#039;&lt;id&gt;&#039; instead of option ssid (this is the thing that trips up LUCI).&nbsp; All of your mesh nodes must have the same mesh_id.&nbsp; For a public mesh you invite anyone to join, it is traditional to use &#039;mesh&#039; as the mesh_id.</p><p>The simplest way to use a mesh is to bridge the mesh interfaces into the lan network.&nbsp; This makes the system work equivalently to having wired the lan ports of the routers to each other with ethernet cable.&nbsp; So you can open an AP interface on a remote node also bridged into the LAN, and anyone who connects to that AP will get their DHCP and Internet access from the main router, via the mesh.</p><p>The nodes should find and connect to each other automatically.&nbsp; You can use &#039;iw dev &lt;device&gt; mpath dump&#039; to see if any mesh paths have been established.&nbsp; This will show the MAC addresses of all the mesh nodes that are reachable, and how good the connectivity is between them.</p><p>Start by testing with an unsecured mesh.&nbsp; Once you know that works, you can secure the mesh with the authsae protocol.&nbsp; Authsae is based on all authorized mesh nodes having been configured with the same pre-shared key.&nbsp; &nbsp; Install the &#039;authsae&#039; package (which is rather large for 4MB flash routers due to also needing a SSL library).&nbsp; Configure security by adding the lines:<br /></p><div class="codebox"><pre><code>    option encryption authsae
    option key &#039;&lt;pre-shared key&gt;&#039;</code></pre></div><p>to your mesh interface in /etc/config/wireless.</p><p>I have found the ath10k driver works with an unsecured mesh but crashes severely trying to secure.</p>											<p class="post-edited">(Last edited by <strong>mk24</strong> on 18 Jan 2017, 16:55)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>