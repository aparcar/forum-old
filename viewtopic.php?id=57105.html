<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> factory or sysupgrade image?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 16 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p274669">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">glyphix</div>
					<div class="post-datetime">
						1 May 2015, 02:51					</div>
				</div>
				<div class="post-content content">
					<p>I just got an TP-LINK Archer c7 (v2) (I hear this is good hardware?)&nbsp; </p><p>What openwrt image should I use? I looked at the hardware table (<a href="http://wiki.openwrt.org/toh/start#tp-link">http://wiki.openwrt.org/toh/start#tp-link</a>) and saw I want ar71xx... but do I want factory or sysupgrade?</p><p>openwrt-ar71xx-generic-archer-c7-v2-squashfs-factory.bin<br />openwrt-ar71xx-generic-archer-c7-v2-squashfs-sysupgrade.bin</p><p>And do I need any packages?&nbsp; (I just want to set this up as my home router.&nbsp; Nothing too special.&nbsp; I want both a 2.4 and 5g wifi network.&nbsp; I will connect some mobile devices and a nexus player.&nbsp; &nbsp;I might set up a couple port forwards.&nbsp; Thats about it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274671">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">HooTooJunkie</div>
					<div class="post-datetime">
						1 May 2015, 03:06					</div>
				</div>
				<div class="post-content content">
					<p>If it&#039;s anything like the one I&#039;m using, HooToo TM02 Nano TripMate, you may need both files.</p><p>The factory.bin may be for initially getting the OpenWRT code onto the router, easily, by using the original firmware&#039;s internal option to update the firmware.<br />It makes the routers original firmware think it sees a factory firmware image, and doesn&#039;t complain, and reject the file.</p><p>And the sysupgrade.bin is the newer updated OpenWRT code, but it may not have all the packages the factory.bin has, if you&#039;re getting it from the OpenWRT &quot;trunk&quot; directory.</p><p>If the author of it has the sysupgrade.bin on his GitHub site, then chances are all the same packages were installed.&nbsp; Maybe more.</p><p>If that&#039;s not the case, and it&#039;s in the &quot;trunk&quot;, you&#039;ll need to install the packages yourself, including the LuCI interface, to get it to do all the factory.bin may have on it.</p><p>It&#039;s best to try with the factory.bin first, because you can&#039;t use the sysupgrade.bin as the first installation of OpenWRT anyway. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>This is usually the case with this OpenWRT installation stuff.</p><p>If this is different, I&#039;m sure someone will tell you so. (If they&#039;re nice) <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><br /><div class="quotebox"><cite>glyphix wrote:</cite><blockquote><p>I just got an TP-LINK Archer c7 (v2) (I hear this is good hardware?)&nbsp; </p><p>What openwrt image should I use? I looked at the hardware table (<a href="http://wiki.openwrt.org/toh/start#tp-link">http://wiki.openwrt.org/toh/start#tp-link</a>) and saw I want ar71xx... but do I want factory or sysupgrade?</p><p>openwrt-ar71xx-generic-archer-c7-v2-squashfs-factory.bin<br />openwrt-ar71xx-generic-archer-c7-v2-squashfs-sysupgrade.bin</p><p>And do I need any packages?&nbsp; (I just want to set this up as my home router.&nbsp; Nothing too special.&nbsp; I want both a 2.4 and 5g wifi network.&nbsp; I will connect some mobile devices and a nexus player.&nbsp; &nbsp;I might set up a couple port forwards.&nbsp; Thats about it.</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274674">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">glyphix</div>
					<div class="post-datetime">
						1 May 2015, 03:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>HooTooJunkie wrote:</cite><blockquote><p>If it&#039;s anything like the one I&#039;m using, HooToo TM02 Nano TripMate, you may need both files.</p><p>The factory.bin may be for initially getting the OpenWRT code onto the router, easily, by using the original firmware&#039;s internal option to update the firmware.<br />It makes the routers original firmware think it sees a factory firmware image, and doesn&#039;t complain, and reject the file.</p><p>And the sysupgrade.bin is the newer updated OpenWRT code, but it may not have all the packages the factory.bin has, if you&#039;re getting it from the OpenWRT &quot;trunk&quot; directory.</p><p>If the author of it has the sysupgrade.bin on his GitHub site, then chances are all the same packages were installed.&nbsp; Maybe more.</p><p>If that&#039;s not the case, and it&#039;s in the &quot;trunk&quot;, you&#039;ll need to install the packages yourself, including the LuCI interface, to get it to do all the factory.bin may have on it.</p><p>It&#039;s best to try with the factory.bin first, because you can&#039;t use the sysupgrade.bin as the first installation of OpenWRT anyway. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>This is usually the case with this OpenWRT installation stuff.</p><p>If this is different, I&#039;m sure someone will tell you so. (If they&#039;re nice) <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><br /><div class="quotebox"><cite>glyphix wrote:</cite><blockquote><p>I just got an TP-LINK Archer c7 (v2) (I hear this is good hardware?)&nbsp; </p><p>What openwrt image should I use? I looked at the hardware table (<a href="http://wiki.openwrt.org/toh/start#tp-link">http://wiki.openwrt.org/toh/start#tp-link</a>) and saw I want ar71xx... but do I want factory or sysupgrade?</p><p>openwrt-ar71xx-generic-archer-c7-v2-squashfs-factory.bin<br />openwrt-ar71xx-generic-archer-c7-v2-squashfs-sysupgrade.bin</p><p>And do I need any packages?&nbsp; (I just want to set this up as my home router.&nbsp; Nothing too special.&nbsp; I want both a 2.4 and 5g wifi network.&nbsp; I will connect some mobile devices and a nexus player.&nbsp; &nbsp;I might set up a couple port forwards.&nbsp; Thats about it.</p></blockquote></div></blockquote></div><p>Thanks!&nbsp; FYI I got both the files from <br /><a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/">http://downloads.openwrt.org/barrier_br … x/generic/</a></p><p>factory is 15mb while sysupgrade is 3mb... so I am guessing no packages...</p><p>I guess though that I really do want to do the sysupgrade instead of just sticking with factory?</p><p>Assuming so any ideas what all packages I need? </p><p>I found this luci folder but not sure what I need from it. <br /><a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/packages/luci/">http://downloads.openwrt.org/barrier_br … ages/luci/</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274676">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">richbhanover</div>
					<div class="post-datetime">
						1 May 2015, 04:05					</div>
				</div>
				<div class="post-content content">
					<p>I have a somewhat different take on the upgrade process. I want to avoid the problem that constantly bites people where the sysupgrade doesn&#039;t work some of the time. (Read the forums - it&#039;s depressing.)</p><p>I&#039;ve been using CeroWrt (an offshoot of OpenWrt) for the last three years. I got tired of trying to remember all the config&#039;s I wanted to change, so I automated it. My upgrade process is two sure-fire steps: </p><p>1) Use the factory software every time. It will always install.<br />2) Use a script to return the settings to my liking.</p><p>This is a little more work to get set up, but if you&#039;re going to re-flash the firmware of your router frequently, it&#039;ll save you time in the future.</p><p>I have a modified my script for OpenWrt - it&#039;s <em>config-openwrt.sh</em> on my Github page at <a href="http://github.com/richb-hanover/openwrtscripts">http://github.com/richb-hanover/openwrtscripts</a> Read <strong>To run this script</strong> on the main page to see how to install and run the config-openwrt.sh script. If you have questions or comments, please fill out an issue on the Github site. Enjoy!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274682">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">drawz</div>
					<div class="post-datetime">
						1 May 2015, 04:58					</div>
				</div>
				<div class="post-content content">
					<p>Always use the factory file for the initial flash FROM the factory firmware. This configures and/or formats partitions to work with the new firmware. You can then use sysupgrade to upgrade an existing openwrt install to a newer version. The caveat with sysupgrade is that sometimes the config files have changed somewhat between versions, so the upgrade may not work as well as it should. You can still just use the sysupgrade file and not save settings to work around this. I&#039;ve done countless sysupgrades and never had an issue.</p><p>As for packages, you don&#039;t need to download those manually. You can use the web GUI (Luci) to install those easily. It has a nice package manager with search functionality. I would recommend installing QoS (luci-app-qos) *or* SQM (luci-app-sqm) to improve your internet connection quality. You&#039;ll need to configure and enable either of those. Beyond that, it just depends what you want to do with your router.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274692">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">HooTooJunkie</div>
					<div class="post-datetime">
						1 May 2015, 05:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>drawz wrote:</cite><blockquote><p>Always use the factory file for the initial flash FROM the factory firmware. This configures and/or formats partitions to work with the new firmware. You can then use sysupgrade to upgrade an existing openwrt install to a newer version. The caveat with sysupgrade is that sometimes the config files have changed somewhat between versions, so the upgrade may not work as well as it should. You can still just use the sysupgrade file and not save settings to work around this. I&#039;ve done countless sysupgrades and never had an issue.</p><p><strong>As for packages, you don&#039;t need to download those manually. You can use the web GUI (Luci) to install those easily. It has a nice package manager with search functionality</strong>. I would recommend installing QoS (luci-app-qos) *or* SQM (luci-app-sqm) to improve your internet connection quality. You&#039;ll need to configure and enable either of those. Beyond that, it just depends what you want to do with your router.</p></blockquote></div><p><strong>THIS</strong> isn&#039;t always the case, as of recently, the OpenWRT &quot;powers-that-be&quot; have decided to remove most of the packages, including LuCI, leaving the sysupgrade.bin images Generic, and needing to use text-based package installations for everything. <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274696">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">drawz</div>
					<div class="post-datetime">
						1 May 2015, 06:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>HooTooJunkie wrote:</cite><blockquote><p><strong>THIS</strong> isn&#039;t always the case, as of recently, the OpenWRT &quot;powers-that-be&quot; have decided to remove most of the packages, including LuCI, leaving the sysupgrade.bin images Generic, and needing to use text-based package installations for everything. <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p></blockquote></div><p>That has not been my experience at all. Packages were rearranged for the Barrier Breaker release, but everything I need downloads just fine from the main repository using Luci. Luci was included as well. Trunk is a different ball game and doesn&#039;t include Luci, but it has been like that forever basically. Even then, once you installed luci from command line, you could install everything else within luci.</p>											<p class="post-edited">(Last edited by <strong>drawz</strong> on 1 May 2015, 06:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274702">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">drawz</div>
					<div class="post-datetime">
						1 May 2015, 06:59					</div>
				</div>
				<div class="post-content content">
					<p>The factory file always matches the size of the entire flash space (minus a couple read only partitions, like uboot and wireless calibration). This is how it formats and configures the partitions. Sysupgrades are usually smaller because they only update the primary OS partition. They both contain the same number of packages (for a given build). </p><p>Your router seems to have a bit of an odd ball set up (based on the wiki). The factory firmware replaces uboot, which OpenWrt does not do in general. And there&#039;s only one specific factory build that&#039;s recommended (maybe again because the stuff openwrt supplies directly does not change uboot). </p><p>All Barrier Breaker builds should have luci installed *if* they have enough flash space. Unmaintained packages were removed I believe. But why would you want something unmaintained and possibly containing security holes? I prefer to keep my router focused on routing primarily, so I don&#039;t add much - QoS, vnstat, and upnp. </p><p>Your idea to save a list of packages to reinstall when sysupgrading is a great one and one that has been proposed before. The devs don&#039;t seem to think it&#039;s a good idea (and to be honest, it could break things, so maybe it really isn&#039;t a good idea). I just keep a list of what I need and reinstall those with each upgrade. If you stick to stable builds, this is not very often so it&#039;s no big deal.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274705">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">glyphix</div>
					<div class="post-datetime">
						1 May 2015, 07:40					</div>
				</div>
				<div class="post-content content">
					<p>Wow - thanks for all the info guys!</p><p>A couple questions...</p><p>I don&#039;t need fort knox and I don&#039;t need special functionality really... <strong>all I am really after is rock solid wifi, and I don&#039;t care too much about cost.&nbsp; </strong> I&#039;ve had some issues with having to click &quot;try again&quot; in youtube apps on my phone... or my phone losing connection with my chromecast, etc.&nbsp; </p><p>Someone told me to get a tp-link and use openwrt... (And I feel like I heard about openwrt in the past in similar context). </p><p>Would you all agree - this (a tp-link archer c7 with openwrt) is a good way to go to get as rock solid wifi as possible?&nbsp; <strong> Or is openwrt really just more for if you want to be able super customize everything and/or have the ability to do fancy networking stuff and/or to make cheap hardware do things you would normally have to pay more for?</strong>&nbsp; &nbsp;It seems like a reasonable amount of trouble to go through... I wonder if all I want is rock solid wifi, and I don&#039;t care about cost, if the firmware the C7 comes with would be fine. (or if I should just get a different router)&nbsp; <em> (I notice on the page for my router it says &quot;Luci for Barrier Breaker does not supporting configuring 802.11ac via the web GUI&quot;... which makes me a tad nervous hopefully though open wrt supports and handles ac well once enabled via command line though...) </em></p><p>Anyway... if openwrt really is the route to go for rock solid wifi... Reading through all this it sounds like I should in fact use the barrier-breaker files if I do in fact want packages pre-included.&nbsp; Is that right?&nbsp; &nbsp; And hopefully I should just flash the factory and then the sys upgrade and I should be able to easily config through web interface? </p><p>Do I really need many packages if I don&#039;t want to do anything special?&nbsp; Just home wifi... both bands... maybe forward a port or 2... thats about it. </p><p>Also... if I ever wanted to go back to the stock image... am I able to just download firmware from tp-link and flash back to it?</p>											<p class="post-edited">(Last edited by <strong>glyphix</strong> on 1 May 2015, 08:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274713">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">richbhanover</div>
					<div class="post-datetime">
						1 May 2015, 09:41					</div>
				</div>
				<div class="post-content content">
					<p>@glyphix I can attest that the TP-Link Archer C7 v2 works fine with Barrier Breaker (stable). </p><p>I used the instructions at: <a href="http://wiki.openwrt.org/doc/howto/installopenwrt">http://wiki.openwrt.org/doc/howto/installopenwrt</a> to download and install. The Archer has a great Details page (<a href="http://wiki.openwrt.org/toh/tp-link/tl-wdr7500">http://wiki.openwrt.org/toh/tp-link/tl-wdr7500</a>) that both has links to the proper firmware image, and gives instructions for flashing.</p><p>In addition, the Barrier Breaker build has LuCI built in. It works OK out of the box after you:<br />&nbsp; a) connect with Ethernet to 192.168.1.1<br />&nbsp; b) turn on the wifi using LuCI (Network-&gt;Wifi), and <br />&nbsp; c) install SQM/fq_codel (see the HOWTO at <a href="http://wiki.openwrt.org/doc/howto/sqm">http://wiki.openwrt.org/doc/howto/sqm</a> )</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274818">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">glyphix</div>
					<div class="post-datetime">
						2 May 2015, 02:13					</div>
				</div>
				<div class="post-content content">
					<p>Thanks guys!&nbsp; I wound up buying a Archer C9.&nbsp; (Not compatible with openwrt AFAIK).&nbsp; So I think i will give that a try with factory firmware first.&nbsp; Then if I have problems I&#039;ll return it and go down this path of trying some open firmware.&nbsp; </p><p>I feel a bit bad I may never even flash openwrt after all the help and info everyone gave... so glad to hear the thread has been informative for you too HooTooJunkie :-) </p><p>Thanks again everyone!</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>