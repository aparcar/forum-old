<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Connect problems to T-Mobile via 3G</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 15 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p212434">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">naturelle</div>
					<div class="post-datetime">
						15 Sep 2013, 22:42					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I want to install a failsafe-connection via 3G to my Buffalo Airstation WZR-HP-AG300H with trunk r37917 like <a href="https://forum.openwrt.org/viewtopic.php?id=46160">here</a> asked.</p><p>For that I&#039;ve bought an USB 3G dongle which is creating an interface /dev/ttyACM0 and /dev/ttyACM1<br />So far this part works. My problem seems to be the connection itself:<br />Logread gives me:<br /></p><div class="codebox"><pre><code>Sun Sep 15 21:32:56 2013 local4.info chat[8182]: abort on (BUSY)
Sun Sep 15 21:32:56 2013 local4.info chat[8182]: abort on (NO CARRIER)
Sun Sep 15 21:32:56 2013 local4.info chat[8182]: abort on (ERROR)
Sun Sep 15 21:32:56 2013 local4.info chat[8182]: report (CONNECT)
Sun Sep 15 21:32:56 2013 local4.info chat[8182]: timeout set to 10 seconds
Sun Sep 15 21:32:56 2013 local4.info chat[8182]: send (AT&amp;F^M)
Sun Sep 15 21:32:56 2013 local4.info chat[8182]: expect (OK)
Sun Sep 15 21:32:56 2013 local4.info chat[8182]: AT&amp;F^M^M
Sun Sep 15 21:32:56 2013 local4.info chat[8182]: OK
Sun Sep 15 21:32:56 2013 local4.info chat[8182]:  -- got it
Sun Sep 15 21:32:56 2013 local4.info chat[8182]: send (ATE1^M)
Sun Sep 15 21:32:56 2013 local4.info chat[8182]: expect (OK)
Sun Sep 15 21:32:56 2013 local4.info chat[8182]: ^M
Sun Sep 15 21:32:56 2013 local4.info chat[8182]: ATE1^M^M
Sun Sep 15 21:32:56 2013 local4.info chat[8182]: OK
Sun Sep 15 21:32:56 2013 local4.info chat[8182]:  -- got it
Sun Sep 15 21:32:56 2013 local4.info chat[8182]: send (AT+CGDCONT=1,&quot;IP&quot;,&quot;internet.t-mobile&quot;^M)
Sun Sep 15 21:32:57 2013 local4.info chat[8182]: timeout set to 30 seconds
Sun Sep 15 21:32:57 2013 local4.info chat[8182]: expect (OK)
Sun Sep 15 21:32:57 2013 local4.info chat[8182]: ^M
Sun Sep 15 21:32:57 2013 local4.info chat[8182]: AT+CGDCONT=1,&quot;IP&quot;,&quot;internet.t-mobile&quot;^M^M
Sun Sep 15 21:32:57 2013 local4.info chat[8182]: OK
Sun Sep 15 21:32:57 2013 local4.info chat[8182]:  -- got it
Sun Sep 15 21:32:57 2013 local4.info chat[8182]: send (ATDT*99#^M)
Sun Sep 15 21:32:57 2013 local4.info chat[8182]: expect (CONNECT)
Sun Sep 15 21:32:57 2013 local4.info chat[8182]: ^M
Sun Sep 15 21:32:58 2013 daemon.err pppd[8180]: Child process USE_APN=internet.t-mobile /usr/sbin/chat -t5 -v -E -f /etc/chatscripts/3g.chat (pid 8181) terminated with signal 15
Sun Sep 15 21:32:58 2013 daemon.emerg pppd[8180]: Connect script failed
Sun Sep 15 21:32:59 2013 daemon.info pppd[8180]: Exit.
Sun Sep 15 21:32:59 2013 daemon.error netifd: Interface &#039;ppp0&#039; is now down
Sun Sep 15 21:32:59 2013 local4.info chat[8182]: ATDT*99#^MA^M
Sun Sep 15 21:32:59 2013 local4.info chat[8182]: NO CARRIER
Sun Sep 15 21:32:59 2013 local4.info chat[8182]:  -- failed
Sun Sep 15 21:32:59 2013 local4.info chat[8182]: Failed (NO CARRIER)
Sun Sep 15 21:33:02 2013 daemon.error pppd[8214]: pppd 2.4.5 started by root, uid 0
Sun Sep 15 21:33:03 2013 local4.info chat[8216]: abort on (BUSY)
Sun Sep 15 21:33:03 2013 local4.info chat[8216]: abort on (NO CARRIER)
Sun Sep 15 21:33:03 2013 local4.info chat[8216]: abort on (ERROR)
Sun Sep 15 21:33:03 2013 local4.info chat[8216]: report (CONNECT)
Sun Sep 15 21:33:03 2013 local4.info chat[8216]: timeout set to 10 seconds
Sun Sep 15 21:33:03 2013 local4.info chat[8216]: send (AT&amp;F^M)
Sun Sep 15 21:33:03 2013 local4.info chat[8216]: expect (OK)
Sun Sep 15 21:33:03 2013 local4.info chat[8216]: AT&amp;F^M^M
Sun Sep 15 21:33:03 2013 local4.info chat[8216]: OK
Sun Sep 15 21:33:03 2013 local4.info chat[8216]:  -- got it
Sun Sep 15 21:33:03 2013 local4.info chat[8216]: send (ATE1^M)
Sun Sep 15 21:33:03 2013 local4.info chat[8216]: expect (OK)
Sun Sep 15 21:33:03 2013 local4.info chat[8216]: ^M
Sun Sep 15 21:33:03 2013 local4.info chat[8216]: ATE1^M^M
Sun Sep 15 21:33:03 2013 local4.info chat[8216]: OK
Sun Sep 15 21:33:03 2013 local4.info chat[8216]:  -- got it
Sun Sep 15 21:33:03 2013 local4.info chat[8216]: send (AT+CGDCONT=1,&quot;IP&quot;,&quot;internet.t-mobile&quot;^M)
Sun Sep 15 21:33:03 2013 local4.info chat[8216]: timeout set to 30 seconds
Sun Sep 15 21:33:03 2013 local4.info chat[8216]: expect (OK)
Sun Sep 15 21:33:03 2013 local4.info chat[8216]: ^M
Sun Sep 15 21:33:03 2013 local4.info chat[8216]: AT+CGDCONT=1,&quot;IP&quot;,&quot;internet.t-mobile&quot;^M^M
Sun Sep 15 21:33:03 2013 local4.info chat[8216]: OK
Sun Sep 15 21:33:03 2013 local4.info chat[8216]:  -- got it
Sun Sep 15 21:33:03 2013 local4.info chat[8216]: send (ATDT*99#^M)
Sun Sep 15 21:33:03 2013 local4.info chat[8216]: expect (CONNECT)
Sun Sep 15 21:33:03 2013 local4.info chat[8216]: ^M
Sun Sep 15 21:33:33 2013 local4.info chat[8216]: alarm
Sun Sep 15 21:33:33 2013 local4.info chat[8216]: Failed
Sun Sep 15 21:33:33 2013 daemon.emerg pppd[8214]: Connect script failed
Sun Sep 15 21:33:34 2013 daemon.info pppd[8214]: Exit.
Sun Sep 15 21:33:34 2013 daemon.error netifd: Interface &#039;ppp0&#039; is now down</code></pre></div><p><strong>Any idea where the problem is?</strong></p><p>I can&#039;t see why these messages occured:<br /></p><div class="codebox"><pre><code>Sun Sep 15 21:32:58 2013 daemon.err pppd[8180]: Child process USE_APN=internet.t-mobile /usr/sbin/chat -t5 -v -E -f /etc/chatscripts/3g.chat (pid 8181) terminated with signal 15
Sun Sep 15 21:32:58 2013 daemon.emerg pppd[8180]: Connect script failed</code></pre></div><p>For info:<br /></p><div class="codebox"><pre><code> cat /etc/config/network
[...]
config &#039;interface&#039; &#039;ppp0&#039;
    option &#039;ifname&#039; &#039;ppp0&#039;
    option &#039;pincode&#039; &#039;0000&#039;
    option &#039;device&#039; &#039;/dev/ttyACM0&#039;
    option &#039;apn&#039; &#039;internet.t-mobile&#039;
    option &#039;service&#039; &#039;umts&#039;
    option &#039;proto&#039; &#039;3g&#039;
    option &#039;pppd_options&#039; &#039;noipdefault&#039;
    option &#039;username&#039; &#039;naturelle&#039;</code></pre></div><div class="codebox"><pre><code>cat /etc/chatscripts/3g.chat
ABORT   BUSY
ABORT   &#039;NO CARRIER&#039;
ABORT   ERROR
REPORT  CONNECT
TIMEOUT 10
&quot;&quot;      &quot;AT&amp;F&quot;
OK      &quot;ATE1&quot;
OK      &#039;AT+CGDCONT=1,&quot;IP&quot;,&quot;$USE_APN&quot;&#039;
SAY     &quot;Calling UMTS/GPRS&quot;
TIMEOUT 30
OK      &quot;ATDT*99#&quot;
CONNECT &#039; &#039;</code></pre></div>											<p class="post-edited">(Last edited by <strong>naturelle</strong> on 15 Sep 2013, 22:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212437">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">FriedZombie</div>
					<div class="post-datetime">
						15 Sep 2013, 23:37					</div>
				</div>
				<div class="post-content content">
					<p>Is the pincode of the simcard 0000?<br />if not you can change the pincode it uses under /etc/config/network</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212439">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">naturelle</div>
					<div class="post-datetime">
						15 Sep 2013, 23:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>FriedZombie wrote:</cite><blockquote><p>Is the pincode of the simcard 0000?</p></blockquote></div><p>No. Of course 0000 is an EXAMPLE or do you think I tell my original PIN code here?^^</p><div class="quotebox"><blockquote><p>if not you can change the pincode it uses under /etc/config/network</p></blockquote></div><p>Really?^^</p><p>Meanwhile I&#039;ve tested the SIM on my netbook with some other devices -&gt; there is no SIM-problem, on my netbook the connection comes up immediately. With the other 3g dongles I have openWRT-problems, too (no /dev/ttyUSBx is generated). Perhaps reading <a href="https://forum.openwrt.org/viewtopic.php?id=46305">this thread</a> is interesting, too.</p>											<p class="post-edited">(Last edited by <strong>naturelle</strong> on 15 Sep 2013, 23:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212440">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">angelos</div>
					<div class="post-datetime">
						15 Sep 2013, 23:45					</div>
				</div>
				<div class="post-content content">
					<p>Maybe if you enable the debug option in /etc/ppp/options, logread will produce more verbose messages so we can understand what the problem is...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212441">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">FriedZombie</div>
					<div class="post-datetime">
						16 Sep 2013, 00:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>naturelle wrote:</cite><blockquote><div class="quotebox"><cite>FriedZombie wrote:</cite><blockquote><p>Is the pincode of the simcard 0000?</p></blockquote></div><p>No. Of course 0000 is an EXAMPLE or do you think I tell my original PIN code here?^^</p></blockquote></div><p>No I don&#039;t think you where going to spew your pincode here, but you would be surprised how many people overlook something like setting the pincode correctly.<br /></p><div class="codebox"><pre><code>Sun Sep 15 21:32:59 2013 local4.info chat[8182]: NO CARRIER</code></pre></div><p>This often means that the pincode is incorrect, but it could be caused by something else as well. But you have to start somewhere.</p><p>Bit less sarcasm would be nice, I&#039;m only trying to help <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212443">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">naturelle</div>
					<div class="post-datetime">
						16 Sep 2013, 00:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>FriedZombie wrote:</cite><blockquote><p>No I don&#039;t think you where going to spew your pincode here, but you would be surprised how many people overlook something like setting the pincode correctly.</p></blockquote></div><p>Ok. Something more:</p><div class="codebox"><pre><code>Sun Sep 15 23:04:01 2013 auth.info kernel: [613432.370000] cdc_acm 1-1:1.1: ttyACM0: USB ACM device
Sun Sep 15 23:04:01 2013 auth.info kernel: [613432.380000] cdc_acm 1-1:1.3: ttyACM1: USB ACM device
Sun Sep 15 23:05:04 2013 daemon.error netifd: ppp0 (11476): SIM ready
Sun Sep 15 23:05:04 2013 daemon.error netifd: ppp0 (11476): PIN set successfully</code></pre></div><p>So I don&#039;t know the problem.</p><div class="quotebox"><blockquote><p>Bit less sarcasm would be nice, I&#039;m only trying to help <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p></blockquote></div><p>Ok <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212447">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">FriedZombie</div>
					<div class="post-datetime">
						16 Sep 2013, 00:20					</div>
				</div>
				<div class="post-content content">
					<p>And if you try with a blank username does that work?<br />according to the manual from t-mobile it should be blank.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212453">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">naturelle</div>
					<div class="post-datetime">
						16 Sep 2013, 00:35					</div>
				</div>
				<div class="post-content content">
					<p>No, I&#039;ve don&#039;t tried that, but from the configs from my netbook I know that that&#039;s not the problem.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212643">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">naturelle</div>
					<div class="post-datetime">
						17 Sep 2013, 22:10					</div>
				</div>
				<div class="post-content content">
					<p>So. After some days of testing (on my Debian netbook) my conclusion is that this f***ing Vodafone K3805-z is somewhat locked.<br />When I put in an otelo-prepaid-card the stick connects to the net but with disconnecting some seconds later. This maybe because I&#039;ve not loaded the prepaid-card.<br />With all other cards it does not work:<br />On minicom I can see that at+cpin=xxxx puts out an error although the PIN is correct. As well sticks without/with deactivated PIN can&#039;t connect.<br />Strange thing: am program to detect the lock shows &quot;not locked&quot;. Seems to be a POS. Grrr, 15€ wasted...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212646">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">angelos</div>
					<div class="post-datetime">
						17 Sep 2013, 22:51					</div>
				</div>
				<div class="post-content content">
					<p>Huawei USB 3G modems are usually more compatible and easy to use, plus unlocked or if locked... very easy to unlock them. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212651">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">naturelle</div>
					<div class="post-datetime">
						18 Sep 2013, 00:09					</div>
				</div>
				<div class="post-content content">
					<p>Ok. Please tell me a chaep Huawei with a minimum of 14.4 DL and connector for external antenna.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212692">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Samweis</div>
					<div class="post-datetime">
						18 Sep 2013, 15:50					</div>
				</div>
				<div class="post-content content">
					<p>What about <a href="http://www.brennpunkt-srl.de/geraeteliste%20UMTS.html">this page</a>?<br />We have been there before haven&#039;t we?</p><p>What about an E3131?<br />21.6Mbit<br />32.79 € on Amazon,<br />29.99 € Alternate<br />199:- SEK at tre.se, with SIM card (approx. 23€)<br />There is tre in Austria as well (drei.at). I don&#039;t know what they sell and at what price.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212723">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">naturelle</div>
					<div class="post-datetime">
						18 Sep 2013, 21:42					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Samweis wrote:</cite><blockquote><p>What about <a href="http://www.brennpunkt-srl.de/geraeteliste%20UMTS.html">this page</a>?<br />We have been there before haven&#039;t we?</p></blockquote></div><p>What do you think where I&#039;ve found the idea for the K3805-z?^^<br />It&#039;s listed there with antenna and on draisberghof as work with usb-modeswitch. There were no hint that it is a POS.</p><div class="quotebox"><blockquote><p>What about an E3131?</p></blockquote></div><p>Does it work properly? Anyone tested? Is it able to switch permanently to modem to work without usb-modeswitch?</p>											<p class="post-edited">(Last edited by <strong>naturelle</strong> on 18 Sep 2013, 21:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212730">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Samweis</div>
					<div class="post-datetime">
						18 Sep 2013, 23:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>naturelle wrote:</cite><blockquote><p>Does it work properly? Anyone tested? Is it able to switch permanently to modem to work without usb-modeswitch?</p></blockquote></div><p>Hey, you really <strong>love</strong> to ask.<br />The E3131 has a CDC ethernet personality and will probably show up as ethx. It is similar to the E353 (which also has an antenna connector).</p><p>Does it work with OpenWRT?<br />Hm, there is a button at the top of this page, right between &quot;User list&quot; and &quot;Profile&quot;.</p><p><a href="https://forum.openwrt.org/viewtopic.php?pid=210305#p210305">One</a> of many results. <br />But there are results like <a href="https://forum.openwrt.org/viewtopic.php?pid=169719">this</a> one, too.<br />So whether it works for you or not does not necessarily depend on the stick. <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212734">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">naturelle</div>
					<div class="post-datetime">
						19 Sep 2013, 00:22					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Samweis wrote:</cite><blockquote><p>Hey, you really <strong>love</strong> to ask.</p></blockquote></div><p>That&#039;s the spirit of forums...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212737">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">FriedZombie</div>
					<div class="post-datetime">
						19 Sep 2013, 02:20					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>naturelle wrote:</cite><blockquote><p>That&#039;s the spirit of forums...</p></blockquote></div><p>True, but still you can try to find some answers on your own, and your way of answering people don&#039;t always help either.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212738">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">naturelle</div>
					<div class="post-datetime">
						19 Sep 2013, 02:27					</div>
				</div>
				<div class="post-content content">
					<p>I found the K3805-z. Was the wrong finding...<br />And sometimes I&#039;m short-tempered, I know <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /><br />BTW: script does not work for me, had described it.</p>											<p class="post-edited">(Last edited by <strong>naturelle</strong> on 19 Sep 2013, 02:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212760">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">Samweis</div>
					<div class="post-datetime">
						19 Sep 2013, 11:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>naturelle wrote:</cite><blockquote><p>On minicom I can see that at+cpin=xxxx puts out an error although the PIN is correct.</p></blockquote></div><div class="quotebox"><cite>naturelle wrote:</cite><blockquote><div class="codebox"><pre><code>Sun Sep 15 23:05:04 2013 daemon.error netifd: ppp0 (11476): PIN set successfully</code></pre></div></blockquote></div><p>This does not really match.<br />And then the chat script in your first posting seems to get the SIGTERM <span class="bbu">before</span> it actually sent the ATDT command, after it had <span class="bbu">accepted</span> the APN.</p><p>What does at+cpin? give you?</p><p>And <br />at+clk?<br />at+clk=?<br />at+creg?<br />at+cops?<br />at+cops=?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212777">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">naturelle</div>
					<div class="post-datetime">
						19 Sep 2013, 14:56					</div>
				</div>
				<div class="post-content content">
					<p>I can try later this evening. The above doesn&#039;t match because it&#039;s from different tries. With Vodafone it works, with otelo too, with any other it doesn&#039;t.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212825">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">naturelle</div>
					<div class="post-datetime">
						20 Sep 2013, 00:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Samweis wrote:</cite><blockquote><p>What does at+cpin? give you?<br />And <br />at+clk?<br />at+clk=?<br />at+creg?<br />at+cops?<br />at+cops=?</p></blockquote></div><p>All tests while put into my netbook, connected via minicom.<br />With the otelo-SIM (=Vodafone-net, PIN activated, connecting, but shutting down the connection after a few seconds, I think <em>that</em> is a provider/card-problem):<br /></p><div class="codebox"><pre><code>at+cpin?
+CPIN: SIM PIN
at+clk?
ERROR
at+clk=?
ERROR
at+creg?
+CREG: 0,0
at+cops?
+COPS: 1
at+cops=?
ERROR</code></pre></div><p>With the E-Plus-SIM (PIN activated, no connect, error-messages as described):<br /></p><div class="codebox"><pre><code>at+cpin?
+CPIN: SIM PIN
at+clk?
ERROR
at+clk=?
ERROR
at+creg?
+CREG: 0,0
at+cops?
+COPS: 1
at+cops=?
ERROR</code></pre></div><p>And the last one, my T-Mobile-SIM (no PIN activated, no connect, error-messages as described):<br /></p><div class="codebox"><pre><code>at+cpin?
+CPIN: READY
at+clk?
ERROR
at+clk=?
ERROR
at+creg?
+CREG: 0,0
at+cops?
+COPS: 1
at+cops=?
[b]The modem hangs![/b]</code></pre></div><p>Ah, wait: after waiting about one minute I got:<br /></p><div class="codebox"><pre><code>+COPS: (1,&quot;T-Mobile D&quot;,&quot;TMO D&quot;,&quot;26201&quot;,0),(1,&quot;T-Mobile D&quot;,&quot;TMO D&quot;,&quot;26201&quot;,2),(3,&quot;E-Plus&quot;,&quot;E-Plus&quot;,&quot;26203&quot;,0),(3,&quot;)</code></pre></div><p>But still no connection when put into my openWRT-router or with the netbook.<br />Log from the netbook:<br /></p><div class="codebox"><pre><code>Sep 19 23:59:45 eee kernel: [ 2144.069233] PPP generic driver version 2.4.2
Sep 19 23:59:45 eee pppd[3596]: pppd 2.4.5 started by root, uid 0
Sep 19 23:59:46 eee chat[3597]: abort on (BUSY)
Sep 19 23:59:46 eee chat[3597]: abort on (NO CARRIER)
Sep 19 23:59:46 eee chat[3597]: abort on (NO DIALTONE)
Sep 19 23:59:46 eee chat[3597]: abort on (NO DIAL TONE)
Sep 19 23:59:46 eee chat[3597]: abort on (NO ANSWER)
Sep 19 23:59:46 eee chat[3597]: abort on (DELAYED)
Sep 19 23:59:46 eee chat[3597]: send (ATZ^M)
Sep 19 23:59:46 eee chat[3597]: expect (OK)
Sep 19 23:59:46 eee chat[3597]: ATZ^M^M
Sep 19 23:59:46 eee chat[3597]: OK
Sep 19 23:59:46 eee chat[3597]:  -- got it 
Sep 19 23:59:46 eee chat[3597]: send (ATE0V1^M)
Sep 19 23:59:46 eee chat[3597]: expect (OK)
Sep 19 23:59:46 eee chat[3597]: ^M
Sep 19 23:59:46 eee chat[3597]: ATE0V1^M^M
Sep 19 23:59:46 eee chat[3597]: OK
Sep 19 23:59:46 eee chat[3597]:  -- got it 
Sep 19 23:59:46 eee chat[3597]: send (AT+CGDCONT=1,&quot;IP&quot;,&quot;internet.t-mobile&quot;^M)
Sep 19 23:59:47 eee chat[3597]: expect (OK)
Sep 19 23:59:47 eee chat[3597]: ^M
Sep 19 23:59:47 eee chat[3597]: ^M
Sep 19 23:59:47 eee chat[3597]: OK
Sep 19 23:59:47 eee chat[3597]:  -- got it 
Sep 19 23:59:47 eee chat[3597]: send (ATDT*99#^M)
Sep 19 23:59:47 eee chat[3597]: expect (CONNECT)
Sep 19 23:59:47 eee chat[3597]: ^M
Sep 20 00:00:32 eee chat[3597]: alarm
Sep 20 00:00:32 eee chat[3597]: Failed
Sep 20 00:00:32 eee pppd[3596]: Script /usr/sbin/chat -v -f /etc/chatscripts/acm0 finished (pid 3597), status = 0x3
Sep 20 00:00:32 eee pppd[3596]: Connect script failed
Sep 20 00:00:33 eee pppd[3596]: Exit.</code></pre></div><p>And this connect-script does work with all other sticks.</p>											<p class="post-edited">(Last edited by <strong>naturelle</strong> on 20 Sep 2013, 01:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212837">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">Samweis</div>
					<div class="post-datetime">
						20 Sep 2013, 09:30					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>naturelle wrote:</cite><blockquote><div class="codebox"><pre><code>at+cpin?
+CPIN: SIM PIN</code></pre></div></blockquote></div><p>The modem waits for the PIN.<br />You can enter it with: AT+CPIN=”nnnn″ <br />while nnnn is your PIN.</p><p>After that AT+CPIN should yield &quot;READY&quot;.<br /></p><div class="quotebox"><cite>naturelle wrote:</cite><blockquote><div class="codebox"><pre><code>at+clk?
ERROR
at+clk=?
ERROR</code></pre></div></blockquote></div><p>Yes, the modem is right. It should have been AT+CLCK? or AT+CLCK=?.<br />Sorry about that.<br /></p><div class="quotebox"><cite>naturelle wrote:</cite><blockquote><p>+COPS: (<strong>1</strong>,&quot;T-Mobile D&quot;,&quot;TMO D&quot;,&quot;26201&quot;,0),(<strong>1</strong>,&quot;T-Mobile D&quot;,&quot;TMO D&quot;,&quot;26201&quot;,2),(<strong>3</strong>,&quot;E-Plus&quot;,&quot;E-Plus&quot;,&quot;26203&quot;,0),(3,&quot;)</p></blockquote></div><p>The modem found the networks. T-Mobile is &quot;available&quot; (= <strong>1</strong>), while E-Plus is &quot;forbidden&quot; (=<strong>3</strong>) for this SIM card. <br />Your AT+CREG? showed that the modem is in manual network selection mode. That&#039;s why it did not register.<br />You can pick an operator with&nbsp; AT+COPS=4,2,0<br />or just switch it to automatic network selection with AT+COPS=0</p><div class="quotebox"><cite>naturelle wrote:</cite><blockquote><p> And this connect-script does work with all other sticks.</p></blockquote></div><p>Yes, all sticks are equal.<br />But some sticks are more equal than others. <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>I would just try to register with the AT commands and see how the modem responds. If you find out that it needs an additional setting, you can simply amend the chat script.<br />Or you find out it is locked.&nbsp; But then you <em>know</em>.</p><p>P.S.: You will find all these AT commands on the net.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212849">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">naturelle</div>
					<div class="post-datetime">
						20 Sep 2013, 12:45					</div>
				</div>
				<div class="post-content content">
					<p>Hi!</p><p>Are you mixing things in your answer? I have intendedly differentiated between the different SIM-cards. The behaviour of the modem is different.</p><div class="quotebox"><cite>Samweis wrote:</cite><blockquote><p>You can enter it with: AT+CPIN=”nnnn″ <br />while nnnn is your PIN.</p></blockquote></div><p>Yes, I know that. But this for example is the answer when I try to give the correct PIN to my E-Plus-SIM:<br /></p><div class="codebox"><pre><code>at+cpin=xxxx
ERROR</code></pre></div><p>Same when trying my T-Mobile SIM, where I activated SIM-PIN before with an old Nokia-phone for this testing.</p><div class="quotebox"><blockquote><p>Yes, the modem is right. It should have been AT+CLCK? or AT+CLCK=?.</p></blockquote></div><p>With the E-Plus-SIM (same answer with T-Mobile):<br /></p><div class="codebox"><pre><code>at+clck?                                                               
ERROR                                                                  
at+clck=?
+CLCK: (&quot;SC&quot;,&quot;AO&quot;,&quot;OI&quot;,&quot;OX&quot;,&quot;AI&quot;,&quot;IR&quot;,&quot;AB&quot;,&quot;AG&quot;,&quot;AC&quot;,&quot;FD&quot;,&quot;BN&quot;,&quot;PS&quot;,&quot;PN&quot;,&quot;PU&quot;,&quot;PP&quot;,&quot;PC&quot;)

OK</code></pre></div><div class="quotebox"><blockquote><div class="quotebox"><cite>naturelle wrote:</cite><blockquote><p>+COPS: (<strong>1</strong>,&quot;T-Mobile D&quot;,&quot;TMO D&quot;,&quot;26201&quot;,0),(<strong>1</strong>,&quot;T-Mobile D&quot;,&quot;TMO D&quot;,&quot;26201&quot;,2),(<strong>3</strong>,&quot;E-Plus&quot;,&quot;E-Plus&quot;,&quot;26203&quot;,0),(3,&quot;)</p></blockquote></div><p>The modem found the networks. T-Mobile is &quot;available&quot; (= <strong>1</strong>), while E-Plus is &quot;forbidden&quot; (=<strong>3</strong>) for this SIM card. <br />Your AT+CREG? showed that the modem is in manual network selection mode. That&#039;s why it did not register.<br />You can pick an operator with&nbsp; AT+COPS=4,2,0<br />or just switch it to automatic network selection with AT+COPS=0</p></blockquote></div><p>It were too simple, &quot;just&quot;... (with E-Plus inserted):<br /></p><div class="codebox"><pre><code>at+cops=0
ERROR
at+cops0
ERROR</code></pre></div><p>If the stick would react like estimated, all would be fine. But it doesn&#039;t.<br />Another strange thing: I am living on a place where I can get all four available networks (T-Mobile, Vodafone, E-Plus, o2), but only T-Mobile and E-Plus are shown. Where are the other two?</p><p><span class="bbu">Improvements at the moment:</span><br />after at+cops=0 with T-Mobile-SIM inserted I can&#039;t see any difference on the stick. The output of all commands is exactly the same, so I cannot see if at +cops=0 worked. BUT: the stick establishes a connection to T-Mobile.<br />Next: pulling out the stick, put it in again:<br /></p><div class="codebox"><pre><code>at+cops?
+COPS: 0,0,&quot;T-Mobile D&quot;,2</code></pre></div><p>Seems like it remembers the setting. Actualisation: no, it doesn&#039;t. After putting in the E-Plus-SIM and then the T-Mobile-SIM again I&#039;ve got:<br /></p><div class="codebox"><pre><code>at+cops?
+COPS: 0

OK
at+cops=?
+COPS: (2,&quot;T-Mobile D&quot;,&quot;TMO D&quot;,&quot;26201&quot;,0),(1,&quot;T-Mobile D&quot;,&quot;TMO D&quot;,&quot;26201&quot;,2),(3,&quot;Vodafone.de&quot;,&quot;Vodafone&quot;,&quot;26202&quot;,)

OK</code></pre></div><p><span class="bbu">So, next, testing with E-Plus-SIM with activated SIM-PIN:</span><br /></p><div class="codebox"><pre><code>atz                                                                    
OK                                                                     
at+cpin?
+CPIN: SIM PIN

OK
at+cpin=0000
ERROR
at+cops?
+COPS: 0

OK
at+cops=?
ERROR</code></pre></div><p>Now with deactivated SIM-PIN (MEDIONmobile is equal to E-Plus):<br /></p><div class="codebox"><pre><code>atz                                                                    
OK                                                                     
at+cpin?
+CPIN: READY

OK
at+cops?
+COPS: 0,0,&quot;MEDIONmobile&quot;,2

OK
at+cops=?
+COPS: (2,&quot;MEDIONmobile&quot;,&quot;&quot;,&quot;26203&quot;,2),(1,&quot;MEDIONmobile&quot;,&quot;&quot;,&quot;26203&quot;,0),(3,&quot;T-Mobile D&quot;,&quot;TMO D&quot;,&quot;26201&quot;,2),(3,&quot;o2 )

OK</code></pre></div><p>Really strange, after deactivating SIM-PIN in my phone the stick works now also with that SIM-card.<br />Now re-activating SIM-PIN: <strong>does not</strong> work again! So the stick isn&#039;t able to set PIN correctly on that card.</p><p>Tried with the otelo (Vodafone) card: does only work, when set AT+CGDCONT=1,&quot;IP&quot;,&quot;event.otelo.de&quot; manually. All other cards don&#039;t need that.</p><p><strong><span class="bbu">Conclusion:</span></strong><br />Stick does work, if I set at+cops=0 manually <em>and</em> if SIM-PIN is deactivated.</p><p>Why does it not work with activated SIM-PIN?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212856">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">Samweis</div>
					<div class="post-datetime">
						20 Sep 2013, 14:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>naturelle wrote:</cite><blockquote><div class="codebox"><pre><code>at+cpin=xxxx
ERROR</code></pre></div></blockquote></div><p>I guess that&#039;s normal - you did not enclose your PIN string in double quotation marks.<br /></p><div class="quotebox"><cite>naturelle wrote:</cite><blockquote><p>It were too simple, &quot;just&quot;... (with E-Plus inserted):<br /></p><div class="codebox"><pre><code>at+cops=0
ERROR</code></pre></div></blockquote></div><p>Weird... Try<br />AT+COPS=0,2 (2 is numeric format for the operator identification string)<br /></p><div class="quotebox"><cite>naturelle wrote:</cite><blockquote><p>after at+cops=0 with T-Mobile-SIM inserted I can&#039;t see any difference on the stick. The output of all commands is exactly the same, so I cannot see if at +cops=0 worked. BUT: the stick establishes a connection to T-Mobile.</p></blockquote></div><p>Then AT+CREG? would have to be<br />+CREG 0,1<br />so something must have changed.</p><div class="quotebox"><cite>naturelle wrote:</cite><blockquote><div class="codebox"><pre><code>at+cops?
+COPS: 0,0,&quot;T-Mobile D&quot;,2</code></pre></div><p>Seems like it remembers the setting. Actualisation: no, it doesn&#039;t. After putting in the E-Plus-SIM and then the T-Mobile-SIM again I&#039;ve got:<br /></p><div class="codebox"><pre><code>at+cops?
+COPS: 0</code></pre></div></blockquote></div><p>It is no really a setting. The first result just reports that it was registered to the home network.<br />The second reports that it was set to automatic network selection, but not booked in.<br />Here AT+CREG? would have yielded +CREG: 0,2 (not registered, but searching).<br />You have to give it a bit of time - these things are not that fast. <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /><br /></p><div class="quotebox"><cite>naturelle wrote:</cite><blockquote><p>Why does it not work with activated SIM-PIN?</p></blockquote></div><p>So bottom line it seems everything can be traced back to the PIN not being quoted.<br />You could copy and edit the chat script to make sure that the PIN is quoted and a AT+COPS=0 is issued (or AT+COPS=0,2).</p><p>BTW: Have you tried comgt?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212857">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">naturelle</div>
					<div class="post-datetime">
						20 Sep 2013, 15:03					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Samweis wrote:</cite><blockquote><p>So bottom line it seems everything can be traced back to the PIN not being quoted.</p></blockquote></div><p>In my scripts for the other sticks the PIN is not quoted and they work well. I will try it this evening.</p><div class="quotebox"><blockquote><p>BTW: Have you tried comgt?</p></blockquote></div><p>No. Until now I&#039;ve tried out all with minicom and ppp (pon/poff) on my Debian netbook. Easier than trying on the router.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212861">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">Samweis</div>
					<div class="post-datetime">
						20 Sep 2013, 17:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>naturelle wrote:</cite><blockquote><p>[In my scripts for the other sticks the PIN is not quoted and they work well. I will try it this evening.</p></blockquote></div><p>Yes, but something is different about this stick, isn&#039;t it?<br />I tried two of my stick and they accepted the PIN both quoted and unquoted. But I believe the specs ask for quotation marks. And I am just trying to save you 30 Euros. <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>I also tried a locked stick with a &quot;foreign&quot; card. It accepted the PIN and allowed most other functions. But it would return ERROR on the attempt to list the available operators, since it only allows connections to the home network anyways.</p><p>BTW.: comgt exists in wheezy, too.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>