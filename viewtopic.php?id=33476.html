<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> How compiling a &quot;c&quot; programs with libpcap and libpthread on WRT54GL</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 12 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p151042">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">chenshin</div>
					<div class="post-datetime">
						13 Dec 2011, 09:29					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />i have a linksys WRT54GL v1.1 with WHITE RUSSIAN (0.9)&nbsp; and i want to cross-compile a program with the library libpcap and libpthread.<br />I want use my WRT54GL like monitor to sniff packet wireless to command an Access Point to start Handoff/Handover for the associated mobile station to another Access Point and my program&nbsp; include many headers file and c files like :</p><p>monitor.c<br />monitor_caputure.c<br />monitor_sender.c<br />monitor_receiver.c<br />etc...</p><p>And their headers :</p><p>monitor_capture.h<br />monitor_sender.h<br />monitor_receiver.h<br />etc..</p><p>I download from site of Linksys the toolchain :</p><p><a href="http://www.linksysbycisco.com/IT/it/sup">http://www.linksysbycisco.com/IT/it/sup</a> â€¦ ku=#WRT54G</p><p>I install libpcap-0.9.6 on my Ubuntu</p><p>I download WRT54GL-US_v4.30.13.tgz in Desktop<br />tar xvzf WRT54GL-US_v4.30.13.tgz<br />cd WRT54GL-US_v4.30.13/tools/</p><p>then i copy the dir brcm in /opt</p><p>cd /opt/brcm/hndtools-mipsel-linux/bin</p><p>set the PATH with&nbsp; export PATH=&quot;$PATH:$PWD&quot;</p><p>also cd /opt/brcm/hndtools-mipsel-uclibc/bin</p><p>set the PATH with&nbsp; export PATH=&quot;$PATH:$PWD&quot;</p><p>and go in my directory withe the files to cross-compile and do:</p><p>mipsel-uclibc-gcc monitor.c monitor_list.c monitor_receiver.c ......&nbsp; -o monitor -L /home/peppe/WRT54GL-US_v4.30.13/tools-mipsel-uclibc/lib/libpthread.a -static -lpthread -L /usr/lib/libpcap.a -I /usr/include/ -static -lpcap</p><br /><br /><p>but i have this error : <br />/opt/brcm/hndtools-mipsel-linux/bin/../lib/gcc-lib/mipsel-linux/3.2.3/../../../../mipsel-linux/bin/ld: cannot find -lpcap<br />collect2: ld returned 1 exit status</p><p>The if i cross-compile e simple file hello.c with:</p><p>mipsel-uclibc-gcc hello.c -o hello</p><p>compile ok and when i copy this file in WRT54GL run .<br />Have someone an idea to solve this problems ? where i mistake ? please help me</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>