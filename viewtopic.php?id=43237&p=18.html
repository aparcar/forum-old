<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> U-Boot mod for routers with AR9331/AR9344</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 3 Apr 2015 and 7 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 18 of 25</div><nav><ul><li><a href="viewtopic.php%3Fid=43237&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=43237&amp;p=16.html">16</a></li><li><a href="viewtopic.php%3Fid=43237&amp;p=17.html">17</a></li><li class="pagination-current"><span>18</span></li><li><a href="viewtopic.php%3Fid=43237&amp;p=19.html">19</a></li><li><a href="viewtopic.php%3Fid=43237&amp;p=20.html">20</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=43237&amp;p=25.html">25</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p256240">
				<div class="post-metadata">
					<div class="post-num">Post #426</div>
					<div class="post-author">djdeeles</div>
					<div class="post-datetime">
						2 Dec 2014, 08:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>alphasparc wrote:</cite><blockquote><div class="quotebox"><cite>djdeeles wrote:</cite><blockquote><p>I flashed latest binaries from pepe2k with some overclock (hexedit). But i got some memory errors. I need to pay attention because i dont have any jtag or programmer experience.</p><p>720/480/240 flashed succesfully and run memtester it&#039;s fails on some tests. Then lowered memory clocks.<br />720/400/200 ran memtester it&#039;s passed on each test and stable.</p><p>I want to go higher frequencies. Can i run 780mhz cpu with 400/200 memory clock? Does memory clocks limit cpu or linked?<br />Any suggestions about clock combinations with hex values?</p></blockquote></div><p>IIRC the stock frequency is 560/480/240.<br />Does your Router pass memtester at Stock settings?</p></blockquote></div><p>Not tested at stock settings. It&#039;s like going to fail at stock settings <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p256252">
				<div class="post-metadata">
					<div class="post-num">Post #427</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						2 Dec 2014, 11:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>djdeeles wrote:</cite><blockquote><div class="quotebox"><cite>alphasparc wrote:</cite><blockquote><div class="quotebox"><cite>djdeeles wrote:</cite><blockquote><p>I flashed latest binaries from pepe2k with some overclock (hexedit). But i got some memory errors. I need to pay attention because i dont have any jtag or programmer experience.</p><p>720/480/240 flashed succesfully and run memtester it&#039;s fails on some tests. Then lowered memory clocks.<br />720/400/200 ran memtester it&#039;s passed on each test and stable.</p><p>I want to go higher frequencies. Can i run 780mhz cpu with 400/200 memory clock? Does memory clocks limit cpu or linked?<br />Any suggestions about clock combinations with hex values?</p></blockquote></div><p>IIRC the stock frequency is 560/480/240.<br />Does your Router pass memtester at Stock settings?</p></blockquote></div><p>Not tested at stock settings. It&#039;s like going to fail at stock settings <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>I have seen dozen of WDR3600/4300 with faulty memories, failing on stock clocks in memtester.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p256253">
				<div class="post-metadata">
					<div class="post-num">Post #428</div>
					<div class="post-author">djdeeles</div>
					<div class="post-datetime">
						2 Dec 2014, 11:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pepe2k wrote:</cite><blockquote><div class="quotebox"><cite>djdeeles wrote:</cite><blockquote><div class="quotebox"><cite>alphasparc wrote:</cite><blockquote><p>IIRC the stock frequency is 560/480/240.<br />Does your Router pass memtester at Stock settings?</p></blockquote></div><p>Not tested at stock settings. It&#039;s like going to fail at stock settings <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>I have seen dozen of WDR3600/4300 with faulty memories, failing on stock clocks in memtester.</p></blockquote></div><p>Can I try 780/400/200 or 780/450/225 combinations?&nbsp; Does memory clocks limit cpu or linked?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p256255">
				<div class="post-metadata">
					<div class="post-num">Post #429</div>
					<div class="post-author">alphasparc</div>
					<div class="post-datetime">
						2 Dec 2014, 12:14					</div>
				</div>
				<div class="post-content content">
					<p>I believe you can.<br />The CPU PLL is independent of the RAM.<br />Just a question what is the brand of the RAM in your unit?<br />Hynix/Samsung/Winbond?<br />From experience Hynix and Samsung can definitely clock 500/250 for RAM and AHB and still pass memtester.<br />If your unit can&#039;t do 240 AHB you can try 230 and so on unit it passes.</p>											<p class="post-edited">(Last edited by <strong>alphasparc</strong> on 2 Dec 2014, 12:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p256256">
				<div class="post-metadata">
					<div class="post-num">Post #430</div>
					<div class="post-author">djdeeles</div>
					<div class="post-datetime">
						2 Dec 2014, 12:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>alphasparc wrote:</cite><blockquote><p>I believe you can.<br />The CPU PLL is independent of the RAM.<br />Just a question what is the brand of the RAM in your unit?<br />Hynix/Samsung/Winbond?<br />From experience Hynix and Samsung can definitely clock 500/250 for RAM and AHB and still pass memtester.</p></blockquote></div><p>Hynix H5PS5162GFR. I&#039;m thinking to try 780/450/225 clocks. Any recommendations.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p256260">
				<div class="post-metadata">
					<div class="post-num">Post #431</div>
					<div class="post-author">alphasparc</div>
					<div class="post-datetime">
						2 Dec 2014, 12:37					</div>
				</div>
				<div class="post-content content">
					<p>My advice is start low go high, because if it starts to crash you can still recover easily.<br />If you start high go low, you better have your soldering iron and pray that your soldering skills are not rusty.</p><p>Simple eg.<br />Test Max stable RAM:<br />Since 480 not stable then 470&nbsp; memtester until stable<br />For CPU since 720 stable then 730 memtest + wireless + iperf + USB until not stable.<br />Try not to test CPU and RAM concurrently more haste less speed have a understanding of performance state</p>											<p class="post-edited">(Last edited by <strong>alphasparc</strong> on 2 Dec 2014, 12:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p256856">
				<div class="post-metadata">
					<div class="post-num">Post #432</div>
					<div class="post-author">StyletX</div>
					<div class="post-datetime">
						7 Dec 2014, 11:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pepe2k wrote:</cite><blockquote><p>New release is available: <a href="https://github.com/pepe2k/u-boot_mod/releases/tag/2014-11-19">https://github.com/pepe2k/u-boot_mod/re … 2014-11-19</a><br />Enjoy!</p></blockquote></div><p>In this release u-boot for WR703N does not load the firmware on FLASH Winbond W25Q128 - error &quot;Uncompressing kernel image... ## Error: LZMA error num: 1&quot;.<br />Exactly as: <a href="https://github.com/pepe2k/u-boot_mod/issues/42">https://github.com/pepe2k/u-boot_mod/issues/42</a><br />But default u-boot works Ok, why?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p256875">
				<div class="post-metadata">
					<div class="post-num">Post #433</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						7 Dec 2014, 15:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>StyletX wrote:</cite><blockquote><p>In this release u-boot for WR703N does not load the firmware on FLASH Winbond W25Q128 - error &quot;Uncompressing kernel image... ## Error: LZMA error num: 1&quot;.<br />Exactly as: <a href="https://github.com/pepe2k/u-boot_mod/issues/42">https://github.com/pepe2k/u-boot_mod/issues/42</a><br />But default u-boot works Ok, why?</p></blockquote></div><p><a href="https://github.com/pepe2k/u-boot_mod/issues/new">https://github.com/pepe2k/u-boot_mod/issues/new</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p256880">
				<div class="post-metadata">
					<div class="post-num">Post #434</div>
					<div class="post-author">mowgli80</div>
					<div class="post-datetime">
						7 Dec 2014, 16:48					</div>
				</div>
				<div class="post-content content">
					<p>Flashed the new uboot through the older version&#039;s webpage successfully for wdr3600. Is there any way I can overclock the ram versions just to try them out in a failsafe manner?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p256931">
				<div class="post-metadata">
					<div class="post-num">Post #435</div>
					<div class="post-author">StyletX</div>
					<div class="post-datetime">
						8 Dec 2014, 05:29					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pepe2k wrote:</cite><blockquote><div class="quotebox"><cite>StyletX wrote:</cite><blockquote><p>In this release u-boot for WR703N does not load the firmware on FLASH Winbond W25Q128 - error &quot;Uncompressing kernel image... ## Error: LZMA error num: 1&quot;.<br />Exactly as: <a href="https://github.com/pepe2k/u-boot_mod/issues/42">https://github.com/pepe2k/u-boot_mod/issues/42</a><br />But default u-boot works Ok, why?</p></blockquote></div><p><a href="https://github.com/pepe2k/u-boot_mod/issues/new">https://github.com/pepe2k/u-boot_mod/issues/new</a></p></blockquote></div><p>I am sorry, all Ok!<br />I flashed the firmware is not correct.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257255">
				<div class="post-metadata">
					<div class="post-num">Post #436</div>
					<div class="post-author">t_n</div>
					<div class="post-datetime">
						10 Dec 2014, 20:36					</div>
				</div>
				<div class="post-content content">
					<p>HW:TP-LINK TL-WR340G<br />Original 2MB flash and 16M RAM. Modified to 16/64MB.<br />It is an generic AR9331 board. Bootloader compiled for target WR740N v4, openwrt for WR741ND v4.</p><p>Bootloader modified from git Nov 8 2014.</p><p>Issue: When an ethernet cable is connected to the wan or lan switch port, the bootloader fails to uncompress image or freezes completely.</p><div class="codebox"><pre><code>*********************************************
*   U-Boot 1.1.4  (Nov  9 2014, 18:23:34)   *
*********************************************

AP121 (AR9331) U-Boot for TL-WR74xN/D v4

DRAM:   64 MB DDR 16-bit
FLASH:  Winbond W25Q128 (16 MB)
CLOCKS: 400/400/200/33 MHz (CPU/RAM/AHB/SPI)

LED on during eth initialization...

Hit any key to stop autobooting:  0 

Booting image at: 0x9F020000

   Image name:   OpenWrt r43220
   Image type:   MIPS Linux Kernel Image (lzma compressed)
   Data size:    1057588 Bytes = 1 MB
   Load address: 0x80060000
   Entry point:  0x80060000

Uncompressing kernel image... </code></pre></div><p>Sometimes this is appended:</p><div class="codebox"><pre><code>Uncompressing kernel image... ## Error: LZMA error num: 1

## Error: failed to execute &#039;bootcmd&#039;!
HTTP server is starting for firmware update...

Link down: eth0
Link down: eth1
Link down: eth0
Ethernet mode (duplex/speed): 1/1000 Mbps
HTTP server is starting at IP: 192.168.1.1
HTTP server is ready!</code></pre></div><br /><p>But if the boot process with the connected cable is interrupted by the terminal (1x enter) and then the command &quot;boot&quot; is run, everything is OK.</p><div class="codebox"><pre><code>uboot&gt; boot

Booting image at: 0x9F020000

   Image name:   OpenWrt r43220
   Image type:   MIPS Linux Kernel Image (lzma compressed)
   Data size:    1057588 Bytes = 1 MB
   Load address: 0x80060000
   Entry point:  0x80060000

Uncompressing kernel image... OK!
Starting kernel...

[    0.000000] Linux version 3.10.58 ......</code></pre></div><p>Normal boot without any eth connected:</p><div class="codebox"><pre><code>*********************************************
*   U-Boot 1.1.4  (Nov  9 2014, 18:23:34)   *
*********************************************

AP121 (AR9331) U-Boot for TL-WR74xN/D v4

DRAM:   64 MB DDR 16-bit
FLASH:  Winbond W25Q128 (16 MB)
CLOCKS: 400/400/200/33 MHz (CPU/RAM/AHB/SPI)

LED on during eth initialization...

Hit any key to stop autobooting:  0 

Booting image at: 0x9F020000

   Image name:   OpenWrt r43220
   Image type:   MIPS Linux Kernel Image (lzma compressed)
   Data size:    1057588 Bytes = 1 MB
   Load address: 0x80060000
   Entry point:  0x80060000

Uncompressing kernel image... OK!
Starting kernel...

[    0.000000] Linux version 3.10.58 </code></pre></div><br /><p>After the linux boots, connecting eth does not have any effect, everything works. First I thought some hardware issue but if the boot command loads the image, it seems to be some SW initialization related.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257260">
				<div class="post-metadata">
					<div class="post-num">Post #437</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						10 Dec 2014, 20:48					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>t_n wrote:</cite><blockquote><p>HW:TP-LINK TL-WR340G<br />[...]<br />It is an generic AR9331 board. <br />[...]</p></blockquote></div><p>Are you sure? Could you post photo of the board?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257267">
				<div class="post-metadata">
					<div class="post-num">Post #438</div>
					<div class="post-author">t_n</div>
					<div class="post-datetime">
						10 Dec 2014, 21:28					</div>
				</div>
				<div class="post-content content">
					<p>Its almost identical to this<br /><a href="http://wiki.openwrt.org/_detail/toh/tp-link/tlwr741nd_v4_board.jpg?id=toh%3Atp-link%3Atl-wr741nd">http://wiki.openwrt.org/_detail/toh/tp- … tl-wr741nd</a></p><p>The RAM mod needed population one resistor for address line.</p><p>The bootloader for wr703n behaves the same.</p><p>Even the newest version of uboot-mod has this problem.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257272">
				<div class="post-metadata">
					<div class="post-num">Post #439</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						10 Dec 2014, 21:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>t_n wrote:</cite><blockquote><p>Its almost identical to this<br /><a href="http://wiki.openwrt.org/_detail/toh/tp-link/tlwr741nd_v4_board.jpg?id=toh%3Atp-link%3Atl-wr741nd">http://wiki.openwrt.org/_detail/toh/tp- … tl-wr741nd</a></p></blockquote></div><p>Really, TL-WR340G? I thought that TP-Link uses &quot;G&quot; in model name for 802.11g only devices.</p><div class="quotebox"><cite>t_n wrote:</cite><blockquote><p>The RAM mod needed population one resistor for address line.</p><p>The bootloader for wr703n behaves the same.</p><p>Even the newest version of uboot-mod has this problem.</p></blockquote></div><p>Could be related with too high SPI clock (33 MHz), I have already seen similar problems on fake Winbond chips from China.<br />Or some other issue.</p><p>Have you tried some original U-Boot image from TP-Link (you may find some in my GitHub repository)?</p>											<p class="post-edited">(Last edited by <strong>pepe2k</strong> on 10 Dec 2014, 21:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257278">
				<div class="post-metadata">
					<div class="post-num">Post #440</div>
					<div class="post-author">t_n</div>
					<div class="post-datetime">
						10 Dec 2014, 22:28					</div>
				</div>
				<div class="post-content content">
					<p>Solved:It was a hardware problem.</p>											<p class="post-edited">(Last edited by <strong>t_n</strong> on 15 Dec 2014, 19:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258141">
				<div class="post-metadata">
					<div class="post-num">Post #441</div>
					<div class="post-author">arell50</div>
					<div class="post-datetime">
						19 Dec 2014, 15:07					</div>
				</div>
				<div class="post-content content">
					<p>I have tried compiling the u-boot_mod and followed the steps from here:</p><br /><div class="quotebox"><blockquote><p>Now we need to install some packages on Ubuntu (if you haven&#039;t already):</p><p>sudo apt-get update<br />sudo apt-get install git<br />sudo apt-get install openjdk-7-jdk<br />sudo apt-get install minicom</p><p>To compile pepe2k&#039;s u-boot_mod:</p><p>cd /home/user</p><p>git clone <a href="https://github.com/pepe2k/u-boot_mod.git">https://github.com/pepe2k/u-boot_mod.git</a></p><p>cd u-boot_mod</p><p>wget <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/OpenWrt-Toolchain-ar71xx-for-mips_r2-gcc-4.6-linaro_uClibc-0.9.33.2.tar.bz2">http://downloads.openwrt.org/attitude_a … .2.tar.bz2</a></p><p>tar -xjvf OpenWrt-Toolchain-ar71xx-for-mips_r2-gcc-4.6-linaro_uClibc-0.9.33.2.tar.bz2</p><p>mv OpenWrt-Toolchain-ar71xx-for-mips_r2-gcc-4.6-linaro_uClibc-0.9.33.2/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/ /home/user/u-boot_mod/toolchain</p><p>Now open up /home/user/u-boot_mod/Makefile in your favourite text editor and change:</p><p>export MAKECMD=make –silent ARCH=mips CROSS_COMPILE=mips-linux-gnu-</p><p>to</p><p>export MAKECMD=make ARCH=mips CROSS_COMPILE=mips-openwrt-linux-uclibc-</p><p>under that line add a new one:</p><p>export PATH:=$(BUILD_TOPDIR)/toolchain/bin/:$(PATH)</p><p>Save and exit.</p><p>Now run command make clean_all</p><p>and make tplink_wr740n_v4</p></blockquote></div><br /><p>And I always get this error. I am using ubuntu 14.07.</p><div class="quotebox"><blockquote><p>/u-boot_mod$ make tplink_wr710n<br />make[1]: Entering directory `/home/rsd/u-boot_mod/u-boot&#039;<br /># max delay time for button pressing<br /># don&#039;t show info about console (in, out, err...)<br />&gt; Configuring for TP-Link TL-WR710N at: Jum Dis 19 20:59:51 MYT 2014 <br />make[1]: Leaving directory `/home/rsd/u-boot_mod/u-boot&#039;<br />make[1]: Entering directory `/home/rsd/u-boot_mod/u-boot&#039;<br />Makefile:147: warning: overriding commands for target `.PHONY&#039;<br />Makefile:145: warning: ignoring old commands for target `.PHONY&#039;<br />Makefile:233: warning: overriding commands for target `board/ar7240/ap121/libap121.a&#039;<br />Makefile:201: warning: ignoring old commands for target `board/ar7240/ap121/libap121.a&#039;<br />Makefile:233: warning: overriding commands for target `cpu/mips/libmips.a&#039;<br />Makefile:201: warning: ignoring old commands for target `cpu/mips/libmips.a&#039;<br />Makefile:233: warning: overriding commands for target `cpu/mips/ar7240/libar7240.a&#039;<br />Makefile:201: warning: ignoring old commands for target `cpu/mips/ar7240/libar7240.a&#039;<br />make[2]: Entering directory `/home/rsd/u-boot_mod/u-boot/tools&#039;<br />ln -s ../common/environment.c environment.c<br />ln -s ../lib_generic/crc32.c crc32.c<br />make[2]: Leaving directory `/home/rsd/u-boot_mod/u-boot/tools&#039;<br />make[2]: Entering directory `/home/rsd/u-boot_mod/u-boot/tools&#039;<br />make[2]: `.depend&#039; is up to date.<br />make[2]: Leaving directory `/home/rsd/u-boot_mod/u-boot/tools&#039;<br />make -C tools all<br />make[2]: Entering directory `/home/rsd/u-boot_mod/u-boot/tools&#039;<br />gcc -g -Wall -pedantic -idirafter ../include -DTEXT_BASE=0x80010000 -DUSE_HOSTCC -O2 -c mkimage.c<br />gcc: error trying to exec &#039;cc1&#039;: execvp: No such file or directory<br />make[2]: *** [mkimage.o] Error 1<br />make[2]: Leaving directory `/home/rsd/u-boot_mod/u-boot/tools&#039;<br />make[1]: *** [tools] Error 2<br />make[1]: Leaving directory `/home/rsd/u-boot_mod/u-boot&#039;<br />make: *** [tplink_wr710n] Error 2</p></blockquote></div><p>Any ideas anyone?</p><p>whereis cc1 does not bring up anything..</p>											<p class="post-edited">(Last edited by <strong>arell50</strong> on 19 Dec 2014, 16:31)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258232">
				<div class="post-metadata">
					<div class="post-num">Post #442</div>
					<div class="post-author">alphasparc</div>
					<div class="post-datetime">
						20 Dec 2014, 13:47					</div>
				</div>
				<div class="post-content content">
					<p>For those wdr3600 who which failed memtest at stock what is the RAM and AHB Clock that fixed it?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258233">
				<div class="post-metadata">
					<div class="post-num">Post #443</div>
					<div class="post-author">djdeeles</div>
					<div class="post-datetime">
						20 Dec 2014, 13:50					</div>
				</div>
				<div class="post-content content">
					<p>I run at 720 400 200 without problem</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258235">
				<div class="post-metadata">
					<div class="post-num">Post #444</div>
					<div class="post-author">alphasparc</div>
					<div class="post-datetime">
						20 Dec 2014, 14:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>djdeeles wrote:</cite><blockquote><p>I run at 720 400 200 without problem</p></blockquote></div><p>Is that the highest? I am more interested in the RAM and AHB Frequency.<br />I am planning to start embbedding the uboot into factory images so more people will be able to use it so I want to offer a fix for those &quot;memtester&quot; fail units.</p>											<p class="post-edited">(Last edited by <strong>alphasparc</strong> on 20 Dec 2014, 14:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258242">
				<div class="post-metadata">
					<div class="post-num">Post #445</div>
					<div class="post-author">djdeeles</div>
					<div class="post-datetime">
						20 Dec 2014, 16:57					</div>
				</div>
				<div class="post-content content">
					<p>I didnt try too much but 480 &amp; 450 not stable for me. I&#039;m open for suggestions <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258245">
				<div class="post-metadata">
					<div class="post-num">Post #446</div>
					<div class="post-author">alphasparc</div>
					<div class="post-datetime">
						20 Dec 2014, 17:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>djdeeles wrote:</cite><blockquote><p>I didnt try too much but 480 &amp; 450 not stable for me. I&#039;m open for suggestions <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>440? Minus 10 until stable</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258249">
				<div class="post-metadata">
					<div class="post-num">Post #447</div>
					<div class="post-author">djdeeles</div>
					<div class="post-datetime">
						20 Dec 2014, 18:15					</div>
				</div>
				<div class="post-content content">
					<p>Tried 720/420/210 still errors. I think 400/200 will be safe.</p><div class="codebox"><pre><code>memtester version 4.3.0 (32-bit)
Copyright (C) 2001-2012 Charles Cazabon.
Licensed under the GNU General Public License version 2 (only).

pagesize is 4096
pagesizemask is 0xfffff000
want 50MB (52428800 bytes)
got  50MB (52428800 bytes), trying mlock ...locked.
Loop 1/1:
  Stuck Address       : ok
  Random Value        : ok
  Compare XOR         : ok
  Compare SUB         : ok
  Compare MUL         : ok
  Compare DIV         : ok
  Compare OR          : ok
  Compare AND         : ok
  Sequential Increment: ok
  Solid Bits          : ok
  Block Sequential    : ok
  Checkerboard        : ok
  Bit Spread          : testing  23FAILURE: 0x02800000 != 0x02000000 at offset 0x00fd6b80.
  Bit Flip            : testing 184FAILURE: 0x00000000 != 0x00800000 at offset 0x00032d04.
FAILURE: 0x00000000 != 0x00800000 at offset 0x001c0244.
FAILURE: 0x00000000 != 0x00800000 at offset 0x004f2c64.
FAILURE: 0x00000000 != 0x00800000 at offset 0x005e9624.
FAILURE: 0x00000000 != 0x00800000 at offset 0x008cad04.
FAILURE: 0x00000000 != 0x00800000 at offset 0x00c8ad04.
FAILURE: 0x00000000 != 0x00800000 at offset 0x00e0cfa4.
FAILURE: 0x00000000 != 0x00800000 at offset 0x00e46da4.
FAILURE: 0x00000000 != 0x00800000 at offset 0x00e47624.
FAILURE: 0x00000000 != 0x00800000 at offset 0x00e49e64.
FAILURE: 0x00000000 != 0x00800000 at offset 0x00e724e4.
FAILURE: 0x00000000 != 0x00800000 at offset 0x00e73484.
FAILURE: 0x00000000 != 0x00800000 at offset 0x00edd204.
FAILURE: 0x00000000 != 0x00800000 at offset 0x010930e4.
FAILURE: 0x00000000 != 0x00800000 at offset 0x0109afc4.
FAILURE: 0x00000000 != 0x00800000 at offset 0x010ee844.
FAILURE: 0x00000000 != 0x00800000 at offset 0x01256884.
FAILURE: 0x00000000 != 0x00800000 at offset 0x015c1624.
FAILURE: 0x00000000 != 0x00800000 at offset 0x01732d04.
FAILURE: 0x00000000 != 0x00800000 at offset 0x017e3dc4.
FAILURE: 0x00000000 != 0x00800000 at offset 0x017e50e4.
FAILURE: 0x00000000 != 0x00800000 at offset 0x018c3864.
FAILURE: 0x00000000 != 0x00800000 at offset 0x018fc384.
  Walking Ones        : ok
  Walking Zeroes      : ok
  8-bit Writes        : ok
  16-bit Writes       : ok</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258470">
				<div class="post-metadata">
					<div class="post-num">Post #448</div>
					<div class="post-author">dony71</div>
					<div class="post-datetime">
						23 Dec 2014, 10:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dony71 wrote:</cite><blockquote><div class="quotebox"><cite>pepe2k wrote:</cite><blockquote><div class="quotebox"><cite>dony71 wrote:</cite><blockquote><p>Will you help take a look on the code if you have time?</p></blockquote></div><p>I will, post somewhere your code. Does your code base on my modification?</p></blockquote></div><p>hi pepe2k,</p><p>have you got a chance to take a look at source code?<br />today i compile another u-boot with DEBUGOUT enable in athrs26_phy.h<br />i&#039;m very puzzle because i don&#039;t see anything wrong on DEBUGOUT print below,<br />but ping still unsuccessful</p><p>=============================================================<br />U-Boot 1.1.4 (Apr 16 2014 - 16:51:50)</p><p>AP94 (ar7100) U-boot 0.0.12<br />DRAM:&nbsp; b8050000: 0xc0140180<br />32 MB<br />Top of RAM usable for U-Boot at: 82000000<br />Reserving 224k for U-Boot at: 81fc4000<br />Reserving 192k for malloc() at: 81f94000<br />Reserving 44 Bytes for Board Info at: 81f93fd4<br />Reserving 36 Bytes for Global Data at: 81f93fb0<br />Reserving 128k for boot params() at: 81f73fb0<br />Stack Pointer at: 81f73f98<br />Now running in RAM - U-Boot at: 81fc4000<br />id read 0x100000ff<br />flash size 8MB, sector count = 128<br />Flash:&nbsp; 8 MB<br />In:&nbsp; &nbsp; serial<br />Out:&nbsp; &nbsp;serial<br />Err:&nbsp; &nbsp;serial<br />Net:&nbsp; &nbsp;ag7100_enet_initialize...<br />No valid address in Flash. Using fixed address<br />start auto negogiation on each phy<br />PHY Base: 0x0 PHY Addr: 0x0<br />PHY Base: 0x0 PHY Addr: 0x1<br />PHY Base: 0x0 PHY Addr: 0x2<br />PHY Base: 0x0 PHY Addr: 0x3<br />associated PHY<br />Port 0, Neg Success<br />Port 1, Neg Success<br />Port 2, Neg Success<br />Port 3, Neg Success<br />Initialize software status<br />eth0: Phy Specific Status=0010<br />eth0: Phy Specific Status=0010<br />eth0: Phy Specific Status=0010<br />eth0: Phy Specific Status=0010;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;eth0: 00:03:7f:09:0b:ad<br />eth0 up<br />No valid address in Flash. Using fixed address<br />start auto negogiation on each phy<br />PHY Base: 0x0 PHY Addr: 0x4<br />associated PHY<br />Port 4, Neg Success<br />Initialize software status<br />eth1: Phy Specific Status=0010<br />eth1: 00:03:7f:09:0b:ad<br />eth1 up<br />eth0, eth1<br />Hit any key to stop autoboot:&nbsp; 0<br />ar7100&gt; ping 192.168.1.5</p><p>enet0 port0 up<br />Using eth0 device<br />sending ARP for c0a80105<br />ARP broadcast 1<br />ARP broadcast 2<br />ping failed; host 192.168.1.5 is not alive</p></blockquote></div><p>hi pepe2k,<br />long forgotten bugs<br />have you got chance to take a look on this?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258639">
				<div class="post-metadata">
					<div class="post-num">Post #449</div>
					<div class="post-author">Kaar3l</div>
					<div class="post-datetime">
						25 Dec 2014, 01:28					</div>
				</div>
				<div class="post-content content">
					<p>I bought a flash S25FL127S, but when programming it says jedec id: 010017h. :S Does it work?</p><p>EDIT: Didn&#039;t work. I have to recompile the code. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><br /><p>EDIT: :S Have some weird stuff going on. When I plug in the programmer everything is ok and jedec is same as S25FL127S should have, but after some commands it truns to 010017H. :S Going to solder a new programmer and get other computer. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><br /><p>EDIT: Really Really weird things going on with this chip. I had previously installed one 16mb chip same brand and same jedec as in uboot. Now my new chip sometimes showed normal jedec, but other times something really weird. Soldered into the 703n and It showed unknown jedec chip. Jedec was some numbers. Now I added those jedec numbers to uboot recompiled the uboot, flashed it on chip and it recognized my weirdly acting chip. Now I have working 16mb version, I&#039;ll not touch that uboot on that chip again. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>Kaar3l</strong> on 26 Dec 2014, 01:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258836">
				<div class="post-metadata">
					<div class="post-num">Post #450</div>
					<div class="post-author">JohnV</div>
					<div class="post-datetime">
						27 Dec 2014, 03:05					</div>
				</div>
				<div class="post-content content">
					<p>I am needing to &quot;underclock&quot; a router based on TP MR3220 V1.&nbsp; Using an AR7241 SOC.&nbsp; Trying to reduce the heat output from the 7241.</p><p>Based on what I read, there was some indications that it might work, but it also seems that it is not listed as supported so I suspect the u-boot mod does not work as-is on that SOC.</p><p>Can someone, or pepe2k, confirm this one way or the other?</p><p>Is it possible for to use the source for the u-boot mod and add support for 7241, or will the U-Boot not work on that SOC?</p><p>I also saw lots of posts to change the clock speed during runtime of OpenWRT using &quot;io&quot; commands, but that topic seemed to drop off so not sure if it was ever a viable solution or u-boot is the only option?</p><p>Thanks in advance, and pepe2k, you are the man for all this work you have done.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 18 of 25</div><nav><ul><li><a href="viewtopic.php%3Fid=43237&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=43237&amp;p=16.html">16</a></li><li><a href="viewtopic.php%3Fid=43237&amp;p=17.html">17</a></li><li class="pagination-current"><span>18</span></li><li><a href="viewtopic.php%3Fid=43237&amp;p=19.html">19</a></li><li><a href="viewtopic.php%3Fid=43237&amp;p=20.html">20</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=43237&amp;p=25.html">25</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>