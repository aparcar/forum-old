<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> lighttpd and php signal 10</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p145584">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">asaegerman</div>
					<div class="post-datetime">
						11 Oct 2011, 14:41					</div>
				</div>
				<div class="post-content content">
					<p>I run lighttpd 1.4.26-2 and php5 5.3.1-3 on openwrt Backfire 10.03.<br />If I run phpinfo.php everything goes well.</p><p>With a test.php script:</p><div class="codebox"><pre><code>&lt;?php
echo &quot;&lt;html&gt;&lt;body&gt;&quot;;
echo &quot;this is a php-script&lt;br&gt;&quot;;
echo date(&#039;d&#039;);
echo &quot;&lt;/body&gt;&lt;/html&gt;&quot;;
?&gt;</code></pre></div><p>I get an error &quot;(mod_cgi.c.1287) cleaning up CGI: process died with signal 10&quot;</p><p>If I out comment the &quot;date(&#039;d&#039;)&quot; instruction, no problem.</p><p>Anyone who can help me? I only found one post with this error, but no solution...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145586">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">rolf2</div>
					<div class="post-datetime">
						11 Oct 2011, 16:08					</div>
				</div>
				<div class="post-content content">
					<p>Just tried this script on my rspro , and no problems .<br />Have you set Default timezone in your php.ini ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145613">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">asaegerman</div>
					<div class="post-datetime">
						11 Oct 2011, 22:50					</div>
				</div>
				<div class="post-content content">
					<p>yes, I think so. In my php.ini:</p><div class="codebox"><pre><code>[Date]
date.timezone = &quot;Europe/Brussels&quot;
date.default_latitude = 51.0
date.default_longitude = 4.0</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145616">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">rolf2</div>
					<div class="post-datetime">
						11 Oct 2011, 23:22					</div>
				</div>
				<div class="post-content content">
					<p>hmm, seems that you are not alone - <a href="https://forum.openwrt.org/viewtopic.php?id=26510">https://forum.openwrt.org/viewtopic.php?id=26510</a><br />i&#039;m running backfire rc6 compiled from svn , lighttpd, php5 , mysql and don&#039;t see this error ...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145618">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">asaegerman</div>
					<div class="post-datetime">
						11 Oct 2011, 23:32					</div>
				</div>
				<div class="post-content content">
					<p>Yes, I&#039;ve seen that, but no solution <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p149225">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">asaegerman</div>
					<div class="post-datetime">
						22 Nov 2011, 00:36					</div>
				</div>
				<div class="post-content content">
					<p>Nobody has a clue to this problem? I have installed a swap partition (150MB), same problem</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p149282">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						22 Nov 2011, 15:27					</div>
				</div>
				<div class="post-content content">
					<p>Signal 10 is a segmentation fault, php is probably just crapping out. Try running the script on the cli.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p149331">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">asaegerman</div>
					<div class="post-datetime">
						23 Nov 2011, 00:20					</div>
				</div>
				<div class="post-content content">
					<p>jow, what do you mean by &quot;php is probably just crapping out&quot;? </p><p>I&#039;ll try to install the cli and let you know...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p149761">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">asaegerman</div>
					<div class="post-datetime">
						28 Nov 2011, 17:59					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve installed lighttpd and php5 on an usb hd: /mnt/usb<br />I&#039;ve run php-cgi on the cli:<br />root@OpenWrt:~# /mnt/usb/usr/bin/php-cgi /mnt/usb/www/test.php<br />Response:<br />X-Powered-By: PHP/5.3.1<br />Content-type: text/html</p><p>Bus error</p><p>In /var/log/lighttpd/error.log:<br />(mod_cgi.c.1287) cleaning up CGI: process died with signal 10 </p><p>When I run:<br />root@OpenWrt:~# /mnt/usb/usr/bin/php-cgi /mnt/usb/www/phpinfo.php</p><p>everything OK (including the [date] section in phpinfo();)</p><p>I&#039;ve set in php.ini:</p><p>memory_limit = 32M<br />date.timezone = &quot;Europe/Brussels&quot;</p><p>free gives me:<br />root@OpenWrt:~# free<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;total&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;used&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;free&nbsp; &nbsp; &nbsp; &nbsp;shared&nbsp; &nbsp; &nbsp; buffers<br />&nbsp; Mem:&nbsp; &nbsp; &nbsp; &nbsp; 29484&nbsp; &nbsp; &nbsp; &nbsp; 27032&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2452&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;7040<br /> Swap:&nbsp; &nbsp; &nbsp; &nbsp;152652&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;12&nbsp; &nbsp; &nbsp; &nbsp;152640<br />Total:&nbsp; &nbsp; &nbsp; &nbsp;182136&nbsp; &nbsp; &nbsp; &nbsp; 27044&nbsp; &nbsp; &nbsp; &nbsp;155092</p><p>and df:<br />root@OpenWrt:~# df<br />Filesystem&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1K-blocks&nbsp; &nbsp; &nbsp; Used Available Use% Mounted on<br />/dev/root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1280&nbsp; &nbsp; &nbsp; 1280&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 100% /rom<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 14744&nbsp; &nbsp; &nbsp; &nbsp; 80&nbsp; &nbsp; &nbsp;14664&nbsp; &nbsp;1% /tmp<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 512&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;512&nbsp; &nbsp;0% /dev<br />/dev/mtdblock3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5440&nbsp; &nbsp; &nbsp; 2696&nbsp; &nbsp; &nbsp; 2744&nbsp; 50% /overlay<br />mini_fo:/overlay&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1280&nbsp; &nbsp; &nbsp; 1280&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 100% /<br />/dev/sda2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;42314272&nbsp; &nbsp; 183548&nbsp; 39981348&nbsp; &nbsp;0% /mnt/usb</p><p>Nobody any clue??</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p149778">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">eleon216</div>
					<div class="post-datetime">
						28 Nov 2011, 21:07					</div>
				</div>
				<div class="post-content content">
					<p>did you install zoneinfo-core (and probably zoneinfo-europe)? I had to install it, to be able to use date with php</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p149783">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">asaegerman</div>
					<div class="post-datetime">
						28 Nov 2011, 22:04					</div>
				</div>
				<div class="post-content content">
					<p>I installed zoneinfo-core and zoneinfo-europe , same problem.<br />I tested with php5-cli. On the instruction $t=date(&#039;Y-m-d H:i:s&#039;) I get &quot;Segmentation fault&quot;:</p><p>root@OpenWrt:~# /mnt/usb/usr/bin/php5-cli /mnt/usb/www/test.php<br />&lt;html&gt;&lt;body&gt;this is a php-script&lt;br&gt;Segmentation fault</p><p>I tested also with php4-cli. Then everything went OK:</p><p>root@OpenWrt:~# /mnt/usb/usr/bin/php4-cli -c /mnt/usb/etc/php4.ini /mnt/usb/www/test.php<br />&lt;html&gt;&lt;body&gt;this is a php-script&lt;br&gt;date = 2011-11-28 20:56:19&lt;/body&gt;&lt;/html&gt;</p><p>So, can I take the conclusion that something is terribly wrong with PHP5 on Openwrt?</p><p>Next, I will try the combination lighttpd and PHP4-cgi...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p149789">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">asaegerman</div>
					<div class="post-datetime">
						28 Nov 2011, 22:39					</div>
				</div>
				<div class="post-content content">
					<p>How can I be sure that the zoneinfo packets (who are in /mnt/usb/usr/share/zoneinfo or /usr/share/zoneinfo) are recognised by php-cli? Do I have to change something in php.ini?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p149791">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">asaegerman</div>
					<div class="post-datetime">
						28 Nov 2011, 22:55					</div>
				</div>
				<div class="post-content content">
					<p>Combination of lighttpd 1.4.26-2 and php4 4.4.7-3 on openwrt Backfire 10.03 WORKS with no problem!!<br />Finally half a solution! Obviously without PHP5 features. But perhaps I can live with that...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p149846">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						29 Nov 2011, 12:45					</div>
				</div>
				<div class="post-content content">
					<p>PHP5 in backfire releases does not use zoneinfo packages, only trunk packages do.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p149862">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">asaegerman</div>
					<div class="post-datetime">
						29 Nov 2011, 16:11					</div>
				</div>
				<div class="post-content content">
					<p>OK, I installed zoneinfo only because of tip from eleon216.</p><p>Do you think installing a trunk version of backfire and/or PHP5 will be the solution to the problem?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p149864">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						29 Nov 2011, 16:28					</div>
				</div>
				<div class="post-content content">
					<p>No.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>