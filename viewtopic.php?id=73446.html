<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> 3 layer cake with packet marking in IP Tables?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 3 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p373148">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">snovotill</div>
					<div class="post-datetime">
						3 Mar 2018, 10:15					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m currently using piece of cake on WAN but have 4 separate VLAN&#039;s set on my WRT1200AC, each bridged to it&#039;s own WiFi. I&#039;d like to slap EF on OCSERV and my VOIP box connected in DMZ, while demoting some other other stuff CS1, but unsure about best approach.</p><p>Does it make sense to move to 3 or 4 layer cake and then use IP Tables to mark packets based upon source MAC or source IP or protocol and such? OCSERV already has packet marking built in so that one&#039;s easy but I don&#039;t see any way to &quot;hard limit&quot; other attached hosts.</p><p>The following website talks about using tc classes to accomplish something similar so maybe I need to deep dive into this but will it work alongside 3 layer cake? combo.cc/articles/openwrt-upload-quota-and-bandwidth-limiting.html</p><p>Also is there any use case for enabling QoS on my four br interfaces, each of which links one network jack to it&#039;s associated WLAN? I wouldn&#039;t want to impede the traffic between each VLAN network jack and it&#039;s associated WLAN, but would like to have some separate control over each VLAN, one being mine, one for upstairs renters and another for downstairs tenants, lastly the DMZ.</p><p>A nudge in the right direction would be very much appreciated <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>snovotill</strong> on 3 Mar 2018, 10:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p373149">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mikma</div>
					<div class="post-datetime">
						3 Mar 2018, 11:55					</div>
				</div>
				<div class="post-content content">
					<p>What&#039;s a 3 layer cake in this context?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p373150">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						3 Mar 2018, 12:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mikma wrote:</cite><blockquote><p>What&#039;s a 3 layer cake in this context?</p></blockquote></div><p>cake qdisc with the layer-cake script from SQM</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 3 Mar 2018, 12:21)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>