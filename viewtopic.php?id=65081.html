<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Android 6 frequently disconnects from TL-WR1043ND v2</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p325674">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">0perator</div>
					<div class="post-datetime">
						24 May 2016, 22:18					</div>
				</div>
				<div class="post-content content">
					<p>Last week I&#039;ve installed OpenWrt Chaos Calmer 15.05.1 on my TP-Link TL-WR1043ND v2 (before: stock firmware) which acts as access point with DHCP.<br />I have multiple devices connected to wifi and all works fine except for my LG G4 with Android 6. The G4 disconnects frequently, especially after standby (the android option &quot;Keep WiFi on during sleep&quot; is enabled) but also when I use the phone (i.e. stream something). The log shows the error &quot;deauthenticated due to inactivity (timer DEAUTH/REMOVE)&quot;. Unfortunately, the corresponding Google results are mostly quite old and fixed. It&#039;s quite annoying and I would be glad if somebody can help me.</p><p>Best regards<br />0perator</p><p>logread says:<br /></p><div class="codebox"><pre><code>Tue May 24 20:40:54 2016 daemon.info hostapd: wlan0: STA xx:xx:xx:xx:xx:xx IEEE 802.11: disassociated
Tue May 24 20:40:55 2016 daemon.info hostapd: wlan0: STA xx:xx:xx:xx:xx:xx IEEE 802.11: deauthenticated due to inactivity (timer DEAUTH/REMOVE)
Tue May 24 20:43:38 2016 daemon.info hostapd: wlan0: STA xx:xx:xx:xx:xx:xx IEEE 802.11: authenticated
Tue May 24 20:43:38 2016 daemon.info hostapd: wlan0: STA xx:xx:xx:xx:xx:xx IEEE 802.11: associated (aid 2)
Tue May 24 20:43:38 2016 daemon.info hostapd: wlan0: STA xx:xx:xx:xx:xx:xx WPA: pairwise key handshake completed (RSN)
Tue May 24 20:43:38 2016 daemon.info dnsmasq-dhcp[1425]: DHCPREQUEST(br-lan) 192.168.1.140 xx:xx:xx:xx:xx:xx 
Tue May 24 20:43:38 2016 daemon.info dnsmasq-dhcp[1425]: DHCPACK(br-lan) 192.168.1.140 xx:xx:xx:xx:xx:xx android-xxx
Tue May 24 20:43:54 2016 daemon.info hostapd: wlan0: STA xx:xx:xx:xx:xx:xx IEEE 802.11: disassociated
Tue May 24 20:43:55 2016 daemon.info hostapd: wlan0: STA xx:xx:xx:xx:xx:xx IEEE 802.11: deauthenticated due to inactivity (timer DEAUTH/REMOVE)
Tue May 24 20:48:58 2016 daemon.info hostapd: wlan0: STA xx:xx:xx:xx:xx:xx IEEE 802.11: authenticated
Tue May 24 20:48:58 2016 daemon.info hostapd: wlan0: STA xx:xx:xx:xx:xx:xx IEEE 802.11: associated (aid 2)
Tue May 24 20:48:58 2016 daemon.info hostapd: wlan0: STA xx:xx:xx:xx:xx:xx WPA: pairwise key handshake completed (RSN)
Tue May 24 20:48:58 2016 daemon.info dnsmasq-dhcp[1425]: DHCPREQUEST(br-lan) 192.168.1.140 xx:xx:xx:xx:xx:xx 
Tue May 24 20:48:58 2016 daemon.info dnsmasq-dhcp[1425]: DHCPACK(br-lan) 192.168.1.140 xx:xx:xx:xx:xx:xx android-xxx
Tue May 24 20:50:02 2016 daemon.info hostapd: wlan0: STA xx:xx:xx:xx:xx:xx WPA: group key handshake completed (RSN)
Tue May 24 20:50:02 2016 daemon.info hostapd: wlan0: STA xx:xx:xx:xx:xx:xx WPA: group key handshake completed (RSN)
Tue May 24 20:50:03 2016 daemon.info hostapd: wlan0: STA xx:xx:xx:xx:xx:xx WPA: group key handshake completed (RSN)
Tue May 24 20:52:41 2016 daemon.info hostapd: wlan0: STA xx:xx:xx:xx:xx:xx IEEE 802.11: disassociated
Tue May 24 20:52:42 2016 daemon.info hostapd: wlan0: STA xx:xx:xx:xx:xx:xx IEEE 802.11: deauthenticated due to inactivity (timer DEAUTH/REMOVE)
Tue May 24 20:54:41 2016 daemon.info hostapd: wlan0: STA xx:xx:xx:xx:xx:xx IEEE 802.11: authenticated
Tue May 24 20:54:41 2016 daemon.info hostapd: wlan0: STA xx:xx:xx:xx:xx:xx IEEE 802.11: associated (aid 2)
Tue May 24 20:54:41 2016 daemon.info hostapd: wlan0: STA xx:xx:xx:xx:xx:xx WPA: pairwise key handshake completed (RSN)
Tue May 24 20:54:42 2016 daemon.info dnsmasq-dhcp[1425]: DHCPREQUEST(br-lan) 192.168.1.140 xx:xx:xx:xx:xx:xx 
Tue May 24 20:54:42 2016 daemon.info dnsmasq-dhcp[1425]: DHCPACK(br-lan) 192.168.1.140 xx:xx:xx:xx:xx:xx android-xxx
Tue May 24 20:55:26 2016 daemon.info hostapd: wlan0: STA xx:xx:xx:xx:xx:xx IEEE 802.11: disassociated
Tue May 24 20:55:27 2016 daemon.info hostapd: wlan0: STA xx:xx:xx:xx:xx:xx IEEE 802.11: deauthenticated due to inactivity (timer DEAUTH/REMOVE)
Tue May 24 20:57:39 2016 daemon.info dnsmasq-dhcp[1425]: DHCPINFORM(br-lan) 192.168.1.222 xx:xx:xx:xx:xx:xx 
Tue May 24 20:57:39 2016 daemon.info dnsmasq-dhcp[1425]: DHCPACK(br-lan) 192.168.1.222 xx:xx:xx:xx:xx:xx pc
Tue May 24 20:57:41 2016 authpriv.info dropbear[16311]: Child connection from 192.168.1.223:3663
Tue May 24 20:57:51 2016 daemon.info hostapd: wlan0: STA xx:xx:xx:xx:xx:xx IEEE 802.11: authenticated
Tue May 24 20:57:51 2016 daemon.info hostapd: wlan0: STA xx:xx:xx:xx:xx:xx IEEE 802.11: associated (aid 2)
Tue May 24 20:57:51 2016 daemon.info hostapd: wlan0: STA xx:xx:xx:xx:xx:xx WPA: pairwise key handshake completed (RSN)
Tue May 24 20:57:51 2016 daemon.info dnsmasq-dhcp[1425]: DHCPREQUEST(br-lan) 192.168.1.140 xx:xx:xx:xx:xx:xx 
Tue May 24 20:57:51 2016 daemon.info dnsmasq-dhcp[1425]: DHCPACK(br-lan) 192.168.1.140 xx:xx:xx:xx:xx:xx android-xxx
Tue May 24 20:58:25 2016 daemon.info hostapd: wlan0: STA xx:xx:xx:xx:xx:xx IEEE 802.11: disassociated
Tue May 24 20:58:26 2016 daemon.info hostapd: wlan0: STA xx:xx:xx:xx:xx:xx IEEE 802.11: deauthenticated due to inactivity (timer DEAUTH/REMOVE)
Tue May 24 20:58:31 2016 daemon.info hostapd: wlan0: STA xx:xx:xx:xx:xx:xx IEEE 802.11: authenticated
Tue May 24 20:58:31 2016 daemon.info hostapd: wlan0: STA xx:xx:xx:xx:xx:xx IEEE 802.11: associated (aid 2)
Tue May 24 20:58:31 2016 daemon.info hostapd: wlan0: STA xx:xx:xx:xx:xx:xx WPA: pairwise key handshake completed (RSN)
Tue May 24 20:58:31 2016 daemon.info dnsmasq-dhcp[1425]: DHCPREQUEST(br-lan) 192.168.1.140 xx:xx:xx:xx:xx:xx 
Tue May 24 20:58:31 2016 daemon.info dnsmasq-dhcp[1425]: DHCPACK(br-lan) 192.168.1.140 xx:xx:xx:xx:xx:xx android-xxx</code></pre></div><p>wifi config:<br /></p><div class="codebox"><pre><code>config wifi-device &#039;radio0&#039;
        option type &#039;mac80211&#039;
        option hwmode &#039;11g&#039;
        option path &#039;platform/qca955x_wmac&#039;
        option country &#039;DE&#039;
        option channel &#039;5&#039;
        option htmode &#039;HT40&#039;
        option txpower &#039;20&#039;
        option disabled &#039;0&#039;
        option distance &#039;20&#039;

config wifi-iface
        option device &#039;radio0&#039;
        option network &#039;lan&#039;
        option mode &#039;ap&#039;
        option ssid &#039;Pretty_Fly_for_a_WiFi&#039;
        option key &#039;ultra strong password ;)&#039;
        option encryption &#039;psk2&#039;
        option disabled &#039;0&#039;</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p325679">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">wrt2000</div>
					<div class="post-datetime">
						24 May 2016, 23:15					</div>
				</div>
				<div class="post-content content">
					<p>try <em>option disassoc_low_ack &#039;0&#039;</em> under <em>config wifi-iface</em></p><ul><li><p><a href="https://forum.openwrt.org/viewtopic.php?id=43188">disconnected due to excessive missing ACKs / Failed to stop TX DMA (Page 1) — General Discussion — OpenWrt</a></p></li><li><p><a href="https://forum.openwrt.org/viewtopic.php?id=56546">Correct use of the basic_rate setting for mac80211 (Page 1) — General Discussion — OpenWrt</a></p></li></ul>											<p class="post-edited">(Last edited by <strong>wrt2000</strong> on 24 May 2016, 23:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p325681">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">0perator</div>
					<div class="post-datetime">
						24 May 2016, 23:23					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for you answer, I tried this option before and it didn&#039;t changed anything.</p><div class="quotebox"><cite>wrt2000 wrote:</cite><blockquote><p>try <em>option disassoc_low_ack &#039;0&#039;</em> under <em>config wifi-iface</em></p><ul><li><p><a href="https://forum.openwrt.org/viewtopic.php?id=43188">disconnected due to excessive missing ACKs / Failed to stop TX DMA (Page 1) — General Discussion — OpenWrt</a></p></li><li><p><a href="https://forum.openwrt.org/viewtopic.php?id=56546">Correct use of the basic_rate setting for mac80211 (Page 1) — General Discussion — OpenWrt</a></p></li></ul></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326495">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">0perator</div>
					<div class="post-datetime">
						30 May 2016, 21:08					</div>
				</div>
				<div class="post-content content">
					<p>Neither option disassoc_low_ack &#039;0&#039; or build from eko.one.pl has changed something. Any other ideas?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326505">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">dimoni</div>
					<div class="post-datetime">
						30 May 2016, 22:44					</div>
				</div>
				<div class="post-content content">
					<p>in /etc/config/wireless<br />put in a part of...wifi-iface<br /></p><div class="codebox"><pre><code>config wifi-iface
    option device &#039;radio1&#039;
    option network &#039;lan&#039;
    option mode &#039;ap&#039;
    option ssid &#039;yoursiid_2.4GHz&#039;
    option key &#039;yourskeysecret&#039;
    option encryption &#039;psk-mixed&#039;
    option wpa_group_rekey &#039;1800&#039;</code></pre></div><p>this<br />&nbsp; &nbsp; option wpa_group_rekey &#039;1800&#039;<br />them save, and wifi down &amp; wifi up</p><p>cheers</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326519">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">mwCT</div>
					<div class="post-datetime">
						31 May 2016, 00:36					</div>
				</div>
				<div class="post-content content">
					<p>It&#039;s possible that your phone goes into a deep sleep (e.g. WMM powersave / u-apsd) and handshaking with the ap &quot;breaks.&quot;&nbsp; I&#039;ve run into that problem also, albeit an older Android. You can test this by setting option htmode &#039;NONE&#039; or in the config wifi-iface, option wmm &#039;0&#039; and option uapsd &#039;0&#039; to force legacy powersave, then wait the wpa_group_rekey interval.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326522">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">dimoni</div>
					<div class="post-datetime">
						31 May 2016, 01:06					</div>
				</div>
				<div class="post-content content">
					<p>My happened to me that with a Samsung Galaxy Grand Prime with android lolliput was put this on the config wifi 1800 is 30 minutes but may be varied if desired one hour 3600 etc, etc.<br />And as I say has been hand saint.</p><p>cheers</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326535">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">vernonjvs</div>
					<div class="post-datetime">
						31 May 2016, 03:45					</div>
				</div>
				<div class="post-content content">
					<p>What happens if you change the channel to 11?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326786">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">0perator</div>
					<div class="post-datetime">
						2 Jun 2016, 00:24					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for your tips but nothing helped me. I installed ddwrt and at the moment it looks fine...</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>