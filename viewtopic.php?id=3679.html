<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> HTTP through VPN Tunnel</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 17 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p17203">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">toelen</div>
					<div class="post-datetime">
						14 Dec 2005, 16:01					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />I would like to do the following with a WRT54GL:<br />- install vpnc and setup a VPN connection<br />- install srelay and route all traffic through the vpn tunnel</p><p>This is not going without any problems. I have installed openwrt and it is running like a charm. Configuring it is something completely different. I will only connect one cable, so all traffic should go through this one cable (probably the WAN port). Every time I reboot the machine all changes are gone, how can I write everything installed to ROM, or do I have to compile my own firmware?</p><p>Regards,<br />Leen Toelen</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p17204">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">toelen</div>
					<div class="post-datetime">
						14 Dec 2005, 16:10					</div>
				</div>
				<div class="post-content content">
					<p>Reading this agian, I think it is probably safer to connect two ports with two IP adresses, one for management, and one for the tunnel.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p17205">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">rAWTAZ</div>
					<div class="post-datetime">
						14 Dec 2005, 16:19					</div>
				</div>
				<div class="post-content content">
					<p>Can you not use OpenVPN instead? It works like a charm for me.</p><p>I&#039;m sure some top-security gurus that&#039;s been using VPNs for ages would say it&#039;s a lame thing, but I don&#039;t see a problem with it, it works well, and it&#039;s gotten some good opinions too <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p17206">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">toelen</div>
					<div class="post-datetime">
						14 Dec 2005, 16:23					</div>
				</div>
				<div class="post-content content">
					<p>Well, the other network I have to VPN to is using a Cisco server, I don&#039;t think openvpn can connect to it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p17207">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">rAWTAZ</div>
					<div class="post-datetime">
						14 Dec 2005, 16:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>toelen wrote:</cite><blockquote><p>Well, the other network I have to VPN to is using a Cisco server, I don&#039;t think openvpn can connect to it.</p></blockquote></div><p>Oh <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> I guess that&#039;s an issue ^^ As long as you dont want to mix in a server behind the Cisco thingie of course. I have, but I don&#039;t have that complex of a LAN. One central router, two border gateways, and the VPN between one server there and my home network, with the router having a route to the server for my home network of course.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p17208">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">toelen</div>
					<div class="post-datetime">
						14 Dec 2005, 16:34					</div>
				</div>
				<div class="post-content content">
					<p>First things firts, anyone knows how to edit /etc/ipkg.cnf, install some packages andf save the changes to flash? That would be greatly helpful.</p><p>Regards,<br />Leen</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p17209">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">rAWTAZ</div>
					<div class="post-datetime">
						14 Dec 2005, 16:39					</div>
				</div>
				<div class="post-content content">
					<p>To edit the file you rm the link thats currently there to /rom/etc/ipkg.conf, and cp /rom/etc/ipkg.conf /etc and edit it.</p><p>Someone else should really answer this, but &quot;install some packages and save the changes to flash&quot; sounds like `ipkg install &lt;packagename&gt;`, perhaps after `ipkg update` and `ipkg list`.</p><p>Look in the wiki if you&#039;re new to ipkg and I didn&#039;t misunderstand your question <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p17211">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">toelen</div>
					<div class="post-datetime">
						14 Dec 2005, 17:32					</div>
				</div>
				<div class="post-content content">
					<p>I did the following:<br />rm /etc/ipkg.conf<br />cp /rom/etc/ipkg.conf /etc<br />vi /etc/ipkg.conf</p><br /><p>##########################################<br />src whiterussian <a href="http://downloads.openwrt.org/whiterussian/packages">http://downloads.openwrt.org/whiterussian/packages</a><br />src non-free <a href="http://downloads.openwrt.org/whiterussian/packages/non-free">http://downloads.openwrt.org/whiterussi â€¦ s/non-free</a></p><p>src florian <a href="http://openwrt.alphacore.net">http://openwrt.alphacore.net</a>/</p><p>dest root /<br />dest ram /tmp<br />##########################################</p><br /><br /><p>ipkg update<br />ipkg install vpnc libgcrypt srelay kmod-tun<br />insmod tun</p><p>vi /etc/vpnc.conf</p><br /><p>##########################################<br />Interface name myvpn<br />IPSec gateway 167.293.56.144<br />IPSec ID ipsec<br />IPSec secret cisco123<br />Xauth username myuser<br />Xauth password mypass<br />##########################################</p><p>vpnc</p><br /><p>ifconfig<br />##########################################<br />...</p><p>vpnlink&nbsp; &nbsp;Link encap:UNSPEC&nbsp; HWaddr 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:157.193.29.145&nbsp; P-t-P:157.193.29.145&nbsp; Mask:255.255.255.255<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP POINTOPOINT RUNNING NOARP MULTICAST&nbsp; MTU:1412&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:0 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:10<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:0 (0.0 B)<br />##########################################</p><p>So far, so good. When I leave the device running everything works fine. But when I reboot, all changes are lost and I have a default firmware again. Is it possible to save changes, and if so, how. Is there some command to write the ram to rom? <br />The alternative is to make my own firmware version, but that is alot more work.</p><p>Regards,<br />Leen</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p17238">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">rAWTAZ</div>
					<div class="post-datetime">
						15 Dec 2005, 09:59					</div>
				</div>
				<div class="post-content content">
					<p>Are you saying that your configuration, for example the file /etc/vpnc.conf, is lost/removed along with a reboot? That&#039;s the weirdest I&#039;ve hear, all my files that i create on the writeable /etc stays put <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>If you just mean that the tunnel/vpnc doesn&#039;t go up with a boot, you might want to look into /etc/init.d and write a startup script for the vpnc. Look in the wiki for more info on this. The tunnel software needs to be started.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p17239">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">toelen</div>
					<div class="post-datetime">
						15 Dec 2005, 10:06					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I solved the deletion of all files by performing mtd unlock linux; jffs2root --clean, as found on the bugzilla.</p><p>Regards,<br />Leen</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p18008">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">birky</div>
					<div class="post-datetime">
						30 Dec 2005, 22:53					</div>
				</div>
				<div class="post-content content">
					<p>hi,<br />the tunnel is up, but no packets are going through tunnel.</p><p>I think, that I need add routing rules to both sides.<br />Please how can I add routing rules to the OpenWrt ?</p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p18397">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">birky</div>
					<div class="post-datetime">
						6 Jan 2006, 16:32					</div>
				</div>
				<div class="post-content content">
					<p>I can ping the destination network 10.10.10.1 from OpenWRT,when I add this route:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; route add -net 10.10.10.0 netmask 255.255.255.0 dev tun0</p><p>But I don&#039;t know ping the 10.10.10.1 from PC behind OpenWRT router (on LAN, WLAN)</p><p>Gabriel</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>