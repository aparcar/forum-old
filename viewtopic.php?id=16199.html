<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Port forwarding on Kamikaze 7.09</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p70391">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mxc</div>
					<div class="post-datetime">
						3 Jul 2008, 00:22					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,</p><p>I have trawled the forums about this problem and see many people have problems with basic port forwarding on Kamikaze. It seems that the general recommendation is not to use /etc/config/firewall but rather add entries to /etc/firewall.user. The /etc/firewall.user file has some comments which suggest uncommenting the lines below will work. However like others experiences on the forum this appears not to work.</p><p> iptables -t nat -A prerouting_wan -p tcp --dport 80 -j DNAT --to XX.XX.XX.XX<br /> iptables&nbsp; &nbsp; &nbsp; &nbsp; -A forwarding_wan -p tcp --dport 80 -d XX.XX.XX.XX -j ACCEPT</p><p>Some posting suggest using prerouting_rule/forwarding_rule tables instead of the one use above. I haven&#039;t tried this yet but not sure what he implication are.</p><p>I am using the 3G connection on the WRT54G-3G. The /etc/config/network has been setup as follows:</p><p>config interface wan<br />&nbsp; &nbsp; option ifname &quot;ppp0&quot;<br />&nbsp; &nbsp; option proto&nbsp; &nbsp;&quot;3g&quot;<br />&nbsp; &nbsp; option device &quot;/dev/usb/tts/0&quot;<br />&nbsp; &nbsp; option apn &quot;apn&quot;</p><p>I.E. the ppp0 interface of the 3g card should be considered the wan interface. Where can I find a definitive answer to port forwading in Kamikaze?<br />What extra packages do I need to install to get plain port forwarding of port 80 (http) to work?</p><p>thanks</p>											<p class="post-edited">(Last edited by <strong>mxc</strong> on 3 Jul 2008, 00:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70405">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mxc</div>
					<div class="post-datetime">
						3 Jul 2008, 07:36					</div>
				</div>
				<div class="post-content content">
					<p>If I use /etc/config/firewall with <br /># accept:proto=tcp dport=22<br /># forward:dport=80:192.168.11.108:80</p><p>I get errors like&nbsp; </p><p>/bin/uci: /etc/config/firewall: 49: accept:proto=tcp: not found<br />/bin/uci: /etc/config/firewall: 50: forward:dport=80:192.168.11.108:80: not found</p><p>When running uci show.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70408">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mxc</div>
					<div class="post-datetime">
						3 Jul 2008, 09:06					</div>
				</div>
				<div class="post-content content">
					<p>ok I got it working but installing iptables-mod-ulog. I had also installed ip, iptables-nat. Not sure which one sorted it out. I had to use the rules in /etc/firewall.user</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>