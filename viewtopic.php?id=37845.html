<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Netgear WNDR3700v2 no WAN connection detection - Help Needed.</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 16 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p171387">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Dude_Virus</div>
					<div class="post-datetime">
						3 Jul 2012, 00:39					</div>
				</div>
				<div class="post-content content">
					<p>I have a netgear wndr 3700v2 router which works fine with the stock firmware. The issue with the stock firmware is that the wireless signal strength is low plus it causes an issue with my dell streak by constantly rejecting the wlan by saying incorrect security. I decided to update the firmware to open wrt however there is an issue.</p><p>1st issue : the downloads section and the documentation point to a link which has an older build from december <a href="http://downloads.openwrt.org/backfire/10.03.1/ar71xx/">http://downloads.openwrt.org/backfire/10.03.1/ar71xx/</a>&nbsp; &nbsp;whereas while browsing the forum i found someone posting this link <a href="http://enduser.subsignal.org/~trondah/latest-release-is-r32573/">http://enduser.subsignal.org/~trondah/l … is-r32573/</a>&nbsp; &nbsp;which has the latest build from july 2012 ( this shows the firmware file as generic 3700v2 )</p><p>I installed the firmware from the 1st link <a href="http://downloads.openwrt.org/backfire/10.03.1/ar71xx/">http://downloads.openwrt.org/backfire/10.03.1/ar71xx/</a> and it got installed correctly. I reached the gui of the router page. Now come the main problem.</p><p>2nd isue : My isp has provided a static ip so i need to enter the static ip and dns. Well i have done that but the router doesnt detect the wan connection. There is no light on the wan port and I am not able to access the internet.</p><p>There is no mac registration required by my isp and I have confirmed with them and no mac is blocked. The internet works if i connect a different router and configure the router as per the static ip setup. Also i have power cycled the router and the modem and have even reset the router. I have even tried to reset the nvram but still i do not get a WAN connection. I can confirm that the modem is fine as if I plug the modem directly to my mac system and enter the static ip details in the network configurtion i have an internet connection on the pc. I can confirm that the router is also working as on the stock firmware the moment i enter the static ip details and save the settings i get a WAN light and the internet works. </p><p>I reverted to the stock firmware from the open wrt version and then tried the setup and it works. I then reinstalled the open wrt once again and still the same. I tried the router at my friends place who also has a static setup and the stock firmware works whereas the wrt doesnt. Any help as to how to solve it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p171742">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">tului</div>
					<div class="post-datetime">
						6 Jul 2012, 21:51					</div>
				</div>
				<div class="post-content content">
					<p>What speed is the ethernet link they provide? 10 100 1000? Maybe the wrt isnt autonegotiating properly</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p171817">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Dude_Virus</div>
					<div class="post-datetime">
						7 Jul 2012, 21:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>tului wrote:</cite><blockquote><p>What speed is the ethernet link they provide? 10 100 1000? Maybe the wrt isnt autonegotiating properly</p></blockquote></div><p>I would not know as to what speed is of the ethernet link that they provide. However when on the stock firmware when i connect the ethernet cable to the netgear WAN port it lights as green which indicates as a 1000 mbps ( netgear has lights incorrect ).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p171872">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Dude_Virus</div>
					<div class="post-datetime">
						8 Jul 2012, 21:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Dude_Virus wrote:</cite><blockquote><div class="quotebox"><cite>tului wrote:</cite><blockquote><p>What speed is the ethernet link they provide? 10 100 1000? Maybe the wrt isnt autonegotiating properly</p></blockquote></div><p>I would not know as to what speed is of the ethernet link that they provide. However when on the stock firmware when i connect the ethernet cable to the netgear WAN port it lights as green which indicates as a 1000 mbps ( netgear has lights incorrect ).</p></blockquote></div><p>Ok i checked on the stock firmware statistics page and it shows as a 10M/full duplex connection for the WAN. I dont know whether it is showing the duplex mode of the wan port or is it detecting the connection from the modem. The router port physically and the modem aint a problem, there is something else which is messed up. The router detects the WAN connection on the stock firmware, the modem if plugged in directly to the pc works fine. Another router netgear wgr614v9 works fine . Only with open wrt type firmwares this is an issue. Cant seem to understand why. I was able to use gargoyle for 2 and a half months.</p><br /><p>OK I found this link <a href="https://dev.openwrt.org/ticket/10517">https://dev.openwrt.org/ticket/10517</a> . Could this be the problem I am facing. However I do not see any solution to it or if there is I am not aware as to how to make those command line changes.</p>											<p class="post-edited">(Last edited by <strong>Dude_Virus</strong> on 8 Jul 2012, 21:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p171894">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">hvkls</div>
					<div class="post-datetime">
						9 Jul 2012, 10:27					</div>
				</div>
				<div class="post-content content">
					<p><a href="https://forum.openwrt.org/viewtopic.php?pid=158812#p158812">https://forum.openwrt.org/viewtopic.php … 12#p158812</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p171902">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Dude_Virus</div>
					<div class="post-datetime">
						9 Jul 2012, 14:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hvkls wrote:</cite><blockquote><p><a href="https://forum.openwrt.org/viewtopic.php?pid=158812#p158812">https://forum.openwrt.org/viewtopic.php … 12#p158812</a></p></blockquote></div><p>Thanks for the link however readin those steps were just a bouncer for me. I am not aware as to how to and what to do to perform those steps.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p171924">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">hvkls</div>
					<div class="post-datetime">
						9 Jul 2012, 17:12					</div>
				</div>
				<div class="post-content content">
					<p>Log in (to your router) as root. Copy and paste this code into your terminal one single time:<br /></p><div class="codebox"><pre><code>opkg update
opkg install ethtool
echo &#039;#!/bin/sh /etc/rc.common
# Copyight (C) 2006 OpenWrt.org
START=41
start() {ethtool -s $(uci -P/var/state get network.wan.ifname) speed 100 duplex full autoneg off}
stop() {ethtool -s $(uci -P/var/state get network.wan.ifname) speed 1000 duplex full autoneg off}&#039; &gt; /etc/init.d/ethtool
chmod 0755 /etc/init.d/ethtool
cd /etc/rc.d
ln -s ../init.d/ethtool S41ethtool
/etc/init.d/ethtool start</code></pre></div><p>The changes should &#039;survive&#039; reboots as well.</p>											<p class="post-edited">(Last edited by <strong>hvkls</strong> on 9 Jul 2012, 17:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p171927">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Dude_Virus</div>
					<div class="post-datetime">
						9 Jul 2012, 17:52					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hvkls wrote:</cite><blockquote><p>Log in (to your router) as root. Copy and paste this code into your terminal one single time:<br /></p><div class="codebox"><pre><code>opkg update
opkg install ethtool
echo &#039;#!/bin/sh /etc/rc.common
# Copyight (C) 2006 OpenWrt.org
START=41
start() {ethtool -s $(uci -P/var/state get network.wan.ifname) speed 100 duplex full autoneg off}
stop() {ethtool -s $(uci -P/var/state get network.wan.ifname) speed 1000 duplex full autoneg off}&#039; &gt; /etc/init.d/ethtool
chmod 0755 /etc/init.d/ethtool
cd /etc/rc.d
ln -s ../init.d/ethtool S41ethtool
/etc/init.d/ethtool start</code></pre></div><p>The changes should &#039;survive&#039; reboots as well.</p></blockquote></div><p>Thanks will give it a try and update how it goes.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>