<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Routed client using masquerade.</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 23 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p166079">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Digital_babu</div>
					<div class="post-datetime">
						29 Apr 2012, 18:18					</div>
				</div>
				<div class="post-content content">
					<p>Dear all,</p><p>First of all, apologies I&#039;m a complete networking novice but desperately willing to learn. Apologies for mistakes in terminology, I hope my problem is clear.</p><p>I&#039;m trying to extend the range of my home router wlan (D-link DR-615, as of yet not openwrt supported) with a TP-Link TLWR841N. Seeing that WDS out of the question with the D-link, I tried the Routed client using masquerade howto. And I managed to succesfully get the TP-link (client) connect with my AP.</p><p>Unfortunately it didn&#039;t seem to have the result I hoped for, it seems my computer still connects to the WLAN interface of my AP and not my client. While my client succesfully connects to the AP and gets a DHCP lease.</p><p>Here is my config, I hope it is sufficient.</p><div class="codebox"><pre><code>network.loopback=interface
network.loopback.ifname=lo
network.loopback.proto=static
network.loopback.ipaddr=127.0.0.1
network.loopback.netmask=255.0.0.0

network.lan=interface
network.lan.ifname=eth0
network.lan.type=bridge
network.lan.proto=static
network.lan.ipaddr=192.168.1.1
network.lan.netmask=255.255.255.0

network.wan=interface
network.wan.proto=dhcp

network.@switch[0]=switch
network.@switch[0].name=eth0
network.@switch[0].reset=1
network.@switch[0].enable_vlan=1
network.@switch_vlan[0]=switch_vlan
network.@switch_vlan[0].device=eth0
network.@switch_vlan[0].vlan=1
network.@switch_vlan[0].ports=0 1 2 3 4


wireless.radio0=wifi-device
wireless.radio0.type=mac80211
wireless.radio0.channel=3
wireless.radio0.macaddr=xx:xx:xx:xx:xx:xx
wireless.radio0.hwmode=11ng
wireless.radio0.htmode=HT20
wireless.radio0.ht_capab=SHORT-GI-20 SHORT-GI-40 TX-STBC RX-STBC1 DSSS_CCK-40
wireless.@wifi-iface[0]=wifi-iface
wireless.@wifi-iface[0].device=radio0
wireless.@wifi-iface[0].ssid=HAL 2.0
wireless.@wifi-iface[0].network=wan
wireless.@wifi-iface[0].encryption=psk2
wireless.@wifi-iface[0].mode=sta
wireless.@wifi-iface[0].key=xxxxxxx</code></pre></div><p>Also:</p><p>client can ping AP<br />AP cannot ping client<br />computer cannot ping client<br />computer can ping AP</p><p>If anyone can point me to the right track, thanks in advance.</p>											<p class="post-edited">(Last edited by <strong>Digital_babu</strong> on 29 Apr 2012, 18:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p166135">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						30 Apr 2012, 12:10					</div>
				</div>
				<div class="post-content content">
					<p>Make sure the LAN and WAN side of the OpenWrt router use different subnets.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>