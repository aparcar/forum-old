<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Unifi AC Pro - DumbAP performance issue, below 30Mbit throughput</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 20 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p347827">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">tecwa</div>
					<div class="post-datetime">
						27 Dec 2016, 20:53					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I setup 3 Unifi AC Pro as a DumbAPs using the latest nightly and am getting 10-20mbit throughput using wget and iperf. The speeds are about the same with iperf running on the box and though the box. In both cases cpu usage never gets above 10%. There is a post&nbsp; on here that has similar hardware running iperf on the device at 150mbit. Speed is the same on both 2.4ghz radio(ath9k) and 5ghz radio(ath10k). For testing I have eliminated all external network equipment, Unifi&#039;s lan port is connected to a thinkpad and there is another thinkpad connected over wifi. </p><p>Setup on the Unifi:<br />-firewall and dnsmasq are disabled<br />-4 wireless networks on both 2.4ghz and 5ghz are bridged to 4 wired vlans<br />-5th vlan is used for management<br />-management vlan has an ip, bridged networks do not</p><p>To me this problem screams driver configuration issue and I am wondering if anyone has any ideas on what to check. I dont think this is a widely used platform so I am hoping is is something simple. I didnt see anything too interesting in sysfs for ath9k and ath10k. ICMP latency seams to be pretty consistent so I think interrupts are working ok.</p><p>What kind of throughput speed would you expect on this hardware when running in dumbap mode?<br />Ubiquity advertises AC1300 support. On the stock firmware brctl shows that wireless and lan were bridged. There were also a bunch ubiquiti kernel modules loaded, so maybe the implement some proprietary super fast zero copy magic.</p><br /><p>toh/ubiquiti/unifiac</p><p>Similar hardware getting 150mbit:</p><p>viewtopic.php?id=67669</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347902">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">tecwa</div>
					<div class="post-datetime">
						28 Dec 2016, 19:11					</div>
				</div>
				<div class="post-content content">
					<p>I tested another ar71xx platform device with ath9k wifi last night with 12.09-15.05.1. The results were the same, 30-40Mbit throughput. I am going to play with the stock firmwares when I get a chance. </p><p>Can anyone comment as to if something similar to the Atheros hardware nat hacks on stock firmwares also apply to bridged dumbap configurations? dev.openwrt.org/ticket/11779</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347907">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">tecwa</div>
					<div class="post-datetime">
						28 Dec 2016, 20:39					</div>
				</div>
				<div class="post-content content">
					<p>This might be a false alarm. My nexus 5x is able to get 200Mbit+ with Http and iperf. In which case the issue might be with my testbed. The rest of the N or AC devices that I have are all thinkpads with intel wifi cards, so maybe there is an interoperability issue with iwlwifi and ath9/10k.&nbsp; I know that the one laptop with an intel 6300 card can do 300Mbit+ with the cisco AP at work. I just ordered some MT7612U and RTL8812AU usb 3.0 AC devices to test with.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347909">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Borromini</div>
					<div class="post-datetime">
						28 Dec 2016, 21:22					</div>
				</div>
				<div class="post-content content">
					<p>I am having interoperability issues with mt76 (Mediatek 802.11ac, have a D-Link DIR-860L) and an Intel 8260 AC client. I&#039;ve googled extensively on this and it seems Intel&#039;s recent cards haven&#039;t exactly been problem-free on Linux. For some people sticking to 802.11n speeds seems to help, but you don&#039;t get AC for that of course.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>