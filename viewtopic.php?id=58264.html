<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> deluser.c:(.text.deluser_main+0xaa): undefined reference to `getpwent_</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 1 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p281905">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">miceliux</div>
					<div class="post-datetime">
						30 Jun 2015, 18:21					</div>
				</div>
				<div class="post-content content">
					<p>My builds of OpenWrt keep failing for the last 4 weeks with this error:</p><p>I enable the adduser/group stuff in busybox, anyone else has tried that?</p><div class="codebox"><pre><code>make[3]: Entering directory &#039;/home/juan/devel/OpenWrt/openwrt-trunk/package/utils/busybox&#039;
make   -C /home/juan/devel/OpenWrt/openwrt-trunk/build_dir/target-mips_34kc_musl-1.1.10/busybox-1.23.2 CC=&quot;mips-openwrt-linux-musl-gcc&quot; CROSS_COMPILE=&quot;mips-openwrt-linux-musl-&quot; KBUILD_HAVE_NLS=no EXTRA_CFLAGS=&quot;-Os -pipe -mno-branch-likely -mips32r2 -mtune=34kc -fno-caller-saves -fhonour-copts -Wno-error=unused-but-set-variable -msoft-float -mips16 -minterlink-mips16&quot; ARCH=&quot;mips&quot; SKIP_STRIP=y LDLIBS=&quot;m crypt&quot;  all
make[4]: Entering directory &#039;/home/juan/devel/OpenWrt/openwrt-trunk/build_dir/target-mips_34kc_musl-1.1.10/busybox-1.23.2&#039;
  LINK    busybox_unstripped
Trying libraries: crypt m
Failed: -Wl,--start-group  -lcrypt -lm  -Wl,--end-group
Output of:
mips-openwrt-linux-musl-gcc -Wall -Wshadow -Wwrite-strings -Wundef -Wstrict-prototypes -Wunused -Wunused-parameter -Wunused-function -Wunused-value -Wmissing-prototypes -Wmissing-declarations -Wno-format-security -Wdeclaration-after-statement -Wold-style-definition -fno-builtin-strlen -finline-limit=0 -fomit-frame-pointer -ffunction-sections -fdata-sections -fno-guess-branch-probability -funsigned-char -falign-functions=1 -falign-jumps=1 -falign-labels=1 -falign-loops=1 -fno-unwind-tables -fno-asynchronous-unwind-tables -Os -o busybox_unstripped -Wl,--sort-common -Wl,--sort-section,alignment -Wl,--gc-sections -Wl,--start-group applets/built-in.o archival/lib.a archival/libarchive/lib.a console-tools/lib.a coreutils/lib.a coreutils/libcoreutils/lib.a debianutils/lib.a e2fsprogs/lib.a editors/lib.a findutils/lib.a init/lib.a libbb/lib.a libpwdgrp/lib.a loginutils/lib.a mailutils/lib.a miscutils/lib.a modutils/lib.a networking/lib.a networking/libiproute/lib.a networking/udhcp/lib.a printutils/lib.a procps/lib.a runit/lib.a selinux/lib.a shell/lib.a sysklogd/lib.a util-linux/lib.a util-linux/volume_id/lib.a archival/built-in.o archival/libarchive/built-in.o console-tools/built-in.o coreutils/built-in.o coreutils/libcoreutils/built-in.o debianutils/built-in.o e2fsprogs/built-in.o editors/built-in.o findutils/built-in.o init/built-in.o libbb/built-in.o libpwdgrp/built-in.o loginutils/built-in.o mailutils/built-in.o miscutils/built-in.o modutils/built-in.o networking/built-in.o networking/libiproute/built-in.o networking/udhcp/built-in.o printutils/built-in.o procps/built-in.o runit/built-in.o selinux/built-in.o shell/built-in.o sysklogd/built-in.o util-linux/built-in.o util-linux/volume_id/built-in.o -Wl,--end-group -Wl,--start-group -lcrypt -lm -Wl,--end-group
==========
loginutils/lib.a(deluser.o): In function `deluser_main&#039;:
deluser.c:(.text.deluser_main+0xaa): undefined reference to `getpwent_r&#039;
collect2: error: ld returned 1 exit status
Makefile:716: recipe for target &#039;busybox_unstripped&#039; failed
make[4]: *** [busybox_unstripped] Error 1
make[4]: Leaving directory &#039;/home/juan/devel/OpenWrt/openwrt-trunk/build_dir/target-mips_34kc_musl-1.1.10/busybox-1.23.2&#039;
Makefile:119: recipe for target &#039;/home/juan/devel/OpenWrt/openwrt-trunk/build_dir/target-mips_34kc_musl-1.1.10/busybox-1.23.2/.built&#039; failed
make[3]: *** [/home/juan/devel/OpenWrt/openwrt-trunk/build_dir/target-mips_34kc_musl-1.1.10/busybox-1.23.2/.built] Error 2
make[3]: Leaving directory &#039;/home/juan/devel/OpenWrt/openwrt-trunk/package/utils/busybox&#039;
package/Makefile:191: recipe for target &#039;package/utils/busybox/compile&#039; failed
make[2]: *** [package/utils/busybox/compile] Error 2
make[2]: Leaving directory &#039;/home/juan/devel/OpenWrt/openwrt-trunk&#039;
package/Makefile:188: recipe for target &#039;/home/juan/devel/OpenWrt/openwrt-trunk/staging_dir/target-mips_34kc_musl-1.1.10/stamp/.package_compile&#039; failed
make[1]: *** [/home/juan/devel/OpenWrt/openwrt-trunk/staging_dir/target-mips_34kc_musl-1.1.10/stamp/.package_compile] Error 2
make[1]: Leaving directory &#039;/home/juan/devel/OpenWrt/openwrt-trunk&#039;
/home/juan/devel/OpenWrt/openwrt-trunk/include/toplevel.mk:181: recipe for target &#039;world&#039; failed
make: *** [world] Error 2</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p284414">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Seabiscuit-30s</div>
					<div class="post-datetime">
						21 Jul 2015, 23:41					</div>
				</div>
				<div class="post-content content">
					<p>Did you ever figure this out?&nbsp; Please let me know.&nbsp; I can&#039;t get beyond similar error &quot;make[1]: *** [/.../openwrt/staging_dir/target-mips_34kc_musl-1.1.10/stamp/.tools_install_yynyyynynynyyyyyyyyyyyyyyyyyyyynyyyyynnyyynyyynnnyy] Error 2&quot;.&nbsp; I&#039;m trying to build an image for a Netgear WNDR 3700v4 and I rightly or wrongly expect &quot;...mips_74Kc...&quot; which matches up better with the Atheros AR9344 or 9342 and ar71xx-nand-wndr3700v4 specifications.&nbsp; Somehow &quot;...mips_34kc...&quot; seems wrong.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p284423">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">miceliux</div>
					<div class="post-datetime">
						22 Jul 2015, 00:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Seabiscuit-30s wrote:</cite><blockquote><p>Did you ever figure this out?&nbsp; Please let me know.&nbsp; I can&#039;t get beyond similar error</p></blockquote></div><p>I workaround it by disabling support for deleting user/groups from busybox. It&#039;s broken in current trunk.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>