<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> RFC: wireless hotspot or captive portal</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 17 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p142499">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						30 Aug 2011, 04:15					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://wiki.openwrt.org/doc/howto/wireless.hotspot">http://wiki.openwrt.org/doc/howto/wireless.hotspot</a></p><p>Please C&amp;C (comment and contribute)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142519">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						30 Aug 2011, 12:10					</div>
				</div>
				<div class="post-content content">
					<p>Comment on what?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142545">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">flux</div>
					<div class="post-datetime">
						30 Aug 2011, 19:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arokh wrote:</cite><blockquote><p>Comment on what?</p></blockquote></div><p>well then contribute and comment : )</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142607">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						31 Aug 2011, 16:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arokh wrote:</cite><blockquote><p>Comment on what?</p></blockquote></div><p>On the article, on what else?<br />Is something missing? E.g. I only accidentally stumbled over pepper-spot.</p><p>Should we remove the mention of packages that are being present in the repos, but are not longer actively maintained?</p><p>I do not use this stuff, but so many people are being crazy about wireless bla, I thought we should address this kind of software.</p><p>I always start with an overview, so that I know, what software I can choose amongst and then go further down the line.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142608">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">philchetcuti</div>
					<div class="post-datetime">
						31 Aug 2011, 16:19					</div>
				</div>
				<div class="post-content content">
					<p>I was wondering if there is anything like this that does not require any user accounts, not even internet access. <br />Just plain capture. Everybody that connects to the router via wireless is just directed to the same webpage that is local on the router.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142610">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						31 Aug 2011, 16:26					</div>
				</div>
				<div class="post-content content">
					<p>You should be able to implement such a behaviour through some redirects in the firewall. And a running webserver and a accordant&nbsp; page.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142842">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">towolf</div>
					<div class="post-datetime">
						4 Sep 2011, 19:33					</div>
				</div>
				<div class="post-content content">
					<p>So, I’ve been using nodogsplash for a couple of years simply to redirect guests, neighbors, whoever to a page where they get a message displayed and they have to click a button. No traffic control enabled in NDS itself. Really simple. </p><p>The problem is in combination with qos-scripts nodogsplash doesn’t work anymore (in trunk Attitude Adjustment). It instantly blocks all traffic, no matter what kind it is. I suppose NDS has bitrotted to the point that it won’t cooperate with the Netfilter modules that are being used today.</p><p>Would really appreciate if someone had a look at that. Netfilter is over my head to some extent. Even pointers on how to debug would help.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p143760">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">towolf</div>
					<div class="post-datetime">
						15 Sep 2011, 22:36					</div>
				</div>
				<div class="post-content content">
					<p>I got it sorted out and submitted a patch to dev.openwrt.org. qos-scripts just clobbered the packet marks of nodogsplash.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p143812">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						16 Sep 2011, 20:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>towolf wrote:</cite><blockquote><p>I got it sorted out and submitted a patch to dev.openwrt.org. qos-scripts just clobbered the packet marks of nodogsplash.</p></blockquote></div><p>Nice. Why do you use nodogsplash? Why not one of the other packages?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p143813">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						16 Sep 2011, 20:31					</div>
				</div>
				<div class="post-content content">
					<p>Nodogsplash is small, well tested, tailored for OpenWrt by its author and can be set up with only one or two config file changes, in contrast Chilli is more complete but complex to set up.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p143815">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">towolf</div>
					<div class="post-datetime">
						16 Sep 2011, 20:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Orca wrote:</cite><blockquote><div class="quotebox"><cite>towolf wrote:</cite><blockquote><p>I got it sorted out and submitted a patch to dev.openwrt.org. qos-scripts just clobbered the packet marks of nodogsplash.</p></blockquote></div><p>Nice. Why do you use nodogsplash? Why not one of the other packages?</p></blockquote></div><p>Which one? I just need a simple page with a button.<br />The one alternative that looked enticing was luci-splash, but I’m not keen on the rest of luci.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p143816">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">towolf</div>
					<div class="post-datetime">
						16 Sep 2011, 20:34					</div>
				</div>
				<div class="post-content content">
					<p>My newest problem with NoDogsplash is that there seems to be a humongous memory leak suddenly.<br />It starts with 7M of memory according to ps and as soon as a couple of users hit the splash page it balloons to 46M which it never releases again. So it ought to be related to the internal libhttpd threads being spawned.</p><p>But how do I figure that out? I suppose I can’t run valgrind on my router?</p>											<p class="post-edited">(Last edited by <strong>towolf</strong> on 16 Sep 2011, 20:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p143856">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">towolf</div>
					<div class="post-datetime">
						17 Sep 2011, 15:45					</div>
				</div>
				<div class="post-content content">
					<p>How do I find out where the memory sits and what is behind anon?</p><p>At this time ndsctl status tells me:<br />Httpd request threads created/current: 158/0</p><p>But there are 22 &quot;anons&quot;.</p><div class="codebox"><pre><code>16810 root     46512 S    /usr/bin/nodogsplash -s -d 5
root@winder:~# pmap 16810
16810:   /usr/bin/nodogsplash -s -d 5
00400000     72K r-x--  /usr/bin/nodogsplash
00421000      4K rw---  /usr/bin/nodogsplash
00469000    308K rwx--    [ anon ]
2b115000      4K rw---    [ anon ]
2b116000     28K r-x--  /lib/ld-uClibc-0.9.32.1-git.so
2b11d000      4K rw---    [ anon ]
2b12c000      4K r----  /lib/ld-uClibc-0.9.32.1-git.so
2b12d000      4K rw---  /lib/ld-uClibc-0.9.32.1-git.so
2b12e000     24K r-x--  /usr/lib/libhttpd.so.0.0.0
2b134000     64K -----    [ anon ]
2b144000      4K rw---  /usr/lib/libhttpd.so.0.0.0
2b145000      8K rw---    [ anon ]
2b147000     72K r-x--  /lib/libpthread-0.9.32.1-git.so
2b159000     60K -----    [ anon ]
2b168000      4K r----  /lib/libpthread-0.9.32.1-git.so
2b169000      4K rw---  /lib/libpthread-0.9.32.1-git.so
2b16a000      8K rw---    [ anon ]
2b16c000     68K r-x--  /lib/libgcc_s.so.1
2b17d000     64K -----    [ anon ]
2b18d000      4K rw---  /lib/libgcc_s.so.1
2b18e000    336K r-x--  /lib/libuClibc-0.9.32.1-git.so
2b1e2000     64K -----    [ anon ]
2b1f2000      4K r----  /lib/libuClibc-0.9.32.1-git.so
2b1f3000      4K rw---  /lib/libuClibc-0.9.32.1-git.so
2b1f4000     20K rw---    [ anon ]
2b1f9000      8K r-x--  /lib/libdl-0.9.32.1-git.so
2b1fb000     60K -----    [ anon ]
2b20a000      4K r----  /lib/libdl-0.9.32.1-git.so
2b20b000      4K rw---  /lib/libdl-0.9.32.1-git.so
2b20c000      4K -----    [ anon ]
2b20d000   2044K rw---    [ anon ]
2b40c000      4K -----    [ anon ]
2b40d000   2044K rw---    [ anon ]
2b60c000      4K -----    [ anon ]
2b60d000   2044K rw---    [ anon ]
2b80c000      4K -----    [ anon ]
2b80d000   2044K rw---    [ anon ]
2ba0c000      4K -----    [ anon ]
2ba0d000   2044K rw---    [ anon ]
2bc0c000      4K -----    [ anon ]
2bc0d000   2044K rw---    [ anon ]
2be0c000      4K -----    [ anon ]
2be0d000   2044K rw---    [ anon ]
2c00c000      4K -----    [ anon ]
2c00d000   2044K rw---    [ anon ]
2c20c000      4K -----    [ anon ]
2c20d000   2044K rw---    [ anon ]
2c40c000      4K -----    [ anon ]
2c40d000   2044K rw---    [ anon ]
2c60c000      4K -----    [ anon ]
2c60d000   2044K rw---    [ anon ]
2ca0c000      4K -----    [ anon ]
2ca0d000   2044K rw---    [ anon ]
2cc0c000      4K -----    [ anon ]
2cc0d000   2044K rw---    [ anon ]
2ce0c000      4K -----    [ anon ]
2ce0d000   2044K rw---    [ anon ]
2d00c000      4K -----    [ anon ]
2d00d000   2044K rw---    [ anon ]
2d20c000      4K -----    [ anon ]
2d20d000   2044K rw---    [ anon ]
2d40c000      4K -----    [ anon ]
2d40d000   2044K rw---    [ anon ]
2d60c000      4K -----    [ anon ]
2d60d000   2044K rw---    [ anon ]
2d80c000      4K -----    [ anon ]
2d80d000   2044K rw---    [ anon ]
2da0c000      4K -----    [ anon ]
2da0d000   2044K rw---    [ anon ]
2dc0c000      4K -----    [ anon ]
2dc0d000   2044K rw---    [ anon ]
2de0c000      4K -----    [ anon ]
2de0d000   2044K rw---    [ anon ]
7ff0e000    132K rwx--    [ stack ]
7fff7000      4K r-x--    [ anon ]
 total    46508K</code></pre></div>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>