<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Problem by connecting in the private APN</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 24 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p359603">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mmilos</div>
					<div class="post-datetime">
						2 Jun 2017, 12:06					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I have a problem when I want to connect a modem EHS6T LAN in private APN, for which it is necessary to enter a user name and password. In another private APN that has no radius and no need to enter a username and password, modem connect immediately. There are no problems too,&nbsp; when requesting a connection to the public APN, which also has a requirement for a username and password!</p><p>If you have any ideas, please!</p><br /><p>Fri Jun&nbsp; 2 10:32:15 2017 daemon.notice netifd: Interface &#039;3gwan&#039; is setting up now<br />Fri Jun&nbsp; 2 10:32:17 2017 user.notice ./3g.sh: MCCMNC: , APN: myAPN.si, USER: username, PWD: password, DNS: , SIMPIN: <br />Fri Jun&nbsp; 2 10:32:17 2017 daemon.notice pppd[4309]: pppd 2.4.7 started by root, uid 0<br />Fri Jun&nbsp; 2 10:32:18 2017 local2.info chat[4311]: abort on (BUSY)<br />Fri Jun&nbsp; 2 10:32:18 2017 local2.info chat[4311]: abort on (NO CARRIER)<br />Fri Jun&nbsp; 2 10:32:18 2017 local2.info chat[4311]: abort on (ERROR)<br />Fri Jun&nbsp; 2 10:32:18 2017 local2.info chat[4311]: report (CONNECT)<br />Fri Jun&nbsp; 2 10:32:18 2017 local2.info chat[4311]: timeout set to 10 seconds<br />Fri Jun&nbsp; 2 10:32:18 2017 local2.info chat[4311]: send (AT&amp;F^M)<br />Fri Jun&nbsp; 2 10:32:18 2017 local2.info chat[4311]: expect (OK)<br />Fri Jun&nbsp; 2 10:32:18 2017 local2.info chat[4311]: AT&amp;F^M^M<br />Fri Jun&nbsp; 2 10:32:18 2017 local2.info chat[4311]: OK<br />Fri Jun&nbsp; 2 10:32:18 2017 local2.info chat[4311]:&nbsp; -- got it<br />Fri Jun&nbsp; 2 10:32:18 2017 local2.info chat[4311]: send (ATE1^M)<br />Fri Jun&nbsp; 2 10:32:18 2017 local2.info chat[4311]: expect (OK)<br />Fri Jun&nbsp; 2 10:32:18 2017 local2.info chat[4311]: ^M<br />Fri Jun&nbsp; 2 10:32:18 2017 local2.info chat[4311]: ATE1^M^M<br />Fri Jun&nbsp; 2 10:32:18 2017 local2.info chat[4311]: OK<br />Fri Jun&nbsp; 2 10:32:18 2017 local2.info chat[4311]:&nbsp; -- got it<br />Fri Jun&nbsp; 2 10:32:18 2017 local2.info chat[4311]: send (AT+CGDCONT=1,&quot;IP&quot;,&quot;myAPN.si&quot;^M)<br />Fri Jun&nbsp; 2 10:32:18 2017 local2.info chat[4311]: timeout set to 30 seconds<br />Fri Jun&nbsp; 2 10:32:18 2017 local2.info chat[4311]: expect (OK)<br />Fri Jun&nbsp; 2 10:32:18 2017 local2.info chat[4311]: ^M<br />Fri Jun&nbsp; 2 10:32:18 2017 local2.info chat[4311]: AT+CGDCONT=1,&quot;IP&quot;,&quot;myAPN.si&quot;^M^M<br />Fri Jun&nbsp; 2 10:32:18 2017 local2.info chat[4311]: OK<br />Fri Jun&nbsp; 2 10:32:18 2017 local2.info chat[4311]:&nbsp; -- got it<br />Fri Jun&nbsp; 2 10:32:18 2017 local2.info chat[4311]: send (ATD*99***1#^M)<br />Fri Jun&nbsp; 2 10:32:19 2017 local2.info chat[4311]: expect (CONNECT)<br />Fri Jun&nbsp; 2 10:32:19 2017 local2.info chat[4311]: ^M<br />Fri Jun&nbsp; 2 10:32:19 2017 local2.info chat[4311]: ATD*99***1#^M^M<br />Fri Jun&nbsp; 2 10:32:19 2017 local2.info chat[4311]: CONNECT<br />Fri Jun&nbsp; 2 10:32:19 2017 local2.info chat[4311]:&nbsp; -- got it<br />Fri Jun&nbsp; 2 10:32:19 2017 local2.info chat[4311]: send ( ^M)<br />Fri Jun&nbsp; 2 10:32:19 2017 daemon.info pppd[4309]: Serial connection established.<br />Fri Jun&nbsp; 2 10:32:19 2017 kern.info kernel: [ 1598.700000] 3g-3gwan: renamed from ppp0<br />Fri Jun&nbsp; 2 10:32:19 2017 daemon.info pppd[4309]: Using interface 3g-3gwan<br />Fri Jun&nbsp; 2 10:32:19 2017 daemon.notice pppd[4309]: Connect: 3g-3gwan &lt;--&gt; /dev/ttyACM4<br />Fri Jun&nbsp; 2 10:32:20 2017 daemon.notice pppd[4309]: PAP authentication succeeded<br />Fri Jun&nbsp; 2 10:32:21 2017 daemon.info pppd[4309]: LCP terminated by peer<br />Fri Jun&nbsp; 2 10:32:22 2017 daemon.notice pppd[4309]: Modem hangup<br />Fri Jun&nbsp; 2 10:32:22 2017 daemon.notice pppd[4309]: Connection terminated.<br />Fri Jun&nbsp; 2 10:32:23 2017 daemon.info pppd[4309]: Exit.<br />Fri Jun&nbsp; 2 10:32:23 2017 daemon.notice netifd: Interface &#039;3gwan&#039; is now down</p><br /><p>Miloš</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p359605">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Antek</div>
					<div class="post-datetime">
						2 Jun 2017, 13:49					</div>
				</div>
				<div class="post-content content">
					<p>Since the 3G modem is working correctly with some APNs, then I&#039;d suggest checking if you can increase the log level of the pppd for the connection which doesn&#039;t work. While this doesn&#039;t immediately solve the problem at hand, it should give you more information on what exactly is going wrong.</p><p>To do this, append a </p><div class="codebox"><pre><code>option pppd_options &#039;debug&#039;</code></pre></div><p> into your config in /etc/config/network, where you specify the username and password for the PPP connection. If you&#039;re using some other means of configuring the pppd,&nbsp; find the appropriate place to embed the same option.</p><p>If you want to get up, close and familiar with PPP, here&#039;s a good read: <a href="http://www.tcpipguide.com/free/t_PointtoPointProtocolPPP.htm">http://www.tcpipguide.com/free/t_Pointt … colPPP.htm</a></p><p>Also, for more options that you can put to a &#039;pppd_options&#039; field, check <a href="https://ppp.samba.org/pppd.html">https://ppp.samba.org/pppd.html</a></p>											<p class="post-edited">(Last edited by <strong>Antek</strong> on 2 Jun 2017, 13:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p359606">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mmilos</div>
					<div class="post-datetime">
						2 Jun 2017, 14:25					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for replay. Here are details:</p><br /><p>Fri Jun&nbsp; 2 13:22:05 2017 daemon.debug pppd[3207]: Script USE_APN=myapn.si DIALNUMBER=*99***1# /usr/sbin/chat -t5 -v -E -f /etc/chatscripts/3g.chat finished (pid 3208), status = 0x0<br />Fri Jun&nbsp; 2 13:22:05 2017 daemon.info pppd[3207]: Serial connection established.<br />Fri Jun&nbsp; 2 13:22:05 2017 daemon.debug pppd[3207]: using channel 67<br />Fri Jun&nbsp; 2 13:22:05 2017 kern.info kernel: [&nbsp; 306.920000] 3g-3gwan: renamed from ppp0<br />Fri Jun&nbsp; 2 13:22:05 2017 daemon.info pppd[3207]: Using interface 3g-3gwan<br />Fri Jun&nbsp; 2 13:22:05 2017 daemon.notice pppd[3207]: Connect: 3g-3gwan &lt;--&gt; /dev/ttyACM4<br />Fri Jun&nbsp; 2 13:22:06 2017 daemon.debug pppd[3207]: rcvd [LCP ConfReq id=0x1 &lt;asyncmap 0x0&gt; &lt;auth pap&gt; &lt;magic 0x8c65830a&gt; &lt;pcomp&gt; &lt;accomp&gt;]<br />Fri Jun&nbsp; 2 13:22:06 2017 daemon.debug pppd[3207]: sent [LCP ConfReq id=0x1 &lt;asyncmap 0x0&gt; &lt;magic 0x88839a26&gt;]<br />Fri Jun&nbsp; 2 13:22:06 2017 daemon.debug pppd[3207]: sent [LCP ConfRej id=0x1 &lt;pcomp&gt; &lt;accomp&gt;]<br />Fri Jun&nbsp; 2 13:22:06 2017 daemon.debug pppd[3207]: rcvd [LCP ConfAck id=0x1 &lt;asyncmap 0x0&gt; &lt;magic 0x88839a26&gt;]<br />Fri Jun&nbsp; 2 13:22:06 2017 daemon.debug pppd[3207]: rcvd [LCP ConfReq id=0x2 &lt;asyncmap 0x0&gt; &lt;auth pap&gt; &lt;magic 0x8c65830a&gt;]<br />Fri Jun&nbsp; 2 13:22:06 2017 daemon.debug pppd[3207]: sent [LCP ConfAck id=0x2 &lt;asyncmap 0x0&gt; &lt;auth pap&gt; &lt;magic 0x8c65830a&gt;]<br />Fri Jun&nbsp; 2 13:22:06 2017 daemon.debug pppd[3207]: sent [LCP EchoReq id=0x0 magic=0x88839a26]<br />Fri Jun&nbsp; 2 13:22:06 2017 daemon.debug pppd[3207]: sent [PAP AuthReq id=0x1 user=&quot;username&quot; password=&lt;hidden&gt;]<br />Fri Jun&nbsp; 2 13:22:06 2017 daemon.debug pppd[3207]: rcvd [LCP EchoRep id=0x0 magic=0x8c65830a]<br />Fri Jun&nbsp; 2 13:22:06 2017 daemon.debug pppd[3207]: rcvd [PAP AuthAck id=0x1 &quot;&quot;]<br />Fri Jun&nbsp; 2 13:22:06 2017 daemon.notice pppd[3207]: PAP authentication succeeded<br />Fri Jun&nbsp; 2 13:22:06 2017 daemon.debug pppd[3207]: sent [IPCP ConfReq id=0x1 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 0.0.0.0&gt; &lt;ms-dns2 0.0.0.0&gt;]<br />Fri Jun&nbsp; 2 13:22:06 2017 daemon.debug pppd[3207]: sent [IPV6CP ConfReq id=0x1 &lt;addr fe80::b072:3255:1277:9089&gt;]<br />Fri Jun&nbsp; 2 13:22:07 2017 daemon.debug pppd[3207]: rcvd [LCP TermReq id=0x3]<br />Fri Jun&nbsp; 2 13:22:07 2017 daemon.info pppd[3207]: LCP terminated by peer<br />Fri Jun&nbsp; 2 13:22:07 2017 daemon.debug pppd[3207]: sent [LCP TermAck id=0x3]<br />Fri Jun&nbsp; 2 13:22:08 2017 daemon.notice pppd[3207]: Modem hangup<br />Fri Jun&nbsp; 2 13:22:08 2017 daemon.notice pppd[3207]: Connection terminated.<br />Fri Jun&nbsp; 2 13:22:09 2017 daemon.info pppd[3207]: Exit.<br />Fri Jun&nbsp; 2 13:22:09 2017 daemon.notice netifd: Interface &#039;3gwan&#039; is now down<br />Fri Jun&nbsp; 2 13:22:09 2017 daemon.notice netifd: Interface &#039;3gwan&#039; is setting up now<br />Fri Jun&nbsp; 2 13:22:11 2017 user.notice ./3g.sh: MCCMNC: , APN: myapn.si, USER: username, PWD: password, DNS: , SIMPIN: <br />Fri Jun&nbsp; 2 13:22:11 2017 daemon.notice pppd[3265]: pppd 2.4.7 started by root, uid 0</p><br /><p>Miloš</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p359610">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						2 Jun 2017, 15:31					</div>
				</div>
				<div class="post-content content">
					<p>Add this line to your configuration and try again:<br /></p><div class="codebox"><pre><code>option &#039;pppd_options&#039; &#039;noipdefault&#039;</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p359612">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">mmilos</div>
					<div class="post-datetime">
						2 Jun 2017, 15:55					</div>
				</div>
				<div class="post-content content">
					<p>In configuration /etc/config/network is:</p><p>config interface &#039;3gwan&#039;<br />&nbsp; &nbsp; option proto &#039;3g&#039;<br />&nbsp; &nbsp; option device &#039;/dev/ttyACM4&#039;<br />&nbsp; &nbsp; option service &#039;umts&#039;<br />&nbsp; &nbsp; option &#039;pppd_options&#039; &#039;noipdefault&#039;<br />&nbsp; &nbsp; option pppd_options &#039;debug&#039;<br />&nbsp; &nbsp; option apn &#039;myapn.si&#039;<br />&nbsp; &nbsp; option username &#039;myusername&#039;<br />&nbsp; &nbsp; option password &#039;mypassword&#039;<br />&nbsp; &nbsp; option delegate &#039;0&#039;</p><p>and i have no luck jet.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p359621">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Antek</div>
					<div class="post-datetime">
						2 Jun 2017, 16:50					</div>
				</div>
				<div class="post-content content">
					<p>Move the &#039;noipdefault&#039; to the same line with the &#039;debug&#039;</p><div class="codebox"><pre><code>option pppd_options &#039;debug noipdefault&#039;</code></pre></div><p>This ensures that both options are in effect.</p><p>Also, from your log:<br /></p><div class="codebox"><pre><code>Fri Jun  2 13:22:06 2017 daemon.debug pppd[3207]: sent [IPCP ConfReq id=0x1 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 0.0.0.0&gt; &lt;ms-dns2 0.0.0.0&gt;]
Fri Jun  2 13:22:06 2017 daemon.debug pppd[3207]: sent [IPV6CP ConfReq id=0x1 &lt;addr fe80::b072:3255:1277:9089&gt;]
Fri Jun  2 13:22:07 2017 daemon.debug pppd[3207]: rcvd [LCP TermReq id=0x3]</code></pre></div><p>The peer is terminating the session immediately after receiving your request for IPV6CP. Try disabling IPV6CP on the pppd by modifying the pppd options appropriately:</p><div class="codebox"><pre><code>option pppd_options &#039;debug noipdefault noipv6&#039;</code></pre></div><p>See if these help.</p>											<p class="post-edited">(Last edited by <strong>Antek</strong> on 2 Jun 2017, 16:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p359775">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">mmilos</div>
					<div class="post-datetime">
						5 Jun 2017, 10:09					</div>
				</div>
				<div class="post-content content">
					<p>Hello,<br />progress is shown. Now the script looks like this:</p><p>&nbsp; &nbsp; &nbsp;config interface &#039;3gwan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;3G&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; option device &#039;/ dev / ttyACM4&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; option service &#039;UMTS&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; option pppd_options &#039;debug noipdefault noipv6&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; option APN &#039;myapn.si&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; option username &#039;myusername&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; option password &#039;mypassword&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; option demand &#039;10&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Keepalive option &#039;2 5&#039;</p><p>Modem is now connected, but the problem is, because modem do not get a wright IP address. Now the IP is 10.64.64.64 it should be 10.247.149.6!?</p><p>Here is log:</p><p>Mon Jun&nbsp; 5 09:07:13 2017 daemon.notice netifd: Interface &#039;3gwan&#039; is setting up now<br />Mon Jun&nbsp; 5 09:07:15 2017 user.notice ./3g.sh: MCCMNC: , APN: myapn.si, USER: myusername, PWD: mypassword, DNS: , SIMPIN: <br />Mon Jun&nbsp; 5 09:07:15 2017 daemon.notice pppd[1580]: pppd 2.4.7 started by root, uid 0<br />Mon Jun&nbsp; 5 09:07:15 2017 daemon.info pppd[1580]: Using interface 3g-3gwan<br />Mon Jun&nbsp; 5 09:07:15 2017 daemon.notice pppd[1580]: local&nbsp; IP address 10.64.64.64<br />Mon Jun&nbsp; 5 09:07:15 2017 daemon.notice pppd[1580]: remote IP address 10.112.112.112<br />Mon Jun&nbsp; 5 09:07:15 2017 kern.info kernel: [ 1395.470000] 3g-3gwan: renamed from ppp0</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p359776">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Antek</div>
					<div class="post-datetime">
						5 Jun 2017, 10:31					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mmilos wrote:</cite><blockquote><p>Modem is now connected, but the problem is, because modem do not get a wright IP address. Now the IP is 10.64.64.64 it should be 10.247.149.6!?</p></blockquote></div><p>Please elaborate a little bit. Why do you think the modem should get the 10.247.149.6 address? Nothing in your logfiles or configs indicate that things should be so.</p><p>The local IP address can be specified by a command-line option, or it can be deduced automatically from the hostname of your local device. The latter occurs when the &#039;noipdefault&#039; option is not present. </p><p>When the &#039;noipdefault&#039; option is present, it configures pppd so that the peer will supply an IP address for you. So, in this specific case, the peer has assigned the IP address 10.64.64.64 for your host. You can check &#039;ifconfig&#039; output after the link is established to ensure that this address was indeed assigned to the interface.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p359777">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">mmilos</div>
					<div class="post-datetime">
						5 Jun 2017, 10:44					</div>
				</div>
				<div class="post-content content">
					<p>On the other side I have a Radius server that assigns SIM card fixed IP address, which must be in my case 10.247.149.6!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p359779">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Antek</div>
					<div class="post-datetime">
						5 Jun 2017, 11:17					</div>
				</div>
				<div class="post-content content">
					<p>Then I&#039;d look for the problem from the server end. If the client informs the dial-in server that it wants the dial-in server to assign itself an IP address, does the dial-in server fetch the address properly from the Radius server?</p><p>Perhaps the IPCP implementation of your server end is buggy? You can try changing the &#039;noipdefault&#039; option to read &#039;noip&#039; on the OpenWRT router&#039;s config. This disables IPCP completely. You can then add the desired local IP address as first item in the pppd_options string.</p><p>Before doing that, I&#039;d first look into the IPCP config of your server end, and see if all the necessary bells and whistles are in place in order for it to use RADIUS as the source of the connection-related details.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p359781">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">mmilos</div>
					<div class="post-datetime">
						5 Jun 2017, 11:46					</div>
				</div>
				<div class="post-content content">
					<p>When I insert SIM card in another device, connection establishing immediately and always with the same IP addres, so i think there is no problem on server end.</p><p>Can you describe me the solution, how to enter IP Address detailed?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p359782">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Antek</div>
					<div class="post-datetime">
						5 Jun 2017, 12:09					</div>
				</div>
				<div class="post-content content">
					<p>Your configuration also doesn&#039;t specify the SIM-card&#039;s pincode. Perhaps that is part of the problem? If the SIM card is locked, the modem dials into the network without identification, and this might be the reason why the RADIUS doesn&#039;t assign the correct IP.</p><p>To test this, you can try the following config:</p><div class="codebox"><pre><code>config interface &#039;3gwan&#039;
          option proto &#039;3G&#039;
          option device &#039;/dev/ttyACM4&#039;
          option pincode &#039;yourpincode&#039;
          option service &#039;UMTS&#039;
          option pppd_options &#039;debug noipv6&#039;
          option APN &#039;myapn.si&#039;
          option username &#039;myusername&#039;
          option password &#039;mypassword&#039;
          option demand &#039;10&#039;
          option keepalive &#039;5&#039;</code></pre></div><p>And if that doesn&#039;t work, you should be able to force the local IP address with the following config:</p><div class="codebox"><pre><code>config interface &#039;3gwan&#039;
          option proto &#039;3G&#039;
          option device &#039;/dev/ttyACM4&#039;
          option service &#039;UMTS&#039;
          option pppd_options &#039;10.247.149.6 debug noip noipv6&#039;
          option APN &#039;myapn.si&#039;
          option username &#039;myusername&#039;
          option password &#039;mypassword&#039;
          option demand &#039;10&#039;
          option keepalive &#039;5&#039;</code></pre></div><p>Read more from <a href="https://wiki.openwrt.org/doc/recipes/3gdongle">https://wiki.openwrt.org/doc/recipes/3gdongle</a> and <a href="https://wiki.openwrt.org/doc/uci/network#protocol_3g_ppp_over_ev-do_cdma_umts_or_gprs">https://wiki.openwrt.org/doc/uci/networ … ts_or_gprs</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p359787">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">mmilos</div>
					<div class="post-datetime">
						5 Jun 2017, 14:54					</div>
				</div>
				<div class="post-content content">
					<p>If i try to force IP i get this log:</p><p>Mon Jun&nbsp; 5 13:49:32 2017 daemon.notice netifd: Interface &#039;3gwan&#039; is setting up now<br />Mon Jun&nbsp; 5 13:49:34 2017 user.notice ./3g.sh: MCCMNC: , APN: myapn.si, USER: myusername, PWD: mypassword, DNS: , SIMPIN: 1111<br />Mon Jun&nbsp; 5 13:49:35 2017 daemon.notice netifd: 3gwan (2740): SIM ready<br />Mon Jun&nbsp; 5 13:49:35 2017 daemon.notice netifd: 3gwan (2740): PIN set successfully<br />Mon Jun&nbsp; 5 13:49:35 2017 daemon.notice netifd: 3gwan (2757): /usr/sbin/pppd: unrecognized option &#039;10.249.143.6&#039;<br />Mon Jun&nbsp; 5 13:49:35 2017 daemon.err pppd[2757]: unrecognized option &#039;10.249.143.6&#039;<br />Mon Jun&nbsp; 5 13:49:35 2017 daemon.notice netifd: 3gwan (2757): pppd version 2.4.7<br />Mon Jun&nbsp; 5 13:49:35 2017 daemon.notice netifd: 3gwan (2757): Usage: /usr/sbin/pppd [ options ], where options are:<br />Mon Jun&nbsp; 5 13:49:35 2017 daemon.notice netifd: 3gwan (2757): &nbsp; &nbsp; &lt;device&gt;&nbsp; &nbsp; Communicate over the named device<br />Mon Jun&nbsp; 5 13:49:35 2017 daemon.notice netifd: 3gwan (2757): &nbsp; &nbsp; &lt;speed&gt;&nbsp; &nbsp; &nbsp; &nbsp; Set the baud rate to &lt;speed&gt;<br />Mon Jun&nbsp; 5 13:49:35 2017 daemon.notice netifd: 3gwan (2757): &nbsp; &nbsp; &lt;loc&gt;:&lt;rem&gt;&nbsp; &nbsp; Set the local and/or remote interface IP<br />Mon Jun&nbsp; 5 13:49:35 2017 daemon.notice netifd: 3gwan (2757): &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; addresses.&nbsp; Either one may be omitted.<br />Mon Jun&nbsp; 5 13:49:35 2017 daemon.notice netifd: 3gwan (2757): &nbsp; &nbsp; asyncmap &lt;n&gt;&nbsp; &nbsp; Set the desired async map to hex &lt;n&gt;<br />Mon Jun&nbsp; 5 13:49:35 2017 daemon.notice netifd: 3gwan (2757): &nbsp; &nbsp; auth&nbsp; &nbsp; &nbsp; &nbsp; Require authentication from peer<br />Mon Jun&nbsp; 5 13:49:35 2017 daemon.notice netifd: 3gwan (2757):&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;connect &lt;p&gt;&nbsp; &nbsp; &nbsp;Invoke shell command &lt;p&gt; to set up the serial line<br />Mon Jun&nbsp; 5 13:49:35 2017 daemon.notice netifd: 3gwan (2757): &nbsp; &nbsp; crtscts&nbsp; &nbsp; &nbsp; &nbsp; Use hardware RTS/CTS flow control<br />Mon Jun&nbsp; 5 13:49:35 2017 daemon.notice netifd: 3gwan (2757): &nbsp; &nbsp; defaultroute&nbsp; &nbsp; Add default route through interface<br />Mon Jun&nbsp; 5 13:49:35 2017 daemon.notice netifd: 3gwan (2757): &nbsp; &nbsp; file &lt;f&gt;&nbsp; &nbsp; Take options from file &lt;f&gt;<br />Mon Jun&nbsp; 5 13:49:35 2017 daemon.notice netifd: Interface &#039;3gwan&#039; is now down</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p359788">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Antek</div>
					<div class="post-datetime">
						5 Jun 2017, 15:12					</div>
				</div>
				<div class="post-content content">
					<p>Apparently you cannot force the local IP address through the pppd_options then. So, the second config doesn&#039;t work at all.</p><p>You&#039;ll need to look into the details of why the SIM and IP address mapping doesn&#039;t work correctly in the server end. Can the server-side provide any logs on why it assigned a specific IP address to a client? Did you try the first config with the pincode? Did it change anything?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p359790">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">mmilos</div>
					<div class="post-datetime">
						5 Jun 2017, 15:32					</div>
				</div>
				<div class="post-content content">
					<p>Yes, i try the first config, but result is the same i still get default IP 10.64.64.64)!<br />The problem is, because i do not have access to the log file on server end.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p359823">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">Antek</div>
					<div class="post-datetime">
						6 Jun 2017, 08:55					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m out of ideas then. Maybe you can monitor the traffic generated by the other device, where things seem to work correctly? See if it&#039;s debug output looks similar to the one generated by OpenWRT, spot the differences and work out from there.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>