<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WGT634U with USB-Audio: bad sound quality</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 1 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p101307">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">dieterr</div>
					<div class="post-datetime">
						24 Jan 2010, 19:37					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,</p><p>I&#039;m running a WGT634U + 5$ USB Audio card with Kamikaze 7.09 system to have a WLAN controlled FLAC server with WPA2 support. In general the system is up and works and can be controlled externally by Minion, but:</p><p>- playing FLAC files the sound is generally bad (compared with MP3)<br />- for FLAC (and also MP3) files sound quality is disturbed with periodic clicks, sounds like an old analog record :-(<br />- volume can be controlled by mpc, but with &quot;3&quot; no sound is on analog ouput and &quot;5&quot; is too loud, an increase to &quot;100&quot; increases loudness not significantly<br />- streaming the files with PC under foobar and USB-Audio card causes not these problems</p><p>Therefore I suppose OpenWRT causes the problems, but I have no idea how to do a more detailed trouble shooting. So may you can help me.</p><p>regards, Dieter</p><p>BTW, the following packages are installed:<br />alsa-lib&nbsp; &nbsp; 1.0.13-1&nbsp; &nbsp; <br />alsa-utils&nbsp; &nbsp; 1.0.13-1&nbsp; &nbsp; <br />base-files-brcm47xx-2.6&nbsp; &nbsp; 10-9078&nbsp; &nbsp; <br />bridge&nbsp; &nbsp; 1.0.6-1&nbsp; &nbsp; <br />busybox&nbsp; &nbsp; 1.4.2-2&nbsp; &nbsp; <br />cifsmount&nbsp; &nbsp; 1.5-2&nbsp; &nbsp; <br />dnsmasq&nbsp; &nbsp; 2.39-1&nbsp; &nbsp; <br />dropbear&nbsp; &nbsp; 0.50-2&nbsp; &nbsp; <br />haserl&nbsp; &nbsp; 0.8.0-2&nbsp; &nbsp; <br />hostapd-mini&nbsp; &nbsp; 0.5.7-1&nbsp; &nbsp; <br />hotplug2&nbsp; &nbsp; 0.9+r102-2&nbsp; &nbsp; <br />iptables&nbsp; &nbsp; 1.3.7-1&nbsp; &nbsp; <br />kernel&nbsp; &nbsp; 2.6.22-brcm47xx-1&nbsp; &nbsp; <br />kmod-diag&nbsp; &nbsp; 2+2.6.22-brcm47xx-1&nbsp; &nbsp; <br />kmod-fs-cifs&nbsp; &nbsp; 2.6.22-brcm47xx-1&nbsp; &nbsp; <br />kmod-madwifi&nbsp; &nbsp; 2.6.22+r2568-20070710-brcm47xx-2&nbsp; &nbsp; <br />kmod-nls-base&nbsp; &nbsp; 2.6.22-brcm47xx-1&nbsp; &nbsp; <br />kmod-ppp&nbsp; &nbsp; 2.6.22-brcm47xx-1&nbsp; &nbsp; <br />kmod-pppoe&nbsp; &nbsp; 2.6.22-brcm47xx-1&nbsp; &nbsp; <br />kmod-sound-core&nbsp; &nbsp; 2.6.22-brcm47xx-1&nbsp; &nbsp; <br />kmod-switch&nbsp; &nbsp; 2.6.22-brcm47xx-1&nbsp; &nbsp; <br />kmod-usb-audio&nbsp; &nbsp; 2.6.22-brcm47xx-1&nbsp; &nbsp; <br />kmod-usb-core&nbsp; &nbsp; 2.6.22-brcm47xx-1&nbsp; &nbsp; <br />kmod-usb-ohci&nbsp; &nbsp; 2.6.22-brcm47xx-1&nbsp; &nbsp; <br />libflac&nbsp; &nbsp; 1.1.2-1&nbsp; &nbsp; <br />libgcc&nbsp; &nbsp; 4.1.2-10&nbsp; &nbsp; <br />libid3tag&nbsp; &nbsp; 0.15.1b-1&nbsp; &nbsp; <br />libmad&nbsp; &nbsp; 0.15.1b-1&nbsp; &nbsp; <br />libmagic&nbsp; &nbsp; 4.19-1&nbsp; &nbsp; <br />libncurses&nbsp; &nbsp; 5.6-1&nbsp; &nbsp; <br />libopenssl&nbsp; &nbsp; 0.9.8e-1&nbsp; &nbsp; <br />libpthread&nbsp; &nbsp; 0.9.28-10&nbsp; &nbsp; <br />libvorbisidec&nbsp; &nbsp; 1.2.0-dave-1&nbsp; &nbsp; <br />mpc&nbsp; &nbsp; 0.12.1-1&nbsp; &nbsp; <br />mpd&nbsp; &nbsp; 0.13.0-1&nbsp; &nbsp; <br />mtd&nbsp; &nbsp; 5&nbsp; &nbsp; <br />ppp&nbsp; &nbsp; 2.4.3-8&nbsp; &nbsp; <br />ppp-mod-pppoe&nbsp; &nbsp; 2.4.3-8&nbsp; &nbsp; <br />uclibc&nbsp; &nbsp; 0.9.28-10&nbsp; &nbsp; <br />udevtrigger&nbsp; &nbsp; 106-1&nbsp; &nbsp; <br />webif&nbsp; &nbsp; 0.3-12&nbsp; &nbsp; <br />webif-lang-de&nbsp; &nbsp; 0.3-12&nbsp; &nbsp; <br />wireless-tools&nbsp; &nbsp; 29-1&nbsp; &nbsp; <br />wpa-supplicant&nbsp; &nbsp; 0.5.7-1&nbsp; &nbsp; <br />zlib&nbsp; &nbsp; 1.2.3-4</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p101634">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">dieterr</div>
					<div class="post-datetime">
						28 Jan 2010, 20:17					</div>
				</div>
				<div class="post-content content">
					<p>Nobody running a similiar system and can help?</p><p>Dieter</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p101668">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">gwirth</div>
					<div class="post-datetime">
						29 Jan 2010, 08:46					</div>
				</div>
				<div class="post-content content">
					<p>What is the actual USB audio device in case someone can duplicate the problem.</p><p>What is your system load when trying to play files ( i.e monitor with &quot;top&quot; while playing)?</p><p>Why is your kernel so old? The current builds are 2.6.30.10. Why aren&#039;t you using at least Kamikaze 8.09.2?</p><p>Are you playing the files off local storage or are you trying to stream them over wireless? If you are streaming over wireless, how do you know you have enough real bandwidth?</p><p>Gus</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p101979">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">dieterr</div>
					<div class="post-datetime">
						2 Feb 2010, 19:53					</div>
				</div>
				<div class="post-content content">
					<p>Here my answers</p><br /><p>My USB-Audio is one of these cheap USB Audio adapters available online. It is named as model &quot;PD552&quot;, the printing on it is &quot;Econdo&quot; but I guess this is not helpful. Inside there is a 1 chip solution with connectors to headphones and microphone, then I found the info &quot;2278-USBCARD&quot;. At Windows I got the follwing info: USB\VID_1130&amp;PID_F211&amp;MI_00\6&amp;8BB4669&amp;0&amp;0000. With Openwrt I got the following info:</p><p>Bus&nbsp; &nbsp; &nbsp; Device&nbsp; &nbsp; &nbsp; Product&nbsp; &nbsp; &nbsp; Manufacturer&nbsp; &nbsp; &nbsp; VendorID:ProdID&nbsp; &nbsp; &nbsp; USB version&nbsp; &nbsp; &nbsp; Speed<br />01 &nbsp; &nbsp; 3 &nbsp; &nbsp; &nbsp; &nbsp; USB AUDIO &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1130:f211 &nbsp; &nbsp; &nbsp; &nbsp; 1.10&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; 12 Mbps</p><p>After startup of the system<br />System / processor load: ~22% <br />Traffic in: 30 kbps<br />Traffic out: 10 kbps</p><p>Starting a MP3<br />System / processor load: 100% for ~20sec, then ~60%, music starts after ~5sec (buffering size is actually 80-100%)<br />Traffic in: ~60 kbps with spikes of ~600-1000kbps<br />Traffic out: 20 kbps with spikes of ~60kbps</p><p>Starting a FLAC<br />System / processor load: 100% for ~20sec, then ~60%, music starts after ~5sec (buffering size is actually 80-100%)<br />Traffic in: ~1200 kbps with negativ spikes down to ~60kbps<br />Traffic out: 74 kbps more or less continously</p><p>After some tests I think, the bad quality of the system is caused by some kind of clipping, but I cannot do a a correction since volume is still near 0. And using the headphones directly to my ears blasts my head.</p><br /><p>I tried to install 08.09.02 twice without success. I wasn&#039;t able to run wireless and got a bridged Netgear that I rescued with the serial cable,&nbsp; with 7.09 it worked fine for the first time. Only for GUI I installed web-if.</p><p>The files are streamed from a NAS over wireless, as I said I had no problems with streaming over PC and the same USB-Audio device. I tried several options with buffering and prebuffering size (see above), but without effect on the &quot;klicks&quot;. </p><p>regards,<br />Dieter</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p101997">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">gwirth</div>
					<div class="post-datetime">
						2 Feb 2010, 22:43					</div>
				</div>
				<div class="post-content content">
					<p>See if you can get one of the daily builds to work. There have been quite a few changes, especially with the kernel.</p><p>Also, you are actually pretty high on CPU load. Instantaneous CPU load can easily hit 100% which will cause audible effects even if the monitoring shows something else. This is very hard to detect without instrumentation.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p102228">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">dieterr</div>
					<div class="post-datetime">
						5 Feb 2010, 19:24					</div>
				</div>
				<div class="post-content content">
					<p>I see and will try. Are there any short instructions/docu to backup my running system with all modifications before starting the test with the new one?</p><p>regards,<br />Dieter</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>