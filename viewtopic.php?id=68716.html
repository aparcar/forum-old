<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Installing OpenWRT on TP-LINK WR340G through VxKiller</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p345043">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">johndoe</div>
					<div class="post-datetime">
						27 Nov 2016, 19:06					</div>
				</div>
				<div class="post-content content">
					<p>Hi everyone!</p><p>I got a TP-LINK router model WR340G v3.1 and I would like to install OpenWRT on it (though not officially supported due the small amount of flash and RAM). I tried by following <a href="https://wiki.openwrt.org/toh/tp-link/tl-wr542g">this tutorial</a>, installing this &quot;VxKiller&quot;:</p><div class="quotebox"><blockquote><p>This VxKiller was originally developed for the TP-LINK WR340G router which is the same hardware as the WR542G excluding the 16MB ram found in the WR542G</p></blockquote></div><p>The tutorial says also the following:</p><div class="quotebox"><blockquote><p>TP-Link&#039;s web interface has a hardcoded limitation that it only accepts images less then 1.179.648 Bytes long. So you cannot even use the entire space available for a OpenWrt build. But you can surpass this problem by flashing a special OpenWrt firmware image called &quot;VxKiller&quot; developed by xssa first, and only then the actual firmware.</p></blockquote></div><p>So I did it, I downloaded the &quot;wr340v3_linux.bin&quot; image from <a href="http://www.4shared.com/folder/cUkhCEJf/vxkiller.html">this link</a> and uploaded it through TP-Link&#039;s web interface upgrade feature. At this point I should be able to telnet 192.168.1.1 and enter into the VxKiller firmware, but I think I bricked my router, because it is completely unreachable... I tried with different IP addresses, both the WAN and Ethernet ports, I also tried to restore the factory settings using the Reset button or using the TFTP method, but nothing, it&#039;s apparently dead! I guess the only way to put it back to life is by accessing the serial console... Anyway, that&#039;s not the point, I&#039;m writing here to ask if anybody has successfully installed (or knows about someone who did it) OpenWRT on this TP-LINK router, and if so please share the resources and/or links to the images used to flash the router.</p><p>Thanks in advance!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p345119">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">rscossworth</div>
					<div class="post-datetime">
						28 Nov 2016, 16:38					</div>
				</div>
				<div class="post-content content">
					<p>A few years ago I killed my WR340G v2.26 the same way <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> Now i am waiting for an USB TTL cable and i will try to install some precooked verison of OpenWRT that will fit in these 2MB flash. My WAN port was blown so i am just playing with this device.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p345159">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						29 Nov 2016, 00:23					</div>
				</div>
				<div class="post-content content">
					<p>It has SPI flash.&nbsp; You could fairly easily replace the flash chip with a larger one.</p><p>But wikidevi says the 340G only has 8 MB of RAM.&nbsp; That is a deal-killer.&nbsp; You really need 32 to do anything with a modern OpenWrt.&nbsp; Even the old versions require 16.</p>											<p class="post-edited">(Last edited by <strong>mk24</strong> on 29 Nov 2016, 00:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p345168">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">johndoe</div>
					<div class="post-datetime">
						29 Nov 2016, 03:02					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the replies!</p><div class="quotebox"><cite>mk24 wrote:</cite><blockquote><p>It has SPI flash.&nbsp; You could fairly easily replace the flash chip with a larger one.</p></blockquote></div><p>Fairly easy?? Today I had some serious troubles just to solder a (rudimentary home-made) PIN header to the serial port on the board... So I think replacing the flash chip is not a good option for me! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Anyway, I don&#039;t need a fully featured OpenWRT version, just the necessary to setup a repeater/bridge.</p><p>@rscossworth: have you already thought of a particular precooked version of OpenWRT that fits in 2MB? There&#039;s also the option to use <a href="https://wiki.openwrt.org/doc/howto/obtain.firmware.generate">Image Generator</a> to build a custom (minimal) image...</p><p>UPDATE: apparently <a href="https://forum.openwrt.org/viewtopic.php?id=40459">this guy</a> managed to get a minimal image for the brcm47xx platform and for the same purpose (repeater bridge)... so it&#039;s definitely challenging but not impossible!</p>											<p class="post-edited">(Last edited by <strong>johndoe</strong> on 29 Nov 2016, 03:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p345345">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">xssa</div>
					<div class="post-datetime">
						30 Nov 2016, 22:48					</div>
				</div>
				<div class="post-content content">
					<p>Definitely you have to look what is going wrong at serial console through TTL serial adapter cable. On wr340g v3 there is atheros switch chip which is not supported in redboot.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p345658">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">johndoe</div>
					<div class="post-datetime">
						3 Dec 2016, 23:38					</div>
				</div>
				<div class="post-content content">
					<p>Hey xssa, thanks for replying!</p><div class="quotebox"><cite>xssa wrote:</cite><blockquote><p>On wr340g v3 there is atheros switch chip which is not supported in redboot.</p></blockquote></div><p>What do you mean exactly? Are you saying my router is dead and I have no chance?</p><p>So far I tried just to solder a PIN header to the board and connecting it to my PC using an USB to serial TTL cable. However, I got no data, I guess I need to solder a wire on the back of the board from the TX pin to the actual UART TX pin of the Atheros chip (like explained <a href="https://www.cristiansandu.ro/2014/10/10/serial-console-wr340g/">here</a>). By the way, the back of my board is different from the one in that post (which is a TL-WR741ND), anybody have some hints about where I should solder the wire? This is the back of my TL-WR340G board:</p><p><span class="postimg"><img src="http://i64.tinypic.com/jt6o86.png" alt="http://i64.tinypic.com/jt6o86.png" /></span></p><p>Thanks in advance!</p>											<p class="post-edited">(Last edited by <strong>johndoe</strong> on 3 Dec 2016, 23:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346027">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">xssa</div>
					<div class="post-datetime">
						7 Dec 2016, 21:51					</div>
				</div>
				<div class="post-content content">
					<p>Johndoe<br />Tl-wr340g v3 and v4 are completely different hardware, SOC and OpenWrt target used. Vxkiller is for v2 and v3 only. moreover Microredboot used in vxkiller doesn&#039;t support sst flash and atheros switch. First is fatal as there are no way to boot linux or flash back any image to unsupported flash. Only external flash programmer can help. Second is not fatal as atheros switch is supported in linux kernel and there is a way to flash back any image through microredboot uart console using z-modem. On tl-wr340g uart 4pin header is standard tplink header. Use tx-rx rx-tx gnd-gnd connections to ttl adapter and 115200 baudrate on vxkiller and 9600 baudrate on original fw. You can find more information on this forum.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347302">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">rscossworth</div>
					<div class="post-datetime">
						21 Dec 2016, 18:32					</div>
				</div>
				<div class="post-content content">
					<p>Hey, XSSA! Do you still have custom kernel and rootfs for WR-340G? I am trying to flash one device, but may be i am using the wrong files.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>