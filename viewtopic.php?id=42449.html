<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TP-Link WR841ND v8.1</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 20 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p192742">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">meinijjj</div>
					<div class="post-datetime">
						21 Feb 2013, 21:59					</div>
				</div>
				<div class="post-content content">
					<p>Hy,</p><p>i have some troubles with my router.</p><p>I&#039;ve tried to debrick it by following <a href="https://forum.openwrt.org/viewtopic.php?id=33906">this instructions</a> and using different .bin files. The result is allways the same. After dsiconnecting from uboot the power led is on and all other leds are blinking together every 2 seconds.</p><p>The serieal interface reads:<br /></p><div class="codebox"><pre><code>## Booting image at 9f020000 ...
   Uncompressing Kernel Image ... Too big uncompressed streamLZMA ERROR 1 - must RESET board to recover

U-Boot 1.1.4 (Apr 12 2012 - 09:57:00)

U-boot AP123


DRAM:  32 MB
id read 0x100000ff
Flash:  4 MB
Using default environment

In:    serial
Out:   serial
Err:   serial
Net:   ag934x_enet_initialize...
wasp reset mask:c03300
WASP ----&gt; S27 PHY
GMAC: cfg1 0x5 cfg2 0x7114
eth0: ba:be:fa:ce:08:41
s27 reg init 
athrs27_phy_setup ATHR_PHY_CONTROL 4: 0x1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 4: 0x10
eth0 up
WASP ----&gt; S27 PHY
GMAC: cfg1 0xf cfg2 0x7214
eth1: ba:be:fa:ce:08:41
s27 reg init lan 
ATHRS27: resetting s27
ATHRS27: s27 reset done
athrs27_phy_setup ATHR_PHY_CONTROL 0: 0x1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 0: 0x10
athrs27_phy_setup ATHR_PHY_CONTROL 1: 0x1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 1: 0x10
athrs27_phy_setup ATHR_PHY_CONTROL 2: 0x1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 2: 0x10
athrs27_phy_setup ATHR_PHY_CONTROL 3: 0x1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 3: 0x10
eth1 up
eth0, eth1
Autobooting in 1 seconds
## Booting image at 9f020000 ...</code></pre></div><p>This message is printed out evry time the leds are blinking.</p><p>What went wrong?<br />Is there a chance to debrick this router?</p><p>Thank you guys and sry for my bad english!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192786">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						22 Feb 2013, 11:02					</div>
				</div>
				<div class="post-content content">
					<p>well, then just post step by step what you did (i.e. full serial log of your recovery process and full url of the image).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192945">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">meinijjj</div>
					<div class="post-datetime">
						23 Feb 2013, 19:59					</div>
				</div>
				<div class="post-content content">
					<p>OpenWRT was running and I bricked it when I was trying to restore the original firmware.<br />I selected the file in the Webinterface and foolishly uploaded it to the router ignoring the warning of being to large.</p><p>Following the Instruction for debricking i tried the following files:<br /></p><ul><li><p><a href="http://downloads.openwrt.org/attitude_adjustment/12.09-beta2/ar71xx/generic/openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin">File 1</a> form <a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=161581">this</a> thread.<br /></p></li><li><p><a href="http://www.tplink.com/ir/support/download/?model=TL-WR841ND&amp;version=V8">File 2</a> from 2012/5/22 and 2012/11/1</p></li><li><p><a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/openwrt-ar71xx-generic-tl-wr841nd-v7-squashfs-factory.bin">File 3</a></p></li></ul><p>The following code will show you my recovery process.<br /></p><div class="codebox"><pre><code>## Booting image at 9f020000 ...
   Uncompressing Kernel Image ... Too big uncompressed streamLZMA ERROR 1 - must RESET board to recover

U-Boot 1.1.4 (Apr 12 2012 - 09:57:00)

U-boot AP123


DRAM:  32 MB
id read 0x100000ff
Flash:  4 MB
Using default environment

In:    serial
Out:   serial
Err:   serial
Net:   ag934x_enet_initialize...
wasp reset mask:c03300
WASP ----&gt; S27 PHY
GMAC: cfg1 0x5 cfg2 0x7114
eth0: ba:be:fa:ce:08:41
s27 reg init 
athrs27_phy_setup ATHR_PHY_CONTROL 4: 0x1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 4: 0x10
eth0 up
WASP ----&gt; S27 PHY
GMAC: cfg1 0xf cfg2 0x7214
eth1: ba:be:fa:ce:08:41
s27 reg init lan 
ATHRS27: resetting s27
ATHRS27: s27 reset done
athrs27_phy_setup ATHR_PHY_CONTROL 0: 0x1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 0: 0x10
athrs27_phy_setup ATHR_PHY_CONTROL 1: 0x1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 1: 0x10
athrs27_phy_setup ATHR_PHY_CONTROL 2: 0x1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 2: 0x10
athrs27_phy_setup ATHR_PHY_CONTROL 3: 0x1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 3: 0x10
eth1 up
eth0, eth1
Autobooting in 1 seconds
wasp&gt; setenv serverip 192.168.1.2

wasp&gt; setenv ipaddr 192.168.1.1

wasp&gt; printenv

bootargs=console=ttyS0,115200 root=31:02 rootfstype=squashfs init=/sbin/init mtdparts=ath-nor0:128k(u-boot),1024k(kernel),2816k(rootfs),64k(config),64k(art)
bootcmd=bootm 0x9f020000
bootdelay=1
baudrate=115200
ethaddr=0xba:0xbe:0xfa:0xce:0x08:0x41
dir=
bc=ap123
lu=tftp 0x81000000 ${dir}u-boot.bin&amp;&amp;erase 0x9f000000 +$filesize;cp.b $fileaddr 0x9f000000 $filesize
lf=tftp 0x81000000 ${dir}${bc}-squashfs&amp;&amp;erase 0x9f120000 +$filesize;cp.b $fileaddr 0x9f120000 $filesize
stdin=serial
stdout=serial
stderr=serial
ethact=eth0
serverip=192.168.1.2
ipaddr=192.168.1.1

Environment size: 561/65532 bytes
wasp&gt; tftpboot 0x80000000 7.bin

enet1 port0 up
dup 1 speed 1000
Using eth1 device
TFTP from server 192.168.1.2; our IP address is 192.168.1.1
Filename &#039;7.bin&#039;.
Load address: 0x80000000
Loading: *#################################################################
     #################################################################
     #################################################################
     #################################################################
     #################################################################
     #################################################################
     #################################################################
     #################################################################
     #################################################################
     #################################################################
     #################################################################
     ######################################################
done
Bytes transferred = 3932160 (3c0000 hex)
wasp&gt; erase 0x9f020000 + 0x3c0000

Usage:
erase   - erase FLASH memory

wasp&gt;  cp.b 0x80000000 0x9f020000 0x3c0000

Copy to Flash... write addr: 9f020000
done
wasp&gt; bootm 0x9f020000

## Booting image at 9f020000 ...
   Uncompressing Kernel Image ... ERROR: LzmaDecode.c, 543

Decoding error = 1
LZMA ERROR 1 - must RESET board to recover

U-Boot 1.1.4 (Apr 12 2012 - 09:57:00)

U-boot AP123


DRAM:  32 MB
id read 0x100000ff
Flash:  4 MB
Using default environment

In:    serial
Out:   serial
Err:   serial
Net:   ag934x_enet_initialize...
wasp reset mask:c03300
WASP ----&gt; S27 PHY
GMAC: cfg1 0x5 cfg2 0x7114
eth0: ba:be:fa:ce:08:41
s27 reg init 
athrs27_phy_setup ATHR_PHY_CONTROL 4: 0x1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 4: 0x10
eth0 up
WASP ----&gt; S27 PHY
GMAC: cfg1 0xf cfg2 0x7214
eth1: ba:be:fa:ce:08:41
s27 reg init lan 
ATHRS27: resetting s27
ATHRS27: s27 reset done
athrs27_phy_setup ATHR_PHY_CONTROL 0: 0x1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 0: 0x10
athrs27_phy_setup ATHR_PHY_CONTROL 1: 0x1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 1: 0x10
athrs27_phy_setup ATHR_PHY_CONTROL 2: 0x1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 2: 0x10
athrs27_phy_setup ATHR_PHY_CONTROL 3: 0x1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 3: 0x10
eth1 up
eth0, eth1
Autobooting in 1 seconds</code></pre></div><p>Thank you!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192947">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						23 Feb 2013, 20:09					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>wasp&gt; erase 0x9f020000 + 0x3c0000

Usage:
erase   - erase FLASH memory</code></pre></div><p>erase command wrong.. remove that blank space before 0x3c0000</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192955">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">meinijjj</div>
					<div class="post-datetime">
						23 Feb 2013, 21:10					</div>
				</div>
				<div class="post-content content">
					<p>thank you very much!<br />the router is running again!!<br /><img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /> <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>