<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Openwrt with external radius server</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 18 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p192719">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">dre2007</div>
					<div class="post-datetime">
						21 Feb 2013, 18:13					</div>
				</div>
				<div class="post-content content">
					<p>Good morning,</p><p>I recently configured the following set up:</p><p>Windows 2008 NPS server communicating with an active directory environment and the openwrt als Radius client<br />|<br />Openwrt (radius client of the NPS server) with MSCHAPV2 PEAP<br />|<br />Laptop</p><p>Everything worked and the users were able to login with their AD account.</p><p>What I am trying to achieve is to change the MSCHAPV2 PEAP with certificates. <br />So basicly the clients need to be authenticated with their certificates.</p><p>I already imported the client certificate on the users laptop ( and also the CA certificate ).<br />I also already change the NPS server to make sure it authenticates the certificate of the user.<br />I also changed the clients computer to make sure that it will use the correct certificate and also set it up to not check the server certificate ( this will be implemented later on, I want it to work step by step else I don&#039;t know where things are messed up ).</p><p>Would anyone please be so kind as to provide me the settings for OPENWRT as I think I messed it up in there.<br />I got the following settings set in /etc/config/wireless:<br />option device &#039;radio 0&#039;<br />option mode &#039;ap&#039;<br />option isolate &#039;0&#039;<br />option bgscan &#039;0&#039;<br />option wds &#039;0&#039;<br />option ssid &#039;Internal&#039;<br />option network &#039;vlan 10&#039; &lt;--- This has been set up correctly and isn&#039;t the issue as I can communicate with the server (ping)<br />option encryption &#039;wpa2+aes&#039;<br />option key &#039;sameasontheradiusserver&#039;<br />option port &#039;1812&#039;<br />option server &#039;172.16.10.20&#039;</p><p>Do I also need to change other files in order to get certificates working?<br />Please keep in mind that the basic settings are correct ( as it does work with MSCHAPV2 ).</p><p>Any help would be much appreciated.</p><p>Ps.: I read something about the eap.conf file. Do I need to update that one aswell?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192796">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">dre2007</div>
					<div class="post-datetime">
						22 Feb 2013, 12:41					</div>
				</div>
				<div class="post-content content">
					<p>Good afternoon,<br />Bummer to see noone replied yet.</p><p>Nevermind my question, I already have everything working in the following scenario.<br />1 windows 2008R2 server in a domain and 1 Active Directory server ( of course the same domain ).<br />1 NPS/Radius configured on the above mentioned 2008R2 server.<br />1 Openwrt connected to the NPS/Radius server<br />1 Client machine</p><p>Client verifies the server and the server verifies the client certificate.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p255797">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Hade23</div>
					<div class="post-datetime">
						28 Nov 2014, 04:59					</div>
				</div>
				<div class="post-content content">
					<p>Hi Dre2007,</p><p>I hope your still active on this site. You got further then i did and was wondering if you would be able to assist. </p><p>My issue:<br /> -&nbsp; I can&#039;t login to my SSID using the users configured on the Radius. how did you get that to work? would you be able to provide instructions on how you got the Raidus setup? </p><p>Thanks,<br />Hade</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>