<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> howto get the sources for all the packages downloaded?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p136495">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">perazim</div>
					<div class="post-datetime">
						3 Jun 2011, 19:32					</div>
				</div>
				<div class="post-content content">
					<p>I don&#039;t always have net connectivity. </p><p>I notice that when I build from trunk, that my system periodically appears to go to the net for package sources. </p><p>My questions is: Is there a way to get the build system to download all the sources required at once so that development of any part of the trunk can proceed without connectivity. In other works: get a snapshot of everything and all packages at one time?</p><p>Thanks,</p><p>Perazim</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p136502">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">written_direcon</div>
					<div class="post-datetime">
						3 Jun 2011, 23:02					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>make download</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p136521">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">perazim</div>
					<div class="post-datetime">
						4 Jun 2011, 16:23					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for response.</p><p>This downloads all the sources for the SELECTED packages. </p><p>What I want to do is download all the sources for all the packages in their entirety without having to enable each one package by package in menuconfig. </p><p>I know it will be a lot of stuff.</p><p>Perazim</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p136522">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						4 Jun 2011, 17:28					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>sed -i -e &#039;s,# CONFIG_ALL is not set,CONFIG_ALL=y,&#039; .config &amp;&amp; make download</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p136525">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">perazim</div>
					<div class="post-datetime">
						4 Jun 2011, 18:12					</div>
				</div>
				<div class="post-content content">
					<p>Tried this and had same results as &quot;make download&quot;. </p><p>The sources for the packages I have not as yet selected in menuconfig for the build have not been downloaded. For example, in menuconfig I have not selected the package bird4. The source package for bird4 has not been downloaded. If I now select bird4 and run make, when the build process gets to the bird4 package, it will download the source for it.</p><p>If this is not possible then I can use menuconfig to select ALL packages but I thought that I would ask before doing that.</p><p>Thanks,</p><p>Perazim</p>											<p class="post-edited">(Last edited by <strong>perazim</strong> on 4 Jun 2011, 18:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141518">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">perazim</div>
					<div class="post-datetime">
						17 Aug 2011, 07:40					</div>
				</div>
				<div class="post-content content">
					<p>I have enabled Select all packages by default&nbsp; in&nbsp; Global build settings&nbsp; in make menuconfig.</p><p>Then make download.</p><p>This appears to download all the package sources?</p><p>This being correct and I have several different target systems, do I need to do this for each target or will one target suffice?</p><p>Remember, my goal is to download ALL the sources for everything and all target systems so that later, offline the net, I can build.</p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141526">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						17 Aug 2011, 11:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>perazim wrote:</cite><blockquote><p>I have enabled Select all packages by default&nbsp; in&nbsp; Global build settings&nbsp; in make menuconfig.</p><p>Then make download.</p><p>This appears to download all the package sources?</p></blockquote></div><p>Is this really a question?</p><div class="quotebox"><cite>perazim wrote:</cite><blockquote><p>This being correct and I have several different target systems, do I need to do this for each target or will one target suffice?</p></blockquote></div><p>Why should you? The source-code remains the same, you merely cross-compile it for different ARCHes.</p><div class="quotebox"><cite>perazim wrote:</cite><blockquote><p>Remember, my goal is to download ALL the sources for everything and all target systems so that later, offline the net, I can build.</p></blockquote></div><p>How could one forget?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141559">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">perazim</div>
					<div class="post-datetime">
						17 Aug 2011, 17:42					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jow wrote:</cite><blockquote><div class="codebox"><pre><code>sed -i -e &#039;s,# CONFIG_ALL is not set,CONFIG_ALL=y,&#039; .config &amp;&amp; make download</code></pre></div></blockquote></div><p>This still just downloads the base files. I am still missing the sources for the optional packages.</p><p>I need to download every possible source file (think packages) that could be needed.</p><p>Obviously this could be done by selecting every possible package option in menuconfig.</p><p>Is there a more automated and less time consuming way to do this?</p><p>Something like &#039;make download packages&#039;?</p><br /><p>Thanks</p><p>Perazim</p>											<p class="post-edited">(Last edited by <strong>perazim</strong> on 17 Aug 2011, 17:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141560">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						17 Aug 2011, 17:48					</div>
				</div>
				<div class="post-content content">
					<p>did you download and install the feeds?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141564">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">perazim</div>
					<div class="post-datetime">
						17 Aug 2011, 18:40					</div>
				</div>
				<div class="post-content content">
					<p>Yes, according to the Build HOWTOs.</p><p># ./scripts/feeds update -a<br /># ./scripts/feeds install -a</p><p>Looking in dl, I see no optional packages.</p><p>Looking in feeds/packages, I see folders for each package but no source files.</p><p>Perazim</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141567">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						17 Aug 2011, 19:50					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>perazim wrote:</cite><blockquote><p>Looking in feeds/packages, I see folders for each package but no source files.</p></blockquote></div><p>The downloaded sources (referenced in package Makefiles) are not there...<br />The downloads go first to &lt;buildroot&gt;/dl as gzipped .gz files. And there they are stored<br />and then they get unzipped to /build_dir, I think (or to staging_dir ?)<br />See e.g. &lt;buildroot&gt;/build_dir/target-mips_r2_uClibc-0.9.32 and below it you will find subdirectories for each package&#039;s sources.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141571">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						17 Aug 2011, 20:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>perazim wrote:</cite><blockquote><p>Yes, according to the Build HOWTOs.</p><p># ./scripts/feeds update -a<br /># ./scripts/feeds install -a</p></blockquote></div><p>This is the same as <em>make package/symlinks</em>.</p><div class="quotebox"><blockquote><p>Looking in feeds/packages, I see folders for each package but no source files.</p></blockquote></div><p>You may want to perusal the README file to find out why.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141598">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">perazim</div>
					<div class="post-datetime">
						18 Aug 2011, 07:14					</div>
				</div>
				<div class="post-content content">
					<p>Here is a summary of what I have done:</p><p># mkdir trunk<br /># cd trunk<br /># svn co svn://svn.openwrt.org/openwrt/trunk/<br /># ./scripts/feeds update -a<br /># ./scripts/feeds install -a<br /># make defconfig<br /># make menuconfig<br />I have enabled Select all packages by default&nbsp; in&nbsp; Global build settings&nbsp; in make menuconfig.<br /># make download</p><p>The non-default package sources are not downloaded.</p><p>So I tried:</p><p># make -j 5</p><p>Still no non-default packages downloaded.</p><p>The only way I have had success is to tediously go through menuconfig and enable all packages one by one. This is what I am trying to avoid.</p><p>Perazim</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141614">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						18 Aug 2011, 13:09					</div>
				</div>
				<div class="post-content content">
					<p>What does make menuconfig do when you SAVE your configuration?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141618">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">perazim</div>
					<div class="post-datetime">
						18 Aug 2011, 13:53					</div>
				</div>
				<div class="post-content content">
					<p>This is the output:</p><p>[yossi@maps trunk]$ make menuconfig<br />tmp/.config-package.in:690:warning: &#039;select&#039; used by config symbol &#039;PACKAGE_shorewall6-lite&#039; refer to undefined symbol &#039;PACKAGE_ip6tables-utils&#039;<br />tmp/.config-package.in:14404:warning: &#039;select&#039; used by config symbol &#039;PACKAGE_shorewall-lite&#039; refer to undefined symbol &#039;PACKAGE_iptables-utils&#039;<br />tmp/.config-package.in:17607:warning: &#039;select&#039; used by config symbol &#039;FS_SOFIA_WITH_ODBC&#039; refer to undefined symbol &#039;PACKAGE_unixodbc_svn&#039;<br />tmp/.config-package.in:17793:warning: &#039;select&#039; used by config symbol &#039;PACKAGE_freeswitch-mod-cdr-sqlite&#039; refer to undefined symbol &#039;PACKAGE_sqlite3&#039;<br />tmp/.config-package.in:18143:warning: &#039;select&#039; used by config symbol &#039;PACKAGE_freeswitch-mod-gsmopen&#039; refer to undefined symbol &#039;PACKAGE_gsmlib&#039;<br />tmp/.config-package.in:18280:warning: &#039;select&#039; used by config symbol &#039;PACKAGE_freeswitch-mod-mp4&#039; refer to undefined symbol &#039;PACKAGE_libmp4v2&#039;<br />tmp/.config-package.in:24679:warning: &#039;select&#039; used by config symbol &#039;PACKAGE_dmapd&#039; refer to undefined symbol &#039;PACKAGE_db47&#039;<br />tmp/.config-package.in:24850:warning: &#039;select&#039; used by config symbol &#039;PACKAGE_freepops&#039; refer to undefined symbol &#039;PACKAGE_luacurl&#039;<br />tmp/.config-package.in:26031:warning: &#039;select&#039; used by config symbol &#039;PACKAGE_multiwan&#039; refer to undefined symbol &#039;PACKAGE_iptables-utils&#039;<br />tmp/.config-package.in:28245:warning: &#039;select&#039; used by config symbol &#039;PACKAGE_firewall-mod-save&#039; refer to undefined symbol &#039;PACKAGE_iptables-utils&#039;<br />Warning! Found recursive dependency: PACKAGE_moc PACKAGE_alsa-utils PACKAGE_libncurses PACKAGE_weechat PACKAGE_libncursesw PACKAGE_moc<br />Warning! Found recursive dependency: PACKAGE_lcd4linux LCD4LINUX_DRV_serdisplib LCD4LINUX_NEEDS_serdisplib PACKAGE_lcd4linux<br />Warning! Found recursive dependency: PACKAGE_iptables PACKAGE_luci-app-p2pblock PACKAGE_luci-app-firewall PACKAGE_firewall PACKAGE_iptables<br />Warning! Found recursive dependency: PACKAGE_luci-mod-freifunk-community PACKAGE_luci-app-olsr-services PACKAGE_luci-mod-freifunk-community<br />Warning! Found recursive dependency: PACKAGE_luci-app-olsr PACKAGE_olsrd PACKAGE_luci-app-olsr<br />Warning! Found recursive dependency: PACKAGE_luci-app-splash PACKAGE_luci-app-splash<br />Warning! Found recursive dependency: PACKAGE_luci-app-diag-devinfo PACKAGE_luci-app-voice-diag PACKAGE_luci-app-diag-devinfo<br />Warning! Found recursive dependency: PACKAGE_luci-theme-base PACKAGE_luci-lib-web PACKAGE_luci-lib-nixio PACKAGE_luci-lib-core PACKAGE_luci-theme-openwrt PACKAGE_luci-theme-base<br />Warning! Found recursive dependency: PACKAGE_qt4 PACKAGE_qt4-declarative PACKAGE_qt4-gui PACKAGE_qt4<br />Warning! Found recursive dependency: PACKAGE_zlib CLEARSILVER_ENABLE_COMPRESSION PACKAGE_zlib<br />Warning! Found recursive dependency: PACKAGE_libexpat PACKAGE_libexpat<br />Warning! Found recursive dependency: PACKAGE_kmod-ipv6 PACKAGE_kmod-ipv6<br />#<br /># using defaults found in .config<br />#</p><br /><p>*** End of OpenWrt configuration.<br />*** Execute &#039;make&#039; to build the OpenWrt or try &#039;make help&#039;.</p><p>[yossi@maps trunk]$ </p><p>Perazim</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141623">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						18 Aug 2011, 15:09					</div>
				</div>
				<div class="post-content content">
					<p>Very nice, but that is not was I was getting at.</p><p>I mean, afaik, SAVING stuff in menuconfig will write your setting into .config and into that file alone. So... ===&gt;&gt;&gt; fiddle around with that file instead of configuring things manually through menuconfig. Wasn&#039;t that your problem?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>