<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> OpenWRT on Huawei D100 - lan not work</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 10 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p93968">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Irek</div>
					<div class="post-datetime">
						9 Sep 2009, 23:11					</div>
				</div>
				<div class="post-content content">
					<p>Hello! <br />First off all I would like to appologize for my bad english.</p><p>kamikaze 8.09.1 (openwrt-brcm-2.4-squashfs.trx)<br /> +<br />kmod-usb2_2.4.35.4-brcm-2.4-1_mipsel.ipk<br />kmod-usb-core_2.4.35.4-brcm-2.4-1_mipsel.ipk<br />kmod-usb-serial_2.4.35.4-brcm-2.4-1_mipsel.ipk<br />kmod-usb-storage_2.4.35.4-brcm-2.4-1_mipsel.ipk<br />kmod-usb-uhci_2.4.35.4-brcm-2.4-1_mipsel.ipk<br />kmod-scsi-core_2.4.35.4-brcm-2.4-1_mipsel.ipk<br />kmod-scsi-generic_2.4.35.4-brcm-2.4-1_mipsel.ipk<br />chat_2.4.3-11.1_mipsel.ipk<br />comgt_0.32-1.1_mipsel.ipk</p><br /><p>wifi - work<br />usb - work<br />3G (Huawei E220) - work</p><p>lan -&nbsp; not work<br /></p><div class="codebox"><pre><code>root@OpenWrt:~# lspci
00:00.0 FLASH memory: Broadcom Corporation Sentry5 Chipcommon I/O Controller (rev 03)
00:01.0 Ethernet controller: Broadcom Corporation Sentry5 Ethernet Controller (rev 03)
00:02.0 MIPS: Broadcom Corporation BCM3302 Sentry5 MIPS32 CPU (rev 03)
00:03.0 USB Controller: Broadcom Corporation Device 471a (rev 03)
00:03.1 USB Controller: Broadcom Corporation Device 471a (rev 03)
00:04.0 RAM memory: Broadcom Corporation Sentry5 DDR/SDR RAM Controller (rev 03)
00:05.0 Network controller: Broadcom Corporation BCM4318 [AirForce One 54g] 802.11g Wireless LAN Controller (rev 03)
00:06.0 Network controller: Broadcom Corporation BCM47xx/53xx RoboSwitch Core (rev 03)</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:~# dmesg
CPU revision is: 00029029
Primary instruction cache 16kB, physically tagged, 4-way, linesize 16 bytes.
Primary data cache 16kB, 2-way, linesize 16 bytes.
Linux version 2.4.35.4 (andy@stable-sandbox) (gcc version 3.4.6 (OpenWrt-2.0)) #12 Mon Jun 1 21:52:49 UTC 2009
Setting the PFC to its default value
Determined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
On node 0 totalpages: 8192
zone(0): 8192 pages.
zone(1): 0 pages.
zone(2): 0 pages.
Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,jffs2 init=/etc/preinit noinitrd console=ttyS0,115200
CPU: BCM5354 rev 3 at 240 MHz
Using 120.000 MHz high precision timer.
Calibrating delay loop... 237.56 BogoMIPS
Memory: 30468k/32768k available (1425k kernel code, 2300k reserved, 100k data, 84k init, 0k highmem)
Dentry cache hash table entries: 4096 (order: 3, 32768 bytes)
Inode cache hash table entries: 2048 (order: 2, 16384 bytes)
Mount cache hash table entries: 512 (order: 0, 4096 bytes)
Buffer cache hash table entries: 1024 (order: 0, 4096 bytes)
Page-cache hash table entries: 8192 (order: 3, 32768 bytes)
Checking for &#039;wait&#039; instruction...  unavailable.
POSIX conformance testing by UNIFIX
PCI: no core
PCI: Fixing up bus 0
Linux NET4.0 for Linux 2.4
Based upon Swansea University Computer Society NET3.039
Initializing RT netlink socket
Starting kswapd
Registering mini_fo version $Id$
devfs: v1.12c (20020818) Richard Gooch (rgooch@atnf.csiro.au)
devfs: boot_options: 0x1
JFFS2 version 2.1. (C) 2001 Red Hat, Inc., designed by Axis Communications AB.
squashfs: version 3.0 (2006/03/15) Phillip Lougher
pty: 256 Unix98 ptys configured
Serial driver version 5.05c (2001-07-08) with MANY_PORTS SHARE_IRQ SERIAL_PCI enabled
ttyS00 at 0xb8000300 (irq = 3) is a 16550A
ttyS01 at 0xb8000400 (irq = 3) is a 16550A
b44.c:v0.93 (Mar, 2004)
PCI: Setting latency timer of device 00:01.0 to 64
eth0: Broadcom 47xx 10/100BaseT Ethernet 00:1e:10:23:a4:fc
Physically mapped flash: Found an alias at 0x400000 for the chip at 0x0
Physically mapped flash: Found an alias at 0x800000 for the chip at 0x0
Physically mapped flash: Found an alias at 0xc00000 for the chip at 0x0
Physically mapped flash: Found an alias at 0x1000000 for the chip at 0x0
Physically mapped flash: Found an alias at 0x1400000 for the chip at 0x0
Physically mapped flash: Found an alias at 0x1800000 for the chip at 0x0
Physically mapped flash: Found an alias at 0x1c00000 for the chip at 0x0
 Amd/Fujitsu Extended Query Table v1.3 at 0x0040
Physically mapped flash: Swapping erase regions for broken CFI table.
number of CFI chips: 1
cfi_cmdset_0002: Disabling fast programming due to code brokenness.
Flash device: 0x400000 at 0x1c000000
bootloader size: 262144
Physically mapped flash: Filesystem type: squashfs, size=0x181cc9
Creating 5 MTD partitions on &quot;Physically mapped flash&quot;:
0x00000000-0x00040000 : &quot;cfe&quot;
0x00040000-0x003f0000 : &quot;linux&quot;
0x000bb000-0x00240000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-only
0x003f0000-0x00400000 : &quot;nvram&quot;
0x00240000-0x003f0000 : &quot;rootfs_data&quot;
Initializing Cryptographic API
NET4: Linux TCP/IP 1.0 for NET4.0
IP Protocols: ICMP, UDP, TCP, IGMP
IP: routing cache hash table of 512 buckets, 4Kbytes
TCP: Hash tables configured (established 2048 bind 4096)
NET4: Unix domain sockets 1.0/SMP for Linux NET4.0.
NET4: Ethernet Bridge 008 for NET4.0
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Mounted root (squashfs filesystem) readonly.
Mounted devfs on /dev
Freeing unused kernel memory: 84k freed
Algorithmics/MIPS FPU Emulator v1.5
diag: Router model not detected.
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
roboswitch: Probing device eth0: found!
mini_fo: using base directory: /
mini_fo: using storage directory: /jffs
jffs2.bbc: SIZE compression mode activated.
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
SCSI subsystem driver Revision: 1.00
eth0.0: add 01:00:5e:00:00:01 mcast address to master interface
eth0.0: dev_set_promiscuity(master, 1)
device eth0 entered promiscuous mode
device eth0.0 entered promiscuous mode
br-lan: port 1(eth0.0) entering learning state
br-lan: port 1(eth0.0) entering forwarding state
br-lan: topology change detected, propagating
usb.c: registered new driver usbdevfs
usb.c: registered new driver hub
PCI: Setting latency timer of device 00:05.0 to 64
PCI/DMA
wl0: wlc_attach: chiprev 3 coreunit 0 corerev 13 cccap 0x104007ea maccap 0x30482205 band 2.4G, phy_type 5 phy_rev 0 ana_rev 6
wl0: Broadcom BCM4318 802.11 Wireless Controller 4.150.10.5
CSLIP: code copyright 1989 Regents of the University of California
PPP generic driver version 2.4.2
ip_tables: (C) 2000-2002 Netfilter core team
ip_conntrack version 2.1 (5953 buckets, 5953 max) - 360 bytes per conntrack
SB USB20H init
SB COREREV: 2
SB USB20H resetting
USB20H fcr: 0x64
USB20H shim cr: 0x8f7
PCI: Setting latency timer of device 00:03.0 to 64
usb-ohci.c: USB OHCI at membase 0xb8003000, IRQ 6
usb-ohci.c: usb-00:03.0, PCI device 14e4:471a
usb.c: new USB bus registered, assigned bus number 1
hub.c: USB hub found
hub.c: 2 ports detected
uhci.c: USB Universal Host Controller Interface driver v1.1
SB USB20H init
SB COREREV: 2
USB20H fcr: 0x64
USB20H shim cr: 0x8f7
PCI: Setting latency timer of device 00:03.1 to 64
ehci_hcd 00:03.1: PCI device 14e4:471a
ehci_hcd 00:03.1: irq 6, pci mem b8003800
usb.c: new USB bus registered, assigned bus number 2
ehci_hcd 00:03.1: illegal capability!
ehci_hcd 00:03.1: USB 0.0 enabled, EHCI 1.00, driver 2003-Dec-29/2.4
hub.c: USB hub found
hub.c: 2 ports detected
usb.c: registered new driver serial
usbserial.c: USB Serial support registered for Generic
usbserial.c: USB Serial Driver core v1.4
hub.c: connect-debounce failed, port 1 disabled
Initializing USB Mass Storage driver...
usb.c: registered new driver usb-storage
USB Mass Storage support registered.
hub.c: new USB device 00:03.0-1, assigned address 2
usbserial.c: Generic converter detected
usbserial.c: Generic converter now attached to ttyUSB0 (or usb/tts/0 for devfs)
usbserial.c: Generic converter detected
usbserial.c: Generic converter now attached to ttyUSB1 (or usb/tts/1 for devfs)
usbserial.c: Generic converter detected
usbserial.c: Generic converter now attached to ttyUSB2 (or usb/tts/2 for devfs)
device wl0 entered promiscuous mode
wl0: attempt to add interface with same source address.
br-lan: port 2(wl0) entering learning state
br-lan: port 2(wl0) entering forwarding state
br-lan: topology change detected, propagating</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:~# ifconfig
br-lan    Link encap:Ethernet  HWaddr 00:1E:10:23:A4:FC
          inet addr:192.168.1.1  Bcast:192.168.1.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:4858 errors:0 dropped:0 overruns:0 frame:0
          TX packets:5393 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:784082 (765.7 KiB)  TX bytes:3774764 (3.5 MiB)

eth0      Link encap:Ethernet  HWaddr 00:1E:10:23:A4:FC
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:87 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 B)  TX bytes:10687 (10.4 KiB)
          Interrupt:4

eth0.0    Link encap:Ethernet  HWaddr 00:1E:10:23:A4:FC
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:87 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:0 (0.0 B)  TX bytes:10201 (9.9 KiB)

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:6 errors:0 dropped:0 overruns:0 frame:0
          TX packets:6 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:318 (318.0 B)  TX bytes:318 (318.0 B)

ppp0      Link encap:Point-to-Point Protocol
          inet addr:10.123.31.175  P-t-P:10.64.64.64  Mask:255.255.255.255
          UP POINTOPOINT RUNNING NOARP MULTICAST  MTU:1500  Metric:1
          RX packets:3596 errors:0 dropped:0 overruns:0 frame:0
          TX packets:3618 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:3
          RX bytes:2190302 (2.0 MiB)  TX bytes:721326 (704.4 KiB)

wl0       Link encap:Ethernet  HWaddr 00:1E:10:23:A4:FC
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:4857 errors:0 dropped:0 overruns:0 frame:81
          TX packets:5475 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:852074 (832.1 KiB)  TX bytes:3827869 (3.6 MiB)
          Interrupt:2 Base address:0x5000</code></pre></div><p>On PC (lan) ping to 192.168.1.1 not response&nbsp; (wifi it&#039;s ok).</p><br /><p>Help me ;-)</p>											<p class="post-edited">(Last edited by <strong>Irek</strong> on 10 Sep 2009, 09:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p93969">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Irek</div>
					<div class="post-datetime">
						9 Sep 2009, 23:40					</div>
				</div>
				<div class="post-content content">
					<p>Problem resolved.<br />Lan - port &quot;0&quot; ;-)</p><div class="codebox"><pre><code>root@OpenWrt:~# cat /etc/config/network
#### VLAN configuration
config switch eth0
        option vlan0    &quot;0 5&quot;
        #option vlan1   &quot;1 2 3 4 5*&quot;


#### Loopback configuration
config interface loopback
        option ifname   &quot;lo&quot;
        option proto    static
        option ipaddr   127.0.0.1
        option netmask  255.0.0.0


#### LAN configuration
config interface lan
        option type     bridge
        option ifname   &quot;eth0.0&quot;
        option proto    static
        option ipaddr   192.168.1.1
        option netmask  255.255.255.0


#### 3G/UMTS configuration
config interface wan
        option ifname   &#039;ppp0&#039;
        option proto    &#039;3g&#039;
        option device   &#039;/dev/usb/tts/0&#039;
        option apn      &#039;internet&#039;</code></pre></div>											<p class="post-edited">(Last edited by <strong>Irek</strong> on 10 Sep 2009, 09:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94724">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">dragongc</div>
					<div class="post-datetime">
						21 Sep 2009, 13:22					</div>
				</div>
				<div class="post-content content">
					<p>Hi Irek,<br />Could you tell me what method have you used to put openwrt on D100 (Wiki).<br />Cheers<br />Gregory</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94726">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Irek</div>
					<div class="post-datetime">
						21 Sep 2009, 14:22					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dragongc wrote:</cite><blockquote><p>Hi Irek,<br />Could you tell me what method have you used to put openwrt on D100 (Wiki).<br />Cheers<br />Gregory</p></blockquote></div><p>Via the console port and tftp server.<br /><a href="http://oldwiki.openwrt.org/OpenWrtDocs%282f%29Hardware%282f%29Huawei%282f%29D100.html">http://oldwiki.openwrt.org/OpenWrtDocs% … 9D100.html</a></p><br /><p>Irek</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94735">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">dragongc</div>
					<div class="post-datetime">
						21 Sep 2009, 16:27					</div>
				</div>
				<div class="post-content content">
					<p>What is port speed to console<br />Have you used UART-to-USB or any other UART converter<br />Did you connect TX and RX only or any other pins</p><p>Irek could you contact with me on prvi ?? I have send you message but you did not respond.<br />Thank you in advance.<br />Cheers<br />Gregory</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98383">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">gugs</div>
					<div class="post-datetime">
						6 Dec 2009, 16:25					</div>
				</div>
				<div class="post-content content">
					<p>same problem: how to put openwrt on D100: which interface to use (com port?), how to cable it?, unsing any GND pin? hyperterminal to use? which settings of hyperterminal?</p><p>Thanks, Jürgen</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98446">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">dragongc</div>
					<div class="post-datetime">
						7 Dec 2009, 16:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Irek wrote:</cite><blockquote><p>Port configuration 8N1 , speed 115200<br />I have connected RX,TX and GND of course (to pink wire).</p></blockquote></div><p>Sorry I do not know it this is correct. I dont have enought time to play with this router.<br />Cheers<br />Gregory</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p105072">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">notinthisworld</div>
					<div class="post-datetime">
						23 Mar 2010, 12:04					</div>
				</div>
				<div class="post-content content">
					<p>any chance we can install openwrt using wget and write command? thanks</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>