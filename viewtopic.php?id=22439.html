<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Failure to reflash wrt54gr</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p96961">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">doug80638</div>
					<div class="post-datetime">
						6 Nov 2009, 08:30					</div>
				</div>
				<div class="post-content content">
					<p>I have read webpages old and new for weeks now and can&#039;t find a workable answer. While there is no shortage of help and explanations out there, none seem to fit my current situation. I hope someone can help.</p><p>I was able to flash the router from factory to KAMIKAZE (8.09, r14511, openwrt-rdc-jffs2-64k-ar525w-web.img) using tftp from Windows XP, and then pressing the reset button on the router. The router works. </p><p>I&#039;ve also managed to install the Kamikazi webif which I find a big improvement over LuCI.</p><p>I&#039;d like to reflash the router to the squashfs version, but am unable to do so. I&#039;ve tried to repeat the tftp steps that worked the first time, but the connections now only timeout.</p><p>Best I can tell, I should have found a way to set boot_wait before doing the first flash. I did not do this.</p><p>I can log into root on the router using putty, but nvram commands don&#039;t appear to be enabled.<br />Creating a serial connection to the console is not possible.</p><p>I need instructions on how to either set boot_wait after the fact, or find the set of steps that would allow me to reflash the router without boot_wait given the current situation.</p><p>Any clues would be greatly appreciated.</p><p>Thanks,</p><p>Doug.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p151691">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">EvilRedHorse</div>
					<div class="post-datetime">
						21 Dec 2011, 12:50					</div>
				</div>
				<div class="post-content content">
					<p>This is a good forum thread on flashing the WRT54GR:</p><p><a href="https://forum.openwrt.org/viewtopic.php?pid=147957">https://forum.openwrt.org/viewtopic.php?pid=147957</a></p><br /><p>You can use the serial schematic below to interface with your WRT54GR:</p><p><a href="http://wiki.openwrt.org/doku.php?id=oldwiki:openwrtdocs:hardware:airlink101:ar525w">http://wiki.openwrt.org/doku.php?id=old … 101:ar525w</a></p><p>In short:<br />1) You cannot use the web interface for flashing<br />2) You cannot use sysupgrade for flashing<br />3) You cannot use the usual tftp for flashing<br />4) You cannot use mtd for flashing </p><p>You need to connect with a serial interface, ctrl+c to stop at the bootloader during boot, tftpd to start the tftp daemon, then tftp your new image.</p><p>Part of the problem is that the NVRAM function is not built into Kernel 2.6 yet but you will also notice the mtd&#039;s &#039;cat /proc/mtd&#039; are not the same as with Kernel 2.4.</p><p>I have also tried without success the RDC Loader (32-bit) program for the 6-pin JTAG interface - you seem to need a special JTAG cable to enable JTAG mode during boot.</p><p>One more note: you should be flashing back to the stock firmware -&nbsp; <br /><a href="http://homedownloads.cisco.com/downloads/firmware/1224638333733/WRT54GR_v1.01_11112005.bin">http://homedownloads.cisco.com/download … 112005.bin</a><br />If you want to use the OpenWRT .img file you will need to strip the beginning of the img with a hex editor so that it begins with &quot;GMTK&quot;<br />AND you will need to update the Checksum offset so that the checksum does not fail (I don&#039;t know how to do this yet).</p>											<p class="post-edited">(Last edited by <strong>EvilRedHorse</strong> on 21 Dec 2011, 12:58)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>