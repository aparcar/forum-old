<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> LinkSys WRT160n</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 21 Apr 2018 and 29 Apr 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 3 of 3</div><nav><ul><li><a href="viewtopic.php%3Fid=15321&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=15321&amp;p=2.html">2</a></li><li class="pagination-current"><span>3</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p96352">
				<div class="post-metadata">
					<div class="post-num">Post #51</div>
					<div class="post-author">carcinoma</div>
					<div class="post-datetime">
						25 Oct 2009, 10:42					</div>
				</div>
				<div class="post-content content">
					<p>currently i have a wrt160n v2 here and i had bought an alix 2d2 to replace it.</p><p>does the openwrt team already have an wrt160n v2 or can i contribute my?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p96362">
				<div class="post-metadata">
					<div class="post-num">Post #52</div>
					<div class="post-author">noobs</div>
					<div class="post-datetime">
						25 Oct 2009, 16:18					</div>
				</div>
				<div class="post-content content">
					<p>Does the new kamikaze support this device at v1?<br />I would like to have openwrt running on my v1.0 but i also want my n standard to work on it, being on of the main reason why i bought it.</p>											<p class="post-edited">(Last edited by <strong>noobs</strong> on 25 Oct 2009, 16:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p97344">
				<div class="post-metadata">
					<div class="post-num">Post #53</div>
					<div class="post-author">tpwn3r</div>
					<div class="post-datetime">
						13 Nov 2009, 22:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>bigon wrote:</cite><blockquote><p>I&#039;ve compiled karmic 8.09.1 with the patch for diag and enabled 8bits bus but unfortunately wifi doesn&#039;t work anymore.. any idea?</p></blockquote></div><p>I&#039;ve noticed that If you pick the wrong wireless driver it will not work.<br />Check dmesg on the router and see what it says about the wireless.<br />Then try changing the wireless kernel module in the build configuration menus. <br />I dont remember exactly which one it needs.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p116992">
				<div class="post-metadata">
					<div class="post-num">Post #54</div>
					<div class="post-author">DorianGrey</div>
					<div class="post-datetime">
						13 Sep 2010, 00:39					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>sala wrote:</cite><blockquote><p>RobertD, did you find something about tftp?</p><p>Belkin also has some problems with tftp. It just broadcasts question &quot;who has server ip&quot; but it never read any answers what was sent back to it. Same thing in all ports.<br /></p><div class="codebox"><pre><code>234    657.543202    00:aa:bb:cc:dd:18    Broadcast    ARP    Who has 10.10.10.3?  Tell 10.10.10.123
235    657.543225    AbitComp_4e:06:e4    00:aa:bb:cc:dd:18    ARP    10.10.10.3 is at 00:50:8d:4e:06:e4
236    662.532146    00:aa:bb:cc:dd:18    Broadcast    ARP    Who has 10.10.10.3?  Tell 10.10.10.123
237    662.532165    AbitComp_4e:06:e4    00:aa:bb:cc:dd:18    ARP    10.10.10.3 is at 00:50:8d:4e:06:e4</code></pre></div><div class="codebox"><pre><code>U-Boot 1.1.3 (Jun 12 2008 - 15:40:46)

Board: RT2880 DRAM:  32 MB

relocate_code Pointer at: 8bfa8000

 twe0 set to &lt;NULL&gt;

 toe0 set to &lt;NULL&gt;

flash_protect ON: from 0xBC400000 to 0xBC424D03

protect on 71

protect on 72

protect on 73

flash_protect ON: from 0xBC430000 to 0xBC43FFFF

protect on 74

*** Warning - bad CRC, using default environment

============================================ 

Ralink UBoot Version: 2.0

-------------------------------------------- 

ASIC 2880_MP (MAC to GigaMAC Mode)

DRAM COMPONENT: 128Mbits 

DRAM BUS: 32BIT 

Total memory: 32Mbytes

Date:Jun 12 2008  Time:15:40:46

============================================ 

 D-CACHE set to 4 way 

 I-CACHE set to 4 way 

 ##### The CPU freq = 266 MHZ #### 

 SDRAM bus set to 32 bit 

 SDRAM size =32 Mbytes

Please choose the operation: 

   1: Load system code to SDRAM via TFTP. 

   2: Load system code then write to Flash via TFTP. 

   3: Boot system code via Flash (default).

   4: Entr boot command line interface.

   5: Load ucos code to SDRAM via TFTP. 

You choosed 1

 0 

Net:   

 eth_register  

Eth0 (10/100-M)

 enetvar=ethaddr,Eth addr:00:AA:BB:CC:DD:18

 00:AA:BB:CC:DD:18:

 eth_current-&gt;name = Eth0 (10/100-M)

   

1: System Load Linux to SDRAM via TFTP. 

 Please Input new ones /or Ctrl-C to discard

Input device IP (10.10.10.123) ==:111111111111111111                  

Input server IP (10.10.10.3) ==:

Input Linux Kernel filename () ==:/tftproot/image.bin

 netboot_common, argc= 3 

 *************buf = 0x8bfcce80

 **********NexTxPacket = 8bfe4f40

 NetTxPacket = 0x8BFE4F40 

 NetRxPackets[0] = 0x8BFE5540

 NetRxPackets[1] = 0x8BFE5B40

 NetRxPackets[2] = 0x8BFE6140

 NetRxPackets[3] = 0x8BFE6740

 NetRxPackets[4] = 0x8BFE6D40

 NetRxPackets[5] = 0x8BFE7340

 NetRxPackets[6] = 0x8BFE7940

 NetRxPackets[7] = 0x8BFE7F40

 NetRxPackets[8] = 0x8BFE8540

 NetRxPackets[9] = 0x8BFE8B40

 NetRxPackets[10] = 0x8BFE9140

 NetRxPackets[11] = 0x8BFE9740

 NetRxPackets[12] = 0x8BFE9D40

 NetRxPackets[13] = 0x8BFEA340

 NetRxPackets[14] = 0x8BFEA940

 NetRxPackets[15] = 0x8BFEAF40

 NetRxPackets[16] = 0x8BFEB540

 NetRxPackets[17] = 0x8BFEBB40

 NetRxPackets[18] = 0x8BFEC140

 NetRxPackets[19] = 0x8BFEC740

 KSEG1ADDR(NetTxPacket) = 0xABFE4F40 

 NetLoop,call eth_halt ! 

 STOP_RT2880_ETH 

 NetLoop,call eth_init ! 

Trying Eth0 (10/100-M)

 Waitting RT2880_RX_DMA_BUSY status Start... done

 Mac to giga Mac mode  

 rx_ring = ABFCD2A0, tx_ring0 = ABFCD160

 Header Payload scatter function is Disable !! 

 RT2880_PDMA_GLO_CFG=00000020 

 ************************************************* 

 RT2880_RX_CALC_IDX0=19 

 RT2880_RX_DRX_IDX0 = 0 

 ************************************************* 

 ETH_STATE_ACTIVE!! 

Using Eth0 (10/100-M) device

TFTP from server 10.10.10.3; our IP address is 10.10.10.123

Filename &#039;/tftproot/image.bin&#039;.

 TIMEOUT_COUNT=10,Load address: 0x8a800000

Loading: *

ArpTimeoutCheck 

T T T T T T T T T T 

Retry count exceeded; starting again</code></pre></div></blockquote></div><p>had the same problem, because I was never getting it the first time right after plugging in to the power source. I was usually doing a &quot;reboot&quot; then hit &quot;1&quot; key so it was always after a manual reboot, not right after router was plugged in.<br />So what I did was, madly hit key 1 before and meanwhile I was plugging the router&#039;s power cord and hence I got the first uboot screen and apparently it worked<br /></p><div class="codebox"><pre><code>Trying Eth0 (10/100-M)


 ETH_STATE_ACTIVE!! 

*** Warning: no boot file name; using &#039;test.bin&#039;

Using Eth0 (10/100-M) device

TFTP from server 192.168.2.123; our IP address is 192.168.2.1

Filename &#039;test.bin&#039;.


 TIMEOUT_COUNT=10,Load address: 0x80800000

Loading: *Got ARP REPLY, set server/gtwy eth addr (00:07:eb:72:df:1f)

Got it

T #

 first block received  

################################################################

 #################################################################

 #################################################################

 #################################################################

 #################################################################

 #################################################################

 #################################################################

 #################################################################

 #################################################################

 ###########################################Got ARP REQUEST, return our IP

######################

 #################################################################

 #################################################################

 #################################################################

 #################################################################

 #################################################################

 #################################################################

 #################################################################

 #################################################################

 #################################################################

 #########################

done

Bytes transferred = 6447123 (626013 hex)

NetBootFileXferSize= 00626013

Automatic boot of image at addr 0x80800000 ...

## Booting image at 80800000 ...

Bad Magic Number,B118A139</code></pre></div><p>the bin was bad &#039;cause it was the provided firmware, not yet sure which one it needs, will figure it out later...<br />EDIT: Oh and after the above, it did a reboot and booted normally and then I did a reboot and &quot;1&quot; again and it would just sit there again in timeouts:<br /></p><div class="codebox"><pre><code> ETH_STATE_ACTIVE!!
*** Warning: no boot file name; using &#039;test.bin&#039;
Using Eth0 (10/100-M) device
TFTP from server 192.168.2.123; our IP address is 192.168.2.1
Filename &#039;test.bin&#039;.

 TIMEOUT_COUNT=10,Load address: 0x80800000
Loading: *
ArpTimeoutCheck
T T T T T T T T T T
Retry count exceeded; starting again
Trying Eth0 (10/100-M)

 ETH_STATE_ACTIVE!!

ArpTimeoutCheck

ArpTimeoutCheck
*** Warning: no boot file name; using &#039;test.bin&#039;
Using Eth0 (10/100-M) device
TFTP from server 192.168.2.123; our IP address is 192.168.2.1
Filename &#039;test.bin&#039;.

 TIMEOUT_COUNT=10,Load address: 0x80800000
Loading: *
ArpTimeoutCheck
T T</code></pre></div><p>Conclusion, must hit &quot;1&quot; right when the router is plugged in to the power source, the first uboot must be caught <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />Peace!</p>											<p class="post-edited">(Last edited by <strong>DorianGrey</strong> on 13 Sep 2010, 00:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p117730">
				<div class="post-metadata">
					<div class="post-num">Post #55</div>
					<div class="post-author">ihotua</div>
					<div class="post-datetime">
						23 Sep 2010, 06:31					</div>
				</div>
				<div class="post-content content">
					<p>Hello.&nbsp; I&#039;m posting to this thread because it seems to be the largest one dealing with the 160n.</p><p>We&#039;ve been developing programs for use with OpenWRT.&nbsp; We&#039;ve been using the 54GL, but recently we got a 160Nv3.&nbsp; I&#039;d like to help getting this router supported.&nbsp; I can code, write docs, and test, and I work with people who do the electrical work.</p><p>I just wanted to say that I hope everyone has seen this:</p><p><a href="http://ldn.linuxfoundation.org/blog-entry/good-news-linux-users-from-broadcom">http://ldn.linuxfoundation.org/blog-ent … m-broadcom</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118824">
				<div class="post-metadata">
					<div class="post-num">Post #56</div>
					<div class="post-author">68040</div>
					<div class="post-datetime">
						11 Oct 2010, 02:53					</div>
				</div>
				<div class="post-content content">
					<p>I have a WRT160nV3 with working serial console. Let me tell you, I have had more fun than soldering CAT5 solid core to the undrilled test points for serial console!</p><p>I have a copy of the Linksys stock dmesg, and I have been trying to flash it with a couple of different open source firmwares. Only DD-WRT has worked.</p><p>I am creating a WRT160nv3 thread with the Linksys dmesg, so we can avoid cluttering this one.<br />I will detail what I have found so far therein.</p><p>Thx<br />68040</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118826">
				<div class="post-metadata">
					<div class="post-num">Post #57</div>
					<div class="post-author">68040</div>
					<div class="post-datetime">
						11 Oct 2010, 03:03					</div>
				</div>
				<div class="post-content content">
					<p>V3 thread here:<br /><a href="https://forum.openwrt.org/viewtopic.php?id=26896">https://forum.openwrt.org/viewtopic.php?id=26896</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210986">
				<div class="post-metadata">
					<div class="post-num">Post #58</div>
					<div class="post-author">tc424</div>
					<div class="post-datetime">
						27 Aug 2013, 23:31					</div>
				</div>
				<div class="post-content content">
					<p>I just wanted to note here that trunk snapshots seem to have WRT160Nv3 support now:</p><p>downloads.openwrt.org/snapshots/trunk/brcm47xx/openwrt-wrt160n_v3-squashfs.bin</p><p>Other relevant topics:</p><p><a href="https://forum.openwrt.org/viewtopic.php?id=44045">https://forum.openwrt.org/viewtopic.php?id=44045</a><br /><a href="https://forum.openwrt.org/viewtopic.php?id=39581">https://forum.openwrt.org/viewtopic.php?id=39581</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p238942">
				<div class="post-metadata">
					<div class="post-num">Post #59</div>
					<div class="post-author">Noi</div>
					<div class="post-datetime">
						2 Jul 2014, 21:51					</div>
				</div>
				<div class="post-content content">
					<p>Hello. For anybody tired of having to solder&amp;unsolder the serial port: a couple years ago I figured out why the flash wasn&#039;t working (the flash command -mem parameter wasn&#039;t detected correctly) and made a little guide to help patching the CFE. Along with that fix I added two other small tweaks: boot_wait always on and -noheader instead of -ctheader so you can recover directly with OPENWRT images without reflashing original firmwares. With those fixes the WRT160n becomes one of the most easily recoverable routers, you only have to turn it on with the reset button pressed and send the image with TFTP.</p><p>I&#039;ve already patched two WRT160N v1.1 without issues however use it at your own risk since flashing the CFE is always a risky process. I posted the guide here: <a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?p=729764">http://www.dd-wrt.com/phpBB2/viewtopic.php?p=729764</a> . It would be amazing if somebody could also add it to the wiki page.</p>											<p class="post-edited">(Last edited by <strong>Noi</strong> on 2 Jul 2014, 21:52)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 3 of 3</div><nav><ul><li><a href="viewtopic.php%3Fid=15321&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=15321&amp;p=2.html">2</a></li><li class="pagination-current"><span>3</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>