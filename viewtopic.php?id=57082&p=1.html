<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> openwrt noob... captive portal?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 13 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=57082&amp;p=2.html">2</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p274446">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">tkintenn</div>
					<div class="post-datetime">
						29 Apr 2015, 16:58					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m a small IT integrator that typically supports small business. I have a client that wants a guest wifi where they accept a terms of use (they&#039;re not collecting information but are adamant they have a terms of use acceptance). </p><p>I have no experience with captive portals and a box solution from cisco, or anyone else is out of the question. They also don&#039;t want a cloud solution. So I&#039;ve found that openwrt acts like a full blown linux on a router (depending on model) with the ability to use a package manager and install software. </p><p>1. Does anyone have a successfully running openwrt captive portal solution?&nbsp; <br />What hardware is it running on?&nbsp; What is the software you&#039;re using? I really like the idea of housing it all on the router, if that&#039;s possible. I also need to be able to make the initial welcome screen customized, or atleast access the html or php to customize it. </p><p>2. Some of the projects I&#039;ve found seem to be dead? I&#039;m ok with that as long as it wasn&#039;t that a long ago it stopped. Wifidog&#039;s forums most recent entry was 3 years ago? Is it an issue to use it? Very curious why so many promising OSS captive portal solutions stopped or went abandoned. Does anyone know?</p><p>I&#039;m looking forward to this project as it will expose me to new tech.&nbsp; Any assistance is greatly appreciated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274456">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">augustus_meyer</div>
					<div class="post-datetime">
						29 Apr 2015, 18:00					</div>
				</div>
				<div class="post-content content">
					<p>google for &quot;coova-chilli&quot;. However, quite some docs on the web are outdated, so be careful here.<br />In case, you can read the C-code, you are well-off.</p><p>Otherwsie, some support for coova in mailing list. Or linkedin.<br />You can find me on both :-)<br />I do SW for hotspots, incl. social auth, using coova-chilli. <br />HW for coova: Any OpenWrt, but for a beginner (or as a development machine), Western Digital N600 MyNet is a good choice, because very easy to flash, in case, something went wrong.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274460">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">tkintenn</div>
					<div class="post-datetime">
						29 Apr 2015, 18:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>augustus_meyer wrote:</cite><blockquote><p>google for &quot;coova-chilli&quot;. However, quite some docs on the web are outdated, so be careful here.<br />In case, you can read the C-code, you are well-off.</p><p>Otherwsie, some support for coova in mailing list. Or linkedin.<br />You can find me on both :-)<br />I do SW for hotspots, incl. social auth, using coova-chilli. <br />HW for coova: Any OpenWrt, but for a beginner (or as a development machine), Western Digital N600 MyNet is a good choice, because very easy to flash, in case, something went wrong.</p></blockquote></div><p>the price point on that is attractive... decent range? </p><p>I&#039;ve looked at the coova-chilli but it seems to be abandoned? Last updated 2012?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274511">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">tkintenn</div>
					<div class="post-datetime">
						29 Apr 2015, 23:13					</div>
				</div>
				<div class="post-content content">
					<p>Does anyone have a wifidog and authpuppy functioning? What hardware is it on?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274566">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">yapoo</div>
					<div class="post-datetime">
						30 Apr 2015, 09:28					</div>
				</div>
				<div class="post-content content">
					<p>I think wifidog ang authpuppy are over spec for your needs.<br />Nodogsplash is fit for your demand.<br /><a href="https://github.com/openwrt-routing/packages">https://github.com/openwrt-routing/packages</a><br /><a href="https://github.com/openwrt-routing/packages/tree/master/nodogsplash">https://github.com/openwrt-routing/pack … odogsplash</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274588">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">tkintenn</div>
					<div class="post-datetime">
						30 Apr 2015, 15:10					</div>
				</div>
				<div class="post-content content">
					<p>nodogsplash looks to be a great fit! I ran across it yesterday afternoon and it looks like it&#039;s active!</p><p>What hardware do you recommend?&nbsp; I know in my dealings with DD-WRT certain hardware didn&#039;t accomodate all options offered because of limitations in ram and cpu. I&#039;ve had great success with TP-Link and Netgear routers on DD-WRT. </p><p>Or does someone have a successful instance of nodogsplash on openwrt?</p><p>Reason I ask is I&#039;m very intrigued and will probably buy two of whatever i get <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274718">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">atom</div>
					<div class="post-datetime">
						1 May 2015, 10:22					</div>
				</div>
				<div class="post-content content">
					<p>I ran nodogsplash a few years ago on minimal hardware, 8MB flash, 16MB RAM.&nbsp; I&#039;m reasonably confident you should also be able to fit it into a 4MB flash, 8MB RAM device.&nbsp; There really aren&#039;t any significant requirements; worked great at the time for a similar requirement.</p><p>If you want to continue along the Coova-chilli route, which offers a few more advanced features such as rate limiting, per-user/device limits etc., you should look at something like RADIUSdesk which uses Coova-chilli as part of a more comprehensive solution.&nbsp; Having Coova-chilli without the ability to maintain a user list with RADIUS authentication or issue vouchers is a bit like having a car without an engine.</p><p>There is also OpenWISP (which I&#039;ve not worked with) which seems to be quite ambitious and actively maintained.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274773">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">yapoo</div>
					<div class="post-datetime">
						1 May 2015, 18:43					</div>
				</div>
				<div class="post-content content">
					<p>Hi.<br />I recommend ar7161 devices, for example, wzr-hp-ag300h or WZR-600DHP.<br /><a href="https://wikidevi.com/wiki/Buffalo_WZR-HP-AG300H">https://wikidevi.com/wiki/Buffalo_WZR-HP-AG300H</a><br /><a href="https://wikidevi.com/wiki/Buffalo_WZR-600DHP">https://wikidevi.com/wiki/Buffalo_WZR-600DHP</a><br />They are good spec relatively and stable enough. Stability is important for business client. isn&#039;t it? :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274780">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">probono</div>
					<div class="post-datetime">
						1 May 2015, 19:51					</div>
				</div>
				<div class="post-content content">
					<p>I am running a captive portal on a TP-Link TL-WR710N using <a href="https://github.com/probonopd/minikrebs/tree/master/traits/network/captive">https://github.com/probonopd/minikrebs/ … rk/captive</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274800">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">tkintenn</div>
					<div class="post-datetime">
						1 May 2015, 23:25					</div>
				</div>
				<div class="post-content content">
					<p>I ordered a TP WDR4300, i&#039;ve always had great luck with those and Netgear WNDR4300.... odd they&#039;re so similar in spec. </p><p>It&#039;s listed as v14 on the hardware table. Very excited to get and try out this little project.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274879">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">augustus_meyer</div>
					<div class="post-datetime">
						2 May 2015, 14:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>atom wrote:</cite><blockquote><p>If you want to continue along the Coova-chilli route, which offers a few more advanced features such as rate limiting, per-user/device limits etc., you should look at something like RADIUSdesk which uses Coova-chilli as part of a more comprehensive solution.</p></blockquote></div><p>I have no need for RADIUSdesk,&nbsp; having some knowledge of freeradius myself, and using &quot;Social Login&quot;.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p275526">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">tkintenn</div>
					<div class="post-datetime">
						7 May 2015, 04:51					</div>
				</div>
				<div class="post-content content">
					<p>Ok... i&#039;ve got the wdr4300, i have openwrt running on it. </p><p>yapoo, apologies I didn&#039;t see your hardware recommendation.&nbsp; I would have gone with that if I had. </p><p>Now I&#039;m following this: <a href="http://wiki.openwrt.org/doc/howto/wireless.hotspot.nodogsplash">http://wiki.openwrt.org/doc/howto/wirel … odogsplash</a></p><p>after opkg install nodogsplash, am i supposed to make the network and wireless configs look like what they have? Each of them seem to have those entries and some others. It&#039;s not a very detailed howto <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>This one (<a href="http://www.ediy.com.my/index.php/blog/item/110-setting-up-a-wireless-hotspot-using-tp-link-tl-mr3020-wireless-n-router">http://www.ediy.com.my/index.php/blog/i … s-n-router</a>) is more detailed but seems older.&nbsp; It also has you create an AP using the LAN and the how to on openwrt says the LAN is on the secured non-guests network.</p><p>Is there a better howto I haven&#039;t seen? I&#039;m wearing google out. </p><p>side note. Openwrt interface is MUCH nicer than DDWRT.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p275671">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">tkintenn</div>
					<div class="post-datetime">
						8 May 2015, 14:04					</div>
				</div>
				<div class="post-content content">
					<p>I have it setup, I can see in top that nodogsplash is running.&nbsp; However ndcsctl status says it&#039;s not running (Error: no such file or directory)</p><p>That&#039;s just weird. It&#039;s also not taking me to the splash page, it doesn&#039;t have an active connection to the internet right now. However, shouldn&#039;t it still load the splash page that&#039;s local to the device? I have a redirect url set as well. </p><p>Any suggestions? Do i need to post the configs?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p275675">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">yapoo</div>
					<div class="post-datetime">
						8 May 2015, 14:35					</div>
				</div>
				<div class="post-content content">
					<p>yes.<br />also /etc/config/network</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p275683">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">tkintenn</div>
					<div class="post-datetime">
						8 May 2015, 17:11					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>###### NETWORK #######

config interface &#039;loopback&#039;
        option ifname &#039;lo&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;127.0.0.1&#039;
        option netmask &#039;255.0.0.0&#039;

config globals &#039;globals&#039;
        option ula_prefix &#039;fd9f:301d:0923::/48&#039;

config interface &#039;lan&#039;
        option ifname &#039;eth0.1&#039;
        option force_link &#039;1&#039;
        option type &#039;bridge&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;192.168.1.1&#039;
        option netmask &#039;255.255.255.0&#039;
        option ip6assign &#039;60&#039;

config interface &#039;wifi&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;192.168.5.1&#039;
        option netmask &#039;255.255.255.0&#039;
        option _orig_ifname &#039;eth1.0 wlan0-1 wlan1&#039;
        option _orig_bridge &#039;true&#039;
        option ifname &#039;eth1.0&#039;
        option type &#039;bridge&#039;

config interface &#039;wan&#039;
        option ifname &#039;eth0.2&#039;
        option proto &#039;dhcp&#039;

config interface &#039;wan6&#039;
        option ifname &#039;@wan&#039;
        option proto &#039;dhcpv6&#039;

config switch
        option name &#039;switch0&#039;
        option reset &#039;1&#039;
        option enable_vlan &#039;1&#039;

config switch_vlan
        option device &#039;switch0&#039;
- /etc/config/network 1/51 1%


###### END NETWORK ########</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p275684">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">tkintenn</div>
					<div class="post-datetime">
						8 May 2015, 17:12					</div>
				</div>
				<div class="post-content content">
					<p>Nodogsplash.conf</p><div class="codebox"><pre><code>#
# Nodogsplash Configuration File
#

# Parameter: GatewayInterface
# Default: NONE
#
# GatewayInterface is not autodetected, has no default, and must be set here.
# Set GatewayInterface to the interface on your router
# that is to be managed by Nodogsplash.
# Typically br0 for the wired and wireless lan on OpenWrt White Russian.
# May be br-lan on OpenWrt Kamikaze.
#
GatewayInterface br-wifi

# FirewallRuleSet: authenticated-users
#
# Control access for users after authentication.
# These rules are inserted at the beginning of the
# FORWARD chain of the router&#039;s filter table, and
# apply to packets that have come in to the router
# over the GatewayInterface from MAC addresses that
# have authenticated with Nodogsplash, and that are
# destined to be routed through the router.  The rules are
# considered in order, and the first rule that matches
# a packet applies to it.
# If there are any rules in this ruleset, an authenticated
# packet that does not match any rule is rejected.
# N.B.: This ruleset is completely independent of
# the preauthenticated-users ruleset.
#
FirewallRuleSet authenticated-users {

 # You may want to open access to a machine on a local
 # subnet that is otherwise blocked (for example, to
 # serve a redirect page; see RedirectURL).  If so,
 # allow that explicitly here, e.g:
 #  FirewallRule allow tcp port 80 to 192.168.254.254

 # Your router may have several interfaces, and you
 # probably want to keep them private from the GatewayInterface.
 # If so, you should block the entire subnets on those interfaces, e.g.:
   # FirewallRule block to 192.168.0.0/16
   # FirewallRule block to 10.0.0.0/8

 # Typical ports you will probably want to open up include
 # 53 udp and tcp for DNS,
 # 80 for http,
 # 443 for https,
 # 22 for ssh:
   # FirewallRule allow tcp port 53    
   # FirewallRule allow udp port 53    
   # FirewallRule allow tcp port 80
   # FirewallRule allow tcp port 443
   # FirewallRule allow tcp port 22
     FirewallRule allow all

}
# end FirewallRuleSet authenticated-users


# FirewallRuleSet: preauthenticated-users
#
# Control access for users before authentication.
# These rules are inserted in the PREROUTING chain
# of the router&#039;s nat table, and in the
# FORWARD chain of the router&#039;s filter table.
# These rules apply to packets that have come in to the 
# router over the GatewayInterface from MAC addresses that
# are not on the BlockedMACList or TrustedMACList,
# are *not* authenticated with Nodogsplash.  The rules are
# considered in order, and the first rule that matches
# a packet applies to it. A packet that does not match 
# any rule here is rejected.
# N.B.: This ruleset is completely independent of
# the authenticated-users and users-to-router rulesets.
#
FirewallRuleSet preauthenticated-users {
 # For preauthenticated users to resolve IP addresses in their initial
 # request not using the router itself as a DNS server,
 # you probably want to allow port 53 udp and tcp for DNS.
    FirewallRule allow tcp port 53    
    FirewallRule allow udp port 53
 # For splash page content not hosted on the router, you
 # will want to allow port 80 tcp to the remote host here.
 # Doing so circumvents the usual capture and redirect of
 # any port 80 request to this remote host.
 # Note that the remote host&#039;s numerical IP address must be known
 # and used here.  
 #    FirewallRule allow tcp port 80 to 123.321.123.321
}
# end FirewallRuleSet preauthenticated-users


# FirewallRuleSet: users-to-router
#
# Control access to the router itself from the GatewayInterface.
# These rules are inserted at the beginning of the
# INPUT chain of the router&#039;s filter table, and
# apply to packets that have come in to the router
# over the GatewayInterface from MAC addresses that
# are not on the TrustedMACList, and are destined for
# the router itself.  The rules are
# considered in order, and the first rule that matches
# a packet applies to it. 
# If there are any rules in this ruleset, a
# packet that does not match any rule is rejected.
#
FirewallRuleSet users-to-router {
 # Nodogsplash automatically allows tcp to GatewayPort,
 # at GatewayAddress, to serve the splash page.
 # However you may want to open up other ports, e.g.
 # 53 for DNS and 67 for DHCP if the router itself is
 # providing these services.
    FirewallRule allow udp port 53    
    FirewallRule allow tcp port 53    
    FirewallRule allow udp port 67
 # You may want to allow ssh, http, and https to the router
 # for administration from the GatewayInterface.  If not,
 # comment these out.
    FirewallRule allow tcp port 22
    FirewallRule allow tcp port 80
    FirewallRule allow tcp port 443
}
# end FirewallRuleSet users-to-router

# EmptyRuleSetPolicy directives
# The FirewallRuleSets that NoDogSplash permits are:
#
# authenticated-users
# preauthenticated-users
# users-to-router
# trusted-users
# trusted-users-to-router
#
# For each of these, an EmptyRuleSetPolicy can be specified.
# An EmptyRuleSet policy applies to a FirewallRuleSet if the
# FirewallRuleSet is missing from this configuration file,
# or if it exists but contains no FirewallRules.
#
# The possible values of an EmptyRuleSetPolicy are:
# allow  -- packets are accepted
# block  -- packets are rejected
# passthrough -- packets are passed through to pre-existing firewall rules
#
# Default EmptyRuleSetPolicies are set as follows:
# EmptyRuleSetPolicy authenticated-users passthrough
# EmptyRuleSetPolicy preauthenticated-users block
# EmptyRuleSetPolicy users-to-router block
# EmptyRuleSetPolicy trusted-users allow
# EmptyRuleSetPolicy trusted-users-to-router allow


# Parameter: GatewayName
# Default: NoDogSplash
#
# Set  GatewayName to the name of your gateway.  This value
# will be available as variable $gatewayname in the splash page source
# and in status output from ndsctl, but otherwise doesn&#039;t matter.
# If none is supplied, the value &quot;NoDogSplash&quot; is used.
#
# GatewayName NoDogSplash

# Parameter: GatewayAddress
# Default: Discovered from GatewayInterface
#
# This should be autodetected on an OpenWRT system, but if not:
# Set GatewayAddress to the IP address of the router on
# the GatewayInterface.  This is the address that the Nodogsplash
# server listens on.
#
# GatewayAddress 192.168.1.1

# Parameter: ExternalInterface
# Default: Autodetected from /proc/net/route
#
# This should be autodetected on a OpenWRT system, but if not:
# Set ExtrnalInterface to the &#039;external&#039; interface on your router, 
# i.e. the one which provides the default route to the internet.
# Typically vlan1 for OpenWRT.
#
#ExternalInterface vlan1

# Parameter: RedirectURL
# Default: none
#
# After authentication, normally a user is redirected 
# to their initially requested page. 
# If RedirectURL is set, the user is redirected to this URL instead.
# 
RedirectURL [url]http://www.openwrt.org/[/url]

# Parameter: GatewayPort
# Default: 2050
#
# Nodogsplash&#039;s own http server uses GatewayAddress as its IP address.
# The port it listens to at that IP can be set here; default is 2050.
#
# GatewayPort 2050

# Parameter: MaxClients
# Default: 20
#
# Set MaxClients to the maximum number of users allowed to 
# connect at any time.  (Does not include users on the TrustedMACList,
# who do not authenticate.)
#
# MaxClients 20

# ClientIdleTimeout
# Parameter: ClientIdleTimeout
# Default: 10
#
# Set ClientIdleTimeout to the desired of number of minutes
# of inactivity before a user is automatically &#039;deauthenticated&#039;.
#
# ClientIdleTimeout 10

# Parameter: ClientForceTimeout
# Default: 360
#
# Set ClientForceTimeout to the desired number of minutes before
# a user is automatically &#039;deauthenticated&#039;, whether active or not
#
# ClientForceTimeout 360

# Parameter: AuthenticateImmediately
# Default: no
#
# Set to yes (or true or 1), to immediately authenticate users
# who make a http port 80 request on the GatewayInterface (that is,
# do not serve a splash page, just redirect to the user&#039;s request,
# or to RedirectURL if set).
#
# AuthenticateImmediately no

# Parameter: MACMechanism
# Default: block
#
# Either block or allow.
# If &#039;block&#039;, MAC addresses on BlockedMACList are blocked from
# authenticating, and all others are allowed.
# If &#039;allow&#039;, MAC addresses on AllowedMACList are allowed to
# authenticate, and all other (non-trusted) MAC&#039;s are blocked.
#
# MACMechanism block

# Parameter: BlockedMACList
# Default: none
#
# Comma-separated list of MAC addresses who will be completely blocked
# from the GatewayInterface.  Ignored if MACMechanism is allow.
# N.B.: weak security, since MAC addresses are easy to spoof.
#
# BlockedMACList 00:00:DE:AD:BE:EF,00:00:C0:1D:F0:0D

# Parameter: AllowedMACList
# Default: none
#
# Comma-separated list of MAC addresses who will not be completely
# blocked from the GatewayInterface.  Ignored if MACMechanism is block.
# N.B.: weak security, since MAC addresses are easy to spoof.
#
# AllowedMACList 00:00:12:34:56:78

# Parameter: TrustedMACList
# Default: none
#
# Comma-separated list of MAC addresses who are not subject to
# authentication, and are not restricted by any FirewallRuleSet.
# N.B.: weak security, since MAC addresses are easy to spoof.
#
# TrustedMACList 00:00:CA:FE:BA:BE, 00:00:C0:01:D0:0D


# Parameter: PasswordAuthentication
# Default: no
# Set to yes (or true or 1), to require a password matching
# the Password parameter to be supplied when authenticating.  
#
#
# PasswordAuthentication no

# Parameter: Password
# Default: none
# Whitespace delimited string that is compared to user-supplied
# password when authenticating.  
#
#
# Password nodog

# Parameter: UsernameAuthentication
# Default: no
# Set to yes (or true or 1), to require a username matching
# the Username parameter to be supplied when authenticating.  
#
#
# UsernameAuthentication no

# Parameter: Username
# Default: none
# Whitespace delimited string that is compared to user-supplied
# username when authenticating.  
#
#
# Username guest

# Parameter: PasswordAttempts
# Default: 5
# Integer number of failed password/username entries before
# a user is forced to reauthenticate.
#
#
# PasswordAttempts 5

# Parameter: TrafficControl
# Default: no
#
# Set to yes (or true or 1), to enable traffic control in Nodogsplash.
#
#TrafficControl yes

# Parameter: DownloadLimit
# Default: 0
#
# If TrafficControl is enabled, this sets the maximum download
# speed to the GatewayInterface, in kilobits per second.
# For example if you have an ADSL connection with 768 kbit
# download speed, and you want to allow about half of that
# bandwidth for the GatewayInterface, set this to 384.
# A value of 0 means no download limiting is done.
#
#DownloadLimit 2048

# Parameter: UploadLimit
# Default: 0
#
# If TrafficControl is enabled, this sets the maximum upload
# speed from the GatewayInterface, in kilobits per second.
# For example if you have an ADSL connection with 128 kbit
# upload speed, and you want to allow about half of that
# bandwidth for the GatewayInterface, set this to 64.
# A value of 0 means no upload limiting is done.
#
# UploadLimit 64

# Parameter: GatewayIPRange
# Default: 0.0.0.0/0
#
# By setting this parameter, you can specify a range of IP addresses
# on the GatewayInterface that will be responded to and managed by
# Nodogsplash.  Addresses outside this range do not have their packets
# touched by Nodogsplash at all.
# Defaults to 0.0.0.0/0, that is, all addresses.
#
 GatewayIPRange 192.168.5.1/24

# Parameter: ImagesDir
# Default: images
#
# Set the directory from which images are served.
# Use $imagesdir in HTML files to reference this directory.
#
# ImagesDir images

# Parameter: BinVoucher
# Default: None
#
# Enable Voucher Support.
# If set, an alphanumeric voucher HTTP parameter is accepted
# and passed to a command line call along with the clients MAC:
#
# $&lt;BinVoucher&gt; auth_voucher &lt;mac&gt; &lt;voucher&gt;
#
# BinVoucher must point to a program that will be called as described above.
# The call is expected to output the number of seconds the client
# is to be authenticated. Zero or negative seconds will cause the
# authentification request to be rejected.
# The output may contain a user specific download and upload limit in KBit/s:
# &lt;seconds&gt; &lt;download&gt; &lt;upload&gt;
#
# BinVoucher &quot;/bin/myauth&quot;

# Parameter: ForceVoucher
# Default: no
#
# Force the use of a voucher. Authentification is not possible without voucher.
#
# ForceVoucher no

# Parameter: EnablePreAuth
# Default: no
#
# Enable pre-authentication support.
# Pass the MAC of a client to a command line call before the splash page
# would be send:
#
# $&lt;BinVoucher&gt; auth_status &lt;mac&gt;
#
# The call is expected to output the number of seconds the client
# is to be authenticated. Zero or negative seconds will cause the
# splash page to be displayed.
# The output may contain a user specific download and upload limit in KBit/s:
# &lt;seconds&gt; &lt;download&gt; &lt;upload&gt;
#
# EnablePreAuth no
#### END NO DOG SPLASH  ####### </code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p275685">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">tkintenn</div>
					<div class="post-datetime">
						8 May 2015, 17:13					</div>
				</div>
				<div class="post-content content">
					<p>Wireless<br /></p><div class="codebox"><pre><code>######### WIRELESS  ###########

config wifi-device &#039;radio0&#039;
        option type &#039;mac80211&#039;
        option hwmode &#039;11g&#039;
        option path &#039;platform/ar934x_wmac&#039;
        option htmode &#039;HT20&#039;
        option txpower &#039;30&#039;
        option country &#039;US&#039;
        option channel &#039;auto&#039;

config wifi-device &#039;radio1&#039;
        option type &#039;mac80211&#039;
        option channel &#039;36&#039;
        option hwmode &#039;11a&#039;
        option path &#039;pci0000:00/0000:00:00.0&#039;
        option htmode &#039;HT20&#039;
        option txpower &#039;17&#039;
        option country &#039;US&#039;

config wifi-iface
        option device &#039;radio1&#039;
        option mode &#039;ap&#039;
        option ssid &#039;sitarguest&#039;
        option encryption &#039;none&#039;
        option network &#039;wifi&#039;

config wifi-iface
        option device &#039;radio0&#039;
        option mode &#039;ap&#039;
        option encryption &#039;none&#039;
        option ssid &#039;sitarguest&#039;
        option network &#039;wifi&#039;

######### WIRELESS  ###########</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p275686">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">tkintenn</div>
					<div class="post-datetime">
						8 May 2015, 17:13					</div>
				</div>
				<div class="post-content content">
					<p>DHCP <br /></p><div class="codebox"><pre><code>####### DHCP ########


config dnsmasq  
        option domainneeded &#039;1&#039;
        option boguspriv &#039;1&#039;
        option filterwin2k &#039;0&#039;
        option localise_queries &#039;1&#039;
        option rebind_protection &#039;1&#039;
        option rebind_localhost &#039;1&#039;
        option local &#039;/lan/&#039;
        option domain &#039;lan&#039;
        option expandhosts &#039;1&#039;
        option nonegcache &#039;0&#039;
        option authoritative &#039;1&#039;
        option readethers &#039;1&#039;
        option leasefile &#039;/tmp/dhcp.leases&#039;
        option resolvfile &#039;/tmp/resolv.conf.auto&#039;

config dhcp &#039;lan&#039;
        option interface &#039;lan&#039;
        option start &#039;100&#039;
        option limit &#039;150&#039;
        option leasetime &#039;12h&#039;
        option dhcpv6 &#039;server&#039;
        option ra &#039;server&#039;

config dhcp &#039;wan&#039;
        option interface &#039;wan&#039;
        option ignore &#039;1&#039;

config odhcpd &#039;odhcpd&#039;
        option maindhcp &#039;0&#039;
        option leasefile &#039;/tmp/hosts/odhcpd&#039;
        option leasetrigger &#039;/usr/sbin/odhcpd-update&#039;

config dhcp
        option start &#039;100&#039;
        option limit &#039;150&#039;
        option interface &#039;wifi&#039;
    option leasetime &#039;2h&#039;

######### END DHCP ##################</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p275687">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">tkintenn</div>
					<div class="post-datetime">
						8 May 2015, 17:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>yapoo wrote:</cite><blockquote><p>yes.<br />also /etc/config/network</p></blockquote></div><p>If you need more let me know, that&#039;s what the HOWTO I followed (from openwrt.org) had me change. </p><p>The only interface I created was the one called &#039;wifi&#039;, which has a dev name of br-wifi. </p><p>I also have the br-wifi bridged to both the an and bgn wifi&#039;s.&nbsp; Not sure if that is a problem. In my typical bridges i would actually bridge to the 0.0.0.0/0.0.0.0 which would be Lan on openwrt?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p275911">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">tkintenn</div>
					<div class="post-datetime">
						11 May 2015, 06:42					</div>
				</div>
				<div class="post-content content">
					<p>Ok... i have my issues worked out except...</p><p>when i connect to the guest network, it pulls up a page that simply says &quot;NODOGSPLASH&quot; with a picture centered below it. On my smart phone clicking the image just causes a time out issue. It doesn&#039;t go anywhere and I turned off RedirectURL... </p><p>So my guest is never authenticated to nodogsplash and can&#039;t go anywhere... can anyone help?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p275912">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">tkintenn</div>
					<div class="post-datetime">
						11 May 2015, 07:49					</div>
				</div>
				<div class="post-content content">
					<p>So... it says Allowed Mac addresses: N/A<br />The connection I made to it from my cell phone says &quot;Authenticated&quot;? </p><div class="codebox"><pre><code>client_id=0
ip=192.168.6.223
mac=10:a5:d0:56:eb:57
added=1431318954
active=1431319516
duration=562
token=75c4827b
state=Authenticated
downloaded=20
avg_down_speed=0.289737
uploaded=144
avg_up_speed=2.05858</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p276025">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">tkintenn</div>
					<div class="post-datetime">
						12 May 2015, 05:40					</div>
				</div>
				<div class="post-content content">
					<p>Nodogsplash seems to be tough to get help for.... I moved my client to a commercial appliance. </p><p>However, this is severely bugging me now. </p><p>It&#039;s really strange, it&#039;s as if the preauth dns firewall rule isn&#039;t working and iptables isn&#039;t allow dns, even thought the rule is uncommented.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p276035">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">tapper</div>
					<div class="post-datetime">
						12 May 2015, 09:43					</div>
				</div>
				<div class="post-content content">
					<p>Hi i have wanted to do this for a long time but could never work out how to do it. If you get it worcking pleas could you do a proper write up?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p276036">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">atom</div>
					<div class="post-datetime">
						12 May 2015, 09:54					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m curious about the IP address 192.168.6.223.&nbsp; It does not appear to be on the same network as the 192.168.5.1/24 address you configured on the &quot;wifi&quot; interface.&nbsp; If I remember correctly (it&#039;s been a number of years...) then Authenticated means that the client should have access.</p><p>What are the results of some basic troubleshooting, such as pinging the gateway (192.168.5.1), pinging the LAN and WAN interfaces of the router, doing a traceroute to a public IP?&nbsp; Can you reach the router&#039;s LuCI page on the LAN IP?&nbsp; (Not sure whether you should be able to, but it might be good to try.)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p276060">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">tkintenn</div>
					<div class="post-datetime">
						12 May 2015, 13:27					</div>
				</div>
				<div class="post-content content">
					<p>That has been fixed, the gateway ip is 6.1 amd the range is 6.0/24.</p><p>Too many late nights playing with it lol. </p><p>Another curious thing... ping -I 192.168.6.1 google.com times out. However ping -I 192.168.6.1 192.168.3.1 gets a response. </p><p>So I think this has to do with iptables rule that is missing or possibly a rule in the configuration missing.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=57082&amp;p=2.html">2</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>