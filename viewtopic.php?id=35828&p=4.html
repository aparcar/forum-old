<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Howto enable channel 12 and 13 on TP-Link WR-1043ND?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 24 Mar 2018 and 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 4 of 4</div><nav><ul><li><a href="viewtopic.php%3Fid=35828&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=35828&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=35828&amp;p=3.html">3</a></li><li class="pagination-current"><span>4</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p188297">
				<div class="post-metadata">
					<div class="post-num">Post #76</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						8 Jan 2013, 15:52					</div>
				</div>
				<div class="post-content content">
					<p>The utility now also supports lifiting the 5GHz restrictions on ath9k.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190221">
				<div class="post-metadata">
					<div class="post-num">Post #77</div>
					<div class="post-author">Nilist</div>
					<div class="post-datetime">
						28 Jan 2013, 17:12					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jow wrote:</cite><blockquote><p>Use <a href="http://luci.subsignal.org/~jow/reghack/">http://luci.subsignal.org/~jow/reghack/</a> to enable channel 12 and 13.</p></blockquote></div><p>Works on Gargoyle 1.5.9. Awesome!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p197355">
				<div class="post-metadata">
					<div class="post-num">Post #78</div>
					<div class="post-author">billylo</div>
					<div class="post-datetime">
						5 Apr 2013, 16:39					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jow wrote:</cite><blockquote><p>Use <a href="http://luci.subsignal.org/~jow/reghack/">http://luci.subsignal.org/~jow/reghack/</a> to enable channel 12 and 13.</p></blockquote></div><p>Thanks! Can you enable channel 14 too? :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p197375">
				<div class="post-metadata">
					<div class="post-num">Post #79</div>
					<div class="post-author">hojuruku</div>
					<div class="post-datetime">
						5 Apr 2013, 17:56					</div>
				</div>
				<div class="post-content content">
					<p>just compile your own kernel. </p><p>Works for me. But I still have low txpower on some tp-link models. It removes the openwrt US reg domain hardcoded restrictions in the ath9k driver, but i&#039;m not sure if it ignores the txpower restrictions in the eeprom fully.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p207118">
				<div class="post-metadata">
					<div class="post-num">Post #80</div>
					<div class="post-author">mastabog</div>
					<div class="post-datetime">
						14 Jul 2013, 18:21					</div>
				</div>
				<div class="post-content content">
					<p>I have a Buffallo WZR-HP-AG300H on r36054 and used jow&#039;s utility to hack the driver. It does indeed enable channel 12 and 13, but now I&#039;m unable to change the TX power.</p><p>It does report that it is changed, but looking at the received signal strength on another wifi card, the TX power of the router is unchanged. Setting 30 dBm, 20 dBm, 10 dBm or 0 dBm doesn&#039;t make any difference.</p><p>I tried both using Luci and iw like this:<br /></p><div class="codebox"><pre><code>iw dev wlan0 set txpower fixed 20mBm</code></pre></div><p>Any ideas?</p>											<p class="post-edited">(Last edited by <strong>mastabog</strong> on 14 Jul 2013, 18:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p207120">
				<div class="post-metadata">
					<div class="post-num">Post #81</div>
					<div class="post-author">Boompje123</div>
					<div class="post-datetime">
						14 Jul 2013, 18:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mastabog wrote:</cite><blockquote><p>I have a Buffallo WZR-HP-AG300H on r36054 and used jow&#039;s utility to hack the driver. It does indeed enable channel 12 and 13, but now I&#039;m unable to change the TX power.</p><p>It does report that it is changed, but looking at the received signal strength on another wifi card, the TX power of the router is unchanged. Setting 30 dBm, 20 dBm, 10 dBm or 0 dBm doesn&#039;t make any difference.</p><p>I tried both using Luci and iw like this:<br /></p><div class="codebox"><pre><code>iw dev wlan0 set txpower fixed 20mBm</code></pre></div><p>Any ideas?</p></blockquote></div><p>I don&#039;t think you should post that here. Either look for a thread on your router specific, post a new thread, or find Jow in the irc channel or something</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217177">
				<div class="post-metadata">
					<div class="post-num">Post #82</div>
					<div class="post-author">eeff11</div>
					<div class="post-datetime">
						10 Nov 2013, 09:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>towolf wrote:</cite><blockquote><p>Either you compile the firmware with ATH_USER_REGD on (the official compiles don’t enable it because Atheros asks for this) so the driver chooses the country you want and overrides the EEPROM. </p><p>Or, 2, you get a ‹ regulatory.bin › that maps the regulatory settings that your Behörde allows to the country that the EEPROM wants (e.g. US with DE limits). This option just requires you to find this hacked file and to drop it in the right place on the boxes file system. No building necessary. But it’s a bit ugly. The wiki has more.</p><p>What does « iw reg get » say? When you look at dmesg you can see that EEPROM has the final say and « iw reg set DE » doesn’t have an effect.</p></blockquote></div><p>Hi,is there a tx/rx power loss if compile the firmware with ATH-USER-REGD turned on?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217178">
				<div class="post-metadata">
					<div class="post-num">Post #83</div>
					<div class="post-author">eeff11</div>
					<div class="post-datetime">
						10 Nov 2013, 10:28					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>AndrejaKo wrote:</cite><blockquote><p>.......</p><br /><p>Also did anyone check how things work in the official TP-LINK image? I&#039;ve heard reports from people that on stock firmware those channels work, but I didn&#039;t check that out yet myself. EDIT: They do work.</p></blockquote></div><p>Yes, it worked on the stock firmware, and it even appeared on the official product spec and Ads.</p><p>While after flashing the openwrt AA 12.09, these 2 channels 12,13 disappear, whatever country code you set.</p><p>It should be open as &quot;openwrt&quot;, I am not breaking any reg. law &#039;cause it&#039;s legal to here to use the 2 channels, and TP-Link&#039;s stock firmware is doing it too.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232017">
				<div class="post-metadata">
					<div class="post-num">Post #84</div>
					<div class="post-author">djdeeles</div>
					<div class="post-datetime">
						2 May 2014, 00:18					</div>
				</div>
				<div class="post-content content">
					<p>on trunk breaks 5ghz (wdr3600)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p265155">
				<div class="post-metadata">
					<div class="post-num">Post #85</div>
					<div class="post-author">xcom169</div>
					<div class="post-datetime">
						11 Feb 2015, 19:40					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the patch.<br />It&#039;s working for me on 1043ND in HU.</p><p>Somebody can distribute how to compile own firmware - without Atheros restriction of course -&nbsp; just in case this tool won&#039;t work in the future?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p288133">
				<div class="post-metadata">
					<div class="post-num">Post #86</div>
					<div class="post-author">yzyuestc</div>
					<div class="post-datetime">
						18 Aug 2015, 22:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jow wrote:</cite><blockquote><p>Use <a href="http://luci.subsignal.org/~jow/reghack/">http://luci.subsignal.org/~jow/reghack/</a> to enable channel 12 and 13.</p></blockquote></div><p>Thanks a lot! Works fine on my unifi access point!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291785">
				<div class="post-metadata">
					<div class="post-num">Post #87</div>
					<div class="post-author">xcom169</div>
					<div class="post-datetime">
						14 Sep 2015, 11:20					</div>
				</div>
				<div class="post-content content">
					<p>I compliled my own kernel with forcing Atheros to respect my settings in etc/config/wireless but I still cannot activate channel 14 with JP country. </p><p>In iw list Channel 14 is not disabled anymore but wireless just doesn&#039;t come up after wifi command. </p><p>Is there something else should be done ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291830">
				<div class="post-metadata">
					<div class="post-num">Post #88</div>
					<div class="post-author">el_goretto</div>
					<div class="post-datetime">
						14 Sep 2015, 18:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>xcom169 wrote:</cite><blockquote><p>I compliled my own kernel with forcing Atheros to respect my settings in etc/config/wireless but I still cannot activate channel 14 with JP country. </p><p>In iw list Channel 14 is not disabled anymore but wireless just doesn&#039;t come up after wifi command. </p><p>Is there something else should be done ?</p></blockquote></div><p><a href="https://en.wikipedia.org/wiki/List_of_WLAN_channels">https://en.wikipedia.org/wiki/List_of_WLAN_channels</a> : <br />channel 14 in Japan: for 11b only</p><p>I&#039;m pretty sure you are trying to use it for 11g or 11n...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291924">
				<div class="post-metadata">
					<div class="post-num">Post #89</div>
					<div class="post-author">xcom169</div>
					<div class="post-datetime">
						15 Sep 2015, 12:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>el_goretto wrote:</cite><blockquote><div class="quotebox"><cite>xcom169 wrote:</cite><blockquote><p>I compliled my own kernel with forcing Atheros to respect my settings in etc/config/wireless but I still cannot activate channel 14 with JP country. </p><p>In iw list Channel 14 is not disabled anymore but wireless just doesn&#039;t come up after wifi command. </p><p>Is there something else should be done ?</p></blockquote></div><p><a href="https://en.wikipedia.org/wiki/List_of_WLAN_channels">https://en.wikipedia.org/wiki/List_of_WLAN_channels</a> : <br />channel 14 in Japan: for 11b only</p><p>I&#039;m pretty sure you are trying to use it for 11g or 11n...</p></blockquote></div><p>Yes I tried for 11n but it&#039;s the same 2,4 Ghz, right? <br />Is there any debug mode where I can see why wifi command failed?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p339530">
				<div class="post-metadata">
					<div class="post-num">Post #90</div>
					<div class="post-author">inquiery</div>
					<div class="post-datetime">
						28 Sep 2016, 18:39					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I have bought 2 TPLink T-WR741ND v4.25<br />On both of them I installed OpenWrt Chaos Calmer 15.05.1</p><p>After that, I followed the instructions on this link luci.subsignal.org/~jow/reghack/ to enable channel 12 and 13, the only difference is that Ididn&#039;t used wget to get the reghack.mips.elf file, I download it on my computer and uploaded it to the router via WinSCP.</p><p>Well, after executing the commands, the result on the console is like that:</p><div class="codebox"><pre><code>root@OpenWrt:/tmp# ./reghack.mips.elf /lib/modules/*/ath.ko
mmap(): Invalid argument
Memory mapping failed (missing fs support?), retrying from tmpfs
Patching @ 0x00000308: ath_is_radar_freq() MIPS opcode in ath/regd.o
Patching @ 0x00000414: ath_is_radar_freq() MIPS opcode in ath/regd.o
Patching @ 0x000034cc: ath world regdomain with 5 rules in ath/regd.o
Patching @ 0x0000356c: ath world regdomain with 4 rules in ath/regd.o
Patching @ 0x000035f0: ath world regdomain with 4 rules in ath/regd.o
Patching @ 0x00003674: ath world regdomain with 5 rules in ath/regd.o
root@OpenWrt:/tmp# ./reghack.mips.elf /lib/modules/*/cfg80211.ko
mmap(): Invalid argument
Memory mapping failed (missing fs support?), retrying from tmpfs
Patching @ 0x0002f0e8: embedded 00 regdomain in cfg80211/regdb.o</code></pre></div><p>The same output in both routers. The thing is, on the first router I did it some weaks ago, and it is working normaly with chanel 12 and 13 enabled, this second one, that I installed OpenWrt yesterday and applied the hack, does not, still limited to channel 11. I reflashed OpenWrt and hack like 5 times now, and still it is limited to channel 11.</p><p>I don&#039;t remember if I had to to something else on the first router to enable those channels, but if I did, I can&#039;t remember what.</p><p>Is there something I&#039;m leaving behind?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 4 of 4</div><nav><ul><li><a href="viewtopic.php%3Fid=35828&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=35828&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=35828&amp;p=3.html">3</a></li><li class="pagination-current"><span>4</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>