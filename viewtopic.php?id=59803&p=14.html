<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> adblock package, release 2.x</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 22 Mar 2018 and 4 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 14 of 17</div><nav><ul><li><a href="viewtopic.php%3Fid=59803&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=59803&amp;p=12.html">12</a></li><li><a href="viewtopic.php%3Fid=59803&amp;p=13.html">13</a></li><li class="pagination-current"><span>14</span></li><li><a href="viewtopic.php%3Fid=59803&amp;p=15.html">15</a></li><li><a href="viewtopic.php%3Fid=59803&amp;p=16.html">16</a></li><li><a href="viewtopic.php%3Fid=59803&amp;p=17.html">17</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p345238">
				<div class="post-metadata">
					<div class="post-num">Post #326</div>
					<div class="post-author">dibdot</div>
					<div class="post-datetime">
						29 Nov 2016, 21:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>huangjqiu wrote:</cite><blockquote><p>Thanks dibdot for your response. below is the log where I saw &quot;created volatile uhttpd instances&quot;, however I couldn&#039;t find any processes with &#039;ps&#039;. I did notice the process /usr/sbin/uhttpd -f -h /www -r lede -x /cgi-bin -u /ubus was running.</p></blockquote></div><p>Please send a short email to my maintainer email address (see online documentation on github) and I&#039;ll send you a debug script back for further analysis ... thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346304">
				<div class="post-metadata">
					<div class="post-num">Post #327</div>
					<div class="post-author">ExaltedVanguard</div>
					<div class="post-datetime">
						11 Dec 2016, 04:54					</div>
				</div>
				<div class="post-content content">
					<p>Adblock seems to be starting very unreliably. Some reboots it will start, others it will fail to start at all. Here&#039;s the information provided in the system log after a failed-to-start boot.</p><div class="codebox"><pre><code>Sat Dec 10 21:36:27 2016 user.notice adblock[1619] info : adblock service started due to &#039;ifup&#039; of &#039;wan&#039; interface
Sat Dec 10 21:36:28 2016 user.notice adblock[1712] warn : adblock installation finished successfully, &#039;opkg&#039; currently locked by package installer
Sat Dec 10 21:36:30 2016 user.notice adblock[1970] error: adblock service already running (1712)</code></pre></div><p>When it does work, I get repeated errors about the adblock service already running. My best guess (knowing next to nothing) on these errors is that OpenWrt is repeatedly trying to start the service due to how long the script takes to run and some timeout.</p><p>It&#039;s not a huge deal, since it&#039;s not like my router is being rebooted very often, and I have a cronjob to update adblock every morning so it will &quot;fix itself&quot; in less than 24 hours anyway. Less than ideal though.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347212">
				<div class="post-metadata">
					<div class="post-num">Post #328</div>
					<div class="post-author">dibdot</div>
					<div class="post-datetime">
						20 Dec 2016, 15:30					</div>
				</div>
				<div class="post-content content">
					<p>A new major adblock release 2.0.0 has been pushed on github and will be available soon.</p><div class="codebox"><pre><code>* changed complete dnsmasq handling
  - no longer redirect ad requests to internal web server via firewall 
    rules etc., in fact send back a simple NXDOMAIN for all
    ad related (sub-)domains
  - smaller memory footprint for block lists
  - removed needless uhttpd instances
  - removed needless firewall rules/redirects
* init/hotplug system migrated to procd
  - removed hotplug.d script, now using procd interface trigger
* reduced code size/complexity
  - removed needless internal pre-checks &amp; function blocks,
    no longer rely on a separate helper library
  - removed flash writes to adblock config
* support different download tools like wget (default), aria2c, uclient-fetch, curl (see online doc)
* adblock status/statistics via ubus call (see online doc)
* various bug fixes
* documentation update
* changed makefile copyright notice</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347304">
				<div class="post-metadata">
					<div class="post-num">Post #329</div>
					<div class="post-author">cybrnook2002</div>
					<div class="post-datetime">
						21 Dec 2016, 18:48					</div>
				</div>
				<div class="post-content content">
					<p>I swear there was another area where a conversation on this was happening, I can&#039;t seem to find it now that I was to add to it.</p><p>But in 2.0 I am seeing this (same as others):</p><p>Wed Dec 21 11:46:14 2016 user.notice adblock-[2.0.0] info : status ::: adblock is currently disabled, please set adb_enabled to &#039;1&#039; to use this service<br />Wed Dec 21 11:46:48 2016 daemon.info dnsmasq[19820]: exiting on receipt of SIGTERM<br /><strong>Wed Dec 21 11:46:48 2016 daemon.err adblock.sh[20644]: udhcpc: started, v1.25.1<br />Wed Dec 21 11:46:48 2016 daemon.err adblock.sh[20644]: udhcpc: sending discover<br />Wed Dec 21 11:46:51 2016 daemon.err adblock.sh[20644]: udhcpc: no lease, failing</strong><br />Wed Dec 21 11:46:51 2016 daemon.info dnsmasq[20873]: started, version 2.76 cachesize 150<br />Wed Dec 21 11:46:51 2016 daemon.info dnsmasq[20873]: compile time options: IPv6 GNU-getopt no-DBus no-i18n no-IDN DHCP no-DHCPv6 no-Lua TFTP no-conntrack no-ipset no-auth no-DNSSEC no-ID loop-detect inotify<br />Wed Dec 21 11:46:51 2016 daemon.info dnsmasq[20873]: DNS service limited to local subnets<br />..................<br />..................<br />..................<br />..................<br />Wed Dec 21 11:46:52 2016 user.notice adblock-[2.0.0] info : status ::: block lists with overall 38727 domains loaded (LEDE GEMINI 3.0 r2608-05abcf5)</p><br /><p>Easy to reproduce. Just disable adblock2.0 via luci. Wait a few, then re-enable.</p>											<p class="post-edited">(Last edited by <strong>cybrnook2002</strong> on 21 Dec 2016, 18:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347308">
				<div class="post-metadata">
					<div class="post-num">Post #330</div>
					<div class="post-author">dibdot</div>
					<div class="post-datetime">
						21 Dec 2016, 19:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>cybrnook2002 wrote:</cite><blockquote><p>I swear there was another area where a conversation on this was happening, I can&#039;t seem to find it now that I was to add to it.</p></blockquote></div><p>That has been already discussed <a href="https://forum.lede-project.org/t/adblock2-pre-release-testing/507/24">here</a> ... and it seems that it makes no harm.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347310">
				<div class="post-metadata">
					<div class="post-num">Post #331</div>
					<div class="post-author">ExaltedVanguard</div>
					<div class="post-datetime">
						21 Dec 2016, 20:34					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m using 2.0 and it appears to be working great! Thanks!</p><p>One caveat is that it causes dnsmasq to spew a bunch of garbage into the system log. I fixed this by editing /etc/init.d/dnsmasq and appending the option &quot;--log-facility=/dev/null&quot;</p><p>Not the most ideal of solutions, but it works.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347319">
				<div class="post-metadata">
					<div class="post-num">Post #332</div>
					<div class="post-author">dibdot</div>
					<div class="post-datetime">
						21 Dec 2016, 22:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ExaltedVanguard wrote:</cite><blockquote><p>I&#039;m using 2.0 and it appears to be working great! Thanks!</p><p>One caveat is that it causes dnsmasq to spew a bunch of garbage into the system log. I fixed this by editing /etc/init.d/dnsmasq and appending the option &quot;--log-facility=/dev/null&quot;</p><p>Not the most ideal of solutions, but it works.</p></blockquote></div><p>I&#039;ve sent a PR to LEDE source to make it configurable via UCI, see <a href="https://github.com/lede-project/source/pull/638">here</a>.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347433">
				<div class="post-metadata">
					<div class="post-num">Post #333</div>
					<div class="post-author">jglooije</div>
					<div class="post-datetime">
						22 Dec 2016, 21:38					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the great adblocker. Using it for a while now. In the new version 2 there is a problem, when running multiple instances of dnsmasq. The result of the dnsmasq running is not being recognized as &quot;true&quot;. The result is &quot;true true&quot; because of the two instances I have. So I changed the code a little bit to resolve(not perfect):<br /></p><div class="codebox"><pre><code>   dns_running=&quot;false&quot;

    sync
    &quot;/etc/init.d/${adb_dns}&quot; restart
    while [ ${cnt} -le 10 ]
    do
        dns_result=&quot;$(ubus -S call service list &#039;{&quot;name&quot;:&quot;dnsmasq&quot;}&#039; | jsonfilter -e &#039;@.dnsmasq.instances.*.running&#039;)&quot;
        if [ &quot;${dns_result:0:4}&quot; = &quot;true&quot; ]
        then
            dns_running=&quot;true&quot;</code></pre></div><p>Keep up the good work.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347434">
				<div class="post-metadata">
					<div class="post-num">Post #334</div>
					<div class="post-author">dibdot</div>
					<div class="post-datetime">
						22 Dec 2016, 22:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jglooije wrote:</cite><blockquote><p>Thanks for the great adblocker. Using it for a while now. In the new version 2 there is a problem, when running multiple instances of dnsmasq. The result of the dnsmasq running is not being recognized as &quot;true&quot;. The result is &quot;true true&quot; because of the two instances I have. So I changed the code a little bit to resolve(not perfect):</p></blockquote></div><p>Thanks for the report! Will be fixed in 2.0.2 ... I&#039;ve released 2.0.1 today (sadly without this one) with the following fixes:</p><div class="codebox"><pre><code>    fixed a dnsmasq restart issue (udhcpc error)
    fixed a long standing corner case bug in &quot;disabled&quot; state (does not remove active block lists!)
    simplified overall sort, removed needless &#039;for loop&#039;
    cosmetics</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347436">
				<div class="post-metadata">
					<div class="post-num">Post #335</div>
					<div class="post-author">cybrnook2002</div>
					<div class="post-datetime">
						22 Dec 2016, 22:39					</div>
				</div>
				<div class="post-content content">
					<p>thanks for the 2.01 release @dibdot, looking for forward to future releases :-)</p><p>If I am reading your change log correctly, I no longer see the pre-req of kmod-ipt-nat6? Is this intentional, or do you really no longer need it to support IPV6?</p>											<p class="post-edited">(Last edited by <strong>cybrnook2002</strong> on 22 Dec 2016, 22:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347461">
				<div class="post-metadata">
					<div class="post-num">Post #336</div>
					<div class="post-author">dibdot</div>
					<div class="post-datetime">
						23 Dec 2016, 08:34					</div>
				</div>
				<div class="post-content content">
					<p>@all: adblock update 2.0.2 is on the road ... last github PR before christmas ... <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><div class="codebox"><pre><code>* fixed dnsmasq check if multiple instances are present
* bring back query function on highly demand
* documentation update</code></pre></div><p>Finally, I wish all of you a merry Christmas!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347462">
				<div class="post-metadata">
					<div class="post-num">Post #337</div>
					<div class="post-author">dibdot</div>
					<div class="post-datetime">
						23 Dec 2016, 08:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>cybrnook2002 wrote:</cite><blockquote><p>thanks for the 2.01 release @dibdot, looking for forward to future releases :-)</p><p>If I am reading your change log correctly, I no longer see the pre-req of kmod-ipt-nat6? Is this intentional, or do you really no longer need it to support IPV6?</p></blockquote></div><p>adblock fully supports IPv4/IPv6 but does no longer use error prone external iptables rulesets, http pixel server instances and things like that (see online doc).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347601">
				<div class="post-metadata">
					<div class="post-num">Post #338</div>
					<div class="post-author">cybrnook2002</div>
					<div class="post-datetime">
						24 Dec 2016, 18:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dibdot wrote:</cite><blockquote><div class="quotebox"><cite>cybrnook2002 wrote:</cite><blockquote><p>thanks for the 2.01 release @dibdot, looking for forward to future releases :-)</p><p>If I am reading your change log correctly, I no longer see the pre-req of kmod-ipt-nat6? Is this intentional, or do you really no longer need it to support IPV6?</p></blockquote></div><p>adblock fully supports IPv4/IPv6 but does no longer use error prone external iptables rulesets, http pixel server instances and things like that (see online doc).</p></blockquote></div><p>Thank dibdot! Merry Christmas.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347895">
				<div class="post-metadata">
					<div class="post-num">Post #339</div>
					<div class="post-author">imbaSD</div>
					<div class="post-datetime">
						28 Dec 2016, 16:29					</div>
				</div>
				<div class="post-content content">
					<p>dibdot ty for ths great package, i update to 2.0.2 and seems work</p><p>but, i an very very newbie at this field ( <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /> ) and with previous version (1.5) when i restart the package via PuTTy (/etc/init.d/adblock restart) it was displayed every step of package status, now it&#039;s not<br />is there another way to see that?</p><p>also at the page Services/Adblock at the right of every source it&#039;s not described when it was updated last time and how many urls it download (at 1.5 versions it was displayed)</p><p>did i make something wrong?</p>											<p class="post-edited">(Last edited by <strong>imbaSD</strong> on 28 Dec 2016, 16:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347962">
				<div class="post-metadata">
					<div class="post-num">Post #340</div>
					<div class="post-author">Comitizer</div>
					<div class="post-datetime">
						29 Dec 2016, 19:07					</div>
				</div>
				<div class="post-content content">
					<p>So far this package is great.&nbsp; The only thing I would like is some more stats (similar to Pi Hole <a href="https://pi-hole.net/">https://pi-hole.net/</a>).&nbsp; It would be really cool to see what is being blocked and so forth.</p><p>Regardless, I&#039;m loving the system so I wondering whether or not it is a good idea to enable ALL of the ad block lists.&nbsp; Is there any reason not to?&nbsp; Performance?&nbsp; What would the impact be?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347971">
				<div class="post-metadata">
					<div class="post-num">Post #341</div>
					<div class="post-author">dibdot</div>
					<div class="post-datetime">
						29 Dec 2016, 19:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>imbaSD wrote:</cite><blockquote><p>dibdot ty for ths great package, i update to 2.0.2 and seems work<br />but, i an very very newbie at this field ( <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /> ) and with previous version (1.5) when i restart the package via PuTTy (/etc/init.d/adblock restart) it was displayed every step of package status, now it&#039;s not<br />is there another way to see that?<br />also at the page Services/Adblock at the right of every source it&#039;s not described when it was updated last time and how many urls it download (at 1.5 versions it was displayed)<br />did i make something wrong?</p></blockquote></div><p>Please check the current online documentation (see the link in the first post). adblock 2.x writes the output only to syslog (logread -e &quot;adblock&quot;) and to see more output please set &#039;adb_debug&#039; to &#039;1&#039;, too.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347972">
				<div class="post-metadata">
					<div class="post-num">Post #342</div>
					<div class="post-author">imbaSD</div>
					<div class="post-datetime">
						29 Dec 2016, 19:58					</div>
				</div>
				<div class="post-content content">
					<p>When i run <strong>ubus call service list</strong> i receive the following only</p><div class="codebox"><pre><code>        &quot;adblock&quot;: {
                &quot;instances&quot;: {
                        &quot;adblock&quot;: {
                                &quot;running&quot;: false,
                                &quot;command&quot;: [
                                        &quot;\/usr\/bin\/adblock.sh&quot;,
                                        &quot;reload&quot;
                                ],
                                &quot;env&quot;: {
                                        &quot;adb_procd&quot;: &quot;true&quot;
                                }
                        }
                }
        },
        &quot;adblock_stats&quot;: {
                &quot;instances&quot;: {

                }
        },</code></pre></div><p>so with <strong>ubus call service list &#039;{&quot;name&quot;:&quot;adblock_stats&quot;}&#039; | jsonfilter -e &#039;@.*.instances.stats.env&#039;</strong> i get nothing</p>											<p class="post-edited">(Last edited by <strong>imbaSD</strong> on 29 Dec 2016, 20:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347973">
				<div class="post-metadata">
					<div class="post-num">Post #343</div>
					<div class="post-author">imbaSD</div>
					<div class="post-datetime">
						29 Dec 2016, 20:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dibdot wrote:</cite><blockquote><div class="quotebox"><cite>imbaSD wrote:</cite><blockquote><p>dibdot ty for ths great package, i update to 2.0.2 and seems work<br />but, i an very very newbie at this field ( <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /> ) and with previous version (1.5) when i restart the package via PuTTy (/etc/init.d/adblock restart) it was displayed every step of package status, now it&#039;s not<br />is there another way to see that?<br />also at the page Services/Adblock at the right of every source it&#039;s not described when it was updated last time and how many urls it download (at 1.5 versions it was displayed)<br />did i make something wrong?</p></blockquote></div><p>Please check the current online documentation (see the link in the first post). adblock 2.x writes the output only to syslog (logread -e &quot;adblock&quot;) and to see more output please set &#039;adb_debug&#039; to &#039;1&#039;, too.</p></blockquote></div><p>just did it and manage to get some infos what i wanted, ty <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347988">
				<div class="post-metadata">
					<div class="post-num">Post #344</div>
					<div class="post-author">dibdot</div>
					<div class="post-datetime">
						29 Dec 2016, 22:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>imbaSD wrote:</cite><blockquote><p>so with <strong>ubus call service list &#039;{&quot;name&quot;:&quot;adblock_stats&quot;}&#039; | jsonfilter -e &#039;@.*.instances.stats.env&#039;</strong> i get nothing</p></blockquote></div><p>Hmm, work for me ... maybe something goes wrong during reload action!?</p><div class="codebox"><pre><code>root@blackhole:~# ubus call service list &#039;{&quot;name&quot;:&quot;adblock&quot;}&#039;
{
    &quot;adblock&quot;: {
        &quot;instances&quot;: {
            &quot;adblock&quot;: {
                &quot;running&quot;: false,
                &quot;command&quot;: [
                    &quot;\/usr\/bin\/adblock.sh&quot;,
                    &quot;reload&quot;
                ],
                &quot;env&quot;: {
                    &quot;adb_procd&quot;: &quot;true&quot;
                }
            }
        }
    }
}

root@blackhole:~# ubus call service list &#039;{&quot;name&quot;:&quot;adblock_stats&quot;}&#039;
{
    &quot;adblock_stats&quot;: {
        &quot;instances&quot;: {
            &quot;stats&quot;: {
                &quot;running&quot;: false,
                &quot;env&quot;: {
                    &quot;blocked_domains&quot;: &quot;136159&quot;,
                    &quot;last_rundate&quot;: &quot;29.12.2016 21:09:46&quot;
                }
            }
        }
    }
}</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347992">
				<div class="post-metadata">
					<div class="post-num">Post #345</div>
					<div class="post-author">dibdot</div>
					<div class="post-datetime">
						29 Dec 2016, 22:42					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Comitizer wrote:</cite><blockquote><p>So far this package is great.&nbsp; The only thing I would like is some more stats (similar to Pi Hole <a href="https://pi-hole.net/">https://pi-hole.net/</a>).&nbsp; It would be really cool to see what is being blocked and so forth.</p></blockquote></div><p>Currently I focus on fast &amp; neat dns adblocking - nothing more. Basic stats are only available via ubus call (see online doc).</p><div class="quotebox"><cite>Comitizer wrote:</cite><blockquote><p>Regardless, I&#039;m loving the system so I wondering whether or not it is a good idea to enable ALL of the ad block lists.&nbsp; Is there any reason not to?&nbsp; Performance?&nbsp; What would the impact be?</p></blockquote></div><p>No (known) problems with that. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347994">
				<div class="post-metadata">
					<div class="post-num">Post #346</div>
					<div class="post-author">imbaSD</div>
					<div class="post-datetime">
						29 Dec 2016, 23:03					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dibdot wrote:</cite><blockquote><div class="quotebox"><cite>imbaSD wrote:</cite><blockquote><p>so with <strong>ubus call service list &#039;{&quot;name&quot;:&quot;adblock_stats&quot;}&#039; | jsonfilter -e &#039;@.*.instances.stats.env&#039;</strong> i get nothing</p></blockquote></div><p>Hmm, work for me ... maybe something goes wrong during reload action!?</p><div class="codebox"><pre><code>root@blackhole:~# ubus call service list &#039;{&quot;name&quot;:&quot;adblock&quot;}&#039;
{
    &quot;adblock&quot;: {
        &quot;instances&quot;: {
            &quot;adblock&quot;: {
                &quot;running&quot;: false,
                &quot;command&quot;: [
                    &quot;\/usr\/bin\/adblock.sh&quot;,
                    &quot;reload&quot;
                ],
                &quot;env&quot;: {
                    &quot;adb_procd&quot;: &quot;true&quot;
                }
            }
        }
    }
}

root@blackhole:~# ubus call service list &#039;{&quot;name&quot;:&quot;adblock_stats&quot;}&#039;
{
    &quot;adblock_stats&quot;: {
        &quot;instances&quot;: {
            &quot;stats&quot;: {
                &quot;running&quot;: false,
                &quot;env&quot;: {
                    &quot;blocked_domains&quot;: &quot;136159&quot;,
                    &quot;last_rundate&quot;: &quot;29.12.2016 21:09:46&quot;
                }
            }
        }
    }
}</code></pre></div></blockquote></div><p>tried <strong>/etc/init.d/adblock reload </strong>and <strong>restart </strong>but still the same</p><div class="codebox"><pre><code>root@ArcherC7:~# ubus call service list &#039;{&quot;name&quot;:&quot;adblock_stats&quot;}&#039;
{
        &quot;adblock_stats&quot;: {
                &quot;instances&quot;: {

                }
        }
}</code></pre></div><p>is there any way to make a clean reinstallation? delete everything related with adblock that remain after uninstallation (<strong>opkg remove adblock</strong>)</p>											<p class="post-edited">(Last edited by <strong>imbaSD</strong> on 29 Dec 2016, 23:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347995">
				<div class="post-metadata">
					<div class="post-num">Post #347</div>
					<div class="post-author">dibdot</div>
					<div class="post-datetime">
						29 Dec 2016, 23:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>imbaSD wrote:</cite><blockquote><p>tried <strong>/etc/init.d/adblock reload </strong>and <strong>restart </strong>but still the same</p></blockquote></div><p>no errors in the log?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p348007">
				<div class="post-metadata">
					<div class="post-num">Post #348</div>
					<div class="post-author">imbaSD</div>
					<div class="post-datetime">
						30 Dec 2016, 00:09					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dibdot wrote:</cite><blockquote><div class="quotebox"><cite>imbaSD wrote:</cite><blockquote><p>tried <strong>/etc/init.d/adblock reload </strong>and <strong>restart </strong>but still the same</p></blockquote></div><p>no errors in the log?</p></blockquote></div><div class="codebox"><pre><code>[....]
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq[8473]: using local addresses only for domain 7bpeople.com
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq[8473]: using local addresses only for domain 77tracking.com
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq[8473]: using local addresses only for domain 777partner.com
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq[8473]: using local addresses only for domain 600z.com
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq[8473]: using local addresses only for domain 51yes.com
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq[8473]: using local addresses only for domain 518ad.com
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq[8473]: using local addresses only for domain 50websads.com
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq[8473]: using local addresses only for domain 4d5.net
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq[8473]: using local addresses only for domain 4affiliate.net
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq[8473]: using local addresses only for domain 360yield.com
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq[8473]: using local addresses only for domain 2o7.net
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq[8473]: using local addresses only for domain 2mdn.net
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq[8473]: using local addresses only for domain 24pm-affiliation.com
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq[8473]: using local addresses only for domain 24log.de
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq[8473]: using local addresses only for domain 24log.com
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq[8473]: using local addresses only for domain 247media.com
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq[8473]: using local addresses only for domain 207.net
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq[8473]: using local addresses only for domain 1x1rank.com
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq[8473]: using local addresses only for domain 180searchassistant.com
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq[8473]: using local addresses only for domain 180hits.de
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq[8473]: using local addresses only for domain 123found.com
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq[8473]: using local addresses only for domain 101order.com
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq[8473]: using local addresses only for domain 101com.com
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq[8473]: using local addresses only for domain lan
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq[8473]: using nameserver 192.168.1.1#53
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq[8473]: using nameserver 192.168.1.254#53
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq[8473]: read /etc/hosts - 1 addresses
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq[8473]: read /tmp/hosts/dhcp - 1 addresses
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq[8473]: read /tmp/hosts/odhcpd - 1 addresses
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq-dhcp[8473]: read /etc/ethers - 0 addresses</code></pre></div>											<p class="post-edited">(Last edited by <strong>imbaSD</strong> on 30 Dec 2016, 00:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p348027">
				<div class="post-metadata">
					<div class="post-num">Post #349</div>
					<div class="post-author">Comitizer</div>
					<div class="post-datetime">
						30 Dec 2016, 05:05					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dibdot wrote:</cite><blockquote><div class="quotebox"><cite>Comitizer wrote:</cite><blockquote><p>So far this package is great.&nbsp; The only thing I would like is some more stats (similar to Pi Hole <a href="https://pi-hole.net/">https://pi-hole.net/</a>).&nbsp; It would be really cool to see what is being blocked and so forth.</p></blockquote></div><p>Currently I focus on fast &amp; neat dns adblocking - nothing more. Basic stats are only available via ubus call (see online doc).</p><br /><div class="quotebox"><cite>Comitizer wrote:</cite><blockquote><p>Regardless, I&#039;m loving the system so I wondering whether or not it is a good idea to enable ALL of the ad block lists.&nbsp; Is there any reason not to?&nbsp; Performance?&nbsp; What would the impact be?</p></blockquote></div><p>No (known) problems with that. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>I found the stats, thank you.&nbsp; That works ok.</p><p>As to the block lists, let&#039;s put it this way, what do you have enabled?&nbsp; <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />&nbsp; </p><p>But seriously, thank you for the package, it&#039;s fantastic.</p>											<p class="post-edited">(Last edited by <strong>Comitizer</strong> on 30 Dec 2016, 05:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p348031">
				<div class="post-metadata">
					<div class="post-num">Post #350</div>
					<div class="post-author">dibdot</div>
					<div class="post-datetime">
						30 Dec 2016, 07:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>imbaSD wrote:</cite><blockquote><div class="codebox"><pre><code>[....]
Fri Dec 30 00:07:58 2016 daemon.info dnsmasq[8473]: using local addresses only for domain 7bpeople.com</code></pre></div></blockquote></div><p>That&#039;s only a dnsmasq info, not an error. Please enable adblock debug in config, make a &#039;/etc/init.d/adblock restart&#039; and send the output of logread -e &quot;adblock&quot; - thanks.</p>									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 351 to 350 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 14 of 17</div><nav><ul><li><a href="viewtopic.php%3Fid=59803&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=59803&amp;p=12.html">12</a></li><li><a href="viewtopic.php%3Fid=59803&amp;p=13.html">13</a></li><li class="pagination-current"><span>14</span></li><li><a href="viewtopic.php%3Fid=59803&amp;p=15.html">15</a></li><li><a href="viewtopic.php%3Fid=59803&amp;p=16.html">16</a></li><li><a href="viewtopic.php%3Fid=59803&amp;p=17.html">17</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>