<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> OpenWrt as both DHCP client and Server</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 2 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p307391">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">dboa</div>
					<div class="post-datetime">
						12 Jan 2016, 23:49					</div>
				</div>
				<div class="post-content content">
					<p>I have to web logon on yhe network to be able to acess the web.<br />So I connect my laptop via ethernet cable and create a hotspot for my other devices.</p><p>I want to do this on my router. I need to configure the OpenWrt to be a DHCP client, get it&#039;s own IP and then create a DHCP server, so my devices are not on the Main network(so I don&#039;t have to logon on every device).</p><p>Anyone has any ideas?</p><p>I have and MR3020 btw</p><p>thank you all in advance</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p307460">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">silentcreek</div>
					<div class="post-datetime">
						13 Jan 2016, 11:04					</div>
				</div>
				<div class="post-content content">
					<p>You should be able to do that with any router. Just set the router to &quot;router mode&quot;, configure the WAN interface as DHCP client and you should be good to go. The router will hide your client computers because because they will be on a private network and communicate with the WAN-side is NAT. When your router is set up and you have a client connected, you should be able to access the web-logon from your client device to logon. If that doesn&#039;t work for you, you could also connect your client directly to the network, logon and then setup your router to clone the MAC address of your client computer, so that the primary network will think your router is your client.</p><p>The only thing that will most likely not work out of the box this way is an IPv6 connection. But you can setup NAT for IPv6 too, if you need - see <a href="https://forum.openwrt.org/viewtopic.php?pid=297795#p297795">this thread</a> for more details.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p307484">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">dboa</div>
					<div class="post-datetime">
						13 Jan 2016, 14:24					</div>
				</div>
				<div class="post-content content">
					<p>silentcreek, thank you for your reply.\</p><p>When I try to configure(on Luci) OpenWrt for dhcp client, the dhcp server starts working as a dhcp forwarder, and I lose the routers IP address. I need to failsafe mode it and reset to be able to connect to it again.<br />I tried many times to configure Luci, but always failed.</p><p>I need help in configuring it via ssh, witch I don&#039;t have much experience.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p307488">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						13 Jan 2016, 14:50					</div>
				</div>
				<div class="post-content content">
					<p>How are you connecting the device? You need two separate interfaces, configure the DHCP client on the WAN interface, and a fixed IP address plus a DHCP server on the LAN interface.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p307489">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">dboa</div>
					<div class="post-datetime">
						13 Jan 2016, 14:59					</div>
				</div>
				<div class="post-content content">
					<p>eduperez,</p><p>This router, MR3020 only has one Ethernet port, I should have mentioned it before, if I configure the DHCP client, I lose access to the device. I&#039;m hoping, when I get the DHCP server working, it will tell me it&#039;s IP address, buy connecting to it by wifi.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p307548">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						14 Jan 2016, 00:08					</div>
				</div>
				<div class="post-content content">
					<p>You need two interfaces, one interface as DHCP client and a different interface as a DHCP server; I do not think it is possible to configure both a DHCP server and client on the same interface. So, the question is: which interface are you going to use as a DHCP client, and which one as a DHCP server?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>