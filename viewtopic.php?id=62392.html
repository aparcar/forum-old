<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> How do I make OpenWRT part of an existing network?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 21 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p309124">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">kebdarge</div>
					<div class="post-datetime">
						26 Jan 2016, 22:59					</div>
				</div>
				<div class="post-content content">
					<p>I have a new router (TP-Link TL-WR1043ND 2.1) and flashed it with OpenWrt.</p><p>It has to be part of an existing network where another router is taking care of DHCP. </p><p>After some trial and error I find I have two possible scenarios, both not good.</p><p>1) I change nothing, the IP range is different then that of the rest of the network and I can access LuCi. Internet works fine but I can not access other devices on the network.</p><p>2) I set the router to be a client, the IP range is the same, internet works, I can access other devices, but I no longer can access LuCi. The router no longer shows up in network scans.</p><p>Can someone tell me how I can have it all?<br />- Same IP range<br />- Access to Internet<br />- Access to other devices on the same network<br />- Access to the router and LuCi.</p><p>Thanks so much for helping me solve this...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p309126">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">lizby</div>
					<div class="post-datetime">
						26 Jan 2016, 23:14					</div>
				</div>
				<div class="post-content content">
					<p>Don&#039;t know why you wouldn&#039;t have everything you want if you set up your router as a client using the proper gateway and change its ip address to one not in use on your existing network.</p><p>To avoid having other devices get dhcp &amp; dns services from your new router, and thus being locked out because it isn&#039;t really a gateway, run &quot;/etc/init.d/dnsmasq disable&quot;</p><p>That has bitten me a number of times.</p><p>If you still have problems, post more info, like content of /etc/config/network.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p309261">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">kebdarge</div>
					<div class="post-datetime">
						27 Jan 2016, 21:29					</div>
				</div>
				<div class="post-content content">
					<p>Hey,</p><p>Thnx for the answers. I am pretty new to this, so sometimes it is even hard to explain what I am doing... :-)</p><div class="quotebox"><blockquote><p>Don&#039;t know why you wouldn&#039;t have everything you want if you set up your router as a client using the proper gateway and change its ip address to one not in use on your existing network.</p></blockquote></div><p>Do I have to manually give it a fixed IP adres? Can I not have to main router assign an IP to the TP-Link. Just like all other devices on the network get one.</p><div class="quotebox"><blockquote><p>To avoid having other devices get dhcp &amp; dns services from your new router, and thus being locked out because it isn&#039;t really a gateway, run &quot;/etc/init.d/dnsmasq disable&quot;</p></blockquote></div><p>I am not such a SSH hero... I like to do this through the browser interface, is that also possible?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p309272">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">zo0ok</div>
					<div class="post-datetime">
						27 Jan 2016, 22:04					</div>
				</div>
				<div class="post-content content">
					<p>You already have another router doing:<br /> - NAT / Firewall (I suppose)<br /> - DHCP<br />That is mostly what you need.</p><p>What do you want OpenWRT/TL-WR1043ND to do for you and your network?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p309286">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">kebdarge</div>
					<div class="post-datetime">
						27 Jan 2016, 23:44					</div>
				</div>
				<div class="post-content content">
					<p>Hey zo0ok, the other router is the one I got from the cable company. It is a shitty closed device with terrible wifi. <br />Mostly I need the TP-Link to provide me with proper WiFi (different bands and a guest network would be really nice to have), but maybe it can also take over other task later as I get more used to OpenWrt. </p><p>I also heard you can do OpenVPN with it and maybe even host a tiny website of some sorts. Future stuff for which I need a router that is part of the network and I can start building upon.</p>											<p class="post-edited">(Last edited by <strong>kebdarge</strong> on 27 Jan 2016, 23:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p309305">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">npkamen</div>
					<div class="post-datetime">
						28 Jan 2016, 02:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>kebdarge wrote:</cite><blockquote><p>Hey zo0ok, the other router is the one I got from the cable company. It is a shitty closed device with terrible wifi. <br />Mostly I need the TP-Link to provide me with proper WiFi (different bands and a guest network would be really nice to have), but maybe it can also take over other task later as I get more used to OpenWrt. </p><p>I also heard you can do OpenVPN with it and maybe even host a tiny website of some sorts. Future stuff for which I need a router that is part of the network and I can start building upon.</p></blockquote></div><p>All pretty standard.&nbsp; Just follow the wiki entries for setting up the basics.&nbsp; Make sure you disable DHCP on the new router, give it a fixed IP address in the same network range as your current cable modem (so you can find it easily again), and out of the box it should be capable of what you want.</p><p>OpenVPN will require extra packages etc.&nbsp; To do this you&#039;ll need to assign the gateway and DNS on the new OpenWRT router to be your cable modem and that should allow you to install packages etc.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p309310">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">lizby</div>
					<div class="post-datetime">
						28 Jan 2016, 03:00					</div>
				</div>
				<div class="post-content content">
					<p>You can certainly use dhcp to get an ip for your new router, but then you need to figure out what it is. I personally feel that assigning a fixed address is best.</p><p>Are you saying that once you have done that (with dhcp, for instance), you can&#039;t get to luci by entering that ip address in a browser?</p><p>What version of openWrt did you install? Luci might not be included unless you built your own or used trunk (not usually the best idea for a novice). If you need to install Luci, look at: <a href="https://wiki.openwrt.org/zh-cn/doc/howto/luci">https://wiki.openwrt.org/zh-cn/doc/howto/luci</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p309776">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">kebdarge</div>
					<div class="post-datetime">
						31 Jan 2016, 21:56					</div>
				</div>
				<div class="post-content content">
					<p>Thnx all.</p><p>I powercyled the device and set a fixed IP and now I can access LuCi.</p><p>The thing that bugs me still is that I do not understand why I can no set the router in client mode, let the main DHCP server give it an IP and then access it through that IP... Why does it need to be a fixed number?</p><p>But anyways: thank you for helping already!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p309880">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">lizby</div>
					<div class="post-datetime">
						1 Feb 2016, 17:35					</div>
				</div>
				<div class="post-content content">
					<p>Glad you have it working with a static ip.</p><p>If the device gets an IP through DHCP, and you know what it is, I don&#039;t know of any reason why Luci wouldn&#039;t work (if it&#039;s working when you have assigned a static ip).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p310079">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">ckm</div>
					<div class="post-datetime">
						3 Feb 2016, 02:33					</div>
				</div>
				<div class="post-content content">
					<p>sounds like you want your new router to be a AP or set it up as a repeater and put it in another room.If you got crappy wifi try this it worked for me.</p><p><a href="https://www.youtube.com/watch?v=8v2NyY2sK_M">https://www.youtube.com/watch?v=8v2NyY2sK_M</a></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>