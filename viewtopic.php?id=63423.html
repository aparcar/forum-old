<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Problems installing SQM.</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 23 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p315140">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">willard</div>
					<div class="post-datetime">
						16 Mar 2016, 17:32					</div>
				</div>
				<div class="post-content content">
					<p>My settings: <span class="postimg"><img src="http://imgur.com/O2leykt" alt="http://imgur.com/O2leykt" /></span></p><p>Hey, folks. I recently tried to switch over to CC 15.05 from BB and everything went well, except for when I tried to install luci-app-sqm. My router (TP-Link TL-WR841N/ND v9) only has 4 MB, so it complained about not having enough space when I tried. As such, I decided I&#039;d just switch back to BB. However, after the switch I got an error when trying to install luci-app-sqm (which I previously had installed and working):</p><br /><p>&nbsp; &nbsp;</p><div class="quotebox"><blockquote><p>root@OpenWrt:~# opkg install luci-app-sqm</p><p>&nbsp; &nbsp; Installing luci-app-sqm (1.0.3-1) to root...</p><p>&nbsp; &nbsp; Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/packages/luci-app-sqm_1.0.3-1_all.ipk">http://downloads.openwrt.org/chaos_calm … -1_all.ipk</a></p><p>&nbsp; &nbsp; .</p><p>&nbsp; &nbsp; Multiple packages (kmod-ipt-core and kmod-ipt-core) providing same name marked HOLD or PREFER. Using latest.</p><p>&nbsp; &nbsp; Multiple packages (kmod-ipt-core and kmod-ipt-core) providing same name marked HOLD or PREFER. Using latest.</p><p>&nbsp; &nbsp; Multiple packages (kmod-ipt-core and kmod-ipt-core) providing same name marked HOLD or PREFER. Using latest.</p><p>&nbsp; &nbsp; Multiple packages (kmod-ipt-conntrack and kmod-ipt-conntrack) providing same name marked HOLD or PREFER. Using latest.</p><p>&nbsp; &nbsp; Collected errors:</p><p>&nbsp; &nbsp; &nbsp; &nbsp; satisfy_dependencies_for: Cannot satisfy the following dependencies for luci-app-sqm:</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;kernel (= 3.18.20-1-7bed08fa9c06eb8089e82c200340ec66) *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;kernel (= 3.18.20-1-7bed08fa9c06eb8089e82c200340ec66) *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;kernel (= 3.18.20-1-7bed08fa9c06eb8089e82c200340ec66) *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;kernel (= 3.18.20-1-7bed08fa9c06eb8089e82c200340ec66) *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;kernel (= 3.18.20-1-7bed08fa9c06eb8089e82c200340ec66) *</p><p>&nbsp; &nbsp; &nbsp; &nbsp; opkg_install_cmd: Cannot install package luci-app-sqm.</p></blockquote></div><br /><br /><br /><p>I then tried to force it. This gave the readout below, but seemed to work. I&#039;m able to get to SQM in my router and have it setup just as I had it before, but it doesn&#039;t seem to be doing anything according to the speedtests I am running (still registering very bad bufferbloat).</p><br /><br /><div class="quotebox"><blockquote><p>root@OpenWrt:~# opkg install --force-depends luci-app-sqm</p><p>&nbsp; &nbsp; Installing luci-app-sqm (1.0.3-1) to root...</p><p>&nbsp; &nbsp; Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/packages/luci-app-sqm_1.0.3-1_all.ipk">http://downloads.openwrt.org/chaos_calm … -1_all.ipk</a></p><p>.</p><p>Multiple packages (kmod-ipt-core and kmod-ipt-core) providing same name marked HOLD or PREFER. Using latest.</p><p>Multiple packages (kmod-ipt-core and kmod-ipt-core) providing same name marked HOLD or PREFER. Using latest.</p><p>Multiple packages (kmod-ipt-core and kmod-ipt-core) providing same name marked HOLD or PREFER. Using latest.</p><p>Multiple packages (kmod-ipt-conntrack and kmod-ipt-conntrack) providing same name marked HOLD or PREFER. Using latest.</p><p>Installing sqm-scripts (1.0.3-1) to root...</p><p>Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/packages/sqm-scripts_1.0.3-1_all.ipk">http://downloads.openwrt.org/chaos_calm … -1_all.ipk</a></p><p>.</p><p>Installing tc (4.0.0-1) to root...</p><p>Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/base/tc_4.0.0-1_ar71xx.ipk">http://downloads.openwrt.org/chaos_calm … ar71xx.ipk</a></p><p>.</p><p>Installing kmod-sched-core (3.18.20-1) to root...</p><p>Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/base/kmod-sched-core_3.18.20-1_ar71xx.ipk">http://downloads.openwrt.org/chaos_calm … ar71xx.ipk</a></p><p>.</p><p>Installing kmod-sched (3.18.20-1) to root...</p><p>Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/base/kmod-sched_3.18.20-1_ar71xx.ipk">http://downloads.openwrt.org/chaos_calm … ar71xx.ipk</a></p><p>.</p><p>Installing kmod-ifb (3.18.20-1) to root...</p><p>Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/base/kmod-ifb_3.18.20-1_ar71xx.ipk">http://downloads.openwrt.org/chaos_calm … ar71xx.ipk</a></p><p>.</p><p>Installing ip (4.0.0-1) to root...</p><p>Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/base/ip_4.0.0-1_ar71xx.ipk">http://downloads.openwrt.org/chaos_calm … ar71xx.ipk</a></p><p>.</p><p>Installing iptables-mod-ipopt (1.4.21-1) to root...</p><p>Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/base/iptables-mod-ipopt_1.4.21-1_ar71xx.ipk">http://downloads.openwrt.org/chaos_calm … ar71xx.ipk</a></p><p>.</p><p>Installing kmod-ipt-ipopt (3.18.20-1) to root...</p><p>Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/base/kmod-ipt-ipopt_3.18.20-1_ar71xx.ipk">http://downloads.openwrt.org/chaos_calm … ar71xx.ipk</a></p><p>.</p><p>Installing iptables-mod-conntrack-extra (1.4.21-1) to root...</p><p>Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/base/iptables-mod-conntrack-extra_1.4.21-1_ar71xx.ipk">http://downloads.openwrt.org/chaos_calm … ar71xx.ipk</a></p><p>.</p><p>Installing kmod-ipt-conntrack-extra (3.18.20-1) to root...</p><p>Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/base/kmod-ipt-conntrack-extra_3.18.20-1_ar71xx.ipk">http://downloads.openwrt.org/chaos_calm … ar71xx.ipk</a></p><p>.</p><p>Configuring ip.</p><p>//usr/lib/opkg/info/ip.postinst: line 4: default_postinst: not found</p><p>Configuring kmod-ipt-conntrack-extra.</p><p>//usr/lib/opkg/info/kmod-ipt-conntrack-extra.postinst: line 4: default_postinst: not found</p><p>Configuring kmod-sched-core.</p><p>//usr/lib/opkg/info/kmod-sched-core.postinst: line 4: default_postinst: not found</p><p>Configuring tc.</p><p>//usr/lib/opkg/info/tc.postinst: line 4: default_postinst: not found</p><p>Configuring kmod-ipt-ipopt.</p><p>//usr/lib/opkg/info/kmod-ipt-ipopt.postinst: line 4: default_postinst: not found</p><p>Configuring iptables-mod-ipopt.</p><p>//usr/lib/opkg/info/iptables-mod-ipopt.postinst: line 4: default_postinst: not found</p><p>Configuring kmod-sched.</p><p>//usr/lib/opkg/info/kmod-sched.postinst: line 4: default_postinst: not found</p><p>Configuring kmod-ifb.</p><p>//usr/lib/opkg/info/kmod-ifb.postinst: line 4: default_postinst: not found</p><p>Configuring iptables-mod-conntrack-extra.</p><p>//usr/lib/opkg/info/iptables-mod-conntrack-extra.postinst: line 4: default_postinst: not found</p><p>Configuring sqm-scripts.</p><p>//usr/lib/opkg/info/sqm-scripts.postinst: line 4: default_postinst: not found</p><p>Configuring luci-app-sqm.</p><p>//usr/lib/opkg/info/luci-app-sqm.postinst: line 4: default_postinst: not found</p><p>Collected errors:</p><p>&nbsp; &nbsp; satisfy_dependencies_for: Cannot satisfy the following dependencies for luci-app-sqm:</p><p>&nbsp; &nbsp; &nbsp;kernel (= 3.18.20-1-7bed08fa9c06eb8089e82c200340ec66) *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;kernel (= 3.18.20-1-7bed08fa9c06eb8089e82c200340ec66) *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;kernel (= 3.18.20-1-7bed08fa9c06eb8089e82c200340ec66) *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;kernel (= 3.18.20-1-7bed08fa9c06eb8089e82c200340ec66) *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;kernel (= 3.18.20-1-7bed08fa9c06eb8089e82c200340ec66) *</p><p>&nbsp; &nbsp; resolve_conffiles: Existing conffile /etc/config/sqm is different from the conffile in the new package. The new conffile will be placed at /etc/config/sqm-opkg.</p><p>&nbsp; &nbsp; pkg_run_script: package &quot;ip&quot; postinst script returned status 127.</p><p>&nbsp; &nbsp; opkg_configure: ip.postinst returned 127.</p><p>&nbsp; &nbsp; pkg_run_script: package &quot;kmod-ipt-conntrack-extra&quot; postinst script returned status 127.</p><p>&nbsp; &nbsp; opkg_configure: kmod-ipt-conntrack-extra.postinst returned 127.</p><p>&nbsp; &nbsp; pkg_run_script: package &quot;kmod-sched-core&quot; postinst script returned status 127.</p><p>&nbsp; &nbsp; opkg_configure: kmod-sched-core.postinst returned 127.</p><p>&nbsp; &nbsp; pkg_run_script: package &quot;tc&quot; postinst script returned status 127.</p><p>&nbsp; &nbsp; opkg_configure: tc.postinst returned 127.</p><p>&nbsp; &nbsp; pkg_run_script: package &quot;kmod-ipt-ipopt&quot; postinst script returned status 127.</p><p>&nbsp; &nbsp; opkg_configure: kmod-ipt-ipopt.postinst returned 127.</p><p>&nbsp; &nbsp; pkg_run_script: package &quot;iptables-mod-ipopt&quot; postinst script returned status 127.</p><p>&nbsp; &nbsp; opkg_configure: iptables-mod-ipopt.postinst returned 127.</p><p>&nbsp; &nbsp; pkg_run_script: package &quot;kmod-sched&quot; postinst script returned status 127.</p><p>&nbsp; &nbsp; opkg_configure: kmod-sched.postinst returned 127.</p><p>&nbsp; &nbsp; pkg_run_script: package &quot;kmod-ifb&quot; postinst script returned status 127.</p><p>&nbsp; &nbsp; opkg_configure: kmod-ifb.postinst returned 127.</p><p>&nbsp; &nbsp; pkg_run_script: package &quot;iptables-mod-conntrack-extra&quot; postinst script returned status 127.</p><p>&nbsp; &nbsp; opkg_configure: iptables-mod-conntrack-extra.postinst returned 127.</p><p>&nbsp; &nbsp; pkg_run_script: package &quot;sqm-scripts&quot; postinst script returned status 127.</p><p>&nbsp; &nbsp; opkg_configure: sqm-scripts.postinst returned 127.</p><p>&nbsp; &nbsp; pkg_run_script: package &quot;luci-app-sqm&quot; postinst script returned status 127.</p><p>&nbsp; &nbsp; opkg_configure: luci-app-sqm.postinst returned 127.</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315141">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						16 Mar 2016, 17:38					</div>
				</div>
				<div class="post-content content">
					<p>Your opkg config seems now to point into the Chaos Calmer packages instead of BB14.07 packages...<br />If you are using BB14.07, you need to install its packages.</p><p>If you downgrade firmware, it would best to start from a clean slate with fresh settings.<br />Either flash the firmware without preserving settings, or after the flash run &quot;firstboot&quot; from console, or reset from Luci.</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 16 Mar 2016, 17:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315862">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">willard</div>
					<div class="post-datetime">
						20 Mar 2016, 20:43					</div>
				</div>
				<div class="post-content content">
					<p>Thank you. This fixed the problem. Someone also provided me with an image that works with CC 15.05.1 (thank you /u/r3t3ch from Reddit!): <a href="https://dl.dropboxusercontent.com/s/ua8bckh2wu9c3ts/openwrt-15.05.1-ar71xx-generic-tl-wr841.7z">https://dl.dropboxusercontent.com/s/ua8 … l-wr841.7z</a></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>