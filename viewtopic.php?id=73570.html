<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Home Hub - no /etc/config/wireless generated</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 23 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p373939">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Vaudane</div>
					<div class="post-datetime">
						17 Mar 2018, 22:45					</div>
				</div>
				<div class="post-content content">
					<p>Hello all,</p><p>Forgive me if this has been mentioned before, I couldn&#039;t see anything on the search.</p><p>Decided to upgrade home hub v5a to openwrt as a project. got everything working until it came to activating wifi radios. nothing. No file created, iw list empty. I&#039;ve attached the &quot;dmesg | grep pci&quot; output, looks like it can&#039;t find the firmware? How would I correct this?</p><p>Any help appreciated <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>edit: using lede 17.01.4.</p><br /><div class="codebox"><pre><code>[    0.232783] PCI host bridge /fpi@10000000/pci@E105400 ranges:
[    0.366774] PCI host bridge /fpi@10000000/pcie@d900000 ranges:
[    0.406467] pci_bus 0000:00: root bus resource [mem 0x18000000-0x19ffffff]
[    0.413374] pci_bus 0000:00: root bus resource [io  0x1ae00000-0x1affffff]
[    0.420318] pci_bus 0000:00: root bus resource [??? 0x00000000 flags 0x0]
[    0.427174] pci_bus 0000:00: No busn resource found for root bus, will use [bus 00-ff]
[    0.435224] pci 0000:00:0e.0: [168c:ff1d] type 00 class 0x020000
[    0.435283] pci 0000:00:0e.0: reg 0x10: [mem 0x00000000-0x0000ffff]
[    0.435646] pci_bus 0000:00: busn_res: [bus 00-ff] end is updated to 00
[    0.435687] pci 0000:00:0e.0: BAR 0: assigned [mem 0x18000000-0x1800ffff]
[    0.446539] pci_bus 0000:01: root bus resource [mem 0x1c000000-0x1cffffff]
[    0.453454] pci_bus 0000:01: root bus resource [io  0x1d800000-0x1d8fffff]
[    0.460395] pci_bus 0000:01: root bus resource [??? 0x00000000 flags 0x0]
[    0.467250] pci_bus 0000:01: No busn resource found for root bus, will use [bus 01-ff]
[    0.475279] pci 0000:01:00.0: [1bef:0011] type 01 class 0x060000
[    0.475314] ifx_pcie_rc_class_early_fixup: fixed pcie host bridge to pci-pci bridge
[    0.493061] pci 0000:01:00.0: PME# supported from D0 D3hot
[    0.493368] pci 0000:01:00.0: bridge configuration invalid ([bus 02-00]), reconfiguring
[    0.501497] pci 0000:02:00.0: [168c:003c] type 00 class 0x028000
[    0.501585] pci 0000:02:00.0: reg 0x10: [mem 0x00000000-0x001fffff 64bit]
[    0.501655] pci 0000:02:00.0: reg 0x30: [mem 0x00000000-0x0000ffff pref]
[    0.501759] pci 0000:02:00.0: supports D1 D2
[    0.502040] pci_bus 0000:02: busn_res: [bus 02-ff] end is updated to 02
[    0.502078] pci_bus 0000:01: busn_res: [bus 01-ff] end is updated to 02
[    0.502131] pci 0000:01:00.0: BAR 8: assigned [mem 0x1c000000-0x1c1fffff]
[    0.508808] pci 0000:01:00.0: BAR 9: assigned [mem 0x1c200000-0x1c2fffff pref]
[    0.516075] pci 0000:02:00.0: BAR 0: assigned [mem 0x1c000000-0x1c1fffff 64bit]
[    0.523473] pci 0000:02:00.0: BAR 6: assigned [mem 0x1c200000-0x1c20ffff pref]
[    0.530736] pci 0000:01:00.0: PCI bridge to [bus 02]
[    0.535774] pci 0000:01:00.0:   bridge window [mem 0x1c000000-0x1c1fffff]
[    0.542630] pci 0000:01:00.0:   bridge window [mem 0x1c200000-0x1c2fffff pref]
[    0.549999] ifx_pcie_bios_map_irq port 0 dev 0000:01:00.0 slot 0 pin 1
[    0.556605] ifx_pcie_bios_map_irq dev 0000:01:00.0 irq 144 assigned
[    0.562948] ifx_pcie_bios_map_irq port 0 dev 0000:02:00.0 slot 0 pin 1
[    0.569614] ifx_pcie_bios_map_irq dev 0000:02:00.0 irq 144 assigned
[   10.669373] ath10k_pci 0000:02:00.0: pci irq legacy oper_irq_mode 1 irq_mode 0 reset_mode 0
[   10.866383] ath10k_pci 0000:02:00.0: Direct firmware load for ath10k/pre-cal-pci-0000:02:00.0.bin failed with error -2
[   10.875702] ath10k_pci 0000:02:00.0: Falling back to user helper
[   10.995305] firmware ath10k!pre-cal-pci-0000:02:00.0.bin: firmware_loading_store: map pages failed
[   11.003229] ath10k_pci 0000:02:00.0: Direct firmware load for ath10k/cal-pci-0000:02:00.0.bin failed with error -2
[   11.013238] ath10k_pci 0000:02:00.0: Falling back to user helper
[   11.293170] firmware ath10k!cal-pci-0000:02:00.0.bin: firmware_loading_store: map pages failed
[   11.543753] ath10k_pci 0000:02:00.0: qca988x hw2.0 target 0x4100016c chip_id 0x043202ff sub 0000:0000
[   11.551622] ath10k_pci 0000:02:00.0: kconfig debug 0 debugfs 1 tracing 0 dfs 1 testmode 1
[   11.566981] ath10k_pci 0000:02:00.0: firmware ver 10.2.4-1.0-00016 api 5 features no-p2p,raw-mode,mfp crc32 0c5668f8
[   11.616196] ath10k_pci 0000:02:00.0: board id is not exist in otp, ignore it
[   11.621982] ath10k_pci 0000:02:00.0: Direct firmware load for ath10k/QCA988X/hw2.0/board-2.bin failed with error -2
[   11.632289] ath10k_pci 0000:02:00.0: Falling back to user helper
[   11.758576] ath10k_pci 0000:02:00.0: board_file api 1 bmi_id N/A crc32 bebc7c08
[   11.884911] ath10k_pci 0000:02:00.0: otp calibration failed: 2
[   11.889342] ath10k_pci 0000:02:00.0: failed to run otp: -22
[   11.894897] ath10k_pci 0000:02:00.0: could not init core (-22)
[   11.900861] ath10k_pci 0000:02:00.0: could not probe fw (-22)
[   12.057240] owl-loader 0000:00:0e.0: Direct firmware load for ath9k-eeprom-pci-0000:00:0e.0.bin failed with error -2
[   12.344743] firmware ath9k-eeprom-pci-0000:00:0e.0.bin: firmware_loading_store: map pages failed</code></pre></div>											<p class="post-edited">(Last edited by <strong>Vaudane</strong> on 17 Mar 2018, 22:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p373942">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">rizla3066</div>
					<div class="post-datetime">
						18 Mar 2018, 00:50					</div>
				</div>
				<div class="post-content content">
					<p>Did you backup first?</p><p>In particular the caldata? I believe it is used for wifi calibration.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p373943">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Vaudane</div>
					<div class="post-datetime">
						18 Mar 2018, 00:57					</div>
				</div>
				<div class="post-content content">
					<p>I have the full nanddump which from what I understand has the caldata in it, but I don&#039;t have any separate calibration files. Do I need to restore to extract this?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p373944">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						18 Mar 2018, 01:13					</div>
				</div>
				<div class="post-content content">
					<p>It is normal for ath10k to report several firmware load failures.&nbsp; It tries several different file names, most of which will not exist in a given install.</p><p>But ath9k doesn&#039;t use firmware.&nbsp; It appears that your caldata (EEPROM or ART) partition is bad.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p373947">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Vaudane</div>
					<div class="post-datetime">
						18 Mar 2018, 04:04					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the pointers to the caldata being bad. I reinstalled the stock BT firmware, locked it all back up to &quot;as BT would&nbsp; want it&quot;, then started the install again. making sure to detach, and attach ubi&#039;s where required (oddly enough it was UBI -m 3 that was the one containing the cal data, not 4 or 5 like i see in guides).</p><p>But yes, fresh install, and now all the radios are there in /etc/config/wireless!</p><p>Thank you!</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>