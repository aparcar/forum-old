<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WR1043, PPPoE and a confused Newbie</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 2 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p157764">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">hansdampf</div>
					<div class="post-datetime">
						17 Feb 2012, 18:46					</div>
				</div>
				<div class="post-content content">
					<p>Heyho.</p><p>Firstofall: flashing my router worked perfectly easy, maybe to easy. </p><p>The more I read documentations, FAQs etc. the more confused I get, I think I might need some help getting the point of virtual and physical interfaces, their naming, the default configuration and so on.</p><p>1. What I wanna do:<br />Connect my router to a modem (alice IAD, I hate it ;) ) via PPPoE. </p><p>As far as i know, i have to configure one of the 1043&#039;s ports to do so, haven&#039;t I?<br />With something like this:</p><p>config &#039;interface&#039; &#039;wan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ifname&#039; &#039;eth1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;proto&#039; &#039;pppoe&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;username&#039; &#039;XXXXXX&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;password&#039; &#039;XXXXXX&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;defaultroute&#039; &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;peerdns&#039; &#039;1&#039;</p><p>(Is that everything the router needs to know for establishing a connection via the modem (and not by itself!)?)</p><p>But: What actually is a port? Where do I plug in my cable and how is that named in the CUI?</p><p>Okay, let&#039;s say I take the WAN-port (the port named &quot;wan&quot; on the box ...)<br />I go to that page <a href="http://wiki.openwrt.org/toh/tp-link/tl-wr1043nd">http://wiki.openwrt.org/toh/tp-link/tl-wr1043nd</a> to check out the &#039;layout&#039; and find these two tables:<br />&quot;<br />The default network configuration is:<br />Interface Name &nbsp; &nbsp; Description &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Default configuration<br />br-lan &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;LAN &amp; WiFi &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;192.168.1.1/24<br />eth0 &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;LAN ports (1 to 4) + WAN &nbsp; &nbsp; None<br />wlan0 &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;WiFi &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Disabled <br />&quot;<br />and<br />&quot;<br />Switch Ports (for VLANs)</p><p>Numbers 1-4 are Ports 1-4 as labeled on the unit, number 0 is the Internet (WAN) on the unit, 5 is the internal connection to the router itself.<br />Port &nbsp; &nbsp; Switch port<br />Internet (WAN) &nbsp; &nbsp; 0<br />LAN 1 &nbsp; &nbsp; 1<br />LAN 2 &nbsp; &nbsp; 2<br />LAN 3 &nbsp; &nbsp; 3<br />LAN 4 &nbsp; &nbsp; 4<br />Gigabit Media Independent Interface &nbsp; &nbsp; 5 <br />&quot;<br />My questions:<br />Where is the difference between &quot;interface&quot; and &quot;ifname&quot; in the config entry? Which is the one where my cable is plugged in?<br />Where is the difference between br-lan and eth0? <br />Connecting my router to the modem via the WAN-labeled port on the unit would therefore mean the interface eth0, and in the config-example above &quot;ifname eth1&quot; the router is connected via the LAN1-port to the modem? (and a computer plugged in in LAN3 would be eth3 or eth0.3?) <br />Why do I need that bridge?</p><p>Then, a question on this howto: <a href="http://wiki.openwrt.org/doc/howto/access.modem.through.nat">http://wiki.openwrt.org/doc/howto/acces … hrough.nat</a></p><p>What does that part mean: <br />&quot;If the modem should have an IP address like say 192.168.1.8, you could not use the network 192.168.1.0/24 for your LAN and at the same time access your modem with this method. Use any other network in that case, like 192.168.0.0/24 or 192.168.33.0/24. &quot; ?<br />(What means &quot;LAN&quot; in this case?)</p><br /><p>Would be great if somebody could help me.</p>											<p class="post-edited">(Last edited by <strong>hansdampf</strong> on 17 Feb 2012, 18:46)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p157767">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						17 Feb 2012, 19:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hansdampf wrote:</cite><blockquote><p>As far as i know, i have to configure one of the 1043&#039;s ports to do so, haven&#039;t I?<br />With something like this:[...]</p></blockquote></div><p>Looks almost right but the ifname should be eth0.2, as used in the default config.</p><div class="quotebox"><cite>hansdampf wrote:</cite><blockquote><p>But: What actually is a port? Where do I plug in my cable and how is that named in the CUI?</p></blockquote></div><p>Its named WAN or Internet on the case and named WAN in the GUI.</p><br /><div class="quotebox"><cite>hansdampf wrote:</cite><blockquote><p>Where is the difference between &quot;interface&quot; and &quot;ifname&quot; in the config entry? Which is the one where my cable is plugged in?</p></blockquote></div><p>Interface is a symbolic name (&quot;lan&quot;, &quot;wan&quot;, &quot;foobar&quot;) and ifname the used Linux network device (&quot;eth0&quot;, &quot;eth1&quot;, &quot;eth0.1&quot;, ...)</p><div class="quotebox"><cite>hansdampf wrote:</cite><blockquote><p>Where is the difference between br-lan and eth0?</p></blockquote></div><p>&quot;br-lan&quot; is a software bridge, &quot;eth0&quot; is the switch hardware.</p><div class="quotebox"><cite>hansdampf wrote:</cite><blockquote><p>Connecting my router to the modem via the WAN-labeled port on the unit would therefore mean the interface eth0, and in the config-example above &quot;ifname eth1&quot; the router is connected via the LAN1-port to the modem? (and a computer plugged in in LAN3 would be eth3 or eth0.3?)</p></blockquote></div><p>No. Ports LAN1-LAN4 appear as &quot;eth0.1&quot;, the Internet port appears as &quot;eth0.2&quot;. The relation of eth0.X devices to physical switch ports is specified by switch_vlan sections. </p><div class="quotebox"><cite>hansdampf wrote:</cite><blockquote><p>Why do I need that bridge?</p></blockquote></div><p>To attach wireless (yet another independant interface, usually &quot;wlan0&quot;) to the LAN (&quot;eth0.1&quot;), its what most users expect when setting up a wireless AP.</p><div class="quotebox"><cite>hansdampf wrote:</cite><blockquote><p>Then, a question on this howto: <a href="http://wiki.openwrt.org/doc/howto/access.modem.through.nat">http://wiki.openwrt.org/doc/howto/acces … hrough.nat</a><br />What does that part mean:</p></blockquote></div><p>It basically means that you should never use the same subnet on two different interfaces, it will break the routing.</p><div class="quotebox"><cite>hansdampf wrote:</cite><blockquote><p>(What means &quot;LAN&quot; in this case?)</p></blockquote></div><p>It means the interface specified by &quot;config interface lan&quot;.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p157769">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">hansdampf</div>
					<div class="post-datetime">
						17 Feb 2012, 19:18					</div>
				</div>
				<div class="post-content content">
					<p>Thank you very much. That helped me a lot (especially the eth0.2-default-thingy). So, back to work then ,)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p157804">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">makarel</div>
					<div class="post-datetime">
						18 Feb 2012, 01:08					</div>
				</div>
				<div class="post-content content">
					<p>load luci interface.. its easyer 2 set up router that way<br />u can remove it after uve done config</p><p>ps: u r right... openwrt documentation is a mess... its like u have programs(some of them r foulty) and u have 2 discover by urself how they work...</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>