<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Bricked Carambola2</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 18 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p232673">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">bajajhiteshster</div>
					<div class="post-datetime">
						7 May 2014, 11:54					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I ordered Carambola2, then followed steps as mentioned here <a href="http://8devices.com/wiki_carambola/doku.php/carambola_where_to_start.">http://8devices.com/wiki_carambola/doku … _to_start.</a></p><p>Then I performed make menuconfig to have u-boot image. As mentioned here<br /><a href="http://8devices.com/community/viewtopic.php?f=13&amp;t=679">http://8devices.com/community/viewtopic … &amp;t=679</a></p><p>Then I tried to flash new uboot image formed &quot;openwrt-ar71xx-generic-nbg460n_550n_550nh-u-boot.bin&quot; as mentioned <a href="https://github.com/pepe2k/u-boot_mod#using-uart-u-boot-console-and-tftp-server">https://github.com/pepe2k/u-boot_mod#us … ftp-server</a></p><p>But after reset, i am not able to get serial. </p><p>I think, u-boot image formed was wrong, can&nbsp; anyone know how to get it back.</p><p>Or any step by step to perform JTAG or some other serial method.</p>											<p class="post-edited">(Last edited by <strong>bajajhiteshster</strong> on 7 May 2014, 11:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232679">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">franz.flasch</div>
					<div class="post-datetime">
						7 May 2014, 13:34					</div>
				</div>
				<div class="post-content content">
					<p>Hi bajajhiteshster!</p><p>You should have kept the original u-boot on the board. A not working bootloader is not the best situation. I had the same Problem with my router (which has the same CPU) and I had to desolder the SPI flash chip to reflash it with an external SPI programmer. However you are lucky: The Carambola2 SPI flash can be reprogrammed without desoldering the flash chip:</p><p>You just need an external SPI programmer and connect it with the spi connector on the dev board - as described here: <a href="http://8devices.com/community/viewtopic.php?f=5&amp;t=406">http://8devices.com/community/viewtopic … &amp;t=406</a></p><p>I am using this SPI programmer:<br /><a href="http://at.mouser.com/ProductDetail/FTDI/UM232H/?qs=rzPzygjq8vJshyX0tvqkbA==">http://at.mouser.com/ProductDetail/FTDI … X0tvqkbA==</a></p><p>Regards,<br />Franz</p>											<p class="post-edited">(Last edited by <strong>franz.flasch</strong> on 7 May 2014, 13:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p236552">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">valentt</div>
					<div class="post-datetime">
						12 Jun 2014, 22:47					</div>
				</div>
				<div class="post-content content">
					<p>Looks like mine is also bricked <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /><br />I built my own uboot image, and you can use it from here if you wish:<br /><a href="https://dl.dropboxusercontent.com/u/184632/uboot_for_8devices_carambola2.bin">https://dl.dropboxusercontent.com/u/184 … mbola2.bin</a><br /><a href="https://dl.dropboxusercontent.com/u/184632/uboot_for_8devices_carambola2.md5">https://dl.dropboxusercontent.com/u/184 … mbola2.md5</a></p><p>Here is the procedure I used to compile uboot from pepe2k git sources:</p><p>git clone <a href="https://github.com/pepe2k/u-boot_mod.git">https://github.com/pepe2k/u-boot_mod.git</a><br />cd u-boot_mod/<br />wget <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/OpenWrt-Toolchain-ar71xx-for-mips_r2-gcc-4.6-linaro_uClibc-0.9.33.2.tar.bz2">http://downloads.openwrt.org/attitude_a … .2.tar.bz2</a><br />tar xvjf OpenWrt-Toolchain-ar71xx-for-mips_r2-gcc-4.6-linaro_uClibc-0.9.33.2.tar.bz2<br />mv OpenWrt-Toolchain-ar71xx-for-mips_r2-gcc-4.6-linaro_uClibc-0.9.33.2/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/ toolchain<br />nano Makefile</p><p>&nbsp; &nbsp; export BUILD_TOPDIR=$(PWD)<br />&nbsp; &nbsp; export STAGING_DIR=$(BUILD_TOPDIR)/tmp</p><p>&nbsp; &nbsp; export MAKECMD=make --silent ARCH=mips CROSS_COMPILE=mips-openwrt-linux-uclibc-<br />&nbsp; &nbsp; export PATH:=$(BUILD_TOPDIR)/toolchain/bin/:$(PATH)</p><p>&nbsp; &nbsp; # boot delay (time to autostart boot command)<br />&nbsp; &nbsp; export CONFIG_BOOTDELAY=1</p><p>&nbsp; &nbsp; # uncomment following line, to disable output in U-Boot console<br />&nbsp; &nbsp; export DISABLE_CONSOLE_OUTPUT=1</p><p>make 8devices_carambola2</p><p>ls -al bin/<br />total 272<br />drwxr-xr-x 2 valent valent&nbsp; &nbsp;4096 Lip 12 21:03 .<br />drwxr-xr-x 9 valent valent&nbsp; &nbsp;4096 Lip 12 21:01 ..<br />-rw-r--r-- 1 valent valent&nbsp; &nbsp; &nbsp;57 Lip 12 20:54 README<br />-rw-r--r-- 1 valent valent 262144 Lip 12 21:03 uboot_for_8devices_carambola2.bin<br />-rw-r--r-- 1 valent valent&nbsp; &nbsp; &nbsp;68 Lip 12 21:03 uboot_for_8devices_carambola2.md5</p><p>and then put carambola to bootloaded mode and issued these commands:<br />setenv ipaddr 192.168.1.1<br />setenv serverip 192.168.1.2<br />tftpboot 0x80800000 uboot_for_8devices_carambola2.bin<br />erase 0x9F000000 +0x10000<br />cp.b 0x80800000 0x9F000000 0x10000<br />reset</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p242070">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">valentt</div>
					<div class="post-datetime">
						29 Jul 2014, 23:31					</div>
				</div>
				<div class="post-content content">
					<p>No wonder that I bricked it when I didn&#039;t read the documentation properly. Carambola has 256kB flash (40000 blocks) not 64kB (10000 blocks) as most routers do!</p><p>So I flashed only 1/4 of firmware and that bricked it, but I was able to repair it with external flash.</p><p>So this is how you should flash it:</p><br /><p>setenv ipaddr 192.168.1.1<br />setenv serverip 192.168.1.2<br />tftpboot 0x80800000 uboot_for_8devices_carambola2.bin<br />erase 0x9F000000 +0x40000<br />cp.b 0x80800000 0x9F000000 0x40000<br />reset</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>