<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TP-Link WR841N V8.4 bricked or another option?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p216618">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">rapartist</div>
					<div class="post-datetime">
						3 Nov 2013, 19:15					</div>
				</div>
				<div class="post-content content">
					<p>Hello great OpenWRT Forum,</p><p>I bricked my new TP-Link WR841N V8.4.<br />I tried to adjust Firewall Setting following a guide here in on the forum. Accidently I changed the LAN setting: Input to Reject.<br />Now I can&#039;t connect to the router via 192.168.1.1. I tried to reset but the hardware buttons are not working properly.<br />Because of that I can&#039;t enter failsafe mode.</p><p>Is there another way to get into config without debricking the router?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p216625">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						3 Nov 2013, 20:38					</div>
				</div>
				<div class="post-content content">
					<p>you tried EVERY button? during first seconds after power on? never get the &quot;gear&quot; LED to flash FAST?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p216651">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">rapartist</div>
					<div class="post-datetime">
						4 Nov 2013, 05:10					</div>
				</div>
				<div class="post-content content">
					<p>Yes. In fact there are only 2 buttons. Power button and reset button.<br />I read in the wiki that there are some problems with the hardware buttons.</p><p>I tried to gain access via telnet too. I guess the problem was I wasnt able to get to failsafe mode.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p216727">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">bolvan</div>
					<div class="post-datetime">
						4 Nov 2013, 20:17					</div>
				</div>
				<div class="post-content content">
					<p>The simpliest way would be serial console.<br />When you have PL2303 life becomes much easier.<br />On serial console you will have root prompt even without network. Its like physical console on PC</p>											<p class="post-edited">(Last edited by <strong>bolvan</strong> on 4 Nov 2013, 20:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p216728">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">lipkegu</div>
					<div class="post-datetime">
						4 Nov 2013, 20:28					</div>
				</div>
				<div class="post-content content">
					<p>You have to hold the button pressed for at least 14 seconds!, while you powering on the Router, until the led indicates the Systemboot, the led should blink faster:<br />Instruction:<br />1. power off the device AND disconnect the router from WAN (VERY IMPORTANT!!!) after this press a button, hold it also pressed while powering the device and hold it pressed, when it blinks faster (very fast) release the button.</p><p>if that not work, try another button with the given instructions...</p><p>on my WNDR3700 it is the WPS-Button <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>When you are in the Failsafe-Mode (LED is blinking fast) connect VIA TELNET to the router and send the following commands</p><p>1. mount_root <br />2. rm -rf /overlay/*<br />3. reboot</p>											<p class="post-edited">(Last edited by <strong>lipkegu</strong> on 4 Nov 2013, 20:41)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p216754">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">rapartist</div>
					<div class="post-datetime">
						5 Nov 2013, 03:48					</div>
				</div>
				<div class="post-content content">
					<p>Thank you lipkegu. I tried again with holding the button longer and disconnected WAN but no result. The LEDdidnt go faster.</p><p>@bolvan: I think I&#039;m going to buy this one<br /><a href="http://www.ebay.de/itm/PL2303-USB-zu-RS232-TTL-Modul-Konverter-Adapter-mit-Transparenter-Abdeckung-WIN7-/370899094386?pt=LH_DefaultDomain_77&amp;hash=item565b4f0b72">http://www.ebay.de/itm/PL2303-USB-zu-RS … 565b4f0b72</a></p><p>I&#039;m a noob if it comes to serial connections.<br />Is there a driver needed for Windows 7? I think it is.<br />And how can I open a console? If it is used with putty I don&#039;t know how to configure putty to connect through serial.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p216773">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">lipkegu</div>
					<div class="post-datetime">
						5 Nov 2013, 10:53					</div>
				</div>
				<div class="post-content content">
					<p>you may also need, if your router has a 3.3V-Serial-port -&gt; an 12V &lt;-&gt; 3.3V converter for Serial... oterwise you are frying your Routers-PCB <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p><p>you can try recudp, i had try it a few seconds ago for you... on my WNDR3700 it receives the following message <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p><a href="http://downloads.openwrt.org/people/florian/recvudp/recvudp-win32.zip">http://downloads.openwrt.org/people/flo … -win32.zip</a></p><p><span class="postimg"><img src="http://pichoster.net/images/2013/11/05/NeueBitmap.jpg" alt="http://pichoster.net/images/2013/11/05/NeueBitmap.jpg" /></span></p><p>Steps: </p><p>1. set the computers ip to 192.168.1.2 (gateway 192.168.1.1) and start the Tool (allow it in firewall)<br />2. powercycle your router<br />3. when the Routers internal Switch comes up! (in my case) it receives the shown Message in the picture<br />4. press a button! (after this (if it worse the correct button) you should get a message like &quot;entering failsafe...&quot;</p><p>in this case you should also learn, when you have to press the Button (by looking on the routers LEds) in my case it worse feeled 3 Secs after powercycling the router</p>											<p class="post-edited">(Last edited by <strong>lipkegu</strong> on 5 Nov 2013, 11:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p216781">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">bolvan</div>
					<div class="post-datetime">
						5 Nov 2013, 12:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>rapartist wrote:</cite><blockquote><p>@bolvan: I think I&#039;m going to buy this one<br /><a href="http://www.ebay.de/itm/PL2303-USB-zu-RS232-TTL-Modul-Konverter-Adapter-mit-Transparenter-Abdeckung-WIN7-/370899094386?pt=LH_DefaultDomain_77&amp;hash=item565b4f0b72">http://www.ebay.de/itm/PL2303-USB-zu-RS … 565b4f0b72</a></p><p>I&#039;m a noob if it comes to serial connections.<br />Is there a driver needed for Windows 7? I think it is.<br />And how can I open a console? If it is used with putty I don&#039;t know how to configure putty to connect through serial.</p></blockquote></div><p>PL2303 is great thing. I tested it on several routers and all worked well. It has 5V input/output. 5V is OK for 3.3V ports, not possible to fry them. Remember to connect GND to GND, TX to RX and RX to TX. For self test short circuit RX and TX on adapter and check if you see echo of keyboard input.<br />Unfortunately drivers for windows are buggy and cause bluescreens sometimes but not too often to stop from doing the job.<br />Also there&#039;re no drivers for win8 and newer. But its natively supported by linux. If you dont have linux on PC you can run it from livecd or in a VM. If one particular distro does not have pl2303 kernel module - try another.<br />PuTTY is the best program for working with serial on both windows and linux.</p><p>Btw, this is one of the reasons why I strongly prefer USB-enabled routers. Put rootfs on USB drive. If you are locked out - remove USB drive and reboot. You are on default config with telnet to 192.168.1.1. Plug it again, mount and correct the thing that cause you being locked out</p>											<p class="post-edited">(Last edited by <strong>bolvan</strong> on 5 Nov 2013, 13:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p216794">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">wolf2bad</div>
					<div class="post-datetime">
						5 Nov 2013, 17:32					</div>
				</div>
				<div class="post-content content">
					<p>Hi rapartist,</p><p>I have the same router v7.1 and successfully debricked it today.</p><p>Preformed the following:</p><p>1. Preformed a 30/30/30 reset&nbsp; </p><p>(when the unit is powered on, hold down its reset button for 30 seconds. While still holding down the reset button, unplug the router from power and hold for an additional 30 seconds. Still holding down the reset button, turn on power to the router again and hold for 30 more secons)</p><p>2. Change teh PC IPv4 to:</p><p>ip:&nbsp; &nbsp; &nbsp; &nbsp; 192.168.1.2<br />Gateway:&nbsp; &nbsp;255.255.255.0</p><p>3. Entered the router in failsafe mode - Connect the router to the PC only, reboot the router and as soon as the service led (the second light from the left) lights up press and hold the QSS button (located next to the reset button on the back <a href="http://ardes.bg/uploads/original/f/6/f6cef5802fdbd21f.jpg">QSSbutton</a>) until the led starts blinking faster.</p><p>4. Open telnet and enter the following commands in the same order:</p><p><strong> o 192.168.1.1 </strong></p><p><strong> mount_root </strong></p><p><strong> passwd </strong></p><p><strong> mtd -r erase rootfs_data </strong></p><p><em> if the router does not reboot use the following commands:</em></p><p><em>firstboot</em></p><p><em>reboot -f </em> </p><br /><br /><p>The router should reboot automatically. Once rebooted change teh PC settings to automatically to obtain the IP address and connect the router to internet. Enter the router ip in the address bar (192.168.1.1) to check if accessable.</p><p>Here are a couple of links where I got the info from but i change the order a bit as it did not work otherwise.</p><p><a href="http://wiki.openwrt.org/toh/tp-link/tl-wr841nd">FailsafeOpenWrt</a></p><p><a href="http://wiki.openwrt.org/doc/howto/generic.failsafe">WikiOpenWrt</a></p><br /><p>Hope this helps <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>wolf2bad</strong> on 5 Nov 2013, 17:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p216795">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">wolf2bad</div>
					<div class="post-datetime">
						5 Nov 2013, 18:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>wolf2bad wrote:</cite><blockquote><p>Hi rapartist,</p><p>I have the same router v7.1 and successfully debricked it today.</p><p>Preformed the following:</p><p>1. Preformed a 30/30/30 reset&nbsp; </p><p>(when the unit is powered on, hold down its reset button for 30 seconds. While still holding down the reset button, unplug the router from power and hold for an additional 30 seconds. Still holding down the reset button, turn on power to the router again and hold for 30 more secons)</p><p>2. Change teh PC IPv4 to:</p><p>ip:&nbsp; &nbsp; &nbsp; &nbsp; 192.168.1.2<br />Gateway:&nbsp; &nbsp;255.255.255.0</p><p>3. Entered the router in failsafe mode - Connect the router to the PC only, reboot the router and as soon as the service led (the second light from the left) lights up press and hold the QSS button (located next to the reset button on the back <a href="http://ardes.bg/uploads/original/f/6/f6cef5802fdbd21f.jpg">QSSbutton</a>) until the led starts blinking faster.</p><p>4. Open telnet and enter the following commands in the same order:</p><p><strong> o 192.168.1.1 </strong></p><p><strong> mount_root </strong></p><p><strong> passwd </strong></p><p><strong> mtd -r erase rootfs_data </strong></p><p><em> if the router does not reboot use the following commands:</em></p><p><em>firstboot</em></p><p><em>reboot -f </em> </p><br /><br /><p>The router should reboot automatically. Once rebooted change teh PC settings to automatically to obtain the IP address and connect the router to internet. Enter the router ip in the address bar (192.168.1.1) to check if accessable.</p><p>Here are a couple of links where I got the info from but i change the order a bit as it did not work otherwise.</p><p><a href="http://wiki.openwrt.org/toh/tp-link/tl-wr841nd">FailsafeOpenWrt</a></p><p><a href="http://wiki.openwrt.org/doc/howto/generic.failsafe">WikiOpenWrt</a></p><br /><p>Hope this helps <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><br /><p>I am sorry i misread, you mentioned that you do not have a QSS button.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p216817">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						5 Nov 2013, 20:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>bolvan wrote:</cite><blockquote><p>PL2303 is great thing. I tested it on several routers and all worked well. It has 5V input/output. 5V is OK for 3.3V ports, not possible to fry them. Remember to connect GND to GND, TX to RX and RX to TX. For self test short circuit RX and TX on adapter and check if you see echo of keyboard input.</p></blockquote></div><p>with &quot;5V input/output&quot; are you referring to the VCC pins or TX/RX ?</p><p>also, it could have different voltages depending on the PCB of the adapter, it&#039;s not the PL2303 itself to decide.</p><p>IMHO i&#039;d never connect a 5V adapter to the RX pin of a router that operates with 3.3V, i read it many times that some cpu are NOT 5V tolerant.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p216842">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">rapartist</div>
					<div class="post-datetime">
						6 Nov 2013, 04:26					</div>
				</div>
				<div class="post-content content">
					<p>Wolf2bad you saved my day.<br />Thanks to your post I was able to unbrick my device.</p><div class="quotebox"><blockquote><p>reboot the router and as soon as the service led (the second light from the left) lights up press and hold the QSS button (located next to the reset button on the back QSSbutton) until the led starts blinking faster.</p></blockquote></div><p>I was holding the reset/qss button too early. I cant believe what kind of difference it made.<br />Don&#039;t apologize for the reset/qss button thing. I should&#039;ve said that it is the same button.</p><br /><p>Thank you all for the help.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p216878">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">wolf2bad</div>
					<div class="post-datetime">
						6 Nov 2013, 15:36					</div>
				</div>
				<div class="post-content content">
					<p>Hi rapartist,</p><p>I am glad this helped. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>