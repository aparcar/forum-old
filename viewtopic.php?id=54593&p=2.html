<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Multiuser Openwrt/luci</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 27 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=54593&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p312357">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">Taulin</div>
					<div class="post-datetime">
						23 Feb 2016, 17:03					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />i compiled your multi-user modifikation with my SDK for trunk. First i managed to get it to work and i could run it on my system. Now i need to recompile it with the same SDK again but i always get a lot of merge conflicts. On the first time i compiled it without any errors. I tried it several times but always got the same errors. On Friday i did the same as today and it worked. <br />I tried alle branches of hnyman but i always get that merge conflict.<br />Sorry but i work with git only as much as possible and don´t know what to do.<br />Can anyone help me?</p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p312360">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						23 Feb 2016, 17:47					</div>
				</div>
				<div class="post-content content">
					<p>I have rebased the &quot;multi3&quot; branch a few minutes ago.<br />That should contains the current tip of Luci master + the changes from Hostle until some two weeks ago.<br /><a href="https://github.com/hnyman/luci/commits/multi3">https://github.com/hnyman/luci/commits/multi3</a><br /><a href="https://github.com/hnyman/luci/tree/multi3">https://github.com/hnyman/luci/tree/multi3</a><br />Try that.</p><p>EDIT:<br />I have now added the new commits from Hostle in February to the branch.</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 23 Feb 2016, 18:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313161">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">hostle19</div>
					<div class="post-datetime">
						1 Mar 2016, 02:48					</div>
				</div>
				<div class="post-content content">
					<p>can you update to latest tip of LuCI master ? the latest commits fix the issue of hidden Multi values</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p324282">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">jack338c</div>
					<div class="post-datetime">
						17 May 2016, 14:22					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hostle19 wrote:</cite><blockquote><p>I have finished and tested the code. As far as I am concerned I have completed a full blown multi-user setup for luci/openwrt. I have added the ability to hide ANY menu from ANY non root user ... finally <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p><strong>Available Features</strong><br />- add/remove users from the luci ui<br />- set ssh access to on or off on a per user basis<br />- set user type to user(basic ssh permissions) or admin(elevated ssh permissions)&nbsp; per user basis<br />- set what luci ui menus options are visible and available for new users on a per user basis<br />- initial password for new users is openwrt, users can set there own password once logged in</p><p><strong>Build Instructions</strong><br /><span style="color: blue">Just add the feed and update then you will see the pkg in the menuconfig under LuCI &gt;&gt; Modules called &quot;admin-multi-user&quot;.</span></p><p><span style="color: #FF0000">## LuCI 0.12 / 14.07 Barrier Breaker Branch ##<br /></span><span style="color: blue">src-git luci <a href="https://github.com/Hostle/openwrt-luci-multi-user.git;luci-0.12">https://github.com/Hostle/openwrt-luci- … ;luci-0.12</a></span></p><p>or the development branch<br /><span style="color: #FF0000">## LuCI trunk / Chaos Calmer Branch ##</span><br /><span style="color: blue">src-git luci <a href="https://github.com/Hostle/openwrt-luci-multi-user.git">https://github.com/Hostle/openwrt-luci-multi-user.git</a></span></p><p>just add the appropriate feed to your &quot;feeds.conf.default&quot; and then put a &quot;#&quot; in front of the original luci feed and then update the luci feed</p><p><span style="color: #FF0000">./scripts/feeds update luci<br />./scripts/feeds install -a -p luci</span></p><p>then you should see the new pkg in the menuconfig under LuCI &gt;&gt; Modules &gt; admin-multi-user</p><br /><p>The mods to the luci src are minimal, and luci functions fine when package is removed. Aside for the code added I have to rename a few files in the luasrc in the admin-full and admin-base but again this does not effect luci functionality . I think this could easily be pushed to the luci src and become a valuable tool in which the openwrt community could really benefit from. I have my own respo set up were the code can be fetched and built but ultimately I would like to see it become part of the luci repository or at least have the necessary changes made to the luci src to accommodate the multi-user package.</p></blockquote></div><br /><p>Sir,Could you add a function for hidding service later</p><p>thanks </p><p>Jack</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351880">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">ronluna</div>
					<div class="post-datetime">
						14 Feb 2017, 06:19					</div>
				</div>
				<div class="post-content content">
					<p>Is it possible to get the Firewall sub menu to show when is enabled for a user?</p><p>Currently the &quot;Firewall&quot; link located under the &quot;Network&quot; menu do not show up even after being enabled and the user has been set as admin.</p><p>then forcing to access the admin menu, luci returns:</p><p>No page is registered at &#039;/admin/network/firewall&#039;.<br />If this url belongs to an extension, make sure it is properly installed.<br />If the extension was recently installed, try removing the /tmp/luci-indexcache file.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351881">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">hostle19</div>
					<div class="post-datetime">
						14 Feb 2017, 07:13					</div>
				</div>
				<div class="post-content content">
					<p>At a glance... it seems there is a slight typo in the /usr/lib/lua/luci/controller/firewall.lua file, on line 13</p><p>local name = &quot;network&quot; </p><p>Should be </p><p>local name = &quot;Network&quot;</p><p>The N in network should be upper case I believe... use winscp or the like to make the correction and let me know if that does it.</p><p>Hostle</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351921">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">ronluna</div>
					<div class="post-datetime">
						14 Feb 2017, 14:28					</div>
				</div>
				<div class="post-content content">
					<p>That did it!</p><p>Wondering if it&#039;s possible to update the repo on github?</p>											<p class="post-edited">(Last edited by <strong>ronluna</strong> on 14 Feb 2017, 14:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351922">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						14 Feb 2017, 14:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ronluna wrote:</cite><blockquote><p>That did it!</p><p>Wondering if is possible to update the repo on github?</p></blockquote></div><p>I updated my multi3 branch with that fix.<br /><a href="https://github.com/hnyman/luci/tree/multi3">https://github.com/hnyman/luci/tree/multi3</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p353034">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">uabuner</div>
					<div class="post-datetime">
						27 Feb 2017, 07:12					</div>
				</div>
				<div class="post-content content">
					<p>@hostle19 thank you for your time and effort..great work...will try soon<br />so no update about luci-app yet ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p357856">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">Mahone</div>
					<div class="post-datetime">
						5 May 2017, 19:04					</div>
				</div>
				<div class="post-content content">
					<p>@hnyman, I downloaded your code and compiled the &#039;luci-app-multi-user&#039;. After I installed it, my LuCI couldn&#039;t up,and told there had something wrong in&quot;/usr/lib/lua/luci/controller/admin/users.lua:13: attempt to call field &#039;get_user&#039; (a nil value)&quot;. I read the user.lua and luci.dispatcher.* , there are exactly no &#039;get_user&#039; function. What I can do to run this code in my router. (my OpenWrt is trunk version)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p357860">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						5 May 2017, 19:47					</div>
				</div>
				<div class="post-content content">
					<p>You need to compile and install whole Luci.<br />Multiuser needs new support functions in base Luci components, so default vanilla Luci is not enough.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p357864">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">karlos1973</div>
					<div class="post-datetime">
						5 May 2017, 23:11					</div>
				</div>
				<div class="post-content content">
					<p>Hi, how can I incorporate the multiuser&nbsp; into the &quot;Image Builder&quot; tool.</p><p>Greetings.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p357891">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">Mahone</div>
					<div class="post-datetime">
						6 May 2017, 04:49					</div>
				</div>
				<div class="post-content content">
					<p>@hnyman Thank you very much! I will try it today.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p358052">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">karlos1973</div>
					<div class="post-datetime">
						8 May 2017, 22:19					</div>
				</div>
				<div class="post-content content">
					<p>@hnyman Hi, can you help me. How can I include the multiuser menu in the &quot;Image Builder&quot; tool. I get lost with linux compilations.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p358054">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						8 May 2017, 22:35					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>karlos1973 wrote:</cite><blockquote><p>@hnyman Hi, can you help me. How can I include the multiuser menu in the &quot;Image Builder&quot; tool. I get lost with linux compilations.</p></blockquote></div><p>You can&#039;t. The compiled package is not available in download repos used by imagebuilder.</p><p>You need to compile the whole multiuser Luci by yourself.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p358197">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">karlos1973</div>
					<div class="post-datetime">
						11 May 2017, 13:49					</div>
				</div>
				<div class="post-content content">
					<p>@hnyman Thank you very much, I have been able to compile with the multiuser menu. How to limit access to parts of the firewall for a user? For example if I just want to give you access to &quot;Firewall - Port Forwards&quot; only</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364508">
				<div class="post-metadata">
					<div class="post-num">Post #42</div>
					<div class="post-author">marinux</div>
					<div class="post-datetime">
						28 Aug 2017, 21:36					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,</p><p>I currently use <a href="http://github.com/Fire-WRT/luci/commits/for-15.05">github.com/Fire-WRT/luci/commits/for-15.05</a> with OpenWRT 15.05.01. The multiuser feature works well.</p><p>No I tried to use luci-mod-rpc in addition, which always ends in a jsonrpc &quot;Parse error&quot;, no matter what I request. E.g. executing locally:</p><div class="codebox"><pre><code>#: curl --data-binary &#039;{&quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;id&quot;: 1, &quot;method&quot;: &quot;login&quot;, &quot;params&quot;: [&quot;username&quot;, &quot;password&quot;]}&#039; -H &#039;content-type:application/json;&#039; 127.0.0.1/cgi-bin/luci/rpc/auth</code></pre></div><p>which returns<br /></p><div class="codebox"><pre><code>#: {&quot;id&quot;:null,&quot;error&quot;:{&quot;message&quot;:&quot;Parse error.&quot;,&quot;code&quot;:-32700},&quot;jsonrpc&quot;:&quot;2.0&quot;}</code></pre></div><p>all the time. On a stock Luci/OpenWRT 15.05.01 it works like a charme :-(</p><p>Can you support me?</p><p>BR</p><p>marinux</p>											<p class="post-edited">(Last edited by <strong>marinux</strong> on 28 Aug 2017, 21:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p365191">
				<div class="post-metadata">
					<div class="post-num">Post #43</div>
					<div class="post-author">hostle19</div>
					<div class="post-datetime">
						10 Sep 2017, 23:28					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>marinux wrote:</cite><blockquote><p>Hi all,</p><p>I currently use <a href="http://github.com/Fire-WRT/luci/commits/for-15.05">github.com/Fire-WRT/luci/commits/for-15.05</a> with OpenWRT 15.05.01. The multiuser feature works well.</p><p>No I tried to use luci-mod-rpc in addition, which always ends in a jsonrpc &quot;Parse error&quot;, no matter what I request. E.g. executing locally:</p><div class="codebox"><pre><code>#: curl --data-binary &#039;{&quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;id&quot;: 1, &quot;method&quot;: &quot;login&quot;, &quot;params&quot;: [&quot;username&quot;, &quot;password&quot;]}&#039; -H &#039;content-type:application/json;&#039; 127.0.0.1/cgi-bin/luci/rpc/auth</code></pre></div><p>which returns<br /></p><div class="codebox"><pre><code>#: {&quot;id&quot;:null,&quot;error&quot;:{&quot;message&quot;:&quot;Parse error.&quot;,&quot;code&quot;:-32700},&quot;jsonrpc&quot;:&quot;2.0&quot;}</code></pre></div><p>all the time. On a stock Luci/OpenWRT 15.05.01 it works like a charme :-(</p><p>Can you support me?</p><p>BR</p><p>marinux</p></blockquote></div><p>Have you tried the latest code from 3 months ago ? you can grab it here <a href="https://github.com/Fire-WRT/luci/tree/for-15.01-multi4">https://github.com/Fire-WRT/luci/tree/for-15.01-multi4</a> or by adding the path to your feeds.config.default </p><div class="codebox"><pre><code>src-git luci https://github.com/Fire-WRT/luci.git;for-15.01-multi4</code></pre></div><p>Hostle</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p371053">
				<div class="post-metadata">
					<div class="post-num">Post #44</div>
					<div class="post-author">juliobrito</div>
					<div class="post-datetime">
						20 Jan 2018, 16:45					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I need Install this packages in my GL-MT300A router. <br />OpenWrt Chaos Calmer 15.05 r47065 / LuCI for-15.05 branch</p><p>I am very new in Open Wrt, I only have 3 days with the system.</p><p>The files for installation directly from a repository are .ipk</p><p>How can I install the package from github? </p><p>I am a normal Windows user</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p373430">
				<div class="post-metadata">
					<div class="post-num">Post #45</div>
					<div class="post-author">mynamerp</div>
					<div class="post-datetime">
						8 Mar 2018, 07:20					</div>
				</div>
				<div class="post-content content">
					<p>I understand web server uses username and password of system to authenticate users and provided access . there is no update of users in L I G H T T P D configs and users folder is created in home directory .Can anyone please clarify on how web server uses Linux user information to authenticate users and proved web page access ? Is there any L U A library used for this purpose ?</p>											<p class="post-edited">(Last edited by <strong>mynamerp</strong> on 8 Mar 2018, 07:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p373456">
				<div class="post-metadata">
					<div class="post-num">Post #46</div>
					<div class="post-author">gu3d3s</div>
					<div class="post-datetime">
						8 Mar 2018, 23:37					</div>
				</div>
				<div class="post-content content">
					<p>HI,</p><br /><p>I was interested in testing this project, but not having much experience in compiling a project would like to know if you use a simpler way to add this function, or if you would like to replace LUCI directly with multi user LUCI?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=54593&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>