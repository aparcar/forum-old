<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Successful TP-MR3220 with MF190</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p154508">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">almursi</div>
					<div class="post-datetime">
						17 Jan 2012, 18:11					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I have successfully installed the openwrt 9-Jan-2012 r29697 (from <a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/">http://downloads.openwrt.org/snapshots/trunk/ar71xx/</a> ), additional packages to use 3g and everything is working properly. ZTE MF190 is incompatible with the mode that original firmware using to connect, but they resolved in terms of connecting directly to the port ttyUSB4.</p><p>However I have some doubts. The first one with &quot;sysupgrade&quot;, the router loses access SSH, so to get it back I had to use the serial port, so it seems that is not the best method to update the firmware.</p><p>The second is about making a small howto in Spanish to make installation easier or maybe make a squashfs with all the packages required to have 3G service enabled (if you only have the mobile connectivity package installation is more complicated, since we have to download and use a tftp from local network).</p><p>The third is about how to link to the Android USB connection, but I suppose this topic duty to search or comment elsewhere <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />.</p><p>Best regards.</p><p>p.d.: On LuCI show &quot;OpenWrt Firmware Attitude Adjustment (r29763) / LuCI Trunk (trunk+svn8187)&quot; and kernel 2.6.39.4, but base-files are r29697</p>											<p class="post-edited">(Last edited by <strong>almursi</strong> on 23 Jan 2012, 16:09)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p154942">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">almursi</div>
					<div class="post-datetime">
						22 Jan 2012, 00:15					</div>
				</div>
				<div class="post-content content">
					<p>Hi, first draft of Spanish howto 3g.mr3220 on <a href="http://wiki.openwrt.org/es/doc/howto/3g.mr3220">http://wiki.openwrt.org/es/doc/howto/3g.mr3220</a><br />I&#039;ve probably forgotten a lot of details, but I think the basics are as simple as that...<br />Best regards.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p155023">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">almursi</div>
					<div class="post-datetime">
						22 Jan 2012, 19:33					</div>
				</div>
				<div class="post-content content">
					<p>Hi, maybe the &quot;syntax&quot; is not very fine, but I think the draft is finished in <a href="http://wiki.openwrt.org/es/doc/howto/3g.mr3220">http://wiki.openwrt.org/es/doc/howto/3g.mr3220</a><br />and translated into English would be easier if someone needs it (I could do it next week), although most of it I got from <a href="https://forum.openwrt.org/viewtopic.php?id=30863">https://forum.openwrt.org/viewtopic.php?id=30863</a><br />(perhaps the biggest difference is that I use Ubuntu)<br /> Best regards.</p>											<p class="post-edited">(Last edited by <strong>almursi</strong> on 22 Jan 2012, 19:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p155246">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">almursi</div>
					<div class="post-datetime">
						24 Jan 2012, 14:47					</div>
				</div>
				<div class="post-content content">
					<p>Hi, in this moment I&#039;m testing a self-compiled OpenWrt (r29871) and seem that everything work fine. For now I can comment that the sysupgrade (with my own compilation) with LuCi has worked well but avoid copying the configuration files (for the problems they are discussing in other threads). The fact is that the modules needed to activate the modem are much less than I have in my manual, so I&#039;ll have to make a separation between those who are related to the modem, USB disks and text editor.<br />Edited: for some reason sysupgrade (by console) does not work, but through LuCI everything works fine (also I test with recover configurations without problems). And draft of little howto is finish (it is simply the notes that I use every time I install, these days often while trying to do some experiment <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> ).<br />Regards.</p>											<p class="post-edited">(Last edited by <strong>almursi</strong> on 26 Jan 2012, 07:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p155572">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">almursi</div>
					<div class="post-datetime">
						27 Jan 2012, 19:54					</div>
				</div>
				<div class="post-content content">
					<p>Hi. definitively or have &quot;LuCI&quot; or support for USB drives, but not both at once. Anyway, through a HUB want to reuse an old stick of 4GB (now no longer in use), and the goal is to have both <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> (although probably take me a week to make time for it). The only thing that makes me doubt is when turned off (how to safely shut down???).</p><p>Edited: with a single hub (no power) seems not possible to connect the modem and the USB drive at the same time (sometimes reattaching fix any of them, but that prevents us make the rootfs). If it&#039;s a kernel problem, perhaps it ends up with solution, but I fear that is due to energy consumption... Anyway I will continue trying to get a working rootfs. (Re-edited: or maybe a compatibility problem between modules installed, I compiled again removing some modules and looks much better...<br />Success <a href="https://forum.openwrt.org/viewtopic.php?id=34363">https://forum.openwrt.org/viewtopic.php?id=34363</a> and problem with dns is solved with dhcp.dnsmasq.resolvfile=/tmp/resolv.conf.ppp<br />Re-Edited: On r29967 /tmp/resolv.conf.auto is working again.&nbsp; &nbsp;)</p><p>Regards.</p>											<p class="post-edited">(Last edited by <strong>almursi</strong> on 1 Feb 2012, 03:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156874">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						10 Feb 2012, 03:43					</div>
				</div>
				<div class="post-content content">
					<p>Hi. Which hardware version do you have?<br />I come from the wiki where you add a new row, but a non sense r29697.<br />The version column is for &quot;version supported <strong>from</strong> to latest&quot;<br />I suggest add your success history to the previous row.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156972">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">almursi</div>
					<div class="post-datetime">
						10 Feb 2012, 20:30					</div>
				</div>
				<div class="post-content content">
					<p>Hi, thanks, the truth is that I did not know where to put it, but it seemed interesting to leave the link <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />. I fix it now... Regards.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p160390">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">almursi</div>
					<div class="post-datetime">
						11 Mar 2012, 07:19					</div>
				</div>
				<div class="post-content content">
					<p>Hi, some people without linux skill ask me help whit mr3220, and finally I do a non-official image (with LuCI and 3G support) and share links on <a href="http://wiki.openwrt.org/es/doc/howto/3g.mr3220">http://wiki.openwrt.org/es/doc/howto/3g.mr3220</a><br />If that goes against the policy on the wiki, correct me <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />. Regards.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p160720">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						13 Mar 2012, 17:49					</div>
				</div>
				<div class="post-content content">
					<p>How often will you update your <strong>FORK</strong>? There is a snapshot every 3 days.</p><p>You can sync with current trunk, so no need to provide your own packages. Sync process detailed <a href="http://wiki.openwrt.org/doc/howtobuild/tl-mr3420.build#sync.with.current.snapshot">here</a>.</p><p>And before update, please do a packages backup. Someone may ask for later:<br /></p><div class="quotebox"><blockquote><p>r=30857<br />cd /almursi.es/mr3220/<br />tar --remove-files -ncf packages$r.tar packages</p></blockquote></div><p>Fast uncompressed tar, because *.ipk are already compressed and decompress may take a long time also, unnecessary.</p><p>I add some lines to ease the package installation to your wiki document, later I will add a tar | wget | untar pipe to ease that many wget.</p><p>About fork policy: &quot;You shouldn&#039;t fork&quot;.<br />You should ask nicely &quot;[Request] [Argument]&quot; like:<br />&quot;Please add 3G profile to routers already marketing as 3G router: 3020, 3220, 3420, etc.&quot;<br />And obviously, include such profiles in the ticket.<br />IMMO</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p160724">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">almursi</div>
					<div class="post-datetime">
						13 Mar 2012, 18:17					</div>
				</div>
				<div class="post-content content">
					<p>Hi, thanks Nilfred. It really has been a haphazard one. Someone asked me the image, and after placing it into the public server, I thought maybe I could include it also in the wiki in case it was useful. Public server is not at home (and have a shared fork is not in my plans), I think that best idea is request a fork. Meanwhile, the image will be available for one month (at least), but like I say not in my plans to maintain a fork&nbsp; (my personal builds are once a month). Just one of the reasons for not collaborate on more projects is the difficulty to have updated the svn public servers. </p><p>Edited: Here is the ticket <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br /><a href="https://dev.openwrt.org/ticket/11131">https://dev.openwrt.org/ticket/11131</a></p><p>Edited2: I update to r30950 with resolveip and no more dns problems. Links on wiki ending over 10-april. And Nilfred, yes: sip more easy, but I don&#039;t found how to change ISP number with sed (no working \* \&quot; same impossible)... but finally I&#039;d remember how to use vi <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" />.</p><p>Best regards.</p>											<p class="post-edited">(Last edited by <strong>almursi</strong> on 15 Mar 2012, 17:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161159">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">almursi</div>
					<div class="post-datetime">
						17 Mar 2012, 13:50					</div>
				</div>
				<div class="post-content content">
					<p>Hi, some custom task that I&#039;m thinking to do:<br />1. Use of qss button for call poweroff (in case of ext-root it&#039;s good idea) before power down -and change system LED status to show it-.<br />2. Change 3g LED status to 3g-wan status (now is a confuse USB stick present).<br />3. Looking for a reconnecting script for 3g-wan (that I see here some days ago, but I don&#039;t remember where is <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> ). <br />if anyone want to join it (or explain how to it&#039;s done), perfect. I do not think I&#039;m the first to think of something like <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />. Regards.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161205">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						17 Mar 2012, 21:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>almursi wrote:</cite><blockquote><p>Nilfred, yes: sip more easy, but I don&#039;t found how to change ISP number with sed (no working \* \&quot; same impossible)... but finally I&#039;d remember how to use vi <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" />.</p></blockquote></div><div class="quotebox"><blockquote><p><span style="color: blue"># Avoid * (preferred, reusable)</span><br />sed -e &#039;s/\(&quot;ATD\).*&quot;/\1*99#&quot;/&#039; /etc/chatscripts/3g.chat<br /><span style="color: blue"># escape * (usable once)</span><br />sed -e &#039;s/\*99\*\*\*1#/*99#/&#039; /etc/chatscripts/3g.chat<br /><span style="color: blue"># remove * (minimal, once anyway)</span><br />sed -e &#039;s/\*\*\*1//&#039; /etc/chatscripts/3g.chat</p></blockquote></div><p>Test them all. Insert -i parameter to edit really.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162395">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">almursi</div>
					<div class="post-datetime">
						28 Mar 2012, 20:46					</div>
				</div>
				<div class="post-content content">
					<p>Hi Nilfred, thanks for sed tips (problem was &quot;-i&quot; parameter, that give me a confuse ed output -that I don&#039;t have use-). About fork I comment that I see that my internet access is very poor in this moment for maintain it.</p><p>On the other hand, finally I found a way to connect android phones (at least a model, I suppose that it will be hardware dependent...):</p><p>Need: kmod-usb-net, kmod-usb-net-cdc-ether and kmod-usb-net-rndis<br />New interface &quot;usbnet&quot;, dhcp client, phisical settings link to usb after enable usb on phone, assign firewall together wan.</p><p>Network:<br />config interface &#039;usbnet&#039;<br />&nbsp; &nbsp; option proto &#039;dhcp&#039;<br />&nbsp; &nbsp; option ifname &#039;usb0&#039;<br />&nbsp; &nbsp; option auto &#039;0&#039;</p><p>Firewall:<br />config zone<br />&nbsp; &nbsp; option name &#039;wan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; ...<br />&nbsp; &nbsp; option network &#039;wan wwan usbnet&#039;</p><br /><p>Regards.</p>											<p class="post-edited">(Last edited by <strong>almursi</strong> on 28 Mar 2012, 21:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p164215">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">madanadam</div>
					<div class="post-datetime">
						12 Apr 2012, 06:32					</div>
				</div>
				<div class="post-content content">
					<p>Thanks a lot. I am from Turkey. My 3g router&nbsp; is 25$ Chinese - TP&nbsp; Link WR703N and 3G dongle is ZTE MF190. Firmware is OpenWrt Firmware Attitude Adjustment (r31219) / LuCI Trunk (trunk+svn8531). After &quot;sed -e &#039;s/\*99\*\*\*1#/*99#/&#039; /etc/chatscripts/3g.chat -i&quot; command 3g router started to work fine.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167636">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">faramisimo</div>
					<div class="post-datetime">
						18 May 2012, 05:19					</div>
				</div>
				<div class="post-content content">
					<p>@madanadam, can you please post or email me the the firmware that you used to get the zte mf190 to work on the wr703n. <br />i sent you a pm about it with my email. <br />very much appreciated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p172456">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">fobo</div>
					<div class="post-datetime">
						16 Jul 2012, 19:50					</div>
				</div>
				<div class="post-content content">
					<p>Can anyone share succesfully working /etc/chatscripts/3g.chat and /etc/config/network files? I couldn&#039;t get it work.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p172497">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">almursi</div>
					<div class="post-datetime">
						17 Jul 2012, 12:42					</div>
				</div>
				<div class="post-content content">
					<p>@fobo: Maybe you need another ttyUSB port, latest versions of MF190 are using ttyUSB3 (and this can always change with each new version).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p172515">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">fobo</div>
					<div class="post-datetime">
						17 Jul 2012, 15:47					</div>
				</div>
				<div class="post-content content">
					<p>i tried every 5ttyUSB (yes 5, i dont know why that much <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> <br />I fixed the dialing number in chatscript<br />Tried many combination in network configuration and no success<br />another huawei e177 won&#039; even bring ttyusb options <br />now i am started to compile last trunk. i&#039;m afraid i will start to hacking kernel soon -p</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p172588">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">almursi</div>
					<div class="post-datetime">
						18 Jul 2012, 08:21					</div>
				</div>
				<div class="post-content content">
					<p>Hi, strange... disables the PIN first of all (putting the sim in another phone for example). You need install packets (as explained in <a href="http://wiki.openwrt.org/es/doc/howto/3g.mr3220">http://wiki.openwrt.org/es/doc/howto/3g.mr3220</a> ). On console, you can try &quot;comgt info&quot; and paste here similar output to:</p><p>Manufacturer: ZTE CORPORATION<br />Model: MF190<br />Revision: MF190V1.0.0B07</p><p>and &quot;band settings&quot; (that show what happen with 3g.chat). Regards.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>