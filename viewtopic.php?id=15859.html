<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Monitor mode on Asus WL-500GP V2 -&gt; reboot</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 12 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p68997">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Cypher</div>
					<div class="post-datetime">
						1 Jun 2008, 00:45					</div>
				</div>
				<div class="post-content content">
					<p>Hi!</p><p>I have some strange problems and hope you can help me. <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><div class="codebox"><pre><code>root@wBox:~# ifconfig
br-lan    Link encap:Ethernet  HWaddr 00:1F:C6:62:1B:64
          inet addr:192.168.1.5  Bcast:192.168.1.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:346 errors:0 dropped:0 overruns:0 frame:0
          TX packets:350 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:49574 (48.4 KiB)  TX bytes:44088 (43.0 KiB)

eth0      Link encap:Ethernet  HWaddr 00:1F:C6:62:1B:64
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:345 errors:0 dropped:0 overruns:0 frame:0
          TX packets:348 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:56068 (54.7 KiB)  TX bytes:46960 (45.8 KiB)
          Interrupt:4

eth0.0    Link encap:Ethernet  HWaddr 00:1F:C6:62:1B:64
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:346 errors:0 dropped:0 overruns:0 frame:0
          TX packets:350 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:50958 (49.7 KiB)  TX bytes:45488 (44.4 KiB)

eth0.1    Link encap:Ethernet  HWaddr 00:1F:C6:62:1B:64
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

wl0       Link encap:Ethernet  HWaddr 00:1F:C6:62:1B:64
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:284
          TX packets:85 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 B)  TX bytes:20584 (20.1 KiB)
          Interrupt:2 Base address:0x2000

root@wBox:~# iwconfig
lo        no wireless extensions.

eth0      no wireless extensions.

eth1      no wireless extensions.

eth0.0    no wireless extensions.

eth0.1    no wireless extensions.

br-lan    no wireless extensions.

wl0       IEEE 802.11-DS  ESSID:&quot;OpenWrt&quot;
          Mode:Master  Frequency:2.432 GHz  Access Point: 00:1F:C6:62:1B:64
          Bit Rate=54 Mb/s   Tx-Power:32 dBm
          Retry min limit:7   RTS thr:off   Fragment thr:off
          Link Quality:5  Signal level:0  Noise level:169
          Rx invalid nwid:0  Rx invalid crypt:0  Rx invalid frag:0
          Tx excessive retries:0  Invalid misc:0   Missed beacon:0

root@wBox:~# wl down; wl up; wl monitor 1;
root@wBox:~# ifconfig
br-lan    Link encap:Ethernet  HWaddr 00:1F:C6:62:1B:64
          inet addr:192.168.1.5  Bcast:192.168.1.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:439 errors:0 dropped:0 overruns:0 frame:0
          TX packets:438 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:61817 (60.3 KiB)  TX bytes:63020 (61.5 KiB)

eth0      Link encap:Ethernet  HWaddr 00:1F:C6:62:1B:64
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:438 errors:0 dropped:0 overruns:0 frame:0
          TX packets:436 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:71237 (69.5 KiB)  TX bytes:66636 (65.0 KiB)
          Interrupt:4

eth0.0    Link encap:Ethernet  HWaddr 00:1F:C6:62:1B:64
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:439 errors:0 dropped:0 overruns:0 frame:0
          TX packets:438 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:63573 (62.0 KiB)  TX bytes:64772 (63.2 KiB)

eth0.1    Link encap:Ethernet  HWaddr 00:1F:C6:62:1B:64
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

prism0    Link encap:UNSPEC  HWaddr 00-1F-C6-62-1B-64-00-00-00-00-00-00-00-00-00-00
          UP BROADCAST MULTICAST  MTU:0  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

wl0       Link encap:Ethernet  HWaddr 00:1F:C6:62:1B:64
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:350
          TX packets:103 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 B)  TX bytes:25349 (24.7 KiB)
          Interrupt:2 Base address:0x2000
root@wBox:~# iwconfig
[CONNECTION TIMEOUT -&gt; ROUTER REBOOT]</code></pre></div><p>If I execute now (in monitor mode) &quot;iwconfig&quot;, &quot;kismet_server&quot;(prism0) or anything else with wireless the router crashes and reboots.</p><p>Is it possible to solve that?<br />What must I do? <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>I compiled trunk r11269 with kernel 2.4 and as &quot;WL-500gp&quot; on &quot;target profile&quot;.</p><p>BIG THX!</p><p>Cypher</p><p>//edit:<br />TCPDUMP with prism0 interface works fine...<br />But I need Kismet... :s</p><p>Kismet example:<br /></p><div class="codebox"><pre><code>root@wBox:~# wl down; wl up; wl monitor 1; sleep 1; /kismet.sh
Using alternate config file: /tmp/kismet/kismet.conf
Suid priv-dropping disabled.  This may not be secure.
No specific sources given to be enabled, all will be enabled.
Enabling channel hopping.
Disabling channel splitting.
Source 0 (wl500gp): Enabling monitor mode for wrt54g source interface prism0 channel 0...
prism0    no private ioctls.

Source 0 (wl500gp): Opening wrt54g source interface prism0...
Allowing clients to fetch WEP keys.
WARNING:  Logging (gps coordinates) enabled but XML logging (networks) was not.
It will be enabled now.
SSID cloak file did not exist, it will be created.
IP track file did not exist, it will be created.
Logging networks in CSV format to /tmp/kismetrecs/1_Jan-01-2000.csv
Logging networks in XML format to /tmp/kismetrecs/1_Jan-01-2000.xml
Logging gps coordinates to /tmp/kismetrecs/1_Jan-01-2000.gps
Logging data to /tmp/kismetrecs/1_Jan-01-2000.dump
Writing data files to disk every 86400 seconds.
Mangling encrypted and fuzzy data packets.
Tracking probe responses and associating probe networks.
WARNING:  Unable to open &#039;/etc/ap_manuf&#039; for reading (No such file or directory), AP manufacturers and defaults will not be detected.
WARNING:  Unable to open &#039;/etc/client_manuf&#039; for reading (No such file or directory), client manufacturers will not be detected.
Using network-classifier based data encryption detection
Not tracking duplicate IVs
Dump file format: wiretap (local code) dump
Kismet 2007.10.R1 (wBox)
Logging data CSV XML gps
GPSD unknown host &#039;localhost&#039;
Listening on port 2501.
Allowing connections from 127.0.0.1/255.255.255.255
Allowing connections from 192.168.0.0/255.255.255.0
Allowing connections from 192.168.1.0/255.255.255.0
Registering builtin client/server protocols...
Registering requested alerts...
Registering builtin timer events...
Gathering packets...
[CONNECTION TIMEOUT -&gt; ROUTER REBOOT]</code></pre></div><p>thx a lot for every help <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>Cypher</strong> on 1 Jun 2008, 01:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p69224">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Cypher</div>
					<div class="post-datetime">
						5 Jun 2008, 18:20					</div>
				</div>
				<div class="post-content content">
					<p>Some users were talking about ioctl and that there would be an error in it.<br />Anyone know more or how to solve?<br />Thank you very much! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p69288">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Cypher</div>
					<div class="post-datetime">
						7 Jun 2008, 15:58					</div>
				</div>
				<div class="post-content content">
					<p>Problem solved!</p><p>Before starting Kismet:<br /></p><div class="codebox"><pre><code>wl down; wl up; wl monitor 1;</code></pre></div><p>in kismet.conf:<br /></p><div class="codebox"><pre><code>source=wrt54g,wl0,wl500gp</code></pre></div><p>//edit:<br />wl down; wl up; is important because without that before wl monitor 1; the router often dont switch to monitor mode.</p>											<p class="post-edited">(Last edited by <strong>Cypher</strong> on 7 Jun 2008, 16:00)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>