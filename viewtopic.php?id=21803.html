<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> can&#039;t resolve symbol &#039;__uClibc_start_main&#039;</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 9 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p94369">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">legendbb</div>
					<div class="post-datetime">
						15 Sep 2009, 21:52					</div>
				</div>
				<div class="post-content content">
					<p>followed Gargoyle Wiki tutorial to compile a package. After getting the .ipk, installed on the linksysWRT54GL (Kamikaze8.09), run error message is as topic.</p><p>any help?</p><p>make V=99 #gives, this is the later retry output, didn&#039;t save the 1st compile message, it showed some dependent package missing...<br />-----------------------------------------------------------------------------------------------------------<br />user@ubuntu:~/OpenWrt-SDK-Linux-i686-1$ make V=99<br />make package/compile<br />make[1]: Entering directory `/home/user/OpenWrt-SDK-Linux-i686-1&#039;<br />make -C package compile SDK=1<br />make[2]: Entering directory `/home/user/OpenWrt-SDK-Linux-i686-1/package&#039;<br />make -j1 compile-targets<br />make[3]: Entering directory `/home/user/OpenWrt-SDK-Linux-i686-1/package&#039;<br />make -C helloworld_2 compile<br />Rebuilding /home/user/OpenWrt-SDK-Linux-i686-1/bin/packages/helloworld_1_mipsel.ipk<br />make[4]: Entering directory `/home/user/OpenWrt-SDK-Linux-i686-1/package/helloworld_2&#039;<br />CFLAGS=&quot;-Os -pipe -mips32 -mtune=mips32 -funit-at-a-time -I/home/user/OpenWrt-SDK-Linux-i686-1/staging_dir_mipsel/usr/include -I/home/user/OpenWrt-SDK-Linux-i686-1/staging_dir_mipsel/include &quot; LDFLAGS=&quot;-L/home/user/OpenWrt-SDK-Linux-i686-1/staging_dir_mipsel/usr/lib -L/home/user/OpenWrt-SDK-Linux-i686-1/staging_dir_mipsel/lib &quot; make -C /home/user/OpenWrt-SDK-Linux-i686-1/build_mipsel/helloworld AR=mipsel-linux-uclibc-ar AS=&quot;mipsel-linux-uclibc-gcc -c -Os -pipe -mips32 -mtune=mips32 -funit-at-a-time&quot; LD=mipsel-linux-uclibc-ld NM=mipsel-linux-uclibc-nm CC=&quot;mipsel-linux-uclibc-gcc&quot; GCC=&quot;mipsel-linux-uclibc-gcc&quot; CXX=mipsel-linux-uclibc-g++ RANLIB=mipsel-linux-uclibc-ranlib STRIP=mipsel-linux-uclibc-strip OBJCOPY=mipsel-linux-uclibc-objcopy CROSS=&quot;mipsel-linux-uclibc-&quot; CXXFLAGS=&quot;-Os -pipe -mips32 -mtune=mips32 -funit-at-a-time -I/home/user/OpenWrt-SDK-Linux-i686-1/staging_dir_mipsel/usr/include -I/home/user/OpenWrt-SDK-Linux-i686-1/staging_dir_mipsel/include &quot; ARCH=&quot;mipsel&quot; ;<br />make[5]: Entering directory `/home/user/OpenWrt-SDK-Linux-i686-1/build_mipsel/helloworld&#039;<br />make[5]: `helloworld&#039; is up to date.<br />make[5]: Leaving directory `/home/user/OpenWrt-SDK-Linux-i686-1/build_mipsel/helloworld&#039;<br />touch /home/user/OpenWrt-SDK-Linux-i686-1/build_mipsel/helloworld/.built<br />install -d -m0755 /home/user/OpenWrt-SDK-Linux-i686-1/build_mipsel/helloworld/ipkg/helloworld/bin<br />install -m0755 /home/user/OpenWrt-SDK-Linux-i686-1/build_mipsel/helloworld/helloworld /home/user/OpenWrt-SDK-Linux-i686-1/build_mipsel/helloworld/ipkg/helloworld/bin/<br />mkdir -p /home/user/OpenWrt-SDK-Linux-i686-1/bin/packages<br />find /home/user/OpenWrt-SDK-Linux-i686-1/build_mipsel/helloworld/ipkg/helloworld -name CVS | xargs rm -rf<br />find /home/user/OpenWrt-SDK-Linux-i686-1/build_mipsel/helloworld/ipkg/helloworld -name .svn | xargs rm -rf<br />find /home/user/OpenWrt-SDK-Linux-i686-1/build_mipsel/helloworld/ipkg/helloworld -name &#039;.#*&#039; | xargs rm -f<br />STRIP=&quot;/home/user/OpenWrt-SDK-Linux-i686-1/staging_dir_mipsel/bin/sstrip&quot; STRIP_KMOD=&quot;mipsel-linux-uclibc-strip --strip-unneeded --remove-section=.comment&quot; /home/user/OpenWrt-SDK-Linux-i686-1/scripts/rstrip.sh /home/user/OpenWrt-SDK-Linux-i686-1/build_mipsel/helloworld/ipkg/helloworld<br />rstrip.sh: /home/user/OpenWrt-SDK-Linux-i686-1/build_mipsel/helloworld/ipkg/helloworld/bin/helloworld:executable<br />ipkg-build -c -o 0 -g 0 /home/user/OpenWrt-SDK-Linux-i686-1/build_mipsel/helloworld/ipkg/helloworld /home/user/OpenWrt-SDK-Linux-i686-1/bin/packages<br />Packaged contents of /home/user/OpenWrt-SDK-Linux-i686-1/build_mipsel/helloworld/ipkg/helloworld into /home/user/OpenWrt-SDK-Linux-i686-1/bin/packages/helloworld_1_mipsel.ipk<br />make[4]: Leaving directory `/home/user/OpenWrt-SDK-Linux-i686-1/package/helloworld_2&#039;<br />make[3]: Leaving directory `/home/user/OpenWrt-SDK-Linux-i686-1/package&#039;<br />make[2]: Leaving directory `/home/user/OpenWrt-SDK-Linux-i686-1/package&#039;<br />make[1]: Leaving directory `/home/user/OpenWrt-SDK-Linux-i686-1&#039;<br />( \<br />&nbsp; &nbsp; &nbsp; &nbsp; cd package; \<br />&nbsp; &nbsp; &nbsp; &nbsp; find . -maxdepth 2 -name Config.in | \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sed -e &#039;s,/Config.in,,g&#039; | \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; xargs -r -n1 make compile -C; \<br />&nbsp; &nbsp; )<br />------------------------------------------------------ end of make error message--------------------------------</p><p>------------------------------------ Makefile --------------------------------------------------<br />##############################################<br /># OpenWrt Makefile for helloworld program<br />#<br />#<br /># Most of the variables used here are defined in<br /># the include directives below. We just need to <br /># specify a basic description of the package, <br /># where to build our program, where to find <br /># the source files, and where to install the <br /># compiled program on the router. <br /># <br /># Be very careful of spacing in this file.<br /># Indents should be tabs, not spaces, and <br /># there should be no trailing whitespace in<br /># lines that are not commented.<br /># <br />##############################################</p><p>include $(TOPDIR)/rules.mk</p><p># Name and release number of this package<br />PKG_NAME:=helloworld<br />PKG_RELEASE:=1</p><br /><p># This specifies the directory where we&#039;re going to build the program.&nbsp; <br /># The root build directory, $(BUILD_DIR), is by default the build_mipsel <br /># directory in your OpenWrt SDK directory<br />PKG_BUILD_DIR := $(BUILD_DIR)/$(PKG_NAME)</p><br /><p>include $(INCLUDE_DIR)/package.mk</p><br /><br /><p># Specify package information for this program. <br /># The variables defined here should be self explanatory.<br /># If you are running Kamikaze, delete the DESCRIPTION <br /># variable below and uncomment the Kamikaze define<br /># directive for the description below<br />define Package/helloworld<br />&nbsp; &nbsp; SECTION:=utils<br />&nbsp; &nbsp; CATEGORY:=Utilities<br />&nbsp; &nbsp; TITLE:=Helloworld -- prints a snarky message<br />&nbsp; &nbsp; DESCRIPTION:=\<br />&nbsp; &nbsp; If you can&#039;t figure out what this program does, \\\<br />&nbsp; &nbsp; you&#039;re probably brain-dead and need immediate \\\<br />&nbsp; &nbsp; medical attention.<br />endef</p><br /><p># Uncomment portion below for Kamikaze and delete DESCRIPTION variable above<br />#define Package/helloworld/description<br />#&nbsp; &nbsp; If you can&#039;t figure out what this program does, you&#039;re probably<br />#&nbsp; &nbsp; brain-dead and need immediate medical attention.<br />#endef</p><br /><br /><p># Specify what needs to be done to prepare for building the package.<br /># In our case, we need to copy the source files to the build directory.<br /># This is NOT the default.&nbsp; The default uses the PKG_SOURCE_URL and the<br /># PKG_SOURCE which is not defined here to download the source from the web.<br /># In order to just build a simple program that we have just written, it is<br /># much easier to do it this way.<br />define Build/Prepare<br />&nbsp; &nbsp; mkdir -p $(PKG_BUILD_DIR)<br />&nbsp; &nbsp; $(CP) ./src/* $(PKG_BUILD_DIR)/<br />endef</p><br /><p># We do not need to define Build/Configure or Build/Compile directives<br /># The defaults are appropriate for compiling a simple program such as this one</p><br /><p># Specify where and how to install the program. Since we only have one file, <br /># the helloworld executable, install it by copying it to the /bin directory on<br /># the router. The $(1) variable represents the root directory on the router running <br /># OpenWrt. The $(INSTALL_DIR) variable contains a command to prepare the install <br /># directory if it does not already exist.&nbsp; Likewise $(INSTALL_BIN) contains the <br /># command to copy the binary file from its current location (in our case the build<br /># directory) to the install directory.<br />define Package/helloworld/install<br />&nbsp; &nbsp; $(INSTALL_DIR) $(1)/bin<br />&nbsp; &nbsp; $(INSTALL_BIN) $(PKG_BUILD_DIR)/helloworld $(1)/bin/<br />endef</p><br /><p># This line executes the necessary commands to compile our program.<br /># The above define directives specify all the information needed, but this<br /># line calls BuildPackage which in turn actually uses this information to<br /># build a package.<br />$(eval $(call BuildPackage,helloworld))<br />----------------------------------------- End of Makefile ----------------------------------------------</p><p>------------------------------------------ Source Code -----------------------------------------------<br />/****************<br />* Helloworld.c<br />* The most simplistic C program ever written. <br />* An epileptic monkey on crack could write this code.<br />*****************/</p><p>#include &lt;stdio.h&gt;<br />int main(void)<br />{<br />&nbsp; &nbsp; &nbsp;printf(&quot;Hell! O&#039; world, why won&#039;t my code compile?\n\n&quot;);<br />&nbsp; &nbsp; &nbsp;return 0; <br />}<br />------------------------------------------ End of Source Code -----------------------------------------</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94370">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						15 Sep 2009, 21:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>Packaged contents of /home/user/OpenWrt-SDK-Linux-i686-1/build_mipsel/helloworld/ipkg/helloworld into /home/user/OpenWrt-SDK-Linux-i686-1/bin/packages/helloworld_1_mipsel.ipk</p></blockquote></div><p>I fail to see an error.</p><p>Edit:</p><p>Missing references to &quot;__uClibc_start_main&quot; can have various reasons:<br /> - your executable was not linked against uClibc (-lc)<br /> - your executable was linked against a different version of uClibc<br /> - the wrong compiler was choosen to build the executable</p>											<p class="post-edited">(Last edited by <strong>jow</strong> on 15 Sep 2009, 22:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94375">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">legendbb</div>
					<div class="post-datetime">
						15 Sep 2009, 22:39					</div>
				</div>
				<div class="post-content content">
					<p>Thank you for all replies,</p><p>It will also be helpful if I can be directed to certain beginner&#039;s guide,<br />beside the wiki howto:<br /><a href="http://wiki.openwrt.org/oldwiki/buildingpackageshowto">http://wiki.openwrt.org/oldwiki/buildingpackageshowto</a></p><p>Thanks,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p96175">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">rubenrumu</div>
					<div class="post-datetime">
						21 Oct 2009, 13:29					</div>
				</div>
				<div class="post-content content">
					<p>I had exactly the same problem with another application I want to execute in my router. </p><p>This is my OpenWRT SDK Makefile:</p><p>############################################################################################</p><p>include $(TOPDIR)/rules.mk</p><p># Name and release number of this package<br />PKG_NAME:=dump<br />PKG_RELEASE:=1</p><p># This specifies the directory where we&#039;re going to build the program.&nbsp; <br /># The root build directory, $(BUILD_DIR), is by default the build_mipsel <br /># directory in your OpenWrt SDK directory<br />PKG_BUILD_DIR := $(BUILD_DIR)/$(PKG_NAME)</p><p>include $(INCLUDE_DIR)/package.mk</p><p># Specify package information for this program. <br /># The variables defined here should be self explanatory.<br /># If you are running Kamikaze, delete the DESCRIPTION <br /># variable below and uncomment the Kamikaze define<br /># directive for the description below</p><p>define Package/dump<br />&nbsp; &nbsp; SECTION:=utils<br />&nbsp; &nbsp; CATEGORY:=Utilities<br />&nbsp; &nbsp; TITLE:=Aero -- CCX scanning<br />&nbsp; &nbsp; DESCRIPTION:=\<br />&nbsp; &nbsp; Aero scanning<br />endef</p><p># Uncomment portion below for Kamikaze and delete DESCRIPTION variable above <br />define Package/dump/description <br /> Aero scanning<br />endef </p><p># Specify what needs to be done to prepare for building the package. <br /># In our case, we need to copy the source files to the build directory. <br /># This is NOT the default. The default uses the PKG_SOURCE_URL and the <br /># PKG_SOURCE which is not defined here to download the source from the web. </p><p># In order to just build a simple program that we have just written, it is <br /># much easier to do it this way. </p><p>define Build/Prepare <br />&nbsp; &nbsp; mkdir -p $(PKG_BUILD_DIR) <br />&nbsp; &nbsp; $(CP) ./src/* $(PKG_BUILD_DIR)/ <br />endef </p><p># We do not need to define Build/Configure or Build/Compile directives <br /># The defaults are appropriate for compiling a simple program such as this one <br /># Specify where and how to install the program. Since we only have one file, <br /># the aero executable, install it by copying it to the /bin directory on <br /># the router. The $(1) variable represents the root directory on the router running <br /># OpenWrt. The $(INSTALL_DIR) variable contains a command to prepare the install <br /># directory if it does not already exist. Likewise $(INSTALL_BIN) contains the <br /># command to copy the binary file from its current location (in our case the build <br /># directory) to the install directory. </p><p>define Package/dump/install <br />&nbsp; &nbsp; $(INSTALL_DIR) $(1)/bin <br />&nbsp; &nbsp; $(INSTALL_BIN) $(PKG_BUILD_DIR)/dump $(1)/bin/ <br />endef </p><p># This line executes the necessary commands to compile our program. <br /># The above define directives specify all the information needed, but this <br /># line calls BuildPackage which in turn actually uses this information to <br /># build a package. </p><p>$(eval $(call BuildPackage,dump)) </p><p>############################################################################################</p><p>And this is the Makefile that compiles the app:</p><p>############################################################################################<br />dump: airodump-ng.o common.o<br />&nbsp; &nbsp; $(CC) $(LDFLAGS) -nodefaultlibs -L$(STAGING_DIR)/lib -lc airodump-ng.o common.o -o dump</p><p>airodump-ng.o: airodump-ng.c common.c<br />&nbsp; &nbsp; $(CC) $(CFLAGS) -c airodump-ng.c common.c</p><p>clean:<br />&nbsp; &nbsp; rm -f *.o dump<br />############################################################################################</p><p>What did I miss?</p><p>Thank you.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>