<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Ath5k vs Madwifi-ng (preluminary benchmarks)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 27 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p71787">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">acoul</div>
					<div class="post-datetime">
						5 Aug 2008, 12:16					</div>
				</div>
				<div class="post-content content">
					<p>The test was conducted using iperf. The two systems were: a&nbsp; Mobile Intel(R) Pentium(R) III CPU - M&nbsp; 1200MHz powered by 2.6.23-gentoo-r9 linux running madwifi-ng-trunk-3823 and a Geode by NSC 233MHz wrap powered by <a href="http://wifi.ozo.com/airo/openwrt/firmware/kamikaze/2.6/x86/12131/">openwrt-x86-trunk-12131</a>. the ath5k used was a 2008-08-05 git checkout.</p><p>The wifi cards used, on the laptop side: 3Com Corporation 3CRPAG175 Wireless PC Card <br /></p><div class="codebox"><pre><code>ath_info 0xf4000000
 -==Device Information==-
MAC Revision: 5213+ (0x56)
Device type:  1
5GHz PHY Revision: 5111  (0x17)
2GHz PHY Revision: 2111  (0x23)</code></pre></div><p>from the wrap part: miniPCI Wistron cm9<br /></p><div class="codebox"><pre><code>ath_info 0x80000000
 -==Device Information==-
MAC Revision: 5213A (0x59)
Device type:  3
5GHz PHY Revision: 5112A (0x36)</code></pre></div><p>the results:<br /></p><div class="quotebox"><blockquote><p>Madwifi AP, Ath5k sta - 802.11a channel 64 --&gt; 5.32GHz:<br />signal: -63dbm at cm9 end</p><p>iperf -c 192.168.100.2 -u -b 90m</p><p>0.0-10.0 sec&nbsp; 34.4 MBytes&nbsp; 28.9 Mbits/sec&nbsp; 0.069 ms&nbsp; &nbsp; 1/24564 (0.0041%)</p></blockquote></div><div class="quotebox"><blockquote><p>Madwifi both ends - 802.11a channel 64 --&gt; 5.32GHz:<br />signal: -66dbm at cm9 end</p><p>iperf -c 192.168.100.2 -u -b 90m</p><p>0.0-10.0 sec&nbsp; 48.3 MBytes&nbsp; 40.4 Mbits/sec&nbsp; 0.263 ms&nbsp; &nbsp; 1/34422 (0.0029%)</p></blockquote></div><p>I was not able to get an association on adhoc mode between the wifi cards in order to conduct a ath5k&lt;--&gt;ath5k test.</p>											<p class="post-edited">(Last edited by <strong>acoul</strong> on 5 Aug 2008, 16:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p71857">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">acoul</div>
					<div class="post-datetime">
						6 Aug 2008, 22:33					</div>
				</div>
				<div class="post-content content">
					<p>Here is a follow up. the equipment used: Alix x86 433MHz with cm9 as AP and a wrap x86 233MHz with cm9 as STA. both units with openwrt-trunk-12202, madwifi-openwrt-trunk-12202 &amp; ath5k 2008-08-06 git checkout. iperf multi threaded was used.<br /></p><div class="quotebox"><blockquote><p>AP=alix, cm9, madwifi-openwrt-trunk-12202<br />STA=wrap, cm9 ath5k 2008-08-06 git checkout</p><p>AP:<br />Link Quality=39/70&nbsp; Signal level=-57 dBm&nbsp; Noise level=-96 dBm</p><p>STA:<br />Link Quality=54/100&nbsp; Signal level:-58 dBm&nbsp; Noise level=-93 dBm</p><p>AP:<br />iperf -s -u -b 40m -d</p><p>STA:<br />iperf -c 192.168.100.2 -u&nbsp; -b 40m -d</p><p>------------------------------------------------------------<br />Server listening on UDP port 5001<br />Receiving 1470 byte datagrams<br />UDP buffer size:&nbsp; &nbsp;108 KByte (default)<br />------------------------------------------------------------<br />------------------------------------------------------------<br />Client connecting to 192.168.100.2, UDP port 5001<br />Sending 1470 byte datagrams<br />UDP buffer size:&nbsp; &nbsp;108 KByte (default)<br />------------------------------------------------------------<br />[&nbsp; 6] local 192.168.100.1 port 48826 connected with 192.168.100.2 port 5001<br />[&nbsp; 5] local 192.168.100.1 port 5001 connected with 192.168.100.2 port 37134<br />[&nbsp; 6]&nbsp; 0.0-10.0 sec&nbsp; 8.06 MBytes&nbsp; 6.76 Mbits/sec<br />[&nbsp; 6] Sent 5752 datagrams<br />[&nbsp; 5]&nbsp; 0.0-10.0 sec&nbsp; 30.2 MBytes&nbsp; 25.3 Mbits/sec&nbsp; 0.510 ms 12477/34013 (37%)<br />[&nbsp; 5]&nbsp; 0.0-10.0 sec&nbsp; 1 datagrams received out-of-order<br />[&nbsp; 6] Server Report:<br />[&nbsp; 6]&nbsp; 0.0-10.1 sec&nbsp; 8.06 MBytes&nbsp; 6.68 Mbits/sec&nbsp; 1.625 ms&nbsp; &nbsp; 0/ 5751 (0%)<br />[&nbsp; 6]&nbsp; 0.0-10.1 sec&nbsp; 1 datagrams received out-of-order</p></blockquote></div><div class="quotebox"><blockquote><p>AP=alix, cm9, madwifi-openwrt-trunk-12202<br />STA=wrap, cm9, madwifi-openwrt-trunk-12202</p><p>Link quality:<br />AP=-66dbm, STA=-64dbm</p><p>AP:<br />iperf -s -u -b 40m -d</p><p>STA:<br />iperf -c 192.168.100.2 -u&nbsp; -b 40m -d</p><p>ff=0, burst=0 both ends</p><p>------------------------------------------------------------<br />Server listening on UDP port 5001<br />Receiving 1470 byte datagrams<br />UDP buffer size:&nbsp; &nbsp;108 KByte (default)<br />------------------------------------------------------------<br />------------------------------------------------------------<br />Client connecting to 192.168.100.2, UDP port 5001<br />Sending 1470 byte datagrams<br />UDP buffer size:&nbsp; &nbsp;108 KByte (default)<br />------------------------------------------------------------<br />[&nbsp; 6] local 192.168.100.1 port 51775 connected with 192.168.100.2 port 5001<br />[&nbsp; 5] local 192.168.100.1 port 5001 connected with 192.168.100.2 port 40446<br />[&nbsp; 6]&nbsp; 0.0-10.0 sec&nbsp; 28.0 MBytes&nbsp; 23.5 Mbits/sec<br />[&nbsp; 6] Sent 19995 datagrams<br />[&nbsp; 5]&nbsp; 0.0-10.2 sec&nbsp; 16.0 MBytes&nbsp; 13.1 Mbits/sec&nbsp; 13.571 ms 22586/34012 (66%)<br />[&nbsp; 5]&nbsp; 0.0-10.2 sec&nbsp; 1 datagrams received out-of-order<br />[&nbsp; 6] Server Report:<br />[&nbsp; 6]&nbsp; 0.0-10.2 sec&nbsp; 20.3 MBytes&nbsp; 16.7 Mbits/sec&nbsp; 14.060 ms 5488/19990 (27%)<br />[&nbsp; 6]&nbsp; 0.0-10.2 sec&nbsp; 1 datagrams received out-of-order</p></blockquote></div><div class="quotebox"><blockquote><p>AP=alix, cm9, madwifi-openwrt-trunk-12202<br />STA=wrap, cm9, madwifi-openwrt-trunk-12202</p><p>Link quality:<br />AP=-66dbm, STA=-64dbm</p><p>AP:<br />iperf -s -u -b 100m -d</p><p>STA:<br />iperf -c 192.168.100.2 -u&nbsp; -b 100m -d</p><p>ff=1, burst=1 both ends</p><p>------------------------------------------------------------<br />Server listening on UDP port 5001<br />Receiving 1470 byte datagrams<br />UDP buffer size:&nbsp; &nbsp;108 KByte (default)<br />------------------------------------------------------------<br />------------------------------------------------------------<br />Client connecting to 192.168.100.2, UDP port 5001<br />Sending 1470 byte datagrams<br />UDP buffer size:&nbsp; &nbsp;108 KByte (default)<br />------------------------------------------------------------<br />[&nbsp; 6] local 192.168.100.1 port 58076 connected with 192.168.100.2 port 5001<br />[&nbsp; 5] local 192.168.100.1 port 5001 connected with 192.168.100.2 port 53931<br />[&nbsp; 6]&nbsp; 0.0-10.0 sec&nbsp; 28.0 MBytes&nbsp; 23.5 Mbits/sec<br />[&nbsp; 6] Sent 19958 datagrams<br />[&nbsp; 5]&nbsp; 0.0-10.0 sec&nbsp; 20.0 MBytes&nbsp; 16.8 Mbits/sec&nbsp; 1.495 ms&nbsp; &nbsp; 6/14271 (0.042%)<br />[&nbsp; 5]&nbsp; 0.0-10.0 sec&nbsp; 1 datagrams received out-of-order<br />[&nbsp; 6] Server Report:<br />[&nbsp; 6]&nbsp; 0.0-10.0 sec&nbsp; 28.0 MBytes&nbsp; 23.5 Mbits/sec&nbsp; 0.902 ms&nbsp; &nbsp; 0/19957 (0%)<br />[&nbsp; 6]&nbsp; 0.0-10.0 sec&nbsp; 1 datagrams received out-of-order</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p71900">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">acoul</div>
					<div class="post-datetime">
						7 Aug 2008, 13:32					</div>
				</div>
				<div class="post-content content">
					<p>Here are the results for the adhoc mode under madwifi-ng.&nbsp; ad-hoc mode under ath5k could not associate.<br /></p><div class="quotebox"><blockquote><p>d-Hoc: madwifi, Ad-Hoc: madwifi, ff=0, burst=0 both ends</p><p>Ad-Hoc:<br />Link Quality=29/70&nbsp; Signal level=-67 dBm&nbsp; Noise level=-96 dBm</p><p>Ad-Hoc:<br />Link Quality=26/70&nbsp; Signal level=-70 dBm&nbsp; Noise level=-96 dBm</p><p>------------------------------------------------------------<br />Server listening on UDP port 5001<br />Receiving 1470 byte datagrams<br />UDP buffer size:&nbsp; &nbsp;108 KByte (default)<br />------------------------------------------------------------<br />------------------------------------------------------------<br />Client connecting to 192.168.100.2, UDP port 5001<br />Sending 1470 byte datagrams<br />UDP buffer size:&nbsp; &nbsp;108 KByte (default)<br />------------------------------------------------------------<br />[&nbsp; 6] local 192.168.100.1 port 36223 connected with 192.168.100.2 port 5001<br />[&nbsp; 5] local 192.168.100.1 port 5001 connected with 192.168.100.2 port 44117<br />[&nbsp; 6]&nbsp; 0.0-10.0 sec&nbsp; 24.4 MBytes&nbsp; 20.5 Mbits/sec<br />[&nbsp; 6] Sent 17439 datagrams<br />[&nbsp; 6] Server Report:<br />[&nbsp; 6]&nbsp; 0.0-10.0 sec&nbsp; 17.2 MBytes&nbsp; 14.4 Mbits/sec&nbsp; 0.750 ms 5175/17438 (30%)<br />[&nbsp; 6]&nbsp; 0.0-10.0 sec&nbsp; 1 datagrams received out-of-order<br />[&nbsp; 5]&nbsp; 0.0-10.2 sec&nbsp; 18.2 MBytes&nbsp; 14.9 Mbits/sec&nbsp; 13.951 ms 21040/34008 (62%)</p></blockquote></div><div class="quotebox"><blockquote><p>Ad-Hoc: madwifi, Ad-Hoc: madwifi, ff=1, burst=1 both ends</p><p>Ad-Hoc:<br />Link Quality=29/70&nbsp; Signal level=-67 dBm&nbsp; Noise level=-96 dBm</p><p>Ad-Hoc:<br />Link Quality=26/70&nbsp; Signal level=-70 dBm&nbsp; Noise level=-96 dBm</p><p>------------------------------------------------------------<br />Server listening on UDP port 5001<br />Receiving 1470 byte datagrams<br />UDP buffer size:&nbsp; &nbsp;108 KByte (default)<br />------------------------------------------------------------<br />------------------------------------------------------------<br />Client connecting to 192.168.100.2, UDP port 5001<br />Sending 1470 byte datagrams<br />UDP buffer size:&nbsp; &nbsp;108 KByte (default)<br />------------------------------------------------------------<br />[&nbsp; 6] local 192.168.100.1 port 46896 connected with 192.168.100.2 port 5001<br />[&nbsp; 5] local 192.168.100.1 port 5001 connected with 192.168.100.2 port 43835<br />[&nbsp; 6]&nbsp; 0.0-10.0 sec&nbsp; 25.7 MBytes&nbsp; 21.5 Mbits/sec<br />[&nbsp; 6] Sent 18317 datagrams<br />[&nbsp; 6] Server Report:<br />[&nbsp; 6]&nbsp; 0.0-10.0 sec&nbsp; 20.5 MBytes&nbsp; 17.2 Mbits/sec&nbsp; 1.075 ms 3694/18316 (20%)<br />[&nbsp; 6]&nbsp; 0.0-10.0 sec&nbsp; 1 datagrams received out-of-order<br />[&nbsp; 5]&nbsp; 0.0-10.2 sec&nbsp; 22.0 MBytes&nbsp; 18.0 Mbits/sec&nbsp; 13.750 ms 61195/76891 (80%)<br />[&nbsp; 5]&nbsp; 0.0-10.2 sec&nbsp; 1 datagrams received out-of-order</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p71916">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">acoul</div>
					<div class="post-datetime">
						7 Aug 2008, 17:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>acoul wrote:</cite><blockquote><p>ad-hoc mode under ath5k could not associate.</p></blockquote></div><p>I wonder if I am missing a mac80211/iwpriv command to make this work ...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p72497">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">acoul</div>
					<div class="post-datetime">
						20 Aug 2008, 14:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>acoul wrote:</cite><blockquote><p>ad-hoc mode under ath5k could not associate.</p></blockquote></div><p>ad-hoc mode is broken on the latest wireless-2.6 tree.&nbsp; today I was able to benchmark two r52 802.11a/b/g cards using ath5k and hostapd along with some patches that enable AP functionality on the ath5k and mac80211 driver.&nbsp; I was unable to use hostapd and ath5k for 802.11a so I used 802.11g. here are the results from iperf:<br /></p><div class="codebox"><pre><code>iperf single thread:

root@OpenWrt:/# iperf -c 192.168.100.1 -u  -b 50m
------------------------------------------------------------
Client connecting to 192.168.100.1, UDP port 5001
Sending 1470 byte datagrams
UDP buffer size:   107 KByte (default)
------------------------------------------------------------
[  5] local 192.168.100.2 port 33138 connected with 192.168.100.1 port 5001
[  5]  0.0-10.0 sec  20.4 MBytes  17.1 Mbits/sec
[  5] Sent 14546 datagrams
[  5] Server Report:
[  5]  0.0-10.0 sec  20.1 MBytes  16.8 Mbits/sec  1.628 ms  204/14545 (1.4%)
[  5]  0.0-10.0 sec  1 datagrams received out-of-order</code></pre></div><div class="codebox"><pre><code>iperf two threads simultaneously:

root@OpenWrt:/# iperf -c 192.168.100.1 -u  -b 50m -d
------------------------------------------------------------
Server listening on UDP port 5001
Receiving 1470 byte datagrams
UDP buffer size:   107 KByte (default)
------------------------------------------------------------
------------------------------------------------------------
Client connecting to 192.168.100.1, UDP port 5001
Sending 1470 byte datagrams
UDP buffer size:   107 KByte (default)
------------------------------------------------------------
[  6] local 192.168.100.2 port 38676 connected with 192.168.100.1 port 5001
[  5] local 192.168.100.2 port 5001 connected with 192.168.100.1 port 49832
[  6]  0.0-10.0 sec  9.85 MBytes  8.26 Mbits/sec
[  6] Sent 7028 datagrams
[  5]  0.0-10.1 sec  9.64 MBytes  8.04 Mbits/sec  4.105 ms  158/ 7035 (2.2%)
[  5]  0.0-10.1 sec  1 datagrams received out-of-order
[  6] Server Report:
[  6]  0.0-10.0 sec  9.61 MBytes  8.03 Mbits/sec  3.400 ms  169/ 7027 (2.4%)
[  6]  0.0-10.0 sec  1 datagrams received out-of-order</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p75636">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">gmcc</div>
					<div class="post-datetime">
						31 Oct 2008, 09:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>acoul wrote:</cite><blockquote><p>ad-hoc mode is broken on the latest wireless-2.6 tree.&nbsp; today I was able to benchmark two r52 802.11a/b/g cards using ath5k and hostapd along with some patches that enable AP functionality on the ath5k and mac80211 driver.&nbsp; I was unable to use hostapd and ath5k for 802.11a so I used 802.11g. here are the results from iperf:</p></blockquote></div><p>could you link to the patches?<br />Are you using openwrt?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p75668">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">acoul</div>
					<div class="post-datetime">
						31 Oct 2008, 17:48					</div>
				</div>
				<div class="post-content content">
					<p>ath5k is in trunk for sometime now</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82247">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">wjyaries</div>
					<div class="post-datetime">
						20 Feb 2009, 09:53					</div>
				</div>
				<div class="post-content content">
					<p>Hi, </p><p>I am a novice at openwrt.</p><p>I use ALIX 2d2 with cm9 and download OpenWRT r14412.<br />I don&#039;t know which items that I should select when make menuconfig, so I just try on my owned risk. Hence, I can not build an image to boot the ALIX with wireless interface working.&nbsp; &nbsp;<img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>Would someone advise me or post the file &#039;.config&#039; for my reference ?</p><p>Thank you!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p83896">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">misha680</div>
					<div class="post-datetime">
						15 Mar 2009, 03:44					</div>
				</div>
				<div class="post-content content">
					<p>Btw, would you mind posting your /etc/config/wireless for the madwifi? I am using 8.09 with a tp-link card but my iperf times are quite a bit slower than yours...</p><p>Thank you<br />Misha</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>