<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [mjpg-streamer/uvc] Webcam not recognized</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 9 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p61219">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">moh_de</div>
					<div class="post-datetime">
						3 Jan 2008, 23:44					</div>
				</div>
				<div class="post-content content">
					<p>Hi, <br />I tried no setup uvc/mjpg-streamer in openwrt-kamikaze-7.09 as described here: <a href="http://naaa.de/programme/uvc_streamer/openwrt/HowTo-MJPG-streamer-Kamikaze-7.09.txt">http://naaa.de/programme/uvc_streamer/o … e-7.09.txt</a>. <br />Hardware is a Netgear WGT634U (Broadcom 2.6, USB2.0). <br />But no luck. All packages installed without any problems, but when I connect my webcam (Labtec webcam pro, 0x046d/0x08a2) it gets recognized - but not as a v4l-device. I simply get a: </p><p>usb 1-1: new full speed USB device using ohci_hcd and address 5 <br />usb 1-1: configuration #1 chosen from 1 choice </p><p>but thats all. No /dev/videoX is being created. </p><p>Any ideas? Any help? :-) </p><p>Best regards, <br />moh</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p61225">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">forum2008</div>
					<div class="post-datetime">
						4 Jan 2008, 00:20					</div>
				</div>
				<div class="post-content content">
					<p>I successfully tested a Logitech Quickcam Pro for Notebooks (2007) with Linux UVC and Kamikaze trunk.</p><p>I followed <a href="http://wiki.openwrt.org/webcam#head-594863993caa0e188c09f1dffe7bb58e75194ce6">http://wiki.openwrt.org/webcam#head-594 … 8e75194ce6</a> and wrote that UCI configuration file and init script for uvc-streamer.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p61246">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">moh_de</div>
					<div class="post-datetime">
						4 Jan 2008, 12:46					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for your help.</p><p>But it seems that kmod-video-uvc is missing in kamikaze 7.09:</p><p>root@OpenWrt:/# ipkg install kmod-video-uvc<br />Nothing to be done<br />An error ocurred, return value: 4.<br />Collected errors:<br />Cannot find package kmod-video-uvc.<br />Check the spelling or perhaps run &#039;ipkg update&#039;</p><p>&lt;edit&gt;<br />Sorry, didn&#039;t recognize that you wrote &#039;trunk&#039;, not 7.09. I&#039;ll check this out. Thanks again.<br />&lt;/edit&gt;</p><p>Regards,<br />moh</p>											<p class="post-edited">(Last edited by <strong>moh_de</strong> on 4 Jan 2008, 12:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p61248">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">jchlg</div>
					<div class="post-datetime">
						4 Jan 2008, 12:55					</div>
				</div>
				<div class="post-content content">
					<p>Same Problem here,<br />your hardware isn&#039;t recognized through the driver<br />uvc_driver.c from svn linux-uvc missed a lot of idprod and idvendor</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p61307">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Tom</div>
					<div class="post-datetime">
						6 Jan 2008, 11:43					</div>
				</div>
				<div class="post-content content">
					<p>Moin Moin,<br />For Kamikaze 7.09 i published the backported linux-uvc driver at my site. This is also the reason why i wrote a &quot;HowTo&quot; (<a href="http://naaa.de/programme/uvc_streamer/openwrt/HowTo-MJPG-streamer-Kamikaze-7.09.txt">http://naaa.de/programme/uvc_streamer/o … e-7.09.txt</a>). There were several changes between 7.09 and the current trunk version. I do not plan to maintain the kamikaze 7.09 and i will not prepare new releases for that version.</p><p>For the current Kamikaze-trunk there is no need to download the packages fro my site, you can simply compile them and they should work. Please verify if the ipkg install commands really retrieved files from the web or if that failed.</p><p>@moh_de: can you please post the output of &quot;lsmod&quot;?</p><p>Regards,<br />Tom</p><p>Edit:<br />Sorry, Mod_de, but your webcam is not supported by the Linux-UVC driver. It is supported by the gspca driver by Michel Xhaard. By now mjpg-streamer does not provide an input plugin to grab images from such a source.</p>											<p class="post-edited">(Last edited by <strong>Tom</strong> on 6 Jan 2008, 14:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p62597">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Tom</div>
					<div class="post-datetime">
						31 Jan 2008, 09:04					</div>
				</div>
				<div class="post-content content">
					<p>I added experimental support for gspcav1 compatible webcams now. Many of those webcams also support JPEG compression by the webcam itself and should run well on a router. Perhaps you want to give it a try, so far my tests are limited to use the new input-plugin on PC (Ubuntu 6.06 LTS, Typhoon Webshot II, gspcav1-20071224) i did not changed the compile rule for OpenWrt yet.</p><p>Cheers,<br />Tom</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p62621">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">moh_de</div>
					<div class="post-datetime">
						31 Jan 2008, 23:12					</div>
				</div>
				<div class="post-content content">
					<p>Hi Tom,<br />I compiled r56 of mjpg-streamer and installed it on my wgt634u.</p><p>I&#039;m using the spca5xxle module, because it fit my needs:</p><div class="codebox"><pre><code>root@OpenWrt:~# ipkg list_installed
base-files-brcm47xx - 12-r10272 -
bridge - 1.0.6-1 -
busybox - 1.8.2-1 -
dnsmasq - 2.40-1 -
dropbear - 0.50-3 -
haserl - 0.8.0-2 -
hotplug2 - 0.9+r102-2 -
iftop - 0.17-1 -
iptables - 1.3.8-2 -
kernel - 2.6.23.1-brcm47xx-1 -
kmod-diag - 2.6.23.1-brcm47xx-2 -
kmod-ipt-nathelper - 2.6.23.1-brcm47xx-1 -
kmod-madwifi - 2.6.23.1+r3252-brcm47xx-1 -
kmod-switch - 2.6.23.1-brcm47xx-1 -
kmod-usb-core - 2.6.23.1-brcm47xx-1 -
kmod-usb-ohci - 2.6.23.1-brcm47xx-1 -
kmod-usb2 - 2.6.23.1-brcm47xx-1 -
kmod-video-core - 2.6.23.1-brcm47xx-1 -
kmod-video-spca5xx-le - 2.6.23.1+1-brcm47xx-1 -
libgcc - 4.1.2-12 -
libjpeg - 6b-1 -
libncurses - 5.6-1 -
libpcap - 0.9.4-1 -
libpthread - 0.9.29-12 -
libusb - 0.1.12-1 -
mjpg-streamer - rev56-1 -
motion - 3.2.9-1 -
mtd - 6 -
nano - 2.0.7-1 -
ntpclient - 2003_194-6 -
palantir - 2.6-1 -
spca5xx-view - 1-1 -
uclibc - 0.9.29-12 -
udevtrigger - 106-1 -
usbutils - 0.73-1 -
webif - 0.3-10 -
wireless-tools - 29-2 -
zlib - 1.2.3-5 -
Done.
root@OpenWrt:~#</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:~# lsmod
Module                  Size  Used by    Tainted: P
spca5xx                82112  0
videodev               23104  1 spca5xx
compat_ioctl32           448  0
v4l1_compat            11280  1 videodev
v4l2_common            12608  1 videodev
ehci_hcd               28560  0
ohci_hcd               16592  0
ath_pci               120592  0
wlan_xauth               480  0
wlan_wep                4000  0
wlan_tkip               9664  0
wlan_ccmp               5440  0
wlan_acl                1888  0
ath_rate_minstrel       7936  1
ath_hal               271168  3 ath_pci,ath_rate_minstrel
wlan_scan_sta           8672  0
wlan_scan_ap            6560  0
wlan                  151552  10 ath_pci,wlan_xauth,wlan_wep,wlan_tkip,wlan_ccmp,wlan_acl,ath_rate_minstrel,wlan_scan_sta,wlan_scan_ap
nf_nat_tftp              480  0
nf_conntrack_tftp       2480  1 nf_nat_tftp
nf_nat_irc               960  0
nf_conntrack_irc        2832  1 nf_nat_irc
nf_nat_ftp              1472  0
nf_conntrack_ftp        5152  1 nf_nat_ftp
usbcore               106224  4 spca5xx,ehci_hcd,ohci_hcd
switch_robo             4048  0
switch_core             5056  1 switch_robo
diag                    8400  0
root@OpenWrt:~#</code></pre></div><p>After plugging in my webcam it gets recognized immediately:</p><div class="codebox"><pre><code>root@OpenWrt:~# dmesg | tail -n3
usb 1-1: new full speed USB device using ohci_hcd and address 3
usb 1-1: configuration #1 chosen from 1 choice
/data/oni/kamikaze-build-root/trunk/build_dir/linux-brcm47xx/spca5xx-le/spca_core.c: USB SPCA5XX camera found. Type Labtec Webcam Pro Zc0302 + Hdcs2020
root@OpenWrt:~#</code></pre></div><p>And video0 is correctly populated:</p><div class="codebox"><pre><code>root@OpenWrt:~# ls /dev/v*
/dev/video0
root@OpenWrt:~#</code></pre></div><p>But when I try to start mjpg-streamer, it fails:</p><div class="codebox"><pre><code>root@OpenWrt:~# mjpg_streamer
MJPG Streamer Version.: 2.0
 i: Using V4L2 device.: /dev/video0
 i: Desired Resolution: 640 x 480
 i: Frames Per Second.: 5
 i: Format............: MJPEG
Error opening device /dev/video0: unable to query device.
 Init v4L2 failed !! exit fatal
 i: init_VideoIn failed
root@OpenWrt:~#</code></pre></div><p>Any idea?</p><p>Thanks &amp; Regards,<br />moh</p>											<p class="post-edited">(Last edited by <strong>moh_de</strong> on 31 Jan 2008, 23:13)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p62696">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Tom</div>
					<div class="post-datetime">
						2 Feb 2008, 09:43					</div>
				</div>
				<div class="post-content content">
					<p>Hi Moh,<br />There is a new input-plugin &quot;input_gspcav1.so&quot;. This must get copied to the target (&quot;/usr/lib&quot;, or &quot;/lib&quot;) and specified at the command line:<br /># mjpg_streamer --input &quot;input_gspcav1.so --device /dev/video0&quot; --output &quot;output_http.so -w /webcam_www&quot;</p><p>The compile rule does not necessarily need to get changed, copying the plugin across will be sufficent for the time beeing. The idea with the plugin-files (*.so) allows to save space at the target: <br />If you do not need the input_testpicture.so or input_uvc.so input plugins at all, you can save space by not copying them to the target. The same is true for the output_file.so plugin. If you just need a HTTP dameon output you can leave out/delete the output_file.so plugin.</p><p>Currently the picture controls are not implemented, framerate/hue/brightness/saturation etc. can not be set to another value, this will come later.</p><p>Regards,<br />Tom</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p62702">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">moh_de</div>
					<div class="post-datetime">
						2 Feb 2008, 12:20					</div>
				</div>
				<div class="post-content content">
					<p>Wooooosaaaa!</p><p>It works:</p><div class="codebox"><pre><code>root@OpenWrt:~# mjpg_streamer --input &quot;input_gspcav1.so --device /dev/video0&quot; --output &quot;output_http.so -w /webcam_www&quot;
MJPG Streamer Version.: 2.0
 i: Using V4L1 device.: /dev/video0
 i: Desired Resolution: 640 x 480
video /dev/video0
Camera found: Labtec Webcam Pro
VIDIOCGPICT brightnes=32768 hue=0 color=0 contrast=32768 whiteness=3196depth=8 palette=21
Bridge found: ZC301-2
wrong spca5xx device
StreamId: 0  Camera
try palette 21 depth 8
Available  palette 21
try palette 15 depth 12
Couldnt set palette first try 15
Damned second try fail
try palette 4 depth 24
Couldnt set palette first try 4
Damned second try fail
try palette 3 depth 16
Couldnt set palette first try 3
Damned second try fail
try palette 5 depth 32
Couldnt set palette first try 5
Damned second try fail
probe size in
Available Resolutions width 640  heigth 480
Available Resolutions width 384  heigth 288
Available Resolutions width 352  heigth 288
Available Resolutions width 320  heigth 240
Available Resolutions width 192  heigth 144
Available Resolutions width 176  heigth 144
 Format asked 21 check 1
VIDIOCSPICT brightnes=32768 hue=0 color=0 contrast=32768 whiteness=3196depth=8 palette=21
VIDIOCGPICT brightnes=32768 hue=0 color=0 contrast=32768 whiteness=3196depth=8 palette=21
 grabbing method default MMAP asked
VIDIOCGMBUF size 614416  frames 2  offets[0]=0 offsets[1]=307208
 o: www-folder-path...: /webcam_www/
 o: HTTP TCP port.....: 8080
 o: username:password.: disabled
 o: commands..........: enabled</code></pre></div><p>Great! Impressive Web-UI!</p><p>Thanks &amp; Regards,<br />moh</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p62725">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Tom</div>
					<div class="post-datetime">
						2 Feb 2008, 22:05					</div>
				</div>
				<div class="post-content content">
					<p>Good news!</p><p>I still want to improve this plugin, so settings like saturation/contrast/framerate can be adjusted, but unfortunately this may take a while.</p><p>Greetings,<br />Tom</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p63257">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">Oconnor</div>
					<div class="post-datetime">
						12 Feb 2008, 01:28					</div>
				</div>
				<div class="post-content content">
					<p>Hi Tom. I would like to test your mjpg-streamer too but my webcam is also only supported by gspca driver. Could you please update the trunk of openwrt to your new Revision (56)? The revision 51 now in the trunk does not support the gspa driver. Or could you explain to me. How do I compile your Revison 56 for my Asus wl-500gP?&nbsp; I just know how to check out your patches with &quot;svn co <a href="https://mjpg-streamer.svn.sourceforge.net/svnroot/mjpg-streamer">https://mjpg-streamer.svn.sourceforge.n … g-streamer</a> mjpg-streamer&quot;, but what do I have do to compile it for Broadcom bcm947xx 2.6?</p>											<p class="post-edited">(Last edited by <strong>Oconnor</strong> on 12 Feb 2008, 01:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p63276">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Tom</div>
					<div class="post-datetime">
						12 Feb 2008, 10:49					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />You can simply checkout the mjpg-streamer sources from subversion with the similar command to the one you already know:<br /># svn co <a href="https://mjpg-streamer.svn.sourceforge.net/svnroot/mjpg-streamer/mjpg-streamer">https://mjpg-streamer.svn.sourceforge.n … g-streamer</a> mjpg-streamer</p><p>then you can compress it to be a tarball:<br /># tar czvf mjpg_streamer_rev56.tgz --exclude .svn mjpg-streamer</p><p>Copy this tarball to the folder where OpenWrt stores downloaded files. It is the subfolder &quot;dl&quot; and should already include many tar.gz, tar.bz2 and tgz files:<br /># WRT_FOLDER=&quot;/path/to/OpenWrt&quot;<br /># cp mjpg_streamer_rev56.tgz ${WRT_FOLDER}/dl/</p><p>Edit the mjpg-streamer Makefile to use revision 56 instead of 51. The md5sum is not of interest, because the file is already in the &quot;dl&quot; folder. You may also blank the md5sum field.<br /># vi ${WRT_FOLDER}/feeds/packages/multimedia/mjpg-streamer/Makefile</p><p>Alternatively you can use sed (commands were not tested to work):<br /># cat ${WRT_FOLDER}/feeds/packages/multimedia/mjpg-streamer/Makefile | sed -e &quot;s/PKG_VERSION:=rev51/PKG_VERSION:=rev56/g&quot; -e &quot;s/PKG_MD5SUM:=a9f26a96fdebdf3046ce920d2bcfb4ef/PKG_MD5SUM:=/g&quot; &gt; ${WRT_FOLDER}/feeds/packages/multimedia/mjpg-streamer/Makefile.new<br /># if [ $? -eq 0 ]; then rm ${WRT_FOLDER}/feeds/packages/multimedia/mjpg-streamer/Makefile; mv ${WRT_FOLDER}/feeds/packages/multimedia/mjpg-streamer/Makefile.new ${WRT_FOLDER}/feeds/packages/multimedia/mjpg-streamer/Makefile; fi</p><p>Compile OpenWrt with mjpg-streamer selected:<br /># make V=99</p><p>Then you should get a new *.ipk package for mjpg_streamer revision 56 in the bin/packages subfolder.</p><p>You still need to copy the input_gspcav1.so plugin manually as described above, you can improve that in the Makefile too, so it will can get included. I do not want to release #56 because I want to add at least some controls for gspca like framerate, saturation, brightness etc. Consider this as the early start of gspca support (according to the principle publish early and often).</p><p>Hope that helps, please try to understand what you are doing, because the commands given were not tested!!!</p><p>Kind regards,<br />Tom</p>											<p class="post-edited">(Last edited by <strong>Tom</strong> on 12 Feb 2008, 11:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p63279">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">forum2008</div>
					<div class="post-datetime">
						12 Feb 2008, 11:47					</div>
				</div>
				<div class="post-content content">
					<p>You can also directly checkout from a subversion repo in recent trunk versions. Take a look at the <a href="https://dev.openwrt.org/browser/packages/utils/lcd4linux/Makefile">utils/lcd4linux/Makefile</a> (line 11-20). Adapt it to <a href="https://dev.openwrt.org/browser/packages/multimedia/mjpg-streamer/Makefile">multimedia/mjpg-streamer/Makefile</a>. Then in the mjpg-streamer Makefile also add the gspca driver plugin into the install template right after line 41. Now also input_gspcav1.so gets packaged.</p><p>Time to recompile the package and update the package index with: make package/mjpg-streamer/{clean,compile} package/index</p><p>Have fun <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>forum2008</strong> on 12 Feb 2008, 11:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p63281">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">forum2008</div>
					<div class="post-datetime">
						12 Feb 2008, 11:59					</div>
				</div>
				<div class="post-content content">
					<p>@Tom:<br />It would be really cool if you could add a init script with a UCI configuration file. Look at <a href="https://dev.openwrt.org/browser/packages/multimedia/uvc-streamer">uvc-streamer</a>. I added an init script and UCI configuration file there.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p63282">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">Tom</div>
					<div class="post-datetime">
						12 Feb 2008, 12:11					</div>
				</div>
				<div class="post-content content">
					<p>@forum2006:<br />Yes, that would be a good idea, but currently I am a little bit clueless on how to respect the modular character of all imaginable/possible plugins. Perhaps we limit it to linux-uvc input and http output, then we will see how rules get improved over time... This would make it an easy-to-use uvc-streamer replacement, which would be at least a start. Well, i put it on my long-term agenda (means i want to do that, but unfortunately it may take a few weeks).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p63297">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">Oconnor</div>
					<div class="post-datetime">
						12 Feb 2008, 17:07					</div>
				</div>
				<div class="post-content content">
					<p>Hi, thanks for answering my questions. But I get following error</p><div class="quotebox"><blockquote><p>...<br />make -C plugins/input_uvc all<br />make[4]: Entering directory `/home/oconnor/Desktop/trunk/build_dir/mipsel/mjpg-streamer/plugins/input_uvc&#039;<br />mipsel-linux-uclibc-gcc -Os -pipe -mips32 -mtune=mips32 -funit-at-a-time -fhonour-copts -I/home/oconnor/Desktop/trunk/staging_dir/mipsel/usr/include -I/home/oconnor/Desktop/trunk/staging_dir/mipsel/include -L/home/oconnor/Desktop/trunk/staging_dir/mipsel/usr/lib -L/home/oconnor/Desktop/trunk/staging_dir/mipsel/lib -I/home/oconnor/Desktop/trunk/staging_dir/mipsel/usr/include -I/home/oconnor/Desktop/trunk/staging_dir/mipsel/include&nbsp; -O2 -DLINUX -D_GNU_SOURCE -Wall -O2 -DLINUX -D_GNU_SOURCE -Wall -shared -fPIC -ljpeg -o input_uvc.so input_uvc.c v4l2uvc.lo jpeg_utils.lo dynctrl.lo<br />/home/oconnor/Desktop/trunk/staging_dir/toolchain-mipsel_gcc4.1.2/lib/gcc/mipsel-linux-uclibc/4.1.2/../../../../mipsel-linux-uclibc/bin/ld: v4l2uvc.lo: Relocations in generic ELF (EM: 3)<br />v4l2uvc.lo: could not read symbols: File in wrong format<br />collect2: ld returned 1 exit status<br />make[4]: *** [input_uvc.so] Error 1<br />make[4]: Leaving directory `/home/oconnor/Desktop/trunk/build_dir/mipsel/mjpg-streamer/plugins/input_uvc&#039;<br />make[3]: *** [input_uvc.so] Error 2<br />make[3]: Leaving directory `/home/oconnor/Desktop/trunk/build_dir/mipsel/mjpg-streamer&#039;<br />make[2]: *** [/home/oconnor/Desktop/trunk/build_dir/mipsel/mjpg-streamer/.built] Error 2<br />make[2]: Leaving directory `/home/oconnor/Desktop/packages/multimedia/mjpg-streamer&#039;<br />make[1]: *** [package/mjpg-streamer/compile] Error 2<br />make[1]: Leaving directory `/home/oconnor/Desktop/trunk&#039;<br />make: *** [package/mjpg-streamer-compile] Fehler 2</p></blockquote></div><p>What I did was<br /># svn co <a href="https://mjpg-streamer.svn.sourceforge.net/svnroot/mjpg-streamer/mjpg-streamer">https://mjpg-streamer.svn.sourceforge.n … g-streamer</a> mjpg-streamer<br /># cd mjpg-streamer<br /># tar czvf mjpg_streamer_rev56.tgz --exclude .svn mjpg-streamer<br /># cp mjpg_streamer_rev56.tgz /home/oconnor/Desktop/trunk/dl/<br />Edit the mjpg-streamer Makefile changed line 12 &quot;PKG_VERSION:=rev51&quot; to &quot;PKG_VERSION:=rev56&quot;<br /># cd ../trunk<br /># make package/mjpg-streamer-clean<br /># make package/mjpg-streamer-compile</p>											<p class="post-edited">(Last edited by <strong>Oconnor</strong> on 12 Feb 2008, 18:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p63301">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">forum2008</div>
					<div class="post-datetime">
						12 Feb 2008, 18:36					</div>
				</div>
				<div class="post-content content">
					<p>Here are the changes for the mjpg-streamer/Makefile to get latest revision 56 of mjpg-streamer with gspca support:</p><div class="codebox"><pre><code>Index: Makefile
===================================================================
--- Makefile    (revision 10436)
+++ Makefile    (working copy)
@@ -9,15 +9,16 @@
 include $(TOPDIR)/rules.mk
 
 PKG_NAME:=mjpg-streamer
-PKG_VERSION:=rev51
+PKG_REV:=56
+PKG_VERSION:=r$(PKG_REV)
 PKG_RELEASE:=1
 
-PKG_SOURCE:=mjpg_streamer_$(PKG_VERSION).tgz
-PKG_SOURCE_URL:=@SF/$(PKG_NAME)
-PKG_MD5SUM:=a9f26a96fdebdf3046ce920d2bcfb4ef
+PKG_SOURCE:=$(PKG_NAME)-$(PKG_VERSION).tar.bz2
+PKG_SOURCE_URL:=https://mjpg-streamer.svn.sourceforge.net/svnroot/mjpg-streamer/mjpg-streamer/
+PKG_SOURCE_SUBDIR:=$(PKG_NAME)-$(PKG_VERSION)
+PKG_SOURCE_VERSION:=$(PKG_REV)
+PKG_SOURCE_PROTO:=svn
 
-PKG_BUILD_DIR:=$(BUILD_DIR)/$(PKG_NAME)
-
 include $(INCLUDE_DIR)/package.mk
 
 define Package/mjpg-streamer
@@ -38,8 +39,8 @@
        $(INSTALL_DIR) $(1)/sbin
        $(INSTALL_BIN) $(PKG_BUILD_DIR)/mjpg_streamer $(1)/sbin
        $(INSTALL_DIR) $(1)/usr/lib
-       $(INSTALL_BIN) $(PKG_BUILD_DIR)/input_uvc.so $(1)/usr/lib
-       $(CP) $(foreach plugin,http file autofocus,$(PKG_BUILD_DIR)/output_$(plugin).so) $(1)/usr/lib/
+       $(CP) $(foreach input_plugin,uvc gspcav1,$(PKG_BUILD_DIR)/input_$(input_plugin).so) $(1)/usr/lib/
+       $(CP) $(foreach output_plugin,http file autofocus,$(PKG_BUILD_DIR)/output_$(output_plugin).so) $(1)/usr/lib/
        $(INSTALL_DIR) $(1)/webcam_www
        $(CP) $(PKG_BUILD_DIR)/www/* $(1)/webcam_www
 endef</code></pre></div><p>After you applied the patch with &#039;cd feeds/packages/multimedia/mjpg-streamer; patch -p0 &lt; mjpg-streamer.diff&#039; recompile the package with &#039;make package/mjpg-streamer/{clean,compile} package/index V=99&#039;. Then reinstall the new ipk package on your router.</p><p>Check the contents of the new mjpg-streamer package (du -ah build_dir/armeb/mjpg-streamer-r56/ipkg/mjpg-streamer/usr/lib/):<br /></p><div class="codebox"><pre><code>20K     build_dir/armeb/mjpg-streamer-r56/ipkg/mjpg-streamer/usr/lib/output_http.so
48K     build_dir/armeb/mjpg-streamer-r56/ipkg/mjpg-streamer/usr/lib/input_gspcav1.so
12K     build_dir/armeb/mjpg-streamer-r56/ipkg/mjpg-streamer/usr/lib/output_file.so
20K     build_dir/armeb/mjpg-streamer-r56/ipkg/mjpg-streamer/usr/lib/output_autofocus.so
20K     build_dir/armeb/mjpg-streamer-r56/ipkg/mjpg-streamer/usr/lib/input_uvc.so
124K    build_dir/armeb/mjpg-streamer-r56/ipkg/mjpg-streamer/usr/lib/</code></pre></div><p>Contains input_gspcav1.so now <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> From now on if you like to compile a newer revision from mjpg-streamer subversion you just have to adjust PKG_REV and then recompile.</p>											<p class="post-edited">(Last edited by <strong>forum2008</strong> on 12 Feb 2008, 19:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p63303">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">Oconnor</div>
					<div class="post-datetime">
						12 Feb 2008, 19:14					</div>
				</div>
				<div class="post-content content">
					<p>Thanks that did it :-)! Now I only have to test my webcam.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p63319">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">Oconnor</div>
					<div class="post-datetime">
						13 Feb 2008, 01:15					</div>
				</div>
				<div class="post-content content">
					<p>Great it is realy working !!!! Thanks Tom and forum2008! <br />If there are new revisions I will test them.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p85590">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">aboaboit</div>
					<div class="post-datetime">
						11 Apr 2009, 00:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>forum2008 wrote:</cite><blockquote><p>You can also directly checkout from a subversion repo in recent trunk versions.</p></blockquote></div><p>I tried uvc-streamer first and it would lock up after a few frames. Then I switched to mjpg-streamer from trunk, revision 74.</p><p>Here is the commandline:<br /> mjpg_streamer --input &quot;input_uvc.so --device /dev/video0&quot; --output &quot;output_http.so -w /webcam_www -p 8080&quot;</p><p>Problem is, it crashes with segfault immediately:<br />MJPG Streamer Version.: 2.0<br /> i: Using V4L2 device.: /dev/video0<br /> i: Desired Resolution: 640 x 480&nbsp; <br /> i: Frames Per Second.: 5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br /> i: Format............: MJPEG <br />then nothing more... pause.... crash</p><p>Webcam is UVC Camera (046d:09a4), a Logitech QuickCam E3500. Kernel module (uvc) is of course loaded.</p><p>Any clues? Need more info?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p99507">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">yaadgiri</div>
					<div class="post-datetime">
						29 Dec 2009, 20:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>forum2008 wrote:</cite><blockquote><p>Here are the changes for the mjpg-streamer/Makefile to get latest revision 56 of mjpg-streamer with gspca support:</p><div class="codebox"><pre><code>Index: Makefile
===================================================================
--- Makefile    (revision 10436)
+++ Makefile    (working copy)
@@ -9,15 +9,16 @@
 include $(TOPDIR)/rules.mk
 
 PKG_NAME:=mjpg-streamer
-PKG_VERSION:=rev51
+PKG_REV:=56
+PKG_VERSION:=r$(PKG_REV)
 PKG_RELEASE:=1
 
-PKG_SOURCE:=mjpg_streamer_$(PKG_VERSION).tgz
-PKG_SOURCE_URL:=@SF/$(PKG_NAME)
-PKG_MD5SUM:=a9f26a96fdebdf3046ce920d2bcfb4ef
+PKG_SOURCE:=$(PKG_NAME)-$(PKG_VERSION).tar.bz2
+PKG_SOURCE_URL:=https://mjpg-streamer.svn.sourceforge.net/svnroot/mjpg-streamer/mjpg-streamer/
+PKG_SOURCE_SUBDIR:=$(PKG_NAME)-$(PKG_VERSION)
+PKG_SOURCE_VERSION:=$(PKG_REV)
+PKG_SOURCE_PROTO:=svn
 
-PKG_BUILD_DIR:=$(BUILD_DIR)/$(PKG_NAME)
-
 include $(INCLUDE_DIR)/package.mk
 
 define Package/mjpg-streamer
@@ -38,8 +39,8 @@
        $(INSTALL_DIR) $(1)/sbin
        $(INSTALL_BIN) $(PKG_BUILD_DIR)/mjpg_streamer $(1)/sbin
        $(INSTALL_DIR) $(1)/usr/lib
-       $(INSTALL_BIN) $(PKG_BUILD_DIR)/input_uvc.so $(1)/usr/lib
-       $(CP) $(foreach plugin,http file autofocus,$(PKG_BUILD_DIR)/output_$(plugin).so) $(1)/usr/lib/
+       $(CP) $(foreach input_plugin,uvc gspcav1,$(PKG_BUILD_DIR)/input_$(input_plugin).so) $(1)/usr/lib/
+       $(CP) $(foreach output_plugin,http file autofocus,$(PKG_BUILD_DIR)/output_$(output_plugin).so) $(1)/usr/lib/
        $(INSTALL_DIR) $(1)/webcam_www
        $(CP) $(PKG_BUILD_DIR)/www/* $(1)/webcam_www
 endef</code></pre></div><p>After you applied the patch with &#039;cd feeds/packages/multimedia/mjpg-streamer; patch -p0 &lt; mjpg-streamer.diff&#039; recompile the package with &#039;make package/mjpg-streamer/{clean,compile} package/index V=99&#039;. Then reinstall the new ipk package on your router.</p><p>Check the contents of the new mjpg-streamer package (du -ah build_dir/armeb/mjpg-streamer-r56/ipkg/mjpg-streamer/usr/lib/):<br /></p><div class="codebox"><pre><code>20K     build_dir/armeb/mjpg-streamer-r56/ipkg/mjpg-streamer/usr/lib/output_http.so
48K     build_dir/armeb/mjpg-streamer-r56/ipkg/mjpg-streamer/usr/lib/input_gspcav1.so
12K     build_dir/armeb/mjpg-streamer-r56/ipkg/mjpg-streamer/usr/lib/output_file.so
20K     build_dir/armeb/mjpg-streamer-r56/ipkg/mjpg-streamer/usr/lib/output_autofocus.so
20K     build_dir/armeb/mjpg-streamer-r56/ipkg/mjpg-streamer/usr/lib/input_uvc.so
124K    build_dir/armeb/mjpg-streamer-r56/ipkg/mjpg-streamer/usr/lib/</code></pre></div><p>Contains input_gspcav1.so now <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> From now on if you like to compile a newer revision from mjpg-streamer subversion you just have to adjust PKG_REV and then recompile.</p></blockquote></div><p>Will this work with latest code in subversion? gspcav1 is not used any more right?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p277818">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">nachopro</div>
					<div class="post-datetime">
						28 May 2015, 06:25					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I need the input_gspcav1.so to use my PlayStation EYE as webcam. The device specs:<br />gspca_main: ov534-2.14.0 probing 1415:2000</p><p>Can somebody help me in order to compile this lib for tl-mr3020 and tl-wr1043?</p><p>thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p297635">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">illuzionniste</div>
					<div class="post-datetime">
						27 Oct 2015, 17:19					</div>
				</div>
				<div class="post-content content">
					<p>just do: opkg install kmod-video-gspca-ov534&nbsp; &nbsp;<img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>