<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Does Kamikaze 7.09 for WGT634U come with a web interface?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 4 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p70249">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">JKoltner</div>
					<div class="post-datetime">
						30 Jun 2008, 05:48					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys,</p><p>I flashed my WGT634u to Kamikaze 7.09 using the image here: <a href="http://downloads.openwrt.org/kamikaze/7.09/brcm47xx-2.6/openwrt-wgt634u-2.6-squashfs.bin">http://downloads.openwrt.org/kamikaze/7 … uashfs.bin</a> .&nbsp; After rebooting the router, it comes up, I can telnet to it at 192.168.1.1, and in general it seems to be working OK.&nbsp; However, could someone tell me... is a web interface included with the binary image?&nbsp; My WGT634U is listening on its HTTP port (ps shows that httpd is running), and I can telnet to that, although it won&#039;t return an index.htm (error 404).</p><p>The FAQs on this topic are a little unclear in that they refer to the older White Russian series of firmware, and I&#039;m not at all certain since I also have an NSLU2 running Kamikaze 7.09 and its web interface did come with the binary.</p><p>I would like to run a web interface if one isn&#039;t included -- presumably WebIF2 is what I want?</p><p>Thanks,<br />---Joel</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70251">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">kyukun420</div>
					<div class="post-datetime">
						30 Jun 2008, 06:57					</div>
				</div>
				<div class="post-content content">
					<p>I flashed 7.09 on my WGT634U today and I was able to get to the web interface<br />by type in <a href="http://192.168.1.1">http://192.168.1.1</a> or <a href="http://192.168.1.1/cgi-bin/webif/info.sh">http://192.168.1.1/cgi-bin/webif/info.sh</a> in Internet Explorer.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70253">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">JKoltner</div>
					<div class="post-datetime">
						30 Jun 2008, 07:59					</div>
				</div>
				<div class="post-content content">
					<p>Kyukun,</p><p>Where did you download your .bin file from?&nbsp; I&#039;m noticing that mine is dated September, 2007 (the original Kamikaze 7.09 release) and yours is dated June, 2008 (from looking at the log you posted in another message).</p><p>Thanks,<br />---Joel</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70254">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">kyukun420</div>
					<div class="post-datetime">
						30 Jun 2008, 08:34					</div>
				</div>
				<div class="post-content content">
					<p>That is strange.<br />I downloaded it today from <a href="http://downloads.openwrt.org/kamikaze/7.09/brcm47xx-2.6/">http://downloads.openwrt.org/kamikaze/7 … m47xx-2.6/</a><br />and was waiting for another user in this forum to send me the CFE.bin file so that I can<br />de-brick my router.</p><p>I think I flashed the router with the openwrt-brcm47xx-2.6-squashfs.trx image first but<br />still it wouldn&#039;t boot.<br />Then I received the CFE.bin file and was able to boot to 7.09.<br />I enter the web interface, set root password, and set the Time Zone.</p><p>After that, I flashed the router with the openwrt-wgt634u-2.6-squashfs.bin image that I downloaded<br />from the above URL earlier.&nbsp; When I do that, I also checked the option to Erase JFFS2 partition.</p><p>What&#039;s odd is that the date for BusyBox is June 10, 2008?</p><div class="codebox"><pre><code>The system is going down NOW !!

Sending SIGTERM to all processes.

Sending SIGKILL to all processes.

Requesting system reboot.
Restarting system.
Please stand by while rebooting the system...


CFE version 1.0.34 for BCM95365R (32bit,SP,LE)
Build Date: Tue Feb 24 03:21:41 CST 2004 (root@jackylinux)
Copyright (C) 2000,2001,2002 Broadcom Corporation.

Add MAC client version(DNI).
Initializing Arena.
Initializing Devices.
et0: Broadcom BCM47xx 10/100 Mbps Ethernet Controller
CPU type 0x29007: 200MHz
Total memory: 0x2000000 bytes (32MB)

Total memory used by CFE:  0x81BB1280 - 0x82000000 (4517248)
Initialized Data:          0x81BB1280 - 0x81BB3E90 (11280)
BSS Area:                  0x81BB3E90 - 0x81BB45D0 (1856)
Local Heap:                0x81BB45D0 - 0x81FB45D0 (4194304)
Stack Area:                0x81FB45D0 - 0x81FB65D0 (8192)
Text (code) segment:       0x81FB65E0 - 0x81FFFFB0 (301520)
Boot area (physical):      0x01B70000 - 0x01BB0000
Relocation Factor:         I:E23B65E0 - D:01BB0280

configure vlans
*****************************************************************
*********************** VLAN Driver initial  ********************
*****************************************************************
Process LAN port(2-5) vlan Architecture...
SUCCESS: trying to create VLAN 0 for switch
SUCCESS: trying to add LAN port

Process WAN port(2-5) vlan Architecture...
SUCCESS: trying to create VLAN 0 for switch
SUCCESS: trying to add WAN port
SUCCESS: enable ports  success
configure vlans...done
Device eth0:  hwaddr 00-09-5B-F8-17-07, ipaddr 192.168.1.1, mask 255.255.255.0
        gateway not set, nameserver not set
Loader:elf Filesys:raw Dev:flash0.os File: Options:(null)
***************************
****  MAC Client V1.0  ****
***************************
et0macaddr value :flag =0 value=00-09-5b-f8-17-07
et1macaddr value :flag =0 value=00-09-5b-f8-17-08
MAC exist at least one
system ethernet mac exist and not default....
Skip mac client process.....
Loading: 0x80001000/3740 Entry at 0x80001000
Closing network.
et0: link down
Starting program at 0x80001000
Linux version 2.6.22 (travis@localhost.localdomain) (gcc version 4.1.2) #20 Sun Jun 29 03:11:44 CDT 2008
CPU revision is: 00029007
ssb: Core 0 found: ChipCommon (cc 0x800, rev 0x05, vendor 0x4243)
ssb: Core 1 found: Fast Ethernet (cc 0x806, rev 0x06, vendor 0x4243)
ssb: Core 2 found: IPSEC (cc 0x80B, rev 0x01, vendor 0x4243)
ssb: Core 3 found: USB 1.1 Hostdev (cc 0x808, rev 0x02, vendor 0x4243)
ssb: Core 4 found: PCI (cc 0x804, rev 0x08, vendor 0x4243)
ssb: Core 5 found: MIPS 3302 (cc 0x816, rev 0x01, vendor 0x4243)
ssb: Core 6 found: MEMC SDRAM (cc 0x80F, rev 0x00, vendor 0x4243)
ssb: Initializing MIPS core...
ssb: set_irq: core 0x0806, irq 2 =&gt; 2
ssb: set_irq: core 0x0804, irq 0 =&gt; 3
early_nvram_init: WGT634U NVRAM found.
ssb: Sonics Silicon Backplane found at address 0x18000000
Determined physical RAM map:
 memory: 01a00000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Built 1 zonelists.  Total pages: 6604
Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,jffs2 init=/etc/preinit noinitrd console=ttyS0,115200
Primary instruction cache 8kB, physically tagged, 2-way, linesize 16 bytes.
Primary data cache 4kB, 2-way, linesize 16 bytes.
Synthesized TLB refill handler (20 instructions).
Synthesized TLB load handler fastpath (32 instructions).
Synthesized TLB store handler fastpath (31 instructions).
Synthesized TLB modify handler fastpath (30 instructions).
PID hash table entries: 128 (order: 7, 512 bytes)
Using 100.000 MHz high precision timer.
Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
Memory: 23760k/26624k available (2030k kernel code, 2864k reserved, 297k data, 120k init, 0k highmem)
Mount-cache hash table entries: 512
NET: Registered protocol family 16
ssb: PCIcore in host mode found
registering PCI controller with io_map_base unset
PCI: fixing up bridge
PCI: Fixing up device 0000:00:00.0
Time: MIPS clocksource has been installed.
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 1024 (order: 1, 8192 bytes)
TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
TCP: Hash tables configured (established 1024 bind 1024)
TCP reno registered
squashfs: version 3.0 (2006/03/15) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) Â© 2001-2006 Red Hat, Inc.
io scheduler noop registered
io scheduler deadline registered (default)
Serial: 8250/16550 driver $Revision: 1.90 $ 2 ports, IRQ sharing enabled
serial8250: ttyS0 at MMIO 0x0 (irq = 3) is a 16550A
serial8250: ttyS1 at MMIO 0x0 (irq = 3) is a 16550A
b44.c:v1.01 (Jun 16, 2006)
eth0: Broadcom 10/100BaseT Ethernet 00:09:5b:f8:17:07
flash init: 0x1c000000 0x02000000
Physically mapped flash: Found 1 x16 devices at 0x0 in 16-bit bank
 Intel/Sharp Extended Query Table at 0x0031
Using buffer write method
cfi_cmdset_0001: Erase suspend on write enabled
Flash device: 0x800000 at 0x1fc00000
bootloader size: 786432
Creating 4 MTD partitions on &quot;Physically mapped flash&quot;:
0x00000000-0x000c0000 : &quot;cfe&quot;
0x000c0000-0x007e0000 : &quot;linux&quot;
0x00178000-0x007e0000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-only
0x002c0000-0x007e0000 : &quot;rootfs_data&quot;
0x007e0000-0x00800000 : &quot;nvram&quot;
nf_conntrack version 0.5.0 (208 buckets, 1664 max)
ip_tables: (C) 2000-2006 Netfilter Core Team
TCP vegas registered
NET: Registered protocol family 1
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Mounted root (squashfs filesystem) readonly.
Freeing unused kernel memory: 120k freed
Warning: unable to open an initial console.
Algorithmics/MIPS FPU Emulator v1.5
- preinit -
diag: Detected &#039;Netgear WGT634U&#039;
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
Probing device eth0: found!
switching to jffs2
mini_fo: using base directory: /
mini_fo: using storage directory: /jffs
- init -

init started:  BusyBox v1.4.2 (2008-06-10 07:00:13 CDT) multi-call binary

Please press Enter to activate this console. b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
BFL_ENETADM not set in boardflags. Use force=1 to ignore.
PPP generic driver version 2.4.2
device eth0.0 entered promiscuous mode
wlan: 0.8.4.2 (svn r2568)
eth0.0: dev_set_promiscuity(master, 1)
device eth0 entered promiscuous mode
br-lan: port 1(eth0.0) entering learning state
br-lan: topology change detected, propagating
br-lan: port 1(eth0.0) entering forwarding state
ath_hal: module license &#039;Proprietary&#039; taints kernel.
ath_hal: 0.9.30.13 (AR5210, AR5211, AR5212, AR5416, RF5111, RF5112, RF2413, RF5413, RF2133, REGOPS_FUNC)
ath_rate_minstrel: Minstrel automatic rate control algorithm 1.2 (svn r2568)
ath_rate_minstrel: look around rate set to 10%
ath_rate_minstrel: EWMA rolloff level set to 75%
ath_rate_minstrel: max segment size in the mrr set to 6000 us
wlan: mac acl policy registered
ath_pci: 0.9.4.5 (svn r2568)
PCI: Enabling device 0000:00:01.0 (0000 -&gt; 0002)
PCI: Fixing up device 0000:00:01.0
ath_pci: switching rfkill capability off
ath_pci: switching per-packet transmit power control off
wifi0: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps
wifi0: 11g rates: 1Mbps 2Mbps 5.5Mbps 11Mbps 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps
wifi0: turboG rates: 6Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps
wifi0: H/W encryption support: WEP AES AES_CCM TKIP
wifi0: mac 5.9 phy 4.3 radio 4.6
wifi0: Use hw queue 1 for WME_AC_BE traffic
wifi0: Use hw queue 0 for WME_AC_BK traffic
wifi0: Use hw queue 2 for WME_AC_VI traffic
wifi0: Use hw queue 3 for WME_AC_VO traffic
wifi0: Use hw queue 8 for CAB traffic
wifi0: Use hw queue 9 for beacons
wifi0: Atheros 5212: mem=0x40000000, irq=5</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70264">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">JKoltner</div>
					<div class="post-datetime">
						30 Jun 2008, 17:57					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the information.&nbsp; Out of curiosity, what required you to need CFE.bin?&nbsp; Did it become partially corrupted somehow?&nbsp; (Corrupted enough that it wouldn&#039;t boot the main OS but would still let you re-flash?)</p><p>Also... could you possibly do a &quot;printenv&quot; from CFE and let me know what it says?</p><p>---Joel</p>											<p class="post-edited">(Last edited by <strong>JKoltner</strong> on 30 Jun 2008, 18:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70267">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">JKoltner</div>
					<div class="post-datetime">
						30 Jun 2008, 18:52					</div>
				</div>
				<div class="post-content content">
					<p>Update: I suspect the reason I never get the web interface working is due to the fact that the boot process hangs with the dreaded &quot;ath_pci: cannot reserve PCI memory region&quot; problem. :-(&nbsp; As far as I can tell, there is no solution to this problem other than trying different hardware -- some of the Atheros mini-PCI cards have it, some don&#039;t, apparently.</p><p>In the interim... how do I configure the router to not bother loading ath_pci (just so I can test things out without wireless)?&nbsp; I know I can rmmod it after it boots, but what file controls the initial boot process where it&#039;s loaded?</p><p>Thanks,<br />---Joel</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70281">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">kyukun420</div>
					<div class="post-datetime">
						1 Jul 2008, 07:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>JKoltner wrote:</cite><blockquote><p>Thanks for the information.&nbsp; Out of curiosity, what required you to need CFE.bin?&nbsp; Did it become partially corrupted somehow?&nbsp; (Corrupted enough that it wouldn&#039;t boot the main OS but would still let you re-flash?)</p><p>Also... could you possibly do a &quot;printenv&quot; from CFE and let me know what it says?</p><p>---Joel</p></blockquote></div><p>Here&#039;s my current output when I enter the &quot;printenv&quot; command:<br /></p><div class="codebox"><pre><code>printenv
Variable Name        Value
-------------------- --------------------------------------------------
BOOT_CONSOLE         uart1
boardtype            bcm95365r
et0mdcport           0
et0phyaddr           254
configvlan           0x1
et0macaddr           00-09-5b-f8-17-07
et1macaddr           00-09-5b-f8-17-08
kernel_args          console=ttyS1,115200 root=/dev/ram0 init=linuxrc rw syst_size=8M
STARTUP              ifconfig eth0 -addr=192.168.1.1 -mask=255.255.255.0;boot -elf flash0.os:
CFE_VERSION          1.0.34
CFE_BOARDNAME        BCM95365R
CFE_MEMORYSIZE       32
*** command status = 0
CFE&gt;</code></pre></div><p>I believe the bootloader (CFE) was misconfigured after I executed the &quot;setup&quot; command while I was in CFE.<br />After I ran through the &quot;setup&quot; steps I get this.<br /></p><div class="codebox"><pre><code>CFE version 1.0.34 for BCM95365R (32bit,SP,LE)
Build Date: Tue Feb 24 03:21:41 CST 2004 (root@jackylinux)
Copyright (C) 2000,2001,2002 Broadcom Corporation.

Add MAC client version(DNI).
Initializing Arena.
Initializing Devices.
et0: Broadcom BCM47xx 10/100 Mbps Ethernet Controller
CPU type 0x29007: 200MHz
Total memory: 0x2000000 bytes (32MB)

Total memory used by CFE:  0x81BB1280 - 0x82000000 (4517248)
Initialized Data:          0x81BB1280 - 0x81BB3E90 (11280)
BSS Area:                  0x81BB3E90 - 0x81BB45D0 (1856)
Local Heap:                0x81BB45D0 - 0x81FB45D0 (4194304)
Stack Area:                0x81FB45D0 - 0x81FB65D0 (8192)
Text (code) segment:       0x81FB65E0 - 0x81FFFFB0 (301520)
Boot area (physical):      0x01B70000 - 0x01BB0000
Relocation Factor:         I:E23B65E0 - D:01BB0280

configure vlans
*****************************************************************
*********************** VLAN Driver initial  ********************
*****************************************************************
Process LAN port(2-5) vlan Architecture...
SUCCESS: trying to create VLAN 0 for switch
SUCCESS: trying to add LAN port

Process WAN port(2-5) vlan Architecture...
SUCCESS: trying to create VLAN 0 for switch
SUCCESS: trying to add WAN port
SUCCESS: enable ports  success
configure vlans...done
Invalid gateway IP address: 
Loader:elf Filesys:raw Dev:(null) File:doc0:flash0.boot Options:(null)
***************************
****  MAC Client V1.0  ****
***************************
et0macaddr value :flag =0 value=00-09-5b-f8-17-07
et1macaddr value :flag =0 value=00-09-5b-f8-17-08
MAC exist at least one
system ethernet mac exist and not default....
Skip mac client process.....
Loading: **Exception 8: EPC=81FC75C0, Cause=00000008, VAddr=00000000
                RA=81FF8FF0, PRID=00029007

        0  ($00) = 00000000     AT ($01) = A0000000
        v0 ($02) = FFFFFFFB     v1 ($03) = 81FC75B4
        a0 ($04) = 00000000     a1 ($05) = 81FB7B14
        a2 ($06) = 00000075     a3 ($07) = 00000075
        t0 ($08) = 81BB749C     t1 ($09) = 00000001
        t2 ($10) = 0000000C     t3 ($11) = 00000001
        t4 ($12) = 81FC66D4     t5 ($13) = 0000003B
        t6 ($14) = 00000000     t7 ($15) = 00000000
        s0 ($16) = 81BB7490     s1 ($17) = 81FF8F74
        s2 ($18) = 00000000     s3 ($19) = 81BB7474
        s4 ($20) = 81FB61C8     s5 ($21) = 81FB6358
        s6 ($22) = 81FCE640     s7 ($23) = 81BB7440
        t8 ($24) = 02000000     t9 ($25) = E23B65E0
        k0 ($26) = 283A7665     k1 ($27) = 69462029
        gp ($28) = 81BB9280     sp ($29) = 81FB6168
        fp ($30) = FFFF7E4C     ra ($31) = 81FF8FF0



CFE version 1.0.34 for BCM95365R (32bit,SP,LE)
Build Date: Tue Feb 24 03:21:41 CST 2004 (root@jackylinux)
Copyright (C) 2000,2001,2002 Broadcom Corporation.

Add MAC client version(DNI).
Initializing Arena.
Initializing Devices.
et0: Broadcom BCM47xx 10/100 Mbps Ethernet Controller
CPU type 0x29007: 200MHz
Total memory: 0x2000000 bytes (32MB)

Total memory used by CFE:  0x81BB1280 - 0x82000000 (4517248)
Initialized Data:          0x81BB1280 - 0x81BB3E90 (11280)
BSS Area:                  0x81BB3E90 - 0x81BB45D0 (1856)
Local Heap:                0x81BB45D0 - 0x81FB45D0 (4194304)
Stack Area:                0x81FB45D0 - 0x81FB65D0 (8192)
Text (code) segment:       0x81FB65E0 - 0x81FFFFB0 (301520)
Boot area (physical):      0x01B70000 - 0x01BB0000
Relocation Factor:         I:E23B65E0 - D:01BB0280

configure vlans
*****************************************************************
*********************** VLAN Driver initial  ********************
*****************************************************************
Process LAN port(2-5) vlan Architecture...
SUCCESS: trying to create VLAN 0 for switch
SUCCESS: trying to add LAN port

Process WAN port(2-5) vlan Architecture...
SUCCESS: trying to create VLAN 0 for switch
SUCCESS: trying to add WAN port
SUCCESS: enable ports  success
configure vlans...done
Invalid gateway IP address: 
Loader:elf Filesys:raw Dev:(null) File:doc0:flash0.boot Options:(null)
***************************
****  MAC Client V1.0  ****
***************************
et0macaddr value :flag =0 value=00-09-5b-f8-17-07
et1macaddr value :flag =0 value=00-09-5b-f8-17-08
MAC exist at least one
system ethernet mac exist and not default....
Skip mac client process.....
Loading: **Exception 8: EPC=81FC75C0, Cause=00000008, VAddr=00000000
                RA=81FF8FF0, PRID=00029007

        0  ($00) = 00000000     AT ($01) = A0000000
        v0 ($02) = FFFFFFFB     v1 ($03) = 81FC75B4
        a0 ($04) = 00000000     a1 ($05) = 81FB7B14
        a2 ($06) = 00000075     a3 ($07) = 00000075
        t0 ($08) = 81BB749C     t1 ($09) = 00000001
        t2 ($10) = 0000000C     t3 ($11) = 00000001
        t4 ($12) = 81FC66D4     t5 ($13) = 0000003B
        t6 ($14) = 00000000     t7 ($15) = 00000000
        s0 ($16) = 81BB7490     s1 ($17) = 81FF8F74
        s2 ($18) = 00000000     s3 ($19) = 81BB7474
        s4 ($20) = 81FB61C8     s5 ($21) = 81FB6358
        s6 ($22) = 81FCE640     s7 ($23) = 81BB7440
        t8 ($24) = 02000000     t9 ($25) = E23B65E0
        k0 ($26) = 283A7665     k1 ($27) = 69462029
        gp ($28) = 81BB9280     sp ($29) = 81FB6168
        fp ($30) = FFFF7E4C     ra ($31) = 81FF8FF0</code></pre></div><p>Notice that the router is rebooting in a never ending loop.</p><p>This is the part that I suspect was the problem.<br />The line where it say &quot;Loader:elf Filesys:raw Dev:(null) File:doc0:flash0.boot Options:(null)&quot;<br />Before I flash in the CFE.bin, it look like this.<br /></p><div class="codebox"><pre><code>*****************************************************************
*********************** VLAN Driver initial  ********************
*****************************************************************
Process LAN port(2-5) vlan Architecture...
SUCCESS: trying to create VLAN 0 for switch
SUCCESS: trying to add LAN port

Process WAN port(2-5) vlan Architecture...
SUCCESS: trying to create VLAN 0 for switch
SUCCESS: trying to add WAN port
SUCCESS: enable ports  success
configure vlans...done
Invalid gateway IP address: 
Loader:elf Filesys:raw Dev:(null) File:doc0: Options:(null)
***************************
****  MAC Client V1.0  ****
***************************</code></pre></div><p>This is after I flash in the CFE.bin with this command:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CFE&gt; flash -noheader tftp-host:CFE.bin flash0.boot<br />Notice that Dev is no long &quot;(null)&quot; in this line &quot;Loader:elf Filesys:raw Dev:flash0.os File: Options:(null)&quot;.</p><div class="codebox"><pre><code>*****************************************************************
*********************** VLAN Driver initial  ********************
*****************************************************************
Process LAN port(2-5) vlan Architecture...
SUCCESS: trying to create VLAN 0 for switch
SUCCESS: trying to add LAN port

Process WAN port(2-5) vlan Architecture...
SUCCESS: trying to create VLAN 0 for switch
SUCCESS: trying to add WAN port
SUCCESS: enable ports  success
configure vlans...done
Device eth0:  hwaddr 00-09-5B-F8-17-07, ipaddr 192.168.1.1, mask 255.255.255.0
        gateway not set, nameserver not set
Loader:elf Filesys:raw Dev:flash0.os File: Options:(null)
***************************
****  MAC Client V1.0  ****
***************************</code></pre></div><p>What I don&#039;t understand is if I mess up the bootloader with the &quot;setup&quot; command, then I should be able to fix it<br />with the same &quot;setup&quot; command too.<br />I went through &quot;setup&quot; so many time that I lost count, but still couldn&#039;t put the bootloader configuration back to it<br />original.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70282">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">kyukun420</div>
					<div class="post-datetime">
						1 Jul 2008, 07:11					</div>
				</div>
				<div class="post-content content">
					<p>Here&#039;s my screen capture of the boot process for my router incase you want to compare it.<br /></p><div class="codebox"><pre><code>The system is going down NOW !!

Sending SIGTERM to all processes.

Sending SIGKILL to all processes.

Requesting system reboot.
Restarting system.
Please stand by while rebooting the system...


CFE version 1.0.34 for BCM95365R (32bit,SP,LE)
Build Date: Tue Feb 24 03:21:41 CST 2004 (root@jackylinux)
Copyright (C) 2000,2001,2002 Broadcom Corporation.

Add MAC client version(DNI).
Initializing Arena.
Initializing Devices.
et0: Broadcom BCM47xx 10/100 Mbps Ethernet Controller
CPU type 0x29007: 200MHz
Total memory: 0x2000000 bytes (32MB)

Total memory used by CFE:  0x81BB1280 - 0x82000000 (4517248)
Initialized Data:          0x81BB1280 - 0x81BB3E90 (11280)
BSS Area:                  0x81BB3E90 - 0x81BB45D0 (1856)
Local Heap:                0x81BB45D0 - 0x81FB45D0 (4194304)
Stack Area:                0x81FB45D0 - 0x81FB65D0 (8192)
Text (code) segment:       0x81FB65E0 - 0x81FFFFB0 (301520)
Boot area (physical):      0x01B70000 - 0x01BB0000
Relocation Factor:         I:E23B65E0 - D:01BB0280

configure vlans
*****************************************************************
*********************** VLAN Driver initial  ********************
*****************************************************************
Process LAN port(2-5) vlan Architecture...
SUCCESS: trying to create VLAN 0 for switch
SUCCESS: trying to add LAN port

Process WAN port(2-5) vlan Architecture...
SUCCESS: trying to create VLAN 0 for switch
SUCCESS: trying to add WAN port
SUCCESS: enable ports  success
configure vlans...done
Device eth0:  hwaddr 00-09-5B-F8-17-07, ipaddr 192.168.1.1, mask 255.255.255.0
        gateway not set, nameserver not set
Loader:elf Filesys:raw Dev:flash0.os File: Options:(null)
***************************
****  MAC Client V1.0  ****
***************************
et0macaddr value :flag =0 value=00-09-5b-f8-17-07
et1macaddr value :flag =0 value=00-09-5b-f8-17-08
MAC exist at least one
system ethernet mac exist and not default....
Skip mac client process.....
Loading: 0x80001000/3740 Entry at 0x80001000
Closing network.
et0: link down
Starting program at 0x80001000
Linux version 2.6.22 (travis@localhost.localdomain) (gcc version 4.1.2) #20 Sun Jun 29 03:11:44 CDT 2008
CPU revision is: 00029007
ssb: Core 0 found: ChipCommon (cc 0x800, rev 0x05, vendor 0x4243)
ssb: Core 1 found: Fast Ethernet (cc 0x806, rev 0x06, vendor 0x4243)
ssb: Core 2 found: IPSEC (cc 0x80B, rev 0x01, vendor 0x4243)
ssb: Core 3 found: USB 1.1 Hostdev (cc 0x808, rev 0x02, vendor 0x4243)
ssb: Core 4 found: PCI (cc 0x804, rev 0x08, vendor 0x4243)
ssb: Core 5 found: MIPS 3302 (cc 0x816, rev 0x01, vendor 0x4243)
ssb: Core 6 found: MEMC SDRAM (cc 0x80F, rev 0x00, vendor 0x4243)
ssb: Initializing MIPS core...
ssb: set_irq: core 0x0806, irq 2 =&gt; 2
ssb: set_irq: core 0x0804, irq 0 =&gt; 3
early_nvram_init: WGT634U NVRAM found.
ssb: Sonics Silicon Backplane found at address 0x18000000
Determined physical RAM map:
 memory: 01a00000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Built 1 zonelists.  Total pages: 6604
Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,jffs2 init=/etc/preinit noinitrd console=ttyS0,115200
Primary instruction cache 8kB, physically tagged, 2-way, linesize 16 bytes.
Primary data cache 4kB, 2-way, linesize 16 bytes.
Synthesized TLB refill handler (20 instructions).
Synthesized TLB load handler fastpath (32 instructions).
Synthesized TLB store handler fastpath (31 instructions).
Synthesized TLB modify handler fastpath (30 instructions).
PID hash table entries: 128 (order: 7, 512 bytes)
Using 100.000 MHz high precision timer.
Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
Memory: 23760k/26624k available (2030k kernel code, 2864k reserved, 297k data, 120k init, 0k highmem)
Mount-cache hash table entries: 512
NET: Registered protocol family 16
ssb: PCIcore in host mode found
registering PCI controller with io_map_base unset
PCI: fixing up bridge
PCI: Fixing up device 0000:00:00.0
Time: MIPS clocksource has been installed.
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 1024 (order: 1, 8192 bytes)
TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
TCP: Hash tables configured (established 1024 bind 1024)
TCP reno registered
squashfs: version 3.0 (2006/03/15) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) Â© 2001-2006 Red Hat, Inc.
io scheduler noop registered
io scheduler deadline registered (default)
Serial: 8250/16550 driver $Revision: 1.90 $ 2 ports, IRQ sharing enabled
serial8250: ttyS0 at MMIO 0x0 (irq = 3) is a 16550A
serial8250: ttyS1 at MMIO 0x0 (irq = 3) is a 16550A
b44.c:v1.01 (Jun 16, 2006)
eth0: Broadcom 10/100BaseT Ethernet 00:09:5b:f8:17:07
flash init: 0x1c000000 0x02000000
Physically mapped flash: Found 1 x16 devices at 0x0 in 16-bit bank
 Intel/Sharp Extended Query Table at 0x0031
Using buffer write method
cfi_cmdset_0001: Erase suspend on write enabled
Flash device: 0x800000 at 0x1fc00000
bootloader size: 786432
Creating 4 MTD partitions on &quot;Physically mapped flash&quot;:
0x00000000-0x000c0000 : &quot;cfe&quot;
0x000c0000-0x007e0000 : &quot;linux&quot;
0x00178000-0x007e0000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-only
0x002c0000-0x007e0000 : &quot;rootfs_data&quot;
0x007e0000-0x00800000 : &quot;nvram&quot;
nf_conntrack version 0.5.0 (208 buckets, 1664 max)
ip_tables: (C) 2000-2006 Netfilter Core Team
TCP vegas registered
NET: Registered protocol family 1
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Mounted root (squashfs filesystem) readonly.
Freeing unused kernel memory: 120k freed
Warning: unable to open an initial console.
Algorithmics/MIPS FPU Emulator v1.5
- preinit -
diag: Detected &#039;Netgear WGT634U&#039;
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
Probing device eth0: found!
switching to jffs2
mini_fo: using base directory: /
mini_fo: using storage directory: /jffs
- init -

init started:  BusyBox v1.4.2 (2008-06-10 07:00:13 CDT) multi-call binary

Please press Enter to activate this console. b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
BFL_ENETADM not set in boardflags. Use force=1 to ignore.
PPP generic driver version 2.4.2
device eth0.0 entered promiscuous mode
wlan: 0.8.4.2 (svn r2568)
eth0.0: dev_set_promiscuity(master, 1)
device eth0 entered promiscuous mode
br-lan: port 1(eth0.0) entering learning state
br-lan: topology change detected, propagating
br-lan: port 1(eth0.0) entering forwarding state
ath_hal: module license &#039;Proprietary&#039; taints kernel.
ath_hal: 0.9.30.13 (AR5210, AR5211, AR5212, AR5416, RF5111, RF5112, RF2413, RF5413, RF2133, REGOPS_FUNC)
ath_rate_minstrel: Minstrel automatic rate control algorithm 1.2 (svn r2568)
ath_rate_minstrel: look around rate set to 10%
ath_rate_minstrel: EWMA rolloff level set to 75%
ath_rate_minstrel: max segment size in the mrr set to 6000 us
wlan: mac acl policy registered
ath_pci: 0.9.4.5 (svn r2568)
PCI: Enabling device 0000:00:01.0 (0000 -&gt; 0002)
PCI: Fixing up device 0000:00:01.0
ath_pci: switching rfkill capability off
ath_pci: switching per-packet transmit power control off
wifi0: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps
wifi0: 11g rates: 1Mbps 2Mbps 5.5Mbps 11Mbps 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps
wifi0: turboG rates: 6Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps
wifi0: H/W encryption support: WEP AES AES_CCM TKIP
wifi0: mac 5.9 phy 4.3 radio 4.6
wifi0: Use hw queue 1 for WME_AC_BE traffic
wifi0: Use hw queue 0 for WME_AC_BK traffic
wifi0: Use hw queue 2 for WME_AC_VI traffic
wifi0: Use hw queue 3 for WME_AC_VO traffic
wifi0: Use hw queue 8 for CAB traffic
wifi0: Use hw queue 9 for beacons
wifi0: Atheros 5212: mem=0x40000000, irq=5</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70330">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">yasha</div>
					<div class="post-datetime">
						1 Jul 2008, 23:41					</div>
				</div>
				<div class="post-content content">
					<p>FYI: broadcom wireless is not supported in the 2.6 kernel yet. Possibly in the next release due in August perhaps.</p><p>Webif^2 to my knowledge is NOT included with the default releases on this site as they wished to keep them separate, I do not know if that still held true for that release or not, but I&#039;m fairly certain it did; future ones will have integration from what has been mentioned so far.</p><p>You will want to use the x-wrt (webif2) releases if you wish to flash it with a web interface by default. Otherwise you will have to install it after you&#039;ve flashed it with &quot;ipkg&quot; from the command line in telnet/SSH.</p><p><a href="http://x-wrt.org/">http://x-wrt.org/</a></p><p>Edit: <a href="http://downloads.x-wrt.org/xwrt/kamikaze/snapshots/brcm47xx-2.6/openwrt-wgt634u-squashfs.bin">specifically here IF you want kernel 2.6</a> (note this is a snapshot release, not the official stable 7.09 release) Otherwise I believe you will need to read the documentation on your router to flash the generic 2.4 *.trx release.</p>											<p class="post-edited">(Last edited by <strong>yasha</strong> on 2 Jul 2008, 00:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70962">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">JKoltner</div>
					<div class="post-datetime">
						16 Jul 2008, 07:01					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the pointer to the snapshot, Yasha.</p><p>I swapped the original mini-PCI card (based on the Atheros AR5213A) for another one with an AR5212 chipset, and -- woo hoo! -- no more &quot;ath_pci: cannot reserve PCI memory region&quot; error message; the Mad Wifi drivers initialize correctly and I&#039;m off and running.</p>											<p class="post-edited">(Last edited by <strong>JKoltner</strong> on 18 Jul 2008, 06:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p71060">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">bandage</div>
					<div class="post-datetime">
						18 Jul 2008, 10:24					</div>
				</div>
				<div class="post-content content">
					<p>I am porting openwrt for 614L. In my distribution also webif package was not included. I downloaded the webif package (.ipk) from this site and installed in the router. Now it is working fine...</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>