<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [SOLVE] USB Mod on TLWR941v5 (TL-WR940v2)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 17 Apr 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 3 of 3</div><nav><ul><li><a href="viewtopic.php%3Fid=69860&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=69860&amp;p=2.html">2</a></li><li class="pagination-current"><span>3</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p354421">
				<div class="post-metadata">
					<div class="post-num">Post #51</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						17 Mar 2017, 13:42					</div>
				</div>
				<div class="post-content content">
					<p>Somehow, it looks like the indentation has changed in 720-....patch, maybe tabs have been changed to whitespaces. Double check, that your text editor doesn&#039;t do this kind of conversion.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p354435">
				<div class="post-metadata">
					<div class="post-num">Post #52</div>
					<div class="post-author">dktn</div>
					<div class="post-datetime">
						17 Mar 2017, 18:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>MBS wrote:</cite><blockquote><p>Somehow, it looks like the indentation has changed in 720-....patch, maybe tabs have been changed to whitespaces. Double check, that your text editor doesn&#039;t do this kind of conversion.</p></blockquote></div><p>Would you please make two patch files for me?<br />I try to compiled many times and taked much time but had error.<br />thank you so much.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p354460">
				<div class="post-metadata">
					<div class="post-num">Post #53</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						18 Mar 2017, 02:53					</div>
				</div>
				<div class="post-content content">
					<p>Here is a patch to be applied to 14.07, which is basically a backport of the regular port of TL-WR941ND V5:<br /><a href="https://www.file-upload.net/download-12380985/0001-ar71xx-add-support-for-TL-WR941ND-V5.patch.html">https://www.file-upload.net/download-12 … patch.html</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p354463">
				<div class="post-metadata">
					<div class="post-num">Post #54</div>
					<div class="post-author">dktn</div>
					<div class="post-datetime">
						18 Mar 2017, 04:40					</div>
				</div>
				<div class="post-content content">
					<p>I only copy<strong> 0001-ar71xx-add-support-for-TL-WR941ND-V5</strong> file to <strong>openwrt-14.07/target/linux/ar71xx/patches-3.10</strong> directory(do not change 01-led, 02_network....) and run<br /></p><div class="codebox"><pre><code>./scripts/feeds update -a
/scripts/feeds install -a
make -i1 V=s</code></pre></div><p>and ater that</p><div class="codebox"><pre><code>Applying patch platform/0001-ar71xx-add-support-for-TL-WR941ND-V5.patch
can&#039;t find file to patch at input line 20
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
|Subject: [PATCH] ar71xx: add support for TL-WR941ND V5
|
|Add support for the TL-WR941ND V5
|---
| target/linux/ar71xx/base-files/etc/diag.sh         |  3 +-
| .../ar71xx/base-files/etc/uci-defaults/01_leds     |  3 +-
| .../ar71xx/base-files/etc/uci-defaults/02_network  |  1 +
| target/linux/ar71xx/base-files/lib/ar71xx.sh       |  3 ++
| .../ar71xx/base-files/lib/upgrade/platform.sh      |  1 +
| .../files/arch/mips/ath79/mach-tl-wr841n-v8.c      | 60 ++++++++++++++++++++++
| target/linux/ar71xx/image/Makefile                 |  3 +-
| .../610-MIPS-ath79-openwrt-machines.patch          |  3 +-
| .../720-MIPS-ath79-add-Tube2H-support.patch        |  2 +-
| 9 files changed, 74 insertions(+), 5 deletions(-)
|
|diff --git a/target/linux/ar71xx/base-files/etc/diag.sh b/target/linux/ar71xx/base-files/etc/diag.sh
|index 1864b11..e2dfbe6 100755
|--- a/target/linux/ar71xx/base-files/etc/diag.sh
|+++ b/target/linux/ar71xx/base-files/etc/diag.sh
--------------------------
No file to patch.  Skipping patch.
1 out of 1 hunk ignored
can&#039;t find file to patch at input line 34
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
|diff --git a/target/linux/ar71xx/base-files/etc/uci-defaults/01_leds b/target/linux/ar71xx/base-files/etc/uci-defaults/01_leds
|index d3b766d..9549a18 100755
|--- a/target/linux/ar71xx/base-files/etc/uci-defaults/01_leds
|+++ b/target/linux/ar71xx/base-files/etc/uci-defaults/01_leds
--------------------------
No file to patch.  Skipping patch.
1 out of 1 hunk ignored
can&#039;t find file to patch at input line 48
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
|diff --git a/target/linux/ar71xx/base-files/etc/uci-defaults/02_network b/target/linux/ar71xx/base-files/etc/uci-defaults/02_network
|index c5cfd67..6cd8563 100755
|--- a/target/linux/ar71xx/base-files/etc/uci-defaults/02_network
|+++ b/target/linux/ar71xx/base-files/etc/uci-defaults/02_network
--------------------------
No file to patch.  Skipping patch.
1 out of 1 hunk ignored
can&#039;t find file to patch at input line 60
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
|diff --git a/target/linux/ar71xx/base-files/lib/ar71xx.sh b/target/linux/ar71xx/base-files/lib/ar71xx.sh
|index 1e96b6d..c54a0ad 100755
|--- a/target/linux/ar71xx/base-files/lib/ar71xx.sh
|+++ b/target/linux/ar71xx/base-files/lib/ar71xx.sh
--------------------------
No file to patch.  Skipping patch.
1 out of 1 hunk ignored
can&#039;t find file to patch at input line 74
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
|diff --git a/target/linux/ar71xx/base-files/lib/upgrade/platform.sh b/target/linux/ar71xx/base-files/lib/upgrade/platform.sh
|index 846954c..4bee28e 100755
|--- a/target/linux/ar71xx/base-files/lib/upgrade/platform.sh
|+++ b/target/linux/ar71xx/base-files/lib/upgrade/platform.sh
--------------------------
No file to patch.  Skipping patch.
1 out of 1 hunk ignored
can&#039;t find file to patch at input line 86
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
|diff --git a/target/linux/ar71xx/files/arch/mips/ath79/mach-tl-wr841n-v8.c b/target/linux/ar71xx/files/arch/mips/ath79/mach-tl-wr841n-v8.c
|index 0099b15..305e077 100644
|--- a/target/linux/ar71xx/files/arch/mips/ath79/mach-tl-wr841n-v8.c
|+++ b/target/linux/ar71xx/files/arch/mips/ath79/mach-tl-wr841n-v8.c
--------------------------
No file to patch.  Skipping patch.
3 out of 3 hunks ignored
can&#039;t find file to patch at input line 168
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
|diff --git a/target/linux/ar71xx/image/Makefile b/target/linux/ar71xx/image/Makefile
|index 683c238..17dd52a 100644
|--- a/target/linux/ar71xx/image/Makefile
|+++ b/target/linux/ar71xx/image/Makefile
--------------------------
No file to patch.  Skipping patch.
2 out of 2 hunks ignored
can&#039;t find file to patch at input line 189
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
|diff --git a/target/linux/ar71xx/patches-3.10/610-MIPS-ath79-openwrt-machines.patch b/target/linux/ar71xx/patches-3.10/610-MIPS-ath79-openwrt-machines.patch
|index 3669f26..b3aad00 100644
|--- a/target/linux/ar71xx/patches-3.10/610-MIPS-ath79-openwrt-machines.patch
|+++ b/target/linux/ar71xx/patches-3.10/610-MIPS-ath79-openwrt-machines.patch
--------------------------
No file to patch.  Skipping patch.
2 out of 2 hunks ignored
can&#039;t find file to patch at input line 209
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
|diff --git a/target/linux/ar71xx/patches-3.10/720-MIPS-ath79-add-Tube2H-support.patch b/target/linux/ar71xx/patches-3.10/720-MIPS-ath79-add-Tube2H-support.patch
|index c4aa70c..51b5eac 100644
|--- a/target/linux/ar71xx/patches-3.10/720-MIPS-ath79-add-Tube2H-support.patch
|+++ b/target/linux/ar71xx/patches-3.10/720-MIPS-ath79-add-Tube2H-support.patch
--------------------------
No file to patch.  Skipping patch.
1 out of 1 hunk ignored
Patch platform/0001-ar71xx-add-support-for-TL-WR941ND-V5.patch does not apply (enforce with -f)
Makefile:24: recipe for target &#039;/home/huy/Downloads/diendan/14.07/build_dir/target-mips_34kc_uClibc-0.9.33.2/linux-ar71xx_generic/linux-3.10.49/.quilt_checked&#039; failed
make[4]: *** [/home/huy/Downloads/diendan/14.07/build_dir/target-mips_34kc_uClibc-0.9.33.2/linux-ar71xx_generic/linux-3.10.49/.quilt_checked] Error 1
make[4]: Leaving directory &#039;/home/huy/Downloads/diendan/14.07/target/linux/ar71xx&#039;
Makefile:13: recipe for target &#039;compile&#039; failed
make[3]: *** [compile] Error 2
make[3]: Leaving directory &#039;/home/huy/Downloads/diendan/14.07/target/linux&#039;
target/Makefile:21: recipe for target &#039;target/linux/compile&#039; failed
make[2]: *** [target/linux/compile] Error 2
make[2]: Leaving directory &#039;/home/huy/Downloads/diendan/14.07&#039;
target/Makefile:16: recipe for target &#039;/home/huy/Downloads/diendan/14.07/staging_dir/target-mips_34kc_uClibc-0.9.33.2/stamp/.target_compile&#039; failed
make[1]: *** [/home/huy/Downloads/diendan/14.07/staging_dir/target-mips_34kc_uClibc-0.9.33.2/stamp/.target_compile] Error 2
make[1]: Leaving directory &#039;/home/huy/Downloads/diendan/14.07&#039;
/home/huy/Downloads/diendan/14.07/include/toplevel.mk:171: recipe for target &#039;world&#039; failed
make: *** [world] Error 2</code></pre></div>											<p class="post-edited">(Last edited by <strong>dktn</strong> on 18 Mar 2017, 05:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p354481">
				<div class="post-metadata">
					<div class="post-num">Post #55</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						18 Mar 2017, 14:46					</div>
				</div>
				<div class="post-content content">
					<p>No, you need to apply it to directory openwrt-14.07.<br /></p><div class="codebox"><pre><code>patch -p1 &lt; 0001-ar71xx-add-support-for-TL-WR941ND-V5.patch</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p354482">
				<div class="post-metadata">
					<div class="post-num">Post #56</div>
					<div class="post-author">dktn</div>
					<div class="post-datetime">
						18 Mar 2017, 15:06					</div>
				</div>
				<div class="post-content content">
					<p>Please tell me, I run as:<br /></p><div class="codebox"><pre><code>cd openwrt-14.07
patch -p1 &lt; 0001-ar71xx-add-support-for-TL-WR941ND-V5.patch</code></pre></div><p>Does it?<br />Do i need modify some files more?<br />Thanks your help.</p>											<p class="post-edited">(Last edited by <strong>dktn</strong> on 18 Mar 2017, 15:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p354488">
				<div class="post-metadata">
					<div class="post-num">Post #57</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						18 Mar 2017, 16:08					</div>
				</div>
				<div class="post-content content">
					<p>Well, yes, you put the patch into the directory openwrt-14.07 and run those commands.<br />This only adds the support for the 941 V5, like the commit I referenced previously. You still need to do changes to access the servers at kernel.org via https instead of ftp, and the changes to add USB support.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p354554">
				<div class="post-metadata">
					<div class="post-num">Post #58</div>
					<div class="post-author">dktn</div>
					<div class="post-datetime">
						19 Mar 2017, 15:13					</div>
				</div>
				<div class="post-content content">
					<p>Thank MBS help me<br />I compile openwrt-14.07 with USB mod sucessfull.</p><p>&nbsp; &nbsp; But I do not know I only compile 14.07&nbsp; in old computer (chipset GM965, duo to core) and not work on ( CPU i3, 4 core H55 I test by using only one Harddisk and use&nbsp; DEBIAN adm64 not use vmware).</p><p>+ I installed package: xupnpd&nbsp; but it not found this file.<br />- I download<strong> udpxy.1.0.23-9-prod.tar.gz</strong> file then put in <strong>openwrt-14.07/dl</strong> directory but it can not install.<br /></p><div class="codebox"><pre><code>if [ -f /home/Downloads/openwrt-14.07/staging_dir/target-mips_34kc_uClibc-0.9.33.2/pkginfo/uboot-envtools.default.install.clean ]; then rm -f /home/huy/Downloads/openwrt-14.07/staging_dir/target-mips_34kc_uClibc-0.9.33.2/pkginfo/uboot-envtools.default.install /home/huy/Downloads/openwrt-14.07/staging_dir/target-mips_34kc_uClibc-0.9.33.2/pkginfo/uboot-envtools.default.install.clean; fi; echo &quot;uboot-envtools&quot; &gt;&gt; /home/Downloads/openwrt-14.07/staging_dir/target-mips_34kc_uClibc-0.9.33.2/pkginfo/uboot-envtools.default.install
make[3]: Leaving directory &#039;/home/Downloads/openwrt-14.07/package/boot/uboot-envtools&#039;
make[3]: Entering directory &#039;/home/Downloads/openwrt-14.07/feeds/packages/multimedia/xupnpd&#039;
mkdir -p /home/Downloads/openwrt-14.07/dl
echo &quot;Checking out files from the svn repository...&quot;; mkdir -p /home/huy/Downloads/openwrt-14.07/tmp/dl &amp;&amp; cd /home//Downloads/openwrt-14.07/tmp/dl &amp;&amp; rm -rf xupnpd-399 &amp;&amp; [ \! -d xupnpd-399 ] &amp;&amp; ( svn help export | grep -q trust-server-cert &amp;&amp; svn export --non-interactive --trust-server-cert -r399 http://tsdemuxer.googlecode.com/svn/trunk/xupnpd/src/ xupnpd-399 || svn export --non-interactive -r399 http://tsdemuxer.googlecode.com/svn/trunk/xupnpd/src/ xupnpd-399 ) &amp;&amp; echo &quot;Packing checkout...&quot; &amp;&amp;     /bin/tar czf /home/Downloads/openwrt-14.07/tmp/dl/xupnpd-399.tar.gz xupnpd-399 &amp;&amp; mv /home/huy/Downloads/openwrt-14.07/tmp/dl/xupnpd-399.tar.gz /home/huy/Downloads/openwrt-14.07/dl/ &amp;&amp; rm -rf xupnpd-399; 
Checking out files from the svn repository...
svn: E160013: Unable to connect to a repository at URL &#039;http://tsdemuxer.googlecode.com/svn/trunk/xupnpd/src&#039;
svn: E160013: &#039;/svn/trunk/xupnpd/src&#039; path not found
svn: E160013: Unable to connect to a repository at URL &#039;http://tsdemuxer.googlecode.com/svn/trunk/xupnpd/src&#039;
svn: E160013: &#039;/svn/trunk/xupnpd/src&#039; path not found
Makefile:72: recipe for target &#039;/home/huy/Downloads/openwrt-14.07/dl/xupnpd-399.tar.gz&#039; failed
make[3]: *** [/home/Downloads/openwrt-14.07/dl/xupnpd-399.tar.gz] Error 1
make[3]: Leaving directory &#039;/home/Downloads/openwrt-14.07/feeds/packages/multimedia/xupnpd&#039;
package/Makefile:173: recipe for target &#039;package/feeds/packages/xupnpd/compile&#039; failed
make[2]: *** [package/feeds/packages/xupnpd/compile] Error 2
make[2]: Leaving directory &#039;/home/Downloads/openwrt-14.07&#039;
package/Makefile:170: recipe for target &#039;/home/Downloads/openwrt-14.07/staging_dir/target-mips_34kc_uClibc-0.9.33.2/stamp/.package_compile&#039; failed
make[1]: *** [/home/Downloads/openwrt-14.07/staging_dir/target-mips_34kc_uClibc-0.9.33.2/stamp/.package_compile] Error 2
make[1]: Leaving directory &#039;/home/huy/Downloads/openwrt-14.07&#039;
/home/Downloads/openwrt-14.07/include/toplevel.mk:171: recipe for target &#039;world&#039; failed
make: *** [world] Error 2
@debian:~/Downloads/openwrt-14.07$ </code></pre></div>											<p class="post-edited">(Last edited by <strong>dktn</strong> on 18 Apr 2017, 17:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p354578">
				<div class="post-metadata">
					<div class="post-num">Post #59</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						19 Mar 2017, 21:29					</div>
				</div>
				<div class="post-content content">
					<p>What about installing it as a ready package? It is right <a href="https://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/packages/packages/xupnpd_399-1_ar71xx.ipk">here</a>.<br />You just need to make sure to have the <a href="https://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/packages/packages/">packages feed</a> enabled in /etc/opkg.conf.<br />However, if you insist on building it yourself, you can put a copy of <a href="https://www.file-upload.net/download-12385076/xupnpd-399.tar.gz.html">xupnpd-399</a>, that I found on the net, in your dl directory.<br />Although things are getting off topic for this thread.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p354619">
				<div class="post-metadata">
					<div class="post-num">Post #60</div>
					<div class="post-author">dktn</div>
					<div class="post-datetime">
						20 Mar 2017, 11:06					</div>
				</div>
				<div class="post-content content">
					<p>Very sorry about off topic.<br />I had already put in<strong> dl </strong>directory but iI do not known it searched xupnpd file .</p><div class="codebox"><pre><code>echo &quot;Checking out files from the svn repository...&quot;; mkdir -p /home/huy/Downloads/openwrt-14.07/tmp/dl &amp;&amp; cd /home/huy/Downloads/openwrt-14.07/tmp/dl &amp;&amp; rm -rf xupnpd-399 &amp;&amp; [ \! -d xupnpd-399 ] &amp;&amp; ( svn help export | grep -q trust-server-cert &amp;&amp; svn export --non-interactive --trust-server-cert -r399 http://tsdemuxer.googlecode.com/svn/trunk/xupnpd/src/ xupnpd-399 || svn export --non-interactive -r399 http://tsdemuxer.googlecode.com/svn/trunk/xupnpd/src/ xupnpd-399 ) &amp;&amp; echo &quot;Packing checkout...&quot; &amp;&amp;     /bin/tar czf /home/huy/Downloads/openwrt-14.07/tmp/dl/xupnpd-399.tar.gz xupnpd-399 &amp;&amp; mv /home/huy/Downloads/openwrt-14.07/tmp/dl/xupnpd-399.tar.gz /home/huy/Downloads/openwrt-14.07/dl/ &amp;&amp; rm -rf xupnpd-399; 
Checking out files from the svn repository...
svn: E160013: Unable to connect to a repository at URL &#039;http://tsdemuxer.googlecode.com/svn/trunk/xupnpd/src&#039;
svn: E160013: &#039;/svn/trunk/xupnpd/src&#039; path not found
svn: E160013: Unable to connect to a repository at URL &#039;http://tsdemuxer.googlecode.com/svn/trunk/xupnpd/src&#039;
svn: E160013: &#039;/svn/trunk/xupnpd/src&#039; path not found</code></pre></div><p>may be </p><div class="codebox"><pre><code>Checking out files from the svn repository...</code></pre></div><p>?<br />I compile with &quot;build the openwrt Image buider&quot; in menuconfig then make firmware by &quot;image builder&quot; when I flash firmware it reboot repeat again.</p>											<p class="post-edited">(Last edited by <strong>dktn</strong> on 20 Mar 2017, 14:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p356526">
				<div class="post-metadata">
					<div class="post-num">Post #61</div>
					<div class="post-author">dktn</div>
					<div class="post-datetime">
						18 Apr 2017, 15:08					</div>
				</div>
				<div class="post-content content">
					<p>After many times to compile with help from MSB I had TLWR941V5 mod USB now.<br />+ With Openwrt :<br />&nbsp; add line </p><div class="codebox"><pre><code>ath79_register_usb();</code></pre></div><p> in <em> target/linux/ar71xx/files/arch/mips/ath79/mach-tl-wr841n-v8.c</em> file like this </p><div class="codebox"><pre><code>    ath79_register_leds_gpio(-1, ARRAY_SIZE(tl_wr941nd_v5_leds_gpio),
                 tl_wr941nd_v5_leds_gpio);

    ath79_register_gpio_keys_polled(1, TL_WR841NV8_KEYS_POLL_INTERVAL,
                    ARRAY_SIZE(tl_wr841n_v8_gpio_keys),
                    tl_wr841n_v8_gpio_keys);
    ath79_register_usb();
}

MIPS_MACHINE(ATH79_MACH_TL_WR941ND_V5, &quot;TL-WR941ND-v5&quot;, &quot;TP-LINK TL-WR941N/ND v5&quot;,
         tl_wr941nd_v5_setup)</code></pre></div><p>&nbsp; add line </p><div class="codebox"><pre><code>PACKAGES:=kmod-usb-core kmod-usb2</code></pre></div><p> in <em> target/linux/ar71xx/generic/profiles/tp-link.mk</em> file like this </p><div class="codebox"><pre><code>define Profile/TLWR842/Description
    Package set optimized for the TP-LINK TL-WR842N/ND.
endef
$(eval $(call Profile,TLWR842))


define Profile/TLWR941
    NAME:=TP-LINK TL-WR941N/ND
    PACKAGES:=kmod-usb-core kmod-usb2
endef

define Profile/TLWR941/Description
    Package set optimized for the TP-LINK TL-WR941N/ND.
endef
$(eval $(call Profile,TLWR941))


define Profile/TLWR1041
    NAME:=TP-LINK TL-WR1041N
    PACKAGES:=
endef</code></pre></div><p>+ with LEDE<br />&nbsp; &nbsp; add line </p><div class="codebox"><pre><code>ath79_register_usb();</code></pre></div><p> in <em> target/linux/ar71xx/files/arch/mips/ath79/mach-tl-wr841n-v8.c</em> file like this </p><div class="codebox"><pre><code>tatic void __init tl_wr941nd_v5_setup(void)
{
    tl_ap123_setup();

    ath79_register_leds_gpio(-1, ARRAY_SIZE(tl_wr941nd_v5_leds_gpio),
                 tl_wr941nd_v5_leds_gpio);

    ath79_register_gpio_keys_polled(1, TL_WR841NV8_KEYS_POLL_INTERVAL,
                    ARRAY_SIZE(tl_wr841n_v8_gpio_keys),
                    tl_wr841n_v8_gpio_keys);
    ath79_register_usb();
}

MIPS_MACHINE(ATH79_MACH_TL_WR941ND_V5, &quot;TL-WR941ND-v5&quot;, &quot;TP-LINK TL-WR941N/ND v5&quot;,
         tl_wr941nd_v5_setup);</code></pre></div><p>&nbsp; &nbsp;<br />&nbsp; &nbsp;add line </p><div class="codebox"><pre><code>DEVICE_PACKAGES := kmod-usb-core kmod-usb2</code></pre></div><p> in target/linux/ar71xx/image/tp-link.mk like this </p><div class="codebox"><pre><code>define Device/tl-wr941nd-v5
    $(Device/tplink-4mlzma)
    DEVICE_TITLE := TP-LINK TL-WR941N/ND v5
    DEVICE_PACKAGES := kmod-usb-core kmod-usb2
    BOARDNAME := TL-WR941ND-v5
    DEVICE_PROFILE := TLWR941
    TPLINK_HWID := 0x09410005</code></pre></div><p>&nbsp; all compile in DEBIAN 8.7 OK.<br />Thank help from MBS so much.</p>											<p class="post-edited">(Last edited by <strong>dktn</strong> on 18 Apr 2017, 17:14)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 3 of 3</div><nav><ul><li><a href="viewtopic.php%3Fid=69860&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=69860&amp;p=2.html">2</a></li><li class="pagination-current"><span>3</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>