<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> USB problem with Kamikaze and Asus wl500-gp</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p73212">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">lelutin</div>
					<div class="post-datetime">
						10 Sep 2008, 09:50					</div>
				</div>
				<div class="post-content content">
					<p>Hello, </p><p>I have an Asus wl-500gp and I am running kamikaze 7.09 with a 2.4 kernel (for the wifi driver)</p><p>I&#039;m trying to attach a usb key to have more storage available on my router.</p><p>I installed the packages mentioned on the device page:<br /><a href="http://wiki.openwrt.org/OpenWrtDocs/Hardware/Asus/WL500GP">http://wiki.openwrt.org/OpenWrtDocs/Har â€¦ us/WL500GP</a><br />kmod-usb-uhci-iv<br />kmod-usb-usb2<br />I also installed usbutils</p><p>usb seems kinda functional but when I attach my key to the usb plug, scsi emulation doesn&#039;t kick in completely. the scsi device doesn&#039;t get created.</p><div class="codebox"><pre><code>usb.c: registered new driver usbdevfs
usb.c: registered new driver hub
CSLIP: code copyright 1989 Regents of the University of California
PPP generic driver version 2.4.2
PCI: Setting latency timer of device 01:02.0 to 64
PCI: Enabling device 01:02.0 (0004 -&gt; 0006)
wl0: Broadcom BCM4318 802.11 Wireless Controller 4.80.53.0
usb-uhci.c: $Revision: 1.275 $ time 07:19:10 Jun 10 2008
usb-uhci.c: High bandwidth mode enabled
PCI: Enabling device 01:03.0 (0000 -&gt; 0001)
UHCI: Enabling VIA 6212 workarounds
usb-uhci.c: USB UHCI at I/O 0x100, IRQ 2
usb-uhci.c: Detected 2 ports
usb.c: new USB bus registered, assigned bus number 1
hub.c: USB hub found
hub.c: 2 ports detected
PCI: Enabling device 01:03.1 (0000 -&gt; 0001)
UHCI: Enabling VIA 6212 workarounds
usb-uhci.c: USB UHCI at I/O 0x120, IRQ 2
usb-uhci.c: Detected 2 ports
usb.c: new USB bus registered, assigned bus number 2
hub.c: USB hub found
hub.c: 2 ports detected
usb-uhci.c: v1.275:USB Universal Host Controller Interface driver
PCI: Enabling device 01:03.2 (0000 -&gt; 0002)
ehci_hcd 01:03.2: PCI device 1106:3104
ehci_hcd 01:03.2: irq 2, pci mem c01b2000
usb.c: new USB bus registered, assigned bus number 3
EHCI: Enabling VIA 6212 workarounds
ehci_hcd 01:03.2: USB 2.0 enabled, EHCI 1.00, driver 2003-Dec-29/2.4
hub.c: USB hub found
hub.c: 4 ports detected
SCSI subsystem driver Revision: 1.00
hub.c: connect-debounce failed, port 1 disabled
Initializing USB Mass Storage driver...
usb.c: registered new driver usb-storage
USB Mass Storage support registered.
hub.c: new USB device 01:03.2-1, assigned address 2
scsi0 : SCSI emulation for USB Mass Storage devices
WARNING: USB Mass Storage data integrity not assured
USB Mass Storage device found at 2</code></pre></div><p>I also had a strange error last time I pulled the key and plugged it back in.</p><div class="codebox"><pre><code>usbdevfs: USBDEVFS_CONTROL failed dev 2 rqt 128 rq 6 len 4 ret -32
usb.c: USB disconnect on device 01:03.2-1 address 2
hub.c: new USB device 01:03.2-1, assigned address 3
WARNING: USB Mass Storage data integrity not assured
USB Mass Storage device found at 3
usbdevfs: USBDEVFS_CONTROL failed dev 3 rqt 128 rq 6 len 4 ret -32</code></pre></div><p>the device is correctly listed by lsusb:</p><div class="codebox"><pre><code># lsusb; lsusb -v -s 003:003
Bus 003 Device 001: ID 0000:0000  
Bus 003 Device 003: ID 090c:6000 Feiya Technology Corp. 
Bus 002 Device 001: ID 0000:0000  
Bus 001 Device 001: ID 0000:0000  

Bus 003 Device 003: ID 090c:6000 Feiya Technology Corp. 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0 
  bDeviceProtocol         0 
  bMaxPacketSize0        64
  idVendor           0x090c Feiya Technology Corp.
  idProduct          0x6000 
  bcdDevice            1.00
  iManufacturer           1 Generic       ,   . 
  iProduct                2 USB2.0 Card Reader  
  iSerial                 3 12345678901234567890
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           32
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           2
      bInterfaceClass         8 Mass Storage
      bInterfaceSubClass      6 SCSI
      bInterfaceProtocol     80 Bulk (Zip)
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval             255
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x02  EP 2 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval             255
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0 
  bDeviceProtocol         0 
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)</code></pre></div><p>Is there a known problem with 2.4 kernels and USB on this device? if so maybe if it works better, I will consider to buy an atheros card and switch to 2.6 kernel.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p73213">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">belrpr</div>
					<div class="post-datetime">
						10 Sep 2008, 10:02					</div>
				</div>
				<div class="post-content content">
					<p>Wrong section to ask questions.<br />Search for asus wl 500 gp installation on a usb stick and that will help you further.</p><p>And support for 2.6 is better.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p76327">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">dirkNL</div>
					<div class="post-datetime">
						12 Nov 2008, 22:42					</div>
				</div>
				<div class="post-content content">
					<p>I think the only package you&#039;re missing is kmod-usb-storage, and you don&#039;t need kmod-usb2 afaik...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p76342">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">lelutin</div>
					<div class="post-datetime">
						13 Nov 2008, 01:46					</div>
				</div>
				<div class="post-content content">
					<p>I forgot to post back but I found the reason of my problems. I was trying to use a device that is an adapter from SD/SDHC or microSD/microSDHC to USB. I was missing an mmc module. The only mmc module that I could find with ipkg, though, was the one for the physical mod in the WRT54G line.</p><p>So my solution was to buy a &quot;conventional&quot; usb key and I am now able to mount it.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>