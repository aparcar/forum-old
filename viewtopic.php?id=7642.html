<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Dropbear PublicKey Authentication for multiuser setup</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 21 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p35059">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">tboege</div>
					<div class="post-datetime">
						8 Oct 2006, 18:03					</div>
				</div>
				<div class="post-content content">
					<p>I have successfully added a new user in /etc/passwd with a group in /etc/group and assigned a password.</p><p>I can login with that user with ssh - but only with password.</p><p>I have createt id_dsa.pub, id_dsa and added id_dsa.pub to authorized_keys in /home/user/.ssh&nbsp; - and places id_dsa on my client.</p><p>- But I am asked for password every time I try to login. If I add the same key to /etc/dropbear/authorized_keys, I can login without password as both user and root.</p><p>I am using the system as a sort of rsnapshot based remote backup - so I really need a passwordless solution.</p><p>/Thomas</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p36453">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">ylav0</div>
					<div class="post-datetime">
						2 Nov 2006, 19:01					</div>
				</div>
				<div class="post-content content">
					<p>It seems that &quot;$HOME/.ssh/authorized_keys&quot; isn&#039;t enabled/compiled? in whiterussian&#039;s dropbear (I could not make it work).</p><p>My skirting solution for a similar problem (enable WAN access for port forwarding by user only) was to create a second dropbear instance (on a different port) with root and password login disabled (hence limited to the ONLY other user I configured).</p><p>I just added the following command to the &quot;/etc/init.d/S*dropbear&quot; script :<br />/usr/sbin/dropbear -p 2222 -s -w</p><p>The access restriction is done by firewalling (port 22 is only accessible from LAN, 2222 from WAN).</p><p>The global authorized_keys remains in &quot;/etc/dropbear&quot; ...</p><p>Hope this helps.</p>											<p class="post-edited">(Last edited by <strong>ylav0</strong> on 2 Nov 2006, 19:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p36473">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">tboege</div>
					<div class="post-datetime">
						3 Nov 2006, 00:56					</div>
				</div>
				<div class="post-content content">
					<p>Thank for your hint.<br />I could&#039;nt figure out, what the problem was. I have look at the source in <a href="https://svn.openwrt.org/openwrt/branches/whiterussian/openwrt/package/dropbear/patches/100-pubkey_path.patch">https://svn.openwrt.org/openwrt/branche … path.patch</a>. I have now compared with the used source in rc5 <a href="http://downloads.openwrt.org/whiterussian/rc5/whiterussian_rc5.tar.bz2">http://downloads.openwrt.org/whiterussi … c5.tar.bz2</a></p><p>So now I understand, why it does&#039;nt work in rc5. Trying to find a compiled version of dropbear from pre rc6</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p36889">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">tboege</div>
					<div class="post-datetime">
						10 Nov 2006, 03:03					</div>
				</div>
				<div class="post-content content">
					<p>I can confirm, that dropbear uses authorized keys for normal users located in ~/.ssh/authorized_keys in WhiteRussian RC6</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p61211">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">pricejm</div>
					<div class="post-datetime">
						3 Jan 2008, 21:37					</div>
				</div>
				<div class="post-content content">
					<p>Yeap, same here, must use ~/.ssh/authorized_keys.</p><p>Thanks.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>