<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Tp-Link td-w8970</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 26 Mar 2018 and 7 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 10 of 16</div><nav><ul><li><a href="viewtopic.php%3Fid=42380&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42380&amp;p=8.html">8</a></li><li><a href="viewtopic.php%3Fid=42380&amp;p=9.html">9</a></li><li class="pagination-current"><span>10</span></li><li><a href="viewtopic.php%3Fid=42380&amp;p=11.html">11</a></li><li><a href="viewtopic.php%3Fid=42380&amp;p=12.html">12</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42380&amp;p=16.html">16</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p311051">
				<div class="post-metadata">
					<div class="post-num">Post #226</div>
					<div class="post-author">intikhab_choosenone</div>
					<div class="post-datetime">
						11 Feb 2016, 16:24					</div>
				</div>
				<div class="post-content content">
					<p>Hello everyone new here.<br />Bought my router year ago with Firmware Version:0.6.0 2.1 v000c.0 Build 130415 Rel.34164n<br />but getting the error for webpage update of the router &quot;Error code: 4503 The uploaded file was not accepted by the device.&quot;</p><p>And after reading through everything I am confused as wiki says this version can be updated directly through webpage. Yet here I am asking for help because I can&#039;t make direct connections to router only have Ethernet connection and want to use openwrt on it. Completely new in router programming, but I am cs student have used languages like c, c++, java and others but don&#039;t know what to do here. Any help is appreciated and I have tried reading through posts but still confused what software to use and how to use it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p311367">
				<div class="post-metadata">
					<div class="post-num">Post #227</div>
					<div class="post-author">n4p</div>
					<div class="post-datetime">
						14 Feb 2016, 18:26					</div>
				</div>
				<div class="post-content content">
					<p>Hello,<br />i really happy with running openwrt on my w8970. It&#039;s runs so smooth and stable thats unbelievable. Also the vDSL Connection works without no trouble. And the cpu usage also normal if i use the full bandwith.</p><p>But ive got one trouble with it. And that&#039;s ipsec. Andybody know if there are some troubles with the kernel driver? Ipsec works but performance is very very poor no matter if i use 3des or aes128. I won&#039;t get more out then 4kb/s and thats terrible.</p><p>And the cpu is instead idling...</p><p>Would be great if anybody can help, i would like to use the new android app for strongswan.</p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p312502">
				<div class="post-metadata">
					<div class="post-num">Post #228</div>
					<div class="post-author">intikhab_choosenone</div>
					<div class="post-datetime">
						25 Feb 2016, 06:39					</div>
				</div>
				<div class="post-content content">
					<p>Can someone please write me a guide to what to do because wiki says older firmware is directly flashable from gui and i am still looking for software method don&#039;t way to play with wires.<br /> </p><div class="quotebox"><blockquote><p>I&#039;ve compiled from trunk the last sources (clean trunk branch rev 39424) with the following config improvements:</p><p>- Disabled some kernel debug symbols, so image is smaller and optimized<br />- Added nano editor<br />- Configured busybox with mtime support, so scripts can manage files older than... (good for usb storage)</p><p>Link to the image: <a href="https://drive.google.com/folderview?id=">https://drive.google.com/folderview?id=</a> … sp=sharing<br />(i will update image with improvements over time).</p><p>To program it from uboot you need these simple steps:</p><p>1)&nbsp; setenv ipaddr 192.168.1.254; setenv serverip 192.168.1.5 (set ip to your needs)<br />2)&nbsp; tftpboot 0x80800000 openwrt-lantiq-xrx200-TDW8970-sysupgrade.image<br />3)&nbsp; sf erase 0x20000 0x7a0000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-&nbsp; &nbsp; this clean the kernel and rootfs partitions<br />4)&nbsp; sf write 0x80800000 0x20000 0x680004</p><p>then turn off and on TD-W8970<br />Enjoy OpenWRT</p><p>RyLoS</p></blockquote></div><p>Here &quot;1)&nbsp; setenv ipaddr 192.168.1.254; setenv serverip 192.168.1.5 (set ip to your needs)&quot; what software i use and how to use it till i have to write above command to even start flashing the software for it.</p><p>If someone can please write a consolidated guide for it would be great help to all of us please!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p312865">
				<div class="post-metadata">
					<div class="post-num">Post #229</div>
					<div class="post-author">SimpleMouse</div>
					<div class="post-datetime">
						28 Feb 2016, 12:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>intikhab_choosenone wrote:</cite><blockquote><p>Can someone please write me a guide to what to do because wiki says older firmware is directly flashable from gui and i am still looking for software method don&#039;t way to play with wires.</p></blockquote></div><p>What is your firmware version? Because very likely you <strong>need</strong> to solder to your router board.<br />Those commands you quoted are for the installation method via soldering.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313711">
				<div class="post-metadata">
					<div class="post-num">Post #230</div>
					<div class="post-author">intikhab_choosenone</div>
					<div class="post-datetime">
						5 Mar 2016, 12:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>intikhab_choosenone wrote:</cite><blockquote><p>Hello everyone new here.<br />Bought my router year ago with Firmware Version:0.6.0 2.1 v000c.0 Build 130415 Rel.34164n<br />but getting the error for webpage update of the router &quot;Error code: 4503 The uploaded file was not accepted by the device.&quot;</p><p>And after reading through everything I am confused as wiki says this version can be updated directly through webpage. Yet here I am asking for help because I can&#039;t make direct connections to router only have Ethernet connection and want to use openwrt on it. Completely new in router programming, but I am cs student have used languages like c, c++, java and others but don&#039;t know what to do here. Any help is appreciated and I have tried reading through posts but still confused what software to use and how to use it.</p></blockquote></div><p>My firmware version is Firmware version:0.6.0 2.1 v000c.0 Build 130415 Rel.34164n as stated above also.<br />This is one version before the change from tp-link which can&#039;t upload custom firmware, and mine qualifies as stated in wiki to be used without any problem through update firmware of the router. But how to do that? I tried openwrt-15.05-lantiq-xrx200-TDW8970-sysupgrade.image file to be used for it and got error &quot;Error code: 4503 The uploaded file was not accepted by the device.&quot;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316303">
				<div class="post-metadata">
					<div class="post-num">Post #231</div>
					<div class="post-author">drycloud</div>
					<div class="post-datetime">
						23 Mar 2016, 16:30					</div>
				</div>
				<div class="post-content content">
					<p>Hi all. Can someone comment on commits 48941 and 48942 by nbd - does that mean that lantiq adsl drivers are now included as standard? If so, would somebody be able to provide any updated instructions /builds, or feedback on the latest trunk versions? I really don&#039;t want to mess this up! </p><p><a href="https://dev.openwrt.org/changeset/48942">https://dev.openwrt.org/changeset/48942</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316514">
				<div class="post-metadata">
					<div class="post-num">Post #232</div>
					<div class="post-author">SimpleMouse</div>
					<div class="post-datetime">
						24 Mar 2016, 18:44					</div>
				</div>
				<div class="post-content content">
					<p>Yes, trunk is now build with the VDSL firmwares included (both Annex A &amp; B by default which wastes a bit of space). I&#039;m just using the imagebuilder and there kmod-ath9k is currently missing, so wireless will not work. Apart from that, I&#039;m rebuilding my images with the following:</p><p>only has to be done once (you should probably do all this in an extra folder):<br /></p><div class="codebox"><pre><code>wget https://downloads.openwrt.org/snapshots/trunk/lantiq/xrx200/OpenWrt-Toolchain-lantiq-xrx200_gcc-5.3.0_musl-1.1.14.Linux-x86_64.tar.bz2
wget https://downloads.openwrt.org/snapshots/trunk/lantiq/xrx200/OpenWrt-SDK-lantiq-xrx200_gcc-5.3.0_musl-1.1.14.Linux-x86_64.tar.bz2
tar -xjf *.tar.bz2</code></pre></div><p>Then for each update:<br /></p><div class="codebox"><pre><code>wget https://downloads.openwrt.org/snapshots/trunk/lantiq/xrx200/OpenWrt-ImageBuilder-lantiq-xrx200.Linux-x86_64.tar.gz
tar -xjf OpenWrt-ImageBuilder-lantiq-xrx200.Linux-x86_64.tar.gz
cd OpenWrt-ImageBuilder-lantiq-xrx200.Linux-x86_64
make image PROFILE=TDW8970 PACKAGES=&quot;luci luci-app-sqm luci-app-upnp luci-app-ddns luci-app-statistics collectd-mod-ping&quot;</code></pre></div><p>In the PACKAGES=&quot;&quot; you can add all the packages you want, I have luci, sqm, upnp, ddns and statistics with luci interface included. You propably at least want &quot;luci&quot; there.<br />I uploaded the build I&#039;m currently using <a href="http://www97.zippyshare.com/v/RGhchexN/file.html">here</a> (If you know a better upload service, let me know). <br />and @intikhab_choosenone, sorry for not having any usefull input for you...</p>											<p class="post-edited">(Last edited by <strong>SimpleMouse</strong> on 24 Mar 2016, 18:46)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316993">
				<div class="post-metadata">
					<div class="post-num">Post #233</div>
					<div class="post-author">fghorow</div>
					<div class="post-datetime">
						27 Mar 2016, 18:39					</div>
				</div>
				<div class="post-content content">
					<p>Just a note w.r.t. SMP support. </p><p>As of today, using the CC15.05.1 head git source (kernel 3.18.27), the board boots and runs SMP (using the SMVP/VMSP flag and SMP scheduler found in kernel_menuconfig)!</p><p>However, using git HEAD (kernel 4.4.6), the exact same configuration results in a kernel Oops at boot time, and the SMVP/VMSP options need to be turned off for the board to boot (at least as a workaround). </p><p>The text of the Oops is appended below (hopefully as Google bait).</p><p>Hope this helps someone else!</p><p>--- Oops text ---<br />[&nbsp; &nbsp; 2.727091] CPU 0 Unable to handle kernel paging request at virtual address fffd7000, epc == 80029978, ra == 80096440<br />[&nbsp; &nbsp; 2.736265] Oops[#1]:<br />[&nbsp; &nbsp; 2.738534] CPU: 0 PID: 171 Comm: kworker/0:1 Not tainted 4.4.6 #3<br />[&nbsp; &nbsp; 2.744737] Workqueue: events_power_efficient phy_state_machine<br />[&nbsp; &nbsp; 2.750628] task: 839fa070 ti: 83a32000 task.ti: 83a32000<br />[&nbsp; &nbsp; 2.756015] $ 0&nbsp; &nbsp;: 00000000 00000001 805a0000 fffd8000<br />[&nbsp; &nbsp; 2.761236] $ 4&nbsp; &nbsp;: fffd7000 00000000 00000001 00000000<br />[&nbsp; &nbsp; 2.766458] $ 8&nbsp; &nbsp;: 1100ff00 1000001f 00000000 00000008<br />[&nbsp; &nbsp; 2.771682] $12&nbsp; &nbsp;: 00000000 00000015 00000000 70000003<br />[&nbsp; &nbsp; 2.776903] $16&nbsp; &nbsp;: 83827db0 00000000 8002a3b8 fffd7000<br />[&nbsp; &nbsp; 2.782126] $20&nbsp; &nbsp;: 8050ad00 80594140 80509318 805a0000<br />[&nbsp; &nbsp; 2.787349] $24&nbsp; &nbsp;: 00000000 80029964<br />[&nbsp; &nbsp; 2.792571] $28&nbsp; &nbsp;: 83a32000 83a33c48 805a0000 80096440<br />[&nbsp; &nbsp; 2.797794] Hi&nbsp; &nbsp; : 00000000<br />[&nbsp; &nbsp; 2.800668] Lo&nbsp; &nbsp; : 00007000<br />[&nbsp; &nbsp; 2.803562] epc&nbsp; &nbsp;: 80029978 r4k_blast_dcache_page_dc32+0x14/0xb8<br />[&nbsp; &nbsp; 2.809675] ra&nbsp; &nbsp; : 80096440 generic_smp_call_function_single_interrupt+0x160/0x200<br />[&nbsp; &nbsp; 2.817292] Status: 1100fd02 KERNEL EXL<br />[&nbsp; &nbsp; 2.821211] Cause : 00800008 (ExcCode 02)<br />[&nbsp; &nbsp; 2.825214] BadVA : fffd7000<br />[&nbsp; &nbsp; 2.828089] PrId&nbsp; : 00019556 (MIPS 34Kc)<br />[&nbsp; &nbsp; 2.832000] Modules linked in:<br />[&nbsp; &nbsp; 2.835061] Process kworker/0:1 (pid: 171, threadinfo=83a32000, task=839fa070, tls=00000000)<br />[&nbsp; &nbsp; 2.843489] Stack : 9ce12200 7fffffff ffffffff 80090a00 805a2d20 805aad20 00000000 00000000<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 00000001 8000e908 7fffffff 8108bb00 00000002 8108bb14 8108bb78 80071e20<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 80509340 80509354 80594140 805aad20 8108bbb8 00000001 80509340 80509354<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 80594140 805aad20 00000013 00000004 00000000 00000000 805a0000 805a0000<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 805a0000 80076560 00000000 00000001 00000001 00014680 00000007 00000001<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ...<br />[&nbsp; &nbsp; 2.879002] Call Trace:<br />[&nbsp; &nbsp; 2.881454] [&lt;80029978&gt;] r4k_blast_dcache_page_dc32+0x14/0xb8<br />[&nbsp; &nbsp; 2.887211] [&lt;80096440&gt;] generic_smp_call_function_single_interrupt+0x160/0x200<br />[&nbsp; &nbsp; 2.894531] [&lt;8000e908&gt;] ipi_call_interrupt+0x10/0x20<br />[&nbsp; &nbsp; 2.899574] [&lt;80071e20&gt;] handle_irq_event_percpu+0x78/0x1b4<br />[&nbsp; &nbsp; 2.905144] [&lt;80076560&gt;] handle_percpu_irq+0x88/0xb8<br />[&nbsp; &nbsp; 2.910097] [&lt;800714ec&gt;] generic_handle_irq+0x40/0x58<br />[&nbsp; &nbsp; 2.915145] [&lt;80015968&gt;] do_IRQ+0x1c/0x2c<br />[&nbsp; &nbsp; 2.919146] [&lt;80002830&gt;] ret_from_irq+0x0/0x4<br />[&nbsp; &nbsp; 2.923509] [&lt;80312a50&gt;] xrx200_mdio_rd+0x30/0x7c<br />[&nbsp; &nbsp; 2.928213] [&lt;802fe584&gt;] mdiobus_read+0x58/0x84<br />[&nbsp; &nbsp; 2.932730] [&lt;802fdb18&gt;] genphy_read_status+0x120/0x230<br />[&nbsp; &nbsp; 2.937951] [&lt;802fc41c&gt;] phy_state_machine+0x8c/0x478<br />[&nbsp; &nbsp; 2.943002] [&lt;80046918&gt;] process_one_work+0x298/0x490<br />[&nbsp; &nbsp; 2.948045] [&lt;80046e7c&gt;] worker_thread+0x36c/0x5fc<br />[&nbsp; &nbsp; 2.952842] [&lt;8004c334&gt;] kthread+0x114/0x128<br />[&nbsp; &nbsp; 2.957097] [&lt;80002878&gt;] ret_from_kernel_thread+0x14/0x1c<br />[&nbsp; &nbsp; 2.962477]<br />[&nbsp; &nbsp; 2.963952]<br />Code: 00002821&nbsp; 10000026&nbsp; 8c464b6c &lt;bc950000&gt; bc950020&nbsp; bc950040&nbsp; bc950060&nbsp; bc950080&nbsp; bc9500a0<br />[&nbsp; &nbsp; 2.973947] ---[ end trace 3a2960d8dc1c7bd9 ]---<br />[&nbsp; &nbsp; 2.981811] Kernel panic - not syncing: Fatal exception in interrupt<br />[&nbsp; &nbsp; 2.988808] ---[ end Kernel panic - not syncing: Fatal exception in interrupt</p>											<p class="post-edited">(Last edited by <strong>fghorow</strong> on 27 Mar 2016, 18:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p322507">
				<div class="post-metadata">
					<div class="post-num">Post #234</div>
					<div class="post-author">Snakus</div>
					<div class="post-datetime">
						4 May 2016, 14:17					</div>
				</div>
				<div class="post-content content">
					<p>if somebody using it with adsl and OpenWRT<br />Does it work out of the box, or I&#039;ll need to do some tweaks? (I mean firmware, not provider settings)</p>											<p class="post-edited">(Last edited by <strong>Snakus</strong> on 4 May 2016, 14:18)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p322528">
				<div class="post-metadata">
					<div class="post-num">Post #235</div>
					<div class="post-author">dziny</div>
					<div class="post-datetime">
						4 May 2016, 17:22					</div>
				</div>
				<div class="post-content content">
					<p>Yes adsl works. But you need to be aware that w8970 bought in annex A country will not work on annex B adsl (even if you use annex B firmware) and vice versa. There are multiple post here about that. There is no issue with vdsl apparently, that works everywhere.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p324405">
				<div class="post-metadata">
					<div class="post-num">Post #236</div>
					<div class="post-author">alnamer</div>
					<div class="post-datetime">
						17 May 2016, 23:34					</div>
				</div>
				<div class="post-content content">
					<p>Hi</p><p>I read all the topic and I&#039;m still don&#039;t know how to install this firmware especially this part ( Download the openwrt-lantiq-xrx200-TDW8970-uImage-initramfs image from wherever you can find it (the official release does not supply a uImage with an initramfs, so booting that just gives you an error about a missing root filesystem.) )</p><p>can someone please write how to tutorial including download links steps in copy past format</p><p>really I need VDSL</p><p>Thank you all in advance</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p324428">
				<div class="post-metadata">
					<div class="post-num">Post #237</div>
					<div class="post-author">SimpleMouse</div>
					<div class="post-datetime">
						18 May 2016, 00:40					</div>
				</div>
				<div class="post-content content">
					<p>You did solder to the serial on the mainboard? Then you should be able to use the &quot;Installation direct to Flash&quot; instructions.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p324600">
				<div class="post-metadata">
					<div class="post-num">Post #238</div>
					<div class="post-author">alnamer</div>
					<div class="post-datetime">
						18 May 2016, 20:27					</div>
				</div>
				<div class="post-content content">
					<p>Thank you for your reply can you help me in these steps</p><p>Download the image into RAM (*not* flash):<br />Flash the newly downloaded sysimage:</p><br /><p>from where I can download the specific images and how to flash them</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p324657">
				<div class="post-metadata">
					<div class="post-num">Post #239</div>
					<div class="post-author">Scotch&#039;s</div>
					<div class="post-datetime">
						18 May 2016, 23:49					</div>
				</div>
				<div class="post-content content">
					<p>Have you read this: <a href="https://forum.openwrt.org/viewtopic.php?pid=298479#p298479">https://forum.openwrt.org/viewtopic.php … 79#p298479</a> ???<br />You can use this image file: <a href="https://downloads.openwrt.org/chaos_calmer/15.05.1/lantiq/xrx200/openwrt-15.05.1-lantiq-xrx200-TDW8970-sysupgrade.image">https://downloads.openwrt.org/chaos_cal … rade.image</a></p><p>Warning<br />Read the instructions carefully and start with flashing your router, when You&#039;ll understand all steps.<br />I know few people who bricked their routers.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p325304">
				<div class="post-metadata">
					<div class="post-num">Post #240</div>
					<div class="post-author">hacki</div>
					<div class="post-datetime">
						22 May 2016, 17:19					</div>
				</div>
				<div class="post-content content">
					<p>Hi Guys. </p><p>I think i need some help. </p><p>I got a W8970B yesterday to replace my 10 year old DIY-Router (ancient x86 hardware thats using the telekom speedport w921v as a dumb PPPoE modem) thats dying of a failing harddrive right about now. <br />I have a Deutsche Telekom VDSL50 line and specifically got the W8970B because the lantiq chipset apparently supports VDSL.</p><br /><p>Installed openwrt-15.05.1-lantiq-xrx200-TDW8970-sysupgrade.image from <a href="https://downloads.openwrt.org/chaos_calmer/15.05.1/lantiq/xrx200/">https://downloads.openwrt.org/chaos_cal … iq/xrx200/</a> via a USB-TTL serial console which worked flawlessly on the first attempt.</p><br /><p>Unfortunately it appears as if i&#039;m in a VDSL vectoring area (as discussed on page 4 of this thread) since dsl_control only says it syncs at about 18mb/1.5mb instead of the 50/10 it should be. <br />I played around for a while but gave up on the idea of having the openwrt router operate alone.</p><p>Next thing i tried was hooking up the Speedport to the OpenWRT router and use it as PPPoE Modem again, but i cant get that to work either. </p><p>It took some screwing around to even get the Router to send the PADI Discovery packets on the WAN Port (checked with a laptop and wireshark what its sending) </p><p>My /etc/config/network turned into kind of a mess i think, thats what it currently looks like: </p><div class="codebox"><pre><code>config interface &#039;loopback&#039;
        option ifname &#039;lo&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;127.0.0.1&#039;
        option netmask &#039;255.0.0.0&#039;

config globals &#039;globals&#039;
        option ula_prefix &#039;fd46:eb5d:d441::/48&#039;

config interface &#039;lan&#039;
        option force_link &#039;1&#039;
        option type &#039;bridge&#039;
        option proto &#039;static&#039;
        option netmask &#039;255.255.255.0&#039;
        option ip6assign &#039;60&#039;
        option ifname &#039;eth0.1&#039;
        option macaddr &#039;e8:94:f6:84:d8:68&#039;
        option ipaddr &#039;192.168.5.1&#039;

config switch
        option name &#039;switch0&#039;
        option reset &#039;1&#039;
        option enable_vlan &#039;1&#039;

config switch_vlan &#039;eth0_1&#039;
        option device &#039;switch0&#039;
        option vlan &#039;1&#039;
        option ports &#039;0 2 5 6t&#039;

config switch_vlan &#039;eth0_2&#039;
        option device &#039;switch0&#039;
        option vlan &#039;2&#039;
        option ports &#039;4 6t&#039;

config atm-bridge &#039;atm&#039;
        option vpi &#039;1&#039;
        option vci &#039;32&#039;
        option encaps &#039;llc&#039;
        option payload &#039;bridged&#039;

config interface &#039;wan&#039;
        option proto &#039;pppoe&#039;
        option macaddr &#039;00:0A:5E:48:94:49&#039;
        option username &#039;something@t-online.de&#039;
        option password &#039;secret&#039;
        option ifname &#039;eth0.2&#039;                  
        option pppd_options &#039;debug&#039; 
                                   
config interface &#039;wan6&#039;                         
        option ifname &#039;@wan&#039;                    
        option proto &#039;dhcpv6&#039;             
                                                   
config vdsl &#039;dsl&#039;                               
        option annex &#039;a&#039;                        
        option firmware &#039;/lib/firmware/vdsl.bin&#039;
        option tone &#039;av&#039;      
        option xfer_mode &#039;atm&#039; </code></pre></div><br /><p>Unfortunately that is all it does when i hook it up to the speedport: </p><div class="codebox"><pre><code>Sun May 22 16:14:01 2016 daemon.notice netifd: Interface &#039;wan&#039; is now down
Sun May 22 16:14:01 2016 daemon.notice netifd: Interface &#039;wan&#039; is disabled
Sun May 22 16:14:01 2016 daemon.notice netifd: Interface &#039;wan&#039; is enabled
Sun May 22 16:14:01 2016 daemon.notice netifd: Interface &#039;wan&#039; is setting up now
Sun May 22 16:14:01 2016 daemon.info pppd[11378]: Plugin rp-pppoe.so loaded.
Sun May 22 16:14:01 2016 daemon.info pppd[11378]: RP-PPPoE plugin version 3.8p compiled against pppd 2.4.7
Sun May 22 16:14:01 2016 daemon.notice pppd[11378]: pppd 2.4.7 started by root, uid 0
Sun May 22 16:14:01 2016 daemon.debug pppd[11378]: Send PPPOE Discovery V1T1 PADI session 0x0 length 4
Sun May 22 16:14:01 2016 daemon.debug pppd[11378]:  dst ff:ff:ff:ff:ff:ff  src 00:0a:5e:48:94:49
Sun May 22 16:14:01 2016 daemon.debug pppd[11378]:  [service-name]
Sun May 22 16:14:06 2016 daemon.debug pppd[11378]: Send PPPOE Discovery V1T1 PADI session 0x0 length 4
Sun May 22 16:14:06 2016 daemon.debug pppd[11378]:  dst ff:ff:ff:ff:ff:ff  src 00:0a:5e:48:94:49
Sun May 22 16:14:06 2016 daemon.debug pppd[11378]:  [service-name]
Sun May 22 16:14:11 2016 daemon.debug pppd[11378]: Send PPPOE Discovery V1T1 PADI session 0x0 length 4
Sun May 22 16:14:11 2016 daemon.debug pppd[11378]:  dst ff:ff:ff:ff:ff:ff  src 00:0a:5e:48:94:49
Sun May 22 16:14:11 2016 daemon.debug pppd[11378]:  [service-name]
Sun May 22 16:14:16 2016 daemon.warn pppd[11378]: Timeout waiting for PADO packets
Sun May 22 16:14:16 2016 daemon.err pppd[11378]: Unable to complete PPPoE Discovery
Sun May 22 16:14:16 2016 daemon.info pppd[11378]: Exit.</code></pre></div><br /><p>Its not an issue with the Speedport or cabling, when i switch the cable back to my old router the VDSL connection is established in mere seconds.</p><br /><br /><p>I have no idea what to try next. <br />Any insight on how to fix the PPPoE problem, or how to get full VDSL speed with OpenWRT alone, would be appreciated.</p>											<p class="post-edited">(Last edited by <strong>hacki</strong> on 22 May 2016, 17:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p325307">
				<div class="post-metadata">
					<div class="post-num">Post #241</div>
					<div class="post-author">Snakus</div>
					<div class="post-datetime">
						22 May 2016, 17:43					</div>
				</div>
				<div class="post-content content">
					<p><strong>hacki</strong><br /></p><div class="quotebox"><blockquote><p>config vdsl &#039;dsl&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option annex &#039;a&#039;</p></blockquote></div><p>you should look here<br />this option operate with XTU bits, which tells to the router which protocol and speed to use</p><p>check <strong>dsl_control</strong> script for the options</p>											<p class="post-edited">(Last edited by <strong>Snakus</strong> on 22 May 2016, 17:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p325308">
				<div class="post-metadata">
					<div class="post-num">Post #242</div>
					<div class="post-author">hacki</div>
					<div class="post-datetime">
						22 May 2016, 17:46					</div>
				</div>
				<div class="post-content content">
					<p>I tried all kinds of iterations of the vdsl subsection. Annex a, b, j, tone a, b, bv, xfer_mode atm, ptm <br />I&#039;m not even sure&nbsp; anymore which it was that got me the 18/1.5 sync. </p><p>But isnt that subsection irrelevant anyway when using PPPoE with an external modem?</p>											<p class="post-edited">(Last edited by <strong>hacki</strong> on 22 May 2016, 17:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p325316">
				<div class="post-metadata">
					<div class="post-num">Post #243</div>
					<div class="post-author">Snakus</div>
					<div class="post-datetime">
						22 May 2016, 18:33					</div>
				</div>
				<div class="post-content content">
					<p><strong>hacki</strong><br />I have a lot of trubles with modem work due to line quality.</p><p>you have B model<br />may be try to change to <br /></p><div class="quotebox"><blockquote><p>config vdsl &#039;dsl&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option annex &#039;b&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option firmware &#039;/lib/firmware/vdsl.bin&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option tone &#039;bv&#039;&nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option xfer_mode &#039;atm&#039;</p></blockquote></div><p>according to <br /></p><div class="quotebox"><blockquote><p># A43<br />84&nbsp; &nbsp; tone_adsl_a=&quot;0x142&quot; # A43C + J43 + A43<br />85&nbsp; &nbsp; tone_vdsl_a=&quot;0x142&quot; # A43C + J43 + A43<br />86&nbsp; &nbsp; <br />87&nbsp; &nbsp; # A43 + V43<br />88&nbsp; &nbsp; tone_adsl_av=&quot;0x142&quot; # A43C + J43 + A43<br />89&nbsp; &nbsp; tone_vdsl_av=&quot;0x146&quot; # A43C + J43 + A43 + V43<br />90&nbsp; &nbsp; <br />91&nbsp; &nbsp; # B43<br />92&nbsp; &nbsp; tone_adsl_b=&quot;0x81&quot; # B43 + B43c<br />93&nbsp; &nbsp; tone_vdsl_b=&quot;0x1&quot; # B43<br />94&nbsp; &nbsp; <br />95&nbsp; &nbsp; # B43 + V43<br />96&nbsp; &nbsp; tone_adsl_bv=&quot;0x81&quot; # B43 + B43c<br />97&nbsp; &nbsp; tone_vdsl_bv=&quot;0x5&quot; # B43 + V43</p></blockquote></div><p>also check here <a href="http://openwrt-devel.openwrt.narkive.com/l5uhV2Te/patch-v3-00-11-lantiq-dsl-improvements">http://openwrt-devel.openwrt.narkive.co … provements</a><br />and</p>											<p class="post-edited">(Last edited by <strong>Snakus</strong> on 22 May 2016, 18:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p325324">
				<div class="post-metadata">
					<div class="post-num">Post #244</div>
					<div class="post-author">hacki</div>
					<div class="post-datetime">
						22 May 2016, 20:30					</div>
				</div>
				<div class="post-content content">
					<p>On a whim i deleted the entire </p><div class="codebox"><pre><code>config vdsl &#039;dsl&#039;                               
        option annex &#039;a&#039;                        
        option firmware &#039;/lib/firmware/vdsl.bin&#039;
        option tone &#039;av&#039;      
        option xfer_mode &#039;atm&#039; </code></pre></div><p>section from my /etc/config/network file, restarted the router.... lo and behold, PPPoE worked and it logged right in.</p><br /><p>Currently writing this via my openwrt router. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>hacki</strong> on 22 May 2016, 20:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p325337">
				<div class="post-metadata">
					<div class="post-num">Post #245</div>
					<div class="post-author">dziny</div>
					<div class="post-datetime">
						22 May 2016, 21:27					</div>
				</div>
				<div class="post-content content">
					<p>Hacki, the newest DD trunk supports vectoring. So if you are willing to compile it yourself you can get firmware that supports VDSL with vectoring running on TP-w8970.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p325354">
				<div class="post-metadata">
					<div class="post-num">Post #246</div>
					<div class="post-author">hacki</div>
					<div class="post-datetime">
						22 May 2016, 23:09					</div>
				</div>
				<div class="post-content content">
					<p>DD? You mean DD-WRT? </p><p>I guess i&#039;ll leave it like it is for now. Its working, and thats good enough for me. </p><br /><p>Maybe i&#039;ll upgrade once vectoring is supported out of the box in openwrt.</p>											<p class="post-edited">(Last edited by <strong>hacki</strong> on 22 May 2016, 23:57)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p325370">
				<div class="post-metadata">
					<div class="post-num">Post #247</div>
					<div class="post-author">hacki</div>
					<div class="post-datetime">
						23 May 2016, 00:01					</div>
				</div>
				<div class="post-content content">
					<p>Though, i&#039;m already seeing the first problem. Some websites take extremely long to load, ping has something like 20-30% package loss, yet downloading large files or speedtests are lightning fast..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p325406">
				<div class="post-metadata">
					<div class="post-num">Post #248</div>
					<div class="post-author">Snakus</div>
					<div class="post-datetime">
						23 May 2016, 07:45					</div>
				</div>
				<div class="post-content content">
					<p><strong>hacki</strong></p><p>same to me on ADSL line with stock firmware<br />but I know 2 problematic places on the line</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p325478">
				<div class="post-metadata">
					<div class="post-num">Post #249</div>
					<div class="post-author">dziny</div>
					<div class="post-datetime">
						23 May 2016, 16:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hacki wrote:</cite><blockquote><p>DD? You mean DD-WRT? <br />Maybe i&#039;ll upgrade once vectoring is supported out of the box in openwrt.</p></blockquote></div><p>No DD=Designated Driver (this is openwrt trunk).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p325483">
				<div class="post-metadata">
					<div class="post-num">Post #250</div>
					<div class="post-author">BlackJack7986</div>
					<div class="post-datetime">
						23 May 2016, 17:03					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>i bought two TD-W8970B and want to flash them. In putty I see a lot of text, when i power on the device but the text is not correct encoded. I thought it could be a problem with my modification so i tried the second one. Same problem here.</p><p>I used a USB Serial adapter where I added three cables (GND, TX, RX) to the w8970b. The adapter is from logilink. Settings in putty are 115200 8N1. Device is v1 and firmware version is 0.6.0 2.5 v000d.0 Build 140320 Rel.67818n.</p><p>I uploaded a screenshot<br /><span class="postimg"><img src="http://resimzade.com/Show.html?i=46869&amp;token=102076" alt="http://resimzade.com/Show.html?i=46869&amp;amp;token=102076" /></span></p><p>Have someone an idea what I did wrong?</p><p>Is there an image to flash via webgui?</p><p>Greetings</p><p>BJ</p>											<p class="post-edited">(Last edited by <strong>BlackJack7986</strong> on 23 May 2016, 17:05)</p>
									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 251 to 250 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 10 of 16</div><nav><ul><li><a href="viewtopic.php%3Fid=42380&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42380&amp;p=8.html">8</a></li><li><a href="viewtopic.php%3Fid=42380&amp;p=9.html">9</a></li><li class="pagination-current"><span>10</span></li><li><a href="viewtopic.php%3Fid=42380&amp;p=11.html">11</a></li><li><a href="viewtopic.php%3Fid=42380&amp;p=12.html">12</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42380&amp;p=16.html">16</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>