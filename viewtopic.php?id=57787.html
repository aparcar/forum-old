<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> vsftpd FTP file upload fail for local user</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p278930">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">sowmyabr</div>
					<div class="post-datetime">
						5 Jun 2015, 08:32					</div>
				</div>
				<div class="post-content content">
					<p>Hello All,</p><p>I am new to work on openwrt. My requierment is to use the ftp server only by local users. And access only to mounted directories and I am able to to it. But the local ftp user is not able to upload file . I am getting &quot;553 Could not create file&quot;.<br />The vsftpd configuration is as follows:<br /></p><div class="codebox"><pre><code>background=YES
listen=YES
anonymous_enable=NO
local_enable=YES
write_enable=YES
allow_writeable_chroot=YES
local_umask=022
local_root=/mnt/
userlist_deny=NO
userlist_enable=YES
userlist_file=/etc/vsftpd.allowed_users
chroot_local_user=YES
chown_uploads=YES
anon_other_write_enable=YES
check_shell=NO
dirmessage_enable=YES
#dirmessage_enable=YES
#ftpd_banner=Welcome to blah FTP service.
session_support=YES
syslog_enable=YES
#userlist_enable=YES
#userlist_deny=NO
#userlist_file=/etc/vsftpd.users
xferlog_enable=YES
xferlog_file=/var/log/vsftpd.log
#xferlog_std_format=YES
###
### TLS/SSL options
### example key generation: openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/config/vsftpd_privkey.pem -out /etc/config/vsftpd_cert.pem -subj /C=&quot;DE&quot;/ST=&quot;Saxony&quot;/L=&quot;Leipzig&quot;/CN=&quot;OpenWrt&quot;
#ssl_enable=YES
#allow_anon_ssl=NO
#force_local_data_ssl=NO
#force_local_logins_ssl=NO
#ssl_tlsv1=YES
#ssl_sslv2=NO
#ssl_sslv3=NO
#rsa_cert_file=/etc/config/vsftpd_cert.pem
#rsa_private_key_file=/etc/config/vsftpd_privkey.pem</code></pre></div><p>Please help me to fix this issue.</p><p>Regards,<br />Sowmya</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278936">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						5 Jun 2015, 10:44					</div>
				</div>
				<div class="post-content content">
					<p>What user is running the daemon? Does that user have write permission on the destination folder? Are you sure you want to root on &quot;/mnt&quot;?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278959">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">sowmyabr</div>
					<div class="post-datetime">
						5 Jun 2015, 12:44					</div>
				</div>
				<div class="post-content content">
					<p>I added &quot;openwrt&quot; as the ftp user and added in the/etc/vsftpt.allowed users file.<br />Yes I need the ftp client to access only /mnt not complete root system.</p><p>I am using vsftpd daemon.<br />And the permission for /mnt are as follows:<br />drwxr-xr-x.<br />I changed the permissions to 777 using chmod, still it is not able to upload.</p><p>I am creating a mount point for external thumbdrive in /mnt/ folder.</p><p>BR,<br />Sowmya</p>											<p class="post-edited">(Last edited by <strong>sowmyabr</strong> on 11 Jun 2015, 15:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p279371">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">sowmyabr</div>
					<div class="post-datetime">
						9 Jun 2015, 08:09					</div>
				</div>
				<div class="post-content content">
					<p>Did anyone faced these kind of connectivity issue for vsftpd server?</p><p>Does anybody worked on accessing mounted points from ftp?</p><p>The problem is fixed. </p><p>BR,<br />Sowmya</p>											<p class="post-edited">(Last edited by <strong>sowmyabr</strong> on 13 Jun 2015, 10:25)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>