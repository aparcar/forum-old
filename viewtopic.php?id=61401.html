<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Persistent Configuration</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 21 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p302930">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">bobin</div>
					<div class="post-datetime">
						8 Dec 2015, 21:15					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,</p><p>&nbsp; I wanna keep some configurations saved even if my user uses the reset button.<br />&nbsp; Does anyone tried to do this kind of thing without modify the source build ?</p><p>Thanks in advance.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p302935">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						8 Dec 2015, 21:45					</div>
				</div>
				<div class="post-content content">
					<p>Normally &quot;reset&quot; is done by deleting the whole partition, where changes/modification done by the user are. Reset cleans the router into the situation right after flash.</p><p>Thus you need to include the &quot;config to be preserved in reset&quot; in the flashed firmware. (see below)<br />You can do that either by compiling it from scratch by yourself, or by using the image generator to compose the firmware.</p><p>You can include &quot;custom files&quot; to your build in the firmware compilation or image generator usage. Use a live router and configure network &amp; wifi etc as you like. Then store the key config files /etc/config/network etc. as &lt;buildroot&gt;/files/etc/config/network</p><p><a href="http://wiki.openwrt.org/doc/howto/build#custom.files">http://wiki.openwrt.org/doc/howto/build#custom.files</a><br /><a href="http://wiki.openwrt.org/doc/howto/obtain.firmware.generate#files.variable">http://wiki.openwrt.org/doc/howto/obtai … s.variable</a></p><br /><p>Alternative approach:<br />You might read this post about a smart reset script, which you might config your reset button to use:<br /><a href="https://forum.openwrt.org/viewtopic.php?pid=274937#p274937">https://forum.openwrt.org/viewtopic.php … 37#p274937</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p302938">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">bobin</div>
					<div class="post-datetime">
						8 Dec 2015, 21:47					</div>
				</div>
				<div class="post-content content">
					<p>hnyman, thanks for the fast and helpfull response.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>