<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Upgrading kernel to v3.14. Easy or hard?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p236352">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">jojab</div>
					<div class="post-datetime">
						11 Jun 2014, 16:11					</div>
				</div>
				<div class="post-content content">
					<p>I want to do a proof-of-concept project (stability is not important) using some Linux features not introduced before kernel v3.14, on a TP-link WDR4300.</p><p>Having not done much OpenWRT or Linux kernel development before, how much work (if it&#039;s possible at all) would it be to upgrade the kernel to v3.14 or later?</p><p>Appreciate any answer <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>jojab</strong> on 11 Jun 2014, 16:29)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p236361">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">zloop</div>
					<div class="post-datetime">
						11 Jun 2014, 18:01					</div>
				</div>
				<div class="post-content content">
					<p>It depends on your skills:</p><p>As an example you can review many changesets that add new kernel versions:</p><p>There are changes specific to a hardware platform<br /><a href="https://dev.openwrt.org/changeset/37214">https://dev.openwrt.org/changeset/37214</a> ( ar71xx: add linux 3.10 )<br />and several patches that increase the version number or fix breakage</p><p>and generic changes that are introduced earlier:<br /><a href="https://dev.openwrt.org/changeset/36657">https://dev.openwrt.org/changeset/36657</a> ( kernel: generic: add 3.10-rc1 support )</p><p>afaik generic 3.14 is already available so &quot;only&quot; ar71xx specific patches remain</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240320">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">jojab</div>
					<div class="post-datetime">
						15 Jul 2014, 17:19					</div>
				</div>
				<div class="post-content content">
					<p>I tried to get 3.14 working on WDR4300, but had no luck getting it to work.</p><p>I have now gotten a hold of an ASUS RT-N16, which is a brcm47xx, and I see that 3.14 patches and config are located in the target folder. So i changed the Linux kerne version in the brcm47xx Makefile into 3.14.12, hoping that this was enough to make a fully working OpenWRT image with 3.14 kernel.</p><p>After make menuconfig with target set to brcm47xx (MIPS), subtarget Generic, and Target profile Broadcom SoC, Ethernet, WiFi (wl, proprietary), OpenWRT compiled. But flashing the image to the router just makes the PWR led flash/blink fast.</p><p>Should this work for the router (as the patches are available in the targetfolder) or isn&#039;t 3.14 that easy to get running? <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240325">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Zajec</div>
					<div class="post-datetime">
						15 Jul 2014, 17:46					</div>
				</div>
				<div class="post-content content">
					<p>I don&#039;t think switching from 3.10 to 3.14 caused any problems for brcm47xx. I would guess using 3.10 would result in blinking LEDs as well.</p><p>Can you attach serial console and grab the boot log for us? So we can know what causes &quot;blinking LEDs&quot;.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240339">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Zajec</div>
					<div class="post-datetime">
						15 Jul 2014, 21:00					</div>
				</div>
				<div class="post-content content">
					<p>I did the same test, switched kernel in Makefile to 3.14.12, compiled and installed on my device with BCM5357C0. Works fine.</p>											<p class="post-edited">(Last edited by <strong>Zajec</strong> on 15 Jul 2014, 21:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240346">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">roger_</div>
					<div class="post-datetime">
						15 Jul 2014, 21:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zloop wrote:</cite><blockquote><p>It depends on your skills:</p><p>As an example you can review many changesets that add new kernel versions:</p><p>There are changes specific to a hardware platform<br /><a href="https://dev.openwrt.org/changeset/37214">https://dev.openwrt.org/changeset/37214</a> ( ar71xx: add linux 3.10 )<br />and several patches that increase the version number or fix breakage</p><p>and generic changes that are introduced earlier:<br /><a href="https://dev.openwrt.org/changeset/36657">https://dev.openwrt.org/changeset/36657</a> ( kernel: generic: add 3.10-rc1 support )</p><p>afaik generic 3.14 is already available so &quot;only&quot; ar71xx specific patches remain</p></blockquote></div><br /><p>Are those patches ever submitted upstream so they get merged with the mainline kernel?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240389">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">jojab</div>
					<div class="post-datetime">
						16 Jul 2014, 12:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Zajec wrote:</cite><blockquote><p>I don&#039;t think switching from 3.10 to 3.14 caused any problems for brcm47xx. I would guess using 3.10 would result in blinking LEDs as well.</p><p>Can you attach serial console and grab the boot log for us? So we can know what causes &quot;blinking LEDs&quot;.</p></blockquote></div><p>I tried compiling and running 3.10 again, and you&#039;re absolutely right. The LED are blinking here as well, even though OpenWRT are working.</p><p>So I got the serial output of the 3.14 build, and here it is (does seem to stop here):</p><div class="quotebox"><cite>serial wrote:</cite><blockquote><br /><p>CFE version 1.0.37 for BCM947XX (32bit,SP,LE)<br />Build Date: ¤T&nbsp; 5¤ë 27 16:47:24 CST 2009 (root@localhost.localdomain)<br />Copyright (C) 2000-2008 Broadcom Corporation.</p><p>Init Arena<br />Init Devs.<br />Boot partition size = 262144(0x40000)<br />et0: Broadcom BCM47XX 10/100/1000 Mbps Ethernet Controller 5.10.56.3<br />CPU type 0x19740: 480MHz<br />Tot mem: 131072 KBytes</p><p>CFE mem:&nbsp; &nbsp; 0x80700000 - 0x8079B310 (635664)<br />Data:&nbsp; &nbsp; &nbsp; &nbsp;0x80731B30 - 0x80734880 (11600)<br />BSS:&nbsp; &nbsp; &nbsp; &nbsp; 0x80734880 - 0x80735310 (2704)<br />Heap:&nbsp; &nbsp; &nbsp; &nbsp;0x80735310 - 0x80799310 (409600)<br />Stack:&nbsp; &nbsp; &nbsp; 0x80799310 - 0x8079B310 (8192)<br />Text:&nbsp; &nbsp; &nbsp; &nbsp;0x80700000 - 0x80731B30 (203568)</p><p>Device eth0:&nbsp; hwaddr BC-EE-7B-97-94-4E, ipaddr 192.168.1.1, mask 255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; gateway not set, nameserver not set<br />Null Rescue Flag.<br />Loader:raw Filesys:tftp Dev:eth0 File:: Options:(null)<br />Loading: TFTP Server.<br />Failed.<br />Could not load :: Timeout occured<br />Loader:raw Filesys:raw Dev:flash0.os File: Options:(null)<br />Loading: .. 3712 bytes read<br />Entry at 0x80001000<br />Starting program at 0x80001000<br />[&nbsp; &nbsp; 0.000000] Linux version 3.14.12 (johan@johan-VirtualBox) (gcc version 4.8.3 (OpenWrt/Linaro GCC 4.8-2014.04 r41663) ) #1 Tue Jul 15 17:55:50 CEST 2014<br />[&nbsp; &nbsp; 0.000000] CPU0 revision is: 00019740 (MIPS 74Kc)<br />[&nbsp; &nbsp; 0.000000] bcm47xx: using bcma bus<br />[&nbsp; &nbsp; 0.000000] bcma: bus0: Found chip with id 0x4716, rev 0x01 and package 0x0A<br />[&nbsp; &nbsp; 0.000000] bcma: bus0: Core 0 found: ChipCommon (manuf 0x4BF, id 0x800, rev 0x1F, class 0x0)<br />[&nbsp; &nbsp; 0.000000] bcma: bus0: Core 3 found: MIPS 74K (manuf 0x4A7, id 0x82C, rev 0x01, class 0x0)<br />[&nbsp; &nbsp; 0.000000] bcma: bus0: Early bus registered<br />[&nbsp; &nbsp; 0.000000] MIPS: machine is Asus RT-N16<br />[&nbsp; &nbsp; 0.000000] Determined physical RAM map:<br />[&nbsp; &nbsp; 0.000000]&nbsp; memory: 07fff000 @ 00000000 (usable)<br />[&nbsp; &nbsp; 0.000000] Initrd not found or empty - disabling initrd<br />[&nbsp; &nbsp; 0.000000] Zone ranges:<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal&nbsp; &nbsp;[mem 0x00000000-0x07ffefff]<br />[&nbsp; &nbsp; 0.000000] Movable zone start for each node<br />[&nbsp; &nbsp; 0.000000] Early memory node ranges<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;node&nbsp; &nbsp;0: [mem 0x00000000-0x07ffefff]<br />[&nbsp; &nbsp; 0.000000] Primary instruction cache 32kB, VIPT, 4-way, linesize 32 bytes.<br />[&nbsp; &nbsp; 0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes<br />[&nbsp; &nbsp; 0.000000] Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 32511<br />[&nbsp; &nbsp; 0.000000] Kernel command line:&nbsp; noinitrd console=ttyS0,115200<br />[&nbsp; &nbsp; 0.000000] PID hash table entries: 512 (order: -1, 2048 bytes)<br />[&nbsp; &nbsp; 0.000000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)<br />[&nbsp; &nbsp; 0.000000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)<br />[&nbsp; &nbsp; 0.000000] Writing ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Readback ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Memory: 126436K/131068K available (2441K kernel code, 109K rwdata, 484K rodata, 152K init, 227K bss, 4632K reserved)<br />[&nbsp; &nbsp; 0.000000] NR_IRQS:128<br />[&nbsp; &nbsp; 0.000000] Setting up vectored interrupts<br />[&nbsp; &nbsp; 0.060000] Calibrating delay loop... 239.61 BogoMIPS (lpj=1198080)<br />[&nbsp; &nbsp; 0.070000] pid_max: default: 32768 minimum: 301<br />[&nbsp; &nbsp; 0.070000] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.070000] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.070000] NET: Registered protocol family 16<br />[&nbsp; &nbsp; 0.090000] bio: create slab &lt;bio-0&gt; at 0<br />[&nbsp; &nbsp; 0.090000] Switched to clocksource MIPS<br />[&nbsp; &nbsp; 0.100000] NET: Registered protocol family 2<br />[&nbsp; &nbsp; 0.100000] TCP established hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.100000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.100000] TCP: Hash tables configured (established 1024 bind 1024)<br />[&nbsp; &nbsp; 0.100000] TCP: reno registered<br />[&nbsp; &nbsp; 0.100000] UDP hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.100000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.100000] NET: Registered protocol family 1<br />[&nbsp; &nbsp; 0.100000] bcma: bus0: Core 1 found: IEEE 802.11 (manuf 0x4BF, id 0x812, rev 0x11, class 0x0)<br />[&nbsp; &nbsp; 0.100000] bcma: bus0: Core 2 found: GBit MAC (manuf 0x4BF, id 0x82D, rev 0x00, class 0x0)<br />[&nbsp; &nbsp; 0.100000] bcma: bus0: Core 4 found: USB 2.0 Host (manuf 0x4BF, id 0x819, rev 0x04, class 0x0)<br />[&nbsp; &nbsp; 0.100000] bcma: bus0: Core 5 found: PCIe (manuf 0x4BF, id 0x820, rev 0x0E, class 0x0)<br />[&nbsp; &nbsp; 0.100000] bcma: bus0: Core 6 found: DDR1/DDR2 Memory Controller (manuf 0x4BF, id 0x82E, rev 0x01, class 0x0)<br />[&nbsp; &nbsp; 0.100000] bcma: bus0: Core 7 found: Internal Memory (manuf 0x4BF, id 0x80E, rev 0x07, class 0x0)<br />[&nbsp; &nbsp; 0.100000] bcma: bus0: Core 8 found: I2S (manuf 0x4BF, id 0x834, rev 0x00, class 0x0)<br />[&nbsp; &nbsp; 0.130000] bcma: bus0: PCIEcore in host mode found<br />[&nbsp; &nbsp; 0.320000] PCI host bridge to bus 0000:00<br />[&nbsp; &nbsp; 0.320000] pci_bus 0000:00: root bus resource [mem 0x08000000-0x0bffffff]<br />[&nbsp; &nbsp; 0.320000] pci_bus 0000:00: root bus resource [io&nbsp; 0x0100-0x07ff]<br />[&nbsp; &nbsp; 0.320000] pci_bus 0000:00: No busn resource found for root bus, will use [bus 00-ff]<br />[&nbsp; &nbsp; 0.320000] bcma: PCI: Fixing up bridge 0000:00:00.0<br />[&nbsp; &nbsp; 0.320000] bcma: PCI: Fixing up device 0000:00:00.0<br />[&nbsp; &nbsp; 0.320000] bcma: PCI: Fixing up bridge 0000:00:00.1<br />[&nbsp; &nbsp; 0.320000] bcma: PCI: Fixing up device 0000:00:00.1<br />[&nbsp; &nbsp; 0.330000] bcma: bus0: Bus registered<br />[&nbsp; &nbsp; 0.330000] futex hash table entries: 256 (order: -1, 3072 bytes)<br />[&nbsp; &nbsp; 0.330000] squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />[&nbsp; &nbsp; 0.330000] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.<br />[&nbsp; &nbsp; 0.330000] msgmni has been set to 246<br />[&nbsp; &nbsp; 0.330000] io scheduler noop registered<br />[&nbsp; &nbsp; 0.330000] io scheduler deadline registered (default)<br />[&nbsp; &nbsp; 0.340000] Serial: 8250/16550 driver, 2 ports, IRQ sharing enabled<br />[&nbsp; &nbsp; 0.360000] serial8250.0: ttyS0 at MMIO 0xb8000300 (irq = 2, base_baud = 1250000) is a U6_16550A<br />[&nbsp; &nbsp; 0.770000] console [ttyS0] enabled<br />[&nbsp; &nbsp; 0.780000] physmap platform flash device: 02000001 at 1c000000<br />[&nbsp; &nbsp; 0.780000] physmap-flash.0: Found 1 x16 devices at 0x0 in 8-bit bank. Manufacturer ID 0x0000c2 Chip ID 0x00007e<br />[&nbsp; &nbsp; 0.800000] Amd/Fujitsu Extended Query Table at 0x0040<br />[&nbsp; &nbsp; 0.800000]&nbsp; &nbsp;Amd/Fujitsu Extended Query version 1.3.<br />[&nbsp; &nbsp; 0.810000] number of CFI chips: 1<br />[&nbsp; &nbsp; 0.920000] 6 bcm47xxpart partitions found on MTD device physmap-flash.0<br />[&nbsp; &nbsp; 0.930000] Creating 6 MTD partitions on &quot;physmap-flash.0&quot;:<br />[&nbsp; &nbsp; 0.930000] 0x000000000000-0x000000040000 : &quot;boot&quot;<br />[&nbsp; &nbsp; 0.940000] 0x000000040000-0x000001fe0000 : &quot;firmware&quot;<br />[&nbsp; &nbsp; 0.950000] 0x00000004001c-0x00000004090c : &quot;loader&quot;<br />[&nbsp; &nbsp; 0.950000] 0x00000004090c-0x00000014cc00 : &quot;linux&quot;<br />[&nbsp; &nbsp; 0.960000] mtd: partition &quot;linux&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only<br />[&nbsp; &nbsp; 0.970000] 0x00000014cc00-0x000001fe0000 : &quot;rootfs&quot;<br />[&nbsp; &nbsp; 0.980000] mtd: partition &quot;rootfs&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only<br />[&nbsp; &nbsp; 1.000000] mtd: device 4 (rootfs) set to be root filesystem<br />[&nbsp; &nbsp; 1.000000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=0x320000, len=0x1cc0000<br />[&nbsp; &nbsp; 1.010000] 0x000000320000-0x000001fe0000 : &quot;rootfs_data&quot;<br />[&nbsp; &nbsp; 1.020000] 0x000001fe0000-0x000002000000 : &quot;nvram&quot;<br />[&nbsp; &nbsp; 1.030000] libphy: Fixed MDIO Bus: probed<br />[&nbsp; &nbsp; 1.040000] bcm47xx-wdt bcm47xx-wdt.0: BCM47xx Watchdog Timer enabled (30 seconds)<br />[&nbsp; &nbsp; 1.050000] GPIO_WDT: failed to register misc device<br />[&nbsp; &nbsp; 1.050000] TCP: cubic registered<br />[&nbsp; &nbsp; 1.050000] NET: Registered protocol family 17<br />[&nbsp; &nbsp; 1.060000] 8021q: 802.1Q VLAN Support v1.8<br />[&nbsp; &nbsp; 1.070000] VFS: Mounted root (squashfs filesystem) readonly on device 31:4.<br />[&nbsp; &nbsp; 1.080000] Freeing unused kernel memory: 152K (802fa000 - 80320000)<br />procd: Console is alive<br />procd: - watchdog -<br />[&nbsp; &nbsp; 3.300000] pps_core: LinuxPPS API ver. 1 registered<br />[&nbsp; &nbsp; 3.300000] pps_core: Software ver. 5.3.6 - Copyright 2005-2007 Rodolfo Giometti &lt;giometti@linux.it&gt;<br />[&nbsp; &nbsp; 3.320000] PTP clock support registered<br />[&nbsp; &nbsp; 3.330000] bgmac bcma0:1: Found PHY addr: 30 (NOREGS)<br />[&nbsp; &nbsp; 3.330000] bgmac bcma0:1: Support for Roboswitch not implemented<br />[&nbsp; &nbsp; 3.340000] libphy: bgmac mii bus: probed<br />[&nbsp; &nbsp; 3.430000] bgmac: Broadcom 47xx GBit MAC driver loaded<br />procd: - preinit -<br />[&nbsp; &nbsp; 4.750000] random: mktemp urandom read with 40 bits of entropy available<br />Press the [f] key and hit [enter] to enter failsafe mode<br />Press the [1], [2], [3] or [4] key and hit [enter] to select the debug level<br />jffs2 is ready<br />jffs2 is ready<br />[&nbsp; &nbsp; 8.120000] jffs2: notice: (231) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (0 unchecked, 0 orphan) and 6 of xref (0 dead, 0 orphan) found.<br />switching to overlay<br />procd: - early -<br />procd: - watchdog -<br />procd: - ubus -<br />procd: - init -<br />Please press Enter to activate this console.<br />[&nbsp; &nbsp;10.880000] NET: Registered protocol family 10<br />[&nbsp; &nbsp;11.420000] wl: module license &#039;unspecified&#039; taints kernel.<br />[&nbsp; &nbsp;11.420000] Disabling lock debugging due to kernel taint<br />[&nbsp; &nbsp;11.520000] wl0: Broadcom BCM4329 802.11 Wireless Controller 5.10.56.27<br />[&nbsp; &nbsp;11.520000] SSB/BCMA glue driver successfully attached<br />[&nbsp; &nbsp;11.560000] nf_conntrack version 0.5.0 (1977 buckets, 7908 max)<br />[&nbsp; &nbsp;11.580000] ip6_tables: (C) 2000-2006 Netfilter Core Team<br />[&nbsp; &nbsp;11.620000] ip_tables: (C) 2000-2006 Netfilter Core Team<br />[&nbsp; &nbsp;11.740000] xt_time: kernel timezone is -0000<br />[&nbsp; &nbsp;11.770000] PPP generic driver version 2.4.2<br />[&nbsp; &nbsp;11.770000] NET: Registered protocol family 24<br />[&nbsp; &nbsp;16.680000] device eth0.1 entered promiscuous mode<br />[&nbsp; &nbsp;16.690000] device eth0 entered promiscuous mode<br />[&nbsp; &nbsp;16.700000] br-lan: port 1(eth0.1) entered forwarding state<br />[&nbsp; &nbsp;16.700000] br-lan: port 1(eth0.1) entered forwarding state<br />[&nbsp; &nbsp;18.530000] br-lan: port 1(eth0.1) entered disabled state<br />procd: - init complete -<br />[&nbsp; &nbsp;22.330000] random: nonblocking pool is initialized</p></blockquote></div><p>EDIT: OpenWRT seems to be running, as I can use Linux commands as ls, etc. uname -r reveals 3.14.12 kernel as well! So the problem is that it doesn&#039;t work as a router (I cannot connect to it using Ethernet) so there may be some net packages that are not working.</p>											<p class="post-edited">(Last edited by <strong>jojab</strong> on 16 Jul 2014, 12:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240437">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Zajec</div>
					<div class="post-datetime">
						16 Jul 2014, 18:23					</div>
				</div>
				<div class="post-content content">
					<p>Huh, did you manage to compile OpenWrt without b53? Weird. What can you see in:</p><div class="codebox"><pre><code>grep B53 build_dir/target-*/linux-*/linux-3.*/.config</code></pre></div><p>? You should see B53 driver enabled (=y) with B53_PHY_DRIVER=y</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240541">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">jojab</div>
					<div class="post-datetime">
						17 Jul 2014, 10:52					</div>
				</div>
				<div class="post-content content">
					<p>The output from that command is: <br /></p><div class="quotebox"><cite>grep wrote:</cite><blockquote><p># CONFIG_MIKROTIK_RB532 is not set<br />CONFIG_B53=y<br />CONFIG_B53_PHY_DRIVER=y<br /># CONFIG_B53_MMAP_DRIVER is not set<br /># CONFIG_B53_SRAB_DRIVER is not set<br />CONFIG_B53_PHY_FIXUP=y</p></blockquote></div><p>so the driver seems to be enabled. What made you think the driver where disabled?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240542">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Zajec</div>
					<div class="post-datetime">
						17 Jul 2014, 11:03					</div>
				</div>
				<div class="post-content content">
					<p>You are supposed to see:</p><div class="codebox"><pre><code>bgmac bcma0:0: Found PHY addr: 30 (NOREGS)
bgmac bcma0:0: Support for Roboswitch not implemented
libphy: bgmac mii bus: probed
b53_common: found switch: BCM53125, rev 4
bgmac: Broadcom 47xx GBit MAC driver loaded</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240598">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">Hauke</div>
					<div class="post-datetime">
						17 Jul 2014, 23:44					</div>
				</div>
				<div class="post-content content">
					<p>This was fixed in <a href="https://dev.openwrt.org/changeset/41706">https://dev.openwrt.org/changeset/41706</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240661">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">jojab</div>
					<div class="post-datetime">
						18 Jul 2014, 12:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Hauke wrote:</cite><blockquote><p>This was fixed in <a href="https://dev.openwrt.org/changeset/41706">https://dev.openwrt.org/changeset/41706</a></p></blockquote></div><p> Nice! Now it works, thanks <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p241174">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">jojab</div>
					<div class="post-datetime">
						23 Jul 2014, 16:46					</div>
				</div>
				<div class="post-content content">
					<p>I have been using the 3.14.12 kernel build on brcm47xx for a couple of days now, and it has been working well. But I have now run into some problems when trying to connect a USB dongle to it. (It is a Bluetooth dongle, but before I install any BT specific modules, I just wanted to make sure it could detect it when I connect a USB device). </p><p>I have downloaded the trunk, changed the Makefile to 3.14.12, compiled using target brcm47xx (MIPS),&nbsp; target profile Broadcom SoC, all Ethernet, WiFi (wl, proprietary). I have also have put a (*) on kmod-usb-brcm47xx, kmod-usb-core, kmod-usb-ohci and kmod-usb2. Here is my bootlog (when it is finished booting I plug in two USB devices, and as you can see only one of them gets recognized):</p><div class="quotebox"><cite>3.14.12 wrote:</cite><blockquote><p>CFE version 1.0.37 for BCM947XX (32bit,SP,LE)<br />Build Date: ¤T&nbsp; 5¤ë 27 16:47:24 CST 2009 (root@localhost.localdomain)<br />Copyright (C) 2000-2008 Broadcom Corporation.</p><p>Init Arena<br />Init Devs.<br />Boot partition size = 262144(0x40000)<br />et0: Broadcom BCM47XX 10/100/1000 Mbps Ethernet Controller 5.10.56.3<br />CPU type 0x19740: 480MHz<br />Tot mem: 131072 KBytes</p><p>CFE mem:&nbsp; &nbsp; 0x80700000 - 0x8079B310 (635664)<br />Data:&nbsp; &nbsp; &nbsp; &nbsp;0x80731B30 - 0x80734880 (11600)<br />BSS:&nbsp; &nbsp; &nbsp; &nbsp; 0x80734880 - 0x80735310 (2704)<br />Heap:&nbsp; &nbsp; &nbsp; &nbsp;0x80735310 - 0x80799310 (409600)<br />Stack:&nbsp; &nbsp; &nbsp; 0x80799310 - 0x8079B310 (8192)<br />Text:&nbsp; &nbsp; &nbsp; &nbsp;0x80700000 - 0x80731B30 (203568)</p><p>Device eth0:&nbsp; hwaddr BC-EE-7B-97-94-4E, ipaddr 192.168.1.1, mask 255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; gateway not set, nameserver not set<br />Null Rescue Flag.<br />Loader:raw Filesys:tftp Dev:eth0 File:: Options:(null)<br />Loading: TFTP Server.<br />Failed.<br />Could not load :: Timeout occured<br />Loader:raw Filesys:raw Dev:flash0.os File: Options:(null)<br />Loading: .. 3712 bytes read<br />Entry at 0x80001000<br />Starting program at 0x80001000<br />[&nbsp; &nbsp; 0.000000] Linux version 3.14.12 (hussar@hussar) (gcc version 4.8.3 (OpenWrt/Linaro GCC 4.8-2014.04 r41814) ) #1 Wed Jul 23 15:31:33 CEST 2014<br />[&nbsp; &nbsp; 0.000000] CPU0 revision is: 00019740 (MIPS 74Kc)<br />[&nbsp; &nbsp; 0.000000] bcm47xx: using bcma bus<br />[&nbsp; &nbsp; 0.000000] bcma: bus0: Found chip with id 0x4716, rev 0x01 and package 0x0A<br />[&nbsp; &nbsp; 0.000000] bcma: bus0: Core 0 found: ChipCommon (manuf 0x4BF, id 0x800, rev 0x1F, class 0x0)<br />[&nbsp; &nbsp; 0.000000] bcma: bus0: Core 3 found: MIPS 74K (manuf 0x4A7, id 0x82C, rev 0x01, class 0x0)<br />[&nbsp; &nbsp; 0.000000] bcma: bus0: Early bus registered<br />[&nbsp; &nbsp; 0.000000] MIPS: machine is Asus RT-N16<br />[&nbsp; &nbsp; 0.000000] Determined physical RAM map:<br />[&nbsp; &nbsp; 0.000000]&nbsp; memory: 07fff000 @ 00000000 (usable)<br />[&nbsp; &nbsp; 0.000000] Initrd not found or empty - disabling initrd<br />[&nbsp; &nbsp; 0.000000] Zone ranges:<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal&nbsp; &nbsp;[mem 0x00000000-0x07ffefff]<br />[&nbsp; &nbsp; 0.000000] Movable zone start for each node<br />[&nbsp; &nbsp; 0.000000] Early memory node ranges<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;node&nbsp; &nbsp;0: [mem 0x00000000-0x07ffefff]<br />[&nbsp; &nbsp; 0.000000] Primary instruction cache 32kB, VIPT, 4-way, linesize 32 bytes.<br />[&nbsp; &nbsp; 0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes<br />[&nbsp; &nbsp; 0.000000] Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 32511<br />[&nbsp; &nbsp; 0.000000] Kernel command line:&nbsp; noinitrd console=ttyS0,115200<br />[&nbsp; &nbsp; 0.000000] PID hash table entries: 512 (order: -1, 2048 bytes)<br />[&nbsp; &nbsp; 0.000000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)<br />[&nbsp; &nbsp; 0.000000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)<br />[&nbsp; &nbsp; 0.000000] Writing ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Readback ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Memory: 126436K/131068K available (2443K kernel code, 115K rwdata, 484K rodata, 144K init, 227K bss, 4632K reserved)<br />[&nbsp; &nbsp; 0.000000] NR_IRQS:128<br />[&nbsp; &nbsp; 0.000000] Setting up vectored interrupts<br />[&nbsp; &nbsp; 0.060000] Calibrating delay loop... 239.61 BogoMIPS (lpj=1198080)<br />[&nbsp; &nbsp; 0.070000] pid_max: default: 32768 minimum: 301<br />[&nbsp; &nbsp; 0.070000] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.070000] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.070000] NET: Registered protocol family 16<br />[&nbsp; &nbsp; 0.090000] bio: create slab &lt;bio-0&gt; at 0<br />[&nbsp; &nbsp; 0.090000] Switched to clocksource MIPS<br />[&nbsp; &nbsp; 0.100000] NET: Registered protocol family 2<br />[&nbsp; &nbsp; 0.100000] TCP established hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.100000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.100000] TCP: Hash tables configured (established 1024 bind 1024)<br />[&nbsp; &nbsp; 0.100000] TCP: reno registered<br />[&nbsp; &nbsp; 0.100000] UDP hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.100000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.100000] NET: Registered protocol family 1<br />[&nbsp; &nbsp; 0.100000] bcma: bus0: Core 1 found: IEEE 802.11 (manuf 0x4BF, id 0x812, rev 0x11, class 0x0)<br />[&nbsp; &nbsp; 0.100000] bcma: bus0: Core 2 found: GBit MAC (manuf 0x4BF, id 0x82D, rev 0x00, class 0x0)<br />[&nbsp; &nbsp; 0.100000] bcma: bus0: Core 4 found: USB 2.0 Host (manuf 0x4BF, id 0x819, rev 0x04, class 0x0)<br />[&nbsp; &nbsp; 0.100000] bcma: bus0: Core 5 found: PCIe (manuf 0x4BF, id 0x820, rev 0x0E, class 0x0)<br />[&nbsp; &nbsp; 0.100000] bcma: bus0: Core 6 found: DDR1/DDR2 Memory Controller (manuf 0x4BF, id 0x82E, rev 0x01, class 0x0)<br />[&nbsp; &nbsp; 0.100000] bcma: bus0: Core 7 found: Internal Memory (manuf 0x4BF, id 0x80E, rev 0x07, class 0x0)<br />[&nbsp; &nbsp; 0.100000] bcma: bus0: Core 8 found: I2S (manuf 0x4BF, id 0x834, rev 0x00, class 0x0)<br />[&nbsp; &nbsp; 0.130000] bcma: bus0: PCIEcore in host mode found<br />[&nbsp; &nbsp; 0.320000] PCI host bridge to bus 0000:00<br />[&nbsp; &nbsp; 0.320000] pci_bus 0000:00: root bus resource [mem 0x08000000-0x0bffffff]<br />[&nbsp; &nbsp; 0.320000] pci_bus 0000:00: root bus resource [io&nbsp; 0x0100-0x07ff]<br />[&nbsp; &nbsp; 0.320000] pci_bus 0000:00: No busn resource found for root bus, will use [bus 00-ff]<br />[&nbsp; &nbsp; 0.320000] bcma: PCI: Fixing up bridge 0000:00:00.0<br />[&nbsp; &nbsp; 0.320000] bcma: PCI: Fixing up device 0000:00:00.0<br />[&nbsp; &nbsp; 0.320000] bcma: PCI: Fixing up bridge 0000:00:00.1<br />[&nbsp; &nbsp; 0.320000] bcma: PCI: Fixing up device 0000:00:00.1<br />[&nbsp; &nbsp; 0.330000] bcma: bus0: Bus registered<br />[&nbsp; &nbsp; 0.330000] futex hash table entries: 256 (order: -1, 3072 bytes)<br />[&nbsp; &nbsp; 0.330000] squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />[&nbsp; &nbsp; 0.330000] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.<br />[&nbsp; &nbsp; 0.330000] msgmni has been set to 246<br />[&nbsp; &nbsp; 0.330000] io scheduler noop registered<br />[&nbsp; &nbsp; 0.330000] io scheduler deadline registered (default)<br />[&nbsp; &nbsp; 0.340000] Serial: 8250/16550 driver, 2 ports, IRQ sharing enabled<br />[&nbsp; &nbsp; 0.360000] serial8250.0: ttyS0 at MMIO 0xb8000300 (irq = 2, base_baud = 1250000) is a U6_16550A<br />[&nbsp; &nbsp; 0.770000] console [ttyS0] enabled<br />[&nbsp; &nbsp; 0.780000] physmap platform flash device: 02000001 at 1c000000<br />[&nbsp; &nbsp; 0.780000] physmap-flash.0: Found 1 x16 devices at 0x0 in 8-bit bank. Manufacturer ID 0x0000c2 Chip ID 0x00007e<br />[&nbsp; &nbsp; 0.790000] Amd/Fujitsu Extended Query Table at 0x0040<br />[&nbsp; &nbsp; 0.800000]&nbsp; &nbsp;Amd/Fujitsu Extended Query version 1.3.<br />[&nbsp; &nbsp; 0.800000] number of CFI chips: 1<br />[&nbsp; &nbsp; 0.920000] 6 bcm47xxpart partitions found on MTD device physmap-flash.0<br />[&nbsp; &nbsp; 0.920000] Creating 6 MTD partitions on &quot;physmap-flash.0&quot;:<br />[&nbsp; &nbsp; 0.930000] 0x000000000000-0x000000040000 : &quot;boot&quot;<br />[&nbsp; &nbsp; 0.940000] 0x000000040000-0x000001fe0000 : &quot;firmware&quot;<br />[&nbsp; &nbsp; 0.950000] 0x00000004001c-0x00000004090c : &quot;loader&quot;<br />[&nbsp; &nbsp; 0.950000] 0x00000004090c-0x00000014cc00 : &quot;linux&quot;<br />[&nbsp; &nbsp; 0.960000] mtd: partition &quot;linux&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only<br />[&nbsp; &nbsp; 0.970000] 0x00000014cc00-0x000001fe0000 : &quot;rootfs&quot;<br />[&nbsp; &nbsp; 0.980000] mtd: partition &quot;rootfs&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only<br />[&nbsp; &nbsp; 1.000000] mtd: device 4 (rootfs) set to be root filesystem<br />[&nbsp; &nbsp; 1.000000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=0x340000, len=0x1ca0000<br />[&nbsp; &nbsp; 1.010000] 0x000000340000-0x000001fe0000 : &quot;rootfs_data&quot;<br />[&nbsp; &nbsp; 1.020000] 0x000001fe0000-0x000002000000 : &quot;nvram&quot;<br />[&nbsp; &nbsp; 1.030000] libphy: Fixed MDIO Bus: probed<br />[&nbsp; &nbsp; 1.040000] bcm47xx-wdt bcm47xx-wdt.0: BCM47xx Watchdog Timer enabled (30 seconds)<br />[&nbsp; &nbsp; 1.050000] GPIO_WDT: failed to register misc device<br />[&nbsp; &nbsp; 1.050000] TCP: cubic registered<br />[&nbsp; &nbsp; 1.050000] NET: Registered protocol family 17<br />[&nbsp; &nbsp; 1.060000] 8021q: 802.1Q VLAN Support v1.8<br />[&nbsp; &nbsp; 1.070000] VFS: Mounted root (squashfs filesystem) readonly on device 31:4.<br />[&nbsp; &nbsp; 1.080000] Freeing unused kernel memory: 144K (802fc000 - 80320000)<br />procd: Console is alive<br />procd: - watchdog -<br />[&nbsp; &nbsp; 3.440000] pps_core: LinuxPPS API ver. 1 registered<br />[&nbsp; &nbsp; 3.440000] pps_core: Software ver. 5.3.6 - Copyright 2005-2007 Rodolfo Giometti &lt;giometti@linux.it&gt;<br />[&nbsp; &nbsp; 3.460000] PTP clock support registered<br />[&nbsp; &nbsp; 3.470000] bgmac bcma0:1: Found PHY addr: 30 (NOREGS)<br />[&nbsp; &nbsp; 3.480000] bgmac bcma0:1: Support for Roboswitch not implemented<br />[&nbsp; &nbsp; 3.480000] libphy: bgmac mii bus: probed<br />[&nbsp; &nbsp; 3.640000] b53_common: found switch: BCM53115, rev 8<br />[&nbsp; &nbsp; 3.650000] bgmac: Broadcom 47xx GBit MAC driver loaded<br />[&nbsp; &nbsp; 3.700000] usbcore: registered new interface driver usbfs<br />[&nbsp; &nbsp; 3.710000] usbcore: registered new interface driver hub<br />[&nbsp; &nbsp; 3.710000] usbcore: registered new device driver usb<br />[&nbsp; &nbsp; 3.720000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver<br />[&nbsp; &nbsp; 3.730000] ehci-platform: EHCI generic platform driver<br />[&nbsp; &nbsp; 3.740000] ehci-platform ehci-platform.0: EHCI Host Controller<br />[&nbsp; &nbsp; 3.740000] ehci-platform ehci-platform.0: new USB bus registered, assigned bus number 1<br />[&nbsp; &nbsp; 3.750000] ehci-platform ehci-platform.0: irq 5, io mem 0x18004000<br />[&nbsp; &nbsp; 3.780000] ehci-platform ehci-platform.0: USB 2.0 started, EHCI 1.00<br />[&nbsp; &nbsp; 3.780000] hub 1-0:1.0: USB hub found<br />[&nbsp; &nbsp; 3.790000] hub 1-0:1.0: 2 ports detected<br />[&nbsp; &nbsp; 3.800000] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver<br />procd: - preinit -<br />[&nbsp; &nbsp; 5.200000] random: mktemp urandom read with 42 bits of entropy available<br />Press the [f] key and hit [enter] to enter failsafe mode<br />Press the [1], [2], [3] or [4] key and hit [enter] to select the debug level<br />[&nbsp; &nbsp; 5.650000] libphy: bgmac-0-0:1e - Link is Up - 1000/Full<br />jffs2 is ready<br />jffs2 is ready<br />[&nbsp; &nbsp; 7.500000] jffs2: notice: (250) jffs2_build_xattr_subsystem: complete building xattr subsystem, 16 of xdatum (0 unchecked, 15 orphan) and 21 of xref (0 dead, 15 orphan) found.<br />switching to overlay<br />procd: - early -<br />procd: - watchdog -<br />procd: - ubus -<br />procd: - init -<br />Please press Enter to activate this console.<br />[&nbsp; &nbsp;10.370000] NET: Registered protocol family 10<br />[&nbsp; &nbsp;10.910000] wl: module license &#039;unspecified&#039; taints kernel.<br />[&nbsp; &nbsp;10.910000] Disabling lock debugging due to kernel taint<br />[&nbsp; &nbsp;11.010000] wl0: Broadcom BCM4329 802.11 Wireless Controller 5.10.56.27<br />[&nbsp; &nbsp;11.010000] SSB/BCMA glue driver successfully attached<br />[&nbsp; &nbsp;11.040000] nf_conntrack version 0.5.0 (1977 buckets, 7908 max)<br />[&nbsp; &nbsp;11.060000] ip6_tables: (C) 2000-2006 Netfilter Core Team<br />[&nbsp; &nbsp;11.110000] ip_tables: (C) 2000-2006 Netfilter Core Team<br />[&nbsp; &nbsp;11.280000] xt_time: kernel timezone is -0000<br />[&nbsp; &nbsp;11.290000] PPP generic driver version 2.4.2<br />[&nbsp; &nbsp;11.300000] NET: Registered protocol family 24<br />[&nbsp; &nbsp;15.760000] libphy: bgmac-0-0:1e - Link is Up - 1000/Full<br />[&nbsp; &nbsp;17.360000] device eth0.1 entered promiscuous mode<br />[&nbsp; &nbsp;17.370000] device eth0 entered promiscuous mode<br />[&nbsp; &nbsp;17.390000] br-lan: port 1(eth0.1) entered forwarding state<br />[&nbsp; &nbsp;17.390000] br-lan: port 1(eth0.1) entered forwarding state<br />[&nbsp; &nbsp;18.950000] libphy: bgmac-0-0:1e - Link is Up - 1000/Full<br />procd: - init complete -<br />[&nbsp; &nbsp;19.390000] br-lan: port 1(eth0.1) entered forwarding state<br />[&nbsp; &nbsp;22.830000] random: nonblocking pool is initialized<br />[&nbsp; &nbsp;35.700000] usb 1-2: new high-speed USB device number 3 using ehci-platform</p></blockquote></div><p>For comparison, here is my 3.10.49 build bootlog using the exact same menuconfig choices (here you can see both USB devices getting recognized at the end):</p><div class="quotebox"><cite>3.10.49 bootlog wrote:</cite><blockquote><p>CFE version 1.0.37 for BCM947XX (32bit,SP,LE)<br />Build Date: ¤T&nbsp; 5¤ë 27 16:47:24 CST 2009 (root@localhost.localdomain)<br />Copyright (C) 2000-2008 Broadcom Corporation.</p><p>Init Arena<br />Init Devs.<br />Boot partition size = 262144(0x40000)<br />et0: Broadcom BCM47XX 10/100/1000 Mbps Ethernet Controller 5.10.56.3<br />CPU type 0x19740: 480MHz<br />Tot mem: 131072 KBytes</p><p>CFE mem:&nbsp; &nbsp; 0x80700000 - 0x8079B310 (635664)<br />Data:&nbsp; &nbsp; &nbsp; &nbsp;0x80731B30 - 0x80734880 (11600)<br />BSS:&nbsp; &nbsp; &nbsp; &nbsp; 0x80734880 - 0x80735310 (2704)<br />Heap:&nbsp; &nbsp; &nbsp; &nbsp;0x80735310 - 0x80799310 (409600)<br />Stack:&nbsp; &nbsp; &nbsp; 0x80799310 - 0x8079B310 (8192)<br />Text:&nbsp; &nbsp; &nbsp; &nbsp;0x80700000 - 0x80731B30 (203568)</p><p>Device eth0:&nbsp; hwaddr BC-EE-7B-97-94-4E, ipaddr 192.168.1.1, mask 255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; gateway not set, nameserver not set<br />Null Rescue Flag.<br />Loader:raw Filesys:tftp Dev:eth0 File:: Options:(null)<br />Loading: TFTP Server.<br />Failed.<br />Could not load :: Timeout occured<br />Loader:raw Filesys:raw Dev:flash0.os File: Options:(null)<br />Loading: .. 3712 bytes read<br />Entry at 0x80001000<br />Starting program at 0x80001000<br />[&nbsp; &nbsp; 0.000000] Linux version 3.10.49 (hussar@hussar) (gcc version 4.8.3 (OpenWrt/Linaro GCC 4.8-2014.04 r41812) ) #1 Wed Jul 23 14:45:20 CEST 2014<br />[&nbsp; &nbsp; 0.000000] CPU revision is: 00019740 (MIPS 74Kc)<br />[&nbsp; &nbsp; 0.000000] bcm47xx: using bcma bus<br />[&nbsp; &nbsp; 0.000000] bcma: bus0: Found chip with id 0x4716, rev 0x01 and package 0x0A<br />[&nbsp; &nbsp; 0.000000] bcma: bus0: Core 0 found: ChipCommon (manuf 0x4BF, id 0x800, rev 0x1F, class 0x0)<br />[&nbsp; &nbsp; 0.000000] bcma: bus0: Core 3 found: MIPS 74K (manuf 0x4A7, id 0x82C, rev 0x01, class 0x0)<br />[&nbsp; &nbsp; 0.000000] bcma: bus0: Early bus registered<br />[&nbsp; &nbsp; 0.000000] MIPS: machine is Asus RT-N16<br />[&nbsp; &nbsp; 0.000000] Determined physical RAM map:<br />[&nbsp; &nbsp; 0.000000]&nbsp; memory: 07fff000 @ 00000000 (usable)<br />[&nbsp; &nbsp; 0.000000] Initrd not found or empty - disabling initrd<br />[&nbsp; &nbsp; 0.000000] Zone ranges:<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal&nbsp; &nbsp;[mem 0x00000000-0x07ffefff]<br />[&nbsp; &nbsp; 0.000000] Movable zone start for each node<br />[&nbsp; &nbsp; 0.000000] Early memory node ranges<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;node&nbsp; &nbsp;0: [mem 0x00000000-0x07ffefff]<br />[&nbsp; &nbsp; 0.000000] Primary instruction cache 32kB, VIPT, 4-way, linesize 32 bytes.<br />[&nbsp; &nbsp; 0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes<br />[&nbsp; &nbsp; 0.000000] Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 32511<br />[&nbsp; &nbsp; 0.000000] Kernel command line:&nbsp; noinitrd console=ttyS0,115200<br />[&nbsp; &nbsp; 0.000000] PID hash table entries: 512 (order: -1, 2048 bytes)<br />[&nbsp; &nbsp; 0.000000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)<br />[&nbsp; &nbsp; 0.000000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)<br />[&nbsp; &nbsp; 0.000000] Writing ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Readback ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Memory: 126568k/131068k available (2314k kernel code, 4500k reserved, 580k data, 172k init, 0k highmem)<br />[&nbsp; &nbsp; 0.000000] NR_IRQS:128<br />[&nbsp; &nbsp; 0.000000] Setting up vectored interrupts<br />[&nbsp; &nbsp; 0.060000] Calibrating delay loop... 239.61 BogoMIPS (lpj=1198080)<br />[&nbsp; &nbsp; 0.070000] pid_max: default: 32768 minimum: 301<br />[&nbsp; &nbsp; 0.070000] Mount-cache hash table entries: 512<br />[&nbsp; &nbsp; 0.070000] NET: Registered protocol family 16<br />[&nbsp; &nbsp; 0.090000] bio: create slab &lt;bio-0&gt; at 0<br />[&nbsp; &nbsp; 0.090000] Switching to clocksource MIPS<br />[&nbsp; &nbsp; 0.100000] NET: Registered protocol family 2<br />[&nbsp; &nbsp; 0.100000] TCP established hash table entries: 1024 (order: 1, 8192 bytes)<br />[&nbsp; &nbsp; 0.100000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.100000] TCP: Hash tables configured (established 1024 bind 1024)<br />[&nbsp; &nbsp; 0.100000] TCP: reno registered<br />[&nbsp; &nbsp; 0.100000] UDP hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.100000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.100000] NET: Registered protocol family 1<br />[&nbsp; &nbsp; 0.100000] bcma: bus0: Core 1 found: IEEE 802.11 (manuf 0x4BF, id 0x812, rev 0x11, class 0x0)<br />[&nbsp; &nbsp; 0.100000] bcma: bus0: Core 2 found: GBit MAC (manuf 0x4BF, id 0x82D, rev 0x00, class 0x0)<br />[&nbsp; &nbsp; 0.100000] bcma: bus0: Core 4 found: USB 2.0 Host (manuf 0x4BF, id 0x819, rev 0x04, class 0x0)<br />[&nbsp; &nbsp; 0.100000] bcma: bus0: Core 5 found: PCIe (manuf 0x4BF, id 0x820, rev 0x0E, class 0x0)<br />[&nbsp; &nbsp; 0.100000] bcma: bus0: Core 6 found: DDR1/DDR2 Memory Controller (manuf 0x4BF, id 0x82E, rev 0x01, class 0x0)<br />[&nbsp; &nbsp; 0.100000] bcma: bus0: Core 7 found: Internal Memory (manuf 0x4BF, id 0x80E, rev 0x07, class 0x0)<br />[&nbsp; &nbsp; 0.100000] bcma: bus0: Core 8 found: I2S (manuf 0x4BF, id 0x834, rev 0x00, class 0x0)<br />[&nbsp; &nbsp; 0.130000] bcma: bus0: PCIEcore in host mode found<br />[&nbsp; &nbsp; 0.320000] PCI host bridge to bus 0000:00<br />[&nbsp; &nbsp; 0.320000] pci_bus 0000:00: root bus resource [mem 0x08000000-0x0bffffff]<br />[&nbsp; &nbsp; 0.320000] pci_bus 0000:00: root bus resource [io&nbsp; 0x0100-0x07ff]<br />[&nbsp; &nbsp; 0.320000] pci_bus 0000:00: No busn resource found for root bus, will use [bus 00-ff]<br />[&nbsp; &nbsp; 0.320000] bcma: PCI: Fixing up bridge 0000:00:00.0<br />[&nbsp; &nbsp; 0.320000] bcma: PCI: Fixing up device 0000:00:00.0<br />[&nbsp; &nbsp; 0.320000] bcma: PCI: Fixing up bridge 0000:00:00.1<br />[&nbsp; &nbsp; 0.320000] bcma: PCI: Fixing up device 0000:00:00.1<br />[&nbsp; &nbsp; 0.330000] bcma: bus0: Bus registered<br />[&nbsp; &nbsp; 0.330000] squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />[&nbsp; &nbsp; 0.330000] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.<br />[&nbsp; &nbsp; 0.330000] msgmni has been set to 247<br />[&nbsp; &nbsp; 0.330000] io scheduler noop registered<br />[&nbsp; &nbsp; 0.330000] io scheduler deadline registered (default)<br />[&nbsp; &nbsp; 0.330000] Serial: 8250/16550 driver, 2 ports, IRQ sharing enabled<br />[&nbsp; &nbsp; 0.360000] serial8250.0: ttyS0 at MMIO 0xb8000300 (irq = 2) is a U6_16550A<br />[&nbsp; &nbsp; 0.750000] console [ttyS0] enabled<br />[&nbsp; &nbsp; 0.760000] physmap platform flash device: 02000001 at 1c000000<br />[&nbsp; &nbsp; 0.760000] physmap-flash.0: Found 1 x16 devices at 0x0 in 8-bit bank. Manufacturer ID 0x0000c2 Chip ID 0x00007e<br />[&nbsp; &nbsp; 0.770000] Amd/Fujitsu Extended Query Table at 0x0040<br />[&nbsp; &nbsp; 0.780000]&nbsp; &nbsp;Amd/Fujitsu Extended Query version 1.3.<br />[&nbsp; &nbsp; 0.780000] number of CFI chips: 1<br />[&nbsp; &nbsp; 0.900000] 6 bcm47xxpart partitions found on MTD device physmap-flash.0<br />[&nbsp; &nbsp; 0.900000] Creating 6 MTD partitions on &quot;physmap-flash.0&quot;:<br />[&nbsp; &nbsp; 0.910000] 0x000000000000-0x000000040000 : &quot;boot&quot;<br />[&nbsp; &nbsp; 0.920000] 0x000000040000-0x000001fe0000 : &quot;firmware&quot;<br />[&nbsp; &nbsp; 0.930000] 0x00000004001c-0x00000004090c : &quot;loader&quot;<br />[&nbsp; &nbsp; 0.930000] 0x00000004090c-0x000000142400 : &quot;linux&quot;<br />[&nbsp; &nbsp; 0.940000] mtd: partition &quot;linux&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only<br />[&nbsp; &nbsp; 0.950000] 0x000000142400-0x000001fe0000 : &quot;rootfs&quot;<br />[&nbsp; &nbsp; 0.960000] mtd: partition &quot;rootfs&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only<br />[&nbsp; &nbsp; 0.970000] mtd: device 4 (rootfs) set to be root filesystem<br />[&nbsp; &nbsp; 0.980000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=0x340000, len=0x1ca0000<br />[&nbsp; &nbsp; 0.990000] 0x000000340000-0x000001fe0000 : &quot;rootfs_data&quot;<br />[&nbsp; &nbsp; 1.000000] 0x000001fe0000-0x000002000000 : &quot;nvram&quot;<br />[&nbsp; &nbsp; 1.010000] libphy: Fixed MDIO Bus: probed<br />[&nbsp; &nbsp; 1.010000] bcm47xx-wdt bcm47xx-wdt.0: BCM47xx Watchdog Timer enabled (30 seconds)<br />[&nbsp; &nbsp; 1.020000] GPIO_WDT: failed to register misc device<br />[&nbsp; &nbsp; 1.030000] TCP: cubic registered<br />[&nbsp; &nbsp; 1.030000] NET: Registered protocol family 17<br />[&nbsp; &nbsp; 1.040000] 8021q: 802.1Q VLAN Support v1.8<br />[&nbsp; &nbsp; 1.050000] VFS: Mounted root (squashfs filesystem) readonly on device 31:4.<br />[&nbsp; &nbsp; 1.060000] Freeing unused kernel memory: 172K (802d5000 - 80300000)<br />procd: Console is alive<br />procd: - watchdog -<br />[&nbsp; &nbsp; 3.400000] pps_core: LinuxPPS API ver. 1 registered<br />[&nbsp; &nbsp; 3.410000] pps_core: Software ver. 5.3.6 - Copyright 2005-2007 Rodolfo Giometti &lt;giometti@linux.it&gt;<br />[&nbsp; &nbsp; 3.420000] PTP clock support registered<br />[&nbsp; &nbsp; 3.430000] bgmac bcma0:1: Found PHY addr: 30 (NOREGS)<br />[&nbsp; &nbsp; 3.440000] bgmac bcma0:1: Support for Roboswitch not implemented<br />[&nbsp; &nbsp; 3.450000] libphy: bgmac mii bus: probed<br />[&nbsp; &nbsp; 3.530000] b53_common: found switch: BCM53115, rev 8<br />[&nbsp; &nbsp; 3.530000] bgmac: Broadcom 47xx GBit MAC driver loaded<br />[&nbsp; &nbsp; 3.580000] usbcore: registered new interface driver usbfs<br />[&nbsp; &nbsp; 3.590000] usbcore: registered new interface driver hub<br />[&nbsp; &nbsp; 3.600000] usbcore: registered new device driver usb<br />[&nbsp; &nbsp; 3.610000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver<br />[&nbsp; &nbsp; 3.620000] ehci-platform: EHCI generic platform driver<br />[&nbsp; &nbsp; 3.620000] ehci-platform ehci-platform.0: EHCI Host Controller<br />[&nbsp; &nbsp; 3.630000] ehci-platform ehci-platform.0: new USB bus registered, assigned bus number 1<br />[&nbsp; &nbsp; 3.640000] ehci-platform ehci-platform.0: irq 5, io mem 0x18004000<br />[&nbsp; &nbsp; 3.660000] ehci-platform ehci-platform.0: USB 2.0 started, EHCI 1.00<br />[&nbsp; &nbsp; 3.660000] hub 1-0:1.0: USB hub found<br />[&nbsp; &nbsp; 3.670000] hub 1-0:1.0: 2 ports detected<br />[&nbsp; &nbsp; 3.670000] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver<br />[&nbsp; &nbsp; 3.680000] ohci-platform ohci-platform.0: Generic Platform OHCI Controller<br />[&nbsp; &nbsp; 3.690000] ohci-platform ohci-platform.0: new USB bus registered, assigned bus number 2<br />[&nbsp; &nbsp; 3.700000] ohci-platform ohci-platform.0: irq 5, io mem 0x18009000<br />[&nbsp; &nbsp; 3.760000] hub 2-0:1.0: USB hub found<br />[&nbsp; &nbsp; 3.760000] hub 2-0:1.0: 2 ports detected<br />procd: - preinit -<br />Press the [f] key and hit [enter] to enter failsafe mode<br />Press the [1], [2], [3] or [4] key and hit [enter] to select the debug level<br />[&nbsp; &nbsp; 5.530000] libphy: bgmac-0-0:1e - Link is Up - 1000/Full<br />jffs2 is ready<br />jffs2 is ready<br />[&nbsp; &nbsp; 8.460000] jffs2: notice: (253) jffs2_build_xattr_subsystem: complete building xattr subsystem, 16 of xdatum (0 unchecked, 15 orphan) and 21 of xref (0 dead, 15 orphan) found.<br />switching to overlay<br />procd: - early -<br />procd: - watchdog -<br />procd: - ubus -<br />procd: - init -<br />Please press Enter to activate this console.<br />[&nbsp; &nbsp;11.320000] NET: Registered protocol family 10<br />[&nbsp; &nbsp;11.860000] wl: module license &#039;unspecified&#039; taints kernel.<br />[&nbsp; &nbsp;11.870000] Disabling lock debugging due to kernel taint<br />[&nbsp; &nbsp;11.960000] wl0: Broadcom BCM4329 802.11 Wireless Controller 5.10.56.27<br />[&nbsp; &nbsp;11.960000] SSB/BCMA glue driver successfully attached<br />[&nbsp; &nbsp;11.990000] nf_conntrack version 0.5.0 (1980 buckets, 7920 max)<br />[&nbsp; &nbsp;12.000000] ip6_tables: (C) 2000-2006 Netfilter Core Team<br />[&nbsp; &nbsp;12.040000] ip_tables: (C) 2000-2006 Netfilter Core Team<br />[&nbsp; &nbsp;12.130000] xt_time: kernel timezone is -0000<br />[&nbsp; &nbsp;12.240000] PPP generic driver version 2.4.2<br />[&nbsp; &nbsp;12.240000] NET: Registered protocol family 24<br />[&nbsp; &nbsp;16.750000] libphy: bgmac-0-0:1e - Link is Up - 1000/Full<br />[&nbsp; &nbsp;18.440000] device eth0.1 entered promiscuous mode<br />[&nbsp; &nbsp;18.450000] device eth0 entered promiscuous mode<br />[&nbsp; &nbsp;18.460000] br-lan: port 1(eth0.1) entered forwarding state<br />[&nbsp; &nbsp;18.460000] br-lan: port 1(eth0.1) entered forwarding state<br />[&nbsp; &nbsp;19.750000] libphy: bgmac-0-0:1e - Link is Up - 1000/Full<br />procd: - init complete -<br />[&nbsp; &nbsp;20.460000] br-lan: port 1(eth0.1) entered forwarding state<br />[&nbsp; &nbsp;29.210000] usb 1-1: new high-speed USB device number 2 using ehci-platform<br />[&nbsp; &nbsp;36.130000] usb 2-2: new full-speed USB device number 2 using ohci-platform</p></blockquote></div><p>It seems like there is something not working with the ohci-driver. Can this problem be similar to the ethernet problem?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>