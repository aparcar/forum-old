<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> asterisk 1.2.12.1 white russian backport</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 10 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p34004">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						17 Sep 2006, 23:04					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Using buildroot-ng I cross-compiled the most recent asterisk version 1.2.12.1 for white russian and it seems to run OK on my openwrt box so far. Packages are up at (temporary link):<br />&nbsp; <a href="http://zandbelt.dyndns.org/asterisk_1.2.12.1-1_mipsel.ipk">http://zandbelt.dyndns.org/asterisk_1.2 … mipsel.ipk</a><br />&nbsp; <a href="http://zandbelt.dyndns.org/asterisk-sounds_1.2.12.1-1_mipsel.ipk">http://zandbelt.dyndns.org/asterisk-sou … mipsel.ipk</a><br />&nbsp; <a href="http://zandbelt.dyndns.org/asterisk-voicemail_1.2.12.1-1_mipsel.ipk">http://zandbelt.dyndns.org/asterisk-voi … mipsel.ipk</a><br />&nbsp; <a href="http://zandbelt.dyndns.org/asterisk-chan-bluetooth_1.2.12.1-1_mipsel.ipk">http://zandbelt.dyndns.org/asterisk-cha … mipsel.ipk</a></p><p>If people can confirm that this stuff works for them too I can assemble a patch set for submission to the codebase (and/or put the binary packages in a suitable ipkg repository).</p><p>Regards,</p><p>Hans.</p><p>PS: I did not test chan-bluetooth yet</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p34012">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">yunzhang</div>
					<div class="post-datetime">
						18 Sep 2006, 05:34					</div>
				</div>
				<div class="post-content content">
					<p>It is working on my OpenWRT WhiteRusssion RC5. But I haven&#039;t tested all the features yet, at least sounds,voice mail is working well.<br />Thanks for good work.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p34128">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">wigyori</div>
					<div class="post-datetime">
						20 Sep 2006, 11:54					</div>
				</div>
				<div class="post-content content">
					<p>Could you please make an iLBC codec support package also? asterisk-1.0.10-1 segfaults with that.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p34160">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						20 Sep 2006, 21:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>wigyori wrote:</cite><blockquote><p>Could you please make an iLBC codec support package also? asterisk-1.0.10-1 segfaults with that.</p></blockquote></div><p>I added packages for the codecs iLBC, speex and LPC at:</p><p>&nbsp; <a href="http://zandbelt.dyndns.org/asterisk-codec-ilbc_1.2.12.1-1_mipsel.ipk">http://zandbelt.dyndns.org/asterisk-cod … mipsel.ipk</a><br />&nbsp; <a href="http://zandbelt.dyndns.org/asterisk-codec-speex_1.2.12.1-1_mipsel.ipk">http://zandbelt.dyndns.org/asterisk-cod … mipsel.ipk</a><br />&nbsp; <a href="http://zandbelt.dyndns.org/asterisk-codec-lpc10_1.2.12.1-1_mipsel.ipk">http://zandbelt.dyndns.org/asterisk-cod … mipsel.ipk</a></p><p>These are completely untested so let me know if it works for you.</p><p>Regards,</p><p>Hans.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p34197">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">wigyori</div>
					<div class="post-datetime">
						21 Sep 2006, 12:31					</div>
				</div>
				<div class="post-content content">
					<p>Asterisk works fine, but segfaults with iLBC enabled. :\</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p34239">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">sm4u</div>
					<div class="post-datetime">
						21 Sep 2006, 22:23					</div>
				</div>
				<div class="post-content content">
					<p>Hi<br />I&#039;am interested to testing asterisk with your&#039;s ipkgs. Please tell me something about memory occupation (flash and ram) after install (I have to buy OpenWrt platform first, ? wl-500gp).<br />I suppose that results will be like test provided with AstLinux and the Soekris net4801 (<a href="http://www.enicomms.com/asterisk-testing">http://www.enicomms.com/asterisk-testing</a>) becouse of the same CPU speed (? diff. mem.). </p><p>ASUS&nbsp; wl-500gp: CPU speed 266MHz, RAM 32 MB, FLASH 8MB<br />Soekris net4801-60: CPU 266 Mhz, 32-256 Mbyte SDRAM, FLASH 8MB to 4 Gbyte Microdrive </p><p>I like AstLinux but I suppose for AstLinux on on wl-500gp (without OpenWrt functionality) I must make RAM upgrade, and USB install.<br />(With AstLinux for all vm, configs and logs is saved separetly for flash lifecycle preserve, GUI +...)</p><p>Question: Is possible in voicemail and sounds ipk-s (after changing extension to&nbsp; .ipk.tar.gz) to simple replace sound files (is any kind of CRC check in .ipk)</p><p>Thanks</p>											<p class="post-edited">(Last edited by <strong>sm4u</strong> on 21 Sep 2006, 23:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p34592">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">florin_m</div>
					<div class="post-datetime">
						29 Sep 2006, 18:46					</div>
				</div>
				<div class="post-content content">
					<p>what about AGI ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p36115">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Dimitripietro</div>
					<div class="post-datetime">
						27 Oct 2006, 08:05					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for porting Asterisk 1.2.12.1 !</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p36741">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">jeno007</div>
					<div class="post-datetime">
						7 Nov 2006, 23:32					</div>
				</div>
				<div class="post-content content">
					<p>Hi Hans,</p><p>Have you published your patches already? Can I download them from<br />somewhere?<br />I&#039;m interested about the asterisk-pgsql Postgres support module and also<br />would like to try to port the fax supporting modules (app_rxfax and<br />app_txfax and app_nv_faxdetect) as well.</p><p>Best regards,</p><p>Jeno</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p37033">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						12 Nov 2006, 18:04					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Several people have been asking questions about the asterisk 1.2.* backport for OpenWRT Whiterussian; I&#039;ve tried to address them all in a single action ;-) provided here:</p><p>&nbsp; <a href="http://zandbelt.dyndns.org/asterisk.html">http://zandbelt.dyndns.org/asterisk.html</a></p><p>features:<br /> - upgrade to the latest Asterisk release: 1.2.13<br /> - a patch (almost 500kb) for building it yourself from the OpenWRT Whiterussian source tree<br /> - chan_bluetooth (thus including bluez-libs stuff)<br /> - postgres-sql module<br /> - res_agi and res_crypto (amongst others)</p><p>but:<br /> - I haven&#039;t tested this upgrade myself yet<br /> - my guess is that the ilbc codec still crashes<br /> - the source patch leaves you with some 0 byte files because of SVN behaviour</p><p>Let me know if this works for you,</p><p>Hans.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p37525">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">candlerb</div>
					<div class="post-datetime">
						20 Nov 2006, 23:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>sm4u wrote:</cite><blockquote><p>Please tell me something about memory occupation (flash and ram) after install (I have to buy OpenWrt platform first, ? wl-500gp)</p></blockquote></div><p>Here&#039;s what I&#039;ve got left on a WL500g Deluxe after installing RC6 &#039;micro&#039;; asterisk-mini and its dependencies (libpthread, libncurses, libopenssl); the meetme/ztdummy modules plus kmod-usb-core; and ntpclient.</p><div class="codebox"><pre><code>root@OpenWrt:~# df -k
Filesystem           1k-blocks      Used Available Use% Mounted on
/dev/root                  832       832         0 100% /rom
none                     15252       284     14968   2% /tmp
/dev/mtdblock/4           2432      2128       304  88% /jffs
/jffs                      832       832         0 100% /</code></pre></div><p>Also, I had to extract app_dial.so from the full asterisk package and manually copy it in, since asterisk-mini is missing this module. I&#039;m not sure that Asterisk is particularly useful without it <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>So it&#039;s pretty tight, but the WL500g Deluxe has only 4MB flash, whereas the Premium you&#039;re considering has 8MB; that should give you plenty of room.</p><p>I could save some space by using the imagebuilder to make my own squashfs filesystem containing Asterisk as well.</p><div class="quotebox"><blockquote><p>I suppose that results will be like test provided with AstLinux and the Soekris net4801 (<a href="http://www.enicomms.com/asterisk-testing">http://www.enicomms.com/asterisk-testing</a>) becouse of the same CPU speed (? diff. mem.).</p></blockquote></div><p>That&#039;s not a straightforward comparison, since one is MIPS and the other is Intel-compatible.</p><p>I&#039;ve not any performance testing so far, other than confirming I can pass 4 concurrent calls through the box. For me, I&#039;m worried less about SIP processing than RTP handling, since I&#039;m stuffing RTP packets into IAX2 and vice versa - one of the benefits of going with the Asus is that its USB interface can be used as a timing source by Asterisk.</p><p>However, if you&#039;re able to use canreinvite=yes so that the media doesn&#039;t hit Asterisk, and you&#039;re not doing any conferencing, you shouldn&#039;t have to worry about that.</p><p>B.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p38780">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">sm4u</div>
					<div class="post-datetime">
						12 Dec 2006, 17:47					</div>
				</div>
				<div class="post-content content">
					<p>Hi !<br />First thank&#039;s to zandbelt for Asterisk packages.<br />Second thank&#039;s to candlerb for reply.<br />Third: My experience<br />I have plety instaled packages, and running Asterisk</p><p>root@OpenWrt:~$ asterisk<br />Asterisk already running on /var/run/asterisk.ctl.&nbsp; Use &#039;asterisk -r&#039; to connect.<br />root@OpenWrt:~$ free<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; total&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;used&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;free&nbsp; &nbsp; &nbsp; &nbsp;shared&nbsp; &nbsp; &nbsp; buffers<br />Mem:&nbsp; &nbsp; &nbsp; &nbsp; 30504&nbsp; &nbsp; &nbsp; &nbsp; 17404&nbsp; &nbsp; &nbsp; &nbsp; 13100&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 964<br />Swap:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0<br />Total:&nbsp; &nbsp; &nbsp; &nbsp; 30504&nbsp; &nbsp; &nbsp; &nbsp; 17404&nbsp; &nbsp; &nbsp; &nbsp; 13100<br />root@OpenWrt:~$ df<br />Filesystem&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1k-blocks&nbsp; &nbsp; &nbsp; Used Available Use% Mounted on<br />none&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;15252&nbsp; &nbsp; &nbsp; &nbsp; 84&nbsp; &nbsp; &nbsp;15168&nbsp; &nbsp;1% /tmp<br />/dev/mtdblock/4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;6080&nbsp; &nbsp; &nbsp; 4204&nbsp; &nbsp; &nbsp; 1876&nbsp; 69% /jffs<br />/jffs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1280&nbsp; &nbsp; &nbsp; 1280&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 100% /<br />root@OpenWrt:~$</p><p>more details on my reply to Gazzo2 (<a href="http://forum.openwrt.org/viewtopic.php?id=8429">http://forum.openwrt.org/viewtopic.php?id=8429</a>)</p><p>In meanwhile I accepted some knowledge about Linux, and changed etc/hotplug.d/usb/10-mount script.<br />Now I have not problem with USB MSDs (every time in any situation MSDs is mounted) and have plenty of room for aditional packages and swap. All is tested. (<a href="http://forum.openwrt.org/viewtopic.php?id=8504">http://forum.openwrt.org/viewtopic.php?id=8504</a>)</p><p>And finaly I spent many hours to find image with new busybox becouse in my case my VoIP provider expect from me specific HW to connect to network (dhcp server not respond to requests if option field WendorClass Specific is not filed with data of known devices (Cisco and Mediatrix)). I changed script to start dhcp client with appropriate field and now dhcp server respond to me. In busybox dhcp client send requests with 590 bytes in size and that is not correct (compare this with reqests from Your PC). In DD-Wrt this is patched.</p><p>...._(8)-x<br />sm4u</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p38782">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">candlerb</div>
					<div class="post-datetime">
						12 Dec 2006, 18:03					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>sm4u wrote:</cite><blockquote><p>Hroot@OpenWrt:~$ asterisk<br />Asterisk already running on /var/run/asterisk.ctl.&nbsp; Use &#039;asterisk -r&#039; to connect.<br />root@OpenWrt:~$</p></blockquote></div><p>Are you reporting this as a problem? Like it says, typing &quot;asterisk -r&quot; will give you a console on your already-running asterisk daemon. (I tend to use &quot;asterisk -rvvvv&quot; to get some more verbose logging)</p><div class="quotebox"><blockquote><p>In busybox dhcp client send requests with 590 bytes in size and that is not correct (compare this with reqests from Your PC). In DD-Wrt this is patched.</p></blockquote></div><p>If you want to report this as a bug, then I suggest you show the actual dhcp request which you think is bad. e.g. &quot;tcpdump -i eth0 -n -s1500 -X udp port 67 or udp port 68&quot;, and paste it into the bug tracker.</p><p>Comparison with a PC isn&#039;t really relevant, since the two probably request different options, but your sample packet can be checked for compliance against the RFCs. RFC 2131 does say that DHCP packets should not exceed 576 bytes, unless the client negotiates the option to use larger ones.</p><p>Brian.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p38809">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">sm4u</div>
					<div class="post-datetime">
						13 Dec 2006, 03:41					</div>
				</div>
				<div class="post-content content">
					<p>Hi candlerb (Brain)!<br />1. I didn&#039;t reporing problem. I&#039;am started Asterisk before this command and all is ok, but this piece is extracted from context with intention to show to Gazzo2 that Asterisk is running, and what is RAM utilization in this case. Sory for mistake I produced.</p><p>2. logs from Ethereal:</p><p>dhcp request from busybox udhcpc :<br /></p><div class="codebox"><pre><code>Frame 196 (590 bytes on wire, 590 bytes captured)
Ethernet II, Src: 10.252.4.101 (00:17:31:ed:d9:9a), Dst: Broadcast (ff:ff:ff:ff:ff:ff)
Internet Protocol, Src: 0.0.0.0 (0.0.0.0), Dst: 255.255.255.255 (255.255.255.255)
User Datagram Protocol, Src Port: bootpc (68), Dst Port: bootps (67)
Bootstrap Protocol
    Message type: Boot Request (1)
....
    Option 60: Vendor class identifier = &quot;udhcp 0.9.9-pre&quot;</code></pre></div><p>dhcp request from IBM laptop WIN XP:<br /></p><div class="codebox"><pre><code>Frame 57 (353 bytes on wire, 353 bytes captured)
Ethernet II, Src: 10.252.4.100 (00:0b:cd:6e:49:de), Dst: Broadcast (ff:ff:ff:ff:ff:ff)
Internet Protocol, Src: 10.252.4.100 (10.252.4.100), Dst: 255.255.255.255 (255.255.255.255)
User Datagram Protocol, Src Port: bootpc (68), Dst Port: bootps (67)
Bootstrap Protocol
    Message type: Boot Request (1)
....
    Option 60: Vendor class identifier = &quot;MSFT 5.0&quot;</code></pre></div><p>dhcp request from Mediatrix 1104 gateway:<br /></p><div class="codebox"><pre><code>Frame 61 (347 bytes on wire, 347 bytes captured)
Ethernet II, Src: 10.252.4.102 (00:90:f8:02:5b:f8), Dst: Broadcast (ff:ff:ff:ff:ff:ff)
Internet Protocol, Src: 0.0.0.0 (0.0.0.0), Dst: 255.255.255.255 (255.255.255.255)
User Datagram Protocol, Src Port: bootpc (68), Dst Port: bootps (67)
Bootstrap Protocol
    Message type: Boot Request (1)
....
    Option 60: Vendor class identifier = &quot;Mediatrix 1104                              &quot;</code></pre></div><p>and number of options from busybox is less then from other two. Busybox dhcpc filled request all with blanks compared with Mediatrix and XP wich not sent this blanks.<br />This is covered by another posts as You know: <a href="http://forum.bsr-clan.de/ftopic8253.html">http://forum.bsr-clan.de/ftopic8253.html</a> </p><p>Ok this is not bug. If you count size 576 Bytes (icluding udp and ip) + 14 bytes for ethernet layer = 590 Bytes captured, but about 250 Bytes is all zero and wasting space. <br />And finaly I have not problem with this size. I get response from Cisco ruters from my VoIP operater in the case of 590(576) Bytes long requests. <br />Thanks for confirmation of 4 sucessfull calls.<br />And now I&#039;am wasting space in this zandbelt topic. Sory zandbelt.<br />Let me make some corect thing. <br />Please test my script sent in topic <a href="http://forum.openwrt.org/viewtopic.php?id=8504">http://forum.openwrt.org/viewtopic.php?id=8504</a></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>