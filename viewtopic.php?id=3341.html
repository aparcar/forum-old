<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> iptables / new Image</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 17 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p15839">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">safaci2000</div>
					<div class="post-datetime">
						22 Nov 2005, 01:59					</div>
				</div>
				<div class="post-content content">
					<p>I have what I believe to be the latest openwrt installed.. i ran ipkg update, ipkg upgrade so I should be up to date....</p><p>I setup custom iptables rules to allow routing of port 80 and 22&nbsp; (http/ssh).<br />I ran iptables-save and it works fine....&nbsp; </p><p>problem is, everytime i reboot the router, all my iptables rules are flushed.</p><p>My other problem is.. i can seem to get tftp to work to transfer a new image to the router.&nbsp; Is there anyway i can sftp the image? or are there particular instructions on doing this.&nbsp; I tried using linksys&#039; tftp client, aftp, </p><p>nothing seems to work.</p><p>Thanks for any help.</p><p>Sam</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p15840">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mbm</div>
					<div class="post-datetime">
						22 Nov 2005, 02:03					</div>
				</div>
				<div class="post-content content">
					<p>If you&#039;re going to use iptables-save make sure you have an iptables-restore somewhere in startup to load your saved rules. IMHO the save/restore is a waste of space, much more efficient to just put all your iptables rules in a script (like the one that comes with openwrt).</p><p>I&#039;m confused as to why you want to reflash if you already have the latest firmware.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p15845">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">safaci2000</div>
					<div class="post-datetime">
						22 Nov 2005, 03:16					</div>
				</div>
				<div class="post-content content">
					<p>I wanted to flash the router to try out various different OS?&nbsp; is that the proper term for the WRT54G(S).&nbsp; I tried adding my custom rules to /etc/firewall.user but I was given an error that the file system is mounted as read-only:</p><p>-ash: cannot create /etc/firewall.user: Read-only file system</p><p>here&#039;s my fstab:&nbsp; </p><p>root@OpenWrt:/etc# mount<br />/dev/root on /rom type squashfs (ro)<br />none on /rom/dev type devfs (rw)<br />/dev/mtdblock/4 on / type jffs2 (rw)<br />none on /proc type proc (rw)<br />none on /dev type devfs (rw)<br />none on /tmp type tmpfs (rw,nosuid,nodev)<br />none on /dev/pts type devpts (rw)</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>