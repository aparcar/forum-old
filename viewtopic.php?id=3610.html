<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WRT54G V1.1 - HTML in NVRAM!?!?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 19 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p16911">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">sarodude</div>
					<div class="post-datetime">
						9 Dec 2005, 16:29					</div>
				</div>
				<div class="post-content content">
					<p>First, the output of nvram show:</p><p>&lt;termoutput&gt;<br />root@OpenWrt:~# nvram show<br />os_ram_addr=80001000<br />et0macaddr=00:0F:66:51:03:1A<br />watchdog=5000<br />boot_wait=off<br />wl0_infra=1<br />et0mdcport=0<br />Intel_firmware_version=v1.41.8<br />pmon_ver=PMON 3.31.15.0<br />wl0_ifname=eth2<br />edirecting to &lt;a href=&quot;/cgi-bin/webif.sh&quot;&gt;main page&lt;/a&gt;...<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;/body&gt;<br />&lt;/html&gt;<br />* {<br />&nbsp; &nbsp; &nbsp; &nbsp; margin: 0;<br />&nbsp; &nbsp; &nbsp; &nbsp; padding: 0;<br />}</p><p>html, body {<br />&nbsp; &nbsp; &nbsp; &nbsp; font-family: Verdana, Helvetica, sans-serif;<br />&nbsp; &nbsp; &nbsp; &nbsp; font-size: 10pt;<br />&nbsp; &nbsp; &nbsp; &nbsp; width: inherit;<br />&nbsp; &nbsp; &nbsp; &nbsp; height: 100%;<br />}</p><p>dt {<br />&nbsp; &nbsp; &nbsp; &nbsp; font-weight: bold;<br />}</p><p>dd {<br />&nbsp; &nbsp; &nbsp; &nbsp; margin-left: 1em;<br />&nbsp; &nbsp; &nbsp; &nbsp; margin-bottom: 0.2em;<br />}</p><p>ul {<br />&nbsp; &nbsp; &nbsp; &nbsp; display: inline;<br />&nbsp; &nbsp; &nbsp; &nbsp; list-style-type: none;<br />}</p><p>ul.about {<br />&nbsp; &nbsp; &nbsp; &nbsp; display: block;<br />&nbsp; &nbsp; &nbsp; &nbsp; list-style-type: disc;<br />}<br />li.about {<br />&nbsp; &nbsp; &nbsp; &nbsp; margin-left: 2em;<br />}</p><p>hr {<br />&nbsp; &nbsp; &nbsp; &nbsp; display: none;<br />}</p><p>hr.separator {<br />&nbsp; &nbsp; &nbsp; &nbsp; display: block;<br />}</p><p>th {<br />&nbsp; &nbsp; &nbsp; &nbsp; text-align: left;<br />}</p><p>.selected-maincat {<br />&nbsp; &nbsp; &nbsp; &nbsp; font-weight: bold;<br />}</p><p>#container {<br />&nbsp; &nbsp; &nbsp; &nbsp; position: relative;<br />&nbsp; &nbsp; &nbsp; &nbsp; min-height: 100%;<br />}</p><p>#header {<br />&nbsp; &nbsp; &nbsp; &nbsp; position: relative;<br />&nbsp; &nbsp; &nbsp; &nbsp; width: 100%;<br />}</p><p>#header #header-title {<br />&nbsp; &nbsp; &nbsp; &nbsp; padding-top: 2em;<br />&nbsp; &nbsp; &nbsp; &nbsp; padding-bottom: 0.2em;<br />&nbsp; &nbsp; &nbsp; &nbsp; color: white;<br />&nbsp; &nbsp; &nbsp; &nbsp; background-color: #3D5C7A;<br />}</p><p>#header #header-title #openwrt-title {<br />&nbsp; &nbsp; &nbsp; &nbsp; position: relative;<br />&nbsp; &nbsp; &nbsp; &nbsp; float: left;<br />&nbsp; &nbsp; &nbsp; &nbsp; left: 1em;<br />&nbsp; &nbsp; &nbsp; &nbsp; top: 0.7em;<br />}</p><p>#header #header-title #openwrt-title h1 {<br />&nbsp; &nbsp; &nbsp; &nbsp; font-size: 2.8em;<br />}</p><p>#header #header-title #short-status {<br />&nbsp; &nbsp; &nbsp; &nbsp; position: relative;<br />&nbsp; &nbsp; &nbsp; &nbsp; text-align: right;<br />&nbsp; &nbsp; &nbsp; &nbsp; right: 1em;<br />&nbsp; &nbsp; &nbsp; &nbsp; line-height: 1.2em;<br />&nbsp; &nbsp; &nbsp; &nbsp; padding-bottom: 0.2em;<br />}</p><p>#header #header-title #short-status ul {<br />&nbsp; &nbsp; &nbsp; &nbsp; font-s<br />U4<br />wl0_mode=ap<br />os_flash_addr=bfc40000<br />boardtype=bcm94710dev<br />et1macaddr=00:0F:66:51:03:1B<br />lan_netmask=255.255.255.0<br />wl0_ssid=OpenWrt<br />et1mdcport=1<br />vlan2hwname=et0<br />flash_type=Intel 28F320C3 2Mx16 BotB<br />wan_proto=dhcp<br />wifi_ifnames=<br />lan_ifnames=vlan0 vlan2 eth2<br />pppoe_ifname=<br />wan_ifnames=<br />lan_ipaddr=192.168.3.1<br />clkfreq=125<br />lan_proto=static<br />vlan1hwname=et0<br />firmware_version=v1.42.2<br />sdram_config=0x0000<br />scratch=a0180000<br />lan_ifname=br0<br />sdram_refresh=0x8040<br />sdram_ncdl=0x00000000<br />et0phyaddr=30<br />wifi_ifname=<br />wan_ifname=vlan1<br />wl0_radio=1<br />sdram_init=0x0419<br />dl_ram_addr=a0001000<br />boot_date=Fri Sep 26 00:37:28 2003<br /> &#039;\w&#039; ?&gt;&lt;/pre&gt;</p><p>&lt;? footer ?&gt;<br />&lt;!--<br />##WEBIF:name:Status:2:Wireless<br />--&gt;<br />#!/bin/sh<br />exec ./webif/info.sh<br />&lt;html&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;head&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;meta http-equiv=&quot;refresh&quot; content=&quot;0; URL=/cgi-bin/webif.sh&quot; /&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;/head&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;body&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div style=&quot;vertical-align: middle; text-align: center; height: 100%&quot;&gt;<br />P4<br />boot_ver=v1.5<br />et1phyaddr=30<br />boardnum=42<br />pppoe_ifnames=<br />size: 2271 bytes (30497 left)<br />&lt;/termoutput&gt;</p><p>I did a search for HTML in NVRAM but found nothing.&nbsp; It&#039;s a bit of a haze, but here&#039;s sorta what happened...</p><p>I was struggling with getting my WRT54G V1.1 to work with a static IP address behind this silly Netopia router from SBC.&nbsp; The Netopia was configured fine and I was able to get any PC I wanted to wrork with a static IP.&nbsp; When I tried to configure my LinkSys box, it couldn&#039;t talk out the WAN side and I could ping its WAN interface from oter machines on that same side of the network.</p><p>I tried a bunch of stuff and didn&#039;t notice anything odd.&nbsp; Then I decided to re-flash using the web interface with the jffs and nvram boxes checked.&nbsp; I wanted a fresh start.&nbsp; Being a jackass, I also chose a different image - the wrt54g image from the pptp folder &#039;cause that&#039;s kinda what I wanted anyway...</p><p>The box came up fine.&nbsp; When I did an nvram show, the above output came up!&nbsp; I did a get on boot_date and wl0_ifname - and those settings individually came out with their respective apparently corrupted output.</p><p>So I did another web interface flash with the boxes checked - only this time I used the regular image instead of the pptp image.&nbsp; Same deal - EXACTLY.</p><p>I then issued &quot;mtd -r erase nvram&quot;, rebooted, and saw sane looking nvram.</p><p>Enjoy.</p><p>-Saro</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>