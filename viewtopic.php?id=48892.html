<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> How to add another four LAN port for WR703N?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 4 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p225008">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">9crk</div>
					<div class="post-datetime">
						10 Feb 2014, 16:48					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;v got a board with five ethernet port, AR9331 as CPU.</p><p>but when I execute &#039;make menuconfig&#039; ,it seems have no other board to choose which supports four LAN port.</p><p>such like WR740Nv5, it doese have five wired ports, but I can&#039;t find it in openwrt.(actually, it only have v1 and v3, no v5.)</p><p>how could I generate an firmware which support 4LAN+1WAN ?</p><p>any help or advice will be appreciated..thanks alot!!</p>											<p class="post-edited">(Last edited by <strong>9crk</strong> on 10 Feb 2014, 16:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225044">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">9crk</div>
					<div class="post-datetime">
						11 Feb 2014, 02:37					</div>
				</div>
				<div class="post-content content">
					<p>had I described myself clear? I&#039;m not quiet good at English....</p><p>anyone know how to figure this out?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225057">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">neryba</div>
					<div class="post-datetime">
						11 Feb 2014, 10:19					</div>
				</div>
				<div class="post-content content">
					<p>AR9331 have only two real ports. One of them have integrated 4 port switch( +1 port for CPU).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225059">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">9crk</div>
					<div class="post-datetime">
						11 Feb 2014, 10:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>neryba wrote:</cite><blockquote><p>AR9331 have only two real ports. One of them have integrated 4 port switch( +1 port for CPU).</p></blockquote></div><p>How to use the switch ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225070">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">neryba</div>
					<div class="post-datetime">
						11 Feb 2014, 13:39					</div>
				</div>
				<div class="post-content content">
					<p>here is one example how dmesg indicate the switch. </p><div class="codebox"><pre><code>eth0: Atheros AG71xx at 0xb9000000, irq 4, mode:MII
ag71xx ag71xx.0 eth0: connected to PHY at ag71xx-mdio.1:04 [uid=004dd041, driver=Generic PHY]
eth1: Atheros AG71xx at 0xba000000, irq 5, mode:GMII
eth1: Found an AR7240/AR9330 built-in switch</code></pre></div><p>all 4 ports working like one eth1. if you plan use every port separately you need to create vlans and configure switch port to own vlan. By default all ports in VLAN0 (or VLAN1 depend on OpenWRT version). <a href="http://wiki.openwrt.org/doc/uci/network/switch">http://wiki.openwrt.org/doc/uci/network/switch</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225108">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">9crk</div>
					<div class="post-datetime">
						12 Feb 2014, 02:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>neryba wrote:</cite><blockquote><p>here is one example how dmesg indicate the switch. </p><div class="codebox"><pre><code>eth0: Atheros AG71xx at 0xb9000000, irq 4, mode:MII
ag71xx ag71xx.0 eth0: connected to PHY at ag71xx-mdio.1:04 [uid=004dd041, driver=Generic PHY]
eth1: Atheros AG71xx at 0xba000000, irq 5, mode:GMII
eth1: Found an AR7240/AR9330 built-in switch</code></pre></div><p>all 4 ports working like one eth1. if you plan use every port separately you need to create vlans and configure switch port to own vlan. By default all ports in VLAN0 (or VLAN1 depend on OpenWRT version). <a href="http://wiki.openwrt.org/doc/uci/network/switch">http://wiki.openwrt.org/doc/uci/network/switch</a></p></blockquote></div><br /><p>I can&#039;t find this information in mine</p><p>[ 0.000000] Linux version 3.3.8 (zhouhua@zlgmcu) (gcc version 4.6.3 20120201 (prerelease) (Linaro GCC 4.6-2012.02) ) #8 Tue Feb 11 16:42:30 CST 2014<br />[ 0.000000] bootconsole [early0] enabled<br />[ 0.000000] CPU revision is: 00019374 (MIPS 24Kc)<br />[ 0.000000] SoC: Atheros AR9330 rev 1<br />[ 0.000000] Clocks: CPU:400.000MHz, DDR:400.000MHz, AHB:200.000MHz, Ref:25.000MHz<br />[ 0.000000] Determined physical RAM map:<br />[ 0.000000] memory: 04000000 @ 00000000 (usable)<br />[ 0.000000] Initrd not found or empty - disabling initrd<br />[ 0.000000] Zone PFN ranges:<br />[ 0.000000] Normal 0x00000000 -&gt; 0x00004000<br />[ 0.000000] Movable zone start PFN for each node<br />[ 0.000000] Early memory PFN ranges<br />[ 0.000000] 0: 0x00000000 -&gt; 0x00004000<br />[ 0.000000] Built 1 zonelists in Zone order, mobility grouping on. Total pages: 16256<br />[ 0.000000] Kernel command line: board=TL-WR703N console=ttyATH0,115200 rootfstype=squashfs,jffs2 noinitrd<br />[ 0.000000] PID hash table entries: 256 (order: -2, 1024 bytes)<br />[ 0.000000] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)<br />[ 0.000000] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)<br />[ 0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.<br />[ 0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes<br />[ 0.000000] Writing ErrCtl register=00000000<br />[ 0.000000] Readback ErrCtl register=00000000<br />[ 0.000000] Memory: 61620k/65536k available (2103k kernel code, 3916k reserved, 401k data, 208k init, 0k highmem)<br />[ 0.000000] SLUB: Genslabs=9, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br />[ 0.000000] NR_IRQS:51<br />[ 0.000000] Calibrating delay loop... 265.42 BogoMIPS (lpj=1327104)<br />[ 0.080000] pid_max: default: 32768 minimum: 301<br />[ 0.080000] Mount-cache hash table entries: 512<br />[ 0.090000] NET: Registered protocol family 16<br />[ 0.090000] gpiochip_add: registered GPIOs 0 to 29 on device: ath79<br />[ 0.100000] MIPS: machine is TP-LINK TL-WR703N v1<br />[ 0.350000] bio: create slab &lt;bio-0&gt; at 0<br />[ 0.360000] Switching to clocksource MIPS<br />[ 0.360000] NET: Registered protocol family 2<br />[ 0.370000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />[ 0.370000] TCP established hash table entries: 2048 (order: 2, 16384 bytes)<br />[ 0.370000] TCP bind hash table entries: 2048 (order: 1, 8192 bytes)<br />[ 0.380000] TCP: Hash tables configured (established 2048 bind 2048)<br />[ 0.390000] TCP reno registered<br />[ 0.390000] UDP hash table entries: 256 (order: 0, 4096 bytes)<br />[ 0.400000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br />[ 0.400000] NET: Registered protocol family 1<br />[ 0.430000] squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />[ 0.430000] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.<br />[ 0.440000] msgmni has been set to 120<br />[ 0.440000] io scheduler noop registered<br />[ 0.450000] io scheduler deadline registered (default)<br />[ 0.450000] Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled<br />[ 0.460000] ar933x-uart: ttyATH0 at MMIO 0x18020000 (irq = 11) is a AR933X UART<br />[ 0.470000] console [ttyATH0] enabled, bootconsole disabled<br />[ 0.470000] console [ttyATH0] enabled, bootconsole disabled<br />[ 0.480000] m25p80 spi0.0: found mx25l6405d, expected m25p80<br />[ 0.480000] m25p80 spi0.0: mx25l6405d (8192 Kbytes)<br />[ 0.490000] 5 tp-link partitions found on MTD device spi0.0<br />[ 0.500000] Creating 5 MTD partitions on &quot;spi0.0&quot;:<br />[ 0.500000] 0x000000000000-0x000000020000 : &quot;u-boot&quot;<br />[ 0.510000] 0x000000020000-0x0000000fff20 : &quot;kernel&quot;<br />[ 0.510000] mtd: partition &quot;kernel&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only<br />[ 0.520000] 0x0000000fff20-0x0000007f0000 : &quot;rootfs&quot;<br />[ 0.530000] mtd: partition &quot;rootfs&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only<br />[ 0.540000] mtd: partition &quot;rootfs&quot; set to be root filesystem<br />[ 0.550000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=6A0000, len=150000 <br />[ 0.560000] 0x0000006a0000-0x0000007f0000 : &quot;rootfs_data&quot;<br />[ 0.560000] 0x0000007f0000-0x000000800000 : &quot;art&quot;<br />[ 0.570000] 0x000000020000-0x0000007f0000 : &quot;firmware&quot;<br />[ 0.590000] ag71xx_mdio: probed<br />[ 0.600000] eth0: Atheros AG71xx at 0xb9000000, irq 4<br />[ 1.150000] ag71xx ag71xx.0: eth0: connected to PHY at ag71xx-mdio.1:04 [uid=004dd041, driver=Generic PHY]<br />[ 1.160000] TCP cubic registered<br />[ 1.160000] NET: Registered protocol family 17<br />[ 1.170000] 8021q: 802.1Q VLAN Support ~1.8<br />[ 1.170000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.<br />[ 1.180000] Freeing unused kernel memory: 208k freed<br />- preinit -<br />Press the [f] key and hit [enter] to enter failsafe mode<br />- regular preinit -<br />jffs2 not ready yet; using ramdisk<br />- init -<br />[ 9.110000] Compat-drivers backport release: compat-drivers-2012-09-04-2-gddac993<br />[ 9.110000] Backport based on wireless-testing.git master-2012-09-07<br />[ 9.120000] compat.git: wireless-testing.git<br />[ 9.320000] cfg80211: Calling CRDA to update world regulatory domain<br />[ 9.320000] cfg80211: World regulatory domain updated:<br />[ 9.330000] cfg80211: (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />[ 9.330000] cfg80211: (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[ 9.340000] cfg80211: (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)<br />[ 9.350000] cfg80211: (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)<br />[ 9.360000] cfg80211: (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[ 9.360000] cfg80211: (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[ 9.630000] NET: Registered protocol family 10<br />[ 10.310000] cfg80211: World regulatory domain updated:<br />[ 10.310000] cfg80211: (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />[ 10.320000] cfg80211: (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[ 10.330000] cfg80211: (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)<br />[ 10.340000] cfg80211: (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)<br />[ 10.340000] cfg80211: (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[ 10.350000] cfg80211: (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[ 10.490000] SCSI subsystem initialized<br />[ 10.670000] usbcore: registered new interface driver usbfs<br />[ 10.680000] usbcore: registered new interface driver hub<br />[ 10.680000] usbcore: registered new device driver usb<br />[ 11.370000] ieee80211 phy0: Atheros AR9330 Rev:1 mem=0xb8100000, irq=2<br />[ 11.370000] cfg80211: Calling CRDA for country: US<br />[ 11.380000] cfg80211: Regulatory domain changed to country: US<br />[ 11.380000] cfg80211: (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />[ 11.390000] cfg80211: (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2700 mBm)<br />[ 11.400000] cfg80211: (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 1700 mBm)<br />[ 11.410000] cfg80211: (5250000 KHz - 5330000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[ 11.420000] cfg80211: (5490000 KHz - 5600000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[ 11.420000] cfg80211: (5650000 KHz - 5710000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[ 11.430000] cfg80211: (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 3000 mBm)<br />[ 11.450000] Button Hotplug driver version 0.4.1<br />[ 11.530000] tun: Universal TUN/TAP device driver, 1.6<br />[ 11.530000] tun: (C) 1999-2004 Max Krasnyansky &lt;maxk@qualcomm.com&gt;<br />Failed to set regulatory domain: -1<br />[ 11.680000] IPv6 over IPv4 tunneling driver<br />[ 12.020000] ip_tables: (C) 2000-2006 Netfilter Core Team<br />[ 12.410000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver<br />[ 12.410000] ehci-platform ehci-platform: Generic Platform EHCI Controller<br />[ 12.420000] ehci-platform ehci-platform: new USB bus registered, assigned bus number 1<br />[ 12.450000] ehci-platform ehci-platform: irq 3, io mem 0x1b000000<br />[ 12.470000] ehci-platform ehci-platform: USB 2.0 started, EHCI 1.00<br />[ 12.470000] hub 1-0:1.0: USB hub found<br />[ 12.470000] hub 1-0:1.0: 1 port detected<br />[ 12.500000] nf_conntrack version 0.5.0 (966 buckets, 3864 max)<br />[ 13.070000] xt_time: kernel timezone is -0000<br />[ 13.290000] ip6_tables: (C) 2000-2006 Netfilter Core Team<br />[ 13.530000] NF_TPROXY: Transparent proxy support initialized, version 4.1.0<br />[ 13.530000] NF_TPROXY: Copyright (c) 2006-2007 BalaBit IT Ltd.<br />[ 13.870000] usbcore: registered new interface driver cdc_acm<br />[ 13.880000] cdc_acm: USB Abstract Control Model driver for USB modems and ISDN adapters<br />[ 13.990000] usbcore: registered new interface driver usbserial<br />[ 13.990000] USB Serial support registered for generic<br />[ 14.000000] usbcore: registered new interface driver usbserial_generic<br />[ 14.000000] usbserial: USB Serial Driver core<br />[ 14.140000] Initializing USB Mass Storage driver...<br />[ 14.140000] usbcore: registered new interface driver usb-storage<br />[ 14.150000] USB Mass Storage support registered.<br />[ 14.260000] Error: Driver &#039;gpio-keys-polled&#039; is already registered, aborting...<br />[ 14.290000] USB Serial support registered for FTDI USB Serial Device<br />[ 14.300000] usbcore: registered new interface driver ftdi_sio<br />[ 14.300000] ftdi_sio: v1.6.0:USB FTDI Serial Converters Driver</p><p>Please press Enter to activate this console. [ 18.390000] ADDRCONF(NETDEV_UP): eth0: link is not ready<br />[ 19.840000] ADDRCONF(NETDEV_UP): eth0: link is not ready<br />[ 19.840000] device eth0 entered promiscuous mode<br />[ 19.850000] ADDRCONF(NETDEV_UP): br-lan: link is not ready<br />[ 46.580000] jffs2_scan_eraseblock(): End of filesystem marker found at 0x0<br />[ 46.600000] jffs2_build_filesystem(): unlocking the mtd device... done.<br />[ 46.600000] jffs2_build_filesystem(): erasing all blocks after the end marker... done.<br />[ 54.630000] JFFS2 notice: (1404) jffs2_build_xattr_subsystem: complete building xattr subsystem, 0 of xdatum (0 unchecked, 0 orphan) and 0 of xref (0 dead, 0 orphan) found.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225111">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">9crk</div>
					<div class="post-datetime">
						12 Feb 2014, 04:18					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;v fix it! it&#039;s my fault...I didn&#039;t execute &quot;make clean&quot; after I modified the source code...<br />now it works ..thanks neryba..</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>