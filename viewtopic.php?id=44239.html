<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> mtd didn&#039;t work</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 16 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p201945">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">o71</div>
					<div class="post-datetime">
						16 May 2013, 11:50					</div>
				</div>
				<div class="post-content content">
					<p>Hi<br />i have an Arcadyan ARV4518PW i can&#039;t execute this commands to restore my router like in this post<br /></p><div class="quotebox"><cite>Pteridium wrote:</cite><blockquote><div class="quotebox"><cite>o71 wrote:</cite><blockquote><p>i think the error in this lines </p><p>[&nbsp; &nbsp;23.652000] ath5k 0000:00:0e.0: registered as &#039;phy0&#039;<br />[&nbsp; &nbsp;24.688000] ath5k: phy0: unable to init EEPROM<br />[&nbsp; &nbsp;24.692000] ath5k: probe of 0000:00:0e.0 failed with error -5</p></blockquote></div><p>You are right: the last partition of the flash (where lies the MAC and the wifi calibration data) is empty or corrupted. No problem, because can be easily &quot;patched&quot;.<br />The link contains a backup of the last partition (if you haven&#039;t it) of an ARV4518PW. Simply copy the file in the router and execute &quot;mtd -r write (file_name_and_path) board_config&quot; and wifi working after reboot.<br /><a href="http://www.mediafire.com/?6d1t67pm2b0cm92">http://www.mediafire.com/?6d1t67pm2b0cm92</a></p><p>The partition backup comes with a mac that begins with 00 22 2D. The mac belonged to a dead router so could be used without problems, but i think it&#039;s better change it. With any hexadecimal editor open the file, go to offset 16 a write your router&#039;s mac.</p><p>Good luck!</p></blockquote></div><br /><p>root@OpenWrt:/# mtd -r write arv4518_MAC_2.bin board_config<br />Unlocking board_config ...<br />Writing from arv4518_MAC_2.bin to board_config ...&nbsp; [e]Failed to erase block<br />root@OpenWrt:/#</p><p>PS : i used this commands but it&#039;s the some thing<br />root@OpenWrt:/# mtd unlock&nbsp; board_config<br />Unlocking board_config ...<br />root@OpenWrt:/#<br />root@OpenWrt:/# dd if=/tmp/arv4518_MAC_2.bin of=/dev/mtd6<br />dd: writing &#039;/dev/mtd6&#039;: No space left on device<br />128+1 records in<br />128+0 records out<br />root@OpenWrt:/# mtd -f write arv4518_MAC_2.bin&nbsp; board_config<br />Unlocking board_config ...<br />Writing from arv4518_MAC_2.bin to board_config ...&nbsp; [e]Failed to erase block<br />root@OpenWrt:/#<br />root@OpenWrt:/# mtd -e board_config write arv4518_MAC_2.bin&nbsp; board_config<br />Unlocking board_config ...<br />Erasing board_config ...<br />Writing from arv4518_MAC_2.bin to board_config ...&nbsp; [e]Failed to erase block</p><p>plz if you can save me white a solution</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>