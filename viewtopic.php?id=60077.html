<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Bandwidthd and Chaos Calmer: not there!</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 6 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p294520">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">jmlacroix</div>
					<div class="post-datetime">
						3 Oct 2015, 23:27					</div>
				</div>
				<div class="post-content content">
					<p>In the previous version of openWRT (Barrier Breaker) the package Bandwidthd was available.&nbsp; I know that Bandwidthd can take a lot of resources on a router and maybe not ideal if the CPU is not fast enough and the memory is limited.</p><p>I acquired a WRT1900AC, to eventually replace some hardware that I have, and one thing that I wanted to use was to put Bandwidthd on it to replace a managed switch and a laptop that is currently monitoring my network with Bandwidthd.&nbsp; Currently that does not seem to be an option with Chaos Calmer as the package is not present anymore!</p><p>Can somebody tell me if there is a reason the package is not built anymore in Chaos Calmer (technical reason, incompatibility, people are not using it, etc.).</p><p>I do not mind looking around to built it myself if I have too (although I would have a little learning curve to install all I need to do that), but first I would like to know if it would be worth the time: if Bandwidthd cannot be built for Chaos Calmer, then I will not invest the time to do it!</p><p>To solve the problem of using too much resource on the openWRT router, Bandwidthd on a Linux system can use a postgresql database to store the data and a web server with PHP can actually use the data in the database and built the graphs that can be accessed with a web browser: the openWRT router just has to collect the data and save it to the server and does not need to analyze the data.&nbsp; I wonder it this was possible with the package on Barrier Breaker.&nbsp; The rouiter probably needs to have a postgresql client package, which seems to exists on Chaos Calmer, unless I am wrong.</p><p>If somebody has some knowledge about this, I would appreciate the input.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p294538">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Napsi-GER-</div>
					<div class="post-datetime">
						4 Oct 2015, 00:56					</div>
				</div>
				<div class="post-content content">
					<p>Hello jmlacroix,</p><p>have a look at <a href="https://forum.openwrt.org/viewtopic.php?id=52219">this</a>.<br />Bandwidth is in the oldpackage feed, since it is not maintained any further.<br />The oldpackage feed isn&#039;t build for CC so you have to build your own one for CC, or stay on BB (and enable the oldpackage in opkg.conf, can&#039;t remember if it is).</p><p>Napsi-GER-</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p294550">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">jmlacroix</div>
					<div class="post-datetime">
						4 Oct 2015, 02:30					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Napsi-GER- wrote:</cite><blockquote><p>Hello jmlacroix,</p><p>have a look at <a href="https://forum.openwrt.org/viewtopic.php?id=52219">this</a>.<br />Bandwidth is in the oldpackage feed, since it is not maintained any further.<br />The oldpackage feed isn&#039;t build for CC so you have to build your own one for CC, or stay on BB (and enable the oldpackage in opkg.conf, can&#039;t remember if it is).</p><p>Napsi-GER-</p></blockquote></div><p>Thank you very much for the information: I will look at this carefully and see what I can do!&nbsp; The info in the link is very usefull, and I will learn a lot!</p><p>Thanks again!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p294555">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Napsi-GER-</div>
					<div class="post-datetime">
						4 Oct 2015, 03:06					</div>
				</div>
				<div class="post-content content">
					<p>Hello again jmlacroix,</p><p>as i didn&#039;t state any alternatives for bandwidth in my previous post, i will do now:<br />An alternative for bandwidth can be either &quot;<a href="http://wiki.openwrt.org/doc/howto/vnstat">vnstat</a>&quot; (small), or &quot;<a href="http://wiki.openwrt.org/doc/howto/statistic.collectd">collectd</a>&quot; with the appropriate sub-modules as &quot;collectd-mod-interface&quot; and &quot;collectd-mod-iwinfo&quot; (depending on installed sub-modules, a lot bigger).<br />I use both on an TL-WR1043ND and Archer C7 and am happy with them, especially that they are supported by LuCI.<br />But i would prefer collectd, since it is more powerful and can be extended by installing said sub-modules.</p><p>Napsi-GER-</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p294558">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">jmlacroix</div>
					<div class="post-datetime">
						4 Oct 2015, 03:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Napsi-GER- wrote:</cite><blockquote><p>Hello again jmlacroix,</p><p>as i didn&#039;t state any alternatives for bandwidth in my previous post, i will do now:<br />An alternative for bandwidth can be either &quot;<a href="http://wiki.openwrt.org/doc/howto/vnstat">vnstat</a>&quot; (small), or &quot;<a href="http://wiki.openwrt.org/doc/howto/statistic.collectd">collectd</a>&quot; with the appropriate sub-modules as &quot;collectd-mod-interface&quot; and &quot;collectd-mod-iwinfo&quot; (depending on installed sub-modules, a lot bigger).<br />I use both on an TL-WR1043ND and Archer C7 and am happy with them, especially that they are supported by LuCI.<br />But i would prefer collectd, since it is more powerful and can be extended by installing said sub-modules.</p><p>Napsi-GER-</p></blockquote></div><p>Yes: I will look at these alternative before going to get Bandwidthd on my router with CC, as this is not a minor task!</p><p>I like Bandwidthd in my current settup on my network,as it does the job that I asking for, but there is nothing that says that something else would not work as well, if not better.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p295299">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">jmlacroix</div>
					<div class="post-datetime">
						8 Oct 2015, 17:47					</div>
				</div>
				<div class="post-content content">
					<p>OK: I was able to compile and install the Bandwidthd package for Chaos Calmer on a TL-WDR3600 (ar71xx).&nbsp; I took the Bandwidthd package in the oldpackages, setup a proper environment on a CentOS 6.4 system, set it up according to the various wiki available, compiled Bandwidthd with the proper dependency, installed it on a TL-WDR3600 router that runs Chaos Calmer and it is working fine!&nbsp; It is not using too much CPU (4 % or less), but this router is just setup as a testing unit and very little traffic goes through it: if a lot of traffic was going through it, the CPU usage may be quite different!&nbsp; With a lot of data, the graph generation maybe be quite demanding on the CPU.</p><p>But, I cannot linked it to a postgresql database, as the elements required in the bandwidthd package in oldpackages are excluded from the compilation and therefore cannot work.&nbsp; A different makefile will have to be built in order to compile the required element in bandwidthd.&nbsp; As the package is not maintained anymore, I guess that this will be my job to figure out what to do and do it!</p><p>So, back to the learning curve to learn how to do that (I have not looked seriously yet, as I achieved what is described above last evening and I did not have the time today to look at it).</p><p>I somebody wants to give me pointers where I should look to take the package in git and modify it, please do not hesitate to do so!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p295357">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Degeneratescum</div>
					<div class="post-datetime">
						9 Oct 2015, 00:47					</div>
				</div>
				<div class="post-content content">
					<p>Good work... Now please consider adopting the package as maintainer!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p295488">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">jmlacroix</div>
					<div class="post-datetime">
						9 Oct 2015, 20:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Degeneratescum wrote:</cite><blockquote><p>Good work... Now please consider adopting the package as maintainer!</p></blockquote></div><p>I am willing to do that if I can!&nbsp; I did not have much time yesterday to read about being a maintainer for a package, but I am willing to look around!</p><p>I got the source code of bandwidthd yesterday on my CentOS system and I have the makefile patch file from the OpenWrt package: I need to look at all that, learn what all that means and play around to try to modify the makefile and patch file of OpenWrt for bandwidthd to be able to compile something that would actually make something and not crash the unit!&nbsp; There is some level of learning curve for me in that!&nbsp; But, with time and effort, I am sure I can reach that goal.</p><p>Is there a good OpenWrt wiki to start with?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p295490">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						9 Oct 2015, 20:42					</div>
				</div>
				<div class="post-content content">
					<p>HI JM,</p><p><a href="http://wiki.openwrt.org/start">http://wiki.openwrt.org/start</a></p><p>I as a wiki admin are interested in your feedback regarding usage of the wiki. You seem to be new to OpenWrt and the wiki, and your impressions are fresh. Please share your experience, so we can make the wiki better and more userfriendly.</p><p>There are currently two forum threads where wiki improvements are discussed:<br />1) <a href="https://forum.openwrt.org/viewtopic.php?id=56521">Improve the Wiki Table of Hardware</a> *<br />2) <a href="https://forum.openwrt.org/viewtopic.php?id=57101">Initiative to improve OpenWrt documentation</a></p><p>Feel invited to post your experiences, positive and negative, in one of the above threads!</p><p>*) <a href="http://wiki.openwrt.org/toh/start">http://wiki.openwrt.org/toh/start</a> or <a href="http://wiki.openwrt.org/toh/views/start">http://wiki.openwrt.org/toh/views/start</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p295517">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">i.trankolov</div>
					<div class="post-datetime">
						10 Oct 2015, 00:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jmlacroix wrote:</cite><blockquote><p>OK: I was able to compile and install the Bandwidthd package for Chaos Calmer on a TL-WDR3600 (ar71xx).&nbsp; I took the Bandwidthd package in the oldpackages, setup a proper environment on a CentOS 6.4 system, set it up according to the various wiki available, compiled Bandwidthd with the proper dependency, installed it on a TL-WDR3600 router that runs Chaos Calmer and it is working fine!&nbsp; It is not using too much CPU (4 % or less), but this router is just setup as a testing unit and very little traffic goes through it: if a lot of traffic was going through it, the CPU usage may be quite different!&nbsp; With a lot of data, the graph generation maybe be quite demanding on the CPU.</p><p>But, I cannot linked it to a postgresql database, as the elements required in the bandwidthd package in oldpackages are excluded from the compilation and therefore cannot work.&nbsp; A different makefile will have to be built in order to compile the required element in bandwidthd.&nbsp; As the package is not maintained anymore, I guess that this will be my job to figure out what to do and do it!</p><p>So, back to the learning curve to learn how to do that (I have not looked seriously yet, as I achieved what is described above last evening and I did not have the time today to look at it).</p><p>I somebody wants to give me pointers where I should look to take the package in git and modify it, please do not hesitate to do so!</p></blockquote></div><p>Can you share the compiled package?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p295940">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">jmlacroix</div>
					<div class="post-datetime">
						13 Oct 2015, 20:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>i.trankolov wrote:</cite><blockquote><p>Can you share the compiled package?</p></blockquote></div><p>Sorry: I just saw the post: I have been pretty busy lately, and I forgot to subscribe to the topic.</p><p>It is for ar71xx on CC:</p><p>-rw-r--r--. 1 lacroix users 31958 Oct&nbsp; 7 15:20 bandwidthd_2.0.1-4_ar71xx.ipk</p><p>I sure can share it, but I am not sure the best way to do that!</p>											<p class="post-edited">(Last edited by <strong>jmlacroix</strong> on 13 Oct 2015, 20:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p296321">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">jmlacroix</div>
					<div class="post-datetime">
						16 Oct 2015, 22:09					</div>
				</div>
				<div class="post-content content">
					<p>Just to let you know that the package bandwidthd is now in the trunk build (I am now the maintainer it seems): I saw it in built made on Oct. 16 (ex: <a href="https://downloads.openwrt.org/snapshots/trunk/at91/generic/packages/packages/).">https://downloads.openwrt.org/snapshots … ackages/).</a></p><p>This weekend, I will put in place the git pull request to have it in the 15.05 branch in git: I will let know when it will be there.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p296322">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						16 Oct 2015, 22:27					</div>
				</div>
				<div class="post-content content">
					<p>It is in the trunk alright, but not compilable.<br /></p><div class="codebox"><pre><code>make[2]: Entering directory `/opt/openwrt-git-trunk/feeds/packages/utils/bandwidthd&#039;
rm -f /opt/openwrt-git-trunk/staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/stamp/.bandwidthd_installed
(cd /opt/openwrt-git-trunk/build_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/bandwidthd-2.0.1/./; if [ -x ./configure ]; then find /opt/openwrt-git-trunk/build_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/bandwidthd-2.0.1/ -name config.guess | xargs -r chmod u+w; find /opt/openwrt-git-trunk/build_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/bandwidthd-2.0.1/ -name config.guess | xargs -r -n1 cp --remove-destination /opt/openwrt-git-trunk/scripts/config.guess; find /opt/openwrt-git-trunk/build_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/bandwidthd-2.0.1/ -name config.sub | xargs -r chmod u+w; find /opt/openwrt-git-trunk/build_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/bandwidthd-2.0.1/ -name config.sub | xargs -r -n1 cp --remove-destination /opt/openwrt-git-trunk/scripts/config.sub; AR=&quot;arm-openwrt-linux-uclibcgnueabi-gcc-ar&quot; AS=&quot;arm-openwrt-linux-uclibcgnueabi-gcc -c -O2 -pipe -march=armv6k -mtune=mpcore -fno-caller-saves -fhonour-copts -Wno-error=unused-but-set-variable -mfloat-abi=soft -Wformat -Werror=format-security -D_FORTIFY_SOURCE=1 -Wl,-z,relro&quot; LD=arm-openwrt-linux-uclibcgnueabi-ld NM=&quot;arm-openwrt-linux-uclibcgnueabi-gcc-nm&quot; CC=&quot;arm-openwrt-linux-uclibcgnueabi-gcc&quot; GCC=&quot;arm-openwrt-linux-uclibcgnueabi-gcc&quot; CXX=&quot;arm-openwrt-linux-uclibcgnueabi-g++&quot; RANLIB=&quot;arm-openwrt-linux-uclibcgnueabi-gcc-ranlib&quot; STRIP=arm-openwrt-linux-uclibcgnueabi-strip OBJCOPY=arm-openwrt-linux-uclibcgnueabi-objcopy OBJDUMP=arm-openwrt-linux-uclibcgnueabi-objdump SIZE=arm-openwrt-linux-uclibcgnueabi-size CFLAGS=&quot;-O2 -pipe -march=armv6k -mtune=mpcore -fno-caller-saves -fhonour-copts -Wno-error=unused-but-set-variable -mfloat-abi=soft -Wformat -Werror=format-security -D_FORTIFY_SOURCE=1 -Wl,-z,relro -I/opt/openwrt-git-trunk/staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/usr/include -I/opt/openwrt-git-trunk/staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/include -I/opt/openwrt-git-trunk/staging_dir/toolchain-arm_mpcore_gcc-4.8-linaro_uClibc-0.9.33.2_eabi/usr/include -I/opt/openwrt-git-trunk/staging_dir/toolchain-arm_mpcore_gcc-4.8-linaro_uClibc-0.9.33.2_eabi/include&quot; CXXFLAGS=&quot;-O2 -pipe -march=armv6k -mtune=mpcore -fno-caller-saves -fhonour-copts -Wno-error=unused-but-set-variable -mfloat-abi=soft -Wformat -Werror=format-security -D_FORTIFY_SOURCE=1 -Wl,-z,relro -I/opt/openwrt-git-trunk/staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/usr/include -I/opt/openwrt-git-trunk/staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/include -I/opt/openwrt-git-trunk/staging_dir/toolchain-arm_mpcore_gcc-4.8-linaro_uClibc-0.9.33.2_eabi/usr/include -I/opt/openwrt-git-trunk/staging_dir/toolchain-arm_mpcore_gcc-4.8-linaro_uClibc-0.9.33.2_eabi/include&quot; CPPFLAGS=&quot;-I/opt/openwrt-git-trunk/staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/usr/include -I/opt/openwrt-git-trunk/staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/include -I/opt/openwrt-git-trunk/staging_dir/toolchain-arm_mpcore_gcc-4.8-linaro_uClibc-0.9.33.2_eabi/usr/include -I/opt/openwrt-git-trunk/staging_dir/toolchain-arm_mpcore_gcc-4.8-linaro_uClibc-0.9.33.2_eabi/include &quot; LDFLAGS=&quot;-L/opt/openwrt-git-trunk/staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/usr/lib -L/opt/openwrt-git-trunk/staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/lib -L/opt/openwrt-git-trunk/staging_dir/toolchain-arm_mpcore_gcc-4.8-linaro_uClibc-0.9.33.2_eabi/usr/lib -L/opt/openwrt-git-trunk/staging_dir/toolchain-arm_mpcore_gcc-4.8-linaro_uClibc-0.9.33.2_eabi/lib -zrelro -L/opt/openwrt-git-trunk/staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/usr/lib -L/opt/openwrt-git-trunk/staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/lib -L/opt/openwrt-git-trunk/staging_dir/toolchain-arm_mpcore_gcc-4.8-linaro_uClibc-0.9.33.2_eabi/usr/lib -L/opt/openwrt-git-trunk/staging_dir/toolchain-arm_mpcore_gcc-4.8-linaro_uClibc-0.9.33.2_eabi/lib -zrelro -Wl,-rpath-link,/opt/openwrt-git-trunk/staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/usr/lib&quot;   ./configure --target=arm-openwrt-linux --host=arm-openwrt-linux --build=x86_64-linux-gnu --program-prefix=&quot;&quot; --program-suffix=&quot;&quot; --prefix=/usr --exec-prefix=/usr --bindir=/usr/bin --sbindir=/usr/sbin --libexecdir=/usr/lib --sysconfdir=/etc --datadir=/usr/share --localstatedir=/var --mandir=/usr/man --infodir=/usr/info    ac_cv_file__sw_lib=no ac_cv_file__sw_include=no ac_cv_file__usr_pkg_lib=no ac_cv_file__usr_pkg_include=no ac_cv_file__usr_local_pgsql_lib=no ac_cv_file__usr_local_pgsql_include=no ac_cv_lib_pq_PQconnectdb=no  ; fi; )
configure: loading site script /opt/openwrt-git-trunk/include/site/arm
checking build system type... x86_64-pc-linux-gnu
checking host system type... arm-openwrt-linux-gnu
checking for bison... bison -y
checking for arm-openwrt-linux-gcc... arm-openwrt-linux-uclibcgnueabi-gcc
checking for C compiler default output... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... yes
checking for executable suffix... 
checking for object suffix... o
checking whether we are using the GNU C compiler... yes
checking whether arm-openwrt-linux-uclibcgnueabi-gcc accepts -g... yes
checking for a BSD compatible install... /usr/bin/install -c
checking for flex... flex
checking for yywrap in -lfl... no
checking for yywrap in -ll... no
checking lex output file root... lex.yy
checking whether yytext is a pointer... no
checking how to run the C preprocessor... arm-openwrt-linux-uclibcgnueabi-gcc -E
checking for X... no
checking for /sw/lib... (cached) no
checking for /sw/include... (cached) no
checking for /usr/pkg/lib... (cached) no
checking for /usr/pkg/include... (cached) no
checking for connect in -lsocket... no
checking for gethostbyname in -lnsl... yes
checking for inet_aton in -lresolv... yes
checking for pow in -lm... yes
checking for libiconv_open in -liconv... no
checking for png_read_info in -lpng... yes
checking for gdImageCreate in -lgd... no
configure: error: Bandwidthd requires but cannot find libgd
make[2]: *** [/opt/openwrt-git-trunk/build_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/bandwidthd-2.0.1/.configured] Error 1
make[2]: Leaving directory `/opt/openwrt-git-trunk/feeds/packages/utils/bandwidthd&#039;
make[1]: *** [package/feeds/packages/bandwidthd/compile] Error 2
make[1]: Leaving directory `/opt/openwrt-git-trunk&#039;
make: *** [package/bandwidthd/compile] Error 2
228.586u+45.006s=5:47.91e(78.6%) TDSavg=0k+0k+0k max=385796k 100240+599808io 284pf+0sw
[debian@debian:/opt/openwrt-git-trunk 983%] ~</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p296498">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">jmlacroix</div>
					<div class="post-datetime">
						18 Oct 2015, 16:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mazilo wrote:</cite><blockquote><p>It is in the trunk alright, but not compilable.<br /></p><div class="codebox"><pre><code>configure: error: Bandwidthd requires but cannot find libgd</code></pre></div></blockquote></div><p>This is odd: the compiler did not find the library libgd.&nbsp; This is a standard package in the default feed (<a href="https://github.com/openwrt/packages">https://github.com/openwrt/packages</a>): the same place where bandwidthd is (although in a different directory: libs instead of utils).&nbsp; I do not really know why you got that message!</p><p>I will try on my end to see where the problem may be: it may take me a few days as I have other commitments today and tomorrow!</p>											<p class="post-edited">(Last edited by <strong>jmlacroix</strong> on 18 Oct 2015, 17:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p296513">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						18 Oct 2015, 20:21					</div>
				</div>
				<div class="post-content content">
					<p>I just wanted to show I do have libgd in my STAGING_DIR as shown below:<br /></p><div class="codebox"><pre><code>[debian@debian:/opt/openwrt-git-trunk 1449%] ~ dir staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/usr/lib/{libgd.*,pkgconfig/gdlib.*} staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/usr/include/{entities.h,gdcache.h,gd_color_map.h,gd_errors.h,gdfontg.h,gdfontl.h,gdfontmb.h,gdfonts.h,gdfontt.h,gdfx.h,gd.h,gd_io.h,gdpp.h}
-rw-r--r-- 1 debian users   4930 Oct 17 14:43 staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/usr/include/entities.h
-rw-r--r-- 1 debian users   2898 Oct 17 14:43 staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/usr/include/gdcache.h
-rw-r--r-- 1 debian users    478 Oct 17 14:43 staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/usr/include/gd_color_map.h
-rw-r--r-- 1 debian users   1503 Oct 17 14:43 staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/usr/include/gd_errors.h
-rw-r--r-- 1 debian users    553 Oct 17 14:43 staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/usr/include/gdfontg.h
-rw-r--r-- 1 debian users    551 Oct 17 14:43 staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/usr/include/gdfontl.h
-rw-r--r-- 1 debian users    519 Oct 17 14:43 staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/usr/include/gdfontmb.h
-rw-r--r-- 1 debian users    515 Oct 17 14:43 staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/usr/include/gdfonts.h
-rw-r--r-- 1 debian users    546 Oct 17 14:43 staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/usr/include/gdfontt.h
-rw-r--r-- 1 debian users   2394 Oct 17 14:43 staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/usr/include/gdfx.h
-rw-r--r-- 1 debian users  51205 Oct 17 14:43 staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/usr/include/gd.h
-rw-r--r-- 1 debian users   3125 Oct 17 14:43 staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/usr/include/gd_io.h
-rw-r--r-- 1 debian users  52162 Oct 17 14:43 staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/usr/include/gdpp.h
-rw-r--r-- 1 debian users 446304 Oct 17 14:43 staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/usr/lib/libgd.a
lrwxrwxrwx 1 debian users     14 Oct 17 14:43 staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/usr/lib/libgd.so -&gt; libgd.so.3.0.
0
lrwxrwxrwx 1 debian users     14 Oct 17 14:43 staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/usr/lib/libgd.so.3 -&gt; libgd.so.3.
0.0
-rwxr-xr-x 1 debian users 382416 Oct 17 14:43 staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/usr/lib/libgd.so.3.0.0
-rw-r--r-- 1 debian users    610 Oct 17 14:43 staging_dir/target-arm_mpcore_uClibc-0.9.33.2_eabi/usr/lib/pkgconfig/gdlib.pc
[debian@debian:/opt/openwrt-git-trunk 1450%] ~</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p296536">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">jmlacroix</div>
					<div class="post-datetime">
						19 Oct 2015, 01:47					</div>
				</div>
				<div class="post-content content">
					<p>@mazilo<br />I was able to compile it succesfully for:<br />- ar71XX (bandwidthd_2.0.1-4_ar71xx.ipk)<br />- arm64 (bandwidthd_2.0.1-4_arm64.ipk)</p><p>This is the trunk source.&nbsp; I see that you have uClibc in your file names in the staging_dir: in my case, I have musl (ex: target-mips_34kc_musl-1.1.11).&nbsp; I see the&nbsp; uClibc in the 15:05 build: I am not sure about the difference, but in my case, if I want to built for the 15:05, I have a different build environment (that I made with git clone git://git.openwrt.org/15.05/packages.git), than for trunk (I used git clone git://git.openwrt.org/openwrt.git).</p><p>I do not know whether or not this makes a difference.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p296556">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						19 Oct 2015, 04:57					</div>
				</div>
				<div class="post-content content">
					<p>I also use the OpenWRT git repository. I guessed the difference is between uClibc and MUSL.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p296650">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">jmlacroix</div>
					<div class="post-datetime">
						19 Oct 2015, 22:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mazilo wrote:</cite><blockquote><p>I also use the OpenWRT git repository. I guessed the difference is between uClibc and MUSL.</p></blockquote></div><p>Just to let you know that since I am quite new to openwrt, I have a fresh OpenWrt build system to compile my things (both in CC and trunk).&nbsp; As I was learning, I installed the whole compile system a few times, but now I am properly setup and things compile fine on both the CC and trunk side.&nbsp; In fact for both, I am now using installs from last Saturday: yes quite fresh!</p><p>So I have a fresh OpenWrt build system for both CC and trunk and I do no seem to have problems to compile the bandwidthd package: I did it for 3 different CPUs in trunk and 2 CPUs in 15.05 (a.k.a. CC).</p><p>I have not put bandwidthd&nbsp; in the git 15.05 branch yet, and I am not sure I will.&nbsp; The CC images and packages at <a href="https://downloads.openwrt.org/chaos_calmer/15.05/">https://downloads.openwrt.org/chaos_calmer/15.05/</a> do not seem to be recompiled periodically, therefore having bandwidthd in the 15.05 branch in git would not help the people that cannot compile packages.</p><p>If people wants to have bandwidthd in CC and they have a way to compile packages, they can select the oldpackages in the feeds.conf file that is in their openwrt folder on their OpenWrt build system: just uncomment the line in the feeds.conf file, then issue the ./scripts/feeds update -a command.</p><p>The bandwidthd package that I have in the trunk git is basically the same as in the oldpackages: the Makefile has only been modified to add my name as maintainer and a few other things that do not affect in any regards the compiled package.&nbsp; In other work: whether you take it from oldpackages or from the trunk packages, it will compile fine and give you the same binary packages file (i.e.: the bandwidthd_2.0.1-4_XXXXXX.ipk file).&nbsp; Of course if you compile for trunk, it may be different than if you compile it for CC!</p><p>But, if there are good reasons to put the package in the 15.05 git branch, I can do it!</p>											<p class="post-edited">(Last edited by <strong>jmlacroix</strong> on 19 Oct 2015, 22:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p296667">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						20 Oct 2015, 01:13					</div>
				</div>
				<div class="post-content content">
					<p>I guess I am the only one who has problem compiling the bandwidthd package on the trunk. This means there probably is something wrong with my setup.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>