<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Serial TTL cable for Netgear DG834GB v5</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 6 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p219279">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">weaker</div>
					<div class="post-datetime">
						5 Dec 2013, 21:44					</div>
				</div>
				<div class="post-content content">
					<p>Hi everyone,</p><p>I own a Netgear DG834GB v5 where I performed a simple firmware upgrade via the default browser firmware update procedure. I am also quite sure that I chose the correct firmware file. Long story short: The device is bricked and I want to recover it using a USB-TTL cable.</p><p>Does anyone know if that works for that model?<br /><strong>And most importantly: Where do I have to solder the serial cables?</strong></p><p>Resetting by pressing both buttons for a while does not have any net effect on the situation.</p><p>Upon device bootup it takes a few seconds, then I receive only a few pings before the link dies out again. I tried to tftp the firmware in that very short timeframe (using WinXP and Linux) but it didn&#039;t work. Perhaps no client is waiting for my tftp input.</p><p>Below are some images of the device (large).<br />Btw, I hereby relinquish the copyright to these images and (if you wish) <strong>you may integrate them into the OpenWrt wiki.</strong></p><p><span class="postimg"><img src="http://abload.de/img/pc053140_optwljr8.jpg" alt="Front side Netgear DG834GB v5 board" /></span></p><p><span class="postimg"><img src="http://abload.de/img/pc053141_opto6kdu.jpg" alt="Back side Netgear DG834GB v5 board" /></span></p><p>Cheers<br />weaker</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219310">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">gnag</div>
					<div class="post-datetime">
						6 Dec 2013, 12:23					</div>
				</div>
				<div class="post-content content">
					<p>I see three regions, I would check:&nbsp; <br />1) The vertical aligned pins on the top picture between the network ports and the power-button<br />2) the vertical aligned pins on the top picture left of the barcode sticker, labeled J2<br />3) the six pins in two rows on the lower left corner of the lower picture, labeled TP16 to TP21 (that may bei JTAG)</p><p>follow this recipe: <a href="http://www.devttys0.com/2012/11/reverse-engineering-serial-ports/">http://www.devttys0.com/2012/11/reverse … ial-ports/</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219445">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">weaker</div>
					<div class="post-datetime">
						8 Dec 2013, 17:57					</div>
				</div>
				<div class="post-content content">
					<p>Thank you for your answer! The guide to identify the pins is exactly what I was looking for! This guide seems very elaborate, I will definitely look at that.</p><p>Cheers<br />weaker</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219448">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						8 Dec 2013, 18:22					</div>
				</div>
				<div class="post-content content">
					<p>4 pins near the ethernet ports are a missing usb port for sure <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>serial is on the 6 vertical pins labeled J2.</p><p>i bet rx and tx are on pins 2-5, you see the traces on the back side of pcb.<br />gnd you can find checking for 0 ohm resistance with known ground points (example on power connector).</p><p>do not use vcc to connect serial...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219466">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">weaker</div>
					<div class="post-datetime">
						8 Dec 2013, 23:44					</div>
				</div>
				<div class="post-content content">
					<p>Thank you!<br />I assume with &quot;do not use vcc to connect serial...&quot; you mean that I shouldn&#039;t use 5V. The USB-TTL cable has 3.3V, is that what you mean or did I misunderstand you?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219475">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						9 Dec 2013, 06:27					</div>
				</div>
				<div class="post-content content">
					<p>i mean you must use ONLY gnd tx rx.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219482">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">weaker</div>
					<div class="post-datetime">
						9 Dec 2013, 09:41					</div>
				</div>
				<div class="post-content content">
					<p>OK, understood now. Thank you for clarification!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220010">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">weaker</div>
					<div class="post-datetime">
						14 Dec 2013, 22:34					</div>
				</div>
				<div class="post-content content">
					<p>OK, here is my feedback:<br />Pin no 6 (closest to &quot;J2&quot;) is GND, Pin 5 is Rx, Pin2 is Tx.<br />Connection has to be 38400, 8N1</p><p>Then I get the following output:<br /></p><div class="codebox"><pre><code>FSB v0.06 PLL w ln p08 zi

Solos 461x PP boot v1.5


BootCode Version : 4.2.1 
SDRAM size = 0x1000000
Processor clock speed 264.0MHz

Entered console ... Nmrp request.
cd

Solos 461x Network boot v1.19 (00000000)  (FLASH)

MAC C0:3F:0E:50:DC:C0
IP 192.168.1.1
SDRAM 0x01000000 bytes

Phy reset line on GPIO 4
Boot from Ethernet Port
FSB v0.06 PLL Normal mode

p08 zi

Solos 461x PP boot v1.5


BootCode Version : 4.2.1 
SDRAM size = 0x1000000
Processor clock speed 264.0MHz
Finding flashfs partition...kernel should be : length = 0 , checksum = FFFFFFFF.
rootfs should be : length = 269000 , checksum = DD94FF1F.
checking kernel...
checking rootfs...
done.

Image &#039;image&#039; is a Linux kernel
Trying to load initrd...none found
Calling Configure_NVS_FromFile.

Passing Linux kernel command line -&gt; &#039;console=ttyS0 root=31:2 mem=15M ro mtdparts=phys_mapped_flash:128k(boot),768k(kernel),2880k(squashfs),64k(pot),64k(nvram),64k(bdata),64k(dpf),-(reserved) rootfstype=squashfs&#039; 
LZMA 4.05
00bXRemounting /dev ;this is silly :-)
 Loading Conexant BSP...
 Loading Wireless ...
 Reading True PDA ...
ŽN&gt; ÌpÂNNN¾ ÌpŒ²¼‚¾2ÌB[... more random stuff]</code></pre></div><p>The random stuff that follows at the end is not identical each time.</p><p>When I press both router buttons upon startup (for reset), a message appears every second &quot;WIFI and WPN buttons are pressed for x seconds&quot; with x being the second count. Upon releasing the buttons the device says &quot;load default&quot; and continues with no discernible difference to the log above.</p><p>As it says that its IP is 192.168.1.1 (as opposed to 192.168.2.1 what I had set before the flash), I again tried to tftp, especially as it said &quot;Booting from ethernet port&quot; but it didn&#039;t work.<br /><a href="http://bandaancha.eu/foros/semi-offtopic-wag54g2-compilacion-1650707">Here</a> I read about netboot, but as it is Spanish I don&#039;t understand what that is. Perhaps I need to do that instead of tftp?<br /><a href="https://forum.openwrt.org/viewtopic.php?id=18574&amp;p=2">Here</a> is another thread where something about that bootloader <br /> is posted.</p><p>By sending Ctrl-C (Break), I could get &quot;Please press Enter to activate this console&quot; and upon sending CRLF I get a busybox 1.2.1 built-in shell. &quot;help&quot; yields the following inbuilt commands:<br /></p><div class="codebox"><pre><code>. : [ [[ alias bg break cd chdir continue echo eval exec exit export false fg hash help jobs kill let local pwd read readonly return set shift source test times trap true type ulimit umask unalias unset wait</code></pre></div><p>1) Should I open a new thread regarding the next steps or should I continue here?<br />2) How would I continue flashing the original firmware back?</p><p>Cheers and thanks a lot so far<br />weaker</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248336">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">wyz73</div>
					<div class="post-datetime">
						28 Sep 2014, 06:00					</div>
				</div>
				<div class="post-content content">
					<p>Hi, <br />the Recovery Mode should be enabled from the Console Mode with a special command: netboot recover.</p><p>Hold the WIFI BUTTON and switch on DG834G v5 router, as soon as you release it, the bootstrap is halted: the router enters the Console Mode and you can type the command.<br />Then you just need to TFTP the correct firmware and the router will finally reboot successfully.</p><p>Here is a more detailed procedure:<br /><a href="http://forum1.netgear.com/showthread.php?t=93148">http://forum1.netgear.com/showthread.php?t=93148</a></p><p>Regards,<br />W.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248385">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">weaker</div>
					<div class="post-datetime">
						28 Sep 2014, 22:50					</div>
				</div>
				<div class="post-content content">
					<p>Thank you for your reply! I will try that. However, I don&#039;t know when exactly I will do it :-)</p><p>Best regards<br />weaker</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248599">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">wyz73</div>
					<div class="post-datetime">
						1 Oct 2014, 01:58					</div>
				</div>
				<div class="post-content content">
					<p>You&#039;re welcome! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />You deserved at least a little answer, you helped me in going deeper in the tech investigation!<br />Then I suddenly erased the &quot;lxcmdlineinfo&quot; tied to the flash to start the kernel and I found that string in your post, you saved me a lot of time.</p><p>So, it&#039;s just a matter of testing this router, I consider it a bit unstable for continuous service with 2-3 VPN tunnels.</p><p>Thanks for your answer and best regards!<br />W.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p260060">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">weaker</div>
					<div class="post-datetime">
						5 Jan 2015, 15:39					</div>
				</div>
				<div class="post-content content">
					<p>Hi wyz73,</p><p>the forum software killed my entire post.<br />So here again in short: I have no &quot;netboot recover&quot;: This is what the integrated BusyBox provides:<br /></p><div class="codebox"><pre><code>Built-in commands:
-------------------
       . : [ [[ alias bg break cd chdir continue echo eval exec exit
       export false fg hash help jobs kill let local pwd read readonly
       return set shift source test times trap true type ulimit umask
       unalias unset wait</code></pre></div><p>The /bin folder provides:<br /></p><div class="codebox"><pre><code>VeriSign2028RootCA.cer  iproutesh
ash   iptunnel  sleep
busybox kill  startasterisk
cat   ln    startbif
chgrp ls    startbsp
chmod mkdir startdslbridge
chown mknod startminbsp
cp    mount startnat
date  mv    startppp
df    netstat startusb
du    paed  startwps
echo  pda-rw swapdev
egrep ping  sys_restart
fgrep ps    tar
flash_eraseall pwd   test
flash_update   qsh   touch
getoid read-truepda   umount
grep  respawnd  uname
gunziprm    verify_flash
gzip  rmdir wpin
halt  rpaed writemac
insmod rssid wsccmd
ip    scanpvczcat
ipaddr sed
iplink  
iproute</code></pre></div><p>I tried flash_update which did the following<br /></p><div class="codebox"><pre><code>Partition 0 to 0 are configured 
Partition 0 to 1 are configured 
Partition 0 to 2 are configured 
seems /var/fs does not exists, trying to create it
Failed to create /var/fs</code></pre></div><p>/sbin contains<br /></p><div class="codebox"><pre><code>acos_init        burnpin          ipoa-up          reboot
acos_service     burnsn           klogd            reset_no_reboot
atmarp           cert             lsmod            rmmod
atmarpd          halt             modprobe         route
bd               ifconfig         ntpclient        syslogd
burnboardid      init             poweroff         uptime
burnethermac     insmod           read_bd          version</code></pre></div><p> </p><p>I wondered why tftp existed, so upon calling busybox --help I get</p><p>Currently defined functions:<br /></p><div class="codebox"><pre><code>           [, [[, arping, ash, awk, basename, busybox, cat, chgrp, chmod,
           chown, chroot, cp, date, df, dirname, du, echo, egrep, env, expr,
           fgrep, grep, gunzip, gzip, halt, ifconfig, init, insmod, ip, ipaddr,
           iplink, iproute, iptunnel, kill, killall, klogd, linuxrc, ln,
           logger, ls, lsmod, mkdir, mknod, modprobe, mount, mv, netstat,
           nslookup, ping, poweroff, ps, pwd, reboot, rm, rmdir, rmmod, route,
           sed, sh, sleep, syslogd, telnetd, test, tftp, top, touch, tr,
           umount, uname, uptime, whoami, zcat</code></pre></div><p> </p><p>So this seems to be the set of utilites that are actually available.</p><p>Any idea how to proceed? I am stuck here.</p><p>Thanks againg and best regards<br />weaker</p>											<p class="post-edited">(Last edited by <strong>weaker</strong> on 5 Jan 2015, 16:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p260093">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						5 Jan 2015, 16:51					</div>
				</div>
				<div class="post-content content">
					<p>It&#039;s booting into a firmware, presumably stock.&nbsp; You need to stop the boot earlier so you are working with the bootloader instead.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p261849">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">weaker</div>
					<div class="post-datetime">
						17 Jan 2015, 16:13					</div>
				</div>
				<div class="post-content content">
					<p>Sorry for the late reply.</p><p>How do I stop the boot earlier? As I said earlier, by sending Ctrl-C (Break), I get &quot;Please press Enter to activate this console&quot; and upon sending CRLF I then get the busybox built-in shell.</p><p>What command would let me step earlier into the boot process? I send Ctrl-C as early as the connection is established.</p><p>Best regards<br />weaker</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>