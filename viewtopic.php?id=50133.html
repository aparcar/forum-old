<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Port forwarding not working</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 13 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p230503">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Axeia</div>
					<div class="post-datetime">
						17 Apr 2014, 05:11					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I&#039;m running openwrt on my Netgear WNDR3700v4 (a build from the developers forum as the v4 isn&#039;t officially supported yet). To this I have my Linux server connected which is running an Apache2 server on port 8092. The IP address of the server is 192.168.1.100 as assigned through a static DHCP leash. I&#039;ve confirmed the IP address to be 192.168.1.100 by running the ifconfig command on it.</p><p>I can confirm the webserver is running by visiting 192.168.1.100:8092 from any device within the LAN. The page on the server will load up as expected. My port forward in <strong>/etc/config/firewall</strong> as created by the webinterface:<br /></p><div class="codebox"><pre><code>config redirect
        option target &#039;DNAT&#039;
        option src &#039;wan&#039;
        option dest &#039;lan&#039;
        option src_dport &#039;8092&#039;
        option dest_ip &#039;192.168.1.100&#039;
        option dest_port &#039;8092&#039;
        option name &#039;Steph-Server&#039;
        option proto &#039;tcp&#039;</code></pre></div><p>If I tick the &#039;LAN Loopback&#039; option it works fine from within the LAN, even on the external (WAN) IP.<br />If I disable LAN Loopback and try to access it through &lt;external ip&gt;:8092 it doesn&#039;t work. </p><p>If I run wireshark on the server with a &quot;tcp.port eq 8092&quot; filter, nothing comes when I try to load the page over&nbsp; the external ip.</p><p>That&#039;s as far as my knowledge goes. I would conclude that the firewall rules are being read and applied since the LAN loopback seems to be working. So something other than the firewall must be preventing the requests being forwarded to the server? Any help would be greatly appreciated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230578">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">nozombian</div>
					<div class="post-datetime">
						18 Apr 2014, 00:09					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m not a firewall guru, but your rule looks perfectly corrrect. So problem lies probably on the apache machine&#039;s firewall. I&#039;d try to disable firewall on it and test again <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230613">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Axeia</div>
					<div class="post-datetime">
						18 Apr 2014, 13:17					</div>
				</div>
				<div class="post-content content">
					<p>Thank you for the reaction. The firewall on the Apache server has been disabled, and if I run dd-wrt or the netgear stock firmware with port forwarding it does work. So I can only imagine that something else on the router is blocking it. I have disabled/stopped the freifunk-p2p service as well to rule that out but without luck. I still can&#039;t access the web server.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>