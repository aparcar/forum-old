<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Setting up a WIFI network for untrusted IoT devices on a GL-iNet AR150</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 31 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p346094">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">chris_c</div>
					<div class="post-datetime">
						8 Dec 2016, 17:26					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m trying to set up a GL-iNet A150 running OpenWRT Designated Driver as a WIFI device for untrusted IoT devices. The AR150 has two Ethernet ports, eth1, the LAN interface supports VLANs, (eth0 doesn&#039;t) and one radio.</p><p>I want the two Ethernet ports to act like a switch, the WAN port going to the network switch / main router and having the LAN port available for trusted devices, this part is quite east to set up, for example in /etc/config/network</p><div class="codebox"><pre><code>config interface &#039;loopback&#039;
        option ifname &#039;lo&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;127.0.0.1&#039;
        option netmask &#039;255.0.0.0&#039;

config interface &#039;lan&#039;
        option type &#039;bridge&#039;
        option proto &#039;dhcp&#039;
        option ifname &#039;eth0 eth1&#039;</code></pre></div><p>What I&#039;m struggling with is how best to configure the WIFI network on the AR150 so that devices on it not able to access anything on the trusted network -- all the untrusted WIFI traffic to be routed directly to the main router and out (which in my case is also running OpenWRT and which also has VLAN support).</p><p>I&#039;d also like to have a firewall on the AR150 radio and only allow some ports / protocols, for example 53, 80, 443 etc.</p><p>I have tried various approached and have UART / USB serial console access to the AR150 so I&#039;m able to experiment without the danger of totally locking myself out <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>Anyone have any suggestions how I should best approach this or ideally a guide I could follow?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346098">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						8 Dec 2016, 18:09					</div>
				</div>
				<div class="post-content content">
					<p>I have been thinking about this too as I really do not like all the devices creating undisclosed DDNS connections to my network.&nbsp; I wish these products would let me keep my data local and setup my own DDNS for remote access.</p><p>If all the devices will connect wirelessly, it might just be good enough to create a Guest LAN and connect them to that.&nbsp; <br /><a href="https://wiki.openwrt.org/doc/recipes/guest-wlan.">https://wiki.openwrt.org/doc/recipes/guest-wlan.</a>&nbsp; I would think that you can access the device with your smart &quot;tool&quot; from the main LAN via the DDNS connection, but not sure.</p><p>If you need access to the physical device for GPIO etc you may just try setting it as a standard router behind the main router.&nbsp; You may have set up some forwards for remote access, not sure.&nbsp; I frequently hang my AR150 and other travel devices behind my main router with no issue, but I only use them for web access going out.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346103">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">chris_c</div>
					<div class="post-datetime">
						8 Dec 2016, 19:03					</div>
				</div>
				<div class="post-content content">
					<p>I have had some great help from the #openwrt IRC channel on freenode and now have things working and plan to write it up later, it&#039;s quite a simple setup at the moment...</p><p>Regarding the DDNS on the AR150 -- I know exactly what you mean, that is why I have flashed it with OpenWRT from openwrt dot org (I can&#039;t post URLs...)...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346294">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						11 Dec 2016, 01:00					</div>
				</div>
				<div class="post-content content">
					<p>The AR150 DDNS is not my concern, It can be disabled.&nbsp; </p><p>It&#039;s all the hidden DDNS services that the IOT device vendors set up when you sign in to get their app/service/cloud storage.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>