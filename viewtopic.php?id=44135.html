<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> uuid not work on swap partitions [12.09]</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 13 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p201456">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">douglasanpa</div>
					<div class="post-datetime">
						11 May 2013, 07:01					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m really wanting to switch to openwrt only 12.09 but still not changed because of this problem with the uuid with swap partitions ...</p><p>I use my router for torrent downloads and as I have 2 HD&#039;s, 1 microSD and 3G modem need to make mounting of partitions uuid because each time the router restarts the disc change.</p><p>This is my setup that works perfectly in Backfire</p><div class="codebox"><pre><code>config    &#039;global&#039;    &#039;automount&#039;
    option        &#039;from_fstab&#039;    &#039;1&#039;
    option        &#039;anon_mount&#039;    &#039;1&#039;

config    &#039;global&#039;    &#039;autoswap&#039;
    option        &#039;from_fstab&#039;    &#039;1&#039;
    option        &#039;anon_swap&#039;    &#039;0&#039;

config    &#039;mount&#039;
    option        &#039;fstype&#039;    &#039;ext4&#039;
    option        &#039;options&#039;    &#039;rw,sync&#039;
    option        &#039;enabled&#039;    &#039;1&#039;
    option        &#039;uuid&#039;        &#039;1c9460a7-5348-4fb0-b785-5984bae5d32d&#039;
    option        &#039;target&#039;    &#039;/mnt/storageIDE&#039;

config    &#039;mount&#039;
    option        &#039;fstype&#039;    &#039;ext4&#039;
    option        &#039;options&#039;    &#039;rw,sync&#039;
    option        &#039;enabled&#039;    &#039;1&#039;
    option        &#039;enabled_fsck&#039;    &#039;0&#039;
    option        &#039;is_rootfs&#039;    &#039;1&#039;                        
    option        &#039;uuid&#039;        &#039;a8471cd1-455a-41e2-9ca3-02b511090ddb&#039;
    option        &#039;target&#039;    &#039;/errorinrootfs&#039;

config    &#039;mount&#039;
    option        &#039;uuid&#039;        &#039;1056EFCC56EFB120&#039;
    option        &#039;target&#039;    &#039;/mnt/storageEXT&#039;
    option        &#039;fstype&#039;    &#039;ntfs-3g&#039;
    option        &#039;options&#039;    &#039;rw,sync&#039;
    option        &#039;enabled&#039;    &#039;1&#039;

config    &#039;mount&#039;
    option        &#039;uuid&#039;        &#039;fec96b3c-69f6-4f64-9cfe-a14861ee3c8e&#039;
    option        &#039;target&#039;    &#039;/mnt/PEN16GB&#039;
    option        &#039;fstype&#039;    &#039;ext4&#039;
    option        &#039;options&#039;    &#039;rw,sync&#039;
    option        &#039;enabled&#039;    &#039;1&#039;

config    &#039;mount&#039;
    option        &#039;uuid&#039;        &#039;57259b1f-e93e-4638-b13b-e032bc491456&#039;
    option        &#039;target&#039;    &#039;/mnt/storage&#039;
    option        &#039;fstype&#039;    &#039;ext4&#039;
    option        &#039;options&#039;    &#039;rw,sync&#039;
    option        &#039;enabled&#039;    &#039;1&#039;

config    &#039;mount&#039;
    option        &#039;enabled&#039;    &#039;1&#039;
    option        &#039;uuid&#039;        &#039;16a4b80f-5a7a-4e28-b83d-3440ea934b6e&#039;
    option        &#039;target&#039;    &#039;/mnt/storage1TB&#039;
    option        &#039;fstype&#039;    &#039;ext4&#039;
    option        &#039;options&#039;    &#039;rw,sync&#039;

config    &#039;swap&#039;
    option        &#039;enabled&#039;    &#039;1&#039;
    option        &#039;uuid&#039;        &#039;0703cde8-d9f1-4702-a2d3-7504243874cb&#039;</code></pre></div><p>Anyone know of something that can solve this problem?</p><p>In my output of blkid also do not show swap partitions. Backfire appeared in...</p><div class="codebox"><pre><code>/dev/mtdblock2: TYPE=&quot;squashfs&quot; 
/dev/sda2: LABEL=&quot;Sistema&quot; UUID=&quot;a8471cd1-455a-41e2-9ca3-02b511090ddb&quot; TYPE=&quot;ext4&quot; 
/dev/sdb1: LABEL=&quot;Dados120Gb&quot; UUID=&quot;57259b1f-e93e-4638-b13b-e032bc491456&quot; TYPE=&quot;ext4&quot; 
/dev/sdc1: LABEL=&quot;Dados1TB&quot; UUID=&quot;16a4b80f-5a7a-4e28-b83d-3440ea934b6e&quot; TYPE=&quot;ext4&quot; </code></pre></div><p>I appreciate everyone&#039;s attention</p><p>EDIT: I tested now BARRIER BREAKER (Bleeding Edge, r36602) and the problem continues.</p><p>But I found a really cool new interface LuCI :)</p><br /><p>EDIT2: I went back to 10.03, this is the output from blkid</p><div class="codebox"><pre><code>/dev/sdc1: LABEL=&quot;Dados1TB&quot; UUID=&quot;16a4b80f-5a7a-4e28-b83d-3440ea934b6e&quot;
/dev/sdb1: LABEL=&quot;Dados120Gb&quot; UUID=&quot;57259b1f-e93e-4638-b13b-e032bc491456&quot;
/dev/sda2: LABEL=&quot;Sistema&quot; UUID=&quot;a8471cd1-455a-41e2-9ca3-02b511090ddb&quot;
/dev/sda1: LABEL=&quot;swap&quot; UUID=&quot;0703cde8-d9f1-4702-a2d3-7504243874cb&quot;</code></pre></div>											<p class="post-edited">(Last edited by <strong>douglasanpa</strong> on 11 May 2013, 07:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p201461">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">FriedZombie</div>
					<div class="post-datetime">
						11 May 2013, 08:03					</div>
				</div>
				<div class="post-content content">
					<p>So what happens? are the drives randomly mounted or not mounted at all?<br />Also do you really mean swap partitions? or just partitions?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p201472">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">douglasanpa</div>
					<div class="post-datetime">
						11 May 2013, 10:00					</div>
				</div>
				<div class="post-content content">
					<p>only swap partitions do not mount by uuid</p><p>In openwrt 12.09, the swap partition does not appear when I run blkid</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220777">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">digitsm</div>
					<div class="post-datetime">
						24 Dec 2013, 07:14					</div>
				</div>
				<div class="post-content content">
					<p>I exactly have this problem too. I can attach 2 USB storage devices to my D-Link DIR-825 (using Attitude Adjustment) and both of them have swap partition. Therefor I have to use their UUID to mount them with fstab, but unfortunately &#039;blkid&#039; doesn&#039;t show my swap partitions and so swaps don&#039;t automatically mount at boot.<br />My goal is to make a swap partition on my external HDD with higher priority and another on my pendrive with lower priority. So when HDD is available, system uses its swap partition which doesn&#039;t wear out, but when the HDD is detached, it can also use swap partition of pendrive (which is always connected).</p><p>The content of file &#039;/etc/config/fstab&#039;:<br /></p><div class="codebox"><pre><code>root@DIR-825_OpenWrt:/etc/config# vi fstab

config global automount
        option from_fstab 1
        option anon_mount 0

config global autoswap
        option from_fstab 1
        option anon_swap 0

config mount
        option target   /mnt/exroot
        option uuid     5b69ba30-cad9-466a-bb71-b1ff4ba72cf1
        option fstype   ext4
        option options  rw,sync
        option enabled  1
        option enabled_fsck 0

config swap
        option uuid     bf1ecba8-8686-494f-ab26-8e839b58f8fe
        option enabled  1</code></pre></div><p>The content of symlinked file &#039;/etc/fstab&#039; after reboot (Notice the swap partition with uuid &quot;bf1ecba8-...&quot; is not mounted as /dev/sdb2 because blkid doesn&#039;t detect it):<br /></p><div class="codebox"><pre><code>root@DIR-825_OpenWrt:/etc# vi fstab

/dev/sdb1       /mnt/exroot     ext4    rw,sync 0       0</code></pre></div><p>The result of command &#039;fdisk -l&#039;:<br /></p><div class="codebox"><pre><code>root@DIR-825_OpenWrt:/etc/config# fdisk -l

Disk /dev/mtdblock0: 0 MB, 262144 bytes
255 heads, 63 sectors/track, 0 cylinders, total 512 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes


Disk /dev/mtdblock1: 0 MB, 65536 bytes
255 heads, 63 sectors/track, 0 cylinders, total 128 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes


Disk /dev/mtdblock2: 1 MB, 1048576 bytes
255 heads, 63 sectors/track, 0 cylinders, total 2048 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes


Disk /dev/mtdblock3: 5 MB, 5308416 bytes
255 heads, 63 sectors/track, 0 cylinders, total 10368 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes


Disk /dev/mtdblock4: 3 MB, 3407872 bytes
255 heads, 63 sectors/track, 0 cylinders, total 6656 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes


Disk /dev/mtdblock5: 0 MB, 65536 bytes
255 heads, 63 sectors/track, 0 cylinders, total 128 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes


Disk /dev/mtdblock6: 1 MB, 1638400 bytes
255 heads, 63 sectors/track, 0 cylinders, total 3200 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes


Disk /dev/mtdblock7: 6 MB, 6356992 bytes
255 heads, 63 sectors/track, 0 cylinders, total 12416 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes


Disk /dev/mtdblock8: 0 MB, 65536 bytes
255 heads, 63 sectors/track, 0 cylinders, total 128 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes


Disk /dev/sda: 500.1 GB, 500107861504 bytes
255 heads, 63 sectors/track, 60801 cylinders, total 976773167 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x000a8e2e

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *          63   955787174   477893556    7  HPFS/NTFS/exFAT
/dev/sda2       955787264   956835839      524288   82  Linux swap / Solaris

Disk /dev/sdb: 8103 MB, 8103395328 bytes
250 heads, 62 sectors/track, 1021 cylinders, total 15826944 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x0002eb79

   Device Boot      Start         End      Blocks   Id  System
/dev/sdb1            2048    14778367     7388160   83  Linux
/dev/sdb2        14778368    15826943      524288   82  Linux swap / Solaris</code></pre></div><p>The result of command &#039;blkid&#039; (Notice it doesn&#039;t detect the swap partition of any of 2 USB devices attached):<br /></p><div class="codebox"><pre><code>root@DIR-825_OpenWrt:/etc/config# blkid
/dev/mtdblock3: TYPE=&quot;squashfs&quot; 
/dev/sda1: LABEL=&quot;09124574396&quot; UUID=&quot;207A7554ADCD7343&quot; TYPE=&quot;ntfs&quot; 
/dev/sdb1: LABEL=&quot;extroot_openwrt&quot; UUID=&quot;5b69ba30-cad9-466a-bb71-b1ff4ba72cf1&quot; TYPE=&quot;ext4&quot;</code></pre></div>											<p class="post-edited">(Last edited by <strong>digitsm</strong> on 24 Dec 2013, 07:24)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>