<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Graph network traffic</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 30 Apr 2018 and 2 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=1686&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p20716">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">va1210</div>
					<div class="post-datetime">
						12 Feb 2006, 13:57					</div>
				</div>
				<div class="post-content content">
					<p>ALuedtke,</p><p>yes, that&#039;s the version I&#039;m running. I started out by installing haserl-0.8.0-1 (not sure if this was needed, but thought I&#039;d install it just in case), threw in webif-patch-0.01 from <a href="http://www.hot-spot-zone.de/hsz/ipkg/webif-patch_0.01_mipsel.ipk">http://www.hot-spot-zone.de/hsz/ipkg/we … mipsel.ipk</a> and then I installed svggraph-webif-0.3 from <a href="http://www.arantius.com/openwrt/ipk/svggraph-webif_0.3_mipsel.ipk">http://www.arantius.com/openwrt/ipk/svg … mipsel.ipk</a> . Did I miss some important step?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20722">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">ALuedtke</div>
					<div class="post-datetime">
						12 Feb 2006, 14:58					</div>
				</div>
				<div class="post-content content">
					<p>Hi va1210,</p><p>no, I think you did it correct. When I look at the installed packages I see:</p><p>haserl - 0.8.0-1 - a CGI wrapper to embed shell scripts in HTML documents<br />svggraph-webif - 0.3 - <br />webif - 0.01-1 - A modular, extensible web interface for OpenWrt.<br />webif-patch - 0.01 - </p><p>Did you changed the /etc/httpd.conf file and restarted httpd?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20723">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">thetron</div>
					<div class="post-datetime">
						12 Feb 2006, 15:17					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m trying this myself. I can get data.sh to spit text out</p><p>I&#039;m using the latest version of firefox. I&#039;m given a download file prompt everytime i try to view the graphs and IE doesn&#039;t do anything...</p><p>What am i doing wrong</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20725">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">va1210</div>
					<div class="post-datetime">
						12 Feb 2006, 15:45					</div>
				</div>
				<div class="post-content content">
					<p>My httpd.conf looks as follows</p><div class="quotebox"><blockquote><p>/cgi-bin/webif:root:*****<br />.svg:image/svg+xml</p></blockquote></div><p>I also booted my router, but that didn&#039;t seem to help.</p><p>I&#039;m a bit unclear on how the time series for the graph is stored. Should a cron job be running that writes data to a file at certain time intervalls, or? As far as I can tell there is no cron job/daemon running that does something like this..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20726">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">ALuedtke</div>
					<div class="post-datetime">
						12 Feb 2006, 15:56					</div>
				</div>
				<div class="post-content content">
					<p>Hi va1210,</p><p>I think you have to wait for an answer from arantius.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20730">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">thetron</div>
					<div class="post-datetime">
						12 Feb 2006, 17:32					</div>
				</div>
				<div class="post-content content">
					<p>*falls asleep*</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20740">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">arantius</div>
					<div class="post-datetime">
						12 Feb 2006, 21:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>my CPU load is always at 100% even when there is no traffic</p></blockquote></div><p>CPU load is just that, activity on the processor.&nbsp; Independent of traffic.&nbsp; Perhaps something <em>is</em> using all your cpu?&nbsp; If you SSH in, what does top say about CPU usage?&nbsp; What does uptime say?</p><p>(In truth, my CPU always hovers around 15-20%, which doesn&#039;t seem right to me either, but not 100!)</p><p>va1210:</p><p>Does the CPU graph work?&nbsp; Please PM me this might get more detailed <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20741">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">arantius</div>
					<div class="post-datetime">
						12 Feb 2006, 21:44					</div>
				</div>
				<div class="post-content content">
					<p>Whoops, didn&#039;t see page 2!&nbsp; </p><div class="quotebox"><blockquote><p>I&#039;m given a download file prompt everytime i try to view the graphs</p></blockquote></div><p>Yes, you&#039;ll have to re-start httpd to get it to deliver the right mime type to firefox.&nbsp; Just reboot the box if you don&#039;t know how.</p><div class="quotebox"><blockquote><p>I&#039;m a bit unclear on how the time series for the graph is stored.</p></blockquote></div><p>It&#039;s all client side.&nbsp; The stuff data.sh spits out are the current values, the client accepts and processes those for difference from the last value.</p><p>This means that a) no server resources are used unless you&#039;re watching it but b) no historical data, only current (and the past 120 seconds, stored client side).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20742">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">va1210</div>
					<div class="post-datetime">
						12 Feb 2006, 22:22					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arantius wrote:</cite><blockquote><p>Does the CPU graph work?&nbsp; Please PM me this might get more detailed <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>No, they all say the same thing. Anything in particular I can do to help debug this problem?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20756">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">louiscipher</div>
					<div class="post-datetime">
						13 Feb 2006, 05:44					</div>
				</div>
				<div class="post-content content">
					<p>First off, thanks for creating this (whomever you are). I was looking for this exact same thing.</p><p>Anyway, onto my problem <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>konqueror shows the graph dimensions just fine, but no output (i honestly don&#039;t know about svg &amp; konqueror off the top of my head... but i&#039;ll research). And with firefox, all the other graphs work fine... EXCEPT for cpu, which has the problem of wanting to download the svg file. (yes i did update httpd.conf). And when calling data.sh?=cpu all i get is:</p><div class="codebox"><pre><code>Sun Feb 12 19:39:48 PST 2006</code></pre></div><p>I thougth i would post that in hopes that it might help someone with this.</p><p>OH, BTW, i am using .3 as well. <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>thanks in advance</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20758">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">thetron</div>
					<div class="post-datetime">
						13 Feb 2006, 07:32					</div>
				</div>
				<div class="post-content content">
					<p>I have rebooted or i&#039;d wouldn&#039;t be asking <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Still doing it</p>											<p class="post-edited">(Last edited by <strong>thetron</strong> on 13 Feb 2006, 07:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20763">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">ALuedtke</div>
					<div class="post-datetime">
						13 Feb 2006, 11:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arantius wrote:</cite><blockquote><div class="quotebox"><blockquote><p>my CPU load is always at 100% even when there is no traffic</p></blockquote></div><p>CPU load is just that, activity on the processor.&nbsp; Independent of traffic.&nbsp; Perhaps something <em>is</em> using all your cpu?&nbsp; If you SSH in, what does top say about CPU usage?&nbsp; What does uptime say?</p></blockquote></div><p>arantius you were right: something IS using all cpu! It&#039;s the gpio used by the module &quot;cisco-button&quot;.</p><p>Thanks for your answer</p><p>Andreas</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20772">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">va1210</div>
					<div class="post-datetime">
						13 Feb 2006, 14:20					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ALuedtke wrote:</cite><blockquote><p>arantius you were right: something IS using all cpu! It&#039;s the gpio used by the module &quot;cisco-button&quot;.</p></blockquote></div><p>Hehe, just goes to show how useful this application really is <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20778">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">prodata</div>
					<div class="post-datetime">
						13 Feb 2006, 16:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>va1210 wrote:</cite><blockquote><p>I&#039;m getting a message &quot;Cannot get data about interface&quot; on all graphs, any suggestions on what I might be doing wrong? Running data.sh?if=eth0 for instance gives me </p><div class="codebox"><pre><code>Sun Feb 12 11:19:16 WET 2006
  eth0:  162847     340    0    0    0     0          0         0    47344     436    0    0    0     0       0          0</code></pre></div><p>I&#039;m running White Russian RC4 on a WRT54G v2.2..</p><p>Great package btw, really looking forward to getting this to work! I&#039;ve been waiting for something like this for a really long time!</p></blockquote></div><p>I&#039;m using v3 and get the same data and the same result</p><p>&quot;cannot get data about interface&quot;</p><p>a data.sh?if=eth0 or data.sh?if=vlan0 gives me the data</p><p>Sat Jan&nbsp; 1 01:03:53 CET 2000<br />&nbsp; eth0:&nbsp; 103630&nbsp; &nbsp; &nbsp;863&nbsp; &nbsp; 0&nbsp; &nbsp; 0&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;268820&nbsp; &nbsp; &nbsp;854&nbsp; &nbsp; 0&nbsp; &nbsp; 0&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0</p><p>Any idea?</p><p>Then there is still one problem.<br />I&#039;ve added the extra line in the httpd.conf file and I can see the svg now for eth0 (without data)</p><p>but if I look to the grafich of the cpu firefox still try&#039;s to download the image.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20787">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">arantius</div>
					<div class="post-datetime">
						13 Feb 2006, 17:34					</div>
				</div>
				<div class="post-content content">
					<p>Okay, here we go, how to debug svggraph-webif:</p><p>First, your browser has to be able to do SVG images!&nbsp; Here&#039;s a page with some samples, if you don&#039;t see something like the little icons when you click the links your browser probably doesn&#039;t support SVG:</p><p><a href="http://www.croczilla.com/svg/samples/">http://www.croczilla.com/svg/samples/</a></p><p>If those do show up, then let&#039;s see if you can load <strong>these</strong> svg documents!&nbsp; From here on, replace &quot;http://openwrt/&quot; with the correct value to be pointing at <em>your</em> openwrt box.</p><p>http://openwrt/svggraph/graph_cpu.svg<br />http://openwrt/svggraph/graph_if.svg</p><p>Neither of these will &quot;work&quot; now, but if you get an empty graph that says it can&#039;t load data, then your browser loads the svg images for this package properly.&nbsp; If you get a download prompt, then your browser is confused or (if you use Firefox 1.5+) then your web server is misconfigured.&nbsp; You&#039;ll need this line in /etc/httpd.conf (set automatically by version 0.3 and above):</p><div class="codebox"><pre><code>.svg:image/svg+xml</code></pre></div><p>These SVGs make AJAX-like calls to the openwrt box to get the data to put in the graph, located at these URLs:</p><p>http://openwrt/cgi-bin/webif/svggraph/data.sh<br />http://openwrt/cgi-bin/webif/svggraph/data.sh?if=br0</p><p>Where the first link above should display CPU data, like this:</p><div class="codebox"><pre><code>Mon Feb 13 10:10:55 EST 2006
cpu  146970 0 1145264 62863984</code></pre></div><p>And the second will display interface traffic.&nbsp; Every different piece of hardware (and configuration) can have different interfaces, so you may have to choose an interface name that actually exists on your system:</p><div class="codebox"><pre><code>Mon Feb 13 10:11:14 EST 2006
   br0:3602758287 8927578    0    0    0     0          0         0 1264113438 9404396    0    0    0     0       0          0</code></pre></div><p>In other words, for cpu data, the script expects the date on one line, followed by the word cpu, then four separate numbers, on the next line.&nbsp; For interface data, again the first line is the date, the second line is &quot;interfacename&quot;: followed by 8 numbers, and 8 more numbers.&nbsp; The script is concerned with the first number from each of those groups.&nbsp; (If you &quot;cat /proc/net/dev&quot; you&#039;ll see that they are the number of bytes transmitted and recieved.)</p><p>If things are not working for you still, please follow these instructions:</p><p>First, install <a href="http://www.fiddlertool.com/Fiddler/version.asp">Fiddler</a> (Or something similar if you aren&#039;t on Windows).&nbsp; Then configure your browser to load pages through its proxy, and visit each of the URLs listed here once, or visit the page that gives you a problem.&nbsp; Then for each URL, select it in the list on the left, click Edit-&gt;Copy-&gt;Session, and paste that into a text file.&nbsp; Then, email it to me (link on the left of each post) and I&#039;ll get back to you!&nbsp; This way I&#039;ll have a lot of the relevant information and we won&#039;t have to play email/forum tag to get the details.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20788">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">prodata</div>
					<div class="post-datetime">
						13 Feb 2006, 17:51					</div>
				</div>
				<div class="post-content content">
					<p>GREAT !</p><p>Man, if you lived here - in belgium- I would take you out and buy you a couple of drinks ;-)</p><p>Thank you very much.</p><p>The mean problem was that I wasn&#039;t be able to see svg files. It is nog okay!</p><p>Realy nice work !</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20797">
				<div class="post-metadata">
					<div class="post-num">Post #42</div>
					<div class="post-author">va1210</div>
					<div class="post-datetime">
						13 Feb 2006, 19:31					</div>
				</div>
				<div class="post-content content">
					<p>Ok, I got it working as soon as I tried it on Windows XP + Firefox 1.5. Seems like my Gentoo Linux + Firefox 1.0.7 isn&#039;t able to display the graph.. Anyhow, great feature, looks really impressive!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20855">
				<div class="post-metadata">
					<div class="post-num">Post #43</div>
					<div class="post-author">arantius</div>
					<div class="post-datetime">
						14 Feb 2006, 17:05					</div>
				</div>
				<div class="post-content content">
					<p>va1210: Correct, if you read carefully, I&#039;ve said somewhere that you need FF 1.5+ .&nbsp; 1.5 is where FF introduced SVG functionality standard.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20858">
				<div class="post-metadata">
					<div class="post-num">Post #44</div>
					<div class="post-author">davide125</div>
					<div class="post-datetime">
						14 Feb 2006, 17:33					</div>
				</div>
				<div class="post-content content">
					<p>Just tried with last whiterussian nbd snapshot: <a href="http://downloads.openwrt.org/people/nbd/whiterussian/">http://downloads.openwrt.org/people/nbd/whiterussian/</a> as described in this post: <a href="http://forum.openwrt.org/viewtopic.php?pid=20716#p20716">http://forum.openwrt.org/viewtopic.php?pid=20716#p20716</a><br />It works fine but the headings are corrupt:<br /><a href="http://img131.imageshack.us/my.php?image=webif1yk.png"><span class="postimg"><img src="http://img131.imageshack.us/img131/4364/webif1yk.th.png" alt="http://img131.imageshack.us/img131/4364/webif1yk.th.png" /></span></a></p>											<p class="post-edited">(Last edited by <strong>davide125</strong> on 14 Feb 2006, 17:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20859">
				<div class="post-metadata">
					<div class="post-num">Post #45</div>
					<div class="post-author">arantius</div>
					<div class="post-datetime">
						14 Feb 2006, 17:38					</div>
				</div>
				<div class="post-content content">
					<p>This package is written to work with WR RC4, and WebIf 0.01 not the versions you have installed david.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20860">
				<div class="post-metadata">
					<div class="post-num">Post #46</div>
					<div class="post-author">davide125</div>
					<div class="post-datetime">
						14 Feb 2006, 17:44					</div>
				</div>
				<div class="post-content content">
					<p>I see, my webif is actually 0.2. Anyway, since nbd snapshots are what will become rc5 you may want to start looking into it (no hurry of course).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21261">
				<div class="post-metadata">
					<div class="post-num">Post #47</div>
					<div class="post-author">thetron</div>
					<div class="post-datetime">
						21 Feb 2006, 17:18					</div>
				</div>
				<div class="post-content content">
					<p>Got it working... Happy now <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p>All we need is one for ethernet use</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21267">
				<div class="post-metadata">
					<div class="post-num">Post #48</div>
					<div class="post-author">arantius</div>
					<div class="post-datetime">
						21 Feb 2006, 18:31					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>All we need is one for ethernet use</p></blockquote></div><p>What do you mean?&nbsp; There should be a graph for all interfaces on your box.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21273">
				<div class="post-metadata">
					<div class="post-num">Post #49</div>
					<div class="post-author">Giammin</div>
					<div class="post-datetime">
						21 Feb 2006, 18:55					</div>
				</div>
				<div class="post-content content">
					<p>i have a similar problem...</p><p>i can see all graphs working, only the cpu and eth0 graph prompt me to download!</p><p>i have firefox 1.5.1 and openwrt has the right package and right config files or modules instaled</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21274">
				<div class="post-metadata">
					<div class="post-num">Post #50</div>
					<div class="post-author">Giammin</div>
					<div class="post-datetime">
						21 Feb 2006, 18:59					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve just cleaned firefox cache and everything work fine!!!</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=1686&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>