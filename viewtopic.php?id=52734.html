<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> PHP Opcache shared memory issue</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 25 Feb 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p247096">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">macaulayca</div>
					<div class="post-datetime">
						15 Sep 2014, 11:47					</div>
				</div>
				<div class="post-content content">
					<p>I have php5.6.0 working with php-fpm, however if I enable opcache I receive an error.<br />&quot;Fatal Error Unable to allocate shared memory segment of 8388608 bytes: unknown: numerical result out of range (34)&quot;</p><p>I&#039;ve tried using this on an Archer C7 and in Virtualbox (x86_64) using 512mb ram allocation, so the amount of free memory doesn&#039;t seem to be the problem. I&#039;m compiling with buildroot using the trunk (OpenWrt Chaos Calmer r42432 / LuCI Trunk (svn-r10527) ) kernel 3.14.16 (both on the C7 and x86_64. I&#039;ve spent hours modifying php.ini changing memory sizes in case my limits were stopping it, but I guess it is possible it is just a missing/wrong line within php.ini / php-fpm.conf.</p><p>Is there something different in the way OpenWrt handles shared memory that might stop opcache from loading?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p247885">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">macaulayca</div>
					<div class="post-datetime">
						24 Sep 2014, 03:02					</div>
				</div>
				<div class="post-content content">
					<p>Fixed it...only needed a 1 line patch.....</p><p>Is anyone interested in having php5.60 with php-fpm and zcache?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p247887">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						24 Sep 2014, 03:43					</div>
				</div>
				<div class="post-content content">
					<p>Feel free to post it here and/or open up a ticket to submit to OpenWRT devel.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262161">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">djdeeles</div>
					<div class="post-datetime">
						20 Jan 2015, 14:07					</div>
				</div>
				<div class="post-content content">
					<p>php 5.6 with php-fpm and zcache would be great!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p272258">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">anna647</div>
					<div class="post-datetime">
						13 Apr 2015, 07:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>macaulayca wrote:</cite><blockquote><p>Fixed it...only needed a 1 line patch.....</p><p>Is anyone interested in having php5.60 with php-fpm and zcache?</p></blockquote></div><p>Hi. Rencently we met with the same problem. Could you tell me how you solve this problem or where should i add this 1 line patch.</p><p>I will be quite greatful of your help</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p272269">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">brightstar</div>
					<div class="post-datetime">
						13 Apr 2015, 09:55					</div>
				</div>
				<div class="post-content content">
					<p>Hey, &quot;anna647&quot; i read your post in my views he is also himself in trouble so how can he tell you the solution of your problem but hope anybody think about your problem.thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p275681">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">onebillion</div>
					<div class="post-datetime">
						8 May 2015, 16:33					</div>
				</div>
				<div class="post-content content">
					<p>Could you please provide the one line patch? Also, the Makefile would be useful!</p><p>Many thanks</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>