<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> airmusic NW11 - AR9331/32M RAM/8M Flash/Audio Codec</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 28 Mar 2018 and 7 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 8 of 9</div><nav><ul><li><a href="viewtopic.php%3Fid=50512&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=50512&amp;p=6.html">6</a></li><li><a href="viewtopic.php%3Fid=50512&amp;p=7.html">7</a></li><li class="pagination-current"><span>8</span></li><li><a href="viewtopic.php%3Fid=50512&amp;p=9.html">9</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p330350">
				<div class="post-metadata">
					<div class="post-num">Post #176</div>
					<div class="post-author">Chrisct</div>
					<div class="post-datetime">
						2 Jul 2016, 20:06					</div>
				</div>
				<div class="post-content content">
					<p>Hi All,</p><p>I have bought the airmusic NW11 box:</p><div class="codebox"><pre><code>root@airmusic:~# dmesg
Linux version 2.6.39.4 (jh@srv64) (gcc version 4.5.4 20110808 (prerelease) (Linaro GCC 4.5-2011.08) ) #5 Fri Nov 7 17:28:25 CST 2014

SoC: Atheros AR9330 rev 1
Clocks: CPU:400.000MHz, DDR:400.000MHz, AHB:200.000MHz, Ref:25.000MHz

Kernel command line:  board=TL-WR703N console=ttyATH0,115200 rootfstype=squashfs,jffs2 noinitrd

MIPS: machine is TP-LINK TL-WR703N v1
wr703N</code></pre></div><p>I have modified the &quot;ushare&quot; as you recommended:</p><div class="codebox"><pre><code>root@airmusic:~# cat /etc/config/ushare

config &#039;ushare&#039;
        option &#039;username&#039; &#039;nobody&#039;
        option &#039;servername&#039; &#039;Airmusic&#039;
        option &#039;interface&#039; &#039;wlan1&#039;
        option &#039;content_directories&#039; &#039;/tmp/mnt&#039;
        option &#039;disable_telnet&#039; &#039;1&#039;
        option &#039;disable_webif&#039; &#039;1&#039;
        option &#039;enabled&#039; &#039;1&#039;</code></pre></div><p>&nbsp; &nbsp; &nbsp; &nbsp; <br />At the beginning, I had problem with it, my *.flac files were not visible,<br />while I could see directories. I had to enable the &#039;disable_webif&#039; option.<br />After that, I could share/unshare folders under GUI, which has made<br />files visible for me (even under sub-directories). <br />In my case the [option &#039;content_directories&#039; &#039;/tmp/mnt&#039;] did not help.</p><p>I see, the &quot;ushare&quot; creates a kind of configuration file, <br />which contains shared music files see:</p><div class="codebox"><pre><code>root@airmusic:~# ls -l /tmp/mnt/disk-a0/.??*
-rwxrwxrwx    1 root     root          4264 Jan  1 08:02 /tmp/mnt/disk-a0/.udisklist</code></pre></div><p>I see, the &quot;ushare&quot; is unstable. Sometimes it hangs, sometimes crashes.<br />It seems, the problems appears when I create play list, which is probably<br />not supported or when I move forward/backward the playing song.<br />So, I created crontab job (as recommended by you):</p><div class="codebox"><pre><code>root@airmusic:~# crontab -l
* * * * * if [ `ps | grep -c ushare` != 2 ] ; then /etc/init.d/ushare restart ; fi &gt; /dev/null 2&gt;&amp;1</code></pre></div><p>It restarts the &quot;ushare&quot; when it crashes, but I have to wait sometimes<br />longer than 1 minute to get the Airmusic server visible on my android apps.<br />It is unpredictable to use ushare on this box. I use:<br />BubbleUPnP, AirWire, AllConnect, GinkoDlna.<br />The last one shows Airmusic&#039;s IP and connection errors, which is helpful to see<br />when Airmusic server is available again.</p><p>I also used the &quot;airmusic&quot; android application, which is recommended by equipment<br />supplier, but it plays music when I am directly connect with the box.</p><p>I had a look around at configuration files on this box:</p><div class="codebox"><pre><code>root@airmusic:~# ls /etc/rc.d/
K90network       S39usb           S50telnet        S90firewall
K98boot          S40network       S50ushare        S95done
K99umount        S42wanlan        S50wifi_save     S97watchdog
S05defconfig     S45dnsmasq       S60dbus          S98sysntpd
S10boot          S50cron          S61avahi-daemon  S99sysctl
S20fstab         S50lighttpd      S69shairport

root@airmusic:~# cat /etc/rc.d/S50lighttpd
#!/bin/sh /etc/rc.common
# Copyright (C) 2006 OpenWrt.org
START=50

BIN=lighttpd
DEFAULT=/etc/default/$BIN
LOG_D=/var/log/$BIN
RUN_D=/var/run
TMP=/tmp/lighttpd
PID_F=$RUN_D/$BIN.pid
OPTIONS=-f /etc/lighttpd/lighttpd.conf

start() {
        [ -f $DEFAULT ] &amp;&amp; . $DEFAULT
        mkdir -p $LOG_D
        mkdir -p $RUN_D
        mkdir -p $TMP
        $BIN $OPTIONS
}

stop() {
        [ -f $PID_F ] &amp;&amp; kill $(cat $PID_F)
}

root@airmusic:~# grep www /etc/lighttpd/lighttpd.conf
server.document-root        = &quot;/usr/mips/www&quot;
#auth.backend.plain.userfile = &quot;/var/www/passwd.dav&quot;

root@airmusic:~# ls /usr/mips/www/*.shtml
/usr/mips/www/a_ad.shtml
/usr/mips/www/a_advanced.shtml
/usr/mips/www/a_fu.shtml
/usr/mips/www/a_network_connections.shtml
/usr/mips/www/a_settings.shtml
/usr/mips/www/index.shtml
/usr/mips/www/play.shtml
/usr/mips/www/setmac.shtml
/usr/mips/www/stm.shtml
/usr/mips/www/tips.shtml
/usr/mips/www/wait.shtml
/usr/mips/www/xml.shtml</code></pre></div><p>When I put the play.shtml link into my internet explorer and native android web browser<br />I see all my songs: <a href="http://192.168.1.100/play.shtml">http://192.168.1.100/play.shtml</a><br />DLNA clients has to be disconnected form the airmusic box. I does not work for me<br />with the firefox (I do not see songs, but the only playing bar). <br />So be careful, which browser you use for this link. </p><p>It is a very simple web GUI, but it works. It does not hang, it is available in your<br />home network (you do not have to be connected directly to your airmusic box).</p><p>Does anybody of you know the SHTML and is willing to extend this GUI ?<br />It looks like the play.shtml is not finished by its author yet.</p><p>Please let me know if you have any related questions.</p><p>Cheers, Chris</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p332006">
				<div class="post-metadata">
					<div class="post-num">Post #177</div>
					<div class="post-author">dogber1</div>
					<div class="post-datetime">
						18 Jul 2016, 04:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>SebastianFM wrote:</cite><blockquote><p>I&#039;ll release kernel modules and source code when it will be finished.</p></blockquote></div><p>Hey SebastianFM,</p><p>thanks for your effort! Any idea when it might be ready?</p><p>Cheers,<br />-d</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p332017">
				<div class="post-metadata">
					<div class="post-num">Post #178</div>
					<div class="post-author">schmurtz</div>
					<div class="post-datetime">
						18 Jul 2016, 09:54					</div>
				</div>
				<div class="post-content content">
					<p>Same question here. The spdif driver working really fine but I&#039;m really looking forward to be able to use the jack out too <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p333999">
				<div class="post-metadata">
					<div class="post-num">Post #179</div>
					<div class="post-author">odya_kun</div>
					<div class="post-datetime">
						11 Aug 2016, 01:29					</div>
				</div>
				<div class="post-content content">
					<p>Does someone has found a solution for dropouts with AirPlay?</p><p>I trying to play with parameters in /usr/bin/airrestart but nothing changes.</p><div class="codebox"><pre><code>WARNING: underrun.
------------snd_pcm_writei: Resource temporarily unavailable
try again:1
ALSA lib pcm.c:7316:(snd_pcm_recover) underrun occurred</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p335294">
				<div class="post-metadata">
					<div class="post-num">Post #180</div>
					<div class="post-author">ass20</div>
					<div class="post-datetime">
						21 Aug 2016, 11:51					</div>
				</div>
				<div class="post-content content">
					<p>Hi</p><p>I have airmusic m1<br />But my firmware is old</p><p>Where I can download new firmware ? <br />link&nbsp; <a href="http://kaopu.so/pan/soundmate">http://kaopu.so/pan/soundmate</a> is wrong ((</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p337000">
				<div class="post-metadata">
					<div class="post-num">Post #181</div>
					<div class="post-author">zentico</div>
					<div class="post-datetime">
						2 Sep 2016, 18:06					</div>
				</div>
				<div class="post-content content">
					<p>Thanks to SebastianFM and schmurtz for their attempts to upgrade the OpenWrt to v. 15.&nbsp; Let us know if you need any testers.</p><p>My setup is an M1, running NW11-1.1.01-A21(A.01), used for Airplay streaming from iTunes and my Android phone using AirAudio.</p><p>I&#039;m having trouble on Windows 10 PC&#039;s on my home network.&nbsp; In the &quot;Devices and Printers&quot;, the SoundMate flashes available and then disappears constantly.&nbsp; On my older HTPC, this causes hickups when playing games.</p><p>I was wondering if anyone else was experiencing this?&nbsp; I suspect it might be the &quot;ushare&quot; process running and/or crashing.&nbsp; I tried to disable it via Telnet, but no cigar.</p><p>Cheers from Costa Rica!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p337001">
				<div class="post-metadata">
					<div class="post-num">Post #182</div>
					<div class="post-author">scubalake</div>
					<div class="post-datetime">
						2 Sep 2016, 18:08					</div>
				</div>
				<div class="post-content content">
					<p>Hi all, <br />I have recently bought an Airmusic M2 directly from China, but is is malfunctioning.<br />I&#039;m using BubbleUPNP on my cell. The problem is that the music starts and in the middle of the song stops. At this point BubbleUPNP is not able to restart playing on Airmusic. The song can start on my TV and cell itself.<br />Since this problem happens also if I send music directly from my PC, I think that the bug is in the Airmusic.<br />For this reason I have flashed a different Firmware downloaded from RaidSonic - IB-MP401Air WM A53(07)<br />The firmware works, the wifi works, but I have the same bug as before. Moreover, it is not possible to adjust the volume from the cell, now.<br />I&#039;m not able to build firmwares... I only would like to listen music on mi HIFI&nbsp; :-)<br />Do you think this is a Hardware bug? If not, where I can find a working firmware?<br />Thanks, cheers, Stefano</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338287">
				<div class="post-metadata">
					<div class="post-num">Post #183</div>
					<div class="post-author">boborjan</div>
					<div class="post-datetime">
						14 Sep 2016, 22:48					</div>
				</div>
				<div class="post-content content">
					<p>Hi there,</p><p>How could I have a copy of the driver source that is spdif capable? I need spdif only.<br />Thanks for the great work btw</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p341745">
				<div class="post-metadata">
					<div class="post-num">Post #184</div>
					<div class="post-author">schmurtz</div>
					<div class="post-datetime">
						21 Oct 2016, 19:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>boborjan wrote:</cite><blockquote><p>Hi there,</p><p>How could I have a copy of the driver source that is spdif capable? I need spdif only.<br />Thanks for the great work btw</p></blockquote></div><p>Hi, like Sebastian said in the previous posts of this topic&nbsp; :<br /></p><div class="quotebox"><cite>SebastianFM wrote:</cite><blockquote><p>There is no such package in OpenWrt but no matter because to launch Squeezelite only one binary is required. I downloaded it from <a href="https://code.google.com/archive/p/squeezelite/downloads">here</a> and launched it on my device......</p></blockquote></div><p>By the way SebastianFM, are you still agree to share your work on the sound driver ? Many of us are waiting for it working with the jack output, may be some members of the community could help <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> . Please ! Thank you !</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p343137">
				<div class="post-metadata">
					<div class="post-num">Post #185</div>
					<div class="post-author">Chrisct</div>
					<div class="post-datetime">
						6 Nov 2016, 15:07					</div>
				</div>
				<div class="post-content content">
					<p>I am not familiar with OpenWrt. I was looking for NW11 tips.<br />I have just found the following driver: git pepe2k ar9331-i2s-alsa<br />Would it be useful for you Guys ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p343455">
				<div class="post-metadata">
					<div class="post-num">Post #186</div>
					<div class="post-author">schmurtz</div>
					<div class="post-datetime">
						11 Nov 2016, 13:49					</div>
				</div>
				<div class="post-content content">
					<p>By the way, for information you can find the nw11 for less than 23€ today :<br /><a href="https://www.aliexpress.com/item/Wireless-Stereo-Streaming-Music-Receiver-HIFI-AirMusic-Box-Mini-Music-Box-Wireless-Wifi-150Mbps-Wireless-Music/32749418093.html">https://www.aliexpress.com/item/Wireles … 18093.html</a></p><br /><div class="quotebox"><cite>Chrisct wrote:</cite><blockquote><p>I am not familiar with OpenWrt. I was looking for NW11 tips.<br />I have just found the following driver: git pepe2k ar9331-i2s-alsa<br />Would it be useful for you Guys ?</p></blockquote></div><p>Thanks, I already talk about it <a href="https://forum.openwrt.org/viewtopic.php?pid=324692#p324692">on this previous post</a>.</p><p>SebastianFM has replied :<br /></p><div class="quotebox"><cite>SebastianFM wrote:</cite><blockquote><p>I already know that pepe2k created such driver. Furthermore I found other ALSA drivers for AR9331. <br />But none of them supports 24, 32 bit formats and rates up to 96 KHz.</p></blockquote></div><p>So SebastianFM solution is very interesting but analog jack output driver is not finished and I&#039;ve got no news anymore <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" />. That&#039;s a shame because he was agree to share his work on the SPDIF driver that he has done... May be the community could have done the analog driver...</p><p>So pepe2k solution&#039;s is probably a good solution to have a fully functional device (with analog and digital output), I haven&#039;t test it yet. Is someone able to try his driver on NW11 ?</p>											<p class="post-edited">(Last edited by <strong>schmurtz</strong> on 11 Nov 2016, 13:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p343486">
				<div class="post-metadata">
					<div class="post-num">Post #187</div>
					<div class="post-author">schmurtz</div>
					<div class="post-datetime">
						12 Nov 2016, 04:46					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m still looking for a way to make WM8904/WM8918 analog audio output working. Yes I&#039;m pretty obstinate <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>I&#039;m sure that the link below can be very useful because this is a linux driver for wm8904 and <a href="https://redmine.blare-ids.org/projects/kblare/repository/revisions/091edccf7f500837f2b3942be0d40362d25234c0/entry/sound/soc/codecs/wm8727.c">their driver for WM8727</a> is pretty similar to <a href="https://github.com/franzflasch/ar9331-i2s-alsa/blob/master/src/wm8727.c">pepe2k version&#039;s</a>.</p><p><a href="https://redmine.blare-ids.org/projects/kblare/repository/revisions/985b11fa8064d55d0d5a84e68667434598911bb2/entry/sound/soc/codecs/wm8904.c">https://redmine.blare-ids.org/projects/ … s/wm8904.c</a></p><p>May be someone will be able to combine this driver with pepe2k&#039;s driver ?<br />May be I can help to make some tests ?<br />Please let me know what you think about it. Thanks for your help.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346498">
				<div class="post-metadata">
					<div class="post-num">Post #188</div>
					<div class="post-author">Chrisct</div>
					<div class="post-datetime">
						12 Dec 2016, 21:39					</div>
				</div>
				<div class="post-content content">
					<p>Hi Schmurtz,</p><p>I have played a little bit with OpenWRT, upgraded old WR740N<br />to 12.9 beta. Then, I built my own image and upgraded it.<br />Just to get more familiar with it.</p><p>After that, I followed this guide to build<br />the TL-WR703N (NW11) image for source:<br />blog*ljdelight*com/compiling-openwrt-from-source/<br />It took a lot of time. I had to create Lubuntu 14.04<br />on VMBox with 15GB image for that.<br />The build failed with:</p><div class="codebox"><pre><code>openwrt-chaoscalmer/openwrt$ tail -n 7 build.log
if [ -f /home/laptop/openwrt-chaoscalmer/openwrt/staging_dir/target-mips_34kc_uClibc-0.9.33.2/pkginfo/ubox.default.install.clean ]; then rm -f /home/laptop/openwrt-chaoscalmer/openwrt/staging_dir/target-mips_34kc_uClibc-0.9.33.2/pkginfo/ubox.default.install /home/laptop/openwrt-chaoscalmer/openwrt/staging_dir/target-mips_34kc_uClibc-0.9.33.2/pkginfo/ubox.default.install.clean; fi; echo &quot;logd&quot; &gt;&gt; /home/laptop/openwrt-chaoscalmer/openwrt/staging_dir/target-mips_34kc_uClibc-0.9.33.2/pkginfo/ubox.default.install
make[3]: Leaving directory `/home/laptop/openwrt-chaoscalmer/openwrt/package/system/ubox&#039;
make[2]: *** No rule to make target `package/libs/lzo/compile&#039;, needed by `package/utils/ubi-utils/compile&#039;.  Stop.
make[2]: Leaving directory `/home/laptop/openwrt-chaoscalmer/openwrt&#039;
make[1]: *** [/home/laptop/openwrt-chaoscalmer/openwrt/staging_dir/target-mips_34kc_uClibc-0.9.33.2/stamp/.package_compile] Error 2
make[1]: Leaving directory `/home/laptop/openwrt-chaoscalmer/openwrt&#039;
make: *** [world] Error 2</code></pre></div><p>but I was able to compile, base of that link, the pepe2k&#039;s driver.<br />I followed instructions from:<br />github*com/enc-X/ar9331-i2s-alsa (wm8727) 09-08-2016</p><div class="codebox"><pre><code>enc-X$ ls -l
total 32
-rw-r--r-- 1 laptop laptop  5711 Dec 11 19:42 ath79-i2s.ko
-rw-r--r-- 1 laptop laptop 10870 Dec 11 19:42 ath79-pcm-mbox.ko
-rw-r--r-- 1 laptop laptop  3284 Dec 11 19:42 ath-carambola2.ko
-rw-r--r-- 1 laptop laptop  3954 Dec 11 19:42 dev-audio.ko
-rw-r--r-- 1 laptop laptop  3648 Dec 11 19:42 wm8727.ko</code></pre></div><p>If you like, I can send you these files.</p><p>BTW, I have found 2 additional pepe2k&#039;s drivers at:<br />github*com/pepe2k/ar9331-i2s-alsa 28-01-2015<br />github*com/franzflasch/ar9331-i2s-alsa 12-02-2015</p><p>Since SebastianFM is not available any more, is it possible to share<br />with me his binary driver for test purposes ?<br />I am going to test pepe2k drivers on NW11, but I have to be sure,<br />that my test environment works fine.</p><p>I have also found another wm8904.c, wm8904.h at:<br />lxr*free-electrons*com/source/sound/soc/codecs/wm8904.c<br />It looks like we have different versions of this linux driver there.</p><p>Cheers,</p><p>Chris</p><p><span class="bbu">Update 1:</span></p><p>I have used different git repository:</p><div class="codebox"><pre><code>git clone -b chaos_calmer git://github.com/openwrt/openwrt.git</code></pre></div><p>After that, the above build &quot;Error 2&quot; is not seen any more.<br />Finally, I have got products:</p><div class="codebox"><pre><code>NW11: pwd
/home/laptop/openwrt-chaoscalmer/openwrt/bin/ar71xx
NW11: ls -l *wr703n*
-rw-r--r-- 1 laptop laptop 3932160 Dec 19 21:28 openwrt-ar71xx-generic-tl-wr703n-v1-squashfs-factory.bin
-rw-r--r-- 1 laptop laptop 3145732 Dec 19 21:28 openwrt-ar71xx-generic-tl-wr703n-v1-squashfs-sysupgrade.bin</code></pre></div><p>I was able to look inside the &quot;*factory*&quot; image by using windows 7-zip GUI.<br />It would be useful to verify added files like: lib/wifi/mac80211.sh&nbsp; <br />The 7-zip also works for original backup firmware, which I have got from:<br /></p><div class="codebox"><pre><code>cat /dev/mtd5 &gt; /tmp/mnt/disk-a0/backup/firmware.bin</code></pre></div><p>I used tftp to transfer files from/to NW11.</p><p>The audio driver&#039;s products are different. Probably, due to different git repository.</p><div class="codebox"><pre><code>NW11: pwd
/home/laptop/openwrt-chaoscalmer/openwrt/build_dir/target-mips_34kc_uClibc-0.9.33.2/linux-ar71xx_generic/ath79-i2s
NW11: ls -l *.ko
-rw-r--r-- 1 laptop laptop  5711 Dec 19 22:12 ath79-i2s.ko
-rw-r--r-- 1 laptop laptop 10854 Dec 19 22:12 ath79-pcm-mbox.ko
-rw-r--r-- 1 laptop laptop  3300 Dec 19 22:12 ath-carambola2.ko
-rw-r--r-- 1 laptop laptop  3970 Dec 19 22:12 dev-audio.ko
-rw-r--r-- 1 laptop laptop  3648 Dec 19 22:12 wm8727.ko</code></pre></div><p>Next step will be to try build the image &quot;tplink-8mlzma&quot; as suggested on page 7.<br />I will also try to select needed packages and prepare 3 versions of the above<br />audio drivers.</p><br /><p>PS. I am not able to put links on this forum. Is it possible to fix it ?</p>											<p class="post-edited">(Last edited by <strong>Chrisct</strong> on 20 Dec 2016, 19:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p348137">
				<div class="post-metadata">
					<div class="post-num">Post #189</div>
					<div class="post-author">boborjan</div>
					<div class="post-datetime">
						31 Dec 2016, 21:53					</div>
				</div>
				<div class="post-content content">
					<p>1) Is there any way anyone can get SebastianFm&#039;s binary only kernel driver?</p><p>2) a newbie question: how can I access the audio files on USB using a upnp client (e.g. bubbleupnp)? Do I need mpd/upnpcli or can it be done using the original firmware as well?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p349291">
				<div class="post-metadata">
					<div class="post-num">Post #190</div>
					<div class="post-author">Chrisct</div>
					<div class="post-datetime">
						14 Jan 2017, 15:24					</div>
				</div>
				<div class="post-content content">
					<p>Hi Boborjan,</p><p>AD2:<br />You need the latest original firmware FW: 1.1.01-A21(A.01) to access<br />music on usb. First, you can use &quot;airmusic&quot; or &quot;airmusic dlna&quot; for android<br />devices. You have to be connected directly to NW11 over wifi to get <br />the access by these applications.</p><p>Another way is to use one of these ones: <br />BubbleUPnP, AirWire, AllConnect, GinkoDlna,<br />but you need to modify the /etc/config/ushare configuration file<br />as described in previous updates. The ushare is not stable<br />on the NW11. It crashes often, so in addition you can use<br />a crontab job (described in previous update) to automatically restart<br />the ushare when it fails. I was not able to create play list.<br />When I change song, I see &quot;unlock&quot; then &quot;PCM&quot; on my audio system,<br />which causes static in case SPDIF connection.</p><p>The 3rd way is to use airmusic&#039;s web page &lt;your IP&gt;/play.shtml<br />This gui interface is not &quot;friendly&quot; but it works for me.</p><p>You cannot use the mpd/upnpcli, because (as I understand) supplier<br />has not written audio alsa driver. They have prepared their own standard.<br />I have no idea why they have not written alsa driver and complicated things. <br />We need audio driver to support the mpd and other audio software. <br />I think, Schmurtz has tried mpd with SebastianFM driver.</p><p>I hope this helps. Cheers, Chris</p>											<p class="post-edited">(Last edited by <strong>Chrisct</strong> on 15 Jan 2017, 15:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351196">
				<div class="post-metadata">
					<div class="post-num">Post #191</div>
					<div class="post-author">Aldo.Dekker</div>
					<div class="post-datetime">
						5 Feb 2017, 21:35					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Miha1l wrote:</cite><blockquote><p>ok, is there way to play file over web interface? i&#039;d like to use this in home automation system and play pre-recorded mp3 files like &quot;attention! front door open&quot;</p><p>is that possible to play mp3 on flash drive over http? or make web shell to run play command from console over web?</p><p>like this<br /></p><div class="codebox"><pre><code>#!/bin/sh 
echo &quot;Content-type: text/plain&quot;
echo &quot;&quot;
echo $QUERY_STRING
eval $QUERY_STRING</code></pre></div></blockquote></div><br /><p>I haven&#039;t found a way to play mp3 yet. But the application athplay can play &#039;wav&#039; files. So if you make a &#039;wav&#039; file you can play it with &quot;athplay your_file.wav&quot;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351359">
				<div class="post-metadata">
					<div class="post-num">Post #192</div>
					<div class="post-author">v1pr</div>
					<div class="post-datetime">
						7 Feb 2017, 18:31					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,</p><p>I&#039;ve an NW11 (M1 I think) and trying to upgrade it a bit. Did anyone manage to get a driver source for the sound card? In the dmesg output I&#039;ve WM8904, however checking the chip it&#039;s a WM8918G. On wolfson&#039;s site they are saying that the support is intergrated into alsa-soc: <a href="http://opensource.wolfsonmicro.com/node/6">http://opensource.wolfsonmicro.com/node/6</a></p><p>My main goal is to have snapcast client working on in, using the SPDIF output. If no driver source, than I would compile the snapcast agains 12.09, but would rather build a new image with Luci and everything.</p>											<p class="post-edited">(Last edited by <strong>v1pr</strong> on 7 Feb 2017, 18:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p353239">
				<div class="post-metadata">
					<div class="post-num">Post #193</div>
					<div class="post-author">Aldo.Dekker</div>
					<div class="post-datetime">
						1 Mar 2017, 10:09					</div>
				</div>
				<div class="post-content content">
					<p>Dear all,</p><p>I would like to use the AirMusic as internet radio, which means to play internet radio stations. I have been looking at play.shtml in /usr/mips/www. I can see that the script makes a playlist from the USB drive. But I cannot figure out a way to make a playlist with just some internet radiostations e.g. &quot;<a href="http://icecast.omroep.nl/radio4-bb-mp3">http://icecast.omroep.nl/radio4-bb-mp3</a>&quot;. I would like to use this station when the AirMusic starts, then I can throw my tuner in the bin........</p><p>Aldo</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p355125">
				<div class="post-metadata">
					<div class="post-num">Post #194</div>
					<div class="post-author">v1pr</div>
					<div class="post-datetime">
						28 Mar 2017, 00:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Aldo.Dekker wrote:</cite><blockquote><p>Dear all,</p><p>I would like to use the AirMusic as internet radio, which means to play internet radio stations. I have been looking at play.shtml in /usr/mips/www. I can see that the script makes a playlist from the USB drive. But I cannot figure out a way to make a playlist with just some internet radiostations e.g. &quot;<a href="http://icecast.omroep.nl/radio4-bb-mp3">http://icecast.omroep.nl/radio4-bb-mp3</a>&quot;. I would like to use this station when the AirMusic starts, then I can throw my tuner in the bin........</p><p>Aldo</p></blockquote></div><p>Did you try installing icecast as a package?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p355164">
				<div class="post-metadata">
					<div class="post-num">Post #195</div>
					<div class="post-author">Aldo.Dekker</div>
					<div class="post-datetime">
						28 Mar 2017, 22:27					</div>
				</div>
				<div class="post-content content">
					<p>I installed ipkg from &quot;downloads.openwrt.org/whiterussian/0.9/packages/ipkg-sh_0.99.149-2_mipsel.ipk&quot;. I opened the file with 7-zip and copied ipkg to a webserver and from there I moved it to the /bin directory using wget. </p><p>I copied ipkg.conf from <a href="http://owfs.sourceforge.net/openwrt/packages/ipkg.conf">http://owfs.sourceforge.net/openwrt/packages/ipkg.conf</a> and changed the src to &quot;owfs <a href="https://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/packages/">https://downloads.openwrt.org/attitude_ … /packages/</a></p><p>But when update the package list (&quot;ash /bin/ipkg update&quot;), my memory is full. So installing packages is not a good option, unless you are certain a package will work. </p><p>The icecast package is used as icecast server not player.</p><p>I found that the command &quot;wget -O - <a href="http://icecast.omroep.nl/radio4-bb-mp3">http://icecast.omroep.nl/radio4-bb-mp3</a> | madplay -&quot; might work. But madplay does not work with the i2s interface, it looks for &quot;dsp&quot; as device. </p><p>I hope anyone has another suggestion, With all changes my memory was completely full, so I&#039;m getting quite good in reinstalling the latest firmware version and adjusting ushare settings.</p>											<p class="post-edited">(Last edited by <strong>Aldo.Dekker</strong> on 28 Mar 2017, 22:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p355165">
				<div class="post-metadata">
					<div class="post-num">Post #196</div>
					<div class="post-author">v1pr</div>
					<div class="post-datetime">
						28 Mar 2017, 22:31					</div>
				</div>
				<div class="post-content content">
					<p>Why not just simply download the icecast package from <a href="https://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/packages/icecast_2.3.2-4_ar71xx.ipk?">https://downloads.openwrt.org/attitude_ … r71xx.ipk?</a></p><p>Download it to the device&#039;s /tmp and install it with ipkg. If there are any depencencies, download and install them as well.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p355440">
				<div class="post-metadata">
					<div class="post-num">Post #197</div>
					<div class="post-author">12characters</div>
					<div class="post-datetime">
						2 Apr 2017, 02:50					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m a bit late to the party but is there any way of disabling the hotspot function on the NW11 to minimise the exposure to my private network?<br />I just want to run the Airmusic as an airplay device which works perfect for everyone on the same wifi or lan the NW11 is connected to.</p><p>But how do I disable the Hotspot the NW11 enables?<br />Can it be done over telnet?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p355460">
				<div class="post-metadata">
					<div class="post-num">Post #198</div>
					<div class="post-author">v1pr</div>
					<div class="post-datetime">
						2 Apr 2017, 10:41					</div>
				</div>
				<div class="post-content content">
					<p>Yep, it&#039;s pretty easy. Log in over telnet and edit the file &#039;/etc/config/wireless&#039; (you can use &#039;vi&#039; for that). Just add &#039;disabled 1&#039; for the correct section. Save and reboot.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p355474">
				<div class="post-metadata">
					<div class="post-num">Post #199</div>
					<div class="post-author">12characters</div>
					<div class="post-datetime">
						2 Apr 2017, 17:13					</div>
				</div>
				<div class="post-content content">
					<p>All done.<br />Thank you viper.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p359226">
				<div class="post-metadata">
					<div class="post-num">Post #200</div>
					<div class="post-author">odya_kun</div>
					<div class="post-datetime">
						28 May 2017, 20:43					</div>
				</div>
				<div class="post-content content">
					<p>Does someone have success with building OpenWRT for NW11? Could you share a firmware image?</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 8 of 9</div><nav><ul><li><a href="viewtopic.php%3Fid=50512&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=50512&amp;p=6.html">6</a></li><li><a href="viewtopic.php%3Fid=50512&amp;p=7.html">7</a></li><li class="pagination-current"><span>8</span></li><li><a href="viewtopic.php%3Fid=50512&amp;p=9.html">9</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>