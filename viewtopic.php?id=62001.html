<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> git or svn?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 9 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p306532">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Argosy</div>
					<div class="post-datetime">
						6 Jan 2016, 23:18					</div>
				</div>
				<div class="post-content content">
					<p>I try to compile:</p><p>git clone git://git.openwrt.org/openwrt.git</p><p>but it always end with a failure in gcc where some dependency to libc are missing.</p><p>Now i try </p><p>svn co svn://svn.openwrt.org/openwrt/trunk/</p><p>is it the same sources??? At least when using svn i see the revision number which looks current.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306540">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Argosy</div>
					<div class="post-datetime">
						7 Jan 2016, 00:25					</div>
				</div>
				<div class="post-content content">
					<p>Looks I don&#039;t get further...all I want is to compile a driver for my usb wifi....</p><p>Is there a other way to get this compiled for openwrt Raspberry PI 2 ?</p><p><a href="http://www.edimax.com/edimax/download/download/data/edimax/global/download/for_home/wireless_adapters/wireless_adapters_ac600_dual-band/ew-7811uac">http://www.edimax.com/edimax/download/d … ew-7811uac</a></p><p>it can&#039;t be that complicate to get a compiler on a existing snapshot or not?</p>											<p class="post-edited">(Last edited by <strong>Argosy</strong> on 7 Jan 2016, 00:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306581">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">zloop</div>
					<div class="post-datetime">
						7 Jan 2016, 10:07					</div>
				</div>
				<div class="post-content content">
					<p>You can see the svn revision number in git log, and you can see from the commit dates that those are the same source and synced.</p><br /><p>You have to create an OpenWrt Makefile where you compile that driver as a module for OpenWrt.<br />There are other drivers in OpenWrt: mt76 or mwlwifi<br />Look at those Makefiles and you see how compiling a driver for OpenWrt works.</p><p>If its more complicated you might complain to Realtek or Edimax for not providing a driver thats integrated into Linux Kernel like many other wireless drivers.</p><p>as a reference: <a href="https://wikidevi.com/wiki/Edimax_EW-7811UAC">https://wikidevi.com/wiki/Edimax_EW-7811UAC</a></p><p>Afaik there might be some USB sticks or solutions that provide ac over USB (Mediatek mt7601u hardware is enabled in OpenWrt)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306600">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Argosy</div>
					<div class="post-datetime">
						7 Jan 2016, 13:07					</div>
				</div>
				<div class="post-content content">
					<p>Hello zloop,</p><p>thanks for your help.</p><p>So I need to crosscompile the driver? I though i could just install gcc on the openwrt and compile that little piece of software there.</p><p>Well...then i try this road now :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306601">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						7 Jan 2016, 13:20					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Argosy wrote:</cite><blockquote><p>So I need to crosscompile the driver?</p></blockquote></div><p>Yes.</p><p>And Openwrt&#039;s kernel module checksum system is so strict that you can&#039;t install that new kernel module to be used with an old kernel. You have to cross-compile the kernel at the same time. (In practice, the whole firmware)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306614">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Argosy</div>
					<div class="post-datetime">
						7 Jan 2016, 15:33					</div>
				</div>
				<div class="post-content content">
					<p>Anyone has a documentation to the buildroot system used for openwrt? </p><p>I was reading buildroot.org but i strugle with the different directory structur.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306617">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						7 Jan 2016, 16:48					</div>
				</div>
				<div class="post-content content">
					<p><a href="https://wiki.openwrt.org/about/toolchain">https://wiki.openwrt.org/about/toolchain</a><br /><a href="https://wiki.openwrt.org/doc/howto/buildroot.exigence">https://wiki.openwrt.org/doc/howto/buildroot.exigence</a><br /><a href="https://wiki.openwrt.org/doc/howto/build">https://wiki.openwrt.org/doc/howto/build</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306630">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">elektroman</div>
					<div class="post-datetime">
						7 Jan 2016, 19:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Argosy wrote:</cite><blockquote><p>Looks I don&#039;t get further...all I want is to compile a driver for my usb wifi....</p><p>Is there a other way to get this compiled for openwrt Raspberry PI 2 ?</p><p><a href="http://www.edimax.com/edimax/download/download/data/edimax/global/download/for_home/wireless_adapters/wireless_adapters_ac600_dual-band/ew-7811uac">http://www.edimax.com/edimax/download/d … ew-7811uac</a></p><p>it can&#039;t be that complicate to get a compiler on a existing snapshot or not?</p></blockquote></div><p>HI<br />another device I maybe need in may (home) lab,<br />for RTL8812/RTL8821 driver check<br />Is this antenna detachable ??</p>											<p class="post-edited">(Last edited by <strong>elektroman</strong> on 7 Jan 2016, 19:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306714">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Argosy</div>
					<div class="post-datetime">
						8 Jan 2016, 16:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hnyman wrote:</cite><blockquote><p><a href="https://wiki.openwrt.org/about/toolchain">https://wiki.openwrt.org/about/toolchain</a><br /><a href="https://wiki.openwrt.org/doc/howto/buildroot.exigence">https://wiki.openwrt.org/doc/howto/buildroot.exigence</a><br /><a href="https://wiki.openwrt.org/doc/howto/build">https://wiki.openwrt.org/doc/howto/build</a></p></blockquote></div><p>Thanks but that isn&#039;t a documentation how to work with buildroot...well yes it explains how you can compile openwrt, but I was looking for a description where to add the source code of the rtl8211uac drivers and what files i need to modify</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306716">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Argosy</div>
					<div class="post-datetime">
						8 Jan 2016, 16:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>HI<br />another device I maybe need in may (home) lab,<br />for RTL8812/RTL8821 driver check<br />Is this antenna detachable ??</p></blockquote></div><br /><p>Well yes it is since, raspberry Pi dosn&#039;t have a Wifi you need to use a usb wifi wich of course is detachable, like any other usb device. Or did i misunderstood you somehow?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306718">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">elektroman</div>
					<div class="post-datetime">
						8 Jan 2016, 16:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Argosy wrote:</cite><blockquote><div class="quotebox"><blockquote><p>HI<br />another device I maybe need in may (home) lab,<br />for RTL8812/RTL8821 driver check<br />Is this antenna detachable ??</p></blockquote></div><br /><p>Well yes it is since, raspberry Pi dosn&#039;t have a Wifi you need to use a usb wifi wich of course is detachable, like any other usb device. Or did i misunderstood you somehow?</p></blockquote></div><p>Good.<br />I&#039;ve plenty of this devices laying around here for testing, your is the newest.</p><p>for the driver itself to work with openwrt read here<br /><a href="https://github.com/ulli-kroll/rtl8821au">https://github.com/ulli-kroll/rtl8821au</a><br />This is my repo</p><p>The time I wrote this README I&#039;ve tested some devices on Carambola 1,<br />some RT3052 platform.</p><p>You don&#039;t need to change your buildsystem</p>											<p class="post-edited">(Last edited by <strong>elektroman</strong> on 8 Jan 2016, 16:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p307502">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Argosy</div>
					<div class="post-datetime">
						13 Jan 2016, 16:36					</div>
				</div>
				<div class="post-content content">
					<p>@elektroman Thanks..i will check your link</p><p>I found some documentation and can now compile the rtl8812au drivers in openwrt...well at least for x86. But when I choose Target ARM i get this here:</p><p>make[3]: Entering directory `/home/stg/openwrt/package/kernel/rtl8812au&#039;<br />CFLAGS=&quot;-Os -pipe -march=armv7-a -mtune=cortex-a7 -mfpu=neon-vfpv4 -fno-caller-saves -fhonour-copts -Wno-error=unused-but-set-variable -Wno-error=unused-result -mfloat-abi=hard -Wformat -Werror=format-security -fstack-protector -D_FORTIFY_SOURCE=1 -Wl,-z,now -Wl,-z,relro&nbsp; -I/home/stg/openwrt/staging_dir/target-arm_cortex-a7+neon-vfpv4_musl-1.1.11_eabi/usr/include -I/home/stg/openwrt/staging_dir/target-arm_cortex-a7+neon-vfpv4_musl-1.1.11_eabi/include -I/home/stg/openwrt/staging_dir/toolchain-arm_cortex-a7+neon-vfpv4_gcc-5.2.0_musl-1.1.11_eabi/usr/include -I/home/stg/openwrt/staging_dir/toolchain-arm_cortex-a7+neon-vfpv4_gcc-5.2.0_musl-1.1.11_eabi/include/fortify -I/home/stg/openwrt/staging_dir/toolchain-arm_cortex-a7+neon-vfpv4_gcc-5.2.0_musl-1.1.11_eabi/include &quot; CXXFLAGS=&quot;-Os -pipe -march=armv7-a -mtune=cortex-a7 -mfpu=neon-vfpv4 -fno-caller-saves -fhonour-copts -Wno-error=unused-but-set-variable -Wno-error=unused-result -mfloat-abi=hard -Wformat -Werror=format-security -fstack-protector -D_FORTIFY_SOURCE=1 -Wl,-z,now -Wl,-z,relro&nbsp; -I/home/stg/openwrt/staging_dir/target-arm_cortex-a7+neon-vfpv4_musl-1.1.11_eabi/usr/include -I/home/stg/openwrt/staging_dir/target-arm_cortex-a7+neon-vfpv4_musl-1.1.11_eabi/include -I/home/stg/openwrt/staging_dir/toolchain-arm_cortex-a7+neon-vfpv4_gcc-5.2.0_musl-1.1.11_eabi/usr/include -I/home/stg/openwrt/staging_dir/toolchain-arm_cortex-a7+neon-vfpv4_gcc-5.2.0_musl-1.1.11_eabi/include/fortify -I/home/stg/openwrt/staging_dir/toolchain-arm_cortex-a7+neon-vfpv4_gcc-5.2.0_musl-1.1.11_eabi/include &quot; LDFLAGS=&quot;-L/home/stg/openwrt/staging_dir/target-arm_cortex-a7+neon-vfpv4_musl-1.1.11_eabi/usr/lib -L/home/stg/openwrt/staging_dir/target-arm_cortex-a7+neon-vfpv4_musl-1.1.11_eabi/lib -L/home/stg/openwrt/staging_dir/toolchain-arm_cortex-a7+neon-vfpv4_gcc-5.2.0_musl-1.1.11_eabi/usr/lib -L/home/stg/openwrt/staging_dir/toolchain-arm_cortex-a7+neon-vfpv4_gcc-5.2.0_musl-1.1.11_eabi/lib -znow -zrelro &quot; make -j1 -C /home/stg/openwrt/build_dir/target-arm_cortex-a7+neon-vfpv4_musl-1.1.11_eabi/linux-brcm2708_bcm2709/rtl8812au-0.9.2/. AR=&quot;arm-openwrt-linux-muslgnueabi-gcc-ar&quot; AS=&quot;arm-openwrt-linux-muslgnueabi-gcc -c -Os -pipe -march=armv7-a -mtune=cortex-a7 -mfpu=neon-vfpv4 -fno-caller-saves -fhonour-copts -Wno-error=unused-but-set-variable -Wno-error=unused-result -mfloat-abi=hard -Wformat -Werror=format-security -fstack-protector -D_FORTIFY_SOURCE=1 -Wl,-z,now -Wl,-z,relro&quot; LD=arm-openwrt-linux-muslgnueabi-ld NM=&quot;arm-openwrt-linux-muslgnueabi-gcc-nm&quot; CC=&quot;arm-openwrt-linux-muslgnueabi-gcc&quot; GCC=&quot;arm-openwrt-linux-muslgnueabi-gcc&quot; CXX=&quot;arm-openwrt-linux-muslgnueabi-g++&quot; RANLIB=&quot;arm-openwrt-linux-muslgnueabi-gcc-ranlib&quot; STRIP=arm-openwrt-linux-muslgnueabi-strip OBJCOPY=arm-openwrt-linux-muslgnueabi-objcopy OBJDUMP=arm-openwrt-linux-muslgnueabi-objdump SIZE=arm-openwrt-linux-muslgnueabi-size CROSS=&quot;arm-openwrt-linux-muslgnueabi-&quot; ARCH=&quot;arm&quot; ;<br />make[4]: Entering directory `/home/stg/openwrt/build_dir/target-arm_cortex-a7+neon-vfpv4_musl-1.1.11_eabi/linux-brcm2708_bcm2709/rtl8812au-0.9.2&#039;<br />make ARCH=arm CROSS_COMPILE= -C /lib/modules/3.19.0-43-generic/build M=/home/stg/openwrt/build_dir/target-arm_cortex-a7+neon-vfpv4_musl-1.1.11_eabi/linux-brcm2708_bcm2709/rtl8812au-0.9.2&nbsp; modules<br />make[5]: Entering directory `/usr/src/linux-headers-3.19.0-43-generic&#039;<br />&nbsp; CC [M]&nbsp; /home/stg/openwrt/build_dir/target-arm_cortex-a7+neon-vfpv4_musl-1.1.11_eabi/linux-brcm2708_bcm2709/rtl8812au-0.9.2/core/rtw_cmd.o<br />In file included from include/asm-generic/int-ll64.h:10:0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from ./arch/arm/include/asm/types.h:4,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from include/uapi/linux/types.h:4,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from include/linux/types.h:5,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /home/stg/openwrt/build_dir/target-arm_cortex-a7+neon-vfpv4_musl-1.1.11_eabi/linux-brcm2708_bcm2709/rtl8812au-0.9.2/include/basic_types.h:80,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /home/stg/openwrt/build_dir/target-arm_cortex-a7+neon-vfpv4_musl-1.1.11_eabi/linux-brcm2708_bcm2709/rtl8812au-0.9.2/include/drv_types.h:31,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /home/stg/openwrt/build_dir/target-arm_cortex-a7+neon-vfpv4_musl-1.1.11_eabi/linux-brcm2708_bcm2709/rtl8812au-0.9.2/core/rtw_cmd.c:22:<br />include/uapi/asm-generic/int-ll64.h:11:29: fatal error: asm/bitsperlong.h: No such file or directory<br />compilation terminated.</p><br /><p>anyone know what is wrong?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p307632">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">elektroman</div>
					<div class="post-datetime">
						14 Jan 2016, 18:42					</div>
				</div>
				<div class="post-content content">
					<p>Please post your cmdline for compiling the module</p><p>As I can see this is not &quot;my&quot; source<br />-&gt; rtl8812au-0.9.2</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p307709">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">tl71</div>
					<div class="post-datetime">
						15 Jan 2016, 09:38					</div>
				</div>
				<div class="post-content content">
					<p>This is the problem:</p><div class="quotebox"><cite>Argosy wrote:</cite><blockquote><p>make ARCH=arm CROSS_COMPILE= -C /lib/modules/3.19.0-43-generic/build M=/home/stg/openwrt/build_dir/target-arm_cortex-a7+neon-vfpv4_musl-1.1.11_eabi/linux-brcm2708_bcm2709/rtl8812au-0.9.2&nbsp; modules<br />make[5]: Entering directory `/usr/src/linux-headers-3.19.0-43-generic&#039;</p></blockquote></div><p>The build is using the host kernel source dir, instead of the openwrt one.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p308296">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">Argosy</div>
					<div class="post-datetime">
						20 Jan 2016, 09:18					</div>
				</div>
				<div class="post-content content">
					<p>Oha !</p><p>I&#039;m not the Makefile specialist. Can someone help me correct this?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p308322">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">Argosy</div>
					<div class="post-datetime">
						20 Jan 2016, 13:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>elektroman wrote:</cite><blockquote><p>Please post your cmdline for compiling the module</p><p>As I can see this is not &quot;my&quot; source<br />-&gt; rtl8812au-0.9.2</p></blockquote></div><p>doch doch war dein Sources...ich hab im Makefile noch ein PKG_VERSION drin.</p><p>Wie kann ich denn deine Source in Buildroot Compilieren? ich hab es mit diesem Makefile versucht:</p><p>#<br /># Copyright (C) 2008 OpenWrt.org<br />#<br /># This is free software, licensed under the GNU General Public License v2.<br /># See /LICENSE for more information.<br />#<br />I2CMENU:=rtl8812au</p><p>include $(TOPDIR)/rules.mk<br />include $(INCLUDE_DIR)/kernel.mk</p><br /><p>PKG_NAME:=rtl8812au<br />PKG_RELEASE:=2<br />PKG_VERSION:=0.9.2</p><p>PKG_BUILD_DIR:=$(KERNEL_BUILD_DIR)/$(PKG_NAME)-$(PKG_VERSION)</p><br /><p>include $(INCLUDE_DIR)/package.mk</p><p>define KernelPackage/rtl8812au<br />&nbsp; &nbsp; &nbsp; &nbsp; SUBMENU:=Wireless Drivers<br />&nbsp; &nbsp; &nbsp; &nbsp; TITLE:=rtl8812au device<br />&nbsp; &nbsp; &nbsp; &nbsp; FILES:=$(PKG_BUILD_DIR)/8812au.ko<br />&nbsp; &nbsp; &nbsp; &nbsp; AUTOLOAD:=$(call AutoLoad,50,rtl8812au)<br />endef</p><p>define KernelPackage/i2c-gpio-custom/description<br />Kernel module rtl8812au device.<br />endef</p><p>MAKE_OPTS:= \<br />&nbsp; &nbsp; &nbsp; &nbsp; ARCH=&quot;$(LINUX_KARCH)&quot; \<br />&nbsp; &nbsp; &nbsp; &nbsp; CROSS_COMPILE=&quot;$(TARGET_CROSS)&quot; \<br />&nbsp; &nbsp; &nbsp; &nbsp; SUBDIRS=&quot;$(PKG_BUILD_DIR)&quot; \<br />&nbsp; &nbsp; &nbsp; &nbsp; EXTRA_CFLAGS=&quot;$(EXTRA_CFLAGS) \<br />&nbsp; &nbsp; &nbsp; &nbsp; $(EXTRA_KCONFIG)</p><p>define Build/Prepare<br />&nbsp; &nbsp; &nbsp; &nbsp; mkdir -p $(PKG_BUILD_DIR)<br />&nbsp; &nbsp; &nbsp; &nbsp; $(CP) ./src/* $(PKG_BUILD_DIR)/<br />endef</p><br /><br /><p>$(eval $(call KernelPackage,rtl8812au))</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p309389">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">elektroman</div>
					<div class="post-datetime">
						28 Jan 2016, 18:31					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>use <br />package/kernel/mt76/<br />as template<br />i.e<br />package/kernel/rtl8812au </p><p>and so on<br />please checkout a new branch, so you didn&#039;t lost your local changes</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>