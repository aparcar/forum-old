<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> How to enable wifi from the commandline</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p299593">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">frietpan</div>
					<div class="post-datetime">
						12 Nov 2015, 23:13					</div>
				</div>
				<div class="post-content content">
					<p>I know there is a uci command that can enable the wifi. but i cant remember it (it was a long one)<br />And google is not helpful today either.... and in the wiki there is also no answer</p><p>when say<br /></p><div class="codebox"><pre><code>wifi up</code></pre></div><p>or<br /></p><div class="codebox"><pre><code>wifi enable</code></pre></div><p>then I get <br /></p><div class="codebox"><pre><code>&#039;radio0 disabled&#039;</code></pre></div><p>is there a short and simple command to do this</p><p>something like <br /></p><div class="codebox"><pre><code>radio0 enable</code></pre></div><p>When you just did a firstboot and then discover that you dont have a LAN cable then you are pretty much stuck. unless you can find that loooooooooooooooooooooooooong uci command to do the magic </p><p>If i ever find the long command i sure will add it to the wiki.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p299608">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">frietpan</div>
					<div class="post-datetime">
						13 Nov 2015, 01:12					</div>
				</div>
				<div class="post-content content">
					<p>uci set wireless.@wifi-device[0].disabled=0<br />uci commit</p><p>That did the trick,shorter then the loooong command i found the other day. But is there an even shorter option?</p><p>The long command enabled only once if i remember it right. and it also set passphrase, a shame that i cant find it back...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p299655">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						13 Nov 2015, 14:59					</div>
				</div>
				<div class="post-content content">
					<p>Hint #1: if you make some changes in Luci and click &quot;Save&quot; (but not &quot;Save &amp; Apply&quot;) you can then check out how these changes can be made with uci commands.<br />Hint #2: if you have things set up the way you want you can do uci show (or uci show wireless for example) and see what settings are set which way so you can then replicate it with uci set<br />Hint #3: the droids you looking for are:<br /></p><div class="codebox"><pre><code>uci set wireless.@wifi-iface[0].ssid=wifiname
uci set wireless.@wifi-iface[0].encryption=psk2
uci set wireless.@wifi-iface[0].key=password</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p299792">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">frietpan</div>
					<div class="post-datetime">
						14 Nov 2015, 22:23					</div>
				</div>
				<div class="post-content content">
					<p>Thanks!</p><p>I didn&#039;t realise that it was a button.&nbsp; :-)<br />This is a very handy page.</p><p>However, when you just have softbricked a device, and gave a firstboot command to go &#039;back to start&#039;. Then it is very annoying that there is no quick and simple way to turn on wifi.&nbsp; &nbsp;</p><p>Some devices have the Wifi toggle as short-press under the reset button, and that may actually be a nice candidate to have as default on all openWRT devices.&nbsp; </p><p>And then some command like &#039;toggle radio0&#039; perhaps?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p299828">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						15 Nov 2015, 03:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>frietpan wrote:</cite><blockquote><p>However, when you just have softbricked a device, and gave a firstboot command to go &#039;back to start&#039;. Then it is very annoying that there is no quick and simple way to turn on wifi.</p></blockquote></div><p>Well, you can build your own image with the pre-set root password and wifi set up the way you want with the image builder. That way when you flash it you&#039;ll have wifi working right away with your preferred SSID/password.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300087">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">frietpan</div>
					<div class="post-datetime">
						17 Nov 2015, 00:41					</div>
				</div>
				<div class="post-content content">
					<p>I see, thats&#039;s indeed a thing i can give a try.</p><p>However that does not make things any easier for newcomers who give OpenWrt a try.&nbsp; Then discover they need to do a lot of things they where not prepared for.&nbsp; It all can be solved, but this is one thing that could use a slightly more &#039;newbie friendly&#039; approach.&nbsp; </p><p>I found it odd that that there was no simple command for this, but this slightly longer uci command works so ...yeah.</p><p>Thanks again for introducing me to that unsaved changes page! I learned a few more things there and I&#039;m probably going to learn more from it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300107">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						17 Nov 2015, 03:35					</div>
				</div>
				<div class="post-content content">
					<p>Well, if you think about it, OpenWrt team doesn&#039;t have the luxury of printing a WiFi password on a sticker on a router, so the only option would be to either enable non protected WiFi on start or enable a WiFi with a well-known/published password which is equally insecure.</p><p>And then again, using Image Builder to create and image with the WiFi setup the way you want is not much harder than running a few commands in Linux command line. I&#039;m a newbie and I managed.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300244">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">frietpan</div>
					<div class="post-datetime">
						18 Nov 2015, 01:56					</div>
				</div>
				<div class="post-content content">
					<p>But having WiFi disabled by default is not the issue that&#039;s a good thing.</p><p>Just that it is not easy to switch it on from the commandline after doing a firstboot.<br />I can use a image builder for personal devices, but if i need to help someone who has a standard config then the issue still exists.&nbsp; </p><p>I manage, but not every newbie has the same skills, and this just could be a lot more simple and make it more easy for a bunch of newbies. </p><p>with a command that can toggle wifi on and off after firstboot all would be solved.&nbsp; After all The OpenWrt SSID WITHOUT a passphrase is already configured. </p><p>Say you are with a rescue team at a earthquake zone, with a bunch of mobile devices used to document names etc. that report to a single server/laptop.&nbsp; And a OpenWrt device is used as router for the whole setup.</p><p>Someone messes up the config. (thats not to difficult) but as a quick solution firstboot is used.<br />And... o BLAST we did not pack a LAN cable, Or LAN cable is damaged.&nbsp; </p><p>That&#039;s going to be a bit of an issue...&nbsp; And where i agree a custom image can help me for personal use, but i dont think it will be any use in a more difficult situation.&nbsp; &nbsp;</p><p>Ok it is a very extreme example, and sure there you dont want newbie OpenWrt hacking :-)<br />But i hope it illustrates the bigger picture of what i tried to say.</p><p>A OpenWrt router at firstboot is not secure at all, everyone can log in but you NEED a LAN cable.</p><p>Tablets and Phones dont have LAN, but they do have USB. Thats another approach alltogether. <br />The solution is probably a combination of our idea&#039;s. :-)<br />I&#039;m going to explore building my own image. Still i hope for a simple command to toggle wifi on<br />IE a simple way to set disabled=0 in a situation where disabled=1</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300267">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Borromini</div>
					<div class="post-datetime">
						18 Nov 2015, 09:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>frietpan wrote:</cite><blockquote><p>However, when you just have softbricked a device, and gave a firstboot command to go &#039;back to start&#039;. Then it is very annoying that there is no quick and simple way to turn on wifi.</p></blockquote></div><p>I don&#039;t know if this works in failsafe (i think it should in firstboot) - since you have no writeable overlay. But to use the wireless, you should first configure it:</p><div class="codebox"><pre><code>wifi detect</code></pre></div><p>That generates a default config which you can then tweak, then just run </p><div class="codebox"><pre><code>wifi</code></pre></div><p>to start wireless.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300270">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						18 Nov 2015, 09:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>frietpan wrote:</cite><blockquote><p>I know there is a uci command that can enable the wifi. but i cant remember it (it was a long one)<br />And google is not helpful today either.... and in the wiki there is also no answer</p></blockquote></div><p>I literally entered &#039;openwrt enable wireless&#039; in google and first hit is <a href="https://wiki.openwrt.org/doc/uci/wireless">https://wiki.openwrt.org/doc/uci/wireless</a> which has your answer (on the top!)... Kids today, asking on the forum before even trying to learn <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>arokh</strong> on 18 Nov 2015, 09:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300356">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">frietpan</div>
					<div class="post-datetime">
						19 Nov 2015, 01:15					</div>
				</div>
				<div class="post-content content">
					<p>@ arokh&nbsp; <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />&nbsp; <br />uci set wireless.@wifi-device[0].disabled=0; uci commit wireless; wifi&nbsp; thats the long and hard to remember command i mentioned.&nbsp; This id not something anyone knows from the top of the head.</p><p>this kid&#039;s rusty brain has a hard time to keep up with the whizkids. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>@Borromini<br />Thanks!!<br />I&#039;ll give that a try tomorrow That&#039;s actually nice and easy on the brain.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300393">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						19 Nov 2015, 12:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>frietpan wrote:</cite><blockquote><p>@ arokh&nbsp; <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />&nbsp; <br />uci set wireless.@wifi-device[0].disabled=0; uci commit wireless; wifi&nbsp; thats the long and hard to remember command i mentioned.&nbsp; This id not something anyone knows from the top of the head.</p><p>this kid&#039;s rusty brain has a hard time to keep up with the whizkids. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>That&#039;s understandable, I was referring to the fact that you said google and the wiki gave no answer, yet the wiki entry is right there on the first google hit.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300416">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						19 Nov 2015, 15:25					</div>
				</div>
				<div class="post-content content">
					<p>Maybe someone with the intimate knowledge of the OpenWrt wireless devices and their enumeration can create a package with the simple bash scripts to easily bring wifi up without having to learn the long commands required to do so and then battle to have this package included in the default build.</p><p>Or better yet, modify the /sbin/wifi script to support the new commands?</p>											<p class="post-edited">(Last edited by <strong>stangri</strong> on 19 Nov 2015, 15:29)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300421">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">stas2z</div>
					<div class="post-datetime">
						19 Nov 2015, 16:01					</div>
				</div>
				<div class="post-content content">
					<p>smth like this?<br /></p><div class="codebox"><pre><code>root@router:~# cat ./wifiswitch.sh
#!/bin/sh

if [ `uci get wireless.${1}` ] ; then
if [ $2 == &quot;off&quot; ] ; then
uci set wireless.${1}.disabled=1;
uci commit wireless;
wifi;
else
if [ $2 == &quot;on&quot; ] ; then
uci set wireless.${1}.disabled=0;
uci commit wireless;
wifi;
else
echo &quot;Usage wifiswitch.sh radioX on|off&quot;;
fi
fi
else
echo &quot;Invalid radio device: ${1}&quot;
fi</code></pre></div>											<p class="post-edited">(Last edited by <strong>stas2z</strong> on 20 Nov 2015, 00:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300486">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">frietpan</div>
					<div class="post-datetime">
						19 Nov 2015, 23:46					</div>
				</div>
				<div class="post-content content">
					<p>@arokh True, I should have searched better, I often use Duckduckgo instead of Google.&nbsp; I&#039;m getting used to it since it is often giving better results then googles ad-infested results.&nbsp; </p><p>@stangri In a way i hope that this makes it into the default build, i don&#039;t have coding skills (or very limited..)&nbsp; I can manage without such option, though i&#039;m convinced that such option would improve the user experience of many users, specially newcomers. </p><p>@stas2z i will give that a try.&nbsp; Now i have to learn where to put that script. :-D Thanks!</p><p>@Borromini i did try <br />wifi detect<br />wifi<br />though that didn&#039;t seem to work.&nbsp; Will try again in a day or two when I mess up my current experiment. :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300495">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">stas2z</div>
					<div class="post-datetime">
						20 Nov 2015, 00:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>frietpan wrote:</cite><blockquote><p>@stas2z i will give that a try.&nbsp; Now i have to learn where to put that script. :-D Thanks!</p></blockquote></div><p>put it to /usr/sbin and chmod 755 wifiswitch.sh</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300497">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">frietpan</div>
					<div class="post-datetime">
						20 Nov 2015, 00:55					</div>
				</div>
				<div class="post-content content">
					<p>only needed<br />;<br />at the end of:<br />echo &quot;Invalid radio device: ${1}&quot; ;</p><p>Between all these smart kids it&#039;s easy to feel stupid, but once you learned something then you can feel the brain expand. Thanks!!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300498">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">stas2z</div>
					<div class="post-datetime">
						20 Nov 2015, 01:22					</div>
				</div>
				<div class="post-content content">
					<p>a bit improved version supports on/off radioN or ifaceN (one radio can contain several ifaces)<br /></p><div class="codebox"><pre><code>root@router:~# cat /usr/sbin/wifiswitch 
#!/bin/sh

if [ `uci -q get wireless.${1}` ] ; then
    if [ $2 = &quot;off&quot; ] ; then
        echo &quot;Switching off ${1}.&quot;;
        uci set wireless.${1}.disabled=1;
        uci commit wireless;
        wifi;
    else
        if [ $2 = &quot;on&quot; ] ; then
            echo &quot;Switching on ${1}.&quot;;
            uci set wireless.${1}.disabled=0;
            uci commit wireless;
            wifi;
        else
            echo &quot;Usage: wifiswitch radioX|ifaceX on|off&quot;;
        fi
    fi
else
    if echo $1 | grep -q &#039;^iface\d*$&#039; ; then
        IF=`echo ${1} | sed -r &#039;s/iface(\d*)/\1/gi&#039;`;
        if [ `uci -q get wireless.@wifi-iface[${IF}]` ] ; then
            SSID=`uci -q get wireless.@wifi-iface[${IF}].ssid`;
            BSSID=`uci -q get wireless.@wifi-iface[${IF}].bssid`;
                if [ $2 = &quot;off&quot; ] ; then
                echo &quot;Switching off ${SSID} [${BSSID}].&quot;;
                        uci set wireless.@wifi-iface[${IF}].disabled=1;
                        uci commit wireless;
                        wifi;
            else
                if [ $2 = &quot;on&quot; ] ; then
                    echo &quot;Switching on ${SSID} [${BSSID}].&quot;;
                                uci set wireless.@wifi-iface[${IF}].disabled=0;
                                uci commit wireless;
                                wifi;
                        else
                                echo &quot;Usage: wifiswitch radioX|ifaceX on|off&quot;;
                        fi
                   fi
        else
            echo &quot;Iface ${IF} doesn&#039;t exists.&quot;;
        fi
    else
        echo &quot;Invalid radio device or iface: ${1}.&quot;;
    fi
fi</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300734">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">frietpan</div>
					<div class="post-datetime">
						22 Nov 2015, 00:38					</div>
				</div>
				<div class="post-content content">
					<p>That works nice, would be great to have this as a default in Chaos Calmer.&nbsp; Thanks stas2z!</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>