<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> nanostation vlan0(vlan66)---wifi_ssid1(wifi_ssid2)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 25 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p298824">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">june8807</div>
					<div class="post-datetime">
						6 Nov 2015, 16:03					</div>
				</div>
				<div class="post-content content">
					<p>Hello All!</p><p>Please help me with the question!</p><p>I have OpenWRT Kamikaze (r18961), Nanostation2</p><p>I am trying to create two SSID network. One - from ethernet (no tag), and seconf from the vlanid66</p><p>nothing more. just bridge <br />ethernet--ssid1<br />tagged_ethernet1--untagged_ssid2</p><p>I created two wifi ssid - ok<br />i created additional v66 interface eth0.66<br />then, put Interface in &#039;custom&#039; with eth0.66,ath1</p><p>---<br />root@OpenWrt:~# ifconfig<br />ath0&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:15:6D:9E:04:A9&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:7 errors:0 dropped:29 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:420 (420.0 B)</p><p>ath1&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 06:15:6D:9E:04:A9&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:168 errors:0 dropped:85 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:85 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:35698 (34.8 KiB)&nbsp; TX bytes:18496 (18.0 KiB)</p><p>br-lan&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:15:6D:9E:04:A9&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.6.250&nbsp; Bcast:192.168.6.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:73 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:46 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:4492 (4.3 KiB)&nbsp; TX bytes:5792 (5.6 KiB)</p><p>br-v66&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:15:6D:9F:04:A9&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.66.250&nbsp; Bcast:192.168.66.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:139 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:0 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:27894 (27.2 KiB)&nbsp; TX bytes:0 (0.0 B)</p><p>eth0&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:15:6D:9F:04:A9&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:9739 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:8621 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:851231 (831.2 KiB)&nbsp; TX bytes:2847683 (2.7 MiB)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Interrupt:4 Base address:0x1000 </p><p>eth0.66&nbsp; &nbsp;Link encap:Ethernet&nbsp; HWaddr 00:15:6D:9F:04:A9&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING PROMISC MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:3 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:1722 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:246 (246.0 B)&nbsp; TX bytes:318510 (311.0 KiB)</p><p>lo&nbsp; &nbsp; &nbsp; &nbsp; Link encap:Local Loopback&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:127.0.0.1&nbsp; Mask:255.0.0.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP LOOPBACK RUNNING&nbsp; MTU:16436&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:0 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:0 (0.0 B)</p><p>wifi0&nbsp; &nbsp; &nbsp;Link encap:UNSPEC&nbsp; HWaddr 00-15-6D-9E-04-A9-00-00-00-00-00-00-00-00-00-00&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:16161 errors:0 dropped:0 overruns:0 frame:1496<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:19049 errors:1426 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:195 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:2016458 (1.9 MiB)&nbsp; TX bytes:2657364 (2.5 MiB)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Interrupt:3 Memory:b0000000-b00ffffc </p><p>root@OpenWrt:~# brctl show<br />bridge name&nbsp; &nbsp; &nbsp;bridge id&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;STP enabled&nbsp; &nbsp; &nbsp;interfaces<br />br-lan&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 8000.00156d9e04a9&nbsp; &nbsp; &nbsp; &nbsp;no&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ath0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; eth0<br />br-v66&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 8000.00156d9f04a9&nbsp; &nbsp; &nbsp; &nbsp;no&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ath1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; eth0.66<br />---</p><p>what is wrong?</p><p>THANK YOU!!!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p298833">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">june8807</div>
					<div class="post-datetime">
						6 Nov 2015, 17:30					</div>
				</div>
				<div class="post-content content">
					<p>I realy think that troubles is near eth0.66</p><p>it looks like my device can not operate vlans.... Could someone confirm me it?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p298855">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">june8807</div>
					<div class="post-datetime">
						6 Nov 2015, 21:46					</div>
				</div>
				<div class="post-content content">
					<p>OK. Flashed with the latest 15.05</p><p>eth0.66 is ok now. i can ping it! wow!</p><p>but with this firmware (and 14.07 too) my nanostation 2 gui is veeeeery slooow. In most of changes, i get &#039;bad gateway. The process din not produse any responce&#039;<br />... <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p298879">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">epek</div>
					<div class="post-datetime">
						7 Nov 2015, 02:53					</div>
				</div>
				<div class="post-content content">
					<p>In some cases it may help to install kmod-zram and zram-swap, if the flash space is big enough to hold them. The first will provide for a compressed ram fs. The second will use that compressed ram as a swap space. While your nanostation will still be reacting quite slowly, some of the &quot;bad gateways&quot; may occur less often.<br />The problem is, that ancient nanostations, just like other elder devices (with 4/16 flash/ram) will easily run out of memory.<br />zram may on the other hand, be more likely to crash the kernel.<br />The CC15.05 release binaries themselves take up quite a lot of flash, so be careful!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p298890">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">june8807</div>
					<div class="post-datetime">
						7 Nov 2015, 12:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>epek wrote:</cite><blockquote><p>In some cases it may help to install kmod-zram and zram-swap, if the flash space is big enough to hold them. The first will provide for a compressed ram fs. The second will use that compressed ram as a swap space. While your nanostation will still be reacting quite slowly, some of the &quot;bad gateways&quot; may occur less often.<br />The problem is, that ancient nanostations, just like other elder devices (with 4/16 flash/ram) will easily run out of memory.<br />zram may on the other hand, be more likely to crash the kernel.<br />The CC15.05 release binaries themselves take up quite a lot of flash, so be careful!</p></blockquote></div><p>I am bad *nix admin, but I will try.</p><p>I have an other question:<br />just I need is <br />eth, eth.66 <br />wlan1,wlan2 wik psk2<br />and bridge core</p><p>in 15.05 i see the next list of packages intalled:<br />---cut---<br />Remove &nbsp; &nbsp; base-files &nbsp; &nbsp; 157-r46163<br />Remove &nbsp; &nbsp; busybox &nbsp; &nbsp; 1.23.2-1<br />Remove &nbsp; &nbsp; dnsmasq &nbsp; &nbsp; 2.73-1<br />Remove &nbsp; &nbsp; dropbear &nbsp; &nbsp; 2015.67-1<br />Remove &nbsp; &nbsp; firewall &nbsp; &nbsp; 2015-05-26<br />Remove &nbsp; &nbsp; fstools &nbsp; &nbsp; 2015-05-24-09027fc86babc3986027a0e677aca1b6999a9e14<br />Remove &nbsp; &nbsp; hostapd-common &nbsp; &nbsp; 2015-03-25-1<br />Remove &nbsp; &nbsp; ip6tables &nbsp; &nbsp; 1.4.21-1<br />Remove &nbsp; &nbsp; iptables &nbsp; &nbsp; 1.4.21-1<br />Remove &nbsp; &nbsp; iw &nbsp; &nbsp; 3.17-1<br />Remove &nbsp; &nbsp; iwinfo &nbsp; &nbsp; 2015-06-01-ade8b1b299cbd5748db1acf80dd3e9f567938371<br />Remove &nbsp; &nbsp; jshn &nbsp; &nbsp; 2015-06-14-d1c66ef1131d14f0ed197b368d03f71b964e45f8<br />Remove &nbsp; &nbsp; jsonfilter &nbsp; &nbsp; 2014-06-19-cdc760c58077f44fc40adbbe41e1556a67c1b9a9<br />Remove &nbsp; &nbsp; kernel &nbsp; &nbsp; 3.18.17-1-dbb64bebddbc272ea8439ca349dd7af9<br />Remove &nbsp; &nbsp; kmod-ath &nbsp; &nbsp; 3.18.17+2015-03-09-3<br />Remove &nbsp; &nbsp; kmod-ath5k &nbsp; &nbsp; 3.18.17+2015-03-09-3<br />Remove &nbsp; &nbsp; kmod-cfg80211 &nbsp; &nbsp; 3.18.17+2015-03-09-3<br />Remove &nbsp; &nbsp; kmod-crypto-aes &nbsp; &nbsp; 3.18.17-1<br />Remove &nbsp; &nbsp; kmod-crypto-arc4 &nbsp; &nbsp; 3.18.17-1<br />Remove &nbsp; &nbsp; kmod-crypto-core &nbsp; &nbsp; 3.18.17-1<br />Remove &nbsp; &nbsp; kmod-gpio-button-hotplug &nbsp; &nbsp; 3.18.17-1<br />Remove &nbsp; &nbsp; kmod-ip6tables &nbsp; &nbsp; 3.18.17-1<br />Remove &nbsp; &nbsp; kmod-ipt-conntrack &nbsp; &nbsp; 3.18.17-1<br />Remove &nbsp; &nbsp; kmod-ipt-core &nbsp; &nbsp; 3.18.17-1<br />Remove &nbsp; &nbsp; kmod-ipt-nat &nbsp; &nbsp; 3.18.17-1<br />Remove &nbsp; &nbsp; kmod-ipv6 &nbsp; &nbsp; 3.18.17-1<br />Remove &nbsp; &nbsp; kmod-lib-crc-ccitt &nbsp; &nbsp; 3.18.17-1<br />Remove &nbsp; &nbsp; kmod-mac80211 &nbsp; &nbsp; 3.18.17+2015-03-09-3<br />Remove &nbsp; &nbsp; kmod-nf-conntrack &nbsp; &nbsp; 3.18.17-1<br />Remove &nbsp; &nbsp; kmod-nf-conntrack6 &nbsp; &nbsp; 3.18.17-1<br />Remove &nbsp; &nbsp; kmod-nf-ipt &nbsp; &nbsp; 3.18.17-1<br />Remove &nbsp; &nbsp; kmod-nf-ipt6 &nbsp; &nbsp; 3.18.17-1<br />Remove &nbsp; &nbsp; kmod-nf-nat &nbsp; &nbsp; 3.18.17-1<br />Remove &nbsp; &nbsp; kmod-nf-nathelper &nbsp; &nbsp; 3.18.17-1<br />Remove &nbsp; &nbsp; kmod-ppp &nbsp; &nbsp; 3.18.17-1<br />Remove &nbsp; &nbsp; kmod-pppoe &nbsp; &nbsp; 3.18.17-1<br />Remove &nbsp; &nbsp; kmod-pppox &nbsp; &nbsp; 3.18.17-1<br />Remove &nbsp; &nbsp; kmod-slhc &nbsp; &nbsp; 3.18.17-1<br />Remove &nbsp; &nbsp; libblobmsg-json &nbsp; &nbsp; 2015-06-14-d1c66ef1131d14f0ed197b368d03f71b964e45f8<br />Remove &nbsp; &nbsp; libc &nbsp; &nbsp; 0.9.33.2-1<br />Remove &nbsp; &nbsp; libgcc &nbsp; &nbsp; 4.8-linaro-1<br />Remove &nbsp; &nbsp; libip4tc &nbsp; &nbsp; 1.4.21-1<br />Remove &nbsp; &nbsp; libip6tc &nbsp; &nbsp; 1.4.21-1<br />Remove &nbsp; &nbsp; libiwinfo &nbsp; &nbsp; 2015-06-01-ade8b1b299cbd5748db1acf80dd3e9f567938371<br />Remove &nbsp; &nbsp; libiwinfo-lua &nbsp; &nbsp; 2015-06-01-ade8b1b299cbd5748db1acf80dd3e9f567938371<br />Remove &nbsp; &nbsp; libjson-c &nbsp; &nbsp; 0.12-1<br />Remove &nbsp; &nbsp; libjson-script &nbsp; &nbsp; 2015-06-14-d1c66ef1131d14f0ed197b368d03f71b964e45f8<br />Remove &nbsp; &nbsp; liblua &nbsp; &nbsp; 5.1.5-1<br />Remove &nbsp; &nbsp; libnl-tiny &nbsp; &nbsp; 0.1-4<br />Remove &nbsp; &nbsp; libubox &nbsp; &nbsp; 2015-06-14-d1c66ef1131d14f0ed197b368d03f71b964e45f8<br />Remove &nbsp; &nbsp; libubus &nbsp; &nbsp; 2015-05-25-f361bfa5fcb2daadf3b160583ce665024f8d108e<br />Remove &nbsp; &nbsp; libubus-lua &nbsp; &nbsp; 2015-05-25-f361bfa5fcb2daadf3b160583ce665024f8d108e<br />Remove &nbsp; &nbsp; libuci &nbsp; &nbsp; 2015-04-09.1-1<br />Remove &nbsp; &nbsp; libuci-lua &nbsp; &nbsp; 2015-04-09.1-1<br />Remove &nbsp; &nbsp; libxtables &nbsp; &nbsp; 1.4.21-1<br />Remove &nbsp; &nbsp; lua &nbsp; &nbsp; 5.1.5-1<br />Remove &nbsp; &nbsp; luci &nbsp; &nbsp; git-15.179.51004-cf2e3f6-1<br />Remove &nbsp; &nbsp; luci-app-firewall &nbsp; &nbsp; git-15.179.51004-cf2e3f6-1<br />Remove &nbsp; &nbsp; luci-base &nbsp; &nbsp; git-15.179.51004-cf2e3f6-1<br />Remove &nbsp; &nbsp; luci-lib-ip &nbsp; &nbsp; git-15.179.51004-cf2e3f6-1<br />Remove &nbsp; &nbsp; luci-lib-nixio &nbsp; &nbsp; git-15.179.51004-cf2e3f6-1<br />Remove &nbsp; &nbsp; luci-mod-admin-full &nbsp; &nbsp; git-15.179.51004-cf2e3f6-1<br />Remove &nbsp; &nbsp; luci-proto-ipv6 &nbsp; &nbsp; git-15.179.51004-cf2e3f6-1<br />Remove &nbsp; &nbsp; luci-proto-ppp &nbsp; &nbsp; git-15.179.51004-cf2e3f6-1<br />Remove &nbsp; &nbsp; luci-theme-bootstrap &nbsp; &nbsp; git-15.179.51004-cf2e3f6-1<br />Remove &nbsp; &nbsp; mtd &nbsp; &nbsp; 20<br />Remove &nbsp; &nbsp; netifd &nbsp; &nbsp; 2015-06-08-8795f9ef89626cd658f615c78c6a17e990c0dcaa<br />Remove &nbsp; &nbsp; odhcp6c &nbsp; &nbsp; 2015-06-10-d21764d12bb799f89d42c94dc20d4adb6d588077<br />Remove &nbsp; &nbsp; odhcpd &nbsp; &nbsp; 2015-05-21-2ebf6c8216287983779c8ec6597d30893b914a7c<br />Remove &nbsp; &nbsp; opkg &nbsp; &nbsp; 9c97d5ecd795709c8584e972bfdf3aee3a5b846d-7<br />Remove &nbsp; &nbsp; ppp &nbsp; &nbsp; 2.4.7-6<br />Remove &nbsp; &nbsp; ppp-mod-pppoe &nbsp; &nbsp; 2.4.7-6<br />Remove &nbsp; &nbsp; procd &nbsp; &nbsp; 2015-06-18-8559df08db51a2e5fe056e6a1c07984e51068eaf<br />Remove &nbsp; &nbsp; rpcd &nbsp; &nbsp; 2015-05-17-3d655417ab44d93aad56a6d4a668daf24b127b84<br />Remove &nbsp; &nbsp; swconfig &nbsp; &nbsp; 10<br />Remove &nbsp; &nbsp; ubox &nbsp; &nbsp; 2015-05-22-ab5b47397cc143798ba2f367f04579e5b5b82070<br />Remove &nbsp; &nbsp; ubus &nbsp; &nbsp; 2015-05-25-f361bfa5fcb2daadf3b160583ce665024f8d108e<br />Remove &nbsp; &nbsp; ubusd &nbsp; &nbsp; 2015-05-25-f361bfa5fcb2daadf3b160583ce665024f8d108e<br />Remove &nbsp; &nbsp; uci &nbsp; &nbsp; 2015-04-09.1-1<br />Remove &nbsp; &nbsp; uhttpd &nbsp; &nbsp; 2015-05-31-daeea305298197bb50c1e63cdd842ee1d9461d80<br />Remove &nbsp; &nbsp; uhttpd-mod-ubus &nbsp; &nbsp; 2015-05-31-daeea305298197bb50c1e63cdd842ee1d9461d80<br />Remove &nbsp; &nbsp; usign &nbsp; &nbsp; 2015-05-08-cf8dcdb8a4e874c77f3e9a8e9b643e8c17b19131<br />Remove &nbsp; &nbsp; wpad-mini &nbsp; &nbsp; 2015-03-25-1<br />---cut---</p><p>Could I delete (uninstall) some (most) of them to free more memory?</p><p>Or, maybe, I can remove LuCI too, If some one can help me with creating wifi ssid with wpa-psk2 on it... PLEASE....</p><p>Thank you!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p298892">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">epek</div>
					<div class="post-datetime">
						7 Nov 2015, 12:20					</div>
				</div>
				<div class="post-content content">
					<p>Hello june8807.<br />Uninstalling packages in OpenWRT - especially those that are preinstalled - won&#039;t free up memory. Quite the contrary will happen.<br />OpenWRT uses partitions of flash memory. One will contain a compressed rom with the pre-installed packages. Another will contain an overlay filesystem, that stores differences - i.e. changes - to the filesystem.<br />If you &quot;remove&quot; a preinstalled package, the removed packages remains in the original compressed rom, but the &quot;deletion&quot; will be stored on the overlay.</p><p>The only (more or less easy) way to get a minimum size firmware, is to use a the ImageBuilder (Firmware Generator).<br />Nevertheless be very cautious on this. Some routers may be bricked, when the resulting firmware binary is too big.</p><p>To to this, you basically download the ImageBuilder ... tar.bz2 from downloads.openwrt.org, unpack it (on a linux system). There is a documentation for this [url]http://wiki.openwrt.org/doc/howto/obtain.firmware.generate?s[]=imagebuilder[/url].</p><p>What I usually do then, is putting the list of packages, separated by space into a packagelist and call that.<br />E.g. make image PROFILE=&quot;TLWR1043&quot; PACKAGES=&quot;`cat ./packages.txt`&quot; for TP-LINK TL-WR1043ND or<br />with the target &quot;UBNT&quot; for some Ubiquity Network devices.</p><p>packages.txt looks like this:<br />6in4 6rd batctl collectd-mod-cpu collectd-mod-conntrack collectd-mod-iptables collectd-mod-memory collectd-mod-network collectd-mod-olsrd collectd-mod-openvpn collectd-mod-ping collectd-mod-snmp collectd-mod-wireless comgt-directip comgt-ncm curl ds-lite kmod-batman-adv kmod-gre kmod-fs-vfat kmod-mppe ...</p><p>Packages that have a &quot;-&quot; sign in front of them e.g. &quot;-wpad-mini&quot; will be excluded. Explained: &quot;-wpad-mini&quot; will remove the default wpad w/o. radius support, and &quot;wpad&quot; will include the full size, full feature wpad. In order to remove luci you would remove the meta packages luci or luci-ssl. You could remove even more, but be very careful as certain dependencies exist.</p><p>You better know how to recover your NS2/NS5 by TFTP or even serial before starting experiments!</p>											<p class="post-edited">(Last edited by <strong>epek</strong> on 7 Nov 2015, 12:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p298896">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">june8807</div>
					<div class="post-datetime">
						7 Nov 2015, 12:54					</div>
				</div>
				<div class="post-content content">
					<p>&gt;&gt;g, unpack it (on a linux system)<br />it is the most hard part. I have no linux... installed.</p><p>May be I am not unique... And someone has such small .bin for NS2...</p><p>And what if I can stop some services like firewall, dhcp etc... Will it free some resources?</p><p>And one more question, I cause of LuCI is not available for me, I tried&nbsp; to modify configuration by &quot;vi&quot;. After restart I can ping via vlan66 eth0.66 if, but I can see only one SSID... Could you point on my mistake? THANK YOU!!!</p><br /><p>/etc/config/wireless <br />---cut---<br />config wifi-device&nbsp; radio0<br />&nbsp; &nbsp; &nbsp; &nbsp; option type&nbsp; &nbsp; &nbsp;mac80211<br />&nbsp; &nbsp; &nbsp; &nbsp; option channel&nbsp; 11<br />&nbsp; &nbsp; &nbsp; &nbsp; option hwmode&nbsp; &nbsp;11g<br />&nbsp; &nbsp; &nbsp; &nbsp; option path&nbsp; &nbsp; &nbsp;&#039;platform/ar231x-wmac.0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option htmode<br />&nbsp; &nbsp; &nbsp; &nbsp; # REMOVE THIS LINE TO ENABLE WIFI:<br />&nbsp; &nbsp; &nbsp; &nbsp; option disabled 0</p><p>config wifi-iface<br />&nbsp; &nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp;radio0<br />&nbsp; &nbsp; &nbsp; &nbsp; option network&nbsp; lan<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode&nbsp; &nbsp; &nbsp;ap<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid&nbsp; &nbsp; &nbsp;sdx-gst<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption psk2<br />&nbsp; &nbsp; &nbsp; &nbsp; option key key1</p><p>config wifi-iface2<br />&nbsp; &nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp;radio0<br />&nbsp; &nbsp; &nbsp; &nbsp; optio network&nbsp; &nbsp;eth0.66<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode&nbsp; &nbsp; &nbsp;ap<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid&nbsp; &nbsp; &nbsp;sdx-vpn<br />&nbsp; &nbsp; &nbsp; &nbsp; option encription psk2<br />&nbsp; &nbsp; &nbsp; &nbsp; option key key2</p><p>---cut---</p><br /><p>/etc/config/network <br />---cut---<br />config interface &#039;loopback&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname &#039;lo&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask &#039;255.0.0.0&#039;</p><p>config interface &#039;lan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname &#039;eth0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option type &#039;bridge&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr &#039;192.168.1.1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ip6assign &#039;60&#039;</p><p>config globals &#039;globals&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ula_prefix &#039;fd28:ee26:ea1a::/48&#039;</p><p>config interface &#039;v66&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr &#039;192.168.66.250&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option gateway &#039;192.168.66.254&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option _orig_ifname &#039;eth0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option _orig_bridge &#039;false&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname &#039;eth0.66&#039;</p><p>---cut---</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p298905">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">epek</div>
					<div class="post-datetime">
						7 Nov 2015, 14:26					</div>
				</div>
				<div class="post-content content">
					<p>Stopping services will free some RAM, of course - but: since OpenWRT switched from simple config scripts to rpcd, netifd and ubusd, which take about 3% of ram on a router equipped with 64Mb ram, it must be clear, that a machine with only 16 Mb of ram will sacrifice about half of that to these services.<br />If you are using your ns2 as a gateway, there is little you can deactivate without seeing problems.<br />If you are using the ns2 in a mesh environment, better replace it with a newer piece of hardware.<br />If you have another router (indoor router), you can delegate some services to this, using the ns2 as bridge or similar. You could -for example- then disable dnsmasq (dhcp+dns). </p><p>You could also try to downgrade to a previous snapshot of openwrt, that does not make use of netifd &amp; co.<br />Trying to compile a &quot;script only&quot; OpenWRT would a bigger project, since the dependencies are heavily tied to each other.</p><p>You could -at your own risk- also try to use another distro: e.g. gargoyle. It&#039;ll depend on what you need. Adhoc-Mode won&#039;t work with that for what I&#039;ve seen when I last tried it.<br />See <a href="http://www.gargoyle-router.com/download.php">http://www.gargoyle-router.com/download.php</a>. (Ar231x plattform for ns2, ar71xx for nsm2)<br />See <a href="http://www.dd-wrt.com/site/support/router-database">http://www.dd-wrt.com/site/support/router-database</a></p><p>Maybe you&#039;ll suceed with an OpenWRT snapshot build. It seems that the &quot;atheros&quot; platform now is &quot;ath25&quot; <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ath25/generic/">http://downloads.openwrt.org/chaos_calm … 5/generic/</a><br />Snapshots of previous times weren&#039;t bundled with luci, so there may be space left to install zram.</p><br /><p>Update: Regarding compilation of own firmwares:<br /><a href="https://ohnomoregadgets.wordpress.com/2013/08/20/building-minimal-openwrt-firmware-images/">https://ohnomoregadgets.wordpress.com/2 … re-images/</a><br />You could boot Linux from an USB key or DVD or install it in a virtual machine. Ubuntu may be adequate for this task.<br />Some mesh networking communities like freifunk have online web-based image generators, too. Meshkit would be an example of that, but I&#039;ve seen no target for UBNT NS2.</p>											<p class="post-edited">(Last edited by <strong>epek</strong> on 7 Nov 2015, 15:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p298909">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Sqibble</div>
					<div class="post-datetime">
						7 Nov 2015, 15:19					</div>
				</div>
				<div class="post-content content">
					<p>In your /etc/config/wireless file, under config wifi-iface2, it reads</p><div class="quotebox"><blockquote><p>optio network&nbsp; &nbsp;eth0.66</p></blockquote></div><p> you&#039;re missin an &quot;n&quot; there.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p299083">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">june8807</div>
					<div class="post-datetime">
						9 Nov 2015, 10:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>epek wrote:</cite><blockquote><p>You could -at your own risk- also try to use another distro: e.g. gargoyle. It&#039;ll depend on what you need. Adhoc-Mode won&#039;t work with that for what I&#039;ve seen when I last tried it.<br />See <a href="http://www.gargoyle-router.com/download.php">http://www.gargoyle-router.com/download.php</a>. (Ar231x plattform for ns2, ar71xx for nsm2)<br />.</p></blockquote></div><p>Yes I am using it as AP only. The only I need have two (or more) separate ssid corespondig (&quot;converting&quot;) vlans on etehrenet.<br />Thank you very much for the advise!</p><p>Gargoyle is quite fast on my hardware (ubnt nanostation2) and can do all I need!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p299084">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">june8807</div>
					<div class="post-datetime">
						9 Nov 2015, 10:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Sqibble wrote:</cite><blockquote><p>In your /etc/config/wireless file, under config wifi-iface2, it reads</p><div class="quotebox"><blockquote><p>optio network&nbsp; &nbsp;eth0.66</p></blockquote></div><p> you&#039;re missin an &quot;n&quot; there.</p></blockquote></div><p>Yes, thank you!</p><p>And, as I found in </p><p>config wifi-iface<br />config wifi-iface2</p><p>I should not use wifi-iface[2]...</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>