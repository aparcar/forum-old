<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Guest wifi on router configured as a WDS client AP</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 10 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p352630">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">juanchotazo999</div>
					<div class="post-datetime">
						22 Feb 2017, 04:07					</div>
				</div>
				<div class="post-content content">
					<p>Hi. I&#039;ve recently moved from DD-WRT to OpenWRT for a variety of reasons and I&#039;m quite enjoying the change.</p><p>I have a TP-Link TL-WR1043ND v2.1 as my main router, this is running Chaos Calmer 15.05.01, it&#039;s hosting my internet connection (ADSL) and also works as a WDS AP + main AP for the entire house. This is 192.168.1.1</p><p>My secondary router is a TP-Link TL-WR1043ND v1.8 that is also running Chaos Calmer 15.05.01, and is configured as a WDS client. Here I&#039;ve configured an AP with a different SSID on the same subnet as the main router as I don&#039;t want AP hopping but to extend wifi range to select devices, and it also provides wired connection to a PC and a laser printer flawlessly. This is 192.168.1.2</p><p>The 1043ND v1.x is particularly known for having unstable wifi and being prone to crashes, no problems so far. Delighted. This would occassionally crash (every week or so) on DD-WRT.</p><p>Both routers have been configured as per the &quot;Atheros and MAC80211 WDS to implement a wireless network bridge (wireless repeater)&quot; guide (I&#039;d post it as a link if I could, forum rules I suppose) and are working flawlessly in this setup. This is because I can&#039;t connect both routers with a cable and I need the bridge to be transparent as if it were a wired connection.</p><br /><p>Back when using DD-WRT the main router was running as an AP and the secondary router was configured in client bridge (routed) mode which worked more or less fine but presented problems when trying to find devices like printers on the main router&#039;s side of the network. I&#039;d point them to the specific device&#039;s IP address and it&#039;d work, but well, I got tired of doing that. So this problem is solved thanks to WDS.</p><p>---------</p><p>Here comes my problem, I&#039;ve been trying to set up a guest wifi on the secondary WDS station router (apart from the existing vAP) as per the </p><p>Configure a guest WLAN<br />Configure a guest WLAN using the Luci web-interface</p><p>guides but sadly I can&#039;t get connectivity on the guest wifi. I&#039;ve tried both manual and Luci ways to do it.</p><br /><p>I configure the new wireless controller, set its SSID up with WPA2 security, then configure the new guest interface as 192.168.2.1 with DHCP, and then set up a special firewall zone (guest) for it with the required rules for DHCP and DNS traffic. Connected devices get 192.168.2.x IP addresses from DHCP, but that&#039;s it. No internet connection.</p><br /><p>After reading some more on the manual guide, near the end there&#039;s a part that talks about bridging vLANs when you have more than a router on the same network but I&#039;m not quite following it.</p><br /><p>What am I missing? Is this combination even possible? I could always set another vAP as the existing one with a different password and that would work for the ocassional guest, but I&#039;d really like to have an isolated wifi network for devices I don&#039;t trust.</p>											<p class="post-edited">(Last edited by <strong>juanchotazo999</strong> on 23 Feb 2017, 04:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352673">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						22 Feb 2017, 19:32					</div>
				</div>
				<div class="post-content content">
					<p>I sympathize with your plight.&nbsp; I actually kept on DD-WRT device as the Guest AP on an AP seems to work.</p><p>I did find this recently, but have not had the time to try it.<br /><a href="https://blog.doenselmann.com/gaeste-wlan-auf-openwrt-access-point/">https://blog.doenselmann.com/gaeste-wla … ess-point/</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352714">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">juanchotazo999</div>
					<div class="post-datetime">
						23 Feb 2017, 00:52					</div>
				</div>
				<div class="post-content content">
					<p>Oh, so I&#039;ve stumbled upon an OpenWRT issue or bugged feature. Explains why so much googling didn&#039;t really help. Is this issue by chance solved in the latest builds? CC 15.05.1 is dated March 2016, it&#039;s almost been a year from that stable release and lots of things could have changed...</p><br /><p>I&#039;ll google translate that article you&#039;ve found and give it a try, maybe it solves the issue. Thanks!!</p>											<p class="post-edited">(Last edited by <strong>juanchotazo999</strong> on 23 Feb 2017, 00:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352778">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						23 Feb 2017, 17:53					</div>
				</div>
				<div class="post-content content">
					<p>Just because we are technically challenged in the application ov VLANs does not make this an issue or bug.&nbsp; </p><p>I will agree that not having a guest solution that works stand alone makes this a functional gap.&nbsp; There is no OpenWrt wiki on how to build a OpenWrt (or LEDE) Guest LAN on an AP to stand behind a ISP supplied Modem-Router where one has no control of VLANs.&nbsp; The above is intended to fill this gap.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352880">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						24 Feb 2017, 18:12					</div>
				</div>
				<div class="post-content content">
					<p>Last night I set up the scenario described in Michi&#039;s Blog <a href="https://blog.doenselmann.com/gaeste-wlan-auf-openwrt-access-point/">https://blog.doenselmann.com/gaeste-wla … ess-point/</a> and was able to make this work.&nbsp; I am able to get internet access, but unable to access either routers web interface (primary or AP), access LAN resources or SSH to the devices.&nbsp; </p><p>When setting up the AP <a href="https://wiki.openwrt.org/doc/recipes/dumbap,">https://wiki.openwrt.org/doc/recipes/dumbap,</a> do not disable the firewall, but do disable (uncheck) in Firewall all the individual delivered rules.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352921">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">juanchotazo999</div>
					<div class="post-datetime">
						25 Feb 2017, 08:51					</div>
				</div>
				<div class="post-content content">
					<p>I got it working, too, now I have a perfectly working guest AP + main AP all on the same secondary WDS AP router. Makes for a lot of peace of mind.</p><p>I should&#039;ve worded that other post better and not call this a bug or issue. It&#039;s just that the other guides on the wiki don&#039;t seem to cover this use case, that prompted me to call it as such. But thankfully it was just a matter of using another approach to all this.</p><p>I&#039;m very grateful, thank you very much!</p><br /><br /><p>edit: Tried this guide in LEDE 17.01... it&#039;s working, too.</p>											<p class="post-edited">(Last edited by <strong>juanchotazo999</strong> on 28 Feb 2017, 03:54)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>