<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Bricked ASUS RT-N66U</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p213026">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">kiamo</div>
					<div class="post-datetime">
						23 Sep 2013, 19:09					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I&#039;ve got a bricked ASUS RT-N66U here that can&#039;t access the recovery mode.&nbsp; <br />I&#039;ve hooked it up via serial and I gotten access to the CFE.&nbsp; </p><p>I can&#039;t get TFTP to work as either a client or a server, likely because it looks like the CFE isn&#039;t starting up a network interface.&nbsp; </p><p>I don&#039;t have a jtag cable, and as they look rather expensive (compared to router cost), I&#039;m hoping I can flash the fw ONLY through the serial cable.&nbsp; </p><p>Or perhaps someone can give me some tips on getting the network interface up and running again.&nbsp; </p><p>This is what I&#039;m looking at:</p><p>Decompressing...done<br />tmp_ret= 0</p><br /><p>CFE version 5.100.127 based on BBP 1.0.37 for BCM947XX (32bit,SP,LE)<br />Build Date: ? 12?&nbsp; 9 10:10:49 CST 2011 (boyau@localhost.localdomain)<br />Copyright (C) 2000-2008 Broadcom Corporation.</p><p>Init Arena<br />Init Devs.<br />Boot partition size = 262144(0x40000)<br />CPU type 0x19749: 600MHz<br />Tot mem: 131072 KBytes</p><p>CFE mem:&nbsp; &nbsp; 0x80700000 - 0x8079D320 (643872)<br />Data:&nbsp; &nbsp; &nbsp; &nbsp;0x807330F0 - 0x807363B0 (12992)<br />BSS:&nbsp; &nbsp; &nbsp; &nbsp; 0x807363B0 - 0x80737320 (3952)<br />Heap:&nbsp; &nbsp; &nbsp; &nbsp;0x80737320 - 0x8079B320 (409600)<br />Stack:&nbsp; &nbsp; &nbsp; 0x8079B320 - 0x8079D320 (8192)<br />Text:&nbsp; &nbsp; &nbsp; &nbsp;0x80700000 - 0x807330E8 (209128)</p><p>Committing NVRAM...done<br />Startup canceled<br />CFE&gt; ^C<br />CFE&gt; ifconfig<br />Network interface has not been configured<br />*** command status = 0<br />CFE&gt; help<br />Available commands:</p><p>et&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Broadcom Ethernet utility.<br />show clocks&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Show current values of the clocks.<br />nvram&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;NVRAM utility.<br />reboot&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Reboot.<br />flash&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Update a flash memory device<br />batch&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Load a batch file into memory and execute it<br />go&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Verify and boot OS image.<br />boot&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Load an executable file into memory and execute it<br />load&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Load an executable file into memory without executing it<br />save&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Save a region of memory to a remote file via TFTP<br />ping&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Ping a remote IP host.<br />arp&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Display or modify the ARP Table<br />ifconfig&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Configure the Ethernet interface<br />help&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Obtain help for CFE commands</p><p>For more information about a command, enter &#039;help command-name&#039;<br />*** command status = 0<br />CFE&gt; nvram show<br />boardrev=0x1100<br />et0macaddr=xx:xx:xx:xx:xx:xx<br />et0mdcport=0<br />pmon_ver=CFE 5.100.127<br />vlan2ports=0 8u<br />sromrev=8<br />boardtype=0xF5B2<br />vlan2hwname=et0<br />xtalfreq=25000<br />boardflags2=0x00000000<br />clkfreq=600,300,150<br />lan_ipaddr=192.168.1.1<br />vlan1hwname=et0<br />sdram_config=0x0000<br />vlan1ports=1 2 3 4 8*<br />boardflags=0x00000110<br />wandevs=et0<br />sdram_refresh=0x0000<br />sdram_ncdl=0x00000000<br />et0phyaddr=30<br />landevs=vlan1 wl0 wl1<br />sdram_init=0x0000<br />boardnum=00<br />size: 442 bytes (32326 left)<br />*** command status = 0<br />CFE&gt; go<br />Null Rescue Flag.<br />Boot program checksum is invalid<br />Hello!! Enter Rescue Mode: (Check error)</p><p>Reading :: TFTP Server.<br />Failed.: Error<br />Loader:raw Filesys:raw Dev:flash0.os File: Options:(null)<br />Loading: .. 5100 bytes read<br />Entry at 0x80001000<br />Starting program at 0x80001000<br />Linux version 2.6.22.19 (root@asus) (gcc version 4.2.4) #2 Thu Jul 11 23:04:56 EDT 2013<br />CPU revision is: 00019749<br />Determined physical RAM map:<br /> memory: 07fff000 @ 00000000 (usable)<br /> memory: 08000000 @ 87fff000 (usable)<br />Built 1 zonelists.&nbsp; Total pages: 585216<br />Kernel command line: root=/dev/mtdblock2 noinitrd console=ttyS0,115200<br />Primary instruction cache 32kB, physically tagged, 4-way, linesize 32 bytes.<br />Primary data cache 32kB, 4-way, linesize 32 bytes.<br />Synthesized TLB refill handler (20 instructions).<br />Synthesized TLB load handler fastpath (32 instructions).<br />Synthesized TLB store handler fastpath (32 instructions).<br />Synthesized TLB modify handler fastpath (31 instructions).<br />PID hash table entries: 2048 (order: 11, 8192 bytes)<br />CPU: BCM5300 rev 1 pkg 0 at 600 MHz<br />Using 300.000 MHz high precision timer.<br />console [ttyS0] enabled<br />Dentry cache hash table entries: 65536 (order: 6, 262144 bytes)<br />Inode-cache hash table entries: 32768 (order: 5, 131072 bytes)<br />Memory: 238736k/131068k available (2467k kernel code, 22488k reserved, 497k data, 192k init, 131072k highmem)<br />Mount-cache hash table entries: 512<br />NET: Registered protocol family 16<br />PCI: Initializing host<br />PCI: Reset RC<br />PCI: Initializing host<br />PCI: Reset RC<br />PCI: Fixing up bus 0<br />PCI/PCIe coreunit 0 is set to bus 1.<br />PCI: Fixing up bridge<br />PCI: Fixing up bridge<br />PCI: Enabling device 0000:01:00.1 (0004 -&gt; 0006)<br />PCI: Fixing up bus 1<br />PCI/PCIe coreunit 1 is set to bus 2.<br />PCI: Fixing up bridge<br />PCI: Fixing up bridge<br />PCI: Enabling device 0000:02:00.1 (0004 -&gt; 0006)<br />PCI: Fixing up bus 2<br />NET: Registered protocol family 2<br />Time: MIPS clocksource has been installed.<br />IP route cache hash table entries: 4096 (order: 2, 16384 bytes)<br />TCP established hash table entries: 16384 (order: 5, 131072 bytes)<br />TCP bind hash table entries: 16384 (order: 4, 65536 bytes)<br />TCP: Hash tables configured (established 16384 bind 16384)<br />TCP reno registered<br />highmem bounce pool size: 64 pages<br />squashfs: version 3.2-r2 (2007/01/15) Phillip Lougher<br />io scheduler noop registered (default)<br />HDLC line discipline: version $Revision: 4.8 $, maxframe=4096<br />N_HDLC line discipline registered.<br />Serial: 8250/16550 driver $Revision: 1.90 $ 4 ports, IRQ sharing disabled<br />serial8250: ttyS0 at MMIO 0xb8000300 (irq = 8) is a 16550A<br />serial8250: ttyS1 at MMIO 0xb8000400 (irq = 8) is a 16550A<br />PPP generic driver version 2.4.2<br />MPPE/MPPC encryption/compression module registered<br />NET: Registered protocol family 24<br />PPPoL2TP kernel driver, V0.18.3<br />PPTP driver version 0.8.5<br />Physically mapped flash: Found 1 x16 devices at 0x0 in 16-bit bank<br /> Amd/Fujitsu Extended Query Table at 0x0040<br />Physically mapped flash: CFI does not contain boot bank location. Assuming top.<br />number of CFI chips: 1<br />cfi_cmdset_0002: Disabling erase-suspend-program due to code brokenness.<br />Flash device: 0x2000000 at 0x1c000000<br />Creating 5 MTD partitions on &quot;Physically mapped flash&quot;:<br />0x00000000-0x00040000 : &quot;pmon&quot;<br />0x00040000-0x01fe0000 : &quot;linux&quot;<br />0x0016aeac-0x01aa0000 : &quot;rootfs&quot;<br />0x01fe0000-0x02000000 : &quot;nvram&quot;<br />0x01ac0000-0x01fe0000 : &quot;jffs2&quot;<br />Found an&nbsp; serial flash with 0 0KB blocks; total size 0MB<br />sflash: found no supported devices<br />dev_nvram_init: _nvram_init<br />_nvram_init: allocat header: 2183856128, size= 65536<br />sdhci: Secure Digital Host Controller Interface driver<br />sdhci: Copyright(c) Pierre Ossman<br />u32 classifier<br />&nbsp; &nbsp; OLD policer on<br />Netfilter messages via NETLINK v0.30.<br />nf_conntrack version 0.5.0 (2048 buckets, 16384 max)<br />ipt_time loading<br />ip_tables: (C) 2000-2006 Netfilter Core Team<br />net/ipv4/netfilter/tomato_ct.c [Jul 11 2013 19:52:12]<br />ipt_account 0.1.21 : Piotr Gasidlo &lt;quaker@barbara.eu.org&gt;, <a href="http://code.google.com/p/ipt-account/">http://code.google.com/p/ipt-account/</a><br />NET: Registered protocol family 1<br />NET: Registered protocol family 10<br />ip6_tables: (C) 2000-2006 Netfilter Core Team<br />NET: Registered protocol family 17<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />VFS: Mounted root (squashfs filesystem) readonly.<br />Freeing unused kernel memory: 192k freed<br />SQUASHFS error: sb_bread failed reading block 0x6458<br />SQUASHFS error: Unable to read cache block [191634e:181c]<br />SQUASHFS error: Unable to read directory block [191634e:181c]<br />Warning: unable to open an initial console.<br />SQUASHFS error: sb_bread failed reading block 0x6458<br />SQUASHFS error: Unable to read cache block [191634e:181c]<br />SQUASHFS error: Unable to read directory block [191634e:181c]<br />SQUASHFS error: sb_bread failed reading block 0x6458<br />SQUASHFS error: Unable to read cache block [191634e:181c]<br />SQUASHFS error: Unable to read directory block [191634e:181c]<br />SQUASHFS error: sb_bread failed reading block 0x6458<br />SQUASHFS error: Unable to read cache block [191634e:181c]<br />SQUASHFS error: Unable to read directory block [191634e:181c]<br />Kernel panic - not syncing: No init found.&nbsp; Try passing init= option to kernel.</p>											<p class="post-edited">(Last edited by <strong>kiamo</strong> on 23 Sep 2013, 23:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p213236">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Zajec</div>
					<div class="post-datetime">
						26 Sep 2013, 23:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>kiamo wrote:</cite><blockquote><p>I can&#039;t get TFTP to work as either a client or a server, likely because it looks like the CFE isn&#039;t starting up a network interface.</p></blockquote></div><div class="quotebox"><cite>kiamo wrote:</cite><blockquote><div class="codebox"><pre><code>CFE&gt; ifconfig
Network interface has not been configured
*** command status = 0</code></pre></div></blockquote></div><p>OK, that looks like some kind of problem.</p><p>Did you verify that network really isn&#039;t working? Did you set your&#039;s PC IP to 192.168.1.2 (or sth like that) and tried to ping 192.168.1.1?</p><p>Please try to setup CFE&#039;s network manually. Something like:</p><div class="codebox"><pre><code>ifconfig eth0 -addr=192.168.1.1 -mask=192.168.1.255</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p213260">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">kiamo</div>
					<div class="post-datetime">
						27 Sep 2013, 06:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Zajec wrote:</cite><blockquote><div class="quotebox"><cite>kiamo wrote:</cite><blockquote><p>I can&#039;t get TFTP to work as either a client or a server, likely because it looks like the CFE isn&#039;t starting up a network interface.</p></blockquote></div><div class="quotebox"><cite>kiamo wrote:</cite><blockquote><div class="codebox"><pre><code>CFE&gt; ifconfig
Network interface has not been configured
*** command status = 0</code></pre></div></blockquote></div><p>OK, that looks like some kind of problem.</p><p>Did you verify that network really isn&#039;t working? Did you set your&#039;s PC IP to 192.168.1.2 (or sth like that) and tried to ping 192.168.1.1?</p><p>Please try to setup CFE&#039;s network manually. Something like:</p><div class="codebox"><pre><code>ifconfig eth0 -addr=192.168.1.1 -mask=192.168.1.255</code></pre></div></blockquote></div><p>Yea I there&#039;s no pinging going on.&nbsp; And whenever I try to configure the network manually like that it just instantly reports ERROR.&nbsp; </p><p>Considering this brick happened out of the blue, I&#039;m pretty sure it&#039;s fried.&nbsp; I&#039;ve ordered a replacement.&nbsp; <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p213271">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Zajec</div>
					<div class="post-datetime">
						27 Sep 2013, 08:14					</div>
				</div>
				<div class="post-content content">
					<p>Looks bad. Does your router have &quot;show devices&quot; command? What does it list?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p213274">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">kiamo</div>
					<div class="post-datetime">
						27 Sep 2013, 09:16					</div>
				</div>
				<div class="post-content content">
					<p>It doesn&#039;t have that command.&nbsp; It seems to be very cut down on CFE features <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>I listed all the commands it has in among the original posts quote.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p213314">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						27 Sep 2013, 19:11					</div>
				</div>
				<div class="post-content content">
					<p>Make sure your Ethernet cable is good. You can try to temporarily replace the existing Ethernet cable with the one you know is working and see if that will do the trick.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p213315">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">kiamo</div>
					<div class="post-datetime">
						27 Sep 2013, 19:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mazilo wrote:</cite><blockquote><p>Make sure your Ethernet cable is good. You can try to temporarily replace the existing Ethernet cable with the one you know is working and see if that will do the trick.</p></blockquote></div><p>Aye it would be nice if that was all it was but the cable is fine.&nbsp; I&#039;m using it to send you this reply <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>