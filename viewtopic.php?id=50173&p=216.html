<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Update on Linksys WRT1900AC support</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 16 Sep 2014 and 7 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 216 of 598</div><nav><ul><li><a href="viewtopic.php%3Fid=50173&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=50173&amp;p=214.html">214</a></li><li><a href="viewtopic.php%3Fid=50173&amp;p=215.html">215</a></li><li class="pagination-current"><span>216</span></li><li><a href="viewtopic.php%3Fid=50173&amp;p=217.html">217</a></li><li><a href="viewtopic.php%3Fid=50173&amp;p=218.html">218</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=50173&amp;p=598.html">598</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p278747">
				<div class="post-metadata">
					<div class="post-num">Post #5376</div>
					<div class="post-author">quagga</div>
					<div class="post-datetime">
						3 Jun 2015, 17:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>gufus wrote:</cite><blockquote><p>Yes, I agree. </p><p>&quot;Description:&nbsp; This file implements debug related functions.&quot;</p><p><a href="https://github.com/kaloz/mwlwifi/commit/010dd6fba522efba103bb0060cb20b691952be8c">https://github.com/kaloz/mwlwifi/commit … 691952be8c</a></p></blockquote></div><p>Yeah, I&#039;ve been watching those commits land as a well (although I didn&#039;t see this mornings - thanks!).&nbsp; It&#039;s not clear to me if those are resolving any of the outstanding issues, or more just cleanup.&nbsp; Most of these latest commits look like code polishing to get this driver cleaned up for inclusion in the kernel.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278748">
				<div class="post-metadata">
					<div class="post-num">Post #5377</div>
					<div class="post-author">gufus</div>
					<div class="post-datetime">
						3 Jun 2015, 17:30					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>JimWright wrote:</cite><blockquote><p>It would certainly be possible to add a 4th level to the fans (0%, 33%, 66%, 100%), etc, should this be seen as a good thing.</p></blockquote></div><p>Good idea <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>I&#039;ll test here latter on today.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278754">
				<div class="post-metadata">
					<div class="post-num">Post #5378</div>
					<div class="post-author">fe31nz</div>
					<div class="post-datetime">
						3 Jun 2015, 18:29					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>JimWright wrote:</cite><blockquote><p>It would certainly be possible to add a 4th level to the fans (0%, 33%, 66%, 100%), etc, should this be seen as a good thing.</p></blockquote></div><p>Generally, when you have fine control of a fan speed and reasonable sensor data as we seem to have here, the right way to control the fan will be a PID loop.&nbsp; PID = proportional-integral-derivative, IIRC.&nbsp; This is a standard method of control used in industrial equipment, where there is a rate setting for how quickly the fan is sped up and another for how quickly it is slowed down and so on.&nbsp; The result is the fan speed tracking the temperature in a controlled way, with hysteresis so that it is not turning on and off all the time, or speeding up and slowing down over short periods in a way that creates an annoying noise.&nbsp; With a PID loop, it is possible to have a setpoint temperature you want to achieve and use the fan settings to keep the temperature pretty close to that.&nbsp; But I am not sure how well it would work if the CPU workload changes dramatically over very short time periods.&nbsp; In industrial use, a PID loop can often keep a temperature within 0.1 C of the setpoint, but that is with large equipment that can not change temperature as fast as a CPU can.</p><p>I have not looked at PID stuff for more than 20 years, but I expect there is a lot of information on the web now.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278756">
				<div class="post-metadata">
					<div class="post-num">Post #5379</div>
					<div class="post-author">bmork</div>
					<div class="post-datetime">
						3 Jun 2015, 18:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>quagga wrote:</cite><blockquote><div class="quotebox"><cite>gufus wrote:</cite><blockquote><p>Yes, I agree. </p><p>&quot;Description:&nbsp; This file implements debug related functions.&quot;</p><p><a href="https://github.com/kaloz/mwlwifi/commit/010dd6fba522efba103bb0060cb20b691952be8c">https://github.com/kaloz/mwlwifi/commit … 691952be8c</a></p></blockquote></div><p>Yeah, I&#039;ve been watching those commits land as a well (although I didn&#039;t see this mornings - thanks!).&nbsp; It&#039;s not clear to me if those are resolving any of the outstanding issues, or more just cleanup.&nbsp; Most of these latest commits look like code polishing to get this driver cleaned up for inclusion in the kernel.</p></blockquote></div><p>Yes, which is a good sign.</p><p>I fear that they will have to do a couple of more rounds on that, though....&nbsp; Some of the latest changes modified lots of comments to look like this:<br /></p><div class="codebox"><pre><code>/* CONSTANTS AND MACROS
*/</code></pre></div><p>which of course is a single line comment and therefore should have been formatted as<br /></p><div class="codebox"><pre><code>/* CONSTANTS AND MACROS */</code></pre></div><p>to follow the kernel coding style.</p><p>The current &quot;fixup&quot; wouldn&#039;t even be valid as multiline comments, because the asterisks are supposed to line up.&nbsp; Like this (in the networking subsystem - else we would expect an empty first line):<br /></p><div class="codebox"><pre><code>/* CONSTANTS AND MACROS
 * next line
 */</code></pre></div><p>Oh, well.&nbsp; That comment is pointless in any case, and shold really have been deleted instead of fixed up <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278760">
				<div class="post-metadata">
					<div class="post-num">Post #5380</div>
					<div class="post-author">JimWright</div>
					<div class="post-datetime">
						3 Jun 2015, 18:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>fe31nz wrote:</cite><blockquote><p>Generally, when you have fine control of a fan speed and reasonable sensor data as we seem to have here, the right way to control the fan will be a PID loop.&nbsp; PID = proportional-integral-derivative, IIRC.&nbsp; This is a standard method of control used in industrial equipment, where there is a rate setting for how quickly the fan is sped up and another for how quickly it is slowed down and so on.&nbsp; The result is the fan speed tracking the temperature in a controlled way, with hysteresis so that it is not turning on and off all the time, or speeding up and slowing down over short periods in a way that creates an annoying noise.</p></blockquote></div><p>I understand what you are saying, and generally agree with that.&nbsp; It would require a more involved script though to accomplish what I think you are asking for.</p><p>My take would be that as the heat is going up, you&#039;d want to ramp the fan speed more quickly, and as the temp is coming down, back off on the fan more gradually.&nbsp; Since this script is not maintaining any values through each iteration (unless we add a data file that is read and written each loop, with X values of past history each time), the best we can do is check what the current fan speed is set to, and I&#039;m not sure if it&#039;s actually possible to read the fan speed, I&#039;ve only seen examples where the speed is getting set.</p><p>Assuming we can read the fan speed, if the fan is off and we need to turn it on, instead of starting at 33%, start at 50%, if we are already running, increase by 20% (actual % based on how frequently script is called).&nbsp; If we need to slow down the fan, just drop it by 10% each time through the loop to back it off, depending on how frequently the script is getting called (1 minute calls, back off 20%, 5 second calls, back off 5%, etc).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278763">
				<div class="post-metadata">
					<div class="post-num">Post #5381</div>
					<div class="post-author">fe31nz</div>
					<div class="post-datetime">
						3 Jun 2015, 19:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>JimWright wrote:</cite><blockquote><div class="quotebox"><cite>fe31nz wrote:</cite><blockquote><p>Generally, when you have fine control of a fan speed and reasonable sensor data as we seem to have here, the right way to control the fan will be a PID loop.&nbsp; PID = proportional-integral-derivative, IIRC.&nbsp; This is a standard method of control used in industrial equipment, where there is a rate setting for how quickly the fan is sped up and another for how quickly it is slowed down and so on.&nbsp; The result is the fan speed tracking the temperature in a controlled way, with hysteresis so that it is not turning on and off all the time, or speeding up and slowing down over short periods in a way that creates an annoying noise.</p></blockquote></div><p>I understand what you are saying, and generally agree with that.&nbsp; It would require a more involved script though to accomplish what I think you are asking for.</p><p>My take would be that as the heat is going up, you&#039;d want to ramp the fan speed more quickly, and as the temp is coming down, back off on the fan more gradually.&nbsp; Since this script is not maintaining any values through each iteration (unless we add a data file that is read and written each loop, with X values of past history each time), the best we can do is check what the current fan speed is set to, and I&#039;m not sure if it&#039;s actually possible to read the fan speed, I&#039;ve only seen examples where the speed is getting set.</p><p>Assuming we can read the fan speed, if the fan is off and we need to turn it on, instead of starting at 33%, start at 50%, if we are already running, increase by 20% (actual % based on how frequently script is called).&nbsp; If we need to slow down the fan, just drop it by 10% each time through the loop to back it off, depending on how frequently the script is getting called (1 minute calls, back off 20%, 5 second calls, back off 5%, etc).</p></blockquote></div><p>Yes, that is sort of what a PID loop does, but much better.&nbsp; I have never actually written one myself - the code I was writing at the time I met them was actually a display controller for a dairy factory&#039;s cream seperators, and it interfaced to the the control equipment that was doing the PID control.&nbsp; But my understanding is that all the information that is needed is the current fan output setting and current temperature and previous temperature.&nbsp; Then you run the PID calculation using the rate and setpoint settings and the current data and that gives you the new fan output setting.&nbsp; Back then (when an 8080 was a fast CPU), the calculation was pretty CPU intensive, but I think that will not be a problem for a modern ARM CPU.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278779">
				<div class="post-metadata">
					<div class="post-num">Post #5382</div>
					<div class="post-author">gufus</div>
					<div class="post-datetime">
						3 Jun 2015, 22:10					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>JimWright wrote:</cite><blockquote><p>I took the code posted, and revised it slightly to add a midpoint setting.</p></blockquote></div><p>I tested your midpoint logic and the script failed,&nbsp; your code didn&#039; even start. My code and yours both failed, I&#039;m still using on/off.</p><p>I&#039;m doing something wrong (but I can&#039;t see it)</p><p>I&#039;d be interested in your modified code, maybe PID code eh <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>gufus</strong> on 3 Jun 2015, 23:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278783">
				<div class="post-metadata">
					<div class="post-num">Post #5383</div>
					<div class="post-author">lifehacksback</div>
					<div class="post-datetime">
						3 Jun 2015, 22:47					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ll give it a shot writing a script for our router. Quick question what is ddr and wifi on the scripts? I&#039;m assuming wifi is the temps recorded by the wifi sensor but what is ddr? </p><p>Thank You</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278785">
				<div class="post-metadata">
					<div class="post-num">Post #5384</div>
					<div class="post-author">gufus</div>
					<div class="post-datetime">
						3 Jun 2015, 23:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>lifehacksback wrote:</cite><blockquote><p>I&#039;ll give it a shot writing a script for our router. Quick question what is ddr and wifi on the scripts? I&#039;m assuming wifi is the temps recorded by the wifi sensor but what is ddr? </p><p>Thank You</p></blockquote></div><p>/usr/sbin$ sensors<br />tmp421-i2c-0-4c<br />Adapter: mv64xxx_i2c adapter<br />temp1:&nbsp; &nbsp; &nbsp; &nbsp; +47.3 C&nbsp; WIFI<br />temp2:&nbsp; &nbsp; &nbsp; &nbsp; +49.8 C&nbsp; DDR</p><p>armada_thermal-virtual-0<br />Adapter: Virtual device<br />temp1:&nbsp; &nbsp; &nbsp; &nbsp; +55.9 C&nbsp; CPU</p><p>I&#039;m not sure about your question.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278789">
				<div class="post-metadata">
					<div class="post-num">Post #5385</div>
					<div class="post-author">LIVADITISD</div>
					<div class="post-datetime">
						3 Jun 2015, 23:43					</div>
				</div>
				<div class="post-content content">
					<p>looking for new firmware reliable wifi connection and a link to download Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278790">
				<div class="post-metadata">
					<div class="post-num">Post #5386</div>
					<div class="post-author">alirz</div>
					<div class="post-datetime">
						3 Jun 2015, 23:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>lifehacksback wrote:</cite><blockquote><p>I&#039;ll give it a shot writing a script for our router. Quick question what is ddr and wifi on the scripts? I&#039;m assuming wifi is the temps recorded by the wifi sensor but what is ddr? </p><p>Thank You</p></blockquote></div><p>I think DDR = flash or ram chips?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278791">
				<div class="post-metadata">
					<div class="post-num">Post #5387</div>
					<div class="post-author">alirz</div>
					<div class="post-datetime">
						3 Jun 2015, 23:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>LIVADITISD wrote:</cite><blockquote><p>looking for new firmware reliable wifi connection and a link to download Thanks</p></blockquote></div><p>Looks like a craigslist ad <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />&nbsp; &nbsp; </p><p>I think the RC1 link was few pages back if im not mistaken.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278792">
				<div class="post-metadata">
					<div class="post-num">Post #5388</div>
					<div class="post-author">gufus</div>
					<div class="post-datetime">
						3 Jun 2015, 23:52					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>alirz wrote:</cite><blockquote><div class="quotebox"><cite>lifehacksback wrote:</cite><blockquote><p>I&#039;ll give it a shot writing a script for our router. Quick question what is ddr and wifi on the scripts? I&#039;m assuming wifi is the temps recorded by the wifi sensor but what is ddr? </p><p>Thank You</p></blockquote></div><p>I think DDR = flash or ram chips?</p></blockquote></div><div class="codebox"><pre><code>Board: RD-AXP-GP rev 1.0
SoC:   MV78230 B0
       running 2 CPUs
       Custom configuration
CPU:   Marvell PJ4B (584) v7 (Rev 2) LE
       CPU 0
       CPU    @ 1200 [MHz]
       L2     @ 600 [MHz]
       TClock @ 250 [MHz]
       DDR    @ 600 [MHz]
       DDR 32Bit Width, FastPath Memory Access
       DDR ECC Disabled
DRAM:  256 MiB

NAND:  Spansion 1Gb(ID=F101) 128 MiB</code></pre></div><br /><p>NAND is the flash chip</p>											<p class="post-edited">(Last edited by <strong>gufus</strong> on 3 Jun 2015, 23:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278796">
				<div class="post-metadata">
					<div class="post-num">Post #5389</div>
					<div class="post-author">RickStep</div>
					<div class="post-datetime">
						4 Jun 2015, 00:57					</div>
				</div>
				<div class="post-content content">
					<p>Perhaps a solution here is to take a rolling average of say 5 temperature samples a few seconds apart, average them and the next sample replaces the oldest one.</p><p>If five samples were 55 55 55 62 55; the fan might start for a few seconds and go off.</p><p>IF the temp was&nbsp; &nbsp; &nbsp;55 55 55 55 55 55 55 58&nbsp; &nbsp;55&nbsp; &nbsp; &nbsp;61&nbsp; &nbsp; 55&nbsp; &nbsp; 60&nbsp; &nbsp; 65&nbsp; &nbsp; 62&nbsp; &nbsp;65&nbsp; &nbsp; . . . .</p><p>The rolling average would be&nbsp; &nbsp; &nbsp;55 55 55 55.6 55.6 56.8 56.8 57.8 59.2 60.6 61.4&nbsp; . . . .</p><p>While the temperature is going up and down; the rolling average shows a steady but slower increase.</p><p>The code for this one temperature sample is simple and would be more complicated for 3 - CPU, memory and the radio (s).</p><p>The issue then becomes how many samples to average, how many seconds apart and then do you use the radio (s), the memory or the CPU, all three and are they equally weighted.</p><p>On routers where the load swings wildly; using a single sample to set the fan would likely create too many stop/start or speed change cycles.</p><p>The rolling average can produce an optimum fan speed to keep a constant temperature under a constant heavy load; but it would take a few seconds longer to react; but eliminate &quot;knee jerk reactions&quot; of a simple piece of code.</p><p>In addition, another piece of could monitor the differential over time and ramp up the fan IF the differential is continuing to widen as opposed to stabilizing or decreasing.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278799">
				<div class="post-metadata">
					<div class="post-num">Post #5390</div>
					<div class="post-author">JimWright</div>
					<div class="post-datetime">
						4 Jun 2015, 03:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>gufus wrote:</cite><blockquote><div class="quotebox"><cite>JimWright wrote:</cite><blockquote><p>I took the code posted, and revised it slightly to add a midpoint setting.</p></blockquote></div><p>I tested your midpoint logic and the script failed,&nbsp; your code didn&#039; even start. My code and yours both failed, I&#039;m still using on/off.</p><p>I&#039;m doing something wrong (but I can&#039;t see it)</p><p>I&#039;d be interested in your modified code, maybe PID code eh <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>OK, I blame your script, since I used that as a base.&nbsp; LOL</p><p>Actually, I think you&#039;re setting the temps wrong, based on the original script at /sbin/fan_ctrl.sh.&nbsp; You are taking the entire values return, rather than just the first two characters.&nbsp; Also, your CPU_OFF temp was set higher than the CPU_ON.</p><p>So, I just now used the original /sbin/fan_ctrl.sh as a base, and created the following:</p><div class="codebox"><pre><code>#!/bin/sh

CPU_TEMP=`cut -c1-2 /sys/class/hwmon/hwmon2/temp1_input`
DDR_TEMP=`cut -c1-2 /sys/class/hwmon/hwmon1/temp1_input`
WIFI_TEMP=`cut -c1-2 /sys/class/hwmon/hwmon1/temp2_input`

echo &quot;CPU_TEMP = $CPU_TEMP, DDR_TEMP = $DDR_TEMP, WIFI_TEMP = $WIFI_TEMP&quot;

CPU_LOW=55    # Script default is 85
CPU_MID=65    # Script default not specified
CPU_HIGH=80   # Script default is 95
DDR_LOW=55    # Script default is 65
DDR_MID=65    # Script default not specified
DDR_HIGH=70   # Script default is 75
WIFI_LOW=55  # Script default is 100
WIFI_MID=65  # Script default not specified
WIFI_HIGH=75 # Script default is 115

if [ -d /sys/devices/pwm_fan ];then
        FAN_CTRL=/sys/devices/pwm_fan/hwmon/hwmon0/pwm1
elif [ -d /sys/devices/platform/pwm_fan ];then
        FAN_CTRL=/sys/devices/platform/pwm_fan/hwmon/hwmon0/pwm1
else
        exit 0
fi

FAN_SPEED=`cat $FAN_CTRL`

echo &quot;CPU_TEMP = $CPU_TEMP, DDR_TEMP = $DDR_TEMP, WIFI_TEMP = $WIFI_TEMP, FAN = $FAN_SPEED&quot;

if [ &quot;$CPU_TEMP&quot; -ge &quot;$CPU_HIGH&quot; -o &quot;$DDR_TEMP&quot; -ge &quot;$DDR_HIGH&quot; -o &quot;$WIFI_TEMP&quot; -ge &quot;$WIFI_HIGH&quot; ];then
        echo &quot;255&quot; &gt; $FAN_CTRL
elif [ &quot;$CPU_TEMP&quot; -ge &quot;$CPU_MID&quot; -o &quot;$DDR_TEMP&quot; -ge &quot;$DDR_MID&quot; -o &quot;$WIFI_TEMP&quot; -ge &quot;$WIFI_MID&quot; ];then
        echo &quot;192&quot; &gt; $FAN_CTRL
elif [ &quot;$CPU_TEMP&quot; -ge &quot;$CPU_LOW&quot; -o &quot;$DDR_TEMP&quot; -ge &quot;$DDR_LOW&quot; -o &quot;$WIFI_TEMP&quot; -ge &quot;$WIFI_LOW&quot; ];then
        echo &quot;64&quot; &gt; $FAN_CTRL
else
        echo &quot;0&quot; &gt; $FAN_CTRL
fi</code></pre></div><p>One thing that I noticed since I last checked this script was that there is a midpoint set, my version actually has 4 setpoints as a result, and the Belkin numbers listed in your script were different than the ones in the the /sbin/fan_ctrl.sh one.</p><p>Also, I checked the sensor output, and saw that my running temp was far lower than what would trigger the script, so I lowered the triggers for the fans to kick in.&nbsp; My current values are:</p><div class="codebox"><pre><code>root@OpenWrt:/sbin# sensors
tmp421-i2c-0-4c
Adapter: mv64xxx_i2c adapter
temp1:        +44.5 C
temp2:        +47.9 C

armada_thermal-virtual-0
Adapter: Virtual device
temp1:        +50.8 C</code></pre></div><p>Also, in my script, I&#039;m echoing back the varlables so I can monitor when testing manually, including the current fan speed before any changes.&nbsp; So, fan speed is readable to use for some calculations.</p><p>As I mentioned earlier, this script is called on a regular interval and no values are preserved between runs, so collecting a history of values to use in calculations isn&#039;t really feasable without creating a data file to store these, without rewriting the script to stay running constantly.</p>											<p class="post-edited">(Last edited by <strong>JimWright</strong> on 4 Jun 2015, 03:18)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278804">
				<div class="post-metadata">
					<div class="post-num">Post #5391</div>
					<div class="post-author">doITright</div>
					<div class="post-datetime">
						4 Jun 2015, 03:33					</div>
				</div>
				<div class="post-content content">
					<p>@JimWright</p><p>I am running much warmer than what you show.....</p><p>root@WRT1900AC-P:/sbin# sensors<br />tmp421-i2c-0-4c<br />Adapter: mv64xxx_i2c adapter<br />temp1:&nbsp; &nbsp; &nbsp; &nbsp; +53.3 C<br />temp2:&nbsp; &nbsp; &nbsp; &nbsp; +52.7 C</p><p>armada_thermal-virtual-0<br />Adapter: Virtual device<br />temp1:&nbsp; &nbsp; &nbsp; &nbsp; +64.6 C</p><p>Will give your script a spin and advise</p><p>Cheers</p><p>*EDIT*</p><p>Played with the numbers a bit:</p><p>CPU_LOW=50&nbsp; &nbsp; # Script default is 85<br />CPU_MID=55&nbsp; &nbsp; # Script default not specified<br />CPU_HIGH=60&nbsp; &nbsp;# Script default is 95<br />DDR_LOW=50&nbsp; &nbsp; # Script default is 65<br />DDR_MID=55&nbsp; &nbsp; # Script default not specified<br />DDR_HIGH=60&nbsp; &nbsp;# Script default is 75<br />WIFI_LOW=50&nbsp; &nbsp;# Script default is 100<br />WIFI_MID=60&nbsp; &nbsp;# Script default not specified<br />WIFI_HIGH=70&nbsp; # Script default is 115</p><p>Better results:</p><p>root@WRT1900AC-P:/sbin# sensors<br />tmp421-i2c-0-4c<br />Adapter: mv64xxx_i2c adapter<br />temp1:&nbsp; &nbsp; &nbsp; &nbsp; +44.3 C<br />temp2:&nbsp; &nbsp; &nbsp; &nbsp; +44.9 C</p><p>armada_thermal-virtual-0<br />Adapter: Virtual device<br />temp1:&nbsp; &nbsp; &nbsp; &nbsp; +54.5 C</p><p>I still think the temps are too high compared to my tower (quad core CPU is running at 32 C, DRAM at 36 C, and mb at 41 C)</p>											<p class="post-edited">(Last edited by <strong>doITright</strong> on 4 Jun 2015, 05:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278807">
				<div class="post-metadata">
					<div class="post-num">Post #5392</div>
					<div class="post-author">paul.culmsee</div>
					<div class="post-datetime">
						4 Jun 2015, 04:35					</div>
				</div>
				<div class="post-content content">
					<p>Slightly left field question, but does luci_statsitics have support for displaying temp and environmental data via RRDTool? I see the collectd exec plug supported and I was able to take the scripts in this thread and get collectd to grab the data into an RRD file, but it is looking like I have to roll my own graphs.</p><p>Unless I am missing something... is there an alternative to using the collectd exec plugin?</p><p>Paul</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278810">
				<div class="post-metadata">
					<div class="post-num">Post #5393</div>
					<div class="post-author">JimWright</div>
					<div class="post-datetime">
						4 Jun 2015, 06:19					</div>
				</div>
				<div class="post-content content">
					<p>gofus, I&#039;ve gotten your script working with some tweaks:</p><div class="codebox"><pre><code>#!/bin/sh

# put in /usr/sbin/fan_monitor
# fan_monitor
# Utility script to monitor temperatures and turn on/off the fan in accordance
# with the original Belkin specs.

INTERVAL=5 # Poll every 5 seconds

# The fan will turn on if any of these temperatures is exceeded
CPU_ON=60000    # Belkin default is 85
DDR_ON=60000    # Belkin default is 65
WIFI_ON=65000   # Belkin default is 105

# The fan will run at reduced speed if any of these temperatures are below these values
CPU_MID=55000     # Belkin sets no default
DDR_MID=55000     # Belkin sets no default
WIFI_MID=60000    # Belkin sets no default


# The fan will turn off if all of the temperatures are below these values
CPU_OFF=50000     # Belkin default is 80
DDR_OFF=50000     # Belkin default is 60
WIFI_OFF=55000    # Belkin default is 100

old_pwm=-1

fan_set() {
    if [ &quot;$1&quot; -eq 2 ]; then
        pwm=255
    elif [ &quot;$1&quot; -eq 1 ]; then
        pwm=128
    elif [ &quot;$1&quot; -eq 0 ]; then
        pwm=0
    fi
    if [ &quot;$pwm&quot; -ne &quot;$old_pwm&quot; ]; then
        echo &quot;Setting fan PWM to: $pwm&quot;
        echo &quot;$pwm&quot; &gt; /sys/devices/pwm_fan/hwmon/hwmon0/pwm1
        old_pwm=$pwm
    fi
}

# Turn fan on when exiting
trap &quot;{ fan_set 1; exit; }&quot; SIGINT SIGTERM

# Main fan control loop
while :
do
    cpu=`cat /sys/class/hwmon/hwmon2/temp1_input`
    ddr=`cat /sys/class/hwmon/hwmon1/temp1_input`
    wifi=`cat /sys/class/hwmon/hwmon1/temp2_input`

    if [ &quot;$cpu&quot; -ge $CPU_ON -o &quot;$ddr&quot; -ge $DDR_ON -o &quot;$wifi&quot; -ge $WIFI_ON ]
    then
        fan_set 2
    elif [ &quot;$cpu&quot; -le $CPU_OFF -a &quot;$ddr&quot; -le $DDR_OFF -a &quot;$wifi&quot; -le $WIFI_OFF ]
    then
        fan_set 0
    elif [ &quot;$cpu&quot; -le $CPU_MID -a &quot;$ddr&quot; -le $DDR_MID -a &quot;$wifi&quot; -le $WIFI_MID ]
    then
        fan_set 1
    fi

    sleep $INTERVAL
done</code></pre></div><p>I lowered the setpoints a bit for my testing, since my sensors were reporting numbers that wouldn&#039;t have triggered this script.&nbsp; I&#039;m running my unit with the cover off, and actually had a lamp up against the heatsink to give more heat. </p><p>Also figured out what you were doing reading the temps, and that you later were doing a divide by 1000 to adjust the numbers.&nbsp; I just set the setpoints accordingly (60000 instead of 60, etc), and took the division out of the script.&nbsp; Other minor script cleanup, your sleep/wait wasn&#039;t being processed correctly, this version seems to work OK.&nbsp; 5 Second interval for testing only, maybe 10-15 seconds for real use?</p><p>I just tested the script standalone, not with your init.d script running.</p><p>Suggestion if implementing this would be to change the cron job from running the default fan control script to instead call a script to call your fan_control start script to keep it running.</p><p>Side question, I&#039;ve been trying to figure out where those original Belkin numbers came from, I&#039;ve seen various references to them, but no definitive source.&nbsp; Any ideas on that?&nbsp; I&#039;m wondering if we are using the right numbers at all there for a baseline?</p>											<p class="post-edited">(Last edited by <strong>JimWright</strong> on 4 Jun 2015, 06:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278818">
				<div class="post-metadata">
					<div class="post-num">Post #5394</div>
					<div class="post-author">JimWright</div>
					<div class="post-datetime">
						4 Jun 2015, 09:30					</div>
				</div>
				<div class="post-content content">
					<p>Some useful info I found tonight on setting the fan speed.&nbsp; Setting a fan speed of less than 95 won&#039;t actually start the fan, my fan at least.&nbsp; The speed is set too low to get the fan running from a stop, if already running, you can set lower values, to a point, before the fan stops running.&nbsp; Essentially, any fan speed less than 100 will effectively be stopped.</p><p>I spent quite a bit of time tonight working on a script that set the fan to a percentage speed based on various numbers, and couldn&#039;t figure out why the fan wasn&#039;t spinning.&nbsp; So having specific setpoints looks like the way to go here, OFF, 50%, 75%, 100%.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278825">
				<div class="post-metadata">
					<div class="post-num">Post #5395</div>
					<div class="post-author">bmork</div>
					<div class="post-datetime">
						4 Jun 2015, 10:39					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>RickStep wrote:</cite><blockquote><p>Perhaps a solution here is to take a rolling average of say 5 temperature samples a few seconds apart, average them and the next sample replaces the oldest one.</p></blockquote></div><p>Before creating too advanced solutions specifically for the WRT1900AC, you might consider adapting some of the existing fancontrol solutions. The presence of a fan is somewhat exceptional for embedded router devices, but if we extend the view to consider x86 systems, then these requirements aren&#039;t really new or exceptional in any way.</p><p>See for example <a href="http://www.lm-sensors.org/wiki/man/fancontrol">http://www.lm-sensors.org/wiki/man/fancontrol</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278929">
				<div class="post-metadata">
					<div class="post-num">Post #5396</div>
					<div class="post-author">gufus</div>
					<div class="post-datetime">
						5 Jun 2015, 07:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>JimWright wrote:</cite><blockquote><p>gofus, I&#039;ve gotten your script working with some tweaks:</p></blockquote></div><p>Thanks for your feedback <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Something came up today, tomorrow I&#039;ll have more time. My original scrip works, with your old modifications and testing then... it was broken. My original scrip is working/running right now.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278931">
				<div class="post-metadata">
					<div class="post-num">Post #5397</div>
					<div class="post-author">kop48</div>
					<div class="post-datetime">
						5 Jun 2015, 08:53					</div>
				</div>
				<div class="post-content content">
					<p>Got my first router lockup today after about a week. Is there a build that I should focus on to help iron out issues? Anything that needs to be captured when the lockup occurs?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278933">
				<div class="post-metadata">
					<div class="post-num">Post #5398</div>
					<div class="post-author">cptn_brittish</div>
					<div class="post-datetime">
						5 Jun 2015, 09:17					</div>
				</div>
				<div class="post-content content">
					<p>I have edited the fan control script so that it incrementally changes the fan speed.<br />This isn&#039;t done extremely well but it is an initial step in the direction it appears we are attempting to accomplish.<br />TODO: Fix the way that the fan speeds are changed so that they are more dynamic then increments of 10</p><div class="codebox"><pre><code>#!/bin/sh

# put in /usr/sbin/fan_monitor
# fan_monitor
# Utility script to monitor temperatures and turn on/off the fan in accordance
# with the original Belkin specs.

INTERVAL=5 # Poll every 5 seconds

# The fan will turn on if any of these temperatures is exceeded
CPU_ON=60000    # Belkin default is 85
DDR_ON=60000    # Belkin default is 65
WIFI_ON=65000   # Belkin default is 105

# The fan will run at reduced speed if any of these temperatures are below these values
CPU_MID=55000     # Belkin sets no default
DDR_MID=55000     # Belkin sets no default
WIFI_MID=60000    # Belkin sets no default


# The fan will turn off if all of the temperatures are below these values
CPU_OFF=50000     # Belkin default is 80
DDR_OFF=50000     # Belkin default is 60
WIFI_OFF=55000    # Belkin default is 100

# Fan Speeds
current_pwm=0 # 100 starts fan moving
target_pwm=0

fan_set() {
    if [ &quot;$1&quot; -eq 2 ]; then
        target_pwm=255
    elif [ &quot;$1&quot; -eq 1 ]; then
        target_pwm=128
    elif [ &quot;$1&quot; -eq 0 ]; then
        target_pwm=0
    fi
    if [ &quot;$current_pwm&quot; -ne &quot;$target_pwm&quot; ]; then
        echo &quot;Spinning fan up to: $target_pwm&quot;
    echo &quot;Currnently at: $current_pwm&quot;

    # If speed is lower then the target speed increase the speed
    if [ &quot;$target_pwm&quot; -gt &quot;$current_pwm&quot; ]; then
        current_pwm=$((current_pwm + 10))

        # if the current speed is now more then the current set to the target speed
        if [ &quot;$target_pwm&quot; -lt &quot;$current_pwm&quot; ]; then
        current_pwm=target_pwm
        fi

    fi

    # If speed is higher then the target speed decrease the speed
    if [ &quot;$target_pwm&quot; -lt &quot;$current_pwm&quot; ]; then
        current_pwm=$((current_pwm - 10))

        # if the current speed is now more then the current set to the target speed
        if [ &quot;$target_pwm&quot; -gt &quot;$current_pwm&quot; ]; then
        current_pwm=target_pwm
        fi

    fi

    echo &quot;Changing speed to: $current_pwm&quot;
        echo &quot;$current_pwm&quot; &gt; /sys/devices/pwm_fan/hwmon/hwmon0/pwm1
    fi
}

# Turn fan on when exiting
trap &quot;{ fan_set 1; exit; }&quot; SIGINT SIGTERM

# Main fan control loop
while :
do
    cpu=`cat /sys/class/hwmon/hwmon2/temp1_input`
    ddr=`cat /sys/class/hwmon/hwmon1/temp1_input`
    wifi=`cat /sys/class/hwmon/hwmon1/temp2_input`

    if [ &quot;$cpu&quot; -ge $CPU_ON -o &quot;$ddr&quot; -ge $DDR_ON -o &quot;$wifi&quot; -ge $WIFI_ON ]
    then
        fan_set 2
    elif [ &quot;$cpu&quot; -le $CPU_OFF -a &quot;$ddr&quot; -le $DDR_OFF -a &quot;$wifi&quot; -le $WIFI_OFF ]
    then
        fan_set 0
    elif [ &quot;$cpu&quot; -le $CPU_MID -a &quot;$ddr&quot; -le $DDR_MID -a &quot;$wifi&quot; -le $WIFI_MID ]
    then
        fan_set 1
    fi

    sleep $INTERVAL
done</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278934">
				<div class="post-metadata">
					<div class="post-num">Post #5399</div>
					<div class="post-author">gufus</div>
					<div class="post-datetime">
						5 Jun 2015, 09:48					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>JimWright wrote:</cite><blockquote><p>gofus, I&#039;ve gotten your script working with some tweaks:</p></blockquote></div><p>Nice code, it&#039;s working here. I&#039;ll stress the unit out and watch.</p><p>/usr/sbin$ sensors<br />tmp421-i2c-0-4c<br />Adapter: mv64xxx_i2c adapter<br />temp1:&nbsp; &nbsp; &nbsp; &nbsp; +43.3 C&nbsp; <br />temp2:&nbsp; &nbsp; &nbsp; &nbsp; +47.0 C&nbsp; </p><p>armada_thermal-virtual-0<br />Adapter: Virtual device<br />temp1:&nbsp; &nbsp; &nbsp; &nbsp; +50.8 C&nbsp; </p><p>/usr/sbin$ cat /sys/devices/pwm_fan/hwmon/hwmon0/pwm1<br />128</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278942">
				<div class="post-metadata">
					<div class="post-num">Post #5400</div>
					<div class="post-author">cptn_brittish</div>
					<div class="post-datetime">
						5 Jun 2015, 11:00					</div>
				</div>
				<div class="post-content content">
					<p>Made some more changes to the Fan Monitor script to access variables properly, log messages to the system log and some small spelling mistakes<br /></p><div class="codebox"><pre><code>#!/bin/sh

# put in /usr/sbin/fan_monitor.sh
# fan_monitor
# Utility script to monitor temperatures and turn on/off the fan in accordance
# with the original Belkin specs.

INTERVAL=5 # Poll every 5 seconds

# The fan will turn on if any of these temperatures is exceeded
CPU_ON=60000    # Belkin default is 85
DDR_ON=60000    # Belkin default is 65
WIFI_ON=65000   # Belkin default is 105

# The fan will run at reduced speed if any of these temperatures are below these values
CPU_MID=55000     # Belkin sets no default
DDR_MID=55000     # Belkin sets no default
WIFI_MID=60000    # Belkin sets no default


# The fan will turn off if all of the temperatures are below these values
CPU_OFF=50000     # Belkin default is 80
DDR_OFF=50000     # Belkin default is 60
WIFI_OFF=55000    # Belkin default is 100

# Fan Speeds
current_pwm=0 # 100 starts fan moving
target_pwm=0

fan_set() {
    if [ &quot;$1&quot; -eq 2 ]; then
        target_pwm=255
    elif [ &quot;$1&quot; -eq 1 ]; then
        target_pwm=128
    elif [ &quot;$1&quot; -eq 0 ]; then
        target_pwm=0
    fi

    if [ &quot;$current_pwm&quot; -ne &quot;$target_pwm&quot; ]; then
        logger Spinning fan up to: $target_pwm, Currently at: $current_pwm

    # If speed is lower then the target speed increase the speed
    if [ &quot;$target_pwm&quot; -gt &quot;$current_pwm&quot; ]; then
        current_pwm=$(($current_pwm + 10))

        # if the current speed is now more then the current set to the target speed
        if [ &quot;$target_pwm&quot; -lt &quot;$current_pwm&quot; ]; then
        current_pwm=$target_pwm
        fi

    fi

    # If speed is higher then the target speed decrease the speed
    if [ &quot;$target_pwm&quot; -lt &quot;$current_pwm&quot; ]; then
        current_pwm=$(($current_pwm - 10))

        # if the current speed is now more then the current set to the target speed
        if [ &quot;$target_pwm&quot; -gt &quot;$current_pwm&quot; ]; then
        current_pwm=$target_pwm
        fi

    fi

    logger Changing fan speed to: $current_pwm
        echo &quot;$current_pwm&quot; &gt; /sys/devices/pwm_fan/hwmon/hwmon0/pwm1
    fi
}

# Turn fan on when exiting
trap &quot;{ echo 255 &gt;&gt; /sys/devices/pwm_fan/hwmon/hwmon0/pwm1; exit; }&quot; SIGINT SIGTERM

# Main fan control loop
while true:
do
    cpu=`cat /sys/class/hwmon/hwmon2/temp1_input`
    ddr=`cat /sys/class/hwmon/hwmon1/temp1_input`
    wifi=`cat /sys/class/hwmon/hwmon1/temp2_input`

    if [ &quot;$cpu&quot; -ge $CPU_ON -o &quot;$ddr&quot; -ge $DDR_ON -o &quot;$wifi&quot; -ge $WIFI_ON ]
    then
        fan_set 2
    elif [ &quot;$cpu&quot; -le $CPU_OFF -a &quot;$ddr&quot; -le $DDR_OFF -a &quot;$wifi&quot; -le $WIFI_OFF ]
    then
        fan_set 0
    elif [ &quot;$cpu&quot; -le $CPU_MID -a &quot;$ddr&quot; -le $DDR_MID -a &quot;$wifi&quot; -le $WIFI_MID ]
    then
        fan_set 1
    fi

    sleep $INTERVAL
done</code></pre></div>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 216 of 598</div><nav><ul><li><a href="viewtopic.php%3Fid=50173&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=50173&amp;p=214.html">214</a></li><li><a href="viewtopic.php%3Fid=50173&amp;p=215.html">215</a></li><li class="pagination-current"><span>216</span></li><li><a href="viewtopic.php%3Fid=50173&amp;p=217.html">217</a></li><li><a href="viewtopic.php%3Fid=50173&amp;p=218.html">218</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=50173&amp;p=598.html">598</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>