<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> FTDI FT2232C serial fails when connected via 4-port hub (WRT160NL)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 6 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p95164">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">staylo</div>
					<div class="post-datetime">
						1 Oct 2009, 13:23					</div>
				</div>
				<div class="post-content content">
					<p>I have a dual RS232 adapter using a FT2232D [edit: corrected from FT2232C] chipset:</p><p><span class="postimg"><img src="http://imagebin.ca/img/M_rNtZ.jpg" alt="http://imagebin.ca/img/M_rNtZ.jpg" /></span></p><p>It works when connected directly to the WRT160NL but fails when connected via a 4-port powered USB 2 hub with the error:</p><div class="codebox"><pre><code>root@OpenWrt:/# usb 1-1.3: new full speed USB device using ar71xx-ehci and address 11
usb 1-1.3: unable to read config index 0 descriptor/start: -145
usb 1-1.3: chopping to 0 config(s)
usb 1-1.3: string descriptor 0 read error: -145
usb 1-1.3: no configuration chosen from 0 choices</code></pre></div><p>Detailed error outputs below.</p><p>(Kamikaze bleeding edge, r17728)</p><p>Connecting directly to WRT160NL:</p><div class="codebox"><pre><code>usb 1-1: new full speed USB device using ar71xx-ehci and address 3
usb 1-1: configuration #1 chosen from 1 choice
ftdi_sio 1-1:1.0: FTDI USB Serial Device converter detected
usb 1-1: Detected FT2232C
usb 1-1: FTDI USB Serial Device converter now attached to ttyUSB0
ftdi_sio 1-1:1.1: FTDI USB Serial Device converter detected
usb 1-1: Detected FT2232C
usb 1-1: FTDI USB Serial Device converter now attached to ttyUSB1</code></pre></div><p>disconnecting:</p><div class="codebox"><pre><code>usb 1-1: USB disconnect, address 3
ftdi_sio ttyUSB0: FTDI USB Serial Device converter now disconnected from ttyUSB0
ftdi_sio 1-1:1.0: device disconnected
ftdi_sio ttyUSB1: FTDI USB Serial Device converter now disconnected from ttyUSB1
ftdi_sio 1-1:1.1: device disconnected</code></pre></div><p>lsusb -vvv output (Connected directly to WRT160NL):</p><div class="codebox"><pre><code>root@OpenWrt:/# lsusb -vvv

Bus 001 Device 004: ID 0403:6010 Future Technology Devices International, Ltd FT2232C Dual USB-UART/FIFO IC
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0
  bDeviceProtocol         0
  bMaxPacketSize0         8
  idVendor           0x0403 Future Technology Devices International, Ltd
  idProduct          0x6010 FT2232C Dual USB-UART/FIFO IC
  bcdDevice            5.00
  iManufacturer           1 FTDI
  iProduct                2 USB FAST SERIAL ADAPTER
  iSerial                 3 FT5PLWHP
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength        14080
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0xa0
      (Bus Powered)
      Remote Wakeup
    MaxPower               90mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              2 USB FAST SERIAL ADAPTER
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x4000  1x 0 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x02  EP 2 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x4000  1x 0 bytes
        bInterval               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              2 USB FAST SERIAL ADAPTER
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x4000  1x 0 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x04  EP 4 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x4000  1x 0 bytes
        bInterval               0
Device Status:     0x0000
  (Bus Powered)

Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            9 Hub
  bDeviceSubClass         0 Unused
  bDeviceProtocol         1 Single TT
  bMaxPacketSize0        64
  idVendor           0x1d6b Linux Foundation
  idProduct          0x0002 2.0 root hub
  bcdDevice            2.06
  iManufacturer           3 Linux 2.6.30.7 ehci_hcd
  iProduct                2 Atheros AR91xx built-in EHCI controller
  iSerial                 1 ar71xx-ehci
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength         6400
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0xe0
      Self Powered
      Remote Wakeup
    MaxPower                0mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         9 Hub
      bInterfaceSubClass      0 Unused
      bInterfaceProtocol      0 Full speed (or root) hub
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0400  1x 1024 bytes
        bInterval              12
Hub Descriptor:
  bLength               9
  bDescriptorType      41
  nNbrPorts             1
  wHubCharacteristic 0x0009
    Per-port power switching
    Per-port overcurrent protection
    TT think time 8 FS bits
  bPwrOn2PwrGood       10 * 2 milli seconds
  bHubContrCurrent      0 milli Ampere
  DeviceRemovable    0x00
  PortPwrCtrlMask    0xff
 Hub Port Status:
   Port 1: 0000.0103 power enable connect
Device Status:     0x0001
  Self Powered
root@OpenWrt:/#</code></pre></div><p>Connecting via USB 2 hub:</p><div class="codebox"><pre><code>root@OpenWrt:/# usb 1-1.3: new full speed USB device using ar71xx-ehci and address 11
usb 1-1.3: unable to read config index 0 descriptor/start: -145
usb 1-1.3: chopping to 0 config(s)
usb 1-1.3: string descriptor 0 read error: -145
usb 1-1.3: no configuration chosen from 0 choices</code></pre></div><p>lsusb -vvv output (with adapter connected to USB 2 hub:</p><div class="codebox"><pre><code>root@OpenWrt:/# lsusb -vvv
usb 1-1.1: string descriptor 0 read error: -145
usb 1-1.1: no configuration chosen from 0 choices

Bus 001 Device 005: ID 0409:005a NEC Corp. HighSpeed Hub
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            9 Hub
  bDeviceSubClass         0 Unused
  bDeviceProtocol         1 Single TT
  bMaxPacketSize0        64
  idVendor           0x0409 NEC Corp.
  idProduct          0x005a HighSpeed Hub
  bcdDevice            1.00
  iManufacturer           0
  iProduct                0
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength         6400
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0xe0
      Self Powered
      Remote Wakeup
    MaxPower              100mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         9 Hub
      bInterfaceSubClass      0 Unused
      bInterfaceProtocol      0 Full speed (or root) hub
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0100  1x 256 bytes
        bInterval              12
Hub Descriptor:
  bLength               9
  bDescriptorType      41
  nNbrPorts             4
  wHubCharacteristic 0x00a9
    Per-port power switching
    Per-port overcurrent protection
    TT think time 16 FS bits
    Port indicators
  bPwrOn2PwrGood       50 * 2 milli seconds
  bHubContrCurrent    100 milli Ampere
  DeviceRemovable    0x00
  PortPwrCtrlMask    0xff
 Hub Port Status:
   Port 1: 0000.0103 power enable connect
   Port 2: 0000.0100 power
   Port 3: 0000.0100 power
   Port 4: 0000.0100 power
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass            9 Hub
  bDeviceSubClass         0 Unused
  bDeviceProtocol         0 Full speed (or root) hub
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0001
  Self Powered

Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            9 Hub
  bDeviceSubClass         0 Unused
  bDeviceProtocol         1 Single TT
  bMaxPacketSize0        64
  idVendor           0x1d6b Linux Foundation
  idProduct          0x0002 2.0 root hub
  bcdDevice            2.06
  iManufacturer           3 Linux 2.6.30.7 ehci_hcd
  iProduct                2 Atheros AR91xx built-in EHCI controller
  iSerial                 1 ar71xx-ehci
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength         6400
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0xe0
      Self Powered
      Remote Wakeup
    MaxPower                0mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         9 Hub
      bInterfaceSubClass      0 Unused
      bInterfaceProtocol      0 Full speed (or root) hub
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0400  1x 1024 bytes
        bInterval              12
Hub Descriptor:
  bLength               9
  bDescriptorType      41
  nNbrPorts             1
  wHubCharacteristic 0x0009
    Per-port power switching
    Per-port overcurrent protection
    TT think time 8 FS bits
  bPwrOn2PwrGood       10 * 2 milli seconds
  bHubContrCurrent      0 milli Ampere
  DeviceRemovable    0x00
  PortPwrCtrlMask    0xff
 Hub Port Status:
   Port 1: 0000.0503 highspeed power enable connect
Device Status:     0x0001
  Self Powered
root@OpenWrt:/#</code></pre></div><p>Disconnecting from USB 2 hub:</p><div class="codebox"><pre><code>usb 1-1.3: USB disconnect, address 11

root@OpenWrt:/# lsusb
^C
^C^C^C

(lsusb seems to crash the console after the serial adapter is disconnected from the hub.)</code></pre></div><p>I realise this is bleeding edge at the moment, but the USB seems stable in all other configurations (I can connect a Hauwei E160 USB dongle and a PL2303-based serial adapter to this powered hub without problems). I was wondering if anyone else has come across a similar error.</p>											<p class="post-edited">(Last edited by <strong>staylo</strong> on 13 Oct 2009, 01:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95693">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">staylo</div>
					<div class="post-datetime">
						10 Oct 2009, 20:43					</div>
				</div>
				<div class="post-content content">
					<p>I haven&#039;t made any progress on this issue unfortunately; after googling for &#039;unable to read config index 0 descriptor/start&#039; it seems the usual workaround is to roll back to USB1.1, but neither kmod-usb-uhci or kmod-usb-ohci seem to work (for each: install, reboot, lsusb gives no output). I&#039;ve not been able to determine whether this is a bleeding edge issue or something more fundamental.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95697">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">JimWright</div>
					<div class="post-datetime">
						10 Oct 2009, 23:23					</div>
				</div>
				<div class="post-content content">
					<p>Have you tried any other serial adapters, preferably other FTDI chipset products?&nbsp; Have you tried another hub?&nbsp; What model/brand device is the one you have?</p><p>I&#039;m about to do some experimenting with a single port adapter, if I get it working I&#039;ll put a hub in the middle and test that.</p><p>A search of threads here found a few hub issues in older builds that were generally solved by updating to a more recent Kamikaze build, but your build is fairly recent, so that may not be the issue here...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95792">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">staylo</div>
					<div class="post-datetime">
						13 Oct 2009, 01:24					</div>
				</div>
				<div class="post-content content">
					<p>Thanks, Jim. (Sorry, forgot to subscribe to this topic and missed your reply until now)</p><p>A mistake I made is that the chipset is actually the FT2232<strong>D</strong>, which acts as a &#039;full speed device&#039; (12MBit/s) - slower than a &#039;high speed device&#039; (go figure!) under USB2.0. I don&#039;t know if that&#039;s significant, but I was unable to find any other &#039;full speed&#039; devices to test through the hub.</p><p>The hub is a <a href="http://www.startech.com/item/ST4200USBM-Mountable-4-Port-Rugged-Industrial-USB-Hub.aspx">Starforce Industrial 4-Port USB 2.0 hub</a> which is running with a 24VDC supply.</p><p>I tried another USB 2.0 hub (unpowered) with an identical error - I&#039;ll get the details of that when I find it!</p><p>As for other USB-serial adapters, I currently have 2 ATEN UC-232A USB-serial adapters (PL2303 chipset) connected to the hub which are working. I&#039;ll have a hunt around to see if I have any FTDI-based ones.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95797">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">JimWright</div>
					<div class="post-datetime">
						13 Oct 2009, 07:09					</div>
				</div>
				<div class="post-content content">
					<p>Nice hub, I ordered an <a href="http://www.usbgear.com/computer_cable_details.cfm?sku=USBG-4U2ML&amp;cats=104&amp;catid=104%2C653%2C210%2C212">extremely similar one</a> just a few days ago.&nbsp; Actually, when I was asking what model, I meant the serial interface, not the hub.&nbsp; Looks like I phrased that badly, sorry.</p><p>So, getting back to the rs232 interface, the fact that you have other adapters that work seems to point to this particular device just not liking being used with a hub.&nbsp; Do you have a PC/Mac/etc that you can try this box on with and without a hub?</p><p>Looking at your lsusb output above, for the test with a hub, I can see that it is detecting the hub, but I can&#039;t see that it is detecting anything plugged into the hub.&nbsp; &nbsp;Just for fun, if you have support added for USB storage, try plugging a flash drive into the hub and see if that is detected.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95844">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">staylo</div>
					<div class="post-datetime">
						13 Oct 2009, 21:34					</div>
				</div>
				<div class="post-content content">
					<p>Interesting coincidence! The hub seems pretty solid, no complaints.</p><p>The serial device is a USB-2COM-M , it works through the hub when connected to a Windows XP box (laptop with Intel 82801G USB controller); my linux box is currently down with a failed PSU so I haven&#039;t tested it on that.</p><p>Other devices are working fine with the WRT160NL and the powered hub, just not the USB-2COM-M; here&#039;s the output of lsusb -vvv with two UTEN UC-232A usb-serial adapters and a Huawei E169 dongle connected:</p><div class="codebox"><pre><code>Bus 001 Device 009: ID 12d1:1001 Huawei Technologies Co., Ltd. E620 USB Modem
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0 
  bDeviceProtocol         0 
  bMaxPacketSize0        64
  idVendor           0x12d1 Huawei Technologies Co., Ltd.
  idProduct          0x1001 E620 USB Modem
  bcdDevice            0.00
  iManufacturer           2 HUAWEI Technology
  iProduct                1 HUAWEI Mobile
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength        21760
    bNumInterfaces          3
    bConfigurationValue     1
    iConfiguration          3 Qualcomm Configuration
    bmAttributes         0xe0
      Self Powered
      Remote Wakeup
    MaxPower              500mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x4000  1x 0 bytes
        bInterval               5
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval              32
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x01  EP 1 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval              32
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval              32
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x02  EP 2 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval              32
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           2
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x84  EP 4 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval              32
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x03  EP 3 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0002  1x 2 bytes
        bInterval              32
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0 
  bDeviceProtocol         0 
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0001
  Self Powered

Bus 001 Device 008: ID 0557:2008 ATEN International Co., Ltd UC-232A Serial Port [pl2303]
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               1.10
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0 
  bDeviceProtocol         0 
  bMaxPacketSize0        64
  idVendor           0x0557 ATEN International Co., Ltd
  idProduct          0x2008 UC-232A Serial Port [pl2303]
  bcdDevice            3.00
  iManufacturer           1 Prolific Technology Inc. 
  iProduct                2 USB-Serial Controller D
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength         9984
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0xa0
      (Bus Powered)
      Remote Wakeup
    MaxPower              100mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0 
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0a00  2x 512 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x02  EP 2 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x4000  1x 0 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x4000  1x 0 bytes
        bInterval               0
Device Status:     0x0000
  (Bus Powered)

Bus 001 Device 007: ID 0557:2008 ATEN International Co., Ltd UC-232A Serial Port [pl2303]
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               1.10
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0 
  bDeviceProtocol         0 
  bMaxPacketSize0        64
  idVendor           0x0557 ATEN International Co., Ltd
  idProduct          0x2008 UC-232A Serial Port [pl2303]
  bcdDevice            3.00
  iManufacturer           1 Prolific Technology Inc. 
  iProduct                2 USB-Serial Controller D
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength         9984
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0xa0
      (Bus Powered)
      Remote Wakeup
    MaxPower              100mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0 
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0a00  2x 512 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x02  EP 2 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x4000  1x 0 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x4000  1x 0 bytes
        bInterval               0
Device Status:     0x0000
  (Bus Powered)

Bus 001 Device 006: ID 0409:005a NEC Corp. HighSpeed Hub
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            9 Hub
  bDeviceSubClass         0 Unused
  bDeviceProtocol         1 Single TT
  bMaxPacketSize0        64
  idVendor           0x0409 NEC Corp.
  idProduct          0x005a HighSpeed Hub
  bcdDevice            1.00
  iManufacturer           0 
  iProduct                0 
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength         6400
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0xe0
      Self Powered
      Remote Wakeup
    MaxPower              100mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         9 Hub
      bInterfaceSubClass      0 Unused
      bInterfaceProtocol      0 Full speed (or root) hub
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0100  1x 256 bytes
        bInterval              12
Hub Descriptor:
  bLength               9
  bDescriptorType      41
  nNbrPorts             4
  wHubCharacteristic 0x00a9
    Per-port power switching
    Per-port overcurrent protection
    TT think time 16 FS bits
    Port indicators
  bPwrOn2PwrGood       50 * 2 milli seconds
  bHubContrCurrent    100 milli Ampere
  DeviceRemovable    0x00
  PortPwrCtrlMask    0xff
 Hub Port Status:
   Port 1: 0000.0103 power enable connect
   Port 2: 0000.0103 power enable connect
   Port 3: 0000.0503 highspeed power enable connect
   Port 4: 0000.0100 power
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass            9 Hub
  bDeviceSubClass         0 Unused
  bDeviceProtocol         0 Full speed (or root) hub
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0001
  Self Powered

Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            9 Hub
  bDeviceSubClass         0 Unused
  bDeviceProtocol         1 Single TT
  bMaxPacketSize0        64
  idVendor           0x1d6b Linux Foundation
  idProduct          0x0002 2.0 root hub
  bcdDevice            2.06
  iManufacturer           3 Linux 2.6.30.8 ehci_hcd
  iProduct                2 Atheros AR91xx built-in EHCI controller
  iSerial                 1 ar71xx-ehci
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength         6400
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0xe0
      Self Powered
      Remote Wakeup
    MaxPower                0mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         9 Hub
      bInterfaceSubClass      0 Unused
      bInterfaceProtocol      0 Full speed (or root) hub
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0400  1x 1024 bytes
        bInterval              12
Hub Descriptor:
  bLength               9
  bDescriptorType      41
  nNbrPorts             1
  wHubCharacteristic 0x0009
    Per-port power switching
    Per-port overcurrent protection
    TT think time 8 FS bits
  bPwrOn2PwrGood       10 * 2 milli seconds
  bHubContrCurrent      0 milli Ampere
  DeviceRemovable    0x00
  PortPwrCtrlMask    0xff
 Hub Port Status:
   Port 1: 0000.0503 highspeed power enable connect
Device Status:     0x0001
  Self Powered</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95855">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">JimWright</div>
					<div class="post-datetime">
						14 Oct 2009, 00:55					</div>
				</div>
				<div class="post-content content">
					<p>Well, I&#039;m out of ideas of things to check for, on the surface it seems like this should work fine, I keep coming back to some driver incompatibility within OpenWRT that is causing an issue here.&nbsp; Unless anyone else has another idea, I&#039;d write up a bug on this and see where that leads.</p><p>FTDI is normally a pretty good chipset for serial, your other serial adapter is a 1.1 spec and not 2.0, but that shouldn&#039;t be a problem.&nbsp; Someone that knows more than me about these drivers is going to have to take the next stab at troubleshooting this one...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98510">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">J0eB1ex</div>
					<div class="post-datetime">
						9 Dec 2009, 01:32					</div>
				</div>
				<div class="post-content content">
					<p>Hi there.<br />I was experiencing the EXACT same problem on the same router (160nl).<br />I used 4 ports usb 2.0 hub and I wanted to connect couple of BT dongles. the dongle worked fine when connected directly to the usb port on the router but I&#039;ve got reading error for each and every BT dongle device connected to the hub, No matter if the hub was self powered at the moment or not.</p><p>this is the output of lsusb (as you can see it recognise the two BT dongles and the 4 ports hub):<br /></p><div class="codebox"><pre><code>root@OpenWrt:/# lsusb
Bus 001 Device 004: ID 0a12:0001 Cambridge Silicon Radio, Ltd Bluetooth Dongle (HCI mode)
Bus 001 Device 003: ID 0a12:0001 Cambridge Silicon Radio, Ltd Bluetooth Dongle (HCI mode)
Bus 001 Device 002: ID 05e3:0608 Genesys Logic, Inc. USB-2.0 4-Port HUB
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub</code></pre></div><p>and the dmesg output is:<br /></p><div class="codebox"><pre><code>usb 1-1.2: unable to read config index 0 descriptor/start: -145
usb 1-1.2: chopping to 0 config(s)
ar71xx-wdt: enabling watchdog timer
usb 1-1.2: string descriptor 0 read error: -145
usb 1-1.2: no configuration chosen from 0 choices
usb 1-1.3: new full speed USB device using ar71xx-ehci and address 4
usb 1-1.3: unable to read config index 0 descriptor/start: -145
usb 1-1.3: chopping to 0 config(s)</code></pre></div><p>when trying to connect a usb flash drive through the hub, it worked fine, as you can see in the lsusb here:<br /></p><div class="codebox"><pre><code>root@OpenWrt:/# lsusb
Bus 001 Device 003: ID 0930:6533 Toshiba Corp. 512M Stick
Bus 001 Device 002: ID 05e3:0608 Genesys Logic, Inc. USB-2.0 4-Port HUB
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub</code></pre></div><p>and the dmesg:<br /></p><div class="codebox"><pre><code>usb 1-1.1: new high speed USB device using ar71xx-ehci and address 3
usb 1-1.1: configuration #1 chosen from 1 choice</code></pre></div><p>this whole setup worked just fine on my hp laptop running ubuntu 9.10:<br /></p><div class="codebox"><pre><code>[10015.860562] usb 2-2.2: new full speed USB device using ehci_hcd and address 13
[10016.029816] usb 2-2.2: configuration #1 chosen from 1 choice
[10024.948582] usb 2-2.3: new full speed USB device using ehci_hcd and address 14
[10025.123201] usb 2-2.3: configuration #1 chosen from 1 choice</code></pre></div><p>and the lsusb:<br /></p><div class="codebox"><pre><code>Bus 002 Device 014: ID 0a12:0001 Cambridge Silicon Radio, Ltd Bluetooth Dongle (HCI mode)
Bus 002 Device 013: ID 0a12:0001 Cambridge Silicon Radio, Ltd Bluetooth Dongle (HCI mode)
Bus 002 Device 011: ID 05e3:0608 Genesys Logic, Inc. USB-2.0 4-Port HUB
Bus 002 Device 005: ID 064e:a102 Suyin Corp. 
Bus 002 Device 004: ID 0bda:0158 Realtek Semiconductor Corp. Mass Stroage Device
Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 006 Device 002: ID 04d9:1603 Holtek Semiconductor, Inc. 
Bus 006 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 004 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 005 Device 002: ID 046d:c526 Logitech, Inc. 
Bus 005 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 003 Device 002: ID 138a:0005 DigitalPersona, Inc 
Bus 003 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 007 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub</code></pre></div><p>Someone has any new Ideas about the problem?!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98521">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">staylo</div>
					<div class="post-datetime">
						9 Dec 2009, 13:42					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m afraid I haven&#039;t; I just reboot the device once I&#039;ve finished using the serial port.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180526">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">mikea7710</div>
					<div class="post-datetime">
						14 Oct 2012, 13:07					</div>
				</div>
				<div class="post-content content">
					<p>I encounter the same problem as upon description(I use usb1.1 audio card,also it works when connected directly to the WRT160NL but fails when connected via a 4-port usb2.0 hub), I find this issue has passed three ysears till now,is there any update about it?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180624">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">staylo</div>
					<div class="post-datetime">
						15 Oct 2012, 11:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mikea7710 wrote:</cite><blockquote><p>I encounter the same problem as upon description(I use usb1.1 audio card,also it works when connected directly to the WRT160NL but fails when connected via a 4-port usb2.0 hub), I find this issue has passed three ysears till now,is there any update about it?</p></blockquote></div><p>The issue stopped in later releases of OpenWRT, although I can&#039;t remember when and no longer have the hardware needed to reproduce the error. I&#039;d suggest creating a new post and give the same details as I gave in this post.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>