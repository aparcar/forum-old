<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Routing between two subnets (using 2 routers)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 16 Feb 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p74254">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">1funby</div>
					<div class="post-datetime">
						4 Oct 2008, 18:44					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I&#039;m having trouble setting up routing between 2 different subnets. Here is the layout of my network:</p><br /><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ADSL&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; WIRELESS<br />Internet&nbsp; &nbsp; &nbsp;----------&nbsp; &nbsp; &nbsp;Netgear router (non-openWRT)&nbsp; &nbsp; &nbsp;----------&nbsp; &nbsp; &nbsp;Linksys router (openWTR Kamikze)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (192.168.0.1)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (192.168.0.2 / 192.168.2.1)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| WIRED&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| WIRED<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;FIRSTPC (192.168.0.3)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SECONDPC (192.168.2.2)&nbsp; </p><br /><p>Both routers provide DHCP for their own subnet. Both PCs can access the internet but are unable to ping each other. SECONDPC can ping the Netgear and FIRSTPC can ping the Linksys (on either IP address).</p><p>What do I have to do the get them communicating? I think need to set some static routes but can&#039;t quite get my head round it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p74255">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">baskin</div>
					<div class="post-datetime">
						4 Oct 2008, 18:57					</div>
				</div>
				<div class="post-content content">
					<p>You have to put a static route on the Netgear stating that</p><p>192.168.2.0 network with netmask 255.255.255.0 is behind 192.168.0.2.</p><p>I suppose that you don&#039;t use NAT on Linksys router and you are not blocking incoming connections to the 192.168.2.0/24 network (firewall on the Linksys).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p74257">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">1funby</div>
					<div class="post-datetime">
						4 Oct 2008, 19:20					</div>
				</div>
				<div class="post-content content">
					<p>I already have the static route on the netgear to route 192.168.2.0/24 through 192.168.0.2/24</p><p>What do I need to set up on the linksys for /etc/firewall.user and /etc/config/firewall? I haven&#039;t made any changes to these files since install.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p74258">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">baskin</div>
					<div class="post-datetime">
						4 Oct 2008, 19:48					</div>
				</div>
				<div class="post-content content">
					<p>Disable the firewall on the linksys (by removing /etc/rc.d/S45firewall) and reboot it. You can enable it again (if you figure out how to configure it with : ln -s /etc/init.d/firewall /etc/rc.d/S45firewall)</p><p>Also make sure that you don&#039;t block ping requests on the pcs (disable the firewalls on both pcs as well for testing).</p><p>Check your static route. Usually you don&#039;t need to set the netmask for the gateway (192.168.0.2/24 is wrong for gateway)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p74259">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">1funby</div>
					<div class="post-datetime">
						4 Oct 2008, 20:03					</div>
				</div>
				<div class="post-content content">
					<p>That looks to have done the trick. Thanks for your help!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p163193">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">wesleyhey</div>
					<div class="post-datetime">
						3 Apr 2012, 23:46					</div>
				</div>
				<div class="post-content content">
					<p>here is a question hopefully someone can answer. I have 3 routers each with it&#039;s own internet/DSL in different areas. I would like to connect all 3 together over fiber/ethernet and each have its own subnet. I would like them to work over the switch ports not over the WAN. can this be done either using VLANS for the router to router or something else? right now i have a router in-between all 3 doing the routing. I would like all the routing to be done on the wndr3700 over the switch ports maybe vlans? 192.168.1.0 192.168.2.0 192.168.3.0 I can not use the WAN ports to route as DSL is being used there.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>