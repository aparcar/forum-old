<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Civilizing the wild: how to flash DD-WRT on EP-DL520G</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 24 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p152595">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">ggeorgiev</div>
					<div class="post-datetime">
						1 Jan 2012, 17:18					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I just got a new EDUP EP-DL520G ADSL2+/switch/wireless and want to enlighten it&#039;s brain with new knowledge. Best option, of course will be to flash DD-WRT on it, but it resists my attempts for a full day now. Other option is to program it via telnet, as I will have few of those routers, and going via the web interface is a loss of time.</p><p>So, my point is how to flash it or make it run a script upon boot-up? It refuses ftp; sftp times out; via telnet I can not save anything on squashfs. I assume the configuration shall be on some rw partition, but no luck to mount any. I need to make some site-specific configuration - traffic control, etc.</p><p>Router web interface is Actiontec; here and there in the text is mentioned Q-West; and as seen below, the model is given as:&nbsp; ProductID&nbsp; &nbsp; &nbsp; &nbsp;GT701-WG. </p><p>The router runs linux (so, not so wild, anyway), likey based on DD-WRT: Linux version 2.4.17_mvl21-malta-mips_fp_le (root@new-host-3) (gcc version 2.95.3 20010315 (release/MontaVista)) #1 Mon Jul 3 16:12:57 UTC 2006</p><p># cat /proc/cpuinfo <br />processor&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 0<br />cpu model&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: MIPS 4KEc V4.8<br />BogoMIPS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 149.91<br />wait instruction&nbsp; &nbsp; &nbsp; &nbsp; : no<br />microsecond timers&nbsp; &nbsp; &nbsp; : yes<br />extra interrupt vector&nbsp; : yes<br />hardware watchpoint&nbsp; &nbsp; &nbsp;: yes<br />VCED exceptions&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: not available<br />VCEI exceptions&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: not available</p><p># mount<br />/dev/mtdblock/0 on / type squashfs (ro)<br />none on /dev type devfs (rw)<br />proc on /proc type proc (rw)<br />ramfs on /var type ramfs (rw)</p><p>It has 4megs of flash (/dev/mtdblock/0 - 4) and 16 megs of memory; there is nice information in /proc/ticfg/env:</p><p># cat /proc/ticfg/env <br />memsize 0x01000000<br />flashsize&nbsp; &nbsp; &nbsp; &nbsp;0x00400000<br />modetty0&nbsp; &nbsp; &nbsp; &nbsp; 38400,n,8,1,hw<br />modetty1&nbsp; &nbsp; &nbsp; &nbsp; 38400,n,8,1,hw<br />bootserport&nbsp; &nbsp; &nbsp;tty0<br />cpufrequency&nbsp; &nbsp; 150000000<br />sysfrequency&nbsp; &nbsp; 125000000<br />bootloaderVersion&nbsp; &nbsp; &nbsp; &nbsp;0.22.02<br />ProductID&nbsp; &nbsp; &nbsp; &nbsp;GT701-WG<br />HWRevision&nbsp; &nbsp; &nbsp; 2A+<br />SerialNumber&nbsp; &nbsp; none<br />AEIBootVersion&nbsp; 0.9i<br />my_ipaddress&nbsp; &nbsp; 192.168.0.1<br />prompt&nbsp; Adam2_AR7RD<br />firstfreeaddress&nbsp; &nbsp; &nbsp; &nbsp; 0x9401d5a8<br />req_fullrate_freq&nbsp; &nbsp; &nbsp; &nbsp;125000000<br />maca&nbsp; &nbsp; 00:15:05:13:A4:96<br />mtd0&nbsp; &nbsp; 0x900d0000,0x903e0000<br />mtd1&nbsp; &nbsp; 0x90010000,0x900d0000<br />mtd2&nbsp; &nbsp; 0x90000000,0x90010000<br />mtd3&nbsp; &nbsp; 0x903f0000,0x90400000<br />mtd4&nbsp; &nbsp; 0x903e0000,0x903f0000<br />usb_pid 0x6010<br />usb_vid 0x1668<br />autoload&nbsp; &nbsp; &nbsp; &nbsp; 1<br />macb&nbsp; &nbsp; 00:15:05:13:A4:97<br />macc&nbsp; &nbsp; 00:15:05:13:A4:98<br />usb_board_mac&nbsp; &nbsp;00:15:05:13:A4:9A<br />usb_rndis_mac&nbsp; &nbsp;00:15:05:13:A4:9B<br />mac_ap&nbsp; 00:15:05:13:A4:99<br />usb_prod&nbsp; &nbsp; &nbsp; &nbsp; Actiontec Gateway<br />usb_man Actiontec Electronics, Inc.<br />HWA_RNDIS&nbsp; &nbsp; &nbsp; &nbsp;00:E0:A6:66:41:EB<br />HWA_HRNDIS&nbsp; &nbsp; &nbsp; 00:E0:A6:66:41:E1<br />modulation&nbsp; &nbsp; &nbsp; MMODE<br />defaults&nbsp; &nbsp; &nbsp; &nbsp; <br />DSL_FEATURE_CNTL_0&nbsp; &nbsp; &nbsp; 0x0000020C</p><p>So, ideas of how to flash DD-WRT in it without losing ADSL2+, the USB port, the Ethernet port and the wireless is welcome. Other possibility is to modify start-up scripts.</p><p>Thanks,<br />George.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p152598">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">adam2104</div>
					<div class="post-datetime">
						1 Jan 2012, 17:55					</div>
				</div>
				<div class="post-content content">
					<p>Wrong forum. This is the OpenWRT forum...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p152606">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						1 Jan 2012, 19:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ggeorgiev wrote:</cite><blockquote><p>mtd0&nbsp; &nbsp; 0x900d0000,0x903e0000<br /><strong>mtd1</strong>&nbsp; &nbsp; 0x90010000,0x900d0000<br />mtd2&nbsp; &nbsp; 0x90000000,0x90010000<br />mtd3&nbsp; &nbsp; 0x903f0000,0x90400000<br />mtd4&nbsp; &nbsp; 0x903e0000,0x903f0000</p></blockquote></div><p><strong><span style="color: red">Do it at your own risk.</span><br />Backup mtd0, mtd1, mtd3 and mtd4 before continuing. I don&#039;t know how. Maybe by ftp get.</strong></p><p>Download <a href="http://downloads.openwrt.org/backfire/10.03.1/ar7/openwrt-ar7-squashfs.bin">openwrt-ar7-squashfs.bin</a>.<br /></p><div class="codebox"><pre><code>$ ftp 192.168.0.1
Connected to 192.168.0.1.
220 ADAM2 FTP Server ready.
Name (192.168.0.1:user): adam2
530 Please login with USER and PASS.
331 Password required for adam2.
Password: adam2
230 User adam2 successfully logged in.
ftp&gt; binary
200 Type set to I.
ftp&gt; quote MEDIA FLSH
200 Media set to FLSH.
ftp&gt; quote UNSETENV mtd1
200 UNSETENV command successful
ftp&gt; quote UNSETENV mtd0
200 UNSETENV command successful
ftp&gt; quote SETENV mtd1,0x90010000,0x903e0000
200 SETENV command successful
ftp&gt; put openwrt-ar7-squashfs.bin &quot;openwrt-ar7-squashfs.bin mtd1&quot;
200 Port command successful.
120 service ready in 32 seconds.
150 Opening BINARY mode data connection for file transfer.
ftp: 2818052 bytes sent in 82.82Seconds 45.90Kbytes/sec.
ftp&gt; quote REBOOT
221-Thank you for using the FTP service on ADAM2.
221 Goodbye.
Connection closed by remote host.
ftp&gt; quit</code></pre></div><p>Modified from wiki. <strong><span style="color: red">Untested.</span></strong></p><p><a href="http://wiki.openwrt.org/toh/actiontec/gt701d#installation">Actiontec GT701D - OpenWrt Wiki</a><br /><a href="http://wiki.openwrt.org/toh/actiontec/gt704wg">Actiontec GT704WG - OpenWrt Wiki</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p152635">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						1 Jan 2012, 22:46					</div>
				</div>
				<div class="post-content content">
					<p>Boot output from the <strong>serial console</strong>:<br /></p><div class="quotebox"><blockquote><p>PSPBoot1.3 rev: 1.3.7.15<br />(c) Copyright 2002-2005 Texas Instruments, Inc. All Rights Reserved.</p><p>Press <strong><span style="color: red">ESC</span></strong> for monitor... 1</p></blockquote></div><p>Stop Adam2 before you can access the ftp server, I think.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>