<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> how to turn usb power off</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p205524">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">nozombian</div>
					<div class="post-datetime">
						24 Jun 2013, 17:22					</div>
				</div>
				<div class="post-content content">
					<p>Hi, is it possible to control usb powering from openwrt? I have tp-link tl-wr842nd. I tried some linux tips, but nothing does work from openwrt <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>If anyone is interested why: Many usb devices such as 3g modems or scanner are behaving strange sometimes and it helps to disconnect and connect them again (or powering them off and on), which would solve a lot of issues, now remotely impossible. Reboot itself does not necessarily power off the usb, so it is not solution.</p>											<p class="post-edited">(Last edited by <strong>nozombian</strong> on 24 Jun 2013, 23:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205912">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">rullbandspelare</div>
					<div class="post-datetime">
						28 Jun 2013, 09:19					</div>
				</div>
				<div class="post-content content">
					<p>On a 703n I do like this</p><p>ON<br />root@OpenWrt:/# echo 1 &gt;/sys/class/gpio/gpio8/value</p><br /><p>OFF<br />root@OpenWrt:/# echo 0 &gt;/sys/class/gpio/gpio8/value</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205919">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">nozombian</div>
					<div class="post-datetime">
						28 Jun 2013, 11:52					</div>
				</div>
				<div class="post-content content">
					<p>Halelujah! Five stars reply, thank you very much! Only it is gpio6 on wr842nd. How do you know that? <img src="https://forum.openwrt.org/img/smilies/yikes.png" width="15" height="15" alt="yikes" /> I googled a lot, but have not found a line about that.</p>											<p class="post-edited">(Last edited by <strong>nozombian</strong> on 28 Jun 2013, 11:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205966">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">kirschwasser</div>
					<div class="post-datetime">
						28 Jun 2013, 20:57					</div>
				</div>
				<div class="post-content content">
					<p>Feel free to update the wiki from time to time:</p><p><a href="http://wiki.openwrt.org/doc/faq/after.installation#how.do.i.turn.usb.power.off">http://wiki.openwrt.org/doc/faq/after.i … .power.off</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p206035">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						30 Jun 2013, 02:29					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>kirschwasser wrote:</cite><blockquote><p>Feel free to update the wiki from time to time:</p></blockquote></div><p>Done ;-)<br /><a href="http://wiki.openwrt.org/toh/tp-link/tl-mr3420#turn.usb.power.off">http://wiki.openwrt.org/toh/tp-link/tl- … .power.off</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240985">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">zokiss</div>
					<div class="post-datetime">
						21 Jul 2014, 19:27					</div>
				</div>
				<div class="post-content content">
					<p>On a TP-Link WDR3600 with 2 USB Ports works also:<br />echo 0 &gt; /sys/devices/virtual/gpio/gpio21/value<br />echo 0 &gt; /sys/devices/virtual/gpio/gpio22/value</p><p>After reboot the settings gone, wonder why...<br />Any Idea? <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240990">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">qasdfdsaq</div>
					<div class="post-datetime">
						21 Jul 2014, 19:54					</div>
				</div>
				<div class="post-content content">
					<p>Because those are not persistent settings?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240994">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">zokiss</div>
					<div class="post-datetime">
						21 Jul 2014, 20:06					</div>
				</div>
				<div class="post-content content">
					<p>And how do you make them to be?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240998">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">qasdfdsaq</div>
					<div class="post-datetime">
						21 Jul 2014, 21:30					</div>
				</div>
				<div class="post-content content">
					<p>You can&#039;t. You have to set them every time you start up.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p241002">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						21 Jul 2014, 22:24					</div>
				</div>
				<div class="post-content content">
					<p>you can add that to /etc/rc.local</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p242181">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">zokiss</div>
					<div class="post-datetime">
						30 Jul 2014, 18:15					</div>
				</div>
				<div class="post-content content">
					<p>When I add it to /etc/rc.local than it will power off USB after init process, but before init, for a short time power will be on. I&#039;ve tested it. Don&#039;t know whether good for an extern HDD. Thanks anyway, I will use it! :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p242189">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Alex Atkin UK</div>
					<div class="post-datetime">
						30 Jul 2014, 20:32					</div>
				</div>
				<div class="post-content content">
					<p>If you are concerned about a connected HDD then make sure its not set to auto-mount and add a sleep command before the gpio disable commands, so that the HDD has time to fully spin up before you shut it back down again.&nbsp; Its not like you will be rebooting every couple of minutes.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266572">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">lingnau</div>
					<div class="post-datetime">
						23 Feb 2015, 03:48					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m trying to control e relay using either the system LED or the USB power on the WR703N, but in both cases the GPIO for that device goes high or blinks during power on. Does anyone know a way to disable that behavior? Or where could I search for a workaround?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266588">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						23 Feb 2015, 08:19					</div>
				</div>
				<div class="post-content content">
					<p>XOR 2 GPIO should theoretically work :-\</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p286691">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">codwell</div>
					<div class="post-datetime">
						7 Aug 2015, 20:27					</div>
				</div>
				<div class="post-content content">
					<p>I couldn&#039;t find anywhere which gpio pin powers off USB on TP-LINK <strong>WR1043ND</strong>. None of the above is working, and on the device page it&#039;s not shown which pin is for USB power (I tried pin 15 and 16 too). Can somebody help me out with this?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p286869">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">codwell</div>
					<div class="post-datetime">
						9 Aug 2015, 20:30					</div>
				</div>
				<div class="post-content content">
					<p>Anyone, tips for how can I power off USB on 1043ND?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p286874">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">makarel</div>
					<div class="post-datetime">
						9 Aug 2015, 20:51					</div>
				</div>
				<div class="post-content content">
					<p>try hdparm package for usb disks<br />it has the capability.. but i dontknow if works fine on usb</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>