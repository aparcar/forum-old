<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> IPv6 to IPv4 gateway setup</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p88041">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">data0213</div>
					<div class="post-datetime">
						15 May 2009, 16:56					</div>
				</div>
				<div class="post-content content">
					<p>I have a situation where I have an IPv6 network at the WAN port and an IPv4 network at the LAN port. I&#039;m trying to use Kamikaze to create routes between the two networks. My goal is to connect via an IPv6 address to an IPv4 server. Can someone please help me with this setup?</p><p>&nbsp; &nbsp;------------&nbsp; &nbsp; &nbsp; &nbsp; ------------<br />&nbsp; &nbsp;| router1&nbsp; |&nbsp; -&gt; | router 2&nbsp; |&nbsp; &nbsp;IPv4 network (192.168.10.x) &amp; Server 192.168.10.15:8080<br />&nbsp; &nbsp;------------&nbsp; &nbsp; &nbsp; &nbsp; ------------</p><p>router1 is running radvd and advertising a prefix to router 2.</p><p>router2 is running Kamikaze (trunk from April). I have created an image with ipv6, ip6tables, ptrtd, totd running on router2. the WAN port (eth1) on router2 gets a correct prefix based on what radvd is advertising on router1. ptrtd prefix is set to the default &quot;3ffe:abcd:1234:9876::&quot;</p><p>I have a laptop connected to router1 that is on the same subnet as router 2. To see if I could get to the server via IPv4, I set up the following route:<br />iptables -t nat -A prerouting_wan -p tcp --dport 8080 -j DNAT --to 192.168.10.15:8080<br />iptables -A FORWARD -p tcp --dport 8080 -d 192.168.10.15 -j ACCEPT </p><p>I can now connect to the server through the WAN port IPv4 address.</p><p>Now I would like to connect to my server using the 3ffe:abcd:1234:9876::C0A8:0A0F IPv6 address (I can&#039;t do it currently)<br />1. Am I doing the right thing here?<br />2. How do I create filters using ip6tables to allow traffic to flow?<br />3. Do I need to set up special routes?</p><p>Any help will be greatly appreciated. </p><p>Also,I would like to write a howto once I&#039;m done with this setup. I think it&#039;s useful to have these setups while we are transitioning to IPv6.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>