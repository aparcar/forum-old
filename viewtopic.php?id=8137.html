<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Trying to compile package</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 4 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p37040">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">m4rc0</div>
					<div class="post-datetime">
						12 Nov 2006, 22:25					</div>
				</div>
				<div class="post-content content">
					<p>Hello outthere,</p><p>I&#039;m trying to a compile the latest version of Tor into a package.... I don&#039;t seem to get the hang of it.<br />Is there someone who will help me compile a package?</p><p>Thanks in advance</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p37069">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">florian_</div>
					<div class="post-datetime">
						13 Nov 2006, 15:35					</div>
				</div>
				<div class="post-content content">
					<p>tor is already available in openwrt : <a href="http://downloads.openwrt.org/whiterussian/rc6/packages/tor_0.1.0.17-1_mipsel.ipk">http://downloads.openwrt.org/whiterussi … mipsel.ipk</a></p><p>And latest version should be backported soon</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p37078">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">m4rc0</div>
					<div class="post-datetime">
						13 Nov 2006, 17:41					</div>
				</div>
				<div class="post-content content">
					<p>I know Tor is available. But I like to be able to compile my own packages as well.<br />So if anyone can help me..... that would be great!</p>											<p class="post-edited">(Last edited by <strong>m4rc0</strong> on 13 Nov 2006, 17:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p37278">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">pbtran</div>
					<div class="post-datetime">
						16 Nov 2006, 01:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>m4rc0 wrote:</cite><blockquote><p>I know Tor is available. But I like to be able to compile my own packages as well.<br />So if anyone can help me..... that would be great!</p></blockquote></div><p>Do u already have the OpenWRT SDK installed? And what&#039;s the errors are u getting?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p37291">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">power</div>
					<div class="post-datetime">
						16 Nov 2006, 09:15					</div>
				</div>
				<div class="post-content content">
					<p>I followed the&nbsp; steps in the Buildroot documentation (/whiterussian/openwrt/docs). If u find something missing there, create the package similar to &#039;mtd&#039; package inside /whiterussian/openwrt/packages. Finally from the top directory make package/tor-{clean,compile}. I think u will find way. Good luck!!<br />(Note: I use WRT54GL with RC5)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p37353">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">m4rc0</div>
					<div class="post-datetime">
						17 Nov 2006, 12:41					</div>
				</div>
				<div class="post-content content">
					<p>Yes I have download loaded the SDK (RC5 and RC6)... with RC5 it doesn&#039;t even start to compile. With RC6 It starts compiling but exits with an error.<br />I not sure hoe to make a proper make file en a proper config.in.... Are they neccessary to make?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p37533">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">pbtran</div>
					<div class="post-datetime">
						21 Nov 2006, 02:52					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>m4rc0 wrote:</cite><blockquote><p>Yes I have download loaded the SDK (RC5 and RC6)... with RC5 it doesn&#039;t even start to compile. With RC6 It starts compiling but exits with an error.<br />I not sure hoe to make a proper make file en a proper config.in.... Are they neccessary to make?</p></blockquote></div><p>Have u looked at the following how to to build a HelloWorld package on wiki, yet?</p><p><a href="http://wiki.openwrt.org/BuildingPackagesHowTo">http://wiki.openwrt.org/BuildingPackagesHowTo</a></p><p>I have not tried it on RC6, yet, but RC5 definitely works.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p37539">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">power</div>
					<div class="post-datetime">
						21 Nov 2006, 07:07					</div>
				</div>
				<div class="post-content content">
					<p>Hi pbtran,</p><p>Have u tried&nbsp; compiling kernel modules for OpenWRT - RC5 ? I followed the documentation : <a href="http://downloads.openwrt.org/docs/buildroot-documentation.html">http://downloads.openwrt.org/docs/build … ation.html</a>.</p><p>I want to compile a &quot;hello&quot; kernel module. I created the package and kept it in the /whiterussian/openwrt/target/linux/package directory. But i got the following errors during make :</p><p>make[4]: `/root/wr_linux2.6/whiterussian/openwrt/bin/packages/kmod-bonding_2.4.30-brcm-4_mipsel.ipk&#039; is up to date.<br />rm -rf /root/wr_linux2.6/whiterussian/openwrt/build_mipsel/linux-2.4-brcm/linux-modules/ipkg/hello<br />/root/wr_linux2.6/whiterussian/openwrt/scripts/make-ipkg-dir.sh /root/wr_linux2.6/whiterussian/openwrt/build_mipsel/linux-2.4-brcm/linux-modules/ipkg/hello ../control/kmod-hello.control 2.4.30-brcm-4 mipsel<br />echo &quot;Depends: kernel (2.4.30-brcm-4) &quot; &gt;&gt; /root/wr_linux2.6/whiterussian/openwrt/build_mipsel/linux-2.4-brcm/linux-modules/ipkg/hello/CONTROL/control<br />mkdir -p /root/wr_linux2.6/whiterussian/openwrt/build_mipsel/linux-2.4-brcm/linux-modules/ipkg/hello/lib/modules/2.4.30<br />cp&nbsp; /root/wr_linux2.6/whiterussian/openwrt/build_mipsel/linux-2.4-brcm/modules/lib/modules/2.4.30/kernel/drivers/net/hello/hello.o&nbsp; /root/wr_linux2.6/whiterussian/openwrt/build_mipsel/linux-2.4-brcm/linux-modules/ipkg/hello/lib/modules/2.4.30<br />cp: cannot stat `/root/wr_linux2.6/whiterussian/openwrt/build_mipsel/linux-2.4-brcm/modules/lib/modules/2.4.30/kernel/drivers/net/hello/hello.o&#039;: No such file or directory<br />make[4]: *** [/root/wr_linux2.6/whiterussian/openwrt/bin/packages/kmod-hello_2.4.30-brcm-4_mipsel.ipk] Error 1<br />make[4]: Leaving directory `/root/wr_linux2.6/whiterussian/openwrt/target/linux/linux-2.4&#039;<br />make[3]: *** [/root/wr_linux2.6/whiterussian/openwrt/build_mipsel/stamp/.linux-compile] Error 2<br />make[3]: Leaving directory `/root/wr_linux2.6/whiterussian/openwrt/target/linux/linux-2.4&#039;<br />make[2]: *** [2.4/brcm-compile] Error 2<br />make[2]: Leaving directory `/root/wr_linux2.6/whiterussian/openwrt/target/linux&#039;<br />make[1]: *** [linux-compile] Error 2<br />make[1]: Leaving directory `/root/wr_linux2.6/whiterussian/openwrt/target&#039;<br />make: *** [target/compile] Error 2<br />[root@localhost openwrt]#</p><p>My Makefile looks like this :<br /> </p><div class="codebox"><pre><code># $Id$

include $(TOPDIR)/rules.mk
include ../../rules.mk

PKG_NAME := kmod-hello
PKG_RELEASE := 1
PKG_BUILD_DIR := $(BUILD_DIR)/$(PKG_NAME)

include $(TOPDIR)/package/rules.mk

$(eval $(call PKG_template,KMOD_HELLO,kmod-hello,$(LINUX_VERSION)-$(BOARD)-$(PKG_RELEASE),$(ARCH),kernel ($(LINUX_VERSION)-$(BOARD)-$(LINUX_RELEASE))))

$(PKG_BUILD_DIR)/.prepared:
        mkdir -p $(PKG_BUILD_DIR)
        cp -fpR ./src/* $(PKG_BUILD_DIR)/
        touch $@

$(PKG_BUILD_DIR)/.configured:
        touch $@

$(PKG_BUILD_DIR)/.built:
        $(MAKE) -C &quot;$(KERNEL_DIR)&quot; \
                CROSS_COMPILE=&quot;$(TARGET_CROSS)&quot; \
                ARCH=&quot;$(LINUX_KARCH)&quot; \
                PATH=&quot;$(TARGET_PATH)&quot; \
                SUBDIRS=&quot;$(PKG_BUILD_DIR)&quot; \
                EXTRA_CFLAGS=&quot;-DBCMGPIO&quot; \
                modules
        touch $@

$(IPKG_KMOD_HELLO):
        install -m0755 -d $(IDIR_KMOD_HELLO)/lib/modules/$(LINUX_VERSION)
        install -m0755 -d $(IDIR_KMOD_HELLO)/etc/modules.d
        $(IPKG_BUILD) $(IDIR_KMOD_HELLO) $(PACKAGE_DIR)</code></pre></div><p>Can you please help me to figure out whats going wrong here ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p37575">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">pbtran</div>
					<div class="post-datetime">
						21 Nov 2006, 23:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>power wrote:</cite><blockquote><p>cp /root/wr_linux2.6/whiterussian/openwrt/build_mipsel/linux-2.4-brcm/modules/lib/modules/2.4.30/kernel/drivers/net/hello/hello.o&nbsp; /root/wr_linux2.6/whiterussian/openwrt/build_mipsel/linux-2.4-brcm/linux-modules/ipkg/hello/lib/modules/2.4.30<br />cp: cannot stat `/root/wr_linux2.6/whiterussian/openwrt/build_mipsel/linux-2.4-brcm/modules/lib/modules/2.4.30/kernel/drivers/net/hello/hello.o&#039;: No such file or directory</p></blockquote></div><p>Is there an object file &quot;hello.o&quot; in your package build directory? </p><p>Is this your build dir?<br />/root/wr_linux2.6/whiterussian/openwrt/build_mipsel/linux-2.4-brcm/modules/lib/modules/2.4.30/kernel/drivers/net/hello/directory/</p><p>Is this your install dir?<br />/root/wr_linux2.6/whiterussian/openwrt/build_mipsel/linux-2.4-brcm/linux-modules/ipkg/hello/lib/modules/2.4.30</p><p>If not, then u might need to copy and/or create directories (mkdir) it from your build directory to the install directory by adding this line to your Makefile after the &quot;$(MAKE) -C options&quot;.</p><p>For example: <br /></p><div class="codebox"><pre><code>  
cp -fpR $(PKG_BUILD_DIR)/hello.o $(PKG_INSTALL_DIR)/hello.o 
cp -fpR $(PKG_BUILD_DIR)/hello $(PKG_INSTALL_DIR)/hello</code></pre></div><p>You probably only want the &quot;hello&quot; binary executable in this case.</p><p>Good luck!<br />~Peter</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p37614">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">power</div>
					<div class="post-datetime">
						22 Nov 2006, 14:25					</div>
				</div>
				<div class="post-content content">
					<p>Thanks a lot !!! I compiled the kernel module successfully. I placed the hello.o in the package build directory and it worked .</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p37630">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">pbtran</div>
					<div class="post-datetime">
						22 Nov 2006, 20:57					</div>
				</div>
				<div class="post-content content">
					<p>Congratz! Your welcome and glad to hear :-)</p><br /><div class="quotebox"><cite>power wrote:</cite><blockquote><p>Thanks a lot !!! I compiled the kernel module successfully. I placed the hello.o in the package build directory and it worked .</p></blockquote></div>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>