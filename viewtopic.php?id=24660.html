<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> DIR-825, ath9x - available wifi channels</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 8 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p108709">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">zoo</div>
					<div class="post-datetime">
						7 May 2010, 09:32					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>according to <a href="http://de.wikipedia.org/wiki/IEEE_802.11#802.11a">http://de.wikipedia.org/wiki/IEEE_802.11#802.11a</a> and <a href="http://en.wikipedia.org/wiki/List_of_WLAN_channels">http://en.wikipedia.org/wiki/List_of_WLAN_channels</a> the available channels in the 5GHz band for germany (country code: DE) should be:<br />channel 36 to 140 for general use <br />and channel 155 to 177 for Fixed Broadband Wireless Access.</p><p>But when I call &quot;iw list&quot; the channels 120-128 are still disabled.</p><p>...and for 2,4 GHz only channels 1-11 are enabled, channels 12-13 are disabled/missing.</p><p>I&#039;ve set country code to &quot;DE&quot;.</p><br /><div class="codebox"><pre><code>root@OpenWrt:~# iw list
Wiphy phy1
        Band 1:
                Capabilities: 0x104e
                        HT20/HT40
                        SM Power Save disabled
                        RX HT40 SGI
                        No RX STBC
                        Max AMSDU length: 7935 bytes
                        DSSS/CCK HT40
                Maximum RX AMPDU length 65535 bytes (exponent: 0x003)
                Minimum RX AMPDU time spacing: 8 usec (0x06)
                HT TX/RX MCS rate indexes supported: 0-15
                Frequencies:
                        * 5180 MHz [36] (17.0 dBm) (radar detection)
                        * 5200 MHz [40] (17.0 dBm) (radar detection)
                        * 5220 MHz [44] (17.0 dBm) (radar detection)
                        * 5240 MHz [48] (17.0 dBm) (radar detection)
                        * 5260 MHz [52] (20.0 dBm) (passive scanning, no IBSS, radar detection)
                        * 5280 MHz [56] (20.0 dBm) (passive scanning, no IBSS, radar detection)
                        * 5300 MHz [60] (20.0 dBm) (passive scanning, no IBSS, radar detection)
                        * 5320 MHz [64] (20.0 dBm) (passive scanning, no IBSS, radar detection)
                        * 5500 MHz [100] (20.0 dBm) (passive scanning, no IBSS, radar detection)
                        * 5520 MHz [104] (20.0 dBm) (passive scanning, no IBSS, radar detection)
                        * 5540 MHz [108] (20.0 dBm) (passive scanning, no IBSS, radar detection)
                        * 5560 MHz [112] (20.0 dBm) (passive scanning, no IBSS, radar detection)
                        * 5580 MHz [116] (20.0 dBm) (passive scanning, no IBSS, radar detection)
                        * 5600 MHz [120] (disabled)
                        * 5620 MHz [124] (disabled)
                        * 5640 MHz [128] (disabled)
                        * 5660 MHz [132] (20.0 dBm) (passive scanning, no IBSS, radar detection)
                        * 5680 MHz [136] (20.0 dBm) (passive scanning, no IBSS, radar detection)
                        * 5700 MHz [140] (20.0 dBm) (passive scanning, no IBSS, radar detection)
                        * 5745 MHz [149] (disabled)
                        * 5765 MHz [153] (disabled)
                        * 5785 MHz [157] (disabled)
                        * 5805 MHz [161] (disabled)
                        * 5825 MHz [165] (disabled)
                Bitrates (non-HT):
                        * 6.0 Mbps
                        * 9.0 Mbps
                        * 12.0 Mbps
                        * 18.0 Mbps
                        * 24.0 Mbps
                        * 36.0 Mbps
                        * 48.0 Mbps
                        * 54.0 Mbps
        max # scan SSIDs: 4
        Coverage class: 0 (up to 0m)
        Supported interface modes:
                 * IBSS
                 * managed
                 * AP
                 * AP/VLAN
                 * monitor
                 * mesh point
        Supported commands:
                 * new_interface
                 * set_interface
                 * new_key
                 * new_beacon
                 * new_station
                 * new_mpath
                 * set_mesh_params
                 * set_bss
                 * authenticate
                 * associate
                 * deauthenticate
                 * disassociate
                 * join_ibss
                 * (null)
                 * (null)
                 * Unknown command (59)
                 * set_wiphy_netns
                 * connect
                 * disconnect
Wiphy phy0
        Band 1:
                Capabilities: 0x104e
                        HT20/HT40
                        SM Power Save disabled
                        RX HT40 SGI
                        No RX STBC
                        Max AMSDU length: 7935 bytes
                        DSSS/CCK HT40
                Maximum RX AMPDU length 65535 bytes (exponent: 0x003)
                Minimum RX AMPDU time spacing: 8 usec (0x06)
                HT TX/RX MCS rate indexes supported: 0-15
                Frequencies:
                        * 2412 MHz [1] (20.0 dBm)
                        * 2417 MHz [2] (20.0 dBm)
                        * 2422 MHz [3] (20.0 dBm)
                        * 2427 MHz [4] (20.0 dBm)
                        * 2432 MHz [5] (20.0 dBm)
                        * 2437 MHz [6] (20.0 dBm)
                        * 2442 MHz [7] (20.0 dBm)
                        * 2447 MHz [8] (20.0 dBm)
                        * 2452 MHz [9] (20.0 dBm)
                        * 2457 MHz [10] (20.0 dBm)
                        * 2462 MHz [11] (20.0 dBm)
                        * 2467 MHz [12] (disabled)
                        * 2472 MHz [13] (disabled)
                        * 2484 MHz [14] (disabled)
                Bitrates (non-HT):
                        * 1.0 Mbps
                        * 2.0 Mbps (short preamble supported)
                        * 5.5 Mbps (short preamble supported)
                        * 11.0 Mbps (short preamble supported)
                        * 6.0 Mbps
                        * 9.0 Mbps
                        * 12.0 Mbps
                        * 18.0 Mbps
                        * 24.0 Mbps
                        * 36.0 Mbps
                        * 48.0 Mbps
                        * 54.0 Mbps
        max # scan SSIDs: 4
        Coverage class: 0 (up to 0m)
        Supported interface modes:
                 * IBSS
                 * managed
                 * AP
                 * AP/VLAN
                 * monitor
                 * mesh point
        Supported commands:
                 * new_interface
                 * set_interface
                 * new_key
                 * new_beacon
                 * new_station
                 * new_mpath
                 * set_mesh_params
                 * set_bss
                 * authenticate
                 * associate
                 * deauthenticate
                 * disassociate
                 * join_ibss
                 * (null)
                 * (null)
                 * Unknown command (59)
                 * set_wiphy_netns
                 * connect
                 * disconnect</code></pre></div><p>in dmesg i read:<br /></p><div class="codebox"><pre><code>cfg80211: Calling CRDA to update world regulatory domain
ar71xx: pll_reg 0xb8050014: 0x1099
eth1: link up (100Mbps/Full duplex)
cfg80211: World regulatory domain updated:
    (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
    (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
    (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
    (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
    (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
    (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
PCI: Enabling device 0000:00:11.0 (0000 -&gt; 0002)
ath: EEPROM regdomain: 0x0
ath: EEPROM indicates default country code should be used
ath: doing EEPROM country-&gt;regdmn map search
ath: country maps to regdmn code: 0x3a
ath: Country alpha2 being used: US
ath: Regpair used: 0x3a
phy0: Selected rate control algorithm &#039;ath9k_rate_control&#039;
Registered led device: ath9k-phy0::radio
Registered led device: ath9k-phy0::assoc
Registered led device: ath9k-phy0::tx
Registered led device: ath9k-phy0::rx
phy0: Atheros AR9280 Rev:2 mem=0xb0000000, irq=48
PCI: Enabling device 0000:00:12.0 (0000 -&gt; 0002)
ath: EEPROM regdomain: 0x0
ath: EEPROM indicates default country code should be used
ath: doing EEPROM country-&gt;regdmn map search
ath: country maps to regdmn code: 0x3a
ath: Country alpha2 being used: US
ath: Regpair used: 0x3a
cfg80211: Calling CRDA for country: US
cfg80211: Regulatory domain changed to country: US
    (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
    (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2700 mBm)
    (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 1700 mBm)
    (5250000 KHz - 5330000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
    (5490000 KHz - 5600000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
    (5650000 KHz - 5710000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
    (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 3000 mBm)
phy1: Selected rate control algorithm &#039;ath9k_rate_control&#039;
Registered led device: ath9k-phy1::radio
Registered led device: ath9k-phy1::assoc
Registered led device: ath9k-phy1::tx
Registered led device: ath9k-phy1::rx
phy1: Atheros AR9280 Rev:2 mem=0xb0010000, irq=49
ip_tables: (C) 2000-2006 Netfilter Core Team
nf_conntrack version 0.5.0 (968 buckets, 3872 max)
CONFIG_NF_CT_ACCT is deprecated and will be removed soon. Please use
nf_conntrack.acct=1 kernel parameter, acct=1 nf_conntrack module option or
sysctl net.netfilter.nf_conntrack_acct=1 to enable it.
cfg80211: Calling CRDA for country: DE
cfg80211: Regulatory domain changed to country: DE
    (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
    (2400000 KHz - 2483500 KHz @ 40000 KHz), (N/A, 2000 mBm)
    (5150000 KHz - 5350000 KHz @ 40000 KHz), (N/A, 2000 mBm)
    (5470000 KHz - 5725000 KHz @ 40000 KHz), (N/A, 2698 mBm)</code></pre></div><p>How can this be fixed?</p><br /><p>many regards, zoo</p>											<p class="post-edited">(Last edited by <strong>zoo</strong> on 7 May 2010, 09:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p108715">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">eleon216</div>
					<div class="post-datetime">
						7 May 2010, 11:08					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://de.wikipedia.org/wiki/Dynamic_Frequency_Selection">http://de.wikipedia.org/wiki/Dynamic_Fr … _Selection</a></p><p>you can only use channel 36-48 without DFS in Germany, you will need DFS for channel 52-64 and 100-140. <br />as DFS is not implemented in ath9k (mac80211) the channels 120-128 will be still unusable with ath9k even if you figure out how to &quot;enable&quot; them. <br />so I would recommend this order to solve your problem:&nbsp; <br />Code a DFS-Implementation for ath9k and if this is completed, care about channel 120-128&nbsp; &nbsp;<img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />&nbsp; <br />I guess for now we are stuck on channel 36-48</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p108729">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">zoo</div>
					<div class="post-datetime">
						7 May 2010, 15:59					</div>
				</div>
				<div class="post-content content">
					<p>OK, DFS is not supported yet, but channel 52-64, 100-140 are not disabled, only channel 120-128 are disabled.<br />And also channel 12 and 13 are disabled, which should work. Why?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p108742">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">eleon216</div>
					<div class="post-datetime">
						7 May 2010, 20:04					</div>
				</div>
				<div class="post-content content">
					<p>take a look at this tread: <a href="https://forum.openwrt.org/viewtopic.php?pid=100450">https://forum.openwrt.org/viewtopic.php?pid=100450</a></p><p>The regdomain in the EEPROM of your wificard is US. Your actual settings as shown in &quot;iw list&quot; is the most restricted combination of regdomain US and DE. </p><p>ath9k needs to be compiled with the option &quot;Force Atheros driver to respect user&#039;s regdomain setting&quot;, to ignore the EEPROM-regdomain.</p><p>and you should give it a try, so that you can use channel 36-48 with 20dBm, which is allowed in germany instead of only 17dBm (US-restriction)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p214462">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">eeff11</div>
					<div class="post-datetime">
						10 Oct 2013, 12:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>eleon216 wrote:</cite><blockquote><p>take a look at this tread: <a href="https://forum.openwrt.org/viewtopic.php?pid=100450">https://forum.openwrt.org/viewtopic.php?pid=100450</a></p><p>The regdomain in the EEPROM of your wificard is US. Your actual settings as shown in &quot;iw list&quot; is the most restricted combination of regdomain US and DE. </p><p>ath9k needs to be compiled with the option &quot;Force Atheros driver to respect user&#039;s regdomain setting&quot;, to ignore the EEPROM-regdomain.</p><p>and you should give it a try, so that you can use channel 36-48 with 20dBm, which is allowed in germany instead of only 17dBm (US-restriction)</p></blockquote></div><p>I wonder instead of compiling again myself, what is the official AA 12.09 version&#039;s default?</p><p>Anyone knows? Setting the region to CN or JP in web gui doesn&#039;t bring the channel 12,13 or 14 up.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p214466">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">neryba</div>
					<div class="post-datetime">
						10 Oct 2013, 14:07					</div>
				</div>
				<div class="post-content content">
					<p>did you tried reghack?<br /><a href="http://luci.subsignal.org/~jow/reghack/README.txt">http://luci.subsignal.org/~jow/reghack/README.txt</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p214478">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						10 Oct 2013, 16:31					</div>
				</div>
				<div class="post-content content">
					<p>Channel 14 is only allowed in 11b mode, even in japan. 12 and 13 can be unlocked with reghack.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p214533">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">eeff11</div>
					<div class="post-datetime">
						11 Oct 2013, 07:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jow wrote:</cite><blockquote><p>Channel 14 is only allowed in 11b mode, even in japan. 12 and 13 can be unlocked with reghack.</p></blockquote></div><p>yeah, I know, after hack, everything works all right? Any strange behavior? Openwrt is something that you changed one thing, sometime unpreditabel behavior lurks around, hard to find.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p214534">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">eeff11</div>
					<div class="post-datetime">
						11 Oct 2013, 07:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>neryba wrote:</cite><blockquote><p>did you tried reghack?<br /><a href="http://luci.subsignal.org/~jow/reghack/README.txt">http://luci.subsignal.org/~jow/reghack/README.txt</a></p></blockquote></div><p>this maybe the last resort.<br />I am wondering if there is other solution before :</p><p>make menuconfig and&nbsp; in Kernel modules/Wireless drivers/kmod-ath----&gt; you have to check &quot;force Atheros drivers to respect user&#039;s regdomain settings&quot;.</p><p>anyone help?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>