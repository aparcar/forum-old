<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Need help to activate lan and wlan in MT7620A based router</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 7 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p244676">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mmrasheed</div>
					<div class="post-datetime">
						23 Aug 2014, 19:29					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />I have a Chinese made MT7620A based router with 128MB RAM and 16MB SPI flash. I have selected dhcp server while configuring the menuconfig. I successfully compiled the firmware using the following patch-</p><p><a href="https://github.com/Akagi201/hiwifi-hc5661/blob/master/HiWiFi-HC5661.patch">https://github.com/Akagi201/hiwifi-hc56 â€¦ 5661.patch</a></p><p>While booting, I can see (through the serial port) it successfully recognizing lan.</p><div class="quotebox"><blockquote><p>ralink_soc_eth 10100000.ethernet: connected port 4 to PHY at mdio-bus:04 [uid=03a2940d, driver=Generic PHY]<br />ralink_soc_eth 10100000.ethernet: connected port 5 to PHY at mdio-bus:05 [uid=0000ffff, driver=Generic PHY]<br />ralink_soc_eth 10100000.ethernet: loaded mt7530 driver<br />eth0: done loading</p></blockquote></div><p>I can see the link going down and up while disconnecting and connecting the lan again.</p><div class="quotebox"><blockquote><p>eth0: port 3 link down<br />eth0: port 3 link up (100Mbps/Full duplex)</p></blockquote></div><p>However, after successful boot, the lan remains disabled. While trying the following command, it says the ra0 is not supported.</p><div class="quotebox"><blockquote><p>root@OYE:/# /etc/init.d/network reload<br />ra0(ralink): Interface type not supported<br />&#039;radio0&#039; is disabled<br />ra0(ralink): Interface type not supported<br />&#039;radio0&#039; is disabled</p></blockquote></div><p>At the same time, from bootleg, it seems that the alan is detected as well<br /></p><div class="quotebox"><blockquote><p>[&nbsp; &nbsp;12.100000] cfg80211: Calling CRDA to update world regulatory domain<br />cfg80211: World regulatory domain updated:<br />cfg80211:&nbsp; DFS Master region: unset<br />cfg80211:&nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (dfs_cac_time)<br />cfg80211:&nbsp; &nbsp;(2402000 KHz - 2472000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)<br />cfg80211:&nbsp; &nbsp;(2457000 KHz - 2482000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)<br />cfg80211:&nbsp; &nbsp;(2474000 KHz - 2494000 KHz @ 20000 KHz), (N/A, 2000 mBm), (N/A)<br />cfg80211:&nbsp; &nbsp;(5170000 KHz - 5250000 KHz @ 160000 KHz), (N/A, 2000 mBm), (N/A)<br />cfg80211:&nbsp; &nbsp;(5250000 KHz - 5330000 KHz @ 160000 KHz), (N/A, 2000 mBm), (0 s)<br />cfg80211:&nbsp; &nbsp;(5490000 KHz - 5730000 KHz @ 160000 KHz), (N/A, 2000 mBm), (0 s)<br />cfg80211:&nbsp; &nbsp;(5735000 KHz - 5835000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)<br />cfg80211:&nbsp; &nbsp;(57240000 KHz - 63720000 KHz @ 2160000 KHz), (N/A, 0 mBm), (N/A)<br />PPP generic driver version 2.4.2<br />NET: Registered protocol family 24<br />ieee80211 phy0: rt2x00_set_rt: Info - RT chipset 5390, rev 0500 detected<br />ieee80211 phy0: rt2x00_set_rf: Info - RF chipset 7620 detected</p></blockquote></div><p>But can&#039;t find it active either. What am I doing wrong? How can I activate both lan with dhcp server and wlan for this router?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p244732">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mmrasheed</div>
					<div class="post-datetime">
						24 Aug 2014, 12:30					</div>
				</div>
				<div class="post-content content">
					<p>Finally the router works! I had to &quot;make kernel_menuconfig&quot; and then select the &quot;MT7620A eval kit&quot; which is in the Machine selection &gt;&gt; Device tree selection. It&#039;s kind of hidden, and I don&#039;t understand why the evaluation board settings is in the kernel config file instead of the general menu config file. But after changing this settings, and then compiling, USB, LAN and WLAN works pretty fine!</p><p>Thanks guys for your contribution. Not sure if it&#039;s too late to mention that I&#039;m loving openwrt more and more! <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p244824">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">nossiac</div>
					<div class="post-datetime">
						25 Aug 2014, 10:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mmrasheed wrote:</cite><blockquote><p>Finally the router works! I had to &quot;make kernel_menuconfig&quot; and then select the &quot;MT7620A eval kit&quot; which is in the Machine selection &gt;&gt; Device tree selection. It&#039;s kind of hidden, and I don&#039;t understand why the evaluation board settings is in the kernel config file instead of the general menu config file. But after changing this settings, and then compiling, USB, LAN and WLAN works pretty fine!</p><p>Thanks guys for your contribution. Not sure if it&#039;s too late to mention that I&#039;m loving openwrt more and more! <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p></blockquote></div><p><img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>this is because the eth/usb code you were using is released from ralink, and integrated into openwrt as kernel patch.</p><p>normally openwrt developers would rewrite the code and provide a package in menuconfig. that&#039;s why they call it eval kit.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p244850">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">leeandy</div>
					<div class="post-datetime">
						25 Aug 2014, 17:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mmrasheed wrote:</cite><blockquote><p>Finally the router works! I had to &quot;make kernel_menuconfig&quot; and then select the &quot;MT7620A eval kit&quot; which is in the Machine selection &gt;&gt; Device tree selection. It&#039;s kind of hidden, and I don&#039;t understand why the evaluation board settings is in the kernel config file instead of the general menu config file. But after changing this settings, and then compiling, USB, LAN and WLAN works pretty fine!</p><p>Thanks guys for your contribution. Not sure if it&#039;s too late to mention that I&#039;m loving openwrt more and more! <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p></blockquote></div><p>Well done. Tks for yr infos. ^^</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>