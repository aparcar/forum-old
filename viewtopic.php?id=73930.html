<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> OpenWRT on TD-W8950ND</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 24 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p376253">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">e-san</div>
					<div class="post-datetime">
						24 Apr 2018, 11:43					</div>
				</div>
				<div class="post-content content">
					<p>Before You start to read: I&#039;m doing it because I want to - I will not be very sad if I brick it. I just want to learn something new about making firmware, and I believe it is my occasion. </p><p>So I got this model for free.</p><p>When I was looking for some information about, Google redirects me to W8960. Although it seems to be completely different hardware I&#039;ve found the RS-Header information useful. </p><p>Here is boot log:<br /></p><div class="codebox"><pre><code>U-Boot 1.1.4 (Jun 28 2010 - 12:51:24)

AP91 (ar7240) U-boot
DRAM:  
sri
#### TAP VALUE 1 = a, 2 = a
32 MB
id read 0x100000ff
flash size 4194304, sector count = 64
Flash:  4 MB
Using default environment

In:    serial
Out:   serial
Err:   serial
Net:   ag7240_enet_initialize...
No valid address in Flash. Using fixed address
: cfg1 0xf cfg2 0x7014
eth0: 00:03:7f:09:0b:ad
eth0 up
No valid address in Flash. Using fixed address
: cfg1 0xf cfg2 0x7214
eth1: 00:03:7f:09:0b:ad
ATHRS26: resetting s26
ATHRS26: s26 reset done
eth1 up
eth0, eth1
Autobooting in 1 seconds
## Booting image at 9f020000 ...
   Uncompressing Kernel Image ... OK

Starting kernel ...

Booting AR7240(Python)...

Linux version 2.6.15--LSDK-7.3.0.300 gcc version 3.4.4 #28 Wed Dec 1 16:42:54 CST 2010

flash_size passed from bootloader = 4

CPU revision is: 00019374

Determined physical RAM map:

 memory: 02000000 @ 00000000 (usable)

User-defined physical RAM map:

 memory: 02000000 @ 00000000 (usable)

Built 1 zonelists

Kernel command line: console=ttyS0,115200 root=/dev/mtdblock2 rootfstype=squashfs init=/sbin/init mtdparts=ar7100-nor0:128k(u-boot),1024k(kernel),2816k(rootfs),64k(config),64k(art) mem=32M

Primary instruction cache 64kB, physically tagged, 4-way, linesize 32 bytes.

Primary data cache 32kB, 4-way, linesize 32 bytes.

Synthesized TLB refill handler (20 instructions).

Synthesized TLB load handler fastpath (32 instructions).

Synthesized TLB store handler fastpath (32 instructions).

Synthesized TLB modify handler fastpath (31 instructions).

Cache parity protection disabled

PID hash table entries: 256 (order: 8, 4096 bytes)

Using 175.000 MHz high precision timer.

Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)

Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)

Memory: 30548k/32768k available (1368k kernel code, 2204k reserved, 291k data, 128k init, 0k highmem)

Mount-cache hash table entries: 512

Checking for &#039;wait&#039; instruction...  available.

NET: Registered protocol family 16

Returning IRQ 48

AR7240 GPIOC major 0

squashfs: version 3.3 (2007/10/31) Phillip Lougher

squashfs: LZMA suppport for slax.org by jro

Initializing Cryptographic API

io scheduler noop registered

io scheduler deadline registered

Serial: 8250/16550 driver $Revision: #1 $ 1 ports, IRQ sharing disabled

serial8250.0: ttyS0 at MMIO 0x0 (irq = 19) is a 16550A

RAMDISK driver initialized: 1 RAM disks of 8192K size 1024 blocksize

PPP generic driver version 2.4.2

NET: Registered protocol family 24

cmdlinepart partition parsing not available

Searching for RedBoot partition table

5 RedBoot partitions found on MTD device ar7240-nor0

Creating 5 MTD partitions on &quot;ar7240-nor0&quot;:

0x00000000-0x00020000 : &quot;boot&quot;

0x00020000-0x00120000 : &quot;kernel&quot;

0x00120000-0x00220000 : &quot;rootfs&quot;

0x00220000-0x00230000 : &quot;config&quot;

0x003f0000-0x00400000 : &quot;art&quot;

-&gt;Oops: flash id 0x10215 . 

NET: Registered protocol family 2

IP route cache hash table entries: 512 (order: -1, 2048 bytes)

TCP established hash table entries: 2048 (order: 1, 8192 bytes)

TCP bind hash table entries: 2048 (order: 1, 8192 bytes)

TCP: Hash tables configured (established 2048 bind 2048)

TCP reno registered

TCP bic registered

NET: Registered protocol family 1

NET: Registered protocol family 17

802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;

All bugs added by David S. Miller &lt;davem@redhat.com&gt;

VFS: Mounted root (squashfs filesystem) readonly.

Freeing unused kernel memory: 128k freed


init started:  BusyBox v1.01 (2010.06.28-04:54+0000) multi-call binary

init started:  BusyBox v1.01 (2010.06.28-04:54+0000) multi-call binary

Starting pid 14, console /dev/ttyS0: &#039;/etc/rc.d/rcS&#039;
Algorithmics/MIPS FPU Emulator v1.5

insmod: cannot open module `/lib/modules/2.6.15/kernel/ip_tables.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.15/kernel/ip_conntrack.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.15/kernel/ip_nat.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.15/kernel/ipt_MASQUERADE.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.15/kernel/ipt_comment.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.15/kernel/ipt_conntrack.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.15/kernel/ipt_iprange.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.15/kernel/ipt_mac.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.15/kernel/ipt_multiport.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.15/kernel/ipt_state.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.15/kernel/ipt_string.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.15/kernel/iptable_nat.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.15/kernel/iptable_filter.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.15/kernel/ipt_time.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.15/kernel/ipt_TRIGGER.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.15/kernel/ip_conntrack_pptp.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.15/kernel/ipt_TCPMSS.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.15/kernel/ipt_multiurl.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.15/kernel/ip_conntrack_h323.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.15/kernel/ipt_MARK.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.15/kernel/sch_htb.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.15/kernel/sch_prio.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.15/kernel/sch_sfq.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.15/kernel/cls_basic.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.15/kernel/cls_fw.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.15/kernel/ts_kmp.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.15/kernel/flashid.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.15/kernel/br_filter.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.15/kernel/harmony.ko&#039;: No such file or directory

Starting pid 52, console /dev/ttyS0: &#039;/sbin/getty&#039;
Now flash open!

Now flash open!

sys_mode=3 mac:8106c000 ag7240_macs[0]:0 ag7240_macs[1]:8106c000

2

sys_mode=3 mac:81320000 ag7240_macs[0]:81320000 ag7240_macs[1]:8106c000

1

sys_mode 3 force 100Mbps full-duplex

Attention: PHY4  Class A setting in debug 5 register which is not described in DS added by tiger

phy_setup ethUnit:0 phyUnit:4

Attention: PHY4  Class A setting in debug 5 register which is not described in DS added by tiger

Port 4, Neg Success

ATHRS26: resetting s26

ATHRS26: s26 reset done

sys_mode 3 PHY0 auto-negotiation enable

Attention: PHY 0 Class A setting in debug 5 register which is not described in DS

sys_mode 3 PHY1 auto-negotiation enable

Attention: PHY 1 Class A setting in debug 5 register which is not described in DS

sys_mode 3 PHY2 auto-negotiation enable

Attention: PHY 2 Class A setting in debug 5 register which is not described in DS

sys_mode 3 PHY3 auto-negotiation enable

Attention: PHY 3 Class A setting in debug 5 register which is not described in DS

++++ vlan setting once

phy_setup ethUnit:1 phyUnit:0

phy_setup ethUnit:1 phyUnit:1

phy_setup ethUnit:1 phyUnit:2

phy_setup ethUnit:1 phyUnit:3

Port 0, Neg Success

Port 1, Neg Success

Port 2, Neg Success

Port 3, Neg Success


 (none) mips #28 Wed Dec 1 16:42:54 CST 2010 (none)

(none) login: device eth0 entered promiscuous mode

device eth1 entered promiscuous mode

phy_setup ethUnit:1 phyUnit:0

phy_setup ethUnit:1 phyUnit:1

phy_setup ethUnit:1 phyUnit:2

phy_setup ethUnit:1 phyUnit:3

Port 0, Neg Success

Port 1, Neg Success

Port 2, Neg Success

Port 3, Neg Success

phy_setup ethUnit:0 phyUnit:4

Attention: PHY4  Class A setting in debug 5 register which is not described in DS added by tiger

Port 4, Neg Success

ath_hal: module license &#039;Proprietary&#039; taints kernel.

ath_hal: 0.9.17.1 (AR5416, DEBUG, REGOPS_FUNC, WRITE_EEPROM, 11D)

wlan: 0.8.4.2 (Atheros/multi-bss)

ath_rate_atheros: Copyright (c) 2001-2005 Atheros Communications, Inc, All Rights Reserved

++++ phy_up is 1, fdx is 1, speed is 1

AG7240: enet unit:0 phy:4 is up...Mii 100Mbps full duplex

AG7240: enet unit 0 phy 4 mode 0x4c04

ath_dev: Copyright (c) 2001-2007 Atheros Communications, Inc, All Rights Reserved

ath_pci: 0.9.4.5 (Atheros/multi-bss)

wifi0: Atheros 9285: mem=0x10000000, irq=48 hw_base=0xb0000000

wlan_me: Version 0.1

Copyright (c) 2008 Atheros Communications, Inc. All Rights Reserved

wlan: mac acl policy registered

br0: port 2(eth1) entering learning state

br0: topology change detected, propagating

br0: port 2(eth1) entering forwarding state


TP_Flags:6****

++++ phy_up is 0, fdx is 0, speed is 0

AG7240: unit 0: phy 4 not up carrier 1

++++ phy_up is 1, fdx is 1, speed is 1

AG7240: enet unit:0 phy:4 is up...Mii 100Mbps full duplex

AG7240: enet unit 0 phy 4 mode 0x4c04

The selected channel is 4

Country ie is US 

Country ie is US 

maxrate = 300000

Country ie is US 

br0: port 1(eth0) entering disabled state

phy_setup ethUnit:1 phyUnit:0

phy_setup ethUnit:1 phyUnit:1

phy_setup ethUnit:1 phyUnit:2

phy_setup ethUnit:1 phyUnit:3

Port 0, Neg Success

Port 1, Neg Success

Port 2, Neg Success

Port 3, Neg Success

device ath0 entered promiscuous mode

br0: port 3(ath0) entering learning state

br0: topology change detected, propagating

br0: port 3(ath0) entering forwarding state

br0: port 3(ath0) entering disabled state

Country ie is US 

br0: port 3(ath0) entering learning state

br0: topology change detected, propagating

br0: port 3(ath0) entering forwarding state

br0: port 3(ath0) entering disabled state


TP_Flags:6****


TP_Flags:0****

Country ie is US 

br0: port 3(ath0) entering learning state

br0: topology change detected, propagating

br0: port 3(ath0) entering forwarding state

+++ GE0 RX DMA ENABLE

Inteference detected

rx_clear=100, rx_frame=0, tx_frame=0


 TL-WA701N mips #28 Wed Dec 1 16:42:54 CST 2010 (none)

TL-WA701N login: 
 TL-WA701N mips #28 Wed Dec 1 16:42:54 CST 2010 (none)

TL-WA701N login: </code></pre></div><p>But, wait! TL-WA701N? I went to OWRT Wiki, and there is short description about this one: <br /></p><div class="quotebox"><blockquote><p>Similar to the TP-Link TL-WR741ND but with PoE and a smaller antenna.</p></blockquote></div><p>Further reading provides that CPU of Version 1 (other CPU&#039;s on v2 and v2.3) is Atheros AR7240 (same as here?) and that on version 1 OpenWRT 12.09 Does work [AA12.09: openwrt-ar71xx-generic-tl-wa701n-v1]</p><p>Lets look at TL-WR741ND. <br />Version 1.x looks by design quite simmilar and up to 3.1 by hardware.</p><p>What should i do next? Should i try to install AA12.09: openwrt-ar71xx-generic-tl-wa701n-v1?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>