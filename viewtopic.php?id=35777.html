<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> OpenWRT on Telsey MAGIC (Alice W-Gate)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 12 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p162236">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Zmaster</div>
					<div class="post-datetime">
						27 Mar 2012, 11:22					</div>
				</div>
				<div class="post-content content">
					<p>Hi everybody,</p><p>i&#039;m trying to run OpenWRT on this router which should be supported in current trunk:<br /><a href="https://dev.openwrt.org/changeset/25584">https://dev.openwrt.org/changeset/25584</a><br />I&#039;ve flashed openwrt-96348GW-generic-squashfs-cfe.bin from the trunk snapshots and it did indeed recognize the board. </p><p>I have attached the serial cable to get to the console, here is the boot log:<br /></p><div class="codebox"><pre><code>CFE version 1.0.37-3.4 for BCM96348 (32bit,SP,BE)
Build Date: mar gen 24 09:26:30 CET 2006 (oliale@oliale.telsey.loc)
Copyright (C) 2003,2004,2005 Telsey Telecommunications.

Boot Address 0xbfc00000

Initializing Arena.
Initializing Devices.
Parallel flash device: name MX29LV640T, id 0x22c9, size 8192KB
Auto-negotiation timed-out
100 MB Full-Duplex (auto-neg)
Check consistency for image tag [1]: Found good image at partition [1]
Check consistency for image tag [2]: Found good image at partition [2]
CPU type 0x29107: 256MHz, Bus: 128MHz, Ref: 32MHz
Total memory: 16777216 bytes (16MB)

Total memory used by CFE:  0x80401000 - 0x80526D90 (1203600)
Initialized Data:          0x8041E440 - 0x80420270 (7728)
BSS Area:                  0x80420270 - 0x80424D90 (19232)
Local Heap:                0x80424D90 - 0x80524D90 (1048576)
Stack Area:                0x80524D90 - 0x80526D90 (8192)
Text (code) segment:       0x80401000 - 0x8041E440 (119872)
Boot area (physical):      0x00527000 - 0x00567000
Relocation Factor:         I:00000000 - D:00000000

Board IP address                  : 192.168.1.1
Host IP address                   : 192.168.1.100
Gateway IP address                :
Run from flash/host (f/h)         : f
Default host run file name        : vmlinux
Default host flash file name      : bcm963xx_fs_kernel
Boot delay (0-9 seconds)          : 1
Boot image (0=latest, 1=previous) : 0
Board Id Name                     : MAGIC
Psi size in KB                    : 24
Number of MAC Addresses (1-32)    : 8
Base MAC Address                  : 00:03:6f:20:82:b8
Ethernet PHY Type                 : Internal
Memory size in MB                 : 16

mac server test........................
###
### Not default mac address
### 00 03 6f 20 82 b8
*** Press any key to stop auto run (1 seconds) ***
Auto run second count down: 0
Booting from latest image (0xbfc10000) ...
Code Address: 0x80010000, Entry Address: 0x80010000
Decompression OK!
Entry at 0x80010000
Closing network.
Starting program at 0x80010000
[    0.000000] Linux version 3.0.18 (openwrt@OpenWRTBuild) (gcc version 4.6.3 20120201 (prerelease) (Linaro GCC 4.6-2012.02) ) #1 Wed Mar 14 09:10:32 MST 2012
[    0.000000] Detected Broadcom 0x6348 CPU revision b0
[    0.000000] CPU frequency is 256 MHz
[    0.000000] 16MB of RAM installed
[    0.000000] registering 37 GPIOs
[    0.000000] board_bcm963xx: Boot address 0xbfc00000
[    0.000000] board_bcm963xx: CFE version: 1.0.37-3.4
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU revision is: 00029107 (Broadcom BMIPS3300)
[    0.000000] board_bcm963xx: board name: MAGIC
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 01000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone PFN ranges:
[    0.000000]   Normal   0x00000000 -&gt; 0x00001000
[    0.000000] Movable zone start PFN for each node
[    0.000000] early_node_map[1] active PFN ranges
[    0.000000]     0: 0x00000000 -&gt; 0x00001000
[    0.000000] Reserving 0MB of memory at 0MB for crashkernel
[    0.000000] Built 1 zonelists in Zone order, mobility grouping off.  Total pages: 4064
[    0.000000] Kernel command line:  root=/dev/mtdblock2 rootfstype=squashfs,jffs2 noinitrd console=ttyS0,115200
[    0.000000] PID hash table entries: 64 (order: -4, 256 bytes)
[    0.000000] Dentry cache hash table entries: 2048 (order: 1, 8192 bytes)
[    0.000000] Inode-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.000000] Primary instruction cache 16kB, VIPT, 2-way, linesize 16 bytes.
[    0.000000] Primary data cache 8kB, 2-way, VIPT, no aliases, linesize 16 bytes
[    0.000000] Memory: 13112k/16384k available (2222k kernel code, 3272k reserved, 452k data, 176k init, 0k highmem)
[    0.000000] NR_IRQS:128
[    0.000000] Calibrating delay loop... 254.46 BogoMIPS (lpj=508928)
[    0.036000] pid_max: default: 32768 minimum: 301
[    0.040000] Mount-cache hash table entries: 512
[    0.060000] NET: Registered protocol family 16
[    0.084000] registering PCI controller with io_map_base unset
[    0.088000] registering PCI controller with io_map_base unset
[    0.104000] bio: create slab &lt;bio-0&gt; at 0
[    0.132000] pci 0000:00:01.0: BAR 0: assigned [mem 0x30000000-0x30001fff]
[    0.136000] pci 0000:00:01.0: BAR 0: set to [mem 0x30000000-0x30001fff] (PCI address [0x30000000-0x30001fff])
[    0.144000] pci 0000:01:1e.0: BAR 10: assigned [mem 0x38000000-0x3fffffff]
[    0.148000] pci 0000:01:1e.0: BAR 7: assigned [io  0x8008000-0x80080ff]
[    0.152000] pci 0000:01:1e.0: BAR 8: assigned [io  0x8008400-0x80084ff]
[    0.156000] pci 0000:01:1e.0: CardBus bridge to [bus 02-05]
[    0.160000] pci 0000:01:1e.0:   bridge window [io  0x8008000-0x80080ff]
[    0.164000] pci 0000:01:1e.0:   bridge window [io  0x8008400-0x80084ff]
[    0.168000] pci 0000:01:1e.0:   bridge window [mem 0x38000000-0x3fffffff]
[    0.172000] PCI: Enabling device 0000:01:1e.0 (0000 -&gt; 0003)
[    0.176000] Switching to clocksource MIPS
[    0.192000] PCI: Enabling device 0000:00:01.0 (0000 -&gt; 0002)
[    0.268000] ssb: Sonics Silicon Backplane found on PCI device 0000:00:01.0
[    0.280000] NET: Registered protocol family 2
[    0.284000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.292000] TCP established hash table entries: 512 (order: 0, 4096 bytes)
[    0.300000] TCP bind hash table entries: 512 (order: -1, 2048 bytes)
[    0.308000] TCP: Hash tables configured (established 512 bind 512)
[    0.312000] TCP reno registered
[    0.316000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.324000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.328000] NET: Registered protocol family 1
[    0.340000] audit: initializing netlink socket (disabled)
[    0.348000] type=2000 audit(0.348:1): initialized
[    0.356000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.360000] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.372000] msgmni has been set to 25
[    0.376000] io scheduler noop registered
[    0.380000] io scheduler deadline registered (default)
[    0.388000] bcm63xx_uart.0: ttyS0 at MMIO 0xfffe0300 (irq = 10) is a bcm63xx_uart
[    0.396000] console [ttyS0] enabled, bootconsole disabled
[    0.396000] console [ttyS0] enabled, bootconsole disabled
[    0.416000] bcm963xx-flash bcm963xx-flash.0: 0x00400000 at 0x1fc00000
[    0.424000] bcm963xx: Found 1 x16 devices at 0x0 in 16-bit bank. Manufacturer ID 0x0000c2 Chip ID 0x0022c9
[    0.432000] NOR chip too large to fit in mapping. Attempting to cope...
[    0.440000] Amd/Fujitsu Extended Query Table at 0x0040
[    0.444000]   Amd/Fujitsu Extended Query version 1.1.
[    0.448000] bcm963xx: Swapping erase regions for top-boot CFI table.
[    0.456000] number of CFI chips: 1
[    0.460000] Reducing visibility of 8192KiB chip to 4096KiB
[    0.464000] bcm963xx_flash: Read Signature value of CFE1CFE1
[    0.472000] bcm963xx-flash bcm963xx-flash.0: CFE bootloader detected
[    0.480000] bcm963xx_flash: CFE boot tag found with version 6 and board type 96348R
[    0.488000] bcm963xx_flash: Partition 0 is CFE offset 0 and length 10000
[    0.492000] bcm963xx_flash: Partition 1 is kernel offset 10100 and length eff00
[    0.500000] bcm963xx_flash: Partition 2 is rootfs offset 100000 and length 2f0000
[    0.508000] bcm963xx_flash: Partition 3 is nvram offset 3f0000 and length 10000
[    0.516000] bcm963xx_flash: Partition 4 is linux offset 10000 and length 3e0000
[    0.524000] bcm963xx_flash: Spare partition is 270000 offset and length 180000
[    0.532000] Creating 5 MTD partitions on &quot;bcm963xx&quot;:
[    0.536000] 0x000000000000-0x000000010000 : &quot;CFE&quot;
[    0.548000] 0x000000010100-0x000000100000 : &quot;kernel&quot;
[    0.552000] mtd: partition &quot;kernel&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
[    0.572000] 0x000000100000-0x0000003f0000 : &quot;rootfs&quot;
[    0.584000] mtd: partition &quot;rootfs&quot; set to be root filesystem
[    0.588000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=260000, len=190000
[    0.596000] 0x000000260000-0x0000003f0000 : &quot;rootfs_data&quot;
[    0.608000] 0x0000003f0000-0x000000400000 : &quot;nvram&quot;
[    0.620000] 0x000000010000-0x0000003f0000 : &quot;linux&quot;
[    0.640000] bcm63xx_enet MII bus: probed
[    0.652000] bcm63xx-wdt bcm63xx-wdt.0:  started, timer margin: 30 sec
[    0.672000] TCP westwood registered
[    0.676000] NET: Registered protocol family 17
[    0.680000] Bridge firewalling registered
[    0.684000] 802.1Q VLAN Support v1.8
[    0.704000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
[    0.716000] Freeing unused kernel memory: 176k freed
awk: /proc/cpuinfo: No such file or directory
[    4.756000] eth1: link forced UP - 100/full - flow control off/off
[    4.844000] roboswitch: Probing device eth0:
[    4.848000] roboswitch: [/home/openwrt/slave/brcm63xx/build/build_dir/linux-brcm63xx/kmod-switch/switch-robo.c:121] SIOCGETCPHYRD failed!
[    4.864000] roboswitch: [/home/openwrt/slave/brcm63xx/build/build_dir/linux-brcm63xx/kmod-switch/switch-robo.c:121] SIOCGETCPHYRD failed!
[    4.876000] No Robo switch in managed mode found, phy_id = 0xffffffff
[    4.880000] roboswitch: Probing device eth1: No Robo switch in managed mode found, phy_id = 0xffffffff
[    4.892000] roboswitch: Probing device eth2: No such device
[    4.896000] roboswitch: Probing device eth3: No such device
- preinit -
Press the [f] key and hit [enter] to enter failsafe mode
- regular preinit -
[   10.888000] JFFS2 notice: (346) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (0 unchecked, 0 orphan) and 4 of xref (0 dead, 2 orphan) found.
switching to jffs2
- init -

Please press Enter to activate this console. [   12.876000] Compat-wireless backport release: compat-wireless-2012-02-27-1-r30939
[   12.884000] Backport based on wireless-testing.git master-2012-02-27
[   12.964000] cfg80211: Calling CRDA to update world regulatory domain
[   13.448000] There is already a switch registered on the device &#039;eth0&#039;
[   13.456000] roboswitch: Probing device eth1: No Robo switch in managed mode found, phy_id = 0xffffffff
[   13.464000] roboswitch: Probing device eth2: No such device
[   13.472000] roboswitch: Probing device eth3: No such device
[   14.064000] cfg80211: World regulatory domain updated:
[   14.068000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
[   14.080000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   14.088000] cfg80211:   (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[   14.096000] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[   14.104000] cfg80211:   (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   14.112000] cfg80211:   (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   14.844000] b43-phy0: Broadcom 4318 WLAN found (core revision 9)
[   14.924000] Broadcom 43xx driver loaded [ Features: PNL ]
[   14.976000] Button Hotplug driver version 0.4.1
[   15.240000] PPP generic driver version 2.4.2
[   15.564000] ip_tables: (C) 2000-2006 Netfilter Core Team
[   15.896000] NET: Registered protocol family 24
[   15.988000] nf_conntrack version 0.5.0 (207 buckets, 828 max)
[   25.564000] bcm63xx_enet bcm63xx_enet.0: attached PHY at address 1 [Broadcom BCM63XX (1)]
[   27.824000] eth1: link forced UP - 100/full - flow control off/off
[   28.416000] eth0: link UP - 100/full - flow control off
[   28.832000] device eth1 entered promiscuous mode
[   29.036000] br-lan: port 1(eth1) entering forwarding state
[   29.040000] br-lan: port 1(eth1) entering forwarding state</code></pre></div><p>Other useful data:<br /></p><div class="codebox"><pre><code>root@OpenWrt:/# ifconfig
br-lan    Link encap:Ethernet  HWaddr 00:03:6F:20:82:B9
          inet addr:192.168.1.1  Bcast:192.168.1.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:2 overruns:0 frame:0
          TX packets:1 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:0 (0.0 B)  TX bytes:402 (402.0 B)

eth0      Link encap:Ethernet  HWaddr 00:03:6F:20:82:B8
          inet addr:192.168.0.197  Bcast:192.168.0.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:67 errors:0 dropped:0 overruns:0 frame:0
          TX packets:44 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:8085 (7.8 KiB)  TX bytes:4294 (4.1 KiB)
          Interrupt:16

eth1      Link encap:Ethernet  HWaddr 00:03:6F:20:82:B9
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:6 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 B)  TX bytes:1709 (1.6 KiB)
          Interrupt:15

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:16 errors:0 dropped:0 overruns:0 frame:0
          TX packets:16 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:1500 (1.4 KiB)  TX bytes:1500 (1.4 KiB)

root@OpenWrt:/# netstat -l
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State
tcp        0      0 0.0.0.0:domain          0.0.0.0:*               LISTEN
tcp        0      0 0.0.0.0:ssh             0.0.0.0:*               LISTEN
tcp        0      0 0.0.0.0:telnet          0.0.0.0:*               LISTEN
netstat: /proc/net/tcp6: No such file or directory
udp        0      0 0.0.0.0:domain          0.0.0.0:*
udp        0      0 0.0.0.0:bootps          0.0.0.0:*
netstat: /proc/net/udp6: No such file or directory
netstat: /proc/net/raw6: No such file or directory
Active UNIX domain sockets (only servers)
Proto RefCnt Flags       Type       State         I-Node Path</code></pre></div><p>I&#039;m also connected via Ethernet to eth0 and it communicates, i can ping the router from my pc and vice-versa.</p><p>The problem is that i can&#039;t telnet or ssh the router and i can&#039;t understand why. The processes are running and their ports are listening, but the connection is refused.<br />Also, uhttpd does not even exist in /usr/sbin. Does this mean that this build has no configuration through the web interface?</p><p>Do you have any suggestion on how to proceed? I think i almost got it to work and i&#039;m going to update the Wiki once everything is ok.</p><p>EDIT: fixed wrong conclusions about the firmware images.</p>											<p class="post-edited">(Last edited by <strong>Zmaster</strong> on 28 Mar 2012, 11:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162441">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Zmaster</div>
					<div class="post-datetime">
						29 Mar 2012, 09:14					</div>
				</div>
				<div class="post-content content">
					<p>I have made some progress.</p><p>I wasn&#039;t abe to connect to ssh/telnet because eth0 is configured as wan an the firewall automatically rejected connections on that zone. I couldn&#039;t get eth1 (lan) to work, not sure what the problem was.<br />Also, it seems that the trunk snapshots images do not include the web interface.</p><p>I have recompiled the whole image from scratch and now it works almost ok.<br />At the moment the kernel panics while doing some operation in Luci like configuring WiFi because it runs out of memory. Do you have any suggestion to free up some space, like some stuff that uses lot of space and i could remove if i don&#039;t need it?</p><p>Last but most important: the ADSL modem is not working. I have the original sources of the modem with the binary drivers, is there a guide which i can follow to port them?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p179994">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Isolano</div>
					<div class="post-datetime">
						3 Oct 2012, 14:31					</div>
				</div>
				<div class="post-content content">
					<p>I experienced the same problem, even for installing some packages, there&#039;s not enough free space.<br />I don&#039;t know for eth (because on mu router is burned) but the stbeth (that function well in cfe mode) doesn&#039;t work properly; no dhcp and no ping even with static addresses.<br />The wifi seems to be recognized but i don&#039;t know how to set a connection or if there isn&#039;t any driver in trunk distro.</p><p>Could you let us have your build or your settings of firewall and config network devices in order to test it?<br />Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195623">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mikilion</div>
					<div class="post-datetime">
						21 Mar 2013, 20:59					</div>
				</div>
				<div class="post-content content">
					<p>Has anyone tried the Attitude Adjustment 12.09 RC1 on the router in question?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>