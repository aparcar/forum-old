<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Problem setting up WDS with Linksys WRT54g + Asus WL500gP</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 9 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p84358">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">amedee</div>
					<div class="post-datetime">
						23 Mar 2009, 02:14					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I&#039;ve spent the best part of this afternoon and evening trying to set up WDS with my equipment.<br />I have three routers:<br />* Sitecom ADSL modem/router (doesn&#039;t have wireless)<br />* Linksys WRT54G v. 4 (the last version before they switched to VxWorks firmware)<br />* Asus WL500g Premium</p><p>The Sitecom device has its factory firware and the other two wireless routers are running OpenWrt Kamikaze 8.09 with X-Wrt. I have used the 2.4 kernel. The wireless routers both still have their original Broadcom wifi network cards.<br />There is a wired connection between the Sitecom and the Linksys.</p><p>I have made the following configuration:</p><p><strong>Sitecom</strong><br />Hostname: underhill<br />ip address: 10.0.0.1<br />netmask 255.255.255.0<br />DHCP: 10.0.0.10 - 10.0.0.250</p><p><strong>Linksys</strong><br /><span class="bbu">System settings</span><br />hostname: edoras<br />boot wait: enabled<br />wait time: 10s<br />Timezone: Brussels<br /><span class="bbu">Lan configuration</span><br />connection type: static IP<br />type: bridged<br />ip address: 10.0.0.2<br />netmask: 255.255.255.0<br />gateway: 10.0.0.1<br />lan dns: 10.0.0.1<br /><span class="bbu">network - wireless</span><br />radio on<br />channel 1<br />max clients 200<br /><span class="bbu">virtual adaptor</span><br />network: lan<br />mode: access point<br />WDS: off<br />ESSID broadcast on<br />AP isolation off<br />ESSID spyware-infected<br />no encryption<br /><span class="bbu">virtual adaptor</span><br />network: lan<br />mode: WDS<br />ESSID spyware-infected<br />BSSID: MAC address of the Asus router<br />no encryption<br /><span class="bbu">network - dhcp</span><br />authorative: disabled<br />dhcp off</p><p><strong>Asus</strong><br /><span class="bbu">System settings</span><br />hostname: isengard<br />boot wait: enabled<br />wait time: 10s<br />Timezone: Brussels<br /><span class="bbu">Lan configuration</span><br />connection type: static IP<br />type: bridged<br />ip address: 10.0.0.3<br />netmask: 255.255.255.0<br />gateway: 10.0.0.1<br />lan dns: 10.0.0.1<br /><span class="bbu">network - wireless</span><br />radio on<br />channel 1<br />max clients 200<br /><span class="bbu">virtual adaptor</span><br />network: lan<br />mode: access point<br />WDS: off<br />ESSID broadcast on<br />AP isolation off<br />ESSID spyware-infected<br />no encryption<br /><span class="bbu">virtual adaptor</span><br />network: lan<br />mode: WDS<br />ESSID spyware-infected<br />BSSID: MAC address of the Linksys router<br />no encryption<br /><span class="bbu">network - dhcp</span><br />authorative: disabled<br />dhcp off</p><br /><p>During my configuration, all devices were on my table in front of me, less than 1m from each other with line of sight.<br />I tested with an Acer Aspire One netbook running Ubuntu 8.10.<br />I am quite comfortable with Linux system and network administration on computers&amp;servers, but my experience with wireless networking and the insides of embedded devices like routers is a bit limited.</p><p>What works:<br />* wired&nbsp; connection to the Sitecom<br />* wired connection to the Linksys<br />* wireless connection to the Linksys<br />* wired connection to the Asus, when it has is a wired connection to the Linksys<br />* wireless connection to the Asus, when it has a wired connection to the Linksys, and it&#039;s not yet configured for WDS, only as access point<br />* wired connection to the internet via the Sitecom<br />* wired connection to the internet via the Linksys<br />* wireless connection to the internet via the Linksys<br />* wired connection to the internet via the Asus, when it has a wired connection to the Linksys</p><p>What does not work:<br />* wireless connection to the Linksys when the radio of the Asus is on (and no wired connection between the two)<br />* wireless connection to the Asus when WDS is configured<br />* connection to the internet via the Asus when there is no cable between the Linksys and the Asus, only WDS</p><br /><p>I don&#039;t think that there is a problem with the Linksys, because yesterday it was used in another WDS configuration with 3 other Linksys routers, without much problem.<br />I suspect that there is something wrong with the wireless on the Asus, but I can&#039;t pinpoint the exact problem. I also think that its signal is stronger than that of the Linksys, and that&#039;s why I can&#039;t connect wireless to the Linksys when the radio of the Asus is on, because it is &quot;jamming&quot; the signal.</p><br /><p>Any suggestions for further troubleshooting would be much appreciated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p84483">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">amedee</div>
					<div class="post-datetime">
						25 Mar 2009, 00:15					</div>
				</div>
				<div class="post-content content">
					<p>Dump of the nvram variables.</p><p>The Linksys:<br /></p><div class="codebox"><pre><code>aa0=3
ag0=255
boardflags2=0
boardflags=0x0188
boardnum=42
boardrev=0x10
boardtype=0x0101
boot_ver=v2.3
boot_wait=on
ccode=0
cctl=0
clkfreq=200
dl_ram_addr=a0001000
et0macaddr=00:0F:66:D3:36:15
et0mdcport=0
et0phyaddr=30
gpio2=adm_eecs
gpio3=adm_eesk
gpio5=adm_eedi
gpio6=adm_rc
il0macaddr=00:0f:66:d3:36:17
lan_ipaddr=192.168.1.1
lan_netmask=255.255.255.0
opo=0x0
os_flash_addr=bfc40000
os_ram_addr=80001000
pa0b0=0x170c
pa0b1=0xfa24
pa0b2=0xfe70
pa0itssit=62
pa0maxpwr=0x48
pmon_ver=CFE 3.51.21.0
scratch=a0180000
sdram_config=0x0032
sdram_init=0x0000
sdram_ncdl=0x20722
sdram_refresh=0x0000
sromrev=2
vlan0hwname=et0
vlan0ports=1 2 3 4 5*
vlan1hwname=et0
vlan1ports=0 5
wait_time=10
watchdog=5000
wl0gpio2=0
wl0gpio3=0
wl0id=0x4320</code></pre></div><p>The Asus<br /></p><div class="codebox"><pre><code> bytes (
acc_num=0
app_running=0
apps_dl=1
apps_dl_seed=24
apps_dl_share=0
apps_dl_share_port_from=10000
apps_dl_share_port_to=10050
apps_dms=1
apps_dms_usb_port=1
apps_pool=harddisk/part0
apps_share=share
boardflags=0x0110
boardnum=45
boardrev=0x10
boardtype=0x042f
boot_wait=on
br0_ifnames=vlan0 eth1
cfe_wait_led_gpio=1
cfe_wait_on_restore=0
clkfreq=264
computer_name=WL500g.Premium
custom_shutdown_command=stoprcasus
default_boardflags=0x0110
default_lan_proto=dhcp_server
default_new_disk_action=no_action
default_start_page=start_system.asp
default_workgroup=WORKGROUP
dhcp1_end=192.168.2.254
dhcp1_start=192.168.2.2
dhcp_end=192.168.2.254
dhcp_start=192.168.2.2
dl_ram_addr=a0001000
early_startup_command=convertasus
eject_from_web=0
et0macaddr=00:17:31:E4:B9:06
et0mdcport=0
et0phyaddr=30
et1macaddr=40:10:18:00:00:2d
et1mdcport=1
et1phyaddr=31
firmver=1.9.6.7
ftp_running=0
gpio6=robo_reset
gpio_0_name=soft_power_switch
gpio_3_name=power_enable
hardware_version=WL500gH-01-00-00-00
kernel_gpio_init_out_3=1
kernel_gpio_init_out_6=1
lan1_ipaddr=192.168.2.1
lan1_netmask=255.255.255.0
lan_dhcp_enabled=1
lan_dhcp_start=2
lan_dns=192.168.2.1
lan_gateway=192.168.2.1
lan_hwaddr=00:17:31:E4:B9:06
lan_ifname=br0
lan_ifnames= vlan0 eth2
lan_ipaddr=192.168.2.1
lan_netmask=255.255.255.0
lan_proto=static
lan_stp=1
landevs=vlan0 wl0
machine_name=WL500gP
misc_io_mode=bcmgpio
no_br=0
opendns_enabled=1
openvpn_cli=1
openvpn_cli_auth=cert
openvpn_cli_port=1194
openvpn_cli_proto=udp
opo=0x0
os_date=Apr 20 2006
os_flash_addr=bfc40000
os_ram_addr=80001000
os_version=3.131.20.0
pa0maxpwr=78
pmon_ver=CFE 3.91.23.0
preferred_lang=EN
primary_ifname=eth0
printer_ifname=usb
productid=WL500g.Premium
rescue_gpio=4
reset_gpio=7
scratch=a0180000
sdram_config=0x0062
sdram_init=0x0009
sdram_ncdl=0x10308
sdram_refresh=0x0000
sp_battle_ips=1
st_ftp_mode=1
st_max_user=6
st_samba_mode=1
st_samba_workgroup=WORKGROUP
startup_command=rcasus
swap_on=0
usb_disc0_index=0
usb_disc0_port=0
usb_disc1_index=0
usb_disc1_port=0
vlan0hwname=et0
vlan0ports=1 2 3 4 5*
vlan1hwname=et0
vlan1ports=0 5
wait_time=10
wan_device=vlan1
wan_dhcp_start=2
wan_hostname=Edoras
wan_ifname=vlan1
wan_ifnames=vlan1 
wan_pppoe_demand=0
wan_pppoe_idletime=1800
wan_pppoe_mru=1492
wan_pppoe_mtu=1492
wan_proto=dhcp
wan_vport=4
wandevs=et0
watchdog=5000
wifi_dhcp_start=2
wireless.wifi0.disabled=0
wl0_afterburner=auto
wl0_akm=psk psk2
wl0_antdiv=3
wl0_ap_isolate=0
wl0_auth=0
wl0_auth_mode=none
wl0_bcn=100
wl0_channel=1
wl0_closed=0
wl0_corerev=9
wl0_country_code=DE
wl0_crypto=tkip+aes
wl0_dfs_postism=60
wl0_dfs_preism=60
wl0_dtim=1
wl0_frag=2346
wl0_frameburst=1
wl0_gmode=2
wl0_gmode_protection=1
wl0_guest_auth_mode_1=open
wl0_guest_crypto_1=0
wl0_guest_key_1=1
wl0_guest_ssid_1=guest
wl0_guest_wep_x_1=0
wl0_guest_wpa_gtk_rekey_1=0
wl0_ifname=eth2
wl0_infra=1
wl0_key1=0123456789
wl0_key2=43d4862f22
wl0_key3=f3334ab6cd
wl0_key4=272d0e0308
wl0_key=1
wl0_lazywds=0
wl0_macmode=disabled
wl0_maxassoc=128
wl0_mode=ap
wl0_mode_ex=ap
wl0_mrate=0
wl0_net_reauth=36000
wl0_phytype=g
wl0_phytypes=g
wl0_plcphdr=long
wl0_preauth=1
wl0_radio=1
wl0_radioids=BCM2050
wl0_radius_port=1812
wl0_rate=0
wl0_rateset=default
wl0_reg_mode=off
wl0_rts=2347
wl0_ssid=spyware-infected
wl0_txant=3
wl0_txpwr=251
wl0_wds_timeout=1
wl0_wep=disabled
wl0_wme=off
wl0_wme_ap_be=15 63 3 0 0 off
wl0_wme_ap_bk=15 1023 7 0 0 off
wl0_wme_ap_vi=7 15 1 6016 3008 off
wl0_wme_ap_vo=3 7 1 3264 1504 off
wl0_wme_no_ack=off
wl0_wme_sta_be=15 1023 3 0 0 off
wl0_wme_sta_bk=15 1023 7 0 0 off
wl0_wme_sta_vi=7 15 2 6016 3008 off
wl0_wme_sta_vo=3 7 2 3264 1504 off
wl0_wpa_gtk_rekey=0
wl0id=0x4320
wlan_hardware_present=yes
wlan_ifname=eth1
wlan_ipaddr=192.168.21.1
wlan_netmask=255.255.255.0
x_Setting=1
x_WANType=1</code></pre></div><p>This is strange! Where do the 192.168.*.* addresses come from? I am really, really sure that I configured a 10.0.0.0 network.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p84510">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">MMCM</div>
					<div class="post-datetime">
						25 Mar 2009, 10:18					</div>
				</div>
				<div class="post-content content">
					<p>Nvram contents is not relevant for the configuration on openwrt kamikaze. Most of it is stored in /etc/config/<br />You should post at least /etc/config/network and /etc/config/wireless</p>											<p class="post-edited">(Last edited by <strong>MMCM</strong> on 25 Mar 2009, 10:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p84602">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">amedee</div>
					<div class="post-datetime">
						26 Mar 2009, 02:10					</div>
				</div>
				<div class="post-content content">
					<p>/etc/config/network<br /></p><div class="codebox"><pre><code>config &#039;switch&#039; &#039;eth0&#039;
    option &#039;vlan0&#039; &#039;0 1 2 3 4 5&#039;

config &#039;interface&#039; &#039;loopback&#039;
    option &#039;ifname&#039; &#039;lo&#039;
    option &#039;proto&#039; &#039;static&#039;
    option &#039;ipaddr&#039; &#039;127.0.0.1&#039;
    option &#039;netmask&#039; &#039;255.0.0.0&#039;

config &#039;interface&#039; &#039;lan&#039;
    option &#039;type&#039; &#039;bridge&#039;
    option &#039;ifname&#039; &#039;eth0.0&#039;
    option &#039;proto&#039; &#039;static&#039;
    option &#039;netmask&#039; &#039;255.255.255.0&#039;
    option &#039;macaddr&#039; &#039;&#039;
    option &#039;ip6addr&#039; &#039;&#039;
    option &#039;ip6gw&#039; &#039;&#039;
    option &#039;ipaddr&#039; &#039;10.0.0.2&#039;
    option &#039;gateway&#039; &#039;10.0.0.1&#039;
    option &#039;dns&#039; &#039; 10.0.0.1&#039;

config &#039;interface&#039; &#039;wan&#039;
    option &#039;proto&#039; &#039;dhcp&#039;
    option &#039;type&#039; &#039;bridge&#039;
    option &#039;macaddr&#039; &#039;&#039;
    option &#039;ipaddr&#039; &#039;&#039;
    option &#039;ip6addr&#039; &#039;&#039;
    option &#039;netmask&#039; &#039;&#039;
    option &#039;gateway&#039; &#039;&#039;
    option &#039;ip6gw&#039; &#039;&#039;
    option &#039;dns&#039; &#039;&#039;</code></pre></div><p>/etc/config/wireless<br /></p><div class="codebox"><pre><code>config &#039;wifi-device&#039; &#039;wl0&#039;
    option &#039;type&#039; &#039;broadcom&#039;
    option &#039;country&#039; &#039;&#039;
    option &#039;hwmode&#039; &#039;&#039;
    option &#039;distance&#039; &#039;&#039;
    option &#039;diversity&#039; &#039;&#039;
    option &#039;txantenna&#039; &#039;&#039;
    option &#039;rxantenna&#039; &#039;&#039;
    option &#039;disabled&#039; &#039;0&#039;
    option &#039;antenna&#039; &#039;&#039;
    option &#039;channel&#039; &#039;01&#039;
    option &#039;maxassoc&#039; &#039;&#039;

config &#039;wifi-iface&#039;
    option &#039;device&#039; &#039;wl0&#039;
    option &#039;network&#039; &#039;lan&#039;
    option &#039;bssid&#039; &#039;00:18:39:c0:31:f6&#039;
    option &#039;server&#039; &#039;&#039;
    option &#039;port&#039; &#039;&#039;
    option &#039;hidden&#039; &#039;0&#039;
    option &#039;isolate&#039; &#039;0&#039;
    option &#039;txpower&#039; &#039;&#039;
    option &#039;bgscan&#039; &#039;0&#039;
    option &#039;frag&#039; &#039;&#039;
    option &#039;rts&#039; &#039;&#039;
    option &#039;key1&#039; &#039;&#039;
    option &#039;key2&#039; &#039;&#039;
    option &#039;key3&#039; &#039;&#039;
    option &#039;key4&#039; &#039;&#039;
    option &#039;80211h&#039; &#039;&#039;
    option &#039;compression&#039; &#039;&#039;
    option &#039;bursting&#039; &#039;&#039;
    option &#039;ff&#039; &#039;&#039;
    option &#039;wmm&#039; &#039;&#039;
    option &#039;xr&#039; &#039;&#039;
    option &#039;ar&#039; &#039;&#039;
    option &#039;turbo&#039; &#039;&#039;
    option &#039;macpolicy&#039; &#039;none&#039;
    option &#039;maclist&#039; &#039;&#039;
    option &#039;mode&#039; &#039;ap&#039;
    option &#039;ssid&#039; &#039;spyware-infected&#039;
    option &#039;key&#039; &#039;super-secret-password&#039;
    option &#039;encryption&#039; &#039;none&#039;
    option &#039;wds&#039; &#039;0&#039;

config &#039;wifi-iface&#039;
    option &#039;device&#039; &#039;wl0&#039;
    option &#039;hidden&#039; &#039;0&#039;
    option &#039;network&#039; &#039;lan&#039;
    option &#039;mode&#039; &#039;wds&#039;
    option &#039;server&#039; &#039;&#039;
    option &#039;port&#039; &#039;&#039;
    option &#039;isolate&#039; &#039;0&#039;
    option &#039;txpower&#039; &#039;&#039;
    option &#039;bgscan&#039; &#039;0&#039;
    option &#039;frag&#039; &#039;&#039;
    option &#039;rts&#039; &#039;&#039;
    option &#039;wds&#039; &#039;0&#039;
    option &#039;key1&#039; &#039;&#039;
    option &#039;key2&#039; &#039;&#039;
    option &#039;key3&#039; &#039;&#039;
    option &#039;key4&#039; &#039;&#039;
    option &#039;80211h&#039; &#039;&#039;
    option &#039;compression&#039; &#039;&#039;
    option &#039;bursting&#039; &#039;&#039;
    option &#039;ff&#039; &#039;&#039;
    option &#039;wmm&#039; &#039;&#039;
    option &#039;xr&#039; &#039;&#039;
    option &#039;ar&#039; &#039;&#039;
    option &#039;turbo&#039; &#039;&#039;
    option &#039;macpolicy&#039; &#039;none&#039;
    option &#039;maclist&#039; &#039;&#039;
    option &#039;ssid&#039; &#039;spyware-infected&#039;
    option &#039;bssid&#039; &#039;00:17:31:e4:b9:06&#039;
    option &#039;key&#039; &#039;super-secret-password&#039;
    option &#039;encryption&#039; &#039;none&#039;</code></pre></div><p>The files are identical on both routers, exept of course that one has ip address 10.0.0.2 and the other 10.0.0.3, and that they both have the BSSID of the other router in the WDS config.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p99888">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">bassbuff</div>
					<div class="post-datetime">
						7 Jan 2010, 00:02					</div>
				</div>
				<div class="post-content content">
					<p>Did you get it working ? i haven&#039;tt been able so far.<br />Erik</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p99900">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">amedee</div>
					<div class="post-datetime">
						7 Jan 2010, 02:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>bassbuff wrote:</cite><blockquote><p>Did you get it working ? i haven&#039;tt been able so far.<br />Erik</p></blockquote></div><p>No, I&#039;m still waiting for a reply.<br />I just didn&#039;t want to bump my question because I don&#039;t want to be rude. So I just wait patiently. Eventually someone will answer.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>