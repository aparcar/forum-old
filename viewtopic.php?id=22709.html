<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> GW2358-4 (IXP435) NPE brought up too late..</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 21 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p97965">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">dobest03</div>
					<div class="post-datetime">
						27 Nov 2009, 05:06					</div>
				</div>
				<div class="post-content content">
					<p>Hello, everyone.</p><p>I am testing AP/router with GW2358-4 which has with its cpu being ixp435.<br />Recently I switched to kamikaze development branch for testing<br />ATH9k (11n).</p><p>SVN revision number is r18362.<br />IIRC after switching to development branch, NPE in ixp435 was brought up too late.<br />For example, after booting at the shell prompt, If I type<br /> ifconfig eth1</p><p>It stucks there for long time after that NPE is brought up.</p><p>Does anyone have this problem?</p><p>For your reference:</p><p>/etc/config/network:</p><p>config &#039;interface&#039; &#039;loopback&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ifname&#039; &#039;lo&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;proto&#039; &#039;static&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ipaddr&#039; &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;netmask&#039; &#039;255.0.0.0&#039;</p><p>config &#039;interface&#039; wan<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname eth1<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto dhcp</p><p>config &#039;interface&#039; &#039;lan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ifname&#039; &#039;eth0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;type&#039; &#039;bridge&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;proto&#039; &#039;static&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;netmask&#039; &#039;255.255.255.0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;dns&#039; &#039;164.124.101.2&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;gateway&#039; &#039;192.168.1.1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ipaddr&#039; &#039;192.168.2.1&#039;</p><br /><br /><p>/etc/config/wireless:</p><p>config &#039;wifi-device&#039; &#039;wifi0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;type&#039; &#039;mac80211&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;channel&#039; &#039;5&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;macaddr&#039; &#039;00:15:6d:84:1e:cb&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;hwmode&#039; &#039;11ng&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list &#039;ht_capab&#039; &#039;HT40-&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list &#039;ht_capab&#039; &#039;SHORT-GI-40&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list &#039;ht_capab&#039; &#039;DSSS_CCK-40&#039;</p><p>config &#039;wifi-iface&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;device&#039; &#039;wifi0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;network&#039; &#039;lan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;mode&#039; &#039;ap&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ssid&#039; &#039;OpenWrt&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;encryption&#039; &#039;psk2&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;key&#039;&nbsp; &#039;xxxx&#039;</p><p>config &#039;wifi-device&#039; &#039;wifi1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;type&#039; &#039;mac80211&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;channel&#039; &#039;5&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;macaddr&#039; &#039;00:15:6d:84:1f:04&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;hwmode&#039; &#039;11ng&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list &#039;ht_capab&#039; &#039;HT40-&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list &#039;ht_capab&#039; &#039;SHORT-GI-40&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list &#039;ht_capab&#039; &#039;DSSS_CCK-40&#039;</p><p>config &#039;wifi-iface&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;device&#039; &#039;wifi1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;network&#039; &#039;lan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;mode&#039; &#039;ap&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ssid&#039; &#039;OpenWrt&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;encryption&#039; &#039;none&#039;</p><p>config &#039;wifi-device&#039; &#039;wifi2&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;type&#039; &#039;mac80211&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;channel&#039; &#039;5&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;macaddr&#039; &#039;00:15:6d:84:2d:1c&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;hwmode&#039; &#039;11ng&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list &#039;ht_capab&#039; &#039;HT40-&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list &#039;ht_capab&#039; &#039;SHORT-GI-40&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list &#039;ht_capab&#039; &#039;DSSS_CCK-40&#039;</p><p>config &#039;wifi-iface&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;device&#039; &#039;wifi2&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;network&#039; &#039;lan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;mode&#039; &#039;ap&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ssid&#039; &#039;OpenWrt&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;encryption&#039; &#039;none&#039;</p><p>config &#039;wifi-iface&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;device&#039; &#039;wifi0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;mode&#039; &#039;ap&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;encryption&#039; &#039;none&#039;</p><br /><br /><p>And output from &#039;ps&#039;:</p><p>root@OpenWrt:~# ps<br />&nbsp; PID USER&nbsp; &nbsp; &nbsp; &nbsp;VSZ STAT COMMAND<br />&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp; 1108 S&nbsp; &nbsp; init&nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 2 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&lt;&nbsp; [kthreadd]<br />&nbsp; &nbsp; 3 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&lt;&nbsp; [ksoftirqd/0]<br />&nbsp; &nbsp; 4 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&lt;&nbsp; [events/0]<br />&nbsp; &nbsp; 5 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&lt;&nbsp; [khelper]<br />&nbsp; &nbsp;41 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&lt;&nbsp; [kblockd/0]<br />&nbsp; &nbsp;71 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&nbsp; &nbsp;[pdflush]<br />&nbsp; &nbsp;72 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&nbsp; &nbsp;[pdflush]<br />&nbsp; &nbsp;73 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&lt;&nbsp; [kswapd0]<br />&nbsp; &nbsp;74 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&lt;&nbsp; [aio/0]<br />&nbsp; 605 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&lt;&nbsp; [mtdblockd]<br /> 1330 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SWN&nbsp; [jffs2_gcd_mtd3]<br /> 1340 root&nbsp; &nbsp; &nbsp; 1100 S&nbsp; &nbsp; /bin/sh /etc/init.d/rcS S boot <br /> 1343 root&nbsp; &nbsp; &nbsp; 1100 S&nbsp; &nbsp; logger -s -p 6 -t sysinit <br /> 1344 root&nbsp; &nbsp; &nbsp; 1116 R&nbsp; &nbsp; /bin/ash --login <br /> 1357 root&nbsp; &nbsp; &nbsp; 1112 S&nbsp; &nbsp; syslogd -C16 <br /> 1359 root&nbsp; &nbsp; &nbsp; 1092 S&nbsp; &nbsp; klogd <br /> 1371 root&nbsp; &nbsp; &nbsp; &nbsp;544 S&nbsp; &nbsp; /sbin/hotplug2 --override --persistent --set-worker /<br /> 1673 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&nbsp; &nbsp;[crypto]<br /> 1674 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&nbsp; &nbsp;[crypto_ret]<br /> 1784 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&lt;&nbsp; [khubd]<br /> 1786 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&lt;&nbsp; [ata/0]<br /> 1787 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&lt;&nbsp; [ata_aux]<br /> 1797 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&lt;&nbsp; [phy0]<br /> 1800 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&lt;&nbsp; [phy1]<br /> 1812 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&lt;&nbsp; [phy2]<br /> 2112 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&lt;&nbsp; [kmmcd]<br /> 2121 nobody&nbsp; &nbsp; &nbsp;612 S&nbsp; &nbsp; /usr/sbin/portmap <br /> 2415 root&nbsp; &nbsp; &nbsp; 1720 S&nbsp; &nbsp; lua -lluci.lucid -e luci.lucid.start() <br /> 2425 root&nbsp; &nbsp; &nbsp; &nbsp;812 S&nbsp; &nbsp; /usr/sbin/dropbear -p 22 -P /var/run/dropbear.1.pid <br /> 2437 root&nbsp; &nbsp; &nbsp; &nbsp;768 S&nbsp; &nbsp; /usr/sbin/rpc.mountd -r <br /> 2439 root&nbsp; &nbsp; &nbsp; &nbsp;744 S&nbsp; &nbsp; /usr/sbin/rpc.nfsd <br /> 2666 root&nbsp; &nbsp; &nbsp; 2052 S&nbsp; &nbsp; /usr/sbin/snmpd -Lf /dev/null -p /var/run/snmpd.pid <br /> 2670 root&nbsp; &nbsp; &nbsp; 1096 S&nbsp; &nbsp; telnetd -l /bin/login.sh <br /> 2708 root&nbsp; &nbsp; &nbsp; 2120 S N&nbsp; smbd -D <br /> 2735 root&nbsp; &nbsp; &nbsp; 1140 S&nbsp; &nbsp; /usr/sbin/collectd <br /> 2736 root&nbsp; &nbsp; &nbsp; 1140 S&nbsp; &nbsp; /usr/sbin/collectd <br /> 2737 root&nbsp; &nbsp; &nbsp; 1140 S&nbsp; &nbsp; /usr/sbin/collectd <br /> 2741 root&nbsp; &nbsp; &nbsp; 1140 S&nbsp; &nbsp; /usr/sbin/collectd <br /> 2823 root&nbsp; &nbsp; &nbsp; 1092 S&nbsp; &nbsp; watchdog -t 5 /dev/watchdog <br /> 2830 root&nbsp; &nbsp; &nbsp; &nbsp;948 S&nbsp; &nbsp; /usr/sbin/polipo -c /var/etc/polipo.conf <br /> 2874 root&nbsp; &nbsp; &nbsp; &nbsp;664 S&nbsp; &nbsp; /sbin/wprobe-util -P -p 17990 <br /> 6566 root&nbsp; &nbsp; &nbsp; 1032 S&nbsp; &nbsp; hostapd -P /var/run/wifi-wlan0.pid -B /var/run/hostap<br /> 6690 root&nbsp; &nbsp; &nbsp; 1112 S&nbsp; &nbsp; udhcpc -t 0 -i eth1 -r 192.168.1.9 -b -p /var/run/eth<br /> 6810 root&nbsp; &nbsp; &nbsp; 1032 S&nbsp; &nbsp; hostapd -P /var/run/wifi-wlan1.pid -B /var/run/hostap<br /> 6928 root&nbsp; &nbsp; &nbsp; 1036 S&nbsp; &nbsp; hostapd -P /var/run/wifi-wlan2.pid -B /var/run/hostap<br /> 7006 nobody&nbsp; &nbsp; &nbsp;636 S&nbsp; &nbsp; /usr/sbin/dnsmasq -K -D -y -Z -b -E -s lan -S /lan/ -<br /> 7014 root&nbsp; &nbsp; &nbsp; 1100 R&nbsp; &nbsp; ps <br />root@OpenWrt:~# </p><br /><p>If anyone know the workaround for this problem, please let me know.</p><p>Thank you.<br />SYLee.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>