<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Problem using USB storage as root</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 11 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p181852">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">JonasJR</div>
					<div class="post-datetime">
						30 Oct 2012, 14:39					</div>
				</div>
				<div class="post-content content">
					<p>Hi!<br />I want to use my HDD in my MR3420 as a network drive, but cant install everything i need due to lack of space.... Is it possible to install the samba server on the HDD itself?<br />I have tried this but I am getting the error: <br /></p><div class="codebox"><pre><code>Installing luci-app-samba (trunk+svn9220-1) to root...
Downloading http://downloads.openwrt.org/attitude_adjustment/12.09-beta/ar71xx/generic/packages/luci-app-samba_trunk+svn9220-1_ar71xx.ipk.
Installing samba36-server (3.6.5-2) to root...
Downloading http://downloads.openwrt.org/attitude_adjustment/12.09-beta/ar71xx/generic/packages/samba36-server_3.6.5-2_ar71xx.ipk.
Collected errors:
 * wfopen: //usr/lib/opkg/info/samba36-server.control: No space left on device.
 * extract_archive: Cannot create symlink from ./usr/sbin/nmbd to &#039;samba_multicall&#039;: No space left on device.
 * extract_archive: Cannot create symlink from ./usr/sbin/smbpasswd to &#039;samba_multicall&#039;: No space left on device.
 * extract_archive: Cannot create symlink from ./usr/sbin/smbd to &#039;samba_multicall&#039;: No space left on device.
 * extract_archive: Cannot make dir /etc/samba/: No space left on device.
 * wfopen: /etc/samba/valid.dat: No such file or directory.
 * wfopen: /etc/samba/lowcase.dat: No such file or directory.
 * wfopen: /etc/samba/smb.conf.template: No such file or directory.
 * wfopen: /etc/samba/upcase.dat: No such file or directory.
 * wfopen: /etc/config/samba: No space left on device.
 * wfopen: /etc/init.d/samba: No space left on device.
 * set_flags_from_control: Failed to open //usr/lib/opkg/info/samba36-server.control: No such file or directory.
 * pkg_write_filelist: Failed to open //usr/lib/opkg/info/samba36-server.list: No space left on device.
 * opkg_install_pkg: Failed to extract data files for samba36-server. Package debris may remain!
 * opkg_install_cmd: Cannot install package luci-app-samba.
 * opkg_conf_write_status_files: Can&#039;t open status file //usr/lib/opkg/status: No space left on device.</code></pre></div><p>So any sugestions on how I can solve this? Is there any way I can install samba on the HDD or is that impossible?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181853">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">JonasJR</div>
					<div class="post-datetime">
						30 Oct 2012, 14:40					</div>
				</div>
				<div class="post-content content">
					<p>BTW I have mounted the HDD and made a small partition as root overlay, so it says that I have 100mb left of storage...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181860">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">robthebrew</div>
					<div class="post-datetime">
						30 Oct 2012, 15:31					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m sure someone better informed will let you know, but I think there is an option to add to opkg to get it to install elsewhere.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181863">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">JonasJR</div>
					<div class="post-datetime">
						30 Oct 2012, 15:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>robthebrew wrote:</cite><blockquote><p>I&#039;m sure someone better informed will let you know, but I think there is an option to add to opkg to get it to install elsewhere.</p></blockquote></div><p>That is what I did with extroot I believe. I might have the settings worked out incorrect though...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181866">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">mikma</div>
					<div class="post-datetime">
						30 Oct 2012, 16:12					</div>
				</div>
				<div class="post-content content">
					<p>Are you the HDD is mounted as /overlay? Check df and mount.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181875">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">JonasJR</div>
					<div class="post-datetime">
						30 Oct 2012, 17:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mikma wrote:</cite><blockquote><p>Are you the HDD is mounted as /overlay? Check df and mount.</p></blockquote></div><p>The HDD is mounted as /overlay, I&#039;m sure of that. First it was /overlay-disabled and then I changed some sett ings and it became mounted as /overlay. I have checked box that says &quot;Use as root&quot; or what it say. And I also have the block-mount installed. <br />I&#039;m at work at this point, but I can do some print screens when I get back home if that would help?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181980">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">robthebrew</div>
					<div class="post-datetime">
						31 Oct 2012, 13:31					</div>
				</div>
				<div class="post-content content">
					<p>echo option force_space &gt;&gt; /etc/opkg.conf</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p182032">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">JonasJR</div>
					<div class="post-datetime">
						31 Oct 2012, 20:15					</div>
				</div>
				<div class="post-content content">
					<p>That solved that problem! But now I have other problems with samba.... Starting new thread!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p182042">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">user71x</div>
					<div class="post-datetime">
						31 Oct 2012, 21:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>JonasJR wrote:</cite><blockquote><div class="quotebox"><cite>robthebrew wrote:</cite><blockquote><p>I&#039;m sure someone better informed will let you know, but I think there is an option to add to opkg to get it to install elsewhere.</p></blockquote></div><p>That is what I did with extroot I believe. I might have the settings worked out incorrect though...</p></blockquote></div><p>hi</p><p>im not pro but i believe that there re two ways how to do this..<br />1) destination of opkg<br />2) exroot</p><p>the exroot is more? complex and more? complicated..</p><p>if u add new destination to opkg u can install packages to external storage and its very easy.. when u run the command for <em>install</em> package u just add the destination flag.. and in fact nothing changes..</p><p>when u decide for exroot its because u want move &quot;whole&quot; your system to external storage.. or better merge the routers memory whit the memory of external device.. re u sure that u really need this ?</p><p>look for OPKG Installation Destinations<br /><a href="http://wiki.openwrt.org/doc/techref/opkg#Installation.Destinations">http://wiki.openwrt.org/doc/techref/opk â€¦ stinations</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p182043">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">JonasJR</div>
					<div class="post-datetime">
						31 Oct 2012, 22:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>user71x wrote:</cite><blockquote><div class="quotebox"><cite>JonasJR wrote:</cite><blockquote><div class="quotebox"><cite>robthebrew wrote:</cite><blockquote><p>I&#039;m sure someone better informed will let you know, but I think there is an option to add to opkg to get it to install elsewhere.</p></blockquote></div><p>That is what I did with extroot I believe. I might have the settings worked out incorrect though...</p></blockquote></div><p>hi</p><p>im not pro but i believe that there re two ways how to do this..<br />1) destination of opkg<br />2) exroot</p><p>the exroot is more? complex and more? complicated..</p><p>if u add new destination to opkg u can install packages to external storage and its very easy.. when u run the command for <em>install</em> package u just add the destination flag.. and in fact nothing changes..</p><p>when u decide for exroot its because u want move &quot;whole&quot; your system to external storage.. or better merge the routers memory whit the memory of external device.. re u sure that u really need this ?</p><p>look for OPKG Installation Destinations<br /><a href="http://wiki.openwrt.org/doc/techref/opkg#Installation.Destinations">http://wiki.openwrt.org/doc/techref/opk â€¦ stinations</a></p></blockquote></div><p>I think I need to do it this way since I am installing Samba. And if I&#039;m not mistaken it has to be connected to root?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p182048">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">user71x</div>
					<div class="post-datetime">
						31 Oct 2012, 22:55					</div>
				</div>
				<div class="post-content content">
					<p>samba is service.. program.. it only needs to be configured and then executed..</p><p>u can install game to the C:\Pragram Files\Game or to the D:\Games\Game and its same here...</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>