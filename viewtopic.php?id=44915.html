<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TP-Link TL-wr1043nd + Huawei e3131s-2 as mobile hotspot = not working</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p205581">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mp</div>
					<div class="post-datetime">
						25 Jun 2013, 00:36					</div>
				</div>
				<div class="post-content content">
					<p>Hi there,<br />I have a TL-1043ND router (which has an USB port and it&#039;s powered at 12V, 1A which makes it excellent for in-car usage), that openwrt is suposedly capable of transforming into a mobile hotspot.<br />Unfortunatelly none of the tutorials that I&#039;ve read so far helped me transform it in such way that I can use the 3g usb modem that I have for the WAN connection.<br />What I&#039;ve done so far is:<br />- installed luci-proto-3g, comgt, usb-modeswitch and kmod-usb-serial<br />- usb_modeswitch-ed: usb_modeswitch -v 12d1 -p 14fe -V 12d1 -P 1506 -M 55534243123456780000000000000011062000000100000000000000000000<br />- edited /etc/rc.local with the previous usb_modeswitch command<br />- edited /etc/modules.d/60-usb-serial with usbserial vendor=0x12d1 product=0x1506<br />- added a 3g interface in luci, with the correct APN, ttyUSB0 as the port <br /> and didn&#039;t get it to work...<br />The error returned when issuing dmesg command is something like this:</p><p>[ 10.320000] usbserial_generic 1-1:1.1: Generic device with no bulk out, not allowed.<br />[ 10.330000] usbserial_generic: probe of 1-1:1.1 failed with error -5</p><p>Any ideas?</p><p>[BTW: Excellent tutorial on how to configure a 3g hotspot here: &quot;TP-LINK 3420 + OpenWRT + Huawei E398 = 3G WiFi AP&quot; @ <a href="http://oleniner.blogspot.ro/2011/11/tp-link-3420-openwrt-huawei-e398-3g.html">http://oleniner.blogspot.ro/2011/11/tp- â€¦ 98-3g.html</a> ]</p>											<p class="post-edited">(Last edited by <strong>mp</strong> on 25 Jun 2013, 10:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205634">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">nozombian</div>
					<div class="post-datetime">
						25 Jun 2013, 10:59					</div>
				</div>
				<div class="post-content content">
					<p>There was special at command, which I used to turn huawei into plain modem mode, disabling card reader, cd rom emulation, whatever. I have done this already with E1650, but forgot where I found it, the command is AT^U2DIAG=0. I&#039;d try this this, to avoid problems with modeswitch. Then you can use your modem as modem without switching.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205637">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mp</div>
					<div class="post-datetime">
						25 Jun 2013, 11:23					</div>
				</div>
				<div class="post-content content">
					<p>Thanks a lot, I&#039;ll try it and let you know if it works...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205989">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mp</div>
					<div class="post-datetime">
						29 Jun 2013, 10:16					</div>
				</div>
				<div class="post-content content">
					<p>Hello again,<br />Unfortunatelly none of the solution that I&#039;ve tried worked...the modem doesn&#039;t support AT^U2DIAG functions, it has to be modeswitched everytime you use it.<br />I did, however, solve the problem by using the custom openwrt image that I&#039;ve found at: <a href="http://ofmodemsandmen.com/downloads.html">http://ofmodemsandmen.com/downloads.html</a> <br />It works like a charm! <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><br /><p>Best wishes,<br />Me.</p>											<p class="post-edited">(Last edited by <strong>mp</strong> on 29 Jun 2013, 10:16)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>