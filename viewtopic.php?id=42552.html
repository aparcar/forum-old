<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> OPENWRT ASUS / WL500GP v1 / WEBCAM Microsoft LifeCAM VX-3000</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 4 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p193227">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">alexbfun</div>
					<div class="post-datetime">
						26 Feb 2013, 14:49					</div>
				</div>
				<div class="post-content content">
					<p>HOWTO</p><p>1. Install openwrt-brcm47xx-squashfs.trx on ASUS WL500gP v1<br /><a href="http://downloads.openwrt.org/backfire/10.03/brcm47xx/openwrt-brcm47xx-squashfs.trx">http://downloads.openwrt.org/backfire/1 â€¦ uashfs.trx</a><br />More on this link <a href="http://wiki.openwrt.org/toh/asus/wl500gp">http://wiki.openwrt.org/toh/asus/wl500gp</a> </p><p>login 192.168.1.1 / user root and no password<br />set password<br />use putty to login ssh</p><p>2. Install usb support<br />opkg update<br />opkg install kmod-usb-core<br />opkg install kmod-usb-uhci<br />opkg install kmod-usb-ohci (to be safe)<br />opkg install kmod-usb2<br />opkg install usbutils</p><p>to test <br />reboot router<br />login and see command lsusb<br />you should see Microsoft Lifecam VX-3000</p><p>3. Install video support<br />opkg update<br />opkg install kmod-usb-video<br />opkg install kmod-video-core<br />opkg install kmod-i2c-core<br />opkg install mjpg-streamer</p><p>4. Install webcam driver<br />opkg install kmod-video-gspca-core<br />opkg install kmod-video-gspca-sonixj</p><p>5. reboot to be safe</p><p>login<br />start mjpg-streamer<br />/etc/init.d/mjpg-streamer start<br />to start on boot<br />/etc/init.d/mjpg-streamer enable</p><p>to test <br />in browser<br />192.168.1.1:8080/?action=stream</p><p>(to config mjpg-streamer use /etc/config/mjpg-streamer and /etc/init.d/mjpg-streamer)</p><p>I hope I don&#039;t misspell something<br />Please correct me :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p203344">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">robthebrew</div>
					<div class="post-datetime">
						31 May 2013, 15:29					</div>
				</div>
				<div class="post-content content">
					<p>Good stuff.<br />Is there anything relevant in the output of dmesg, just in case others need to troubleshoot their setups?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p203617">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">wifi487uci</div>
					<div class="post-datetime">
						3 Jun 2013, 19:05					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>The following codes is not working on my TL-MR3020.</p><p>start mjpg-streamer<br />/etc/init.d/mjpg-streamer start <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;stop<br />/etc/init.d/mjpg-streamer enable</p><br /><p>But the following comand is working.<br />mjpg_streamer -i &quot;input_uvc.so -r 800x448 -f 20&quot; -o &quot;output_http.so -p 8080 -w /webcam_www&quot;&amp; (to start the stream)</p><p>killall mjpg_streamer (to stop the stream)</p><br /><p>I&#039;m looking a way to autostart on boot, any suggestion?</p>											<p class="post-edited">(Last edited by <strong>wifi487uci</strong> on 3 Jun 2013, 19:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p203622">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">lizby</div>
					<div class="post-datetime">
						3 Jun 2013, 21:57					</div>
				</div>
				<div class="post-content content">
					<p>To run a command on boot, put it in /etc/rc.local.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p203628">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">wifi487uci</div>
					<div class="post-datetime">
						3 Jun 2013, 23:55					</div>
				</div>
				<div class="post-content content">
					<p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p206554">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">bur</div>
					<div class="post-datetime">
						6 Jul 2013, 11:21					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys,</p><br /><p>I&#039;m trying to get my Logitech Quickcam 4000 Pro working with my Asus wl-500gp v1 router with no luck. As far as I can gather the webcam is based on pwc and not gspca, so I followed a tutorial here and on usb.essentials and usb.video to install relevant packages.</p><p>Here&#039;s the way I approached it:</p><p>- USB support</p><p>opkg update<br />opkg install kmod-usb-uhci<br />opkg install kmod-usb-ohci<br />opkg install kmod-usb2<br />opkg install usbutils</p><p>- USB video support</p><p>opkg update<br />opkg install kmod-i2c-core<br />opkg install kmod-video-core<br />opkg install kmod-usb-core<br />opkg install kmod-video-pwc</p><p>- Application</p><p>opkg update<br />opkg install libpthread<br />opkg install libjpeg<br />opkg install mjpg-streamer</p><p>- Rebooting the router</p><p>- Mjpg-streamer:</p><p>/etc/init.d/mjpg-streamer enable&nbsp; &nbsp;(to start on boot)</p><p>- Rebooting the router again (just in case)</p><p>- Opening link:</p><p><a href="http://192.168.3.1:8080/">http://192.168.3.1:8080/</a></p><p>I get unable to connect message.</p><p>When I go back in and run following command:</p><p>mjpg_streamer -i &quot;input_uvc.so -d /dev/video0 -r 640x480&quot; -o &quot;output_http.so -p 8080 -w /www/webcam&quot;&amp;</p><p>I receive the following output:</p><p>root@OpenWrt:~# MJPG Streamer Version.: 2.0<br /> i: Using V4L2 device.: /dev/video0<br /> i: Desired Resolution: 640 x 480<br /> i: Frames Per Second.: 5<br /> i: Format............: MJPEG<br />Unable to set format: Invalid argument<br /> Init v4L2 failed !! exit fatal <br /> i: init_VideoIn failed</p><p>If anybody has any suggestion what to do it would be much appreciated! Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p206562">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">lizby</div>
					<div class="post-datetime">
						6 Jul 2013, 14:20					</div>
				</div>
				<div class="post-content content">
					<p>I have mjpg-streamer working with a Logitech Quickcam 9000 Pro.&nbsp; It uses a uvc driver.&nbsp; Are you sure the 4000 uses pwc?</p><p>Otherwise, your command line looks good to me, and similar to mine:&nbsp; </p><p>mjpg_streamer -i &quot;input_uvc.so -d /dev/video0 -r&nbsp; 1600x1200&quot; -o &quot;output_http.so -w /www/webcam -p 8080&quot;&amp;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p206571">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">bur</div>
					<div class="post-datetime">
						6 Jul 2013, 17:05					</div>
				</div>
				<div class="post-content content">
					<p>Hi Lizby,</p><br /><p>Everywhere I looked they mention 4000 Pro as pwc (<a href="https://wiki.archlinux.org/index.php/Webcam_Setup#pwc">https://wiki.archlinux.org/index.php/Webcam_Setup#pwc</a>).</p><p>Just to be on the safe side I removed the pwc package and installed uvc, but I get the same result. Any other thoughts?</p><p>Btw. I see you&#039;re using 1600x1200 res on yours. Can I ask how many frames do you get?</p><br /><p>Cheers.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p206593">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">lizby</div>
					<div class="post-datetime">
						6 Jul 2013, 23:54					</div>
				</div>
				<div class="post-content content">
					<p>&gt;how many frames do you get?</p><p>I don&#039;t even know how to find out.&nbsp; This is on a pan and tilt rivercam (a view from my barn of the Mersey River in Nova Scotia) controllable by anyone with web access, and the effective rate over the web is only a few frames a second (it&#039;s much faster locally).</p><p>It&#039;s here if you want to look:&nbsp; <a href="http://www.lyzby.com/cam.html">http://www.lyzby.com/cam.html</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p206600">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						7 Jul 2013, 00:57					</div>
				</div>
				<div class="post-content content">
					<p>post the output of</p><div class="codebox"><pre><code>lsusb -v | grep FORMAT_MJPEG</code></pre></div><p>BTW: It really seems to be a pwc cam, as it is not listed in the uvc compliance list -&gt; <a href="http://www.ideasonboard.org/uvc/">http://www.ideasonboard.org/uvc/</a></p>											<p class="post-edited">(Last edited by <strong>tmo26</strong> on 7 Jul 2013, 01:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p206617">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">bur</div>
					<div class="post-datetime">
						7 Jul 2013, 11:49					</div>
				</div>
				<div class="post-content content">
					<p>@Lizby: very nice. Is this your 9000 Pro? I get my info on frame rate when I launch the following command: </p><p>mjpg_streamer -i &quot;input_uvc.so -d /dev/video0 -r 640x480&quot; -o &quot;output_http.so -p 8080 -w /www/webcam&quot;&amp;&nbsp; (see also my original post and on the output of this command it says Frames per second)</p><br /><p>@Tmo26: I put your command in and nothing happens, it just goes back to root command line:</p><p>root@OpenWrt:~# lsusb -v | grep FORMAT_MJPEG<br />root@OpenWrt:~#</p><p>I presume this is not what it should happen?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p206635">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">lizby</div>
					<div class="post-datetime">
						7 Jul 2013, 15:40					</div>
				</div>
				<div class="post-content content">
					<p>Thanks, bur, for the advice on getting the frame rate.&nbsp; This is my 9000 Pro webcam.&nbsp; </p><p>Apparently I&#039;m not getting the 1600x1200 that I was asking for--the command said it was switching to 960x720--at 5 frames per second.&nbsp; I&#039;m not sure if this is the top resolution I am able to get from the webcam.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p206639">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						7 Jul 2013, 17:51					</div>
				</div>
				<div class="post-content content">
					<p>If </p><div class="codebox"><pre><code> lsusb -v | grep FORMAT_MJPEG </code></pre></div><p>doesn&#039;t produce an output at all while you have your webcam connected, then your webcam doesn&#039;t support MJPEG and thus, mjpeg_streamer can&#039;t produce any output.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p206640">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">bur</div>
					<div class="post-datetime">
						7 Jul 2013, 18:30					</div>
				</div>
				<div class="post-content content">
					<p>@Lizby: No worries...you&#039;re welcome. It still looks good though...I really thought 5s would be much more choppy...</p><p>@Tmo26: Noooooo....just my luck...I&#039;ll try source another newer logitech and see if that works. Btw. is there a way of knowing, or perhaps better, a list of webcams that do/don&#039;t support MJPEG? Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p206654">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						7 Jul 2013, 22:46					</div>
				</div>
				<div class="post-content content">
					<p>I think almost any up to date webcam can output mjpeg.</p><p>I&#039;ve got Logitech C270, C910, Orbit Sphere AF; Microsoft HD-5000; Genius F100;</p><p>All of them can output mjpeg.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p206664">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">bur</div>
					<div class="post-datetime">
						8 Jul 2013, 03:45					</div>
				</div>
				<div class="post-content content">
					<p>OK...so I got a friends Logitech C300...removed PWC drivers and installed UVC and still no luck. <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p><p>the output for lsusb -v | grep FORMAT_MJPEG :</p><p>bDescriptorSubtype&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6 (FORMAT_MJPEG)</p><br /><p>and the output for mjpg_streamer -i &quot;input_uvc.so -d /dev/video0 -r 640x480&quot; -o &quot;out<br />put_http.so -p 8080 -w /www/webcam&quot;&amp; :</p><p>root@OpenWrt:~# MJPG Streamer Version.: 2.0<br /> i: Using V4L2 device.: /dev/video0<br /> i: Desired Resolution: 640 x 480<br /> i: Frames Per Second.: 5<br /> i: Format............: MJPEG<br />ERROR opening V4L interface: No such file or directory<br /> Init v4L2 failed !! exit fatal <br /> i: init_VideoIn failed</p><p>Have I missed something?! <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p206690">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						8 Jul 2013, 09:33					</div>
				</div>
				<div class="post-content content">
					<p>check the output of</p><div class="codebox"><pre><code>opkg list-installed libv4l</code></pre></div><p>If this produces no output -&gt; install libv4l</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p206698">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">bur</div>
					<div class="post-datetime">
						8 Jul 2013, 10:10					</div>
				</div>
				<div class="post-content content">
					<p>Nope I dind&#039;t have that installed. So I followed your suggestion and installed it. But I still get the same output as on my last post. <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p206699">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">bur</div>
					<div class="post-datetime">
						8 Jul 2013, 10:17					</div>
				</div>
				<div class="post-content content">
					<p>I was wondering something though...when I run the following command (after /etc/init.d/mjpg-streamer start):</p><p>root@OpenWrt:~# /etc/init.d/mjpg-streamer reload<br />no process in pidfile &#039;/var/run/mjpg_streamer.pid&#039; found; none killed</p><p>is it normal to get that kind of output? That sounds to me like the mjpeg-streamer doesn&#039;t turn on at all?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p206700">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">bur</div>
					<div class="post-datetime">
						8 Jul 2013, 10:22					</div>
				</div>
				<div class="post-content content">
					<p>Also I found this open ticket few days ago: <a href="https://dev.openwrt.org/ticket/13595">https://dev.openwrt.org/ticket/13595</a></p><p>and I posted my question there as well, but I only got reply to install i2c...which I had all along. Is it possible then that there&#039;s an issue with the latest openwrt update?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p206702">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						8 Jul 2013, 11:03					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>bur wrote:</cite><blockquote><p>I was wondering something though...when I run the following command (after /etc/init.d/mjpg-streamer start):</p><p>root@OpenWrt:~# /etc/init.d/mjpg-streamer reload<br />no process in pidfile &#039;/var/run/mjpg_streamer.pid&#039; found; none killed</p><p>is it normal to get that kind of output? That sounds to me like the mjpeg-streamer doesn&#039;t turn on at all?</p></blockquote></div><p>Well, if you get errors while starting mjpeg_streamer, it&#039;s no wonder that you get the above output.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p206703">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						8 Jul 2013, 11:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>bur wrote:</cite><blockquote><p>Also I found this open ticket few days ago: <a href="https://dev.openwrt.org/ticket/13595">https://dev.openwrt.org/ticket/13595</a></p><p>and I posted my question there as well, but I only got reply to install i2c...which I had all along. Is it possible then that there&#039;s an issue with the latest openwrt update?</p></blockquote></div><p>check the output of dmesg and compare with the errors shown in the above URL.<br />If you see the same errors in your dmesg, then most likely you are affected by this ticket.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209450">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">bur</div>
					<div class="post-datetime">
						10 Aug 2013, 21:20					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys,</p><br /><p>A reply with a bit of delay due to other circumstances.</p><p>@tmo26: I compared my dmesg with the one in the ticket and they don&#039;t match. Quite opposite, I don&#039;t get any mention of &quot;v4l&quot;. If it helps I can copy and paste my dmesg.</p><p>I have in the mean time updated my firmware to AA12.09. I somehow only noticed couple of days ago that I had version 10 installed before, not quite sure how that happened. But interesting thing is that under the aforementioned ticket, there was another post suggesting to install &quot;v4l-utils&quot;, which I tried to do, but received the following error:</p><p>root@OpenWrt:~# opkg install v4l-utils<br />Unknown package &#039;v4l-utils&#039;.<br />Collected errors:<br /> * opkg_install_cmd: Cannot install package v4l-utils.</p><p>Any thoughts where the problem might lie? Cheers.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209493">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">bur</div>
					<div class="post-datetime">
						11 Aug 2013, 14:27					</div>
				</div>
				<div class="post-content content">
					<p>A small update. I went and did a fresh install of AA12.09, as previous upgrade didn&#039;t go well. So I managed to install the &quot;v4l-utils&quot;, but still no luck with streaming. <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209494">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">bur</div>
					<div class="post-datetime">
						11 Aug 2013, 15:57					</div>
				</div>
				<div class="post-content content">
					<p>Also, can somebody please let me know how can I apply this &quot;fix&quot;:</p><p><a href="https://dev.openwrt.org/changeset/37421">https://dev.openwrt.org/changeset/37421</a></p><p>Cheers</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>