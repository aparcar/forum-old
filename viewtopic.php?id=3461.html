<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> The kernel doesn&#039;t support the ebtables filter table.</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 19 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p16268">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Giammin</div>
					<div class="post-datetime">
						29 Nov 2005, 15:44					</div>
				</div>
				<div class="post-content content">
					<p>i have an wrt54gs v1.1 with whiterussian RC4</p><p>i need ebtables because i use router for transparent firewalling with vlan0 and vlan1 in bridge, and i don&#039;t want that dnsmasq gives ip out of my lan.</p><p>in my old firewall (an old pc with 2 lancards and linux installed) i used ebtables with this rule<br /></p><div class="codebox"><pre><code>ebtables -F
ebtables -A INPUT -i eth1 -d ff:ff:ff:ff:ff:ff -j DROP</code></pre></div><p>and everything work fine</p><p>i installed by ipkg ebtables package in my wrt54gs but when i try to use ebtables i get this error:<br /></p><div class="codebox"><pre><code>root@OpenWrt:~# ebtables -A INPUT -i eth1 -d ff:ff:ff:ff:ff:ff -j DROP
The kernel doesn&#039;t support the ebtables filter table.</code></pre></div><p>This are my pakages installed<br /></p><div class="codebox"><pre><code>root@OpenWrt:~# ipkg list_installed
base-files - 5 - OpenWrt filesystem structure and scripts
base-files-brcm - 2 - Board/architecture specific files
bridge - 1.0.6-1 - Ethernet bridging tools
busybox - 1.00-3 - Core utilities for embedded Linux systems
dnsmasq - 2.22-2 - A lightweight DNS and DHCP server
dropbear - 0.45-4 - a small SSH 2 server/client designed for small memory environments.
ebtables - 2.0.6-1 - Ethernet bridge firewalling software
haserl - 0.8.0-1 - a CGI wrapper to embed shell scripts in HTML documents
ipkg - 0.99.149-2 - lightweight package management system
iptables - 1.3.3-1 - The netfilter firewalling software for IPv4
kernel - 2.4.30-brcm-2 -
kmod-brcm-et - 2.4.30-brcm-2 - Proprietary driver for Broadcom Ethernet chipsets
kmod-brcm-wl - 2.4.30-brcm-2 - Proprietary driver for Broadcom Wireless chipsets
kmod-diag - 2.4.30-brcm-2 - Driver for Router LEDs and Buttons
kmod-ebtables - 2.4.30-brcm-2 - Ethernet bridge firewalling kernel modules
kmod-ppp - 2.4.30-brcm-2 - PPP support
kmod-pppoe - 2.4.30-brcm-2 - PPP over Ethernet support
kmod-wlcompat - 2.4.30-brcm-3 - Compatibility module for using the Wireless Extension with broadcom&#039;s wl
libgcc - 3.4.4-5 - GCC support library
libopenssl - 0.9.7i-1 - OpenSSL (Secure Socket Layer) libraries
mtd - 3 - Tool for modifying the flash chip
nvram - 1 - NVRAM utility and libraries for Broadcom hardware
openssh-sftp-server - 4.2p1-1 - OpenSSH SFTP server
ppp - 2.4.3-7 - a PPP (Point-to-Point Protocol) daemon (with MPPE/MPPC support)
ppp-mod-pppoe - 2.4.3-7 - a PPPoE (PPP over Ethernet) plugin for PPP
uclibc - 0.9.27-5 - Standard C library for embedded Linux systems
webif - 0.01-1 - A modular, extensible web interface for OpenWrt.
wificonf - 5 - Replacement utility for wlconf
wireless-tools - 28.pre7-1 - Tools for setting up WiFi cards using the Wireless Extension
zlib - 1.2.2-2 - an implementation of the deflate compression method (library)
Successfully terminated.</code></pre></div><p>Any suggestion?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p16270">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Vincent Bernat</div>
					<div class="post-datetime">
						29 Nov 2005, 15:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Giammin wrote:</cite><blockquote><p>i installed by ipkg ebtables package in my wrt54gs but when i try to use ebtables i get this error:<br /></p><div class="codebox"><pre><code>root@OpenWrt:~# ebtables -A INPUT -i eth1 -d ff:ff:ff:ff:ff:ff -j DROP
The kernel doesn&#039;t support the ebtables filter table.</code></pre></div></blockquote></div><p>Did you load ebtables modules ?<br />For example : ebtables ebtable_filter ebt_ip ebt_pkttype</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p16274">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Giammin</div>
					<div class="post-datetime">
						29 Nov 2005, 18:07					</div>
				</div>
				<div class="post-content content">
					<p>no i don&#039;t...</p><p>but i have just read that<br /></p><div class="quotebox"><cite>http://wiki.openwrt.org/TransparentFirewall wrote:</cite><blockquote><p>ebtables has been removed from the openWRT kernel for performance reasons, so you will need to build a custom firmware with ebtables in the kernel.</p></blockquote></div><p>with RC4 this problem has been resolved?</p><p>do i have to build a custom firewall?</p><p>there is another why to block dhcp?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p16299">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Vincent Bernat</div>
					<div class="post-datetime">
						30 Nov 2005, 00:30					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Giammin wrote:</cite><blockquote><p>no i don&#039;t...</p><p>but i have just read that<br /></p><div class="quotebox"><cite>http://wiki.openwrt.org/TransparentFirewall wrote:</cite><blockquote><p>ebtables has been removed from the openWRT kernel for performance reasons, so you will need to build a custom firmware with ebtables in the kernel.</p></blockquote></div><p>with RC4 this problem has been resolved?</p><p>do i have to build a custom firewall?</p><p>there is another why to block dhcp?</p></blockquote></div><p>ebtables is back in RC4. Therefore, you just need to load the modules (there is no automatic module loading like what you can have with a classic Linux distribution). DHCP is just a plain IP protocol, you can use iptables to filter it (except if you want to filter a DHCP client/server running on the WRT, because of the use of LSF).</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>