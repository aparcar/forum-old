<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> adhoc mode guide</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p268192">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">julianofischer</div>
					<div class="post-datetime">
						9 Mar 2015, 22:32					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />anyone could gently guide me into the configuration of three routers using adhoc mode.<br />I think to test at first the following linear topology:</p><br /><p>A -------------------- B -------------------- C</p><br /><p>Well, I think I could reach the result I need using default gateways (B is default gateway for A and C) and static routes (it is necessary for B).<br />My thoughts are right?</p><p>I am having some doubts in /etc/config/network and /etc/config/wireless configurations.</p><p>The SSID must be the same?<br />Should I remove bridges?<br />Should I to divide cable interfaces and wireles in two subnets?</p><br /><p>Sorry if my english is too bad.<br />Thanks in advance.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p268211">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						10 Mar 2015, 00:55					</div>
				</div>
				<div class="post-content content">
					<p>Nobody uses pure adhoc mode any more.&nbsp; &nbsp;You should look into mesh modes.&nbsp; I&#039;ve been using 802.11s, which is already completely in the kernel for most wireless drivers.&nbsp; Unlike pure adhoc, mesh protocols keep track of which pairs of stations have direct connectivity, and which will need to relay through another one, and handles that automatically.</p><p>A basic configuration has the one router that has a wired connection to the Internet doing all the routing, NAT, and DHCP assignments.&nbsp; The other ones are simple bridges from wired or AP users onto the mesh.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p268217">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">julianofischer</div>
					<div class="post-datetime">
						10 Mar 2015, 01:24					</div>
				</div>
				<div class="post-content content">
					<p>Dear mk24,<br />thank you very much for your answer.</p><p>I&#039;m trying to configure a pure adhoc mode only for reasearch/documentation purposes.<br />I&#039;m aware of mesh networks, OLSR, AODV, DSDV, BATMAN and other routing protocols. <br />By the way, OLSR and BATMAN are available for openwrt.</p><p>Anyway, sincerely thanks.</p><p>Could you please guide me how to configure a pure ad hoc?<br />I&#039;m somewhat confused with /etc/config/network and /etc/config/wireless configuration.<br />(I&#039;m novice in OpenWrt)</p><p>Thanks!</p><p>Juliano</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p268233">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						10 Mar 2015, 06:36					</div>
				</div>
				<div class="post-content content">
					<p>Yes you set the same SSID on all.&nbsp; This is how the adhoc node knows who is intended to be in its network, and who to ignore.&nbsp; Also of course the RF channel has to be the same. </p><p>In /etc/config/wireless add a section like this:<br /></p><div class="codebox"><pre><code>config wifi-iface
    option device &#039;radio0&#039;
        option mode &#039;adhoc&#039;
        option ssid &#039;Openwrt&#039;
        option encryption &#039;none&#039;
    option network &#039;lan&#039;</code></pre></div><p>Some wireless hardware / drivers has limitations on whether you can have other modes (such as an AP) active on the same radio concurrently with an adhoc interface.</p><p>It would be simplest to start with a default configuration and add your adhoc interface into lan (as shown above).&nbsp; lan is already a bridge, then you have one network all bridged together.&nbsp; Make sure that STP is enabled because you will have loops.</p><p>Reference on things you can set in the config files:<br /><a href="http://wiki.openwrt.org/doc/uci/wireless">http://wiki.openwrt.org/doc/uci/wireless</a><br /><a href="http://wiki.openwrt.org/doc/uci/network">http://wiki.openwrt.org/doc/uci/network</a></p>											<p class="post-edited">(Last edited by <strong>mk24</strong> on 10 Mar 2015, 06:43)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>