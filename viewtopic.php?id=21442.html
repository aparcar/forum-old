<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> I must re-flash my WRT160NL, Please HELP!!</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 1 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p92800">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">bawkmeow78</div>
					<div class="post-datetime">
						18 Aug 2009, 10:02					</div>
				</div>
				<div class="post-content content">
					<p>After tinkering around for a while I managed to really screw myself up.&nbsp; Somehow, I changed my root password.&nbsp; I have no idea how.&nbsp; I am running a Linksys WRT160NL with the latest package for it.&nbsp; My PC is running Windows, and Linux, but I am a complete noob with linux.&nbsp; So any suggestions using windows and no soldering would be greatly appreciated.</p><p>Thanks all</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92805">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">vincentfox</div>
					<div class="post-datetime">
						18 Aug 2009, 11:09					</div>
				</div>
				<div class="post-content content">
					<p>Nokia DKU-5 or CA-42 and 3 wires touching serial console contacts inside WAN ports.<br />Solved with no soldering.</p><p>Or try failsafe?</p>											<p class="post-edited">(Last edited by <strong>vincentfox</strong> on 18 Aug 2009, 11:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92839">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">bawkmeow78</div>
					<div class="post-datetime">
						18 Aug 2009, 22:02					</div>
				</div>
				<div class="post-content content">
					<p>I like the idea of failsafe.&nbsp; Seen several threads about it.&nbsp; I press and hold the reset button underneath. Then plug in?&nbsp; I have tried that sequence, but I must not be getting it.&nbsp; When I log back into it I get the same login screen.&nbsp; Then I get lost, trying to find threads about it.&nbsp; I&#039;m sure after I successfully get it into failsafe mode I can figure out what to do next, (or not lol).&nbsp; Reading some of your other posts (vincentfox), you are seeing the whole boot sequence.&nbsp; All I get is login.&nbsp; I am doing something wrong.&nbsp; I saw a &quot;Ctrl-C for Failsafe&quot; in one of your readouts.&nbsp; I m guessing in order to &#039;watch&#039; it boot I am going to need to do a serial connection.&nbsp; Peering through the WAN and #4 ethernet connectors I believe I am seeing the serial connections on the PCB, on the bottom (where the clip goes).&nbsp; I think a trip to radio shack may be in order, but would like to try failsafe first.&nbsp; Gonna play with it some more, not giving up yet!</p>											<p class="post-edited">(Last edited by <strong>bawkmeow78</strong> on 18 Aug 2009, 22:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92856">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">vincentfox</div>
					<div class="post-datetime">
						19 Aug 2009, 01:58					</div>
				</div>
				<div class="post-content content">
					<p>There is no need to sift through forums for tidbits, failsafe is documented in Wiki.</p><p><a href="http://wiki.openwrt.org/oldwiki/openwrtdocs/troubleshooting?s">http://wiki.openwrt.org/oldwiki/openwrt … shooting?s</a>[]=failsafe</p><p>You hit a button AFTER applying power at a particular moment, and it&#039;s easier to<br />hit the other button than the reset switch.</p><p>I think you can hack together an adapter that only has to work briefly it doesn&#039;t have to be pretty or professional.&nbsp; I usually use paper-clips or alligator-clip test leads for these kinds of one-off projects.&nbsp; Now that I think about it I may try and Macgyver something together tomorrow for fun like that.&nbsp; A wooden clothespin strikes me might work well it&#039;s soft wood so I carve off what I don&#039;t need to make it fit in the hole, then fit one side with 3 bits of paper-clip to form contacts to press against the 3 points you need on the router.&nbsp; You need only wire up the TX, RX, and GND if using a USB cable since the adapter gets power from USB no need to hook up to the 3.3V point.</p><p>One example of an improvised console cable is in the WRT160NL thread on page 4:</p><p><a href="https://forum.openwrt.org/viewtopic.php?id=20298&amp;p=4">https://forum.openwrt.org/viewtopic.php … 98&amp;p=4</a></p>											<p class="post-edited">(Last edited by <strong>vincentfox</strong> on 19 Aug 2009, 02:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92869">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">bawkmeow78</div>
					<div class="post-datetime">
						19 Aug 2009, 06:37					</div>
				</div>
				<div class="post-content content">
					<p>Youre great vincent, thank you.&nbsp; However, I have downloaded numerous, either non-functional or riddled with spyware network sniffers.&nbsp; Finally found one that SHOULD work, Wireshark 1.2.1. (recvudp-win32 just sits at a black DOS screen)&nbsp; So I install and plug in router as per wiki instructions.&nbsp; It never once sends a &quot;Press reset now, to enter failsafe&quot;.&nbsp; I have tried to configure it to sniff only at UDP port 4919, but nothing appears.&nbsp; With no filters on I see a bunch of handshaking, and that is all.&nbsp; Somewhere, I believe in the recover a bricked wiki, it says to plug pc into eth#1 on the router, so that is where I am plugging it.&nbsp; Gonna try the others here in a few minutes, but honestly, my girlfriend is tired of watching me pull what few hairs I have left out, so gonna take a break.&nbsp; My pc is set to an ip of 192.168.1.100, and my firewall is turned off, so I think I should be seeing something.&nbsp; Again, thank you, and will check back here tomorrow.</p>											<p class="post-edited">(Last edited by <strong>bawkmeow78</strong> on 19 Aug 2009, 06:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92876">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">vincentfox</div>
					<div class="post-datetime">
						19 Aug 2009, 10:17					</div>
				</div>
				<div class="post-content content">
					<p>Oy!&nbsp; I should test before I speak!</p><p>I have used failsafe on Linksys WRT54 series units of course before.</p><p>However it doesn&#039;t appear working on WRT160NL at this time.&nbsp; I tried both buttons at various times and watched the console and couldn&#039;t get into failsafe.</p><p>I filed bug report 5727 about it, but for now you need to jimmy up a serial console to fix it.</p><p>Sorry!</p>											<p class="post-edited">(Last edited by <strong>vincentfox</strong> on 19 Aug 2009, 10:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92924">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">bawkmeow78</div>
					<div class="post-datetime">
						20 Aug 2009, 03:18					</div>
				</div>
				<div class="post-content content">
					<p>SUCCESS ANYWAY!!! (in a way)</p><p>I followed my girlfriends advice, heres how it went down:</p><p>1.&nbsp; Unplugged the router.<br />2.&nbsp; Set it on the table and glared at it for a long, long time.<br />3.&nbsp; Scolded it.<br />4.&nbsp; Told it it was a bad router.<br />5.&nbsp; Boxed it up, drove for 2 hours, and returned it, saying it was defective.&nbsp; (only the user is)<br />6.&nbsp; Now I have a shiny new router!</p><p>Yeah, I cheated, but I spent good money on it.&nbsp; I&#039;ll be dammed if i&#039;m gonna spend $100 on a computerized paperweight.</p><p>Sooooo, while I was at the big, big store I asked the associate about a serial cable for it.&nbsp; At first he showed me a RJ-45 with a serial plug on the back, an adapter.&nbsp; I said no then he asks &quot;are you trying to connect to a Cisco router?&quot;&nbsp; I say yes, and he tells me Cisco makes such a cable, for IT and enterprise gurus.&nbsp; Unfortunately, they were out of stock <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" />&nbsp; BUT, it is made, that is the plus....</p><p>Thank you, vincentfox for all your help.&nbsp; I am sure I will be needing your (and everyone elses) assistance in the future.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92930">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">vincentfox</div>
					<div class="post-datetime">
						20 Aug 2009, 05:32					</div>
				</div>
				<div class="post-content content">
					<p>What your average person means by a &quot;Cisco serial console cable&quot; is just an RJ45 jack plumbed with the pins for serial.</p><p>It&#039;s quite common now in rack-mounted &amp; telco systems, to have the serial be such a jack.</p><p>However you have to examine the situation here, you want the pins on the OTHER side of this particular jack.</p><p>Assuredly there is some kind of debug adapter used by factory &amp; developers, however nobody else ever seems to have seen one that is professionally-made.&nbsp; We hack together our own for a few bucks instead.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92971">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">bawkmeow78</div>
					<div class="post-datetime">
						20 Aug 2009, 23:55					</div>
				</div>
				<div class="post-content content">
					<p>Alritghty.&nbsp; Please help, AGAIN (geez!)&nbsp; Got openWRT on the router.&nbsp; Now I need to get it back to factory firmware.&nbsp; It is not installing wireless drivers.&nbsp; I dunno why, tried everything.&nbsp; So I try to use the webif from x-wrt.&nbsp; no dice, just hangs.&nbsp; Went to neighbors shop, downloaded the firmware to the router, but the command:</p><p>mtd -e linux -r write WRT160NL_v1.00.01.17_code,0.bin linux<br />(got the command string from the oldwiki, deinstalling)</p><br /><p>says it cannot remove the linux.&nbsp; I know I am missing something.&nbsp; Could someone please tell me the proper command string to input?&nbsp; I am reverting the 160NL to factory hardware, and gonna use the source router, WRT150N as my bridge. Thanks all</p>											<p class="post-edited">(Last edited by <strong>bawkmeow78</strong> on 20 Aug 2009, 23:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92972">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">vincentfox</div>
					<div class="post-datetime">
						21 Aug 2009, 00:20					</div>
				</div>
				<div class="post-content content">
					<p>When you flash with mtd I think you need a TRX file not a BIN file.&nbsp; I&#039;m not really sure about this can someone else confirm?</p><p>I have been returning mine to factory when needed, by using &quot;upgrade code.bin&quot; from the console.&nbsp; It&#039;s so easy I haven&#039;t had to try the other ways.</p><p>As far as the OpenWRT firmware not having wireless, which firmware did you flash?&nbsp; A snapshot or one you built?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92974">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">bawkmeow78</div>
					<div class="post-datetime">
						21 Aug 2009, 02:01					</div>
				</div>
				<div class="post-content content">
					<p>I used &lt;openwrt-ar71xx-wrt160nl-jffs2.bin&gt;, a snapshot, sucked from xwrt.org (for the gui).&nbsp; On the opening page, system info., here is a copy:</p><p>System Information</p><p>Firmware&nbsp; &nbsp; OpenWrt Kamikaze - With X-Wrt Extensions bleeding edge, r17296<br />Kernel&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; Linux 2.6.30.5 #2 Tue Aug 18 15:18:15 ART 2009<br />MAC&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; 12:9C:E1:21:C9:8E<br />Device&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; unidentified<br />Board&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; Atheros AR9130 rev 2<br />Username&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; root</p><p>Web mgt. console&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; Webif²<br />Version&nbsp; &nbsp; &nbsp; &nbsp; r4808</p><p>I click on the wireless tab and it says &quot;No wireless configuration detected. Please make sure you have the correct wireless driver installed for your device&quot;&nbsp; with a button next to that saying &quot;Generate Wireless Config&quot;.&nbsp; Pressing the button does nothing.&nbsp; I went to the modem, plugged it in, and am able to browse the internet, and get a list of the packages for download for the router.&nbsp; The only thing I could directly download to the router was the orig. firmware.&nbsp; I click on a package to download, and it tries, then finally says &quot;Unable to Install&quot;.&nbsp; Even trying to &quot;Check for webif update&quot; It fails to download.&nbsp; </p><p>I tried your &quot;upgrade code.bin&quot;,in PuTTY, no-go.&nbsp; Says &quot;-ash: upgrade: not found&quot; I must be in wrong directory?&nbsp; Tried from root (/).&nbsp; Is &quot;code&quot; the filename??&nbsp; LOL</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92975">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">bawkmeow78</div>
					<div class="post-datetime">
						21 Aug 2009, 02:22					</div>
				</div>
				<div class="post-content content">
					<p>Looking again at &quot;deinstall&quot; wiki, it says a .trx file.&nbsp; Awesome, the download is a .bin file.&nbsp; Any thoughts?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92981">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">vincentfox</div>
					<div class="post-datetime">
						21 Aug 2009, 02:54					</div>
				</div>
				<div class="post-content content">
					<p>Strip the first 32 bytes off the BIN and your have a TRX file.&nbsp; All that header information is just to make it look &quot;valid&quot; for that model through the Linksys flash utility.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92983">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">bawkmeow78</div>
					<div class="post-datetime">
						21 Aug 2009, 03:16					</div>
				</div>
				<div class="post-content content">
					<p>LOL, neighbor just went home, no access to modem directly.&nbsp; How can I do that in Windows?&nbsp; Scouring web and finding nothing</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92999">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">vincentfox</div>
					<div class="post-datetime">
						21 Aug 2009, 09:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>bawkmeow78 wrote:</cite><blockquote><p>I used &lt;openwrt-ar71xx-wrt160nl-jffs2.bin&gt;, a snapshot, sucked from xwrt.org (for the gui).&nbsp; On the opening page, system info., here is a copy:</p></blockquote></div><p>Problem #1, using the jffs2 image instead of squashfs.&nbsp; ALWAYS use squashfs unless you have compelling reasons otherwise.</p><p>Problem #2, snapshots of trunk always carry some assumed risk and presumption on your part that you have the tools to dig out</p><p>Problem #3, using snapshots from some other site.</p><p>I&#039;ll give you what help I can but it will be minutes grabbed from other things so will not solve everything for you just point in the right direction.&nbsp; &nbsp;The best answer ALWAYS to me is serial console, not having it makes everything harder.&nbsp; &nbsp; I&#039;m not a windows guy, so dunno what tools you have there to strip BIN of it&#039;s header.&nbsp; &nbsp;In your shoes I would probably install Cygwin on Windows to at least get some decent UNIX tools.&nbsp; It&#039;s hard for to imagine NOT having a full Linux system handy, at the very least a copy inside VMWare.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p93004">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">thepeople</div>
					<div class="post-datetime">
						21 Aug 2009, 11:36					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>vincentfox wrote:</cite><blockquote><p>Problem #3, using snapshots from some other site.</p></blockquote></div><p>I know it is relevant issue, but I feel the need to point out the same buildbot that builds the openwrt trunk images also uploads images to x-wrt.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p93006">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">vincentfox</div>
					<div class="post-datetime">
						21 Aug 2009, 11:53					</div>
				</div>
				<div class="post-content content">
					<p>Can we back up to the &quot;not installing wireless drivers&quot;?</p><p>What do you mean when you say that?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p93010">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">vincentfox</div>
					<div class="post-datetime">
						21 Aug 2009, 20:50					</div>
				</div>
				<div class="post-content content">
					<p>So I thought I would try to duplicate your problem here with same firmware from x-wrt.&nbsp; However when I try to go to the x-wrt homepage it takes me to some site tvn.hu.&nbsp; &nbsp;Did they lose their domain?&nbsp; I will try hitting from my work location later and see if it&#039;s a routing problem with my ISP or something.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p93012">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">Adrian Nicolaiev</div>
					<div class="post-datetime">
						21 Aug 2009, 22:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>bawkmeow78 wrote:</cite><blockquote><p>Now I need to get it back to factory firmware.</p></blockquote></div><p>Did you try sysupgrade?<br />It works for me.</p><p>HTH,</p><p>Adrian Nicolaiev</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p93018">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">vincentfox</div>
					<div class="post-datetime">
						22 Aug 2009, 02:14					</div>
				</div>
				<div class="post-content content">
					<p>From work I also had problems reaching openwrt sites today.</p><p>Anyhow finally got through to x-wrt site and downloaded firmware.<br />It is August 19th datestamp will try it at home tonight and see if<br />the WiFi works or not.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p93082">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">vincentfox</div>
					<div class="post-datetime">
						24 Aug 2009, 09:19					</div>
				</div>
				<div class="post-content content">
					<p>I tested and the currently downloadable snapshots do not include wireless functionality.<br />I tested both the August 19th &quot;default&quot; and &quot;extras&quot; files with same results.</p><p>Snapshots that I built myself work fine.&nbsp; So something in way buildbot does it&#039;s thing.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p93187">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">h_geri</div>
					<div class="post-datetime">
						26 Aug 2009, 16:01					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys!</p><p>I updated the firmware of my WRT160NL to openwrt. It was successful, bat than I tried to setting up the network, but it was failure. I can’t access my router on LAN. I tried access on serial port with Cisco serial cable, but I can’t <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> It seems, my pc don’t see anything on COM1. Should The serial cable work with my router? Should Cisco serial cable work simple? What can I do? What should the reset button do on openwrt?</p><p>Geri</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p93227">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">bawkmeow78</div>
					<div class="post-datetime">
						27 Aug 2009, 03:52					</div>
				</div>
				<div class="post-content content">
					<p>YAY!&nbsp; I can connect to the forum today!&nbsp; Here is where I am at.&nbsp; I installed Fedora on my system.&nbsp; Still have to switch to Windows to use internet (another forum).&nbsp; I converted the .bin file to .trx successfully.&nbsp; NOW when I go to the upgrade/restore page, and select my .trx file to download to the router, it will not continue.&nbsp; It just hangs for a sec then I get a &#039;Webpage not found&#039; error.&nbsp; Tried tftp with no love.&nbsp; I can log in, play with, everything except wireless on the router.&nbsp; Just need it back to factory firmware.&nbsp; Grrr</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>