<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> usb problems? (noise in sound and video?)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 12 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p208372">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">makakasirapuka</div>
					<div class="post-datetime">
						28 Jul 2013, 22:20					</div>
				</div>
				<div class="post-content content">
					<p>argh.&nbsp; my sound card is producing some unwanted cracks during playback. my c270hd is also producing some noise and interferences in the captured images. I tried changing the usb hub - the problem is still there. I believe it could be related to ohci/ehci/uhci? <br />root@OpenWrt:~# dmesg | grep uhci<br />root@OpenWrt:~# dmesg | grep ohci<br />[&nbsp; &nbsp; 3.640000] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver<br />root@OpenWrt:~# dmesg | grep ehci<br />[&nbsp; &nbsp; 3.520000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver<br />[&nbsp; &nbsp; 3.520000] ehci-platform: EHCI generic platform driver<br />[&nbsp; &nbsp; 3.530000] ehci-platform ehci-platform: EHCI Host Controller<br />[&nbsp; &nbsp; 3.530000] ehci-platform ehci-platform: new USB bus registered, assigned bus number 1<br />[&nbsp; &nbsp; 3.540000] ehci-platform ehci-platform: irq 3, io mem 0x1b000000<br />[&nbsp; &nbsp; 3.570000] ehci-platform ehci-platform: USB 2.0 started, EHCI 1.00<br />[&nbsp; &nbsp; 4.040000] usb 1-1: new high-speed USB device number 2 using ehci-platform<br />[&nbsp; &nbsp; 4.490000] usb 1-1.1: new high-speed USB device number 3 using ehci-platform<br />[&nbsp; &nbsp; 4.900000] usb 1-1.2: new high-speed USB device number 4 using ehci-platform<br />[&nbsp; &nbsp; 5.090000] usb 1-1.3: new full-speed USB device number 5 using ehci-platform<br />[&nbsp; &nbsp;18.170000] input: UVC Camera (046d:0825) as /devices/platform/ehci-platform/usb1/1-1/1-1.1/1-1.1:1.0/input/input0<br />[&nbsp; &nbsp;84.430000] usb 1-1.1: new high-speed USB device number 6 using ehci-platform<br />[&nbsp; &nbsp;84.870000] input: UVC Camera (046d:0825) as /devices/platform/ehci-platform/usb1/1-1/1-1.1/1-1.1:1.0/input/input1</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208394">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Conjur</div>
					<div class="post-datetime">
						29 Jul 2013, 08:20					</div>
				</div>
				<div class="post-content content">
					<p>noise can&#039;t come from a USB connection. By the time the data gets to the USB cable/port, it has already been encoded (digital)</p><p>The following points are the only place that can introduce noise:</p><p>1) MIC it&#039;s self, inside of the webcam- will create an electric &quot;hum&quot; if it&#039;s too close to a wireless accesspoint or client; or scratchy noise if it&#039;s damaged, or poorly soldered<br />2) encoder, can introduce a lot of different types of noise, depending on the encoding method</p><p>3) linux software- the actual program that reads the MIC data from the USB device, and re-encodes it to transmit it. This will usually add static, or an electric hum; if the linux system&#039;s cpu can&#039;t handle it.</p><p>4) distant end- outside of this scope, but basically the reverse of the above.</p><p>1 and 2 can be easily confirmed by pluging the camera into another computer- if the noise persists, it&#039;s an issue with the camera; if not, it&#039;s an issue with the AP/linux system&#039;s setup.</p><p>If it is an issue with the linux system, you will need a lot more information to solve the issue:<br />1) what platform is it running on (actual model of the router) to confirm that it actually has the memory/cpu to support realtime audio/video encoding.<br />2) what openwrt distro/version is it running<br />3) which program and version are you running on the router to transmit the audio/video?<br />4) what codec/settings are you using on #3</p><p>V/r,<br />Conjur</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208400">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						29 Jul 2013, 09:18					</div>
				</div>
				<div class="post-content content">
					<p>How does the noise of the C270 look like?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208407">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">makakasirapuka</div>
					<div class="post-datetime">
						29 Jul 2013, 13:54					</div>
				</div>
				<div class="post-content content">
					<p>these squared stripes in the top of the screen. sometimes they&#039;re at the bottom. sometimes my router reboots, thou I don&#039;t know exact reason. lack of power supply? changed three adapters with the same outcome. Those gliteches appear&nbsp; with the frequency of 0.5hz... <br /><span class="postimg"><img src="https://lh6.googleusercontent.com/-nUguxpsri3M/UfZImYguNrI/AAAAAAAAAlQ/MYTRV2r0bhI/s521/%25D0%25A1%25D0%25BD%25D0%25B8%25D0%25BC%25D0%25BE%25D0%25BA%2520%25D1%258D%25D0%25BA%25D1%2580%25D0%25B0%25D0%25BD%25D0%25B0%25202013-07-29%2520%25D0%25B2%252012.22.02.png" alt="https://lh6.googleusercontent.com/-nUguxpsri3M/UfZImYguNrI/AAAAAAAAAlQ/MYTRV2r0bhI/s521/%25D0%25A1%25D0%25BD%25D0%25B8%25D0%25BC%25D0%25BE%25D0%25BA%2520%25D1%258D%25D0%25BA%25D1%2580%25D0%25B0%25D0%25BD%25D0%25B0%25202013-07-29%2520%25D0%25B2%252012.22.02.png" /></span> or<br /><span class="postimg"><img src="https://lh5.googleusercontent.com/-wPSKwCvm2rA/UfZIqSzha-I/AAAAAAAAAlc/L2M7eUUWOgw/s640/192.168.1.17.jpeg" alt="https://lh5.googleusercontent.com/-wPSKwCvm2rA/UfZIqSzha-I/AAAAAAAAAlc/L2M7eUUWOgw/s640/192.168.1.17.jpeg" /></span></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208408">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">makakasirapuka</div>
					<div class="post-datetime">
						29 Jul 2013, 14:06					</div>
				</div>
				<div class="post-content content">
					<p>oh. I had some glitches when capturing video in quicktime with this camera, however, they were different and not that periodic. Besides, when capturing video with photobooth&nbsp; (the other software) - it went flawlessly. <br />when speaking about the sound card - it was not the mic, first it was shairport, then the same problem was with madplay. as if it were an old turntable. <br />the router is tplink mr3020, the firmware is BARRIER BREAKER (Bleeding Edge, r37560). extrooted. </p><p>Package: shairport<br />Version: 2012-10-20</p><p>Package: madplay<br />Version: 0.15.2b-3</p><p>Package: mjpg-streamer<br />Version: r148-4</p><p>settings are pretty simple: <br />root@OpenWrt:/dev# cat&nbsp; /etc/config/mjpg-streamer<br />config mjpg-streamer core<br />&nbsp; &nbsp; option enabled&nbsp; &nbsp; &nbsp; &nbsp; &quot;1&quot;<br />&nbsp; &nbsp; option device&nbsp; &nbsp; &nbsp; &nbsp; &quot;/dev/video0&quot;<br />&nbsp; &nbsp; option resolution&nbsp; &nbsp; &quot;640x480&quot;<br />&nbsp; &nbsp; option fps&nbsp; &nbsp; &nbsp; &nbsp; &quot;5&quot;<br />&nbsp; &nbsp; option www&nbsp; &nbsp; &nbsp; &nbsp; &quot;/www/webcam&quot;<br />&nbsp; &nbsp; option port&nbsp; &nbsp; &nbsp; &nbsp; &quot;8080&quot;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208410">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">makakasirapuka</div>
					<div class="post-datetime">
						29 Jul 2013, 14:49					</div>
				</div>
				<div class="post-content content">
					<p>aha! <br />interestingly to note: for some reason my video setup dosn&#039;t start after the router restart. I have to replug the videocamera, and then it launches. I just did killall mjpg_streamer, entered the following command: <br />mjpg_streamer -i &quot;input_uvc.so -d /dev/video0 -y&quot; -o &quot;output_http.so&quot;<br />and it worked fine, giving me&nbsp; a stream without a glitch. what does -y key mean? <br />However, when comparing the output of top, I see that initial setup ate just somewhat 3-4% of the CPU time, while this new command is much more hungry - upto 70% of the time. besides, the stream comes with a huge delay of couple of seconds. any ideas?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208412">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">makakasirapuka</div>
					<div class="post-datetime">
						29 Jul 2013, 15:03					</div>
				</div>
				<div class="post-content content">
					<p>okay. changed fps from 5 to 25 - no glitches, works fine, consuming less than 10% of CPU</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208422">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						29 Jul 2013, 15:48					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>makakasirapuka wrote:</cite><blockquote><p>aha! <br />what does -y key mean?</p></blockquote></div><p>[-y | --yuv ]..........: enable YUYV format and disable MJPEG mode</p><p>taken from: <a href="http://skillfulness.blogspot.de/2010/03/mjpg-streamer-documentation.html">http://skillfulness.blogspot.de/2010/03 … ation.html</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208426">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">makakasirapuka</div>
					<div class="post-datetime">
						29 Jul 2013, 16:42					</div>
				</div>
				<div class="post-content content">
					<p>&#039;disabling mjpeg mode&#039;. (btw,&nbsp; it&#039;s from man file) but what is yuyv anyway? <br />I believe my video problem is fixed. any ideas on audio?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>