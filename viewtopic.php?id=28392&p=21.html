<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Build for WNDR3700/WNDR3800</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 9 Jul 2013 and 6 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 21 of 63</div><nav><ul><li><a href="viewtopic.php%3Fid=28392&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=19.html">19</a></li><li><a href="viewtopic.php%3Fid=28392&amp;p=20.html">20</a></li><li class="pagination-current"><span>21</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=22.html">22</a></li><li><a href="viewtopic.php%3Fid=28392&amp;p=23.html">23</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=63.html">63</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p197274">
				<div class="post-metadata">
					<div class="post-num">Post #501</div>
					<div class="post-author">Manani</div>
					<div class="post-datetime">
						5 Apr 2013, 00:07					</div>
				</div>
				<div class="post-content content">
					<p>No hesitation, I prefer the old interface <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile"/></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p197490">
				<div class="post-metadata">
					<div class="post-num">Post #502</div>
					<div class="post-author">Manani</div>
					<div class="post-datetime">
						6 Apr 2013, 19:45					</div>
				</div>
				<div class="post-content content">
					<p>I no longer have IPv6 on the LAN side (r36225). Consequences of <a href="https://forum.openwrt.org/viewtopic.php?pid=197109#p197109">recent changes of Cyrus</a>?</p><p>Edit: But everything is ok on both sides of the device itself.</p><p>Edit2: everything ok on Win XP, only teredo on Win8</p><p>Edit3: IPv6 is fully back on my LAN after one night.</p>											<p class="post-edited">(Last edited by <strong>Manani</strong> on 7 Apr 2013, 11:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p197566">
				<div class="post-metadata">
					<div class="post-num">Post #503</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						7 Apr 2013, 17:35					</div>
				</div>
				<div class="post-content content">
					<p>- r36246: TLS/SSL support added for VSFTPD</p><p>TLS/SSL support was added today to vsftpd FTP server. I have included the ssl variant in my build. I struggled a bit in getting the suitable RSA keys created, but finally succeeded and also included the command in the model vsftpd config file. That seemed to require including the openssl command line tool, as I didn&#039;t figure out the correct command to generate keys with the built-in px5g command.</p><div class="codebox"><pre><code>command to generate keys (one long command): 
example command to generate key: openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/vsftpd_privkey.pem -out /etc/vsftpd_cert.pem -subj /C=&quot;DE&quot;/ST=&quot;Saxony&quot;/L=&quot;Leipzig&quot;/CN=&quot;OpenWrt&quot;

Additions to /etc/vsftpd.conf

ssl_enable=YES
allow_anon_ssl=NO
force_local_data_ssl=NO
force_local_logins_ssl=NO
ssl_tlsv1=YES
ssl_sslv2=NO
ssl_sslv3=NO
rsa_cert_file=/etc/vsftpd_cert.pem
rsa_private_key_file=/etc/vsftpd_privkey.pem</code></pre></div><p>I placed the keys to /etc but that is probably not quite so optimal, as they did not survive sysupgrade (as they have not been marked as config files). I will probably move my own keys to /etc/config at some point</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 7 Apr 2013, 17:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p198223">
				<div class="post-metadata">
					<div class="post-num">Post #504</div>
					<div class="post-author">ferob</div>
					<div class="post-datetime">
						13 Apr 2013, 05:46					</div>
				</div>
				<div class="post-content content">
					<p>@hnyman<br/>When I update the router to your latest build the network configuration get messed up, because I&#039;m using a 6in4 tunnel and not a native ipv6 connection.</p><p><em>Before:</em><br/></p><div class="codebox"><pre><code>...
config interface &#039;wan&#039;
        option ifname &#039;eth1&#039;
        option proto &#039;pppoe&#039;
        option username &#039;XXXXXXXXXX&#039;
        option password &#039;XXXXXXXXXX&#039;
...
config interface &#039;wan6&#039;
        option ifname &#039;wan6&#039;
        option proto &#039;6in4&#039;
        option mtu &#039;1472&#039;
        option ttl &#039;64&#039;
        option peeraddr XXX.XXX.XXX.XXX&#039;
        option ip6addr &#039;XXXX:XXXX:XXXX:XX::2/64&#039;
        option ip6prefix &#039;XXXX:XXXX:XXXX::/48&#039;
...</code></pre></div><p><em>After:</em><br/></p><div class="codebox"><pre><code>...
config interface &#039;wan&#039;
        option ifname &#039;eth1&#039;
        option proto &#039;pppoe&#039;
        option username &#039;XXXXXXXXXX&#039;
        option password &#039;XXXXXXXXXX&#039;
        option ipv6 1
...
config interface &#039;wan6&#039;
        option mtu &#039;1472&#039;
        option ttl &#039;64&#039;
        option peeraddr XXX.XXX.XXX.XXX&#039;
        option ip6addr &#039;XXXX:XXXX:XXXX:XX::2/64&#039;
        option ip6prefix &#039;XXXX:XXXX:XXXX::/48&#039;
        option ifname @wan
        option proto dhcpv6
...</code></pre></div>											<p class="post-edited">(Last edited by <strong>ferob</strong> on 13 Apr 2013, 17:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p198243">
				<div class="post-metadata">
					<div class="post-num">Post #505</div>
					<div class="post-author">Etique</div>
					<div class="post-datetime">
						13 Apr 2013, 13:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Etique wrote:</cite><blockquote><p>Hi all,</p><p>I&#039;ve tried several times over the past few months to get it work by myself but I&#039;m struggling to get the build environment working by me. Today I tried to followed the information Hnyman put together but for some reason I get an error &quot;svn: Can&#039;t open file &#039;.svn/lock&#039;: No space left on device&quot; though I do have space left...</p><p>So I&#039;m wondering, would any one be so kind to compile these 2 packages :<br/>kmod-ipt-nathelper-rtsp<br/>openvpn</p><p>against one of the Attitude build (say, r35992) available on Hnyman server?</p><p>Thanks a bunch!</p></blockquote></div><p>Anyone can help me? (I tried again but failed again... compilations doesn&#039;t go to the end, and the nathelper-extra package that I managed to build has also a failed dependency...)</p><p>For r36246?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p198391">
				<div class="post-metadata">
					<div class="post-num">Post #506</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						14 Apr 2013, 23:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ferob wrote:</cite><blockquote><p>@hnyman<br/>When I update the router to your latest build the network configuration get messed up, because I&#039;m using a 6in4 tunnel and not a native ipv6 connection.</p></blockquote></div><p>I suspect that it is due to changeset 36278. It forcibly sets some ipv6 relaetd network settings in connection with each firmware flash, overriding the user&#039;s previous settings.</p><p><a href="https://dev.openwrt.org/changeset/36278">https://dev.openwrt.org/changeset/36278</a></p><p>I suggest that you leave &quot;wan6&quot; alone and rename your own tunnel interface to something else, e.g. tunnel6 or whatever.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p198707">
				<div class="post-metadata">
					<div class="post-num">Post #507</div>
					<div class="post-author">Etique</div>
					<div class="post-datetime">
						17 Apr 2013, 21:42					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Etique wrote:</cite><blockquote><p>Anyone can help me? (I tried again but failed again... compilations doesn&#039;t go to the end, and the nathelper-extra package that I managed to build has also a failed dependency...)</p><p>For r36246?</p></blockquote></div><p>Ok, I managed to build the kmod-ipt-nathelper-rtsp package individually (finally understood what was needed to do to build it) but I still get a dependency problem for r36246 (that I installed as a bin)</p><p>Installing kmod-ipt-nathelper-rtsp (3.8.6+2.1-1) to root...<br/>Collected errors:<br/> * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-ipt-nathelper-rtsp:<br/> * &nbsp; &nbsp; kernel (= 3.8.6-1-82e7ed91d54decbb73e18cce522fa6c6)</p><p>How can I ensure that my environment is the same as Hnyman&#039;s (I followed his instruction in #2)? I should have the same md5 stamp at the end of the kernel version, shouldn&#039;t I?</p><p>Or are we forced to compile the complete build with the packages at the same time?</p>											<p class="post-edited">(Last edited by <strong>Etique</strong> on 17 Apr 2013, 21:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p198713">
				<div class="post-metadata">
					<div class="post-num">Post #508</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						17 Apr 2013, 22:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Etique wrote:</cite><blockquote><p>Or are we forced to compile the complete build with the packages at the same time?</p></blockquote></div><p>We are forced to do that, when we are talking about kernel modules.<br/>We need to build kernel and the kmods in the same compilation run.</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 17 Apr 2013, 22:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p198724">
				<div class="post-metadata">
					<div class="post-num">Post #509</div>
					<div class="post-author">Etique</div>
					<div class="post-datetime">
						18 Apr 2013, 00:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hnyman wrote:</cite><blockquote><div class="quotebox"><cite>Etique wrote:</cite><blockquote><p>Or are we forced to compile the complete build with the packages at the same time?</p></blockquote></div><p>We are forced to do that, when we are talking about kernel modules.<br/>We need to build kernel and the kmods in the same compilation run.</p></blockquote></div><p>Ok. So my only luck is to get the full image to compile.</p><p>I tried to force-depends but to no avail.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p199036">
				<div class="post-metadata">
					<div class="post-num">Post #510</div>
					<div class="post-author">Etique</div>
					<div class="post-datetime">
						20 Apr 2013, 17:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Etique wrote:</cite><blockquote><div class="quotebox"><cite>hnyman wrote:</cite><blockquote><div class="quotebox"><cite>Etique wrote:</cite><blockquote><p>Or are we forced to compile the complete build with the packages at the same time?</p></blockquote></div><p>We are forced to do that, when we are talking about kernel modules.<br/>We need to build kernel and the kmods in the same compilation run.</p></blockquote></div><p>Ok. So my only luck is to get the full image to compile.</p><p>I tried to force-depends but to no avail.</p></blockquote></div><p>I cannot get the full image to build... (I can provide the build log if anyone is interested...)</p><p>Hnyman, any chance you can compile it for me for your next release ? As a separate package if you don&#039;t want to include it in your build?</p><p>kmod-ipt-nathelper-rtsp</p><p>That would quite help me!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p199097">
				<div class="post-metadata">
					<div class="post-num">Post #511</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						21 Apr 2013, 14:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Etique wrote:</cite><blockquote><p>Hnyman, any chance you can compile it for me for your next release ? As a separate package if you don&#039;t want to include it in your build?</p><p>kmod-ipt-nathelper-rtsp</p></blockquote></div><p>I built that module along the 36370 build. You can download the firmware and the module from <a href="http://koti.welho.com/hnyman1/Openwrt/trunk-r36370-2013-04-21/">http://koti.welho.com/hnyman1/Openwrt/trunk-r36370-2013-04-21/</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p199126">
				<div class="post-metadata">
					<div class="post-num">Post #512</div>
					<div class="post-author">Etique</div>
					<div class="post-datetime">
						21 Apr 2013, 19:09					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hnyman wrote:</cite><blockquote><p>I built that module along the 36370 build. You can download the firmware and the module from <a href="http://koti.welho.com/hnyman1/Openwrt/trunk-r36370-2013-04-21/">http://koti.welho.com/hnyman1/Openwrt/trunk-r36370-2013-04-21/</a></p></blockquote></div><p>It works! Thanks a huge lot!</p><p>But I&#039;m still disappointed I can&#039;t get the image to build. I&#039;ve really little knowledge on that topic so it&#039;s hard for me to debug but... maybe you could have a second look on your second post and check if anything is missing/has changed?</p><p>Anyway, thanks again. Now my XBMC setup can play RTSP feeds from my ISP! Awesome.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p199141">
				<div class="post-metadata">
					<div class="post-num">Post #513</div>
					<div class="post-author">Manani</div>
					<div class="post-datetime">
						21 Apr 2013, 23:13					</div>
				</div>
				<div class="post-content content">
					<p>I had trouble reading the ADSL TV stream. I linked it to a fault with the port forwarding.<br/>With the installation of kmod-ipt-nathelper-rtsp everything is back in order. So I need this package as Etique.<br/>Thank you both.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p199183">
				<div class="post-metadata">
					<div class="post-num">Post #514</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						22 Apr 2013, 08:38					</div>
				</div>
				<div class="post-content content">
					<p>kmod-ipt-nathelper-rtsp seems to be so small package (a few kB) that I might include it in the default build, as there seems to be more interest for it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p199235">
				<div class="post-metadata">
					<div class="post-num">Post #515</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						22 Apr 2013, 18:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hnyman wrote:</cite><blockquote><p>kmod-ipt-nathelper-rtsp seems to be so small package (a few kB) that I might include it in the default build, as there seems to be more interest for it.</p></blockquote></div><p>- r36377: dnsmasq 2.66, kmod-ipt-nathelper-rtsp included</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p199245">
				<div class="post-metadata">
					<div class="post-num">Post #516</div>
					<div class="post-author">Manani</div>
					<div class="post-datetime">
						22 Apr 2013, 21:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hnyman wrote:</cite><blockquote><p>kmod-ipt-nathelper-rtsp seems to be so small package (a few kB) that I might include it in the default build, as there seems to be more interest for it.</p></blockquote></div><p>Good message!<br/>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p199320">
				<div class="post-metadata">
					<div class="post-num">Post #517</div>
					<div class="post-author">The_Decryptor</div>
					<div class="post-datetime">
						23 Apr 2013, 12:48					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;d like to say thanks for providing these builds, it&#039;s so nice to be able to run a newer release without having to wait for an official release (And I get cool stuff like DHCPv6, codel, better entropy gathering, etc.)</p><p>I am a bit confused though about why 6relayd is handling DHCPv6 and not dnsmasq? I personally don&#039;t need 6relayd (from what I can see), so it&#039;s strange for me to keep it around purely to replicate a feature another software package already provides (if it wasn&#039;t compiled out)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p199325">
				<div class="post-metadata">
					<div class="post-num">Post #518</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						23 Apr 2013, 13:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>The_Decryptor wrote:</cite><blockquote><p>I am a bit confused though about why 6relayd is handling DHCPv6 and not dnsmasq? ... it&#039;s strange for me to keep it around purely to replicate a feature another software package already provides (if it wasn&#039;t compiled out)</p></blockquote></div><p>By default the ipv6 functionality is not compiled into dnsmasq. I did compile the ipv6 variant for a while, but when ipv6-support (with 6relayd etc.) was introduced, I dropped it and reverted to the vanilla dnsmasq.</p><p>6relayd and odhcpd etc. modules make a good job in providing versatile out-of-the-box ipv6 functionality for Openwrt. I think that theis status as own modules makes it easier to adapt the defaults to the changes in the surrounding Openwrt, as the source code can be changed more easily than dnsmasq. And I am not quite sure if dnsmasq-dhcpv6 variant handles all the cases 6relayd currently does.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p199343">
				<div class="post-metadata">
					<div class="post-num">Post #519</div>
					<div class="post-author">The_Decryptor</div>
					<div class="post-datetime">
						23 Apr 2013, 14:18					</div>
				</div>
				<div class="post-content content">
					<p>The main reason I&#039;d prefer to use dnsmasq as the DHCPv6 server is that it adds the v6 address information into it&#039;s DNS cache, so existing address lookups will start receiving AAAA responses for LAN hosts.</p><p>I&#039;ll admit I&#039;m still not entirely sure what the exact use case for 6relayd is though, apart from sharing a given prefix over a layer of routers (so if I added another router to my network it could share the existing /64 range vs. getting a /48 or so)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p199345">
				<div class="post-metadata">
					<div class="post-num">Post #520</div>
					<div class="post-author">CyrusFF</div>
					<div class="post-datetime">
						23 Apr 2013, 15:08					</div>
				</div>
				<div class="post-content content">
					<p>Well one of the advantages if that you can use it behind other router that only give out addresses to clients (don&#039;t support PD) e.g. behind a router given to you by your ISP or you want to use a WiFi in client-mode as your wan-interface.</p><p>Also if you have a regular /48 or /56 or so from your ISP / tunnelprovider it can now also act as a DHCPv6-PD server and you can distribute a part of your prefix to another router.</p><p>It is also more standards compliant and smaller in size compared to dnsmasq&#039;s DHCPv6 features so in the end a bit more versatile for a variety of environments it can be used in.</p><p>If this all doesn&#039;t matter to you, nobody is discouraging you from using dnsmasq. It&#039;s a great peace of software in the end and it supports stateful DHCPv6 for clients if you are into that and - as you mentioned - it takes the hostname obtained from DHCPv4 and resolves it to the IPv6 addresses. </p><p>However I personally don&#039;t see this as essential.<br/>The whole hostname reporting this is not really well thought of or implemented in the major OS (not a problem of dnsmasq but IPv6 / DHCPv6 in general) and so the current solutions or workarounds like the ones in dnsmasq don&#039;t really work reliably without additional IPv4 connectivity so why not simply resolve to IPv4 in the first place.</p>											<p class="post-edited">(Last edited by <strong>CyrusFF</strong> on 23 Apr 2013, 15:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p199347">
				<div class="post-metadata">
					<div class="post-num">Post #521</div>
					<div class="post-author">The_Decryptor</div>
					<div class="post-datetime">
						23 Apr 2013, 15:27					</div>
				</div>
				<div class="post-content content">
					<p>Yeah, my setup isn&#039;t the ideal mix for it (My current ISP doesn&#039;t so IPv6 so I&#039;m using a /64 from HE, the ISP I want to switch to does DHCPv6-PD, and I only have 1 router on my entire network so I don&#039;t need a /48 or so for multiple subnets) And I did run into issues with DHCPv6 when I was testing dnsmasq in a VM, OS X being the worst offender there (It was renewing the lease every 40 seconds, and never provided a hostname, so it would have had to fallback to the v4/SLAAC mix/hack)</p><p>It wasn&#039;t ever a deal breaker for me, I just didn&#039;t expect the behaviour when upgrading from backfire (It&#039;s all working fine, I should be clear about that). And if 6relayd works better in more situations then good.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p199639">
				<div class="post-metadata">
					<div class="post-num">Post #522</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						25 Apr 2013, 19:49					</div>
				</div>
				<div class="post-content content">
					<p>- Attitude Adjustment 12.09 r36423, equal to 12.09 release</p><p>Attitude Adjustment 12.09 has been released today. The release was tagged today and the AA sources got modified by r36421-36422 to show the release version and the release package repository directory.</p><p>I have built version r36423 that matches the release functionality and points to the correct package directory, so that opkg can install from the release package repository.<br/><a href="http://koti.welho.com/hnyman1/Openwrt/attitude-r36423-2013-04-25-release12.09/">http://koti.welho.com/hnyman1/Openwrt/attitude-r36423-2013-04-25-release12.09/</a></p><p>I will probably continue building AA every now and then if there are any larger changes, but based on the last few months I do not expect to lots of backporting current trunk functionality to AA. Instead the devs will probably branch BB in the next few months and concentrate on releasing that.</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 25 Apr 2013, 19:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p199684">
				<div class="post-metadata">
					<div class="post-num">Post #523</div>
					<div class="post-author">rolfl</div>
					<div class="post-datetime">
						26 Apr 2013, 06:33					</div>
				</div>
				<div class="post-content content">
					<p>Hi Hnyman,</p><p>I&#039;m trying to setup strongswan using the wiki article: <br/><a href="http://wiki.openwrt.org/inbox/strongswan.howto">http://wiki.openwrt.org/inbox/strongswan.howto</a></p><p>I&#039;m loading below packages<br/>After re-loading the firewall the router gets trashed and enter reboot-loop and I have to go to tftp for recovery.</p><p>I&#039;m thinking kmod-ipt-ipsec or iptables-mod-ipsec are causing problems.</p><p>Any chance you can include (or make module available) for <strong>kmod-ipt-ipsec</strong> and <strong>iptables-mod-ipsec</strong> in the next build?</p><p>-Rolf</p><div class="codebox"><pre><code>opkg update
opkg install --force-depends kmod-ipt-ipsec
opkg install --force-depends strongswan-default
opkg install --force-depends strongswan-mod-dhcp
opkg install --force-depends strongswan-mod-af-alg
opkg install --force-depends strongswan-mod-gcrypt
opkg install --force-depends strongswan-mod-blowfish
opkg install --force-depends strongswan-mod-md4
opkg install --force-depends strongswan-mod-openssl
opkg install --force-depends strongswan-mod-pkcs11
opkg install --force-depends strongswan-mod-pkcs8
opkg install --force-depends strongswan-mod-test-vectors
opkg install --force-depends strongswan-mod-farp
opkg install --force-depends iptables-mod-ipsec</code></pre></div>											<p class="post-edited">(Last edited by <strong>rolfl</strong> on 26 Apr 2013, 06:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p199769">
				<div class="post-metadata">
					<div class="post-num">Post #524</div>
					<div class="post-author">Manani</div>
					<div class="post-datetime">
						26 Apr 2013, 18:54					</div>
				</div>
				<div class="post-content content">
					<p>I found that to perform an update makes packages incompatible even with the option --force-depends. The update seems to change the md5sum. This was the case during the brief period when Hnyman gave us separately the package kmod-ipt-nathelper-rtsp.<br/>The ideal would be to have packages for each version Hnyman. But I guess it must be complicated, or long to make, or a question of space, or everything at once.</p>											<p class="post-edited">(Last edited by <strong>Manani</strong> on 26 Apr 2013, 21:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p199844">
				<div class="post-metadata">
					<div class="post-num">Post #525</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						27 Apr 2013, 15:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Etique wrote:</cite><blockquote><p>But I&#039;m still disappointed I can&#039;t get the image to build. I&#039;ve really little knowledge on that topic so it&#039;s hard for me to debug but... maybe you could have a second look on your second post and check if anything is missing/has changed?</p></blockquote></div><p>The advice in <a href="https://forum.openwrt.org/viewtopic.php?pid=127011#p127011">https://forum.openwrt.org/viewtopic.php?pid=127011#p127011</a> is still quite valid. I have just re-created my build-environment in a brand new Ubuntu 13.04 x64. </p><p>Log of the actual commands I used is below. I did the steps in a slightly different order than the original advice, as I downloaded patches early and then edited the newOpenwrtBuildroot.sh script to have the correct patch filenames. That enabled me to uncomment the patch command lines at the end of newOpenwrtBuildroot.sh, so that script did also the patching on the same run. (I have modified the current advice to reflect this.)</p><p>I have removed a few unnecessary &#039;ls&#039; commands etc., but all actual commands are here:<br/></p><div class="codebox"><pre><code>STEP 1-3
    2  cd /
    3  sudo mkdir Openwrt
    4  chown perus Openwrt/
    5  sudo chown perus Openwrt/
    6  chmod 777 Openwrt/
    7  cd Openwrt/
    9  wget http://koti.welho.com/hnyman1/Openwrt/trunk-r36462-2013-04-27/WNDR3700-trunk-r36462-2013-04-27-1017-buildscripts.txt
   15  chmod 744 WNDR3700-trunk-r36462-2013-04-27-1017-buildscripts.txt 
   16  ./WNDR3700-trunk-r36462-2013-04-27-1017-buildscripts.txt 
   18  chmod 744 newOpenwrtBuildroot.sh 

STEP 4
   22  wget http://koti.welho.com/hnyman1/Openwrt/trunk-r36462-2013-04-27/WNDR3700-trunk-r36462-2013-04-27-1017-luci-trunk.patch
   23  wget http://koti.welho.com/hnyman1/Openwrt/trunk-r36462-2013-04-27/WNDR3700-trunk-r36462-2013-04-27-1017-openwrt.patch
   24  wget http://koti.welho.com/hnyman1/Openwrt/trunk-r36462-2013-04-27/WNDR3700-trunk-r36462-2013-04-27-1017-packages.patch
   25  wget http://koti.welho.com/hnyman1/Openwrt/attitude-r36423-2013-04-25-release12.09/WNDR3700-attitude-r36423-2013-04-25-1916-luci-0.11.patch
   26  wget http://koti.welho.com/hnyman1/Openwrt/attitude-r36423-2013-04-25-release12.09/WNDR3700-attitude-r36423-2013-04-25-1916-openwrt.patch
   27  wget http://koti.welho.com/hnyman1/Openwrt/attitude-r36423-2013-04-25-release12.09/WNDR3700-attitude-r36423-2013-04-25-1916-packages.patch

STEP 5  (correct patch names and uncomment the lines so that patches will also get done. I only edited the six patch names and uncommented all commands in that section)
   29  gedit newOpenwrtBuildroot.sh &amp;

STEP 6
   30  ./newOpenwrtBuildroot.sh 

STEP 7
   32  cd trunk/
   33  svn status
   34  cd feeds/packages
   40  svn status
   41  svn add utils/collectd/patches/140-fix-fqdnlookup.patch
   62  cd /Openwrt/attitude/
   63  svn status
   64  cd feeds/packages
   66  svn status
   67  svn add utils/collectd/patches/910-upstream-fixes-after-4-10-7.patch
   68  svn add utils/collectd/patches/920-fix-ping-droprate.patch

STEP 8
   75  cd /Openwrt
   76  cp *.sh trunk/
   78  chmod 755 trunk/*.sh
   82  cp *.sh attitude/
   83  chmod 755 attitude/*.sh

BUILD
   84  cd trunk
   85  cp .config.init .config
   86  ./updateNmake.sh</code></pre></div><p>After the build I noticed that I had changed newOpenwrtBuildroot.sh by editing its patch section before copying the files to the new trunk and attitude directories. So I unpacked the scripts again and recopied that script to keep the original one intact (patch commands commented out).</p><div class="codebox"><pre><code>RE-UNPACK newOpenwrtBuildroot.sh AND COPY IT AGAIN
   94  cd /Openwrt
   95  ./WNDR3700-trunk-r36462-2013-04-27-1017-buildscripts.txt 
   98  cp newOpenwrtBuildroot.sh trunk/
   99  cp newOpenwrtBuildroot.sh attitude/</code></pre></div><p>I will probably modify the script a bit to make it easier to keep the original script and will edit the advice accordingly. (EDIT: new steps 3b and 3c added)</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 28 Apr 2013, 19:52)</p>
									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 526 to 525 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 21 of 63</div><nav><ul><li><a href="viewtopic.php%3Fid=28392&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=19.html">19</a></li><li><a href="viewtopic.php%3Fid=28392&amp;p=20.html">20</a></li><li class="pagination-current"><span>21</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=22.html">22</a></li><li><a href="viewtopic.php%3Fid=28392&amp;p=23.html">23</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=63.html">63</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>