<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TP-Link TL-WR703N Reverse Engineering</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 22 Mar 2018 and 21 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 5</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=39829&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=39829&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=39829&amp;p=5.html">5</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p180116">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Squonk</div>
					<div class="post-datetime">
						6 Oct 2012, 01:22					</div>
				</div>
				<div class="post-content content">
					<p>Despite its interesting characteristics, the TL-WR703N router suffers from a complete lack of information regarding its implementation:</p><ul><li><p>The datasheet for the main chip (Atheros AR9331) is only available under NDA (Non-Disclosure Agreement)</p></li><li><p>No available schematic, layout or BOM (Bill Of Materials) files</p></li></ul><p>There are already several OpenWRT forum threads dealing with hardware hacking of the TL-WR703N, and they tend to rapidly focus on the research of available I/O resources and low-level electronic understanding. Although some progress has been made, like an almost exhaustive main AR9331 chip pinout and a component-by-component description, only a full reverse-engineering work can provide the answers to all the questions on the hardware.</p><p>This is the reason why I undertook the job of reverse engineering the TL-WR703N using EagleCAD, and here is the result so far:</p><p><span class="postimg"><img src="https://raw.github.com/Squonk42/TL-WR703N/master/Pictures/TL-WR703N%20Top%20LoRes.png" alt="TL-WR703N PCB Top in EagleCAD" /></span><br /><span class="postimg"><img src="https://raw.github.com/Squonk42/TL-WR703N/master/Pictures/TL-WR703N%20Bottom%20LoRes.png" alt="TL-WR703N PCB Bottom in EagleCAD" /></span></p><p>All the details can be found on the: </p><h5><a href="http://squonk42.github.com/TL-WR703N/">corresponding Github Page</a></h5><p>.</p><p>All design files are available at <a href="https://github.com/Squonk42/TL-WR703N">https://github.com/Squonk42/TL-WR703N</a>.</p><p>The next step will be to recreate the full schematic from this layout.</p><p>Please let me know your comments about all this here!</p>											<p class="post-edited">(Last edited by <strong>Squonk</strong> on 13 Oct 2012, 11:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180193">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Kean</div>
					<div class="post-datetime">
						8 Oct 2012, 11:58					</div>
				</div>
				<div class="post-content content">
					<p>Very nice work Squonk!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180406">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Squonk</div>
					<div class="post-datetime">
						13 Oct 2012, 01:20					</div>
				</div>
				<div class="post-content content">
					<p>Here it is: the almost complete TL-WR703N schematic, reverse-engineered from the PCB layout obtained from Kean&#039;s Hi-res PCB pictures:<br /><span class="postimg"><img src="https://raw.github.com/Squonk42/TL-WR703N/master/Pictures/TL-WR703N%20Schematic%20LoRes.png" alt="TL-WR703N PCB Top in EagleCAD" /></span></p><p>All the details can be found on the: </p><h5><a href="http://squonk42.github.com/TL-WR703N/">corresponding Github Page</a></h5><p>.</p><p>All design files are available at <a href="https://github.com/Squonk42/TL-WR703N">https://github.com/Squonk42/TL-WR703N</a>.</p><p>Right now, the internal layers have not been taken into account, thus the round markers on the schematics and PCB corresponding to vias going to unknown internal layer traces. If you want to help, please let me know where they are going!</p><p>Please let me know your comments about all this here!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180411">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">slboat</div>
					<div class="post-datetime">
						13 Oct 2012, 08:40					</div>
				</div>
				<div class="post-content content">
					<p>That&#039;s very great work!!so it&#039;s mean the most gpio just not pinout,and more gpio just bind togher do nothing?</p><p>and im put one version on my site:<br /><a href="http://see.sl088.com/wiki/WR703_%E7%94%B5%E8%B7%AF%E5%9B%BE">http://see.sl088.com/wiki/WR703_%E7%94% â€¦ F%E5%9B%BE</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180419">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Squonk</div>
					<div class="post-datetime">
						13 Oct 2012, 11:03					</div>
				</div>
				<div class="post-content content">
					<p>First, the schematic is not complete, since it is only based on the observation of the external layers. The circle markers with 0-9/A-Q labels in the schematic are vias going to internal layers, and they match the yellow dots with the corresponding labels on the PCB layouts. If you have some time and the required electronic knowledge, this is something you can try to investigate <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>In order to locate things inside the schematic, I propose you to use the schematic external frame row/column position: for example, the main AR9331 U1 chip is located in E4-F5 and SPI FLash chip U3 is in E2.</p><p>Yes, there are a lot of unused pins on the AR9331, but they are not all available GPIOs. Some of them have dedicated functions, like the second RF interface connected to GND in area G4, or the unused additional Ethernet ports located in D4.</p><p>There are some unused GPIOs used for other TP-Link models (TL-MR3020) located in D5, but they are not accessible since they are located beneath the AR9331 chip.</p><p>So the only available pins usable for GPIOs are the ones we already know: those located in E3: GPIO11 (RESET_SW), GPIO7, GPIO6 (LDO, which is actually !USB_OC for USB overcurrent indicator), GPIO29, GPIO8 (USB_POWER) and GPIO27 (LED3); those located in G4-5: GPIO28, GPIO13 to GPIO17, GPIO0, GPIO1 and of course the TP_IN/TP_OUT LVTTL UART pins.</p><p>But most of them are tied either to GND or VCC by a pull-up/pull-down resistor, and most of them are used as boot-time configuration switches, so you must be careful as they cannot be set to the other state, at least during boot. This is why I tried to unsolder them one by one and tie them to the opposite level, and see if it prevents the router from booting <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /></p><p>This is a second area of investigation, from my <a href="https://forum.openwrt.org/viewtopic.php?pid=176461#p176461">previous post</a>, I guess that by changing these boot-time switches, it is possible:<br /></p><ul><li><p>to boot using the <a href="http://en.wikipedia.org/wiki/Management_Data_Input/Output">MDIO</a> bus. Maybe also boot from USB? Bootstraping from ROM directly to USB (DFU ?) could be nice to recover devices with bricked U-Boot <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p></li><li><p>that the normal 25 MHz crystal can be overclocked to 40 MHz</p></li><li><p>to select USB to work in host or device mode</p></li><li><p>to boot from SPI and probably also internal bootstrap ROM, if booting from SPI is optional</p></li><li><p>to disable SDRAM and choose between DDR1 or DDR2, or maybe select the correct SDRAM/DDR1/DDR2 config</p></li></ul><p>Anyway, there are some very interesting points that can be seen from this schematic:<br /></p><ul><li><p>by removing J1, you can solder an external antenna</p></li><li><p>by populating R113, you can bypass the USB current-limited power distribution siwtch U6 and thus supply the TL-WR703N from the USB A connector</p></li><li><p>by removing R65/R68, you have access to the Ethernet 1/2 and 4/5 pairs to use as PoE to supply the device</p></li><li><p>by disabling first the USB in the kernel, you can use the USB_POWER signal to control the USB Host connector supply and thus control an external static relay without any soldering <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></li></ul>											<p class="post-edited">(Last edited by <strong>Squonk</strong> on 13 Oct 2012, 11:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180440">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">slboat</div>
					<div class="post-datetime">
						13 Oct 2012, 14:55					</div>
				</div>
				<div class="post-content content">
					<p>yea im see it&#039;s not finish,but it&#039;s a lot fun,im broken 1wr703,2mr11u,with this,i can get a lot help,so im can fix it:) it&#039;s really great!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180441">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">slboat</div>
					<div class="post-datetime">
						13 Oct 2012, 14:55					</div>
				</div>
				<div class="post-content content">
					<p>what&#039;s mean ddr2,what&#039;s it use for?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180442">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Squonk</div>
					<div class="post-datetime">
						13 Oct 2012, 15:46					</div>
				</div>
				<div class="post-content content">
					<p>What would be nice is to X-ray a bare TL-WR703N board to see the internal layers <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>X-ray machines are commonly used for controlling BGA chips, so you can find them at electronic assembly factories with BGA capabilities, or in some electronic labs.</p><p>DDR2 is the SDRAM type: in embedded systems, you can find SDR (Single Data Rate) SDRAM clocking data on either the rising or falling edge of the clock signal, DDR (Double Data Rate) or DDR1 SDRAM clocking data on both clock edges, and DDR2 provides higher bus speed and half internal clock speed, thus doubling the transfer rate, see <a href="http://en.wikipedia.org/wiki/DDR2_SDRAM.">http://en.wikipedia.org/wiki/DDR2_SDRAM.</a></p><p>The TL-WR703N uses DDR1 SDRAM.</p>											<p class="post-edited">(Last edited by <strong>Squonk</strong> on 13 Oct 2012, 15:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180471">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">ZotDitzMyo</div>
					<div class="post-datetime">
						13 Oct 2012, 21:57					</div>
				</div>
				<div class="post-content content">
					<p>Amazing work! I&#039;m currently struggling with my 2nd 64mb upgrade (freezes often,reboots etc...) and it may be I have a dead unit that could be depopulated and used for &quot;the cause&quot;.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180481">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Squonk</div>
					<div class="post-datetime">
						13 Oct 2012, 23:18					</div>
				</div>
				<div class="post-content content">
					<p>Thanks!</p><p>But having a bare PCB is only useful if you can get access to an electronic X-ray facility...</p><p>The other solution is to grind down the PCB to access the internal layers one by one like this:<br /><a href="http://bb.osmocom.org/trac/wiki/PirelliDPL10/PCB">http://bb.osmocom.org/trac/wiki/PirelliDPL10/PCB</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180500">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">slboat</div>
					<div class="post-datetime">
						14 Oct 2012, 08:17					</div>
				</div>
				<div class="post-content content">
					<p>oh imsee ddr2 just the speed:) i thought is like the with 2x ddr,so make it to 128M haha</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180501">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">slboat</div>
					<div class="post-datetime">
						14 Oct 2012, 08:17					</div>
				</div>
				<div class="post-content content">
					<p>the ar9931 is a lot blink pin,cant let them out,them just keep in the hole,never have chance to come out</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180502">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">slboat</div>
					<div class="post-datetime">
						14 Oct 2012, 08:18					</div>
				</div>
				<div class="post-content content">
					<p>the crystal ,if make it to 50mhz,what&#039;s happen?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180518">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Squonk</div>
					<div class="post-datetime">
						14 Oct 2012, 12:14					</div>
				</div>
				<div class="post-content content">
					<p>As we don&#039;t have the AR9331 datasheet, it is impossible to tell!</p><p>It will probably not work, since the crystal is used by an internal PLL, and changing the crystal frequency would require to modify the firmware (bootloader and kernel) to adjust the PLL settings.</p><p>Because of the PLL which already multiply the crystal frequency, increasing the crystal frequency does not necessarily implies that you will increase the system frequency.</p>											<p class="post-edited">(Last edited by <strong>Squonk</strong> on 14 Oct 2012, 12:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180541">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">mips</div>
					<div class="post-datetime">
						14 Oct 2012, 15:32					</div>
				</div>
				<div class="post-content content">
					<p>Cool job!</p><p>The RF part have some differential circuit,but it&#039;s not clear from your SCH plot.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180549">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">Squonk</div>
					<div class="post-datetime">
						14 Oct 2012, 16:06					</div>
				</div>
				<div class="post-content content">
					<p>What do you mean?</p><p>You can see clearly the differential RF signals connected to U1&#039;s A62 to A65 pins, with separate differential paths for TX and RX, joining into a common differential path before getting unbalanced into J1, then to the antenna&#039;s foot capacitive impedance divider...</p><p>You can even tell about the impedance-terminated second RF antenna path connected to A68/A69 and probably A70/A71 too.</p><p>Do you have suggestions on how to improve the schematic?</p>											<p class="post-edited">(Last edited by <strong>Squonk</strong> on 14 Oct 2012, 16:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180565">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">mips</div>
					<div class="post-datetime">
						14 Oct 2012, 18:10					</div>
				</div>
				<div class="post-content content">
					<p>I know little about the HW,no PCB layout experience.So i only can understand some very very clearly SCH.<br />The differential RF signals should be changed to single ended signals,but from the SCH,i can not see where the &quot;join&quot; point.</p><p>The Electronic Component on differential RF signals should be symmetrical,so the two &quot;J&quot; and the &quot;c18&quot;,&quot;c24&quot;,&quot;c85&quot; also not verify clear for me.</p><p>I suggest not plot the SCH in one page,divide to different page with different function,just like the POWER part,the RF part,the DDR part,the USB part,the ETHERNET part,the GPIO part.Though the WR703N is verify simple to plot in one page,it&#039;s more clear to plot it in different page.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180566">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">Squonk</div>
					<div class="post-datetime">
						14 Oct 2012, 18:45					</div>
				</div>
				<div class="post-content content">
					<p>OK, I understand what you mean now!</p><p>The 2 &quot;J&quot; are vias going to the internal layers, and they are at the same potential ans the &quot;K&quot; and &quot;O&quot;, I suspect +3.3 V, so C18/C24 andC85 are just decoupling capacitors, and you can consider that C18 is // to L4 and C24 // to L2 if you want, and that the higher value C85 is just a chip decoupling capacitor close to the AR9331 chip.</p><p>I also rechecked the schematic and PCB, and thanks to slboat from the forum, I spotted the missing connection you are speaking about: there is a wire between C27/C28 and L3/C21: it is your &quot;join&quot; point!</p><p>Sorry, but the single page schematic is not a choice, as the free version of EagleCAD used does not allow you to have more than one schematic page <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>That&#039;s why I tried to label the different schematic parts and separate them as much as possible. You just have to zoom in/out as required <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180590">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">Squonk</div>
					<div class="post-datetime">
						15 Oct 2012, 00:57					</div>
				</div>
				<div class="post-content content">
					<p>I updated the files to Rev. B to correct the problems found so far:<br /></p><ul><li><p>missing wire in RF section between C21 and C28 + cleaned up RF section (thanks mips &amp; slboat!)</p></li><li><p>missing wire between U1-A33 and +2V5</p></li><li><p>probed all vias going to internal layers with a DMM, as labs or fabs with X-ray machines are closed on sunday <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></li></ul><p>It turns out that most of the vias can be guessed easily, so there is only one remaining (&quot;L&quot;) which looks like it&#039;s tied to +3V3, but that I don&#039;t understand.</p><p>If someone gets a clue, please let me know!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180832">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">mips</div>
					<div class="post-datetime">
						17 Oct 2012, 17:22					</div>
				</div>
				<div class="post-content content">
					<p>About the &quot;L&quot;,try to check if this is help:<br /><span class="postimg"><img src="http://www.zlgmcu.com/mxic/NOR_Flash_c/img/MX25L1605D_yy.jpg" alt="http://www.zlgmcu.com/mxic/NOR_Flash_c/img/MX25L1605D_yy.jpg" /></span></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181005">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">Squonk</div>
					<div class="post-datetime">
						20 Oct 2012, 11:07					</div>
				</div>
				<div class="post-content content">
					<p>Yes, the S25FL032 (U3) connections are otherwise pretty much the same as the schematic you provide:<br /></p><ol class="decimal"><li><p>!CS is driven directly by an AR9331 pin</p></li><li><p>SO/IO1 is S25FL032 data serial output, and goes through a 3/4 voltage divider made up of R57/R60 to adapt the 3.3 V output to the AR9331&#039;s 2.5 V input level</p></li><li><p>!W/ACC/IO2 is the write protect and is pulled up by R62 to 3.3 V, as R63 is not populated, so it is the same as your R2</p></li><li><p>the GND pin is connected to GND <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></li><li><p>SI/IO0 is S25FL032 data serial input, and comes straight from the AR9331, as the low/high voltage thresholds are compatible</p></li><li><p>SCK is the S25FL032 input data clock, coming from the AR9331 too</p></li><li><p>!HOLD/IO3 is where the question is: both schematics feature a pull-up resistor, but in my case, this resistor is split in 2: R58/10k and R95/10 ohms, with the famous &quot;L&quot; label in-between. Yours is just a standard 4.7k (R1) pull-up resistor</p></li><li><p>VCC is the power supply, properly decoupled by a 100nF capacitor (C7 or C1 in your schematic)</p></li></ol><p>I don&#039;t see the point in having 2 series pull-up resistors for the !HOLD/IO3 signal in the TL-WR703N. What is strange is to use a rather &quot;large size&quot; 0603 resistor with such a small value?!?</p><p>Maybe it is something related to manufacturing, such as way to program the SPI Flash in situ, then mounting the 0603 R95 resistor afterwards? I read the &quot;QUAD Page Program (QPP)&quot; section 9.15 in the <a href="http://www.spansion.com/Support/Datasheets/S25FL032P_00.pdf">S25FL032 datasheet</a>, but in this case, the !HOLD/IO3 is used as IO3 parallel input, and the series R58/10k is not appropriate. Moreover, there should be the same configuration for the other IOx pins, too.</p><p>The S25FL032 also features an OTP (One Time Programming) Flash region, but the !HOLD/IO3 has nothing to do with it.</p><p>So I still don&#039;t know the purpose of this &quot;L&quot; via to internal layers.</p>											<p class="post-edited">(Last edited by <strong>Squonk</strong> on 20 Oct 2012, 11:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181239">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">sturle</div>
					<div class="post-datetime">
						22 Oct 2012, 23:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Squonk wrote:</cite><blockquote><p>You can even tell about the impedance-terminated second RF antenna path connected to A68/A69 and probably A70/A71 too.</p></blockquote></div><p>Would it be possible to wire to a socket for an optional external antenna here, while keeping the internal antenna operational?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181267">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">Squonk</div>
					<div class="post-datetime">
						23 Oct 2012, 10:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>sturle wrote:</cite><blockquote><div class="quotebox"><cite>Squonk wrote:</cite><blockquote><p>You can even tell about the impedance-terminated second RF antenna path connected to A68/A69 and probably A70/A71 too.</p></blockquote></div><p>Would it be possible to wire to a socket for an optional external antenna here, while keeping the internal antenna operational?</p></blockquote></div><p>Doubtful. If you look at the components required on the existing antenna, there are quite a lot of them. And some are ultra-low valued capacitors and selfs, sot it would be very difficult to just reproduce as is on a different PCB.</p><p>Your best guess would be to try the TL-MR3020, which has almost all these components already mounted, just missing a jumper.</p><p>However, the stock MR3020 only uses a single antenna, and it may be because of power dissipation problems in the AR9331 chip itself, so be careful!</p><p>Notwithstanding the software side, which would required WLAN driver modifications to enable antenna diversity.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181858">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">mips</div>
					<div class="post-datetime">
						30 Oct 2012, 15:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Squonk wrote:</cite><blockquote><p>Yes, the S25FL032 (U3) connections are otherwise pretty much the same as the schematic you provide:<br /></p><ol class="decimal"><li><p>!CS is driven directly by an AR9331 pin</p></li><li><p>SO/IO1 is S25FL032 data serial output, and goes through a 3/4 voltage divider made up of R57/R60 to adapt the 3.3 V output to the AR9331&#039;s 2.5 V input level</p></li><li><p>!W/ACC/IO2 is the write protect and is pulled up by R62 to 3.3 V, as R63 is not populated, so it is the same as your R2</p></li><li><p>the GND pin is connected to GND <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></li><li><p>SI/IO0 is S25FL032 data serial input, and comes straight from the AR9331, as the low/high voltage thresholds are compatible</p></li><li><p>SCK is the S25FL032 input data clock, coming from the AR9331 too</p></li><li><p>!HOLD/IO3 is where the question is: both schematics feature a pull-up resistor, but in my case, this resistor is split in 2: R58/10k and R95/10 ohms, with the famous &quot;L&quot; label in-between. Yours is just a standard 4.7k (R1) pull-up resistor</p></li><li><p>VCC is the power supply, properly decoupled by a 100nF capacitor (C7 or C1 in your schematic)</p></li></ol><p>I don&#039;t see the point in having 2 series pull-up resistors for the !HOLD/IO3 signal in the TL-WR703N. What is strange is to use a rather &quot;large size&quot; 0603 resistor with such a small value?!?</p><p>Maybe it is something related to manufacturing, such as way to program the SPI Flash in situ, then mounting the 0603 R95 resistor afterwards? I read the &quot;QUAD Page Program (QPP)&quot; section 9.15 in the <a href="http://www.spansion.com/Support/Datasheets/S25FL032P_00.pdf">S25FL032 datasheet</a>, but in this case, the !HOLD/IO3 is used as IO3 parallel input, and the series R58/10k is not appropriate. Moreover, there should be the same configuration for the other IOx pins, too.</p><p>The S25FL032 also features an OTP (One Time Programming) Flash region, but the !HOLD/IO3 has nothing to do with it.</p><p>So I still don&#039;t know the purpose of this &quot;L&quot; via to internal layers.</p></blockquote></div><p>As I know,the flash are already programed some manufacturing code before SMT.<br />So it&#039;s really strange about the &quot;L&quot;.<br />A small resistor(R95) connect to v3.3,its&#039; seems it want to filter something to get a more clear v3.3?or add it for pass some hardware test?But why it then connect to R58?<br />If the &quot;L&quot; is connect to C7,and R95 is not connect to R58,but used some else where?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p184959">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">ramaza</div>
					<div class="post-datetime">
						2 Dec 2012, 12:44					</div>
				</div>
				<div class="post-content content">
					<p>I could try to grind down the PCB of a TL-WR703N and scan the single copper layers? Like Squonk already explained. I have access to some machines and enough craftsmanship. I think it&#039;s worth a try and I am happy to donate one TL-WR703N.</p><p>Please let me know if this is still needed for finishing or verifying the schematics.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 5</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=39829&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=39829&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=39829&amp;p=5.html">5</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>