<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Wifi detect do not recognize my usb wifi?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 2 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p346139">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">blackdragon169</div>
					<div class="post-datetime">
						9 Dec 2016, 11:14					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,<br />I had a problem with my Tp_link WN821N which i had just bought. I followed these instruction <a href="https://wiki.openwrt.org/doc/uci/wireless#regenerate_configuration">https://wiki.openwrt.org/doc/uci/wirele … figuration</a> and I got nothing:<br /></p><div class="codebox"><pre><code>wifi detect &gt; /etc/config/wireless</code></pre></div><p>I had installed some package following:<br /></p><div class="quotebox"><blockquote><p>kmod-usb2<br />kmod-usb-ohcp<br />kmod-usb-uhcp<br />kmod-rtl8192cu</p></blockquote></div><p>Have someone met this problem? And how i can to solve it? Thank!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346141">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">stas2z</div>
					<div class="post-datetime">
						9 Dec 2016, 11:19					</div>
				</div>
				<div class="post-content content">
					<p>wifi detect will work only if /etc/config/wireless is missing<br />rename original file and try again<br />but im not sure it will work with realtek chipset</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346152">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">blackdragon169</div>
					<div class="post-datetime">
						9 Dec 2016, 15:14					</div>
				</div>
				<div class="post-content content">
					<p>Hi all, <br />I found that my version usb dongle is 5 and its driver have a bit different to the others.<br /><a href="https://wikidevi.com/wiki/TP-LINK_TL-WN821N_v5">https://wikidevi.com/wiki/TP-LINK_TL-WN821N_v5</a><br />After that, I installed kmod-rtl8xxxu from trunk but it&#039;s no help.<br />Maybe the only way to get that usb dongle work is cross compile its driver on my device - Raspberry.<br />But I do not know how i can build exactly its driver that suit my linux kernel. And how I can do it with OpenWrt?<br /><a href="https://discourse.osmc.tv/t/tutorial-compiling-a-working-kernel-driver-for-rtl8192eu/5252">https://discourse.osmc.tv/t/tutorial-co … 192eu/5252</a><br />Please give me a help.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346156">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">AndreL</div>
					<div class="post-datetime">
						9 Dec 2016, 16:23					</div>
				</div>
				<div class="post-content content">
					<p>Realtek makes similarly numbered chipsets but different drivers are needed. That is a problem I faced with the TP-Link TL-WN725N Nano WiFi USB adapter.</p><p>The solution was changing the adapter to a no-brand chinese adapter with Ralink chipset.</p><p>The dongle with Ralink chipset even performed better then the TP-Link/Realtek one when used in a Laptop. Pinging the router&#039;s address from the laptop gives me an almost constant 2ms rtt with Realtek and &lt;1ms with the cheap chinese one.</p>											<p class="post-edited">(Last edited by <strong>AndreL</strong> on 9 Dec 2016, 16:31)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346166">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">bolvan</div>
					<div class="post-datetime">
						9 Dec 2016, 20:13					</div>
				</div>
				<div class="post-content content">
					<p>Run PC linux system and check if it works there.<br />If it does then see which module supports it and find same module in openwrt.<br />If it doesnt then probably no hope. Not all wireless adapters supported by linux</p>											<p class="post-edited">(Last edited by <strong>bolvan</strong> on 9 Dec 2016, 20:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346203">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">blackdragon169</div>
					<div class="post-datetime">
						10 Dec 2016, 04:22					</div>
				</div>
				<div class="post-content content">
					<p>It worked on my linux mint, right after i installed its driver. I tried every module related to its driver but it still did not work on openwrt.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346215">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">blackdragon169</div>
					<div class="post-datetime">
						10 Dec 2016, 10:29					</div>
				</div>
				<div class="post-content content">
					<p>Hi everyone,<br />I have loaded my compiled modules which I built this following topic.<br /><a href="http://www.fontenay-ronan.fr/kernel-module-cross-compilation-rtl8192eu-on-ubuntu-for-raspbian/">http://www.fontenay-ronan.fr/kernel-mod … -raspbian/</a><br />And here is the result<br /></p><div class="codebox"><pre><code>[  601.430420] RTL871X: USB_SPEED_HIGH
[  601.437694] RTL871X: CHIP TYPE: RTL8192E
[  601.442805] RTL871X: register rtw_netdev_ops to netdev_ops
[  601.450092] RTL871X: ReadChipVersion192e 0xF0 = 0xc441135 
[  601.456822] RTL871X: Chip Version Info: CHIP_8192E_Normal_Chip_SMIC_B_CUT_2T2R_RomVer(0)
[  601.467196] RTL871X: RF_Type is 2!!
[  601.471902] RTL871X: _ConfigChipOutEP_8192E OutEpQueueSel(0x07), OutEpNumber(3) 
[  601.481794] RTL871X: ====&gt; ReadAdapterInfo8192EU
[  601.488497] RTL871X: Boot from EFUSE, Autoload OK !
[  601.704338] RTL871X: EEPROM ID=0x8129
[  601.709403] RTL871X: VID = 0x2357, PID = 0x0107
[  601.715286] RTL871X: Customer ID: 0x00, SubCustomer ID: 0xCD
[  601.722319] RTL871X: hal_ReadMACAddress_8192EU MAC Address from EFUSE = 84:16:f9:09:53:68
[  601.733303] RTL871X: Hal_ReadPowerSavingMode8192E...bHWPwrPindetect(0)-bHWPowerdown(0) ,bSupportRemoteWakeup(1)
[  601.746483] RTL871X: ### PS params=&gt;  power_mgnt(1),usbss_enable(0) ###
[  601.754781] RTL871X: EEPROMRegulatory = 0x1 TxPwrCalibrateRate=0x0
[  601.762608] RTL871X: Board Type: Dongle or WIFI only Module 
[  601.769959] RTL871X: mlmepriv.ChannelPlan = 0x21
[  601.776285] RTL871X: CrystalCap: 0x1f
[  601.781596] RTL871X: ThermalMeter = 0x1f
[  601.787158] RTL871X: SWAS: bHwAntDiv = 0, TRxAntDivType = ff
[  601.794462] RTL871X: pHalData-&gt;PAType_2G is 0x0, pHalData-&gt;ExternalPA_2G = 0
[  601.803179] RTL871X: pHalData-&gt;LNAType_2G is 0x0, pHalData-&gt;ExternalLNA_2G = 0
[  601.812111] RTL871X: ReadAdapterInfo8192EU &lt;====
[  601.820020] RTL871X: init_channel_set ChannelPlan ID 21 Chan num:13  
[  601.829342] RTL871X: pwrctrlpriv.bSupportRemoteWakeup~~~~~~
[  601.836652] RTL871X: pwrctrlpriv.bSupportRemoteWakeup~~~[1]~~~
[  601.844080] RTL871X: can&#039;t get autopm: 
[  601.849523] RTL871X: rtw_macaddr_cfg MAC Address  = 84:16:f9:09:53:68
[  601.857614] RTL871X: bDriverStopped:1, bSurpriseRemoved:0, bup:0, hw_init_completed:0
[  601.868670] RTL871X: rtw_ndev_init(wlan0)
[  601.876229] RTL871X: _rtw_drv_register_netdev, MAC Address (if1) = 84:16:f9:09:53:68
root@OpenWrt:/tmp# </code></pre></div><p>Look like it worked but I still get no result when I type wifi detect.<br /></p><div class="codebox"><pre><code>root@OpenWrt:/tmp# iwconfig
wlan0     unassociated  Mode:Managed  Frequency=2.412 GHz  
          Access Point: Not-Associated   
          RTS thr:off   Fragment thr:off
          Encryption key:off
          Power Management:off
          Link Quality:0  Signal level:0  Noise level:0
          Rx invalid nwid:0  Rx invalid crypt:0  Rx invalid frag:0
          Tx excessive retries:0  Invalid misc:0   Missed beacon:0

lo        no wireless extensions.

eth0      no wireless extensions.

br-lan    no wireless extensions.

root@OpenWrt:/tmp# wifi detect &gt; /etc/config/wireless
root@OpenWrt:/tmp# </code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346216">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">bolvan</div>
					<div class="post-datetime">
						10 Dec 2016, 10:33					</div>
				</div>
				<div class="post-content content">
					<p>Try &quot;iw list&quot; first</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346217">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">blackdragon169</div>
					<div class="post-datetime">
						10 Dec 2016, 10:50					</div>
				</div>
				<div class="post-content content">
					<p>There is no result.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346218">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">bolvan</div>
					<div class="post-datetime">
						10 Dec 2016, 10:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>blackdragon169 wrote:</cite><blockquote><p>There is no result.</p></blockquote></div><p>It means it does not work with cfg80211<br />I dont have deep experience with wifi systems in linux. I know there&#039;s more than one.<br />Madwifi for example exists.<br />Check on PC if &quot;iw list&quot; works. I guess it doesnt work too.<br />This should be the reason why driver was not included to openwrt distro.<br />May be some compile options (defines) exist to enable cfg80211 support.<br /><a href="https://www.raspberrypi.org/forums/viewtopic.php?f=63&amp;t=70568">https://www.raspberrypi.org/forums/view … mp;t=70568</a></p>											<p class="post-edited">(Last edited by <strong>bolvan</strong> on 10 Dec 2016, 11:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346219">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">blackdragon169</div>
					<div class="post-datetime">
						10 Dec 2016, 11:20					</div>
				</div>
				<div class="post-content content">
					<p>It worked when i run iwlist scan, now I only set mode for it by iwconfig command. I will try your suggestion, bolvan. Thank you.<br /></p><div class="codebox"><pre><code>iwlist wlan0 scan
wlan0     Scan completed :
          Cell 01 - Address: 10:FE:ED:F8:EC:2E
                    ESSID:&quot;DUNG_HUONG&quot;
                    Protocol:IEEE 802.11bgn
                    Mode:Master
                    Frequency:2.412 GHz (Channel 1)
                    Encryption key:on
                    Bit Rates:150 Mb/s
                    Extra:wpa_ie=dd1a0050f20101000050f20202000050f2040050f20201000050f202
                    IE: WPA Version 1
                        Group Cipher : TKIP
                        Pairwise Ciphers (2) : CCMP TKIP
                        Authentication Suites (1) : PSK
                    Extra:rsn_ie=30180100000fac020200000fac04000fac020100000fac020000
                    IE: IEEE 802.11i/WPA2 Version 1
                        Group Cipher : TKIP
                        Pairwise Ciphers (2) : CCMP TKIP
                        Authentication Suites (1) : PSK
                    IE: Unknown: DD990050F204104A0001101044000102103B000103104700100000000000001000000010FEEDF8EC101021000754502D4C494E4B10230009544C2D57523734304E10240003342E3010420003312E301054000800060050F204000110110019576972656C65737320526F7574657220544C2D57523734304E100800020086103C000101104900140024E26002000101600000020001600100020001
                    Quality=100/100  Signal level=64/100  
                    Extra:fm=0003
          Cell 02 - Address: 18:D0:71:01:E4:63
                    ESSID:&quot;Sa&quot;
                    Protocol:IEEE 802.11bgn
                    Mode:Master
                    Frequency:2.412 GHz (Channel 1)
                    Encryption key:on
                    Bit Rates:144 Mb/s
                    Extra:rsn_ie=30140100000fac040100000fac040100000fac020c00
                    IE: IEEE 802.11i/WPA2 Version 1
                        Group Cipher : CCMP
                        Pairwise Ciphers (1) : CCMP
                        Authentication Suites (1) : PSK
                    Quality=63/100  Signal level=47/100  
                    Extra:fm=0001</code></pre></div>											<p class="post-edited">(Last edited by <strong>blackdragon169</strong> on 10 Dec 2016, 11:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346221">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">bolvan</div>
					<div class="post-datetime">
						10 Dec 2016, 11:22					</div>
				</div>
				<div class="post-content content">
					<p>Read here <a href="https://wireless.wiki.kernel.org/en/developers/documentation/cfg80211">https://wireless.wiki.kernel.org/en/dev … n/cfg80211</a><br />Iwlist and iwconfig use older (obsolete) interface<br />Modern interface is cfg80211<br />Driver does not seem to support it<br />Hostapd and openwrt will likey not work with this obsolete driver using WEXT interface.<br />WEXT is <a href="https://wiki.openwrt.org/doc/howto/wireless.overview">deprecated</a></p>											<p class="post-edited">(Last edited by <strong>bolvan</strong> on 10 Dec 2016, 11:26)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>