<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Howto Specify my DNS Servers</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 18 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p145055">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">gusz</div>
					<div class="post-datetime">
						3 Oct 2011, 23:07					</div>
				</div>
				<div class="post-content content">
					<p>I have an OpenWRT Router running Backfire (10.03, r24064), with several Windows and <br />Linux clients on a LAN behind. </p><p>I want to configure the router to use specified DNS servers, and all clients to use the DNS <br />servers specified on the router. I need this to be persistent across router/OpenWRT reboots.</p><p>On my OpenWRT router I see the following resolv.conf files ....</p><p>/etc/ppp/resolv.conf<br />/etc/resolv.conf<br />/rom/etc/ppp/resolv.conf<br />/rom/etc/resolv.conf<br />/tmp/resolv.conf<br />/tmp/resolv.conf.auto</p><p>After some googl&#039;ing, I&#039;m confused as to which file is persistent and in&nbsp; which I thus specify my <br />chosen DNS servers. Also, as to&nbsp; whether I need to set symlinks and or modify other OpenWRT <br />config files to point to the correct/persistent resolv.conf file.</p><p>And accordingly, how do I tell the clients to use the DNS servers specified on the router.</p><p>Thx, Gus</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145058">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">written_direcon</div>
					<div class="post-datetime">
						4 Oct 2011, 00:09					</div>
				</div>
				<div class="post-content content">
					<p>In none of them. You have to check the Wiki.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145061">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">adam2104</div>
					<div class="post-datetime">
						4 Oct 2011, 02:33					</div>
				</div>
				<div class="post-content content">
					<p>Wow, that was really helpful.</p><p>You can configure this under /etc/config/network. I do this also. On my &quot;wan&quot; interface I have the following:</p><p>option &#039;dns&#039; &#039;8.8.8.8 8.8.4.4&#039;</p><p>By default, your router will be a DNS forwarder. Your clients will direct all their queries to the router, which will then use the above mentioned addresses to resolve the name.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145127">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">gusz</div>
					<div class="post-datetime">
						4 Oct 2011, 21:38					</div>
				</div>
				<div class="post-content content">
					<p>That did the trick - thanks adam2104&nbsp; &nbsp; Gus</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145131">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">written_direcon</div>
					<div class="post-datetime">
						5 Oct 2011, 00:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>adam2104 wrote:</cite><blockquote><p>You can configure this under /etc/config/network. I do this also. On my &quot;wan&quot; interface I have the following:</p><p>option &#039;dns&#039; &#039;8.8.8.8 8.8.4.4&#039;</p><p>By default, your router will be a DNS forwarder. Your clients will direct all their queries to the router, which will then use the above mentioned addresses to resolve the name.</p></blockquote></div><div class="codebox"><pre><code>uci set network.wan.dns=&#039;8.8.8.8 8.8.4.4&#039;
uci commit network
ifup wan</code></pre></div>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>