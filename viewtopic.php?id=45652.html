<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> qos causes kernel panic</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p209056">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">valentt</div>
					<div class="post-datetime">
						6 Aug 2013, 00:20					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m running latest trunk on my wr1043nd router and I see that some qos kernel modules cause kernel panic <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>Is anybody else seeing these issues?</p><p>Should I report this as a bug?</p><br /><p>Here is full log:</p><p>[&nbsp; 496.430000] ------------[ cut here ]------------<br />[&nbsp; 496.430000] WARNING: at net/sched/sch_hfsc.c:1428 0x80735744()<br />[&nbsp; 496.440000] Modules linked in: ifb xt_HL xt_hl xt_ecn ipt_ECN xt_CLASSIFY xt_tcpmss xt_statistic xt_length xt_DSCP xt_dscp xt_string ts_fsm ts_bm ts_kmp act_connmark xt_recent xt_helper xt_connmark xt_connbytes act_skbedit act_mirred em_u32 cls_u32 cls_tcindex cls_flow cls_route cls_fw sch_hfsc sch_ingress ledtrig_usbdev ledtrig_netdev ip6t_REJECT ip6t_rt ip6t_hbh ip6t_mh ip6t_ipv6header ip6t_frag ip6t_eui64 ip6t_ah ip6table_raw ip6table_mangle ip6table_filter ip6_tables nf_conntrack_ipv6 nf_defrag_ipv6 nf_nat_irc nf_nat_ftp nf_conntrack_irc nf_conntrack_ftp xt_REDIRECT ipt_MASQUERADE iptable_nat xt_nat nf_nat_ipv4 nf_nat pppoe xt_conntrack xt_CT iptable_raw xt_state nf_conntrack_ipv4 nf_defrag_ipv4 nf_conntrack pppox xt_mark xt_time ipt_REJECT xt_TCPMSS xt_LOG xt_comment xt_multiport xt_mac xt_limit iptable_mangle iptable_filter ip_tables xt_tcpudp x_tables ppp_async ppp_generic slhc ath9k ath9k_common ath9k_hw ath mac80211 crc_ccitt ipv6 cfg80211 compat arc4 crypto_blkcipher aead leds_gpio ohci_hcd ledtrig_timer ledtrig_default_on ehci_platform ehci_hcd gpio_button_hotplug usbcore usb_common nls_base crypto_hash [last unloaded: ifb]<br />[&nbsp; 496.540000] CPU: 0 PID: 0 Comm: swapper Not tainted 3.10.4 #1<br />[&nbsp; 496.550000] Stack : 00000006 00000000 00000000 00000000 00000000 00000000 80392a96 00000031<br />[&nbsp; 496.550000]&nbsp; &nbsp; 80323658 802d2ca8 80372a0c 803233db 00000000 80533388 80390000 80390000<br />[&nbsp; 496.550000]&nbsp; &nbsp; 00200000 800793ac 00000003 80076dec 00000000 00000000 802d45a4 8031dc74<br />[&nbsp; 496.550000]&nbsp; &nbsp; 0031dc74 00000000 00000000 00000000 00000000 00000000 00000000 00000000<br />[&nbsp; 496.550000]&nbsp; &nbsp; 00000000 00000000 00000000 00000000 00000000 00000000 00000000 8031dc00<br />[&nbsp; 496.550000]&nbsp; &nbsp; ...<br />[&nbsp; 496.580000] Call Trace:<br />[&nbsp; 496.590000] [&lt;8006df68&gt;] show_stack+0x48/0x70<br />[&nbsp; 496.590000] [&lt;80076ee8&gt;] warn_slowpath_common+0x78/0xa8<br />[&nbsp; 496.600000] [&lt;80076f30&gt;] warn_slowpath_null+0x18/0x24<br />[&nbsp; 496.600000] [&lt;80735744&gt;] 0x80735744<br />[&nbsp; 496.610000] <br />[&nbsp; 496.610000] ---[ end trace 0b4fe706bab6baac ]---<br />[&nbsp; 496.610000] ------------[ cut here ]------------<br />[&nbsp; 496.620000] WARNING: at net/sched/sch_hfsc.c:1428 0x80735744()<br />[&nbsp; 496.630000] Modules linked in: ifb xt_HL xt_hl xt_ecn ipt_ECN xt_CLASSIFY xt_tcpmss xt_statistic xt_length xt_DSCP xt_dscp xt_string ts_fsm ts_bm ts_kmp act_connmark xt_recent xt_helper xt_connmark xt_connbytes act_skbedit act_mirred em_u32 cls_u32 cls_tcindex cls_flow cls_route cls_fw sch_hfsc sch_ingress ledtrig_usbdev ledtrig_netdev ip6t_REJECT ip6t_rt ip6t_hbh ip6t_mh ip6t_ipv6header ip6t_frag ip6t_eui64 ip6t_ah ip6table_raw ip6table_mangle ip6table_filter ip6_tables nf_conntrack_ipv6 nf_defrag_ipv6 nf_nat_irc nf_nat_ftp nf_conntrack_irc nf_conntrack_ftp xt_REDIRECT ipt_MASQUERADE iptable_nat xt_nat nf_nat_ipv4 nf_nat pppoe xt_conntrack xt_CT iptable_raw xt_state nf_conntrack_ipv4 nf_defrag_ipv4 nf_conntrack pppox xt_mark xt_time ipt_REJECT xt_TCPMSS xt_LOG xt_comment xt_multiport xt_mac xt_limit iptable_mangle iptable_filter ip_tables xt_tcpudp x_tables ppp_async ppp_generic slhc ath9k ath9k_common ath9k_hw ath mac80211 crc_ccitt ipv6 cfg80211 compat arc4 crypto_blkcipher aead leds_gpio ohci_hcd ledtrig_timer ledtrig_default_on ehci_platform ehci_hcd gpio_button_hotplug usbcore usb_common nls_base crypto_hash [last unloaded: ifb]<br />[&nbsp; 496.730000] CPU: 0 PID: 3 Comm: ksoftirqd/0 Tainted: G&nbsp; &nbsp; &nbsp; &nbsp; W&nbsp; &nbsp; 3.10.4 #1<br />[&nbsp; 496.730000] Stack : 00000006 00000000 00000000 00000000 00000000 00000000 80392a96 00000040<br />[&nbsp; 496.730000]&nbsp; &nbsp; 81828a08 802d2ca8 80372a0c 803233db 00000003 80533388 00000800 80330000<br />[&nbsp; 496.730000]&nbsp; &nbsp; 803361d0 800793ac 00000003 80076d64 00000000 00000000 802d45a4 8183bb8c<br />[&nbsp; 496.730000]&nbsp; &nbsp; 0083bb8c 00000000 00000000 00000000 00000000 00000000 00000000 00000000<br />[&nbsp; 496.730000]&nbsp; &nbsp; 00000000 00000000 00000000 00000000 00000000 00000000 00000000 8183bb18<br />[&nbsp; 496.730000]&nbsp; &nbsp; ...<br />[&nbsp; 496.770000] Call Trace:<br />[&nbsp; 496.770000] [&lt;8006df68&gt;] show_stack+0x48/0x70<br />[&nbsp; 496.780000] [&lt;80076ee8&gt;] warn_slowpath_common+0x78/0xa8<br />[&nbsp; 496.780000] [&lt;80076f30&gt;] warn_slowpath_null+0x18/0x24<br />[&nbsp; 496.790000] [&lt;80735744&gt;] 0x80735744<br />[&nbsp; 496.790000] <br />[&nbsp; 496.790000] ---[ end trace 0b4fe706bab6baad ]---<br />[&nbsp; 496.830000] ------------[ cut here ]------------<br />[&nbsp; 496.840000] WARNING: at net/sched/sch_hfsc.c:1428 0x80735744()<br />[&nbsp; 496.840000] Modules linked in: ifb xt_HL xt_hl xt_ecn ipt_ECN xt_CLASSIFY xt_tcpmss xt_statistic xt_length xt_DSCP xt_dscp xt_string ts_fsm ts_bm ts_kmp act_connmark xt_recent xt_helper xt_connmark xt_connbytes act_skbedit act_mirred em_u32 cls_u32 cls_tcindex cls_flow cls_route cls_fw sch_hfsc sch_ingress ledtrig_usbdev ledtrig_netdev ip6t_REJECT ip6t_rt ip6t_hbh ip6t_mh ip6t_ipv6header ip6t_frag ip6t_eui64 ip6t_ah ip6table_raw ip6table_mangle ip6table_filter ip6_tables nf_conntrack_ipv6 nf_defrag_ipv6 nf_nat_irc nf_nat_ftp nf_conntrack_irc nf_conntrack_ftp xt_REDIRECT ipt_MASQUERADE iptable_nat xt_nat nf_nat_ipv4 nf_nat pppoe xt_conntrack xt_CT iptable_raw xt_state nf_conntrack_ipv4 nf_defrag_ipv4 nf_conntrack pppox xt_mark xt_time ipt_REJECT xt_TCPMSS xt_LOG xt_comment xt_multiport xt_mac xt_limit iptable_mangle iptable_filter ip_tables xt_tcpudp x_tables ppp_async ppp_generic slhc ath9k ath9k_common ath9k_hw ath mac80211 crc_ccitt ipv6 cfg80211 compat arc4 crypto_blkcipher aead leds_gpio ohci_hcd ledtrig_timer ledtrig_default_on ehci_platform ehci_hcd gpio_button_hotplug usbcore usb_common nls_base crypto_hash [last unloaded: ifb]<br />[&nbsp; 496.950000] CPU: 0 PID: 0 Comm: swapper Tainted: G&nbsp; &nbsp; &nbsp; &nbsp; W&nbsp; &nbsp; 3.10.4 #1<br />[&nbsp; 496.950000] Stack : 00000006 00000000 00000000 00000000 00000000 00000000 80392a96 0000003c<br />[&nbsp; 496.950000]&nbsp; &nbsp; 80323658 802d2ca8 80372a0c 803233db 00000000 80533388 80390000 80390000<br />[&nbsp; 496.950000]&nbsp; &nbsp; 00200000 800793ac 00000003 80076d64 00000000 00000000 802d45a4 8031dc74<br />[&nbsp; 496.950000]&nbsp; &nbsp; 0031dc74 00000000 00000000 00000000 00000000 00000000 00000000 00000000<br />[&nbsp; 496.950000]&nbsp; &nbsp; 00000000 00000000 00000000 00000000 00000000 00000000 00000000 8031dc00<br />[&nbsp; 496.950000]&nbsp; &nbsp; ...<br />[&nbsp; 496.990000] Call Trace:<br />[&nbsp; 496.990000] [&lt;8006df68&gt;] show_stack+0x48/0x70<br />[&nbsp; 497.000000] [&lt;80076ee8&gt;] warn_slowpath_common+0x78/0xa8<br />[&nbsp; 497.000000] [&lt;80076f30&gt;] warn_slowpath_null+0x18/0x24<br />[&nbsp; 497.010000] [&lt;80735744&gt;] 0x80735744<br />[&nbsp; 497.010000] <br />[&nbsp; 497.010000] ---[ end trace 0b4fe706bab6baae ]---</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209070">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">kurczaq</div>
					<div class="post-datetime">
						6 Aug 2013, 02:54					</div>
				</div>
				<div class="post-content content">
					<p>this is normal.... all this stuff you should consider being alpha-stage software. Even including mainline Linux kernel - it NEVER works as announced. They rarely test throughly something else than x86 arch - so you with your router are basically a beta tester for this crap. Do not worry, this is normal.<br />On my MR3220 I cannot for example enable watchdog - if I do this, I get a kernel crash on each boot. Normal. Business as usual.</p><p>If you want to help your router be happy, spill a cup of muriatic acid into the router - I ASSURE this will help, you will never again have any problems with that particular router.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209119">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">valentt</div>
					<div class="post-datetime">
						6 Aug 2013, 16:48					</div>
				</div>
				<div class="post-content content">
					<p>Ok, so we are all beta testers... what is best course of action? Should I report this as a bug to kernel developers? What info should I report to them?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209139">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">kurczaq</div>
					<div class="post-datetime">
						6 Aug 2013, 22:28					</div>
				</div>
				<div class="post-content content">
					<p>this kernel message says nothing.</p><p>Compile your kernel with debug info &amp; frame pointers (if available) and send the full kernel Ooops message (including stack trace &amp; registers) to kernel.org mailing list.</p><p>it looks like a hung task - you did not provide any call trace.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>