<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> IPV6: Kamikaze (8.09, r14549) + Hurricane Electric = doesn&#039;t work</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p82186">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">qus</div>
					<div class="post-datetime">
						19 Feb 2009, 11:19					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I&#039;ve tried to read many HOWTOS on the net, but since openwrt ins and outs change more often than howtos get updated, I can&#039;t connect to HE.</p><p>My current config (this is a router on public IP, connected to public network via ethernet, no PPP):</p><p>betun&nbsp; &nbsp;Link encap:IPv6-in-IPv4<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: 2001:470:1f06:e15::2/64 Scope:Global<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::538f:2b23/128 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP POINTOPOINT RUNNING NOARP&nbsp; MTU:1480&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:520 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:64480 (62.9 KiB)</p><p>br-lan&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:22:6B:8E:09:6C<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.1.1&nbsp; Bcast:192.168.1.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: 2001:470:1f07:e15::/64 Scope:Global<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::222:6bff:fe8e:96c/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:9370 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:10541 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:1251282 (1.1 MiB)&nbsp; TX bytes:5035551 (4.8 MiB)</p><p>eth0&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:22:6B:8E:09:6C<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::222:6bff:fe8e:96c/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:241023 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:6139 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:19689212 (18.7 MiB)&nbsp; TX bytes:1183696 (1.1 MiB)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Interrupt:4</p><p>eth0.0&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:22:6B:8E:09:6C<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::222:6bff:fe8e:96c/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:440 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:47969 (46.8 KiB)</p><p>eth0.1&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:10:5A:1D:80:8E<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:X&nbsp; Bcast:X&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::210:5aff:fe1d:808e/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:240591 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:5696 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:15330419 (14.6 MiB)&nbsp; TX bytes:1105451 (1.0 MiB)</p><p>lo&nbsp; &nbsp; &nbsp; &nbsp; Link encap:Local Loopback<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:127.0.0.1&nbsp; Mask:255.0.0.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: ::1/128 Scope:Host<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP LOOPBACK RUNNING&nbsp; MTU:16436&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:156 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:156 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:20129 (19.6 KiB)&nbsp; TX bytes:20129 (19.6 KiB)</p><p>sit0&nbsp; &nbsp; &nbsp; Link encap:IPv6-in-IPv4<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; NOARP&nbsp; MTU:1480&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:0 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:0 (0.0 B)</p><p>wl0&nbsp; &nbsp; &nbsp; &nbsp;Link encap:Ethernet&nbsp; HWaddr 00:22:6B:8E:09:6E<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::222:6bff:fe8e:96e/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:9362 errors:0 dropped:0 overruns:0 frame:1515<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:10882 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:1381490 (1.3 MiB)&nbsp; TX bytes:5246867 (5.0 MiB)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Interrupt:2 Base address:0x5000</p><p>I use this script:</p><p>SERVER_v4=209.51.161.14<br />SERVER_v6=2001:470:1f06:e15::1<br />CLIENT_v4=X<br />CLIENT_v6=2001:470:1f06:e15::2<br />ROUTED_64=2001:470:1f07:e15::<br />ip tunnel add betun mode sit remote $SERVER_v4 local $CLIENT_v4 ttl 255<br />ip link set betun up<br />ip -6 addr add $CLIENT_v6/64 dev betun<br />ip -6 ro add default via $SERVER_v6 dev betun # SEE BELOW<br />ip -6 addr add $ROUTED_64/64 dev br-lan</p><p>After this line:<br />ip -6 ro add default via $SERVER_v6 dev betun # SEE BELOW</p><p>tcpdump on betun, when pingin ipv6.google.com shows:</p><p>18:34:45.910257 IP6 2001:470:1f06:e15::2 &gt; 2001:4860:0:1001::68: ICMP6, echo request, seq 332, length 64</p><p>I have following firewall rules:</p><p>firewall.@rule[1]=rule<br />firewall.@rule[1].target=ACCEPT<br />firewall.@rule[1]._name=IPv6<br />firewall.@rule[1].proto=41<br />firewall.@rule[2]=rule<br />firewall.@rule[2].target=ACCEPT<br />firewall.@rule[2].src=wan<br />firewall.@rule[2].proto=icmp<br />firewall.@rule[2]._name=Ping</p><p>But still - I can&#039;t ping anything IPv6.</p><p>Please help!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p83014">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">placebo</div>
					<div class="post-datetime">
						2 Mar 2009, 12:32					</div>
				</div>
				<div class="post-content content">
					<p>Usually when I&#039;ve run into a problem like this, it was because I forgot to tell Hurricane Electric my current IPv4 address.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>