<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> shairport on openwrt</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 2 Sep 2014 and 25 Apr 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 4 of 7</div><nav><ul><li><a href="viewtopic.php%3Fid=29491&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=29491&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=29491&amp;p=3.html">3</a></li><li class="pagination-current"><span>4</span></li><li><a href="viewtopic.php%3Fid=29491&amp;p=5.html">5</a></li><li><a href="viewtopic.php%3Fid=29491&amp;p=6.html">6</a></li><li><a href="viewtopic.php%3Fid=29491&amp;p=7.html">7</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p171858">
				<div class="post-metadata">
					<div class="post-num">Post #76</div>
					<div class="post-author">mrdragon1</div>
					<div class="post-datetime">
						8 Jul 2012, 17:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jlars wrote:</cite><blockquote><p>Here is a brief summary of the steps:<br/></p><div class="codebox"><pre><code>1) Have a linux &quot;host&quot; system (dedicated or VM)
2) Install all prerequisites for OpenWrt build environment (refer to wiki) 
3) Create a base directory and do an svn checkout of openwrt
  a) mkdir ~/openwrt &amp;&amp; cd ~/openwrt
  b) svn co svn://svn.openwrt.org/openwrt/trunk/
  c) cd trunk
4) Update package feeds, download, patch, and install shaiport package
  a) ./scripts/feeds update -a
  b) wget -O shairport.patch http://pastebin.com/raw.php?i=Lh8ae4hx
  c) echo &quot;&quot; &gt;&gt; shairport.patch
  d) patch -p0 &lt; shairport.patch
  e) ./scripts/feeds update -a
  f) ./scripts/feeds install shairport
5) Generate the initial configuration and confirm build environment prerequisites
  a) make defconfig
  b) Repeat a) and install any missing host packages until there are no errors on &quot;make defconfig&quot;
6) Select your target and add shairport to your build configuration
  a) make menuconfig
  b) Select appropriate &quot;Target system&quot;, e.g. Atheros AR71xx/AR......
  c) Select appropriate &quot;Target Profile&quot;, e.g. Buffalo WZR-HP-G30XNH
  d) Select Sound --&gt; shairport (highlight shairport and press &quot;m&quot; to build shairport as a package)
  e) Exit and save configuration
7) Build image and packages
  a) make
  b) If you encounter an error rerun with &quot;make V=99&quot; for verbose output
  c) After a successful build images and packages will be under ~/openwrt/trunk/bin</code></pre></div><p>This is mostly from memory so be sure to read the wiki for full details and better understanding of what is going on.&nbsp; Essential reading:</p><p><a href="http://wiki.openwrt.org/doc/howto/buildroot.exigence">http://wiki.openwrt.org/doc/howto/buildroot.exigence</a><br/><a href="http://wiki.openwrt.org/doc/howto/build">http://wiki.openwrt.org/doc/howto/build</a><br/><a href="https://dev.openwrt.org/wiki/GetSource">https://dev.openwrt.org/wiki/GetSource</a></p></blockquote></div><p>I tried following the steps listed here to install on my TP-Link TL-WR1043ND and ran into an issue and have a couple questions..<br/> - The URL for the shairport.patch appears to be broken, file not found on pastebin. I think I found a newer version of the file here: <a href="http://pastebin.com/download.php?i=DknUpn7f">http://pastebin.com/download.php?i=DknUpn7f</a> but get the following errors: <br/></p><div class="codebox"><pre><code>patching file feeds/packages/libs/libao/Makefile
Hunk #2 FAILED at 8.
Hunk #4 FAILED at 57.</code></pre></div><p>- Will the image with shairport fit in the 8MB flash on the router that i have? <br/> - This post has been around for a while, is there an updated set of directions to install this?</p><p>Thanks in advance!!</p>											<p class="post-edited">(Last edited by <strong>mrdragon1</strong> on 8 Jul 2012, 17:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p171892">
				<div class="post-metadata">
					<div class="post-num">Post #77</div>
					<div class="post-author">valentt</div>
					<div class="post-datetime">
						9 Jul 2012, 10:17					</div>
				</div>
				<div class="post-content content">
					<p>I would also like to have shairport on my wr1043n router, please help.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p176396">
				<div class="post-metadata">
					<div class="post-num">Post #78</div>
					<div class="post-author">mrdragon1</div>
					<div class="post-datetime">
						30 Aug 2012, 16:10					</div>
				</div>
				<div class="post-content content">
					<p>what are the chances of someone making a Shairport OpenWRT package that can be installed like the other packages available? That seems like the next step once this is working to me.. I know that would make it a lot easier for those of us that haven&#039;t had any luck with building our own firmware..</p><p>I have a feeling that my router will need a USB hub and flash drive as it only has 8MB flash in it. It is a TP-Link tl-wr1043nd.</p><p>I hope no one gets upset with me for posting to a fairly old thread, but this is literally the ONLY place I have found for getting Shairport running on OpenWRT.</p><p>Thanks in advance to anyone that posts info about a package or even updated instructions to get this working!</p>											<p class="post-edited">(Last edited by <strong>mrdragon1</strong> on 30 Aug 2012, 16:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180636">
				<div class="post-metadata">
					<div class="post-num">Post #79</div>
					<div class="post-author">xurxo</div>
					<div class="post-datetime">
						15 Oct 2012, 12:27					</div>
				</div>
				<div class="post-content content">
					<p>hi, sorry for my bad english, because i´m spanish xD, i´m trying to compile shairport with my openwrt and i always have the same error (error 2), i´m so sad because, i want to have your package, and i can&#039;t.<br/>RESUME: I follow all the steps and always have the same error when compileing, what can i do?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180643">
				<div class="post-metadata">
					<div class="post-num">Post #80</div>
					<div class="post-author">mikejuni</div>
					<div class="post-datetime">
						15 Oct 2012, 12:46					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m also interested in making this work. Any luck. Seems like the previous patch has some issue with libao.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180685">
				<div class="post-metadata">
					<div class="post-num">Post #81</div>
					<div class="post-author">grayman4hire</div>
					<div class="post-datetime">
						15 Oct 2012, 21:28					</div>
				</div>
				<div class="post-content content">
					<p>I managed to get ShairPort working on my TP MR-3020 running AA beta this weekend. I just followed jlars&#039; instructions and used his feed.</p><div class="codebox"><pre><code>You can get this as a feed by adding this line to feeds.conf:
src-git jlars git://github.com/jlars/packages.git;master

./scripts/feeds update -a
./scripts/feeds install shairport
make menuconfig
shairport will be in the Sound menu.</code></pre></div><p>Note that it complained about not finding &#039;avahi/dbus&#039; something package (don&#039;t recall exactly). You can just ignore it but make and force the installation without checking dependency. You still need avahi and dbus though, just not the particular package referenced in the Makefile (@jlars, can you fix it when you get a chance?).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180702">
				<div class="post-metadata">
					<div class="post-num">Post #82</div>
					<div class="post-author">mrdragon1</div>
					<div class="post-datetime">
						16 Oct 2012, 02:36					</div>
				</div>
				<div class="post-content content">
					<p>Thanks! I&#039;ll have to try this later..<br/>Did you install avahi and dbus from the packages after, or somehow during the build?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180710">
				<div class="post-metadata">
					<div class="post-num">Post #83</div>
					<div class="post-author">grayman4hire</div>
					<div class="post-datetime">
						16 Oct 2012, 06:49					</div>
				</div>
				<div class="post-content content">
					<p>Avahi and dbus I installed using ipkg from the default feeds.</p><p>I&#039;ll work on a tutorial once I sort though all the details (basically when I have time to do it from scratch again).</p><div class="quotebox"><cite>mrdragon1 wrote:</cite><blockquote><p>Thanks! I&#039;ll have to try this later..<br/>Did you install avahi and dbus from the packages after, or somehow during the build?</p></blockquote></div>											<p class="post-edited">(Last edited by <strong>grayman4hire</strong> on 16 Oct 2012, 06:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180753">
				<div class="post-metadata">
					<div class="post-num">Post #84</div>
					<div class="post-author">xurxo</div>
					<div class="post-datetime">
						16 Oct 2012, 20:23					</div>
				</div>
				<div class="post-content content">
					<p>i do what you say, with jlars feed, but it doesn&#039;t work i can&#039;t compile with shairport don&#039;t know what i&#039;m doing bad but it doens&#039;t work what you say. any idea? (i&#039;m going to repeat the process and then i will writte here the results, ty again) <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile"/></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180779">
				<div class="post-metadata">
					<div class="post-num">Post #85</div>
					<div class="post-author">mikejuni</div>
					<div class="post-datetime">
						17 Oct 2012, 03:16					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m able to successfully compile shairport and use it on my router. It works wonderfully. I&#039;ll post a small guide once I&#039;m free.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180781">
				<div class="post-metadata">
					<div class="post-num">Post #86</div>
					<div class="post-author">mikejuni</div>
					<div class="post-datetime">
						17 Oct 2012, 03:52					</div>
				</div>
				<div class="post-content content">
					<p>Ok. Here is the guide, but it requires you to build OpenWRT manually so please read the build root guide beforehand. </p><p>Once you&#039;ve setup a buildroot environment, you should have a feeds.conf.default file and the feeds.conf file doesn&#039;t exist. Copy the file feeds.conf.default to feeds.conf</p><p>Then modify feeds.conf to include 1 additional line:</p><p>src-git jlars git://github.com/jlars/packages.git;master</p><p>Then type the following command to include this feed into package. </p><p>./scripts/feeds update -a<br/>./scripts/feeds install -a</p><p>Now</p><p>make menuconfig<br/>shairport will be in the sound menu</p><p>Choose to build it as a module. No need to build the shairport perl packages. </p><p>Once build is complete. You&#039;ll have the package. </p><p>Now, if you&#039;re using trunk, no need to flash the latest image. Just point /etc/opkg.conf to the bin/&lt;platform&gt;/packages</p><p>Install dbus, avahi-daemon, avahi-utils, libavahi and libavahi-dbus</p><p>Then install shairport using opkg install --force shairport (otherwise it will complaint abou dependency)</p><p>Also install alsa-utils and kmod-usb-audio (I presume it is a router so this should be the right sound card to use). Not to mention, you need either a USB speaker or a USB sound card. </p><p>To start all service, start dbus, avahi-daemon and shairport. </p><p>You should now see shairport in the list of AirPlay speakers.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180782">
				<div class="post-metadata">
					<div class="post-num">Post #87</div>
					<div class="post-author">mikejuni</div>
					<div class="post-datetime">
						17 Oct 2012, 04:00					</div>
				</div>
				<div class="post-content content">
					<p>Also a few tips:</p><p>To change shairport name in the AirPlay menu, start it with something like below:</p><p>shairport -a name -d -p 5000</p><p>-d is daemonize<br/>-p 5000 is the port number to use</p><p>If no sound come out, run alsamixer to check of volume and output device is correct. It is in alsa-utils package.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180963">
				<div class="post-metadata">
					<div class="post-num">Post #88</div>
					<div class="post-author">xurxo</div>
					<div class="post-datetime">
						19 Oct 2012, 12:51					</div>
				</div>
				<div class="post-content content">
					<p>i did what you say a lot of times, and getting the same error i&#039;m going to stop trying it :&#039;(, this is the error:</p><p>&nbsp; &nbsp; &nbsp; &nbsp; touch /home/xurxo/openwrt/trunk/build_dir/host/opkg-618/.built<br/>&nbsp; &nbsp; &nbsp; &nbsp; make[3]: Leaving directory `/home/xurxo/openwrt/trunk/package/opkg&#039;<br/>&nbsp; &nbsp; &nbsp; &nbsp; make[2]: Leaving directory `/home/xurxo/openwrt/trunk&#039;<br/>&nbsp; &nbsp; &nbsp; &nbsp; make[1]: *** [/home/xurxo/openwrt/trunk/staging_dir/target-mips_uClibc-0.9.33.2/stamp/.package_compile] Error 2<br/>&nbsp; &nbsp; &nbsp; &nbsp; make[1]: Leaving directory `/home/xurxo/openwrt/trunk&#039;<br/>&nbsp; &nbsp; &nbsp; &nbsp; make: *** [world] Error 2</p><p>If someone know what it means please, say to me, i&#039;m trying to compile it for bcm63xx. Ty for your help <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile"/></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181004">
				<div class="post-metadata">
					<div class="post-num">Post #89</div>
					<div class="post-author">mikejuni</div>
					<div class="post-datetime">
						20 Oct 2012, 07:23					</div>
				</div>
				<div class="post-content content">
					<p>Your OpenWRT build root seems to have some problem, which could be complex. What platform are you trying to build from?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181007">
				<div class="post-metadata">
					<div class="post-num">Post #90</div>
					<div class="post-author">xurxo</div>
					<div class="post-datetime">
						20 Oct 2012, 12:45					</div>
				</div>
				<div class="post-content content">
					<p>I don&#039;t understand what you mean, but i&#039;m going to put here everything and you catch what you want XD:</p><p>OS: Ubuntu 12.04<br/>Openwrt version: Trunk, Barrier breaker<br/>Router chip: bcm63xx</p><p>(I think that here is your answer)<br/>If not please say to me, I&#039;m not very good in english <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile"/></p>											<p class="post-edited">(Last edited by <strong>xurxo</strong> on 20 Oct 2012, 12:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181013">
				<div class="post-metadata">
					<div class="post-num">Post #91</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						20 Oct 2012, 14:07					</div>
				</div>
				<div class="post-content content">
					<p>A <em>make V=s</em> will show exact position on the compilation errors.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181180">
				<div class="post-metadata">
					<div class="post-num">Post #92</div>
					<div class="post-author">xurxo</div>
					<div class="post-datetime">
						22 Oct 2012, 12:04					</div>
				</div>
				<div class="post-content content">
					<p>This is how i get from de compilation:</p><p><span class="postimg"><img src="https://sites.google.com/site/xurxothebest/archivos/Captura%20de%20pantalla%20de%202012-10-22%2000%3A36%3A31.png?attredirects=0&amp;d=1" alt="PunBB bbcode test"/></span></p><p>Somebody know this error and how i can fix it?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181181">
				<div class="post-metadata">
					<div class="post-num">Post #93</div>
					<div class="post-author">mikejuni</div>
					<div class="post-datetime">
						22 Oct 2012, 12:38					</div>
				</div>
				<div class="post-content content">
					<p>There are too few lines of output for me to see what&#039;s happening. Would you mind posting more lines (like ~100 or so?)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181182">
				<div class="post-metadata">
					<div class="post-num">Post #94</div>
					<div class="post-author">xurxo</div>
					<div class="post-datetime">
						22 Oct 2012, 12:46					</div>
				</div>
				<div class="post-content content">
					<p>ok, i&#039;m compileing for backfire, at the moment, when it finish if it doens&#039;t work i will upload everything on a text file</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181191">
				<div class="post-metadata">
					<div class="post-num">Post #95</div>
					<div class="post-author">xurxo</div>
					<div class="post-datetime">
						22 Oct 2012, 14:32					</div>
				</div>
				<div class="post-content content">
					<p>This is all that i can copy:</p><p><a href="https://sites.google.com/site/xurxothebest/archivos/Error%20compilado.txt?attredirects=0&amp;d=1">https://sites.google.com/site/xurxotheb … =0&amp;d=1</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181192">
				<div class="post-metadata">
					<div class="post-num">Post #96</div>
					<div class="post-author">mikejuni</div>
					<div class="post-datetime">
						22 Oct 2012, 14:35					</div>
				</div>
				<div class="post-content content">
					<p>My tutorial only works on trunk I think, not backfire.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181195">
				<div class="post-metadata">
					<div class="post-num">Post #97</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						22 Oct 2012, 14:48					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>xurxo wrote:</cite><blockquote><p>This is all that i can copy:</p><p><a href="https://sites.google.com/site/xurxothebest/archivos/Error%20compilado.txt?attredirects=0&amp;d=1">https://sites.google.com/site/xurxotheb … =0&amp;d=1</a></p></blockquote></div><p>Please use the <a href="http://pastebin.com/">PasteBin</a> facility to paste your output here.</p><p>BTW, does anyone here know what happens to OpenWRT PasteBin facility? Has it been shutdown?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181209">
				<div class="post-metadata">
					<div class="post-num">Post #98</div>
					<div class="post-author">written_direcon</div>
					<div class="post-datetime">
						22 Oct 2012, 17:57					</div>
				</div>
				<div class="post-content content">
					<p>I have written a quick tutorial on my Wiki at: <a href="http://www.custom-openwrt-builds.info/wiki/Building_Shairport_On_OpenWrt">Building Shairport On OpenWrt trunk (Using The GIT Feed From jlars)</a></p><p>Hope I explained it in an easy way</p><p>Have fun with building Shairport :-)</p>											<p class="post-edited">(Last edited by <strong>written_direcon</strong> on 22 Oct 2012, 22:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181290">
				<div class="post-metadata">
					<div class="post-num">Post #99</div>
					<div class="post-author">xurxo</div>
					<div class="post-datetime">
						23 Oct 2012, 14:31					</div>
				</div>
				<div class="post-content content">
					<p>I compile another time, now following&nbsp; written_direcon&#039;s tutorial but i got the same error, i don&#039;t know why, but here is all that i could copy, Now in Pastebin xD:</p><p><a href="http://pastebin.com/9yCsTcJy">ERROR</a></p>											<p class="post-edited">(Last edited by <strong>xurxo</strong> on 23 Oct 2012, 14:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181293">
				<div class="post-metadata">
					<div class="post-num">Post #100</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						23 Oct 2012, 15:04					</div>
				</div>
				<div class="post-content content">
					<p>It looks like the package compiled just fine, but failed in packaging stage.</p>									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 101 to 100 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 4 of 7</div><nav><ul><li><a href="viewtopic.php%3Fid=29491&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=29491&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=29491&amp;p=3.html">3</a></li><li class="pagination-current"><span>4</span></li><li><a href="viewtopic.php%3Fid=29491&amp;p=5.html">5</a></li><li><a href="viewtopic.php%3Fid=29491&amp;p=6.html">6</a></li><li><a href="viewtopic.php%3Fid=29491&amp;p=7.html">7</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>