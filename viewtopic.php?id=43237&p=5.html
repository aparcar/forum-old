<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> U-Boot mod for routers with AR9331/AR9344</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 3 Apr 2015 and 7 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 5 of 25</div><nav><ul><li><a href="viewtopic.php%3Fid=43237&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=43237&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=43237&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li><li><a href="viewtopic.php%3Fid=43237&amp;p=6.html">6</a></li><li><a href="viewtopic.php%3Fid=43237&amp;p=7.html">7</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=43237&amp;p=25.html">25</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p204848">
				<div class="post-metadata">
					<div class="post-num">Post #101</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						17 Jun 2013, 14:21					</div>
				</div>
				<div class="post-content content">
					<p>ethaddr is a MAC, not IP...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p204889">
				<div class="post-metadata">
					<div class="post-num">Post #102</div>
					<div class="post-author">slboat</div>
					<div class="post-datetime">
						17 Jun 2013, 19:03					</div>
				</div>
				<div class="post-content content">
					<p>it&#039;s mac address,that&#039;s insterset,on other uboot i never need set up them.</p><p><a href="http://www.youtube.com/watch?v=IKQ5oh6DoLA">http://www.youtube.com/watch?v=IKQ5oh6DoLA</a> here is the video i make.</p><p><a href="http://www.youtube.com/watch?v=wKinpn-7Xhs">http://www.youtube.com/watch?v=wKinpn-7Xhs</a> here is mips&#039;s uboot test</p><p>when the led is not blink,it just trap at boot.</p>											<p class="post-edited">(Last edited by <strong>slboat</strong> on 17 Jun 2013, 19:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p204890">
				<div class="post-metadata">
					<div class="post-num">Post #103</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						17 Jun 2013, 19:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>slboat wrote:</cite><blockquote><p>it&#039;s mac address,that&#039;s insterset,on other uboot i never need set up them.</p></blockquote></div><p>I removed ethaddr from U-Boot env in my mod, because I&#039;m using MAC from FLASH which isn&#039;t the same for all routers. So it can&#039;t be hard coded. Why do you want to change IP? You can just change IP on your PC and use default addresses from my U-Boot <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile"/></p><div class="quotebox"><cite>slboat wrote:</cite><blockquote><p><a href="http://www.youtube.com/watch?v=IKQ5oh6DoLA">http://www.youtube.com/watch?v=IKQ5oh6DoLA</a> here is the video i make.</p><p><a href="http://www.youtube.com/watch?v=wKinpn-7Xhs">http://www.youtube.com/watch?v=wKinpn-7Xhs</a> here is mips&#039;s uboot test</p><p>when the led is not blink,it just trap at boot.</p></blockquote></div><p>Yes. As I mentioned before, solution will be included in next release. I&#039;m working on it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p204892">
				<div class="post-metadata">
					<div class="post-num">Post #104</div>
					<div class="post-author">slboat</div>
					<div class="post-datetime">
						17 Jun 2013, 19:20					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pepe2k wrote:</cite><blockquote><div class="quotebox"><cite>slboat wrote:</cite><blockquote><p>it&#039;s mac address,that&#039;s insterset,on other uboot i never need set up them.</p></blockquote></div><p>I removed ethaddr from U-Boot env in my mod, because I&#039;m using MAC from FLASH which isn&#039;t the same for all routers. So it can&#039;t be hard coded. Why do you want to change IP? You can just change IP on your PC and use default addresses from my U-Boot <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile"/></p><br/><p>why the mac from flash imprtant...it&#039;s maybe for the case that a lot route same conect to route for the uboot?<br/></p><div class="quotebox"><cite>slboat wrote:</cite><blockquote><p><a href="http://www.youtube.com/watch?v=IKQ5oh6DoLA">http://www.youtube.com/watch?v=IKQ5oh6DoLA</a> here is the video i make.</p><p><a href="http://www.youtube.com/watch?v=wKinpn-7Xhs">http://www.youtube.com/watch?v=wKinpn-7Xhs</a> here is mips&#039;s uboot test</p><p>when the led is not blink,it just trap at boot.</p></blockquote></div><p>Yes. As I mentioned before, solution will be included in next release. I&#039;m working on it.</p></blockquote></div><p>that&#039;s good,if any test need,plz send to me,i have a lot wr703 can use for test</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205104">
				<div class="post-metadata">
					<div class="post-num">Post #105</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						19 Jun 2013, 23:39					</div>
				</div>
				<div class="post-content content">
					<p>I have just published new version, marked: <strong>Jun 19 2013</strong></p><p>Changes:</p><ul><li><p>fixed problem with booting in some cases on all supported models</p></li><li><p>support for TL-MR10U ver. 1.x (tested on ver. 1.0)</p></li><li><p>support fot TL-MR3220 ver. 2.x (tested on ver. 2.1)</p></li><li><p>support for TL-WR720N ver. 3 (only for Chinese version!)</p></li><li><p>support for new flash types/series: Macronix MX25L128 and SST 25VF064C</p></li><li><p>version for TL-WR740N v4 was tested also on TL-WR741ND ver. 4.2 (it&#039;s almost the same hardware)</p></li></ul><p>This is probably the last release for this project, I think that it&#039;s finished. Of course, if you find any bug I will try to fix it and release a solution but for any additional functionalities (like option to change MAC directly from website) you need to ask me privately.</p><p>I&#039;m focusing now on AR9344 and AR9341 SoC (U-Boot modification with web server and overclocking options).</p>											<p class="post-edited">(Last edited by <strong>pepe2k</strong> on 19 Jun 2013, 23:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205105">
				<div class="post-metadata">
					<div class="post-num">Post #106</div>
					<div class="post-author">headless.cross</div>
					<div class="post-datetime">
						19 Jun 2013, 23:54					</div>
				</div>
				<div class="post-content content">
					<p>Great news pepe2k! Looking forward for the AR9344/AR9341 project!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205117">
				<div class="post-metadata">
					<div class="post-num">Post #107</div>
					<div class="post-author">fjorger</div>
					<div class="post-datetime">
						20 Jun 2013, 01:24					</div>
				</div>
				<div class="post-content content">
					<p>Yes,</p><p>Great news pepe2k <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile"/></p><p>I&#039;m available to test it.</p><p>Regards,</p><p>FJorger.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205208">
				<div class="post-metadata">
					<div class="post-num">Post #108</div>
					<div class="post-author">wmxk007</div>
					<div class="post-datetime">
						21 Jun 2013, 07:57					</div>
				</div>
				<div class="post-content content">
					<p>Can it support for TL-MR11U ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205229">
				<div class="post-metadata">
					<div class="post-num">Post #109</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						21 Jun 2013, 11:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>wmxk007 wrote:</cite><blockquote><p>Can it support for TL-MR11U ?</p></blockquote></div><p>Yes, it supports MR11U. I didn&#039;t make special profile for this model because it&#039;s almost the same hardware as MR3040 so just upload version for MR3040. I have tested version for MR3040 only on MR3040 v1.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205260">
				<div class="post-metadata">
					<div class="post-num">Post #110</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						21 Jun 2013, 16:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>derrij wrote:</cite><blockquote><p>how to install this u-boot?</p></blockquote></div><p>You have two options:<br/>- TFTP in U-Boot (you will need access to UART console)<br/>- from OpenWrt but you will need to build custom image with write enabled on uboot partition</p><p>If you need instructions, you can find them in my article (for the TFTP method): <a href="http://translate.google.com/translate?hl=pl&amp;sl=auto&amp;tl=en&amp;u=http%3A%2F%2Fwww.tech-blog.pl%2F2013%2F03%2F29%2Fzmodyfikowany-u-boot-dla-routerow-tp-link-z-atheros-ar9331-z-trybem-aktualizacji-oprogramowania-przez-www-i-konsola-sieciowa-netconsole%2F">http://translate.google.com/translate?h … console%2F</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205263">
				<div class="post-metadata">
					<div class="post-num">Post #111</div>
					<div class="post-author">derrij</div>
					<div class="post-datetime">
						21 Jun 2013, 17:11					</div>
				</div>
				<div class="post-content content">
					<p>ok, thank you.<br/>i already find how to on your website.<br/>already on your u-boot. thank you.</p>											<p class="post-edited">(Last edited by <strong>derrij</strong> on 21 Jun 2013, 17:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205298">
				<div class="post-metadata">
					<div class="post-num">Post #112</div>
					<div class="post-author">wmxk007</div>
					<div class="post-datetime">
						22 Jun 2013, 02:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pepe2k wrote:</cite><blockquote><div class="quotebox"><cite>wmxk007 wrote:</cite><blockquote><p>Can it support for TL-MR11U ?</p></blockquote></div><p>Yes, it supports MR11U. I didn&#039;t make special profile for this model because it&#039;s almost the same hardware as MR3040 so just upload version for MR3040. I have tested version for MR3040 only on MR3040 v1.</p></blockquote></div><br/><p>After I test it, I find it does not seem to support the tp-link official firmware. Official firmware can help more easily&nbsp; connect to Internet via 3G Network in China.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205319">
				<div class="post-metadata">
					<div class="post-num">Post #113</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						22 Jun 2013, 12:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>wmxk007 wrote:</cite><blockquote><p>After I test it, I find it does not seem to support the tp-link official firmware. Official firmware can help more easily&nbsp; connect to Internet via 3G Network in China.</p></blockquote></div><p>It supports all firmware as long as they don&#039;t contain U-Boot. Probably you tried to upload firmware from TP-Link with U-Boot included in image. It won&#039;t work - you need to extract only the firmware from this kind of image. Only official firmware supports upgrade with image which contains U-Boot.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205320">
				<div class="post-metadata">
					<div class="post-num">Post #114</div>
					<div class="post-author">wmxk007</div>
					<div class="post-datetime">
						22 Jun 2013, 12:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pepe2k wrote:</cite><blockquote><div class="quotebox"><cite>wmxk007 wrote:</cite><blockquote><p>After I test it, I find it does not seem to support the tp-link official firmware. Official firmware can help more easily&nbsp; connect to Internet via 3G Network in China.</p></blockquote></div><p>It supports all firmware as long as they don&#039;t contain U-Boot. Probably you tried to upload firmware from TP-Link with U-Boot included in image. It won&#039;t work - you need to extract only the firmware from this kind of image. Only official firmware supports upgrade with image which contains U-Boot.</p></blockquote></div><p>Thanks you!<br/>I will do more try.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205367">
				<div class="post-metadata">
					<div class="post-num">Post #115</div>
					<div class="post-author">otlabs</div>
					<div class="post-datetime">
						23 Jun 2013, 00:45					</div>
				</div>
				<div class="post-content content">
					<p>I added info about pepe2k&#039;s U-Boot mod to following wiki pages:</p><p><a href="http://wiki.openwrt.org/toh/tp-link/tl-mr11u#bootloader.mods">http://wiki.openwrt.org/toh/tp-link/tl-mr11u#bootloader.mods</a><br/><a href="http://wiki.openwrt.org/toh/tp-link/tl-mr3020#bootloader.mods">http://wiki.openwrt.org/toh/tp-link/tl-mr3020#bootloader.mods</a><br/><a href="http://wiki.openwrt.org/toh/tp-link/tl-mr3040#bootloader.mods">http://wiki.openwrt.org/toh/tp-link/tl-mr3040#bootloader.mods</a><br/><a href="http://wiki.openwrt.org/toh/tp-link/tl-mr3420#bootloader.mods">http://wiki.openwrt.org/toh/tp-link/tl-mr3420#bootloader.mods</a><br/><a href="http://wiki.openwrt.org/toh/tp-link/tl-wr703n#bootloader.mods">http://wiki.openwrt.org/toh/tp-link/tl-wr703n#bootloader.mods</a><br/><a href="http://wiki.openwrt.org/toh/tp-link/tl-wr720n#bootloader.mods">http://wiki.openwrt.org/toh/tp-link/tl-wr720n#bootloader.mods</a><br/><a href="http://wiki.openwrt.org/toh/tp-link/tl-wr740n#bootloader.mods">http://wiki.openwrt.org/toh/tp-link/tl-wr740n#bootloader.mods</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205374">
				<div class="post-metadata">
					<div class="post-num">Post #116</div>
					<div class="post-author">kirschwasser</div>
					<div class="post-datetime">
						23 Jun 2013, 04:39					</div>
				</div>
				<div class="post-content content">
					<p>Don&#039;t mean to be rude, but why use uboot 1.1.4?</p><p>As you can see here: <a href="ftp://ftp.denx.de/pub/u-boot/">ftp://ftp.denx.de/pub/u-boot/</a> it&#039;s from 2005. (See also <a href="http://www.denx.de/wiki/U-Boot/ReleaseCycle)">http://www.denx.de/wiki/U-Boot/ReleaseCycle)</a></p><p>Why not base it on say u-boot-2013.04?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205399">
				<div class="post-metadata">
					<div class="post-num">Post #117</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						23 Jun 2013, 13:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>kirschwasser wrote:</cite><blockquote><p>Don&#039;t mean to be rude, but why use uboot 1.1.4?</p></blockquote></div><p>You should ask about this developers from TP-Link, not me. My modification is based on official TP-Link sources and they are using 1.1.4 version for all (or almost all) routers.</p><div class="quotebox"><cite>kirschwasser wrote:</cite><blockquote><p>As you can see here: <a href="ftp://ftp.denx.de/pub/u-boot/">ftp://ftp.denx.de/pub/u-boot/</a> it&#039;s from 2005. (See also <a href="http://www.denx.de/wiki/U-Boot/ReleaseCycle)">http://www.denx.de/wiki/U-Boot/ReleaseCycle)</a></p><p>Why not base it on say u-boot-2013.04?</p></blockquote></div><p>Why change something which works OK? Is something wrong with version 1.1.4?</p><p>I know that it is very old version, but I don&#039;t have time to move code into the newest version. Effort for this won&#039;t worth the results.</p><p>U-Boot is responsible only for hardware initialization and kernel start... so as long as it works, we don&#039;t need any new version. Probably, the same thoughts have developers from TP-Link <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink"/></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205501">
				<div class="post-metadata">
					<div class="post-num">Post #118</div>
					<div class="post-author">wmxk007</div>
					<div class="post-datetime">
						24 Jun 2013, 14:53					</div>
				</div>
				<div class="post-content content">
					<p>hello，pepe2k,</p><p>I write the uboot for tl-wr703n into WR11U by mistake. But the WR11U works fine. <br/>So what is the difference between the uboot for tl-wr703n and the uboot for tl-mr3040?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205502">
				<div class="post-metadata">
					<div class="post-num">Post #119</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						24 Jun 2013, 15:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>wmxk007 wrote:</cite><blockquote><p>hello，pepe2k,</p><p>I write the uboot for tl-wr703n into WR11U by mistake. But the WR11U works fine. <br/>So what is the difference between the uboot for tl-wr703n and the uboot for tl-mr3040?</p></blockquote></div><p>For all supported devices the only differences are GPIO numbers for LEDs, reset button and model name in bootlog. Other elements are the same (hardware initialization - PLL, network and so on). You can dive into sources and check Makefiles where I defined different devices.</p><p>In rare case there could be a problem if you upload wrong version which try to enable/disable GPIO which isn&#039;t connected to LED or button but... for example control power supply for DRAM chip, USB etc.</p><p>So, before anyone upload wrong version (for example to new device based on AR9331 which isn&#039;t officially supported in my modification), please check the GPIOs numbers and their roles.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205654">
				<div class="post-metadata">
					<div class="post-num">Post #120</div>
					<div class="post-author">kirschwasser</div>
					<div class="post-datetime">
						25 Jun 2013, 16:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pepe2k wrote:</cite><blockquote><div class="quotebox"><cite>kirschwasser wrote:</cite><blockquote><p>As you can see here: <a href="ftp://ftp.denx.de/pub/u-boot/">ftp://ftp.denx.de/pub/u-boot/</a> it&#039;s from 2005. (See also <a href="http://www.denx.de/wiki/U-Boot/ReleaseCycle)">http://www.denx.de/wiki/U-Boot/ReleaseCycle)</a></p><p>Why not base it on say u-boot-2013.04?</p></blockquote></div><p>Why change something which works OK? Is something wrong with version 1.1.4?</p><p>I know that it is very old version, but I don&#039;t have time to move code into the newest version. Effort for this won&#039;t worth the results.</p><p>U-Boot is responsible only for hardware initialization and kernel start... so as long as it works, we don&#039;t need any new version. Probably, the same thoughts have developers from TP-Link <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink"/></p></blockquote></div><p>All I see is that in contrast to e.g. opkg, uboot and the Linux kernel are being developed further and further and quite a pace. And yes, from time to time, elder hardware does profit from this development. The uboot-version for the Seagate Dockstar can even boot the entire operating system from a ext2-formated USB stick. While most of us probably do not require such a functionality in a bootloader for a small embedded router, I wonder, whether such a functionality would benefit development somehow.</p><p>The functionality is already there, for free. Well, almost for free, because for you (and others) to benefit from this ever going development, you would need to stop just forking things without even thinking about mainlining&nbsp; your work, and then base your work upon this fork even 7 years later. Then hope, that somebody will integrate this or parts of it, into mainline uboot/linux/coreboot/you-name-it</p><p>But you are right, it works. It can boot the operating system.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205662">
				<div class="post-metadata">
					<div class="post-num">Post #121</div>
					<div class="post-author">Jackson Zhang</div>
					<div class="post-datetime">
						25 Jun 2013, 17:41					</div>
				</div>
				<div class="post-content content">
					<p>703n uboot can work on 437.5 M,as follows:<br/>[&nbsp; &nbsp; 0.000000] Linux version 3.8.13 (openwrt@john) (gcc version 4.6.4 (OpenWrt/Linaro GCC 4.6-2012.12 r37008) ) #2 Mon Jun 24 00:05:07 CST 2013<br/>[&nbsp; &nbsp; 0.000000] MyLoader: sysp=865098c0, boardp=b1ee4134, parts=868e14b1<br/>[&nbsp; &nbsp; 0.000000] bootconsole [early0] enabled<br/>[&nbsp; &nbsp; 0.000000] CPU revision is: 00019374 (MIPS 24Kc)<br/>[&nbsp; &nbsp; 0.000000] SoC: Atheros AR9330 rev 1<br/>[&nbsp; &nbsp; 0.000000] Clocks: CPU:437.500MHz, DDR:437.500MHz, AHB:218.750MHz, Ref:25.000MHz<br/>[&nbsp; &nbsp; 0.000000] Determined physical RAM map:<br/>[&nbsp; &nbsp; 0.000000]&nbsp; memory: 04000000 @ 00000000 (usable)<br/>[&nbsp; &nbsp; 0.000000] Initrd not found or empty - disabling initrd<br/>[&nbsp; &nbsp; 0.000000] Zone ranges:<br/>[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal&nbsp; &nbsp;[mem 0x00000000-0x03ffffff]</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205755">
				<div class="post-metadata">
					<div class="post-num">Post #122</div>
					<div class="post-author">Jackson Zhang</div>
					<div class="post-datetime">
						26 Jun 2013, 20:00					</div>
				</div>
				<div class="post-content content">
					<p>[&nbsp; &nbsp; 0.000000] Linux version 3.8.13 (openwrt@john) (gcc version 4.6.4 (OpenWrt/Linaro GCC 4.6-2012.12 r37008) ) #2 Mon Jun 24 00:05:07 CST 2013<br/>[&nbsp; &nbsp; 0.000000] MyLoader: sysp=42e59069, boardp=36e20604, parts=2082ec52<br/>[&nbsp; &nbsp; 0.000000] bootconsole [early0] enabled<br/>[&nbsp; &nbsp; 0.000000] CPU revision is: 00019374 (MIPS 24Kc)<br/>[&nbsp; &nbsp; 0.000000] SoC: Atheros AR9330 rev 1<br/>[&nbsp; &nbsp; 0.000000] Clocks: CPU:512.500MHz, DDR:512.500MHz, AHB:256.250MHz, Ref:25.000MHz<br/>[&nbsp; &nbsp; 0.000000] Determined physical RAM map:</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205757">
				<div class="post-metadata">
					<div class="post-num">Post #123</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						26 Jun 2013, 20:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Jackson Zhang wrote:</cite><blockquote><p>[&nbsp; &nbsp; 0.000000] Linux version 3.8.13 (openwrt@john) (gcc version 4.6.4 (OpenWrt/Linaro GCC 4.6-2012.12 r37008) ) #2 Mon Jun 24 00:05:07 CST 2013<br/>[&nbsp; &nbsp; 0.000000] MyLoader: sysp=42e59069, boardp=36e20604, parts=2082ec52<br/>[&nbsp; &nbsp; 0.000000] bootconsole [early0] enabled<br/>[&nbsp; &nbsp; 0.000000] CPU revision is: 00019374 (MIPS 24Kc)<br/>[&nbsp; &nbsp; 0.000000] SoC: Atheros AR9330 rev 1<br/>[&nbsp; &nbsp; 0.000000] Clocks: CPU:512.500MHz, DDR:512.500MHz, AHB:256.250MHz, Ref:25.000MHz<br/>[&nbsp; &nbsp; 0.000000] Determined physical RAM map:</p></blockquote></div><p>You should make a lot of stability test if you want to use this platform on these frequencies... especially, you should run RAM (for example memtester) and USB (transfer data from pendrive over the network) tests.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205791">
				<div class="post-metadata">
					<div class="post-num">Post #124</div>
					<div class="post-author">fr4nk</div>
					<div class="post-datetime">
						27 Jun 2013, 03:02					</div>
				</div>
				<div class="post-content content">
					<p>Patch for 437-500 mhz</p><p>Use at you own risk!</p><p>Don&#039;t use this if you have no hardware flasher!</p><br/><br/><div class="codebox"><pre><code>--- u-boot/include/configs/ap121.h.orig    2013-06-12 21:39:45.000000000 +0200
+++ u-boot/include/configs/ap121.h    2013-06-27 01:29:12.276349858 +0200
@@ -182,7 +182,117 @@
 
     // CLOCK_DIVIDER = 2 (SPI clock = 212,5 / 6 ~ 35,4 MHz)
     #define AR7240_SPI_CONTROL        0x42
+    
+#elif (CFG_PLL_FREQ == CFG_PLL_437_437_218)
 
+    #define CFG_HZ                    (437500000/2)
+
+    // CPU_DIV = 1, RAM_DIV = 1, AHB_DIV = 2
+    #define CPU_CLK_CONTROL_VAL1    0x00018004
+    #define CPU_CLK_CONTROL_VAL2    0x00008000
+
+    // DIV_INT    = 35    (25 MHz * 35/2 = 437,5 MHz)
+    // REFDIV    = 1
+    // RANGE    = 0
+    // OUTDIV    = 1
+    #define CPU_PLL_CONFIG_VAL1        0x40818C00
+    #define CPU_PLL_CONFIG_VAL2        0x00818C00
+
+    // CLOCK_DIVIDER = 2 (SPI clock = 218,75 / 6 ~ 36,5 MHz)
+    #define AR7240_SPI_CONTROL        0x42    
+
+
+#elif (CFG_PLL_FREQ == CFG_PLL_450_450_225)
+
+    #define CFG_HZ                    (450000000/2)
+
+    // CPU_DIV = 1, RAM_DIV = 1, AHB_DIV = 2
+    #define CPU_CLK_CONTROL_VAL1    0x00018004
+    #define CPU_CLK_CONTROL_VAL2    0x00008000
+
+    // DIV_INT    = 36    (25 MHz * 36/2 = 450 MHz)
+    // REFDIV    = 1
+    // RANGE    = 0
+    // OUTDIV    = 1
+    #define CPU_PLL_CONFIG_VAL1        0x40819000
+    #define CPU_PLL_CONFIG_VAL2        0x00819000
+
+    // CLOCK_DIVIDER = 3 (SPI clock = 225 / 6 ~ 37,5 MHz)
+    #define AR7240_SPI_CONTROL        0x42
+    
+#elif (CFG_PLL_FREQ == CFG_PLL_462_462_231)
+
+    #define CFG_HZ                    (462500000/2)
+
+    // CPU_DIV = 1, RAM_DIV = 1, AHB_DIV = 2
+    #define CPU_CLK_CONTROL_VAL1    0x00018004
+    #define CPU_CLK_CONTROL_VAL2    0x00008000
+
+    // DIV_INT    = 37    (25 MHz * 37/2 = 462,5 MHz)
+    // REFDIV    = 1
+    // RANGE    = 0
+    // OUTDIV    = 1
+    #define CPU_PLL_CONFIG_VAL1        0x40819400
+    #define CPU_PLL_CONFIG_VAL2        0x00819400
+
+    // CLOCK_DIVIDER = 3 (SPI clock = 231,25 / 6 ~ 38,5 MHz)
+    #define AR7240_SPI_CONTROL        0x42
+    
+#elif (CFG_PLL_FREQ == CFG_PLL_475_475_237)
+
+    #define CFG_HZ                    (475000000/2)
+
+    // CPU_DIV = 1, RAM_DIV = 1, AHB_DIV = 2
+    #define CPU_CLK_CONTROL_VAL1    0x00018004
+    #define CPU_CLK_CONTROL_VAL2    0x00008000
+
+    // DIV_INT    = 38    (25 MHz * 38/2 = 475 MHz)
+    // REFDIV    = 1
+    // RANGE    = 0
+    // OUTDIV    = 1
+    #define CPU_PLL_CONFIG_VAL1        0x40819800
+    #define CPU_PLL_CONFIG_VAL2        0x00819800
+
+    // CLOCK_DIVIDER = 3 (SPI clock = 237,5 / 6 ~ 39,6 MHz)
+    #define AR7240_SPI_CONTROL        0x42    
+    
+#elif (CFG_PLL_FREQ == CFG_PLL_487_487_243)
+
+    #define CFG_HZ                    (487500000/2)
+
+    // CPU_DIV = 1, RAM_DIV = 1, AHB_DIV = 2
+    #define CPU_CLK_CONTROL_VAL1    0x00018004
+    #define CPU_CLK_CONTROL_VAL2    0x00008000
+
+    // DIV_INT    = 39    (25 MHz * 39/2 = 487,5 MHz)
+    // REFDIV    = 1
+    // RANGE    = 0
+    // OUTDIV    = 1
+    #define CPU_PLL_CONFIG_VAL1        0x40819C00
+    #define CPU_PLL_CONFIG_VAL2        0x00819C00
+
+    // CLOCK_DIVIDER = 3 (SPI clock = 243,75 / 8 ~ 30,5 MHz)
+    #define AR7240_SPI_CONTROL        0x43    
+    
+
+#elif (CFG_PLL_FREQ == CFG_PLL_500_500_250)
+
+    #define CFG_HZ                    (500000000/2)
+
+    // CPU_DIV = 1, RAM_DIV = 1, AHB_DIV = 2
+    #define CPU_CLK_CONTROL_VAL1    0x00018004
+    #define CPU_CLK_CONTROL_VAL2    0x00008000
+
+    // DIV_INT    = 40    (25 MHz * 40/2 = 500 MHz)
+    // REFDIV    = 1
+    // RANGE    = 0
+    // OUTDIV    = 1
+    #define CPU_PLL_CONFIG_VAL1        0x4081A000
+    #define CPU_PLL_CONFIG_VAL2        0x0081A000
+
+    // CLOCK_DIVIDER = 3 (SPI clock = 250 / 8 ~ 31,3 MHz)
+    #define AR7240_SPI_CONTROL        0x43
+    
 #elif (CFG_PLL_FREQ == CFG_PLL_500_250_250)
 
     #define CFG_HZ                    (500000000/2)</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p206836">
				<div class="post-metadata">
					<div class="post-num">Post #125</div>
					<div class="post-author">pupie</div>
					<div class="post-datetime">
						10 Jul 2013, 13:54					</div>
				</div>
				<div class="post-content content">
					<p>pepe2k,</p><p>Do you have any variables of FLASH SIZE defined in your code, so that I can compile you uboot for my hardware mod.</p><p>I want to replace factory 4M flash chip to 16M so that I have to re-compile your uboot code.</p><p>thanks.</p>									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 126 to 125 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 5 of 25</div><nav><ul><li><a href="viewtopic.php%3Fid=43237&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=43237&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=43237&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li><li><a href="viewtopic.php%3Fid=43237&amp;p=6.html">6</a></li><li><a href="viewtopic.php%3Fid=43237&amp;p=7.html">7</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=43237&amp;p=25.html">25</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>