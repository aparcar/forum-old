<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Huawei HG556a running openwrt 15.05.1 cannot connect.</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 10 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p344700">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">schiway</div>
					<div class="post-datetime">
						24 Nov 2016, 21:03					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I have a Huawei HG556a. I have been running openwrt 14.07 in it for a long time. but 14.07 is not a stable release for HG556a.<br />So recently I started to try 15.05.1 on it, but I got a very weird problem. I use Netgear WNDR3800 (factory firmware) as my home router, HG556a (running openwrt 15.05.1) as my second router. When I tried to connect HG556a to WNDR3800, I can see HG556a got an IP and good signal, but I just cannot visit any websites. </p><p>I couldn&#039;t figure out what the problem is here, several days already, really desperate, could someone point out a direction for me?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344701">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">nitroshift</div>
					<div class="post-datetime">
						24 Nov 2016, 21:17					</div>
				</div>
				<div class="post-content content">
					<p>You posted in the wrong section so I moved the thread where it belongs.</p><p>nitroshift</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344708">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						24 Nov 2016, 22:55					</div>
				</div>
				<div class="post-content content">
					<p>Can you post your configuration files here,&nbsp; please?<br />Can you resolve domain names? Can you ping sites by address?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344730">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">schiway</div>
					<div class="post-datetime">
						25 Nov 2016, 08:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>eduperez wrote:</cite><blockquote><p>Can you post your configuration files here,&nbsp; please?<br />Can you resolve domain names? Can you ping sites by address?</p></blockquote></div><p>which configuration file i should post here?<br />no, i cannot resolve domain names at all. nor cannot ping any sites.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344732">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						25 Nov 2016, 09:30					</div>
				</div>
				<div class="post-content content">
					<p>Post /etc/config/network here, please.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344740">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">schiway</div>
					<div class="post-datetime">
						25 Nov 2016, 10:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>eduperez wrote:</cite><blockquote><p>Post /etc/config/network here, please.</p></blockquote></div><div class="codebox"><pre><code>config interface &#039;loopback&#039;
    option ifname &#039;lo&#039;
    option proto &#039;static&#039;
    option ipaddr &#039;127.0.0.1&#039;
    option netmask &#039;255.0.0.0&#039;

config globals &#039;globals&#039;
    option ula_prefix &#039;fd1d:7b7e:9aa7::/48&#039;

config interface &#039;lan&#039;
    option ifname &#039;eth0.1&#039;
    option force_link &#039;1&#039;
    option type &#039;bridge&#039;
    option proto &#039;static&#039;
    option ipaddr &#039;192.168.1.1&#039;
    option netmask &#039;255.255.255.0&#039;
    option ip6assign &#039;60&#039;

config switch
    option name &#039;eth0&#039;
    option reset &#039;1&#039;
    option enable_vlan &#039;1&#039;

config switch_vlan
    option device &#039;eth0&#039;
    option vlan &#039;1&#039;
    option ports &#039;0 1 2 3 4 5t&#039;

config interface &#039;wwan&#039;
    option proto &#039;dhcp&#039;</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344755">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						25 Nov 2016, 13:52					</div>
				</div>
				<div class="post-content content">
					<p>I see you have configured this device as a wireless client. When you say you cannot resolve domain names or ping external addresses, did you try both from the router and the machines connected to it?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344757">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">schiway</div>
					<div class="post-datetime">
						25 Nov 2016, 14:32					</div>
				</div>
				<div class="post-content content">
					<p>yes, i have tried both.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344778">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">schiway</div>
					<div class="post-datetime">
						25 Nov 2016, 20:20					</div>
				</div>
				<div class="post-content content">
					<p>should i provide any other informations?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344793">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						25 Nov 2016, 23:08					</div>
				</div>
				<div class="post-content content">
					<p>Please, execute the following commands, and post the results here:<br /></p><div class="codebox"><pre><code>ip addr
ip route</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p345009">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">schiway</div>
					<div class="post-datetime">
						27 Nov 2016, 14:28					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>root@OpenWrt:~# ip addr
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 4c:54:99:d8:bc:cf brd ff:ff:ff:ff:ff:ff
    inet6 fe80::4e54:99ff:fed8:bccf/64 scope link 
       valid_lft forever preferred_lft forever
3: ifb0: &lt;BROADCAST,NOARP&gt; mtu 1500 qdisc noop state DOWN group default qlen 32
    link/ether ca:52:73:1f:54:80 brd ff:ff:ff:ff:ff:ff
4: ifb1: &lt;BROADCAST,NOARP&gt; mtu 1500 qdisc noop state DOWN group default qlen 32
    link/ether 1a:36:69:72:12:bc brd ff:ff:ff:ff:ff:ff
5: teql0: &lt;NOARP&gt; mtu 1500 qdisc noop state DOWN group default qlen 100
    link/void 
7: br-lan: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default 
    link/ether 4c:54:99:d8:bc:cf brd ff:ff:ff:ff:ff:ff
    inet 192.168.1.1/24 brd 192.168.1.255 scope global br-lan
       valid_lft forever preferred_lft forever
    inet6 fd1d:7b7e:9aa7::1/60 scope global noprefixroute 
       valid_lft forever preferred_lft forever
    inet6 fe80::4e54:99ff:fed8:bccf/64 scope link 
       valid_lft forever preferred_lft forever
8: eth0.1@eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master br-lan state UP group default 
    link/ether 4c:54:99:d8:bc:cf brd ff:ff:ff:ff:ff:ff
10: wlan0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000
    link/ether 4c:54:99:d8:bc:d0 brd ff:ff:ff:ff:ff:ff
    inet 192.168.1.141/24 brd 192.168.1.255 scope global wlan0
       valid_lft forever preferred_lft forever
    inet6 fe80::4e54:99ff:fed8:bcd0/64 scope link 
       valid_lft forever preferred_lft forever
root@OpenWrt:~# ip route
default via 192.168.1.1 dev wlan0  proto static  src 192.168.1.141 
192.168.1.0/24 dev br-lan  proto kernel  scope link  src 192.168.1.1 
192.168.1.0/24 dev wlan0  proto kernel  scope link  src 192.168.1.141 
192.168.1.1 dev wlan0  proto static  scope link  src 192.168.1.141 </code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p345026">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						27 Nov 2016, 17:23					</div>
				</div>
				<div class="post-content content">
					<p>The router&#039;s LAN IP is in the same subnet as the WAN IP given out by your 3800.&nbsp; This will not work.&nbsp; </p><p>Suggest changing lan option ipaddr to &#039;192.168.2.1&#039; (or anything outside of 192.168.1.X)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p345046">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">schiway</div>
					<div class="post-datetime">
						27 Nov 2016, 19:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mk24 wrote:</cite><blockquote><p>The router&#039;s LAN IP is in the same subnet as the WAN IP given out by your 3800.&nbsp; This will not work.&nbsp; </p><p>Suggest changing lan option ipaddr to &#039;192.168.2.1&#039; (or anything outside of 192.168.1.X)</p></blockquote></div><p>Thanks, it finally solved my problem!&nbsp; Thank you so much!</p><p>but out of curiosity,<br />1. I only have this problem when I use 15.05.1 (15.05 also), 14.07 doesn&#039;t have it. what changed?<br />2. before i started to using netgear wndr3800, I used an old model of TPLink, so can I avoid this problem by altering something in my wndr3800?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p345047">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						27 Nov 2016, 19:26					</div>
				</div>
				<div class="post-content content">
					<p>Yes another solution would have been to set your main router to something other than 192.168.1.x, and the problem would be resolved.&nbsp; I think that TP-Link stock firmware uses 0.x by default.</p>											<p class="post-edited">(Last edited by <strong>mk24</strong> on 27 Nov 2016, 19:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p345050">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">schiway</div>
					<div class="post-datetime">
						27 Nov 2016, 20:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mk24 wrote:</cite><blockquote><p>Yes another solution would have been to set your main router to something other than 192.168.1.x, and the problem would be resolved.&nbsp; I think that TP-Link stock firmware uses 0.x by default.</p></blockquote></div><p>Nope, all the TPlink models (sold in China) use 192.168.1.1 by default, that is why I am so confused.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>