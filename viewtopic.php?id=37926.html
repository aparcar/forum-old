<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> tp-link wr2543nd fail safe mode available?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 8 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p171765">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">jsorensen</div>
					<div class="post-datetime">
						7 Jul 2012, 11:22					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I bricked my old spare router so I ordered a TP-Link WR2543ND as it looked like the most uptodate hardware spec supported by OpenWRT.</p><p>I flashed OpenWRT onto it per the instructions and it came up fine.</p><p>Then I tried to put on my saved config file, and now it doesn&#039;t seem to like me anymore <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> I can&#039;t ping it or get in touch with it.</p><p>When I power cycle it, I get 3-4 pings through to 192.168.1.1 then nothing. I tried holding down the reset and also the other button on the router for a long time after power cycling, but it doesn&#039;t seem to bring me into failsafe mode.</p><p>Is failsafe mode supported on the WR2543ND and if so, any hints on how to get there?</p><p>Any help much appreciated!</p><p>Jes</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p171774">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jsorensen</div>
					<div class="post-datetime">
						7 Jul 2012, 12:29					</div>
				</div>
				<div class="post-content content">
					<p>Gotta love people who reply to their own posts, but It thought this trick might be interesting for others.</p><p>I managed to trick it into letting me into failsafe mode.</p><p>I connected the wan port to my LAN and configuring the network on my laptop to 192.168.1.2. Then just as I powered on the<br />router I would run telnet 192.168.1.1 so it managed to logon during the 3-4 pings I were seeing. This seemed to stop the boot<br />process from continuing and I was able to run &#039;mount_root&#039; and then &#039;firstboot&#039; and voila it was back to working!</p><p>Cheers,<br />Jes</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p179253">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">gesa07</div>
					<div class="post-datetime">
						24 Sep 2012, 21:50					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Could you please explain how did you connected the router to your LAN? Do&nbsp; you have another router? I tried to start my wr2543nd in safe mode by pressing the WPS button, without any success. I would try out your LAN method.</p><p>Thanks ahead</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p179262">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">jsorensen</div>
					<div class="post-datetime">
						24 Sep 2012, 22:41					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>It&#039;s been a little while, but I *think* what I did was I connected the WAN port to my LAN, made sure my computer was assigned a different IP address, and then as I powered it up, I typed &#039;telnet 192.168.1.1&#039; and managed to catch it.</p><p>If your LAN is already on 192.168.1.x, the easiest thing might be to simply plug a computer directly into the WAN port and set the IP address fixed to anything in the 192.168.1.x range.</p><p>Cheers,<br />Jes</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p179296">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">gesa07</div>
					<div class="post-datetime">
						25 Sep 2012, 08:03					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Unfortunatelly it is not working for me. <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /><br />could not open a connection to host on port 23. It seems I have to use serial cable to reflash it. <br />Thanks,<br />Geza</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p179313">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">jsorensen</div>
					<div class="post-datetime">
						25 Sep 2012, 11:50					</div>
				</div>
				<div class="post-content content">
					<p>Bummer - you have to get the timing right for the trick to work. One thing to try is simply to start pinging 192.168.1.1 before you reset it - that should show you if it even brings up the interface on 192.168.1.1 during the boot process or if it is completely bricked.</p><p>You can try the ping trick on both the WAN and LAN ports to see if either makes a difference.</p><p>Cheers,<br />Jes</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p179331">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">gesa07</div>
					<div class="post-datetime">
						25 Sep 2012, 16:22					</div>
				</div>
				<div class="post-content content">
					<p>Hi Jes,</p><p>I configured my IP to 192.168.1.2. In a command line I was pinging 192.168.1.1 with -t parameter. There was no success. <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> <br />I tried by clicking the WPS button button during the boot process as well without any success. I tried it on WAN and on LAN port as well. It seems my last chance is the JTAG cable.</p><p>Geza</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p179332">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">jsorensen</div>
					<div class="post-datetime">
						25 Sep 2012, 16:30					</div>
				</div>
				<div class="post-content content">
					<p>Sounds like you have it truly bricked then <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>Jes</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p179541">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">gesa07</div>
					<div class="post-datetime">
						27 Sep 2012, 12:21					</div>
				</div>
				<div class="post-content content">
					<p>HI,</p><p>Yes it was. I have found a debug engineer who unbricked it via serial cable and with some soldering. <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /> I don&#039;t know what he had to solder. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Here is the log file what he found during the booting porcess if somebody would like to analyze it. <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p>?U</p><p>U-Boot 1.1.4 (Sep 23 2011 - 14:18:45)</p><p>PB93 (ar7241 - Virian) U-boot<br />DRAM:<br />sri<br />ar7240_ddr_initial_config(132): virian ddr1 init<br />#### TAP VALUE 1 = 0x2, 2 = 0x2 [0xffffffff: 0xffffffff]<br />64 MB<br />id read 0x100000ff<br />flash size 8MB, sector count = 128<br />Flash:&nbsp; 8 MB<br />Using default environment</p><p>BOARD IS NOT CALIBRATED!!!<br />In:&nbsp; &nbsp; serial<br />Out:&nbsp; &nbsp;serial<br />Err:&nbsp; &nbsp;serial<br />Net:&nbsp; &nbsp;ag7240_enet_initialize...<br />No valid address in Flash. Using fixed address<br />: cfg1 0xf cfg2 0x7014</p><p>rtl8367_phy_setup SUCCESS!!!<br />eth0 up<br />eth0<br />Autobooting in 1 seconds<br />## Booting image at 9f020000 ...<br />&nbsp; &nbsp;Uncompressing Kernel Image ... OK</p><p>Starting kernel ...</p><p>[&nbsp; &nbsp; 0.000000] Linux version 3.3.8 (openwrt@callisto.lab.bufferbloat.net) (gcc version 4.6.3 20120201 (prerelease) (Linaro GCC 4.6-2012.02) ) #1 Fri Sep 21 02:58:52 EDT 2012<br />[&nbsp; &nbsp; 0.000000] bootconsole [early0] enabled<br />[&nbsp; &nbsp; 0.000000] CPU revision is: 00019374 (MIPS 24Kc)<br />[&nbsp; &nbsp; 0.000000] SoC: Atheros AR7242 rev 1<br />[&nbsp; &nbsp; 0.000000] Clocks: CPU:400.000MHz, DDR:400.000MHz, AHB:200.000MHz, Ref:5.000MHz<br />[&nbsp; &nbsp; 0.000000] Determined physical RAM map:<br />[&nbsp; &nbsp; 0.000000]&nbsp; memory: 04000000 @ 00000000 (usable)<br />[&nbsp; &nbsp; 0.000000] Initrd not found or empty - disabling initrd<br />[&nbsp; &nbsp; 0.000000] Zone PFN ranges:<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal&nbsp; &nbsp;0x00000000 -&gt; 0x00004000<br />[&nbsp; &nbsp; 0.000000] Movable zone start PFN for each node<br />[&nbsp; &nbsp; 0.000000] Early memory PFN ranges<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp; &nbsp;0: 0x00000000 -&gt; 0x00004000<br />[&nbsp; &nbsp; 0.000000] Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 16256<br />[&nbsp; &nbsp; 0.000000] Kernel command line:&nbsp; board=TL-WR2543N console=ttyS0,115200 rootfstype=squashfs,jffs2 noinitrd<br />[&nbsp; &nbsp; 0.000000] PID hash table entries: 256 (order: -2, 1024 bytes)<br />[&nbsp; &nbsp; 0.000000] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)<br />[&nbsp; &nbsp; 0.000000] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)<br />[&nbsp; &nbsp; 0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.<br />[&nbsp; &nbsp; 0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes<br />[&nbsp; &nbsp; 0.000000] Writing ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Readback ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Memory: 61436k/65536k available (2216k kernel code, 4100k reserved, 581k data, 208k init, 0k highmem)<br />[&nbsp; &nbsp; 0.000000] SLUB: Genslabs=9, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br />[&nbsp; &nbsp; 0.000000] NR_IRQS:51<br />[&nbsp; &nbsp; 0.000000] Calibrating delay loop... 265.42 BogoMIPS (lpj=1327104)<br />[&nbsp; &nbsp; 0.080000] pid_max: default: 32768 minimum: 301<br />[&nbsp; &nbsp; 0.080000] Mount-cache hash table entries: 512<br />[&nbsp; &nbsp; 0.090000] NET: Registered protocol family 16<br />[&nbsp; &nbsp; 0.090000] gpiochip_add: registered GPIOs 0 to 17 on device: ath79<br />[&nbsp; &nbsp; 0.100000] MIPS: machine is TP-LINK TL-WR2543N/ND<br />[&nbsp; &nbsp; 0.130000] registering PCI controller with io_map_base unset<br />[&nbsp; &nbsp; 0.340000] bio: create slab &lt;bio-0&gt; at 0<br />[&nbsp; &nbsp; 0.350000] PCI host bridge to bus 0000:00<br />[&nbsp; &nbsp; 0.350000] pci_bus 0000:00: root bus resource [mem 0x10000000-0x13ffffff]<br />[&nbsp; &nbsp; 0.360000] pci_bus 0000:00: root bus resource [io&nbsp; 0x0000]<br />[&nbsp; &nbsp; 0.360000] pci 0000:00:00.0: invalid calibration data<br />[&nbsp; &nbsp; 0.370000] pci 0000:00:00.0: BAR 0: assigned [mem 0x10000000-0x1001ffff 64bit]<br />[&nbsp; &nbsp; 0.370000] pci 0000:00:00.0: BAR 6: assigned [mem 0x10020000-0x1002ffff pref]<br />[&nbsp; &nbsp; 0.380000] pci 0000:00:00.0: using irq 40 for pin 1<br />[&nbsp; &nbsp; 0.380000] Switching to clocksource MIPS<br />[&nbsp; &nbsp; 0.390000] NET: Registered protocol family 2<br />[&nbsp; &nbsp; 0.390000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.400000] TCP established hash table entries: 2048 (order: 2, 16384 bytes)<br />[&nbsp; &nbsp; 0.410000] TCP bind hash table entries: 2048 (order: 1, 8192 bytes)<br />[&nbsp; &nbsp; 0.410000] TCP: Hash tables configured (established 2048 bind 2048)<br />[&nbsp; &nbsp; 0.420000] TCP reno registered<br />[&nbsp; &nbsp; 0.420000] UDP hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.430000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.440000] NET: Registered protocol family 1<br />[&nbsp; &nbsp; 0.460000] squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />[&nbsp; &nbsp; 0.460000] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.<br />[&nbsp; &nbsp; 0.480000] msgmni has been set to 119<br />[&nbsp; &nbsp; 0.480000] Block layer SCSI generic (bsg) driver version 0.4 loaded (major 254)<br />[&nbsp; &nbsp; 0.490000] io scheduler noop registered<br />[&nbsp; &nbsp; 0.490000] io scheduler deadline registered (default)<br />[&nbsp; &nbsp; 0.500000] Serial: 8250/16550 driver, 16 ports, IRQ sharing enabled<br />[&nbsp; &nbsp; 0.530000] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A<br />[&nbsp; &nbsp; 0.540000] console [ttyS0] enabled, bootconsole disabled<br />[&nbsp; &nbsp; 0.540000] console [ttyS0] enabled, bootconsole disabled<br />[&nbsp; &nbsp; 0.550000] m25p80 spi0.0: found s25sl064a, expected m25p80<br />[&nbsp; &nbsp; 0.560000] m25p80 spi0.0: s25sl064a (8192 Kbytes)<br />[&nbsp; &nbsp; 0.560000] 5 tp-link partitions found on MTD device spi0.0<br />[&nbsp; &nbsp; 0.570000] Creating 5 MTD partitions on &quot;spi0.0&quot;:<br />[&nbsp; &nbsp; 0.570000] 0x000000000000-0x000000020000 : &quot;u-boot&quot;<br />[&nbsp; &nbsp; 0.580000] 0x000000020000-0x000000120000 : &quot;kernel&quot;<br />[&nbsp; &nbsp; 0.590000] 0x000000120000-0x0000007f0000 : &quot;rootfs&quot;<br />[&nbsp; &nbsp; 0.590000] mtd: partition &quot;rootfs&quot; set to be root filesystem<br />[&nbsp; &nbsp; 0.600000] split_squashfs: no squashfs found in &quot;spi0.0&quot;<br />[&nbsp; &nbsp; 0.600000] 0x0000007f0000-0x000000800000 : &quot;art&quot;<br />[&nbsp; &nbsp; 0.610000] 0x000000020000-0x0000007f0000 : &quot;firmware&quot;<br />[&nbsp; &nbsp; 0.620000] rtl8367 rtl8367: using GPIO pins 1 (SDA) and 6 (SCK)<br />[&nbsp; &nbsp; 0.630000] rtl8367 rtl8367: RTL8367R ver. 0 chip found<br />[&nbsp; &nbsp; 2.530000] rtl8367: probed<br />[&nbsp; &nbsp; 2.530000] eth0: Atheros AG71xx at 0xb9000000, irq 4<br />[&nbsp; &nbsp; 3.090000] TCP cubic registered<br />[&nbsp; &nbsp; 3.090000] NET: Registered protocol family 17<br />[&nbsp; &nbsp; 3.090000] Bridge firewalling registered<br />[&nbsp; &nbsp; 3.100000] 8021q: 802.1Q VLAN Support v1.8<br />[&nbsp; &nbsp; 3.980000] JFFS2 notice: (1) jffs2_build_xattr_subsystem: complete building xattr subsystem, 0 of xdatum (0 unchecked, 0 orphan) and 0 of xref (0 dead, 0 orphan) found.<br />[&nbsp; &nbsp; 3.990000] VFS: Mounted root (jffs2 filesystem) readonly on device 31:2.<br />[&nbsp; &nbsp; 4.000000] Freeing unused kernel memory: 208k freed<br />/etc/preinit: .: line 35: can&#039;t open &#039;/lib/preinit/00_extroot.conf&#039;<br />[&nbsp; &nbsp; 5.010000] Kernel panic - not syncing: Attempted to kill init!</p><br /><p>Autoboot stopped:</p><p>U-Boot 1.1.4 (Sep 23 2011 - 14:18:45)</p><p>PB93 (ar7241 - Virian) U-boot<br />DRAM:<br />sri<br />ar7240_ddr_initial_config(132): virian ddr1 init<br />#### TAP VALUE 1 = 0x2, 2 = 0x2 [0xffffffff: 0xffffffff]<br />64 MB<br />id read 0x100000ff<br />flash size 8MB, sector count = 128<br />Flash:&nbsp; 8 MB<br />Using default environment</p><p>BOARD IS NOT CALIBRATED!!!<br />In:&nbsp; &nbsp; serial<br />Out:&nbsp; &nbsp;serial<br />Err:&nbsp; &nbsp;serial<br />Net:&nbsp; &nbsp;ag7240_enet_initialize...<br />No valid address in Flash. Using fixed address<br />: cfg1 0xf cfg2 0x7014<br />eth0: 00:03:7f:09:0b:ad<br />rtl8367_phy_setup SUCCESS!!!<br />eth0 up<br />eth0<br />Autobooting in 1 seconds<br />ar7240&gt;</p><p>Thanks your support.</p><p>Geza</p>											<p class="post-edited">(Last edited by <strong>gesa07</strong> on 27 Sep 2012, 12:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p188727">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">gsezen</div>
					<div class="post-datetime">
						13 Jan 2013, 01:07					</div>
				</div>
				<div class="post-content content">
					<p>TP-Link TL-WR2543ND Openwrt Failsafe Mode</p><p><a href="http://www.youtube.com/watch?v=xJNWzlInzn8">http://www.youtube.com/watch?v=xJNWzlInzn8</a></p>											<p class="post-edited">(Last edited by <strong>gsezen</strong> on 13 Jan 2013, 01:08)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>