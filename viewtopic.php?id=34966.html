<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TP-Link WR2543ND (hw v1.2) running r30639</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 23 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p158462">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">uqbar</div>
					<div class="post-datetime">
						23 Feb 2012, 16:50					</div>
				</div>
				<div class="post-content content">
					<p>It&#039;s working with no special procedures (apart of the fact that trunk builds are lacking the web UI)!</p><p>A few very initial feedbacks are <a href="https://forum.openwrt.org/viewtopic.php?pid=158458#p158458">here</a><br />WiFi g+n is actually working: my device doesn&#039;t recognize 40 MHz&nbsp; channels. By setting 20 MHz channels I&#039;ve been able to connect.<br />Also USB seems to be working, at least with storage.<br />So far only the WiFi LEDs seems to me to be missing.<br />This is the boot log:</p><div class="codebox"><pre><code>[    0.000000] Linux version 3.2.5 (openwrt@OpenWRTBuild) (gcc version 4.6.3 20120201 (prerelease) (Linaro GCC 4.6-2012.02) ) #1 Sun Feb 19 11:10:16 MST 201
2
[    0.000000] MyLoader: sysp=00000000, boardp=00000000, parts=00000000
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU revision is: 00019374 (MIPS 24Kc)
[    0.000000] SoC: Atheros AR7242 rev 1
[    0.000000] Clocks: CPU:400.000MHz, DDR:400.000MHz, AHB:200.000MHz, Ref:5.000MHz
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 04000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone PFN ranges:
[    0.000000]   Normal   0x00000000 -&gt; 0x00004000
[    0.000000] Movable zone start PFN for each node
[    0.000000] early_node_map[1] active PFN ranges
[    0.000000]     0: 0x00000000 -&gt; 0x00004000
[    0.000000] On node 0 totalpages: 16384
[    0.000000] free_area_init_node: node 0, pgdat 802e0cf0, node_mem_map 81000000
[    0.000000]   Normal zone: 128 pages used for memmap
[    0.000000]   Normal zone: 0 pages reserved
[    0.000000]   Normal zone: 16256 pages, LIFO batch:3
[    0.000000] pcpu-alloc: s0 r0 d32768 u32768 alloc=1*32768
[    0.000000] pcpu-alloc: [0] 0 
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
[    0.000000] Kernel command line:  board=TL-WR2543N console=ttyS0,115200 rootfstype=squashfs,jffs2 noinitrd
[    0.000000] PID hash table entries: 256 (order: -2, 1024 bytes)
[    0.000000] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
[    0.000000] Writing ErrCtl register=00000000
[    0.000000] Readback ErrCtl register=00000000
[    0.000000] Memory: 61684k/65536k available (2165k kernel code, 3852k reserved, 399k data, 196k init, 0k highmem)
[    0.000000] SLUB: Genslabs=9, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.000000] NR_IRQS:48
[    0.000000] Calibrating delay loop... 265.42 BogoMIPS (lpj=1327104)
[    0.080000] pid_max: default: 32768 minimum: 301
[    0.080000] Mount-cache hash table entries: 512
[    0.090000] NET: Registered protocol family 16
[    0.090000] MIPS: machine is TP-LINK TL-WR2543N/ND
[    0.130000] registering PCI controller with io_map_base unset
[    0.340000] bio: create slab &lt;bio-0&gt; at 0
[    0.350000] pci 0000:00:00.0: [168c:0030] type 0 class 0x000280
[    0.350000] pci 0000:00:00.0: invalid calibration data
[    0.350000] pci 0000:00:00.0: reg 10: [mem 0x00000000-0x0001ffff 64bit]
[    0.350000] pci 0000:00:00.0: reg 30: [mem 0x00000000-0x0000ffff pref]
[    0.350000] pci 0000:00:00.0: supports D1
[    0.350000] pci 0000:00:00.0: PME# supported from D0 D1 D3hot
[    0.350000] pci 0000:00:00.0: PME# disabled
[    0.350000] pci 0000:00:00.0: BAR 0: assigned [mem 0x10000000-0x1001ffff 64bit]
[    0.360000] pci 0000:00:00.0: BAR 0: set to [mem 0x10000000-0x1001ffff 64bit] (PCI address [0x10000000-0x1001ffff])
[    0.370000] pci 0000:00:00.0: BAR 6: assigned [mem 0x10020000-0x1002ffff pref]
[    0.370000] pci 0000:00:00.0: using irq 40 for pin 1
[    0.380000] Switching to clocksource MIPS
[    0.380000] NET: Registered protocol family 2
[    0.390000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.390000] TCP established hash table entries: 2048 (order: 2, 16384 bytes)
[    0.400000] TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
[    0.400000] TCP: Hash tables configured (established 2048 bind 2048)
[    0.410000] TCP reno registered
[    0.410000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.420000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.430000] NET: Registered protocol family 1
[    0.430000] PCI: CLS 0 bytes, default 32
[    0.450000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.460000] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.470000] msgmni has been set to 120
[    0.470000] io scheduler noop registered
[    0.480000] io scheduler deadline registered (default)
[    0.480000] Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
[    0.510000] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A
[    0.520000] console [ttyS0] enabled, bootconsole disabled
[    0.530000] m25p80 spi0.0: found s25sl064a, expected m25p80
[    0.540000] m25p80 spi0.0: max_read_len set to 64 bytes
[    0.540000] m25p80 spi0.0: s25sl064a (8192 Kbytes)
[    0.550000] 5 tp-link partitions found on MTD device spi0.0
[    0.560000] Creating 5 MTD partitions on &quot;spi0.0&quot;:
[    0.560000] 0x000000000000-0x000000020000 : &quot;u-boot&quot;
[    0.570000] 0x000000020000-0x000000103ec4 : &quot;kernel&quot;
[    0.570000] mtd: partition &quot;kernel&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
[    0.590000] 0x000000103ec4-0x0000007f0000 : &quot;rootfs&quot;
[    0.590000] mtd: partition &quot;rootfs&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
[    0.610000] mtd: partition &quot;rootfs&quot; set to be root filesystem
[    0.610000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=270000, len=580000 
[    0.620000] 0x000000270000-0x0000007f0000 : &quot;rootfs_data&quot;
[    0.630000] 0x0000007f0000-0x000000800000 : &quot;art&quot;
[    0.630000] 0x000000020000-0x0000007f0000 : &quot;firmware&quot;
[    0.650000] rtl8367 rtl8367: using GPIO pins 1 (SDA) and 6 (SCK)
[    0.650000] rtl8367 rtl8367: RTL8367R ver. 0 chip found
[    2.550000] rtl8367: probed
[    2.550000] eth0: Atheros AG71xx at 0xb9000000, irq 4
[    3.110000] TCP westwood registered
[    3.110000] NET: Registered protocol family 17
[    3.120000] Bridge firewalling registered
[    3.120000] 8021q: 802.1Q VLAN Support v1.8
[    3.150000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
[    3.160000] Freeing unused kernel memory: 196k freed
[    6.610000] input: gpio-keys-polled as /devices/platform/gpio-keys-polled/input/input0
[    6.960000] Button Hotplug driver version 0.4.1
[    7.000000] eth0: link up (1000Mbps/Full duplex)
[    7.030000] Registered led device: tp-link:green:usb
[    7.030000] Registered led device: tp-link:green:wps
...</code></pre></div><p>This is /proc/cpuinfo<br /></p><div class="codebox"><pre><code>system type             : Atheros AR7242 rev 1
machine                 : TP-LINK TL-WR2543N/ND
processor               : 0
cpu model               : MIPS 24Kc V7.4
BogoMIPS                : 265.42
wait instruction        : yes
microsecond timers      : yes
tlb_entries             : 16
extra interrupt vector  : yes
hardware watchpoint     : yes, count: 4, address/irw mask: [0x0000, 0x0ff8, 0x0ff8, 0x0ff8]
ASEs implemented        : mips16
shadow register sets    : 1
kscratch registers      : 0
core                    : 0
VCED exceptions         : not available
VCEI exceptions         : not available</code></pre></div><p>And this is the motd:</p><div class="codebox"><pre><code>BusyBox v1.19.3 (2012-02-18 23:34:43 MST) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 ATTITUDE ADJUSTMENT (bleeding edge, r30639) ----------
  * 1/4 oz Vodka      Pour all ingredients into mixing
  * 1/4 oz Gin        tin with ice, strain into glass.
  * 1/4 oz Amaretto
  * 1/4 oz Triple sec
  * 1/4 oz Peach schnapps
  * 1/4 oz Sour mix
  * 1 splash Cranberry juice
 -----------------------------------------------------</code></pre></div><p>Anyone else testing this device?</p>											<p class="post-edited">(Last edited by <strong>uqbar</strong> on 23 Feb 2012, 17:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158910">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">uqbar</div>
					<div class="post-datetime">
						27 Feb 2012, 18:08					</div>
				</div>
				<div class="post-content content">
					<p>WiFi led still not working as of r30728 (2012.02.27)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p159686">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">uqbar</div>
					<div class="post-datetime">
						5 Mar 2012, 08:53					</div>
				</div>
				<div class="post-content content">
					<p>Everything but Wifi led is OK with r30753 (2012.02.29).<br />There seems to be no &quot;tp-link:green:wlan&quot; item in the /sys virtual fs.</p>											<p class="post-edited">(Last edited by <strong>uqbar</strong> on 5 Mar 2012, 08:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p160549">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">uqbar</div>
					<div class="post-datetime">
						12 Mar 2012, 15:18					</div>
				</div>
				<div class="post-content content">
					<p>Also for r30857 (2012.03.10) the only missing thing are the WiFi leds.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p164518">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">j8soot</div>
					<div class="post-datetime">
						14 Apr 2012, 22:17					</div>
				</div>
				<div class="post-content content">
					<p>I installed a self-compiled OpenWRT trunk (r31285) on this device today [s]and for me 40 MHz isn&#039;t working either[/s]. Do you know if there is any progress with the wireless LEDs?</p>											<p class="post-edited">(Last edited by <strong>j8soot</strong> on 15 Apr 2012, 06:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p164541">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">j8soot</div>
					<div class="post-datetime">
						15 Apr 2012, 06:02					</div>
				</div>
				<div class="post-content content">
					<p>Actually 40MHz is working fine at 5GHz:<br /></p><div class="codebox"><pre><code>config wifi-device &#039;radio0&#039;
    option type &#039;mac80211&#039;
        option macaddr &#039;aa:bb:cc:dd:ee:ff&#039;
        list ht_capab &#039;LDPC&#039;
        list ht_capab &#039;SHORT-GI-20&#039;
        list ht_capab &#039;SHORT-GI-40&#039;
        list ht_capab &#039;TX-STBC&#039;
        list ht_capab &#039;RX-STBC1&#039;
        list ht_capab &#039;DSSS_CCK-40&#039;
        option channel &#039;36&#039;
        option txpower &#039;20&#039;
        option hwmode &#039;11na&#039;
        option htmode &#039;HT40+&#039;
        option country &#039;GB&#039;

config wifi-iface
    option device &#039;radio0&#039;
    option network &#039;lan&#039;
    option mode &#039;ap&#039;
    option ssid &#039;wr2543nd&#039;
    option encryption &#039;psk2&#039;
    option key &#039;password&#039;</code></pre></div><p>I used LuCI to reconfigure the wireless from the 2.4GHz defaults to 5GHz and 40MHz. It did option hwmode &#039;11na&#039; and 40MHz worked whereas before I had manually configured with option hwmode &#039;11an&#039;.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p164734">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">uqbar</div>
					<div class="post-datetime">
						17 Apr 2012, 08:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>j8soot wrote:</cite><blockquote><p>Do you know if there is any progress with the wireless LEDs?</p></blockquote></div><p>None up to trunk build &quot;r31291&quot;.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p166127">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">uqbar</div>
					<div class="post-datetime">
						30 Apr 2012, 10:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>j8soot wrote:</cite><blockquote><p>Do you know if there is any progress with the wireless LEDs?</p></blockquote></div><p>None as of Bleeding Edge, <strong>r31506 (2012.04.29)</strong>:</p><div class="codebox"><pre><code># ls -l /sys/devices/platform/leds-gpio/leds/
drwxr-xr-x    2 root     root             0 Jan  1  1970 tp-link:green:usb
drwxr-xr-x    2 root     root             0 Jan  1  1970 tp-link:green:wps</code></pre></div><p>Moreover, the LuCI web UI reports also a ath9k-phy0 which seems to be unresponsive to any led configuration.<br />Everything else seems to be working, but I have not checked all the features.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p172055">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">uqbar</div>
					<div class="post-datetime">
						11 Jul 2012, 17:44					</div>
				</div>
				<div class="post-content content">
					<p>LEDs are working at least with r32656 (2012.07.11).<br />I haven&#039;t tested with earlier trunk releases.<br />What I have done is:</p><p>1. Go to System-&gt;LED Configuration<br />2. Create a LED profile like this:<br />2.1 Name: WIFI<br />2.2 LED Name: ath9k-phy0<br />2.3 Default State: uchecked<br />2.4 Trigger: netdev<br />2.5 Device: wlan0<br />2.6 Trigger mode: your choice (I&#039;ve checked all three options)<br />2.7 Save&amp;Apply</p><p>I have no 802.11a device to check the second wireless led. Anyone doing it?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>