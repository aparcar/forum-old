<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Mikrotik crs125 boot from the net can&#039;t recognize the nand flash</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 2 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p369778">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">iextract</div>
					<div class="post-datetime">
						19 Dec 2017, 12:30					</div>
				</div>
				<div class="post-content content">
					<p>hello,i&#039;d like to boot from the net into the crs125,but i find the kernel can&#039;t detect the nand flash when boooting.<br /></p><div class="codebox"><pre><code>[    0.000000] Linux version 3.10.49 (root@ubuntu) (gcc version 4.8.3 (OpenWrt/Linaro GCC 4.8-2014.04 r48549) ) #2 Mon Dec 18 23:35:02 PST 2017
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU revision is: 0001974c (MIPS 74Kc)
[    0.000000] SoC: Atheros AR9344 rev 3
[    0.000000] Clocks: CPU:600.000MHz, DDR:400.000MHz, AHB:400.000MHz, Ref:25.000MHz
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 08000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone ranges:
[    0.000000]   Normal   [mem 0x00000000-0x07ffffff]
[    0.000000] Movable zone start for each node
[    0.000000] Early memory node ranges
[    0.000000]   node   0: [mem 0x00000000-0x07ffffff]
[    0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 32512
[    0.000000] Kernel command line: console=ttyS0,115200 root=/dev/mtdblock2 rootfstype=squashfs,yaffs noinitrd rootfstype=yaffs noinitrd
[    0.000000] PID hash table entries: 512 (order: -1, 2048 bytes)
[    0.000000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)
[    0.000000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Writing ErrCtl register=00000000
[    0.000000] Readback ErrCtl register=00000000
[    0.000000] Memory: 124524k/131072k available (2202k kernel code, 6548k reserved, 618k data, 1976k init, 0k highmem)
[    0.000000] SLUB: HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.000000] NR_IRQS:51
[    0.000000] Calibrating delay loop... 299.82 BogoMIPS (lpj=1499136)
[    0.070000] pid_max: default: 32768 minimum: 301
[    0.070000] Mount-cache hash table entries: 512
[    0.080000] NET: Registered protocol family 16
[    0.090000] MIPS: machine is Generic AR71XX/AR724X/AR913X based board
[    0.100000] bio: create slab &lt;bio-0&gt; at 0
[    0.110000] Switching to clocksource MIPS
[    0.120000] NET: Registered protocol family 2
[    0.120000] TCP established hash table entries: 1024 (order: 1, 8192 bytes)
[    0.120000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
[    0.130000] TCP: Hash tables configured (established 1024 bind 1024)
[    0.130000] TCP: reno registered
[    0.140000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.140000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.150000] NET: Registered protocol family 1
[    2.280000] msgmni has been set to 243
[    2.280000] io scheduler noop registered
[    2.280000] io scheduler deadline registered (default)
[    2.290000] Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
[    2.320000] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A
[    2.320000] console [ttyS0] enabled, bootconsole disabled
[    2.320000] console [ttyS0] enabled, bootconsole disabled
[    2.350000] TCP: cubic registered
[    2.350000] NET: Registered protocol family 17
[    2.350000] 8021q: 802.1Q VLAN Support v1.8
[    2.370000] Freeing unused kernel memory: 1976K (80322000 - 80510000)
procd: Console is alive
procd: - watchdog -
[    2.410000] usbcore: registered new interface driver usbfs
[    2.410000] usbcore: registered new interface driver hub
[    2.420000] usbcore: registered new device driver usb
[    2.430000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[    2.440000] ehci-platform: EHCI generic platform driver
[    2.440000] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
procd: - preinit -
Press the [f] key and hit [enter] to enter failsafe mode
Press the [1], [2], [3] or [4] key and hit [enter] to select the debug level
procd: - early -
procd: - watchdog -
procd: - ubus -
procd: - init -
Please press Enter to activate this console.
[    6.740000] NET: Registered protocol family 10
[    6.750000] nf_conntrack version 0.5.0 (1976 buckets, 7904 max)
[    6.770000] ip6_tables: (C) 2000-2006 Netfilter Core Team
[    6.780000] Loading modules backported from Linux version master-2014-05-22-0-gf2032ea
[    6.790000] Backport generated by backports.git backports-20140320-37-g5c33da0
[    6.800000] ip_tables: (C) 2000-2006 Netfilter Core Team
[    6.840000] xt_time: kernel timezone is -0000
[    6.870000] cfg80211: Calling CRDA to update world regulatory domain
[    6.870000] cfg80211: World regulatory domain updated:
[    6.880000] cfg80211:  DFS Master region: unset
[    6.880000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (dfs_cac_time)
[    6.890000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
[    6.900000] cfg80211:   (2457000 KHz - 2482000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
[    6.910000] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (N/A, 2000 mBm), (N/A)
[    6.920000] cfg80211:   (5170000 KHz - 5250000 KHz @ 160000 KHz), (N/A, 2000 mBm), (N/A)
[    6.930000] cfg80211:   (5250000 KHz - 5330000 KHz @ 160000 KHz), (N/A, 2000 mBm), (0 s)
[    6.930000] cfg80211:   (5490000 KHz - 5730000 KHz @ 160000 KHz), (N/A, 2000 mBm), (0 s)
[    6.940000] cfg80211:   (5735000 KHz - 5835000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)
[    6.950000] cfg80211:   (57240000 KHz - 63720000 KHz @ 2160000 KHz), (N/A, 0 mBm), (N/A)
[    7.010000] PPP generic driver version 2.4.2
[    7.020000] NET: Registered protocol family 24
procd: - init complete -



BusyBox v1.22.1 (2017-12-18 23:31:07 PST) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 -----------------------------------------------------
 BARRIER BREAKER (Barrier Breaker, r48549)
 -----------------------------------------------------
  * 1/2 oz Galliano         Pour all ingredients into
  * 4 oz cold Coffee        an irish coffee mug filled
  * 1 1/2 oz Dark Rum       with crushed ice. Stir.
  * 2 tsp. Creme de Cacao
 -----------------------------------------------------</code></pre></div><p>Does this mean that i&#039;ve to add nand driver into the kernel manually?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p369879">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Antek</div>
					<div class="post-datetime">
						21 Dec 2017, 16:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>iextract wrote:</cite><blockquote><p>hello,i&#039;d like to boot from the net into the crs125,but i find the kernel can&#039;t detect the nand flash when boooting.<br /></p><div class="codebox"><pre><code>[    0.000000] Kernel command line: console=ttyS0,115200 --&gt; root=/dev/mtdblock2 &lt;-- rootfstype=squashfs,yaffs noinitrd rootfstype=yaffs noinitrd</code></pre></div></blockquote></div><p>To me, it seems the mtd subsystem is working already behind the scenes, as the root filesystem gets mounted correctly during the boot. Perhaps you are supplying the mtd specifics through a device tree blob, or they are somehow compiled in into the kernel image, and as a consequence the mtd enumeration information is just not shown?</p><p>How did you determine that the mtd subsystem was not working?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>