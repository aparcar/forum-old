<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Problem with settin up wifi</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 4 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p129602">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Feasuro</div>
					<div class="post-datetime">
						27 Feb 2011, 17:57					</div>
				</div>
				<div class="post-content content">
					<p>Hello, I just installed OpenWRT on my router ASUS WL-500W. I downloaded image from: <a href="http://downloads.openwrt.org/backfire/10.03/brcm-2.4/openwrt-brcm-2.4-squashfs.trx">http://downloads.openwrt.org/backfire/1 â€¦ uashfs.trx</a><br />And now after installation i cannot turn wifi on.<br /></p><div class="codebox"><pre><code># wifi up
No Broadcom wl interface found!
No Broadcom wl interface found!
No Broadcom wl interface found!
ifconfig: SIOCSIFADDR: No such device
No Broadcom wl interface found!</code></pre></div><p>Command </p><div class="codebox"><pre><code>#wifi detect</code></pre></div><p>doesnt&#039; show anything.<br />and here&#039;s my conf file:<br /></p><div class="codebox"><pre><code># cat wireless

config &#039;wifi-device&#039; &#039;wl0&#039;
        option &#039;disabled&#039; &#039;0&#039;
        option &#039;type&#039; &#039;broadcom&#039;
        option &#039;channel&#039; &#039;auto&#039;
        option &#039;macfilter&#039; &#039;allow&#039;
        list &#039;maclist&#039; &#039;00:23:4E:79:97:11&#039;

config &#039;wifi-iface&#039;
        option &#039;device&#039; &#039;wl0&#039;
        option &#039;network&#039; &#039;lan&#039;
        option &#039;mode&#039; &#039;ap&#039;
        option &#039;ssid&#039; &#039;Alkoholandia&#039;
        option &#039;encryption&#039; &#039;psk2&#039;
        option &#039;key&#039; &#039;CV123klo&#039;</code></pre></div><p>I&#039;ve read some howtos but have found no info about similar problem... can somebody tell me if I should install any additional packages or something?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p129665">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Feasuro</div>
					<div class="post-datetime">
						28 Feb 2011, 14:53					</div>
				</div>
				<div class="post-content content">
					<p>Just found a solution. Had to replace kernel driver module because my model (ASUS WL-500W) has MIMO radio.<br /></p><div class="codebox"><pre><code>#opkg remove kmod-brcm-wl
#opkg install kmod-brcm-wl-mimo</code></pre></div>											<p class="post-edited">(Last edited by <strong>Feasuro</strong> on 28 Feb 2011, 14:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p130257">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">dddesign</div>
					<div class="post-datetime">
						9 Mar 2011, 15:17					</div>
				</div>
				<div class="post-content content">
					<p>I have also replaced wl by wl-mimo and wireless is running without encryption. but with encryption (wep or psk or psk2) it&#039;s not working. how did you manage this?</p><p>(on my wl-500w is backfire 10.03)</p>											<p class="post-edited">(Last edited by <strong>dddesign</strong> on 9 Mar 2011, 15:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p130262">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">flux</div>
					<div class="post-datetime">
						9 Mar 2011, 16:29					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dddesign wrote:</cite><blockquote><p>I have also replaced wl by wl-mimo and wireless is running without encryption. but with encryption (wep or psk or psk2) it&#039;s not working. how did you manage this?</p></blockquote></div><p>i managed this by selling all broadcom based hardware</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p130384">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">dddesign</div>
					<div class="post-datetime">
						10 Mar 2011, 18:12					</div>
				</div>
				<div class="post-content content">
					<p>any other ideas?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p130389">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">zorxd</div>
					<div class="post-datetime">
						10 Mar 2011, 18:43					</div>
				</div>
				<div class="post-content content">
					<p>psk2 encryption working fine on a WL-500W with KAMIKAZE (8.09.1, r16921)</p><p>config &#039;wifi-device&#039; &#039;wl0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;type&#039; &#039;broadcom&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;channel&#039; &#039;1&#039;</p><p>config &#039;wifi-iface&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;device&#039; &#039;wl0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;network&#039; &#039;lan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;mode&#039; &#039;ap&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;encryption&#039; &#039;psk2&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;key&#039; &#039;password&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ssid&#039; &#039;something&#039;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132256">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">dddesign</div>
					<div class="post-datetime">
						4 Apr 2011, 01:01					</div>
				</div>
				<div class="post-content content">
					<p>after some weeks I get on this topic/problem again, I didn&#039;t solved it till now.</p><p>here my settings for network:<br /></p><div class="codebox"><pre><code>#### VLAN configuration                                                                                                   
config switch eth0                                                                                                        
        option enable   1                                                                                                 
                                                                                                                          
config switch_vlan eth0_0                                                                                                 
        option device   &quot;eth0&quot;                                                                                            
        option vlan     0                                                                                                 
        option ports    &quot;0 1 2 3 4 5u&quot;                                                                                    
                                                                                                                          
#### Loopback configuration                                                                                               
config interface loopback                                                                                                 
        option ifname   &quot;lo&quot;                                                                                              
        option proto    static                                                                                            
        option ipaddr   127.0.0.1                                                                                         
        option netmask  255.0.0.0                                                                                         
                                                                                                                          
                                                                                                                          
#### LAN configuration                                                                                                    
config interface lan                                                                                                      
        option type     bridge                                                                                            
        option ifname   &quot;eth0&quot;                                                                                            
        option proto    static                                                                                            
        option ipaddr   192.168.2.1                                                                                       
        option netmask  255.255.255.0                                                                                     
                                                                                                                          
                                                                                                                          
#### WAN configuration                                                                                                    
config interface        wan                                                                                               
        option ifname   &quot;eth1&quot;                                                                                            
        option proto    dhcp</code></pre></div><p>here my settings for wireless:<br /></p><div class="codebox"><pre><code>config &#039;wifi-device&#039; &#039;wl0&#039;
        option &#039;type&#039; &#039;broadcom&#039;
        option &#039;channel&#039; &#039;10&#039;
        option &#039;disabled&#039; &#039;0&#039;

config &#039;wifi-iface&#039;
        option &#039;device&#039; &#039;wl0&#039;
        option &#039;network&#039; &#039;lan&#039;
        option &#039;mode&#039; &#039;ap&#039;
        option &#039;ssid&#039; &#039;openwrt&#039;
        option &#039;encryption&#039; &#039;PSK+AES&#039;
        option &#039;key&#039; &#039;testpw&#039;</code></pre></div><p>so:<br />root@OpenWrt:/etc/config# wifi<br />Command &#039;set rxant&#039; failed: -1<br />root@OpenWrt:/etc/config# iwconfig<br />lo&nbsp; &nbsp; &nbsp; &nbsp; no wireless extensions.</p><p>eth0&nbsp; &nbsp; &nbsp; no wireless extensions.</p><p>eth1&nbsp; &nbsp; &nbsp; no wireless extensions.</p><p>br-lan&nbsp; &nbsp; no wireless extensions.</p><p>wl0&nbsp; &nbsp; &nbsp; &nbsp;IEEE 802.11-DS&nbsp; ESSID:&quot;openwrt&quot;&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Mode:Master&nbsp; Frequency:2.457 GHz&nbsp; Access Point: 00:18:F3:D9:F1:0B&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Bit Rate=54 Mb/s&nbsp; &nbsp;Tx-Power:32 dBm&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RTS thr:off&nbsp; &nbsp;Fragment thr:off<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Link Quality:5&nbsp; Signal level:0&nbsp; Noise level:166<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rx invalid nwid:0&nbsp; Rx invalid crypt:0&nbsp; Rx invalid frag:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Tx excessive retries:0&nbsp; Invalid misc:0&nbsp; &nbsp;Missed beacon:0</p><p>so still no encryption. but I see a nas process:<br />&nbsp; 992 root&nbsp; &nbsp; &nbsp; &nbsp;888 S&nbsp; &nbsp; /usr/sbin/nas -P /var/run/nas.wl0.pid -H 34954 -l br-</p><p>1. question:<br />by start wifi there is also a nas-process started with nvram wl0_* variables. but if I check my nvram there are no ones (see below). why? <br /></p><div class="codebox"><pre><code>wl0_bss_enabled=1
wl0_nbw_cap=1
wl0_nmode_protection=off
wl_afterburner=off
wl_akm=
wl_antdiv=-1
wl_ap_isolate=0
wl_auth=0
wl_auth_mode=open
wl_bcn=100
wl_bss_enabled=1
wl_chan_list=1 2 3 4 5 6 7 8 9 10 11 12 13
wl_channel=0
wl_closed=0
wl_corerev=
wl_country=
wl_country_code=
wl_crypto=0
wl_dfs_postism=60
wl_dfs_preism=60
wl_dtim=1
wl_frag=2346
wl_frameburst=on
wl_gmode=1
wl_gmode_protection=auto
wl_gmode_protection_x=1
wl_guest_auth_mode_1=open
wl_guest_crypto_1=0
wl_guest_enable=0
wl_guest_key1_1=
wl_guest_key2_1=
wl_guest_key3_1=
wl_guest_key4_1=
wl_guest_key_1=1
wl_guest_phrase_x_1=
wl_guest_ssid_1=guest
wl_guest_wep_x_1=0
wl_guest_wpa_gtk_rekey_1=0
wl_guest_wpa_psk_1=
wl_hwaddr=
wl_ifname=
wl_infra=1
wl_key1=
wl_key2=
wl_key3=
wl_key4=
wl_key=1
wl_lazywds=0
wl_leddc=0x640000
wl_macapply_x=Both
wl_maclist=
wl_maclist_x=
wl_macmode=disabled
wl_macnum_x=0
wl_maxassoc=128
wl_mode=ap
wl_mode_ex=ap
wl_mode_x=0
wl_mrate=0
wl_nband=2
wl_nbw=40
wl_nbw_cap=1
wl_nctrlsb=lower
wl_net_reauth=36000
wl_nmcsidx=-1
wl_nmode=-1
wl_nmode_protection=off
wl_nreqd=0
wl_phrase_x=
wl_phytype=b
wl_phytypes=
wl_plcphdr=long
wl_preauth=1
wl_radio=1
wl_radio_date_x=1111111
wl_radio_power_x=19
wl_radio_time_x=00002359
wl_radio_x=1
wl_radioids=
wl_radius_ipaddr=
wl_radius_key=
wl_radius_port=1812
wl_rate=-1
wl_rateset=default
wl_reg_mode=off
wl_rts=2347
wl_ssid2=default
wl_ssid=default
wl_sta_retry_time=5
wl_unit=0
wl_wds=
wl_wds_timeout=1
wl_wdsapply_x=0
wl_wdslist_x=
wl_wdsnum_x=0
wl_wep=disabled
wl_wep_x=0
wl_wme=on
wl_wme_ap_be=15 63 3 0 0 off off
wl_wme_ap_bk=15 1023 7 0 0 off off
wl_wme_ap_vi=7 15 1 6016 3008 off off
wl_wme_ap_vo=3 7 1 3264 1504 off off
wl_wme_apsd=on
wl_wme_no_ack=off
wl_wme_sta_be=15 1023 3 0 0 off off
wl_wme_sta_bk=15 1023 7 0 0 off off
wl_wme_sta_vi=7 15 2 6016 3008 off off
wl_wme_sta_vo=3 7 2 3264 1504 off off
wl_wpa_gtk_rekey=0
wl_wpa_mode=0
wl_wpa_psk=
wl_wsc_mode=enabled
wl_wsc_reg=disabled</code></pre></div><p>2. question:<br />I can kill all nas process and start it by command line, (from old wiki):<br />nas -P /tmp/nas.lan.pid -l br0 -H 34954 -i eth1 -A -m 4 -k&nbsp; -s linksys -w 6 -g 3600<br />but this looks diffrent from exiting process?<br />what are the right names for lan interface and wirless interface?</p><p>can someone help me please or direct me the some wiki pages?</p><p>thanks j</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132440">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">dddesign</div>
					<div class="post-datetime">
						7 Apr 2011, 02:25					</div>
				</div>
				<div class="post-content content">
					<p>sorry guys, not all my information was right, but it&#039;s working now (but I still don&#039;t know what was wrong...)</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>