<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> uClibc++ fails to compile with</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 19 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p217482">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						14 Nov 2013, 01:06					</div>
				</div>
				<div class="post-content content">
					<p>I have my local OpenWRT SVN trunk updated to r38795. I selected YATE package which requires uClibc++ package. My toolchain configuration is as shown below:</p><div class="codebox"><pre><code> .config - OpenWrt Configuration
 ──────────────────────────────────────────────────────────────────────────────
  ┌─────────────────────────── Toolchain Options ───────────────────────────┐
  │  Arrow keys navigate the menu.  &lt;Enter&gt; selects submenus ---&gt;.          │  
  │  Highlighted letters are hotkeys.  Pressing &lt;Y&gt; includes, &lt;N&gt; excludes, │  
  │  &lt;M&gt; modularizes features.  Press &lt;Esc&gt;&lt;Esc&gt; to exit, &lt;?&gt; for Help, &lt;/&gt; │  
  │  for Search.  Legend: [*] built-in  [ ] excluded  &lt;M&gt; module  &lt; &gt;       │  
  │ ┌─────────────────────────────────────────────────────────────────────┐ │  
  │ │    --- Toolchain Options                                            │ │  
  │ │    [ ]   Enable an extra toolchain target architecture  ---&gt;        │ │  
  │ │          *** Binary tools ***                                       │ │  
  │ │          Binutils Version (binutils 2.23.1)  ---&gt;                   │ │  
  │ │    ()    Additional binutils configure options                      │ │  
  │ │          *** Compiler ***                                           │ │  
  │ │          GCC compiler Version (gcc 4.8.x with Linaro enhancements)  │ │  
  │ │    [*]   Compile in support for the new Graphite framework in GCC 4.│ │  
  │ │    [*]     Use the system versions of PPL and CLooG                 │ │  
  │ │    ()    Additional gcc configure options                           │ │  
  │ │    [*]   Enable Stack-Smashing Protection support                   │ │  
  │ │    [ ]   Use setjump()/longjump() exceptions                        │ │  
  │ │    [*]   Build/install java compiler and GNU classpath ?            │ │  
  │ │    [*]   Build/install fortran compiler?                            │ │  
  │ │          *** C Library ***                                          │ │  
  │ │          C Library implementation (Use uClibc)  ---&gt;                │ │  
  │ │          uClibc Version (uClibc 0.9.33.2)  ---&gt;                     │ │  
  │ │    [ ]   Build with debug information                               │ │  
  │ │          *** Debuggers ***                                          │ │  
  │ │    [ ]   Build gdb                                                  │ │  
  │ │    [ ]   Build insight-gdb                                          │ │  
  │ └─────────────────────────────────────────────────────────────────────┘ │  
  ├─────────────────────────────────────────────────────────────────────────┤  
  │        &lt;Select&gt;    &lt; Exit &gt;    &lt; Help &gt;    &lt; Save &gt;    &lt; Load &gt;         │  
  └─────────────────────────────────────────────────────────────────────────┘  </code></pre></div><p>When OpenWRT tried to compile uClibc++ package, the compilation crashed and below is the log excerpt pertaining to where it crashed. Has anyone encountered this issue and had any idea how to fix this?</p><div class="codebox"><pre><code>mips-openwrt-linux-uclibc-gcc -Wl,--warn-common -Wl,--warn-once -Wl,-z,combreloc -Wl,-z,defs -nodefaultlibs -shared -Wl,-soname,libuClibc++.so.0  -Wl,-s -o libuClibc++-0.2.4.so algorithm.o associative_base.o bitset.o char_traits.o complex.o del_op.o del_opnt.o del_opv.o del_opvnt.o deque.o eh_alloc.o eh_globals.o exception.o fstream.o func_exception.o iomanip.o ios.o iostream.o istream.o iterator.o limits.o list.o locale.o map.o new_handler.o new_op.o new_opnt.o new_opv.o new_opvnt.o numeric.o ostream.o queue.o set.o sstream.o stack.o stdexcept.o streambuf.o string.o utility.o valarray.o vector.o abi/abi.o abi/libsupc/array_type_info.o abi/libsupc/atexit_arm.o abi/libsupc/atexit_thread.o abi/libsupc/bad_alloc.o abi/libsupc/bad_cast.o abi/libsupc/bad_typeid.o abi/libsupc/class_type_info.o abi/libsupc/cp-demangle.o abi/libsupc/dyncast.o abi/libsupc/eh_arm.o abi/libsupc/eh_aux_runtime.o abi/libsupc/eh_call.o abi/libsupc/eh_catch.o abi/libsupc/eh_exception.o abi/libsupc/eh_personality.o abi/libsupc/eh_ptr.o abi/libsupc/eh_term_handler.o abi/libsupc/eh_terminate.o abi/libsupc/eh_throw.o abi/libsupc/eh_tm.o abi/libsupc/eh_type.o abi/libsupc/eh_unex_handler.o abi/libsupc/enum_type_info.o abi/libsupc/function_type_info.o abi/libsupc/fundamental_type_info.o abi/libsupc/guard.o abi/libsupc/guard_error.o abi/libsupc/hash_bytes.o abi/libsupc/nested_exception.o abi/libsupc/pbase_type_info.o abi/libsupc/pmem_type_info.o abi/libsupc/pointer_type_info.o abi/libsupc/si_class_type_info.o abi/libsupc/tinfo.o abi/libsupc/tinfo2.o abi/libsupc/vec.o abi/libsupc/vmi_class_type_info.o abi/libsupc/vterminate.o  -lc -L/opt/tmp/openwrt-svn-trunk/staging_dir/toolchain-mips_34kc_gcc-4.8-linaro_uClibc-0.9.33.2/lib -lgcc_s 
mips-openwrt-linux-uclibc-ranlib libuClibc++.a
/opt/tmp/openwrt-svn-trunk/staging_dir/toolchain-mips_34kc_gcc-4.8-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.8.2/../../../../mips-openwrt-linux-uclibc/bin/ld: BFD (GNU Binutils) 2.23.1 assertion fail elfxx-mips.c:10201
/opt/tmp/openwrt-svn-trunk/staging_dir/toolchain-mips_34kc_gcc-4.8-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.8.2/../../../../mips-openwrt-linux-uclibc/bin/ld: BFD (GNU Binutils) 2.23.1 assertion fail elfxx-mips.c:10201
/opt/tmp/openwrt-svn-trunk/staging_dir/toolchain-mips_34kc_gcc-4.8-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.8.2/../../../../mips-openwrt-linux-uclibc/bin/ld: BFD (GNU Binutils) 2.23.1 assertion fail elfxx-mips.c:10201
collect2: error: ld returned 1 exit status
collect2: error: ld returned 1 exit status
make[4]: *** [libuClibc++-0.2.4.so] Error 1
make[4]: Leaving directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-mips_34kc_uClibc-0.9.33.2/uClibc++-0.2.4/src&#039;
make[4]: *** [libuClibc++-0.2.4.so] Error 1
make[3]: *** [all] Error 2
make[3]: *** [all] Error 2
make[3]: Leaving directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-mips_34kc_uClibc-0.9.33.2/uClibc++-0.2.4&#039;
make[2]: *** [/opt/tmp/openwrt-svn-trunk/build_dir/target-mips_34kc_uClibc-0.9.33.2/uClibc++-0.2.4/.built] Error 2
make[2]: Leaving directory `/opt/tmp/openwrt-svn-trunk/package/libs/uclibc++&#039;
make[2]: *** [/opt/tmp/openwrt-svn-trunk/build_dir/target-mips_34kc_uClibc-0.9.33.2/uClibc++-0.2.4/.built] Error 2
make[1]: *** [package/libs/uclibc++/compile] Error 2
make[1]: Leaving directory `/opt/tmp/openwrt-svn-trunk&#039;
make: *** [package/uclibc++/compile] Error 2</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220597">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">trismo</div>
					<div class="post-datetime">
						22 Dec 2013, 05:27					</div>
				</div>
				<div class="post-content content">
					<p>try disable mips16</p><p>add package/libs/uclibc++/Makefile</p><div class="codebox"><pre><code>PKG_NAME:=uclibc++
PKG_VERSION:=0.2.4
PKG_RELEASE:=1
+PKG_USE_MIPS16:=0

PKG_SOURCE:=uClibc++-$(PKG_VERSION).tar.bz2
PKG_SOURCE_URL:=http://cxx.uclibc.org/src/
PKG_MD5SUM:=394c119363dd8b469fb898442a6764b8</code></pre></div>											<p class="post-edited">(Last edited by <strong>trismo</strong> on 22 Dec 2013, 05:28)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>