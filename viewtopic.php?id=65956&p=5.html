<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TRENDnet AC2600 (TEW-827DRU)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 25 Mar 2018 and 29 Apr 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 5 of 6</div><nav><ul><li><a href="viewtopic.php%3Fid=65956&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=65956&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=65956&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li><li><a href="viewtopic.php%3Fid=65956&amp;p=6.html">6</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p337449">
				<div class="post-metadata">
					<div class="post-num">Post #101</div>
					<div class="post-author">jmomo</div>
					<div class="post-datetime">
						7 Sep 2016, 01:59					</div>
				</div>
				<div class="post-content content">
					<p><a href="https://www.mail-archive.com/lede-dev@lists.infradead.org/msg02549.html">https://www.mail-archive.com/lede-dev@l … 02549.html</a></p><p>This affects us and the EA8500. Hopefully it will get fixed before it causes anyone problems.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p337451">
				<div class="post-metadata">
					<div class="post-num">Post #102</div>
					<div class="post-author">slh</div>
					<div class="post-datetime">
						7 Sep 2016, 02:13					</div>
				</div>
				<div class="post-content content">
					<p><a href="https://git.lede-project.org/?p=source.git;a=commitdiff;h=42f559ed70897a7b74dd3e6293b42e6d2e511eaa">kernel: backport upstream overlayfs fixes</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p337481">
				<div class="post-metadata">
					<div class="post-num">Post #103</div>
					<div class="post-author">jmomo</div>
					<div class="post-datetime">
						7 Sep 2016, 09:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>slh wrote:</cite><blockquote><p><a href="https://git.lede-project.org/?p=source.git;a=commitdiff;h=42f559ed70897a7b74dd3e6293b42e6d2e511eaa">kernel: backport upstream overlayfs fixes</a></p></blockquote></div><p>Yep, thanks. I&#039;ll rebase here in a few days. I have not run into that issue yet, but I can see that happening. Also I&#039;m going to put out my patches here soon.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p337654">
				<div class="post-metadata">
					<div class="post-num">Post #104</div>
					<div class="post-author">jmomo</div>
					<div class="post-datetime">
						9 Sep 2016, 03:53					</div>
				</div>
				<div class="post-content content">
					<p>When a new system boots up, it&#039;s 802.11 interface MAC addresses will appear to be incorrect:</p><div class="quotebox"><blockquote><p>root@lede:/# ifconfig -a | egrep -i hwaddr<br />br-lan&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr D8:EB:97:30:30:03&nbsp; <br />eth0&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr D8:EB:97:30:30:04&nbsp; <br />eth0.2&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr D8:EB:97:30:30:04&nbsp; <br />eth1&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr D8:EB:97:30:30:03&nbsp; <br />eth1.1&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr D8:EB:97:30:30:03&nbsp; <br />wlan0&nbsp; &nbsp; &nbsp;Link encap:Ethernet&nbsp; HWaddr 00:34:56:78:80:80&nbsp; <br />wlan1&nbsp; &nbsp; &nbsp;Link encap:Ethernet&nbsp; HWaddr 00:03:7F:12:16:16</p></blockquote></div><p>In the above example, our wlan0 MAC address is shown to be &quot;00:34:56:78:80:80&quot;, but should be &quot;D8:EB:97:30:30:05&quot;. wlan1, which is also incorrect, should be &quot;&quot;D8:EB:97:30:30:06&quot;.</p><p>This is because of problems in the ath10k driver and the lack of MAC addresses being in the ART partition, where the driver expects them to be.</p><p>Our fix is to use sysfs to assign proper MAC addresses. However, these won&#039;t appear until the interfaces come up.</p><div class="quotebox"><blockquote><p>root@lede:/# cat /sys/class/net/wlan0/address<br />00:34:56:78:80:80<br />root@lede:/# cat /sys/class/net/wlan0/phy80211/macaddress<br />d8:eb:97:30:30:05</p></blockquote></div><p>Our interfaces are currently disabled, per LEDE defaults:</p><div class="quotebox"><blockquote><p>root@lede:/# uci show wireless | egrep disabled<br />wireless.radio0.disabled=&#039;1&#039;<br />wireless.radio1.disabled=&#039;1&#039;</p></blockquote></div><p>So let&#039;s enable them and then re-check:</p><div class="quotebox"><blockquote><p>uci set wireless.radio0.disabled=&#039;0&#039;<br />uci set wireless.radio1.disabled=&#039;0&#039;<br />uci commit wireless<br />wifi</p></blockquote></div><div class="quotebox"><blockquote><p>root@lede:/# ifconfig -a | egrep -i hwaddr<br />br-lan&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr D8:EB:97:30:30:03&nbsp; <br />eth0&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr D8:EB:97:30:30:04&nbsp; <br />eth0.2&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr D8:EB:97:30:30:04&nbsp; <br />eth1&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr D8:EB:97:30:30:03&nbsp; <br />eth1.1&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr D8:EB:97:30:30:03&nbsp; <br />wlan0&nbsp; &nbsp; &nbsp;Link encap:Ethernet&nbsp; HWaddr D8:EB:97:30:30:05&nbsp; <br />wlan1&nbsp; &nbsp; &nbsp;Link encap:Ethernet&nbsp; HWaddr D8:EB:97:30:30:06&nbsp; </p><p>root@lede:/# cat /sys/class/net/wlan0/address<br />d8:eb:97:30:30:05<br />root@lede:/# cat /sys/class/net/wlan0/phy80211/macaddress<br />d8:eb:97:30:30:05</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p337786">
				<div class="post-metadata">
					<div class="post-num">Post #105</div>
					<div class="post-author">jmomo</div>
					<div class="post-datetime">
						10 Sep 2016, 03:12					</div>
				</div>
				<div class="post-content content">
					<p>Here is some info for the its-maker.sh script I had to write for this thing:</p><p><a href="https://forum.openwrt.org/viewtopic.php?pid=337783">https://forum.openwrt.org/viewtopic.php?pid=337783</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p337884">
				<div class="post-metadata">
					<div class="post-num">Post #106</div>
					<div class="post-author">jmomo</div>
					<div class="post-datetime">
						11 Sep 2016, 05:25					</div>
				</div>
				<div class="post-content content">
					<p># tew827dru switchport mapping<br />#&nbsp; &nbsp;switch0 port 0 &lt;--&gt; eth0<br />#&nbsp; &nbsp;switch0 port 6 &lt;--&gt; eth1<br />#&nbsp; &nbsp;switch0 port 5 &lt;--&gt; WAN<br />#&nbsp; &nbsp;switch0 port 4 &lt;--&gt; LAN1<br />#&nbsp; &nbsp;switch0 port 3 &lt;--&gt; LAN2<br />#&nbsp; &nbsp;switch0 port 2 &lt;--&gt; LAN3<br />#&nbsp; &nbsp;switch0 port 1 &lt;--&gt; LAN4</p><p>The tew827dru has two ethernet interfaces on it&#039;s SoC, which are then hard wired to two of the ports on the internal 7-port ethernet switch.</p><p>Switch port 0 is mapped to eth0, and port 6 is mapped to eth1.</p><p>Port 5 is the WAN jack..</p><p>Ports 1-4 are mapped in reverse order to the LAN jacks.</p>											<p class="post-edited">(Last edited by <strong>jmomo</strong> on 11 Sep 2016, 08:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p337912">
				<div class="post-metadata">
					<div class="post-num">Post #107</div>
					<div class="post-author">jmomo</div>
					<div class="post-datetime">
						11 Sep 2016, 14:33					</div>
				</div>
				<div class="post-content content">
					<p>Note to self: Do not cat this file, it will cause a kernel panic.<br />/sys/kernel/debug/ieee80211/phy0/ath10k/cal_data</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p337980">
				<div class="post-metadata">
					<div class="post-num">Post #108</div>
					<div class="post-author">jmomo</div>
					<div class="post-datetime">
						12 Sep 2016, 02:51					</div>
				</div>
				<div class="post-content content">
					<p>I have noticed a problem with USB3 flash drives. If I boot the system with a USB3 flash drive in one of the USB ports, that port won&#039;t allow any USB3 drive to work in it until the next reboot.</p><p>This behavior is somewhat intermittent and varied. Occasionally my Silicon Power USB3 drive will work fine after boot, and the SanDisk USB3 drive almost always appears in &quot;lsusb&quot;, but the partitions can&#039;t be seen, and it still doesn&#039;t work right.</p><p>The USB3 flash drive works as-expected if I plug it in after boot. The issue only appears if the drive was already in the USB port during boot time.</p><p>USB2 flash drives do not appear to be affected. Even if the port had a USB3 drive in it during boot, a USB2 drive will work okay in that port. Leaving the USB2 drive in the port during boot doesn&#039;t trigger the same broken behavior.</p><p>The USB hard drive I tested seems to be working normally.</p><p>USB flash drives tested:<br />&nbsp; &nbsp; SanDisk Ultra Fit 16GB (USB3)<br />&nbsp; &nbsp; Patriot Tab Series 32GB (USB3)<br />&nbsp; &nbsp; Silicon Power 32GB (USB3)<br />&nbsp; &nbsp; Kingston DTSE9 8GB (USB2)<br />&nbsp; &nbsp; Patriot 8GB (USB2)</p><p>Here is a boot log where I leave the Silicon Power USB flash drive in and we see errors near the end:</p><div class="quotebox"><blockquote><p>root@lede:/# dmesg | egrep -i &quot;usb|hci&quot;<br />[&nbsp; &nbsp; 6.278787] usbcore: registered new interface driver usbfs<br />[&nbsp; &nbsp; 6.278866] usbcore: registered new interface driver hub<br />[&nbsp; &nbsp; 6.283424] usbcore: registered new device driver usb<br />[&nbsp; &nbsp; 6.314268] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver<br />[&nbsp; &nbsp; 6.314777] ehci-platform: EHCI generic platform driver<br />[&nbsp; &nbsp; 6.325314] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver<br />[&nbsp; &nbsp; 6.325862] ohci-platform: OHCI generic platform driver<br />[&nbsp; &nbsp; 6.831312] xhci-hcd xhci-hcd.0.auto: xHCI Host Controller<br />[&nbsp; &nbsp; 6.831358] xhci-hcd xhci-hcd.0.auto: new USB bus registered, assigned bus number 1<br />[&nbsp; &nbsp; 6.835986] xhci-hcd xhci-hcd.0.auto: hcc params 0x0228f065 hci version 0x100 quirks 0x00010010<br />[&nbsp; &nbsp; 6.843380] xhci-hcd xhci-hcd.0.auto: irq 200, io mem 0x11000000<br />[&nbsp; &nbsp; 6.852679] hub 1-0:1.0: USB hub found<br />[&nbsp; &nbsp; 6.862169] xhci-hcd xhci-hcd.0.auto: xHCI Host Controller<br />[&nbsp; &nbsp; 6.865816] xhci-hcd xhci-hcd.0.auto: new USB bus registered, assigned bus number 2<br />[&nbsp; &nbsp; 6.871184] usb usb2: We don&#039;t know the algorithms for LPM for this host, disabling LPM.<br />[&nbsp; &nbsp; 6.879270] hub 2-0:1.0: USB hub found<br />[&nbsp; &nbsp; 6.890929] xhci-hcd xhci-hcd.1.auto: xHCI Host Controller<br />[&nbsp; &nbsp; 6.894718] xhci-hcd xhci-hcd.1.auto: new USB bus registered, assigned bus number 3<br />[&nbsp; &nbsp; 6.900095] xhci-hcd xhci-hcd.1.auto: hcc params 0x0228f065 hci version 0x100 quirks 0x00010010<br />[&nbsp; &nbsp; 6.907574] xhci-hcd xhci-hcd.1.auto: irq 201, io mem 0x10000000<br />[&nbsp; &nbsp; 6.916750] hub 3-0:1.0: USB hub found<br />[&nbsp; &nbsp; 6.926283] xhci-hcd xhci-hcd.1.auto: xHCI Host Controller<br />[&nbsp; &nbsp; 6.930051] xhci-hcd xhci-hcd.1.auto: new USB bus registered, assigned bus number 4<br />[&nbsp; &nbsp; 6.935493] usb usb4: We don&#039;t know the algorithms for LPM for this host, disabling LPM.<br />[&nbsp; &nbsp; 6.943495] hub 4-0:1.0: USB hub found<br />[&nbsp; &nbsp; 6.955943] of_get_named_gpiod_flags: parsed &#039;gpios&#039; property of node &#039;/gpio-leds/usb[0]&#039; - status (0)<br />[&nbsp; &nbsp; 6.957685] usbcore: registered new interface driver usb-storage<br />[&nbsp; &nbsp; 7.252238] usb 3-1: new high-speed USB device number 2 using xhci-hcd<br />[&nbsp; &nbsp; 7.462360] usb 4-1: new SuperSpeed USB device number 2 using xhci-hcd<br />[&nbsp; &nbsp; 7.484118] usb-storage 4-1:1.0: USB Mass Storage device detected<br />[&nbsp; &nbsp; 7.514508] scsi host0: usb-storage 4-1:1.0<br />[&nbsp; &nbsp; 8.523132] scsi 0:0:0:0: Direct-Access&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; USB DISK 3.0&nbsp; &nbsp; &nbsp;PMAP PQ: 0 ANSI: 6<br />[&nbsp; &nbsp;17.263776] usbcore: registered new interface driver i2c-tiny-usb<br />[&nbsp; &nbsp;17.292159] xhci-hcd xhci-hcd.1.auto: xHCI host not responding to stop endpoint command.<br />[&nbsp; &nbsp;17.292928] xhci-hcd xhci-hcd.1.auto: Assuming host is dying, halting host.<br />[&nbsp; &nbsp;17.341282] xhci-hcd xhci-hcd.1.auto: Host not halted after 16000 microseconds.<br />[&nbsp; &nbsp;17.341308] xhci-hcd xhci-hcd.1.auto: Non-responsive xHCI host is not halting.<br />[&nbsp; &nbsp;17.347392] xhci-hcd xhci-hcd.1.auto: Completing active URBs anyway.<br />[&nbsp; &nbsp;17.354791] xhci-hcd xhci-hcd.1.auto: HC died; cleaning up<br />[&nbsp; &nbsp;17.361281] usb usb3-port1: couldn&#039;t allocate usb_device<br />[&nbsp; &nbsp;17.366753] usb 4-1: USB disconnect, device number 2</p></blockquote></div><p>Ticket opened:<br /><a href="https://bugs.lede-project.org/index.php?do=details&amp;task_id=177">https://bugs.lede-project.org/index.php … ask_id=177</a></p>											<p class="post-edited">(Last edited by <strong>jmomo</strong> on 18 Sep 2016, 08:05)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338530">
				<div class="post-metadata">
					<div class="post-num">Post #109</div>
					<div class="post-author">jmomo</div>
					<div class="post-datetime">
						18 Sep 2016, 08:06					</div>
				</div>
				<div class="post-content content">
					<p>I am keeping an eye on this:<br />ipq8065: scaling governor on R7800<br /><a href="https://bugs.lede-project.org/index.php?do=details&amp;task_id=117">https://bugs.lede-project.org/index.php … ask_id=117</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338609">
				<div class="post-metadata">
					<div class="post-num">Post #110</div>
					<div class="post-author">jmomo</div>
					<div class="post-datetime">
						19 Sep 2016, 07:35					</div>
				</div>
				<div class="post-content content">
					<p>This bootconfig-info script will dump your bootconfig information. Helpful in debugging:</p><div class="codebox"><pre><code>#!/bin/sh
# Dump info from the TRENDnet TEW-827DRU BOOTCONFIG

# Dump from /dev/mtd12 by default, otherwise $1
{ [[ -n &quot;$1&quot; ]] &amp;&amp; BOOTCONFIG_PART=$1 ; } || BOOTCONFIG_PART=/dev/mtd12

# Make sure the magic header ID is right.
FAILSAFE_MAGIC=$(dd if=$BOOTCONFIG_PART bs=1 count=4 2&gt; /dev/null | hexdump -e &#039;1/1 &quot;%02x&quot;&#039;)
if ! [[ &quot;$FAILSAFE_MAGIC&quot; == a0a1a3a5 ]] ; then
        echo &quot;&quot;
        echo &quot;Bootconfig magic header ID not found.&quot;
        echo &quot;&quot;
        exit 1
fi

echo &quot;&quot;
hexdump -C -n 96 $BOOTCONFIG_PART
echo &quot;&quot;

UPGRADE_IN_PROGRESS_BYTE=$(dd if=$BOOTCONFIG_PART bs=1 count=1 skip=4 2&gt; /dev/null | hexdump -e &#039;1/1 &quot;%02x&quot;&#039;)
APPSBL_PART_ACTIVE_BYTE=$(dd if=$BOOTCONFIG_PART bs=1 count=1 skip=28 2&gt; /dev/null | hexdump -e &#039;1/1 &quot;%02x&quot;&#039;)
APPSBL_PART_UPGRADED_BYTE=$(dd if=$BOOTCONFIG_PART bs=1 count=1 skip=32 2&gt; /dev/null | hexdump -e &#039;1/1 &quot;%02x&quot;&#039;)
ROOTFS_PART_ACTIVE_BYTE=$(dd if=$BOOTCONFIG_PART bs=1 count=1 skip=52 2&gt; /dev/null | hexdump -e &#039;1/1 &quot;%02x&quot;&#039;)
ROOTFS_PART_UPGRADED_BYTE=$(dd if=$BOOTCONFIG_PART bs=1 count=1 skip=56 2&gt; /dev/null | hexdump -e &#039;1/1 &quot;%02x&quot;&#039;)

[[ &quot;$APPSBL_PART_ACTIVE_BYTE&quot; == 00 ]] &amp;&amp; APPSBL_PART_ACTIVE_NAME=APPSBL
[[ &quot;$APPSBL_PART_ACTIVE_BYTE&quot; == 01 ]] &amp;&amp; APPSBL_PART_ACTIVE_NAME=APPSBL_1
[[ &quot;$ROOTFS_PART_ACTIVE_BYTE&quot; == 00 ]] &amp;&amp; ROOTFS_PART_ACTIVE_NAME=rootfs
[[ &quot;$ROOTFS_PART_ACTIVE_BYTE&quot; == 01 ]] &amp;&amp; ROOTFS_PART_ACTIVE_NAME=rootfs_1

echo &quot;Upgrade In Progress    = $UPGRADE_IN_PROGRESS_BYTE&quot;
echo &quot;APPSBL Part Active     = $APPSBL_PART_ACTIVE_BYTE&quot;
echo &quot;APPSBL Active Name     = $APPSBL_PART_ACTIVE_NAME&quot;
echo &quot;APPSBL Part Upgraded   = $APPSBL_PART_UPGRADED_BYTE&quot;
echo &quot;ROOTFS Part Active     = $ROOTFS_PART_ACTIVE_BYTE&quot;
echo &quot;ROOTFS Active Name     = $ROOTFS_PART_ACTIVE_NAME&quot;
echo &quot;ROOTFS Part Upgraded   = $ROOTFS_PART_UPGRADED_BYTE&quot;
echo &quot;&quot;</code></pre></div><p>Example output:</p><div class="codebox"><pre><code>root@lede:/usr/local/sbin# bootconfig-info 

00000000  a0 a1 a3 a5 00 00 00 00  03 00 00 00 30 3a 41 50  |............0:AP|
00000010  50 53 42 4c 00 00 00 00  00 00 00 00 00 01 00 00  |PSBL............|
00000020  00 00 00 00 72 6f 6f 74  66 73 00 00 00 00 00 00  |....rootfs......|
00000030  00 00 00 00 00 01 00 00  00 00 00 00 6b 65 72 6e  |............kern|
00000040  65 6c 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |el..............|
00000050  00 00 00 00 00 00 00 03  00 00 00 28 00 00 00 00  |...........(....|
00000060

Upgrade In Progress    = 00
APPSBL Part Active     = 00
APPSBL Active Name     = APPSBL
APPSBL Part Upgraded   = 00
ROOTFS Part Active     = 00
ROOTFS Active Name     = rootfs
ROOTFS Part Upgraded   = 00</code></pre></div>											<p class="post-edited">(Last edited by <strong>jmomo</strong> on 19 Sep 2016, 07:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338627">
				<div class="post-metadata">
					<div class="post-num">Post #111</div>
					<div class="post-author">jmomo</div>
					<div class="post-datetime">
						19 Sep 2016, 12:07					</div>
				</div>
				<div class="post-content content">
					<p>More detail on what is in that BOOTCONFIG partition:</p><div class="codebox"><pre><code>Bytes
    1-4        magic header ID
    5        Upgrade in progress
    6-8        Unused 3 bytes
    9        numaltpart (&quot;number of alt partitions&quot;)
    10-12    Unused 3 bytes

    13-28    Partition name 1 (0:APPSBL)
    29        APPSBL partition active/primaryboot bit
    30-32    Unused 3 bytes
    33        APPSBL upgraded bit
    34-36    Unused 3 bytes

    37-52    Partition name 2 (rootfs)
    53        rootfs partition active/primaryboot bit
    54-56    Unused 3 bytes
    57        rootfs upgraded bit

    58-73    Partition name 3 (kernel)
    74        kernel partition active/primaryboot bit
    75-77    Unused 3 bytes
    78        kernel upgraded bit

    79-84    ???</code></pre></div><p>Divined from qsdk_gpl/qca/src/linux/arch/arm/mach-msm/smd_private.h</p>											<p class="post-edited">(Last edited by <strong>jmomo</strong> on 20 Sep 2016, 08:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338790">
				<div class="post-metadata">
					<div class="post-num">Post #112</div>
					<div class="post-author">jmomo</div>
					<div class="post-datetime">
						21 Sep 2016, 06:12					</div>
				</div>
				<div class="post-content content">
					<p>The good news is that my at-home test router had an uptime of ten days without any issues. It&#039;s been very stable, including the 802.11 network.</p><p>However, when I tried to sysupgrade today to my latest build, the system got stuck in a boot loop where it was failing to find init. Very weird.</p><div class="codebox"><pre><code>[    3.629266] Registering SWP/SWPB emulation handler
[    3.641480] ubi0: attaching mtd11
[    4.304575] ubi0: scanning is finished
[    4.320591] ubi0: attached mtd11 (name &quot;rootfs&quot;, size 64 MiB)
[    4.320614] ubi0: PEB size: 131072 bytes (128 KiB), LEB size: 126976 bytes
[    4.325402] ubi0: min./max. I/O unit sizes: 2048/2048, sub-page size 2048
[    4.332080] ubi0: VID header offset: 2048 (aligned 2048), data offset: 4096
[    4.339017] ubi0: good PEBs: 512, bad PEBs: 0, corrupted PEBs: 0
[    4.345766] ubi0: user volume: 3, internal volumes: 1, max. volumes count: 128
[    4.351961] ubi0: max/mean erase counter: 4/2, WL threshold: 4096, image sequence number: 137116979
[    4.359043] ubi0: available PEBs: 0, total reserved PEBs: 512, PEBs reserved for bad PEB handling: 40
[    4.368146] ubi0: background thread &quot;ubi_bgt0d&quot; started, PID 54
[    4.377946] block ubiblock0_1: created from ubi0:1(rootfs)
[    4.383807] hctosys: unable to open rtc device (rtc0)
[    4.397033] UBIFS (ubi0:1): background thread &quot;ubifs_bgt0_1&quot; started, PID 56
[    4.470147] UBIFS (ubi0:1): recovery needed
[    4.517676] UBIFS (ubi0:1): recovery completed
[    4.517767] UBIFS (ubi0:1): UBIFS: mounted UBI device 0, volume 1, name &quot;rootfs&quot;
[    4.521035] UBIFS (ubi0:1): LEB size: 126976 bytes (124 KiB), min./max. I/O unit sizes: 2048 bytes/2048 bytes
[    4.528679] UBIFS (ubi0:1): FS size: 15872000 bytes (15 MiB, 125 LEBs), journal size 1015809 bytes (0 MiB, 6 LEBs)
[    4.538496] UBIFS (ubi0:1): reserved for root: 749673 bytes (732 KiB)
[    4.548737] UBIFS (ubi0:1): media format: w4/r0 (latest is w4/r0), UUID E699070E-D175-4A95-9D18-94D38EDA430E, small LPT model
[    4.556586] VFS: Mounted root (ubifs filesystem) on device 0:11.
[    4.566630] Freeing unused kernel memory: 204K (c07ad000 - c07e0000)
[    4.572617] Kernel panic - not syncing: No working init found.  Try passing init= option to kernel. See Linux Documentation/init.txt for guidance.
[    4.578830] CPU: 0 PID: 1 Comm: swapper/0 Tainted: G        W       4.4.21 #0
[    4.591750] Hardware name: Qualcomm (Flattened Device Tree)
[    4.598974] [&lt;c0221870&gt;] (unwind_backtrace) from [&lt;c021e110&gt;] (show_stack+0x14/0x20)
[    4.604355] [&lt;c021e110&gt;] (show_stack) from [&lt;c03c46f8&gt;] (dump_stack+0x88/0x9c)
[    4.612336] [&lt;c03c46f8&gt;] (dump_stack) from [&lt;c0229af8&gt;] (panic+0xa8/0x224)
[    4.619362] [&lt;c0229af8&gt;] (panic) from [&lt;c020ea28&gt;] (kernel_init+0xf8/0x108)
[    4.626219] [&lt;c020ea28&gt;] (kernel_init) from [&lt;c0209d38&gt;] (ret_from_fork+0x14/0x3c)
[    4.633082] CPU1: stopping
[    4.640705] CPU: 1 PID: 0 Comm: swapper/1 Tainted: G        W       4.4.21 #0
[    4.643399] Hardware name: Qualcomm (Flattened Device Tree)
[    4.650610] [&lt;c0221870&gt;] (unwind_backtrace) from [&lt;c021e110&gt;] (show_stack+0x14/0x20)
[    4.655994] [&lt;c021e110&gt;] (show_stack) from [&lt;c03c46f8&gt;] (dump_stack+0x88/0x9c)
[    4.663982] [&lt;c03c46f8&gt;] (dump_stack) from [&lt;c0220b38&gt;] (handle_IPI+0x128/0x1e4)
[    4.671009] [&lt;c0220b38&gt;] (handle_IPI) from [&lt;c02094b0&gt;] (gic_handle_irq+0x90/0xbc)
[    4.678563] [&lt;c02094b0&gt;] (gic_handle_irq) from [&lt;c020a614&gt;] (__irq_svc+0x54/0x90)
[    4.685938] Exception stack(0xdd471f88 to 0xdd471fd0)
[    4.693492] 1f80:                   00000001 00000000 00000000 c020b520 dd470000 c07e2480
[    4.698534] 1fa0: c06e9c44 00000000 00000000 c07db2e4 dd471fe0 c07e2488 de80400c dd471fd8
[    4.706690] 1fc0: c021afec c021aff0 60000013 ffffffff
[    4.714843] [&lt;c020a614&gt;] (__irq_svc) from [&lt;c021aff0&gt;] (arch_cpu_idle+0x38/0x5c)
[    4.719884] [&lt;c021aff0&gt;] (arch_cpu_idle) from [&lt;c02638a4&gt;] (cpu_startup_entry+0x17c/0x250)
[    4.727349] [&lt;c02638a4&gt;] (cpu_startup_entry) from [&lt;4220956c&gt;] (0x4220956c)
[    4.735422] Rebooting in 1 seconds..
[    6.742330] BUG: scheduling while atomic: swapper/0/1/0x00000002
[    6.742355] Modules linked in:
[    6.750417] Preemption disabled at:[&lt;  (null)&gt;]   (null)
[    6.753806] 
[    6.755718] CPU: 0 PID: 1 Comm: swapper/0 Tainted: G        W       4.4.21 #0
[    6.757373] Hardware name: Qualcomm (Flattened Device Tree)
[    6.764411] [&lt;c0221870&gt;] (unwind_backtrace) from [&lt;c021e110&gt;] (show_stack+0x14/0x20)
[    6.769795] [&lt;c021e110&gt;] (show_stack) from [&lt;c03c46f8&gt;] (dump_stack+0x88/0x9c)
[    6.777786] [&lt;c03c46f8&gt;] (dump_stack) from [&lt;c024a358&gt;] (__schedule_bug+0xa8/0xc4)
[    6.784816] [&lt;c024a358&gt;] (__schedule_bug) from [&lt;c0210170&gt;] (__schedule+0x94/0x490)
[    6.792364] [&lt;c0210170&gt;] (__schedule) from [&lt;c0210814&gt;] (schedule+0x94/0xbc)
[    6.799917] [&lt;c0210814&gt;] (schedule) from [&lt;c0213588&gt;] (schedule_timeout+0x1e0/0x220)
[    6.807214] [&lt;c0213588&gt;] (schedule_timeout) from [&lt;c027d990&gt;] (msleep+0x2c/0x48)
[    6.814940] [&lt;c027d990&gt;] (msleep) from [&lt;c04ce72c&gt;] (qcom_wdt_restart+0x64/0x74)
[    6.822314] [&lt;c04ce72c&gt;] (qcom_wdt_restart) from [&lt;c0246900&gt;] (notifier_call_chain+0x38/0x90)
[    6.829691] [&lt;c0246900&gt;] (notifier_call_chain) from [&lt;c0246b98&gt;] (atomic_notifier_call_chain+0x3c/0x5c)
[    6.838112] [&lt;c0246b98&gt;] (atomic_notifier_call_chain) from [&lt;c021c530&gt;] (machine_restart+0x4c/0x84)
[    6.847312] [&lt;c021c530&gt;] (machine_restart) from [&lt;c0229c04&gt;] (panic+0x1b4/0x224)
[    6.856337] [&lt;c0229c04&gt;] (panic) from [&lt;c020ea28&gt;] (kernel_init+0xf8/0x108)</code></pre></div><p>I had a backup of the filesystem from right before I upgraded and restored it to try and duplicate the problem, but now I can&#039;t.</p><p>There has been a bunch of UBI/ubifs changes in the last week or two. I suspect the problem is in there somewhere. Hopefully LEDE will get a little more stable in the future, because this is... what, the fourth time I&#039;ve run into an unbootable system because of source problems in the last two months? Something like that.</p>											<p class="post-edited">(Last edited by <strong>jmomo</strong> on 21 Sep 2016, 06:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338791">
				<div class="post-metadata">
					<div class="post-num">Post #113</div>
					<div class="post-author">jmomo</div>
					<div class="post-datetime">
						21 Sep 2016, 06:50					</div>
				</div>
				<div class="post-content content">
					<p>Here is a LEDE boot log, including the portion where LEDE is installed. This is power-on into the u-boot HTTP recovery loader, the installation of the LEDE factory image, reboot, and then first boot of the freshly installed system. Finally, I hexdump the bootconfig at the end to show off what is in there.</p><br /><div class="codebox"><pre><code>U-Boot 2012.07 [Standard IPQ806X.LN,r40331] (Nov 17 2015 - 19:33:37)

smem ram ptable found: ver: 0 len: 5
DRAM:  491 MiB
NAND:  SF: Unsupported manufacturer 00
ipq_spi: SPI Flash not found (bus/cs/speed/mode) = (0/0/48000000/0)
256 MiB
MMC:   
PCI0 Link Intialized
PCI1 Link Intialized
In:    serial
Out:   serial
Err:   serial
cdp: get part failed for 0:HLOS
Net:   MAC1 addr:0:3:7f:ba:db:1
athrs17_reg_init: complete
athrs17_vlan_config ...done
S17c init  done
MAC2 addr:0:3:7f:ba:db:2
eth0, eth1
Hit any key to stop autoboot:  0 
Mac1 unit failed
backup_mode_handle Using eth1 device
localMac is:
41chttp init
hostmac = default_mac_from_artblock: 00:03:7F:BA:DB:02 from 0xBF7FFFA0
 00:03:7f:ba:db:02
hostaddr = 0xa8c00100 
httpd: PTM UIP_ETHTYPE_ARP, uip_len=60
httpd: PTM UIP_ETHTYPE_ARP, uip_len=60
httpd: PTM UIP_ETHTYPE_ARP, uip_len=60
httpd: PTM UIP_ETHTYPE_ARP, uip_len=60
httpd: PTM UIP_ETHTYPE_ARP, uip_len=60
httpd: PTM UIP_ETHTYPE_ARP, uip_len=60
offset is 0, offset = 1 is GET , = 0 is POST
Open index.html
httpd_appcall 414 : Send file later len:859:
offset is 1, offset = 1 is GET , = 0 is POST
mime_content_body 360: Current_Length: 5181382 content_len: 5246888
mime_content_body 360: Current_Length: 5181894 content_len: 5246888
mime_content_body 360: Current_Length: 5182406 content_len: 5246888
mime_content_body 360: Current_Length: 5182918 content_len: 5246888
mime_content_body 360: Current_Length: 5183430 content_len: 5246888
mime_content_body 360: Current_Length: 5183942 content_len: 5246888
mime_content_body 360: Current_Length: 5184454 content_len: 5246888
mime_content_body 360: Current_Length: 5184966 content_len: 5246888
mime_content_body 360: Current_Length: 5185478 content_len: 5246888
mime_content_body 360: Current_Length: 5185990 content_len: 5246888
mime_content_body 360: Current_Length: 5186502 content_len: 5246888
mime_content_body 360: Current_Length: 5187014 content_len: 5246888
mime_content_body 360: Current_Length: 5187526 content_len: 5246888
mime_content_body 360: Current_Length: 5188038 content_len: 5246888
mime_content_body 360: Current_Length: 5188550 content_len: 5246888
mime_content_body 360: Current_Length: 5189062 content_len: 5246888
mime_content_body 360: Current_Length: 5189574 content_len: 5246888
mime_content_body 360: Current_Length: 5190086 content_len: 5246888
mime_content_body 360: Current_Length: 5190598 content_len: 5246888
mime_content_body 360: Current_Length: 5191110 content_len: 5246888
mime_content_body 360: Current_Length: 5191622 content_len: 5246888
mime_content_body 360: Current_Length: 5192134 content_len: 5246888
mime_content_body 360: Current_Length: 5192646 content_len: 5246888
mime_content_body 360: Current_Length: 5193158 content_len: 5246888
mime_content_body 360: Current_Length: 5193670 content_len: 5246888
mime_content_body 360: Current_Length: 5194182 content_len: 5246888
mime_content_body 360: Current_Length: 5194694 content_len: 5246888
mime_content_body 360: Current_Length: 5195206 content_len: 5246888
mime_content_body 360: Current_Length: 5195718 content_len: 5246888
mime_content_body 360: Current_Length: 5196230 content_len: 5246888
mime_content_body 360: Current_Length: 5196742 content_len: 5246888
mime_content_body 360: Current_Length: 5197254 content_len: 5246888
mime_content_body 360: Current_Length: 5197766 content_len: 5246888
mime_content_body 360: Current_Length: 5198278 content_len: 5246888
mime_content_body 360: Current_Length: 5198790 content_len: 5246888
mime_content_body 360: Current_Length: 5199302 content_len: 5246888
mime_content_body 360: Current_Length: 5199814 content_len: 5246888
mime_content_body 360: Current_Length: 5200326 content_len: 5246888
mime_content_body 360: Current_Length: 5200838 content_len: 5246888
mime_content_body 360: Current_Length: 5201350 content_len: 5246888
mime_content_body 360: Current_Length: 5201862 content_len: 5246888
mime_content_body 360: Current_Length: 5202374 content_len: 5246888
mime_content_body 360: Current_Length: 5202886 content_len: 5246888
mime_content_body 360: Current_Length: 5203398 content_len: 5246888
mime_content_body 360: Current_Length: 5203910 content_len: 5246888
mime_content_body 360: Current_Length: 5204422 content_len: 5246888
mime_content_body 360: Current_Length: 5204934 content_len: 5246888
mime_content_body 360: Current_Length: 5205446 content_len: 5246888
mime_content_body 360: Current_Length: 5205958 content_len: 5246888
mime_content_body 360: Current_Length: 5206470 content_len: 5246888
mime_content_body 360: Current_Length: 5206982 content_len: 5246888
mime_content_body 360: Current_Length: 5207494 content_len: 5246888
mime_content_body 360: Current_Length: 5208006 content_len: 5246888
mime_content_body 360: Current_Length: 5208518 content_len: 5246888
mime_content_body 360: Current_Length: 5209030 content_len: 5246888
mime_content_body 360: Current_Length: 5209542 content_len: 5246888
mime_content_body 360: Current_Length: 5210054 content_len: 5246888
mime_content_body 360: Current_Length: 5210566 content_len: 5246888
mime_content_body 360: Current_Length: 5211078 content_len: 5246888
mime_content_body 360: Current_Length: 5211590 content_len: 5246888
mime_content_body 360: Current_Length: 5212102 content_len: 5246888
mime_content_body 360: Current_Length: 5212614 content_len: 5246888
mime_content_body 360: Current_Length: 5213126 content_len: 5246888
mime_content_body 360: Current_Length: 5213638 content_len: 5246888
mime_content_body 360: Current_Length: 5214150 content_len: 5246888
mime_content_body 360: Current_Length: 5214662 content_len: 5246888
mime_content_body 360: Current_Length: 5215174 content_len: 5246888
mime_content_body 360: Current_Length: 5215686 content_len: 5246888
mime_content_body 360: Current_Length: 5216198 content_len: 5246888
mime_content_body 360: Current_Length: 5216710 content_len: 5246888
mime_content_body 360: Current_Length: 5217222 content_len: 5246888
mime_content_body 360: Current_Length: 5217734 content_len: 5246888
mime_content_body 360: Current_Length: 5218246 content_len: 5246888
mime_content_body 360: Current_Length: 5218758 content_len: 5246888
mime_content_body 360: Current_Length: 5219270 content_len: 5246888
mime_content_body 360: Current_Length: 5219782 content_len: 5246888
mime_content_body 360: Current_Length: 5220294 content_len: 5246888
mime_content_body 360: Current_Length: 5220806 content_len: 5246888
mime_content_body 360: Current_Length: 5221318 content_len: 5246888
mime_content_body 360: Current_Length: 5221830 content_len: 5246888
mime_content_body 360: Current_Length: 5222342 content_len: 5246888
mime_content_body 360: Current_Length: 5222854 content_len: 5246888
mime_content_body 360: Current_Length: 5223366 content_len: 5246888
mime_content_body 360: Current_Length: 5223878 content_len: 5246888
mime_content_body 360: Current_Length: 5224390 content_len: 5246888
mime_content_body 360: Current_Length: 5224902 content_len: 5246888
mime_content_body 360: Current_Length: 5225414 content_len: 5246888
mime_content_body 360: Current_Length: 5225926 content_len: 5246888
mime_content_body 360: Current_Length: 5226438 content_len: 5246888
mime_content_body 360: Current_Length: 5226950 content_len: 5246888
mime_content_body 360: Current_Length: 5227462 content_len: 5246888
mime_content_body 360: Current_Length: 5227974 content_len: 5246888
mime_content_body 360: Current_Length: 5228486 content_len: 5246888
mime_content_body 360: Current_Length: 5228998 content_len: 5246888
mime_content_body 360: Current_Length: 5229510 content_len: 5246888
mime_content_body 360: Current_Length: 5230022 content_len: 5246888
mime_content_body 360: Current_Length: 5230534 content_len: 5246888
mime_content_body 360: Current_Length: 5231046 content_len: 5246888
mime_content_body 360: Current_Length: 5231558 content_len: 5246888
mime_content_body 360: Current_Length: 5232070 content_len: 5246888
mime_content_body 360: Current_Length: 5232582 content_len: 5246888
mime_content_body 360: Current_Length: 5233094 content_len: 5246888
mime_content_body 360: Current_Length: 5233606 content_len: 5246888
mime_content_body 360: Current_Length: 5234118 content_len: 5246888
mime_content_body 360: Current_Length: 5234630 content_len: 5246888
mime_content_body 360: Current_Length: 5235142 content_len: 5246888
mime_content_body 360: Current_Length: 5235654 content_len: 5246888
mime_content_body 360: Current_Length: 5236166 content_len: 5246888
mime_content_body 360: Current_Length: 5236678 content_len: 5246888
mime_content_body 360: Current_Length: 5237190 content_len: 5246888
mime_content_body 360: Current_Length: 5237702 content_len: 5246888
mime_content_body 360: Current_Length: 5238214 content_len: 5246888
mime_content_body 360: Current_Length: 5238726 content_len: 5246888
mime_content_body 360: Current_Length: 5239238 content_len: 5246888
mime_content_body 360: Current_Length: 5239750 content_len: 5246888
mime_content_body 360: Current_Length: 5240262 content_len: 5246888
mime_content_body 360: Current_Length: 5240774 content_len: 5246888
mime_content_body 360: Current_Length: 5241286 content_len: 5246888
mime_content_body 360: Current_Length: 5241798 content_len: 5246888
mime_content_body 360: Current_Length: 5242310 content_len: 5246888
mime_content_body 360: Current_Length: 5242822 content_len: 5246888
mime_content_body 360: Current_Length: 5243334 content_len: 5246888
mime_content_body 360: Current_Length: 5243846 content_len: 5246888
mime_content_body 360: Current_Length: 5244358 content_len: 5246888
mime_content_body 360: Current_Length: 5244870 content_len: 5246888
mime_content_body 360: Current_Length: 5245382 content_len: 5246888
mime_content_body 360: Current_Length: 5245894 content_len: 5246888
mime_content_body 360: Current_Length: 5246406 content_len: 5246888
mime_content_body 360: Current_Length: 5246888 content_len: 5246888
mime_content_body 371 congraturation! size: 5246656, go to count down
http_appcall() : send count down page 
httpd_appcall 414 : Send file later len:1135:
Hit any key to stop autoboot:  0 
## Executing script at 42000000
crc32+ 
------------------------------------------------------------

LEDE TEW-827DRU script START.

Flashing the UBI image...
## Copying &#039;ubi-image&#039; subimage from FIT image at 42000000 ...
crc32+ 
NAND erase: device 0 offset 0x58a0000, size 0x4000000
Erasing at 0x9880000 -- 100% complete.
OK

NAND write: device 0 offset 0x58a0000, size 0x500000
 5242880 bytes written: OK
Done flashing UBI image.

Flashing the BOOTCONFIG image...
## Copying &#039;bootconfig&#039; subimage from FIT image at 42000000 ...
crc32+ 
NAND erase: device 0 offset 0x5340000, size 0x60000
Erasing at 0x5380000 -- 100% complete.
OK

NAND write: device 0 offset 0x5340000, size 0x800
 2048 bytes written: OK
Done flashing BOOTCONFIG image.

LEDE TEW-827DRU script END.

------------------------------------------------------------

resetting ...

Resetting with watch dog!


U-Boot 2012.07 [Standard IPQ806X.LN,r40331] (Nov 17 2015 - 19:33:37)

smem ram ptable found: ver: 0 len: 5
DRAM:  491 MiB
NAND:  SF: Unsupported manufacturer 00
ipq_spi: SPI Flash not found (bus/cs/speed/mode) = (0/0/48000000/0)
256 MiB
MMC:   
PCI0 Link Intialized
PCI1 Link Intialized
In:    serial
Out:   serial
Err:   serial
cdp: get part failed for 0:HLOS
Net:   MAC1 addr:0:3:7f:ba:db:1
athrs17_reg_init: complete
athrs17_vlan_config ...done
S17c init  done
MAC2 addr:0:3:7f:ba:db:2
eth0, eth1
Hit any key to stop autoboot:  0 
MMC Device 0 not found
MMC Device 0 not found
Creating 1 MTD partitions on &quot;nand0&quot;:
0x0000058a0000-0x0000098a0000 : &quot;mtd=0&quot;
UBI: attaching mtd1 to ubi0
UBI: physical eraseblock size:   131072 bytes (128 KiB)
UBI: logical eraseblock size:    126976 bytes
UBI: smallest flash I/O unit:    2048
UBI: VID header offset:          2048 (aligned 2048)
UBI: data offset:                4096
UBI: volume 2 (&quot;rootfs_data&quot;) re-sized from 9 to 465 LEBs
UBI: attached mtd1 to ubi0
UBI: MTD device name:            &quot;mtd=0&quot;
UBI: MTD device size:            64 MiB
UBI: number of good PEBs:        512
UBI: number of bad PEBs:         0
UBI: max. allowed volumes:       128
UBI: wear-leveling threshold:    4096
UBI: number of internal volumes: 1
UBI: number of user volumes:     3
UBI: available PEBs:             0
UBI: total number of reserved PEBs: 512
UBI: number of PEBs reserved for bad PEB handling: 5
UBI: max/mean erase counter: 1/0
Read 0 bytes from volume kernel to 44000000
No size specified -&gt; Using max size (2031616)
   Image Name:   ARM LEDE Linux-4.4.21
   Image Type:   ARM Linux Kernel Image (uncompressed)
   Data Size:    2014181 Bytes = 1.9 MiB
   Load Address: 42208000
   Entry Point:  42208000
   Verifying Checksum ... OK
   Loading Kernel Image ... OK
OK

device nand0 &lt;nand0&gt;, # parts = 1
 #: name                size            offset          mask_flags
 0: fs                  0x04000000      0x058a0000      0

active partition: nand0,0 - (fs) 0x04000000 @ 0x058a0000

defaults:
mtdids  : none
mtdparts: none
Using machid 0x1260 from environment

Starting kernel ...

[    0.000000] Booting Linux on physical CPU 0x0
[    0.000000] Linux version 4.4.21 (shara@panic) (gcc version 5.4.0 (LEDE GCC 5.4.0 r1597+3) ) #0 SMP PREEMPT Sun Sep 18 03:36:02 2016
[    0.000000] CPU: ARMv7 Processor [512f04d0] revision 0 (ARMv7), cr=10c5787d
[    0.000000] CPU: PIPT / VIPT nonaliasing data cache, PIPT instruction cache
[    0.000000] Machine model: TRENDnet TEW-827DRU
[    0.000000] Memory policy: Data cache writealloc
[    0.000000] PERCPU: Embedded 11 pages/cpu @ddc12000 s14912 r8192 d21952 u45056
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 121920
[    0.000000] Kernel command line: console=ttyMSM0,115200n8 ubi.mtd=11 ubi.block=0,1 root=/dev/ubiblock0_1 rootfstype=squashfs
[    0.000000] Bootloader command line (ignored): console=ttyHSL1,115200n8 ubi.mtd=rootfs root=mtd:ubi_rootfs rootfstype=squashfs
[    0.000000] PID hash table entries: 2048 (order: 1, 8192 bytes)
[    0.000000] Dentry cache hash table entries: 65536 (order: 6, 262144 bytes)
[    0.000000] Inode-cache hash table entries: 32768 (order: 5, 131072 bytes)
[    0.000000] Memory: 480668K/491520K available (4098K kernel code, 240K rwdata, 1564K rodata, 200K init, 287K bss, 10852K reserved, 0K cma-reserved, 0K highmem)
[    0.000000] Virtual kernel memory layout:
[    0.000000]     vector  : 0xffff0000 - 0xffff1000   (   4 kB)
[    0.000000]     fixmap  : 0xffc00000 - 0xfff00000   (3072 kB)
[    0.000000]     vmalloc : 0xde800000 - 0xff800000   ( 528 MB)
[    0.000000]     lowmem  : 0xc0000000 - 0xde000000   ( 480 MB)
[    0.000000]     pkmap   : 0xbfe00000 - 0xc0000000   (   2 MB)
[    0.000000]     modules : 0xbf000000 - 0xbfe00000   (  14 MB)
[    0.000000]       .text : 0xc0208000 - 0xc078fba0   (5663 kB)
[    0.000000]       .init : 0xc0790000 - 0xc07c2000   ( 200 kB)
[    0.000000]       .data : 0xc07c2000 - 0xc07fe1f8   ( 241 kB)
[    0.000000]        .bss : 0xc0801000 - 0xc0848f34   ( 288 kB)
[    0.000000] SLUB: HWalign=64, Order=0-3, MinObjects=0, CPUs=2, Nodes=1
[    0.000000] Preemptible hierarchical RCU implementation.
[    0.000000]  RCU restricting CPUs from NR_CPUS=4 to nr_cpu_ids=2.
[    0.000000] RCU: Adjusting geometry for rcu_fanout_leaf=16, nr_cpu_ids=2
[    0.000000] NR_IRQS:16 nr_irqs:16 16
[    0.000000] clocksource: dg_timer: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 305801671480 ns
[    0.000008] sched_clock: 32 bits at 6MHz, resolution 160ns, wraps every 343597383600ns
[    0.000022] Switching to timer-based delay loop, resolution 160ns
[    0.000181] Calibrating delay loop (skipped), value calculated using timer frequency.. 12.50 BogoMIPS (lpj=62500)
[    0.000204] pid_max: default: 32768 minimum: 301
[    0.000342] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.000360] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.000975] CPU: Testing write buffer coherency: ok
[    0.001289] CPU0: thread -1, cpu 0, socket 0, mpidr 80000000
[    0.001398] Setting up static identity map for 0x42208280 - 0x422082d8
[    0.094500] CPU1: thread -1, cpu 1, socket 0, mpidr 80000001
[    0.094664] Brought up 2 CPUs
[    0.094688] SMP: Total of 2 processors activated (25.00 BogoMIPS).
[    0.094700] CPU: All CPU(s) started in SVC mode.
[    0.103511] VFP support v0.3: implementor 51 architecture 64 part 4d variant 2 rev 0
[    0.104067] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604462750000 ns
[    0.104245] pinctrl core: initialized pinctrl subsystem
[    0.105821] NET: Registered protocol family 16
[    0.106129] DMA: preallocated 256 KiB pool for atomic coherent allocations
[    0.134965] cpuidle: using governor ladder
[    0.165974] cpuidle: using governor menu
[    0.181769] qcom_rpm 108000.rpm: RPM firmware 3.0.16777342
[    0.220140] pps_core: LinuxPPS API ver. 1 registered
[    0.220156] pps_core: Software ver. 5.3.6 - Copyright 2005-2007 Rodolfo Giometti &lt;giometti@linux.it&gt;
[    0.220208] PTP clock support registered
[    0.221482] clocksource: Switched to clocksource dg_timer
[    0.223523] NET: Registered protocol family 2
[    0.224334] TCP established hash table entries: 4096 (order: 2, 16384 bytes)
[    0.224380] TCP bind hash table entries: 4096 (order: 3, 32768 bytes)
[    0.224435] TCP: Hash tables configured (established 4096 bind 4096)
[    0.224496] UDP hash table entries: 256 (order: 1, 8192 bytes)
[    0.224524] UDP-Lite hash table entries: 256 (order: 1, 8192 bytes)
[    0.224770] NET: Registered protocol family 1
[    0.226612] futex hash table entries: 512 (order: 3, 32768 bytes)
[    0.226742] No memory allocated for crashlog
[    0.235601] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.235633] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.238755] io scheduler noop registered
[    0.238784] io scheduler deadline registered (default)
[    0.240263] 1b500000.pci supply vdda not found, using dummy regulator
[    0.240373] 1b500000.pci supply vdda_phy not found, using dummy regulator
[    0.240483] 1b500000.pci supply vdda_refclk not found, using dummy regulator
[    0.240934] PCI host bridge /soc/pci@1b500000 ranges:
[    0.240980]    IO 0x0fe00000..0x0fefffff -&gt; 0x0fe00000
[    0.241006]   MEM 0x08000000..0x0fdfffff -&gt; 0x08000000
[    0.270305] qcom-pcie 1b500000.pci: PCI host bridge to bus 0000:00
[    0.270330] pci_bus 0000:00: root bus resource [bus 00-ff]
[    0.270352] pci_bus 0000:00: root bus resource [io  0x0000-0xfffff] (bus address [0xfe00000-0xfefffff])
[    0.270370] pci_bus 0000:00: root bus resource [mem 0x08000000-0x0fdfffff]
[    0.271131] PCI: bus0: Fast back to back transfers disabled
[    0.273544] PCI: bus1: Fast back to back transfers disabled
[    0.273861] pci 0000:00:00.0: BAR 8: assigned [mem 0x08000000-0x081fffff]
[    0.273888] pci 0000:01:00.0: BAR 0: assigned [mem 0x08000000-0x081fffff 64bit]
[    0.274006] pci 0000:00:00.0: PCI bridge to [bus 01]
[    0.274031] pci 0000:00:00.0:   bridge window [mem 0x08000000-0x081fffff]
[    0.274445] pcieport 0000:00:00.0: Signaling PME through PCIe PME interrupt
[    0.274464] pci 0000:01:00.0: Signaling PME through PCIe PME interrupt
[    0.275174] 1b700000.pci supply vdda not found, using dummy regulator
[    0.275278] 1b700000.pci supply vdda_phy not found, using dummy regulator
[    0.275396] 1b700000.pci supply vdda_refclk not found, using dummy regulator
[    0.275800] PCI host bridge /soc/pci@1b700000 ranges:
[    0.275838]    IO 0x31e00000..0x31efffff -&gt; 0x31e00000
[    0.275861]   MEM 0x2e000000..0x31dfffff -&gt; 0x2e000000
[    0.304250] qcom-pcie 1b700000.pci: PCI host bridge to bus 0001:00
[    0.304275] pci_bus 0001:00: root bus resource [bus 00-ff]
[    0.304292] pci_bus 0001:00: root bus resource [mem 0x2e000000-0x31dfffff]
[    0.304965] PCI: bus0: Fast back to back transfers disabled
[    0.307101] PCI: bus1: Fast back to back transfers disabled
[    0.307549] pci 0001:00:00.0: BAR 8: assigned [mem 0x2e000000-0x2e1fffff]
[    0.307574] pci 0001:01:00.0: BAR 0: assigned [mem 0x2e000000-0x2e1fffff 64bit]
[    0.307687] pci 0001:00:00.0: PCI bridge to [bus 01]
[    0.307709] pci 0001:00:00.0:   bridge window [mem 0x2e000000-0x2e1fffff]
[    0.308096] pcieport 0001:00:00.0: Signaling PME through PCIe PME interrupt
[    0.308112] pci 0001:01:00.0: Signaling PME through PCIe PME interrupt
[    0.308810] 1b900000.pci supply vdda not found, using dummy regulator
[    0.308912] 1b900000.pci supply vdda_phy not found, using dummy regulator
[    0.309016] 1b900000.pci supply vdda_refclk not found, using dummy regulator
[    0.309414] PCI host bridge /soc/pci@1b900000 ranges:
[    0.309451]    IO 0x35e00000..0x35efffff -&gt; 0x35e00000
[    0.309474]   MEM 0x32000000..0x35dfffff -&gt; 0x32000000
[    0.442530] qcom-pcie 1b900000.pci: link initialization failed
[    0.444362] ------------[ cut here ]------------
[    0.444394] WARNING: CPU: 0 PID: 1 at drivers/clk/qcom/clk-branch.c:97 clk_branch_toggle+0x140/0x15c()
[    0.444407] pcie2_phy_clk status stuck at &#039;on&#039;
[    0.444418] Modules linked in:
[    0.444446] CPU: 0 PID: 1 Comm: swapper/0 Not tainted 4.4.21 #0
[    0.444459] Hardware name: Qualcomm (Flattened Device Tree)
[    0.444499] [&lt;c02217a0&gt;] (unwind_backtrace) from [&lt;c021e040&gt;] (show_stack+0x14/0x20)
[    0.444536] [&lt;c021e040&gt;] (show_stack) from [&lt;c03c45b8&gt;] (dump_stack+0x88/0x9c)
[    0.444569] [&lt;c03c45b8&gt;] (dump_stack) from [&lt;c0229dec&gt;] (warn_slowpath_common+0xa4/0xd0)
[    0.444592] [&lt;c0229dec&gt;] (warn_slowpath_common) from [&lt;c0229e4c&gt;] (warn_slowpath_fmt+0x34/0x4c)
[    0.444619] [&lt;c0229e4c&gt;] (warn_slowpath_fmt) from [&lt;c04eb754&gt;] (clk_branch_toggle+0x140/0x15c)
[    0.444653] [&lt;c04eb754&gt;] (clk_branch_toggle) from [&lt;c04e2b64&gt;] (clk_core_disable+0x58/0x78)
[    0.444679] [&lt;c04e2b64&gt;] (clk_core_disable) from [&lt;c04e354c&gt;] (clk_disable+0x30/0x48)
[    0.444715] [&lt;c04e354c&gt;] (clk_disable) from [&lt;c041dc50&gt;] (qcom_pcie_disable_resources_v0+0x74/0xcc)
[    0.444742] [&lt;c041dc50&gt;] (qcom_pcie_disable_resources_v0) from [&lt;c041d630&gt;] (dw_pcie_host_init+0x3c0/0x52c)
[    0.444767] [&lt;c041d630&gt;] (dw_pcie_host_init) from [&lt;c041e224&gt;] (qcom_pcie_probe+0x40c/0x4a0)
[    0.444792] [&lt;c041e224&gt;] (qcom_pcie_probe) from [&lt;c045172c&gt;] (platform_drv_probe+0x58/0xc8)
[    0.444826] [&lt;c045172c&gt;] (platform_drv_probe) from [&lt;c044fbd4&gt;] (driver_probe_device+0x150/0x330)
[    0.444850] [&lt;c044fbd4&gt;] (driver_probe_device) from [&lt;c044fe24&gt;] (__driver_attach+0x70/0xa0)
[    0.444873] [&lt;c044fe24&gt;] (__driver_attach) from [&lt;c044de28&gt;] (bus_for_each_dev+0x54/0xb4)
[    0.444899] [&lt;c044de28&gt;] (bus_for_each_dev) from [&lt;c044f078&gt;] (bus_add_driver+0xdc/0x224)
[    0.444919] [&lt;c044f078&gt;] (bus_add_driver) from [&lt;c0450608&gt;] (driver_register+0xb0/0x100)
[    0.444951] [&lt;c0450608&gt;] (driver_register) from [&lt;c0214d74&gt;] (do_one_initcall+0x130/0x22c)
[    0.444983] [&lt;c0214d74&gt;] (do_one_initcall) from [&lt;c0790e94&gt;] (kernel_init_freeable+0x148/0x1f8)
[    0.445007] [&lt;c0790e94&gt;] (kernel_init_freeable) from [&lt;c020e944&gt;] (kernel_init+0x14/0x108)
[    0.445032] [&lt;c020e944&gt;] (kernel_init) from [&lt;c0209d38&gt;] (ret_from_fork+0x14/0x3c)
[    0.445066] ---[ end trace 937be3ecdfb1c3db ]---
[    0.445490] qcom-pcie 1b900000.pci: PCI host bridge to bus 0002:00
[    0.445514] pci_bus 0002:00: root bus resource [bus 00-ff]
[    0.445531] pci_bus 0002:00: root bus resource [mem 0x32000000-0x35dfffff]
[    0.445614] PCI: bus0: Fast back to back transfers enabled
[    0.449301] gsbi 16300000.gsbi: GSBI port protocol: 6 crci: 0
[    0.450852] Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled
[    0.452172] msm_serial 16340000.serial: msm_serial: detected port #0
[    0.452286] msm_serial 16340000.serial: uartclk = 1843200
[    0.452358] 16340000.serial: ttyMSM0 at MMIO 0x16340000 (irq = 199, base_baud = 115200) is a MSM
[    0.452408] msm_serial: console setup on port #0
[    1.406068] console [ttyMSM0] enabled
[    1.410916] msm_serial: driver initialized
[    1.417006] nand: device found, Manufacturer ID: 0x01, Chip ID: 0xaa
[    1.418111] nand: AMD/Spansion S34MS02G2
[    1.424717] nand: 256 MiB, SLC, erase size: 128 KiB, page size: 2048, OOB size: 128
[    1.428536] Scanning device for bad blocks
[    1.949610] random: nonblocking pool is initialized
[    3.204093] 15 ofpart partitions found on MTD device qcom-nandc
[    3.204125] Creating 15 MTD partitions on &quot;qcom-nandc&quot;:
[    3.208832] 0x000000000000-0x000000040000 : &quot;SBL1&quot;
[    3.215743] 0x000000040000-0x000000180000 : &quot;MIBIB&quot;
[    3.230896] 0x000000180000-0x0000002c0000 : &quot;SBL2&quot;
[    3.242677] 0x0000002c0000-0x000000540000 : &quot;SBL3&quot;
[    3.244158] 0x000000540000-0x000000660000 : &quot;DDRCONFIG&quot;
[    3.247844] 0x000000660000-0x000000780000 : &quot;SSD&quot;
[    3.253087] 0x000000780000-0x000000a00000 : &quot;TZ&quot;
[    3.268143] 0x000000a00000-0x000000c80000 : &quot;RPM&quot;
[    3.279987] 0x0000053a0000-0x0000058a0000 : &quot;APPSBL&quot;
[    3.291865] 0x000001180000-0x000001200000 : &quot;APPSBLENV&quot;
[    3.293324] 0x000001200000-0x000001340000 : &quot;ART&quot;
[    3.297327] 0x0000058a0000-0x0000098a0000 : &quot;rootfs&quot;
[    3.302342] mtd: device 11 (rootfs) set to be root filesystem
[    3.306664] mtdsplit: no squashfs found in &quot;rootfs&quot;
[    3.311455] 0x000005340000-0x0000053a0000 : &quot;BOOTCONFIG&quot;
[    3.317795] 0x000000c80000-0x000001180000 : &quot;APPSBL_1&quot;
[    3.323293] 0x000001340000-0x000005340000 : &quot;rootfs_1&quot;
[    3.339613] libphy: Fixed MDIO Bus: probed
[    3.340194] libphy: GPIO Bitbanged MDIO: probed
[    3.367556] switch0: Atheros AR8337 rev. 2 switch registered on gpio-0
[    3.633756] stmmac - user ID: 0x10, Synopsys ID: 0x37
[    3.633786]  Ring mode enabled
[    3.637783]  DMA HW capability register supported
[    3.640737]  Enhanced/Alternate descriptors
[    3.645509]  Enabled extended descriptors
[    3.649505]  RX Checksum Offload Engine supported (type 2)
[    3.653753]  TX Checksum insertion supported
[    3.659050]  Wake-Up On Lan supported
[    3.663658]  Enable RX Mitigation via HW Watchdog Timer
[    3.668679] stmmac - user ID: 0x10, Synopsys ID: 0x37
[    3.672160]  Ring mode enabled
[    3.677277]  DMA HW capability register supported
[    3.680232]  Enhanced/Alternate descriptors
[    3.685006]  Enabled extended descriptors
[    3.688998]  RX Checksum Offload Engine supported (type 2)
[    3.693231]  TX Checksum insertion supported
[    3.698547]  Wake-Up On Lan supported
[    3.703124]  Enable RX Mitigation via HW Watchdog Timer
[    3.707329] i2c /dev entries driver
[    3.712987] Speed bin: 0
[    3.715038] PVS bin: 1
[    3.720269] L2 @ QSB rate. Forcing new rate.
[    3.720424] L2 @ 384000 KHz
[    3.724667] CPU0 @ 800000 KHz
[    3.726933] CPU1 @ QSB rate. Forcing new rate.
[    3.730140] CPU1 @ 384000 KHz
[    3.736002] NET: Registered protocol family 10
[    3.739056] NET: Registered protocol family 17
[    3.741966] bridge: automatic filtering via arp/ip/ip6tables has been deprecated. Update your scripts to load br_netfilter if you need this.
[    3.746527] 8021q: 802.1Q VLAN Support v1.8
[    3.759199] Registering SWP/SWPB emulation handler
[    3.771319] ubi0: attaching mtd11
[    4.448779] ubi0: scanning is finished
[    4.463872] ubi0 warning: print_rsvd_warning: cannot reserve enough PEBs for bad PEB handling, reserved 5, need 40
[    4.464953] ubi0: attached mtd11 (name &quot;rootfs&quot;, size 64 MiB)
[    4.473168] ubi0: PEB size: 131072 bytes (128 KiB), LEB size: 126976 bytes
[    4.478921] ubi0: min./max. I/O unit sizes: 2048/2048, sub-page size 2048
[    4.485752] ubi0: VID header offset: 2048 (aligned 2048), data offset: 4096
[    4.492624] ubi0: good PEBs: 512, bad PEBs: 0, corrupted PEBs: 0
[    4.499318] ubi0: user volume: 3, internal volumes: 1, max. volumes count: 128
[    4.505622] ubi0: max/mean erase counter: 1/0, WL threshold: 4096, image sequence number: 1469445590
[    4.512682] ubi0: available PEBs: 0, total reserved PEBs: 512, PEBs reserved for bad PEB handling: 5
[    4.522098] ubi0: background thread &quot;ubi_bgt0d&quot; started, PID 54
[    4.531554] block ubiblock0_1: created from ubi0:1(rootfs)
[    4.537284] UBI error: block: can&#039;t add &#039;rootfs&#039; volume, err=-17
[    4.542282] hctosys: unable to open rtc device (rtc0)
[    4.559050] VFS: Mounted root (squashfs filesystem) readonly on device 254:0.
[    4.559233] Freeing unused kernel memory: 200K (c0790000 - c07c2000)
[    4.976821] init: Console is alive
[    4.976968] init: - watchdog -
[    5.485707] usbcore: registered new interface driver usbfs
[    5.485779] usbcore: registered new interface driver hub
[    5.490179] usbcore: registered new device driver usb
[    5.499581] SCSI subsystem initialized
[    5.517021] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[    5.517472] ehci-platform: EHCI generic platform driver
[    5.525423] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
[    5.528009] ohci-platform: OHCI generic platform driver
[    6.018425] xhci-hcd xhci-hcd.0.auto: xHCI Host Controller
[    6.018472] xhci-hcd xhci-hcd.0.auto: new USB bus registered, assigned bus number 1
[    6.023119] xhci-hcd xhci-hcd.0.auto: hcc params 0x0228f065 hci version 0x100 quirks 0x00010010
[    6.030487] xhci-hcd xhci-hcd.0.auto: irq 200, io mem 0x11000000
[    6.039778] hub 1-0:1.0: USB hub found
[    6.045433] hub 1-0:1.0: 1 port detected
[    6.049188] xhci-hcd xhci-hcd.0.auto: xHCI Host Controller
[    6.053036] xhci-hcd xhci-hcd.0.auto: new USB bus registered, assigned bus number 2
[    6.058305] usb usb2: We don&#039;t know the algorithms for LPM for this host, disabling LPM.
[    6.066360] hub 2-0:1.0: USB hub found
[    6.074181] hub 2-0:1.0: 1 port detected
[    6.078043] xhci-hcd xhci-hcd.1.auto: xHCI Host Controller
[    6.081820] xhci-hcd xhci-hcd.1.auto: new USB bus registered, assigned bus number 3
[    6.087207] xhci-hcd xhci-hcd.1.auto: hcc params 0x0228f065 hci version 0x100 quirks 0x00010010
[    6.094686] xhci-hcd xhci-hcd.1.auto: irq 201, io mem 0x10000000
[    6.103852] hub 3-0:1.0: USB hub found
[    6.109545] hub 3-0:1.0: 1 port detected
[    6.113447] xhci-hcd xhci-hcd.1.auto: xHCI Host Controller
[    6.117166] xhci-hcd xhci-hcd.1.auto: new USB bus registered, assigned bus number 4
[    6.122580] usb usb4: We don&#039;t know the algorithms for LPM for this host, disabling LPM.
[    6.130518] hub 4-0:1.0: USB hub found
[    6.138433] hub 4-0:1.0: 1 port detected
[    6.150860] init: - preinit -
[    6.361897] usb 1-1: new high-speed USB device number 2 using xhci-hcd
/bin/board_detect: line 12: Unsupported: not found
Press the [f] key and hit [enter] to enter failsafe mode
Press the [1], [2], [3] or [4] key and hit [enter] to select the debug level
[    9.202863] ipq806x-gmac-dwmac 37400000.ethernet eth1: Link is Up - 1Gbps/Full - flow control off
[   10.344040] UBIFS (ubi0:2): default file-system created
[   10.345289] UBIFS (ubi0:2): background thread &quot;ubifs_bgt0_2&quot; started, PID 163
[   10.468212] UBIFS (ubi0:2): UBIFS: mounted UBI device 0, volume 2, name &quot;rootfs_data&quot;
[   10.468241] UBIFS (ubi0:2): LEB size: 126976 bytes (124 KiB), min./max. I/O unit sizes: 2048 bytes/2048 bytes
[   10.475094] UBIFS (ubi0:2): FS size: 57774080 bytes (55 MiB, 455 LEBs), journal size 2920448 bytes (2 MiB, 23 LEBs)
[   10.484988] UBIFS (ubi0:2): reserved for root: 2728812 bytes (2664 KiB)
[   10.495220] UBIFS (ubi0:2): media format: w4/r0 (latest is w4/r0), UUID 678B52BC-5863-48AD-A1B4-DE0BED085E3B, small LPT model
[   10.504601] mount_root: overlay filesystem has not been fully initialized yet
[   10.513726] mount_root: switching to ubifs overlay
[   10.523459] urandom-seed: Seed file not found (/etc/urandom.seed)
[   10.595957] procd: - early -
[   10.596027] procd: - watchdog -
[   11.211836] procd: - ubus -
[   11.264012] procd: - init -
Please press Enter to activate this console.
[   11.358637] ip6_tables: (C) 2000-2006 Netfilter Core Team
[   11.362689] Loading modules backported from Linux version wt-2016-06-20-0-gbc17424
[   11.363015] Backport generated by backports.git backports-20160216-7-g5735958
[   11.417478] ath10k_pci 0000:01:00.0: enabling device (0140 -&gt; 0142)
[   11.418032] ath10k_pci 0000:01:00.0: pci irq msi oper_irq_mode 2 irq_mode 0 reset_mode 0
[   11.553884] ath10k_pci 0000:01:00.0: Direct firmware load for ath10k/pre-cal-pci-0000:01:00.0.bin failed with error -2
[   11.553914] ath10k_pci 0000:01:00.0: Falling back to user helper
[   11.579330] firmware ath10k!pre-cal-pci-0000:01:00.0.bin: firmware_loading_store: map pages failed
[   11.579571] ath10k_pci 0000:01:00.0: Direct firmware load for ath10k/cal-pci-0000:01:00.0.bin failed with error -2
[   11.587294] ath10k_pci 0000:01:00.0: Falling back to user helper
[   12.023161] ath10k_pci 0000:01:00.0: qca99x0 hw2.0 target 0x01000000 chip_id 0x003b01ff sub 168c:0002
[   12.023201] ath10k_pci 0000:01:00.0: kconfig debug 0 debugfs 1 tracing 0 dfs 1 testmode 1
[   12.032901] ath10k_pci 0000:01:00.0: firmware ver 10.4.1.00030-1 api 5 features no-p2p crc32 d2901e01
[   12.039814] ath10k_pci 0000:01:00.0: failed to fetch board data for bus=pci,vendor=168c,device=0040,subsystem-vendor=168c,subsystem-device=0002 from ath10k/QCA99X0/hw2.0/board-2.bin
[   12.049018] ath10k_pci 0000:01:00.0: board_file api 1 bmi_id N/A crc32 7e56fd07
[   13.233416] ath10k_pci 0000:01:00.0: htt-ver 2.2 wmi-op 6 htt-op 4 cal file max-sta 512 raw 0 hwcrypto 1
[   13.310074] ath10k_pci 0001:01:00.0: enabling device (0140 -&gt; 0142)
[   13.310660] ath10k_pci 0001:01:00.0: pci irq msi oper_irq_mode 2 irq_mode 0 reset_mode 0
[   13.443581] ath10k_pci 0001:01:00.0: Direct firmware load for ath10k/pre-cal-pci-0001:01:00.0.bin failed with error -2
[   13.443618] ath10k_pci 0001:01:00.0: Falling back to user helper
[   13.527196] firmware ath10k!pre-cal-pci-0001:01:00.0.bin: firmware_loading_store: map pages failed
[   13.527443] ath10k_pci 0001:01:00.0: Direct firmware load for ath10k/cal-pci-0001:01:00.0.bin failed with error -2
[   13.535163] ath10k_pci 0001:01:00.0: Falling back to user helper
[   13.808056] ath10k_pci 0001:01:00.0: qca99x0 hw2.0 target 0x01000000 chip_id 0x003b01ff sub 168c:0002
[   13.808095] ath10k_pci 0001:01:00.0: kconfig debug 0 debugfs 1 tracing 0 dfs 1 testmode 1
[   13.817967] ath10k_pci 0001:01:00.0: firmware ver 10.4.1.00030-1 api 5 features no-p2p crc32 d2901e01
[   13.825114] ath10k_pci 0001:01:00.0: failed to fetch board data for bus=pci,vendor=168c,device=0040,subsystem-vendor=168c,subsystem-device=0002 from ath10k/QCA99X0/hw2.0/board-2.bin
[   13.833804] ath10k_pci 0001:01:00.0: board_file api 1 bmi_id N/A crc32 7e56fd07
[   15.020528] ath10k_pci 0001:01:00.0: htt-ver 2.2 wmi-op 6 htt-op 4 cal file max-sta 512 raw 0 hwcrypto 1
[   15.080859] ip_tables: (C) 2000-2006 Netfilter Core Team
[   15.084382] nf_conntrack version 0.5.0 (7513 buckets, 30052 max)
[   15.188816] xt_time: kernel timezone is -0000
[   15.192627] PPP generic driver version 2.4.2
[   15.193396] NET: Registered protocol family 24
[   18.577467] IPv6: ADDRCONF(NETDEV_UP): eth1: link is not ready
[   18.585890] device eth1.1 entered promiscuous mode
[   18.585916] device eth1 entered promiscuous mode
[   18.592954] IPv6: ADDRCONF(NETDEV_UP): br-lan: link is not ready
[   20.562107] ipq806x-gmac-dwmac 37400000.ethernet eth1: Link is Up - 1Gbps/Full - flow control off
[   20.562161] IPv6: ADDRCONF(NETDEV_CHANGE): eth1: link becomes ready
[   20.570716] br-lan: port 1(eth1.1) entered forwarding state
[   20.576139] br-lan: port 1(eth1.1) entered forwarding state
[   20.582150] IPv6: ADDRCONF(NETDEV_CHANGE): br-lan: link becomes ready
[   20.601843] ipq806x-gmac-dwmac 37200000.ethernet eth0: Link is Up - 1Gbps/Full - flow control off
[   22.571841] br-lan: port 1(eth1.1) entered forwarding state



BusyBox v1.24.2 () built-in shell (ash)

     _________
    /        /\      _    ___ ___  ___
   /  LE    /  \    | |  | __|   \| __|
  /    DE  /    \   | |__| _|| |) | _|
 /________/  LE  \  |____|___|___/|___|                      lede-project.org
 \        \   DE /
  \    LE  \    /  -----------------------------------------------------------
   \  DE    \  /    Reboot (HEAD, r1619+3)
    \________\/    -----------------------------------------------------------

root@lede:/# 
root@lede:/# hexdump -C -n 84 /dev/mtd12
00000000  a0 a1 a3 a5 00 00 00 00  03 00 00 00 30 3a 41 50  |............0:AP|
00000010  50 53 42 4c 00 00 00 00  00 00 00 00 01 00 00 00  |PSBL............|
00000020  00 00 00 00 72 6f 6f 74  66 73 00 00 00 00 00 00  |....rootfs......|
00000030  00 00 00 00 01 00 00 00  00 00 00 00 6b 65 72 6e  |............kern|
00000040  65 6c 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |el..............|
00000050  00 00 00 00                                       |....|
00000054</code></pre></div><br /><p>Notable errors and warnings:</p><div class="codebox"><pre><code>[    4.537284] UBI error: block: can&#039;t add &#039;rootfs&#039; volume, err=-17</code></pre></div><p>Known issue because of OpenWRT/LEDE&#039;s crazy/crappy UBI patches. This is a non-error error. It happens because the system can&#039;t automatically find the partition named &quot;ubi&quot; into which it should find the rootfs volume.</p><br /><br /><div class="codebox"><pre><code>[   11.553884] ath10k_pci 0000:01:00.0: Direct firmware load for ath10k/pre-cal-pci-0000:01:00.0.bin failed with error -2
[   11.553914] ath10k_pci 0000:01:00.0: Falling back to user helper
[   11.579330] firmware ath10k!pre-cal-pci-0000:01:00.0.bin: firmware_loading_store: map pages failed
[   11.579571] ath10k_pci 0000:01:00.0: Direct firmware load for ath10k/cal-pci-0000:01:00.0.bin failed with error -2
[   11.587294] ath10k_pci 0000:01:00.0: Falling back to user helper

[   13.443581] ath10k_pci 0001:01:00.0: Direct firmware load for ath10k/pre-cal-pci-0001:01:00.0.bin failed with error -2
[   13.443618] ath10k_pci 0001:01:00.0: Falling back to user helper
[   13.527196] firmware ath10k!pre-cal-pci-0001:01:00.0.bin: firmware_loading_store: map pages failed
[   13.527443] ath10k_pci 0001:01:00.0: Direct firmware load for ath10k/cal-pci-0001:01:00.0.bin failed with error -2
[   13.535163] ath10k_pci 0001:01:00.0: Falling back to user helper</code></pre></div><p>Known garbage errors in the ath10k drivers for the 802.11 network interfaces. Safe to ignore.</p><br /><br /><div class="codebox"><pre><code>[    0.308810] 1b900000.pci supply vdda not found, using dummy regulator
[    0.308912] 1b900000.pci supply vdda_phy not found, using dummy regulator
[    0.309016] 1b900000.pci supply vdda_refclk not found, using dummy regulator
[    0.309414] PCI host bridge /soc/pci@1b900000 ranges:
[    0.309451]    IO 0x35e00000..0x35efffff -&gt; 0x35e00000
[    0.309474]   MEM 0x32000000..0x35dfffff -&gt; 0x32000000
[    0.442530] qcom-pcie 1b900000.pci: link initialization failed
[    0.444362] ------------[ cut here ]------------
[    0.444394] WARNING: CPU: 0 PID: 1 at drivers/clk/qcom/clk-branch.c:97 clk_branch_toggle+0x140/0x15c()
[    0.444407] pcie2_phy_clk status stuck at &#039;on&#039;
[    0.444418] Modules linked in:
[    0.444446] CPU: 0 PID: 1 Comm: swapper/0 Not tainted 4.4.21 #0
[    0.444459] Hardware name: Qualcomm (Flattened Device Tree)
[    0.444499] [&lt;c02217a0&gt;] (unwind_backtrace) from [&lt;c021e040&gt;] (show_stack+0x14/0x20)
[    0.444536] [&lt;c021e040&gt;] (show_stack) from [&lt;c03c45b8&gt;] (dump_stack+0x88/0x9c)
[    0.444569] [&lt;c03c45b8&gt;] (dump_stack) from [&lt;c0229dec&gt;] (warn_slowpath_common+0xa4/0xd0)
[    0.444592] [&lt;c0229dec&gt;] (warn_slowpath_common) from [&lt;c0229e4c&gt;] (warn_slowpath_fmt+0x34/0x4c)
[    0.444619] [&lt;c0229e4c&gt;] (warn_slowpath_fmt) from [&lt;c04eb754&gt;] (clk_branch_toggle+0x140/0x15c)
[    0.444653] [&lt;c04eb754&gt;] (clk_branch_toggle) from [&lt;c04e2b64&gt;] (clk_core_disable+0x58/0x78)
[    0.444679] [&lt;c04e2b64&gt;] (clk_core_disable) from [&lt;c04e354c&gt;] (clk_disable+0x30/0x48)
[    0.444715] [&lt;c04e354c&gt;] (clk_disable) from [&lt;c041dc50&gt;] (qcom_pcie_disable_resources_v0+0x74/0xcc)
[    0.444742] [&lt;c041dc50&gt;] (qcom_pcie_disable_resources_v0) from [&lt;c041d630&gt;] (dw_pcie_host_init+0x3c0/0x52c)
[    0.444767] [&lt;c041d630&gt;] (dw_pcie_host_init) from [&lt;c041e224&gt;] (qcom_pcie_probe+0x40c/0x4a0)
[    0.444792] [&lt;c041e224&gt;] (qcom_pcie_probe) from [&lt;c045172c&gt;] (platform_drv_probe+0x58/0xc8)
[    0.444826] [&lt;c045172c&gt;] (platform_drv_probe) from [&lt;c044fbd4&gt;] (driver_probe_device+0x150/0x330)
[    0.444850] [&lt;c044fbd4&gt;] (driver_probe_device) from [&lt;c044fe24&gt;] (__driver_attach+0x70/0xa0)
[    0.444873] [&lt;c044fe24&gt;] (__driver_attach) from [&lt;c044de28&gt;] (bus_for_each_dev+0x54/0xb4)
[    0.444899] [&lt;c044de28&gt;] (bus_for_each_dev) from [&lt;c044f078&gt;] (bus_add_driver+0xdc/0x224)
[    0.444919] [&lt;c044f078&gt;] (bus_add_driver) from [&lt;c0450608&gt;] (driver_register+0xb0/0x100)
[    0.444951] [&lt;c0450608&gt;] (driver_register) from [&lt;c0214d74&gt;] (do_one_initcall+0x130/0x22c)
[    0.444983] [&lt;c0214d74&gt;] (do_one_initcall) from [&lt;c0790e94&gt;] (kernel_init_freeable+0x148/0x1f8)
[    0.445007] [&lt;c0790e94&gt;] (kernel_init_freeable) from [&lt;c020e944&gt;] (kernel_init+0x14/0x108)
[    0.445032] [&lt;c020e944&gt;] (kernel_init) from [&lt;c0209d38&gt;] (ret_from_fork+0x14/0x3c)
[    0.445066] ---[ end trace 937be3ecdfb1c3db ]---</code></pre></div><p>Not sure at this point. This might be the power regulator? I don&#039;t recall. I will look into it more later.</p><br /><br /><p>[&nbsp; &nbsp; 4.463872] ubi0 warning: print_rsvd_warning: cannot reserve enough PEBs for bad PEB handling, reserved 5, need 40</p><p>I think this is because of the defaults in the UBI creation portion of the LEDE build system. I may need to go fix this so that we have a few more spare blocks. I think five bad blocks would be a lot for this flash, but it isn&#039;t impossible.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338797">
				<div class="post-metadata">
					<div class="post-num">Post #114</div>
					<div class="post-author">jmomo</div>
					<div class="post-datetime">
						21 Sep 2016, 08:36					</div>
				</div>
				<div class="post-content content">
					<p>My router be haunted.</p><p>There is a ghost in the machine doing strange things.</p><p>While trying to write directly to the bootconfig partition in Linux, I am finding that something is altering the data as it is being written. I write one thing with dd and get something else entirely. I&#039;ve learned that if I want to unset byte 6, which is the upgrade-in-progress byte, I need to set byte 7 to 01 instead.</p><p>The OEM system unsets a Safe Upgrade by writing to some nodes in sysfs: /sys/devices/system/qfprom/qfprom0/version</p><p>qfprom? NOPE NOPE NOPE</p><p>It might be writing to the IMEM though. I don&#039;t know. I need to look at the OEM source code more.</p><p>For now, I am just going to disable installs via the OEM web interface. We can still install via the recovery loader, which is easier to do anyway.</p>											<p class="post-edited">(Last edited by <strong>jmomo</strong> on 21 Sep 2016, 08:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338812">
				<div class="post-metadata">
					<div class="post-num">Post #115</div>
					<div class="post-author">dissent</div>
					<div class="post-datetime">
						21 Sep 2016, 13:57					</div>
				</div>
				<div class="post-content content">
					<p>Want to try this way if setting USB nodes to check if usb3 issue is still there? <a href="https://github.com/dissent1/r7800/commit/1502aba386c8d20c16d7a064c924775bd484ac06">https://github.com/dissent1/r7800/commi … 5bd484ac06</a></p>											<p class="post-edited">(Last edited by <strong>dissent</strong> on 21 Sep 2016, 14:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338864">
				<div class="post-metadata">
					<div class="post-num">Post #116</div>
					<div class="post-author">jmomo</div>
					<div class="post-datetime">
						22 Sep 2016, 02:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dissent wrote:</cite><blockquote><p>Want to try this way if setting USB nodes to check if usb3 issue is still there? <a href="https://github.com/dissent1/r7800/commit/1502aba386c8d20c16d7a064c924775bd484ac06">https://github.com/dissent1/r7800/commi … 5bd484ac06</a></p></blockquote></div><p>Thanks! It will be a few days before I can test this.</p><p>Were you having similar issues on your device, or did you have some other motivation for this change?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338883">
				<div class="post-metadata">
					<div class="post-num">Post #117</div>
					<div class="post-author">dissent</div>
					<div class="post-datetime">
						22 Sep 2016, 09:40					</div>
				</div>
				<div class="post-content content">
					<p>Nope, I don&#039;t have issues with usb3 like yours, I&#039;m just playing with device tree and looking for changes that could give any benefit <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Maybe you can pull down and pull up pins for USB right after boot process to hard reset the hub?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p339208">
				<div class="post-metadata">
					<div class="post-num">Post #118</div>
					<div class="post-author">jmomo</div>
					<div class="post-datetime">
						26 Sep 2016, 07:00					</div>
				</div>
				<div class="post-content content">
					<p>Stability for the last four days of uptime have been good and my device is seeing real-world use. I am going to be sending out a couple of these to remote sites soon given the success.</p><p>Wireless performance has been good compared to my old 802.11n router. My .11n laptop is seeing a very large performance increase over the old router, all conditions being held the same. My other main device is .11ac, so it obviously is seeing a large benefit. I tested something like 200Mbps bidirectional the other day on 5Ghz with about 15 meters, a floor and two walls of distance.</p><p>I wish I had bought another spare unit when they were on sale. TRENDnet jacked up the price to $170 USD on amazon, which rather uncompetitive. Then again, TP-Link also raised the price of their unit to $162, so it&#039;s not that crazy. The best deal on US Amazon right now seems to be the refurbished EA8500 for $155.</p><p>I am seeing these messages in syslog at regular intervals: (EDIT: Other qca9980 devices report seeing the same, nothing important here)</p><div class="codebox"><pre><code>system-20160923.log:Fri Sep 23 06:54:43 2016 kern.warn kernel: [196944.880927] ath10k_pci 0000:01:00.0: Unknown eventid: 36903
system-20160923.log:Fri Sep 23 06:58:02 2016 kern.warn kernel: [197143.988226] ath10k_pci 0000:01:00.0: Unknown eventid: 36903
system-20160923.log:Fri Sep 23 08:55:38 2016 kern.warn kernel: [204199.750083] ath10k_pci 0000:01:00.0: Unknown eventid: 36903
system-20160923.log:Fri Sep 23 08:59:09 2016 kern.warn kernel: [204411.377435] ath10k_pci 0000:01:00.0: Unknown eventid: 36903
system-20160923.log:Fri Sep 23 10:56:32 2016 kern.warn kernel: [211454.622795] ath10k_pci 0000:01:00.0: Unknown eventid: 36903
system-20160923.log:Fri Sep 23 11:00:16 2016 kern.warn kernel: [211678.526719] ath10k_pci 0000:01:00.0: Unknown eventid: 36903</code></pre></div>											<p class="post-edited">(Last edited by <strong>jmomo</strong> on 27 Sep 2016, 13:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p339867">
				<div class="post-metadata">
					<div class="post-num">Post #119</div>
					<div class="post-author">jmomo</div>
					<div class="post-datetime">
						1 Oct 2016, 05:18					</div>
				</div>
				<div class="post-content content">
					<p>I added a WikiDevi page for this device:<br /><a href="https://wikidevi.com/wiki/TRENDnet_TEW-827DRU_v1.0R">https://wikidevi.com/wiki/TRENDnet_TEW-827DRU_v1.0R</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342034">
				<div class="post-metadata">
					<div class="post-num">Post #120</div>
					<div class="post-author">jmomo</div>
					<div class="post-datetime">
						25 Oct 2016, 02:38					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>root@openwrt:~# uptime
 16:37:23 up 33 days, 16:25,  0 users,  load average: 0.00, 0.02, 0.00</code></pre></div><p>Stability of the system is really good!</p><p>I have not had any 802.11 problems either.</p><p>By far, the biggest issue right now are the USB3 ports breaking at boot with flash drives. I worked around it by using a USB2 flash drive instead. I have not had time to work on this but I&#039;ll get back to it eventually.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p343524">
				<div class="post-metadata">
					<div class="post-num">Post #121</div>
					<div class="post-author">dissent</div>
					<div class="post-datetime">
						12 Nov 2016, 21:13					</div>
				</div>
				<div class="post-content content">
					<p>Check this out, maybe it will help you with your usb3 devices<br /><a href="https://github.com/dissent1/r7800/commit/e8ac520dc2ace659e3b2ab7ccf64ecc89a6cab1e">https://github.com/dissent1/r7800/commi … c89a6cab1e</a></p>											<p class="post-edited">(Last edited by <strong>dissent</strong> on 12 Nov 2016, 22:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p343542">
				<div class="post-metadata">
					<div class="post-num">Post #122</div>
					<div class="post-author">jmomo</div>
					<div class="post-datetime">
						13 Nov 2016, 00:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dissent wrote:</cite><blockquote><p>Check this out, maybe it will help you with your usb3 devices<br /><a href="https://github.com/dissent1/r7800/commit/e8ac520dc2ace659e3b2ab7ccf64ecc89a6cab1e">https://github.com/dissent1/r7800/commi … c89a6cab1e</a></p></blockquote></div><p>That looks very interesting. Thank you for bringing this to my attention.</p><p>It might be a few days before I can rebuild and test this, but I will get back to you and let you know how it works out. You have some other changes in your source I want to merge in too.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p343598">
				<div class="post-metadata">
					<div class="post-num">Post #123</div>
					<div class="post-author">dissent</div>
					<div class="post-datetime">
						13 Nov 2016, 22:09					</div>
				</div>
				<div class="post-content content">
					<p>Okay, just let me know if it helps or not <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p343794">
				<div class="post-metadata">
					<div class="post-num">Post #124</div>
					<div class="post-author">dissent</div>
					<div class="post-datetime">
						15 Nov 2016, 16:51					</div>
				</div>
				<div class="post-content content">
					<p>Check this as well for your mac-address issue</p><p><a href="https://github.com/dissent1/r7800/commit/1781461372f39c8d846ff6b532bee7c1a2176f80">https://github.com/dissent1/r7800/commi … c1a2176f80</a></p><p>Apply the same changes to your dts</p><p>Updated url</p>											<p class="post-edited">(Last edited by <strong>dissent</strong> on 15 Nov 2016, 16:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p343869">
				<div class="post-metadata">
					<div class="post-num">Post #125</div>
					<div class="post-author">jmomo</div>
					<div class="post-datetime">
						16 Nov 2016, 14:13					</div>
				</div>
				<div class="post-content content">
					<p>Looks like someone was working on thermal sensors for the ipq806x:</p><p><a href="https://forum.lede-project.org/t/supporting-thermal-sensors-on-ipq806x/205">https://forum.lede-project.org/t/suppor … pq806x/205</a></p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 5 of 6</div><nav><ul><li><a href="viewtopic.php%3Fid=65956&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=65956&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=65956&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li><li><a href="viewtopic.php%3Fid=65956&amp;p=6.html">6</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>