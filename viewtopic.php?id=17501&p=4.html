<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> RB450 - using Five Ethernet Ports</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 6 Feb 2018 and 6 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 4 of 9</div><nav><ul><li><a href="viewtopic.php%3Fid=17501&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=17501&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=17501&amp;p=3.html">3</a></li><li class="pagination-current"><span>4</span></li><li><a href="viewtopic.php%3Fid=17501&amp;p=5.html">5</a></li><li><a href="viewtopic.php%3Fid=17501&amp;p=6.html">6</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=17501&amp;p=9.html">9</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p79787">
				<div class="post-metadata">
					<div class="post-num">Post #76</div>
					<div class="post-author">l337ing disorder</div>
					<div class="post-datetime">
						17 Jan 2009, 20:53					</div>
				</div>
				<div class="post-content content">
					<p>This thread seems to go from A to Z with all kinds of patches and lots of talk of conflicting patches.</p><p>Is there a how-to guide to get OpenWRT on an RB450? Or should I start from the beginning of this thread and just apply all the patches and things people speak of throughout this thread?</p><p>Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79807">
				<div class="post-metadata">
					<div class="post-num">Post #77</div>
					<div class="post-author">phorn</div>
					<div class="post-datetime">
						18 Jan 2009, 09:50					</div>
				</div>
				<div class="post-content content">
					<p>Look at the first post of this thread for info on the RB450.&nbsp; By following those directions you will end up with a router that has all 5 ports combined. </p><p>The rest of the thread is about the IP175C switch (i.e. separating the 5 ports to not be part of the same network). If you are going to try to follow it, you can look at the third page.<br />My webpage at <a href="http://inst.eecs.berkeley.edu/~pathorn/ip175c/">http://inst.eecs.berkeley.edu/~pathorn/ip175c/</a> describes how to patch openwrt 8.09 RC1 to support the switch driver.&nbsp; Try to follow them and if you get stuck, post in the forum.</p><p>Would also be nice to get this info up on the wiki so users don&#039;t have to hunt through the forum (although Google does a pretty good job at searching the openwrt forum)</p><p>@robrob, I haven&#039;t updated the patches yet for 2.6.27 or later.&nbsp; I&#039;ll try and put those up once I upgrade my router (have been busy lately). Sadly, I do not know how to get them formally into openwrt, aside from pestering the main developers... and considering how quickly the supposedly 2008 release has been going, they are probably overworked.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79846">
				<div class="post-metadata">
					<div class="post-num">Post #78</div>
					<div class="post-author">l337ing disorder</div>
					<div class="post-datetime">
						18 Jan 2009, 21:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>edison-nts wrote:</cite><blockquote><p>First, I like to collaborate, posting information , step by step , how to make a RB450 ready to use w/ kamikaze.<br />----<br />1) chose a Binary distribuiton, or compile your image.<br />1a ) <a href="http://downloads.openwrt.org/snapshots/ar71xx/">http://downloads.openwrt.org/snapshots/ar71xx/</a><br />( ready to use kernel , from openwrt.org )</p></blockquote></div><p>On that page there are several binaries. How do I know which one is the right one for the rb450?</p><p>openwrt-ar71xx-dir-615c1-squashfs.bin&nbsp; &nbsp; <br />openwrt-ar71xx-tew-632brp-squashfs.bin&nbsp; &nbsp;<br />openwrt-ar71xx-tew-652brp-squashfs.bin&nbsp; <br />openwrt-ar71xx-uImage-gzip.bin&nbsp; <br />openwrt-ar71xx-uImage-lzma.bin<br />openwrt-ar71xx-ubnt-rs-squashfs.bin&nbsp; <br />openwrt-ar71xx-vmlinux.bin&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </p><p>Is there a page that describes what each of these are so I could assess which is the right one for me to use?</p><p>Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80457">
				<div class="post-metadata">
					<div class="post-num">Post #79</div>
					<div class="post-author">leonardogyn</div>
					<div class="post-datetime">
						26 Jan 2009, 22:42					</div>
				</div>
				<div class="post-content content">
					<p>hello guys .... i applied the patch, got it compiled .... but i really couldnt understand the config of /etc/config/network.</p><p>on the posted config from some users, i have ports from 0 to 5 ... which would give 6 ports</p><div class="codebox"><pre><code>uci set network.0.vlan1=&quot;0 1 2 3 5*t&quot;
uci set network.0.vlan2=&quot;4 5t&quot;

config &#039;switch&#039; &#039;0&#039;
        option &#039;vlan2&#039; &#039;3 4t 5t&#039;
        option &#039;vlan3&#039; &#039;2 4t 5t&#039;
        option &#039;vlan4&#039; &#039;1 4t 5t&#039;
        option &#039;vlan5&#039; &#039;0 4t 5t&#039;</code></pre></div><p>RB450, thus, have only 5 ethernets. So i think the 0 or the 5 should be some special thing ...... but i really couldnt get the logic behind that config.</p><p>well ....... i would like to have 2 interfaces, one being attached to 2 ports and the other interface attached to 3 ports. Bridging can be used to acchieve that, no problem at all. Can someone help me with this simple config ?</p>											<p class="post-edited">(Last edited by <strong>leonardogyn</strong> on 26 Jan 2009, 23:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80481">
				<div class="post-metadata">
					<div class="post-num">Post #80</div>
					<div class="post-author">phorn</div>
					<div class="post-datetime">
						27 Jan 2009, 03:52					</div>
				</div>
				<div class="post-content content">
					<p>The &quot;0&quot; referring to the switch is a reference to the name of the MDIO bus. In the Linux kernel, for some reason beyond my understanding, the &quot;name&quot; of a MDIO bus is a number starting at 0 and increasing.<br />You can look at &quot;/sys/class/mdio_bus&quot; to see which available buses there are.</p><p>Port 5 always refers to the CPU port (A switch built into a router is actually a separate 6-port switch with one of the 6 ports hardwired into the NIC (or CPU). This is the reason that you natively only see one NIC, and why you need to specially communicate with the switch driver about which ports to use.</p><p>Note that the UCI commands and editing the config file are separate things and redundant (if you add config &#039;switch&#039; &#039;eth0&#039; into /etc/config/network, you do not want to type the &quot;uci set&quot; commands. And vice versa. The only difference with uci is that your changes will be reverted if you do not commit them afterwards.</p><p>I will post both the uci versions and the config file versions.</p><p>In your case, since you want 2 ports in one and 3 ports in the other, this is how you set it up:<br /></p><div class="codebox"><pre><code>config &#039;switch&#039; &#039;0&#039;
        option &#039;vlan1&#039; &#039;3 4 5t&#039;
        option &#039;vlan2&#039; &#039;0 1 2 5t&#039;

config &#039;interface&#039; &#039;wan&#039;
        option &#039;proto&#039; &#039;static&#039;
        option &#039;ipaddr&#039; &#039;10.2.1.1&#039;
        option &#039;netmask&#039; &#039;255.255.255.0&#039;
        option &#039;ifname&#039; &#039;eth0.1&#039;

config &#039;interface&#039; &#039;lan&#039;
        option &#039;proto&#039; &#039;static&#039;
        option &#039;ipaddr&#039; &#039;192.168.1.1&#039;
        option &#039;netmask&#039; &#039;255.255.255.0&#039;
        option &#039;ifname&#039; &#039;eth0.2&#039;</code></pre></div><p>Note that depending on how you set it up, network port 4 may actually be physically disconnected from the switch and instead will show up as &quot;eth1&quot; (while the switch is eth0) or show up as eth0 (while switched ports are at eth1). I do not have a RB450 so I don&#039;t know which it is.</p><p>So you may need to replace all eth0.1 with eth1.1, or you may need to divide up the switch ports differently (or combine them in a software bridge) if one of the ports is physically disconnected from the others.</p><p>The UCI commands are:<br /></p><div class="codebox"><pre><code>uci set network.0=switch
uci set network.0.vlan1=&#039;3 4 5t&#039;
uci set network.0.vlan2=&#039;0 1 2 5t&#039;

uci set network.wan=interface
uci set network.wan.proto=static
uci set network.wan.ipaddr=10.2.1.1
uci set network.wan.netmask=255.255.255.0
uci set network.wan.ifname=eth0.1

uci set network.lan=interface
uci set network.lan.proto=static
uci set network.lan.ipaddr=192.168.1.1
uci set network.lan.netmask=255.255.255.0
uci set network.lan.ifname=eth0.2</code></pre></div><p>Either way, to test you can do &quot;/etc/init.d/network restart&quot; and if you use UCI commands, once the configuration works, you should do &quot;uci commit&quot; which will write the changes into the /etc/config/network file.</p><p>The way I have this configuration set up, the ports 0,1,2,cpu and 3,4,cpu are bridged by hardware--that is, firewall rules will not be run if #0 sends a packet directly to #2.</p><p>However, if you would like to bridge them (which takes more CPU), you can do as the example above:<br /></p><div class="codebox"><pre><code>config &#039;switch&#039; &#039;0&#039;
        option &#039;vlan1&#039; &#039;4 5t&#039;
        option &#039;vlan2&#039; &#039;3 5t&#039;
        option &#039;vlan3&#039; &#039;2 5t&#039;
        option &#039;vlan4&#039; &#039;1 5t&#039;
        option &#039;vlan5&#039; &#039;0 5t&#039;</code></pre></div><p>And then for any of the networks you want bridged, use &quot;config type bridge&quot; and use &#039;ifnames&#039; instead of &#039;ifname&#039;, like this:<br /></p><div class="codebox"><pre><code>config &#039;interface&#039; &#039;wan&#039;
        option &#039;type&#039; &#039;bridge&#039;
        option &#039;proto&#039; &#039;static&#039;
        option &#039;ipaddr&#039; &#039;10.2.1.1&#039;
        option &#039;netmask&#039; &#039;255.255.255.0&#039;
        option &#039;ifname&#039; &#039;eth0.4 eth0.5&#039;

config &#039;interface&#039; &#039;lan&#039;
        option &#039;type&#039; &#039;bridge&#039;
        option &#039;proto&#039; &#039;static&#039;
        option &#039;ipaddr&#039; &#039;192.168.1.1&#039;
        option &#039;netmask&#039; &#039;255.255.255.0&#039;
        option &#039;ifname&#039; &#039;eth0.1 eth0.2 eth0.3&#039;</code></pre></div><p>Do not be confused by the numbering vlan1-vlan5 and eth0.1-eth0.5. The IP175C spec says that you cannot use VLAN 0 for anything other than QOS tagging, so I use 1-5 instead of 0-4. If it makes things easier, you can add 10, and use vlans 10,11,12,13,14 to represent ports 0-4.</p><p>Hope this helps clarify</p><p>EDIT: fixed to use ifname (II figured the plural was if you have more than one based on some post I read)</p>											<p class="post-edited">(Last edited by <strong>phorn</strong> on 28 Jan 2009, 10:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80483">
				<div class="post-metadata">
					<div class="post-num">Post #81</div>
					<div class="post-author">robrob</div>
					<div class="post-datetime">
						27 Jan 2009, 04:19					</div>
				</div>
				<div class="post-content content">
					<p>Patrick, thanks again for all the great info.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80486">
				<div class="post-metadata">
					<div class="post-num">Post #82</div>
					<div class="post-author">l337ing disorder</div>
					<div class="post-datetime">
						27 Jan 2009, 07:16					</div>
				</div>
				<div class="post-content content">
					<p>(bump) Seems like my question got passed over so I&#039;ll reiterate:</p><div class="quotebox"><cite>edison-nts wrote:</cite><blockquote><p>First, I like to collaborate, posting information , step by step , how to make a RB450 ready to use w/ kamikaze.<br />----<br />1) chose a Binary distribuiton, or compile your image.<br />1a ) <a href="http://downloads.openwrt.org/snapshots/ar71xx/">http://downloads.openwrt.org/snapshots/ar71xx/</a><br />( ready to use kernel , from openwrt.org )</p></blockquote></div><p>On that page there are several binaries. How do I know which one is the right one for the rb450?</p><p>openwrt-ar71xx-dir-615c1-squashfs.bin&nbsp; &nbsp; <br />openwrt-ar71xx-tew-632brp-squashfs.bin&nbsp; &nbsp;<br />openwrt-ar71xx-tew-652brp-squashfs.bin&nbsp; <br />openwrt-ar71xx-uImage-gzip.bin&nbsp; <br />openwrt-ar71xx-uImage-lzma.bin<br />openwrt-ar71xx-ubnt-rs-squashfs.bin&nbsp; <br />openwrt-ar71xx-vmlinux.bin&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </p><p>Is there a page that describes what each of these are so I could assess which is the right one to use?</p><p>Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80507">
				<div class="post-metadata">
					<div class="post-num">Post #83</div>
					<div class="post-author">leonardogyn</div>
					<div class="post-datetime">
						27 Jan 2009, 12:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>On that page there are several binaries. How do I know which one is the right one for the rb450?</p></blockquote></div><p>for RB450 you&#039;ll basically need only these 2 files:</p><p>openwrt-ar71xx-vmlinux.elf<br />openwrt-ar71xx-rootfs.tgz</p><br /><p>the .elf is the one that you&#039;ll do the netboot, so this is the one you&#039;ll put in your TFTP server and configure your DHCP/BOOTP server for throwing it to RB450.</p><p>the two files will also be needed on some HTTP/FTP tree, so when the RB450 is netbooted, you can use the wget2nand script to install OpenWRT on RB450 NAND (flash) memory.</p><p>the other files are for other AR71xx based equipments, you can securely ignore them.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80508">
				<div class="post-metadata">
					<div class="post-num">Post #84</div>
					<div class="post-author">leonardogyn</div>
					<div class="post-datetime">
						27 Jan 2009, 12:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>phorn wrote:</cite><blockquote><p>Hope this helps clarify</p></blockquote></div><p>hope this helps ?!?!?! Are you kidding ??? I&#039;m feeling like a RB450 switch master configurator right now <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> This was basically the best explanation ever i could have had on the subject <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>thank you very much for the amazing explanation on the subject.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80515">
				<div class="post-metadata">
					<div class="post-num">Post #85</div>
					<div class="post-author">leonardogyn</div>
					<div class="post-datetime">
						27 Jan 2009, 15:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>phorn wrote:</cite><blockquote><p>And then for any of the networks you want bridged, use &quot;config type bridge&quot; and use &#039;ifnames&#039; instead of &#039;ifname&#039;, like this:</p></blockquote></div><p>Patrick, i couldnt get the configuration working with ifnameS .... instead, it worked just fine with ifname (without S)</p><p>My config is:</p><div class="codebox"><pre><code>config &#039;switch&#039; &#039;0&#039;
        option &#039;vlan1&#039; &#039;4 5t&#039;
        option &#039;vlan2&#039; &#039;3 5t&#039;
        option &#039;vlan3&#039; &#039;2 5t&#039;
        option &#039;vlan4&#039; &#039;1 5t&#039;
        option &#039;vlan5&#039; &#039;0 5t&#039;

config &#039;interface&#039; &#039;wan&#039;
        option &#039;type&#039; &#039;bridge&#039;
        option &#039;proto&#039; &#039;static&#039;
        option &#039;ipaddr&#039; &#039;172.16.0.15&#039;
        option &#039;netmask&#039; &#039;255.255.255.0&#039;
        option &#039;ifname&#039; &#039;eth0 eth1.2&#039;

config &#039;interface&#039; &#039;lan&#039;
        option &#039;type&#039; &#039;bridge&#039;
        option &#039;proto&#039; &#039;static&#039;
        option &#039;ipaddr&#039; &#039;192.168.1.1&#039;
        option &#039;netmask&#039; &#039;255.255.255.0&#039;
        option &#039;ifname&#039; &#039;eth1.3 eth1.4 eth1.5&#039;</code></pre></div><p>which results in: (some lines cropped)</p><div class="codebox"><pre><code>root@OpenWrt:/etc/config# ifconfig

br-lan    Link encap:Ethernet  HWaddr 00:0C:42:2E:D9:79  
          inet addr:192.168.1.1  Bcast:192.168.1.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1

br-wan    Link encap:Ethernet  HWaddr 00:0C:42:2E:D9:78  
          inet addr:172.16.0.15  Bcast:172.16.0.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1

eth0      Link encap:Ethernet  HWaddr 00:0C:42:2E:D9:78  
          UP BROADCAST MULTICAST  MTU:1500  Metric:1

eth1      Link encap:Ethernet  HWaddr 00:0C:42:2E:D9:79  
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1

eth1.2    Link encap:Ethernet  HWaddr 00:0C:42:2E:D9:79  
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1

eth1.3    Link encap:Ethernet  HWaddr 00:0C:42:2E:D9:79  
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1

eth1.4    Link encap:Ethernet  HWaddr 00:0C:42:2E:D9:79  
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1

eth1.5    Link encap:Ethernet  HWaddr 00:0C:42:2E:D9:79  
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</code></pre></div><p>and</p><div class="codebox"><pre><code>root@OpenWrt:/etc/config# brctl show
bridge name     bridge id               STP enabled     interfaces
br-lan          8000.000c422ed979       no              eth1.3
                                                        eth1.4
                                                        eth1.5
br-wan          8000.000c422ed978       no              eth0
                                                        eth1.2
root@OpenWrt:/etc/config#</code></pre></div><p>anyway, it works just fine with this detail of using ifname instead of ifnameS.</p><br /><p>Thank you very much again for your idiot-proof explanation on the subject <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>leonardogyn</strong> on 27 Jan 2009, 15:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80568">
				<div class="post-metadata">
					<div class="post-num">Post #86</div>
					<div class="post-author">phorn</div>
					<div class="post-datetime">
						28 Jan 2009, 10:10					</div>
				</div>
				<div class="post-content content">
					<p>Cool to see you have it working.<br />Any reason you chose to do the bridging in software rather than hardware?&nbsp; I suppose it does give you more flexability</p><p>I am asking because my cheap atheros chip can hardly handle 25Mbit/s in software before maxing out the cpu. Though I figure ar71xx is a lot faster.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80585">
				<div class="post-metadata">
					<div class="post-num">Post #87</div>
					<div class="post-author">leonardogyn</div>
					<div class="post-datetime">
						28 Jan 2009, 13:49					</div>
				</div>
				<div class="post-content content">
					<p>phorn ....... these RB450s are going to be used as SOHO routers on DSL lines with 2-4Mbit downstream max, so there&#039;s absolutely no chance i&#039;ll hit CPU problems with that.</p><p>anyway, i&#039;ll try to do some testings on RB450 throughput with and without bridged interface and will post it here.</p><p>about the bridge ....... it&#039;s simply because i&#039;m used to work with bridged interfaces, so i prefeer to keep that <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80608">
				<div class="post-metadata">
					<div class="post-num">Post #88</div>
					<div class="post-author">l337ing disorder</div>
					<div class="post-datetime">
						28 Jan 2009, 19:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>leonardogyn wrote:</cite><blockquote><p>for RB450 you&#039;ll basically need only these 2 files:</p><p>openwrt-ar71xx-vmlinux.elf<br />openwrt-ar71xx-rootfs.tgz</p></blockquote></div><p>Awesome, many thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81065">
				<div class="post-metadata">
					<div class="post-num">Post #89</div>
					<div class="post-author">robrob</div>
					<div class="post-datetime">
						4 Feb 2009, 18:12					</div>
				</div>
				<div class="post-content content">
					<p>Patrick,</p><p>I&#039;ve done some RouterBoard reconfiguring and now have a an 802.11n card in my RB493AH. My problem is if I use the 2.6.26 kernel for your ipc175 patch I can&#039;t use ath9k. I would like to try to port your patch to 2.6.28. Could you outline the basics of what needs to be done? Earlier you wrote that a couple of other patches would have to be moved up to 2.6.28 too. Is that still true with the 2.6.28.3?</p><p>Again, thanks for all the help,</p><p>Rob</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p83838">
				<div class="post-metadata">
					<div class="post-num">Post #90</div>
					<div class="post-author">dprus</div>
					<div class="post-datetime">
						14 Mar 2009, 00:59					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,</p><p>I was just wondering if there is a plan to support the 450G? It&#039;s basically a faster version of the 450 with gigabit ethernet instead of 10/100. I purchased one recently and I am using the built-in RouterOS, but I don&#039;t mind helping out with adding support for it to OpenWRT.</p><p>Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p83844">
				<div class="post-metadata">
					<div class="post-num">Post #91</div>
					<div class="post-author">robrob</div>
					<div class="post-datetime">
						14 Mar 2009, 04:45					</div>
				</div>
				<div class="post-content content">
					<p>Support for the 450G will come down to which gig switch it has. Unless Mikrotik used a common gig switch chip it probably won&#039;t get supported. I can&#039;t use OpenWRT on my RB493 because the IPC178 switch chip isn&#039;t supported.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p84659">
				<div class="post-metadata">
					<div class="post-num">Post #92</div>
					<div class="post-author">theredia</div>
					<div class="post-datetime">
						26 Mar 2009, 18:36					</div>
				</div>
				<div class="post-content content">
					<p>Hi all again!</p><p>IÂ´ve been successfully using patch v3 over SVN 13191 for a while on a RB450.</p><p>Lately, we had some porblems, with the router hanging really hard... after some inspection, we discovered it is related with really high softirq usage. At approx 6Mbps of traffic (involving 4 ports in the swith, each on a different vlan), the router becomes unresponsive, with 100% proc used by softirqs.</p><p>Any advise on how this could be solved??</p><p>TIA!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p84779">
				<div class="post-metadata">
					<div class="post-num">Post #93</div>
					<div class="post-author">l337ing disorder</div>
					<div class="post-datetime">
						28 Mar 2009, 02:52					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>edison-nts wrote:</cite><blockquote><p>----<br />Configure a DHCP / TFTP server to send this <br />image to router board<br />-- dhcp.conf --<br />....<br />next-server 192.168.200.2;<br />filename &quot;openwrt-ar71xx-vmlinux.elf&quot;;<br />....</p></blockquote></div><p>I&#039;ve done this, and I&#039;m able to start the netboot process but it fails to completely boot. Here&#039;s the output:</p><br /><div class="codebox"><pre><code>RouterBOOT booter 2.14



RouterBoard 450



CPU frequency: 300 MHz

  Memory size:  32 MB



Press any key within 2 seconds to enter setup..

trying bootp protocol... OK

Got IP address: 192.168.24.81

resolved mac address 00:0C:29:D9:DF:8D

Gateway: 192.168.24.1

transfer started ................. transfer ok, time=2.21s

setting up elf image... OK

jumping to kernel code

Linux version 2.6.26.5 (nbd@baustelle) (gcc version 4.1.2) #22 Sat Feb 14 22:40:51 CET 2009

console [early0] enabled

CPU revision is: 00019374 (MIPS 24K)

Determined physical RAM map:

 memory: 02000000 @ 00000000 (usable)

Initrd not found or empty - disabling initrd

Zone PFN ranges:

  Normal          0 -&gt;     8192

Movable zone start PFN for each node

early_node_map[1] active PFN ranges

    0:        0 -&gt;     8192

Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128

Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,yaffs,jffs2 noinitrd console=ttyS0,115200 init=/etc/preinit

Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.

Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes

Writing ErrCtl register=0007fff0

Readback ErrCtl register=0007fff0

PID hash table entries: 128 (order: 7, 512 bytes)

Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)

Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)

Memory: 29740k/32768k available (1814k kernel code, 3028k reserved, 316k data, 124k init, 0k highmem)

SLUB: Genslabs=6, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1

Mount-cache hash table entries: 512

net_namespace: 644 bytes

NET: Registered protocol family 16

MIPS: machine is MikroTik RouterBOARD 450

NET: Registered protocol family 2

IP route cache hash table entries: 1024 (order: 0, 4096 bytes)

TCP established hash table entries: 1024 (order: 1, 8192 bytes)

TCP bind hash table entries: 1024 (order: 0, 4096 bytes)

TCP: Hash tables configured (established 1024 bind 1024)

TCP reno registered

NET: Registered protocol family 1

squashfs: version 3.0 (2006/03/15) Phillip Lougher

Registering mini_fo version $Id$

JFFS2 version 2.2. (NAND) (SUMMARY)  Â© 2001-2006 Red Hat, Inc.

yaffs Jan  4 2009 21:38:31 Installing. 

msgmni has been set to 58

io scheduler noop registered

io scheduler deadline registered (default)

Serial: 8250/16550 driver $Revision: 1.90 $ 1 ports, IRQ sharing disabled

serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A

console handover: boot [early0] -&gt; real [ttyS0]

ag71xx_mdio: probed

eth0: Atheros AG71xx at 0xba000000, irq 5

eth1: Atheros AG71xx at 0xb9000000, irq 4

NAND flash driver for RouterBoard 4xx series version 0.1.10

NAND SPI clock 25000 kHz (AHB 150000 kHz / 6)

FLASH SPI clock 25000 kHz (AHB 150000 kHz / 6)

NAND device: Manufacturer ID: 0xad, Chip ID: 0x76 (Hynix NAND 64MiB 3,3V 8-bit)

Scanning device for bad blocks

Creating 3 MTD partitions on &quot;NAND 64MiB 3,3V 8-bit&quot;:

0x00000000-0x00040000 : &quot;booter&quot;

0x00040000-0x00400000 : &quot;kernel&quot;

0x00400000-0x04000000 : &quot;rootfs&quot;

mtd: partition &quot;rootfs&quot; set to be root filesystem

split_squashfs: error occured while reading from &quot;NAND 64MiB 3,3V 8-bit&quot;

Atheros AR71xx SPI Controller driver version 0.2.2

Atheros AR71xx hardware watchdog driver version 0.1.0

Registered led device: rb4xx:yellow:user

TCP vegas registered

NET: Registered protocol family 17

802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;

All bugs added by David S. Miller &lt;davem@redhat.com&gt;

yaffs: dev is 32505858 name is &quot;mtdblock2&quot;

yaffs: passed flags &quot;&quot;

yaffs: Attempting MTD mount on 31.2, &quot;mtdblock2&quot;

VFS: Mounted root (yaffs filesystem) readonly.

Freeing unused kernel memory: 124k freed

Failed to execute /etc/preinit.  Attempting defaults...

init Algorithmics/MIPS FPU Emulator v1.5

started

Starting...

mount: Mounting /dev/mtdblock0 on /boot failed: Permission denied

modprobe: could not parse modules.dep



modprobe: could not parse modules.dep



modprobe: could not parse modules.dep



modprobe: could not parse modules.dep



/etc/rc.d/run.d/S02logring: 10: cannot create /dev/log241: No such device or address

/etc/rc.d/run.d/S02panic: 2: cannot create /dev/log241: No such device or address

Jan  1 00:00:08 localhost syslog.info syslogd started: BusyBox v1.00 (2008.03.20-10:28+0000)

Jan  1 00:00:08 localhost user.notice kernel: klogd started: BusyBox v1.00 (2008.03.20-10:28+0000)

Jan  1 00:00:08 localhost user.notice kernel: Linux version 2.6.26.5 (nbd@baustelle) (gcc version 4.1.2) #22 Sat Feb 14 22:40:51 CET 2009

Jan  1 00:00:08 localhost user.debug kernel: prom: fw_arg0=00000007, fw_arg1=a0861c00, fw_arg2=00000000, fw_arg3=00000000

Jan  1 00:00:08 localhost user.debug kernel: MyLoader: sysp=ffffffff, boardp=ffffffff, parts=ffffffff

Jan  1 00:00:08 localhost user.info kernel: console [early0] enabled

Jan  1 00:00:08 localhost user.info kernel: CPU revision is: 00019374 (MIPS 24K)

Jan  1 00:00:08 localhost user.warn kernel: Determined physical RAM map:

Jan  1 00:00:08 localhost user.warn kernel:  memory: 02000000 @ 00000000 (usable)

Jan  1 00:00:08 localhost user.debug kernel: Entering add_active_range(0, 0, 8192) 0 entries of 256 used

Jan  1 00:00:08 localhost user.info kernel: Initrd not found or empty - disabling initrd

Jan  1 00:00:08 localhost user.warn kernel: Zone PFN ranges:

Jan  1 00:00:08 localhost user.warn kernel:   Normal          0 -&gt;     8192

Jan  1 00:00:08 localhost user.warn kernel: Movable zone start PFN for each node

Jan  1 00:00:08 localhost user.warn kernel: early_node_map[1] active PFN ranges

Jan  1 00:00:08 localhost user.warn kernel:     0:        0 -&gt;     8192

Jan  1 00:00:08 localhost user.debug kernel: On node 0 totalpages: 8192

Jan  1 00:00:08 localhost user.debug kernel:   Normal zone: 64 pages used for memmap

Jan  1 00:00:08 localhost user.debug kernel:   Normal zone: 0 pages reserved

Jan  1 00:00:08 localhost user.debug kernel:   Normal zone: 8128 pages, LIFO batch:0

Jan  1 00:00:08 localhost user.debug kernel:   Movable zone: 0 pages used for memmap

Jan  1 00:00:08 localhost user.warn kernel: Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128

Jan  1 00:00:08 localhost user.notice kernel: Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,yaffs,jffs2 noinitrd console=ttyS0,115200 init=/etc/preinit

Jan  1 00:00:08 localhost user.warn kernel: Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.

Jan  1 00:00:08 localhost user.warn kernel: Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes

Jan  1 00:00:08 localhost user.info kernel: Writing ErrCtl register=0007fff0

Jan  1 00:00:08 localhost user.info kernel: Readback ErrCtl register=0007fff0

Jan  1 00:00:08 localhost user.warn kernel: PID hash table entries: 128 (order: 7, 512 bytes)

Jan  1 00:00:08 localhost user.info kernel: Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)

Jan  1 00:00:08 localhost user.info kernel: Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)

Jan  1 00:00:08 localhost user.info kernel: Memory: 29740k/32768k available (1814k kernel code, 3028k reserved, 316k data, 124k init, 0k highmem)

Jan  1 00:00:08 localhost user.info kernel: SLUB: Genslabs=6, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1

Jan  1 00:00:08 localhost user.debug kernel: Calibrating delay loop... 199.88 BogoMIPS (lpj=999424)

Jan  1 00:00:08 localhost user.warn kernel: Mount-cache hash table entries: 512

Jan  1 00:00:08 localhost user.info kernel: net_namespace: 644 bytes

Jan  1 00:00:08 localhost user.info kernel: NET: Registered protocol family 16

Jan  1 00:00:08 localhost user.info kernel: MIPS: machine is MikroTik RouterBOARD 450

Jan  1 00:00:08 localhost user.info kernel: NET: Registered protocol family 2

Jan  1 00:00:08 localhost user.debug kernel: Switched to high resolution mode on CPU 0

Jan  1 00:00:08 localhost user.info kernel: IP route cache hash table entries: 1024 (order: 0, 4096 bytes)

Jan  1 00:00:08 localhost user.info kernel: TCP established hash table entries: 1024 (order: 1, 8192 bytes)

Jan  1 00:00:08 localhost user.info kernel: TCP bind hash table entries: 1024 (order: 0, 4096 bytes)

Jan  1 00:00:08 localhost user.info kernel: TCP: Hash tables configured (established 1024 bind 1024)

Jan  1 00:00:08 localhost user.info kernel: TCP reno registered

Jan  1 00:00:08 localhost user.info kernel: NET: Registered protocol family 1

Jan  1 00:00:08 localhost user.info kernel: squashfs: version 3.0 (2006/03/15) Phillip Lougher

Jan  1 00:00:08Jan  1 00:00:08 /etc/rc.d/run.d/S06mipsdog: 2: cannot create /dev/log241: No such device or address

Jan  1 00:00:08 localhost user.info kernel: Serial: 8250/16Jan  1 00:00:08 Jan  1 00:00:08 Jan  1 00:00:08 Jan  1 00:00:08 Jan  1 00:00:08 Jan  1 00:00:08 localhost user.debug kernel: ar71xx-wdt: timeoutJan  1 00:00:08 Jan  1 00:00:08 Jan  1 00:00:08 modprobe: could not parse modules.dep



modprobe: could not parse modules.dep



modprobe: could not parse modules.dep



modprobe: could not parse modules.dep



modprobe: could not parse modules.dep



modprobe: could not parse modules.dep



modprobe: could not parse modules.dep



/etc/rc.d/run.d/S08softdog: 3: cannot create /dev/log241: No such device or address

Starting services...

/etc/rc.d/run.d/S10nova: 22: cannot create /dev/log1: No such device or address



Fatal internal error occurred!

Please reinstall the router.



connect failed (errno=2)






Shutting down...


Stopping services...


connect failed (errno=2)

Jan  1 00:00:08 localhost syslog.info System log daemon exiting.

/etc/rc.d/run.d/C95panic: 2: cannot create /dev/log241: No such device or address

umount: /boot: Invalid argument

System halted.</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p84910">
				<div class="post-metadata">
					<div class="post-num">Post #94</div>
					<div class="post-author">l337ing disorder</div>
					<div class="post-datetime">
						31 Mar 2009, 21:03					</div>
				</div>
				<div class="post-content content">
					<p>Looking at the serial console output I see a few errors during bootup. I&#039;ve trimmed out everything from my previous post to illustrate only the errors (listed below). I followed the steps on the first page to get OpenWRT booting on the rb450 using openwrt-ar71xx-vmlinux.elf (version 8.09 of kamikaze), so why would I be getting these errors? (See my previous post for the entire boot output)</p><div class="codebox"><pre><code>Initrd not found or empty - disabling initrd

split_squashfs: error occured while reading from &quot;NAND 64MiB 3,3V 8-bit&quot;

Failed to execute /etc/preinit.  Attempting defaults...

mount: Mounting /dev/mtdblock0 on /boot failed: Permission denied

modprobe: could not parse modules.dep
modprobe: could not parse modules.dep
modprobe: could not parse modules.dep
modprobe: could not parse modules.dep

/etc/rc.d/run.d/S02logring: 10: cannot create /dev/log241: No such device or address
/etc/rc.d/run.d/S02panic: 2: cannot create /dev/log241: No such device or address

Jan  1 00:00:08 localhost user.info kernel: Initrd not found or empty - disabling initrd

Jan  1 00:00:08Jan  1 00:00:08 /etc/rc.d/run.d/S06mipsdog: 2: cannot create /dev/log241: No such device or address

Jan  1 00:00:08 localhost user.info kernel: Serial: 8250/16Jan  1 00:00:08 Jan  1 00:00:08 Jan  1 00:00:08 Jan  1 00:00:08 Jan  1 00:00:08 Jan  1 00:00:08 localhost user.debug kernel: ar71xx-wdt: timeoutJan  1 00:00:08 Jan  1 00:00:08 Jan  1 00:00:08 modprobe: could not parse modules.dep

modprobe: could not parse modules.dep
modprobe: could not parse modules.dep
modprobe: could not parse modules.dep
modprobe: could not parse modules.dep
modprobe: could not parse modules.dep
modprobe: could not parse modules.dep

/etc/rc.d/run.d/S08softdog: 3: cannot create /dev/log241: No such device or address
Starting services...
/etc/rc.d/run.d/S10nova: 22: cannot create /dev/log1: No such device or address

Fatal internal error occurred!
Please reinstall the router.

connect failed (errno=2)

Shutting down...
Stopping services...

connect failed (errno=2)

/etc/rc.d/run.d/C95panic: 2: cannot create /dev/log241: No such device or address

umount: /boot: Invalid argument

System halted.</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p84911">
				<div class="post-metadata">
					<div class="post-num">Post #95</div>
					<div class="post-author">l337ing disorder</div>
					<div class="post-datetime">
						31 Mar 2009, 21:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>l337ing disorder wrote:</cite><blockquote><div class="quotebox"><cite>edison-nts wrote:</cite><blockquote><p>----<br />Configure a DHCP / TFTP server to send this <br />image to router board<br />-- dhcp.conf --<br />....<br />next-server 192.168.200.2;<br />filename &quot;openwrt-ar71xx-vmlinux.elf&quot;;<br />....</p></blockquote></div><p>I&#039;ve done this, and I&#039;m able to start the netboot process but it fails to completely boot. Here&#039;s the output:</p></blockquote></div><p>I didn&#039;t actually put in the &quot;next-server 192.168.200.2&quot; line, as we&#039;re not using the 192.168.200.0/24 subnet, in case that helps anyone figure out why I&#039;m getting all these weird errors.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p86383">
				<div class="post-metadata">
					<div class="post-num">Post #96</div>
					<div class="post-author">phorn</div>
					<div class="post-datetime">
						22 Apr 2009, 05:24					</div>
				</div>
				<div class="post-content content">
					<p>It appears that nbd has added the IC+ switch support to SVN trunk, and it is nicely integrated into phylib, meaning that it should work for every platform with one of these switches.&nbsp; You should only have to enable &quot;swconfig&quot; in the kernel configuration under Base System.</p><p>Currently the switch is only enabled by default on atheros. If you do not use that architecture (not sure what the rb uses), then you will have to change your kernel configuration to include CONFIG_PHYLIB and CONFIG_PHY_IP175C:</p><p>To do this, go to target/linux/MYPLATFORM/config-2.6.28 and add these lines:<br /></p><div class="quotebox"><blockquote><p>CONFIG_IP175C_PHY=y<br />CONFIG_PHYLIB=y</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p86799">
				<div class="post-metadata">
					<div class="post-num">Post #97</div>
					<div class="post-author">lorenzo.allegrucci</div>
					<div class="post-datetime">
						28 Apr 2009, 11:44					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I&#039;m trying an openwrt trunk on a mikrotik RB450 board which comes with a IP175C ethernet switch.<br />I followed your instructions at <a href="http://inst.eecs.berkeley.edu/~pathorn/ip175c/">http://inst.eecs.berkeley.edu/~pathorn/ip175c/</a> and I added<br />the two options CONFIG_IP175C_PHY=y and CONFIG_PHYLIB=y to target/linux/ar71xx/config-2.6.28<br />but unfortunately the kernel doesn&#039;t detect the IP175C (reading from dmesg) and my vlan setup doesn&#039;t work.<br />Any hints?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87053">
				<div class="post-metadata">
					<div class="post-num">Post #98</div>
					<div class="post-author">phorn</div>
					<div class="post-datetime">
						1 May 2009, 03:12					</div>
				</div>
				<div class="post-content content">
					<p>Could you paste the exact line from dmesg? It should be near the top, around where it also mentions loading the NIC driver.</p><p>You may also need to look for CONFIG_ICPLUS_PHY and make sure it is disabled, since it might conflict with the new driver.</p><p>The only print statement in nbd&#039;s new driver says:<br />&quot;ip175c: Found an unknown IC+ switch with model number %02Xh.&quot;<br />And then I would be interested in the model number it prints.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87241">
				<div class="post-metadata">
					<div class="post-num">Post #99</div>
					<div class="post-author">lorenzo.allegrucci</div>
					<div class="post-datetime">
						4 May 2009, 12:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>phorn wrote:</cite><blockquote><p>Could you paste the exact line from dmesg? It should be near the top, around where it also mentions loading the NIC driver.</p><p>You may also need to look for CONFIG_ICPLUS_PHY and make sure it is disabled, since it might conflict with the new driver.</p><p>The only print statement in nbd&#039;s new driver says:<br />&quot;ip175c: Found an unknown IC+ switch with model number %02Xh.&quot;<br />And then I would be interested in the model number it prints.</p></blockquote></div><p>There&#039;s no such line at all, this is my dmesg:<br /></p><div class="codebox"><pre><code>Linux version 2.6.28.9 (lorenzo@voyager) (gcc version 4.1.2) #6 Mon May 4 11:249
prom: fw_arg0=00000007, fw_arg1=a0861c00, fw_arg2=00000000, fw_arg3=00000000    
MyLoader: sysp=fefcfff0, boardp=77f8f9f3, parts=fafeb6f3                        
console [early0] enabled                                                        
CPU revision is: 00019374 (MIPS 24Kc)                                           
Atheros AR7130 rev 2 (id:0xa8), CPU:300.000 MHz, AHB:150.000 MHz, DDR:300.000 Mz
Determined physical RAM map:                                                    
 memory: 02000000 @ 00000000 (usable)                                           
Initrd not found or empty - disabling initrd                                    
Zone PFN ranges:                                                                
  Normal   0x00000000 -&gt; 0x00002000                                             
Movable zone start PFN for each node                                            
early_node_map[1] active PFN ranges                                             
    0: 0x00000000 -&gt; 0x00002000                                                 
On node 0 totalpages: 8192                                                      
free_area_init_node: node 0, pgdat 8027dc30, node_mem_map 81000000              
  Normal zone: 64 pages used for memmap                                         
  Normal zone: 0 pages reserved                                                 
  Normal zone: 8128 pages, LIFO batch:0                                         
  Movable zone: 0 pages used for memmap                                         
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128       
Kernel command line: rootfstype=squashfs,yaffs,jffs2 noinitrd console=ttyS0,115t
Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.                 
Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes          
Writing ErrCtl register=0003e210                                                
Readback ErrCtl register=0003e210                                               
PID hash table entries: 128 (order: 7, 512 bytes)                               
Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)                   
Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)                     
Memory: 29680k/32768k available (1841k kernel code, 3088k reserved, 333k data, )
SLUB: Genslabs=6, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1          
Calibrating delay loop... 199.88 BogoMIPS (lpj=999424)                          
Mount-cache hash table entries: 512                                             
net_namespace: 708 bytes                                                        
NET: Registered protocol family 16                                              
MIPS: machine is MikroTik RouterBOARD 450                                       
NET: Registered protocol family 2                                               
Switched to high resolution mode on CPU 0                                       
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)                  
TCP established hash table entries: 1024 (order: 1, 8192 bytes)                 
TCP bind hash table entries: 1024 (order: 0, 4096 bytes)                        
TCP: Hash tables configured (established 1024 bind 1024)                        
TCP reno registered                                                             
NET: Registered protocol family 1                                               
squashfs: version 3.0 (2006/03/15) Phillip Lougher                              
Registering mini_fo version $Id$                                                
JFFS2 version 2.2. (NAND) (SUMMARY)  ?© 2001-2006 Red Hat, Inc.                 
yaffs May  4 2009 10:22:54 Installing.                                          
msgmni has been set to 57                                                       
io scheduler noop registered                                                    
io scheduler deadline registered (default)                                      
Serial: 8250/16550 driver1 ports, IRQ sharing disabled                          
serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A                   
console handover: boot [early0] -&gt; real [ttyS0]                                 
ag71xx_mdio: probed                                                             
eth0: Atheros AG71xx at 0xba000000, irq 5                                       
eth0: connected to PHY at 0:04 [uid=02430d80, driver=Generic PHY]               
eth1: Atheros AG71xx at 0xb9000000, irq 4                                       
eth1: connected to 4 PHYs                                                       
NAND flash driver for RouterBoard 4xx series version 0.1.10                     
NAND SPI clock 25000 kHz (AHB 150000 kHz / 6)                                   
FLASH SPI clock 25000 kHz (AHB 150000 kHz / 6)                                  
NAND device: Manufacturer ID: 0xad, Chip ID: 0x76 (Hynix NAND 64MiB 3,3V 8-bit) 
Scanning device for bad blocks                                                  
Bad eraseblock 490 at 0x007a8000                                                
Bad eraseblock 2582 at 0x02858000                                               
Bad eraseblock 3355 at 0x0346c000                                               
Creating 3 MTD partitions on &quot;NAND 64MiB 3,3V 8-bit&quot;:                           
0x00000000-0x00040000 : &quot;booter&quot;                                                
0x00040000-0x00400000 : &quot;kernel&quot;                                                
0x00400000-0x04000000 : &quot;rootfs&quot;                                                
mtd: partition &quot;rootfs&quot; set to be root filesystem                               
split_squashfs: no squashfs found in &quot;NAND 64MiB 3,3V 8-bit&quot;                    
Atheros AR71xx SPI Controller driver version 0.2.2                              
Atheros AR71xx hardware watchdog driver version 0.1.0                           
ar71xx-wdt: timeout=15 secs (max=28)                                            
TCP vegas registered                                                            
NET: Registered protocol family 17                                              
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;                   
All bugs added by David S. Miller &lt;davem@redhat.com&gt;                            
yaffs: dev is 32505858 name is &quot;mtdblock2&quot;                                      
yaffs: passed flags &quot;&quot;                                                          
yaffs: Attempting MTD mount on 31.2, &quot;mtdblock2&quot;                                
yaffs: block 234 is marked bad                                                  
block 235 is bad                                                                
yaffs: block 2326 is marked bad                                                 
block 2327 is bad                                                               
yaffs: block 3099 is marked bad                                                 
block 3100 is bad                                                               
yaffs_read_super: isCheckpointed 0                                              
VFS: Mounted root (yaffs filesystem) readonly.                                  
Freeing unused kernel memory: 136k freed                                        
Please be patient, while OpenWrt loads ...                                      
Algorithmics/MIPS FPU Emulator v1.5                                             
save exit: isCheckpointed 0                                                     
ar71xx: pll_reg 0xb8050010: 0x1099                                              
eth1: link up (100Mbps/Full duplex)                                             
NET: Registered protocol family 10                                              
lo: Disabled Privacy Extensions                                                 
ADDRCONF(NETDEV_UP): eth0: link is not ready                                    
tun: Universal TUN/TAP device driver, 1.6                                       
tun: (C) 1999-2004 Max Krasnyansky &lt;maxk@qualcomm.com&gt;                          
ip_tables: (C) 2000-2006 Netfilter Core Team                                    
ar71xx: pll_reg 0xb8050014: 0x1099                                              
eth0: link up (100Mbps/Full duplex)                                             
ADDRCONF(NETDEV_CHANGE): eth0: link becomes ready                               
nf_conntrack version 0.5.0 (512 buckets, 2048 max)                              
CONFIG_NF_CT_ACCT is deprecated and will be removed soon. Please use            
nf_conntrack.acct=1 kernel paramater, acct=1 nf_conntrack module option or      
sysctl net.netfilter.nf_conntrack_acct=1 to enable it.                          
IMQ driver loaded successfully.                                                 
        Hooking IMQ before NAT on PREROUTING.                                   
        Hooking IMQ after NAT on POSTROUTING.                                   
u32 classifier                                                                  
    Performance counters on                                                     
    input device check on                                                       
    Actions configured</code></pre></div><p>my kernel config has CONFIG_IP175C_PHY=y CONFIG_PHYLIB=y CONFIG_SWCONFIG=y and CONFIG_ICPLUS_PHY is disabled</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87726">
				<div class="post-metadata">
					<div class="post-num">Post #100</div>
					<div class="post-author">lorenzo.allegrucci</div>
					<div class="post-datetime">
						11 May 2009, 11:49					</div>
				</div>
				<div class="post-content content">
					<p>I don&#039;t have the /proc/switch subdir, is it normal?<br />Do I have to compile package/switch for my architecture (ar71xx) to get the switch_core module?<br />How do I set my vlans?</p><p>Thank you,</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 4 of 9</div><nav><ul><li><a href="viewtopic.php%3Fid=17501&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=17501&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=17501&amp;p=3.html">3</a></li><li class="pagination-current"><span>4</span></li><li><a href="viewtopic.php%3Fid=17501&amp;p=5.html">5</a></li><li><a href="viewtopic.php%3Fid=17501&amp;p=6.html">6</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=17501&amp;p=9.html">9</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>