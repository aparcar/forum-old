<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Config file trouble</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 15 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p94087">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">nislo</div>
					<div class="post-datetime">
						11 Sep 2009, 08:36					</div>
				</div>
				<div class="post-content content">
					<p>Hiya,<br />Long time reader, first time poster. </p><p>Warning - Wall&#039;o&#039;text.</p><p>To cut a long story short(er), we&#039;ve been using Coova for a long time with no problems at all. Once we flash Coova we use a config file that updates our UAM and hotspot info. Last week we changed the SSID we would be using and so I simply chnaged the SSID on a working device and saved the config to use for next time. Now this has worked fine for me over the last couple of weeks when updating devices that have already had the old config loaded a long time ago to the new config. A problem arises after flashing a brand new device then loading the new config without having first loaded the old one.</p><p>Basically the device locks us out. No telnet, ssh, or web interface. Using wireshark I can see responses of &#039;TCP Connection Refused&#039; when trying to access the web interface which makes me think it might be a firewall problem. I can get into failsafe mode by pressing reset for 2 secs when the dmz light comes on which gives us telnet access, but I can&#039;t seem to do much good in here (becuase I&#039;ve got NFI what I&#039;m doing). I&#039;ve tried mtd erase nvram then nvram commit then reboot, but when I use nvram show it still shows it full of configs. I&#039;ve also tried mtd erase linux and then uploaded new firmware via tftp. I&#039;ve also tried running firstboot then sync with no change and also resetting via the hold for 30+30+30 method.</p><p>I can upload new firmware via tftp with or without the having to use mtd erase linux. Once I&#039;ve done that I can reboot as many times as I like, and even re-upload the firmware again via the web interface - I&#039;ve done this with and without deleting the jffs partition. As soon as I try to load a known good config that works on other new devices that haven&#039;t had the flaky config loaded, it reverts back to the same locked out state as when I started as soon as I reboot. It&#039;s as though the firmware is being overwritten ok (and using defaults during first boot), but there&#039;s some configs that are corrupted or not being cleared/overwritten and causing problems.</p><p>I&#039;m afraid I don&#039;t have the configs to post up for anyone to look at to see what might have caused this, but does anyone have any ideas?</p><p>I&#039;d be happy if someone could just tell me how to blow everything away (except the bootloader so I can tftp the firmware) so I can just start from scratch again.</p><p>Thanks in advance</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>