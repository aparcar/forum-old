<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> appweb package available for testing / review</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 18 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p1101">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Nico</div>
					<div class="post-datetime">
						12 Jul 2004, 05:24					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,</p><p>i made an appweb package available for testing. it contains the <a href="http://www.mbedthis.com/">Mbedthis</a> embedded web server (appWeb).</p><p>It was compiled statically with the following features:<br /><strong> Â· </strong> CGI<br /><strong> Â· </strong> <a href="http://www.mbedthis.com/products/appWeb/doc/guide/javascript.html">EJS (Embedded JavaScript)</a><br /><strong> Â· </strong> <a href="http://www.mbedthis.com/products/appWeb/doc/guide/creatingEsp.html">ESP (Embedded Server Pages)</a></p><p>A <em>system</em> command was added to the ESP handler allowing commands to be executed in dynamic pages and their output captured and returned as string</p><p>you can find packages <a href="http://nthill.free.fr/nicowrt/ipkg/">here</a>, and the stuff needed to build the packages <a href="http://nthill.free.fr/nicowrt/src/packages/">here</a>.</p><p>-- <br />Nico</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1102">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">kwesibrunee</div>
					<div class="post-datetime">
						12 Jul 2004, 06:00					</div>
				</div>
				<div class="post-content content">
					<p>Or would it be too big? &gt; 250k</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1106">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">cnf</div>
					<div class="post-datetime">
						12 Jul 2004, 11:48					</div>
				</div>
				<div class="post-content content">
					<p>Aw, Thank you!!</p><p>i didn&#039;t get this running :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1141">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Nico</div>
					<div class="post-datetime">
						14 Jul 2004, 10:15					</div>
				</div>
				<div class="post-content content">
					<p>The package was updated to the latest stable release (1.2.0).<br />The static/copy handler was enabled, so the server can handle static content too.<br />The experimental upload module was compiled in.</p><p>The final static binary is around 350 KB.</p><br /><p>Note: appWeb is a fast moving project, it integrates now with ucLinux, meaning that appWeb targets the embedded world and linux too. build process was greatly enhanced to support cross-compilation natively (i dropped most of my patches)<br />SSL support via MatrixSSL is on its way and should be released <a href="http://www.mbedthis.com/phpbb/viewtopic.php?p=397#397">soon</a></p><br /><p>VoilÃ </p><p>--<br />Nico</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1142">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">cnf</div>
					<div class="post-datetime">
						14 Jul 2004, 12:04					</div>
				</div>
				<div class="post-content content">
					<p>Hey Nico,</p><p>Cool, you fixed it :-)</p><p>to me, appWeb looks great. It&#039;s managable, its modular, its extendable.</p><p>I hope some people will pick up on it soon.</p><p>Nice work man, thnx</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1146">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Nico</div>
					<div class="post-datetime">
						14 Jul 2004, 20:40					</div>
				</div>
				<div class="post-content content">
					<p>The packages was updated (again).</p><p>The build is now modular, with most features compiled as loadable modules, except the static/copy handler, and packaged separately.</p><p>access log is disabled (i guess it could fill up space quickly)</p><p>admin module was built, but didn&#039;t catch requests, so i didn&#039;t make it available</p><br /><p>You should adjust the config. file after installing / removing modules.</p><p>--<br />Nico</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1147">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">cnf</div>
					<div class="post-datetime">
						14 Jul 2004, 20:57					</div>
				</div>
				<div class="post-content content">
					<p>cool, any chance you could make an ssl module for appweb based on matrixssl ?</p><p>i&#039;ve been playing around with the ESP pages, but i just can&#039;t get the hang of their js implementation ...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1148">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Nico</div>
					<div class="post-datetime">
						14 Jul 2004, 21:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>cool, any chance you could make an ssl module for appweb based on matrixssl ?</p></blockquote></div><p>As soon as it&#039;s released, i&#039;m waiting for it too...</p><div class="quotebox"><blockquote><p>i&#039;ve been playing around with the ESP pages, but i just can&#039;t get the hang of their js implementation</p></blockquote></div><p>the implementation is missing a lot of features, but the good news is that it can be easily extended with some C++ classes. Just let me know what&#039;s lacking...</p><p>--<br />Nico</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1149">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">cnf</div>
					<div class="post-datetime">
						14 Jul 2004, 21:11					</div>
				</div>
				<div class="post-content content">
					<p>Some docs? :-)</p><p>I don&#039;t know js yet, and all the docs i can find online are for making applets.</p><p>fe I haven&#039;t found how to open a file for parsing (like /proc/meminfo)<br />So either I&#039;m blind, or file manipulation is missing?</p><p>thnx Nico</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1150">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Nico</div>
					<div class="post-datetime">
						14 Jul 2004, 21:28					</div>
				</div>
				<div class="post-content content">
					<p>Some pointers to javascript doc:<br /><strong> Â· </strong> <a href="http://www.mozilla.org/js/">Mozilla - JavaScript</a> <br /><strong> Â· </strong> <a href="http://www.njs-javascript.org/docs.html">NJS JavaScript Interpreter - Documentation</a><br /></p><div class="quotebox"><blockquote><p>So either I&#039;m blind, or file manipulation is missing?</p></blockquote></div><p>cruelly, but you can use the <em>system</em> function to read file content in a variable</p><div class="codebox"><pre><code>&lt;% content = system(&quot;/bin/cat /path/to/your/file&quot;); %&gt;</code></pre></div><p>--<br />Nico</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1484">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">Nico</div>
					<div class="post-datetime">
						13 Aug 2004, 10:10					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,</p><p>the package was updated to add an SSL handler using MatrixSSL.</p><p>--<br />Nico</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p3015">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">rfisher1968</div>
					<div class="post-datetime">
						17 Nov 2004, 03:17					</div>
				</div>
				<div class="post-content content">
					<p>Installed appWeb and tried to get matrixssl module working and it did not work. I edited appWeb.conf so that the module would be loaded like all the other modules and the error message indicates that the libmatrixSslmodule.so does not exist. All the other modules load and I get a working web server, but when i try to get matrixssl working it errors out. Any thoughts or what?</p><p>Any help would be appreciated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p3021">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">Nico</div>
					<div class="post-datetime">
						18 Nov 2004, 01:24					</div>
				</div>
				<div class="post-content content">
					<p>The appweb matrixssl module was linked with a more recent package of the matrixssl library (SONAME was changed from libmatrixssl.so.1.2 to libmatrixssl.so.1)</p><p>Try this:</p><div class="codebox"><pre><code>ln -s /usr/lib/libmatrixssl.so.1.2.1 /usr/lib/libmatrixssl.so.1</code></pre></div><p>--<br />Nico</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p3030">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">rfisher1968</div>
					<div class="post-datetime">
						18 Nov 2004, 16:12					</div>
				</div>
				<div class="post-content content">
					<p>Thanks, its all working now.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p3045">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">rfisher1968</div>
					<div class="post-datetime">
						21 Nov 2004, 02:32					</div>
				</div>
				<div class="post-content content">
					<p>I now need to compile a simple C program that allows form processing and email the results via ssmtp/sendmail. This program as written works in standard linux and I have compiled simple C programs that execute via a telnet shell, like the simple &quot;Hello World&quot; program. I also wrote a very simple program that when executed as a CGI program on a standard linux machine would produce a basic webpage, but not on the openwrt. Here is the code:</p><p>#include &lt;stdio.h&gt;</p><p>int main ( void )<br />{<br />&nbsp; &nbsp; printf(&quot;Content-type: text/htmlnn&quot;);<br />&nbsp; &nbsp; printf(&quot;&lt;html&gt;n&quot;);<br />&nbsp; &nbsp; printf(&quot;n&quot;);<br />&nbsp; &nbsp; printf(&quot;&lt;head&gt;n&quot;);&nbsp; &nbsp;<br />&nbsp; &nbsp; printf(&quot;&lt;/head&gt;n&quot;);<br />&nbsp; &nbsp; printf(&quot;&lt;body&gt;n&quot;);<br />&nbsp; &nbsp; printf(&quot;this is a test&quot;);<br />&nbsp; &nbsp; printf(&quot;&lt;/body&gt;n&quot;);<br />&nbsp; &nbsp; printf(&quot;&lt;/html&gt;n&quot;);<br />&nbsp; &nbsp; return(1);<br />}</p><p>This code does compile using the following commandline string:</p><p>/var/buildroot/build_mipsel/staging_dir/bin/mipsel-linux-uclibc-gcc test.c -mips2 -Os -fomit-frame-pointer -o test.cgi</p><p>And when executed at the command line produces the desired results. When executed from appWeb via the CGI interface it returns the following line in the error.log file:</p><p>default:1&nbsp; &nbsp; &nbsp; &nbsp;Error: 503 &quot;Service Unavailable&quot; for &quot;/cgi-bin/test.cgi&quot;, file &quot;/web/cgi-bin/test.cgi&quot;: CGI process /cgi-bin/test.cgi: exited abnormally with exit code</p><p>So my question is that maybe this type of CGI script is not allowed by appWeb or that i need to use fprintf and redirect the pointer to the right location so that the output is displayed by the CGI interface.</p><p>Any help would be appreciated</p><p>bob</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p3046">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">mbm</div>
					<div class="post-datetime">
						21 Nov 2004, 02:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>int main ( void )<br />{<br />...<br />&nbsp; &nbsp; return(1);<br />}</p></blockquote></div><p>The integer returned by main is the exit code, 0 for success and nonzero if an error occured or the program crashed.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p3048">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">rfisher1968</div>
					<div class="post-datetime">
						21 Nov 2004, 14:08					</div>
				</div>
				<div class="post-content content">
					<p>Thanks, i changed the return code to 0 and all is fine. </p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p3050">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">kopernikus</div>
					<div class="post-datetime">
						21 Nov 2004, 17:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>cruelly, but you can use the <em>system</em> function to read file content in a variable</p><div class="codebox"><pre><code>&lt;% content = system(&quot;/bin/cat /path/to/your/file&quot;); %&gt;</code></pre></div><p>Nico</p></blockquote></div><p>Hi Nico, I tried to use your esp_system patch with 1.2.3 yesterday, but while the patch applies cleanly whenever I call <em>&lt;% system(foo); %&gt;</em> the server barfs and I get this im my log:<br /><em><br />default:1&nbsp; p.0&nbsp; Assertion flags &amp; MPR_CMD_DISPOSED, failed (os.cpp:626)</em></p><p>any thoughts?</p><p>thanks</p><p>Forgot to say: this is on linux 2.6.9 glibc-2.3.2</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p3065">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">Nico</div>
					<div class="post-datetime">
						22 Nov 2004, 13:46					</div>
				</div>
				<div class="post-content content">
					<p>There were significant changes in esp (embedded server pages) and ejs (embedded javascript) since 1.3.x.<br />I noticed the system function didn&#039;t work as expected in 1.2.x (for example, running &#039;ipkg status&#039; in an esp script would cause the server to hang) so I decided to drop it...</p><p>My two cents advice would be to wait until they enhance esp and/or ejs to provide that kind of functionality, and stay with cgi in the meantime.</p><p>--<br />Nico</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>