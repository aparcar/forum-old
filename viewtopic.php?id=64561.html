<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> After reboot SDA1 &amp; SDA2 are missing</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p322039">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">christiaanvr</div>
					<div class="post-datetime">
						1 May 2016, 12:00					</div>
				</div>
				<div class="post-content content">
					<p>Hi there,</p><p>I am using an USB Storage stick to extend storage fro MR3020 - so I can install additional packaged required for a script. It worked like a charm with installed services and scripts. Now I had to reboot the device because a script was failing.</p><p>After the reboot, SDA1 &amp; SDA2 are missing. If I run via SSH the command:<br />- ls /dev | grep sda</p><p>it returns only &#039; sda &#039; where normally it returns &#039; sda sda1 sda2&#039; .</p><p>packages required for supporting this usb &#039; block-mount, kmod-fs-ext4 and kmod-usb-storage are still present.</p><p>What can it be? And or how can I enable the sda1 and sd2 again?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p322050">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						1 May 2016, 13:58					</div>
				</div>
				<div class="post-content content">
					<p>When you plug in the USB memory stick, execute <em>dmesg</em> at the shell prompt and see what it says.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p322116">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						1 May 2016, 23:28					</div>
				</div>
				<div class="post-content content">
					<p>Do you have more than one storage device?<br />Does that device work in other computers (specifically, can you at least see the partitions)?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p322181">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">christiaanvr</div>
					<div class="post-datetime">
						2 May 2016, 10:55					</div>
				</div>
				<div class="post-content content">
					<p>@mazilo</p><p>this is the output:</p><p>[&nbsp; &nbsp; 0.000000] Linux version 3.18.23 (perus@ub1510) (gcc version 4.8.3 (OpenWrt/Linaro GCC 4.8-2014.04 r47278) ) #4 Mon Feb 29 23:20:08 EET 2016<br />[&nbsp; &nbsp; 0.000000] MyLoader: sysp=5306ac2e, boardp=8e303482, parts=f904f9ea<br />[&nbsp; &nbsp; 0.000000] bootconsole [early0] enabled<br />[&nbsp; &nbsp; 0.000000] CPU0 revision is: 00019374 (MIPS 24Kc)<br />[&nbsp; &nbsp; 0.000000] SoC: Atheros AR9330 rev 1<br />[&nbsp; &nbsp; 0.000000] Determined physical RAM map:<br />[&nbsp; &nbsp; 0.000000]&nbsp; memory: 02000000 @ 00000000 (usable)<br />[&nbsp; &nbsp; 0.000000] Initrd not found or empty - disabling initrd<br />[&nbsp; &nbsp; 0.000000] Zone ranges:<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal&nbsp; &nbsp;[mem 0x00000000-0x01ffffff]<br />[&nbsp; &nbsp; 0.000000] Movable zone start for each node<br />[&nbsp; &nbsp; 0.000000] Early memory node ranges<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;node&nbsp; &nbsp;0: [mem 0x00000000-0x01ffffff]<br />[&nbsp; &nbsp; 0.000000] Initmem setup node 0 [mem 0x00000000-0x01ffffff]<br />[&nbsp; &nbsp; 0.000000] On node 0 totalpages: 8192<br />[&nbsp; &nbsp; 0.000000] free_area_init_node: node 0, pgdat 803580f0, node_mem_map 81000000<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal zone: 64 pages used for memmap<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal zone: 0 pages reserved<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal zone: 8192 pages, LIFO batch:0<br />[&nbsp; &nbsp; 0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.<br />[&nbsp; &nbsp; 0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes<br />[&nbsp; &nbsp; 0.000000] pcpu-alloc: s0 r0 d32768 u32768 alloc=1*32768<br />[&nbsp; &nbsp; 0.000000] pcpu-alloc: [0] 0<br />[&nbsp; &nbsp; 0.000000] Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 8128<br />[&nbsp; &nbsp; 0.000000] Kernel command line:&nbsp; board=TL-MR3020&nbsp; console=ttyATH0,115200 rootfstype=squashfs,jffs2 noinitrd<br />[&nbsp; &nbsp; 0.000000] PID hash table entries: 128 (order: -3, 512 bytes)<br />[&nbsp; &nbsp; 0.000000] Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)<br />[&nbsp; &nbsp; 0.000000] Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)<br />[&nbsp; &nbsp; 0.000000] Writing ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Readback ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Memory: 28456K/32768K available (2477K kernel code, 126K rwdata, 528K rodata, 252K init, 188K bss, 4312K reserved)<br />[&nbsp; &nbsp; 0.000000] SLUB: HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br />[&nbsp; &nbsp; 0.000000] NR_IRQS:51<br />[&nbsp; &nbsp; 0.000000] Clocks: CPU:400.000MHz, DDR:400.000MHz, AHB:200.000MHz, Ref:25.000MHz<br />[&nbsp; &nbsp; 0.000000] Calibrating delay loop... 265.42 BogoMIPS (lpj=1327104)<br />[&nbsp; &nbsp; 0.080000] pid_max: default: 32768 minimum: 301<br />[&nbsp; &nbsp; 0.080000] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.090000] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.100000] NET: Registered protocol family 16<br />[&nbsp; &nbsp; 0.100000] MIPS: machine is TP-LINK TL-MR3020<br />[&nbsp; &nbsp; 0.370000] Switched to clocksource MIPS<br />[&nbsp; &nbsp; 0.370000] NET: Registered protocol family 2<br />[&nbsp; &nbsp; 0.380000] TCP established hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.380000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.380000] TCP: Hash tables configured (established 1024 bind 1024)<br />[&nbsp; &nbsp; 0.390000] TCP: reno registered<br />[&nbsp; &nbsp; 0.390000] UDP hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.400000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.410000] NET: Registered protocol family 1<br />[&nbsp; &nbsp; 0.410000] PCI: CLS 0 bytes, default 32<br />[&nbsp; &nbsp; 0.410000] futex hash table entries: 256 (order: -1, 3072 bytes)<br />[&nbsp; &nbsp; 0.430000] squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />[&nbsp; &nbsp; 0.430000] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.<br />[&nbsp; &nbsp; 0.440000] msgmni has been set to 55<br />[&nbsp; &nbsp; 0.460000] io scheduler noop registered<br />[&nbsp; &nbsp; 0.460000] io scheduler deadline registered (default)<br />[&nbsp; &nbsp; 0.460000] Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled<br />[&nbsp; &nbsp; 0.470000] ar933x-uart: ttyATH0 at MMIO 0x18020000 (irq = 11, base_baud = 1562500) is a AR933X UART<br />[&nbsp; &nbsp; 0.480000] console [ttyATH0] enabled<br />[&nbsp; &nbsp; 0.480000] bootconsole [early0] disabled<br />[&nbsp; &nbsp; 0.500000] m25p80 spi0.0: found w25q32, expected m25p80<br />[&nbsp; &nbsp; 0.500000] m25p80 spi0.0: w25q32 (4096 Kbytes)<br />[&nbsp; &nbsp; 0.500000] 5 tp-link partitions found on MTD device spi0.0<br />[&nbsp; &nbsp; 0.510000] Creating 5 MTD partitions on &quot;spi0.0&quot;:<br />[&nbsp; &nbsp; 0.510000] 0x000000000000-0x000000020000 : &quot;u-boot&quot;<br />[&nbsp; &nbsp; 0.520000] 0x000000020000-0x0000001357c0 : &quot;kernel&quot;<br />[&nbsp; &nbsp; 0.530000] 0x0000001357c0-0x0000003f0000 : &quot;rootfs&quot;<br />[&nbsp; &nbsp; 0.530000] mtd: device 2 (rootfs) set to be root filesystem<br />[&nbsp; &nbsp; 0.540000] 1 squashfs-split partitions found on MTD device rootfs<br />[&nbsp; &nbsp; 0.540000] 0x0000003a0000-0x0000003f0000 : &quot;rootfs_data&quot;<br />[&nbsp; &nbsp; 0.550000] 0x0000003f0000-0x000000400000 : &quot;art&quot;<br />[&nbsp; &nbsp; 0.550000] 0x000000020000-0x0000003f0000 : &quot;firmware&quot;<br />[&nbsp; &nbsp; 0.580000] libphy: ag71xx_mdio: probed<br />[&nbsp; &nbsp; 1.170000] ag71xx ag71xx.0: connected to PHY at ag71xx-mdio.1:04 [uid=004dd041, driver=Generic PHY]<br />[&nbsp; &nbsp; 1.180000] eth0: Atheros AG71xx at 0xb9000000, irq 4, mode:MII<br />[&nbsp; &nbsp; 1.180000] TCP: cubic registered<br />[&nbsp; &nbsp; 1.180000] NET: Registered protocol family 17<br />[&nbsp; &nbsp; 1.190000] bridge: automatic filtering via arp/ip/ip6tables has been deprecated. Update your scripts to load br_netfilter if you need this.<br />[&nbsp; &nbsp; 1.200000] 8021q: 802.1Q VLAN Support v1.8<br />[&nbsp; &nbsp; 1.210000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.<br />[&nbsp; &nbsp; 1.220000] Freeing unused kernel memory: 252K (80371000 - 803b0000)<br />[&nbsp; &nbsp; 2.520000] init: Console is alive<br />[&nbsp; &nbsp; 2.520000] init: - watchdog -<br />[&nbsp; &nbsp; 4.450000] usbcore: registered new interface driver usbfs<br />[&nbsp; &nbsp; 4.450000] usbcore: registered new interface driver hub<br />[&nbsp; &nbsp; 4.460000] usbcore: registered new device driver usb<br />[&nbsp; &nbsp; 4.520000] SCSI subsystem initialized<br />[&nbsp; &nbsp; 4.530000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver<br />[&nbsp; &nbsp; 4.540000] ehci-platform: EHCI generic platform driver<br />[&nbsp; &nbsp; 4.540000] ehci-platform ehci-platform: EHCI Host Controller<br />[&nbsp; &nbsp; 4.540000] ehci-platform ehci-platform: new USB bus registered, assigned bus number 1<br />[&nbsp; &nbsp; 4.550000] ehci-platform ehci-platform: irq 3, io mem 0x1b000000<br />[&nbsp; &nbsp; 4.580000] ehci-platform ehci-platform: USB 2.0 started, EHCI 1.00<br />[&nbsp; &nbsp; 4.580000] hub 1-0:1.0: USB hub found<br />[&nbsp; &nbsp; 4.580000] hub 1-0:1.0: 1 port detected<br />[&nbsp; &nbsp; 4.590000] usbcore: registered new interface driver usb-storage<br />[&nbsp; &nbsp; 4.640000] init: - preinit -<br />[&nbsp; &nbsp; 5.270000] usb 1-1: new high-speed USB device number 2 using ehci-platform<br />[&nbsp; &nbsp; 5.500000] random: procd urandom read with 8 bits of entropy available<br />[&nbsp; &nbsp; 8.320000] eth0: link up (100Mbps/Full duplex)<br />[&nbsp; &nbsp; 8.750000] mount_root: loading kmods from internal overlay<br />[&nbsp; &nbsp; 9.040000] jffs2: notice: (357) jffs2_build_xattr_subsystem: complete building xattr subsystem, 0 of xdatum (0 unchecked, 0 orphan) and 0 of xref (0 dead, 0 orphan) found.<br />[&nbsp; &nbsp; 9.050000] block: attempting to load /tmp/jffs_cfg/upper/etc/config/fstab<br />[&nbsp; &nbsp; 9.060000] block: extroot: device not present, retrying in 5 seconds<br />[&nbsp; &nbsp;14.070000] block: extroot: cannot find device sda2<br />[&nbsp; &nbsp;14.100000] jffs2: notice: (354) jffs2_build_xattr_subsystem: complete building xattr subsystem, 0 of xdatum (0 unchecked, 0 orphan) and 0 of xref (0 dead, 0 orphan) found.<br />[&nbsp; &nbsp;14.260000] block: attempting to load /tmp/jffs_cfg/upper/etc/config/fstab<br />[&nbsp; &nbsp;14.270000] block: extroot: device not present, retrying in 5 seconds<br />[&nbsp; &nbsp;15.030000] usb 1-1: new high-speed USB device number 3 using ehci-platform<br />[&nbsp; &nbsp;15.180000] usb-storage 1-1:1.0: USB Mass Storage device detected<br />[&nbsp; &nbsp;15.180000] scsi host0: usb-storage 1-1:1.0<br />[&nbsp; &nbsp;16.190000] scsi 0:0:0:0: Direct-Access&nbsp; &nbsp; &nbsp;USB&nbsp; &nbsp; &nbsp; Flash Drive&nbsp; &nbsp; &nbsp; 2.00 PQ: 0 ANSI: 0<br />[&nbsp; &nbsp;16.200000] sd 0:0:0:0: [sda] Attached SCSI removable disk<br />[&nbsp; &nbsp;19.280000] block: extroot: cannot find device sda2<br />[&nbsp; &nbsp;19.280000] mount_root: switching to jffs2 overlay<br />[&nbsp; &nbsp;19.330000] eth0: link down<br />[&nbsp; &nbsp;19.340000] procd: - early -<br />[&nbsp; &nbsp;19.350000] procd: - watchdog -<br />[&nbsp; &nbsp;20.230000] procd: - ubus -<br />[&nbsp; &nbsp;21.250000] procd: - init -<br />[&nbsp; &nbsp;22.330000] NET: Registered protocol family 10<br />[&nbsp; &nbsp;22.340000] ip6_tables: (C) 2000-2006 Netfilter Core Team<br />[&nbsp; &nbsp;22.360000] Loading modules backported from Linux version v4.4-rc5-1913-gc8fdf68<br />[&nbsp; &nbsp;22.370000] Backport generated by backports.git backports-20151218-0-g2f58d9d<br />[&nbsp; &nbsp;22.380000] ip_tables: (C) 2000-2006 Netfilter Core Team<br />[&nbsp; &nbsp;22.400000] nf_conntrack version 0.5.0 (448 buckets, 1792 max)<br />[&nbsp; &nbsp;22.450000] xt_time: kernel timezone is -0000<br />[&nbsp; &nbsp;22.580000] PPP generic driver version 2.4.2<br />[&nbsp; &nbsp;22.580000] NET: Registered protocol family 24<br />[&nbsp; &nbsp;22.650000] ath: EEPROM regdomain: 0x0<br />[&nbsp; &nbsp;22.650000] ath: EEPROM indicates default country code should be used<br />[&nbsp; &nbsp;22.650000] ath: doing EEPROM country-&gt;regdmn map search<br />[&nbsp; &nbsp;22.650000] ath: country maps to regdmn code: 0x3a<br />[&nbsp; &nbsp;22.650000] ath: Country alpha2 being used: US<br />[&nbsp; &nbsp;22.650000] ath: Regpair used: 0x3a<br />[&nbsp; &nbsp;22.660000] ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;<br />[&nbsp; &nbsp;22.660000] ieee80211 phy0: Atheros AR9330 Rev:1 mem=0xb8100000, irq=2<br />[&nbsp; &nbsp;33.430000] device eth0 entered promiscuous mode<br />[&nbsp; &nbsp;33.430000] IPv6: ADDRCONF(NETDEV_UP): br-lan: link is not ready<br />[&nbsp; &nbsp;36.170000] eth0: link up (100Mbps/Full duplex)<br />[&nbsp; &nbsp;36.170000] br-lan: port 1(eth0) entered forwarding state<br />[&nbsp; &nbsp;36.180000] br-lan: port 1(eth0) entered forwarding state<br />[&nbsp; &nbsp;36.180000] IPv6: ADDRCONF(NETDEV_CHANGE): br-lan: link becomes ready<br />[&nbsp; &nbsp;38.180000] br-lan: port 1(eth0) entered forwarding state<br />[&nbsp; &nbsp;75.970000] random: nonblocking pool is initialized<br />[ 1727.750000] usb 1-1: USB disconnect, device number 3<br />[ 1733.040000] usb 1-1: new high-speed USB device number 4 using ehci-platform<br />[ 1733.260000] usb-storage 1-1:1.0: USB Mass Storage device detected<br />[ 1733.270000] scsi host1: usb-storage 1-1:1.0<br />[ 1734.270000] scsi 1:0:0:0: Direct-Access&nbsp; &nbsp; &nbsp;Kingston DataTraveler 2.0 0000 PQ: 0 ANSI: 4<br />[ 1734.280000] sd 1:0:0:0: [sda] 30535744 512-byte logical blocks: (15.6 GB/14.5 GiB)<br />[ 1734.290000] sd 1:0:0:0: [sda] Write Protect is off<br />[ 1734.290000] sd 1:0:0:0: [sda] Mode Sense: 23 00 00 00<br />[ 1734.300000] sd 1:0:0:0: [sda] Write cache: disabled, read cache: enabled, doesn&#039;t support DPO or FUA<br />[ 1734.320000]&nbsp; sda: sda1 sda2<br />[ 1734.330000] sd 1:0:0:0: [sda] Attached SCSI removable disk</p><p>Does it say somehting to you?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p322201">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						2 May 2016, 16:00					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>[ 1734.280000] sd 1:0:0:0: [sda] 30535744 512-byte logical blocks: (15.6 GB/14.5 GiB)
[ 1734.290000] sd 1:0:0:0: [sda] Write Protect is off
[ 1734.290000] sd 1:0:0:0: [sda] Mode Sense: 23 00 00 00
[ 1734.300000] sd 1:0:0:0: [sda] Write cache: disabled, read cache: enabled, doesn&#039;t support DPO or FUA
[ 1734.320000]  sda: sda1 sda2
[ 1734.330000] sd 1:0:0:0: [sda] Attached SCSI removable disk</code></pre></div><p>Looks like the system does find sda1 and sda2... no idea why they do not show, however.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p322214">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Max Hopper</div>
					<div class="post-datetime">
						2 May 2016, 16:52					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dmesg wrote:</cite><blockquote><p>[&nbsp; &nbsp;19.280000] block: extroot: cannot find device sda2<br />[&nbsp; &nbsp;19.280000] mount_root: switching to jffs2 overlay<br />&lt;some 1700 seconds into the future&gt;<br />[ 1727.750000] usb 1-1: USB disconnect, device number 3<br />[ 1733.040000] usb 1-1: new high-speed USB device number 4 using ehci-platform<br />[ 1733.260000] usb-storage 1-1:1.0: USB Mass Storage device detected<br />[ 1733.270000] scsi host1: usb-storage 1-1:1.0<br />[ 1734.270000] scsi 1:0:0:0: Direct-Access&nbsp; &nbsp; &nbsp;Kingston DataTraveler 2.0 0000 PQ: 0 ANSI: 4<br />[ 1734.280000] sd 1:0:0:0: [sda] 30535744 512-byte logical blocks: (15.6 GB/14.5 GiB)<br />[ 1734.290000] sd 1:0:0:0: [sda] Write Protect is off<br />[ 1734.290000] sd 1:0:0:0: [sda] Mode Sense: 23 00 00 00<br />[ 1734.300000] sd 1:0:0:0: [sda] Write cache: disabled, read cache: enabled, doesn&#039;t support DPO or FUA<br />[ 1734.320000]&nbsp; sda: sda1 sda2<br />[ 1734.330000] sd 1:0:0:0: [sda] Attached SCSI removable disk</p></blockquote></div>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>