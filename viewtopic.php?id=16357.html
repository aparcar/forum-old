<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> RB133C hangs detecting 64Mb ram</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p71071">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">studioideasw@gmail.com</div>
					<div class="post-datetime">
						18 Jul 2008, 12:36					</div>
				</div>
				<div class="post-content content">
					<p>Sometime openwrt on mikrotik board wrong detecting ram. It found 64mb instead of 16, so the board hang and doesn&#039;t boot. This is a big problem when the board is mounted. </p><p>I solved the issue in this way: </p><p>File build_mipsel/linux-2.6-adm5120/linux-2.6.22-rc6/arch/mips/adm5120/adm5120_info.c, line 998 </p><p>&nbsp; &nbsp; &nbsp; &nbsp; *p = t;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; mem_dbg(&quot;%ldMB chip found\n&quot;, size &gt;&gt; 20);</p><p>(*)&nbsp; &nbsp; &nbsp;if (size == (64 &lt;&lt; 20))<br />(*)&nbsp; &nbsp; &nbsp;{ mem_dbg(&quot;Enrico patch, no board mikrotik with 64Mb flash, is a 16Mb on 133C&quot;);<br />(*)&nbsp; &nbsp; &nbsp; &nbsp; size= 16&lt;&lt;20;<br />(*)&nbsp; &nbsp; &nbsp;}</p><p>&nbsp; &nbsp; &nbsp; &nbsp; if (size == (32 &lt;&lt; 20))<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* if bank size is 32MB, 2nd bank is not supported */<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; goto out;</p><p>(*) mean i added the line</p><p>Not much correct, but mikrotik doesn&#039;t produce a adm5120 board with 64mb ram, and i have no notice of someone else that produce it, so the patch work. <br />May be someone of you can do something better. </p><p>Sorry. I have no time to upload a patch. <br />Enrico.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>