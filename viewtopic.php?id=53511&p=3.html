<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> P-2812HNU-FX: getting OpenWrt installed</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 6 Jun 2015 and 5 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 3 of 23</div><nav><ul><li><a href="viewtopic.php%3Fid=53511&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=53511&amp;p=2.html">2</a></li><li class="pagination-current"><span>3</span></li><li><a href="viewtopic.php%3Fid=53511&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=53511&amp;p=5.html">5</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=53511&amp;p=23.html">23</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p257906">
				<div class="post-metadata">
					<div class="post-num">Post #51</div>
					<div class="post-author">DGDodo</div>
					<div class="post-datetime">
						16 Dec 2014, 20:49					</div>
				</div>
				<div class="post-content content">
					<p><img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad"/>&nbsp; Except my WAN interface, all seems to work fine.<br/></p><div class="codebox"><pre><code>Wed Dec  3 20:25:56 2014 daemon.notice netifd: wan (2061): udhcpc (v1.22.1) started
Wed Dec  3 20:25:57 2014 daemon.notice netifd: wan (2061): Sending discover...
Wed Dec  3 20:26:00 2014 daemon.notice netifd: wan (2061): Sending discover...
Wed Dec  3 20:26:03 2014 daemon.notice netifd: wan (2061): Sending discover...
Wed Dec  3 20:27:10 2014 daemon.notice netifd: wan (2061): Received SIGTERM
Wed Dec  3 20:27:10 2014 daemon.notice netifd: Interface &#039;wan&#039; is now down
Wed Dec  3 20:27:10 2014 daemon.notice netifd: Interface &#039;wan&#039; is disabled
Wed Dec  3 20:27:10 2014 daemon.notice netifd: Interface &#039;wan&#039; is enabled
Wed Dec  3 20:27:10 2014 daemon.notice netifd: Interface &#039;wan&#039; is setting up now
Wed Dec  3 20:27:10 2014 daemon.notice netifd: wan (2443): udhcpc (v1.22.1) started
Wed Dec  3 20:27:10 2014 daemon.notice netifd: wan (2443): Sending discover...
Wed Dec  3 20:27:13 2014 daemon.notice netifd: wan (2443): Sending discover...
Wed Dec  3 20:27:16 2014 daemon.notice netifd: wan (2443): Sending discover...
Wed Dec  3 20:27:24 2014 daemon.notice netifd: wan (2443): Received SIGTERM
Wed Dec  3 20:27:24 2014 daemon.notice netifd: Interface &#039;wan&#039; is now down
Wed Dec  3 20:27:24 2014 daemon.notice netifd: Interface &#039;wan&#039; is disabled
Wed Dec  3 20:27:24 2014 daemon.notice netifd: Network device &#039;nas0&#039; link is down
Wed Dec  3 20:27:24 2014 daemon.notice netifd: Interface &#039;wan&#039; has link connectivity loss</code></pre></div><p>And i need a re-install due to too many bad erasable blocks ...<br/></p><div class="codebox"><pre><code>[    0.436000] Scanning device for bad blocks
[    0.460000] Bad eraseblock 254 at 0x000001fc0000
[    0.464000] Bad eraseblock 255 at 0x000001fe0000
[    0.468000] Bad eraseblock 256 at 0x000002000000
[    0.472000] Bad eraseblock 257 at 0x000002020000
[    0.476000] Bad eraseblock 258 at 0x000002040000
[    0.480000] Bad eraseblock 259 at 0x000002060000
[    0.488000] Bad eraseblock 260 at 0x000002080000
[    0.492000] Bad eraseblock 261 at 0x0000020a0000
[    0.496000] Bad eraseblock 262 at 0x0000020c0000
[    0.500000] Bad eraseblock 263 at 0x0000020e0000
[    0.504000] Bad eraseblock 264 at 0x000002100000
[    0.508000] Bad eraseblock 265 at 0x000002120000
[    0.516000] Bad eraseblock 266 at 0x000002140000
[    0.520000] Bad eraseblock 267 at 0x000002160000
[    0.524000] Bad eraseblock 268 at 0x000002180000
[    0.528000] Bad eraseblock 269 at 0x0000021a0000
[    0.532000] Bad eraseblock 270 at 0x0000021c0000
[    0.536000] Bad eraseblock 271 at 0x0000021e0000
[    0.540000] Bad eraseblock 272 at 0x000002200000
[    0.548000] Bad eraseblock 273 at 0x000002220000
[    0.552000] Bad eraseblock 274 at 0x000002240000
[    0.556000] Bad eraseblock 276 at 0x000002280000
[    0.560000] Bad eraseblock 277 at 0x0000022a0000
[    0.564000] Bad eraseblock 278 at 0x0000022c0000
[    0.568000] Bad eraseblock 279 at 0x0000022e0000
[    0.576000] Bad eraseblock 281 at 0x000002320000
[    0.580000] Bad eraseblock 284 at 0x000002380000
[    0.584000] Bad eraseblock 285 at 0x0000023a0000
[    0.588000] Bad eraseblock 286 at 0x0000023c0000
[    0.592000] Bad eraseblock 288 at 0x000002400000
[    0.596000] Bad eraseblock 290 at 0x000002440000
[    0.600000] Bad eraseblock 291 at 0x000002460000
[    0.608000] Bad eraseblock 292 at 0x000002480000
[    0.612000] Bad eraseblock 293 at 0x0000024a0000
[    0.616000] Bad eraseblock 294 at 0x0000024c0000
[    0.620000] Bad eraseblock 295 at 0x0000024e0000
[    0.624000] Bad eraseblock 296 at 0x000002500000
[    0.628000] Bad eraseblock 297 at 0x000002520000
[    0.636000] Bad eraseblock 298 at 0x000002540000
[    0.640000] Bad eraseblock 299 at 0x000002560000
[    0.644000] Bad eraseblock 300 at 0x000002580000
[    0.648000] Bad eraseblock 301 at 0x0000025a0000
[    0.652000] Bad eraseblock 302 at 0x0000025c0000
[    0.656000] Bad eraseblock 303 at 0x0000025e0000
[    0.660000] Bad eraseblock 304 at 0x000002600000
[    0.668000] Bad eraseblock 305 at 0x000002620000
[    0.672000] Bad eraseblock 306 at 0x000002640000
[    0.676000] Bad eraseblock 307 at 0x000002660000
[    0.680000] Bad eraseblock 308 at 0x000002680000
[    0.684000] Bad eraseblock 309 at 0x0000026a0000
[    0.688000] Bad eraseblock 310 at 0x0000026c0000
[    0.696000] Bad eraseblock 311 at 0x0000026e0000
[    0.700000] Bad eraseblock 312 at 0x000002700000
[    0.704000] Bad eraseblock 313 at 0x000002720000
[    0.708000] Bad eraseblock 314 at 0x000002740000
[    0.712000] Bad eraseblock 315 at 0x000002760000
[    0.716000] Bad eraseblock 316 at 0x000002780000
[    0.720000] Bad eraseblock 317 at 0x0000027a0000
[    0.732000] Bad eraseblock 371 at 0x000002e60000
[    0.732000] Bad eraseblock 372 at 0x000002e80000
[    0.740000] Bad eraseblock 373 at 0x000002ea0000
[    0.744000] Bad eraseblock 374 at 0x000002ec0000
[    0.748000] Bad eraseblock 375 at 0x000002ee0000
[    0.752000] Bad eraseblock 376 at 0x000002f00000
[    0.756000] Bad eraseblock 377 at 0x000002f20000
[    0.760000] Bad eraseblock 378 at 0x000002f40000
[    0.768000] Bad eraseblock 379 at 0x000002f60000
[    0.772000] Bad eraseblock 381 at 0x000002fa0000
[    0.776000] Bad eraseblock 384 at 0x000003000000
[    0.780000] Bad eraseblock 385 at 0x000003020000
[    0.784000] Bad eraseblock 386 at 0x000003040000
[    0.788000] Bad eraseblock 387 at 0x000003060000
[    0.840000] Bad eraseblock 973 at 0x0000079a0000</code></pre></div>											<p class="post-edited">(Last edited by <strong>DGDodo</strong> on 16 Dec 2014, 20:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257917">
				<div class="post-metadata">
					<div class="post-num">Post #52</div>
					<div class="post-author">scapi</div>
					<div class="post-datetime">
						16 Dec 2014, 23:12					</div>
				</div>
				<div class="post-content content">
					<p>Did you change Vlan config ? Still you didn&#039;t tell us how do you connect to internet, WAN ETH or WAN ADSL/VDSL.</p><p>I need dump of these two:</p><p>0x000003ce0000-0x000004760000 : &quot;reserve&quot;<br/>0x000007ec0000-0x000007f00000 : &quot;romd&quot;</p><p>If anyone have original firmware.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257918">
				<div class="post-metadata">
					<div class="post-num">Post #53</div>
					<div class="post-author">cornelus2009</div>
					<div class="post-datetime">
						16 Dec 2014, 23:34					</div>
				</div>
				<div class="post-content content">
					<p><a href="https://www.dropbox.com/s/c5t26g2xk34nyhq/reserve?dl=0">https://www.dropbox.com/s/c5t26g2xk34nyhq/reserve?dl=0</a><br/><a href="https://www.dropbox.com/s/s9uzhbs5ylrj73h/rom-d?dl=0">https://www.dropbox.com/s/s9uzhbs5ylrj73h/rom-d?dl=0</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257927">
				<div class="post-metadata">
					<div class="post-num">Post #54</div>
					<div class="post-author">DGDodo</div>
					<div class="post-datetime">
						17 Dec 2014, 01:57					</div>
				</div>
				<div class="post-content content">
					<p>Made a own tutorial about setup progress and getting ride of most NAND Bad Blocks:<br/><a href="http://dgcomsys.noip.me/phpbb/viewtopic.php?f=19&amp;t=48&amp;p=112#p112">http://dgcomsys.noip.me/phpbb/viewtopic.php?f=19&amp;t=48&amp;p=112#p112</a></p><p>My WAN port is most probably hard defect, but have to investigate.<br/>And still working with the box not connected to internet (yet, maybe by wifi, lol)</p><p>I&#039;ll try the newest <strong>scapi</strong> code tomorrow.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257944">
				<div class="post-metadata">
					<div class="post-num">Post #55</div>
					<div class="post-author">scapi</div>
					<div class="post-datetime">
						17 Dec 2014, 10:06					</div>
				</div>
				<div class="post-content content">
					<p>@cornelus2009</p><p>Strange, in sources u-boot env points to &quot;reserved&quot;, but In your dump it is empty, maybe branded F1 has different boot layout or config.</p><p>@DGDodo</p><p>From your ifconfig I see that you didn&#039;t read what I&#039;ve wrote.</p><p>Set Vlans to enable WAN ETH, read wiki how to do that, wan port is &quot;5&quot;.</p><p>Edit: WiFi and ADSL quite stable, no nand errors, uptime about 4 days:</p><p><a href="https://www.dropbox.com/s/b6l3t6l1fw1qsnm/Zrzut%20ekranu%202014-12-18%2021.28.31.png">https://www.dropbox.com/s/b6l3t6l1fw1qsnm/Zrzut%20ekranu%202014-12-18%2021.28.31.png</a></p><p>Updated BB images in my dropbox(NAND fix; cal_data), added possibility to &quot;sysupgrade&quot; without need to enter u-boot (need some tests).</p><p>@cornelus2009 </p><p>How about your tests ? Nand seems to be stable now, at least no errors when installing packages and changing config.</p><p>@DGDodo<br/>With WAN connected tftp anything within u-boot and check status of:</p><div class="codebox"><pre><code>P-2812HNU-F1 # tftpboot 0x80800000 openwrt-lantiq-xrx200-P2812HNUF1-uImage-initramfs
ltq_phy: addr 0, link 1, speed 100, duplex 1
ltq_phy: addr 1, link 0, speed 10, duplex 0
ltq_phy: addr 17, link 0, speed 10, duplex 0
ltq_phy: addr 19, link 0, speed 10, duplex 0
ltq_phy: addr 5, link 0, speed 10, duplex 0  &lt;-----</code></pre></div>											<p class="post-edited">(Last edited by <strong>scapi</strong> on 18 Dec 2014, 22:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258145">
				<div class="post-metadata">
					<div class="post-num">Post #56</div>
					<div class="post-author">DGDodo</div>
					<div class="post-datetime">
						19 Dec 2014, 16:22					</div>
				</div>
				<div class="post-content content">
					<p><strong>scapi</strong>, indeed i do not read too much <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile"/> <br/>WAN ETH is what i wanna use, WAN ADSL/VDSL could be disabled on my device, as i did with my other F1, still running ZyXEL firmware. (I don&#039;t have a ADSL or VDSL line here...)</p><p>As you wrote earlier: WAN should be enabled by default, it does NOT work default?<br/>Isn&#039;t the default value ADSL/VDSL? Which i don&#039;t (can&#039;t) use?</p><p>So i guess my WAN port is defect, as i do get a link on all LAN ports (4, 2, 1 and 0) but don&#039;t get a link on (default) WAN Port 5.</p><p>During boot the port is detected:<br/></p><div class="codebox"><pre><code>[    0.744000] eth0: attached PHY [Lantiq XWAY VR9 GPHY 11G v1.3] (phy_addr=0:00, irq=-1)
[    0.812000] eth0: attached PHY [Lantiq XWAY VR9 GPHY 11G v1.3] (phy_addr=0:01, irq=-1)
[    0.880000] eth0: attached PHY [Lantiq XWAY VR9 GPHY 11G v1.4] (phy_addr=0:11, irq=-1)
[    0.948000] eth0: attached PHY [Lantiq XWAY VR9 GPHY 11G v1.4] (phy_addr=0:13, irq=-1)
[    1.016000] eth0: attached PHY [Lantiq XWAY VR9 GPHY 11G v1.3] (phy_addr=0:05, irq=-1)</code></pre></div><p>But further within OS it does not work. <br/>As WDS device (WLAN=<strong>WAN</strong>, ports 4,2,1,0,WAN=<strong>LAN</strong>), or as Router (WAN=<strong>WAN</strong>, ports 4,2,1,0,WLAN=<strong>LAN</strong>) the WAN port won&#039;t get any link. Only errors as described before.</p><p>Below my current network config, VLAN1=LAN+WLAN, VLAN2=WAN(ETH):<br/></p><div class="codebox"><pre><code>root@OpenWrt:/# cat /etc/config/network

config interface &#039;loopback&#039;
        option ifname &#039;lo&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;127.0.0.1&#039;
        option netmask &#039;255.0.0.0&#039;

config globals &#039;globals&#039;
        option ula_prefix &#039;fddb:2e4d:74ec::/48&#039;

config interface &#039;lan&#039;
        option force_link &#039;1&#039;
        option type &#039;bridge&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;192.168.1.1&#039;
        option netmask &#039;255.255.255.0&#039;
        option ip6assign &#039;60&#039;
        option macaddr &#039;00:01:02:03:04:05&#039;
        option _orig_ifname &#039;eth0.1 radio0.network1&#039;
        option _orig_bridge &#039;true&#039;
        option ifname &#039;eth0.1&#039;

config switch
        option name &#039;switch0&#039;
        option reset &#039;1&#039;
        option enable_vlan &#039;1&#039;

config switch_vlan
        option device &#039;switch0&#039;
        option vlan &#039;1&#039;
        option vid &#039;1&#039;
        option ports &#039;0 1 2 4 6t&#039;

config interface &#039;wan&#039;
        option _orig_ifname &#039;nas0&#039;
        option _orig_bridge &#039;false&#039;
        option proto &#039;dhcp&#039;
        option type &#039;bridge&#039;
        option ifname &#039;eth0.2 nas0&#039;

config switch_vlan
        option device &#039;switch0&#039;
        option vlan &#039;2&#039;
        option vid &#039;2&#039;
        option ports &#039;5 6t&#039;</code></pre></div><p>Next try will be tftp the image on the WAN port (but i guess this won&#039;t work).<br/>Later today or weekend ..</p>											<p class="post-edited">(Last edited by <strong>DGDodo</strong> on 19 Dec 2014, 16:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258150">
				<div class="post-metadata">
					<div class="post-num">Post #57</div>
					<div class="post-author">cornelus2009</div>
					<div class="post-datetime">
						19 Dec 2014, 17:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>@cornelus2009 </p><p>How about your tests ? Nand seems to be stable now, at least no errors when installing packages and changing config.</p></blockquote></div><p>Nand seems stable now, worked about 2 days and today get an crash, no acces to lan, internet droped down.<br/>Not saw in log, what crashed.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258153">
				<div class="post-metadata">
					<div class="post-num">Post #58</div>
					<div class="post-author">scapi</div>
					<div class="post-datetime">
						19 Dec 2014, 19:35					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>DGDodo wrote:</cite><blockquote><p>config interface &#039;wan&#039;<br/>&nbsp; &nbsp; &nbsp; &nbsp; option _orig_ifname &#039;nas0&#039;<br/>&nbsp; &nbsp; &nbsp; &nbsp; option _orig_bridge &#039;false&#039;<br/>&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;dhcp&#039;<br/>&nbsp; &nbsp; &nbsp; &nbsp; option type &#039;bridge&#039;<br/>&nbsp; &nbsp; &nbsp; &nbsp; option ifname &#039;eth0.2 nas0&#039;</p></blockquote></div><p>remove nas0.</p><p>After plugging WAN cable is there any sign on WAN Led ?</p><p>@cornelus2009 are you using adsl/vdsl ?</p>											<p class="post-edited">(Last edited by <strong>scapi</strong> on 19 Dec 2014, 19:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258155">
				<div class="post-metadata">
					<div class="post-num">Post #59</div>
					<div class="post-author">cornelus2009</div>
					<div class="post-datetime">
						19 Dec 2014, 19:55					</div>
				</div>
				<div class="post-content content">
					<p>Nop, using ftth high speed, my provider ofers me 200mb/s, with an huawei hg658c, i got 14mb/s down speed over wifi, with p2812hnuf1 and vgv7519 both with openwrt installed on them, max speed is 7mb/s on wifi and wired same.</p><p>Dunno why speed is reduced.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258163">
				<div class="post-metadata">
					<div class="post-num">Post #60</div>
					<div class="post-author">scapi</div>
					<div class="post-datetime">
						19 Dec 2014, 20:45					</div>
				</div>
				<div class="post-content content">
					<p>If ADSL/VDSL isn&#039;t used disable dsl_control in start up, it can cause memory overflow if not physically connected, as for speed it&#039;s strange I&#039;m on ADSL Line got max over WiFi about 9-10Mbit/s, sync 10-12Mbit/s. Also post output of &quot;swconfig dev switch0 show&quot; or if You have separated WAN &quot;swconfig dev eth? show&quot;.</p>											<p class="post-edited">(Last edited by <strong>scapi</strong> on 19 Dec 2014, 21:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258205">
				<div class="post-metadata">
					<div class="post-num">Post #61</div>
					<div class="post-author">DGDodo</div>
					<div class="post-datetime">
						20 Dec 2014, 03:56					</div>
				</div>
				<div class="post-content content">
					<p><strong>scapi</strong>, </p><p>Quote: &quot;After plugging WAN cable is there any sign on WAN Led ?&quot;<br/>Nope, also not on the switch i use to connect it to, only port4, 2, 1 and 0...</p><p>Seen that &#039;memory overflow&#039; message ones, i guess? after almost 24h of testing <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile"/> or is the <em>jffs2</em> msgs something else? :<br/></p><div class="codebox"><pre><code>[86116.956000] device eth0.1 entered promiscuous mode
[86116.960000] device eth0 entered promiscuous mode
[86116.972000] br-lan: port 1(eth0.1) entered forwarding state
[86116.976000] br-lan: port 1(eth0.1) entered forwarding state
[86118.968000] br-lan: port 1(eth0.1) entered disabled state
[86119.876000] br-lan: port 1(eth0.1) entered forwarding state
[86119.880000] br-lan: port 1(eth0.1) entered forwarding state
[86121.884000] br-lan: port 1(eth0.1) entered forwarding state
[86279.212000] device nas0 entered promiscuous mode
[86279.216000] br-lan: port 2(nas0) entered forwarding state
[86279.224000] br-lan: port 2(nas0) entered forwarding state
[86281.228000] br-lan: port 2(nas0) entered forwarding state
[86320.300000] device nas0 left promiscuous mode
[86320.304000] br-lan: port 2(nas0) entered disabled state
[86330.256000] jffs2: warning: (23907) jffs2_sum_write_data: Not enough space for summary, padsize = -1293</code></pre></div><p>Anyway i disabled <em>dsl_control</em> &amp; <em>dsl_fs</em> from start-up:<br/><span class="postimg"><img src="http://dgcomsys.noip.me/DGWP01/wp-content/uploads/2014/12/img_5494b6a5b31f0.png" alt="http://dgcomsys.noip.me/DGWP01/wp-content/uploads/2014/12/img_5494b6a5b31f0.png"/></span></p><p>Removed nas0 from uci webinterface settings (WAN), as it was also not visable on &#039;ifconfig&#039; on console?<br/>So where or what is now my WAN port? Could/Should i configure it as &#039;Custom Interface:&#039;?<br/></p><div class="codebox"><pre><code>root@OpenWrt:/# ifconfig
br-lan    Link encap:Ethernet  HWaddr 00:01:02:03:04:05
          inet addr:192.168.1.1  Bcast:192.168.1.255  Mask:255.255.255.0
          inet6 addr: fddb:2e4d:74ec::1/60 Scope:Global
          inet6 addr: fe80::201:2ff:fe03:405/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:55626 errors:0 dropped:0 overruns:0 frame:0
          TX packets:32183 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:10282599 (9.8 MiB)  TX bytes:8567975 (8.1 MiB)

eth0      Link encap:Ethernet  HWaddr 1A:FA:B5:26:9F:4D
          inet6 addr: fe80::18fa:b5ff:fe26:9f4d/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:51357 errors:0 dropped:0 overruns:0 frame:0
          TX packets:48632 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:11408642 (10.8 MiB)  TX bytes:13272811 (12.6 MiB)

eth0.1    Link encap:Ethernet  HWaddr 1A:FA:B5:26:9F:4D
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:51350 errors:0 dropped:0 overruns:0 frame:0
          TX packets:36469 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:10072680 (9.6 MiB)  TX bytes:8844111 (8.4 MiB)

eth0.2    Link encap:Ethernet  HWaddr 1A:FA:B5:26:9F:4D
          inet6 addr: fe80::18fa:b5ff:fe26:9f4d/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:11 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:0 (0.0 B)  TX bytes:2106 (2.0 KiB)

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:745834 errors:0 dropped:0 overruns:0 frame:0
          TX packets:745834 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:50723953 (48.3 MiB)  TX bytes:50723953 (48.3 MiB)

wlan0     Link encap:Ethernet  HWaddr 00:0C:43:30:62:00
          inet6 addr: fe80::20c:43ff:fe30:6200/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:17813 errors:0 dropped:0 overruns:0 frame:0
          TX packets:44213 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:1592638 (1.5 MiB)  TX bytes:10375918 (9.8 MiB)</code></pre></div><p>But still WAN stays dead (i guess it&nbsp; was already dead...)<br/>In this overview, i can never get port 5 other status then &#039;no link&#039;:<br/><span class="postimg"><img src="http://dgcomsys.noip.me/DGWP01/wp-content/uploads/2014/12/img_548eda3508014.png" alt="http://dgcomsys.noip.me/DGWP01/wp-content/uploads/2014/12/img_548eda3508014.png"/></span><br/>i have to try <strong>scapi</strong>&#039;s way: tftp over WAN port, but i guess that won&#039;t work either, as there is never a link on port 5...</p><p>Although it&#039;s also strange that eth0, eth0.1 &amp; eth0.2 have same MAC in ifconfig?<br/>Btw, is there anywhere a setting to disable ipv6 everywhere, as eth0.1 looks have no ipv6, eth0.2 does have ipv6?<br/>i really need to read alot more about this &quot;adapter / interface / bridge / switch / vlan / ipv6&quot;&nbsp; kinda stuff&nbsp; ... (ipv4 is know <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile"/> )<br/>Tomorrow looking further into this ... </p><p><strong>cornelius2009</strong>, maybe switch off ADSL/VDSL, as descibed here, if not used? Maybe it improves eth-speeds.</p><p>DG.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258221">
				<div class="post-metadata">
					<div class="post-num">Post #62</div>
					<div class="post-author">scapi</div>
					<div class="post-datetime">
						20 Dec 2014, 11:50					</div>
				</div>
				<div class="post-content content">
					<p>Something is limiting bandwidth via WiFi from router, but I don&#039;t know what:</p><div class="codebox"><pre><code>Client connecting to 192.168.1.1, TCP port 5001
TCP window size: 87.5 KByte (default)
------------------------------------------------------------
[  3] local 192.168.211.130 port 41647 connected with 192.168.1.1 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0-10.1 sec  28.1 MBytes  23.5 Mbits/sec</code></pre></div><p>(100Mbit/s)LAN -&gt; (300Mbit/s) WIFI = 87Mbit/s<br/>(150Mbit/s)WiFi -&gt; (300Mbit/s) WIFI = 23Mbit/s<br/>Don&#039;t have Gigabit to test LAN -&gt; LAN</p><p>@DGDodo</p><p>This is Your WAN</p><div class="codebox"><pre><code>eth0.2    Link encap:Ethernet  HWaddr 1A:FA:B5:26:9F:4D
          inet6 addr: fe80::18fa:b5ff:fe26:9f4d/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:11 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:0 (0.0 B)  TX bytes:2106 (2.0 KiB)</code></pre></div><p>If in U-Boot port 5 still isn&#039;t working then maybe something physically happened to it.<br/>You can always use any port as WAN, just change vlan config.</p>											<p class="post-edited">(Last edited by <strong>scapi</strong> on 20 Dec 2014, 12:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258371">
				<div class="post-metadata">
					<div class="post-num">Post #63</div>
					<div class="post-author">Mijzelf</div>
					<div class="post-datetime">
						21 Dec 2014, 23:16					</div>
				</div>
				<div class="post-content content">
					<p>Today I installed OpenWRT, it was almost painless. The uploading of the ram u-boot took too much time, so I wrote a little program:</p><div class="codebox"><pre><code>#include &lt;time.h&gt;
#include &lt;stdio.h&gt;

int main( int argc, char **argv, char **envp )
{
    int count=0, kb=0;
    char buf[ 1 ];
    while( 1 == read( 0, buf, 1 ) )
    {
        write( 1, buf, 1 );
        if( 1024 == ++count )
        {
            char buffer[ 64 ];
            write( 2, buffer, sprintf( buffer, &quot;\r%d kB&quot;, ++kb ) );
            count = 0;
        }
        usleep( 500 );
    }
    return 0;
}</code></pre></div><p>You can use it this way:</p><div class="codebox"><pre><code>delay &lt;u-boot-file &gt;/dev/ttyUSB0</code></pre></div><p>The usleep( 500 ) adds a delay of 500 microseconds between each byte. I guess it can be shorter, but this way it uploaded at 2kB/sec.</p><p>Further there was one small glitch in scapi&#039;s instructions. Before being able to ubiformat /dev/mtd3 it first has to be detached:</p><div class="codebox"><pre><code>ubidetach -p /dev/mtd3</code></pre></div><p>Now I have to test. Thanks to all who contributed.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258375">
				<div class="post-metadata">
					<div class="post-num">Post #64</div>
					<div class="post-author">scapi</div>
					<div class="post-datetime">
						22 Dec 2014, 00:18					</div>
				</div>
				<div class="post-content content">
					<p>115200 is speed of com port, it can&#039;t take more then 1min.</p><div class="quotebox"><cite>Mijzelf wrote:</cite><blockquote><p>Further there was one small glitch in scapi&#039;s instructions. Before being able to ubiformat /dev/mtd3 it first has to be detached:</p><div class="codebox"><pre><code>ubidetach -p /dev/mtd3</code></pre></div><p>Now I have to test. Thanks to all who contributed.</p></blockquote></div><p>Read again Step 9 it was there from the beginning.</p><p>Edit: Updated images for F3 in my dropbox<br/>Whole NAND is used for UBI and kernel (NOR only for U-Boot/U-Boot env)<br/>Added Calibration data for F3 WiFi.</p><p>For F1/F3 added VDSL annex a/b firmware in dropbox folder, need someone that uses annex B to test if different firmware than one already in image is needed.</p><p>Config for VDSL/ptm:</p><p>file /etc/config/network</p><div class="codebox"><pre><code>#config atm-bridge &#039;atm&#039;
# option vpi &#039;0&#039;
# option vci &#039;35&#039;
# option encaps &#039;llc&#039;
# option payload &#039;bridged&#039;

config interface &#039;wan&#039;
        option ifname &#039;ptm0.35&#039;   &lt;----- use vpi/vci params here example &#039;ptm8.32&#039;  means vpi=8 vci=32
        option proto &#039;pppoe&#039;
        option macaddr &#039;fc:f5:28:17:xx:xx&#039; &lt;----- Your MAC (on my images taken from U-boot env)
        option username &#039;user&#039; &lt;----- username
        option password &#039;password&#039; &lt;----- password

config vdsl &#039;dsl&#039;
        option annex &#039;a&#039;  &lt;------- change annex here
        option firmware &#039;/lib/firmware/vdsl.bin&#039;
        option tone &#039;av&#039; &lt;------- probably if annex B is chosen, needs to be changed to &#039;bv&#039;
        option xfer_mode &#039;ptm&#039;</code></pre></div><p>For ADSL/VDSL over atm:<br/></p><div class="codebox"><pre><code>config atm-bridge &#039;atm&#039;
    option vpi &#039;0&#039; &lt;----- use vpi/vci params here
    option vci &#039;35&#039; &lt;----- use vpi/vci params here
    option encaps &#039;llc&#039;
    option payload &#039;bridged&#039;

config interface &#039;wan&#039;
    option ifname &#039;nas0&#039;
    option proto &#039;pppoe&#039;
    option ipv6 &#039;1&#039;
        option macaddr &#039;fc:f5:28:17:xx:xx&#039; &lt;----- Your MAC (on my images taken from U-boot env)
        option username &#039;user&#039; &lt;----- username
        option password &#039;password&#039; &lt;----- password

config vdsl &#039;dsl&#039;
    option annex &#039;a&#039; &lt;------- change annex here
    option firmware &#039;/lib/firmware/vdsl.bin&#039;
    option tone &#039;av&#039; &lt;------- probably if annex B is chosen, needs to be changed to &#039;bv&#039;
    option xfer_mode &#039;atm&#039;</code></pre></div>											<p class="post-edited">(Last edited by <strong>scapi</strong> on 22 Dec 2014, 10:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258423">
				<div class="post-metadata">
					<div class="post-num">Post #65</div>
					<div class="post-author">Mijzelf</div>
					<div class="post-datetime">
						22 Dec 2014, 16:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>scapi wrote:</cite><blockquote><p>115200 is speed of com port, it can&#039;t take more then 1min.</p></blockquote></div><p>When just uploading at 115200 bits/sec, the upload is ignored. (or it&nbsp; crashes the receiver, don&#039;t know). When using Teraterm and delaying each byte 1 msec, I got a whopping 90 bytes/second.</p><br/><div class="quotebox"><blockquote><p>Read again Step 9 it was there from the beginning.</p></blockquote></div><p>:blush:</p><p>The box seems stable, ADSL trains in a bit faster than on my stock P2812HNU-F1.&nbsp; 8.064/1.024&nbsp; vs +/- 7000/950. The stock box runs fw 3.11TUJ. It is possible that the current speed is the max. I have an 8/1 account.</p><p>Now I have problems to get IPv6 running. I think I have boiled it down to the inability to load sit.ko. This is not possible because symbol __secpath_dest&nbsp; is missing. I found that in linux/net/xfrm/xfrm_input.c. It seems to have something to do with ipsec. Did you disable that?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258428">
				<div class="post-metadata">
					<div class="post-num">Post #66</div>
					<div class="post-author">DGDodo</div>
					<div class="post-datetime">
						22 Dec 2014, 17:50					</div>
				</div>
				<div class="post-content content">
					<p><strong>Mijzelf</strong>, i&#039;m using TeraTerm with 115200 serial connection, try 1ms line-delay instead of char-delay? i now flash the u-boot within 2 minutes. Only my 1st try took a long time (i probably had slower serial connection back then).</p><p>I sometimes do get the following message after command &#039;ubidetach -p /dev/mtd3&#039;:<br/></p><div class="codebox"><pre><code>root@OpenWrt:/# ubidetach -p /dev/mtd3
ubidetach: error!: cannot detach &quot;/dev/mtd3&quot;
           error 19 (No such device)</code></pre></div><p>But then the next ubiformat command will run fine.</p><p><strong>scapi</strong> my box won&#039;t tftp from WAN (&#039;<em>eth0: attached PHY [Lantiq XWAY VR9 GPHY 11G v1.3] (phy_addr=0:05, irq=-1)</em>&#039;) port, altough its recognized initially.<br/>The earlier mentioned <em>eth0.2</em> was manually created and therefore had the same MAC address.<br/>WAN port is after a clean re-flash ADSL/VDSL (nas0), when i remove <em>nas0</em> openWRT does not see any WAN port. i have to investigate why. As i don&#039;t have ADSL/VDSL line, i disabled that functionality.</p><p>I will try to setup my box with WLAN=WAN and eth0.x=LAN (so as an Wireless extended 4x1Gbps switch), and i&#039;m aware that i could setup any eth_port as WAN port.</p><p>DG.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258433">
				<div class="post-metadata">
					<div class="post-num">Post #67</div>
					<div class="post-author">scapi</div>
					<div class="post-datetime">
						22 Dec 2014, 20:25					</div>
				</div>
				<div class="post-content content">
					<p>@Mijzelf</p><p>IPv6 by default is build in, don&#039;t know what Your trying to load, give hint and I compile it for You.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258440">
				<div class="post-metadata">
					<div class="post-num">Post #68</div>
					<div class="post-author">Mijzelf</div>
					<div class="post-datetime">
						22 Dec 2014, 22:28					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m trying to get an IPv6 wan address. My providers offers that through a 6to4 tunnel. It works on stock firmware, but on OpenWRT the status of wan6 is &#039;<em>not connected</em>&#039;. <br/>Then I tried aiccu, but it also fails. AFAIK both need sit.ko, and I found I can&#039;t load that, as I wrote.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258468">
				<div class="post-metadata">
					<div class="post-num">Post #69</div>
					<div class="post-author">scapi</div>
					<div class="post-datetime">
						23 Dec 2014, 09:48					</div>
				</div>
				<div class="post-content content">
					<p>6to4 and rest ipv6 related packages in <a href="https://www.dropbox.com/sh/lwll9on02oood4p/AADxmacP4LqS1dIUS350jhFIa?dl=0">https://www.dropbox.com/sh/lwll9on02oood4p/AADxmacP4LqS1dIUS350jhFIa?dl=0</a> but normal repo should work also, it&#039;s a script so:</p><p>opkg update <br/>opkg install 6to4</p><p>Rest is here <a href="http://wiki.openwrt.org/doc/uci/network6">http://wiki.openwrt.org/doc/uci/network6</a></p>											<p class="post-edited">(Last edited by <strong>scapi</strong> on 23 Dec 2014, 10:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258488">
				<div class="post-metadata">
					<div class="post-num">Post #70</div>
					<div class="post-author">Mijzelf</div>
					<div class="post-datetime">
						23 Dec 2014, 13:48					</div>
				</div>
				<div class="post-content content">
					<p>Hej, thanks a lot for your effort. But I think I need the kernel compiled with this modules enabled, not the modules itself. I uninstalled my iptunnel and sit package, and reinstalled yours instead. But still:</p><div class="codebox"><pre><code>~ # modprobe sit
kmod: 2 modules could not be probed
kmod: - ip_tunnel
kmod: - sit

~ # dmesg
[83389.992000] ip_tunnel: Unknown symbol __secpath_destroy (err 0)</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258497">
				<div class="post-metadata">
					<div class="post-num">Post #71</div>
					<div class="post-author">scapi</div>
					<div class="post-datetime">
						23 Dec 2014, 15:35					</div>
				</div>
				<div class="post-content content">
					<p>Why are you trying to force load sit module ? Ipv6 is build in and 6to4 is simple script</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258499">
				<div class="post-metadata">
					<div class="post-num">Post #72</div>
					<div class="post-author">Mijzelf</div>
					<div class="post-datetime">
						23 Dec 2014, 15:59					</div>
				</div>
				<div class="post-content content">
					<p>For me 6to4 fails silently. (Just &#039;not connected&#039;). But, it is dependent on kmod-sit:</p><div class="codebox"><pre><code>Package: 6to4
Version: 12-1
Depends: libc, kmod-ipv6, kmod-sit</code></pre></div><p>I&#039;m not sure where and how the module should be loaded, the script says:</p><div class="codebox"><pre><code>proto_6to4_setup() {
&lt;snip&gt;

        proto_add_tunnel
        json_add_string mode sit</code></pre></div><p>But anyway, the module can&#039;t load, and I think it&#039;s the reason for my silent failure. 6to4 creates a tunnel and uses a sit endpoint.<br/>And apparently sit.ko is one of those modules which needs a &#039;socket&#039; in the kernel, so it can only be loaded in a kernel which had the sit module configured at compile time.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258514">
				<div class="post-metadata">
					<div class="post-num">Post #73</div>
					<div class="post-author">scapi</div>
					<div class="post-datetime">
						23 Dec 2014, 20:10					</div>
				</div>
				<div class="post-content content">
					<p><a href="https://www.dropbox.com/sh/9aup68dv6oq5rzo/AAD-nRzmrWn0m31RK6U0gC5Ea?dl=0">https://www.dropbox.com/sh/9aup68dv6oq5rzo/AAD-nRzmrWn0m31RK6U0gC5Ea?dl=0</a> IPv6 folder, flash it via luci (tar archive without uncompressing) wait 2 minutes and power off/on router.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258527">
				<div class="post-metadata">
					<div class="post-num">Post #74</div>
					<div class="post-author">Mijzelf</div>
					<div class="post-datetime">
						23 Dec 2014, 22:39					</div>
				</div>
				<div class="post-content content">
					<p>Thanks. I confirm that the router can be updated this way, but the settings are lost. (At least when updating from ubifs to ubifs-squashfs).</p><p>The 6to4 tunnel now works.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258596">
				<div class="post-metadata">
					<div class="post-num">Post #75</div>
					<div class="post-author">vladeg</div>
					<div class="post-datetime">
						24 Dec 2014, 17:31					</div>
				</div>
				<div class="post-content content">
					<p>hi guys. Sorry for maybe stupid question, but, if I unsolder flash from my P-2812HNU-F3 router, put it in programmer, and program BIN file from Zyxel website. Will the router work after this? Before I did this with laptop bios and it worked.</p>									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 76 to 75 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 3 of 23</div><nav><ul><li><a href="viewtopic.php%3Fid=53511&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=53511&amp;p=2.html">2</a></li><li class="pagination-current"><span>3</span></li><li><a href="viewtopic.php%3Fid=53511&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=53511&amp;p=5.html">5</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=53511&amp;p=23.html">23</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>