<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> IMPULSE DRIVE on my wrt54gs v1 (usb mod)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 5 Apr 2015 and 18 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=23308&amp;p=2.html">2</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p101239">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">zerx</div>
					<div class="post-datetime">
						23 Jan 2010, 15:53					</div>
				</div>
				<div class="post-content content">
					<p>wrt-54gs v1 (wrt-54g v2) usb mod memo:</p><p>-usb pinout: rh19 usb1_dp, rh20 usb1_dn, rh21 usb2_dp, rh22 usb2_dn<br />(These four &quot;rh&quot; resistors are connected from ground to usb signal lines)<br />-according to the usb 1.1 specification 15k ohm should be placed between signal lines and ground.<br />so the orignal &quot;472&quot; resistors( all four of them) should be replaced with 15k ohm resistors.</p><p>-ESD protection diode and 22 ohm series resistors should be used(they are optional, but i have used them anyway)</p><p>-wrt54gs v1 (wrt54g v2) supports 5v power, I used a high quality 5v 2a one.</p><br /><br /><p>so happy right now</p><div class="codebox"><pre><code>hub.c: new USB device 00:04.0-1, assigned address 6
WARNING: USB Mass Storage data integrity not assured
USB Mass Storage device found at 6
SCSI device sdb: 15663104 512-byte hdwr sectors (8020 MB)
sdb: Write Protect is off
 /dev/scsi/host1/bus0/target0/lun0: p1
hub.c: new USB device 00:04.0-2, assigned address 7
WARNING: USB Mass Storage data integrity not assured
USB Mass Storage device found at 7
SCSI device sda: 15663104 512-byte hdwr sectors (8020 MB)
sda: Write Protect is off
 /dev/scsi/host0/bus0/target0/lun0: p1


root@DD-WRT:~# ls -R /dev/scsi
/dev/scsi:
host0  host1

/dev/scsi/host0:
bus0

/dev/scsi/host0/bus0:
target0

/dev/scsi/host0/bus0/target0:
lun0

/dev/scsi/host0/bus0/target0/lun0:
disc   part1

/dev/scsi/host1:
bus0

/dev/scsi/host1/bus0:
target0

/dev/scsi/host1/bus0/target0:
lun0

/dev/scsi/host1/bus0/target0/lun0:
disc   part1</code></pre></div><p><span class="postimg"><img src="http://www.dd-wrt.com/phpBB2/files/10_01_19_16_28_865.jpg" alt="http://www.dd-wrt.com/phpBB2/files/10_01_19_16_28_865.jpg" /></span></p>											<p class="post-edited">(Last edited by <strong>zerx</strong> on 10 Apr 2010, 10:41)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106283">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">abra</div>
					<div class="post-datetime">
						7 Apr 2010, 14:49					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I stumbled over your post.</p><p>Can you give more details about your mod, perhaps some photos from inside?</p><p>I think rh19, rh20, rh21, rh22 are the resitors located left of the BCM4712.</p><p>What are the PinOuts of the mod, to connect this properly to a USB A connector?</p><p>greetings</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106474">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">znanev</div>
					<div class="post-datetime">
						9 Apr 2010, 19:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>abra wrote:</cite><blockquote><p>Hi,</p><p>I stumbled over your post.</p><p>Can you give more details about your mod, perhaps some photos from inside?</p><p>I think rh19, rh20, rh21, rh22 are the resitors located left of the BCM4712.</p><p>What are the PinOuts of the mod, to connect this properly to a USB A connector?</p><p>greetings</p></blockquote></div><p>I second this!</p><p>Please please please, give us as much info as you can <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106514">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">zerx</div>
					<div class="post-datetime">
						10 Apr 2010, 10:37					</div>
				</div>
				<div class="post-content content">
					<p>These four resistors are connected from ground to usb signal lines.<br />ok, I have edit the pinout info above</p>											<p class="post-edited">(Last edited by <strong>zerx</strong> on 10 Apr 2010, 10:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106538">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">abra</div>
					<div class="post-datetime">
						10 Apr 2010, 15:28					</div>
				</div>
				<div class="post-content content">
					<p>Yeah, thanks for info.</p><p>What i wanted to know, because I have no Datasheet/Pinout for the 4712, which lines are DATA- or DATA+ or switched 5V?<br />O r have I missed something in your post?</p><p>As reference look <a href="http://pinouts.ru/Slots/USB_pinout.shtml">here</a></p><p>EDIT:<br />okay I missed it<br />USB1_D[NP] rh19 - rh20<br />USB2_D[NP] rh21 - rh22</p><p>EDIT2:</p><p>can you tell how the diode and the 22ohm resistor has to be connected?</p><p>thanks</p>											<p class="post-edited">(Last edited by <strong>abra</strong> on 10 Apr 2010, 15:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106545">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">zerx</div>
					<div class="post-datetime">
						10 Apr 2010, 18:15					</div>
				</div>
				<div class="post-content content">
					<p>22ohm resistor: anywhere in series of the usb signal lines<br />ESD protection TVS diode: from ground to usb signal lines</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106578">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">znanev</div>
					<div class="post-datetime">
						11 Apr 2010, 02:22					</div>
				</div>
				<div class="post-content content">
					<p>Many thanks for the clarifications, zerx!</p><p>I&#039;ll look at this mod when I open the router to solder the serial header.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106634">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Void Main</div>
					<div class="post-datetime">
						12 Apr 2010, 03:29					</div>
				</div>
				<div class="post-content content">
					<p>Would it be possible to add USB to other versions of WRT54G/GS or only that one specific version of each? For example, I have a WRT54G v2.2 I would like to add usb to. I have already added SD card. I also have a WRT54GS v3 I would like to add USB to.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106642">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">zerx</div>
					<div class="post-datetime">
						12 Apr 2010, 08:07					</div>
				</div>
				<div class="post-content content">
					<p>read my replies here</p><p><a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=64931">http://www.dd-wrt.com/phpBB2/viewtopic.php?t=64931</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106675">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Void Main</div>
					<div class="post-datetime">
						12 Apr 2010, 17:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zerx wrote:</cite><blockquote><p>read my replies here</p><p><a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=64931">http://www.dd-wrt.com/phpBB2/viewtopic.php?t=64931</a></p></blockquote></div><p>For some reason I can&#039;t get to any of the forums or images that you link to in that thread. Looks like other people mention the same issue in that thread.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106679">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">zerx</div>
					<div class="post-datetime">
						12 Apr 2010, 18:41					</div>
				</div>
				<div class="post-content content">
					<p>well...at least the bcm5352 image you need is there</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106680">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Void Main</div>
					<div class="post-datetime">
						12 Apr 2010, 18:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zerx wrote:</cite><blockquote><p>well...at least the bcm5352 image you need is there</p></blockquote></div><p>I can&#039;t get to that image, can anyone else reading this thread get to that image? I would be happy to host a copy of the images if you would be so kind as to email them to me along with any extra information/instructions you may have. I could also write up a HOWTO page. If you are willing go ahead and send them to voidmain AT voidmain.is-a-geek.net. Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106681">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">zerx</div>
					<div class="post-datetime">
						12 Apr 2010, 18:52					</div>
				</div>
				<div class="post-content content">
					<p>well...just register and you will see it</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106682">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Void Main</div>
					<div class="post-datetime">
						12 Apr 2010, 18:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zerx wrote:</cite><blockquote><p>well...just register and you will see it</p></blockquote></div><p>Register where? On the *.cn sites that I cannot get to? I updated my previous post with an offer to do a HOWTO (giving you all the credit of course).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106683">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">zerx</div>
					<div class="post-datetime">
						12 Apr 2010, 19:12					</div>
				</div>
				<div class="post-content content">
					<p>I mean register in the dd-wrt forum.</p><p>nvm, I have edit the post for you, you should not need to register now.</p>											<p class="post-edited">(Last edited by <strong>zerx</strong> on 12 Apr 2010, 19:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106685">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">Void Main</div>
					<div class="post-datetime">
						12 Apr 2010, 19:31					</div>
				</div>
				<div class="post-content content">
					<p>Too late, I registered and took a look at the pictures. I realize that with only that current amount of information it would be WAAAAAAAY beyond my abilities. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> I can&#039;t imagine tearing my CPU apart let alone be able to solder a wire to something that tiny. It was a major miracle that I was able to do the SD card mods. Maybe in the future someone will have all the circuits traced out to each PCB where it would be within my ability to do the necessary soldering. Thanks for the info you have provided to this point though! It does appear that there is hope for adding USB to my routers at some point down the road. I&#039;ll definitely be keeping watch on these threads.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106719">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">Void Main</div>
					<div class="post-datetime">
						13 Apr 2010, 07:18					</div>
				</div>
				<div class="post-content content">
					<p>zerx, I got home and took a picture of my WRT54G v2.2 board. I can clearly see rh19, rh20, rh22 and rh21 below them. These surely wouldn&#039;t be the same ones I need would they? If they are this is something I can do. Here are my board pics:</p><p><a href="http://voidmain.is-a-geek.net/i/wrt54gv22-bcm.jpg">http://voidmain.is-a-geek.net/i/wrt54gv22-bcm.jpg</a><br /><a href="http://voidmain.is-a-geek.net/i/wrt54gv22-usb.jpg">http://voidmain.is-a-geek.net/i/wrt54gv22-usb.jpg</a><br /><a href="http://voidmain.is-a-geek.net/i/wrt54gv22.jpg">http://voidmain.is-a-geek.net/i/wrt54gv22.jpg</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106721">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">zerx</div>
					<div class="post-datetime">
						13 Apr 2010, 09:23					</div>
				</div>
				<div class="post-content content">
					<p>first of all, nice picture</p><p>but,&nbsp; WRT54G v2 is definitively not the same as WRT54G v2.2(WRT54GS v1.1)</p><p>from my reply:<br />--------------------------------------<br />The layout of WRT54GS v1.1 is different, so the usb pinout I post cannot be applied to your router</p><p>However, all bcm4712 have an usb ohci controller integrated inside.</p><p>So if you can get the correct pinout of this IC, it is still possible to insert a very thin wire between the PCB and the BGA package to carry out the usb signal.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106722">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">zerx</div>
					<div class="post-datetime">
						13 Apr 2010, 09:28					</div>
				</div>
				<div class="post-content content">
					<p>btw there it is possible to do the mod for WRT54GS v3.0 </p><p>its broad even have the usb rout similar to WRT54G v2</p><p>I&#039;ll show you later</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106724">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">LinkZ</div>
					<div class="post-datetime">
						13 Apr 2010, 09:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zerx wrote:</cite><blockquote><p>all bcm4712 have an usb ohci controller integrated inside.</p></blockquote></div><p>This is a USB v1.1 host controller (as opposed to USB 2.0), correct?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106738">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">zerx</div>
					<div class="post-datetime">
						13 Apr 2010, 11:50					</div>
				</div>
				<div class="post-content content">
					<p>usb ohci is USB v1.1</p><p>-------------------------------</p><p>rh21 rh23 rh25 rh26 </p><p><span class="postimg"><img src="http://www.dd-wrt.com/phpBB2/files/sdc11450s_773.jpg" alt="http://www.dd-wrt.com/phpBB2/files/sdc11450s_773.jpg" /></span></p>											<p class="post-edited">(Last edited by <strong>zerx</strong> on 13 Apr 2010, 11:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106773">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">Void Main</div>
					<div class="post-datetime">
						13 Apr 2010, 17:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zerx wrote:</cite><blockquote><p>btw there it is possible to do the mod for WRT54GS v3.0 </p><p>its broad even have the usb rout similar to WRT54G v2</p><p>I&#039;ll show you later</p></blockquote></div><p>Excellent! Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106821">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">Void Main</div>
					<div class="post-datetime">
						14 Apr 2010, 05:15					</div>
				</div>
				<div class="post-content content">
					<p>My board looks pretty much like that picture so I should be good and will try and put together a howto if I can pull it off. Couple of before pics:</p><p><a href="http://voidmain.is-a-geek.net/i/wrt54gsv3-bcm.jpg">http://voidmain.is-a-geek.net/i/wrt54gsv3-bcm.jpg</a><br /><a href="http://voidmain.is-a-geek.net/i/wrt54gsv3.jpg">http://voidmain.is-a-geek.net/i/wrt54gsv3.jpg</a></p><p><span class="postimg"><img src="http://voidmain.is-a-geek.net/i/wrt54gsv3-bcm.jpg" alt="http://voidmain.is-a-geek.net/i/wrt54gsv3-bcm.jpg" /></span></p><p>Now, since I am pretty much a n00b at electronics I will surely ask a few stupid questions, please bear with me. Is there a simple circuit diagram of what needs to be added (I know this is almost too basic for a diagram). If I understand correctly, I at least need 2 15k ohm resisters, 2 female USB connectors and a separate 5v power supply. Is there any way to draw 5v off the existing board or is the 12v 1 amp power supply not enough to power the WRT and the additional USB? Also, do I solder the wires to the top side (cpu side) of those rh2* resistors or the bottom side? If I take your picture literally then it would be the cpu side. I&#039;m also a little fuzzy on the ESD diode and 22 ohm series resistors but I&#039;ll read over these threads again.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106824">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">Void Main</div>
					<div class="post-datetime">
						14 Apr 2010, 06:25					</div>
				</div>
				<div class="post-content content">
					<p>Ah, here&#039;s a diagram that looks close to what I was looking for although I assume the capacitors are not needed, the diode needs to be added and the 32 ohm resistors should be swapped with 22 ohm resistors:</p><p><a href="http://cshore.is-a-geek.com/openwrt/ct-5621.html#usb">http://cshore.is-a-geek.com/openwrt/ct-5621.html#usb</a></p><p><span class="postimg"><img src="http://cshore.is-a-geek.com/openwrt/usb-schematic.png" alt="http://cshore.is-a-geek.com/openwrt/usb-schematic.png" /></span></p><p>Where exactly should the diode go in that diagram? You say ground to data lines but does it matter which side of the 22 ohm resistor they are connected to? And finally, could I run a wire from the 12v supply and use a 5v regulator such as <a href="http://www.radioshack.com/product/index.jsp?productId=2062599">this one</a> to get the needed 5v? Once I get everything straight I will update that diagram and have you check it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106826">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">Void Main</div>
					<div class="post-datetime">
						14 Apr 2010, 07:33					</div>
				</div>
				<div class="post-content content">
					<p>Maybe something closer to this?</p><p><span class="postimg"><img src="http://voidmain.is-a-geek.net/i/usb-diagram.png" alt="http://voidmain.is-a-geek.net/i/usb-diagram.png" /></span></p><p>Still need the ESD diode. Not sure where that goes. Also what size resistors would be best, 1/4 watt?</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=23308&amp;p=2.html">2</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>