<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Can&#039;t enable SQM on Startup</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 10 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p295822">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">nadasurf</div>
					<div class="post-datetime">
						12 Oct 2015, 22:04					</div>
				</div>
				<div class="post-content content">
					<p>Hello... i have a T-link WR841N router that i just flashed with OpenWrt. I downloaded the Luci-App-Sqm package, but when i try to enable SQM on startup, it just defaults back to &quot;disabled&quot; when i reboot. Not sure what i&#039;m missing, any suggestions?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p295831">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">danymarc</div>
					<div class="post-datetime">
						12 Oct 2015, 23:01					</div>
				</div>
				<div class="post-content content">
					<p>With CC on a 741 V4 I had that, so I went back to BB</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p295836">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">moeller0</div>
					<div class="post-datetime">
						12 Oct 2015, 23:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nadasurf wrote:</cite><blockquote><p>Hello... i have a T-link WR841N router that i just flashed with OpenWrt. I downloaded the Luci-App-Sqm package, but when i try to enable SQM on startup, it just defaults back to &quot;disabled&quot; when i reboot. Not sure what i&#039;m missing, any suggestions?</p></blockquote></div><p>Could you post the output of the following commands on your router please:<br />cat /etc/config/sqm<br />tc -d qdisc<br />/etc/init.d/sqm stop<br />tc -d qdisc<br />/etc/init.d/sqm start<br />tc -d qdisc</p><p>As well as the output of:<br />dmesg<br />logread<br />tc -d qdisc<br />right after your router booted and when you expect sqm to be started.</p><p>Thanks in advance</p><p>&nbsp; &nbsp; &nbsp; &nbsp; M</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p295840">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">nadasurf</div>
					<div class="post-datetime">
						12 Oct 2015, 23:39					</div>
				</div>
				<div class="post-content content">
					<p>I detected the problem... Apparently i do not have the required space to install the SQM package. Im new to this - Is there any way to free up more space on this router without compromising crucial files? I did a quick search, but i could not find the actual size of the SQM package.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p295844">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">moeller0</div>
					<div class="post-datetime">
						13 Oct 2015, 00:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nadasurf wrote:</cite><blockquote><p>I detected the problem... Apparently i do not have the required space to install the SQM package. Im new to this - Is there any way to free up more space on this router without compromising crucial files? I did a quick search, but i could not find the actual size of the SQM package.</p></blockquote></div><p>What is the output of:</p><p>df -h<br />on your router? It looks your router only has 4MB of flash, that probably is quite tight, even though sqm-scripts is not that large (sqm-scripts for CC15.05 measures 17879byte, but unpacked it expands to 134K on disk, add 20 K for luci-app-sqm, plus potentially missing kernel modules). I believe it should be possible to get sqm installed on a 4 MB router if you are very frugal with all other packets, but have never tried this myself. So I guess I will not be of much help in this matter...</p><p>Best Regards<br />&nbsp; &nbsp; &nbsp; &nbsp; M.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p295853">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">nadasurf</div>
					<div class="post-datetime">
						13 Oct 2015, 01:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>moeller0 wrote:</cite><blockquote><div class="quotebox"><cite>nadasurf wrote:</cite><blockquote><p>I detected the problem... Apparently i do not have the required space to install the SQM package. Im new to this - Is there any way to free up more space on this router without compromising crucial files? I did a quick search, but i could not find the actual size of the SQM package.</p></blockquote></div><p>What is the output of:</p><p>df -h<br />on your router? It looks your router only has 4MB of flash, that probably is quite tight, even though sqm-scripts is not that large (sqm-scripts for CC15.05 measures 17879byte, but unpacked it expands to 134K on disk, add 20 K for luci-app-sqm, plus potentially missing kernel modules). I believe it should be possible to get sqm installed on a 4 MB router if you are very frugal with all other packets, but have never tried this myself. So I guess I will not be of much help in this matter...</p><p>Best Regards<br />&nbsp; &nbsp; &nbsp; &nbsp; M.</p></blockquote></div><br /><p>Thank you for your help... i am open to buying a new router, any recommendations?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p295896">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">moeller0</div>
					<div class="post-datetime">
						13 Oct 2015, 11:50					</div>
				</div>
				<div class="post-content content">
					<p>Hi nadasurf,<br /></p><div class="quotebox"><cite>nadasurf wrote:</cite><blockquote><p>[...]<br />Thank you for your help... i am open to buying a new router, any recommendations?</p></blockquote></div><p>I am still using a wndr3700v2, that is getting long n the tooth, so my first-hand experience is somewhat limited. I hear that people are relatively happy with to-link&#039;s archer C7 (not the v1 though, but later versions). That unit does not have the fastest CPU so the performance under sqm will only reach up to 100Mbps combined up- and downstream, which should be plenty given your ISP connection. Others report that linksys 1900ACv2 1200AC have CPUs that allow traffic shaping into the 500Mbps range, but as far as I know the wifi drivers for those are not as stable as one would like...<br />&nbsp; &nbsp; &nbsp; &nbsp;Personally I am waiting for the turris lite (which seems to have been renamed to turris omni a, see <a href="https://omnia.turris.cz/en/">https://omnia.turris.cz/en/</a> ) to become available, this uses the same SoC as the mentioned link sys units, but does not use the marvel wifi chip (it seems the wifi cards are mini PCIe or so and hence variabble). This might work out well, or might be a bad idea, at least it is exciting <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><br /><p>Best Regards<br />&nbsp; &nbsp; &nbsp; &nbsp; M.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>