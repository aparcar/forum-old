<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> How can I test the connection between my Dumb Access Point and router?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 12 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p353254">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Exeleration-G</div>
					<div class="post-datetime">
						1 Mar 2017, 15:27					</div>
				</div>
				<div class="post-content content">
					<p>I have the following setup:</p><p>The main router is running downstairs, on IP 192.168.0.1. This router provides DHCP and wifi.</p><p>All the way upstairs, a TP-Link Archer C20i Dumb Access Point is running on IP 192.168.0.2. This access point provides wifi, but no DHCP. It&#039;s running OpenWrt Chaos Calmer 15.05 on kernel 3.18.20. I set it up using the recommendations on the OpenWRT Dumb AP page without any modifications.</p><p>When using my laptop upstairs, I get lower download speeds when connected to the access point&#039;s wifi than when connected to the main router&#039;s wifi. This is strange, as upstairs, the signal quality from the access point is much better than the signal quality from the main router.</p><p>I presume that this may be caused by a malfunctioning ethernet cable connecting the two devices. Therefore, I&#039;d like to test the connection between the two devices. What&#039;s the best way to do so?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p353259">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						1 Mar 2017, 15:59					</div>
				</div>
				<div class="post-content content">
					<p>Check ifconfig on the eth interface there should be no errors or dropped.</p><p>What are your speeds overall?&nbsp; When you get above 100-200 Mbit, the router can run out of CPU on OpenWrt.&nbsp; It may do better with stock firmware, which usually contains some proprietary accelerations.&nbsp; Stock firmware is entirely suited to run a dumb AP.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p353260">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Exeleration-G</div>
					<div class="post-datetime">
						1 Mar 2017, 16:08					</div>
				</div>
				<div class="post-content content">
					<p>Looks like there&#039;s nothing dropped, 42 errors though.</p><p>I don&#039;t need that high speeds. I&#039;m getting ~8 Mbps on the main router and ~4 Mbps on the AP.</p><div class="codebox"><pre><code># ifconfig
br-lan    Link encap:Ethernet  HWaddr ####
          inet addr:192.168.0.2  Bcast:192.168.0.255  Mask:255.255.255.0
          inet6 addr: ####/60 Scope:Global
          inet6 addr:  ####/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:1807993 errors:0 dropped:0 overruns:0 frame:0
          TX packets:5542989 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:634531764 (605.1 MiB)  TX bytes:2595917846 (2.4 GiB)

eth0      Link encap:Ethernet  HWaddr  ####  
          inet6 addr:  ####/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:23255469 errors:42 dropped:0 overruns:0 frame:0
          TX packets:19615251 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:21835442834 (20.3 GiB)  TX bytes:5575108351 (5.1 GiB)
          Interrupt:5 

eth0.1    Link encap:Ethernet  HWaddr  ####  
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:23255444 errors:0 dropped:0 overruns:0 frame:0
          TX packets:19022988 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:21416838712 (19.9 GiB)  TX bytes:5290702313 (4.9 GiB)

eth0.2    Link encap:Ethernet  HWaddr  ####  
          inet6 addr:  ####/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:591581 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:0 (0.0 B)  TX bytes:199772111 (190.5 MiB)</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p355812">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">vamsireddy.16</div>
					<div class="post-datetime">
						7 Apr 2017, 23:00					</div>
				</div>
				<div class="post-content content">
					<p>Hi</p><p>I am using MinnowBoard with QCA 6714 WIFI module to setup as an AP. I cross compiled my own version of OpenWrt for the board. I could able to boot the baord. <br />I beleive in OpenWrt it is enough to modify the /etc/config/wireless file to configure the module as an AP or as a STA, right?. I think, Hostapd runs behind and controlls everything. <br />when I configure the settings as an AP, I am glad that it shows and I could able to see the device SSID name when I do scan on the other devices. <br />The issue i am facing is, I am unable to connec to the AP. My wirless configuration is:config wifi-device&nbsp; radio0<br />&nbsp; &nbsp; &nbsp; &nbsp; option type&nbsp; &nbsp; &#039;mac80211&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option channel&nbsp; &#039;36&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option hwmode&nbsp; &nbsp;&#039;11a&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option path&nbsp; &nbsp; &nbsp;&#039;pci0000:00/0000:00:1c.3/0000:03:00.0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option htmode&nbsp; &nbsp;&#039;VHT80&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; # REMOVE THIS LINE TO ENABLE WIFI:<br />&nbsp; &nbsp; &nbsp; &nbsp; option disabled &#039;0&#039;</p><p>config wifi-iface<br />&nbsp; &nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp; &nbsp; &#039;radio0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option network&nbsp; &nbsp; &nbsp;&#039;lan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode&nbsp; &nbsp; &nbsp; &nbsp; &#039;ap&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid&nbsp; &nbsp; &nbsp; &nbsp; &#039;OpenWRT-own&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption&nbsp; &#039;psk2&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option key&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#039;123hello&#039;</p><p>After few seconds, the kernel will show the follwing warnings, <br /> [&nbsp; 148.635100] mmc1: Timeout waiting for hardware interrupt.<br />[&nbsp; 159.877446] wlan0: deauthenticating from 00:26:86:f0:4e:eb by local choice (Reason: 3=DEAUTH_LEAVING)<br />[&nbsp; 191.628068] INFO: rcu_sched self-detected stall on CPU<br />[&nbsp; 191.633823]&nbsp; 0-...: (1 GPs behind) idle=127/2/0 softirq=7165/7166 fqs=6000<br />[&nbsp; 191.641614]&nbsp; &nbsp;(t=6000 jiffies g=161 c=160 q=48)<br />[&nbsp; 191.646690] Task dump for CPU 0:<br />[&nbsp; 191.650298] swapper/0&nbsp; &nbsp; &nbsp; &nbsp;R&nbsp; running task&nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; 0 0x00000008<br />[&nbsp; 191.658198]&nbsp; ffffffff815e4bc0 ffffffff81079531 ffff880078014680 ffffffff815e4bc0<br />[&nbsp; 191.666497]&nbsp; ffffffff815e4bc0 0000000000000030 ffffffff8107c739 00000000000d8a99<br />[&nbsp; 191.674795]&nbsp; ffffffff815cd4c0 0000000000dfcba4 ffff880078003c70 0000000000000086<br />[&nbsp; 191.683092] Call Trace:<br />[&nbsp; 191.685826]&nbsp; &lt;IRQ&gt;&nbsp; [&lt;ffffffff81079531&gt;] ? rcu_dump_cpu_stacks+0x71/0xa0<br />[&nbsp; 191.693338]&nbsp; [&lt;ffffffff8107c739&gt;] ? rcu_check_callbacks+0x409/0x6a0<br />[&nbsp; 191.700353]&nbsp; [&lt;ffffffff81084007&gt;] ? update_wall_time+0x3f7/0x640<br />[&nbsp; 191.707077]&nbsp; [&lt;ffffffff8107dfcd&gt;] ? update_process_times+0x2d/0x50<br />[&nbsp; 191.713986]&nbsp; [&lt;ffffffff8108a2c1&gt;] ? tick_sched_timer+0x41/0x160<br />[&nbsp; 191.720603]&nbsp; [&lt;ffffffff8107e7f6&gt;] ? __hrtimer_run_queues+0xa6/0x140<br />[&nbsp; 191.727618]&nbsp; [&lt;ffffffff8107eaa1&gt;] ? hrtimer_interrupt+0x91/0x180<br />[&nbsp; 191.734335]&nbsp; [&lt;ffffffff8102d11e&gt;] ? smp_trace_apic_timer_interrupt+0x5e/0x90<br />[&nbsp; 191.742225]&nbsp; [&lt;ffffffff8142aabf&gt;] ? apic_timer_interrupt+0x7f/0x90<br />[&nbsp; 191.749144]&nbsp; [&lt;ffffffff8106cff8&gt;] ? native_queued_spin_lock_slowpath+0x148/0x160<br />[&nbsp; 191.757429]&nbsp; [&lt;ffffffff81429a23&gt;] ? _raw_spin_lock_bh+0x23/0x30<br />[&nbsp; 191.764062]&nbsp; [&lt;ffffffffa01a5ed6&gt;] ? ath10k_htt_rx_pktlog_completion_handler+0x476/0x10f0 [ath10k_core]<br />[&nbsp; 191.774488]&nbsp; [&lt;ffffffffa01a85e3&gt;] ? ath10k_htt_t2h_msg_handler+0x1a93/0x1b50 [ath10k_core]<br />[&nbsp; 191.783736]&nbsp; [&lt;ffffffff81042f42&gt;] ? tasklet_action+0xa2/0xb0<br />[&nbsp; 191.790069]&nbsp; [&lt;ffffffff810432a6&gt;] ? __do_softirq+0xc6/0x1d0<br />[&nbsp; 191.796305]&nbsp; [&lt;ffffffff810434bd&gt;] ? irq_exit+0x5d/0x60<br />[&nbsp; 191.802055]&nbsp; [&lt;ffffffff8100454a&gt;] ? do_IRQ+0x4a/0xc0<br />[&nbsp; 191.807611]&nbsp; [&lt;ffffffff8142a87f&gt;] ? common_interrupt+0x7f/0x7f<br />[&nbsp; 191.814137]&nbsp; &lt;EOI&gt;&nbsp; [&lt;ffffffff8131815d&gt;] ? cpuidle_enter_state+0x12d/0x1e0<br />[&nbsp; 191.821843]&nbsp; [&lt;ffffffff8106ba44&gt;] ? cpu_startup_entry+0x1f4/0x250<br />[&nbsp; 191.828656]&nbsp; [&lt;ffffffff8163be75&gt;] ? start_kernel+0x41c/0x424<br />[&nbsp; 191.834990]&nbsp; [&lt;ffffffff8163b120&gt;] ? early_idt_handler_array+0x120/0x120<br />[&nbsp; 191.842392]&nbsp; [&lt;ffffffff8163b3ec&gt;] ? x86_64_start_kernel+0xe5/0xf2<br />[&nbsp; 219.946383] INFO: rcu_sched detected expedited stalls on CPUs/tasks: { 0-.. } 6000 jiffies s: 27<br />[&nbsp; 219.956336] Task dump for CPU 0:<br />[&nbsp; 219.959957] swapper/0&nbsp; &nbsp; &nbsp; &nbsp;R&nbsp; running task&nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; 0 0x00000008<br />[&nbsp; 219.967868]&nbsp; 0000000000000010 0000000000000286 ffffffff815c3f00 0000000000000018<br />[&nbsp; 219.976168]&nbsp; ffffffff815c0000 ffffffff8161f4f8 ffffffff815c0000 ffffffff815c0000<br />[&nbsp; 219.984474]&nbsp; ffff880075641400 ffffffff815c0000 ffffffff8106ba44 ffffffff815f1b40<br />[&nbsp; 219.992778] Call Trace:<br />[&nbsp; 219.995522]&nbsp; [&lt;ffffffff8106ba44&gt;] ? cpu_startup_entry+0x1f4/0x250<br />[&nbsp; 220.002353]&nbsp; [&lt;ffffffff8163be75&gt;] ? start_kernel+0x41c/0x424<br />[&nbsp; 220.008694]&nbsp; [&lt;ffffffff8163b120&gt;] ? early_idt_handler_array+0x120/0x120<br />[&nbsp; 220.016100]&nbsp; [&lt;ffffffff8163b3ec&gt;] ? x86_64_start_kernel+0xe5/0xf2</p><p>After googling it, I think I understood what might the reason, but unable to find out the slolution. I beleive this is the issue with release builds. Can any one please help.</p><p>THanks<br />Vamsi</p>											<p class="post-edited">(Last edited by <strong>vamsireddy.16</strong> on 7 Apr 2017, 23:01)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>