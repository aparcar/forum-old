<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> No Tap interface to set up openvpn</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 16 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p90675">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">nicolo</div>
					<div class="post-datetime">
						30 Jun 2009, 20:04					</div>
				</div>
				<div class="post-content content">
					<p>I am trying to set up an openvpn server on a netgear WGT634u (running smoothly kamikaze 7.09)</p><p>i followed the tuto at <a href="http://oldwiki.openwrt.org/OpenVPNHowTo.html">http://oldwiki.openwrt.org/OpenVPNHowTo.html</a></p><p>I am struggling with the startup scripts.</p><p>all I have read say <br />&quot;# Creates TAP devices for use by OpenVPN and bridges them into OpenWRT Bridge&quot;</p><p>But my scripts shows /dev/tap device does not exist.</p><p>How do I set this virtual interface ?</p><p>I did not find any explanation </p><p>Thanks for the help</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p90914">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">nicolo</div>
					<div class="post-datetime">
						6 Jul 2009, 10:40					</div>
				</div>
				<div class="post-content content">
					<p>any help ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p90929">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">MMCM</div>
					<div class="post-datetime">
						6 Jul 2009, 17:35					</div>
				</div>
				<div class="post-content content">
					<p>Do you have kmod-tun installed?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p90931">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">nicolo</div>
					<div class="post-datetime">
						6 Jul 2009, 17:56					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the investigation MMCM.</p><p>I think it is installed, as shown below (&#039;tun&#039; module, I guess)</p><p>I have printed the log when i try to launch the Openvpn service<br />I still have a &quot;Cannot open TUN/TAP dev /dev/tap0: No such file or directory (errno=2)&quot;</p><p>Any Idea ?</p><div class="codebox"><pre><code>root@PTC2:/etc/openvpn# lsmod
Module                  Size  Used by    Tainted: P
tun                     6496  0
usb_storage            27664  2
sd_mod                 18416  3
scsi_mod               71968  2 usb_storage,sd_mod
ehci_hcd               28016  0
ohci_hcd               14064  0
ath_pci                94384  0
wlan_xauth               480  0
wlan_wep                4000  0
wlan_tkip               9664  0
wlan_ccmp               5408  2
wlan_acl                1888  0
ath_rate_minstrel       7840  1
ath_hal               271168  3 ath_pci,ath_rate_minstrel
wlan_scan_sta           8736  0
wlan_scan_ap            2624  0
wlan                  146432  10 ath_pci,wlan_xauth,wlan_wep,wlan_tkip,wlan_ccmp,wlan_acl,ath_rate_minstrel,wlan_scan_sta,wlan_scan_ap
ppp_async               9664  0
ppp_generic            20000  1 ppp_async
slhc                    5408  1 ppp_generic
crc_ccitt               1024  1 ppp_async
vfat                    8512  0
fat                    42448  1 vfat
ext3                   97040  0
jbd                    54672  1 ext3
ext2                   39952  1
usbcore               102032  4 usb_storage,ehci_hcd,ohci_hcd
nls_base                4416  2 vfat,fat
switch_robo             4048  0
switch_core             5088  1 switch_robo
diag                    8272  0</code></pre></div><div class="codebox"><pre><code>root@PTC2:/etc/openvpn# openvpn server.ovpn
Mon Jul  6 16:52:37 2009 OpenVPN 2.0.9 mipsel-linux [SSL] [LZO] [EPOLL] built on Jun  4 2007
Mon Jul  6 16:52:37 2009 Static Encrypt: Cipher &#039;BF-CBC&#039; initialized with 128 bit key
Mon Jul  6 16:52:37 2009 Static Encrypt: Using 160 bit message hash &#039;SHA1&#039; for HMAC authentication
Mon Jul  6 16:52:37 2009 Static Decrypt: Cipher &#039;BF-CBC&#039; initialized with 128 bit key
Mon Jul  6 16:52:37 2009 Static Decrypt: Using 160 bit message hash &#039;SHA1&#039; for HMAC authentication
Mon Jul  6 16:52:37 2009 Note: Cannot open TUN/TAP dev /dev/net/tun: No such file or directory (errno=2)
Mon Jul  6 16:52:37 2009 Note: Attempting fallback to kernel 2.2 TUN/TAP interface
Mon Jul  6 16:52:37 2009 Cannot open TUN/TAP dev /dev/tap0: No such file or directory (errno=2)
Mon Jul  6 16:52:37 2009 Exiting</code></pre></div>											<p class="post-edited">(Last edited by <strong>nicolo</strong> on 6 Jul 2009, 17:57)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p90939">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">rpra</div>
					<div class="post-datetime">
						6 Jul 2009, 20:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nicolo wrote:</cite><blockquote><p>Thanks for the investigation MMCM.</p><p>I think it is installed, as shown below (&#039;tun&#039; module, I guess)</p><p>I have printed the log when i try to launch the Openvpn service<br />I still have a &quot;Cannot open TUN/TAP dev /dev/tap0: No such file or directory (errno=2)&quot;</p><p>Any Idea ?</p></blockquote></div><p>Try to execute<br /></p><div class="codebox"><pre><code>openvpn --mktun --dev tap0</code></pre></div><p>and see what happens. This must create /dev/tap0 device. I use OpenVPN bridge on my home router.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p90960">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">nicolo</div>
					<div class="post-datetime">
						7 Jul 2009, 09:12					</div>
				</div>
				<div class="post-content content">
					<p>Thanks rpra but</p><div class="codebox"><pre><code> 
root@PTC2:~# openvpn --mktun --dev tap0
Tue Jul  7 08:10:30 2009 Note: Cannot open TUN/TAP dev /dev/net/tun: No such file or directory (errno=2)
Tue Jul  7 08:10:30 2009 Note: Attempting fallback to kernel 2.2 TUN/TAP interface
Tue Jul  7 08:10:30 2009 Cannot open TUN/TAP dev /dev/tap0: No such file or directory (errno=2)</code></pre></div><p>... still don&#039;t work</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p90964">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">nicolo</div>
					<div class="post-datetime">
						7 Jul 2009, 11:35					</div>
				</div>
				<div class="post-content content">
					<p>Gotcha.</p><p>I just typed </p><div class="codebox"><pre><code> cp /dev/null /dev/tap0</code></pre></div><p>prior to launching the openvpn service.</p><p>and my openvpn client can connect remotely to the netgear now</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>