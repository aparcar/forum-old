<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> RC4: WDS w/PSK-TKIP, Airport Express</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 21 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p17825">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">robertm</div>
					<div class="post-datetime">
						26 Dec 2005, 21:35					</div>
				</div>
				<div class="post-content content">
					<p>RC4 is neat -- everything that one had to compile oneself is now easy. Except for this following problem:</p><p>I have an Apple AirPort Express and would like to use it as &quot;remote WDS&quot; station, with PSK-TKIP.</p><p>- My OpenWrt router is configured as AP and clients (including Apple&#039;s) can connect to it using PSK-TKIP.<br />- I can also configure it to WEP-128 and both clients and WDS will work.<br />- The combination PSK-TKIP and WDS just does not work.</p><p>I redirected the Airport&#039;s syslog output and in PSK-TKIP mode, it says:</p><p>Jan&nbsp; 1 00:00:06 169.254.207.143 express sys: Initialized (firmware 6.2).<br />Jan&nbsp; 1 00:00:15 169.254.207.143 express dot11: WDS established with station 00:0c:41:12:23:34.<br />Jan&nbsp; 1 00:00:16 169.254.207.143 express dot11: Deauthorizing station 00:0c:41:12:23:34 [2]<br />Jan&nbsp; 1 00:00:38 169.254.207.143 express dot11: Deauthorizing station 00:0c:41:12:23:34 [15]<br />Jan&nbsp; 1 00:01:00 169.254.207.143 express dot11: Deauthorizing station 00:0c:41:12:23:34 [15]<br />... etc ...</p><p>I made sure that nas4not is called with the correct arguments (by the 00-nas hotplug script), and the nvram variables seem to be correct also:</p><p>wl0_akm=psk<br />wl0_wpa_psk=AKeyThatIsNotSecure<br />wl0_crypto=tkip<br />wl0_wds=00:14:51:11:99:77<br />wl0_wep=disabled<br />wl0_ssid=wireless<br />wl0_mode=ap<br />wl0_wpa_gtk_rekey=3600<br />wl0_lazywds=0<br />lan_ifname=br0<br />lan_ifnames=vlan2 eth2 eth3 eth4</p><p>nas4not lan wds0.49153 up auto tkip psk AKeyThatIsNotSecure wireless</p><p>nas package is version 3.90.37-14</p><p>Something seems to go wrong in the authentication process (nas/nas4not). I there a way to turn on debug?</p><p>I tried PSK2-AES and all combinations also, but only WEP or no encryption work with WDS.</p><p>Thanks,<br />Robert</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p18192">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">robertm</div>
					<div class="post-datetime">
						3 Jan 2006, 05:33					</div>
				</div>
				<div class="post-content content">
					<p>In addition, the openwrt log shows:</p><p>user.info : eapol_sup_dispatch: wds0.49153: unknown EAPOL type 3<br />user.info : eapol_sup_dispatch: wds0.49153: unknown EAPOL type 3<br />user.info : eapol_sup_dispatch: wds0.49153: unknown EAPOL type 3<br />user.info : eapol_sup_dispatch: wds0.49153: unknown EAPOL type 3<br />...</p><p># wl sta_info 00:14:51:11:99:77 <br /> STA 00:14:51:11:99:77:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;rateset [ 1 2 5.5 11 18 24 36 48 54 ]<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;idle&nbsp; &nbsp;5 seconds<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;in network 0 seconds<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;state :&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;flags 0x40&nbsp; &nbsp;</p><p>(A working WDS link with a second openwrt box has &quot;state : AUTHORIZED&quot;)</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>