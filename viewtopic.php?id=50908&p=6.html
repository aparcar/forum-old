<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> luci-app-ddns / ddns-scripts : I&#039;m working on enhancements</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 23 Mar 2018 and 4 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 6 of 6</div><nav><ul><li><a href="viewtopic.php%3Fid=50908&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=50908&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=50908&amp;p=5.html">5</a></li><li class="pagination-current"><span>6</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p257401">
				<div class="post-metadata">
					<div class="post-num">Post #126</div>
					<div class="post-author">djdeeles</div>
					<div class="post-datetime">
						11 Dec 2014, 23:24					</div>
				</div>
				<div class="post-content content">
					<p>First one seems better thank you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p261546">
				<div class="post-metadata">
					<div class="post-num">Post #127</div>
					<div class="post-author">kpv</div>
					<div class="post-datetime">
						15 Jan 2015, 15:22					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>kpv wrote:</cite><blockquote><div class="quotebox"><cite>chris5560 wrote:</cite><blockquote><p>Hi,<br />because the overall minimum is BusyBox&#039;s Wget, the --bind-address parameter is not the solution.<br />Here some questions for my understanding:<br />- if you configure ADSL with 3G backup are both interfaces &quot;UP&quot; or only &quot;WAN&quot; connected via one of them ?<br />- If both interfaces are &quot;UP&quot; each of them has a seperate IP?<br />- Do you want to have both addresses registered at DDNS provider, or only the one doing the traffic ?</p></blockquote></div><p>I understand that the limited wget supplied as part of busybox doesn&#039;t allow to bind to a specific address, but the &quot;full&quot; version of both wget and curl do.</p><p>Regarding your other questions:<br />- Both interfaces (wan, wan2) will be &quot;up&quot; all the time<br />- Each interface (wan, wan2) has a separate IP.<br />- Both addresses need to be registered (each with its own fqdn obviously) at the DDNS provider</p><p>Btw I did some very quick tests and it seems that even when invoking wget with &quot;-bind-address&quot; I&#039;d still need to create a mwan3 policy route for this scenario to work ...</p></blockquote></div><p>Hi again after some time,</p><p>I&#039;ve verified that curl will indeed send traffic via a specific interface, allowing me to register different ddns names for each WAN in a multi-WAN system:</p><p>Syntax is actually very simple:</p><div class="codebox"><pre><code>curl --interface eth0.3 --ipv4 http://.../test.html
curl --interface `uci get -p /var/state network.wan.ifname` --ipv4 http://.../test.html</code></pre></div><p>Without this, I couldn&#039;t get ddns to register different WANs on a multi-WAN system (it&#039;d just flip-flop according to load-balancing algo).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p261554">
				<div class="post-metadata">
					<div class="post-num">Post #128</div>
					<div class="post-author">chris5560</div>
					<div class="post-datetime">
						15 Jan 2015, 15:42					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />could we continue on this via direct mail?<br />Have a look into script headers for my mail.<br />Please send me your ddns config and logs so I can have a look.<br />Christian</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p261569">
				<div class="post-metadata">
					<div class="post-num">Post #129</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						15 Jan 2015, 17:05					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><div class="quotebox"><blockquote><p>uci get -p /var/state network.wan.ifname</p></blockquote></div><p>This is deprecated, I wouldn&#039;t rely on it. Use the functions from /lib/functions/network.sh for determining the device.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p265494">
				<div class="post-metadata">
					<div class="post-num">Post #130</div>
					<div class="post-author">amenra</div>
					<div class="post-datetime">
						14 Feb 2015, 15:10					</div>
				</div>
				<div class="post-content content">
					<p>HI. Where are we on this enhancement? We use namecheap DNS services and we would like openWRT to update both A and AAAA records. openWRT is updating the A record (IPv4) but would also like it to update the AAAA record (IPv6).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p265533">
				<div class="post-metadata">
					<div class="post-num">Post #131</div>
					<div class="post-author">chris5560</div>
					<div class="post-datetime">
						14 Feb 2015, 19:57					</div>
				</div>
				<div class="post-content content">
					<p>It&#039;s up and running inside trunk. Current version 2.3.0-1.<br />Also luci-app-ddns avaiiable at trunk supporting all (new) settings.<br />UCI config documentation at <a href="http://wiki.openwrt.org/doc/uci/ddns">http://wiki.openwrt.org/doc/uci/ddns</a><br />Special scripts for CloudFlare and No-IP.com<br />Feel free to test. Feedback welcome.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269070">
				<div class="post-metadata">
					<div class="post-num">Post #132</div>
					<div class="post-author">DaCarrs</div>
					<div class="post-datetime">
						18 Mar 2015, 00:36					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I have version 2.4.0-1 and with DuckDns it does not work. The problem is with the DOMAIN setting, because the script performs a nslookup you have to include full domain (my domain.duckdns.org) to obtain the RegisteredIP but the URL used to update the IP on DuckDNS requires the domain without the &quot;.duckdns.org&quot; part.</p><p>Is there any option to sort this out and make it working with DuckDns?</p><p>Thanks in advance.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269113">
				<div class="post-metadata">
					<div class="post-num">Post #133</div>
					<div class="post-author">chris5560</div>
					<div class="post-datetime">
						18 Mar 2015, 14:09					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />try to modify your custom_url like this:<br />&quot;http://www.duckdns.org/update?domains=[USERNAME]&amp;token=[PASSWORD]&amp;ip=[IP]&quot;<br />(without quotes) and then set:<br />option domain to your FQDN<br />option username to your host without &quot;.duckdns.org&quot;<br />option password to your token</p><p>please give me feedback so I can correct the DDNS Client WIKI page.<br />Thanks<br />Christian</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269152">
				<div class="post-metadata">
					<div class="post-num">Post #134</div>
					<div class="post-author">DaCarrs</div>
					<div class="post-datetime">
						18 Mar 2015, 20:02					</div>
				</div>
				<div class="post-content content">
					<p>It&#039;s working OK! With this change now works perfect with DuckDNS.</p><p>Regards.</p><div class="quotebox"><cite>chris5560 wrote:</cite><blockquote><p>Hi,<br />try to modify your custom_url like this:<br />&quot;http://www.duckdns.org/update?domains=[USERNAME]&amp;token=[PASSWORD]&amp;ip=[IP]&quot;<br />(without quotes) and then set:<br />option domain to your FQDN<br />option username to your host without &quot;.duckdns.org&quot;<br />option password to your token</p><p>please give me feedback so I can correct the DDNS Client WIKI page.<br />Thanks<br />Christian</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p270219">
				<div class="post-metadata">
					<div class="post-num">Post #135</div>
					<div class="post-author">finas</div>
					<div class="post-datetime">
						28 Mar 2015, 02:23					</div>
				</div>
				<div class="post-content content">
					<p>is it possible to have ddns-scripts to check if the ip changed when the interface reloads? for instance when the pppoe connection drops and then comes up again, have ddns-scripts to update the ip imediatly instead of waiting for a certain period of time?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p270396">
				<div class="post-metadata">
					<div class="post-num">Post #136</div>
					<div class="post-author">chris5560</div>
					<div class="post-datetime">
						29 Mar 2015, 18:25					</div>
				</div>
				<div class="post-content content">
					<p>Normally ddns-scripts is configured with &quot;option interface&quot; to the interface/network that toggle. If Interface goes up ddns-scripts restarts and check it&#039;s IP and send update if needed.<br />This works for ddns-scripts of OpenWrt BB 14.07 or later.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p270440">
				<div class="post-metadata">
					<div class="post-num">Post #137</div>
					<div class="post-author">finas</div>
					<div class="post-datetime">
						30 Mar 2015, 00:57					</div>
				</div>
				<div class="post-content content">
					<p>So, it&#039;s the same to read the ip from network-&gt; wan or interface-&gt; pppoe-wan ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p270530">
				<div class="post-metadata">
					<div class="post-num">Post #138</div>
					<div class="post-author">firas.om</div>
					<div class="post-datetime">
						30 Mar 2015, 17:19					</div>
				</div>
				<div class="post-content content">
					<p>Hi every body,<br />Please I&#039;m looking for a suitable OpenWrt image for ACME-Aria G25 Hardware.<br />How can I get working version to this Hardware ?</p><p>Thanks for your time ..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p270533">
				<div class="post-metadata">
					<div class="post-num">Post #139</div>
					<div class="post-author">chris5560</div>
					<div class="post-datetime">
						30 Mar 2015, 17:27					</div>
				</div>
				<div class="post-content content">
					<p>@finas<br />Reading your IP from network &quot;wan&quot; or interface &quot;pppoe-wan&quot; should be the same if the interface belongs to &quot;wan&quot; network.</p><p>@firas.om<br />looking for hardware dependent image on a software package task ? Hope you post it also in a separate task.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p270535">
				<div class="post-metadata">
					<div class="post-num">Post #140</div>
					<div class="post-author">firas.om</div>
					<div class="post-datetime">
						30 Mar 2015, 17:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>chris5560 wrote:</cite><blockquote><p>@firas.om<br />looking for hardware dependent image on a software package task ? Hope you post it also in a separate task.</p></blockquote></div><p>Sorry for that .. </p><p>Could you please guide me where to get response for this issue !</p><p>Thanks for your time ..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p270556">
				<div class="post-metadata">
					<div class="post-num">Post #141</div>
					<div class="post-author">chris5560</div>
					<div class="post-datetime">
						30 Mar 2015, 20:35					</div>
				</div>
				<div class="post-content content">
					<p>@firas.om<br />create a new post in the forum</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278129">
				<div class="post-metadata">
					<div class="post-num">Post #142</div>
					<div class="post-author">oldunixguy</div>
					<div class="post-datetime">
						30 May 2015, 05:07					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m running OpenWrt Barrier Breaker 14.07 / LuCI Trunk (0.12+svn-r10530) <br />on a TP-Link TL-WR841N/ND v9</p><p>I am unable to obtain the luci luci-app-ddns package or the ddns-scripts package</p><p>It is not showing up in the Available package list and also reports when put in the Download and install package:<br />Unknown package &#039;luci-app-ddns&#039;.</p><p>Same for ddns-scripts</p><p>Other packages seem to be available however so it seems to not be the opkg interface.</p><p>What is going wrong here and how do I get the ddns?</p><p>thanks<br />oldunixguy</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278143">
				<div class="post-metadata">
					<div class="post-num">Post #143</div>
					<div class="post-author">chris5560</div>
					<div class="post-datetime">
						30 May 2015, 08:31					</div>
				</div>
				<div class="post-content content">
					<p>If you follow the link for your hardware in the download directory <a href="http://downloads.openwrt.org/barrier_breaker/14.07/">http://downloads.openwrt.org/barrier_breaker/14.07/</a> you should find <br />../packages/luci/luci-app-ddns_0.12+svn-r10530-1... and <br />../packages/packages/ddns-scripts_1.0.0-23_all.ipk<br />are they on the download server for your hardware ?<br />Did you update the package lists ?<br />Are there any errors when running &quot;opkg update&quot; from console ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278241">
				<div class="post-metadata">
					<div class="post-num">Post #144</div>
					<div class="post-author">oldunixguy</div>
					<div class="post-datetime">
						31 May 2015, 02:27					</div>
				</div>
				<div class="post-content content">
					<p>&gt;&gt; If you follow the link for your hardware in the download directory <br />&gt;&gt; <a href="http://downloads.openwrt.org/barrier_breaker/14.07/">http://downloads.openwrt.org/barrier_breaker/14.07/</a> you should find</p><p>&gt;&gt; ../packages/luci/luci-app-ddns_0.12+svn-r10530-1... and<br />&gt;&gt; ../packages/packages/ddns-scripts_1.0.0-23_all.ipk<br />&gt;&gt; are they on the download server for your hardware ?</p><p>No</p><p>&gt;&gt; Did you update the package lists ?</p><p>Yes, several times but never do either &quot;luci-app-ddns&quot; or &quot;ddns-scripts&quot; appear on the list.</p><p>If I go to Luci-&gt;System-Software and select the Configuration tab<br />Here is the opkg config screen for which I have not changed at all:<br />dest root /<br />dest ram /tmp<br />lists_dir ext /var/opkg-lists<br />option overlay_root /overlay<br />src/gz barrier_breaker_base <a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/packages/base">http://downloads.openwrt.org/barrier_br … kages/base</a><br />src/gz barrier_breaker_luci <a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/packages/luci">http://downloads.openwrt.org/barrier_br … kages/luci</a><br />src/gz barrier_breaker_packages <a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/packages/packages">http://downloads.openwrt.org/barrier_br … s/packages</a><br />src/gz barrier_breaker_routing <a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/packages/routing">http://downloads.openwrt.org/barrier_br … es/routing</a><br />src/gz barrier_breaker_telephony <a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/packages/telephony">http://downloads.openwrt.org/barrier_br … /telephony</a><br />src/gz barrier_breaker_management <a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/packages/management">http://downloads.openwrt.org/barrier_br … management</a><br />src/gz barrier_breaker_oldpackages <a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/packages/oldpackages">http://downloads.openwrt.org/barrier_br … ldpackages</a></p><p>If I go to Luci-&gt;System-Software and select the Status-&gt;Available Packages tab<br />and enter &quot;luci&quot; in the search anumber of luci packages appear but not any with luci-app-ddns</p><p>Same happens for ddns-scripts</p><p>If I enter the full package name into the &quot;Download and install package&quot; box I get this:</p><p>Unknown package &#039;luci-app-ddns_0.12+svn-r10530-1&#039;.<br />Collected errors:<br /> * opkg_install_cmd: Cannot install package luci-app-ddns_0.12+svn-r10530-1.</p><p>and this for the short name luci-app-ddns:</p><p>Unknown package &#039;luci-app-ddns&#039;.<br />Collected errors:<br /> * opkg_install_cmd: Cannot install package luci-app-ddns.</p><br /><p>&gt;&gt; Are there any errors when running &quot;opkg update&quot; from console ?</p><p>when I run this from the console I get no errors:<br />Downloading <a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/packages/base/Packages.gz.">http://downloads.openwrt.org/barrier_br … ckages.gz.</a><br />Updated list of available packages in /var/opkg-lists/barrier_breaker_base.<br />Downloading <a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/packages/luci/Packages.gz.">http://downloads.openwrt.org/barrier_br … ckages.gz.</a><br />Updated list of available packages in /var/opkg-lists/barrier_breaker_luci.<br />Downloading <a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/packages/packages/Packages.gz.">http://downloads.openwrt.org/barrier_br … ckages.gz.</a><br />Updated list of available packages in /var/opkg-lists/barrier_breaker_packages.<br />Downloading <a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/packages/routing/Packages.gz.">http://downloads.openwrt.org/barrier_br … ckages.gz.</a><br />Updated list of available packages in /var/opkg-lists/barrier_breaker_routing.<br />Downloading <a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/packages/telephony/Packages.gz.">http://downloads.openwrt.org/barrier_br … ckages.gz.</a><br />Updated list of available packages in /var/opkg-lists/barrier_breaker_telephony.<br />Downloading <a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/packages/management/Packages.gz.">http://downloads.openwrt.org/barrier_br … ckages.gz.</a><br />Updated list of available packages in /var/opkg-lists/barrier_breaker_management.<br />Downloading <a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/packages/oldpackages/Packages.gz.">http://downloads.openwrt.org/barrier_br … ckages.gz.</a><br />Updated list of available packages in /var/opkg-lists/barrier_breaker_oldpackages.</p><p>and these 2 packages still never show up in luci windows.</p><p>However, YOU HAVE HELPED ME WORK AROUND IT!</p><p>If from the command line I do<br />opkg install luci-app-ddns</p><p>the packages both get installed!!! This is the first time this has been tried since I usually only use the Luci interface.</p><p>So, something is wrong with the Luci interface. The command line works.</p><p>Going back to Luci and showing the installed packages it now shows the 2 new ddns ones.</p><p>So there is a bug some place that prevents Luci from getting the ddns packages.</p><p>thanks<br />oldunixguy</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278518">
				<div class="post-metadata">
					<div class="post-num">Post #145</div>
					<div class="post-author">chris5560</div>
					<div class="post-datetime">
						2 Jun 2015, 01:13					</div>
				</div>
				<div class="post-content content">
					<p>For me it looks like a browser cache problem, because LuCI is using opkg command options to build the list.<br />Clear browser cache and search for &quot;ddns&quot; in the available package list, it should be there (Because packages are installed each should be twice)<br />On with description and one without.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p296874">
				<div class="post-metadata">
					<div class="post-num">Post #146</div>
					<div class="post-author">shdashley</div>
					<div class="post-datetime">
						21 Oct 2015, 09:05					</div>
				</div>
				<div class="post-content content">
					<p>Problems with dnsomatic.com / opendns.</p><p>I have used 14.07 Openwrt to update with opendns in the past. But with 15.05 I can&#039;t get this version to work. I see others on this forum detail this problem but I can&#039;t see a solution.</p><p>I have the free single network with opendns (dnsomatic.com) and can update via wget (ssl) ok. It does not seem to matter what NAME or network I use in the wget cmd. As long as I have credentials that match it reports update OK.</p><p>Doing this to filter&nbsp; porn sites (etc) for our Scout Hall.<br />I have an Netgear WNDR4300 with 15.05 loaded. <br />* installed wget (with ssl)<br />* installed ddns-scripts and luci-app-ddns<br />* installed openssl-util<br />* installed ca-certificates</p><p>When I used the ddns updater I get an error when nslookup try&#039;s to find my opendns &#039;network&#039; (ie [DOMAIN] field). But as opendns does not provide an fqdn this fails.</p><p>I&#039;ve see another&#039;s solution to this is to just &#039;cron&#039; the wget cmd. But I think that it would be better /nicer to have this &#039;inside&#039; ddns.</p><p>Can anyone offer a ddns solution to this ?</p><p>Some Log file.<br />121758&nbsp; &nbsp; &nbsp; &nbsp;: ************ ************** ************** **************<br /> 121758&nbsp; note : PID &#039;3407&#039; started at 2015-10-21 12:17<br /> 121758&nbsp; &nbsp; &nbsp; &nbsp;: uci configuration:<br />ddns.OpenDNS_ipv4.cacert=&#039;/etc/ssl/certs&#039;<br />ddns.OpenDNS_ipv4.check_interval=&#039;10&#039;<br />ddns.OpenDNS_ipv4.check_unit=&#039;minutes&#039;<br />ddns.OpenDNS_ipv4.domain=&#039;MY-Network&#039;<br />ddns.OpenDNS_ipv4.enabled=&#039;1&#039;<br />ddns.OpenDNS_ipv4.force_interval=&#039;72&#039;<br />ddns.OpenDNS_ipv4.force_unit=&#039;hours&#039;<br />ddns.OpenDNS_ipv4.interface=&#039;wan&#039;<br />ddns.OpenDNS_ipv4.ip_source=&#039;web&#039;<br />ddns.OpenDNS_ipv4.ip_url=&#039;http://myip.dnsomatic.com&#039;<br />ddns.OpenDNS_ipv4.password=&#039;My-PWD&#039;<br />ddns.OpenDNS_ipv4.retry_count=&#039;10&#039;<br />ddns.OpenDNS_ipv4.retry_interval=&#039;60&#039;<br />ddns.OpenDNS_ipv4.retry_unit=&#039;seconds&#039;<br />ddns.OpenDNS_ipv4.update_url=&#039;http://[USERNAME]:[PASSWORD]@updates.opendns.com/nic/update?hostname=[DOMAIN]&amp;myip=[IP]&#039;<br />ddns.OpenDNS_ipv4.use_https=&#039;1&#039;<br />ddns.OpenDNS_ipv4.use_logfile=&#039;1&#039;<br />ddns.OpenDNS_ipv4.use_syslog=&#039;1&#039;<br />ddns.OpenDNS_ipv4.username=&#039;user@some.domain.somewhere&#039;<br />ddns.OpenDNS_ipv4=service<br /> 121759&nbsp; &nbsp; &nbsp; &nbsp;: ddns version&nbsp; : 2.4.3-1<br /> 121759&nbsp; &nbsp; &nbsp; &nbsp;: verbose mode&nbsp; : 0 - run normal, NO console output<br /> 121759&nbsp; &nbsp; &nbsp; &nbsp;: check interval: 600 seconds<br /> 121759&nbsp; &nbsp; &nbsp; &nbsp;: force interval: 259200 seconds<br /> 121759&nbsp; &nbsp; &nbsp; &nbsp;: retry interval: 60 seconds<br /> 121759&nbsp; &nbsp; &nbsp; &nbsp;: retry counter : 10 times<br /> 121759&nbsp; &nbsp; &nbsp; &nbsp;: No old process<br /> 121759&nbsp; &nbsp; &nbsp; &nbsp;: last update: never<br /> 121759&nbsp; &nbsp; &nbsp; &nbsp;: Detect registered/public IP<br /> 121759&nbsp; &nbsp; &nbsp; &nbsp;: #&gt; /usr/bin/nslookup MY-Network&nbsp; &gt;/var/run/ddns/OpenDNS_ipv4.dat 2&gt;/var/run/ddns/OpenDNS_ipv4.err<br /> 121759 ERROR : BusyBox nslookup error: &#039;1&#039;<br /> 121759&nbsp; &nbsp; &nbsp; &nbsp;: nslookup: can&#039;t resolve &#039;MY-Network&#039;: Name or service not known<br /> 121759&nbsp; &nbsp; &nbsp; &nbsp;: Detect registered/public IP<br /> 121759&nbsp; &nbsp; &nbsp; &nbsp;: #&gt; /usr/bin/nslookup MY-Network&nbsp; &gt;/var/run/ddns/OpenDNS_ipv4.dat 2&gt;/var/run/ddns/OpenDNS_ipv4.err<br /> 121759 ERROR : BusyBox nslookup error: &#039;1&#039;<br /> 121759&nbsp; &nbsp; &nbsp; &nbsp;: nslookup: can&#039;t resolve &#039;18forrest&#039;: Name or service not known<br /> 121759&nbsp; WARN : Get registered/public IP for &#039;MY-Network&#039; failed - retry 1/10 in 60 seconds<br /> 121859&nbsp; &nbsp; &nbsp; &nbsp;: #&gt; /usr/bin/nslookup 18forrest&nbsp; &gt;/var/run/ddns/OpenDNS_ipv4.dat 2&gt;/var/run/ddns/OpenDNS_ipv4.err<br /> 121859 ERROR : BusyBox nslookup error: &#039;1&#039;<br /> 121859&nbsp; &nbsp; &nbsp; &nbsp;: nslookup: can&#039;t resolve &#039;MY-Network&#039;: Name or service not known</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p296936">
				<div class="post-metadata">
					<div class="post-num">Post #147</div>
					<div class="post-author">chris5560</div>
					<div class="post-datetime">
						21 Oct 2015, 21:42					</div>
				</div>
				<div class="post-content content">
					<p>Every host inside DNS needs FQDN <a href="https://en.wikipedia.org/wiki/Fully_qualified_domain_name">https://en.wikipedia.org/wiki/Fully_qua … omain_name</a> so &quot;18forrest.example.com&quot; is the FQDN.<br />You only give &quot;18forrest&quot; without &quot;example.com&quot; into the [DOMAIN] field and nslookup must fail.<br />You normally not calling your host only by &quot;18forrest&quot; from the web, you call &quot;18forrest.example.com&quot;.</p><p>The handling of [DOMAIN] field was not changed since OpenWrt 10.03 release; a better monitoring was implemented in 15.05.<br />In the past you never see nslookup problems and fire an update to your ddns-provider every x seconds without need, because the script thought IP has changed.</p><p>Christian</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p297026">
				<div class="post-metadata">
					<div class="post-num">Post #148</div>
					<div class="post-author">shdashley</div>
					<div class="post-datetime">
						22 Oct 2015, 14:53					</div>
				</div>
				<div class="post-content content">
					<p>Hi Christian, and thanks for the reply. Yes I understand this. And I see it fail.</p><p>_but_ opendns / dnsomatic (seems to be same place) provide dns servers that that can be useful (reduce my management of firewall rules) to help limit access to unwanted sites (ie porn).</p><p>To do this you register a &#039;name&#039; /entry with them. But this entry is not &#039;searchable&#039; via dns. I think it&#039;s used to access what sites you have block (filtered). So when the IP address &#039;attached&#039; or linked to that entry does a query the response is filtered before being returned.</p><p>So you still need to &#039;update&#039; your current IPv4 Nat&#039;ed address with them, but can&#039;t use an fqdn to check it current address, cos it won&#039;t get found.</p><p>Like I said i have used the ddns in 14.07 to do these updates, but there are changes in 15.05 that have changed behaviour and the &#039;old&#039; scripts I had don&#039;t work now.</p><p>This wget cmd DOES update the opendns entry, so I will just cron it for now. Interestingly the 18forrest can be any text in the testing I&#039;ve done. So the update is done with the userid and pwd (at least for this &#039;free&#039; account that only has one entry/network).</p><p>wget --user user@some.domain.somewhere --password some-pwd <a href="http://updates.opendns.com/nic/update">http://updates.opendns.com/nic/update</a> hostname=18forrest</p><br /><div class="quotebox"><cite>chris5560 wrote:</cite><blockquote><p>Every host inside DNS needs FQDN <a href="https://en.wikipedia.org/wiki/Fully_qualified_domain_name">https://en.wikipedia.org/wiki/Fully_qua … omain_name</a> so &quot;18forrest.example.com&quot; is the FQDN.<br />You only give &quot;18forrest&quot; without &quot;example.com&quot; into the [DOMAIN] field and nslookup must fail.<br />You normally not calling your host only by &quot;18forrest&quot; from the web, you call &quot;18forrest.example.com&quot;.</p><p>The handling of [DOMAIN] field was not changed since OpenWrt 10.03 release; a better monitoring was implemented in 15.05.<br />In the past you never see nslookup problems and fire an update to your ddns-provider every x seconds without need, because the script thought IP has changed.</p><p>Christian</p></blockquote></div>											<p class="post-edited">(Last edited by <strong>shdashley</strong> on 22 Oct 2015, 17:13)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p297162">
				<div class="post-metadata">
					<div class="post-num">Post #149</div>
					<div class="post-author">chris5560</div>
					<div class="post-datetime">
						23 Oct 2015, 15:38					</div>
				</div>
				<div class="post-content content">
					<p>OK you need to update your IP for a service having nothing to do with (Dynamic)DNS.<br />So doing a DNS call i.e. nslookup must fail because DNS is not updated.</p><p>As I said the handling of the DOMAIN parameter was not changed.<br />But if you cannot &quot;nslookup&quot; you can&#039;t send an update. That&#039;s the change.</p><p>Because ddns-scripts are designed for DynamicDNS, I think the best practice for you is to stay with wget via cron.</p><p>Other option is to combine your used filter functionality with opendns/dnsomatic DynamicDNS service if possible.<br />Than you are back inside ddns-scripts functionality.<br />Updating DynamicDNS possibly also updating your filter functionality ?! Sorry I&#039;m not familiar with dnsomatic/opendns services.</p><p>Christian</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p297202">
				<div class="post-metadata">
					<div class="post-num">Post #150</div>
					<div class="post-author">shdashley</div>
					<div class="post-datetime">
						23 Oct 2015, 22:59					</div>
				</div>
				<div class="post-content content">
					<p>OK, Thank you for the explanation. </p><p>For me (at home) I don&#039;t need the opendns service (porn is not of interest to me). But as I&#039;m sure you understand, for a community location like our Scout Hall. And as the person managing the Internet there, I need to control (ie duty of care for the kids/youth) how or what &#039;might&#039; be able to be &#039;seen&#039; or accessed. For users with basic knowledge opendns works. A more knowledgeable user will understand how to select another DNS provider and get around this filter. Yes its not a complete solution.</p><p>For the moment the cron job will work fine.</p><p>Cheers.</p><div class="quotebox"><cite>chris5560 wrote:</cite><blockquote><p>OK you need to update your IP for a service having nothing to do with (Dynamic)DNS.<br />So doing a DNS call i.e. nslookup must fail because DNS is not updated.</p><p>As I said the handling of the DOMAIN parameter was not changed.<br />But if you cannot &quot;nslookup&quot; you can&#039;t send an update. That&#039;s the change.</p><p>Because ddns-scripts are designed for DynamicDNS, I think the best practice for you is to stay with wget via cron.</p><p>Other option is to combine your used filter functionality with opendns/dnsomatic DynamicDNS service if possible.<br />Than you are back inside ddns-scripts functionality.<br />Updating DynamicDNS possibly also updating your filter functionality ?! Sorry I&#039;m not familiar with dnsomatic/opendns services.</p><p>Christian</p></blockquote></div>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 6 of 6</div><nav><ul><li><a href="viewtopic.php%3Fid=50908&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=50908&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=50908&amp;p=5.html">5</a></li><li class="pagination-current"><span>6</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>