<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Running my own app after boot completed</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p182060">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">rough_neck</div>
					<div class="post-datetime">
						1 Nov 2012, 01:07					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I&#039;m not a Linux expert, but I managed to write my own C program that I want to run automatically after booting is completed.</p><p>I tried using the init script similar to this...</p><p>#!/bin/sh /etc/rc.common<br /># Example script<br /># Copyright (C) 2007 OpenWrt.org</p><p>START=10<br />STOP=15</p><p>start() {&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; echo start<br />&nbsp; &nbsp; &nbsp; &nbsp; testprogram<br />}&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p><p>stop() {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; echo stop<br />&nbsp; &nbsp; &nbsp; &nbsp; # commands to kill application <br />}</p><p>My program printf a lot of information while running. However, after re-booting openWrt, the OS automatically starts the program running, but there is NO TEXT OUTPUT anymore, and the program also does NOT run correctly in general.</p><p>But if I manually start it from the command line like this &quot;/etc/init.d/script start&quot; everything works perfectly. I don&#039;t know why it works if I start it manually, but does not work properly when it starts automatically.</p><p>So It seems it needs a real shell to run from in order to work properly because of the TEXT output, and when its automatically run at boot up maybe there is no shell causing it to mess up?</p><p>Does anybody knows how I can start my app automatically after everything boots up without using init.d method, or how to get it to start from a shell automatically after boot up?</p><p>I tried so many things with the same result, I tried putting in &quot;sh testprogram&quot; thinking that would force it to start in a shell, but still doesn&#039;t work.</p><p>Any help would be appreciated.</p><p>Thanks<br />rough_neck</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p182083">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">robthebrew</div>
					<div class="post-datetime">
						1 Nov 2012, 09:01					</div>
				</div>
				<div class="post-content content">
					<p>the text output is sent to stdout, which in the case of the autostart is undefined.<br />Try echo &quot;start&quot; &gt; filename<br />where filename is a file.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>