<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Developing Support for TPLINK WDR4900</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 5 Oct 2014 and 4 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 35</div><nav><ul><li><a href="viewtopic.php%3Fid=42062&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=42062&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=42062&amp;p=4.html">4</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42062&amp;p=35.html">35</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p192171">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">alphasparc</div>
					<div class="post-datetime">
						16 Feb 2013, 11:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>eximido wrote:</cite><blockquote><p>AR7161 could also be overclocked from its std 680MHz freq to 800MHz. IIRC in some mikrotik boards it comes with 800 MHz clock by default, but just the clock speeds are not the whole story. What I&#039;m really interested in is whether hardware FPU (along with PPC architecture) will provide any <em>significant</em> performance benefits for the userspace software like php compared to MIPS SoCs running at the same clocks.</p></blockquote></div><p>I am sure it would.<br/>But developers will have to enable hardware float in the compile options.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192492">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">seyasa</div>
					<div class="post-datetime">
						19 Feb 2013, 12:53					</div>
				</div>
				<div class="post-content content">
					<p>hello good morning, what about this router.....&nbsp; any news?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192780">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">eximido</div>
					<div class="post-datetime">
						22 Feb 2013, 09:17					</div>
				</div>
				<div class="post-content content">
					<p>Well, as it appears at recent changeset <a href="https://dev.openwrt.org/changeset/35733">#35733</a> by juhosg now we should be able to compile the openwrt firmware for wdr4900.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192792">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">Mickey</div>
					<div class="post-datetime">
						22 Feb 2013, 12:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>eximido wrote:</cite><blockquote><p>Well, as it appears at recent changeset <a href="https://dev.openwrt.org/changeset/35733">#35733</a> by juhosg now we should be able to compile the openwrt firmware for wdr4900.</p></blockquote></div><p>Bookmarked, very curious about these developments!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p193151">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">RMS</div>
					<div class="post-datetime">
						25 Feb 2013, 17:53					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m also happy and expectant!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p193813">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">yanzifans</div>
					<div class="post-datetime">
						4 Mar 2013, 20:05					</div>
				</div>
				<div class="post-content content">
					<p>any update ?? <br/>very expectant !</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194466">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">eximido</div>
					<div class="post-datetime">
						10 Mar 2013, 19:12					</div>
				</div>
				<div class="post-content content">
					<p>Looks like there were no updates on this device in openwrt&#039;s trac for nearly three weeks. Meanwhile I&#039;ve tried to build general firmware for mpc85xx devices since there&#039;s no separate target profile for wdr4900 yet. It compiled fine and if I&#039;m right it theoretically should work with wdr4900 but I dunno whether it will in fact.</p><p>Can&#039;t check myself cause my wdr4900 is still on the way, international post service is ridiculously slow here.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194474">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">stinger2k</div>
					<div class="post-datetime">
						10 Mar 2013, 19:45					</div>
				</div>
				<div class="post-content content">
					<p>Any news how long it takes that there is a precompiled image out?</p>											<p class="post-edited">(Last edited by <strong>stinger2k</strong> on 10 Mar 2013, 19:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194594">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">Stoffi</div>
					<div class="post-datetime">
						11 Mar 2013, 22:13					</div>
				</div>
				<div class="post-content content">
					<p>I also compiled it and missed the target profile. So i&#039;m afraid to flash it without knowing if it works.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194618">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">eximido</div>
					<div class="post-datetime">
						12 Mar 2013, 08:35					</div>
				</div>
				<div class="post-content content">
					<p>In fact there&#039;s nothing to flash, because none firmware binary is created by default at all. But we&#039;re able to manually use mktplinkfw utility to create the firmware binary from kernel and rootfs files, which are created during general mpc85xx firmware compilation.<br/>Still some clarification and explanation from juhosg, who was working on wdr4900 support, is required though.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194817">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">stinger2k</div>
					<div class="post-datetime">
						13 Mar 2013, 21:06					</div>
				</div>
				<div class="post-content content">
					<p>Is that a problem if anyone can compile a flashable image with luci in it?<br/>So if anyone can do this it would be great, fro, latest trunk...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194824">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">eximido</div>
					<div class="post-datetime">
						13 Mar 2013, 22:24					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve asked juhosg a question regarding wdr4900 support status, and he says that there&#039;re still some problems with switch driver compability so that wired ports with current implementation are not operational yet. So openwrt still needs some futher development for running this device, unfortunately.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195114">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">eximido</div>
					<div class="post-datetime">
						16 Mar 2013, 22:10					</div>
				</div>
				<div class="post-content content">
					<p>Great news: with the latest bunch of changesets (<a href="https://dev.openwrt.org/changeset/36042">#36042</a> to <a href="https://dev.openwrt.org/changeset/36051">#36051</a>) wdr4900&#039;s switch in now fully supported and we are finally able to build firmware images for this device. Many thanks to juhosg!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195193">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">jeffster</div>
					<div class="post-datetime">
						17 Mar 2013, 20:48					</div>
				</div>
				<div class="post-content content">
					<p>Interested in finding a reliable US retailer for these. Please PM me if you can help (or steer me away from disasters).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195196">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">ryts</div>
					<div class="post-datetime">
						17 Mar 2013, 21:16					</div>
				</div>
				<div class="post-content content">
					<p>So, as far as one can see, there will be no major functionality missing in openwrt for this, rather attractive looking spec device?&nbsp; I guess I am impatient ... :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195234">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">yanzifans</div>
					<div class="post-datetime">
						18 Mar 2013, 09:18					</div>
				</div>
				<div class="post-content content">
					<p>will hardware NAT supported ??<br/>thx</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195236">
				<div class="post-metadata">
					<div class="post-num">Post #42</div>
					<div class="post-author">eximido</div>
					<div class="post-datetime">
						18 Mar 2013, 09:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>yanzifans wrote:</cite><blockquote><p>will hardware NAT supported ??<br/>thx</p></blockquote></div><p>Currently it isn&#039;t, and probably it won&#039;t in the near future either.<br/>Short explanation from <a href="https://dev.openwrt.org/ticket/11779">ticket #11779</a> (regarding wdr4300):<br/></p><div class="quotebox"><blockquote><p>here&#039;s why it&#039;s most likely not going to happen:<br/></p><ul><li><p>the source of the hw nat implementation is not included in the tarball</p></li><li><p>it requires some *extremely* nasty hacks in the netfilter source code</p></li></ul></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195340">
				<div class="post-metadata">
					<div class="post-num">Post #43</div>
					<div class="post-author">jeffster</div>
					<div class="post-datetime">
						18 Mar 2013, 22:24					</div>
				</div>
				<div class="post-content content">
					<p>A call to TP-Link US today indicated that the WDR4900 is not available in the US through normal channels. They were not able to indicate what the configuration of a US model would be, but are expecting something in the May/June time frame.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195719">
				<div class="post-metadata">
					<div class="post-num">Post #44</div>
					<div class="post-author">Jeffrey87</div>
					<div class="post-datetime">
						22 Mar 2013, 18:37					</div>
				</div>
				<div class="post-content content">
					<p>I was wondering if someone already succeeded in building an OpenWrt trunk image for the TL-WDR4900.<br/>As far as I could see, there&#039;s already support available for it since build r36051.</p><p>I tried building it several times, but I have never built an OpenWrt image before, so I would like to leave it to the experts, before bricking my device..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195731">
				<div class="post-metadata">
					<div class="post-num">Post #45</div>
					<div class="post-author">eximido</div>
					<div class="post-datetime">
						22 Mar 2013, 19:54					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve built my own image and successfully flashed it. I haven&#039;t had much time to test everything yet, but at a glance the device works smooth. The only thing that isnt working is wifi switch button, and WPS led (or what&#039;s that? the rightmost led) on the front panel is not controllable from corresponding /sys subsystem. </p><p>You can safely use only the WDR4900 profile in buildroot to make firmware with wired connections enabled and working. In order to enable wireless I had to manually select kmod-mac80211, kmod-cfg80211, kmod-ath9k and wpad-mini - although I dunno why, because it should be enabled by default as well. Probably that was some local bug in my buildroot due to switching&amp;updating configs. Wireless-tools package could also come in handy. And, of course, if you need LuCI web-interface you&#039;ll need to enable its package as well - but I personally prefer cli only to configure the device.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195735">
				<div class="post-metadata">
					<div class="post-num">Post #46</div>
					<div class="post-author">freed45</div>
					<div class="post-datetime">
						22 Mar 2013, 20:10					</div>
				</div>
				<div class="post-content content">
					<p>I have dried to compile the trunk image on an virtual ubuntu installation. Everything worked fine as described in this wonderful tutorial: <a href="http://www.thepowerbase.com/2012/01/openwrt-build-guide-start-to-finish/">http://www.thepowerbase.com/2012/01/ope … to-finish/</a> <br/>But it always stops with an error &quot;failed&quot; after a half an hour of compiling...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195736">
				<div class="post-metadata">
					<div class="post-num">Post #47</div>
					<div class="post-author">Jeffrey87</div>
					<div class="post-datetime">
						22 Mar 2013, 20:11					</div>
				</div>
				<div class="post-content content">
					<p>@eximido: After compiling, I get a 16 MB factory image, which seems quite big for this device? I was expecting something like a 3 or 4 MB sized file.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195741">
				<div class="post-metadata">
					<div class="post-num">Post #48</div>
					<div class="post-author">eximido</div>
					<div class="post-datetime">
						22 Mar 2013, 20:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Jeffrey87 wrote:</cite><blockquote><p>@eximido: After compiling, I get a 16 MB factory image, which seems quite big for this device? I was expecting something like a 3 or 4 MB sized file.</p></blockquote></div><p>Thats ok - the device has 16MB flash onboard. Looks like the original tplink firmware updater requires firmware image to be exactly 16 MB, so factory image is padded to that size.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195752">
				<div class="post-metadata">
					<div class="post-num">Post #49</div>
					<div class="post-author">gra</div>
					<div class="post-datetime">
						22 Mar 2013, 21:50					</div>
				</div>
				<div class="post-content content">
					<p>I too can confirm, that a stock firmware image works on the WDR4900 (got hardware version 1.3).<br/>I installed luci and wpad-mini on it. So far I did only a rudimentary setup, but it seems that the WLAN (2.4 and 5 GHz) seems a bit &quot;choppy&quot;. But the problem here could be my configuration.<br/>I will have a closer look into getting this to work in the next few days.</p><br/><div class="codebox"><pre><code>BusyBox v1.19.4 (2013-03-21 17:05:50 CET) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 -----------------------------------------------------
 BARRIER BREAKER (Bleeding Edge, r36099)
 -----------------------------------------------------
  * 1/2 oz Galliano         Pour all ingredients into
  * 4 oz cold Coffee        an irish coffee mug filled
  * 1 1/2 oz Dark Rum       with crushed ice. Stir.
  * 2 tsp. Creme de Cacao
 -----------------------------------------------------
root@openwrt:~# cat /proc/cpuinfo
processor    : 0
cpu        : e500v2
clock        : 799.999992MHz
revision    : 5.1 (pvr 8021 2151)
bogomips    : 99.99
timebase    : 49999999
platform    : Freescale P1014
model        : TP-Link TL-WDR4900 v1
Memory        : 128 MB</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195755">
				<div class="post-metadata">
					<div class="post-num">Post #50</div>
					<div class="post-author">vhrm</div>
					<div class="post-datetime">
						22 Mar 2013, 22:05					</div>
				</div>
				<div class="post-content content">
					<p>This is&nbsp; neither here nor there, (and i don&#039;t know what good it does on this 2nd page of this thread) but one thing to note that makes the wdr4900 different than the wdr4300 is that on the 4900 the external antennas are only for 5ghz band.&nbsp; &nbsp;<br/>It has internal antennas for 2.4ghz.&nbsp; </p><p>the 4300 antennas are dual band.&nbsp; &nbsp;So... this can be either good or bad depending on what you want to do. Good because dual band external antennas are hard to find (at least currently) and you can mess with the 5ghz band without totally killing your 2.4.&nbsp; &nbsp; Bad if you want to do something with the 2.4 band antennas because you can&#039;t. (unless you HW mod the thing presumably)</p><p>This is depicted on the tp-link site, so it&#039;s no secret, but was unexpected to me.&nbsp; &nbsp;I assumed they just tweaked the radios to add a third stream on 2.4ghz.</p>											<p class="post-edited">(Last edited by <strong>vhrm</strong> on 22 Mar 2013, 22:06)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 2 of 35</div><nav><ul><li><a href="viewtopic.php%3Fid=42062&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=42062&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=42062&amp;p=4.html">4</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42062&amp;p=35.html">35</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>