<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TP-Link MR3420 Help</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p130025">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">alphasparc</div>
					<div class="post-datetime">
						6 Mar 2011, 10:14					</div>
				</div>
				<div class="post-content content">
					<p>Hi, </p><p>I am quite new to OpenWRT and I happened to bought the MR3420 however the default firmware lacks the full capabilities I wanted.<br />I am using 3G ISP Connection to connect to the internet.<br />I need USB filesharing with read/write capabilities to the Windows Clients on the LAN in addition to 3G Connection to the internet.<br />Does the filesystem matter?<br />What Modules do I need?<br />The original Firmware comes with excellent QoS sharing I hope I can retain in the custom OpenWRT firmware.<br />However the router only comes with a measly 4MB Flash. <br />Is it possible to squeeze everything into the 4MB? I am fine without GUI and configuring OpenWRT from Terminal/SSH.<br />Is it possible to include the config file such that the router will load the settings automatically when it is rebooted?<br />To date I have flashed the binary OpenWRT and flash back the TP-Link firmware (FTP &amp; mtd the firmware) as I do not know how to proceed on.<br />I have also downloaded the custom image (The firmware Generator) zip but I do not know how to include the config I want as well as the modules I can squeeze in maximum to the router without having to replace the spi flash rom.</p><p>Thanks for the professional advices in advance.</p>											<p class="post-edited">(Last edited by <strong>alphasparc</strong> on 6 Mar 2011, 10:29)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p130082">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">alphasparc</div>
					<div class="post-datetime">
						7 Mar 2011, 07:31					</div>
				</div>
				<div class="post-content content">
					<p>Any TP-Link MR3420 expert owner helping a new comer out?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p130091">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						7 Mar 2011, 11:53					</div>
				</div>
				<div class="post-content content">
					<p>Did you <a href="http://wiki.openwrt.org/toh/tp-link/tl-mr3420#connect.stuff.to.the.usb.port">RTFW</a>?<br />Also search for: extroot, samba, multiwan, qos-scripts, buildroot/files/</p><p>USB port is limited to 100mA, will be hard to get 3G and usbfs on the same port. Maybe use a <a href="http://www.seagate.com/www/en-us/products/network_storage/freeagent_dockstar/">Seagate dockstar</a> for the fs part or go for the TL-WR1043ND instead.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p130092">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">eleon216</div>
					<div class="post-datetime">
						7 Mar 2011, 12:11					</div>
				</div>
				<div class="post-content content">
					<p>hi, </p><p>I have a MR3220 (the same hardware except it has only a 1x1 wifi -&gt; 150Mbit), but most of your questions aren&#039;t really hardwarerelated, so it doesn&#039;t really matter.</p><p>the usb-port works fine with a (self-powered) hub, so 3g-dongle and usb-harddisk shouldn&#039;t be a problem. <br />If your usb-disk is connected all the time you could move your rootfs to the disk, so the 4MB of flash are no problem. Or if you want to be able to disconnect your hd you could use an additional usbstick as rootfs<br /><a href="http://wiki.openwrt.org/doc/howto/extroot">http://wiki.openwrt.org/doc/howto/extroot</a><br />So make only an striped-down image (only basic packages, usb-modules, fs-modules, extroot-package) and any additional programm as package which could be installed afterwards on the external rootfs.</p><p>openwrt has a qos-package, which works very well on &quot;stable&quot; connections, this is because you have to set the up-/downloadspeed. I think the speed of the 3g connection will differ all the time, so I don&#039;t think this qos-package will work very well, in your case.&nbsp; </p><p>If you make configurationchanges in openwrt, the are saved per default, so sure after a reboot they will be still there. most of the configuration-files are located at &quot;/etc/config/&quot; </p><p>As filesytem I would recommend ext3 or ext4, if it is a flashdrive, maybe think about ext2. </p><p>For windows-filesharing use samba, you will find infos in the documentation-section and/or the wiki</p><p>and I think you have to use trunk so maybe have a look on compling your own image.</p>											<p class="post-edited">(Last edited by <strong>eleon216</strong> on 7 Mar 2011, 12:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p130102">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">alphasparc</div>
					<div class="post-datetime">
						7 Mar 2011, 17:55					</div>
				</div>
				<div class="post-content content">
					<p>Is it possible squeezing everything on the 4MB? I really don&#039;t want a extroot, seems to spoil the elegance of the router...<br />Does the image generator compress the package until it can fit all the packages?<br />TP-Link default flash uses 3.1MB only. So shouldn&#039;t adding USB Harddisk occupy just a bit more?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p130126">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">eleon216</div>
					<div class="post-datetime">
						7 Mar 2011, 21:27					</div>
				</div>
				<div class="post-content content">
					<p>I think it&#039;s possible to get all you need in 4MB. <br />just try it! <br />And no the fs can&#039;t be compressed until it fits in 4MB. the compression has to be lossless, so there are limits. <br />And you don&#039;t&nbsp; have the whole 4MB available because there is space for the bootloader, the &quot;wifi-firmware&quot;, so I guess the 3,1MB of the tp-link image could be the maximum possible size. </p><p>As I said: just try it, but you have to build everythink into the image, installing packages afterwards needs much more space. I would recommend compiling your own image, this way you could tweak it more.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>