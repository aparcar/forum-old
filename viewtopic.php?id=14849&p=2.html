<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Need help on building kamikaze + asterisk</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 18 Apr 2018 and 19 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=14849&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p65058">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">palexy91</div>
					<div class="post-datetime">
						13 Mar 2008, 00:30					</div>
				</div>
				<div class="post-content content">
					<p>Really strange Hans I got the same problems. I reinstall all (asterisk + the libraries packages) from your repository. I used an Asus WL-500GP.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65078">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						13 Mar 2008, 09:27					</div>
				</div>
				<div class="post-content content">
					<p>but you compiled your own image from SVN; you should do it as in:</p><p>&nbsp; <a href="http://forum.openwrt.org/viewtopic.php?pid=64746#p64746">http://forum.openwrt.org/viewtopic.php?pid=64746#p64746</a></p><p>What is much better for you (and actually the only thing that is supported) :<br />install a distribution/tarball from:</p><p>&nbsp; <a href="http://downloads.openwrt.org/kamikaze/7.09/">http://downloads.openwrt.org/kamikaze/7.09/</a></p><p>and only _then_ install self-compiled packages/asterisk, as described above; that is what non-developers should do</p><p>Hans.</p>											<p class="post-edited">(Last edited by <strong>zandbelt</strong> on 13 Mar 2008, 09:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65080">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">himbeere</div>
					<div class="post-datetime">
						13 Mar 2008, 11:06					</div>
				</div>
				<div class="post-content content">
					<p>I did like zandbelt suggested (plain kamikaze) and everything runs fine. By the way, thank you for your work zandbelt.</p><p>t.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65081">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">palexy91</div>
					<div class="post-datetime">
						13 Mar 2008, 11:17					</div>
				</div>
				<div class="post-content content">
					<p>Hans, I can simply use the image provide by &quot;<a href="http://downloads.openwrt.org/kamikaze/7.09/">http://downloads.openwrt.org/kamikaze/7.09/</a>&quot; but with this release I met a lot &quot;segmentation fault&quot;. I had already used it with your asterisk.1.4.9 build, and asterisk ran perfectly although there were a lot of &quot;segmentation fault&quot;.</p><p>I am going to make another image following your recommandation.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65084">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						13 Mar 2008, 12:36					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>palexy91 wrote:</cite><blockquote><p>Hans, I can simply use the image provide by &quot;<a href="http://downloads.openwrt.org/kamikaze/7.09/">http://downloads.openwrt.org/kamikaze/7.09/</a>&quot; but with this release I met a lot &quot;segmentation fault&quot;. I had already used it with your asterisk.1.4.9 build, and asterisk ran perfectly although there were a lot of &quot;segmentation fault&quot;.</p><p>I am going to make another image following your recommandation.</p></blockquote></div><p>don&#039;t make an image yourself; put the pre-built image from <a href="http://downloads.openwrt.org/kamikaze/7.09/">http://downloads.openwrt.org/kamikaze/7.09/</a> on your router and then install asterisk 1.4.18 from my repository =&gt; no problems; I guess the segmentation faults in asterisk 1.4.9 are solved in 1.4.18</p><p>only when that works try compiling _packages_ yourself using the procedure described above</p><p>Hans.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65085">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">palexy91</div>
					<div class="post-datetime">
						13 Mar 2008, 13:00					</div>
				</div>
				<div class="post-content content">
					<p>I remember that even without installing asterisk on my asus wl-500gp box, I had &quot;segmentation fault&quot; with the pre-built &quot;openwrt-brcm47xx-2.6-squashfs.trx&nbsp; &quot; downloaded&nbsp; from <a href="http://downloads.openwrt.org/kamikaze/7.09/">http://downloads.openwrt.org/kamikaze/7.09/</a>. See <a href="http://wiki.openwrt.org/OpenWrtDocs/Hardware/Asus/WL500GP?highlight=%28asus%29">http://wiki.openwrt.org/OpenWrtDocs/Har â€¦ %28asus%29</a>. I am afraid that this is a specific problem with the asus box. Any way, thanks a lot Hans. </p><p>If only one can give me his own pre-built image, so that I can test what&#039;s wrong in my openwrt building process.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65259">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">syscon</div>
					<div class="post-datetime">
						17 Mar 2008, 00:51					</div>
				</div>
				<div class="post-content content">
					<p>I just install x-wrt + whiterussian + SD card<br />SD card is working and env. is setup correctly:<br /></p><div class="codebox"><pre><code>/etc/profile
export PATH=/bin:/sbin:/usr/bin:/usr/sbin:/mnt/sd/bin:/mnt/sd/sbin:/mnt/sd/usr/bin:/mnt/sd/usr/sbin
export LD_LIBRARY_PATH=/lib:/usr/lib:/mnt/sd/lib:/mnt/sd/usr/lib</code></pre></div><p>I&#039;ve installed &nbsp; &nbsp; asterisk-bc 1.0.3-1 from: <a href="http://12.176.248.4/ipkg">http://12.176.248.4/ipkg</a> on SD card<br />but when I try to start it: </p><div class="codebox"><pre><code>/mnt/sd/etc/init.d/asterisk start
/mnt/sd/etc/init.d/asterisk: /mnt/sd/etc/init.d/asterisk: 20: /usr/sbin/asterisk: not found</code></pre></div><p>Is it possible to run asterisk from SD card?</p><p>#Joseph</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65357">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">tjibbe</div>
					<div class="post-datetime">
						19 Mar 2008, 02:10					</div>
				</div>
				<div class="post-content content">
					<p>I have the same problem as palexy91.<br />I have build it from svn (10603) with asterisk 1.4.11 including the addons on clean ubuntu 7.04 with the latest updates.<br />There were some path errors in the files. I found development paths in my startup files on my router. I removed the paths from the config files. (S50asterisk, asterisk.conf)</p><p>If I start asterisk I have 3 processen. I got the same errors as palexy91.<br />I do not have a asterisk.ctl file in /var/run</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65359">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">frogonwheels</div>
					<div class="post-datetime">
						19 Mar 2008, 03:20					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve had a few problems with asterisk14 - and I&#039;m mostly there.&nbsp; &nbsp;The problem with the missing asterisk.ctl can be worked around - just need to modify init.d/asterisk to have this:<br />&nbsp; $DEST/usr/sbin/asterisk $OPTIONS -f&nbsp; 2&gt;&amp;1&gt; /dev/null&nbsp; &nbsp;&amp;<br />(or redirect to a file if you want to see debugging)<br />Don&#039;t forget the ampersand to put it in the background.</p><p>I also had to modify the makefile to include support for gsm codec - seeing as all the voicemail files are in gsm - it seems a bit strange not to include the gsm codec.&nbsp; I&#039;ll post a patch for this to dev.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65366">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						19 Mar 2008, 09:28					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>frogonwheels wrote:</cite><blockquote><p>I also had to modify the makefile to include support for gsm codec - seeing as all the voicemail files are in gsm - it seems a bit strange not to include the gsm codec.&nbsp; I&#039;ll post a patch for this to dev.</p></blockquote></div><p>no need for that: it was already fixed for 1.4.18-2; see also:<br />&nbsp; <a href="http://forum.openwrt.org/viewtopic.php?pid=64720#p64720">http://forum.openwrt.org/viewtopic.php?pid=64720#p64720</a><br />the patch is in:<br />&nbsp; <a href="https://dev.openwrt.org/ticket/3196">https://dev.openwrt.org/ticket/3196</a></p><p>try this and report if the init.d hack is still needed </p><p>Hans.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65376">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">himbeere</div>
					<div class="post-datetime">
						19 Mar 2008, 11:01					</div>
				</div>
				<div class="post-content content">
					<p>Hi Zandbelt.</p><p>Are you planning to make packages for asterisk-1.4.18.1 regarding the security issues?</p><p><a href="http://www.asterisk.org/node/48466">http://www.asterisk.org/node/48466</a></p><p>cheers<br />t.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65488">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						21 Mar 2008, 02:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>himbeere wrote:</cite><blockquote><p>Are you planning to make packages for asterisk-1.4.18.1 regarding the security issues?</p></blockquote></div><p><a href="https://dev.openwrt.org/ticket/3196">Patches</a> put out by Hans for asterisk-1.4.18 is compatible with asterisk-1.4.18.1. In other words, you just need to modify the feed/packages/net/asterisk-1.4.x/Makefile to reflect the following:<br /></p><div class="codebox"><pre><code>PKG_VERSION:=1.4.18.1
PKG_MD5SUM:=a0d7ee4054a04529b745e60dd4e750c4</code></pre></div><div class="quotebox"><cite>frogonwheels wrote:</cite><blockquote><p>I&#039;ve had a few problems with asterisk14 - and I&#039;m mostly there.&nbsp; &nbsp;The problem with the missing asterisk.ctl can be worked around - just need to modify init.d/asterisk to have this:<br />&nbsp; $DEST/usr/sbin/asterisk $OPTIONS -f&nbsp; 2&gt;&amp;1&gt; /dev/null&nbsp; &nbsp;&amp;<br />(or redirect to a file if you want to see debugging)</p></blockquote></div><p>I had to change the output re-direction as shown below:<br /></p><div class="codebox"><pre><code>$DEST/usr/sbin/asterisk $OPTIONS -f  2&gt;&amp;1 /dev/null &amp;</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65953">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">himbeere</div>
					<div class="post-datetime">
						29 Mar 2008, 14:03					</div>
				</div>
				<div class="post-content content">
					<p>Thanks mazilo. Everything worked fine. Allthough i had to remove libgcrypt.so from the hostsystem before the build compiled successfull.</p><p>root@OpenWrt:~# asterisk -C /usb/etc/asterisk/asterisk.conf -r<br />Asterisk 1.4.18.1, Copyright (C) 1999 - 2008 Digium, Inc. and others.<br />Created by Mark Spencer &lt;markster@digium.com&gt;<br />Asterisk comes with ABSOLUTELY NO WARRANTY; type &#039;core show warranty&#039; for details.<br />This is free software, with components licensed under the GNU General Public<br />License version 2 and other licenses; you are welcome to redistribute it under<br />certain conditions. Type &#039;core show license&#039; for details.<br />=========================================================================<br />Connected to Asterisk 1.4.18.1 currently running on OpenWrt (pid = 784)<br />No entry for terminal type &quot;xterm&quot;;<br />using dumb terminal settings.</p><p>Edit: tried to build chan_ooh323.so</p><p>But:</p><p>install -d -m0755 /home/thomas/kamikaze/build_mipsel/asterisk-addons-1.4.6/ipkg/asterisk14-chan-ooh323/usr/lib/asterisk/modules<br />install -m0755 /home/thomas/kamikaze/build_mipsel/asterisk-addons-1.4.6/ipkg-install/usr/lib/asterisk/modules/chan_ooh323.so /home/thomas/kamikaze/build_mipsel/asterisk-addons-1.4.6/ipkg/asterisk14-chan-ooh323/usr/lib/asterisk/modules/<br />install: cannot stat `/home/thomas/kamikaze/build_mipsel/asterisk-addons-1.4.6/ipkg-install/usr/lib/asterisk/modules/chan_ooh323.so&#039;: No such file or directory<br />make[3]: *** [/home/thomas/kamikaze/bin/packages/asterisk14-chan-ooh323_1.4.6-2_mipsel.ipk] Error 1<br />make[3]: Leaving directory `/home/thomas/packages/net/asterisk-addons-1.4.x&#039;<br />make[2]: *** [asterisk-addons-1.4.x-compile] Error 2<br />make[2]: Leaving directory `/home/thomas/kamikaze/package&#039;<br />make[1]: *** [package/compile] Error 2<br />make[1]: Leaving directory `/home/thomas/kamikaze&#039;<br />make: *** [world] Error 2</p><p>Actual none off the asterisk-addons seems to build or to be more specific they don&#039;t seem to install because all of the modules exist in the package directory.</p>											<p class="post-edited">(Last edited by <strong>himbeere</strong> on 30 Mar 2008, 17:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p66003">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">frogonwheels</div>
					<div class="post-datetime">
						30 Mar 2008, 15:40					</div>
				</div>
				<div class="post-content content">
					<p>I had to disable meetme (no libzonetone or whatever it&#039;s called) but I got it compiling.</p><p>The patch certainly fixes the forking/ asterisk.ctl problem.</p><p>However, still no-go on the gsm though - fails to register hooks when you load the code_gsm module.&nbsp; I&#039;ve got something to try (&#039;cause I had it working) - which is to specify&nbsp; a directly with --with-gsm</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p66007">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">frogonwheels</div>
					<div class="post-datetime">
						30 Mar 2008, 16:22					</div>
				</div>
				<div class="post-content content">
					<p>Ah - small problem. You need to add a dependency on libgsm! Thankyou for that.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p66012">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						30 Mar 2008, 18:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>himbeere wrote:</cite><blockquote><p>Thanks mazilo. Everything worked fine. Allthough i had to remove libgcrypt.so from the hostsystem before the build compiled successfull.</p></blockquote></div><p>If you had to remove libgrypt.so from the host system that was used to compile your OpenWRT + asterisk source, then something isn&#039;t right unless you were trying to do a native compilation.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p66019">
				<div class="post-metadata">
					<div class="post-num">Post #42</div>
					<div class="post-author">himbeere</div>
					<div class="post-datetime">
						30 Mar 2008, 20:03					</div>
				</div>
				<div class="post-content content">
					<p>Everything compiled fine now. I had a /etc/asteriskaddons.makeopts file. This obviously prevented the modules from being installed. Well if someone needs the packages you can download them from:</p><p><a href="http://meine-oma.de:81/7.09/packages/">http://meine-oma.de:81/7.09/packages/</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p67279">
				<div class="post-metadata">
					<div class="post-num">Post #43</div>
					<div class="post-author">palexy91</div>
					<div class="post-datetime">
						22 Apr 2008, 15:06					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Are the problems of only 3 asterisk process running solved ?</p><p>Palexy91.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p67301">
				<div class="post-metadata">
					<div class="post-num">Post #44</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						22 Apr 2008, 19:29					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>palexy91 wrote:</cite><blockquote><p>Are the problems of only 3 asterisk process running solved ?</p></blockquote></div><p>Have a look <a href="http://forum.openwrt.org/viewtopic.php?pid=66013#p66013">here</a>.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=14849&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>