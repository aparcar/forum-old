<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> How to get WLAN up and running with ASUS WL 500gP?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p78881">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">linuxfan</div>
					<div class="post-datetime">
						2 Jan 2009, 17:23					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>how do I get WLAN up? My configuration is with ASUS WL 500gP (V1, Broadcom 4318 WLAN), with kamikaze 8.09 RC1.</p><p>Which packages do I need?</p><p>Which steps do I have to go (LuCI is preferred)?</p><p>Thanks,</p><p>linuxfan</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78886">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Yanira</div>
					<div class="post-datetime">
						2 Jan 2009, 18:38					</div>
				</div>
				<div class="post-content content">
					<p>8.09 RC1 image with 2.4 or 2.6 Kernel?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78887">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">linuxfan</div>
					<div class="post-datetime">
						2 Jan 2009, 18:47					</div>
				</div>
				<div class="post-content content">
					<p>8.09 RC1 image with 2.6 Kernel.</p><p>uname -a says:<br />Linux asus 2.6.25.17 #2 Tue Nov 4 01:37:43 UTC 2008 mips unknown</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78889">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Yanira</div>
					<div class="post-datetime">
						2 Jan 2009, 18:49					</div>
				</div>
				<div class="post-content content">
					<p>Thought about that. b43 is far away from stable. What You can do is replaycing the Mini-PCI card with an Atheros one <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78893">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">linuxfan</div>
					<div class="post-datetime">
						2 Jan 2009, 19:18					</div>
				</div>
				<div class="post-content content">
					<p>Ok, I see...</p><p>Does<br />&nbsp; driver=nl80211<br />&nbsp; interface=wlan0<br />&nbsp; ....<br />in the file &quot;/tmp/run/hostapd-wlan0.conf&quot; mean b43 chipset?</p><p>Would either be &quot;Gigabyte GN-WI01HT MINI PCI with Atheros AR5006XS (AR5414)&quot;<br />or &quot;GigaByte GN-WIAG02 Mini PCI with Atheros AR2414, AR5005GS&quot; a good choice?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78910">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">oxo</div>
					<div class="post-datetime">
						3 Jan 2009, 11:28					</div>
				</div>
				<div class="post-content content">
					<p>Why no just download the stable wifi 2.4<br />everything works fine ...</p><p>EDIT:&nbsp; <br />Neither of my 2 ASUS WL 500gP (V1, Broadcom 4318 WLAN) liked the 2.6 but I will be trying again (not for any other reason than &quot;it was there&quot; )</p><p>Linux Kernel 2.4 Or 2.6 In Embedded System? @ <a href="http://developers.slashdot.org/article.pl?sid=09/01/04/0044235">http://developers.slashdot.org/article. … 04/0044235</a><br />- as to it is relavent on an OpenWrt &quot;connect me to internet via wireless as that is all I want&quot; system is unknown.</p>											<p class="post-edited">(Last edited by <strong>oxo</strong> on 4 Jan 2009, 20:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78936">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">amain</div>
					<div class="post-datetime">
						4 Jan 2009, 01:59					</div>
				</div>
				<div class="post-content content">
					<p>The page <a href="http://linuxwireless.org/en/users/Drivers/b43">http://linuxwireless.org/en/users/Drivers/b43</a> writes that BCM4318 hardware is supported with the b43 driver. Not sure if it&#039;s already working in OpenWrt. I have the WL-500GD (Broadcom BCM4306) and it works quite well on kamikaze 8.09 RC1 with 2.6.25.17 kernel. </p><p>b43 uses the nl80211 interface which is the new userspace/ kernelspace communication interface for 80211(wireless). See <a href="http://linuxwireless.org/en/developers/Documentation/nl80211">http://linuxwireless.org/en/developers/ … on/nl80211</a></p><p>hostapd config file I&#039;m using:<br />driver=nl80211<br />interface=wlan0<br />bridge=lanbridge<br />ssid=Angel<br />hw_mode=g<br />channel=5<br />wpa=2<br />wpa_passphrase=BLA<br />wpa_key_mgmt=WPA-PSK<br />wpa_pairwise=TKIP CCMP</p><p>angel:/etc/hostapd# hostapd ./wpa.conf <br />Configuration file: ./wpa.conf<br />Failed to update rate sets in kernel module<br />Mode: IEEE 802.11g&nbsp; Channel: 5&nbsp; Frequency: 2432 MHz<br />Failed to set CTS protect in kernel driver<br />Failed to set Short Slot Time option in kernel driver<br />Could not set preamble for kernel driver<br />Using interface wlan0 with hwaddr 00:11:d8:70:1b:59 and ssid &#039;Angel&#039;<br />Failed to set CTS protect in kernel driver<br />Failed to set Short Slot Time option in kernel driver<br />Could not set preamble for kernel driver</p><p>Show lots of errors. But it works. See output of iwconfig:</p><p>wmaster0&nbsp; no wireless extensions.</p><p>wlan0&nbsp; &nbsp; &nbsp;IEEE 802.11bg&nbsp; ESSID:&quot;Angel&quot;&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Mode:Master&nbsp; Frequency:2.432 GHz&nbsp; Tx-Power=27 dBm&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Retry min limit:7&nbsp; &nbsp;RTS thr:off&nbsp; &nbsp;Fragment thr=2352 B&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Encryption key: ( HIDDEN :-) )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Power Management:off<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Link Quality:0&nbsp; Signal level:0&nbsp; Noise level:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rx invalid nwid:0&nbsp; Rx invalid crypt:0&nbsp; Rx invalid frag:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Tx excessive retries:0&nbsp; Invalid misc:0&nbsp; &nbsp;Missed beacon:0</p><p>mon.wlan0&nbsp; IEEE 802.11bg&nbsp; Mode:Monitor&nbsp; Frequency:2.432 GHz&nbsp; Tx-Power=27 dBm&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Retry min limit:7&nbsp; &nbsp;RTS thr:off&nbsp; &nbsp;Fragment thr=2352 B&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Encryption key:off<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Power Management:off<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Link Quality:0&nbsp; Signal level:0&nbsp; Noise level:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rx invalid nwid:0&nbsp; Rx invalid crypt:0&nbsp; Rx invalid frag:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Tx excessive retries:0&nbsp; Invalid misc:0&nbsp; &nbsp;Missed beacon:0</p><p>dmesg output:<br />b43-phy1: Broadcom 4306 WLAN found<br />b43-phy1 debug: Found PHY: Analog 2, Type 2, Revision 2<br />b43-phy1 debug: Found Radio: Manuf 0x17F, Version 0x2050, Revision 2<br />b43-phy1 debug: DebugFS (CONFIG_DEBUG_FS) not enabled in kernel config<br />phy1: Selected rate control algorithm &#039;pid&#039;<br />Broadcom 43xx driver loaded [ Features: NLR, Firmware-ID: FW13 ]<br />input: b43-phy1 as /devices/virtual/input/input5<br />b43-phy1: Loading firmware version 410.2160 (2007-05-26 15:32:10)<br />b43-phy1 debug: Chip initialized<br />b43-phy1 debug: 30-bit DMA initialized<br />Registered led device: b43-phy1::radio<br />b43-phy1 debug: Wireless interface started<br />b43-phy1 debug: Adding Interface type 1<br />b43-phy1 debug: Set beacon interval to 100<br />b43-phy1 debug: Set beacon interval to 100<br />b43-phy1 debug: Updated beacon template at 0x68<br />b43-phy1 debug: Updated beacon template at 0x468<br />b43-phy1 debug: Updated beacon template at 0x468<br />b43-phy1 debug: Set beacon interval to 100<br />b43-phy1 debug: Updated beacon template at 0x468<br />wlan0: no IPv6 routers present<br />b43-phy1 debug: Using hardware based encryption for keyidx: 0, mac: 00:0c:41:2f:0f:d1</p><p>Don&#039;t be surprised to see a lot of &quot;b43-phy0 ERROR: PHY transmission error&quot; in dmesg. A<br /> tip: it seems to me when I run hostapd with -dd debug, there are less to no problems!!! </p><p>See also: <a href="http://blog.zoomeren.nl/2008/12/16/asus-wl500gd-kernel-26/">http://blog.zoomeren.nl/2008/12/16/asus … kernel-26/</a></p>											<p class="post-edited">(Last edited by <strong>amain</strong> on 4 Jan 2009, 04:09)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78964">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">senser</div>
					<div class="post-datetime">
						4 Jan 2009, 20:52					</div>
				</div>
				<div class="post-content content">
					<p>Hello amain,</p><p>What&#039;s the performance on your BCM4306 - I have Asus WL500GP with BCM4318 and maximum wireless speed is 200-300K (with 2.4 kernel speed was 1Mb and more)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79009">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">ath</div>
					<div class="post-datetime">
						5 Jan 2009, 15:43					</div>
				</div>
				<div class="post-content content">
					<p>amain: I too have a WL-500g Deluxe, is the wireless connection stable for you with the b43 driver? Mine drops off randomly (more often when there is a significant data transfer in progress). I&#039;ve tried every wl firmware release available and even a self-compiled latest release of wireless-compat-old but it still shows the same problem.<br />The wireless interface can be recovered with a simple &quot;wifi up&quot; when it locks up, though.</p><p>senser: on my BCM4306 (the one integrated in the WL-500gd) the b43 driver can reach (pretty close to the AP) a maximum speed of 2.0 - 2.10 MB/s, which is close (or even slightly faster) to what the wl.o 2.4 binary driver could reach.<br />Really, if not for the random wireless lockups the b43 driver would work perfectly on this router.</p><p>Well, maybe the work towards 2.6.28 on bcrm47xx (<a href="https://dev.openwrt.org/ticket/4395">https://dev.openwrt.org/ticket/4395</a>) will help us, but I can&#039;t test it at the moment since I really need USB support on that router.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79015">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">CraigB</div>
					<div class="post-datetime">
						5 Jan 2009, 16:32					</div>
				</div>
				<div class="post-content content">
					<p>A timely discussion....</p><p>Part of my spring cleaning/New Years resolution was to put the latest Kamikaze onto a spare WL500gP (I already have a nice stable one running White Russian). I would welcome advice on whether I should go straight for 8.09 with a 2.4 kernel or if there&#039;s a case for 2.6 ?</p><p>&lt;edit&gt; Just ordered a TL-WN560G (Atheros card) so I can use 2.6 &lt;/edit&gt;</p>											<p class="post-edited">(Last edited by <strong>CraigB</strong> on 5 Jan 2009, 17:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79032">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">senser</div>
					<div class="post-datetime">
						5 Jan 2009, 21:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ath wrote:</cite><blockquote><p>Well, maybe the work towards 2.6.28 on bcrm47xx (<a href="https://dev.openwrt.org/ticket/4395">https://dev.openwrt.org/ticket/4395</a>) will help us, but I can&#039;t test it at the moment since I really need USB support on that router.</p></blockquote></div><p>I&#039;ll give last chance on my BCM4318 waiting for 2.6.28 patches to support USB (I really need it too) and if wireless speed is bad again I&#039;m going to replace the card with Atheros one</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79035">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">ray72ro</div>
					<div class="post-datetime">
						5 Jan 2009, 21:17					</div>
				</div>
				<div class="post-content content">
					<p>I have tried in many ways to configure a WL-500GP v1 with WLAN and I have only one possibility OpenWrt WhiteRussian RC6 with wpa_supplicant. I have tried hostapd, but unsuccesfull. My problem is that I have to use a supplicant, since my ISP is providing Internet over WLAN with EAP, PEAP, TKIP and MSCHAPv2. I have the original hardware i.e. not changed to Atheros wifi. I would like to have a Kamikaze or at least modified DD-WRT. Could you help, please?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79056">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">amain</div>
					<div class="post-datetime">
						5 Jan 2009, 23:48					</div>
				</div>
				<div class="post-content content">
					<p>@ath: I too experience stability issues(BCM4306) with I suppose the b43 driver. I&#039;m currently trying different ways to see how to minimise or even eliminate them. But the randomness does not make it easier. Now tying with kernel 2.6.28 and hostapd 0.6.6 (instead of 0.6.4) ( indeed with patches from <a href="https://dev.openwrt.org/ticket/4395">https://dev.openwrt.org/ticket/4395</a> ) and with the latest b43(01 01 2009) driver compiled using openwrt svn trunk.&nbsp; Want to run a couple of days with this before saying anything about the performance. Cool though, is that the Wireless LED works :-)</p><p>General advice: don&#039;t use Kamikaze 8.09 RC/b43 yet for WL-500GD but stick with kernel 2.4</p><p>@senser: 1 meter (to close) from router indeed ~2MB/s:<br />xenbian:~# iperf -s<br />------------------------------------------------------------<br />Server listening on TCP port 5001<br />TCP window size: 85.3 KByte (default)<br />------------------------------------------------------------<br />[&nbsp; 4] local 10.0.2.2 port 5001 connected with 10.0.2.155 port 47347<br />[ ID] Interval&nbsp; &nbsp; &nbsp; &nbsp;Transfer&nbsp; &nbsp; &nbsp;Bandwidth<br />[&nbsp; 4]&nbsp; 0.0-10.5 sec&nbsp; 20.4 MBytes&nbsp; 16.3 Mbits/sec<br />[&nbsp; 5] local 10.0.2.2 port 5001 connected with 10.0.2.155 port 47348<br />[&nbsp; 5]&nbsp; 0.0-10.3 sec&nbsp; 21.2 MBytes&nbsp; 17.4 Mbits/sec</p><p>USB(BCM4306): compiling usb_storage and EHCI into kernel works without a problem. So USB-Disks/Stick work. But connecting another USB device like a scanner or WebCam does not work in 2.6.25 and also not in 2.6.28 kernel.</p>											<p class="post-edited">(Last edited by <strong>amain</strong> on 5 Jan 2009, 23:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79064">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">ath</div>
					<div class="post-datetime">
						6 Jan 2009, 00:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>amain wrote:</cite><blockquote><p>@ath: I too experience stability issues(BCM4306) with I suppose the b43 driver. I&#039;m currently trying different ways to see how to minimise or even eliminate them. But the randomness does not make it easier. Now tying with kernel 2.6.28 and hostapd 0.6.6 (instead of 0.6.4) ( indeed with patches from <a href="https://dev.openwrt.org/ticket/4395">https://dev.openwrt.org/ticket/4395</a> ) and with the latest b43(01 01 2009) driver compiled using openwrt svn trunk.&nbsp; Want to run a couple of days with this before saying anything about the performance. Cool though, is that the Wireless LED works :-)</p></blockquote></div><p>Great! Did you encounter any difficulty in getting 2.6.28 to run on the wl-500gd? b43 is still unstable or you were referring to 2.6.25?</p><div class="quotebox"><cite>amain wrote:</cite><blockquote><p>USB(BCM4306): compiling usb_storage and EHCI into kernel works without a problem. So USB-Disks/Stick work.</p></blockquote></div><p>Good to hear, I only need USB mass storage support (as usual the greatest flaw of the Deluxe is the only 4 MB of flash <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" />)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79151">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">amain</div>
					<div class="post-datetime">
						7 Jan 2009, 04:31					</div>
				</div>
				<div class="post-content content">
					<p>@ath: root on USB rocks :-) Unfortunately problems with b43 on both in .25 and .28. Randomly SSH/SCP sessions ( to the router) freeze or router freezes at all after a while - but possibly related to other stuff, because I&#039;m experimenting with a lot of new stuff here. Of course I&#039;m aware of the fact that it&#039;s not wise to have a lot of parameters but I&#039;m to lazy and impatient to test one thing at a time :-)&nbsp; Also lot of b43-phy0 ERROR: PHY transmission error in dmesg. Which versions of kernel etc have you been testing so far?</p><p>btw: compiling USB: make sure that you exclude CONFIG_USB_EHCI_HCD_SSB and CONFIG_USB_OHCI_HCD_SSB from the target/linux/brcm4700/config-2.6.28 file</p>											<p class="post-edited">(Last edited by <strong>amain</strong> on 7 Jan 2009, 13:23)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>