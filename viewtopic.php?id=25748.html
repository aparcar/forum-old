<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> ld-uClibc.so.0</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 10 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p113390">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">routednbooted</div>
					<div class="post-datetime">
						19 Jul 2010, 17:50					</div>
				</div>
				<div class="post-content content">
					<p>/backfire/staging_dir/toolchain-mips_gcc-4.3.3+cs_uClibc-0.9.30.1/usr/mips-openwrt-linux-uclibc/bin/ld: warning: ld-uClibc.so.0, needed by /mnt/netshare/backfire/staging_dir/toolchain-mips_gcc-4.3.3+cs_uClibc-0.9.30.1/usr/mips-openwrt-linux-uclibc/lib/libc.so, not found (try using -rpath or -rpath-link)</p><p>where is ld-uClibc.so.0 supposed to live? so i can make at least a link to it.</p><p>thanks.</p><p>ant@debian:/mnt/netshare/backfire$ find|grep ld-uClibc.so.0<br />./build_dir/toolchain-mips_gcc-4.3.3+cs_uClibc-0.9.30.1/uClibc-0.9.30.1/lib/ld-uClibc.so.0<br />./staging_dir/toolchain-mips_gcc-4.3.3+cs_uClibc-0.9.30.1/lib/ld-uClibc.so.0<br />./staging_dir/toolchain-mips_gcc-4.3.3+cs_uClibc-0.9.30.1/usr/lib/ld-uClibc.so.0</p>											<p class="post-edited">(Last edited by <strong>routednbooted</strong> on 19 Jul 2010, 17:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p113397">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">routednbooted</div>
					<div class="post-datetime">
						19 Jul 2010, 19:12					</div>
				</div>
				<div class="post-content content">
					<p>Ok, i&#039;ve now configured to use my own personal toolchain... that works... properly. but with buildroot, who knows...</p><p>There should be a precompiled toolchain for at least x86 computers. especially with how easy it is to break gcc builds. the only reason to ever compile from source is if you have something really exotic.</p><p>and its just broke again, well done boys.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119525">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">jjdive</div>
					<div class="post-datetime">
						22 Oct 2010, 16:31					</div>
				</div>
				<div class="post-content content">
					<p>Hey routednbooted!, can you please tell me how did you do that? i&#039;m getting the same error while trying to compile a programa wich access the memory directly, but i haven&#039;t been able to solve this <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" />:(:(. I&#039;m working with a especial version of the Ben NanoNote, it&#039;s called Sie, and is intended for hardware and electronics hacking.</p><p>There is special options to compile my toolchain and avoid this problem? Thank you in advance</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119532">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						22 Oct 2010, 18:08					</div>
				</div>
				<div class="post-content content">
					<p>This error usually happens if you move the toolchain after compilation. The gcc and other utils have absolute paths coded in which will fail if the toolchain is moved.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119542">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">jjdive</div>
					<div class="post-datetime">
						22 Oct 2010, 21:17					</div>
				</div>
				<div class="post-content content">
					<p>Hi jow!, you&#039;re right, but i haven&#039;t move my toolchain after the (loooooong) compilation. Maybe the problem is due to that i&#039;m trying to compile source files that resides in a different folder. The first problem i got was: <br /></p><div class="codebox"><pre><code>../mipsel-openwrt-linux-uclibc/bin/ld: cannot find -lgcc_s</code></pre></div><p>And i solved it with an LDFLAG: <br /></p><div class="codebox"><pre><code>-lgcc_s -L/home/juanjo/openwrt-xburst/build_dir/toolchain-mipsel_gcc-4.3.3+cs_uClibc-0.9.32/gcc-4.3.3-final/mipsel-openwrt-linux-uclibc/libgcc</code></pre></div><p>.<br />Now what i get is:<br /></p><div class="codebox"><pre><code>/home/juanjo/openwrt-xburst/staging_dir/toolchain-mipsel_gcc-4.3.3+cs_uClibc-0.9.32/usr/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/4.3.3/../../../../mipsel-openwrt-linux-uclibc/bin/ld: warning: ld-uClibc.so.0, needed by /home/juanjo/openwrt-xburst/staging_dir/toolchain-mipsel_gcc-4.3.3+cs_uClibc-0.9.32/usr/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/4.3.3/../../../../mipsel-openwrt-linux-uclibc/lib/libc.so, not found (try using -rpath or -rpath-link)</code></pre></div><p>So i don&#039;t know where the linker is looking for ld-uClibc.so.0 because i have many copies of that file in the whole toolchain. When i try to put -rpath-link &quot;/home/juanjo/NanoNote/openwrt-xburst/staging_dir/toolchain-mipsel_gcc-4.3.3+cs_uClibc-0.9.32/lib/&quot; whether in LDFLAGS or CCFLAGS (in this case it make not effect), i get this:<br /></p><div class="codebox"><pre><code>mipsel-openwrt-linux-gcc: unrecognized option &#039;-rpath-link&#039;</code></pre></div><p>this is the makefile i have:</p><div class="codebox"><pre><code>CC  = mipsel-openwrt-linux-gcc
all: ram_test

DEBUG = -O3 -g0

COMMON_SOURCES =  ram_test.c jz47xx_gpio.c jz47xx_mmap.c

H_SOURCES = jz47xx_gpio.h jz47xx_mmap.h

INCLUDE = -I.

WARNINGS= -Wcast-align -Wpacked -Wpadded -Wall

CCFLAGS = ${INCLUDE} ${DEBUG} ${WARNINGS} 

LDFLAGS = -lgcc_s -L/home/juanjo/NanoNote/openwrt-xburst/build_dir/toolchain-mipsel_gcc-4.3.3+cs_uClibc-0.9.32/gcc-4.3.3-final/mipsel-openwrt-linux-uclibc/libgcc

COMMON_OBJECTS = $(COMMON_SOURCES:.cpp=.o)


ADCw        : $(COMMON_OBJECTS) ram_test.o
    $(CC) $(LDFLAGS) $(COMMON_OBJECTS) ram_test.o -o ram_test


.c.o:
    $(CC) -c $(CCFLAGS) $&lt; -o $@

clean: 
    rm -f *.o ram_test ${EXEC} *~ ram_test

indent:
    indent -bad -bap -nbc -bl -nce -i2 --no-tabs --line-length120 $(COMMON_SOURCES) $(H_SOURCES)</code></pre></div><p>Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119555">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						23 Oct 2010, 00:07					</div>
				</div>
				<div class="post-content content">
					<p>/home/juanjo/openwrt-xburst/ != /home/juanjo/NanoNote/openwrt-xburst/</p><p>Looks to me like you did move it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119562">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">jjdive</div>
					<div class="post-datetime">
						23 Oct 2010, 04:31					</div>
				</div>
				<div class="post-content content">
					<p>Nop!, it was just an edition i did when doing the post, sorry about that. But don&#039;t worry, i solved this by myself, after a long reading, y write this parameter for LDFLAGS:<br /></p><div class="codebox"><pre><code>-B /home/juanjo/NanoNote/openwrt-xburst/build_dir/toolchain-mipsel_gcc-4.3.3+cs_uClibc-0.9.32/uClibc-0.9.32/lib</code></pre></div><p>and after do a make, it works quite right.</p><p>Thanks for all the responses, i hope this info will be helpful for other people. <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" />:D:D</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144937">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">piqard</div>
					<div class="post-datetime">
						2 Oct 2011, 04:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jow wrote:</cite><blockquote><p>This error usually happens if you move the toolchain after compilation. The gcc and other utils have absolute paths coded in which will fail if the toolchain is moved.</p></blockquote></div><p>Exactly that&#039;s the case when I download the precompiled toolchain. I wish there would be an easy way to fix this instead of compiling my own sdk or changing my project Makefile.</p><p>Anyways, I&#039;d like to share my solution to this.</p><p>./package/myproject/src/Makefile:<br /></p><div class="codebox"><pre><code>#Makefile introduction...
ifdef STAGING_DIR
LDFLAGS+=-rpath-link $(shell find $(STAGING_DIR) -name ld-uClibc.so.0)
endif
...</code></pre></div><p>this doesn&#039;t interfere with building outside the SDK. Better solutions are very welcome.</p><p><strong>EDIT:</strong><br />I decided to move my changes to ./package/myproject/Makefile. This seems to be the better place since it doesn&#039;t introduce any changes to my original project Makefile<br /></p><div class="codebox"><pre><code>#
# See /LICENSE for more information.
#

include $(TOPDIR)/rules.mk

TARGET_LDFLAGS+=-rpath-link $(shell find $(STAGING_DIR) -name ld-uClibc.so.0)

PKG_NAME:=myproject
...</code></pre></div>											<p class="post-edited">(Last edited by <strong>piqard</strong> on 2 Oct 2011, 05:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144946">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						2 Oct 2011, 12:45					</div>
				</div>
				<div class="post-content content">
					<p>Look to me, like some stuff from here belongs into <a href="http://wiki.openwrt.org/doc/techref/buildroot">OpenWrt Buildroot - Technical Reference</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162974">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">hfmanson</div>
					<div class="post-datetime">
						2 Apr 2012, 10:57					</div>
				</div>
				<div class="post-content content">
					<p>I had the same problem with a ar71xx OpenWrt SDK and I patched rules.mk by adding&nbsp; -Wl,-rpath=$(TOOLCHAIN_DIR)/lib to TARGET_LDFLAGS:<br />replace<br /></p><div class="codebox"><pre><code>    TARGET_LDFLAGS+= -L$(TOOLCHAIN_DIR)/usr/lib -L$(TOOLCHAIN_DIR)/lib</code></pre></div><p>with<br /></p><div class="codebox"><pre><code>    TARGET_LDFLAGS+= -L$(TOOLCHAIN_DIR)/usr/lib -L$(TOOLCHAIN_DIR)/lib -Wl,-rpath=$(TOOLCHAIN_DIR)/lib</code></pre></div>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>