<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> static ip with dnsmasq</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 13 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p2387">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">xiux99</div>
					<div class="post-datetime">
						2 Oct 2004, 12:37					</div>
				</div>
				<div class="post-content content">
					<p>this is a quick guide to use dnsmasq&#039;s dhcp server to hand out static ip addresses based on mac or hostname.</p><p>for example if you have a laptop and you alternate between wireless and wired then you want it to get its ip based on hostname.</p><p>by default dnsmasq read /etc/dnsmasq.conf and that file overrides any command line options. </p><div class="codebox"><pre><code># file: /etc/dnsmasq.conf
#
# Interfaces to serve
#interface=lo
#interface=eth0
# Return this host as the MX mail handler
selfmx
localmx
#filter bogus win2k and winxp requests
filterwin2k
#dont take this one out or it will start 100 or so  dnsmasqs
no-daemon
#this will make it read /etc/ethers
read-ethers
#user=root
# DHCP range to handle out with a 48 hour lease.
#dhcp-range=192.168.10.0,192.168.10.20,192.168.10.200,255.255.255.0,48h
#only give out addresses to macs or hostnames in the list
dhcp-range=192.168.10.0,static,static,255.255.255.0,48h

# dnsmasq.leases is a plain text file 
dhcp-leasefile=/tmp/dnsmasq.leases

#these are set by default to the machine running dnsmasq
#dhcp-option=dns,192.168.10.1
#dhcp-option=subnet,255.255.255.0
#dhcp-option=router,192.168.10.1


domain=millernet.lnx
#
# Static DHCP hosts
#example: dhcp-host=00:03:1b:00:15:5a,netdj850,infinite
#example:dhcp-host=192.168.10.20,johnscomuter</code></pre></div><p>/etc/ethers is just &lt;mac&gt;&lt;space or tab&gt;&lt;ip&gt;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2389">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">sam</div>
					<div class="post-datetime">
						2 Oct 2004, 14:10					</div>
				</div>
				<div class="post-content content">
					<p>alternatively, you can set up /etc/ethers using</p><p>&lt;mac&gt;:whitespace:&lt;hostname&gt;</p><p>and then setup your /etc/hosts file to map hostnames to ips.</p><p>this will not only assign the correct ip to each mac, but should also &quot;do the right thing&quot; as far as dns goes.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>