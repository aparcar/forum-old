<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> programmable duty cycle signal on LED; how ?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 25 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p23561">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">doddel</div>
					<div class="post-datetime">
						24 Mar 2006, 23:50					</div>
				</div>
				<div class="post-content content">
					<p>would like to turn a wrt54g into a simple signal strength meter with analog indicator. Would need a little c routine that makes a square wave on one of the LED outputs of a few hundred Herz with programmable duty cycle, e.g. 100 steps or more from 0 to 100% duty to get enough accuracy. Are there timer functions in the wrt54g that I could use from C to achieve this ?<br />If e.g. using the schedule_timeout function, the problem will exist that the resolution is limited to one jiffie, i.1. 10 ms. So would like to use a microsecond timer, but don know whether and how it can be accessed.</p>											<p class="post-edited">(Last edited by <strong>doddel</strong> on 25 Mar 2006, 13:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p23600">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">florian_</div>
					<div class="post-datetime">
						25 Mar 2006, 15:16					</div>
				</div>
				<div class="post-content content">
					<p>Well you have the sleep, usleep and nanosleep standard C functions, but I am not quite sure your eye can appreciate the difference between microseconds and nanoseconds since the max resolution is 10ms if I recall.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p23608">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">doddel</div>
					<div class="post-datetime">
						25 Mar 2006, 19:13					</div>
				</div>
				<div class="post-content content">
					<p>thanks for the suggestions. Do those sleep functions that you suggest stop execution of other processes ? Would like to work with<br />1) fixed interrupts that occur e.g. each 10 ms, making the signal go high and defining a sufficiently high repetition rate that the meter&#039;s needle will stand still on the average DC value, and<br />2) an interrupt at n*100 usec after the first interrupt that returns the led voltage to zero, in which n is the duty cycle 1- 100.<br />There is a high resolution timer at 108 MHz that is used to calibrate the system&#039;s timimg at boot time but don&#039;t know whether a user application has access to that. &#039;Googled&#039; on the subject and found some function definitions in timer.c but no application examples so far in the microsecond realm.</p><p>The execution of other processes should not be hindered by the above as the idea is to translate the reported radio signal strenght into the meter reading and do measurements of the rssi on a continuous basis, allowing antenna alignment while looking at the meter for best reception.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>