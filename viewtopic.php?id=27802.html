<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Is this possible??</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p123620">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">MystBoy</div>
					<div class="post-datetime">
						21 Dec 2010, 12:56					</div>
				</div>
				<div class="post-content content">
					<p>Hey I&#039;m new to openWRT but ordered a router today (TP-LINK TL-WR741ND)!</p><p>as you can see it has 9 LEDs / serial connection / mod usb</p><p>Is it possible that i use it as a normal router with LuCI as web interface and make a second webserver or a subfolder in which i put my own &quot;webinterface&quot;? </p><p>my custom &quot;Webinterface&quot; should do following things (please tell me if it&#039;s possible)<br />-A button for WOL <br />-Switch the LEDs on and off<br />-Terminal for the serial port</p><p>it should still work as a normal router.</p><p>If you are interessted in the backgrounds:</p><p>i want to power on my pc from work to make a remote connection.<br />I need to access the leds, cause i desolder them an exchange them with optocupplers and put a relais after the optocupler to switch the lights in my room, water the flowers, ....<br />I want to conect a controller to the serial port for measuring temperature inside, outside, controll the central heating system, monitor if a window is open...</p><br /><br /><p>-----</p><br /><p>Later i thought of using the usb port for a webcam and take pictures every minute or something like that....</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123624">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">flux</div>
					<div class="post-datetime">
						21 Dec 2010, 13:50					</div>
				</div>
				<div class="post-content content">
					<p>so you ask if it is possible to start a second http server? yes it is possible</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123626">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">MystBoy</div>
					<div class="post-datetime">
						21 Dec 2010, 14:14					</div>
				</div>
				<div class="post-content content">
					<p>ok but is the http server a closed thing or can i get access to WOL serial ports and the leds via the webserver?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123627">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						21 Dec 2010, 14:21					</div>
				</div>
				<div class="post-content content">
					<p>Did I read this right? Are you going to water the flowers with your router?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123628">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						21 Dec 2010, 14:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>MystBoy wrote:</cite><blockquote><p>Is it possible that i use it as a normal router with LuCI as web interface and make a second webserver or a subfolder in which i put my own &quot;webinterface&quot;? </p><p>my custom &quot;Webinterface&quot; should do following things (please tell me if it&#039;s possible)<br />-A button for WOL <br />-Switch the LEDs on and off<br />-Terminal for the serial port</p><p>it should still work as a normal router.</p></blockquote></div><p>AFAIK, OpenWRT uses <a href="http://code.google.com/p/uhttpd-avr/">uhttpd</a> webserver that supports multiple document roots with an HTTP/HTTPS and addresses/ports capability. Currently, I have my Seagate <a href="http://www.seagate.com/www/en-us/products/network_storage/freeagent_dockstar">DockStar</a> device flashed with a self-built OpenWRT firmware and its uhttpd is configured to serve several webservers, i.e. LuCI, <a href="http://fusionpbx.com">FusionPBX</a>, <a href="http://www.2600hz.org">BlueBox</a> (formerly known as <a href="http://freepbx.com">FreePBX</a> v3).</p><div class="quotebox"><blockquote><p>If you are interessted in the backgrounds:</p><p>i want to power on my pc from work to make a remote connection.<br />I need to access the leds, cause i desolder them an exchange them with optocupplers and put a relais after the optocupler to switch the lights in my room, water the flowers, ....<br />I want to conect a controller to the serial port for measuring temperature inside, outside, controll the central heating system, monitor if a window is open...</p><br /><br /><p>-----</p><br /><p>Later i thought of using the usb port for a webcam and take pictures every minute or something like that....</p></blockquote></div><p>Wow. That is a whole lot of projects! I am interested in your <em>water the flowers</em> project, except through a USB port. Can you share this here? Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123629">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">MystBoy</div>
					<div class="post-datetime">
						21 Dec 2010, 14:34					</div>
				</div>
				<div class="post-content content">
					<p>yes i have an electronic folwer water machine with a timer, but it needs much power when it is in stand by so i want to switch it on and off via my router.<br />The hardware part is very simple:<br />instead of a led you put an Opto-isolator (basically it&#039;s a led with a light sensor in one packing) on the sensor side you take 2 AA Batteries and a relay so you have a second circut which is isolated from the router. you should add one diode after the relais, cause the power form the coil in the relais would destroy the opto-isolator when you switch it off. At least you can swicht anything you want with the output from the relais. make sure your relais can stand the power you want to switch.</p><p>i think of this router as a home automation platform with a network conection.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123630">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">MystBoy</div>
					<div class="post-datetime">
						21 Dec 2010, 14:45					</div>
				</div>
				<div class="post-content content">
					<p>i&#039;m not watering the flowers via usb i repurpose a led...<br />the system i have is similar to this<br /><a href="http://www.amazon.de/Gardena-1266-20-Urlaubsbew%C3%A4sserung-mit-Vorratsbeh%C3%A4lter/dp/B0001E3S3G/ref=sr_1_5?ie=UTF8&amp;qid=1292935088&amp;sr=8-5">http://www.amazon.de/Gardena-1266-20-Ur … amp;sr=8-5</a><br />you even can&#039;t controll how often it waters your flowers. it waters 1h per 25h per default.</p><p>i only use it when i&#039;m not @ home for sometime. and with the router controll i can water my flowers from every where... </p><p>it would also look extrm cool if i sit in my room with my smartphone and water the flowers via my smartphones browser <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><br /><p>it&#039;s not a 100% usefull project it&#039;s more fun stuff</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123632">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">lizby</div>
					<div class="post-datetime">
						21 Dec 2010, 15:47					</div>
				</div>
				<div class="post-content content">
					<p>One way to do this is to connect a microprocessor via usb serial.&nbsp; My own project with openWrt, an Asus WL520gU, and a picaxe micro is shown here:</p><p><a href="http://www.picaxeforum.co.uk/showthread.php?t=14252">http://www.picaxeforum.co.uk/showthread.php?t=14252</a></p><p>The 520gU also has, as I recall, 2 gpios which can be repurposed--power and wifi.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123643">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">towolf</div>
					<div class="post-datetime">
						21 Dec 2010, 20:01					</div>
				</div>
				<div class="post-content content">
					<p>You have several cgi script options in the httpd. Lua is used officially because it’s light. You can also use shell scripts with the haserl package.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123666">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">dz0ny</div>
					<div class="post-datetime">
						22 Dec 2010, 04:08					</div>
				</div>
				<div class="post-content content">
					<p>controling with leds is possible, something like </p><div class="codebox"><pre><code>echo 1 &gt; /proc/diag/led/power</code></pre></div><p>I would &quot;rewrite&quot; kernel diag package, so the flowers won&#039;t be too much wattered, when there is traffic <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123667">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						22 Dec 2010, 04:19					</div>
				</div>
				<div class="post-content content">
					<p>Thanks <a href="https://forum.openwrt.org/profile.php?id=42884">MystBoy</a>.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123761">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						23 Dec 2010, 03:59					</div>
				</div>
				<div class="post-content content">
					<p>QSS and SYS LEDs can be directly controlled from LuCI &quot;full&quot;, there is a LED menu.<br />There is <a href="http://wiki.openwrt.org/doc/uci/wol">WoL</a> config, but can&#039;t find the web interface.</p><p>There is a web page for WoL but is on Webif² instead (Xwrt).<br /><span class="postimg"><img src="http://wiki.x-wrt.org/images/a/a0/Kp_network-wakeonlan.png" alt="http://wiki.x-wrt.org/images/a/a0/Kp_network-wakeonlan.png" /></span></p><p>For controlling appliances I prefer <a href="http://www.fairchildsemi.com/tree/optoelectronics/triac-driver-optocouplers/zero-crossing-triac-driver/">optoisolated triac driver</a> MOC3041 (240 VAC) or MOC3031 (120 VAC). In datasheet is the typical circuit with 2 SCR back to back, recommended, as TRIACs self-fire, misbehave and is more expensive than 2 SCR.</p><p>I still don&#039;t know if TTY could be used for other purpose than debug output. SPI mod and SPI temperature sensor instead? Well, USB to serial adapter will do.</p><p>EDIT:<br /><a href="https://forum.openwrt.org/viewtopic.php?id=19609">Serial port</a> related: <a href="https://forum.openwrt.org/viewtopic.php?id=23034">disable serial console completely</a>, <a href="https://forum.openwrt.org/viewtopic.php?id=26723">Controling electrical devices by serial port or usb with your router</a>.</p><p>Careful: All LEDs will briefly blink on (re)boot, SYS LED will blink uncontrolled during boot.</p>											<p class="post-edited">(Last edited by <strong>Nilfred</strong> on 23 Dec 2010, 04:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123768">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">mohnkhan</div>
					<div class="post-datetime">
						23 Dec 2010, 08:30					</div>
				</div>
				<div class="post-content content">
					<p>wow this is a nice and really useful idea..<br />just some ideas.... how about using a PPIO(may be 8255A clone or still better serial driven ) or something to avoid this LED blink..&nbsp; or finding a point on this router. which has a spare SPI or other bus capable pins...which we can scavenge out.... I have some spare routers to play with, for my application its simply controlling some lights and stuff. while am planning to use zig-bee or related wireless proto. </p><p>and thank for reminding .. that these blink while it reboots</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>