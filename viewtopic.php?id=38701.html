<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> gphoto2 segmentation error on TL-MR3020 and TL-MR3040</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 23 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p175004">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">TinY_One</div>
					<div class="post-datetime">
						16 Aug 2012, 01:56					</div>
				</div>
				<div class="post-content content">
					<p>Hi All,</p><p>Has anyone experienced segmentation error while gphoto2 is trying to detect the camera over usb? (e.g. ghoto2 --auto-detect, gphoto2 --capture-image)</p><p>Previously, I&#039;ve managed to run an older version gphoto2 in the TL-MR3020, but after my usb drive which contain my overlay broke down, I reinstalled gphoto2 2.4.11 and realized that it wouldn&#039;t work anymore.</p><p>Similar error was experience with the TL-MR3040 (also running ar71xx), I&#039;ve tried using the gphoto2 packages both from the repository and self compile but none of it works.</p><p>Does anyone has similar experience or have solutions to share?</p><p>Below is the log from gphoto2, I&#039;m using a Nikon D90 in my test.</p><div class="codebox"><pre><code>Camera Model &quot;Nikon DSC D90 (PTP mode)&quot;

root@OpenWrt:/# gphoto2 --debug --auto-detect
0.000032 main(2): ALWAYS INCLUDE THE FOLLOWING LINES WHEN SENDING DEBUG MESSAGES TO THE MAILING LIST:
0.001791 main(2): gphoto2 2.4.11
0.002080 main(2): gphoto2 has been compiled with the following options:
0.002347 main(2):  + mips-openwrt-linux-uclibc-gcc (C compiler used)
0.002612 main(2):  + popt (mandatory, for handling command-line parameters)
0.002879 main(2):  + exif (for displaying EXIF information)
0.003141 main(2):  + no cdk (for accessing configuration options)
0.003406 main(2):  + no aa (for displaying live previews)
0.003666 main(2):  + jpeg (for displaying live previews in JPEG format)
0.003931 main(2):  + readline (for easy navigation in the shell)
0.004221 main(2): libgphoto2 2.4.12
0.004511 main(2): libgphoto2 has been compiled with the following options:
0.004779 main(2):  + mips-openwrt-linux-uclibc-gcc (C compiler used)
0.005054 main(2):  + ltdl (for portable loading of camlibs)
0.005317 main(2):  + EXIF (for special handling of EXIF files)
0.005602 main(2): libgphoto2_port 0.8.0
0.005887 main(2): libgphoto2_port has been compiled with the following options:
0.006153 main(2):  + mips-openwrt-linux-uclibc-gcc (C compiler used)
0.006417 main(2):  + ltdl (for portable loading of camlibs)
0.006680 main(2):  + USB (libusb, for USB cameras)
0.006942 main(2):  + serial (for serial cameras)
0.007203 main(2):  + no resmgr (serial port access and locking)
0.007468 main(2):  + no ttylock (serial port locking)
0.007730 main(2):  + no lockdev (serial port locking)
0.007998 main(2): CAMLIBS env var not set, using compile-time default instead
0.008242 main(2): IOLIBS env var not set, using compile-time default instead
0.008750 setting/gphoto2-setting.c(2): Creating $HOME/.gphoto
0.009299 setting/gphoto2-setting.c(2): Can&#039;t open settings file for reading
0.009586 setting/gphoto2-setting.c(2): Loading settings from file &quot;/root/.gphoto/settings&quot;
0.009896 setting/gphoto2-setting.c(2): Can&#039;t open settings for reading
0.010190 setting/gphoto2-setting.c(2): Creating $HOME/.gphoto
0.010478 setting/gphoto2-setting.c(2): Can&#039;t open settings file for reading
0.010730 setting/gphoto2-setting.c(2): Loading settings from file &quot;/root/.gphoto/settings&quot;
0.011021 setting/gphoto2-setting.c(2): Can&#039;t open settings for reading
0.016220 gphoto2-port-info-list(2): Using ltdl to load io-drivers from &#039;/usr/lib/libgphoto2_port/0.8.0&#039;...
0.022596 gphoto2-port-info-list(2): Called for filename &#039;/usr/lib/libgphoto2_port/0.8.0/disk&#039;.
0.025001 gphoto2-port/disk(2): found fstab fsname /dev/sda1
0.025931 gphoto2-port/disk(2): found mtab fsname rootfs
0.026325 gphoto2-port/disk(2): found mtab fsname /dev/root
0.026625 gphoto2-port/disk(2): found mtab fsname proc
0.026891 gphoto2-port/disk(2): found mtab fsname sysfs
0.027154 gphoto2-port/disk(2): found mtab fsname tmpfs
0.027464 gphoto2-port/disk(2): found mtab fsname tmpfs
0.027789 gphoto2-port/disk(2): found mtab fsname devpts
0.028078 gphoto2-port/disk(2): found mtab fsname /dev/sda1
0.028379 gphoto2-port/disk(2): found mtab fsname overlayfs:/overlay
0.028676 gphoto2-port/disk(2): found mtab fsname debugfs
0.029003 gphoto2-port/disk(2): found mtab fsname none
0.029818 gphoto2-port-info-list(2): Could not load port driver list: &#039;Unspecified error&#039;.
0.030223 gphoto2-port-info-list(2): Called for filename &#039;/usr/lib/libgphoto2_port/0.8.0/ptpip&#039;.
0.033842 gphoto2-port-info-list(2): Loaded &#039;PTP/IP Connection&#039; (&#039;ptpip:&#039;) from &#039;/usr/lib/libgphoto2_port/0.8.0/ptpip&#039;.
0.041639 gphoto2-port-info-list(2): Loaded &#039;&#039; (&#039;^ptpip&#039;) from &#039;/usr/lib/libgphoto2_port/0.8.0/ptpip&#039;.
0.041999 gphoto2-port-info-list(2): Called for filename &#039;/usr/lib/libgphoto2_port/0.8.0/serial&#039;.
0.044938 gphoto2-port-info-list(2): Loaded &#039;Serial Port 0&#039; (&#039;serial:/dev/ttyS0&#039;) from &#039;/usr/lib/libgphoto2_port/0.8.0/serial&#039;.
0.045454 gphoto2-port-info-list(2): Loaded &#039;&#039; (&#039;^serial&#039;) from &#039;/usr/lib/libgphoto2_port/0.8.0/serial&#039;.
0.045792 gphoto2-port-info-list(2): Called for filename &#039;/usr/lib/libgphoto2_port/0.8.0/usb1&#039;.
0.057233 gphoto2-port-info-list(2): Loaded &#039;&#039; (&#039;^usb:&#039;) from &#039;/usr/lib/libgphoto2_port/0.8.0/usb1&#039;.
0.061769 gphoto2-port-info-list(2): Loaded &#039;Universal Serial Bus&#039; (&#039;usb:001,003&#039;) from &#039;/usr/lib/libgphoto2_port/0.8.0/usb1&#039;.
0.062128 gphoto2-port-info-list(2): Loaded &#039;Universal Serial Bus&#039; (&#039;usb:001,011&#039;) from &#039;/usr/lib/libgphoto2_port/0.8.0/usb1&#039;.
0.062485 gphoto2-port-info-list(2): Called for filename &#039;/usr/lib/libgphoto2_port/0.8.0/usbdiskdirect&#039;.
0.065350 gphoto2-port-info-list(2): Loaded &#039;USB Mass Storage direct IO&#039; (&#039;usbdiskdirect:/dev/sda&#039;) from &#039;/usr/lib/libgphoto2_port/0.8.0/usbdiskdirect&#039;.
0.065859 gphoto2-port-info-list(2): Called for filename &#039;/usr/lib/libgphoto2_port/0.8.0/usbscsi&#039;.
0.068000 gphoto2-port-info-list(2): Counting entries (9 available)...
0.068412 gphoto2-port-info-list(2): 5 regular entries available.
0.068662 gphoto2-port-info-list(2): Counting entries (9 available)...
0.068928 gphoto2-port-info-list(2): 5 regular entries available.
0.072437 gphoto2-abilities-list(2): Using ltdl to load camera libraries from &#039;/usr/lib/libgphoto2/2.4.12&#039;...
0.083681 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/adc65&#039;.
0.090460 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/agfa_cl20&#039;.
0.091878 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/aox&#039;.
0.092156 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/ax203&#039;.
0.092433 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/barbie&#039;.
0.092708 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/canon&#039;.
0.092983 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/casio_qv&#039;.
0.093258 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/clicksmart310&#039;.
0.093534 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/digigr8&#039;.
0.093809 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/digita&#039;.
0.094085 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/dimagev&#039;.
0.094360 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/dimera3500&#039;.
0.094637 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/directory&#039;.
0.094912 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/enigma13&#039;.
0.095189 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/fuji&#039;.
0.095464 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/gsmart300&#039;.
0.095738 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/hp215&#039;.
0.096013 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/iclick&#039;.
0.096289 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/jamcam&#039;.
0.096565 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/jd11&#039;.
0.096838 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/jl2005a&#039;.
0.097115 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/jl2005c&#039;.
0.097389 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/kodak_dc120&#039;.
0.097667 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/kodak_dc210&#039;.
0.097942 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/kodak_dc240&#039;.
0.098218 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/kodak_dc3200&#039;.
0.098494 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/kodak_ez200&#039;.
0.098768 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/konica&#039;.
0.099045 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/konica_qm150&#039;.
0.099321 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/largan&#039;.
0.099595 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/lg_gsm&#039;.
0.099872 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/mars&#039;.
0.100147 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/mustek&#039;.
0.100407 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/panasonic_coolshot&#039;.
0.100667 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/panasonic_dc1000&#039;.
0.100927 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/panasonic_dc1580&#039;.
0.101187 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/panasonic_l859&#039;.
0.104040 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/pccam300&#039;.
0.110032 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/pccam600&#039;.
0.112155 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/polaroid_pdc320&#039;.
0.112415 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/polaroid_pdc640&#039;.
0.112671 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/polaroid_pdc700&#039;.
0.112927 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/ptp2&#039;.
0.113180 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/ricoh&#039;.
0.113434 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/ricoh_g3&#039;.
0.113688 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/samsung&#039;.
0.113942 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/sierra&#039;.
0.114196 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/sipix_blink2&#039;.
0.114451 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/sipix_web2&#039;.
0.114708 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/smal&#039;.
0.114964 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/sonix&#039;.
0.115219 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/sony_dscf1&#039;.
0.115475 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/sony_dscf55&#039;.
0.115731 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/soundvision&#039;.
0.115985 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/spca50x&#039;.
0.116240 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/sq905&#039;.
0.116497 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/st2205&#039;.
0.116753 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/stv0674&#039;.
0.117006 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/stv0680&#039;.
0.117260 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/sx330z&#039;.
0.117515 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/topfield&#039;.
0.117770 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/toshiba_pdrm11&#039;.
0.118025 gphoto2-abilities-list(2): Found &#039;/usr/lib/libgphoto2/2.4.12/tp6801&#039;.
0.118378 gp-abilities-list(2): Found 63 camera drivers.
1.585610 gphoto2-port-info-list(2): Counting entries (9 available)...          
1.591521 gphoto2-port-info-list(2): 5 regular entries available.
1.591799 gphoto2-port(2): Creating new device...
1.592091 gphoto2-port-info-list(2): Getting info of entry 0 (9 available)...
1.593968 gphoto2-port(2): Setting settings...
1.594308 gphoto2-port-info-list(2): Getting info of entry 1 (9 available)...
1.596513 gphoto2-port(2): Setting timeout to 500 milliseconds...
1.596901 gphoto2-port(2): Setting settings...
1.597139 gphoto2-port-info-list(2): Getting info of entry 2 (9 available)...
1.603044 gphoto2-port(2): Setting timeout to 5000 milliseconds...
1.609166 gphoto2-port(2): Setting settings...
1.611675 libusb1(2): gp_port_usb_update(old int=0, conf=-1, alt=-1), (new int=0, conf=-1, alt=-1)
1.612248 gphoto2-abilities-list.c(1): Auto-detecting USB cameras...
Segmentation fault</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p176680">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">joky</div>
					<div class="post-datetime">
						2 Sep 2012, 14:53					</div>
				</div>
				<div class="post-content content">
					<p>same issue after updating MR3020 to r33288,..</p><p>Cameras used: Nikon D300, Canon EOS 1100D</p>											<p class="post-edited">(Last edited by <strong>joky</strong> on 2 Sep 2012, 14:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p176974">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">joky</div>
					<div class="post-datetime">
						5 Sep 2012, 16:49					</div>
				</div>
				<div class="post-content content">
					<p>downgraded to gphoto2 included in backfire (gphoto2 2.4.9) - works fine, but with some limitations of the old version.<br />Just download the precompiled packages here:<br /><a href="http://downloads.openwrt.org/backfire/10.03.1/ar71xx/packages/">http://downloads.openwrt.org/backfire/1 … /packages/</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p178497">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">joky</div>
					<div class="post-datetime">
						17 Sep 2012, 15:55					</div>
				</div>
				<div class="post-content content">
					<p>seems that gphoto2 should be compiled against libusb instead of libusb-1.0,...</p><p><a href="http://sourceforge.net/mailarchive/forum.php?set=custom&amp;viewmonth=&amp;viewday=&amp;forum_name=gphoto-devel&amp;style=nested&amp;max_rows=100&amp;submit=Change+View">http://sourceforge.net/mailarchive/foru … hange+View</a></p><div class="quotebox"><blockquote><p>Hi TinY,</p><p>you can fix the problem by using libusb instead of libusb-1.0. Try the <br />Openwrt-Makefile attached to this mail.</p><p>Deti</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p179048">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">&lt;Lork&gt;</div>
					<div class="post-datetime">
						22 Sep 2012, 14:17					</div>
				</div>
				<div class="post-content content">
					<p>Same problem here with WR842ND Tplink family....</p><p>I found a patch here: <a href="http://sourceforge.net/mailarchive/message.php?msg_id=29751984">http://sourceforge.net/mailarchive/mess … d=29751984</a></p><p>But i&#039;m a noob and i don&#039;t know how to install it..i have stored it in root dir but now?!?!?<br />Anyone can help me?? Please!<br />Thanx to all</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p179130">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">&lt;Lork&gt;</div>
					<div class="post-datetime">
						23 Sep 2012, 19:31					</div>
				</div>
				<div class="post-content content">
					<p>For those that have my problem...i solve it!!!</p><br /><p>1) Change repository: modify the /etc/opkg.conf (using WinSCP in example) and in the first line save the url in a local file and replace with this:<br /><a href="http://downloads.openwrt.org/backfire/10.03.1/ar71xx/packages/">http://downloads.openwrt.org/backfire/1 … /packages/</a></p><p>2) Connect via SSH and type: <br />opkg update<br />(wait)<br />opkg install gphoto2<br />(wait)<br />opkg install libgphoto2<br />(wait)<br />opkg install libphoto2-drivers</p><p>then return in opkg.conf and replace the url in the original form. Then</p><p>opkg update<br />(wait)<br />opkg install gphoto2</p><p>(and just this!!!!)</p><p>At the end of installation all goes in the true way!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p179207">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">&lt;Lork&gt;</div>
					<div class="post-datetime">
						24 Sep 2012, 13:19					</div>
				</div>
				<div class="post-content content">
					<p>Nothig to do: today i reinstalled any possible version of gphoto and router gives me always </p><p>Segmentation Fault</p><p>Test with <br />2.4.9-1 <br />2.4.9-2<br />2.4.11<br />2.5.0</p><p>It&#039;s very frustrating to see that resetting the router and do the same step of yesterday (gphoto worked until this morning) doesn&#039;t produce the same result. It&#039;s possible that there is an error in the repository????</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p179242">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">&lt;Lork&gt;</div>
					<div class="post-datetime">
						24 Sep 2012, 19:18					</div>
				</div>
				<div class="post-content content">
					<p>Finally solved.....i&#039;hope</p><p>opkg install pthread </p><p>and then i can use 2.5.0 that is faster than the old version!!!<br />Now ready for others problems (they are jey arrived: Could not change shutter speed Could not change aperture)</p><p>Hope it&#039;s usefull for others</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p201985">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">sjunk111</div>
					<div class="post-datetime">
						16 May 2013, 20:44					</div>
				</div>
				<div class="post-content content">
					<p>Help?&nbsp; NOOB to everything OpenWrt - Just got the TL-MR3040<br />Firmware: OpenWrt Attitude Adjustment 12.09-rc1 | Load: 0.01 0.10 0.07</p><p>Loaded packages - gphoto2 - 2.4.11-1, libgphoto2 - 2.4.11-1, libusb - 0.1.12-3<br />AFTER those loads - I only have 29% mem left 316 kb<br />COULD NOT Load Package:&nbsp; &nbsp; &nbsp; libgphoto2-drivers - 2.4.11-1<br />Got the following trying to load the libgphoto2-drivers</p><div class="quotebox"><blockquote><p>Installing libgphoto2-drivers (2.4.12-1) to root...<br />Collected errors:<br /> * verify_pkg_installable: Only have 316kb available on filesystem /overlay, pkg libgphoto2-drivers needs 594<br /> * opkg_install_cmd: Cannot install package libgphoto2-drivers.</p></blockquote></div><p>Below is gphoto debug results<br /></p><div class="quotebox"><blockquote><p>root@OpenWrt:~# gphoto2 --debug -auto-detect<br />0.000033 main(2): ALWAYS INCLUDE THE FOLLOWING LINES WHEN SENDING DEBUG MESSAGES TO THE MAILING LIST:<br />0.002116 main(2): gphoto2 2.4.11<br />0.002384 main(2): gphoto2 has been compiled with the following options:<br />0.002630 main(2):&nbsp; + ccache_cc (C compiler used)<br />0.002873 main(2):&nbsp; + popt (mandatory, for handling command-line parameters)<br />0.003123 main(2):&nbsp; + exif (for displaying EXIF information)<br />0.003368 main(2):&nbsp; + no cdk (for accessing configuration options)<br />0.003794 main(2):&nbsp; + no aa (for displaying live previews)<br />0.004039 main(2):&nbsp; + jpeg (for displaying live previews in JPEG format)<br />0.004286 main(2):&nbsp; + readline (for easy navigation in the shell)<br />0.004568 main(2): libgphoto2 2.4.12<br />0.004837 main(2): libgphoto2 has been compiled with the following options:<br />0.005083 main(2):&nbsp; + ccache_cc (C compiler used)<br />0.005490 main(2):&nbsp; + ltdl (for portable loading of camlibs)<br />0.005865 main(2):&nbsp; + EXIF (for special handling of EXIF files)<br />0.006143 main(2): libgphoto2_port 0.8.0<br />0.006538 main(2): libgphoto2_port has been compiled with the following options:<br />0.006788 main(2):&nbsp; + ccache_cc (C compiler used)<br />0.007067 main(2):&nbsp; + ltdl (for portable loading of camlibs)<br />0.007312 main(2):&nbsp; + USB (libusb, for USB cameras)<br />0.007554 main(2):&nbsp; + serial (for serial cameras)<br />0.007798 main(2):&nbsp; + no resmgr (serial port access and locking)<br />0.008041 main(2):&nbsp; + no ttylock (serial port locking)<br />0.008285 main(2):&nbsp; + no lockdev (serial port locking)<br />0.008535 main(2): CAMLIBS env var not set, using compile-time default instead<br />0.008763 main(2): IOLIBS env var not set, using compile-time default instead<br />0.009436 setting/gphoto2-setting.c(2): Creating $HOME/.gphoto<br />0.018399 setting/gphoto2-setting.c(2): Can&#039;t open settings file for reading<br />0.023867 setting/gphoto2-setting.c(2): Loading settings from file &quot;/root/.gphoto/settings&quot;<br />0.030191 setting/gphoto2-setting.c(2): Can&#039;t open settings for reading<br />0.035831 setting/gphoto2-setting.c(2): Creating $HOME/.gphoto<br />0.041124 setting/gphoto2-setting.c(2): Can&#039;t open settings file for reading<br />0.042031 setting/gphoto2-setting.c(2): Loading settings from file &quot;/root/.gphoto/settings&quot;<br />0.042339 setting/gphoto2-setting.c(2): Can&#039;t open settings for reading<br />0.043028 main(2): The user has not specified both a model and a port. Try to figure them out.<br />0.043397 gphoto2-port-info-list(2): Using ltdl to load io-drivers from &#039;/usr/lib/libgphoto2_port/0.8.0&#039;...<br />0.044681 gphoto2-port-info-list(2): Counting entries (0 available)...<br />0.045027 gphoto2-port-info-list(2): 0 regular entries available.<br />0.047391 gphoto2-abilities-list(2): Using ltdl to load camera libraries from &#039;/usr/lib/libgphoto2/2.4.12&#039;...<br />0.050044 gp-abilities-list(2): Found 0 camera drivers.<br />0.052315 gphoto2-port-info-list(2): Counting entries (0 available)...&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />0.052468 gphoto2-port-info-list(2): 0 regular entries available.<br />0.052575 gphoto2-port(2): Creating new device...<br />0.052767 gphoto2-port(2): Freeing port...<br />0.052917 setting/gphoto2-setting.c(2): Creating $HOME/.gphoto<br />0.053102 setting/gphoto2-setting.c(2): Can&#039;t open settings file for reading<br />0.053204 setting/gphoto2-setting.c(2): Loading settings from file &quot;/root/.gphoto/settings&quot;<br />0.053331 setting/gphoto2-setting.c(2): Can&#039;t open settings for reading<br />0.053427 setting/gphoto2-setting.c(2): Creating $HOME/.gphoto<br />0.053565 setting/gphoto2-setting.c(2): Can&#039;t open settings file for reading<br />0.053664 setting/gphoto2-setting.c(2): Loading settings from file &quot;/root/.gphoto/settings&quot;<br />0.053792 setting/gphoto2-setting.c(2): Can&#039;t open settings for reading<br />0.053933 gphoto2-camera(2): Initializing camera...<br />0.055854 gphoto2-camera(2): pinfo.type 0<br />0.055997 gphoto2-camera(2): pinfo.path <br />0.056093 gphoto2-camera(2): pinfo.name <br />0.056188 gphoto2-camera(2): Neither port nor model set. Trying auto-detection...<br />0.056330 gphoto2-abilities-list(2): Using ltdl to load camera libraries from &#039;/usr/lib/libgphoto2/2.4.12&#039;...<br />0.058649 gp-abilities-list(2): Found 0 camera drivers.<br />0.059721 gphoto2-port-info-list(2): Using ltdl to load io-drivers from &#039;/usr/lib/libgphoto2_port/0.8.0&#039;...<br />0.060067 gphoto2-port-info-list(2): Counting entries (0 available)...<br />0.060196 gphoto2-port-info-list(2): 0 regular entries available.<br />0.060305 gphoto2-port(2): Creating new device...<br />0.060417 gphoto2-port(2): Freeing port...<br />0.060563 context(0): Could not detect any camera</p><p>*** Error ***&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Could not detect any camera<br />*** Error (-105: &#039;Unknown model&#039;) ***&nbsp; &nbsp; &nbsp; &nbsp;</p><p>0.061099 gp-camera(2): Freeing camera...<br />0.061197 gphoto2-port(2): Freeing port...<br />0.061298 gphoto2-filesystem(2): resetting filesystem<br />0.061395 libgphoto2/gphoto2-filesys.c(2): Clearing fscache LRU list...<br />0.061490 libgphoto2/gphoto2-filesys.c(2): fscache LRU list already empty<br />0.061587 gphoto2-filesystem(2): Internally deleting all folders from &#039;/&#039;...<br />0.068144 gphoto2-filesystem(2): Lookup folder &#039;/&#039;...<br />0.072294 gphoto2-filesystem(2): Found! / is 0x60d2c8<br />0.072608 gphoto2-filesystem(2): Recurse delete folder 0x60d2c8//<br />root@OpenWrt:~# gphoto2 --list-ports<br />Devices found: 0</p></blockquote></div><p>Essentially - 1st step just want to at least get to the point where my Nikon camera is detected.&nbsp; Should I be using a different image - create my own?&nbsp; If so, what should the absolute minimum be?&nbsp; I am using a combo of Luci and command line.&nbsp; Luci to just get the router network setup.</p><p>Thanks in advance.</p>											<p class="post-edited">(Last edited by <strong>sjunk111</strong> on 16 May 2013, 20:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p201986">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">&lt;Lork&gt;</div>
					<div class="post-datetime">
						16 May 2013, 21:19					</div>
				</div>
				<div class="post-content content">
					<p>Hi!</p><p>I&#039;ve read just now..but i can understand that you can&#039;t install libgphoto2-drivers due to not enough free space on memory. So you need to use a usb external sotrage (it&#039;s not simple to install over it) or a router that have more free space..<br />Waiting for more expert answer!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p201991">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">joky</div>
					<div class="post-datetime">
						16 May 2013, 22:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>&lt;Lork&gt; wrote:</cite><blockquote><p>Waiting for more expert answer!</p></blockquote></div><p>So what exactly are you waiting for?<br />There are not many ways to install a software which exceed your available size on your router, computer,...</p><p>1.) Expand space<br />can be EASILY done via USB. As you&#039;re using a camera I assume you connect this to the router also via USB so you will need a Hub to connect both. I use that one:<br /><a href="http://www.delock.de/produkte/G_61724/merkmale.html?setLanguage=en">http://www.delock.de/produkte/G_61724/m … anguage=en</a></p><p>The only issue is to get an USB-Stick which is stable enough for your application. If you put it on your desk it doesn&#039;t matter, if you put it 100 miles away it does.</p><p>2.1) Save space - own image<br />You can cook your openwrt and exclude a lot of software you may not need and install gphoto2 instead. That option is not really easy but may suit if you want to setup more than one device.</p><p>2.2) Save space - drivers<br />The drivers-package includes more drivers than you may need. If you need the support for a canon dslr you just need to copy ptp2.so.</p><br /><br /><p>From my experience, Option 1 is the easiest for many situations, but the hub and the usb-stick doesn&#039;t really increase the stability of the system. On the other side you can install a lot of utilities on the USB-stick as you are not limited to the integrated flash and you can use the stick as swap.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p201993">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">sjunk111</div>
					<div class="post-datetime">
						16 May 2013, 22:39					</div>
				</div>
				<div class="post-content content">
					<p>Thank you for the quick replies.&nbsp; So am I to deduce, that one of the issues may simply be the drivers package?&nbsp; I guess I&#039;m wondering if there&#039;s a difference between detection of the device vs. driver needed to execute camera functions.&nbsp; As you may guess, I am really a NOOB and learning, the quick response in the community sure is appreciated.</p><p>I will try Option 1 (have to learn how to do that as well =p all fun though) first, to at least attempt to get to detection and camera control on my desk, then move to baking own packages.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p201994">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						16 May 2013, 22:43					</div>
				</div>
				<div class="post-content content">
					<p>You are searching for extroot (that keyword has been missing in this thread so far).</p><p><a href="http://wiki.openwrt.org/doc/howto/extroot">http://wiki.openwrt.org/doc/howto/extroot</a></p><p>Setup extroot, install whatever you want, be happy. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202549">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">joky</div>
					<div class="post-datetime">
						23 May 2013, 12:42					</div>
				</div>
				<div class="post-content content">
					<p>Hi Guys,</p><p>I just succeeded to compile a gphoto2 package using the latest gphoto2 version 2.5.2:<br /><a href="https://cloud.smart-mt.at/data/public/ad9dda.php#1">https://cloud.smart-mt.at/data/public/ad9dda.php#1</a> **UPDATED**</p><br /><p>If you need compiled packages let me know! I only included the most common ptp2-driver in this patch, if you need more just modify the libgphoto2-Makefile accordingly (eg. removing &quot;--with-camlibs=ptp2 \&quot; to build all drivers).</p><br /><p>bests</p>											<p class="post-edited">(Last edited by <strong>joky</strong> on 30 Jul 2013, 12:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202550">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">joky</div>
					<div class="post-datetime">
						23 May 2013, 12:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>&lt;Lork&gt; wrote:</cite><blockquote><p>Now ready for others problems (they are jey arrived: Could not change shutter speed Could not change aperture)</p></blockquote></div><p>Which camera do you use?<br />I usually only change some specific settings, eg. exposure-compensation or ISO and those work fine on Canon EOS cameras. But the features vary by each camera, most cameras doesn&#039;t support tethered capturing at all,..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p207656">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">jdietzphoto</div>
					<div class="post-datetime">
						21 Jul 2013, 01:21					</div>
				</div>
				<div class="post-content content">
					<p>Has anyone got a good compiled package, ideally of libgphoto2, libgphoto2-drivers and gphoto2 ideally from 2.5.2 source that work on these TP-Link routers? It seems this problem has been running around for awhile, but the Attitude Adjustment binaries don&#039;t work. I&#039;m a noob to OpenWRT and setting up the environments to cross compile this code. I&#039;m knee deep in it now, but if someone can help us out here and either post or submit binaries, it would be greatly appreciated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p207657">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						21 Jul 2013, 01:33					</div>
				</div>
				<div class="post-content content">
					<p>google those packages (all of them) &quot;gphoto2_2.5.0-1_ar71xx.ipk, libgphoto2_2.5.0-1_ar71xx.ipk, libgphoto2-drivers_2.5.0-1_ar71xx.ipk&quot;</p><p>one single source <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>oh, yes, only 2.5.0, but they&#039;re working for me on an EOS 400D and DIR-505 (formerly on a TL-MR3020, which also worked).</p>											<p class="post-edited">(Last edited by <strong>tmo26</strong> on 21 Jul 2013, 01:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p207693">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">jdietzphoto</div>
					<div class="post-datetime">
						21 Jul 2013, 19:05					</div>
				</div>
				<div class="post-content content">
					<p>Ah, Herzlichen Dank!</p><p>I suppose in my searches prior I wasn&#039;t looking hard enough or in the right way. It took a search on an individual package name to find them. They are working now just as described and while I still want to get the environment set up to cross compile, (for gphotofs) it&#039;s not a necessity now.</p><p>Also it was good to see the remote camera setup on foto-webcam,</p><p>Thanks again!</p>											<p class="post-edited">(Last edited by <strong>jdietzphoto</strong> on 21 Jul 2013, 19:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208405">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">&lt;Lork&gt;</div>
					<div class="post-datetime">
						29 Jul 2013, 13:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>joky wrote:</cite><blockquote><p>Hi Guys,</p><p>I just succeeded to compile a gphoto2 package using the latest gphoto2 version 2.5.2:<br /><a href="https://cloud.smart-mt.at/public.php?service=files&amp;t=9d54385ae89d89a1a24e4de375894e7d">https://cloud.smart-mt.at/public.php?se … e375894e7d</a></p><p>If you need compiled packages let me know! I only included the most common ptp2-driver in this patch, if you need more just modify the libgphoto2-Makefile accordingly (eg. removing &quot;--with-camlibs=ptp2 \&quot; to build all drivers).</p><br /><p>bests</p></blockquote></div><p>Hi joky</p><p>i found your post right now, but the link that you reported here and <a href="https://forum.openwrt.org/viewtopic.php?id=44008">here</a> seems to be broken...</p><p>Have you got the precompiled packages of gphoto2 2.5.2 for tp-link routers? I have a WR842ND, my default repository (ar71xx) has not the updated version of gphoto, and due to the famous problem of &quot;segmentation fault&quot; (libusb1 problem) i can&#039;t use my Canon G2 with this routers...</p><p>If you have them, you make my day! :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208421">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						29 Jul 2013, 15:41					</div>
				</div>
				<div class="post-content content">
					<p>In case you can&#039;t get hold of the 2.5.2 version: Have you tried 2.5.0 already?</p><p>The other question is: How can we get 2.5.2 into the official openwrt distribution?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208445">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">&lt;Lork&gt;</div>
					<div class="post-datetime">
						29 Jul 2013, 20:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>tmo26 wrote:</cite><blockquote><p>In case you can&#039;t get hold of the 2.5.2 version: Have you tried 2.5.0 already?</p></blockquote></div><p>Tried some month ago, but i remember that i met some problem</p><div class="quotebox"><cite>tmo26 wrote:</cite><blockquote><p>The other question is: How can we get 2.5.2 into the official openwrt distribution?</p></blockquote></div><p>QUOTE</p><p>Hoping for a joky answer :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208502">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">joky</div>
					<div class="post-datetime">
						30 Jul 2013, 12:54					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>please find the files here:<br /><a href="https://cloud.smart-mt.at/data/public/ad9dda.php#1">https://cloud.smart-mt.at/data/public/ad9dda.php#1</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208504">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">&lt;Lork&gt;</div>
					<div class="post-datetime">
						30 Jul 2013, 13:06					</div>
				</div>
				<div class="post-content content">
					<p>Many thanx joky...sorry but..i&#039;m noob about compiling on openwrt. <br />The two .zip files contains makefile, not .ipk how i must use them?<br />Many thanx!</p><p>edit: just tried to download SDK, to compile makefile under openwrt, but i can&#039;t do it due to not enough free space...</p>											<p class="post-edited">(Last edited by <strong>&lt;Lork&gt;</strong> on 30 Jul 2013, 13:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208508">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">joky</div>
					<div class="post-datetime">
						30 Jul 2013, 13:30					</div>
				</div>
				<div class="post-content content">
					<p>Hi Lork,</p><p>the ipk file contains compiled packages for a specific architecture and openwrt version.</p><p>Which Router do you use? Which camera?<br />I can compile it for Openwrt 12.09.</p><br /><p>kind regards</p>											<p class="post-edited">(Last edited by <strong>joky</strong> on 21 Jul 2014, 08:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208523">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">&lt;Lork&gt;</div>
					<div class="post-datetime">
						30 Jul 2013, 14:41					</div>
				</div>
				<div class="post-content content">
					<p>Many thanx Erwin!</p><p>i&#039;ve Openwrt 12.09 and a Canon Powershot G2. It would be P-E-R-F-E-C-T if you can build .ipk :-) </p><p>Unfortunately i can&#039;t compile them on my openwrt platform...</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>