<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [solved][AAr36088] The WAN interface inverts the DNS order,at the boot</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p200358">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">doomdylan</div>
					<div class="post-datetime">
						2 May 2013, 00:26					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I would want to report this issue that, I think is a bug.<br />I installed Attitude Adjustment (12.09 final) on my Netgear WNDR3800 (ar71xx).<br />All looks ok but the custom DNS list.</p><p>When the WAN interface is started, it should create <em>/tmp/resolv.conf.auto</em> with inside the list of the DNS as above.<br />(This file will be read by dnsmasq that will resolve DNS queries etc..)<br />This works fine except for the boot (when the WAN interface is started automatically for the first time).<br />The problem is that on the first start, I find my DNS list on the <strong>reverse order</strong>.</p><p>This appends even with DNS assigned by my ISP, and even with assigning DNS manually (even with peerdns=0 and even with peerdns=1).<br />If I set a list of 5 DNS, the order will be fully reversed (5th DNS for first, then the 4th, the 3rd, 2nd and 1st).</p><p>I can verify it by watching on the Status-Overview page of the LUCI interface, where I can see the wrong order of DNS.</p><p>If I reconnect the WAN interface, it sort-out the DNS issue, and the right order will be re-established (even in the resolv.conf.auto, and then even on the status page of LUCI).</p><p>This issue there wasn&#039;t on backfire.</p><p>What I&#039;m asking you, is can you verify by repeating the bug?<br />It is enough to disable the peerdns and add 2 or 3 custom DNS, reboot and verify that DNS are on the right order.</p><p>If the bug is confirmed, what can I do?<br />Can I open a ticket?</p><p>(Sorry if my english is not good, I&#039;m italian <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> )</p><p>Thanks for any suggestion you can give me.</p>											<p class="post-edited">(Last edited by <strong>doomdylan</strong> on 23 Aug 2013, 01:09)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210477">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">doomdylan</div>
					<div class="post-datetime">
						23 Aug 2013, 01:11					</div>
				</div>
				<div class="post-content content">
					<p>Just to report it:</p><p><a href="https://dev.openwrt.org/ticket/14057#ticket">https://dev.openwrt.org/ticket/14057#ticket</a><br />This was a bug, and it is fixed on the incoming 12.09.01.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>