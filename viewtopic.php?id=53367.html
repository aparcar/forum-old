<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WR1043ND and WiFi unstable</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p250671">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">fcecamor</div>
					<div class="post-datetime">
						15 Oct 2014, 16:08					</div>
				</div>
				<div class="post-content content">
					<p>Hello &quot;world&quot;,<br />I know that is a subject already treated but this case is very strange..</p><p>This is the story:<br />One my friend bought this router under my advice about 2 years ago, installed directly DDWRT and used until today without mod, but the WiFi never worked fine, some disconnect, or just wifi net not available. So we decided today to switch to OpenWRT that I&#039;ve in my WR1043ND (with only HT20) and fully working..</p><p>So he flash back to stock, then to latest OpenWRT (CHAOS CALMER (Bleeding Edge, r42893) but the WiFi absolutely does not work.</p><p>This is its dmesg<br /></p><div class="codebox"><pre><code>[15215.080000] ath: phy0: DMA failed to stop in 10 ms AR_CR=0x00000024 AR_DIAG_SW=0x42000020 DMADBG_7=0x000286c0
[15215.090000] ath: phy0: Could not stop RX, we could be confusing the DMA engine when we start RX up</code></pre></div><p>and its default configuration:<br /></p><div class="codebox"><pre><code>config wifi-device  radio0
        option type     mac80211
        option channel  11
        option hwmode   11g
        option path     &#039;platform/ath9k&#039;
        option htmode   HT20
        # REMOVE THIS LINE TO ENABLE WIFI:

config wifi-iface
        option device   radio0
        option network  lan
        option mode     ap
        option ssid     OpenWrt
        option encryption none</code></pre></div><p>Sometimes he get signal but most of time the wifi is down..</p><p>How is possible ?<br />I know that wifi driver for this atheros is not fully working but.. in his case are fully broken!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250677">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">fcecamor</div>
					<div class="post-datetime">
						15 Oct 2014, 16:59					</div>
				</div>
				<div class="post-content content">
					<p>Now we have tried the &quot;Stable (Barrier Breaker)&quot; but the sound is exactly the same, WiFi client can connect but after some seconds are disconnected and dmesg is full of this errors..</p><p>We are trying with a Nexus4 as Wifi client...</p><p>any idea ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250727">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">drawz</div>
					<div class="post-datetime">
						16 Oct 2014, 02:21					</div>
				</div>
				<div class="post-content content">
					<p>Can you provide a link to the file that was downloaded &amp; flashed? Also, what hardware version is the router?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250746">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">_DS_</div>
					<div class="post-datetime">
						16 Oct 2014, 09:24					</div>
				</div>
				<div class="post-content content">
					<p>So you have two identifical routers (same hardware rev ?), one of them working, other - does not.<br />First flash same version you using, not trunk. And if same problem persist possibly this is hardware problem.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250755">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">fcecamor</div>
					<div class="post-datetime">
						16 Oct 2014, 10:28					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>drawz wrote:</cite><blockquote><p>Can you provide a link to the file that was downloaded &amp; flashed? Also, what hardware version is the router?</p></blockquote></div><p>He downloaded and flashed on first: CHAOS CALMER (Bleeding Edge, r42893) and now it&#039;s running Stable (Barrier Breaker).</p><p>His version is 1.9</p><br /><div class="quotebox"><cite>_DS_ wrote:</cite><blockquote><p>So you have two identifical routers (same hardware rev ?), one of them working, other - does not.<br />First flash same version you using, not trunk. And if same problem persist possibly this is hardware problem.</p></blockquote></div><p>In fact I had two 1043ND, the first was a 1.8 and now I&#039;ve a 2.1. In each case, I had some problem with WiFi, but NEVER his..<br />So now I cannot flash its same version on mine since are different version..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250868">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">drawz</div>
					<div class="post-datetime">
						16 Oct 2014, 23:30					</div>
				</div>
				<div class="post-content content">
					<p>please link the exact file used</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250906">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">fcecamor</div>
					<div class="post-datetime">
						17 Oct 2014, 07:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>drawz wrote:</cite><blockquote><p>please link the exact file used</p></blockquote></div><p>This is the stable one: <a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wr1043nd-v1-squashfs-sysupgrade.bin">http://downloads.openwrt.org/barrier_br â€¦ pgrade.bin</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250908">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">drawz</div>
					<div class="post-datetime">
						17 Oct 2014, 07:34					</div>
				</div>
				<div class="post-content content">
					<p>Did you flash the &quot;factory&quot; file first? The linked one is &quot;sysupgrade&quot;? Try reflashing that just to be sure and don&#039;t save any settings.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250916">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">fcecamor</div>
					<div class="post-datetime">
						17 Oct 2014, 07:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>drawz wrote:</cite><blockquote><p>Did you flash the &quot;factory&quot; file first? The linked one is &quot;sysupgrade&quot;? Try reflashing that just to be sure and don&#039;t save any settings.</p></blockquote></div><p>This were the steps:<br />1. DDWRT<br />2. Factory TP-LINK firmware<br />3. Factory &quot;Trunk (Barrier Breaker)&quot;<br />4. Upgrade &quot;Stable (Barrier Breaker)&quot;</p><p>Each one upgraded without keeping the settings</p>											<p class="post-edited">(Last edited by <strong>fcecamor</strong> on 17 Oct 2014, 08:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250990">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">drawz</div>
					<div class="post-datetime">
						17 Oct 2014, 19:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>fcecamor wrote:</cite><blockquote><div class="quotebox"><cite>drawz wrote:</cite><blockquote><p>Did you flash the &quot;factory&quot; file first? The linked one is &quot;sysupgrade&quot;? Try reflashing that just to be sure and don&#039;t save any settings.</p></blockquote></div><p>This were the steps:<br />1. DDWRT<br />2. Factory TP-LINK firmware<br />3. Factory &quot;Trunk (Barrier Breaker)&quot;<br />4. Upgrade &quot;Stable (Barrier Breaker)&quot;</p><p>Each one upgraded without keeping the settings</p></blockquote></div><p>One possibility is that the &quot;ART&quot; partition is corrupted since this contains wifi calibration data. Maybe try reverting to stock to see if it works properly. The fact that wifi never worked properly is also concerning, and points to a possible hardware problem.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250997">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">fcecamor</div>
					<div class="post-datetime">
						17 Oct 2014, 19:30					</div>
				</div>
				<div class="post-content content">
					<p>Is there a way to verify if that partition is corrupted ? How can it be corrupted?</p><p>Ok, next test will be to revert to stock.</p>											<p class="post-edited">(Last edited by <strong>fcecamor</strong> on 17 Oct 2014, 19:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p251011">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">drawz</div>
					<div class="post-datetime">
						17 Oct 2014, 21:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>fcecamor wrote:</cite><blockquote><p>Is there a way to verify if that partition is corrupted ? How can it be corrupted?</p><p>Ok, next test will be to revert to stock.</p></blockquote></div><p>If one of those flash attempts overwrote part or all of the partition, it would be corrupted. You can extract that partition, but I have no idea how you would know that it is valid vs corrupt/damaged. It is specific to the individual device so you can&#039;t compare to another similar router. This is just a guess. Regardless, going back to stock and verifying function would be a good troubleshooting step.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>