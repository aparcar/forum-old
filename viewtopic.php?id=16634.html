<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Playing with timer interruption</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 21 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p72254">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">tyrantyr</div>
					<div class="post-datetime">
						13 Aug 2008, 21:35					</div>
				</div>
				<div class="post-content content">
					<p>Hi, guys.</p><p>I&#039;m working on a project where I need to interface a Netgear WGR614v8 with two other serial devices. Since the router only have one UART available on the board, I started to work on a soft UART driver, using the GPIO controlled LEDs. At moment, I&#039;ve developed a module that does the RS232 transmission at baudrate of 4800. To do that, I&#039;ve changed the HZ kernel variable to 4800 so the timer interrupt is set to that frequency. I have to patch the kernel to accept that frequency, and include my GPIO UART transmission code on the timer interrupt queue. Despite the fact that is recommended that the HZ should not set any higher than 1000, the system runs fine and I could transmit streams of bytes using this GPIO UART without any error.</p><p>But the problems arose when I tried to increase the baudrate, cause the device I&#039;m trying to interface needs 19600 at minimum. At this high frequency, the kernel doesn&#039;t even boot. Before I get back to the kernel code, trying to hack a solution, I wanna ask here if anybody had a similar problem and could come with an alternative solution. When I was programing ARM microcontrollers, I could to have several timer interrupts running, each running at different frequencies. If we have that on the BCM5354, I could use a timer interrupt for the kernel and a different one for my GPIO UART driver.</p><p>Any ideas ?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>