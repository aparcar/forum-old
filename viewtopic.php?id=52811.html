<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> ffmpeg 0.8.7-2 option to recording 24/7</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 23 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p247401">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">exgenui</div>
					<div class="post-datetime">
						18 Sep 2014, 16:24					</div>
				</div>
				<div class="post-content content">
					<p>Hi all, </p><p>Need your help to make ffmpeg on openwrt recording continuously, I tried to search option on help doc &amp; google it with&nbsp; no luck. </p><p>success to run this command<br /></p><div class="codebox"><pre><code>ffmpeg -f video4linux2 -s 160x120 -i /dev/video0 -f oss -i /dev/dsp /mnt/sdc1/web/video$(date +%d%m%Y-%H%M%S).mpg</code></pre></div><p>I don&#039;t know how to split file with 30 minutes each. </p><p>if I use &quot;-t&quot; or &quot;-fs&quot; just only generate one file then the process end.</p><br /><p>my expectation, the command line can generate 24/7 movie files with 30 minutes duration each file.<br />e.g :</p><ul><li><p>video18092014-193000.mpg</p></li><li><p>video18092014-200000.mpg</p></li><li><p>video18092014-203000.mpg</p></li></ul><p>hope anyone can help me out. Thanks before.</p>											<p class="post-edited">(Last edited by <strong>exgenui</strong> on 18 Sep 2014, 16:31)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p247413">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						18 Sep 2014, 19:38					</div>
				</div>
				<div class="post-content content">
					<p>That&#039;s rather an ffmpeg specific question than an OpenWRT specific question.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p247418">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">exgenui</div>
					<div class="post-datetime">
						18 Sep 2014, 20:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>tmo26 wrote:</cite><blockquote><p>That&#039;s rather an ffmpeg specific question than an OpenWRT specific question.</p></blockquote></div><p>Do you have any idea rather than your post above? thanks for bump my post tmo.</p><br /><p>now, I&#039;m using cron to killall ffmpeg and execute the command again every 30 minutes on my tp-link MR3420.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p247437">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						18 Sep 2014, 22:15					</div>
				</div>
				<div class="post-content content">
					<p>Does this answer your question?</p><p><a href="http://ubuntuforums.org/showthread.php?t=2174515">http://ubuntuforums.org/showthread.php?t=2174515</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p247460">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">exgenui</div>
					<div class="post-datetime">
						19 Sep 2014, 07:11					</div>
				</div>
				<div class="post-content content">
					<p>Hi tmo26, thanks for your kind help , you already doing stuff with openwrt &amp; many webcam hope you can help me out.</p><p>actually, I had viewed the link and read it before post this topic, and doing with segment option, but not succeces on my openwrt ffmpeg version.</p><div class="codebox"><pre><code>root@OpenWrt:~# ffmpeg -f video4linux2 -s 40x30 -i /dev/video0 -f segment -segment_time 30 -f oss -i /dev/dsp /mnt/sdc1/web/video$(date +%d%m%Y-%H%M%S).mpg
ffmpeg version 0.8.7, Copyright (c) 2000-2011 the FFmpeg developers
  built on Mar 14 2013 12:13:26 with gcc 4.6.3 20120201 (prerelease)
  configuration: --enable-cross-compile --cross-prefix=mips-openwrt-linux-uclibc- --arch=mips --target-os=linux --prefix=/usr --enable-shared --enable-static --disable-debug --pkg-config=pkg-config --enable-gpl --enable-version3 --disable-asm --disable-doc --disable-dxva2 --enable-pthreads --disable-optimizations --enable-small --disable-stripping --enable-zlib --disable-outdevs
  libavutil    51.  9. 1 / 51.  9. 1
  libavcodec   53.  8. 0 / 53.  8. 0
  libavformat  53.  5. 0 / 53.  5. 0
  libavdevice  53.  1. 1 / 53.  1. 1
  libavfilter   2. 23. 0 /  2. 23. 0
  libswscale    2.  0. 0 /  2.  0. 0
  libpostproc  51.  2. 0 / 51.  2. 0
[video4linux2 @ 0x6ce410] The V4L2 driver changed the video from 40x30 to 160x120
[video4linux2 @ 0x6ce410] Estimating duration from bitrate, this may be inaccurate
Input #0, video4linux2, from &#039;/dev/video0&#039;:
  Duration: N/A, start: 1178.508090, bitrate: 9216 kb/s
    Stream #0.0: Video: rawvideo, yuyv422, 160x120, 9216 kb/s, 30 tbr, 1000k tbn, 30 tbc
Unrecognized option &#039;segment_time&#039;</code></pre></div><p>also I cannot find&nbsp; <em>segment</em> option in my ffmpeg -h help<br />but maybe I&#039;m not on that level to much understand that, is it need to recompile when I want use segment option? <br />I never doing recompile before. I still learn on linux, maybe you can give me link to update my package.</p><br /><p>here some version and my installed packages<br /></p><div class="quotebox"><blockquote><p>packages:<br />kmod-video-uvc 3.3.8-1<br />kmod-usb-audio 3.3.8-1<br />kmod-sound-core 3.3.8-1<br />ffmpeg 0.8.7-2<br />libffmpeg-full 0.8.7-2</p><p>Hardware:<br />VZTEC Webcam<br />Router Model TP-Link TL-MR3420 v1</p><p>Version:<br />Firmware Version OpenWrt Attitude Adjustment 12.09 / LuCI 0.11.1 Release (0.11.1)<br />Kernel Version 3.3.8</p></blockquote></div><p>I will happy if you want me to provide some logs from my side to inspect this.</p>											<p class="post-edited">(Last edited by <strong>exgenui</strong> on 19 Sep 2014, 07:13)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>