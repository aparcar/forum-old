<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> NAS D-Link DNS-320</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 13 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p364386">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">dcoffeenet</div>
					<div class="post-datetime">
						26 Aug 2017, 16:49					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I have try to build and load OpenWrt on my DNS-320 but don&#039;t work</p><p>this tty log</p><br /><div class="codebox"><pre><code>U-Boot 2014.07 (Aug 19 2017 - 12:33:56)
DNS-320

SoC:   Kirkwood 88F6281_A1
DRAM:  128 MiB
WARNING: Caches not enabled
NAND:  128 MiB
In:    serial
Out:   serial
Err:   serial
Net:   egiga0
Warning: Your board does not use generic board. Please read
doc/README.generic-board and take action. Boards not
upgraded by the late 2014 may break or be removed.
Hit any key to stop autoboot:  0 
=&gt; setenv bootargs console=ttyS0,115200 root=/dev/ram0 init=/sbin/preinit
=&gt; saveenv       
Saving Environment to NAND...
Erasing NAND...
Erasing at 0xe0000 -- 100% complete.
Writing to NAND... OK
=&gt; tftp 0xa00000 openwrt-kirkwood-uImage
Using egiga0 device
TFTP from server 192.168.1.20; our IP address is 192.168.1.1
Filename &#039;openwrt-kirkwood-uImage&#039;.
Load address: 0xa00000
Loading: #################################################################
         ##############################################################
         1.5 MiB/s
done
Bytes transferred = 1855212 (1c4eec hex)
=&gt; tftp 0xf00000 initramfs.uImage
Using egiga0 device
TFTP from server 192.168.1.20; our IP address is 192.168.1.1
Filename &#039;initramfs.uImage&#039;.
Load address: 0xf00000
Loading: #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         ###
         1.4 MiB/s
done
Bytes transferred = 4807041 (495981 hex)
=&gt; bootm 0xa00000 0xf00000
## Booting kernel from Legacy Image at 00a00000 ...
   Image Name:   ARM OpenWrt Linux-4.4.14
   Created:      2017-07-16  11:27:54 UTC
   Image Type:   ARM Linux Kernel Image (uncompressed)
   Data Size:    1855148 Bytes = 1.8 MiB
   Load Address: 00008000
   Entry Point:  00008000
   Verifying Checksum ... OK
## Loading init Ramdisk from Legacy Image at 00f00000 ...
   Image Name:   Ramdisk Image
   Created:      2017-08-26  13:33:15 UTC
   Image Type:   ARM Linux RAMDisk Image (gzip compressed)
   Data Size:    4806977 Bytes = 4.6 MiB
   Load Address: 00e00000
   Entry Point:  00e00000
   Verifying Checksum ... OK
   Loading Kernel Image ... OK

Starting kernel ...</code></pre></div><p>remask : initramfs.uImage&nbsp; &nbsp;I have make from&nbsp; openwrt-kirkwood-dns320-rootfs.tar.gz&nbsp; by using comand<br /></p><div class="codebox"><pre><code>~/openwrt/bin/kirkwood $ mkimage -n &#039;Ramdisk Image&#039;  -A arm -O linux -T ramdisk -C gzip -e 00e00000 -a 00e00000 -d openwrt-kirkwood-dns320-rootfs.tar.gz initramfs.uImage
Image Name:   Ramdisk Image
Created:      Sat Aug 26 20:33:15 2017
Image Type:   ARM Linux RAMDisk Image (gzip compressed)
Data Size:    4806977 Bytes = 4694.31 kB = 4.58 MB
Load Address: 00e00000
Entry Point:  00e00000</code></pre></div><p>Can anyone help me please.</p>											<p class="post-edited">(Last edited by <strong>dcoffeenet</strong> on 26 Aug 2017, 16:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364400">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">dcoffeenet</div>
					<div class="post-datetime">
						26 Aug 2017, 19:33					</div>
				</div>
				<div class="post-content content">
					<p>update..<br />I have build from LEDE </p><div class="codebox"><pre><code>Starting kernel ...

[ 0.000000] Booting Linux on physical CPU 0x0
[ 0.000000] Linux version 4.9.44 (dks@bikerrhyme.com) (gcc version 5.4.0 (LEDE GCC 5.4.0 r4707-3e6d303) ) #0 Fri Aug 18 16:47:27 2017
[ 0.000000] CPU: Feroceon 88FR131 [56251311] revision 1 (ARMv5TE), cr=0005397f
[ 0.000000] CPU: VIVT data cache, VIVT instruction cache
[ 0.000000] OF: fdt:Machine model: Seagate FreeAgent Dockstar
[ 0.000000] Memory policy: Data cache writeback
[ 0.000000] Built 1 zonelists in Zone order, mobility grouping on. Total pages: 32512
[ 0.000000] Kernel command line: console=ttyS0,115200 root=/dev/ram init=/etc/preinit noinitrd
[ 0.000000] PID hash table entries: 512 (order: -1, 2048 bytes)
[ 0.000000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)
[ 0.000000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)
[ 0.000000] Memory: 122676K/131072K available (3962K kernel code, 143K rwdata, 1076K rodata, 180K init, 216K bss, 8396K reserved, 0K cma-reserved)
[ 0.000000] Virtual kernel memory layout:
[ 0.000000] vector : 0xffff0000 - 0xffff1000 ( 4 kB)
[ 0.000000] fixmap : 0xffc00000 - 0xfff00000 (3072 kB)
[ 0.000000] vmalloc : 0xc8800000 - 0xff800000 ( 880 MB)
[ 0.000000] lowmem : 0xc0000000 - 0xc8000000 ( 128 MB)
[ 0.000000] modules : 0xbf000000 - 0xc0000000 ( 16 MB)
[ 0.000000] .text : 0xc0008000 - 0xc03e6d20 (3964 kB)
[ 0.000000] .init : 0xc04f5000 - 0xc0522000 ( 180 kB)
[ 0.000000] .data : 0xc0522000 - 0xc0545ee0 ( 144 kB)
[ 0.000000] .bss : 0xc0545ee0 - 0xc057bfec ( 217 kB)
[ 0.000000] SLUB: HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[ 0.000000] NR_IRQS:16 nr_irqs:16 16
[ 0.000000] clocksource: orion_clocksource: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 11467562657 ns
[ 0.000013] sched_clock: 32 bits at 166MHz, resolution 6ns, wraps every 12884901885ns
[ 0.000132] Calibrating delay loop... 789.70 BogoMIPS (lpj=3948544)
[ 0.040104] pid_max: default: 32768 minimum: 301
[ 0.040283] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)
[ 0.040311] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)
[ 0.041157] CPU: Testing write buffer coherency: ok
[ 0.041679] Setting up static identity map for 0x81e0 - 0x821c
[ 0.042066] mvebu-soc-id: MVEBU SoC ID=0x6281, Rev=0x3
[ 0.049712] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604462750000 ns
[ 0.049752] futex hash table entries: 256 (order: -1, 3072 bytes)
[ 0.049899] pinctrl core: initialized pinctrl subsystem
[ 0.051519] NET: Registered protocol family 16
[ 0.052160] DMA: preallocated 256 KiB pool for atomic coherent allocations
[ 0.054265] cpuidle: using governor ladder
[ 0.054821] Feroceon L2: Enabling L2
[ 0.054884] Feroceon L2: Cache support initialised.
[ 0.055306] [Firmware Info]: /ocp@f1000000/ethernet-controller@72000/ethernet0-port@0: local-mac-address is not set
[ 0.061018] No ATAGs?
[ 0.082468] SCSI subsystem initialized
[ 0.083505] usbcore: registered new interface driver usbfs
[ 0.083621] usbcore: registered new interface driver hub
[ 0.083717] usbcore: registered new device driver usb
[ 0.086505] clocksource: Switched to clocksource orion_clocksource
[ 0.087879] NET: Registered protocol family 2
[ 0.088680] TCP established hash table entries: 1024 (order: 0, 4096 bytes)
[ 0.088716] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
[ 0.088745] TCP: Hash tables configured (established 1024 bind 1024)
[ 0.088837] UDP hash table entries: 256 (order: 0, 4096 bytes)
[ 0.088868] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[ 0.089078] NET: Registered protocol family 1
[ 0.091855] Unpacking initramfs...
[ 0.091884] Initramfs unpacking failed: compression method gzip not configured
[ 0.098363] Freeing initrd memory: 1552K
[ 0.099272] Crashlog allocated RAM at address 0x3f00000
[ 0.100094] workingset: timestamp_bits=30 max_order=15 bucket_order=0
[ 0.112354] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[ 0.112372] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[ 0.121349] io scheduler noop registered
[ 0.121372] io scheduler deadline registered (default)
[ 0.123180] kirkwood-pinctrl f1010000.pin-controller: registered pinctrl driver
[ 0.171523] Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled
[ 0.172978] console [ttyS0] disabled
[ 0.173080] f1012000.serial: ttyS0 at MMIO 0xf1012000 (irq = 25, base_baud = 10416666) is a 16550A
[ 0.636991] console [ttyS0] enabled
[ 0.642291] nand: device found, Manufacturer ID: 0xec, Chip ID: 0xf1
[ 0.648666] nand: Samsung NAND 128MiB 3,3V 8-bit
[ 0.653264] nand: 128 MiB, SLC, erase size: 128 KiB, page size: 2048, OOB size: 64
[ 0.660833] Scanning device for bad blocks
[ 0.724709] Bad eraseblock 731 at 0x000005b60000
[ 0.753210] 4 ofpart partitions found on MTD device orion_nand
[ 0.759034] Creating 4 MTD partitions on &quot;orion_nand&quot;:
[ 0.764157] 0x000000000000-0x0000000e0000 : &quot;u-boot&quot;
[ 0.771612] 0x0000000e0000-0x0000001e0000 : &quot;u-boot environment&quot;
[ 0.779282] 0x000000100000-0x000000300000 : &quot;second stage u-boot&quot;
[ 0.787003] 0x000000200000-0x000010000000 : &quot;ubi&quot;
[ 0.791695] mtd: partition &quot;ubi&quot; extends beyond the end of device &quot;orion_nand&quot; -- size truncated to 0x7e00000
[ 0.804692] libphy: Fixed MDIO Bus: probed
[ 0.809177] libphy: orion_mdio_bus: probed
[ 0.813279] [Firmware Warn]: /ocp@f1000000/mdio-bus@72004/ethernet-phy@0: Whitelisted compatible string. Please remove
[ 0.825094] mv643xx_eth: MV-643xx 10/100/1000 ethernet driver version 1.4
[ 0.832605] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[ 0.839143] ehci-pci: EHCI PCI platform driver
[ 0.843660] ehci-orion: EHCI orion driver
[ 0.847882] orion-ehci f1050000.ehci: EHCI Host Controller
[ 0.853388] orion-ehci f1050000.ehci: new USB bus registered, assigned bus number 1
[ 0.861218] orion-ehci f1050000.ehci: irq 29, io mem 0xf1050000
[ 0.896526] orion-ehci f1050000.ehci: USB 2.0 started, EHCI 1.00
[ 0.903483] hub 1-0:1.0: USB hub found
[ 0.907510] hub 1-0:1.0: 1 port detected
[ 0.912076] usbcore: registered new interface driver usb-storage
[ 0.918709] rtc-mv f1010300.rtc: rtc core: registered f1010300.rtc as rtc0
[ 0.925623] i2c /dev entries driver
[ 0.930125] orion_wdt: Initial timeout 25 sec
[ 0.939971] marvell-cesa f1030000.crypto: CESA device successfully registered
[ 0.948321] NET: Registered protocol family 10
[ 0.954578] NET: Registered protocol family 17
[ 0.959108] 8021q: 802.1Q VLAN Support v1.8
[ 0.967616] UBI error: no valid UBI magic found inside mtd3[ 0.973294] rtc-mv f1010300.rtc: setting system clock to 2000-01-01 00:00:00 UTC (946684800)
[ 0.983315] VFS: Cannot open root device &quot;ram&quot; or unknown-block(1,0): error -6
[ 0.990562] Please append a correct &quot;root=&quot; boot option; here are the available partitions:
[ 0.998909] 1f00 896 mtdblock0 [ 1.002894] (driver?)
[ 1.005251] 1f01 1024 mtdblock1 [ 1.009256] (driver?)
[ 1.011611] 1f02 2048 mtdblock2 [ 1.015595] (driver?)
[ 1.017978] 1f03 129024 mtdblock3 [ 1.021964] (driver?)
[ 1.024319] Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(1,0)
[ 1.033475] Rebooting in 1 seconds..</code></pre></div>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>