<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Multiple VPN clients in one router, one VPN per LAN port?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 3 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p338925">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Grim Reaper</div>
					<div class="post-datetime">
						22 Sep 2016, 20:45					</div>
				</div>
				<div class="post-content content">
					<p>Is it possible to configure OpenWrt to enable a different VPN client to operate exclusively on each LAN port of one router? </p><p>I want to avoid having to reconfigure the router for each different VPN client when I want to change access to a different VPN server. Wired only would enable switching the LAN port connected to for VPN client access to a different VPN server. Wireless would be great too.</p><p>If it is possible, which of my routers, listed below, would be the &quot;best&quot; one to use and is there any instruction/guide about how to do it?</p><p>The following are candidates and the latest OpenWrt firmware is listed immediately after each one:</p><p>Asus RT-N56U v1 (no version number on router)<br />15.05.1</p><p>Netgear WNDR3700 v1 (no version number on router)<br />15.05.1</p><p>TP-Link TL-WR1043ND v1.10<br />15.05.1</p><p>TP-Link TL-WDR4300 v1.5<br />15.05</p><p>I also have access to more used routers of various manufacture and vintage or could buy a new one to accomplish what I want.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338937">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						22 Sep 2016, 23:37					</div>
				</div>
				<div class="post-content content">
					<p>This is a very interesting question and I do not know if it is feasible or not.&nbsp; It implies that there are multiple configured VPNs all running at the same time.&nbsp; I know one can have multiple servers running at the same time, but not sure about clients.&nbsp; Even if you can, I think you will have issues keeping the tunnels perpetually alive for a number of reasons (service agreements, policy, bad karma).&nbsp; I consider switching the cable another issue, which may also lead to hardware (cable or port) issues.</p><p>All of the instances can be configured in the VPN file and coexist.&nbsp; It&#039;s a matter of enabling and disabling the desired instance.&nbsp; The luci openvpn app (Services=&gt;OpenVpn) can enable\disable and instance and System=&gt; Startup Start\Stop\Enable\Disable VPN service.&nbsp; I do not find it entirely reliable, but you should test it.</p><p>What might also work is the package luci-apps-commmand.&nbsp; It adds a tab to Luci which lets you associate commands with a button.&nbsp; You could then create buttons whose commands runs a script.&nbsp; For a set of 3 VPN connections (VPN1, VPN2, VPN3) you would basically Stop VPN, disable all but the desired connection (VPN3 below) and restart VPN.&nbsp; This is not the actual command syntax, just a likely set of logical steps.</p><p>&nbsp; &nbsp; Stop VPN Service<br />&nbsp; &nbsp; Disable VPN Service<br />&nbsp; &nbsp; Disable VPN1 Instance<br />&nbsp; &nbsp; Disable VPN2 Instance<br />&nbsp; &nbsp; Enable VPN3 Instance<br />&nbsp; &nbsp; Enable VPN Service<br />&nbsp; &nbsp; Start VPN Service</p><p>If you search the wiki you should find help on writing the scripts.&nbsp; <a href="https://wiki.openwrt.org/doc/howto/vpn.openvpn">https://wiki.openwrt.org/doc/howto/vpn.openvpn</a></p><p>The hardware will all support the same set of functionality.&nbsp; The only real difference is &quot;horsepower&quot; and you want the one with the fastest CPU and most brains as you will most likely be using some level of software based encryption.&nbsp; I have not used any of these.&nbsp; Compare your specs here:&nbsp; <a href="https://wiki.openwrt.org/toh/start">https://wiki.openwrt.org/toh/start</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338962">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Grim Reaper</div>
					<div class="post-datetime">
						23 Sep 2016, 04:29					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for your help.</p><p>The VPN service I use is NordVPN which has multiple VPN servers all over the world. I access the BBC from outside GB through using their VPN server but when the BBC disables access to that VPN server another VPN server has to be used. I have a subscription to Netflix and use VPN to access it outside of my country too. Having multiple clients available to select from without reprogramming the router would make it a lot easier to switch. I thought having the complete NordVPN router list, which includes the client access information, on a flash/USB memory stick which could be switched through the router would be ideal. I&#039;m thinking that using a wifi enabled remote or keyboard to select the desired VPN server would make it really easy to do, typing the VPN server identity would enable access. It is ambitious and probably way beyond my abilities, a developer level project.</p><p>After I posted I searched around and found ( vpntips.com/vpn-router-install/ ) which states that some ASUS routers such as the RT-AC68R can run Asuswrt-Merlin ( mediafire.com/folder/bkfq2a6aebq68/Asuswrt-Merlin ) which has advanced VPN features to configure up to 5 OpenVPN clients and a routing policy feature to specify device access to VPN. I&#039;ll look into that too.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338981">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						23 Sep 2016, 10:13					</div>
				</div>
				<div class="post-content content">
					<p>Any chance you can automate detecting if BBC has rejected the server you&#039;re using and switch it on the fly? Looks like an easier project than 1 VPN connection per LAN port.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p339023">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Grim Reaper</div>
					<div class="post-datetime">
						23 Sep 2016, 20:05					</div>
				</div>
				<div class="post-content content">
					<p>If the VPN server selection and rejection detection could be automated, it would have to iterate through the VPN client-server settings stored in the router until the process results in a VPN connection which is able to run BBC iPlayer content.&nbsp; That may be able to be done if there is test content available which can be used through BBC iPlayer. A lot of people would be interested in that.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>