<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Errors in compiling hello world code</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p191649">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">09bicsessarwar</div>
					<div class="post-datetime">
						11 Feb 2013, 11:05					</div>
				</div>
				<div class="post-content content">
					<p>Hi all. I am trying to compile the hello world code,<br />#include &lt;stdio.h&gt;</p><p>int main(void)<br />{<br /> printf(&quot;Hell! O&#039; world, why won&#039;t my code compile?\n\n&quot;);<br /> return 0;<br />}</p><p>with this makefile via using SDK</p><p>#<br /># Copyright (C) 2008 OpenWrt.org<br />#<br /># This is free software, licensed under the GNU General Public License v2.<br /># See /LICENSE for more information.<br />#<br /># $Id$</p><p>include $(TOPDIR)/rules.mk</p><p>PKG_NAME:=helloworld<br />PKG_RELEASE:=1</p><p>include $(INCLUDE_DIR)/package.mk</p><p>define Package/helloworld<br /> SECTION:=utils<br /> CATEGORY:=Utilities<br /> TITLE:=Helloworld -- prints a snarky message&nbsp; <br />endef</p><p>define Build/Prepare<br /> mkdir -p $(PKG_BUILD_DIR)<br /> $(CP) ./src/* $(PKG_BUILD_DIR)/<br />endef</p><p>define Build/Configure<br />endef</p><p>define Build/Compile<br /> $(MAKE) -C $(PKG_BUILD_DIR) $(TARGET_CONFIGURE_OPTS)<br />endef</p><p>define Package/helloworld/install<br /> $(INSTALL_DIR) $(1)/bin<br /> $(INSTALL_BIN) $(PKG_BUILD_DIR)/helloworld $(1)/bin/<br />endef</p><p>$(eval $(call BuildPackage,helloworld))</p><br /><br /><p>When i run the command via the SDK directory &quot; makeV=99&quot; . I get on output,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191653">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">09bicsessarwar</div>
					<div class="post-datetime">
						11 Feb 2013, 11:42					</div>
				</div>
				<div class="post-content content">
					<p>saad@saad-VirtualBox:~/OpenWrt-SDK-ar71xx-for-Linux-i686-gcc-4.3.3+cs_uClibc-0.9.30.1$ make V=99<br />make[1]: Entering directory `/home/saad/OpenWrt-SDK-ar71xx-for-Linux-i686-gcc-4.3.3+cs_uClibc-0.9.30.1&#039;<br />make[2]: Entering directory `/home/saad/OpenWrt-SDK-ar71xx-for-Linux-i686-gcc-4.3.3+cs_uClibc-0.9.30.1&#039;<br />make[3]: Entering directory `/home/saad/OpenWrt-SDK-ar71xx-for-Linux-i686-gcc-4.3.3+cs_uClibc-0.9.30.1/package/helloworld&#039;<br />make -C /home/saad/OpenWrt-SDK-ar71xx-for-Linux-i686-gcc-4.3.3+cs_uClibc-0.9.30.1/build_dir/target-mips_r2_uClibc-0.9.30.1/helloworld AR=mips-openwrt-linux-uclibc-ar AS=&quot;mips-openwrt-linux-uclibc-gcc -c -Os -pipe -mips32r2 -mtune=mips32r2 -funit-at-a-time -fhonour-copts -msoft-float&quot; LD=mips-openwrt-linux-uclibc-ld NM=mips-openwrt-linux-uclibc-nm CC=&quot;mips-openwrt-linux-uclibc-gcc&quot; GCC=&quot;mips-openwrt-linux-uclibc-gcc&quot; CXX=&quot;mips-openwrt-linux-uclibc-g++&quot; RANLIB=mips-openwrt-linux-uclibc-ranlib STRIP=mips-openwrt-linux-uclibc-strip OBJCOPY=mips-openwrt-linux-uclibc-objcopy OBJDUMP=mips-openwrt-linux-uclibc-objdump SIZE=mips-openwrt-linux-uclibc-size<br />make[4]: Entering directory `/home/saad/OpenWrt-SDK-ar71xx-for-Linux-i686-gcc-4.3.3+cs_uClibc-0.9.30.1/build_dir/target-mips_r2_uClibc-0.9.30.1/helloworld&#039;<br />mips-openwrt-linux-uclibc-gcc&nbsp; helloworld.o -o helloworld<br />/home/saad/OpenWrt-SDK-ar71xx-for-Linux-i686-gcc-4.3.3+cs_uClibc-0.9.30.1/staging_dir/toolchain-mips_r2_gcc-4.3.3+cs_uClibc-0.9.30.1/usr/bin/../lib/gcc/mips-openwrt-linux-uclibc/4.3.3/../../../../mips-openwrt-linux-uclibc/bin/ld: cannot find -lgcc_s<br />collect2: ld returned 1 exit status<br />make[4]: *** [helloworld] Error 1<br />make[4]: Leaving directory `/home/saad/OpenWrt-SDK-ar71xx-for-Linux-i686-gcc-4.3.3+cs_uClibc-0.9.30.1/build_dir/target-mips_r2_uClibc-0.9.30.1/helloworld&#039;<br />make[3]: *** [/home/saad/OpenWrt-SDK-ar71xx-for-Linux-i686-gcc-4.3.3+cs_uClibc-0.9.30.1/build_dir/target-mips_r2_uClibc-0.9.30.1/helloworld/.built] Error 2<br />make[3]: Leaving directory `/home/saad/OpenWrt-SDK-ar71xx-for-Linux-i686-gcc-4.3.3+cs_uClibc-0.9.30.1/package/helloworld&#039;<br />make[2]: *** [package/helloworld/compile] Error 2<br />make[2]: Leaving directory `/home/saad/OpenWrt-SDK-ar71xx-for-Linux-i686-gcc-4.3.3+cs_uClibc-0.9.30.1&#039;<br />make[1]: *** [/home/saad/OpenWrt-SDK-ar71xx-for-Linux-i686-gcc-4.3.3+cs_uClibc-0.9.30.1/staging_dir/target-mips_r2_uClibc-0.9.30.1/stamp/.package_compile] Error 2<br />make[1]: Leaving directory `/home/saad/OpenWrt-SDK-ar71xx-for-Linux-i686-gcc-4.3.3+cs_uClibc-0.9.30.1&#039;<br />make: *** [world] Error 2</p><p>Can anybody guide me why the code isnot compiling ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191655">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">robthebrew</div>
					<div class="post-datetime">
						11 Feb 2013, 11:43					</div>
				</div>
				<div class="post-content content">
					<p>have you got the make file and the source in the correct directory structure?<br />Compare what you have with other Packages in <br />/home/saad/OpenWrt-SDK-ar71xx-for-Linux-i686-gcc-4.3.3+cs_uClibc-0.9.30.1/Package</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191657">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">09bicsessarwar</div>
					<div class="post-datetime">
						11 Feb 2013, 12:14					</div>
				</div>
				<div class="post-content content">
					<p>Yes, one makefile is in /home/saad/OpenWrt-SDK-ar71xx-for-Linux-i686-gcc-4.3.3+cs_uClibc-0.9.30.1/Package/helloworld/Makefile&nbsp; (on the same level with src directory)</p><p>Source code is in /home/saad/OpenWrt-SDK-ar71xx-for-Linux-i686-gcc-4.3.3+cs_uClibc-0.9.30.1/Package/helloworld/src</p><p>Second makefile is in /home/saad/OpenWrt-SDK-ar71xx-for-Linux-i686-gcc-4.3.3+cs_uClibc-0.9.30.1/Package/helloworld/src</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191663">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">robthebrew</div>
					<div class="post-datetime">
						11 Feb 2013, 12:48					</div>
				</div>
				<div class="post-content content">
					<p>It is a problem with absolute paths to libraries (libgcc_s.so in this case) <br />Google explodes when you search it.<br />Try taking a look here:<br /><a href="http://comments.gmane.org/gmane.comp.embedded.openwrt.devel/6265">http://comments.gmane.org/gmane.comp.em â€¦ devel/6265</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191672">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">09bicsessarwar</div>
					<div class="post-datetime">
						11 Feb 2013, 14:32					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for pointing out the error. <br />The error shows that the cross compiler isnot able to find libgcc library which is required for linking ?</p><p>Should i install the required libraries into my helloworld package folder in the SDK?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191683">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">robthebrew</div>
					<div class="post-datetime">
						11 Feb 2013, 15:00					</div>
				</div>
				<div class="post-content content">
					<p>No. I&#039;m not sure where they should be, but not there. I suspect that nobody is using just the SDK, and that is why paths are still wrong.<br />The easiest way, though not the fastest, would be to install the required tools and libs via build root:<br /><a href="http://wiki.openwrt.org/doc/howto/buildroot.exigence">http://wiki.openwrt.org/doc/howto/buildroot.exigence</a><br />Once compiled, you can use the instructions for compiling your own packages.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191691">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						11 Feb 2013, 15:53					</div>
				</div>
				<div class="post-content content">
					<p>I am not expert with Openwrt Makefiles, but I wonder if your declared empty configure section voids the underlying default configure section.</p><p>And the same for the compile section. </p><p>Wiki recommends leaving them empty unless you are doing something specific:<br /><a href="http://wiki.openwrt.org/doc/devel/packages#buildpackage.defines">http://wiki.openwrt.org/doc/devel/packa â€¦ ge.defines</a><br /></p><div class="quotebox"><blockquote><p>Build/Configure (optional)<br />You can leave this undefined if the source doesn&#039;t use configure or has a normal config script, otherwise you can put your own commands here or use &quot;$(call Build/Configure/Default,)&quot; as above to pass in additional arguments for a standard configure script.</p><p>Build/Compile (optional)<br />How to compile the source; in most cases you should leave this undefined.</p></blockquote></div>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 11 Feb 2013, 15:54)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192115">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">09bicsessarwar</div>
					<div class="post-datetime">
						15 Feb 2013, 18:43					</div>
				</div>
				<div class="post-content content">
					<p>Hi all. I wanted to tell that I have successfully compiled the package and now I have a helloworld.ipk file. Can anybody guide me how to install .ipk file on router ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192117">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						15 Feb 2013, 18:58					</div>
				</div>
				<div class="post-content content">
					<p>opkg install XXXX.ipk<br /><a href="http://wiki.openwrt.org/doc/techref/opkg">http://wiki.openwrt.org/doc/techref/opkg</a></p><p>Ps. Please tell also others, what you did to make it compile. What was the problem?</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 15 Feb 2013, 19:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192169">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">09bicsessarwar</div>
					<div class="post-datetime">
						16 Feb 2013, 11:05					</div>
				</div>
				<div class="post-content content">
					<p>I removed spaces and incorrect indentation from my helloworld/Makefile , resultantly i was able to successfully compile the code <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><br /><p>Thanks for your reply . I tried your command<br />root@OpenWrt:~# opkg install helloworld_1_ar71xx.ipk<br />Installing helloworld (1) to root...<br />Configuring helloworld.<br />root@OpenWrt:~#<br />root@OpenWrt:~#<br />root@OpenWrt:~# helloworld<br />/bin/helloworld: line 1: syntax error: unexpected &quot;(&quot;</p><p>The program is running&nbsp; on terminal as it just has to print a line, but in openwrt, it is giving me error. Any suggestions ?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>