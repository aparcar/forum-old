<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [Solved] I&#039;ve briked my MR3420 V1.2 ( cfeon flash Winboun SDRam)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 19 Apr 2018 and 4 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=42234&amp;p=2.html">2</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p191531">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Shinoace</div>
					<div class="post-datetime">
						10 Feb 2013, 00:49					</div>
				</div>
				<div class="post-content content">
					<p>Hello <br />I know thers is a subjetct with the same tp-link but there is a difference <br />ok i hava a tp-link mr3420 V1.2</p><p>i have flashed backfire 10.03.1 and my routeur is briked only the pwr led is green<br />I tried many thing to have a serial connection to debrike it<br />pl2303 with one 10K pull up resistor in TX with tow puul up in TX and RX one In RX but i have a perturbed signal<br />then i tried with max 232 and a normal com port in another pc and extern alimentation for Max232 and a 470 ohm resistor and zener diod 3.3 V in the 9 pin on Max232 to limit the output<br />the loop back test in the circuit in doing well 0% of error<br />but when i connect my MR3420 i have the same perturbed signal with PL2303<br />Normally i have a winbond flash&nbsp; But at my surprise i have a Cfeon Flash q32B-104 and a sdram winbound i&#039;d i&#039;m sure tha in the back of my MR3420 it&#039;s wirtten V1.2<br />ah i&#039;m not very good in soldring for that i have burned le normal serial connection and i have connect directly the wire in the Cfeon flash ( this time done by an expert in soldring&nbsp; &nbsp;)</p><br /><p>Plz any one have an idea how i can make the connection<br />Sorry for my english and i hope that the solution is with max232 the only componet that i find in my country tunisia and we con&#039;t buy by internet</p>											<p class="post-edited">(Last edited by <strong>Shinoace</strong> on 14 Feb 2013, 14:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191535">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">dabyd64</div>
					<div class="post-datetime">
						10 Feb 2013, 04:10					</div>
				</div>
				<div class="post-content content">
					<p>The serial goes to the processor, not the flash! <br />Did you set the baudrate at 115200? 8 bits data, 1 bit stop, 1 bit start?<br />If you burned the serial pads, then you probably are out of luck.<br />Post some photos to let us see what are you doing <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />Also check:<br /><a href="http://wiki.openwrt.org/toh/tp-link/tl-mr3420">http://wiki.openwrt.org/toh/tp-link/tl-mr3420</a></p>											<p class="post-edited">(Last edited by <strong>dabyd64</strong> on 10 Feb 2013, 04:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191538">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Shinoace</div>
					<div class="post-datetime">
						10 Feb 2013, 05:08					</div>
				</div>
				<div class="post-content content">
					<p>i m pretty sure that serial connecyion is make in dlash memory i for tha that they add u boot ti make flashing with serial withawout external programmer<br />ok i&#039;ll do the photo tomorrow but i&#039;m sure i messed up the regular serial connection and i tried with the same conf u mentionned above<br />thx for your reply</p>											<p class="post-edited">(Last edited by <strong>Shinoace</strong> on 10 Feb 2013, 05:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191543">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						10 Feb 2013, 09:20					</div>
				</div>
				<div class="post-content content">
					<p>Serial is for sending commands to uboot, thats executed by cpu as any piece of software.. Connecting to flash directly is only for using an external programmer..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191557">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Shinoace</div>
					<div class="post-datetime">
						10 Feb 2013, 16:21					</div>
				</div>
				<div class="post-content content">
					<p>than&#039;s for the information i&#039;m not specialiste about electronics thing. this is the pic of my MR3420 V1.2 and the pic of where i connecte thi wire</p><p>My mr3420</p><p>[url=http://www.stooorage.com/show/1354/8143164_2013-02-10-13-11-30.jpg]<br /><span class="postimg"><img src="http://t1.stooorage.com/thumbs/1354/8143164_2013-02-10-13-11-30.jpg" alt="http://t1.stooorage.com/thumbs/1354/8143164_2013-02-10-13-11-30.jpg" /></span>[/url] </p><p>The model reference</p><p><a href="http://www.stooorage.com/show/1354/8143165_2013-02-10-13-12-44.jpg"><span class="postimg"><img src="http://t1.stooorage.com/thumbs/1354/8143165_2013-02-10-13-12-44.jpg" alt="http://t1.stooorage.com/thumbs/1354/8143165_2013-02-10-13-12-44.jpg" /></span></a> </p><p>global view of the motherboard</p><p><a href="http://www.stooorage.com/show/1354/8143166_2013-02-10-13-13-04.jpg"><span class="postimg"><img src="http://t1.stooorage.com/thumbs/1354/8143166_2013-02-10-13-13-04.jpg" alt="http://t1.stooorage.com/thumbs/1354/8143166_2013-02-10-13-13-04.jpg" /></span></a> </p><p>My messe up in the serial connection</p><p><a href="http://www.stooorage.com/show/1354/8143167_2013-02-10-13-13-35.jpg"><span class="postimg"><img src="http://t1.stooorage.com/thumbs/1354/8143167_2013-02-10-13-13-35.jpg" alt="http://t1.stooorage.com/thumbs/1354/8143167_2013-02-10-13-13-35.jpg" /></span></a> </p><p>Where i connecte the wire in the flash</p><p>Pin 2 DO(data out or Tx)<br />Pin 4 GND<br />Pin 5 DI (data in or Rx)<br />Pin 8 Vcc</p><p><a href="http://www.stooorage.com/show/1354/8143169_2013-02-10-13-14-29.jpg"><span class="postimg"><img src="http://t1.stooorage.com/thumbs/1354/8143169_2013-02-10-13-14-29.jpg" alt="http://t1.stooorage.com/thumbs/1354/8143169_2013-02-10-13-14-29.jpg" /></span></a></p><br /><p>when i use putty i see a garbedge like whene i solder the thing in serial connection before i burn them</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191605">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Shinoace</div>
					<div class="post-datetime">
						11 Feb 2013, 00:05					</div>
				</div>
				<div class="post-content content">
					<p>have any one an idea am i doing right or i messed up every thing. <br />when i test voltage between Tx and GND i found 1.26 V the same voltage in the origilal serial connection</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191608">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						11 Feb 2013, 00:33					</div>
				</div>
				<div class="post-content content">
					<p>As dabyd and nebbia pointed out already, you don&#039;t connect serial (rs232) to the flash, but to the serial header. That header is most likely on SJ1 (about 4-5 cm to the left and 1-2 cm up from the flash chip, according to your pictures).</p><p>FYI: the flash chip talks SPI, which requires at least to hook up DI, DO, CLK, GND and Vcc (normally even CS). Just in case you really want to hook up a SPI programmer ;-)</p>											<p class="post-edited">(Last edited by <strong>MBS</strong> on 11 Feb 2013, 00:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191611">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Shinoace</div>
					<div class="post-datetime">
						11 Feb 2013, 00:49					</div>
				</div>
				<div class="post-content content">
					<p>yeah i know that but the thing that i burned up the connection with my amazing skill of soldrig i searche for alternatif solution( juste for the challange i can buy another one it s not a probleme if i brick it more)<br />ok so what is SPI programmer ??<br />a PIC programmer or eeprome programmer is good or ther is specific one ??<br />i can find a pic or eeprome programmer i think</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191613">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">dabyd64</div>
					<div class="post-datetime">
						11 Feb 2013, 01:22					</div>
				</div>
				<div class="post-content content">
					<p>Post a closeup photo of the burned serial conmections.<br />Those small resistors near the serial are connected to the serial lines, so with a lot of care, you still can recover it.<br />where are you from? if shipping cost to/from spain are reasonable, I may try to fix it. Or maybe you could be interestesd at selling it?<br />Precisely, I was searching for a bricked or cheap router to experiment with, trying to upgrade flash/ram,etc.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191614">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Shinoace</div>
					<div class="post-datetime">
						11 Feb 2013, 01:38					</div>
				</div>
				<div class="post-content content">
					<p>i m from tunisia this is the probleme but i want to experiment also on it ..<br />ok the resistor near the serial connection can i know what is the connection for every one ???<br />i ll try to find an api with macro i have juste a phone for the moment for the pic</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191617">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">dabyd64</div>
					<div class="post-datetime">
						11 Feb 2013, 01:59					</div>
				</div>
				<div class="post-content content">
					<p>And please, be extremely careful! That is your last way to recover, if you break that too, you will have to buy a SPI programmer, or build yourself.<br />*edit*<br />oops, the image seems to be from other version of the router, is different from yours!<br />Ignore it!</p>											<p class="post-edited">(Last edited by <strong>dabyd64</strong> on 11 Feb 2013, 02:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191618">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Shinoace</div>
					<div class="post-datetime">
						11 Feb 2013, 02:20					</div>
				</div>
				<div class="post-content content">
					<p>ok i&#039;ll gnore it and i wiil tacke it to some one how can solder it i hope.<br />for the SPI programmer if the compont aren&#039;t unusuel to find in tunisia&nbsp; can make one i think in last ressort<br />tommorow i&#039;ll make a good image for the serial connection</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191619">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">dabyd64</div>
					<div class="post-datetime">
						11 Feb 2013, 02:31					</div>
				</div>
				<div class="post-content content">
					<p>clean the serial port with alcohol or acetone, to remove any rest of flux. Then look at the board races of that resistors.<br />You should clearly see what goes to Tx and what to Rx.<br />Can you post a photo of the serial port, but the upper side? Closest as you can.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191622">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Shinoace</div>
					<div class="post-datetime">
						11 Feb 2013, 02:42					</div>
				</div>
				<div class="post-content content">
					<p>theres is the pic but clearly i have done more damage than i thoght</p><p><a href="http://www.stooorage.com/show/2004/8144338_20130211_013902-1.jpg"><span class="postimg"><img src="http://t2.stooorage.com/thumbs/2004/8144338_20130211_013902-1.jpg" alt="http://t2.stooorage.com/thumbs/2004/8144338_20130211_013902-1.jpg" /></span></a></p><br /><p>juste one alternative the spi programmer i have juste make a littel resarche but i found the it possible with parallel port not serial port and the probleme that i have juste serial port</p><p>an eeprom programmer can work with this ship???? may be a freind have an eeprom programmer</p>											<p class="post-edited">(Last edited by <strong>Shinoace</strong> on 11 Feb 2013, 02:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191623">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">dabyd64</div>
					<div class="post-datetime">
						11 Feb 2013, 03:20					</div>
				</div>
				<div class="post-content content">
					<p>Here you can see Rx and Tx on the resistors <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />. Follow the damaged line, solder to the resistor pad. Use a thin wire!<br />For gnd, scratch and solder any of those holes that are surrounding the serial header.<br />For vcc, check the capacitor. the small light-brown component. the upper side is vcc.<br />I dont know if your eeprom programmer works with the spi flash. Check its software or manual.</p>											<p class="post-edited">(Last edited by <strong>dabyd64</strong> on 11 Feb 2013, 03:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191624">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">xopal</div>
					<div class="post-datetime">
						11 Feb 2013, 03:52					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://postimage.org/"><span class="postimg"><img src="http://s12.postimage.org/apf2ks5gt/serial_3420.png" alt="http://s12.postimage.org/apf2ks5gt/serial_3420.png" /></span></a><br /><a href="http://postimage.org/">free image hosting</a></p><p>Remove C-496 and short the traces , check with ohm meter between Tx to one of CPU pins must have direct connection do the same for Rx pin but without removing R-613.</p><p>Go get USB-TTL cable , you only need TX RX and GND pins to make it work, do not use CA-42 cable its too complicated for new beginner.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191641">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">Shinoace</div>
					<div class="post-datetime">
						11 Feb 2013, 08:52					</div>
				</div>
				<div class="post-content content">
					<p>Ok il ll use max232 with Standart RS232 but where is the TX in the CPU?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191645">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">dabyd64</div>
					<div class="post-datetime">
						11 Feb 2013, 10:17					</div>
				</div>
				<div class="post-content content">
					<p>A capacitor in series in Tx line? Strange, is the first time I see that</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191652">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">Shinoace</div>
					<div class="post-datetime">
						11 Feb 2013, 11:39					</div>
				</div>
				<div class="post-content content">
					<p>Ok who can tell me where I find that and rx in cpu to test connection</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191661">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">xopal</div>
					<div class="post-datetime">
						11 Feb 2013, 12:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Shinoace wrote:</cite><blockquote><p>Ok who can tell me where I find that and rx in cpu to test connection</p></blockquote></div><p><a href="https://www.dropbox.com/s/fwuptsiy996tgcc/tx_to_cpu.png">https://www.dropbox.com/s/fwuptsiy996tgcc/tx_to_cpu.png</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191662">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">Shinoace</div>
					<div class="post-datetime">
						11 Feb 2013, 12:46					</div>
				</div>
				<div class="post-content content">
					<p>Thx xopal i&#039;ll test it this afternoon and practice some soldring skill in another mother bored of a broken cellular and i&#039;ll search the rx pin in cpu</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191706">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">Shinoace</div>
					<div class="post-datetime">
						11 Feb 2013, 19:07					</div>
				</div>
				<div class="post-content content">
					<p>ok i have done the continuty test for tx and rx and i have the continuty between spot in the image.<br />First i hope tha my test is goode<br />Second can i bybass le capacitor C496 without remouving it <br />Third i have continuty in R613 and not R612</p><p><a href="http://www.stooorage.com/show/1355/8147070_tx-and-rx-continuty-test.png"><span class="postimg"><img src="http://t1.stooorage.com/thumbs/1355/8147070_tx-and-rx-continuty-test.png" alt="http://t1.stooorage.com/thumbs/1355/8147070_tx-and-rx-continuty-test.png" /></span></a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191711">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">xopal</div>
					<div class="post-datetime">
						11 Feb 2013, 19:36					</div>
				</div>
				<div class="post-content content">
					<p>You can bypass C496 without removing it, just drop tiny lead on top of it while you keep it on place by holding the capacitor with pinset.</p><p>The correct one is&nbsp; R612, sorry I miss it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191732">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">Shinoace</div>
					<div class="post-datetime">
						12 Feb 2013, 00:57					</div>
				</div>
				<div class="post-content content">
					<p>ok i baypass the capacitor in tx but not the resistor in rx that&#039;s right??<br />normally it will work with max232 i hope</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191967">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">Shinoace</div>
					<div class="post-datetime">
						14 Feb 2013, 14:41					</div>
				</div>
				<div class="post-content content">
					<p>Thx every one my MR3420 back to life by bayssing the capacitor in TX but not R612 in RX. <br />The problem was the kernel in backfire.&nbsp; Now I just flashed AA distribution and it work still go to my freinds home to install package from the Internet</p>											<p class="post-edited">(Last edited by <strong>Shinoace</strong> on 14 Feb 2013, 14:42)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=42234&amp;p=2.html">2</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>