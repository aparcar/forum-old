<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Openwrt support for Huawei HG655b</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 12 Mar 2018 and 5 May 2018.
										Unfortunately there are posts â€“ most likely complete pages â€“ missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 3 of 18</div><nav><ul><li><a href="viewtopic.php%3Fid=50207&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=50207&amp;p=2.html">2</a></li><li class="pagination-current"><span>3</span></li><li><a href="viewtopic.php%3Fid=50207&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=50207&amp;p=5.html">5</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=50207&amp;p=18.html">18</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p231891">
				<div class="post-metadata">
					<div class="post-num">Post #51</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						30 Apr 2014, 20:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>fratzicu wrote:</cite><blockquote><p>Hi,</p><p>I followed theinstructions here for GPIO:<br /><a href="http://wiki.openwrt.org/doc/devel/add.new.device">http://wiki.openwrt.org/doc/devel/add.new.device</a><br />I think power and wifi wor well.</p><p>The results (tested until 37) are:</p><p>visible led ..... on (0,1)....no<br />power.............0..............22<br />DSL..................0...............2<br />LAN1................0................6<br />LAN2.................0...............7<br />LAN3.................0................8<br />LAN4..................0...............9<br />WLAN....................................don&#039;t know<br />WPS...................0...............27<br />VOIP..................0.................25<br />USB....................0................14</p><p>That&#039;s it.</p><p>I don&#039;t know how to test the buttons (wifi, reset, wps).</p><p>What now?</p></blockquote></div><div class="quotebox"><cite>fratzicu wrote:</cite><blockquote><p>fratzicu wrote:<br />Hi,<br />I used the instructions here:<br /><a href="https://forum.openwrt.org/viewtopic.php?id=36561">https://forum.openwrt.org/viewtopic.php?id=36561</a><br />I found 2 buttons:<br />button WPS, close to power button .... pressed 0, relesed 1<br />buttonreset, next button (middle).........pressed 0, released 1<br />I didn&#039;tfind button Wlan, farthest from power button.<br />WPS ... gpio 12<br />Reset....gpio 34</p></blockquote></div><p>I would like to add<br />Internet........0 (on).......gpio no 5</p><p>I couldn&#039;t fing gpio for the wifi on/off button</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p231894">
				<div class="post-metadata">
					<div class="post-num">Post #52</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						30 Apr 2014, 20:33					</div>
				</div>
				<div class="post-content content">
					<p>hi, </p><p>I flashed image no8 but I get kernel panic</p><div class="codebox"><pre><code>CFE version 1.0.37-102.6 for BCM96368 (32bit,SP,BE)
Build Date: Wed Mar 23 22:59:09 CST 2011 (lihua@IBM_x3500)
Copyright (C) 2000-2008 Broadcom Corporation.

Parallel flash device: name AM29LV320MB, id 0x2200, size 8192KB
CPU type 0x2A031: 400MHz, Bus: 160MHz, Ref: 64MHz
CPU running TP0
Total memory: 67108864 bytes (64MB)
Boot Address 0xb8000000


Board IP address                  : 192.168.1.1:ffffff00  
Host IP address                   : 192.168.1.100  
Gateway IP address                :   
Run from flash/host (f/h)         : f  
Default host run file name        : vmlinux  
Default host flash file name      : bcm963xx_fs_kernel  
Boot delay (0-9 seconds)          : 1  
Boot image (0=latest, 1=previous) : 0  
Board Id (0-6)                    : HW65x  
Number of MAC Addresses (1-32)    : 11  
Base MAC Address                  : 02:10:18:01:00:01  
PSI Size (1-64) KBytes            : 64  
Main Thread Number [0|1]          : 0  

*** Press any key to stop auto run (2 seconds) ***
Auto run second count down: 2211
CFE&gt; 
web info: Waiting for connection on socket 0.[J

CFE&gt;  
CFE&gt; 
CFE&gt;  
CFE&gt;  
web warning: Unexpected TCP disconnect.[J


web info: Waiting for connection on socket 0.[J

CFE&gt;  
web info: Waiting for connection on socket 1.[J

CFE&gt;  
web info: Waiting for connection on socket 0.[J

CFE&gt;  
web info: Upload 7208964 bytes, Broadcom image format.[J

CFE&gt;  Current boot system is:&lt;Ã¿Ã¿Ã¿Ã¿Ã¿Ã¿Ã¿Ã¿Ã¿Ã¿Ã¿Ã¿Ã¿Ã¿Ã¿Ã¿&gt; iMode:&lt;2&gt;

------ Going to update Main System.

Flashing root file system and kernel at 0xb8020000, len = 7208964
...............................................................................................................

Current boot system is:&lt;Ã¿Ã¿Ã¿Ã¿Ã¿Ã¿Ã¿Ã¿Ã¿Ã¿Ã¿Ã¿Ã¿Ã¿Ã¿Ã¿&gt; iMode:&lt;1&gt;
.
*** Image flash done *** !

Resetting board...

CFE version 1.0.37-102.6 for BCM96368 (32bit,SP,BE)
Build Date: Wed Mar 23 22:59:09 CST 2011 (lihua@IBM_x3500)
Copyright (C) 2000-2008 Broadcom Corporation.

Parallel flash device: name AM29LV320MB, id 0x2200, size 8192KB
CPU type 0x2A031: 400MHz, Bus: 160MHz, Ref: 64MHz
CPU running TP0
Total memory: 67108864 bytes (64MB)
Boot Address 0xb8000000


Board IP address                  : 192.168.1.1:ffffff00  
Host IP address                   : 192.168.1.100  
Gateway IP address                :   
Run from flash/host (f/h)         : f  
Default host run file name        : vmlinux  
Default host flash file name      : bcm963xx_fs_kernel  
Boot delay (0-9 seconds)          : 1  
Boot image (0=latest, 1=previous) : 0  
Board Id (0-6)                    : HW65x  
Number of MAC Addresses (1-32)    : 11  
Base MAC Address                  : 02:10:18:01:00:01  
PSI Size (1-64) KBytes            : 64  
Main Thread Number [0|1]          : 0  

*** Press any key to stop auto run (2 seconds) ***
Auto run second count down: 2210
LZMA: Prossible old LZMA format, trying to decompress..
Decompression OK!
Entry at 0x80010000
Closing network.
Disabling Switch ports.
Flushing Receive Buffers...
224 buffers found.
Closing DMA Channels.
Starting program at 0x80010000
[    0.000000] Linux version 3.10.34 (dani@tool) (gcc version 4.8.3 (OpenWrt/Linaro GCC 4.8-2014.01 r40396) ) #17 SMP Wed Apr 30 12:53:38 CEST 2014
[    0.000000] Detected Broadcom 0x6368 CPU revision b2
[    0.000000] CPU frequency is 400 MHz
[    0.000000] 64MB of RAM installed
[    0.000000] registering 38 GPIOs
[    0.000000] board_bcm963xx: Boot address 0xb8000000
[    0.000000] board_bcm963xx: CFE version: 1.0.37-102.6
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU revision is: 0002a031 (Broadcom BMIPS4350)
[    0.000000] board_bcm963xx: board name: HW65x
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 04000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone ranges:
[    0.000000]   Normal   [mem 0x00000000-0x03ffffff]
[    0.000000] Movable zone start for each node
[    0.000000] Early memory node ranges
[    0.000000]   node   0: [mem 0x00000000-0x03ffffff]
[    0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 16 bytes.
[    0.000000] Primary data cache 32kB, 2-way, VIPT, cache aliases, linesize 16 bytes
[    0.000000] PERCPU: Embedded 7 pages/cpu @81083000 s6592 r8192 d13888 u32768
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
[    0.000000] Kernel command line:  root=/dev/mtdblock2 rootfstype=squashfs,jffs2 noinitrd console=ttyS0,115200
[    0.000000] PID hash table entries: 256 (order: -2, 1024 bytes)
[    0.000000] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Memory: 61268k/65536k available (2455k kernel code, 4268k reserved, 620k data, 248k init, 0k highmem)
[    0.000000] Hierarchical RCU implementation.
[    0.000000] NR_IRQS:256
[    0.000000] Calibrating delay loop... 397.82 BogoMIPS (lpj=795648)
[    0.032000] pid_max: default: 32768 minimum: 301
[    0.036000] Mount-cache hash table entries: 512
[    0.044000] SMP: Booting CPU1...
[    0.048000] CPU revision is: 0002a031 (Broadcom BMIPS4350)
[    0.048000] Primary instruction cache 64kB, VIPT, 4-way, linesize 16 bytes.
[    0.048000] Primary data cache 32kB, 2-way, VIPT, cache aliases, linesize 16 bytes
[    0.080000] Synchronize counters for CPU 1: done.
[    0.080000] SMP: CPU1 is running
[    0.084000] Brought up 2 CPUs
[    0.108000] NET: Registered protocol family 16
[    0.116000] registering PCI controller with io_map_base unset
[    0.132000] bio: create slab &lt;bio-0&gt; at 0
[    0.136000] PCI host bridge to bus 0000:00
[    0.140000] pci_bus 0000:00: root bus resource [mem 0x30000000-0x37ffffff]
[    0.144000] pci_bus 0000:00: root bus resource [io  0x8000000-0x800ffff]
[    0.148000] pci_bus 0000:00: No busn resource found for root bus, will use [bus 00-ff]
[    0.164000] pci 0000:00:01.0: BAR 0: assigned [mem 0x30000000-0x3000ffff]
[    0.168000] Switching to clocksource MIPS
[    0.176000] NET: Registered protocol family 2
[    0.184000] TCP established hash table entries: 512 (order: 0, 4096 bytes)
[    0.188000] TCP bind hash table entries: 512 (order: 0, 4096 bytes)
[    0.196000] TCP: Hash tables configured (established 512 bind 512)
[    0.204000] TCP: reno registered
[    0.204000] UDP hash table entries: 256 (order: 1, 8192 bytes)
[    0.212000] UDP-Lite hash table entries: 256 (order: 1, 8192 bytes)
[    0.220000] NET: Registered protocol family 1
[    0.228000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.232000] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.244000] msgmni has been set to 119
[    0.248000] io scheduler noop registered
[    0.252000] io scheduler deadline registered (default)
[    0.260000] bcm63xx_uart.0: ttyS0 at MMIO 0xb0000100 (irq = 10) is a bcm63xx_uart
[    0.268000] console [ttyS0] enabled, bootconsole disabled
[    0.268000] console [ttyS0] enabled, bootconsole disabled
[    0.280000] bcm63xx-rng bcm63xx-rng: registered RNG driver
[    0.288000] physmap platform flash device: 08000000 at 18000000
[    0.296000] physmap-flash.0: Found 1 x16 devices at 0x0 in 16-bit bank. Manufacturer ID 0x000001 Chip ID 0x001000
[    0.304000] Amd/Fujitsu Extended Query Table at 0x0040
[    0.312000]   Amd/Fujitsu Extended Query version 1.3.
[    0.316000] number of CFI chips: 1
[    0.320000] bcm63xxpart: CFE boot tag CRC invalid (expected 0212102b, actual 24b1b887)
[    0.328000] bcm63xxpart: Partition 0 is CFE offset 0 and length 10000
[    0.336000] bcm63xxpart: Partition 1 is cal_data offset 7c0000 and length 10000
[    0.344000] bcm63xxpart: Partition 2 is nvram offset 7f0000 and length 10000
[    0.348000] bcm63xxpart: Partition 3 is linux offset 10000 and length 7b0000
[    0.356000] bcm63xxpart: Spare partition is offset 10000 and length 7b0000
[    0.364000] 4 bcm63xxpart partitions found on MTD device physmap-flash.0
[    0.372000] Creating 4 MTD partitions on &quot;physmap-flash.0&quot;:
[    0.376000] 0x000000000000-0x000000010000 : &quot;CFE&quot;
[    0.384000] 0x0000007c0000-0x0000007d0000 : &quot;cal_data&quot;
[    0.392000] 0x0000007f0000-0x000000800000 : &quot;nvram&quot;
[    0.400000] 0x000000010000-0x0000007c0000 : &quot;linux&quot;
[    0.408000] bcm63xx-spi bcm63xx-spi: at 0xb0000800 (irq 9, FIFOs size 542)
[    0.456000] b53_common: found switch: BCM63xx, rev 0
[    0.460000] bcm63xx-wdt bcm63xx-wdt:  started, timer margin: 30 sec
[    0.472000] TCP: cubic registered
[    0.476000] NET: Registered protocol family 17
[    0.480000] 8021q: 802.1Q VLAN Support v1.8
[    0.488000] jffs2: Too few erase blocks (1)
[    0.496000] List of all partitions:
[    0.496000] 1f00              64 mtdblock0  (driver?)
[    0.504000] 1f01              64 mtdblock1  (driver?)
[    0.508000] 1f02              64 mtdblock2  (driver?)
[    0.512000] 1f03            7872 mtdblock3  (driver?)
[    0.520000] No filesystem could mount root, tried:  squashfs jffs2
[    0.524000] Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(31,2)</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p231898">
				<div class="post-metadata">
					<div class="post-num">Post #53</div>
					<div class="post-author">danitool</div>
					<div class="post-datetime">
						30 Apr 2014, 21:02					</div>
				</div>
				<div class="post-content content">
					<p>Ok, I went back to the previous code, this problem occurs also with the hg556a.</p><p>This time I added the missing &quot;inet&quot; gpio Led</p><p><a href="https://drive.google.com/file/d/0B-EMoBe-_OdBZTNWNXJ1QzlsSWc/edit?usp=sharing">openwrt-HG655x-squashfs-cfe-9.bin</a></p><p>Paste here the bootlog again.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p231907">
				<div class="post-metadata">
					<div class="post-num">Post #54</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						30 Apr 2014, 23:22					</div>
				</div>
				<div class="post-content content">
					<p>Bootlog with v9<br /></p><div class="codebox"><pre><code>[    0.000000] Linux version 3.10.34 (dani@tool) (gcc version 4.8.3 (OpenWrt/Linaro GCC 4.8-2014.01 r40396) ) #18 SMP Wed Apr 30 19:58:28 CEST 2014
[    0.000000] Detected Broadcom 0x6368 CPU revision b2
[    0.000000] CPU frequency is 400 MHz
[    0.000000] 64MB of RAM installed
[    0.000000] registering 38 GPIOs
[    0.000000] board_bcm963xx: Boot address 0xb8000000
[    0.000000] board_bcm963xx: CFE version: 1.0.37-102.6
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU revision is: 0002a031 (Broadcom BMIPS4350)
[    0.000000] board_bcm963xx: board name: HW65x
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 04000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone ranges:
[    0.000000]   Normal   [mem 0x00000000-0x03ffffff]
[    0.000000] Movable zone start for each node
[    0.000000] Early memory node ranges
[    0.000000]   node   0: [mem 0x00000000-0x03ffffff]
[    0.000000] On node 0 totalpages: 16384
[    0.000000] free_area_init_node: node 0, pgdat 802ffa00, node_mem_map 81000000
[    0.000000]   Normal zone: 128 pages used for memmap
[    0.000000]   Normal zone: 0 pages reserved
[    0.000000]   Normal zone: 16384 pages, LIFO batch:3
[    0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 16 bytes.
[    0.000000] Primary data cache 32kB, 2-way, VIPT, cache aliases, linesize 16 bytes
[    0.000000] PERCPU: Embedded 7 pages/cpu @81083000 s6592 r8192 d13888 u32768
[    0.000000] pcpu-alloc: s6592 r8192 d13888 u32768 alloc=8*4096
[    0.000000] pcpu-alloc: [0] 0 [0] 1 
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
[    0.000000] Kernel command line:  root=/dev/mtdblock2 rootfstype=squashfs,jffs2 noinitrd console=ttyS0,115200
[    0.000000] PID hash table entries: 256 (order: -2, 1024 bytes)
[    0.000000] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Memory: 61268k/65536k available (2455k kernel code, 4268k reserved, 620k data, 248k init, 0k highmem)
[    0.000000] Hierarchical RCU implementation.
[    0.000000] NR_IRQS:256
[    0.028000] Calibrating delay loop... 397.82 BogoMIPS (lpj=795648)
[    0.032000] pid_max: default: 32768 minimum: 301
[    0.036000] Mount-cache hash table entries: 512
[    0.044000] SMP: Booting CPU1...
[    0.048000] CPU revision is: 0002a031 (Broadcom BMIPS4350)
[    0.048000] Primary instruction cache 64kB, VIPT, 4-way, linesize 16 bytes.
[    0.048000] Primary data cache 32kB, 2-way, VIPT, cache aliases, linesize 16 bytes
[    0.080000] Synchronize counters for CPU 1: done.
[    0.080000] SMP: CPU1 is running
[    0.084000] Brought up 2 CPUs
[    0.108000] NET: Registered protocol family 16
[    0.116000] registering PCI controller with io_map_base unset
[    0.132000] bio: create slab &lt;bio-0&gt; at 0
[    0.136000] PCI host bridge to bus 0000:00
[    0.140000] pci_bus 0000:00: root bus resource [mem 0x30000000-0x37ffffff]
[    0.144000] pci_bus 0000:00: root bus resource [io  0x8000000-0x800ffff]
[    0.148000] pci_bus 0000:00: No busn resource found for root bus, will use [bus 00-ff]
[    0.152000] pci 0000:00:01.0: [1814:3592] type 00 class 0x028000
[    0.152000] pci 0000:00:01.0: reg 10: [mem 0xffff0000-0xffffffff]
[    0.164000] pci 0000:00:01.0: PME# supported from D0 D3hot D3cold
[    0.164000] pci_bus 0000:00: busn_res: [bus 00-ff] end is updated to 00
[    0.164000] pci 0000:00:01.0: BAR 0: assigned [mem 0x30000000-0x3000ffff]
[    0.168000] Switching to clocksource MIPS
[    0.176000] NET: Registered protocol family 2
[    0.184000] TCP established hash table entries: 512 (order: 0, 4096 bytes)
[    0.188000] TCP bind hash table entries: 512 (order: 0, 4096 bytes)
[    0.196000] TCP: Hash tables configured (established 512 bind 512)
[    0.204000] TCP: reno registered
[    0.204000] UDP hash table entries: 256 (order: 1, 8192 bytes)
[    0.212000] UDP-Lite hash table entries: 256 (order: 1, 8192 bytes)
[    0.220000] NET: Registered protocol family 1
[    0.224000] PCI: CLS 0 bytes, default 16
[    0.228000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.232000] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.244000] msgmni has been set to 119
[    0.248000] io scheduler noop registered
[    0.252000] io scheduler deadline registered (default)
[    0.260000] bcm63xx_uart.0: ttyS0 at MMIO 0xb0000100 (irq = 10) is a bcm63xx_uart
[    0.268000] console [ttyS0] enabled, bootconsole disabled
[    0.280000] bcm63xx-rng bcm63xx-rng: registered RNG driver
[    0.288000] physmap platform flash device: 08000000 at 18000000
[    0.296000] physmap-flash.0: Found 1 x16 devices at 0x0 in 16-bit bank. Manufacturer ID 0x000001 Chip ID 0x001000
[    0.304000] physmap-flash.0: Found an alias at 0x800000 for the chip at 0x0
[    0.304000] physmap-flash.0: Found an alias at 0x1000000 for the chip at 0x0
[    0.304000] physmap-flash.0: Found an alias at 0x1800000 for the chip at 0x0
[    0.304000] Amd/Fujitsu Extended Query Table at 0x0040
[    0.312000]   Amd/Fujitsu Extended Query version 1.3.
[    0.316000] number of CFI chips: 1
[    0.320000] bcm63xxpart: CFE boot tag found with version 7 and board type HW65x
[    0.328000] bcm63xxpart: Partition 0 is CFE offset 0 and length 20000
[    0.336000] bcm63xxpart: Partition 1 is kernel offset 20100 and length 10ff00
[    0.340000] bcm63xxpart: Partition 2 is rootfs offset 130000 and length 690000
[    0.348000] bcm63xxpart: Partition 3 is cal_data offset 7c0000 and length 10000
[    0.356000] bcm63xxpart: Partition 4 is nvram offset 7f0000 and length 10000
[    0.364000] bcm63xxpart: Partition 5 is linux offset 20000 and length 7a0000
[    0.372000] bcm63xxpart: Spare partition is offset 700004 and length bfffc
[    0.376000] 6 bcm63xxpart partitions found on MTD device physmap-flash.0
[    0.384000] Creating 6 MTD partitions on &quot;physmap-flash.0&quot;:
[    0.392000] 0x000000000000-0x000000020000 : &quot;CFE&quot;
[    0.396000] 0x000000020100-0x000000130000 : &quot;kernel&quot;
[    0.404000] mtd: partition &quot;kernel&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
[    0.420000] 0x000000130000-0x0000007c0000 : &quot;rootfs&quot;
[    0.424000] mtd: device 2 (rootfs) set to be root filesystem
[    0.432000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=0x700000, len=0xc0000
[    0.440000] 0x000000700000-0x0000007c0000 : &quot;rootfs_data&quot;
[    0.448000] 0x0000007c0000-0x0000007d0000 : &quot;cal_data&quot;
[    0.456000] 0x0000007f0000-0x000000800000 : &quot;nvram&quot;
[    0.464000] 0x000000020000-0x0000007c0000 : &quot;linux&quot;
[    0.472000] bcm63xx-spi bcm63xx-spi: at 0xb0000800 (irq 9, FIFOs size 542)
[    0.520000] b53_common: found switch: BCM63xx, rev 0
[    0.524000] bcm63xx-wdt bcm63xx-wdt:  started, timer margin: 30 sec
[    0.540000] TCP: cubic registered
[    0.540000] NET: Registered protocol family 17
[    0.548000] 8021q: 802.1Q VLAN Support v1.8
[    0.560000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
[    0.568000] Freeing unused kernel memory: 248K (80312000 - 80350000)
[    2.916000] bcm63xx_enetsw bcm63xx_enetsw.0: link UP on port1, 100Mbps, full-duplex
[    4.408000] usbcore: registered new interface driver usbfs
[    4.416000] usbcore: registered new interface driver hub
[    4.420000] usbcore: registered new device driver usb
[    4.432000] Button Hotplug driver version 0.4.1
[    4.500000] SCSI subsystem initialized
[    4.516000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[    4.524000] ehci-platform: EHCI generic platform driver
[    4.636000] ehci-platform ehci-platform: EHCI Host Controller
[    4.640000] ehci-platform ehci-platform: new USB bus registered, assigned bus number 1
[    4.648000] ehci-platform ehci-platform: irq 15, io mem 0xb0001500
[    4.668000] ehci-platform ehci-platform: USB 2.0 started, EHCI 1.00, overcurrent ignored
[    4.676000] hub 1-0:1.0: USB hub found
[    4.680000] hub 1-0:1.0: 2 ports detected
[    4.688000] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
[    4.696000] ohci-platform ohci-platform: Generic Platform OHCI Controller
[    4.704000] ohci-platform ohci-platform: new USB bus registered, assigned bus number 2
[    4.712000] ohci-platform ohci-platform: irq 13, io mem 0xb0001600
[    4.776000] hub 2-0:1.0: USB hub found
[    4.780000] hub 2-0:1.0: 2 ports detected
[    4.796000] usbcore: registered new interface driver usb-storage
[    4.804000] input: gpio-keys-polled as /devices/platform/gpio-keys-polled.0/input/input0
[    6.292000] jffs2: notice: (265) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (0 unchecked, 0 orphan) and 39 of xref (0 dead, 25 orphan) found.
[    9.868000] NET: Registered protocol family 10
[    9.900000] nf_conntrack version 0.5.0 (961 buckets, 3844 max)
[    9.912000] ip6_tables: (C) 2000-2006 Netfilter Core Team
[    9.952000] fuse init (API version 7.22)
[    9.964000] Loading modules backported from Linux version master-2014-03-31-1-0-g5c109d2
[    9.972000] Backport generated by backports.git backports-20140221-0-g8e94650
[    9.984000] ip_tables: (C) 2000-2006 Netfilter Core Team
[   10.052000] usbcore: registered new interface driver ums-alauda
[   10.060000] usbcore: registered new interface driver ums-cypress
[   10.068000] usbcore: registered new interface driver ums-datafab
[   10.080000] usbcore: registered new interface driver ums-freecom
[   10.088000] usbcore: registered new interface driver ums-isd200
[   10.096000] usbcore: registered new interface driver ums-jumpshot
[   10.108000] usbcore: registered new interface driver ums-karma
[   10.116000] usbcore: registered new interface driver ums-sddr09
[   10.128000] usbcore: registered new interface driver ums-sddr55
[   10.136000] usbcore: registered new interface driver ums-usbat
[   10.168000] xt_time: kernel timezone is -0000
[   10.212000] cfg80211: Calling CRDA to update world regulatory domain
[   10.220000] cfg80211: World regulatory domain updated:
[   10.224000] cfg80211:  DFS Master region: unset
[   10.228000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (dfs_cac_time)
[   10.240000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
[   10.248000] cfg80211:   (2457000 KHz - 2482000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
[   10.256000] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (N/A, 2000 mBm), (N/A)
[   10.264000] cfg80211:   (5170000 KHz - 5250000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)
[   10.272000] cfg80211:   (5735000 KHz - 5835000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)
[   10.280000] cfg80211:   (57240000 KHz - 63720000 KHz @ 2160000 KHz), (N/A, 0 mBm), (N/A)
[   10.352000] PPP generic driver version 2.4.2
[   10.360000] NET: Registered protocol family 24
[   10.400000] PCI: Enabling device 0000:00:01.0 (0000 -&gt; 0002)
[   10.408000] rt2800pci 0000:00:01.0: setting latency timer to 64
[   10.408000] ieee80211 phy0: rt2x00lib_request_eeprom_file: Info - Loading EEPROM data from &#039;rt2x00.eeprom&#039;.
[   10.420000] ieee80211 phy0: rt2x00_set_rt: Info - RT chipset 3572, rev 0223 detected
[   10.428000] ieee80211 phy0: rt2x00_set_rf: Info - RF chipset 0008 detected
[   10.436000] ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;
[   14.032000] bcm63xx_enetsw bcm63xx_enetsw.0: link UP on port1, 100Mbps, full-duplex
[   17.588000] bcm63xx_enetsw bcm63xx_enetsw.0: link UP on port1, 100Mbps, full-duplex
[   17.600000] device eth0.1 entered promiscuous mode
[   17.604000] device eth0 entered promiscuous mode
[   17.612000] br-lan: port 1(eth0.1) entered forwarding state
[   17.616000] br-lan: port 1(eth0.1) entered forwarding state
[   18.612000] IPv6: ADDRCONF(NETDEV_CHANGE): eth0.1: link becomes ready
[   18.812000] cfg80211: Calling CRDA for country: RO
[   18.824000] cfg80211: Regulatory domain changed to country: RO
[   18.828000] cfg80211:  DFS Master region: ETSI
[   18.832000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (dfs_cac_time)
[   18.844000] cfg80211:   (2402000 KHz - 2482000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
[   18.852000] cfg80211:   (5170000 KHz - 5250000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)
[   18.860000] cfg80211:   (5250000 KHz - 5330000 KHz @ 80000 KHz), (N/A, 2000 mBm), (0 s)
[   18.868000] cfg80211:   (5490000 KHz - 5710000 KHz @ 80000 KHz), (N/A, 2700 mBm), (0 s)
[   18.876000] cfg80211:   (57240000 KHz - 65880000 KHz @ 2160000 KHz), (N/A, 4000 mBm), (N/A)
[   19.620000] br-lan: port 1(eth0.1) entered forwarding state
[   20.996000] ieee80211 phy0: rt2x00lib_request_firmware: Info - Loading firmware file &#039;rt2860.bin&#039;
[   21.172000] ieee80211 phy0: rt2x00lib_request_firmware: Info - Firmware detected - version: 0.34
[   21.272000] IPv6: ADDRCONF(NETDEV_UP): wlan0-1: link is not ready
[   21.280000] device wlan0-1 entered promiscuous mode
[   21.532000] IPv6: ADDRCONF(NETDEV_UP): wlan0: link is not ready
[   23.052000] wlan0: authenticate with b0:48:7a:d1:3d:a4
[   23.080000] wlan0: send auth to b0:48:7a:d1:3d:a4 (try 1/3)
[   23.088000] wlan0: authenticated
[   23.096000] wlan0: associate with b0:48:7a:d1:3d:a4 (try 1/3)
[   23.104000] wlan0: RX AssocResp from b0:48:7a:d1:3d:a4 (capab=0x431 status=0 aid=5)
[   23.116000] wlan0: associated
[   23.272000] IPv6: ADDRCONF(NETDEV_CHANGE): wlan0: link becomes ready
[   24.120000] br-lan: port 2(wlan0-1) entered forwarding state
[   24.124000] br-lan: port 2(wlan0-1) entered forwarding state
[   24.132000] IPv6: ADDRCONF(NETDEV_CHANGE): wlan0-1: link becomes ready
[   26.128000] br-lan: port 2(wlan0-1) entered forwarding state</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p231913">
				<div class="post-metadata">
					<div class="post-num">Post #55</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						1 May 2014, 00:17					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I tested a little bit the new build. I would say it is pretty usable. There are still things that could be improuved:</p><p>- the samba transfer speed, but I guess it&#039;s related to ntfs-3g and samba parameters. I could use ext3/4. The read speed is 3.2 Mb/s and write speed is 1.2 Mb/s<br />- The led configuration; the only leds that work well are: power, wifi and usb. I can&#039;t test dsl, voip, and i never used wps; The LANn and internet leds stay on and blink even if cable removed. After configuration, the leds blink, but after deleting them, they still blink (until reboot). In configuration is not an option related to port, but only to interface (br-la, eth0, eth0.1, wlan0, etc) so all lan and internet leds blink the same configured with netdev. I don&#039;t know whas phy0assoc, and all phy0 mean.</p><p>Anyway, it&#039;s ok.<br />I installed the package shadow-useradd and added a new user. then, with smbpasswd added a samba user. Then, I was able to test samba and it worked. Minidlna works. I am testing now to see if it refreshes after copying a movie. Pure-ftpd is a little harder for me to configure, but i&#039;ll do it. So all in all, this (v9) is a good build, usable. I&#039;ll be ready to test further builds to complete the adition of this very nice device. Now I don&#039;t have to throw it away, I can use it as a network extender and also a network storage and multimedia device.</p><p>I still don&#039;t know how to configure the switch (vlans) and how to turn it into a wired router. Now I use it as a wireless client and acces point (a ssid&nbsp; as wireless client and a ssid as an acces point bridged with the lan ports).</p><p>I think maybe shadow-useradd could be included in the build.</p><p>For the wifi button: do you think I could deactivate by software (led off) and see if any gpio changes?</p><p>...and minidlna inotify works, meaning it refreshes the database after copying a media file.</p>											<p class="post-edited">(Last edited by <strong>fratzicu</strong> on 1 May 2014, 00:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p231915">
				<div class="post-metadata">
					<div class="post-num">Post #56</div>
					<div class="post-author">danitool</div>
					<div class="post-datetime">
						1 May 2014, 00:48					</div>
				</div>
				<div class="post-content content">
					<p>Nice.</p><p>About the samba transfer speed using ntfs filesystems, it&#039;s normal such poor performances. The best performance is always better using ftp and/or ext2/3/4 filesystems, or might be even better with XFS.</p><p>About the leds, the triggers don&#039;t provide all the functionallity one might expect. When configured with ethernet interfaces you can only monitor the traffic, since the interface is always up even if you unplug the cable, the led stays on, and may blink because is still trying to send data.<br />phy0assoc, and other phy0xxx are wifi stuff, you can use it, but no need to do it since the wifi already has its own led</p><p>You can check if the leds are correctly added with a command like this, for the VOIP led:<br /></p><div class="codebox"><pre><code>echo 255 &gt; /sys/class/leds/HW65x\:green\:voip/brightness
echo 0 &gt; /sys/class/leds/HW65x\:green\:voip/brightness</code></pre></div><p>you can do it for each led, also you can include this command in custom scripts as indicators, or use triggers<br /></p><div class="codebox"><pre><code>root@OpenWrt:/# cat /sys/class/leds/HW65x\:green\:voip/trigger
[none] timer default-on netdev 
root@OpenWrt:/# echo timer &gt; /sys/class/leds/HW65x\:green\:voip/trigger</code></pre></div><p>About the switch, you need to know how to deal with tags and VLANS in Luci, or editing the config files.</p><p>About the missing gpio button, still nobody knows why some routers aren&#039;t capable of detecting gpios for some buttons, might be there is IRQ stuff involved, but OpenWrt has no IRQ code for gpios in bcm63xx.</p><p>Next days probably I&#039;ll post here a link to github with this router added to a repo.</p><p>Regards</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p231917">
				<div class="post-metadata">
					<div class="post-num">Post #57</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						1 May 2014, 01:06					</div>
				</div>
				<div class="post-content content">
					<p>Thanks, great work. I can be still of assistance if needed.<br />Maybe a progress will be made when they will release the sourcecode.</p><p>When you will make available the github, I will try to compile some images that I will put on my google website.</p>											<p class="post-edited">(Last edited by <strong>fratzicu</strong> on 1 May 2014, 01:13)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p231965">
				<div class="post-metadata">
					<div class="post-num">Post #58</div>
					<div class="post-author">danitool</div>
					<div class="post-datetime">
						1 May 2014, 17:03					</div>
				</div>
				<div class="post-content content">
					<p>Hi again.<br />I&#039;ve made another firmware this time with this modifications<br /></p><div class="codebox"><pre><code>--- a/arch/mips/kernel/smp-bmips.c
+++ b/arch/mips/kernel/smp-bmips.c
@@ -73,6 +73,8 @@
     case CPU_BMIPS4380:
         /* arbitration priority */
         clear_c0_brcm_cmt_ctrl(0x30);
+        /* Dcache priority to cpu1 */
+        set_c0_brcm_cmt_ctrl(1 &lt;&lt; 5);
 
         /* NBK and weak order flags */
         set_c0_brcm_config_0(0x30000);</code></pre></div><p>This should bring cache priority to the core1<br /></p><div class="codebox"><pre><code>[*] Built-in kernel command line
   (root=/dev/mtdblock2 rootfstype=squashfs,jffs2 noinitrd console=ttyS0,115200 isolcpus=0)</code></pre></div><p>and this isolates the cpu0</p><p>With this trick the transfer speeds should improve a bit: IRQs will be managed by the first core while applications run on the second core. The performance will only be better in scenarios with a lot of interrupts, for other scenarios it can be worse.</p><p>I also included shadow-useradd</p><p><a href="https://drive.google.com/file/d/0B-EMoBe-_OdBOEFIc3h1eWhUUjA/edit?usp=sharing">openwrt-HG655x-squashfs-cfe-10.bin</a></p><p>Regards</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p231978">
				<div class="post-metadata">
					<div class="post-num">Post #59</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						1 May 2014, 18:55					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I can&#039;t wait to test it.</p><p>What is the maximum flash image size for this device? is it 8 mb?<br />Can this be used also with 3G modem?<br />What does it mean it can be worse? \does it alter the wi-fi transfer speed?</p><p>I&nbsp; have another little thing, I guess it could be nice... the usb drive to be automounted after boot. I guess it could be put a mount command in the openwrt autostart script.</p>											<p class="post-edited">(Last edited by <strong>fratzicu</strong> on 1 May 2014, 19:13)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p231982">
				<div class="post-metadata">
					<div class="post-num">Post #60</div>
					<div class="post-author">danitool</div>
					<div class="post-datetime">
						1 May 2014, 19:08					</div>
				</div>
				<div class="post-content content">
					<p>The max size for a firmware image is about 7.4 MB since you need to leave some free space for configuration files (jffs2 partition) and also for CFE, caldata, and nvram. And yes it can be also used as a 3G modem, I can try to build another firmware &lt; 7.4MB, just tell which packages you need.</p><p>Worse in some scenarios, but probably not scenarios with data transfers involved, since in these scenarios lot of IRQs are generated, then the wifi transfer speed shouldn&#039;t be worse, it should be better with high bandwidth transfers.</p>											<p class="post-edited">(Last edited by <strong>danitool</strong> on 1 May 2014, 19:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p231990">
				<div class="post-metadata">
					<div class="post-num">Post #61</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						1 May 2014, 20:34					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I tested the transfer speed.... and it&#039;s the same. So I think there is no need for CPU affinity.&nbsp; I guess you could put also the 3g packages and it should be complete. </p><p>optionally, openvpn (if it fits) and openvpn-luci, and opendchub and printserver could be allright.</p><p>In the past I had problems connecting to openwrt samba shares with a media player and the foles and folders were not in alphabetical order. It needed the option VFS_dirsort compiled in samba.</p><p>That would be all perfect.</p><p>Now I am learning to use vlans and I succeeded to use one of the LAN ports as WAN, so it can be used as a clasic wired router. (until nou I used a wireless ssid as wan).</p><p>Actually I would like to use it as an extender:</p><p>wired..... meaning I want to connect a wired lan port to the main router and the remaining lan ports and th ewireless radio to act as a bridge with the same IP class as the main network and transmit the DHCP packages to the main router. I think this is called client bridge</p><p>wireless....meaning I want to connect a wireless ssid to the main router; and another wireless ssid and the four lan ports to act as a bridge with the same IP class as the main network and transmit the DHCP packages to the main router. I think this is called repeater bridge.</p><p>of course, this could be done easily with WDS but in this interface of luci if I set the radio to act as an AP WDS it doesn&#039;t give me the option to introduce the BSSID of the main router. Also, I noticed the wireless scan doesn&#039;t work. Maybe a package is missing.</p><p>I&#039;ll keep you posted on my progress</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p231996">
				<div class="post-metadata">
					<div class="post-num">Post #62</div>
					<div class="post-author">danitool</div>
					<div class="post-datetime">
						1 May 2014, 21:30					</div>
				</div>
				<div class="post-content content">
					<p>Ok, this time without the affinity.</p><p>Now with 3g stuff, printserver, opendchub, and openvpn-luci. But openvpn-luci is marked as broken, it may not work.<br />For client bridge I included relayd, but don&#039;t expect it will work for you, sometimes it doesn&#039;t, or doesn&#039;t work very good.<br />Scanning, as reported by some people with other routers, sometimes luci decides to ignore scans with ralink or other wifis.</p><p><a href="https://drive.google.com/file/d/0B-EMoBe-_OdBdHBBRVotT01uYnc/edit?usp=sharing">openwrt-HG655x-squashfs-cfe-11.bin</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232003">
				<div class="post-metadata">
					<div class="post-num">Post #63</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						1 May 2014, 21:57					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I succeeded in understanding switch and VLANs. So in this device there are 4 LAN ports, numbered from 0 to 3. As in post</p><p><a href="https://forum.openwrt.org/viewtopic.php?pid=59160#p59160">https://forum.openwrt.org/viewtopic.php â€¦ 160#p59160</a></p><p>the LAN and phone ports are, from the power plug to the other side of the box:</p><p>openwrt switch port&nbsp; &nbsp; &nbsp;LAN port (tty output and box label)&nbsp; &nbsp; &nbsp; my vlan config&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;My interfaces&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;firewall zone<br />0....................................................1........................untagged eth0.3,vlan3............ admin (192.168.1.1).............................LAN<br />1....................................................2........................untagged eth0.1,vlan1.............lan, br-lan(static IP inside main LAN)....LAN<br />2....................................................3........................untagged eth0.1,vlan1.............lan, br-lan(static IP inside main LAN)....LAN<br />3....................................................4........................untagged eth0.2,vlan2.............wan, (static IP inside main LAN)..........WAN<br />4................................................phone 1<br />5................................................phone2<br />6................................................missing (who knows?)<br />7...................................................dsl<br />CPU................................................nothing..............................vlan1,2,3 as tagged</p><p>WLAN...........................................................................wlan0 acces point.................br-lan(static IP inside main LAN)...........LAN<br />WWAN..........................................................................wlan0.1 client.......................wwan(static IP inside main LAN).........WAN</p><p>Ok. so with this switch config, I have always the port 0 (LAN1) that that I can connect to for administration purposes, that is not inside any bridge. No interface has dhcp except br-LAN.</p><p>Now, for a wired client bridge and repeater, meaning connect the device by wire and give wired access on the other lan ports and wireless access, I have to disable the interfaces WWAN and WLAN. So the LAN port LAN3 is used for wired connection with the main router and the LAN2 for other client. I tested and the connected devices to lan2 and to wireless WLAN AP can communicate with each other and with the devices connected to the main router. WAN gateway and dns have to be blank for the router to communicate with the internet</p><div class="codebox"><pre><code>root@OpenWrt:/# vi /etc/config/network

config interface &#039;loopback&#039;
        option ifname &#039;lo&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;127.0.0.1&#039;
        option netmask &#039;255.0.0.0&#039;

config globals &#039;globals&#039;
        option ula_prefix &#039;fdfc:c9ca:f0af::/48&#039;

config interface &#039;lan&#039;
        option type &#039;bridge&#039;
        option proto &#039;static&#039;
        option netmask &#039;255.255.255.0&#039;
        option ip6assign &#039;60&#039;
        option _orig_ifname &#039;eth0.1 wlan0-1 wlan0&#039;
        option _orig_bridge &#039;true&#039;
        option ifname &#039;eth0.1&#039;
        option mtu &#039;1480&#039;
        option ipaddr &#039;192.168.46.4&#039;
        option gateway &#039;192.168.46.1&#039;
        option dns &#039;192.168.46.1&#039;

config switch
        option name &#039;eth0&#039;
        option reset &#039;1&#039;
        option enable_vlan &#039;1&#039;

config switch_vlan
        option device &#039;eth0&#039;
        option vlan &#039;1&#039;
        option ports &#039;1 2 8t&#039;

config interface &#039;wwan&#039;
        option _orig_ifname &#039;wlan0&#039;
        option _orig_bridge &#039;false&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;192.168.46.3&#039;
        option netmask &#039;255.255.255.0&#039;
        option gateway &#039;192.168.46.1&#039;
        option dns &#039;192.168.46.1&#039;
        option mtu &#039;1480&#039;

config switch_vlan
        option device &#039;eth0&#039;
        option vlan &#039;2&#039;
        option ports &#039;3 8t&#039;

config switch_vlan
        option device &#039;eth0&#039;</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:~# vi /etc/config/wireless

config wifi-device &#039;radio0&#039;
        option type &#039;mac80211&#039;
        option channel &#039;11&#039;
        option hwmode &#039;11ng&#039;
        option path &#039;pci0000:00/0000:00:01.0&#039;
        list ht_capab &#039;GF&#039;
        list ht_capab &#039;SHORT-GI-20&#039;
        list ht_capab &#039;SHORT-GI-40&#039;
        list ht_capab &#039;TX-STBC&#039;
        list ht_capab &#039;RX-STBC12&#039;
        option txpower &#039;20&#039;
        option country &#039;RO&#039;
        option htmode &#039;HT40-&#039;

config wifi-iface
        option device &#039;radio0&#039;
        option mode &#039;ap&#039;
        option network &#039;lan&#039;
        option encryption &#039;psk-mixed&#039;
        option key &#039;yourwifiapkey&#039;
        option ssid &#039;HuaweiOpenwrt&#039;

config wifi-iface
        option device &#039;radio0&#039;
        option ssid &#039;Fratzicu&#039;
        option mode &#039;sta&#039;
        option encryption &#039;psk-mixed&#039;
        option key &#039;yourmainrouterkey&#039;
        option network &#039;wwan&#039;
        option disabled &#039;1&#039;</code></pre></div><p>For a Wireless client router and repeater, meaning connect to the main router with a wireless ssid and give access to internet with another ssid and the LAN ports (but in another IP class), I have to enable the WWAN (and connect to the main AP as a client, give also gateway and DNS IP of the main router) and modify the static IP of the br-lan (i.e from 192.168.46.4 to 192.168.71.4)</p><p>For a Wired client router and repeater, meaning connect to the main router via a wired connection and give access to internet with the other LAN ports and the wireless AP, I have to enable the WLAN (and connect it to the main router, give also gateway and DNS IP of the main router) and modify the static IP of the br-lan (i.e from 192.168.46.4 to 192.168.71.4)</p><p>For a wireless client bridge and repeater, I guess I have to enable the WWAN and modify it&#039;s firewall assignment from WAN to LAN and bridge it to the br-lan. I didn&#039;t try it yet. Also, I think WDS should work, but I didn&#039;t figure out how to do it in openwrt and it is said it doesn&#039;t work between different vendors; br-lan dhcp disabled; firewall disabled; dnsmasq restart. Wireless security and settings on both wireless client and acces point must match with main router.</p><p>I tried this config but it doesn&#039;t work. I don&#039;t know if it is a way. Also, I don&#039;t know what is with &quot;option type &#039;broadcom&#039; &quot;. When I modify this in /etc/config/wireless, it modifies the options in Luci webinterface. It seems that broadcom chipsets supports wireless client repeater bridge, but I don&#039;t know hoe to set this up.</p><div class="codebox"><pre><code>root@OpenWrt:/# vi /etc/config/network

config interface &#039;loopback&#039;
        option ifname &#039;lo&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;127.0.0.1&#039;
        option netmask &#039;255.0.0.0&#039;

config globals &#039;globals&#039;
        option ula_prefix &#039;fdfc:c9ca:f0af::/48&#039;

config interface &#039;lan&#039;
        option type &#039;bridge&#039;
        option proto &#039;static&#039;
        option netmask &#039;255.255.255.0&#039;
        option ip6assign &#039;60&#039;
        option _orig_ifname &#039;eth0.1 wlan0-1 wlan0&#039;
        option _orig_bridge &#039;true&#039;
        option mtu &#039;1480&#039;
        option ipaddr &#039;192.168.46.4&#039;
        option gateway &#039;192.168.46.1&#039;
        option dns &#039;192.168.46.1&#039;
        option ifname &#039;eth0.1&#039;

config switch
        option name &#039;eth0&#039;
        option reset &#039;1&#039;
        option enable_vlan &#039;1&#039;

config switch_vlan
        option device &#039;eth0&#039;
        option vlan &#039;1&#039;
        option ports &#039;1 2 8t&#039;

config interface &#039;wwan&#039;
        option _orig_ifname &#039;wlan0&#039;
        option _orig_bridge &#039;false&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;192.168.46.3&#039;
        option netmask &#039;255.255.255.0&#039;
        option gateway &#039;192.168.46.1&#039;
        option dns &#039;192.168.46.1&#039;
        option mtu &#039;1480&#039;

config switch_vlan
        option device &#039;eth0&#039;
        option vlan &#039;2&#039;
        option ports &#039;3 8t&#039;

config switch_vlan
        option device &#039;eth0&#039;
        option vlan &#039;3&#039;
        option ports &#039;0 8t&#039;

config interface &#039;Admin&#039;
        option proto &#039;static&#039;
        option ifname &#039;eth0.3&#039;</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:/# vi /etc/config/wireless

config wifi-device &#039;radio0&#039;
        option type &#039;mac80211&#039;
        option channel &#039;11&#039;
        option hwmode &#039;11ng&#039;
        option path &#039;pci0000:00/0000:00:01.0&#039;
        list ht_capab &#039;GF&#039;
        list ht_capab &#039;SHORT-GI-20&#039;
        list ht_capab &#039;SHORT-GI-40&#039;
        list ht_capab &#039;TX-STBC&#039;
        list ht_capab &#039;RX-STBC12&#039;
        option txpower &#039;20&#039;
        option country &#039;RO&#039;
        option htmode &#039;HT40-&#039;

config wifi-iface
        option device &#039;radio0&#039;
        option mode &#039;ap&#039;
        option ssid &#039;OpenWrt&#039;
        option encryption &#039;psk-mixed&#039;
        option key &#039;mainrouterkey&#039;
        option network &#039;lan&#039;

config wifi-iface
        option device &#039;radio0&#039;
        option ssid &#039;Fratzicu&#039;
        option mode &#039;sta&#039;
        option encryption &#039;psk-mixed&#039;
        option key &#039;mainrouterkey&#039;
        option bssid &#039;B0:48:7A:D1:3D:A4&#039;
        option network &#039;wwan lan&#039;</code></pre></div><p>Of course, I guess the switch ports can be freed for LAN as you may need.</p><p>You can find printscreens here <a href="https://app.box.com/FratzicuPublic-Hg655b-fratzicu">https://app.box.com/FratzicuPublic-Hg655b-fratzicu</a></p>											<p class="post-edited">(Last edited by <strong>fratzicu</strong> on 31 Jan 2015, 14:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232075">
				<div class="post-metadata">
					<div class="post-num">Post #64</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						2 May 2014, 15:11					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Is there a possibility to compile openwrt minidlna with another icon of the media server, not just the linux penguin? I did this on ubuntu.</p><p>Danitool, I&#039;m testing now your last build and so far it works great: <br />samba<br />minidlna<br />pure-ftpd<br />wired bridge repeater<br /> didn&#039;t test opendchub or openvpn (luci-app broken)</p><p>The build is perfectly usable. The things left to solve, but not important are:<br />luci-app-openvpn broken<br />the wi-fi button (I don&#039;t use it anyway)<br />the LEDs (I don&#039;t bother; LAN leds don&#039;t work, but in CFE work); power, USB and Wi-fi work great; I set&nbsp; dsl LED for data txrx on br-lan<br />the VDSL/ADSL driver (I don&#039;t use it)</p><br /><p>I am waiting for your repository.</p><p>Thanks for your great work.<br />Best regards.</p>											<p class="post-edited">(Last edited by <strong>fratzicu</strong> on 3 May 2014, 13:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232221">
				<div class="post-metadata">
					<div class="post-num">Post #65</div>
					<div class="post-author">danitool</div>
					<div class="post-datetime">
						3 May 2014, 19:52					</div>
				</div>
				<div class="post-content content">
					<p>The patch for Openwrt support was added to a github repository (thanks to Noltari).<br /><a href="https://github.com/openwrt-es/barrier-breaker-openwrt/commits/barrier-breaker_14.04">https://github.com/openwrt-es/barrier-b â€¦ aker_14.04</a></p><p>To download<br /></p><div class="codebox"><pre><code>git clone git://github.com/openwrt-es/barrier-breaker-openwrt.git -b barrier-breaker_14.04</code></pre></div><p>To build:<br /></p><div class="codebox"><pre><code>./scripts/feeds update
./scripts/feeds install luci
make menuconfig</code></pre></div><p>select the bcm63xx target, HG655x profile, and other packages you need<br />Exit menu saving changes, and make the world<br /></p><div class="codebox"><pre><code>make V=s</code></pre></div>											<p class="post-edited">(Last edited by <strong>danitool</strong> on 23 May 2014, 12:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232224">
				<div class="post-metadata">
					<div class="post-num">Post #66</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						3 May 2014, 20:24					</div>
				</div>
				<div class="post-content content">
					<p>Great!</p><p>Do you have also the .config file used for your last build no 11?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232225">
				<div class="post-metadata">
					<div class="post-num">Post #67</div>
					<div class="post-author">danitool</div>
					<div class="post-datetime">
						3 May 2014, 20:30					</div>
				</div>
				<div class="post-content content">
					<p>Yes</p><p><a href="http://pastebin.com/PtaS7d9G">http://pastebin.com/PtaS7d9G</a></p><p>But note you need to install the required packages in the buildroot with<br /></p><div class="codebox"><pre><code>./scripts/feeds install yourpackage</code></pre></div><p>Regards</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232227">
				<div class="post-metadata">
					<div class="post-num">Post #68</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						3 May 2014, 21:20					</div>
				</div>
				<div class="post-content content">
					<p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232235">
				<div class="post-metadata">
					<div class="post-num">Post #69</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						3 May 2014, 22:53					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I successfully compiled the first image. It has 8.0 Mb (7.995.396 bytes). Do you think it will fit?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232833">
				<div class="post-metadata">
					<div class="post-num">Post #70</div>
					<div class="post-author">gamer8martie</div>
					<div class="post-datetime">
						8 May 2014, 22:06					</div>
				</div>
				<div class="post-content content">
					<p>Hi i cant get the LAN1= WAN to connect to PPoE it shows me as disconnected or the router sofrware crash.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232895">
				<div class="post-metadata">
					<div class="post-num">Post #71</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						9 May 2014, 19:01					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />I guess my last built&nbsp; image is too big. <br /></p><div class="codebox"><pre><code>2014 kern.info kernel: [    0.296000] physmap-flash.0: Found 1 x16 devices at 0x0 in 16-bit bank. Manufacturer ID 0x000001 Chip ID 0x001000
Sat May  3 19:34:50 2014 kern.debug kernel: [    0.304000] physmap-flash.0: Found an alias at 0x800000 for the chip at 0x0
Sat May  3 19:34:50 2014 kern.debug kernel: [    0.304000] physmap-flash.0: Found an alias at 0x1000000 for the chip at 0x0
Sat May  3 19:34:50 2014 kern.debug kernel: [    0.304000] physmap-flash.0: Found an alias at 0x1800000 for the chip at 0x0
Sat May  3 19:34:50 2014 kern.info kernel: [    0.304000] Amd/Fujitsu Extended Query Table at 0x0040
Sat May  3 19:34:50 2014 kern.info kernel: [    0.312000]   Amd/Fujitsu Extended Query version 1.3.
Sat May  3 19:34:50 2014 kern.notice kernel: [    0.316000] number of CFI chips: 1
Sat May  3 19:34:50 2014 kern.info kernel: [    0.320000] bcm63xxpart: CFE boot tag found with version 7 and board type HW65x
Sat May  3 19:34:50 2014 kern.info kernel: [    0.328000] bcm63xxpart: Partition 0 is CFE offset 0 and length 20000
Sat May  3 19:34:50 2014 kern.info kernel: [    0.332000] bcm63xxpart: Partition 1 is kernel offset 20100 and length 10ff00
Sat May  3 19:34:50 2014 kern.info kernel: [    0.340000] bcm63xxpart: Partition 2 is rootfs offset 130000 and length 100690000
Sat May  3 19:34:50 2014 kern.info kernel: [    0.348000] bcm63xxpart: Partition 3 is cal_data offset 7c0000 and length 10000
Sat May  3 19:34:50 2014 kern.info kernel: [    0.356000] bcm63xxpart: Partition 4 is nvram offset 7f0000 and length 10000
Sat May  3 19:34:50 2014 kern.info kernel: [    0.364000] bcm63xxpart: Partition 5 is linux offset 20000 and length 7a0000
Sat May  3 19:34:50 2014 kern.info kernel: [    0.372000] bcm63xxpart: Spare partition is offset 7c0004 and length fffffffc
Sat May  3 19:34:50 2014 kern.notice kernel: [    0.380000] 6 bcm63xxpart partitions found on MTD device physmap-flash.0
Sat May  3 19:34:50 2014 kern.notice kernel: [    0.384000] Creating 6 MTD partitions on &quot;physmap-flash.0&quot;:
Sat May  3 19:34:50 2014 kern.notice kernel: [    0.392000] 0x000000000000-0x000000020000 : &quot;CFE&quot;
Sat May  3 19:34:50 2014 kern.notice kernel: [    0.400000] 0x000000020100-0x000000130000 : &quot;kernel&quot;
Sat May  3 19:34:50 2014 kern.warn kernel: [    0.404000] mtd: partition &quot;kernel&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
Sat May  3 19:34:50 2014 kern.notice kernel: [    0.420000] 0x000000130000-0x0001007c0000 : &quot;rootfs&quot;
Sat May  3 19:34:50 2014 kern.warn kernel: [    0.424000] mtd: partition &quot;rootfs&quot; extends beyond the end of device &quot;physmap-flash.0&quot; -- size truncated to 0x6d0000
Sat May  3 19:34:50 2014 kern.notice kernel: [    0.436000] mtd: device 2 (rootfs) set to be root filesystem
Sat May  3 19:34:50 2014 kern.info kernel: [    0.444000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=0x7c0000, len=0x40000
Sat May  3 19:34:50 2014 kern.notice kernel: [    0.452000] 0x0000007c0000-0x000000800000 : &quot;rootfs_data&quot;
Sat May  3 19:34:50 2014 kern.notice kernel: [    0.460000] 0x0000007c0000-0x0000007d0000 : &quot;cal_data&quot;
Sat May  3 19:34:50 2014 kern.notice kernel: [    0.468000] 0x0000007f0000-0x000000800000 : &quot;nvram&quot;
Sat May  3 19:34:50 2014 kern.notice kernel: [    0.476000] 0x000000020000-0x0000007c0000 : &quot;linux&quot;
Sat May  3 19:34:50 2014 kern.info kernel: [    0.484000] bcm63xx-spi bcm63xx-spi: at 0xb0000800 (irq 9, FIFOs size 542)</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232906">
				<div class="post-metadata">
					<div class="post-num">Post #72</div>
					<div class="post-author">danitool</div>
					<div class="post-datetime">
						9 May 2014, 21:07					</div>
				</div>
				<div class="post-content content">
					<p>You shouldn&#039;t use image size &gt; 7.4 MB aprox. because they won&#039;t work, or you may lose your configuration, or in the worst case there is a possibility of destroying the calibration data when flashing the image via CFE. </p><p>The alternative is to use extroot. BTW my recommendation is to keep the system as tiny as possible,&nbsp; unless you need specific applications, room hungry, such as asterisk.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232913">
				<div class="post-metadata">
					<div class="post-num">Post #73</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						9 May 2014, 22:58					</div>
				</div>
				<div class="post-content content">
					<p>OK.</p><p>I don&#039;t know if I am right, but I noticed that more packages fit when you include themat the begining in the copiled image than if you try to install theafterwards. Of course, there is usually no need for a lot of packages. Just saying.</p><p>By the way, how do I find the release version of the openwrt trunk from git?</p>											<p class="post-edited">(Last edited by <strong>fratzicu</strong> on 9 May 2014, 23:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232931">
				<div class="post-metadata">
					<div class="post-num">Post #74</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						10 May 2014, 02:10					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Ihave 2 devices HG655b. Iuploaded your 11th compiled firmware but for some reason the wifidoesn&#039;t work. When I flash the stock firmware, it works.What could be?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232952">
				<div class="post-metadata">
					<div class="post-num">Post #75</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						10 May 2014, 15:45					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Here are some informations extracted formy second device that doesn&#039;t work (wifi does not work with openwrt 11th flash image).</p><p>0) board images can be found here<br /><a href="http://www.wuala.com/fratzicu/Public/Huawei-HG655b-device2/Board-pictures-dev2/">http://www.wuala.com/fratzicu/Public/Hu â€¦ ures-dev2/</a></p><p>1) stock firmware - <a href="http://www.wuala.com/fratzicu/Public/Huawei-HG655b-device2/Hg655b-stock-partitions-dump-and-log/">http://www.wuala.com/fratzicu/Public/Hu â€¦ p-and-log/</a><br />you can find&nbsp; there logs and a flash backup tha I don&#039;tknow it&#039;s ok<br />- first, the device works and also wifi. I checked withmy samsung galaxy s3 smartphone. I can connect to wifi and access the web ui<br />- te serial output gets to login prompt that is passed with default admin admin user and passwd and then it gets to an ATP prompt. <br /></p><div class="codebox"><pre><code>-------------------------------
-----Welcome to ATP Cli------
-------------------------------

Login: admin
Password:
ATP&gt;shell

BusyBox vv1.9.1 (2011-09-01 17:42:00 CST) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.</code></pre></div><p>Here i couldn&#039;t find much to do but I found there is the command &quot;shell&quot; that brings us to a busybox prompt. cat mtd command gives<br /></p><div class="codebox"><pre><code># cat /proc/mtd
dev:    size   erasesize  name
mtd0: 004d4000 00000000 &quot;BCM63XX RootFS&quot;</code></pre></div><p>but there is no mtd dd command<br />I found you can backup apartition&nbsp; usingth catcommnd but who knows. I connected a usb stick<br /></p><div class="codebox"><pre><code># usb 1-2: new high speed USB device using ehci_hcd and address 2
usb 1-2: configuration #1 chosen from 1 choice
scsi0 : SCSI emulation for USB Mass Storage devices
usb-storage: device found at 2
usb-storage: waiting for device to settle before scanning
scsi 0:0:0:0: Direct-Access     CHIPSBNK v3.3.8.8         5.00 PQ: 0 ANSI: 2
SCSI device sda: 2049024 512-byte hdwr sectors (1049 MB)
sda: Write Protect is off
sda: Mode Sense: 0b 00 00 08
sda: assuming drive cache: write through
SCSI device sda: 2049024 512-byte hdwr sectors (1049 MB)
sda: Write Protect is off
sda: Mode Sense: 0b 00 00 08
sda: assuming drive cache: write through
 sda: sda1
 sda: p1 exceeds device capacity
sd 0:0:0:0: Attached scsi removable disk sda

 SIGUSR1 come in
usb-storage: device scan complete

 SIGALRM come in</code></pre></div><p>cat /dev/mtd gives the output, but can&#039;t backup with cat<br /></p><div class="codebox"><pre><code># cat /dev/mtd
/dev/mtd0       /dev/mtd3       /dev/mtd6       /dev/mtdblock2  /dev/mtdblock5
/dev/mtd1       /dev/mtd4       /dev/mtdblock0  /dev/mtdblock3  /dev/mtdblock6
/dev/mtd2       /dev/mtd5       /dev/mtdblock1  /dev/mtdblock4
# cat /dev/mtd0 &gt; /mnUse default bin /var/upnp now ...
# cat /dev/mtd0 &gt; /mnt/usb1_1/hg655b-orig-mtd0</code></pre></div><p>cat /proc/partitions gives the output and I could backup with cat<br /></p><div class="codebox"><pre><code># cat /proc/partitions
major minor  #blocks  name

  31     0       4944 mtdblock0
   8     0    1024512 sda
   8     1    1024512 sda1
# cat /dev/mtdblock0 &gt; /mnt/usb1_1/hg655b-orig-mtdblock0
# cd /mnt/usb1_1/</code></pre></div><p>OK, so this is theinformation I could get. There isprobable more if you look in my wuala drive.</p><p>2) 003-openwrt firmware. Now, I flashed the 003 firmware image openwrt of danitool and I backed up the partitions that can be found here <a href="http://www.wuala.com/fratzicu/Public/Huawei-HG655b-device2/Hg655b-openwrt-partitions-dump/">http://www.wuala.com/fratzicu/Public/Hu â€¦ ions-dump/</a></p><p>cat/proc/mtd gave the output<br /></p><div class="codebox"><pre><code>root@OpenWrt:/# cat /proc/mtd
dev:    size   erasesize  name
mtd0: 00020000 00010000 &quot;CFE&quot;
mtd1: 0010ff00 00010000 &quot;kernel&quot;
mtd2: 00450000 00010000 &quot;rootfs&quot;
mtd3: 001b0000 00010000 &quot;rootfs_data&quot;
mtd4: 00010000 00010000 &quot;cal_data&quot;
mtd5: 00280000 00010000 &quot;dummy&quot;
mtd6: 00010000 00010000 &quot;nvram&quot;
mtd7: 00560000 00010000 &quot;linux&quot;
root@OpenWrt:/#</code></pre></div><p>In the kernel log I could find<br /></p><div class="codebox"><pre><code>[    0.316000] number of CFI chips: 1
[    0.320000] bcm63xxpart: CFE boot tag found with version 7 and board type HW65x
[    0.328000] bcm63xxpart: Partition 0 is CFE offset 0 and length 20000
[    0.336000] bcm63xxpart: Partition 1 is kernel offset 20100 and length 10ff00
[    0.340000] bcm63xxpart: Partition 2 is rootfs offset 130000 and length 450000
[    0.348000] bcm63xxpart: Partition 3 is cal_data offset 580000 and length 10000
[    0.356000] bcm63xxpart: Partition 4 is dummy offset 580000 and length 280000
[    0.364000] bcm63xxpart: Partition 5 is nvram offset 7f0000 and length 10000
[    0.372000] bcm63xxpart: Partition 6 is linux offset 20000 and length 560000
[    0.380000] bcm63xxpart: Spare partition is offset 3d0004 and length 1afffc
[    0.384000] 7 bcm63xxpart partitions found on MTD device physmap-flash.0
[    0.392000] Creating 7 MTD partitions on &quot;physmap-flash.0&quot;:
[    0.400000] 0x000000000000-0x000000020000 : &quot;CFE&quot;
[    0.404000] 0x000000020100-0x000000130000 : &quot;kernel&quot;
[    0.412000] mtd: partition &quot;kernel&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
[    0.424000] 0x000000130000-0x000000580000 : &quot;rootfs&quot;
[    0.432000] mtd: device 2 (rootfs) set to be root filesystem
[    0.440000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=0x3d0000, len=0x1b0000
[    0.448000] 0x0000003d0000-0x000000580000 : &quot;rootfs_data&quot;
[    0.456000] 0x000000580000-0x000000590000 : &quot;cal_data&quot;
[    0.464000] 0x000000580000-0x000000800000 : &quot;dummy&quot;
[    0.472000] 0x0000007f0000-0x000000800000 : &quot;nvram&quot;
[    0.480000] 0x000000020000-0x000000580000 : &quot;linux&quot;
[    0.488000] bcm63xx-spi bcm63xx-spi: at 0xb0000800 (irq 9, FIFOs size 542)
[    0.532000] b53_common: found switch: BCM63xx, rev 0
[    0.536000] bcm63xx-wdt bcm63xx-wdt:  started, timer margin: 30 sec
[    0.544000] TCP: cubic registered
[    0.548000] NET: Registered protocol family 17
[    0.552000] 8021q: 802.1Q VLAN Support v1.8
[    0.568000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
[    0.576000] Freeing unused kernel memory: 248K (80312000 - 80350000)
................................................
[    9.300000] ip_tables: (C) 2000-2006 Netfilter Core Team
[    9.392000] xt_time: kernel timezone is -0000
[    9.416000] cfg80211: Calling CRDA to update world regulatory domain
[    9.428000] cfg80211: World regulatory domain updated:
[    9.432000] cfg80211:  DFS Master region: unset
[    9.436000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (dfs_cac_time)
[    9.448000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
[    9.456000] cfg80211:   (2457000 KHz - 2482000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
[    9.464000] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (N/A, 2000 mBm), (N/A)
[    9.472000] cfg80211:   (5170000 KHz - 5250000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)
[    9.480000] cfg80211:   (5735000 KHz - 5835000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)
[    9.488000] cfg80211:   (57240000 KHz - 63720000 KHz @ 2160000 KHz), (N/A, 0 mBm), (N/A)
[    9.584000] PPP generic driver version 2.4.2
[    9.592000] NET: Registered protocol family 24
[    9.636000] PCI: Enabling device 0000:00:01.0 (0000 -&gt; 0002)
[    9.644000] rt2800pci 0000:00:01.0: setting latency timer to 64
[    9.644000] ieee80211 phy0: rt2x00lib_request_eeprom_file: Info - Loading EEPROM data from &#039;rt2x00.eeprom&#039;.
[    9.788000] ieee80211 phy0: rt2x00_set_rt: Info - RT chipset 3572, rev 0223 detected
[    9.796000] ieee80211 phy0: rt2800_init_eeprom: Error - Invalid RF chipset 0x0000 detected
[    9.804000] ieee80211 phy0: rt2x00lib_probe_dev: Error - Failed to allocate device</code></pre></div><p>3)I then flashed the 004 firmware with the wifi calibration data inserted and I had:<br /></p><div class="codebox"><pre><code>[    0.316000] number of CFI chips: 1
[    0.320000] bcm63xxpart: CFE boot tag found with version 7 and board type HW65x
[    0.328000] bcm63xxpart: Partition 0 is CFE offset 0 and length 20000
[    0.336000] bcm63xxpart: Partition 1 is kernel offset 20100 and length 10ff00
[    0.340000] bcm63xxpart: Partition 2 is rootfs offset 130000 and length 690000
[    0.348000] bcm63xxpart: Partition 3 is cal_data offset 7c0000 and length 10000
[    0.356000] bcm63xxpart: Partition 4 is dummy offset 580000 and length 280000
[    0.364000] bcm63xxpart: Partition 5 is nvram offset 7f0000 and length 10000
[    0.372000] bcm63xxpart: Partition 6 is linux offset 20000 and length 7a0000
[    0.380000] bcm63xxpart: Spare partition is offset 3d0004 and length 3efffc
[    0.384000] 7 bcm63xxpart partitions found on MTD device physmap-flash.0
[    0.392000] Creating 7 MTD partitions on &quot;physmap-flash.0&quot;:
[    0.400000] 0x000000000000-0x000000020000 : &quot;CFE&quot;
[    0.404000] 0x000000020100-0x000000130000 : &quot;kernel&quot;
[    0.412000] mtd: partition &quot;kernel&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
[    0.428000] 0x000000130000-0x0000007c0000 : &quot;rootfs&quot;
[    0.432000] mtd: device 2 (rootfs) set to be root filesystem
[    0.440000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=0x3d0000, len=0x3f0000
[    0.448000] 0x0000003d0000-0x0000007c0000 : &quot;rootfs_data&quot;
[    0.456000] 0x0000007c0000-0x0000007d0000 : &quot;cal_data&quot;
[    0.464000] 0x000000580000-0x000000800000 : &quot;dummy&quot;
[    0.472000] 0x0000007f0000-0x000000800000 : &quot;nvram&quot;
[    0.480000] 0x000000020000-0x0000007c0000 : &quot;linux&quot;
................................................
[    9.452000] ip_tables: (C) 2000-2006 Netfilter Core Team
[    9.544000] xt_time: kernel timezone is -0000
[    9.572000] cfg80211: Calling CRDA to update world regulatory domain
[    9.580000] cfg80211: World regulatory domain updated:
[    9.584000] cfg80211:  DFS Master region: unset
[    9.592000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (dfs_cac_time)
[    9.600000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
[    9.608000] cfg80211:   (2457000 KHz - 2482000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
[    9.616000] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (N/A, 2000 mBm), (N/A)
[    9.624000] cfg80211:   (5170000 KHz - 5250000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)
[    9.632000] cfg80211:   (5735000 KHz - 5835000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)
[    9.640000] cfg80211:   (57240000 KHz - 63720000 KHz @ 2160000 KHz), (N/A, 0 mBm), (N/A)
[    9.712000] PPP generic driver version 2.4.2
[    9.720000] NET: Registered protocol family 24
[    9.756000] PCI: Enabling device 0000:00:01.0 (0000 -&gt; 0002)
[    9.764000] ieee80211 phy0: rt2x00lib_request_eeprom_file: Info - Loading EEPROM data from &#039;rt2x00.eeprom&#039;.
[    9.904000] ieee80211 phy0: rt2x00_set_rt: Info - RT chipset 3572, rev 0223 detected
[    9.912000] ieee80211 phy0: rt2x00_set_rf: Info - RF chipset 0001 detected
...............................
[   53.908000] ieee80211 phy0: rt2x00lib_request_firmware: Info - Loading firmware file &#039;rt2860.bin&#039;
[   53.924000] ieee80211 phy0: rt2x00lib_request_firmware: Info - Firmware detected - version: 0.34
[   54.032000] IPv6: ADDRCONF(NETDEV_UP): wlan0: link is not ready
[   54.040000] device wlan0 entered promiscuous mode
[   54.064000] br-lan: port 2(wlan0) entered forwarding state
[   54.068000] br-lan: port 2(wlan0) entered forwarding state
[   54.072000] IPv6: ADDRCONF(NETDEV_CHANGE): wlan0: link becomes ready
[   56.072000] br-lan: port 2(wlan0) entered forwarding state
[  237.284000] device wlan0 left promiscuous mode
[  237.288000] br-lan: port 2(wlan0) entered disabled state
[  240.036000] IPv6: ADDRCONF(NETDEV_UP): tmp.radio0: link is not ready
[  241.844000] IPv6: ADDRCONF(NETDEV_UP): tmp.radio0: link is not ready
[  243.648000] IPv6: ADDRCONF(NETDEV_UP): tmp.radio0: link is not ready
[  270.352000] IPv6: ADDRCONF(NETDEV_UP): tmp.radio0: link is not ready
[  272.176000] IPv6: ADDRCONF(NETDEV_UP): tmp.radio0: link is not ready
[  273.980000] IPv6: ADDRCONF(NETDEV_UP): tmp.radio0: link is not ready
[  318.792000] IPv6: ADDRCONF(NETDEV_UP): wlan0: link is not ready
[  318.808000] device wlan0 entered promiscuous mode
[  318.836000] br-lan: port 2(wlan0) entered forwarding state
[  318.840000] br-lan: port 2(wlan0) entered forwarding state
[  318.848000] IPv6: ADDRCONF(NETDEV_CHANGE): wlan0: link becomes ready
[  320.844000] br-lan: port 2(wlan0) entered forwarding state
[  342.396000] device wlan0 left promiscuous mode
[  342.400000] br-lan: port 2(wlan0) entered disabled state
[  343.380000] cfg80211: Calling CRDA for country: RO
[  343.388000] cfg80211: Regulatory domain changed to country: RO
[  343.392000] cfg80211:  DFS Master region: ETSI
[  343.396000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (dfs_cac_time)
[  343.408000] cfg80211:   (2402000 KHz - 2482000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
[  343.416000] cfg80211:   (5170000 KHz - 5250000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)
[  343.424000] cfg80211:   (5250000 KHz - 5330000 KHz @ 80000 KHz), (N/A, 2000 mBm), (0 s)
[  343.432000] cfg80211:   (5490000 KHz - 5710000 KHz @ 80000 KHz), (N/A, 2700 mBm), (0 s)
[  343.440000] cfg80211:   (57240000 KHz - 65880000 KHz @ 2160000 KHz), (N/A, 4000 mBm), (N/A)
[  344.868000] IPv6: ADDRCONF(NETDEV_UP): wlan0: link is not ready
[  344.876000] device wlan0 entered promiscuous mode
[  346.060000] br-lan: port 2(wlan0) entered forwarding state
[  346.064000] br-lan: port 2(wlan0) entered forwarding state
[  346.068000] IPv6: ADDRCONF(NETDEV_CHANGE): wlan0: link becomes ready
[  348.068000] br-lan: port 2(wlan0) entered forwarding state</code></pre></div><p>But wifi is not working, i.e. it states in the logs and in the bootstrap web ui that is active but no ssid is visibl.Also, the scan command brings nothing.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 3 of 18</div><nav><ul><li><a href="viewtopic.php%3Fid=50207&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=50207&amp;p=2.html">2</a></li><li class="pagination-current"><span>3</span></li><li><a href="viewtopic.php%3Fid=50207&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=50207&amp;p=5.html">5</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=50207&amp;p=18.html">18</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>