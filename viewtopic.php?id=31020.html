<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> 3g modem connects after reboot but not after a connection drop</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 27 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p139837">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Khurram</div>
					<div class="post-datetime">
						24 Jul 2011, 20:46					</div>
				</div>
				<div class="post-content content">
					<p>I have a TP-Link WR1043ND and a ZTE AC2726 3g modem. I have configured the router (running backfire 10.03.1-rc5) for the modem. But it only connects after I reboot the router. If for some reason, the connection breaks, then the modem&#039;s chat script always fails</p><p>Jul 24 22:43:39 xxxx local2.info chat[1825]: send (AT^M)<br />Jul 24 22:43:39 xxxx local2.info chat[1825]: expect (OK)<br />Jul 24 22:43:44 xxxx local2.info chat[1825]: ~^?}#@!}!} } }9}!}$}%x}&quot;}&amp;} } } } }#}%B#}%}%}&amp;&quot;Ee8Ba~~^?}#@!}!}!} }9}!}$}%x}&quot;}&amp;} }<br />Jul 24 22:43:49 xxxx local2.info chat[1825]: alarm<br />Jul 24 22:43:49 xxxx local2.info chat[1825]: Failed<br />Jul 24 22:43:49 xxxx daemon.err pppd[1819]: Connect script failed</p><p>The same script just works fine if I reboot the router. I am really confused by this. Please help.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p139956">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">psfan</div>
					<div class="post-datetime">
						26 Jul 2011, 08:47					</div>
				</div>
				<div class="post-content content">
					<p>Maybe the 3g modem need reset before dial again.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140050">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">bulongx</div>
					<div class="post-datetime">
						26 Jul 2011, 23:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Khurram wrote:</cite><blockquote><p>I have a TP-Link WR1043ND and a ZTE AC2726 3g modem. I have configured the router (running backfire 10.03.1-rc5) for the modem. But it only connects after I reboot the router. If for some reason, the connection breaks, then the modem&#039;s chat script always fails</p><p>Jul 24 22:43:39 xxxx local2.info chat[1825]: send (AT^M)<br />Jul 24 22:43:39 xxxx local2.info chat[1825]: expect (OK)<br />Jul 24 22:43:44 xxxx local2.info chat[1825]: ~^?}#@!}!} } }9}!}$}%x}&quot;}&amp;} } } } }#}%B#}%}%}&amp;&quot;Ee8Ba~~^?}#@!}!}!} }9}!}$}%x}&quot;}&amp;} }<br />Jul 24 22:43:49 xxxx local2.info chat[1825]: alarm<br />Jul 24 22:43:49 xxxx local2.info chat[1825]: Failed<br />Jul 24 22:43:49 xxxx daemon.err pppd[1819]: Connect script failed</p><p>The same script just works fine if I reboot the router. I am really confused by this. Please help.</p></blockquote></div><p>khurram...</p><p>can u plzzz how to connect TP-Link WR1043ND and a ZTE AC2726 cz i have the same thing...</p><p>can u show me the configure, package installed and script???</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140193">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Khurram</div>
					<div class="post-datetime">
						28 Jul 2011, 23:21					</div>
				</div>
				<div class="post-content content">
					<p>The strange thing is that it is working okay now. I have the modem attached directly to the usb port on the router.<br /></p><div class="quotebox"><cite>bulongx wrote:</cite><blockquote><p>can u plzzz how to connect TP-Link WR1043ND and a ZTE AC2726 cz i have the same thing...</p><p>can u show me the configure, package installed and script???</p></blockquote></div><p>Sorry for the late reply. My options file is as follows:<br /></p><div class="codebox"><pre><code>#cat /etc/ppp/options
ttyUSB0 460800 crtscts
modem
logfile /dev/null
lock
maxfail 0
usepeerdns
lcp-echo-failure 5
lcp-echo-interval 60</code></pre></div><p>The chatscript is as follows:<br /></p><div class="codebox"><pre><code># cat /etc/chatscripts/evdo.chat
# This is a simple chat script based off of the one provided by Sierra Wireless
# for CDMA connections.  It should work for both Sprint and Verizon networks.

ABORT   BUSY
ABORT   &#039;NO CARRIER&#039;
ABORT   ERROR
ABORT   &#039;NO DIAL TONE&#039;
ABORT   &#039;NO ANSWER&#039;
ABORT   DELAYED
REPORT  CONNECT
TIMEOUT 10
&#039;&#039;      AT
OK    AT
OK    ATZ
OK    &#039;ATQ0V1E1S0=0&amp;C1&amp;D2+FCLASS=0&#039;
SAY     &#039;Calling CDMA/EVDO&#039;
TIMEOUT 20
OK      ATDT#777
CONNECT &#039;&#039;</code></pre></div><p>In Luci in the WAN page, I have the following settings:<br />Protocol&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;UMTS/3G<br />Service Type&nbsp; &nbsp; &nbsp; EV-DO<br />Username&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;....&nbsp; (please use the user name for your carrier)<br />Password&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ....&nbsp; (please use the password for your carrier)<br />Modem Device&nbsp; &nbsp; /dev/ttyUSB0</p><p>I also installed these packages (though all were probably not required for the ac2726 as I was playing around with a usb stick also): kmod-usb-core, kmod-usb-ohci, kmod-usb-serial, kmod-usb-uhci, kmod-usb2, usb-modeswitch, usb-modeswitch-data</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />I hope it works for you also.</p><p>Edit:</p><p>I forgot one thing. Edit /etc/modules.d/60-usb-serial as follows<br /></p><div class="codebox"><pre><code>#usbserial
usbserial vendor=0x19d2 product=0xfff1 maxSize=4096</code></pre></div>											<p class="post-edited">(Last edited by <strong>Khurram</strong> on 29 Jul 2011, 17:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140252">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">bulongx</div>
					<div class="post-datetime">
						29 Jul 2011, 19:09					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>In Luci in the WAN page, I have the following settings:
Protocol             UMTS/3G
Service Type      EV-DO
Username          smart
Password           smart
Modem Device    /dev/ttyUSB0</code></pre></div><p>in My Luci doesn&#039;t page WAN...!</p><p>or did u mean /etc/config/network &lt;&lt;&lt; ??? WAN there??</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140254">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Khurram</div>
					<div class="post-datetime">
						29 Jul 2011, 20:29					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>bulongx wrote:</cite><blockquote><p>in My Luci doesn&#039;t page WAN...!</p><p>or did u mean /etc/config/network &lt;&lt;&lt; ??? WAN there??</p></blockquote></div><p>Yes, its the same section. My /etc/config/network file&#039;s WAN section is as follows:<br /></p><div class="codebox"><pre><code>config &#039;interface&#039; &#039;wan&#039;
        option &#039;ifname&#039; &#039;ppp0&#039;
        option &#039;proto&#039; &#039;3g&#039;
        option &#039;service&#039; &#039;evdo&#039;
        option &#039;username&#039; &#039;yourusername&#039;
        option &#039;password&#039; &#039;yourpassword&#039;
        option &#039;device&#039; &#039;/dev/ttyUSB0&#039;
        option &#039;maxwait&#039; &#039;0&#039;</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140259">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">bulongx</div>
					<div class="post-datetime">
						29 Jul 2011, 21:20					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Khurram wrote:</cite><blockquote><div class="quotebox"><cite>bulongx wrote:</cite><blockquote><p>in My Luci doesn&#039;t page WAN...!</p><p>or did u mean /etc/config/network &lt;&lt;&lt; ??? WAN there??</p></blockquote></div><p>Yes, its the same section. My /etc/config/network file&#039;s WAN section is as follows:<br /></p><div class="codebox"><pre><code>config &#039;interface&#039; &#039;wan&#039;
        option &#039;ifname&#039; &#039;ppp0&#039;
        option &#039;proto&#039; &#039;3g&#039;
        option &#039;service&#039; &#039;evdo&#039;
        option &#039;username&#039; &#039;yourusername&#039;
        option &#039;password&#039; &#039;yourpassword&#039;
        option &#039;device&#039; &#039;/dev/ttyUSB0&#039;
        option &#039;maxwait&#039; &#039;0&#039;</code></pre></div></blockquote></div><p>it&#039;s still not working... whereas it&#039;s look good</p><div class="codebox"><pre><code>root@OpenWrt:/dev# lsusb
Bus 001 Device 002: ID 19d2:fff1 ONDA Communication S.p.A.
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub</code></pre></div><div class="codebox"><pre><code>config &#039;interface&#039; &#039;wan&#039;
#        option &#039;ifname&#039; &#039;eth0.2&#039;
#        option &#039;proto&#039; &#039;dhcp&#039;
        option &#039;ifname&#039; &#039;ppp0&#039;
        option &#039;proto&#039; &#039;3g&#039;
        option &#039;service&#039; &#039;evdo&#039;
        option &#039;username&#039; &#039;smart&#039;
        option &#039;password&#039; &#039;smart&#039;
        option &#039;device&#039; &#039;/dev/ttyUSB0&#039;
        option &#039;maxwait&#039; &#039;0&#039;</code></pre></div><p>it&#039;s all my dmesg...<br /></p><div class="codebox"><pre><code>Linux version 2.6.32.25 (openwrt@ampere) (gcc version 4.3.3 (GCC) ) #1 Fri Nov 19 20:27:50 PST 2010
prom: fw_arg0=00000007, fw_arg1=a1f77fb0, fw_arg2=a1f78440, fw_arg3=00000008
MyLoader: sysp=ffffffff, boardp=ffffffff, parts=ffffffff
bootconsole [early0] enabled
CPU revision is: 00019374 (MIPS 24Kc)
Atheros AR9132 rev 2, CPU:400.000 MHz, AHB:200.000 MHz, DDR:400.000 MHz
Determined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00002000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00002000
On node 0 totalpages: 8192
free_area_init_node: node 0, pgdat 802d2710, node_mem_map 81000000
  Normal zone: 64 pages used for memmap
  Normal zone: 0 pages reserved
  Normal zone: 8128 pages, LIFO batch:0
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
Kernel command line: rootfstype=squashfs,yaffs,jffs2 noinitrd console=ttyS0,115200 board=TL-WR1043ND
PID hash table entries: 128 (order: -3, 512 bytes)
Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
Writing ErrCtl register=00000000
Readback ErrCtl register=00000000
Memory: 29304k/32768k available (2113k kernel code, 3464k reserved, 395k data, 152k init, 0k highmem)
SLUB: Genslabs=7, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
Hierarchical RCU implementation.
NR_IRQS:56
Calibrating delay loop... 266.24 BogoMIPS (lpj=1331200)
Mount-cache hash table entries: 512
NET: Registered protocol family 16
MIPS: machine is TP-LINK TL-WR1043ND
bio: create slab &lt;bio-0&gt; at 0
Switching to clocksource MIPS
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 1024 (order: 1, 8192 bytes)
TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
TCP: Hash tables configured (established 1024 bind 1024)
TCP reno registered
NET: Registered protocol family 1
squashfs: version 4.0 (2009/01/31) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) (SUMMARY)  Â© 2001-2006 Red Hat, Inc.
yaffs Nov 19 2010 20:21:41 Installing.
msgmni has been set to 57
io scheduler noop registered
io scheduler deadline registered (default)
Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A
console [ttyS0] enabled, bootconsole disabled
Atheros AR71xx SPI Controller driver version 0.2.4
m25p80 spi0.0: s25sl064a (8192 Kbytes)
spi0.0: searching for MyLoader partition table at offset 0x10000
spi0.0: searching for MyLoader partition table at offset 0x20000
spi0.0: searching for MyLoader partition table at offset 0x30000
spi0.0: searching for MyLoader partition table at offset 0x40000
spi0.0: no MyLoader partition table found
Searching for RedBoot partition table in spi0.0 at offset 0x7e0000
Searching for RedBoot partition table in spi0.0 at offset 0x7f0000
No RedBoot partition table detected in spi0.0
spi0.0: no WRT160NL signature found
Creating 5 MTD partitions on &quot;spi0.0&quot;:
0x000000000000-0x000000020000 : &quot;u-boot&quot;
0x000000020000-0x000000160000 : &quot;kernel&quot;
0x000000160000-0x0000007f0000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; set to be root filesystem
mtd: partition &quot;rootfs_data&quot; created automatically, ofs=370000, len=480000
0x000000370000-0x0000007f0000 : &quot;rootfs_data&quot;
0x0000007f0000-0x000000800000 : &quot;art&quot;
0x000000020000-0x0000007f0000 : &quot;firmware&quot;
Realtek RTL8366RB ethernet switch driver version 0.2.2
rtl8366rb rtl8366rb: using GPIO pins 18 (SDA) and 19 (SCK)
rtl8366rb rtl8366rb: RTL5937 ver. 3 chip found
rtl8366rb: probed
eth0: Atheros AG71xx at 0xb9000000, irq 4
eth0: using fixed link parameters
Atheros AR71xx hardware watchdog driver version 0.1.0
ar71xx-wdt: timeout=15 secs (max=21)
TCP westwood registered
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
Freeing unused kernel memory: 152k freed
Please be patient, while OpenWrt loads ...
input: gpio-buttons as /devices/platform/gpio-buttons/input/input0
Button Hotplug driver version 0.3.1
ar71xx: pll_reg 0xb8050014: 0x1a000000
eth0: link up (1000Mbps/Full duplex)
Registered led device: tl-wr1043nd:green:usb
Registered led device: tl-wr1043nd:green:system
Registered led device: tl-wr1043nd:green:qss
Registered led device: tl-wr1043nd:green:wlan
SCSI subsystem initialized
usbcore: registered new interface driver usbfs
usbcore: registered new interface driver hub
usbcore: registered new device driver usb
ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
ar71xx-ehci ar71xx-ehci: Atheros AR91xx built-in EHCI controller
ar71xx-ehci ar71xx-ehci: new USB bus registered, assigned bus number 1
ar71xx-ehci ar71xx-ehci: irq 3, io mem 0x1b000000
ar71xx-ehci ar71xx-ehci: USB 2.0 started, EHCI 1.00
usb usb1: configuration #1 chosen from 1 choice
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 1 port detected
ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
uhci_hcd: USB Universal Host Controller Interface driver
Initializing USB Mass Storage driver...
usbcore: registered new interface driver usb-storage
USB Mass Storage support registered.
usb 1-1: new full speed USB device using ar71xx-ehci and address 2
usb 1-1: configuration #1 chosen from 1 choice
scsi0 : SCSI emulation for USB Mass Storage devices
usb-storage: device found at 2
usb-storage: waiting for device to settle before scanning
scsi 0:0:0:0: Direct-Access     ZTE      USB Storage FFF1 2.31 PQ: 0 ANSI: 2
sd 0:0:0:0: [sda] Attached SCSI removable disk
usb-storage: device scan complete
mini_fo: using base directory: /
mini_fo: using storage directory: /overlay
eth0: link down
ar71xx: pll_reg 0xb8050014: 0x1a000000
eth0: link up (1000Mbps/Full duplex)
device eth0.1 entered promiscuous mode
device eth0 entered promiscuous mode
br-lan: port 1(eth0.1) entering forwarding state
Compat-wireless backport release: compat-wireless-2010-10-14-7-gab01eca
Backport based on wireless-testing.git master-2010-10-19
cfg80211: Calling CRDA to update world regulatory domain
cfg80211: World regulatory domain updated:
    (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
    (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
    (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
    (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
    (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
    (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
ath: EEPROM regdomain: 0x0
ath: EEPROM indicates default country code should be used
ath: doing EEPROM country-&gt;regdmn map search
ath: country maps to regdmn code: 0x3a
ath: Country alpha2 being used: US
ath: Regpair used: 0x3a
ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;
ieee80211 phy0: Atheros AR9100 MAC/BB Rev:0 AR2133 RF Rev:a2 mem=0xb80c0000, irq=2
cfg80211: Calling CRDA for country: US
cfg80211: Regulatory domain changed to country: US
    (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
    (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2700 mBm)
    (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 1700 mBm)
    (5250000 KHz - 5330000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
    (5490000 KHz - 5600000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
    (5650000 KHz - 5710000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
    (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 3000 mBm)
NTFS driver 2.1.29 [Flags: R/O MODULE].
PPP generic driver version 2.4.2
ip_tables: (C) 2000-2006 Netfilter Core Team
NET: Registered protocol family 24
nf_conntrack version 0.5.0 (460 buckets, 1840 max)
CONFIG_NF_CT_ACCT is deprecated and will be removed soon. Please use
nf_conntrack.acct=1 kernel parameter, acct=1 nf_conntrack module option or
sysctl net.netfilter.nf_conntrack_acct=1 to enable it.
ath_hal: module license &#039;Proprietary&#039; taints kernel.
Disabling lock debugging due to kernel taint
ath_hal: 2009-05-08 (AR5210, AR5211, AR5212, AR5416, RF5111, RF5112, RF2413, RF5413, RF2133, RF2425, REGOPS_FUNC, XR)
ath_pci: trunk
wlan: trunk
wlan: mac acl policy registered
ath_rate_minstrel: Minstrel automatic rate control algorithm 1.2 (trunk)
ath_rate_minstrel: look around rate set to 10%
ath_rate_minstrel: EWMA rolloff level set to 75%
ath_rate_minstrel: max segment size in the mrr set to 6000 us
i2c /dev entries driver
usbcore: registered new interface driver snd-usb-audio
usbcore: registered new interface driver usbserial
USB Serial support registered for generic
usbserial_generic 1-1:1.0: generic converter detected
usb 1-1: generic converter now attached to ttyUSB0
usbserial_generic 1-1:1.1: generic converter detected
usb 1-1: generic converter now attached to ttyUSB1
usbserial_generic 1-1:1.2: generic converter detected
usb 1-1: generic converter now attached to ttyUSB2
usbserial_generic 1-1:1.3: generic converter detected
usb 1-1: generic converter now attached to ttyUSB3
usbserial_generic 1-1:1.4: generic converter detected
usb 1-1: generic converter now attached to ttyUSB4
usbcore: registered new interface driver usbserial_generic
usbserial: USB Serial Driver core
usbcore: registered new interface driver ums-alauda
usbcore: registered new interface driver ums-cypress
usbcore: registered new interface driver ums-datafab
usbcore: registered new interface driver ums-freecom
usbcore: registered new interface driver ums-isd200
usbcore: registered new interface driver ums-jumpshot
usbcore: registered new interface driver ums-karma
usbcore: registered new interface driver ums-sddr09
usbcore: registered new interface driver ums-sddr55
usbcore: registered new interface driver ums-usbat
Linux video capture interface: v2.00
USB Serial support registered for GSM modem (1-port)
usbcore: registered new interface driver option
option: v0.7.2:USB Driver for GSM modems
gspca: main v2.7.0 registered
fuse init (API version 7.13)
usbcore: registered new interface driver uvcvideo
USB Video Class driver (v0.1.0)
device wlan0 entered promiscuous mode
br-lan: port 2(wlan0) entering forwarding state
device wlan0 left promiscuous mode
br-lan: port 2(wlan0) entering disabled state
device wlan0 entered promiscuous mode
br-lan: port 2(wlan0) entering forwarding state
ar71xx-wdt: enabling watchdog timer</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:~# opkg list-installed
base-files - 43.10-r24045
bash - 3.2-2
block-extroot - 0.0.1-2
block-hotplug - 0.1.0-2
block-mount - 0.1.0-2
busybox - 1.15.3-2
cgilib - 0.7-1
chat - 2.4.4-11
comgt - 0.32-4
crda - 1.1.0-2
dnsmasq - 2.55-5
dropbear - 0.52-4
e2fsprogs - 1.41.11-1
fdisk - 2.13.0.1-4
ffmpeg - 0.5.2-4
firewall - 1-20
hotplug2 - 1.0-beta-2
iptables - 1.4.6-2
iptables-mod-conntrack - 1.4.6-2
iptables-mod-nat - 1.4.6-2
iputils-ping - 20100418-2
iw - 0.9.21-1
kernel - 2.6.32.25-1
kmod-ath - 2.6.32.25+2010-10-19-1
kmod-ath9k - 2.6.32.25+2010-10-19-1
kmod-button-hotplug - 2.6.32.25-1
kmod-cfg80211 - 2.6.32.25+2010-10-19-1
kmod-crc-ccitt - 2.6.32.25-1
kmod-crc16 - 2.6.32.25-1
kmod-crypto-aes - 2.6.32.25-1
kmod-crypto-arc4 - 2.6.32.25-1
kmod-crypto-core - 2.6.32.25-1
kmod-fs-ext4 - 2.6.32.25-1
kmod-fs-mbcache - 2.6.32.25-1
kmod-fs-ntfs - 2.6.32.25-1
kmod-fs-vfat - 2.6.32.25-1
kmod-fuse - 2.6.32.25-1
kmod-i2c-core - 2.6.32.25-1
kmod-input-core - 2.6.32.25-1
kmod-input-gpio-buttons - 2.6.32.25-1
kmod-input-polldev - 2.6.32.25-1
kmod-ipt-conntrack - 2.6.32.25-1
kmod-ipt-core - 2.6.32.25-1
kmod-ipt-nat - 2.6.32.25-1
kmod-ipt-nathelper - 2.6.32.25-1
kmod-leds-gpio - 2.6.32.25-1
kmod-mac80211 - 2.6.32.25+2010-10-19-1
kmod-madwifi - 2.6.32.25+r3314-4
kmod-nls-base - 2.6.32.25-1
kmod-ppp - 2.6.32.25-1
kmod-pppoe - 2.6.32.25-1
kmod-scsi-core - 2.6.32.25-1
kmod-sound-core - 2.6.32.25-1
kmod-usb-audio - 2.6.32.25-1
kmod-usb-core - 2.6.32.25-1
kmod-usb-ohci - 2.6.32.25-1
kmod-usb-serial - 2.6.32.25-1
kmod-usb-serial-option - 2.6.32.25-1
kmod-usb-storage - 2.6.32.25-1
kmod-usb-storage-extras - 2.6.32.25-1
kmod-usb-uhci - 2.6.32.25-1
kmod-usb2 - 2.6.32.25-1
kmod-video-core - 2.6.32.25-1
kmod-video-gspca-core - 2.6.32.25-1
kmod-video-uvc - 2.6.32.25-1
libblkid - 1.41.11-1
libc - 0.9.30.1-43.10
libext2fs - 1.41.11-1
libffmpeg - 0.5.2-4
libgcc - 4.3.3+cs-43.10
libid3tag - 0.15.1b-3
libiptc - 1.4.6-2
libjpeg - 6b-1
liblua - 5.1.4-7
libmad - 0.15.1b-3
libncurses - 5.7-2
libnl-tiny - 0.1-1
libpcre - 8.10-1
libpostproc - 0.5.2-4
libpthread - 0.9.30.1-43.10
librt - 0.9.30.1-43.10
libuci - 12012009.6-2
libuci-lua - 12012009.6-2
libusb - 0.1.12-2
libuuid - 1.41.11-1
libxtables - 1.4.6-2
lua - 5.1.4-7
luci - 0.9+svn6512-1
luci-admin-core - 0.9+svn6512-1
luci-admin-full - 0.9+svn6512-1
luci-admin-mini - 0.9+svn6512-1
luci-app-firewall - 0.9+svn6512-1
luci-app-initmgr - 0.9+svn6512-1
luci-cbi - 0.9+svn6512-1
luci-core - 0.9+svn6512-1
luci-http - 0.9+svn6512-1
luci-i18n-english - 0.9+svn6512-1
luci-ipkg - 0.9+svn6512-1
luci-lmo - 0.9+svn6512-1
luci-nixio - 0.9+svn6512-1
luci-sgi-cgi - 0.9+svn6512-1
luci-sys - 0.9+svn6512-1
luci-theme-base - 0.9+svn6512-1
luci-theme-openwrt - 0.9+svn6512-1
luci-uci - 0.9+svn6512-1
luci-uvl - 0.9+svn6512-1
luci-web - 0.9+svn6512-1
madplay - 0.15.2b-3
minicom - 2.3-1
mjpg-streamer - r94-1
mtd - 13
nano - 2.2.5-1
ntfs-3g - 2010.8.8-1-fuseint
opkg - 576-1
ppp - 2.4.4-11
ppp-mod-pppoe - 2.4.4-11
swconfig - 6
uci - 12012009.6-2
udevtrigger - 106-1
uhttpd - 19
usb-modeswitch - 1.1.4-1
usb-modeswitch-data - 20100826-1
usbutils - 0.90-1
vim - 7.1-3
vsc7385-ucode-ap83 - 1
vsc7385-ucode-pb44 - 1
vsc7395-ucode-ap83 - 1
vsc7395-ucode-pb44 - 1
wireless-tools - 29-4
wpad-mini - 20100705-1
zlib - 1.2.3-5</code></pre></div><p>hopely u can help me, if u need others info... just reply me...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140261">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">bulongx</div>
					<div class="post-datetime">
						29 Jul 2011, 21:56					</div>
				</div>
				<div class="post-content content">
					<p>Work like charm... ^_^</p><p>i make ifup wan on startup...</p><div class="codebox"><pre><code>root@OpenWrt:/# vi /etc/init.d/3g

      # press insert button
      # copy and paste text below
      #!/bin/sh /etc/rc.common

      START=90
      start() {wi   
          ifup wan }  

      # press &#039;esc&#039; and &#039;:wq&#039; to save
  
root@OpenWrt:/# chmod +x /etc/init.d/3g
root@OpenWrt:/# /etc/init.d/3g enable</code></pre></div><p>Now my router TP-Link WR1043ND and modem CDMA EVDO ZTE AC2726 are successfully connected.... ^_^</p><p>Thanks Khurram</p>											<p class="post-edited">(Last edited by <strong>bulongx</strong> on 29 Jul 2011, 21:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140264">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Khurram</div>
					<div class="post-datetime">
						29 Jul 2011, 22:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>bulongx wrote:</cite><blockquote><p>Now my router TP-Link WR1043ND and modem CDMA EVDO ZTE AC2726 are successfully connected.... ^_^</p><p>Thanks Khurram</p></blockquote></div><p>I am glad it is working for you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140267">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">bulongx</div>
					<div class="post-datetime">
						29 Jul 2011, 22:54					</div>
				</div>
				<div class="post-content content">
					<p>@Khuram<br />do you know about &#039;iptables&#039;?? cz i want to still activated my WAN when my 3g active too...</p><div class="codebox"><pre><code>config &#039;interface&#039; &#039;wan&#039;
        option &#039;ifname&#039; &#039;eth0.2&#039;
        option &#039;proto&#039; &#039;dhcp&#039;

config &#039;interface&#039; &#039;3g&#039;
        option &#039;ifname&#039; &#039;ppp0&#039;
        option &#039;proto&#039; &#039;3g&#039;
        option &#039;service&#039; &#039;evdo&#039;
        option &#039;username&#039; &#039;smart&#039;
        option &#039;password&#039; &#039;smart&#039;
        option &#039;device&#039; &#039;/dev/ttyUSB0&#039;
        option &#039;maxwait&#039; &#039;0&#039;</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:/# vi /etc/init.d/wan

      # press insert button
      # copy and paste text below
      #!/bin/sh /etc/rc.common

      START=90
      start() {wi   
          ifup wan }  

      # press &#039;esc&#039; and &#039;:wq&#039; to save
  
root@OpenWrt:/# chmod +x /etc/init.d/wan
root@OpenWrt:/# /etc/init.d/wan enable</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:~# iptables -L
Chain INPUT (policy ACCEPT)
target     prot opt source               destination
ACCEPT     all  --  anywhere             anywhere            state RELATED,ESTABLISHED
ACCEPT     all  --  anywhere             anywhere
syn_flood  tcp  --  anywhere             anywhere            tcp flags:FIN,SYN,RST,ACK/SYN
input_rule  all  --  anywhere             anywhere
input      all  --  anywhere             anywhere

Chain FORWARD (policy DROP)
target     prot opt source               destination
zone_wan_MSSFIX  all  --  anywhere             anywhere
ACCEPT     all  --  anywhere             anywhere            state RELATED,ESTABLISHED
forwarding_rule  all  --  anywhere             anywhere
forward    all  --  anywhere             anywhere
reject     all  --  anywhere             anywhere

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination
ACCEPT     all  --  anywhere             anywhere            state RELATED,ESTABLISHED
ACCEPT     all  --  anywhere             anywhere
output_rule  all  --  anywhere             anywhere
output     all  --  anywhere             anywhere

Chain forward (1 references)
target     prot opt source               destination
zone_lan_forward  all  --  anywhere             anywhere

Chain forwarding_lan (1 references)
target     prot opt source               destination

Chain forwarding_rule (1 references)
target     prot opt source               destination

Chain forwarding_wan (1 references)
target     prot opt source               destination

Chain input (1 references)
target     prot opt source               destination
zone_lan   all  --  anywhere             anywhere

Chain input_lan (1 references)
target     prot opt source               destination

Chain input_rule (1 references)
target     prot opt source               destination

Chain input_wan (1 references)
target     prot opt source               destination

Chain output (1 references)
target     prot opt source               destination
zone_lan_ACCEPT  all  --  anywhere             anywhere
zone_wan_ACCEPT  all  --  anywhere             anywhere

Chain output_rule (1 references)
target     prot opt source               destination

Chain reject (3 references)
target     prot opt source               destination
REJECT     tcp  --  anywhere             anywhere            reject-with tcp-reset
REJECT     all  --  anywhere             anywhere            reject-with icmp-port-unreachable

Chain syn_flood (1 references)
target     prot opt source               destination
RETURN     tcp  --  anywhere             anywhere            tcp flags:FIN,SYN,RST,ACK/SYN limit: avg 25/sec burst 50
DROP       all  --  anywhere             anywhere

Chain zone_lan (1 references)
target     prot opt source               destination
input_lan  all  --  anywhere             anywhere
zone_lan_ACCEPT  all  --  anywhere             anywhere

Chain zone_lan_ACCEPT (2 references)
target     prot opt source               destination
ACCEPT     all  --  anywhere             anywhere
ACCEPT     all  --  anywhere             anywhere

Chain zone_lan_DROP (0 references)
target     prot opt source               destination
DROP       all  --  anywhere             anywhere
DROP       all  --  anywhere             anywhere

Chain zone_lan_MSSFIX (0 references)
target     prot opt source               destination
TCPMSS     tcp  --  anywhere             anywhere            tcp flags:SYN,RST/SYN TCPMSS clamp to PMTU

Chain zone_lan_REJECT (1 references)
target     prot opt source               destination
reject     all  --  anywhere             anywhere
reject     all  --  anywhere             anywhere

Chain zone_lan_forward (1 references)
target     prot opt source               destination
zone_wan_ACCEPT  all  --  anywhere             anywhere
forwarding_lan  all  --  anywhere             anywhere
zone_lan_REJECT  all  --  anywhere             anywhere

Chain zone_wan (0 references)
target     prot opt source               destination
ACCEPT     udp  --  anywhere             anywhere            udp dpt:68
ACCEPT     icmp --  anywhere             anywhere            icmp echo-request
input_wan  all  --  anywhere             anywhere
zone_wan_REJECT  all  --  anywhere             anywhere

Chain zone_wan_ACCEPT (2 references)
target     prot opt source               destination

Chain zone_wan_DROP (0 references)
target     prot opt source               destination

Chain zone_wan_MSSFIX (1 references)
target     prot opt source               destination

Chain zone_wan_REJECT (2 references)
target     prot opt source               destination

Chain zone_wan_forward (0 references)
target     prot opt source               destination
forwarding_wan  all  --  anywhere             anywhere
zone_wan_REJECT  all  --  anywhere             anywhere</code></pre></div><p>I want to FORWARD 3g like WAN above...</p><p>do you know to resolve this??</p>											<p class="post-edited">(Last edited by <strong>bulongx</strong> on 29 Jul 2011, 23:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140297">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">Khurram</div>
					<div class="post-datetime">
						30 Jul 2011, 20:00					</div>
				</div>
				<div class="post-content content">
					<p>Is there a specific reason you have separate WAN and 3g sections in /etc/config/network? I just use the WAN settings for my 3g modem. I think firewall settings are automatically configured for the WAN section. Also, you can configure custom iptables rules in the Network-&gt;Firewall page in Luci.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140344">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">bulongx</div>
					<div class="post-datetime">
						31 Jul 2011, 14:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Khurram wrote:</cite><blockquote><p>Is there a specific reason you have separate WAN and 3g sections in /etc/config/network? I just use the WAN settings for my 3g modem. I think firewall settings are automatically configured for the WAN section. Also, you can configure custom iptables rules in the Network-&gt;Firewall page in Luci.</p></blockquote></div><p>yes, i have reason for that. I want to make &quot;Load Balancing&quot; multiwan for every modem USB connected with my router wireless... so, I can get more speed for internet...</p><p>you always setting on luci. Did you success making external storage as internal storage &quot;Extroot&quot; on your router? cz i&#039;m out of storage...</p><p>if you successed, let me know... cz i&#039;m very2 need that...</p><p>thanks for your respons...</p>											<p class="post-edited">(Last edited by <strong>bulongx</strong> on 31 Jul 2011, 14:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140365">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">Khurram</div>
					<div class="post-datetime">
						31 Jul 2011, 23:10					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>bulongx wrote:</cite><blockquote><p>yes, i have reason for that. I want to make &quot;Load Balancing&quot; multiwan for every modem USB connected with my router wireless... so, I can get more speed for internet....</p></blockquote></div><p>Well, you can just duplicate the rules for the WAN section in luci. I don&#039;t know how masquerading will work in this case though.</p><div class="quotebox"><cite>bulongx wrote:</cite><blockquote><p>Did you success making external storage as internal storage &quot;Extroot&quot; on your router? cz i&#039;m out of storage...</p></blockquote></div><p>Nah, I have not configured the router for usb storage. I believe there is a link in the wiki on configuring usb storage.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>