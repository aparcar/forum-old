<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Which (small) printserver for TL-WR1043ND + Lexmark E322 (postscript)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 27 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p200672">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">linuxuser</div>
					<div class="post-datetime">
						4 May 2013, 18:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>TP-Link TL-WR1043ND<br />Backfire (10.03.1, r29592)</p></blockquote></div><p>I am looking for a printserver with an old postscript-printer (Lexmark E322) and found <a href="http://wiki.openwrt.org/doc/howto/printer.overview">http://wiki.openwrt.org/doc/howto/printer.overview</a></p><p>p910nd says at <a href="http://wiki.openwrt.org/doc/howto/p910nd.server">http://wiki.openwrt.org/doc/howto/p910nd.server</a> usb.essentials is needed and cups - <a href="http://wiki.openwrt.org/doc/howto/cups.server">http://wiki.openwrt.org/doc/howto/cups.server</a> needs usb.essentials too. But <a href="http://wiki.openwrt.org/doc/howto/usb.essentials">http://wiki.openwrt.org/doc/howto/usb.essentials</a> says: &quot;Most images offered on the OpenWrt download page, come with the basic USB support already included, if yours doesn&#039;t, you are right here.&quot;</p><p>An external-USB-drive is recognized, so do I need to install usb.essentials and which printer-server to you recommend?</p><p>I want to print from Clients with Linux 32 and 64 bit (Ubuntu 12.04, Opensuse 12.2), XP Home 32bit, Win7 Prof. 64bit.</p><p>Below you find some info re installed packages and available space.</p><div class="quotebox"><blockquote><p>root@wr1043-openwrt-ap-wds:~# df -h<br />Filesystem&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Size&nbsp; &nbsp; &nbsp; Used Available Use% Mounted on<br />/dev/root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1.9M&nbsp; &nbsp; &nbsp; 1.9M&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 100% /rom<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 14.4M&nbsp; &nbsp; &nbsp;56.0K&nbsp; &nbsp; &nbsp;14.3M&nbsp; &nbsp;0% /tmp<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;512.0K&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; 512.0K&nbsp; &nbsp;0% /dev<br />/dev/mtdblock3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4.7M&nbsp; &nbsp; &nbsp; 2.4M&nbsp; &nbsp; &nbsp; 2.3M&nbsp; 51% /overlay<br />mini_fo:/overlay&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.9M&nbsp; &nbsp; &nbsp; 1.9M&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 100% /</p></blockquote></div><div class="quotebox"><blockquote><p>opkg list-installed<br />base-files - 43.32-r29592<br />block-hotplug - 0.1.0-2.2<br />block-mount - 0.1.0-2.2<br />busybox - 1.15.3-3.4<br />crda - 1.1.1-1<br />dnsmasq - 2.55-6.1<br />dropbear - 0.53.1-5<br />firewall - 2-34.8<br />hotplug2 - 1.0-beta-3<br />iptables - 1.4.6-3.1<br />iptables-mod-conntrack - 1.4.6-3.1<br />iptables-mod-nat - 1.4.6-3.1<br />iw - 0.9.22-2<br />kernel - 2.6.32.27-1<br />kmod-ath - 2.6.32.27+2011-11-15-1<br />kmod-ath9k - 2.6.32.27+2011-11-15-1<br />kmod-ath9k-common - 2.6.32.27+2011-11-15-1<br />kmod-button-hotplug - 2.6.32.27-1<br />kmod-cfg80211 - 2.6.32.27+2011-11-15-1<br />kmod-crc-ccitt - 2.6.32.27-1<br />kmod-crc16 - 2.6.32.27-1<br />kmod-crypto-aes - 2.6.32.27-1<br />kmod-crypto-arc4 - 2.6.32.27-1<br />kmod-crypto-core - 2.6.32.27-1<br />kmod-fs-exportfs - 2.6.32.27-1<br />kmod-fs-ext2 - 2.6.32.27-1<br />kmod-fs-ext4 - 2.6.32.27-1<br />kmod-fs-mbcache - 2.6.32.27-1<br />kmod-fs-vfat - 2.6.32.27-1<br />kmod-fs-xfs - 2.6.32.27-1<br />kmod-input-core - 2.6.32.27-1<br />kmod-input-gpio-buttons - 2.6.32.27-1<br />kmod-input-polldev - 2.6.32.27-1<br />kmod-ipt-conntrack - 2.6.32.27-1<br />kmod-ipt-core - 2.6.32.27-1<br />kmod-ipt-nat - 2.6.32.27-1<br />kmod-ipt-nathelper - 2.6.32.27-1<br />kmod-leds-gpio - 2.6.32.27-1<br />kmod-mac80211 - 2.6.32.27+2011-11-15-1<br />kmod-nls-base - 2.6.32.27-1<br />kmod-nls-cp437 - 2.6.32.27-1<br />kmod-nls-iso8859-1 - 2.6.32.27-1<br />kmod-nls-utf8 - 2.6.32.27-1<br />kmod-ppp - 2.6.32.27-1<br />kmod-pppoe - 2.6.32.27-1<br />kmod-scsi-core - 2.6.32.27-1<br />kmod-usb-core - 2.6.32.27-1<br />kmod-usb-ohci - 2.6.32.27-1<br />kmod-usb-storage - 2.6.32.27-1<br />kmod-usb2 - 2.6.32.27-1<br />libc - 0.9.30.1-43.32<br />libgcc - 4.3.3+cs-43.32<br />libip4tc - 1.4.6-3.1<br />libiwinfo - 18<br />libiwinfo-lua - 18<br />liblua - 5.1.4-7<br />libnl - 1.1-4<br />libnl-tiny - 0.1-1<br />libpcap - 1.0.0-2<br />libpopt - 1.7-5<br />libstdcpp - 4.3.3+cs-43.32<br />libuci - 12012009.7-4<br />libuci-lua - 12012009.7-4<br />libxtables - 1.4.6-3.1<br />lua - 5.1.4-7<br />luci - 0.10.0-1<br />luci-app-firewall - 0.10.0-1<br />luci-i18n-english - 0.10.0-1<br />luci-lib-core - 0.10.0-1<br />luci-lib-ipkg - 0.10.0-1<br />luci-lib-lmo - 0.10.0-1<br />luci-lib-nixio - 0.10.0-1<br />luci-lib-sys - 0.10.0-1<br />luci-lib-web - 0.10.0-1<br />luci-mod-admin-core - 0.10.0-1<br />luci-mod-admin-full - 0.10.0-1<br />luci-proto-core - 0.10.0-1<br />luci-proto-ppp - 0.10.0-1<br />luci-sgi-cgi - 0.10.0-1<br />luci-theme-base - 0.10.0-1<br />luci-theme-openwrt - 0.10.0-1<br />mtd - 13<br />opkg - 576-2<br />ppp - 2.4.4-16.1<br />ppp-mod-pppoe - 2.4.4-16.1<br />rsync - 3.0.8-3<br />swconfig - 9<br />uci - 12012009.7-4<br />udevtrigger - 106-1<br />uhttpd - 28<br />wireless-tools - 29-4<br />wpad-mini - 20111103-2</p></blockquote></div>											<p class="post-edited">(Last edited by <strong>linuxuser</strong> on 4 May 2013, 19:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200677">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">FriedZombie</div>
					<div class="post-datetime">
						4 May 2013, 19:23					</div>
				</div>
				<div class="post-content content">
					<p>There is no way you are going to install cups on the internal memory of your router, simply not enough space.</p><p>You can put the overlayfs on a usb stick and have more space that way (see pivot root in the wiki).<br />So I would try p910nd in this case, also windows and linux can print directly to it. (for linux you do need cups, but you needed that anyway to connect a network printer)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200685">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">linuxuser</div>
					<div class="post-datetime">
						4 May 2013, 19:51					</div>
				</div>
				<div class="post-content content">
					<p>Thanks, so I have to try <a href="http://wiki.openwrt.org/doc/howto/p910nd.server">http://wiki.openwrt.org/doc/howto/p910nd.server</a></p><p>I did _not_ install usb.essentials!<br />But kmod-usb-printer and p910nd</p><div class="quotebox"><blockquote><p>usb 1-1: new full speed USB device using ar71xx-ehci and address 2<br />usb 1-1: configuration #1 chosen from 1 choice<br />usblp0: USB Bidirectional printer dev 2 if 0 alt 0 proto 2 vid 0x043D pid 0x0052</p></blockquote></div><div class="quotebox"><blockquote><p>cat /etc/config/p910nd<br />config p910nd<br />&nbsp; &nbsp; option device&nbsp; &nbsp; &nbsp; &nbsp; /dev/lp0<br />&nbsp; &nbsp; option port&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0<br />&nbsp; &nbsp; option bidirectional 1<br />&nbsp; &nbsp; option enabled&nbsp; &nbsp; &nbsp; &nbsp;0</p></blockquote></div><p>How can I search for the printer (Lexmark E322), which is connected to the openwrt-device in a shell or whatever?</p><p>I am not sure, what I need else and what not, as described at <a href="http://wiki.openwrt.org/doc/howto/p910nd.server">http://wiki.openwrt.org/doc/howto/p910nd.server</a></p><p>How can I do a test using Linux?</p>											<p class="post-edited">(Last edited by <strong>linuxuser</strong> on 4 May 2013, 19:54)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200703">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Borromini</div>
					<div class="post-datetime">
						4 May 2013, 21:29					</div>
				</div>
				<div class="post-content content">
					<p>/dev/lp0 is your printer. You need to point your printer setup to the router&#039;s IP and find out which protocol to use (it&#039;s often RAW I believe). Been a while since I set up a networked printer. You&#039;ll still need to install the drivers (usually not necessary on Linux, but you will need to on Windows). Usually it involves installing the printer locally first.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200704">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">FriedZombie</div>
					<div class="post-datetime">
						4 May 2013, 21:42					</div>
				</div>
				<div class="post-content content">
					<p>Well for starters I think option enabled should be 1<br />option port is new to me, but since there is only one printer connected I would go with 9100 (default tcp port)</p><p>you don&#039;t have to do anything with /dev/lp0 on a client you are connecting to the printer, of course it should be a valid printer on the server. But it is working because the log that contains it was allready posted.</p><p>To install the printer in windows, you need to select local printer and create a new port and select tcp/ip and the protocol is indeed RAW.</p><p>And in linux you just simply can install it under cups.</p><p>tutorial for linux: <a href="http://www.noah.org/wiki/Printing_CUPS_lpr">http://www.noah.org/wiki/Printing_CUPS_lpr</a></p><p>Of course in both cases you do need the driver that is needed for the printer. the server p910nd will simply forward the data from the network port to the printer and vice versa, nothing more.</p><p>for cups you need: socket://hostname:port</p>											<p class="post-edited">(Last edited by <strong>FriedZombie</strong> on 4 May 2013, 21:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200709">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">linuxuser</div>
					<div class="post-datetime">
						4 May 2013, 23:09					</div>
				</div>
				<div class="post-content content">
					<p>Let&#039;s talk about Linux first, Windows is not so important. I mentioned it, because I thought it could be interesting to choose the privterserver. &quot;option enabled&nbsp; &nbsp; &nbsp; &nbsp;1&quot; was set and the TL-WR1043ND was rebooted.</p><p>I have to say, that I could already print with the linux pc, when the printer was connected to an avm fritzbox via usb. To get it work with avm I had to execute &quot;lpadmin -p E322 -E -v socket://192.168.178.1:9100 -m foomatic-db-compressed-ppds:0/Lexmark-Optra_E312-Postscript.ppd&quot; I used E312 because there is no driver for E322 and it works.</p><div class="codebox"><pre><code>#on the linux pc

# whoami
root

# lpadmin -p E322TP -E -v socket://192.168.178.50:9100 -m foomatic-db-compressed-ppds:0/Lexmark-Optra_E312-Postscript.ppd
lpadmin: Unable to copy PPD file.</code></pre></div><div class="codebox"><pre><code>lpinfo -m | grep -i Lexmark-Optra_E3
foomatic-db-compressed-ppds:0/ppd/foomatic-ppd/Lexmark-Optra_E310-Postscript.ppd Lexmark Optra E310 Foomatic/Postscript (recommended)

foomatic-db-compressed-ppds:0/ppd/foomatic-ppd/Lexmark-Optra_E312-Postscript.ppd Lexmark Optra E312 Foomatic/Postscript (recommended)

gutenprint.5.2://lexmark-optra_e321/expert Lexmark Optra E321 - CUPS+Gutenprint v5.2.8-pre1
foomatic-db-compressed-ppds:0/ppd/foomatic-ppd/Lexmark-Optra_E321-hpijs-pcl5e.ppd Lexmark Optra E321 Foomatic/hpijs-pcl5e (recommended)
foomatic-db-compressed-ppds:0/ppd/foomatic-ppd/Lexmark-Optra_E321-lj4dith.ppd Lexmark Optra E321 Foomatic/lj4dith
foomatic-db-compressed-ppds:0/ppd/foomatic-ppd/Lexmark-Optra_E321-ljet4.ppd Lexmark Optra E321 Foomatic/ljet4
gutenprint.5.2://lexmark-optra_e323/expert Lexmark Optra E323 - CUPS+Gutenprint v5.2.8-pre1</code></pre></div><p>A firewall problem?</p><p>It looks like port 9100 is not open, although I added the rule from <a href="http://wiki.openwrt.org/doc/howto/p910nd.server">http://wiki.openwrt.org/doc/howto/p910nd.server</a></p><div class="codebox"><pre><code>Nmap scan report for wr1043-openwrt-ap.wds (192.168.178.50)
Host is up (0.00019s latency).
PORT     STATE  SERVICE
9100/tcp closed jetdirect</code></pre></div><div class="codebox"><pre><code>/etc/config/firewall

config defaults
    option syn_flood    1
    option input        ACCEPT
    option output        ACCEPT 
    option forward        REJECT
config zone
    option name        lan
    option network        &#039;lan&#039;
    option input        ACCEPT 
    option output        ACCEPT 
    option forward        REJECT
config zone
    option name        wan
    option network        &#039;wan&#039;
    option input        REJECT
    option output        ACCEPT 
    option forward        REJECT
    option masq        1 
    option mtu_fix        1
config forwarding 
    option src          lan
    option dest         wan
config rule
    option name        Allow-DHCP-Renew
    option src        wan
    option proto        udp
    option dest_port    68
    option target        ACCEPT
    option family        ipv4
config rule
    option name        Allow-Ping
    option src        wan
    option proto        icmp
    option icmp_type    echo-request
    option family        ipv4
    option target        ACCEPT
config rule
    option name        Allow-DHCPv6
    option src        wan
    option proto        udp
    option src_ip        fe80::/10
    option src_port        547
    option dest_ip        fe80::/10
    option dest_port    546
    option family        ipv6
    option target        ACCEPT
config rule
    option name        Allow-ICMPv6-Input
    option src        wan
    option proto    icmp
    list icmp_type        echo-request
    list icmp_type        destination-unreachable
    list icmp_type        packet-too-big
    list icmp_type        time-exceeded
    list icmp_type        bad-header
    list icmp_type        unknown-header-type
    list icmp_type        router-solicitation
    list icmp_type        neighbour-solicitation
    option limit        1000/sec
    option family        ipv6
    option target        ACCEPT
config rule                                   
    option name        Allow-ICMPv6-Forward
    option src        wan
    option dest        *
    option proto        icmp
    list icmp_type        echo-request
    list icmp_type        destination-unreachable
    list icmp_type        packet-too-big
    list icmp_type        time-exceeded
    list icmp_type        bad-header
    list icmp_type        unknown-header-type
    option limit        1000/sec
    option family        ipv6
    option target        ACCEPT
config include
    option path /etc/firewall.user
config &#039;rule&#039;
        option &#039;src&#039; &#039;lan&#039;
        option &#039;proto&#039; &#039;tcp&#039;
        option &#039;dest_port&#039; &#039;9100&#039;
        option &#039;target&#039; &#039;ACCEPT&#039;</code></pre></div>											<p class="post-edited">(Last edited by <strong>linuxuser</strong> on 4 May 2013, 23:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200715">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">FriedZombie</div>
					<div class="post-datetime">
						5 May 2013, 00:17					</div>
				</div>
				<div class="post-content content">
					<p>By default the router doesn&#039;t block anything lan side. (also not in your case).</p><p>is the daemon p910nd actually started?<br />have you changed the port and enabled in the config?<br />on the router you can see the listening tcp ports with netstat -tnl<br />add a p as well to see what programs acompany the ports</p><p>(protocol is the same as the fritzbox)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200726">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">linuxuser</div>
					<div class="post-datetime">
						5 May 2013, 01:46					</div>
				</div>
				<div class="post-content content">
					<p>I found 2 things: the daemon was not started and when I start it manually I see another port.</p><div class="codebox"><pre><code>netstat -tnl
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       
tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN      
tcp        0      0 0.0.0.0:9109            0.0.0.0:*               LISTEN      
tcp        0      0 0.0.0.0:53              0.0.0.0:*               LISTEN      
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      
netstat: /proc/net/tcp6: No such file or directory</code></pre></div><p>I started it with &quot;/etc/init.d/p910nd restart&quot;. How do I start the server automatically after a reboot?</p><p>Why do I get port 9109 instead of 9100?</p><div class="codebox"><pre><code> cat /etc/config/p910nd
config p910nd
    option device        /dev/lp0
    option port          9100
    option bidirectional 1
    option enabled       1</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200776">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">FriedZombie</div>
					<div class="post-datetime">
						5 May 2013, 12:43					</div>
				</div>
				<div class="post-content content">
					<p>to start the server automatically after a reboot type<br />/etc/init.d/p910nd enable</p><p>why it does start on 9109 not a clue, what happens if you drop &#039;option port&#039; all together from the config?<br />because mine doesn&#039;t seem to need it. (after looking at my config) but the rest is identical.</p><p>edit: Lol, I think I know where the 9 came from, try to change the port number to 0 again, and see what happens (or drop the whole line)</p>											<p class="post-edited">(Last edited by <strong>FriedZombie</strong> on 6 May 2013, 00:31)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200828">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">linuxuser</div>
					<div class="post-datetime">
						5 May 2013, 22:04					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>root@wr1043-openwrt-ap-wds:~# cat /etc/config/p910nd
config p910nd
    option device        /dev/lp0
    option port          0
    option bidirectional 1
    option enabled       1</code></pre></div><div class="codebox"><pre><code>root@wr1043-openwrt-ap-wds:~# netstat -tnl
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       
tcp        0      0 0.0.0.0:9100            0.0.0.0:*               LISTEN      
tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN      
tcp        0      0 0.0.0.0:53              0.0.0.0:*               LISTEN      
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN</code></pre></div><div class="codebox"><pre><code> cat /etc/issue
Ubuntu 12.04.2 LTS \n \l

root@linuxpc:~# lpadmin -p E322TP -E -v socket://192.168.178.50:9100 -m foomatic-db-compressed-ppds:0/Lexmark-Optra_E312-Postscript.ppd
lpadmin: Unable to copy PPD file.</code></pre></div><p>Any ideas?</p>											<p class="post-edited">(Last edited by <strong>linuxuser</strong> on 5 May 2013, 22:05)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200837">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">FriedZombie</div>
					<div class="post-datetime">
						6 May 2013, 00:35					</div>
				</div>
				<div class="post-content content">
					<p>Well, I don&#039;t think the problem is at the router at this point. Because it is a rather simplistic server. It just forwards data.<br />(other then a cups server, that can do some more interesting things).</p><p>what does the cups error log (on the client computer) tell you? it could yield some more info.</p>											<p class="post-edited">(Last edited by <strong>FriedZombie</strong> on 6 May 2013, 00:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200841">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">linuxuser</div>
					<div class="post-datetime">
						6 May 2013, 00:49					</div>
				</div>
				<div class="post-content content">
					<p>If I open a text-editor an the pc (client) I see a printer named &quot;E322TP&quot; (see error above!) and if I click on print, it prints garbage.</p><div class="quotebox"><blockquote><p>cat /var/log/cups/error_log<br />...<br />E [04/May/2013:20:42:03 +0200] Unknown directive SystemGroup on line 16 of /etc/cups/cupsd.conf.<br />E [04/May/2013:22:05:55 +0200] copy_model: empty PPD file<br />E [04/May/2013:22:05:55 +0200] Returning IPP server-error-internal-error for CUPS-Add-Modify-Printer (ipp://localhost:631/printers/E322TP) from localhost<br />E [04/May/2013:23:30:45 +0200] Unknown directive SystemGroup on line 16 of /etc/cups/cupsd.conf.<br />E [04/May/2013:23:34:31 +0200] Unknown directive SystemGroup on line 16 of /etc/cups/cupsd.conf.<br />E [04/May/2013:23:47:39 +0200] Unknown directive SystemGroup on line 16 of /etc/cups/cupsd.conf.<br />E [05/May/2013:01:41:22 +0200] Unknown directive SystemGroup on line 16 of /etc/cups/cupsd.conf.<br />E [05/May/2013:01:46:53 +0200] Unknown directive SystemGroup on line 16 of /etc/cups/cupsd.conf.<br />E [05/May/2013:01:54:41 +0200] Unknown directive SystemGroup on line 16 of /etc/cups/cupsd.conf.<br />E [05/May/2013:12:43:51 +0200] Unknown directive SystemGroup on line 16 of /etc/cups/cupsd.conf.<br />E [05/May/2013:19:48:55 +0200] Unknown directive SystemGroup on line 16 of /etc/cups/cupsd.conf.<br />E [05/May/2013:20:59:08 +0200] copy_model: empty PPD file<br />E [05/May/2013:20:59:08 +0200] Returning IPP server-error-internal-error for CUPS-Add-Modify-Printer (ipp://localhost:631/printers/E322TP) from localhost</p></blockquote></div>											<p class="post-edited">(Last edited by <strong>linuxuser</strong> on 6 May 2013, 00:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200844">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">FriedZombie</div>
					<div class="post-datetime">
						6 May 2013, 01:29					</div>
				</div>
				<div class="post-content content">
					<p>Well I think the printer will work flawlessly on your windows computer.</p><p>At least remove line 16 of your /etc/cups/cupsd.conf<br />it doesn&#039;t work there anymore after a security update, systemgroup is migrated to cups-files.conf<br />(other then making a mess of the logs not the issue).</p><p>For the other issue try removing the printer and readd it.<br />Not sure if it makes a difference in this case<br /></p><div class="codebox"><pre><code>lpadmin -x E322TP &amp;&amp; lpadmin -p E322TP -E -v socket://192.168.178.50:9100 -m foomatic-db-compressed-ppds:0/Lexmark-Optra_E312-Postscript.ppd</code></pre></div><p>It could be the result of that the printer took longer then 30 secconds to install. (see a bug report somewhere on cups) Had the issue somehwere in the past as well.</p><p>edit: the driver shouldn&#039;t be the issue in this case.<br />If all else fails, you could still and try if your windows computer works better.<br />see <a href="http://dougmunsinger.com/posts/adding-hp-jetdirect-printer-to-windows-xp.html">http://dougmunsinger.com/posts/adding-h … ws-xp.html</a><br />(jetdirect is the raw protocol, and if no port is specified it defaults to 9100)</p><p>edit2: or try to set it up on your other linux computer, same way</p>											<p class="post-edited">(Last edited by <strong>FriedZombie</strong> on 6 May 2013, 01:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200845">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">linuxuser</div>
					<div class="post-datetime">
						6 May 2013, 01:54					</div>
				</div>
				<div class="post-content content">
					<p>I will give you feedback after I could test it, at the moment I have access to only 1 linux pc. Thanks for you suggestions.</p>											<p class="post-edited">(Last edited by <strong>linuxuser</strong> on 6 May 2013, 01:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200849">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">linuxuser</div>
					<div class="post-datetime">
						6 May 2013, 02:57					</div>
				</div>
				<div class="post-content content">
					<p>The path changed, a folder ppd was put in between. Now it works with Linux. lpinfo -m shows the correct path already ;-), but I used a path, which I found in a forum and worked a long time ago.</p><div class="codebox"><pre><code>#doesn&#039;t work
lpadmin -p E322TP -E     -v socket://192.168.178.50:9100 -m foomatic-db-compressed-ppds:0/Lexmark-Optra_E312-Postscript.ppd

#works:
lpadmin -p E312-PS -E    -v socket://192.168.178.50:9100 -m foomatic-db-compressed-ppds:0/ppd/foomatic-ppd/Lexmark-Optr312-Postscript.ppd
lpadmin -p E321-ljet4 -E -v socket://192.168.178.50:9100 -m foomatic-db-compressed-ppds:0/ppd/foomatic-ppd/Lexmark-Optra_E321-ljet4.ppd</code></pre></div><p>I tried a text-only page and this is ok. Don&#039;t know, when I can test windows. Thanks for your help!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200866">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">written_direcon</div>
					<div class="post-datetime">
						6 May 2013, 08:21					</div>
				</div>
				<div class="post-content content">
					<p>If your printer is supported by Google Cloud Print I&#039;d use that :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200901">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">FriedZombie</div>
					<div class="post-datetime">
						6 May 2013, 14:21					</div>
				</div>
				<div class="post-content content">
					<p>Glad you got it to work, but if it works from linux it does work from windows as well because they use the same protocol to transfer the data.</p><p>Also stupid I missed that slight path change as well <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>