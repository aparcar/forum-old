<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TP-Link TL-MR13U - small router with built-in 10,400 mAh battery</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 7 Jun 2015 and 22 Apr 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 5 of 5</div><nav><ul><li><a href="viewtopic.php%3Fid=44755&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=44755&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=44755&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p218233">
				<div class="post-metadata">
					<div class="post-num">Post #101</div>
					<div class="post-author">Xylen.C4</div>
					<div class="post-datetime">
						22 Nov 2013, 20:26					</div>
				</div>
				<div class="post-content content">
					<p>@vladorion</p><p>yesterday i was trying it. Unfourtuannely i stopped as i got the &quot;ttyUSB1&quot; but from this point it should be pretty easy!</p><p>The main problem was to get the kmod-usb-serial running. If you want to try, try the &quot;packages&quot; which i posted before. At the moment the online kmod-usb-serial does not work.</p>											<p class="post-edited">(Last edited by <strong>Xylen.C4</strong> on 22 Nov 2013, 20:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p218988">
				<div class="post-metadata">
					<div class="post-num">Post #102</div>
					<div class="post-author">Xylen.C4</div>
					<div class="post-datetime">
						1 Dec 2013, 23:22					</div>
				</div>
				<div class="post-content content">
					<p>Yesterday i made some IP changes... something goes wrong... after that i was not able to connect to the router anymore</p><h5>unfourtuanely the Failsafe mode was not working.... Be carefull with my image!!!</h5><p>Lucky me... after a couple of more tryes i was get access to luci!</p><p>How can i manage to enable the failsafe mode while im compiling the image?</p><br /><p>Thanks...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219332">
				<div class="post-metadata">
					<div class="post-num">Post #103</div>
					<div class="post-author">Xylen.C4</div>
					<div class="post-datetime">
						6 Dec 2013, 22:31					</div>
				</div>
				<div class="post-content content">
					<p>Seems to be 3G is now working for me with the ZTE MF190, i connected successfully</p><div class="codebox"><pre><code>Thu Nov 21 20:50:31 2013 kern.info kernel: [ 1180.840000] usb 1-1: new high-speed USB device number 6 using ehci-platform
Thu Nov 21 20:50:32 2013 kern.info kernel: [ 1182.750000] usb 1-1: USB disconnect, device number 6
Thu Nov 21 20:50:33 2013 kern.info kernel: [ 1183.160000] usb 1-1: new high-speed USB device number 7 using ehci-platform
Thu Nov 21 20:50:33 2013 kern.info kernel: [ 1183.400000] option 1-1:1.0: GSM modem (1-port) converter detected
Thu Nov 21 20:50:33 2013 kern.info kernel: [ 1183.430000] usb 1-1: GSM modem (1-port) converter now attached to ttyUSB0
Thu Nov 21 20:50:33 2013 kern.info kernel: [ 1183.430000] option 1-1:1.1: GSM modem (1-port) converter detected
Thu Nov 21 20:50:33 2013 kern.info kernel: [ 1183.460000] usb 1-1: GSM modem (1-port) converter now attached to ttyUSB1
Thu Nov 21 20:50:33 2013 kern.info kernel: [ 1183.460000] option 1-1:1.2: GSM modem (1-port) converter detected
Thu Nov 21 20:50:33 2013 kern.info kernel: [ 1183.490000] usb 1-1: GSM modem (1-port) converter now attached to ttyUSB2
Thu Nov 21 20:50:36 2013 daemon.notice pppd[4571]: pppd 2.4.5 started by root, uid 0
Thu Nov 21 20:50:37 2013 local2.info chat[4574]: abort on (BUSY)
Thu Nov 21 20:50:37 2013 local2.info chat[4574]: abort on (NO CARRIER)
Thu Nov 21 20:50:37 2013 local2.info chat[4574]: abort on (ERROR)
Thu Nov 21 20:50:37 2013 local2.info chat[4574]: report (CONNECT)
Thu Nov 21 20:50:37 2013 local2.info chat[4574]: timeout set to 10 seconds
Thu Nov 21 20:50:37 2013 local2.info chat[4574]: send (AT&amp;F^M)
Thu Nov 21 20:50:37 2013 local2.info chat[4574]: expect (OK)
Thu Nov 21 20:50:37 2013 local2.info chat[4574]: AT&amp;F^M^M
Thu Nov 21 20:50:37 2013 local2.info chat[4574]: OK
Thu Nov 21 20:50:37 2013 local2.info chat[4574]:  -- got it
Thu Nov 21 20:50:37 2013 local2.info chat[4574]: send (ATE1^M)
Thu Nov 21 20:50:37 2013 local2.info chat[4574]: expect (OK)
Thu Nov 21 20:50:37 2013 local2.info chat[4574]: ^M
Thu Nov 21 20:50:37 2013 local2.info chat[4574]: ATE1^M^M
Thu Nov 21 20:50:37 2013 local2.info chat[4574]: OK
Thu Nov 21 20:50:37 2013 local2.info chat[4574]:  -- got it
Thu Nov 21 20:50:37 2013 local2.info chat[4574]: send (AT+CGDCONT=1,&quot;IP&quot;,&quot;internet.t-mobile&quot;^M)
Thu Nov 21 20:50:37 2013 local2.info chat[4574]: timeout set to 30 seconds
Thu Nov 21 20:50:37 2013 local2.info chat[4574]: expect (OK)
Thu Nov 21 20:50:37 2013 local2.info chat[4574]: ^M
Thu Nov 21 20:50:37 2013 local2.info chat[4574]: AT+CGDCONT=1,&quot;IP&quot;,&quot;internet.t-mobile&quot;^M^M
Thu Nov 21 20:50:37 2013 local2.info chat[4574]: OK
Thu Nov 21 20:50:37 2013 local2.info chat[4574]:  -- got it
Thu Nov 21 20:50:37 2013 local2.info chat[4574]: send (ATD*99***1#^M)
Thu Nov 21 20:50:38 2013 local2.info chat[4574]: expect (CONNECT)
Thu Nov 21 20:50:38 2013 local2.info chat[4574]: ^M
Thu Nov 21 20:50:38 2013 local2.info chat[4574]: ATD*99***1#^M^M
Thu Nov 21 20:50:38 2013 local2.info chat[4574]: CONNECT
Thu Nov 21 20:50:38 2013 local2.info chat[4574]:  -- got it
Thu Nov 21 20:50:38 2013 local2.info chat[4574]: send ( ^M)
Thu Nov 21 20:50:38 2013 daemon.info pppd[4571]: Serial connection established.
Thu Nov 21 20:50:38 2013 daemon.info pppd[4571]: Using interface 3g-Telecom
Thu Nov 21 20:50:38 2013 daemon.notice pppd[4571]: Connect: 3g-Telecom &lt;--&gt; /dev/ttyUSB2
Thu Nov 21 20:50:39 2013 daemon.info pppd[4571]: CHAP authentication succeeded
Thu Nov 21 20:50:39 2013 daemon.notice pppd[4571]: CHAP authentication succeeded
Thu Nov 21 20:50:46 2013 daemon.warn pppd[4571]: Could not determine remote IP address: defaulting to 10.64.64.64
Thu Nov 21 20:50:46 2013 daemon.notice pppd[4571]: local  IP address 10.30.200.160
Thu Nov 21 20:50:46 2013 daemon.notice pppd[4571]: remote IP address 10.64.64.64
Thu Nov 21 20:50:46 2013 daemon.notice pppd[4571]: primary   DNS address 10.74.210.210
Thu Nov 21 20:50:46 2013 daemon.notice pppd[4571]: secondary DNS address 10.74.210.211
Thu Nov 21 20:50:46 2013 daemon.notice netifd: Interface &#039;Telecom&#039; is now up
Thu Nov 21 20:50:46 2013 user.notice firewall: Reloading firewall due to ifup of Telecom (3g-Telecom)
Thu Nov 21 20:50:52 2013 daemon.info dnsmasq[2876]: reading /tmp/resolv.conf.auto
Thu Nov 21 20:50:52 2013 daemon.info dnsmasq[2876]: using nameserver 10.74.210.211#53
Thu Nov 21 20:50:52 2013 daemon.info dnsmasq[2876]: using nameserver 10.74.210.210#53
Thu Nov 21 20:50:52 2013 daemon.info dnsmasq[2876]: using local addresses only for domain lan</code></pre></div><p><a href="http://bildr.no/view/R3dsNldi"><span class="postimg"><img src="http://bildr.no/thumb/R3dsNldi.jpeg" alt="http://bildr.no/thumb/R3dsNldi.jpeg" /></span></a><br /><a href="http://bildr.no/view/dnZsdWdi"><span class="postimg"><img src="http://bildr.no/thumb/dnZsdWdi.jpeg" alt="http://bildr.no/thumb/dnZsdWdi.jpeg" /></span></a><br /><a href="http://bildr.no/view/SnB5ZVEw"><span class="postimg"><img src="http://bildr.no/thumb/SnB5ZVEw.jpeg" alt="http://bildr.no/thumb/SnB5ZVEw.jpeg" /></span></a></p><br /><p>Modules additional installed by default:<br />- comgt <br />- kmod-usb2<br />- kmod-usb-ohci<br />- kmod-usb-uhci <br />- kmod-usb-serial<br />- kmod-usb-serial-option,<br />- kmod-usb-serial-wwan<br />- kmod-usb-acm<br />- luci-proto-3g<br />- usb-modeswitch<br />- ppp-mod-pptp</p><p>Modules which are NOT installed by default:<br />- huaweiAktBbo<br />- luci-proto-ppp</p><p>Modules which are removed:<br />- Some IPv6 packages</p><br /><p>Images: (use at your own risk)<br />- <a href="https://www.dropbox.com/s/v9zmjlunjcn1fk0/openwrt-ar71xx-generic-tl-mr13u-v1-squashfs-sysupgrade.bin">Sysupgrade including Luci</a><br />- <a href="https://www.dropbox.com/s/pjrll5ezd40cx4e/openwrt-ar71xx-generic-tl-mr13u-v1-squashfs-factory.bin">Factory image including Luci (not tested)</a><br />- <a href="https://www.dropbox.com/s/0pkrdkh21qs4dad/md5sums">md5sums</a><br />- <a href="https://www.dropbox.com/s/5hr6xqfzs4cgu9g/packages.7z">Packages</a><br />- <a href="https://www.dropbox.com/s/4y103j3csnt28j5/openwrt-ar71xx-generic-tl-mr13u-v1-squashfs-INCLUDING_3G.7z">Complete package</a></p><br /><br /><p>@anarchy99: I do not understand, what do you need?</p>											<p class="post-edited">(Last edited by <strong>Xylen.C4</strong> on 6 Dec 2013, 22:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219756">
				<div class="post-metadata">
					<div class="post-num">Post #104</div>
					<div class="post-author">_hunter</div>
					<div class="post-datetime">
						11 Dec 2013, 23:31					</div>
				</div>
				<div class="post-content content">
					<p>Greetings,</p><p>I have one (noob?) question about sysupgrade: there are 3 different binaries:<br />ap96-squashfs-sysupgrade.bin<br />pb42-squashfs-sysupgrade.bin<br />pb44-squashfs-sysupgrade.bin<br />in the repository: <a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/">http://downloads.openwrt.org/snapshots/trunk/ar71xx/</a><br />can you, please, explain what&#039;s the difference (and how I should choose which-one to use)?</p><p>Best regards...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219856">
				<div class="post-metadata">
					<div class="post-num">Post #105</div>
					<div class="post-author">Xylen.C4</div>
					<div class="post-datetime">
						13 Dec 2013, 02:28					</div>
				</div>
				<div class="post-content content">
					<p>Normally you should use</p><p><a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/openwrt-ar71xx-generic-tl-mr13u-v1-squashfs-factory.bin">http://downloads.openwrt.org/snapshots/ … actory.bin</a></p><p>or</p><p><a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/openwrt-ar71xx-generic-tl-mr13u-v1-squashfs-sysupgrade.bin">http://downloads.openwrt.org/snapshots/ … pgrade.bin</a></p><p>for the MR13U, this is different for other devices!</p><p>Be aware... this images does not include LUCI</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220706">
				<div class="post-metadata">
					<div class="post-num">Post #106</div>
					<div class="post-author">Xylen.C4</div>
					<div class="post-datetime">
						23 Dec 2013, 15:00					</div>
				</div>
				<div class="post-content content">
					<p>hmmm... failsafe mode was working for me so maybe i was doing something wrong?</p><p>This week i was working in Dalian (China), afterwork i was trying to get the TL-TR861 10400E at the local markets... no changse this device is not available. At leas i found 2 sellers for this device, i asked about 50+ shops. The market price was betrween 220 Yuan to 250 Yuan.</p><p>Also a chinese colleague at work tryed to get it over the internet (TL-TR861 10400E). Nothing! I dindt want to get it to any price!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223263">
				<div class="post-metadata">
					<div class="post-num">Post #107</div>
					<div class="post-author">Vincent Orange</div>
					<div class="post-datetime">
						20 Jan 2014, 17:01					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I&#039;m and teacher and I&#039;d like to use the TP-Link MR13U as a LibraryBox/PirateBox for students for get materials, books etc,</p><p>So far I have replaced the TP-Link made firmware with OpenWRT firmware version made specially for this device which I got from here. <a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/openwrt-ar71xx-generic-tl-mr13u-v1-squashfs-factory.bin">http://downloads.openwrt.org/snapshots/ … actory.bin</a> </p><p>I have also been able to telnet to the device set a password and then SSH into it and modify /etc/config/wireless (I noticed there were two lines that said &quot;option disable 0&quot; so i deleted both and then the wifi started working)</p><p>I&#039;m now looking to put librarybox onto it. </p><p> - Do I need to install LuCI enable me to install librarybox?<br /> - Are there MR13U specific instrcutions or can I just use the instructions written for MR3020 seen here <a href="http://librarybox.us/MR3020.php">http://librarybox.us/MR3020.php</a> or for the MR3020 (or WR703N) <a href="http://daviddarts.com/piratebox-diy-openwrt/">http://daviddarts.com/piratebox-diy-openwrt/</a></p><p>thanks to all the contributors.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225544">
				<div class="post-metadata">
					<div class="post-num">Post #108</div>
					<div class="post-author">Vincent Orange</div>
					<div class="post-datetime">
						17 Feb 2014, 10:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Vincent Orange wrote:</cite><blockquote><p>Hi,</p><p>I&#039;m and teacher and I&#039;d like to use the TP-Link MR13U as a LibraryBox/PirateBox for students for get materials, books etc,</p><p>So far I have replaced the TP-Link made firmware with OpenWRT firmware version made specially for this device which I got from here. <a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/openwrt-ar71xx-generic-tl-mr13u-v1-squashfs-factory.bin">http://downloads.openwrt.org/snapshots/ … actory.bin</a> </p><p>I have also been able to telnet to the device set a password and then SSH into it and modify /etc/config/wireless (I noticed there were two lines that said &quot;option disable 0&quot; so i deleted both and then the wifi started working)</p><p>I&#039;m now looking to put librarybox onto it. </p><p> - Do I need to install LuCI enable me to install librarybox?<br /> - Are there MR13U specific instrcutions or can I just use the instructions written for MR3020 seen here <a href="http://librarybox.us/MR3020.php">http://librarybox.us/MR3020.php</a> or for the MR3020 (or WR703N) <a href="http://daviddarts.com/piratebox-diy-openwrt/">http://daviddarts.com/piratebox-diy-openwrt/</a></p><p>thanks to all the contributors.</p></blockquote></div><br /><p>I&#039;ve manage to get this device working with ful piratebox features by using a zustom firmware build supplied by fried zombie.<br /><a href="http://stable.openwrt.piratebox.de/ar71xx_AA_BB_0.1/">http://stable.openwrt.piratebox.de/ar71xx_AA_BB_0.1/</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p228721">
				<div class="post-metadata">
					<div class="post-num">Post #109</div>
					<div class="post-author">micke_s</div>
					<div class="post-datetime">
						28 Mar 2014, 22:38					</div>
				</div>
				<div class="post-content content">
					<p>My backup solution for MR13U:<br />Mount Flash memory on a small PCB with headers for be able to deattach it.<br />I have constructed a adapter for use a TotalPhase Aardvark I2C/SPI Host Adapter.</p><p><span class="postimg"><img src="http://1.bp.blogspot.com/-LJOXWw2KmLQ/UzXc7qf965I/AAAAAAAAAXE/2R0JdkmVL6Y/s1600/756.jpg" alt="deattachable memory" /></span></p><br /><p><span class="postimg"><img src="http://1.bp.blogspot.com/-ld1LZE8N938/UzXb4HgoK9I/AAAAAAAAAWs/80cZwH-nKuU/s1600/761.jpg" alt="deattachable memory" /></span></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p229704">
				<div class="post-metadata">
					<div class="post-num">Post #110</div>
					<div class="post-author">vladorion</div>
					<div class="post-datetime">
						9 Apr 2014, 15:50					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Xylen.C4 wrote:</cite><blockquote><p>Images: (use at your own risk)<br />- <a href="https://www.dropbox.com/s/v9zmjlunjcn1fk0/openwrt-ar71xx-generic-tl-mr13u-v1-squashfs-sysupgrade.bin">Sysupgrade including Luci</a><br />- <a href="https://www.dropbox.com/s/pjrll5ezd40cx4e/openwrt-ar71xx-generic-tl-mr13u-v1-squashfs-factory.bin">Factory image including Luci (not tested)</a><br />- <a href="https://www.dropbox.com/s/0pkrdkh21qs4dad/md5sums">md5sums</a><br />- <a href="https://www.dropbox.com/s/5hr6xqfzs4cgu9g/packages.7z">Packages</a><br />- <a href="https://www.dropbox.com/s/4y103j3csnt28j5/openwrt-ar71xx-generic-tl-mr13u-v1-squashfs-INCLUDING_3G.7z">Complete package</a></p></blockquote></div><br /><p>So, as I can see you got it to work with 3G modem. Can you explain me what image should i flash to get 3G modems working? I am using both ZTE and Huawei modems and I need Luci.</p>											<p class="post-edited">(Last edited by <strong>vladorion</strong> on 9 Apr 2014, 15:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p229973">
				<div class="post-metadata">
					<div class="post-num">Post #111</div>
					<div class="post-author">vladorion</div>
					<div class="post-datetime">
						12 Apr 2014, 08:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>micke_s wrote:</cite><blockquote><p>My backup solution for MR13U:<br />Mount Flash memory on a small PCB with headers for be able to deattach it.<br />I have constructed a adapter for use a TotalPhase Aardvark I2C/SPI Host Adapter.</p></blockquote></div><p>My device got bricked. Now i guess i have to disassemble it and connect a serial cable. Can you explain how to open the case with minimal damage?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230163">
				<div class="post-metadata">
					<div class="post-num">Post #112</div>
					<div class="post-author">micke_s</div>
					<div class="post-datetime">
						14 Apr 2014, 12:32					</div>
				</div>
				<div class="post-content content">
					<p>I first used a knife(that you eat with), to first break the glue, a thin one.<br />After i have separate it a little bit i take two more knives and bending.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230205">
				<div class="post-metadata">
					<div class="post-num">Post #113</div>
					<div class="post-author">vladorion</div>
					<div class="post-datetime">
						14 Apr 2014, 20:15					</div>
				</div>
				<div class="post-content content">
					<p>Opened it already with a surgery scalpel. Now I need to solder wires to tx, rx and gnd pads, they are very small <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230207">
				<div class="post-metadata">
					<div class="post-num">Post #114</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						14 Apr 2014, 20:25					</div>
				</div>
				<div class="post-content content">
					<p>good luck... if you are not expert in soldering i&#039;d try keeping the wires on pads by hand.. call a friend to help xD</p>											<p class="post-edited">(Last edited by <strong>nebbia88</strong> on 14 Apr 2014, 20:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p287432">
				<div class="post-metadata">
					<div class="post-num">Post #115</div>
					<div class="post-author">gr1ef</div>
					<div class="post-datetime">
						13 Aug 2015, 15:09					</div>
				</div>
				<div class="post-content content">
					<p>Hello!<br />Search for new firmware for TP-Link TL-MR13U and found that TP-Link relise source of original firmware under GPL - <a href="http://www.tp-link.com/resources/gpl/150Router.tar">http://www.tp-link.com/resources/gpl/150Router.tar</a> <br />Maybe somebody can translate original firmware on english?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p298653">
				<div class="post-metadata">
					<div class="post-num">Post #116</div>
					<div class="post-author">peterstav</div>
					<div class="post-datetime">
						5 Nov 2015, 00:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>otlabs wrote:</cite><blockquote><p>Christmas comes early this year. Especially for @grayman4hire ;-)</p><p>This patch brings support for TP-Link TL-MR13U in Attitude Adjustment 12.09 (r37729, latest release for AA):<br /></p><div class="codebox"><pre><code>diff --git a/target/linux/ar71xx/base-files/etc/diag.sh b/target/linux/ar71xx/base-files/etc/diag.sh
index 416322d..7590414 100755
--- a/target/linux/ar71xx/base-files/etc/diag.sh
+++ b/target/linux/ar71xx/base-files/etc/diag.sh
@@ -139,6 +139,7 @@ get_status_led() {
     tl-wr941nd)
         status_led=&quot;tp-link:green:system&quot;
         ;;
+    tl-mr13u | \
     tl-wdr4300 | \
     tl-wr703n)
         status_led=&quot;tp-link:blue:system&quot;
diff --git a/target/linux/ar71xx/base-files/etc/uci-defaults/network b/target/linux/ar71xx/base-files/etc/uci-defaults/network
index 7fa219d..6daf568 100755
--- a/target/linux/ar71xx/base-files/etc/uci-defaults/network
+++ b/target/linux/ar71xx/base-files/etc/uci-defaults/network
@@ -154,6 +154,7 @@ eap7660d |\
 mr600 |\
 rb-411 |\
 tl-mr11u |\
+tl-mr13u |\
 tl-mr3020 |\
 tl-mr3040 |\
 tl-wa901nd |\
diff --git a/target/linux/ar71xx/base-files/lib/ar71xx.sh b/target/linux/ar71xx/base-files/lib/ar71xx.sh
index 2bc8194..ed3b33e 100755
--- a/target/linux/ar71xx/base-files/lib/ar71xx.sh
+++ b/target/linux/ar71xx/base-files/lib/ar71xx.sh
@@ -111,6 +111,9 @@ tplink_board_detect() {
     &quot;110101&quot;*)
         model=&quot;TP-Link TL-MR11U&quot;
         ;;
+    &quot;001301&quot;*)
+        model=&quot;TP-Link TL-MR13U&quot;
+        ;;
     &quot;302000&quot;*)
         model=&quot;TP-Link TL-MR3020&quot;
         ;;
@@ -384,6 +387,9 @@ ar71xx_board_detect() {
     *&quot;TL-MR11U&quot;)
         name=&quot;tl-mr11u&quot;
         ;;
+    *&quot;TL-MR13U&quot;)
+        name=&quot;tl-mr13u&quot;
+        ;;
     *UniFi)
         name=&quot;unifi&quot;
         ;;
diff --git a/target/linux/ar71xx/base-files/lib/upgrade/platform.sh b/target/linux/ar71xx/base-files/lib/upgrade/platform.sh
index 49b1de9..c105318 100755
--- a/target/linux/ar71xx/base-files/lib/upgrade/platform.sh
+++ b/target/linux/ar71xx/base-files/lib/upgrade/platform.sh
@@ -148,6 +148,7 @@ platform_check_image() {
         return 1
         ;;
     tl-mr11u | \
+    tl-mr13u | \
     tl-mr3020 | \
     tl-mr3040 | \
     tl-mr3220 | \
diff --git a/target/linux/ar71xx/config-3.3 b/target/linux/ar71xx/config-3.3
index 446f202..ff1db6a 100644
--- a/target/linux/ar71xx/config-3.3
+++ b/target/linux/ar71xx/config-3.3
@@ -56,6 +56,7 @@ CONFIG_ATH79_MACH_TEW_632BRP=y
 CONFIG_ATH79_MACH_TEW_673GRU=y
 CONFIG_ATH79_MACH_TEW_712BR=y
 CONFIG_ATH79_MACH_TL_MR11U=y
+CONFIG_ATH79_MACH_TL_MR13U=y
 CONFIG_ATH79_MACH_TL_MR3020=y
 CONFIG_ATH79_MACH_TL_MR3X20=y
 CONFIG_ATH79_MACH_TL_WA901ND=y
diff --git a/target/linux/ar71xx/files/arch/mips/ath79/mach-tl-mr13u.c b/target/linux/ar71xx/files/arch/mips/ath79/mach-tl-mr13u.c
new file mode 100644
index 0000000..8b03645
--- /dev/null
+++ b/target/linux/ar71xx/files/arch/mips/ath79/mach-tl-mr13u.c
@@ -0,0 +1,107 @@
+/*
+ *  TP-LINK TL-MR13U board support
+ *
+ *  Copyright (C) 2011 dongyuqi &lt;729650915@qq.com&gt;
+ *  Copyright (C) 2011-2012 Gabor Juhos &lt;juhosg@openwrt.org&gt;
+ *
+ *  This program is free software; you can redistribute it and/or modify it
+ *  under the terms of the GNU General Public License version 2 as published
+ *  by the Free Software Foundation.
+ */
+
+#include &lt;linux/gpio.h&gt;
+
+#include &lt;asm/mach-ath79/ath79.h&gt;
+
+#include &quot;dev-eth.h&quot;
+#include &quot;dev-gpio-buttons.h&quot;
+#include &quot;dev-leds-gpio.h&quot;
+#include &quot;dev-m25p80.h&quot;
+#include &quot;dev-usb.h&quot;
+#include &quot;dev-wmac.h&quot;
+#include &quot;machtypes.h&quot;
+
+#define TL_MR13U_GPIO_LED_SYSTEM    27
+
+#define TL_MR13U_GPIO_BTN_RESET        11
+#define TL_MR13U_GPIO_BTN_SW1        6
+#define TL_MR13U_GPIO_BTN_SW2        7
+
+#define TL_MR13U_GPIO_USB_POWER        18
+
+#define TL_MR13U_KEYS_POLL_INTERVAL    20    /* msecs */
+#define TL_MR13U_KEYS_DEBOUNCE_INTERVAL    (3 * TL_MR13U_KEYS_POLL_INTERVAL)
+
+static const char *tl_mr13u_part_probes[] = {
+    &quot;tp-link&quot;,
+    NULL,
+};
+
+static struct flash_platform_data tl_mr13u_flash_data = {
+    .part_probes    = tl_mr13u_part_probes,
+};
+
+static struct gpio_led tl_mr13u_leds_gpio[] __initdata = {
+    {
+        .name        = &quot;tp-link:blue:system&quot;,
+        .gpio        = TL_MR13U_GPIO_LED_SYSTEM,
+        .active_low    = 1,
+    },
+};
+
+static struct gpio_keys_button tl_mr13u_gpio_keys[] __initdata = {
+    {
+        .desc        = &quot;reset&quot;,
+        .type        = EV_KEY,
+        .code        = KEY_RESTART,
+        .debounce_interval = TL_MR13U_KEYS_DEBOUNCE_INTERVAL,
+        .gpio        = TL_MR13U_GPIO_BTN_RESET,
+        .active_low    = 0,
+    },
+    {
+        .desc        = &quot;sw1&quot;,
+        .type        = EV_KEY,
+        .code        = BTN_0,
+        .debounce_interval = TL_MR13U_KEYS_DEBOUNCE_INTERVAL,
+        .gpio        = TL_MR13U_GPIO_BTN_SW1,
+        .active_low    = 0,
+    },
+    {
+        .desc        = &quot;sw2&quot;,
+        .type        = EV_KEY,
+        .code        = BTN_1,
+        .debounce_interval = TL_MR13U_KEYS_DEBOUNCE_INTERVAL,
+        .gpio        = TL_MR13U_GPIO_BTN_SW2,
+        .active_low    = 0,
+    },
+};
+
+static void __init tl_mr13u_setup(void)
+{
+    u8 *mac = (u8 *) KSEG1ADDR(0x1f01fc00);
+    u8 *ee = (u8 *) KSEG1ADDR(0x1fff1000);
+
+    /* disable PHY_SWAP and PHY_ADDR_SWAP bits */
+    ath79_setup_ar933x_phy4_switch(false, false);
+
+    ath79_register_m25p80(&amp;tl_mr13u_flash_data);
+    ath79_register_leds_gpio(-1, ARRAY_SIZE(tl_mr13u_leds_gpio),
+                 tl_mr13u_leds_gpio);
+    ath79_register_gpio_keys_polled(-1, TL_MR13U_KEYS_POLL_INTERVAL,
+                    ARRAY_SIZE(tl_mr13u_gpio_keys),
+                    tl_mr13u_gpio_keys);
+
+    gpio_request_one(TL_MR13U_GPIO_USB_POWER,
+             GPIOF_OUT_INIT_HIGH | GPIOF_EXPORT_DIR_FIXED,
+             &quot;USB power&quot;);
+    ath79_register_usb();
+
+    ath79_init_mac(ath79_eth0_data.mac_addr, mac, 0);
+
+    ath79_register_mdio(0, 0x0);
+    ath79_register_eth(0);
+    ath79_register_wmac(ee, mac);
+}
+
+MIPS_MACHINE(ATH79_MACH_TL_MR13U, &quot;TL-MR13U&quot;, &quot;TP-LINK TL-MR13U v1&quot;,
+         tl_mr13u_setup);
diff --git a/target/linux/ar71xx/generic/profiles/tp-link.mk b/target/linux/ar71xx/generic/profiles/tp-link.mk
index 07d7059..34c7933 100644
--- a/target/linux/ar71xx/generic/profiles/tp-link.mk
+++ b/target/linux/ar71xx/generic/profiles/tp-link.mk
@@ -16,6 +16,17 @@ endef
 $(eval $(call Profile,TLMR11U))
 
 
+define Profile/TLMR13U
+    NAME:=TP-LINK TL-MR13U
+    PACKAGES:=kmod-usb-core kmod-usb2 kmod-ledtrig-usbdev
+endef
+
+define Profile/TLMR13U/Description
+    Package set optimized for the TP-LINK TL-MR13U.
+endef
+$(eval $(call Profile,TLMR13U))
+
+
 define Profile/TLMR3020
     NAME:=TP-LINK TL-MR3020
     PACKAGES:=kmod-usb-core kmod-usb2 kmod-ledtrig-usbdev
diff --git a/target/linux/ar71xx/image/Makefile b/target/linux/ar71xx/image/Makefile
index 9ebe486..5206b9b 100644
--- a/target/linux/ar71xx/image/Makefile
+++ b/target/linux/ar71xx/image/Makefile
@@ -873,6 +873,7 @@ $(eval $(call SingleProfile,TPLINK,$(fs_64kraw),TLWR941NV4,tl-wr941nd-v4,TL-WR74
 $(eval $(call SingleProfile,TPLINK,$(fs_64kraw),TLWR1043,tl-wr1043nd-v1,TL-WR1043ND,ttyS0,115200,0x10430001,1,8M))
 
 $(eval $(call SingleProfile,TPLINK-LZMA,$(fs_64kraw),TLMR11U,tl-mr11u-v1,TL-MR11U,ttyATH0,115200,0x00110101,1,4Mlzma))
+$(eval $(call SingleProfile,TPLINK-LZMA,$(fs_64kraw),TLMR13U,tl-mr13u-v1,TL-MR13U,ttyATH0,115200,0x00130101,1,4Mlzma))
 $(eval $(call SingleProfile,TPLINK-LZMA,$(fs_64kraw),TLMR3020,tl-mr3020-v1,TL-MR3020,ttyATH0,115200,0x30200001,1,4Mlzma))
 $(eval $(call SingleProfile,TPLINK-LZMA,$(fs_64kraw),TLMR3040,tl-mr3040-v1,TL-MR3040,ttyATH0,115200,0x30400001,1,4Mlzma))
 $(eval $(call SingleProfile,TPLINK-LZMA,$(fs_64kraw),TLWR703,tl-wr703n-v1,TL-WR703N,ttyATH0,115200,0x07030101,1,4Mlzma))
diff --git a/target/linux/ar71xx/patches-3.3/930-add-tl-mr13u-support.patch b/target/linux/ar71xx/patches-3.3/930-add-tl-mr13u-support.patch
new file mode 100644
index 0000000..2daf6cd
--- /dev/null
+++ b/target/linux/ar71xx/patches-3.3/930-add-tl-mr13u-support.patch
@@ -0,0 +1,39 @@
+--- a/arch/mips/ath79/Kconfig
++++ b/arch/mips/ath79/Kconfig
+@@ -441,6 +441,16 @@ config ATH79_MACH_TL_MR11U
+     select ATH79_DEV_USB
+     select ATH79_DEV_WMAC
+ 
++config ATH79_MACH_TL_MR13U
++    bool &quot;TP-LINK TL-MR13U support&quot;
++    select SOC_AR933X
++    select ATH79_DEV_ETH
++    select ATH79_DEV_GPIO_BUTTONS
++    select ATH79_DEV_LEDS_GPIO
++    select ATH79_DEV_M25P80
++    select ATH79_DEV_USB
++    select ATH79_DEV_WMAC
++
+ config ATH79_MACH_TL_MR3020
+     bool &quot;TP-LINK TL-MR3020 support&quot;
+     select SOC_AR933X
+--- a/arch/mips/ath79/Makefile
++++ b/arch/mips/ath79/Makefile
+@@ -75,6 +75,7 @@ obj-$(CONFIG_ATH79_MACH_TEW_632BRP)    += m
+ obj-$(CONFIG_ATH79_MACH_TEW_673GRU)    += mach-tew-673gru.o
+ obj-$(CONFIG_ATH79_MACH_TEW_712BR)    += mach-tew-712br.o
+ obj-$(CONFIG_ATH79_MACH_TL_MR11U)    += mach-tl-mr11u.o
++obj-$(CONFIG_ATH79_MACH_TL_MR13U)    += mach-tl-mr13u.o
+ obj-$(CONFIG_ATH79_MACH_TL_MR3020)    += mach-tl-mr3020.o
+ obj-$(CONFIG_ATH79_MACH_TL_MR3X20)    += mach-tl-mr3x20.o
+ obj-$(CONFIG_ATH79_MACH_TL_WA901ND)    += mach-tl-wa901nd.o
+--- a/arch/mips/ath79/machtypes.h
++++ b/arch/mips/ath79/machtypes.h
+@@ -72,6 +72,7 @@ enum ath79_mach_type {
+     ATH79_MACH_TEW_673GRU,        /* TRENDnet TEW-673GRU */
+     ATH79_MACH_TEW_712BR,        /* TRENDnet TEW-712BR */
+     ATH79_MACH_TL_MR11U,        /* TP-LINK TL-MR11U */
++    ATH79_MACH_TL_MR13U,        /* TP-LINK TL-MR13U */
+     ATH79_MACH_TL_MR3020,        /* TP-LINK TL-MR3020 */
+     ATH79_MACH_TL_MR3040,        /* TP-LINK TL-MR3040 */
+     ATH79_MACH_TL_MR3220,        /* TP-LINK TL-MR3220 */
diff --git a/tools/firmware-utils/src/mktplinkfw.c b/tools/firmware-utils/src/mktplinkfw.c
index 2be6335..595e6f9 100644
--- a/tools/firmware-utils/src/mktplinkfw.c
+++ b/tools/firmware-utils/src/mktplinkfw.c
@@ -30,6 +30,7 @@
 #define ALIGN(x,a) ({ typeof(a) __a = (a); (((x) + __a - 1) &amp; ~(__a - 1)); })
 
 #define HEADER_VERSION_V1    0x01000000
+#define HWID_TL_MR13U_V1    0x00130101
 #define HWID_TL_MR3020_V1    0x30200001
 #define HWID_TL_MR3220_V1    0x32200001
 #define HWID_TL_MR3420_V1    0x34200001
@@ -179,6 +180,11 @@ static struct flash_layout layouts[] = {
 
 static struct board_info boards[] = {
     {
+        .id        = &quot;TL-MR13Uv1&quot;,
+        .hw_id        = HWID_TL_MR13U_V1,
+        .hw_rev        = 1,
+        .layout_id    = &quot;4Mlzma&quot;,
+    }, {
         .id        = &quot;TL-MR3020v1&quot;,
         .hw_id        = HWID_TL_MR3020_V1,
         .hw_rev        = 1,</code></pre></div><p>You can get a patch file, firmware images and some packages from MEGA:</p><p>20130807 (Folder Link, 38.1 MiB)<br /><a href="https://mega.co.nz/#F!UVQmibwD!YYg-tmcyCaZpKtmAOpPsBA">https://mega.co.nz/#F!UVQmibwD!YYg-tmcyCaZpKtmAOpPsBA</a></p><p>WARNING: I had no time to test this build, so use it at your own risk (or wait till I get some time to test it).</p></blockquote></div><br /><p>@otlabs I installed your factory version from this post but it&#039;s got a password, can you please make it public or send it to me at peterstavroulakis@hotmail.com as I&#039;ve installed it on two routers now!! Thanks.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 5 of 5</div><nav><ul><li><a href="viewtopic.php%3Fid=44755&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=44755&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=44755&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>