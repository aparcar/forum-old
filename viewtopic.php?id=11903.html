<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [Howto] WiFi toggle</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 17 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p53246">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">forum2006</div>
					<div class="post-datetime">
						1 Aug 2007, 23:54					</div>
				</div>
				<div class="post-content content">
					<p><span class="bbu"><strong>WiFi toggle</strong></span></p><p>Moved to Wiki: <a href="http://wiki.openwrt.org/OpenWrtDocs/Customizing/Software/WifiToggle">http://wiki.openwrt.org/OpenWrtDocs/Cus … WifiToggle</a></p><br /><p><strong>14.09.2007</strong> Move to Wiki page: <a href="http://wiki.openwrt.org/OpenWrtDocs/Customizing/Software/WifiToggle">WifiToggle</a>.<br /><strong>08.09.2007</strong> Rewrite the hotplug script to work with Atheros and Broadcom WiFi. Use a UCI configuration file to configure the button.</p>											<p class="post-edited">(Last edited by <strong>forum2006</strong> on 14 Sep 2007, 14:29)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p53287">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">MkFly</div>
					<div class="post-datetime">
						2 Aug 2007, 20:50					</div>
				</div>
				<div class="post-content content">
					<p>The <strong>if [ &quot;$ACTION&quot; = &quot;pressed&quot; ]</strong> line may mitigate this, but I use a hotplug script to toggle ports via my SES button, and I use:<br /></p><div class="codebox"><pre><code>if [ $BUTTON == &quot;ses&quot; ] &amp;&amp; [ $SEEN != &quot;0&quot; ];</code></pre></div><p>Without checking $SEEN, I had problems if I hit the button twice too fast (which I don&#039;t normally do, but I didn&#039;t want unexpected results should I get button-happy). <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p57581">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">tonyboy</div>
					<div class="post-datetime">
						16 Oct 2007, 15:55					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m getting the wifitoggle mod to turn on correctly by pressing reset button, which is verified by &quot;cat /etc/config/wireless&quot; where disabled=0 AND the AIR led turns on. </p><p>But when I press the button again wifi turns off (in /etc/config/wireless) but the AIR led is still on. When the router is rebooted the AIR led turns off. </p><p>Shouldn&#039;t the AIR led turn off when pressing the button a second time (disabling wifi)?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p58358">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">bflorin</div>
					<div class="post-datetime">
						1 Nov 2007, 16:06					</div>
				</div>
				<div class="post-content content">
					<p>tonyboy: same issue here... <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> i hope somebody could help as...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p58359">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">forum2006</div>
					<div class="post-datetime">
						1 Nov 2007, 16:12					</div>
				</div>
				<div class="post-content content">
					<p>IIRC on most routers you cannot control the WiFi LED.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60816">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">michu</div>
					<div class="post-datetime">
						24 Dec 2007, 10:20					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve created a package called wifi toggler, check <a href="https://dev.openwrt.org/ticket/2855">https://dev.openwrt.org/ticket/2855</a> . this package is for atheros based routers but might be modified to support other hw platforms aswell. the only atheros dependen task is to enable or disable the led. </p><p>cheers</p>											<p class="post-edited">(Last edited by <strong>michu</strong> on 24 Dec 2007, 10:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p91583">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Miriup</div>
					<div class="post-datetime">
						19 Jul 2009, 14:40					</div>
				</div>
				<div class="post-content content">
					<p>Because I couldn&#039;t find the wiki page posted, here the short description I was missing out on in the beginning. I&#039;m using Kamikaze 7.09 and to make it work there you need to install the &quot;hotplug2&quot; package first. With my system some hotplug scripts already came (the ones required for booting) without the hotplug2 engine itself. That confused me a bit.</p><p>I put this script in /etc/hotplug.d/button/30-button-trigger:<br /></p><div class="codebox"><pre><code>if [ &quot;${ACTION}&quot; == &quot;released&quot; ]
then
        /usr/sbin/wlan-button
fi</code></pre></div><p>Whenever any button is &quot;released&quot;, the /usr/sbin/wlan-button script is started. It looks like this:</p><div class="codebox"><pre><code>#!/bin/sh

if [ `wlc radio` == &quot;1&quot; ]
then
        wlc radio 0
else
        wlc radio 1
fi</code></pre></div><p>I leave it as an exercise to the implementor to make it work only with the &quot;ses&quot; button. <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106896">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						15 Apr 2010, 01:12					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://wiki.georgweiss.de/Hardware/ASUS-WL500pg#wifi-on.2Foff-toggle_with_EZ-SETUP-button">1.5 wifi-on/off-toggle with EZ-SETUP-button - wiki.georgweiss.de</a> (/etc/hotplug.d/button/01-wifitoggle &amp; /etc/config/wifitoggle)<br /><a href="http://pastebin.ca/raw/687653">http://pastebin.ca/raw/687653</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p107458">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						21 Apr 2010, 08:52					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>forum2006 wrote:</cite><blockquote><p><span class="bbu"><strong>WiFi toggle</strong></span></p><p>Moved to Wiki: <a href="http://wiki.openwrt.org/OpenWrtDocs/Customizing/Software/WifiToggle">http://wiki.openwrt.org/OpenWrtDocs/Cus … WifiToggle</a></p><br /><p><strong>14.09.2007</strong> Move to Wiki page: <a href="http://wiki.openwrt.org/OpenWrtDocs/Customizing/Software/WifiToggle">WifiToggle</a>.<br /><strong>08.09.2007</strong> Rewrite the hotplug script to work with Atheros and Broadcom WiFi. Use a UCI configuration file to configure the button.</p></blockquote></div><p>There&#039;s one side effect of the Alternative Script. If issue &quot;uci commit&quot; or just &quot;uci commit wireless&quot; while wireless being turned off, wireless will be off on the next boot. And if wireless is off initially, there&#039;s a chance that executing the &quot;/sbin/woggle&quot; script might sometimes crash the router. It happened once or twice on me but I can&#039;t be sure exactly how. Can&#039;t be sure whether the script has fully initialized the wireless interface or not.</p><p>Could it be some services of the wireless interface being down initially? What should be done in the custom_user_startup script before executing the /sbin/woggle script if the wireless is off initially?</p><p>Edit:<br />Just found the new wiki of Wifi Toggle. Comparing with the old wiki, there&#039;re several modifications in the new wiki.<br /><a href="http://oldwiki.openwrt.org/OpenWrtDocs(2f)Customizing(2f)Software(2f)WifiToggle.html">OpenWrtDocs/Customizing/Software/WifiToggle</a> (old wiki)<br /><a href="http://wiki.openwrt.org/doc/howto/wifitoggle">Wifi Toggle Script - OpenWrt Wiki</a> (new wiki)</p>											<p class="post-edited">(Last edited by <strong>fyi</strong> on 24 Apr 2010, 09:17)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>