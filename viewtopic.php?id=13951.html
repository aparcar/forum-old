<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Linksys AG241v2 [AR7] don&#039;t Ping with OpenWRT ADM6996LC switch</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p61123">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">crowm</div>
					<div class="post-datetime">
						2 Jan 2008, 07:19					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,</p><p>I have put OpenWRT from trunk r10081 and OpenWRT don&#039;t make PING to external Host.</p><p>Last Boot - <strong>no problems</strong><br />ifconfig&nbsp; - <strong>no problems</strong><br />ping 192.168.1.1 - <strong>no problems</strong><br />ping 192.168.1.123 - <strong>NO PING <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></strong> with OpenWRT <strong>OK</strong> with <strong>Original Firmware</strong></p><p>Thanks.</p><br /><div class="codebox"><pre><code>root@OpenWrt:/# dmesg
Linux version 2.6.23.1 (crowm@proteus.subdown.net) (gcc version 4.1.2) #1 Tue Ja
n 1 23:32:19 WET 2008
console [early0] enabled
CPU revision is: 00018448
Clocks: Async mode
Clocks: Setting DSP clock
Clocks: prediv: 1, postdiv: 1, mul: 5
Clocks: base = 25000000, frequency = 125000000, prediv = 1, postdiv = 2, postdiv
2 = 1, mul = 10
Clocks: Setting CPU clock
Adjusted requested frequency 211000000 to 211968000
Clocks: prediv: 1, postdiv: 1, mul: 6
Clocks: base = 35328000, frequency = 211968000, prediv = 1, postdiv = 1, postdiv
2 = -1, mul = 6
Clocks: Setting USB clock
Adjusted requested frequency 48000000 to 48076920
Clocks: prediv: 13, postdiv: 1, mul: 5
Clocks: base = 125000000, frequency = 48000000, prediv = 13, postdiv = 1, postdi
v2 = -1, mul = 5
TI AR7 (TNETD7200), ID: 0x002b, Revision: 0x10
Determined physical RAM map:
 memory: 01000000 @ 14000000 (usable)
Initrd not found or empty - disabling initrd
On node 0 totalpages: 4096
  Normal zone: 32 pages used for memmap
  Normal zone: 0 pages reserved
  Normal zone: 4064 pages, LIFO batch:0
  Movable zone: 0 pages used for memmap
Built 1 zonelists in Zone order.  Total pages: 4064
Kernel command line: init=/etc/preinit rootfstype=squashfs,jffs2, console=ttyS0,
38400n8
Primary instruction cache 16kB, physically tagged, 4-way, linesize 16 bytes.
Primary data cache 8kB, 4-way, linesize 16 bytes.
Synthesized TLB refill handler (20 instructions).
Synthesized TLB load handler fastpath (32 instructions).
Synthesized TLB store handler fastpath (32 instructions).
Synthesized TLB modify handler fastpath (31 instructions).
PID hash table entries: 64 (order: 6, 256 bytes)
Using 105.984 MHz high precision timer.
Dentry cache hash table entries: 2048 (order: 1, 8192 bytes)
Inode-cache hash table entries: 1024 (order: 0, 4096 bytes)
Memory: 12520k/16384k available (2037k kernel code, 3864k reserved, 418k data, 1
20k init, 0k highmem)
Calibrating delay loop... 211.35 BogoMIPS (lpj=1056768)
Mount-cache hash table entries: 512
NET: Registered protocol family 16
Generic PHY: Registered new driver
Time: MIPS clocksource has been installed.
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 512 (order: 0, 4096 bytes)
TCP bind hash table entries: 512 (order: -1, 2048 bytes)
TCP: Hash tables configured (established 512 bind 512)
TCP reno registered
squashfs: version 3.0 (2006/03/15) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) (SUMMARY)  Ã‚Â© 2001-2006 Red Hat, Inc.
io scheduler noop registered
io scheduler deadline registered (default)
Serial: 8250/16550 driver $Revision: 1.90 $ 2 ports, IRQ sharing disabled
serial8250: ttyS0 at MMIO 0x8610e00 (irq = 15) is a TI-AR7
console handover: boot [early0] -&gt; real [ttyS0]
Fixed PHY: Registered new driver
cpmac-mii: probed
cpmac: device eth0 (regs: 08610000, irq: 27, phy: 0:1f, mac: 00:1c:10:bc:7f:ac)
physmap platform flash device: 00800000 at 10000000
physmap-flash.0: Found 1 x16 devices at 0x0 in 16-bit bank
physmap-flash.0: Found an alias at 0x400000 for the chip at 0x0
 Amd/Fujitsu Extended Query Table at 0x0040
physmap-flash.0: Swapping erase regions for broken CFI table.
number of CFI chips: 1
cfi_cmdset_0002: Disabling erase-suspend-program due to code brokenness.
cmdlinepart partition parsing not available
RedBoot partition parsing not available
4 ar7part partitions found on MTD device physmap-flash.0
Creating 4 MTD partitions on &quot;physmap-flash.0&quot;:
0x00000000-0x00010000 : &quot;loader&quot;
0x00010000-0x00020000 : &quot;config&quot;
0x00020000-0x00400000 : &quot;linux&quot;
0x000e7d2c-0x00400000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-o
nly
mtd: partition &quot;rootfs&quot; set to be root filesystem
mtd: partition &quot;rootfs_data&quot; created automatically, ofs=1F0000, len=210000
0x001f0000-0x00400000 : &quot;rootfs_data&quot;
ar7_wdt: disabling watchdog timer
ar7_wdt: timer margin 59 seconds (prescale 65535, change 57180, freq 62500000)
Registered led device: status
vlynq0: regs 0x08611800, irq 29, mem 0x04000000
nf_conntrack version 0.5.0 (1024 buckets, 4096 max)
ip_tables: (C) 2000-2006 Netfilter Core Team
TCP vegas registered
NET: Registered protocol family 1
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Mounted root (squashfs filesystem) readonly.
Freeing unused kernel memory: 120k freed
Warning: unable to open an initial console.
Algorithmics/MIPS FPU Emulator v1.5
mini_fo: using base directory: /
mini_fo: using storage directory: /jffs
PPP generic driver version 2.4.2
acx: this driver is still EXPERIMENTAL
acx: reading README file and/or Craig&#039;s HOWTO is recommended, visit http://acx10
0.sourceforge.net/wiki in case of further questions/discussion
acx: compiled to use 32bit I/O access. I/O timing issues might occur, such as no
n-working firmware upload. Report them
acx: running on a little-endian CPU
acx: PCI/VLYNQ module v0.3.36-mac80211 initialized, waiting for cards to probe..

======================================================

root@OpenWrt:/# ifconfig
eth0      Link encap:Ethernet  HWaddr 00:1C:10:BC:7F:AC
          inet addr:192.168.1.1  Bcast:192.168.1.255  Mask:255.255.255.0
          UP BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:23 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:1994 (1.9 KiB)  TX bytes:0 (0.0 B)
          Interrupt:27

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:4 errors:0 dropped:0 overruns:0 frame:0
          TX packets:4 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:392 (392.0 B)  TX bytes:392 (392.0 B)

======================================================

root@OpenWrt:/# ping 192.168.1.1
PING 192.168.1.1 (192.168.1.1): 56 data bytes
64 bytes from 192.168.1.1: seq=0 ttl=64 time=1.592 ms
64 bytes from 192.168.1.1: seq=1 ttl=64 time=1.103 ms
64 bytes from 192.168.1.1: seq=2 ttl=64 time=1.104 ms
64 bytes from 192.168.1.1: seq=3 ttl=64 time=1.094 ms

======================================================
root@OpenWrt:/# ping 192.168.1.123
PING 192.168.1.123 (192.168.1.123): 56 data bytes

--- 192.168.1.123 ping statistics ---
7 packets transmitted, 0 packets received, 100% packet loss</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p61152">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">crowm</div>
					<div class="post-datetime">
						2 Jan 2008, 22:14					</div>
				</div>
				<div class="post-content content">
					<p>When make a ping from other host and show the ARP table this host appear.</p><div class="codebox"><pre><code>root@OpenWrt:/# arp -a
IP address       HW type     Flags       HW address            Mask     Device
192.168.1.123    0x1         0x2         00:30:1B:BA:9B:04     *        eth0

root@OpenWrt:/# cat /etc/config/network
# Copyright (C) 2006 OpenWrt.org

config interface loopback
        option ifname   lo
        option proto    static
        option ipaddr   127.0.0.1
        option netmask  255.0.0.0

config interface lan
        option ifname   eth0
        option proto    static
        option ipaddr   192.168.1.1
        option netmask  255.255.255.0</code></pre></div><p>But if you make a ping from Openwrt to another host don&#039;t go to another host.</p><p>:?</p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p61156">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">cyberstorm</div>
					<div class="post-datetime">
						2 Jan 2008, 22:44					</div>
				</div>
				<div class="post-content content">
					<p>similar problem here: <a href="http://forum.openwrt.org/viewtopic.php?id=13910">http://forum.openwrt.org/viewtopic.php?id=13910</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p61157">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">crowm</div>
					<div class="post-datetime">
						2 Jan 2008, 22:56					</div>
				</div>
				<div class="post-content content">
					<p>Yes is the same case.</p><p>I see this post yesterday and tried this patch but don&#039;t work.&nbsp; another suggestion ?</p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p61182">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">cyberstorm</div>
					<div class="post-datetime">
						3 Jan 2008, 11:49					</div>
				</div>
				<div class="post-content content">
					<p>dmesg on my wag354g (ar7 with tnetd7300 soc):<br /></p><div class="codebox"><pre><code>Fixed PHY: Registered new driver
cpmac-mii: probed
cpmac: device eth0 (regs: 08612800, irq: 41, phy: fixed@100:1, mac: 00:11:22:33:44:55)
cpmac: device eth1 (regs: 08610000, irq: 27, phy: 0:1f, mac: 00:11:22:33:44:55)</code></pre></div><p>while yours:<br /></p><div class="codebox"><pre><code>Fixed PHY: Registered new driver
cpmac-mii: probed
cpmac: device eth0 (regs: 08610000, irq: 27, phy: 0:1f, mac: 00:1c:10:bc:7f:ac)</code></pre></div><p>My ifconfig:<br /></p><div class="codebox"><pre><code>eth0....
          Interrupt:41</code></pre></div><p>Yours:<br /></p><div class="codebox"><pre><code>eth0...
Interrupt:27</code></pre></div><p>Also, in my case:<br /></p><div class="codebox"><pre><code>root@OpenWrt:/# cat /proc/interrupts 
           CPU0       
  2:          0            MIPS  AR7 cascade interrupt
  7:      53451            MIPS  timer
  8:          0             AR7  AR7 cascade interrupt
 15:         74             AR7  serial
 29:          0             AR7  vlynq
 41:        594             AR7  eth0</code></pre></div><p>If I &quot;ifconfig eth1 up&quot; I get another interrupt #27...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p61184">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">crowm</div>
					<div class="post-datetime">
						3 Jan 2008, 12:26					</div>
				</div>
				<div class="post-content content">
					<p>Hi cyberstorm, yes mi CPU are tnetd7200 and have ethernet only and your CPU are tnetd7300 with 2 interfaces ethernet y wireless.</p><p>See this document <a href="http://focus.ti.com/lit/ml/spat013a/spat013a.pdf">http://focus.ti.com/lit/ml/spat013a/spat013a.pdf</a></p><p>--------------------------------------------------------------------<br />Features&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;TNETD7300A&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;TNETD7200<br />--------------------------------------------------------------------<br />Ethernet Interfaces&nbsp; &nbsp;Two (MII and PHY)&nbsp; &nbsp; &nbsp;One (MII or PHY)<br />VLYNQâ„¢ interfaces&nbsp; &nbsp; &nbsp;wo&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; One, but daisy<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;chaining via VLYNQ<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;enables voice and/or<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;wireless solutions</p><p>You have 2 interfaces <strong>eth0</strong> ethernet <strong>eth1</strong> wireless. But you have installed the module for run and active your ACX device.<br /></p><div class="codebox"><pre><code>...
Freeing unused kernel memory: 120k freed
Warning: unable to open an initial console.
Algorithmics/MIPS FPU Emulator v1.5
- preinit -
switching to jffs2
mini_fo: using base directory: /
mini_fo: using storage directory: /jffs
- init -

Please press Enter to activate this console. PPP generic driver version 2.4.2
acx: this driver is still EXPERIMENTAL
acx: reading README file and/or Craig&#039;s HOWTO is recommended, visit http://acx10
0.sourceforge.net/wiki in case of further questions/discussion
acx: compiled to use 32bit I/O access. I/O timing issues might occur, such as no
n-working firmware upload. Report them
acx: running on a little-endian CPU
acx: PCI/VLYNQ module v0.3.36-mac80211 initialized, waiting for cards to probe..
.</code></pre></div><p>My Iterrupts</p><div class="codebox"><pre><code>root@OpenWrt:/# cat /proc/interrupts
           CPU0
  2:          0            MIPS  AR7 cascade interrupt
  7:       2699            MIPS  timer
  8:          0             AR7  AR7 cascade interrupt
 15:        985             AR7  serial
 27:          0             AR7  eth0</code></pre></div><p>In my case interrupt 27 are ethernet but in your case is posible that this are wireless.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>