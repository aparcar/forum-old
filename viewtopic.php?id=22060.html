<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Is it possible to read RSSI from packets on WRT54GL (OpenWRT 2.4)?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 25 Feb 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p95461">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">L1zard</div>
					<div class="post-datetime">
						6 Oct 2009, 17:48					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />I have Linksys WRT54GL with OpenWRT 8.09 (2.4 with broadcom wireless driver). I need to read RSSI field from wifi packets. I know, it is possible with core 2.6 and another driver, but I need to use broadcom proprietary driver capabilities, like antenna switching.<br />In 2.4 i have created the monitor interface using this config:<br />/etc/config/wireless:<br /></p><div class="codebox"><pre><code>config wifi-device  wl0
    option type     broadcom
    option channel  11

    # REMOVE THIS LINE TO ENABLE WIFI:
    option disabled 0

config wifi-iface
    option device   wl0
    option network    lan
    option mode     ap
    option ssid     testWL
    option encryption none

config wifi-iface
    option device   wl0
    option mode monitor</code></pre></div><p>Access point is working, but sniffers like tcpdump can&#039;t capture packets from monitor interface wl0.1<br />From interace wl0 packets can be captured but rssi can not be read.<br /></p><div class="codebox"><pre><code>root@OpenWrt:/tmp# ./tcpdump -i wl0 -L
Data link types (use option -y to set):
  DOCSIS (DOCSIS) (not supported)
  EN10MB (Ethernet)
root@OpenWrt:/tmp#</code></pre></div><p>It looks like wire ethernet.<br />If I&#039;m trying to turn on monitor mode on wl0, and then run iwconfig, router is rebooting.<br /></p><div class="codebox"><pre><code>wlc monitor 1
iwconfig</code></pre></div><p>On 8.09 2.6 it is possible to create monitor interface, and tcpdump can read rssi from it.<br /></p><div class="codebox"><pre><code>root@OpenWrt:/tmp# ./tcpdump -i wscan -L
Data link types (use option -y to set):
  IEEE802_11_RADIO (802.11 plus BSD radio information header)
root@OpenWrt:/tmp#</code></pre></div><p>What am I doing wrong?<br />Is it possible to create the same monitor interface on OpenWRT 2.4?<br />Thanks in advance.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>