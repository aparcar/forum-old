<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Need Help - TL-WDR4300 - serial port</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 1 Mar 2018 and 9 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=41071&amp;p=2.html">2</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p185924">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">menymu</div>
					<div class="post-datetime">
						13 Dec 2012, 14:23					</div>
				</div>
				<div class="post-content content">
					<p>I need help what cable do i need to connect the router to my PC via telnet?</p><p>I have israelian firmware which disable many 5Ghz and the firmware blocks me from installing official firmware and i need ass it seems hard upgrade <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Thanks for anyone who can help me.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p185963">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						13 Dec 2012, 23:15					</div>
				</div>
				<div class="post-content content">
					<p>But why do you need serial? Is bricked now?? <br />You tried to install openwrt?</p><p>Anyway is a usb to ttl 3.3V serial adapter.. Usually those with PL2303 chip works well..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p185978">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">menymu</div>
					<div class="post-datetime">
						14 Dec 2012, 01:16					</div>
				</div>
				<div class="post-content content">
					<p>Hi, no its not bricked.</p><p>The Firmware burned on it is tp-link specialy firmware for israel (blocks 5ghz channels as it not allowed by goverment here)</p><p>they did something so i can&#039;t install any official firmware (getting error)</p><p>i need a way to bypass this limitation...</p><p>see image below</p><p><a href="http://www.siz.co.il/"><span class="postimg"><img src="http://up362.siz.co.il/up1/mrwlijmrnijn.jpg" alt="http://up362.siz.co.il/up1/mrwlijmrnijn.jpg" /></span></a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p185990">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						14 Dec 2012, 07:30					</div>
				</div>
				<div class="post-content content">
					<p>When you get serial (just to be sure.. It should not be necesary..) you can try following this:</p><p> <a href="https://forum.openwrt.org/viewtopic.php?id=36596">https://forum.openwrt.org/viewtopic.php?id=36596</a></p><p>there is a chinese exe that can modify header and checksum.. Follow the advice in that topic, using 4300 firmware.. Basically you have to clone 2 fields of the header from an israel fw to the global one.. </p><p>Note: totally untested!!!</p>											<p class="post-edited">(Last edited by <strong>nebbia88</strong> on 14 Dec 2012, 07:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186023">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">menymu</div>
					<div class="post-datetime">
						14 Dec 2012, 12:04					</div>
				</div>
				<div class="post-content content">
					<p>I couldn&#039;t find how this is helping me...</p><p>anyway i ordered from ebay usb to PL2303 ttl adapter.</p><p>there is any guide how do i connect it to the router ports?</p><p>and how later on i connect it to putty?</p><p>and one more question is can i install with the telnet official firmware or ony openWrt?</p><p>Thanks <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186032">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						14 Dec 2012, 14:10					</div>
				</div>
				<div class="post-content content">
					<p>With that exe you can modify english firmware header so it will be accepted by your router... I think...</p><p>For serial read wiki!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186035">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">menymu</div>
					<div class="post-datetime">
						14 Dec 2012, 14:32					</div>
				</div>
				<div class="post-content content">
					<p>Hex*</p><p>Yea i read about it. but i don&#039;t have the israel firmeare so i can match between the headers...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186042">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						14 Dec 2012, 16:36					</div>
				</div>
				<div class="post-content content">
					<p>can&#039;t you download it?</p><p>answer, no.. seems that on Israel site there is the usual global firmware -.-</p>											<p class="post-edited">(Last edited by <strong>nebbia88</strong> on 14 Dec 2012, 16:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186043">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">menymu</div>
					<div class="post-datetime">
						14 Dec 2012, 16:39					</div>
				</div>
				<div class="post-content content">
					<p>Nope.<br />this firmware for importer only <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /> dumb...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p189276">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">encephalon</div>
					<div class="post-datetime">
						18 Jan 2013, 14:24					</div>
				</div>
				<div class="post-content content">
					<p>same problem here, <br />bought this WDR4300 with Israeli firmware. <br />can&#039;t get the Israeli firmware img anywhere (for the method mentioned above). <br />the company that support this product in israel doesn&#039;t help, further more, when I ask them <br />when they are going to release an update based on the latest official build they say &quot;not in the near future&quot;. </p><p>is there anyway to force a flash of the official release, <br />I thought about something in the manner of flashing openWRT and then reverting to the official <br />or something like this ? </p><p>frustrated ... help :-( ...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p189294">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">menymu</div>
					<div class="post-datetime">
						18 Jan 2013, 18:00					</div>
				</div>
				<div class="post-content content">
					<p><img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Already got my ordered ebay serial port and got it official firmware...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p189295">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						18 Jan 2013, 18:47					</div>
				</div>
				<div class="post-content content">
					<p>oh no, did you made a backup????</p><p>it could be the only way to know the header of the Israeli firmware!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p189323">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">encephalon</div>
					<div class="post-datetime">
						19 Jan 2013, 02:49					</div>
				</div>
				<div class="post-content content">
					<p>please say yes please say yes ...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190454">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">encephalon</div>
					<div class="post-datetime">
						30 Jan 2013, 21:00					</div>
				</div>
				<div class="post-content content">
					<p>hi, just got my usb to PL2303 ttl adapter, I am planing to install the original firmware on the device. <br />nebbia88, can you tell me how to do a backup to my current firmware so I can help other ppl that want to use the method mentioned above to install firmware ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190708">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						2 Feb 2013, 15:22					</div>
				</div>
				<div class="post-content content">
					<p>hey sorry for late answer.. did you have a working tftp server? i do not know if it&#039;s the same on all tp-link models, but on my 941 i can just:</p><p>tftp -p -l /dev/mtdblockN -r N 192.168.1.2</p><p>my pc has a tftp server on ip 1.2...</p><p>N from 0 to 4 are the usual partitions, we are interested in the first hundred of bytes of 1 partition!</p><p>BTW i discovered that you can do this also from this hidden cmdline in stock firmware:</p><p><a href="https://forum.openwrt.org/viewtopic.php?pid=181589#p181589">https://forum.openwrt.org/viewtopic.php … 89#p181589</a></p>											<p class="post-edited">(Last edited by <strong>nebbia88</strong> on 2 Feb 2013, 15:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190744">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">encephalon</div>
					<div class="post-datetime">
						2 Feb 2013, 20:54					</div>
				</div>
				<div class="post-content content">
					<p>just saw you answer, <br />unfortunately, too late ... I think I bricked my device :-( </p><p>well ... I&#039;ve connected everything ... <br />pressed &quot;tpl&quot; when saw the &quot;booting in 1 second&quot; thingy <br />and got the console window ... <br />then I tried &quot;tftpboot&quot; (after using ip 192.168.1.100, opening tftp server and copying the file where it should be). <br />it started, and looked something like: </p><p>####T&nbsp; &nbsp; ### T T #### T ###&nbsp; <br />timeout tried exceeded, retry ... </p><p>I tried again and again ... nothing, always the same ! <br />after that, I noticed that I can&#039;t power up my device unless the usb to ttl is connected (no sign off life !!). <br />if the usb to ttl is connected everything is working (of course I can&#039;t work like that since the device gut is wide open wires everywhere, its a mess). </p><p>didn&#039;t do what you wrote, nebbia, since I saw it just now ... but thanks anyway ... </p><p>any suggestions ?&nbsp; &nbsp;I wanna cry.... :~-(</p>											<p class="post-edited">(Last edited by <strong>encephalon</strong> on 3 Feb 2013, 16:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190811">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">ale_sha</div>
					<div class="post-datetime">
						3 Feb 2013, 16:34					</div>
				</div>
				<div class="post-content content">
					<p>Thanks to nebbia88,<br />I got the header of WDR4300 Israeli firmware.<br />see image below</p><p><a href="http://www.siz.co.il/"><span class="postimg"><img src="http://up364.siz.co.il/up2/jm1qa4zjyziv.gif" alt="http://up364.siz.co.il/up2/jm1qa4zjyziv.gif" /></span></a><br />I run<br />tftp -p -l /dev/mtdblock1 -r mtdblock1 192.168.0.100 (my tftp server&nbsp; ip)</p><p>from<br /><a href="http://192.168.0.1/userRpmNatDebugRpm26525557/linux_cmdline.html">http://192.168.0.1/userRpmNatDebugRpm26 … dline.html</a><br />User:osteam<br />Password:5up</p><p>I got mtblock1 file&nbsp; with 1024k size.<br />Then I parsed the header with the Chinese utility.</p><p>nebbia88, can you tell me how to do a full backup to my current firmware with 8064k size,<br />if I want to roll back to original Israeli firmware via official Web interface.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190814">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">encephalon</div>
					<div class="post-datetime">
						3 Feb 2013, 16:57					</div>
				</div>
				<div class="post-content content">
					<p>ale_sha... great !!!!! </p><p>you just saved me alot of trouble, I don&#039;t know if it will solve my bricked WDR4300 yet, but I will <br />sure try to upload the firmware using the header that you extracted. </p><p>if you are able to backup the Israeli firmware please share it, I will appricate it. </p><p>10x</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190821">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">flasher</div>
					<div class="post-datetime">
						3 Feb 2013, 18:55					</div>
				</div>
				<div class="post-content content">
					<p>ale_sha, can you patch this header on the generic factory firmware now?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190822">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						3 Feb 2013, 19:10					</div>
				</div>
				<div class="post-content content">
					<p>Great!!</p><p>can you upload somewhere (dropbox?) mtdblock1 and mtdblock2?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190835">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">encephalon</div>
					<div class="post-datetime">
						3 Feb 2013, 22:52					</div>
				</div>
				<div class="post-content content">
					<p>anyway, <br />1) talked to nebbia. <br />2) I&#039;ve connected the router, turned it on while it was connected to usb-serial. <br />3) went to the gui, tried to install official firmware using the 0x40-0x43 that ale_sha gave us ... </p><p>and .......... NO </p><p>it failed to load 10085 error, file is wrong version or something ... check file name ... </p><p>tried couple of time .. verified... nothing .... <br />and then .... I did a factory Reset using the web gui ... <br />and now the situation is even worse, I can&#039;t&nbsp; get into the gui anymore. and it seems the router wont even boot since the DHCP doesn&#039;t even give me an ip and I get &quot;can&#039;t reach destination&quot; when pinging 192.168.0.1 ... </p><p>evil router ...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190841">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">ale_sha</div>
					<div class="post-datetime">
						4 Feb 2013, 00:38					</div>
				</div>
				<div class="post-content content">
					<p>Here are <a href="https://www.dropbox.com/s/rfghmteik9zzbjw/mtdblock1.bin">mtdblock1.bin</a>, <a href="https://www.dropbox.com/s/i2wutxuujf5k4l4/mtdblock2.bin">mtdblock2.bin</a> of Israeli WDR4300</p><p>Same here, I got &quot;Error code: 18005 Upgrade unsuccessfully because the version of the upgraded file was incorrect. Please check the file name.&quot; when I tried to apply patched English firmware with Israeli header.</p><p>It seems to me the router parses a firmware file name. I unsuccessfully tried to change &quot;en&quot; sub-string with &quot;il&quot; or &quot;he&quot;.</p>											<p class="post-edited">(Last edited by <strong>ale_sha</strong> on 4 Feb 2013, 01:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190847">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">flasher</div>
					<div class="post-datetime">
						4 Feb 2013, 02:43					</div>
				</div>
				<div class="post-content content">
					<p>There could be possible plan B for us then...</p><p>I will try to look on the filesystem now using the userRpmNatDebugRpm26525557 menu trick,<br />probably there must be some localization reference that the original firmware uses to compare during the image upload proccess.</p><p>UPD:</p><p>Found it, it&#039;s in /web/oem/model.conf,</p><p>but since it&#039;s squashfs (read-only) file-system, it can&#039;t be modified.</p><p>Ideas?</p>											<p class="post-edited">(Last edited by <strong>flasher</strong> on 4 Feb 2013, 03:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190870">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						4 Feb 2013, 11:50					</div>
				</div>
				<div class="post-content content">
					<p>could you provide the content of /web/oem/model.conf?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190871">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">ale_sha</div>
					<div class="post-datetime">
						4 Feb 2013, 12:05					</div>
				</div>
				<div class="post-content content">
					<p>Here is <a href="https://www.dropbox.com/s/6liijs8if0wkyfd/model.conf">model.conf</a><br />It is a binary file.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=41071&amp;p=2.html">2</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>