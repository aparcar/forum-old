<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Help with a strange issue when using mobile phone</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 6 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p356221">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">westrem</div>
					<div class="post-datetime">
						14 Apr 2017, 01:39					</div>
				</div>
				<div class="post-content content">
					<p>I am having an issue with my mobile ISP.&nbsp; I&#039;m using sprint with a mc7455 modem.&nbsp; Sprint must be able to see something they don&#039;t like and keep disconnecting me whenever mobile devices and android devices connect to my router.&nbsp; </p><p>I can use as many computers on the network as I want but as soon as a phone connects after 10 min I get deregistered from the lte network.&nbsp; If i run a vpn it solves the problem but I don&#039;t really want to run a vpn.&nbsp; </p><p>Can anyone help me figure out what could possibly be different about phones that computers don&#039;t do?&nbsp; I&#039;ve tried all sorts of ttl iptable rules and the issue still remains so its not a ttl.&nbsp; </p><p>Is their any rules that I could apply that would change headers?&nbsp; That&#039;s the only thing I can think of</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p357551">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">westrem</div>
					<div class="post-datetime">
						2 May 2017, 04:32					</div>
				</div>
				<div class="post-content content">
					<p>Does anyone have any suggestions to this?&nbsp; It&#039;s strange.&nbsp; It&#039;s only when my android phones connect that exactly 10 min later no data will flow.&nbsp; I found that the modem is not deregistering.&nbsp; It&#039;s connected and has full service.&nbsp; &nbsp; A few times, instead of the data just stopping, my android showed no data and kicked me off and the data still worked for all the other devices but I couldn&#039;t connect to the WiFi with the phone.</p><p>If I use a VPN app on the android phones everything works fine.</p>											<p class="post-edited">(Last edited by <strong>westrem</strong> on 2 May 2017, 05:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p357576">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">makarel</div>
					<div class="post-datetime">
						2 May 2017, 14:45					</div>
				</div>
				<div class="post-content content">
					<p>hey</p><p>you PAY for their services you have the RIGHT to get support FROM THEM <br />do STOP PAYING them FOR NO SERVICE</p>											<p class="post-edited">(Last edited by <strong>makarel</strong> on 2 May 2017, 14:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p357580">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						2 May 2017, 15:07					</div>
				</div>
				<div class="post-content content">
					<p>I use a Sprint Pocket Wi-Fi to a network of OpenWrt routers and ultimately an Android phone.&nbsp; They have not disconnected me.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p357593">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">westrem</div>
					<div class="post-datetime">
						2 May 2017, 16:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>makarel wrote:</cite><blockquote><p>hey</p><p>you PAY for their services you have the RIGHT to get support FROM THEM <br />do STOP PAYING them FOR NO SERVICE</p></blockquote></div><br /><p>The service works fine.&nbsp; Like I said.&nbsp; The modem does not deregister.&nbsp; I&#039;m not sure how sprint is going to give me support on openwrt losing its usb connection when android devices connect to my router.&nbsp; </p><p> Yes my pocket wifi works fine with android.&nbsp; But I don&#039;t want to use the pocket WiFi as I don&#039;t want the double nat to the router.</p><p>The mc7455 is direct raw ip. </p><br /><p>I&#039;m looking at the issue android Wi-Fi has with openwrt.&nbsp; I&#039;ve read many things about this issue and I was seeing if there is any iptable rules or anything that needs to be set up.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p357595">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						2 May 2017, 16:59					</div>
				</div>
				<div class="post-content content">
					<p>Though, the Pocket WiFi did not like to USB tether.&nbsp; Lots of disconnections there.&nbsp; I use a 5 GHz client on it.&nbsp; It double-NATs either way.&nbsp; I don&#039;t think that matters much since Sprint blocks all incoming connections anyway.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p357613">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">makarel</div>
					<div class="post-datetime">
						2 May 2017, 19:10					</div>
				</div>
				<div class="post-content content">
					<p>so your android connects to owrt which in turn connects to sprint modem<br />maybe you should see this for wifi disconnects.. rekey.. low_ack<br /><a href="https://forum.openwrt.org/viewtopic.php?id=69213">https://forum.openwrt.org/viewtopic.php?id=69213</a><br />also see that you have different ssids for owrt and sprint <br />and lan ips dont conflict(ex: sprint lan=192.168.1.1/24 owrt lan=192.168.2.1/24)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p357621">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">westrem</div>
					<div class="post-datetime">
						2 May 2017, 19:48					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve tried the WiFi settings and it&#039;s the same issue.&nbsp; The sprint ip is the public ip and could never conflict with my private ip.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p357631">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">westrem</div>
					<div class="post-datetime">
						2 May 2017, 20:13					</div>
				</div>
				<div class="post-content content">
					<p>And it&#039;s not a sprint modem.&nbsp; It&#039;s a sprint plan on a mc7455 modem.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p357634">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">makarel</div>
					<div class="post-datetime">
						2 May 2017, 20:30					</div>
				</div>
				<div class="post-content content">
					<p>can you detail your network setup from provider till lan/wifi clients? i cant figure out how you connect owrt to sprint or when connection drops it drops only for wifi or for all even wired clients.. can you ping owrt router.. can you ping spring router? can you ping www<br />exactly 10 min might be an inactivity timer</p>											<p class="post-edited">(Last edited by <strong>makarel</strong> on 2 May 2017, 20:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p357638">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">westrem</div>
					<div class="post-datetime">
						2 May 2017, 21:04					</div>
				</div>
				<div class="post-content content">
					<p>Sprint---&gt;mc7455 raw ip modem in qmi or mbim mode----&gt;openwrt router usb---&gt;wan gets public ip using either umbim or uqmi.</p><p>I&#039;ve tried both umbim and uqmi.&nbsp; Umbim seems to work a little better but still eventually has the same issue.</p><p>I lose all wired and all wireless internet access exactly 10 min after an android phone connects to the WiFi.&nbsp; I&#039;m still connected but just no internet.&nbsp; I also lose try into the modem.</p><p>If I don&#039;t connect an android phone the set up works fine.&nbsp; It can be up for 10 hours and as soon as the android connects 10 min later all internet is lost.</p><p>There had been a few times at the 10 min mark instead of the internet going down my phone was just kicked from the WiFi and internet still worked for everything else.</p><p>It&#039;s not deregistering.&nbsp; The modem is still registered and has connection with sprint.</p><p>I&#039;ve disabled all ipv6 stuff In the router but still the issue remains.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p357639">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">westrem</div>
					<div class="post-datetime">
						2 May 2017, 21:08					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve tried many different ways of connecting the modem.&nbsp; I even compiled modem manager and have used libmbim, libqmi, and ppp.</p><p>It makes no difference how I connect,&nbsp; the issue still remains with the android phones.&nbsp; And the issue is only with public ip&#039;s.&nbsp; I can use the same setup with att and tmobile</p>											<p class="post-edited">(Last edited by <strong>westrem</strong> on 2 May 2017, 21:09)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p357692">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">makarel</div>
					<div class="post-datetime">
						3 May 2017, 14:01					</div>
				</div>
				<div class="post-content content">
					<p>you should have some error logs when connection drops.. you could mount a serial interface and debug when all connections drop.. restart services.. see what goes</p><p>id suggest another setup<br />leave it as it is but disable wifi on the openwrt connected to the modem and link another wifi router(use this one as wifi link) with utp wire to it</p>											<p class="post-edited">(Last edited by <strong>makarel</strong> on 3 May 2017, 15:20)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>