<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Access Luci via SSH tunnel</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 27 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p349951">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Tossy</div>
					<div class="post-datetime">
						22 Jan 2017, 16:02					</div>
				</div>
				<div class="post-content content">
					<p>Hi everyone,</p><p>I just recently upgraded my router with OpenWrt. Today i was browsing the wiki and wanted to add some layer of security. For this i&#039;d like to connect to luci via a SSH tunnel as described in<br />wiki.openwrt.org/doc/howto/luci.secure (the router has&#039;nt enough flash for the TLS method)</p><p>I configured putty as described (with the listen port 22 changed to the port of my own choice). But when i start the tunnel putty asks for a password for the root user. Unfortunately i can&#039;t type in this window. If I just ignore this and try to connect by entering 127.zero.zero.1:8000 into the browser (edge) I get a &quot;we can&#039;t reach this page&quot;.</p><p>Any idea&#039;s on what might be wrong?</p><p>I am running OpenWrt Chaos Calmer 15.05 / LuCI (git-15.248.30277-3836b45) on a TP-Link TL-WR941N/ND v2/3</p><p>Thx in advance.</p><p>Greetz</p><p>Tossy</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p349968">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						22 Jan 2017, 18:41					</div>
				</div>
				<div class="post-content content">
					<p>You do realize, that when you are asked to type the password, what you type does not appear on the screen for security purposes.&nbsp; Click on the window, type the password blindly, and press enter.&nbsp; It should then say if the connection was accepted or declined.</p><p>Can you SSH into the router and get a text console?&nbsp; You need to be able to do this first.&nbsp; Port forwarding is something that occurs on top of a basic ssh connection.&nbsp; It only exists after the router has accepted your connection and the connection stays open.&nbsp; </p><p>Then you can add -L 8000:localhost:80 to your ssh command.&nbsp; This tells SSH to connect your PC&#039;s port 8000 to the router&#039;s local port 80 (the luci web server).&nbsp; Leave the SSH window connected.&nbsp; Open your browser and go to localhost:8000.</p><p>Key files are more secure than passwords thus are recommended whenever a SSH port is open to the public.</p>											<p class="post-edited">(Last edited by <strong>mk24</strong> on 22 Jan 2017, 18:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p349970">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Tossy</div>
					<div class="post-datetime">
						22 Jan 2017, 19:15					</div>
				</div>
				<div class="post-content content">
					<p>Oh. This is where i went wrong. I added the private key to the ssh tunnel profile and now I can open luci via 127.0.0.1:8000 (the routed adres). Not very smart on my site to think that a encrypted connection without a kind of key would be possible...</p><p>Is there any way to make sure my connection is secure now?<br />And just to be sure: Using a private/public key combination makes a password facultative?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p349980">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						22 Jan 2017, 20:45					</div>
				</div>
				<div class="post-content content">
					<p>You can encrypt the private key file with a password.&nbsp; This locks the file itself from unauthorized use if your PC is compromised.&nbsp; Entering the password locally unlocks the file so that the real key is revealed, then it is usable the same as if the file were not encrypted.&nbsp; The traffic on the network is the same whether you lock the file or not.</p><p>Generally if you are using key files you would disable the password-based method on the router entirely.&nbsp; If you try a simple ssh to the router it will tell you that password login is not supported and terminate the connection.</p>											<p class="post-edited">(Last edited by <strong>mk24</strong> on 22 Jan 2017, 20:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p350021">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Tossy</div>
					<div class="post-datetime">
						23 Jan 2017, 09:44					</div>
				</div>
				<div class="post-content content">
					<p>Thx a lot. That clarifies a few things.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>