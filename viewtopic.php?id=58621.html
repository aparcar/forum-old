<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> dnsmasq default DNS</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 25 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p284585">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">burphur</div>
					<div class="post-datetime">
						23 Jul 2015, 06:17					</div>
				</div>
				<div class="post-content content">
					<p>How do i set my default DNS server for dnsmasq?</p><p>dnsmasq keeps insisting on using the dns provided by my downstream router but i need to use 8.8.8.8.</p><p>Ive tried setting it in /etc/resolv.conf, and /tmp/resolv.conf(.auto) but these setting reset after a reboot</p><p>I dont want to push googles DNS directly to my dhcp clients, because i would like them to still use dnsmasq still.<br />I just want dnsmasq to use google when it needs to.</p><p>My main problem is i just setup ipv6 but the nameservers are not being updated, and my downstream router doesn&#039;t provide ipv6 dns.</p>											<p class="post-edited">(Last edited by <strong>burphur</strong> on 23 Jul 2015, 06:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p284597">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">written_direcon</div>
					<div class="post-datetime">
						23 Jul 2015, 09:34					</div>
				</div>
				<div class="post-content content">
					<p>To set a custom DNS server do:<br /></p><div class="codebox"><pre><code>uci set network.lan.dns=8.8.8.8
uci commit network
/etc/init.d/dnsmasq restart</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p284609">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						23 Jul 2015, 10:48					</div>
				</div>
				<div class="post-content content">
					<p>In your WAN interface, go to the &quot;Advanced options&quot;, and uncheck &quot;Use DNS servers advertised by peer&quot;; also configure the &quot;Use custom DNS servers&quot; option with Google&#039;s servers.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p284610">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">burphur</div>
					<div class="post-datetime">
						23 Jul 2015, 11:08					</div>
				</div>
				<div class="post-content content">
					<p>That did it!<br />It was /etc/config/network I needed to edit Thanks!<br />I like editing the files by manually, instead of having a command automagically do it for me <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /><br />Well atleast until i know what that command is actually changing<br />but I did try editing /etc/config/network before, but for some reason i had &#039;nameserver&#039; instead of &#039;dns&#039;.. oops</p><p>Thanks again!</p>											<p class="post-edited">(Last edited by <strong>burphur</strong> on 23 Jul 2015, 11:09)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>