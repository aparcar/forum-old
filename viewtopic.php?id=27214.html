<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> oops i semi screwed up my router</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p120433">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">canucks</div>
					<div class="post-datetime">
						5 Nov 2010, 07:36					</div>
				</div>
				<div class="post-content content">
					<p>like the topic suggest, i manage to semi screw up my buffalo nfinity wzr-hp-g300nh router.&nbsp; what i did was disabled the dhcp server and setting the IP address of br-lan interface to 192.168.1.2.&nbsp; now the kicker is that i can&#039;t access it via http, telnet, ssh.</p><p>i tried the 30/30/30 reset and no luck.<br />try going to failsafe, but i still can&#039;t connect<br /><a href="http://g300nh.blogspot.com/2010/06/firmware-flash-and-brick-recovery.html">http://g300nh.blogspot.com/2010/06/firm … overy.html</a> with openwrt-ar71xx-wzr-hp-g300nh-jffs2-tftp and openwrt-ar71xx-wzr-hp-g300nh-jffs2-sysupgrade in an attempt to reflash and well...no luck</p><p>any advice on how i can connect to the router and set it up again?</p><p>cheers.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p120464">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						5 Nov 2010, 15:18					</div>
				</div>
				<div class="post-content content">
					<p>The reset button doesn&#039;t function as reset in OpenWrt. Install Wireshark to see if you receive any broadcast udp packet while power the router on.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p120470">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">LinkZ</div>
					<div class="post-datetime">
						5 Nov 2010, 16:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>canucks wrote:</cite><blockquote><p>any advice on how i can connect to the router and set it up again?</p></blockquote></div><p>Use the serial port:<br /><a href="http://wiki.openwrt.org/toh/buffalo/wzr-hp-g300h?s">http://wiki.openwrt.org/toh/buffalo/wzr-hp-g300h?s</a>[]=wzr&amp;s[]=hp&amp;s[]=g300nh#serial.pinout</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p120537">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">canucks</div>
					<div class="post-datetime">
						6 Nov 2010, 22:48					</div>
				</div>
				<div class="post-content content">
					<p>thanks for the tips and suggestions</p><p>i managed to fix the issue by doing a hard reset, putting the router to failsafe mode and telnet in fix it.&nbsp; took a while to figure it out.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124592">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">manu</div>
					<div class="post-datetime">
						5 Jan 2011, 23:04					</div>
				</div>
				<div class="post-content content">
					<p>&gt;&gt; i managed to fix the issue by doing a hard reset, putting the router to failsafe mode and telnet in fix it.&nbsp; took a while to figure it out.</p><p>How do you put a G300NH in failsafe mode ?!</p><p>It looks that I am in the same situation ! Nothing happens ont the LAN interfaces.<br />DHCP resquests are sent through the WAN but I can not access anything (eg ssh)<br />from WAN ! Reset button seems useless with OpenWrt (so 30/30/30 reset fails).</p><p>Thanks for any hint</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124594">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">ilmarinen</div>
					<div class="post-datetime">
						5 Jan 2011, 23:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>manu wrote:</cite><blockquote><p>&gt;&gt; i managed to fix the issue by doing a hard reset, putting the router to failsafe mode and telnet in fix it.&nbsp; took a while to figure it out.</p><p>How do you put a G300NH in failsafe mode ?!</p><p>It looks that I am in the same situation ! Nothing happens ont the LAN interfaces.<br />DHCP resquests are sent through the WAN but I can not access anything (eg ssh)<br />from WAN ! Reset button seems useless with OpenWrt (so 30/30/30 reset fails).</p><p>Thanks for any hint</p></blockquote></div><p>I have no clue how to set the G300NH in failsafe mode, but I have managed to flash the openwrt-ar71xx-wzr-hp-g300nh-jffs2-tftp&nbsp; binary with the instructions from <a href="http://g300nh.blogspot.com/2010/06/firmware-flash-and-brick-recovery.html">http://g300nh.blogspot.com/2010/06/firm … overy.html</a> once I made the adjustments below.</p><p>I noticed that my PC reset all ARP addresses, including the static ones, as soon as the ethernet cable became unpowered from the other end. This happened whenever I pulled the ethernet cable from the router OR when I unplugged the router (irrespective of operating system). If you have the same problem, you should be able to periodically check that the arp address you added is still in the list while you perform the steps in the instructions.<br />My solution to this was to add a switch between the router and the PC, which kept the cable powered.</p><p>My second problem was that I didn&#039;t manage to do it in Windows for some reason, but since I had a virtual machine running Ubuntu I didn&#039;t investigate it further.</p><p>I hope this insight can help someone.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124681">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">manu</div>
					<div class="post-datetime">
						6 Jan 2011, 21:39					</div>
				</div>
				<div class="post-content content">
					<p>Thank you for the link, but I am not able to flash the G300NH anymore as far as OpenWrt is already installed. The problem is that the system is &quot;locked&quot; : the only usable interface is the WAN one, but I can not ssh through it.</p><p>It seems that the only solution is the serial port, however I do not know where the pinouts are ...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124701">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">LinkZ</div>
					<div class="post-datetime">
						6 Jan 2011, 22:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>manu wrote:</cite><blockquote><p>It seems that the only solution is the serial port, however I do not know where the pinouts are ...</p></blockquote></div><p><a href="http://wiki.openwrt.org/toh/buffalo/wzr-hp-g300h?s#serial.pinout">http://wiki.openwrt.org/toh/buffalo/wzr … ial.pinout</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124705">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">manu</div>
					<div class="post-datetime">
						6 Jan 2011, 22:56					</div>
				</div>
				<div class="post-content content">
					<p>Yes ! Sorry, I mean I do not know where are pin number 1 on the board and so on ...</p><p>Cheers</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124708">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">LinkZ</div>
					<div class="post-datetime">
						6 Jan 2011, 23:20					</div>
				</div>
				<div class="post-content content">
					<p>Here&#039;s a pic:<br /><a href="http://www.dd-wrt.com/phpBB2/files/pin4_359.jpg">http://www.dd-wrt.com/phpBB2/files/pin4_359.jpg</a></p><p>But as this pictured is labeled, pin 1 is RX, whereas the OpenWrt wiki says pin 1 is VCC.&nbsp; Actually the picture is labeled incorrectly in terms of numbers, because the square is pin 1... but at least it shows where the pinouts on the board are.</p><p>Per the above picture:<br />1--RX<br />2--TX<br />3--GND<br />4--VCC +3.3V(unconnect)</p><p>Just reverse the numbers to match the OpenWrt wiki (because the square is pin 1).</p><p>From this thread:<br /><a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?p=434920">http://www.dd-wrt.com/phpBB2/viewtopic.php?p=434920</a></p>											<p class="post-edited">(Last edited by <strong>LinkZ</strong> on 6 Jan 2011, 23:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124709">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">manu</div>
					<div class="post-datetime">
						6 Jan 2011, 23:43					</div>
				</div>
				<div class="post-content content">
					<p>Thank you very much !!!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124712">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Styx</div>
					<div class="post-datetime">
						7 Jan 2011, 00:02					</div>
				</div>
				<div class="post-content content">
					<p>i&#039;ve had a very similar problem to canucks and manu on a wrt150n</p><p>i poked around in /etc/config/network and now it refuses to talk to my computer through any of the regular ethernet ports.&nbsp; it sends dhcp requests through the &quot;internet&quot; port, but all maintainence through that port is disabled.&nbsp; also, the udp packet appears to be horribly mangled.&nbsp; i&#039;ll include a hex dump below.&nbsp; i cannot ping the router or anything in failsafe mode; it does not respond to ARP requests.&nbsp; could i have fried some hardware or something?&nbsp; D:</p><p>here is the output from &quot;hexdump -v -t x out&quot;</p><p>0000000 a1b2c3d4 00040002 00000000 00000000<br />0000020 00000060 00000001 4d263aea 0005cf86<br />0000040 00000060 00000413 ffffffff 1d00ffff<br />0000060 c049d97e 00450008 00000504 11400040<br />0000100 a8c097b2 a8c00101 9de7ff01 f1033713<br />0000120 adde0571 61656c50 00006573 00000000<br />0000140 00000000 00000000 00000000 00000000<br />0000160 00000000 00000000 00000000 00000000<br />0000200 00000000 00000000<br />0000210</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124713">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">manu</div>
					<div class="post-datetime">
						7 Jan 2011, 00:16					</div>
				</div>
				<div class="post-content content">
					<p>What do you call a &quot;failsafe mode&quot; ?</p><p>And where does this UDP packet come from ? Are you sure this is UDP packet ? Try to use a network<br />analyzer (tcpdump eg) to decode it, ...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124714">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Styx</div>
					<div class="post-datetime">
						7 Jan 2011, 00:21					</div>
				</div>
				<div class="post-content content">
					<p>that was the output of a hexdump&#039;d raw capture from tcpdump.&nbsp; i&#039;m going to attach the output of tcpdump to this one.&nbsp; i&#039;m using failsafe mode as it&#039;s used on the troubleshooting pages.&nbsp; all that is in the packet is &quot;Please&quot;, followed by some nulls</p><br /><p>tcpdump&#039;s output:</p><p>17:18:55.093936 IP 192.168.1.1.59293 &gt; 192.168.1.255.4919: UDP, length 1001<br />&nbsp; &nbsp; 0x0000:&nbsp; 4500 0405 0000 4000 4011 b297 c0a8 0101<br />&nbsp; &nbsp; 0x0010:&nbsp; c0a8 01ff e79d 1337 03f1 7105 dead 506c<br />&nbsp; &nbsp; 0x0020:&nbsp; 6561 7365 0000 0000 0000 0000 0000 0000<br />&nbsp; &nbsp; 0x0030:&nbsp; 0000 0000 0000 0000 0000 0000 0000 0000<br />&nbsp; &nbsp; 0x0040:&nbsp; 0000 0000 0000 0000 0000 0000 0000 0000<br />&nbsp; &nbsp; 0x0050:&nbsp; 0000</p>											<p class="post-edited">(Last edited by <strong>Styx</strong> on 7 Jan 2011, 00:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124958">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">manu</div>
					<div class="post-datetime">
						9 Jan 2011, 17:59					</div>
				</div>
				<div class="post-content content">
					<p>As for me, things are settled ! Thanks for your help. The serial port is a must !</p><p>Now, I face a new &quot;problem&quot;. I do not understand the switch configuration options. I will open a new <br />discussion on&nbsp; this topic.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>