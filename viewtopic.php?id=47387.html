<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Problems with Wireless</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 25 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p217826">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">tuxd3v</div>
					<div class="post-datetime">
						18 Nov 2013, 05:43					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys I am using openwrt r35770...</p><p>I&nbsp; have problems in my net with wireless...I don&#039;t&nbsp; know exactly which part of it...I mean, if in authentication or in DHCP part...</p><p>I think that it is in DHCP part...</p><p>This is my net..or what I am trying to do lol<br /><a href="https://cld.pt/dl/download/3480981a-8b7c-460d-97e9-cbfd47bb0f04/Share/Carambola2_network.png">https://cld.pt/dl/download/3480981a-8b7 â€¦ etwork.png</a></p><p>Wlan0 192.168.100.1/24(local dhcp/dns .. in openwrt device)<br />eth0 192.168.10.130/24(static)<br />eth1 192.168.1.2/30(static)</p><p>After creating this net ,only 3 separated networks...I only want the local dhcp/dns dnsmasq server to work in wireless network ( only on 192.168.100.0/24 Wireless lan).</p><p>Now I can&#039;t use wireless any more...I can&#039;t access it <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /><br />-----------------------------------------------------------------------------------/ /--------------------------------------------------------------------<br />I think that the problems stay in dnsmasq config...<br />----------------------------------------------------<br />I made via ssh:<br />/etc/init.d/dnsmasq restart</p><p><strong> dnsmasq: bad dhcp-option at line 24 of /var/etc/dnsmasq.conf </strong><br />--------------------------------------------<br />I don&#039;t know why this error apears, but shoudn&#039;t dnsmasq configure via /etc/dnsmasq.conf file instead of /var/etc/dnsmasq.conf ?<br />--------------------------------------------<br />this is my /var/etc/dnsmasq.conf:<br />cat /var/etc/dnsmasq.conf<br /># auto-generated config file from /etc/config/dhcp<br />conf-file=/etc/dnsmasq.conf<br />dhcp-authoritative<br />domain-needed<br />strict-order<br />localise-queries<br />read-ethers<br />bogus-priv<br />expand-hosts<br />domain=wireless.home<br />server=/wlan/<br />server=212.55.154.174<br />dhcp-leasefile=/tmp/dhcp.leases<br />resolv-file=/tmp/resolv.conf.auto<br />stop-dns-rebind<br />rebind-localhost-ok</p><br /><br /><br /><p>no-dhcp-interface=eth0<br />no-dhcp-interface=eth1<br />dhcp-range=wlan,192.168.100.100,192.168.100.249,255.255.255.0,12h<br />dhcp-option=wlan,212.55.154.174</p><br /><p> <strong> address=/Carambola2.wireless.home/192.168.10.130 &lt;------------------------------------&nbsp; like you see this network is not mine :S </strong><br /> <strong> ptr-record=130.10.168.192.in-addr.arpa,Carambola2.wireless.home&lt;------------------------ like you see this network is not mine :S </strong></p><p>---------------------------------------------------------<br />I will only have dhcp/dns via carambola2 dnsmasq server in Wlan network... so this have to be 192.168.100.1(wlan0), and not the eth0 interface....</p><p>does any one know how to solve this?where are the zones configured?? my /etc/dnsmasq.conf is empty :S</p><p>thanks in advance</p><p>regards<br />tux</p>											<p class="post-edited">(Last edited by <strong>tuxd3v</strong> on 18 Nov 2013, 05:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217918">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">tuxd3v</div>
					<div class="post-datetime">
						19 Nov 2013, 05:39					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys,</p><p>any help out there :S</p><p>I really appreciate, because I don&#039;t know how to configure dnsmasq for my situation :S</p><p>thanks in advance</p><p>regards<br />tux</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217920">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">valentin2208</div>
					<div class="post-datetime">
						19 Nov 2013, 07:50					</div>
				</div>
				<div class="post-content content">
					<p>/var/etc/dnsmasq.conf is auto-generated file from /etc/config/dhcp, so i guess you&#039;ve made something wrong in /etc/config/dhcp file. Try to revert changes and configure your network from the beggining, but read dnsmasq manual first. <a href="http://wiki.openwrt.org/doc/howto/dhcp.dnsmasq">http://wiki.openwrt.org/doc/howto/dhcp.dnsmasq</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p218486">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">tuxd3v</div>
					<div class="post-datetime">
						26 Nov 2013, 02:14					</div>
				</div>
				<div class="post-content content">
					<p>Hi valentine,</p><p>a million thanks ...I found the dns error <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>The general section of /etc/config/dhcp SYNTAX, for &quot;list servers ...&quot; is different from the main section of any interface... <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> thanks for that...</p><p>In the mean time I discovered that I can&#039;t send layer2 packets from wireless network 192.168.100.0/24 to internal network(eth0), 192.168.10.0/24...and I don&#039;t&nbsp; know why... <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>The default gateway of all interfaces are directed to the external router network 192.168.1.0/30(192.168.1.1-eth1).</p><p>but since the carambola2 knows how to send packets to/from&nbsp; 192.168.10.0/24(eth0) to/from 192.168.100.0/24(wlan0)... I don&#039;t&nbsp; know why this happen... :S</p><p>It can route the packets , and is a direct route :S</p><p>Does any one know&nbsp; why this hapem??because my carambola2 have interfaces in the two networks...</p><p>thanks in advance</p><p>regards<br />tux</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>