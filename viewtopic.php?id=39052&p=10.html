<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> mwan3; multi-wan policy routing (general topic)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 22 May 2013 and 6 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 10 of 65</div><nav><ul><li><a href="viewtopic.php%3Fid=39052&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=39052&amp;p=8.html">8</a></li><li><a href="viewtopic.php%3Fid=39052&amp;p=9.html">9</a></li><li class="pagination-current"><span>10</span></li><li><a href="viewtopic.php%3Fid=39052&amp;p=11.html">11</a></li><li><a href="viewtopic.php%3Fid=39052&amp;p=12.html">12</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=39052&amp;p=65.html">65</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p199800">
				<div class="post-metadata">
					<div class="post-num">Post #226</div>
					<div class="post-author">mvilera</div>
					<div class="post-datetime">
						26 Apr 2013, 23:12					</div>
				</div>
				<div class="post-content content">
					<p>That&#039;s exactly what I&#039;m trying to do, I&#039;m aware that I should accomplish this requirement before installing this. And creating these vlans properly without bricking my unit in the process is exactly my problem due to the lack of experience. That&#039;s the help I&#039;m requesting, sorry if I didn&#039;t make myself clear in earlier posts. Btw thanks for your quick replies.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p199841">
				<div class="post-metadata">
					<div class="post-num">Post #227</div>
					<div class="post-author">khanh3t</div>
					<div class="post-datetime">
						27 Apr 2013, 14:01					</div>
				</div>
				<div class="post-content content">
					<p>Hi all, this is my config router. I want increase speed when input is 3 x 3Mbps, 1 x 8Mbps, all it is 3G. I use WR703N with OpenWrt Barrier Breaker r36419 / LuCI Trunk (svn-r9807).</p><p>But when download, i see on interface, load not balance. 3G#3G1#3G2#3G3</p><br/><br/><div class="quotebox"><blockquote><p>Kernel IP routing table<br/>Destination&nbsp; &nbsp; &nbsp;Gateway&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Genmask&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Flags Metric Ref&nbsp; &nbsp; Use Iface<br/>0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;10.64.64.67&nbsp; &nbsp; &nbsp;0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;UG&nbsp; &nbsp; 10&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; 0 3g-3G<br/>0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;10.64.64.64&nbsp; &nbsp; &nbsp;0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;UG&nbsp; &nbsp; 20&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; 0 3g-3G_1<br/>0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;10.64.64.66&nbsp; &nbsp; &nbsp;0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;UG&nbsp; &nbsp; 30&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; 0 3g-3G_2<br/>0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;10.64.64.65&nbsp; &nbsp; &nbsp;0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;UG&nbsp; &nbsp; 40&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; 0 3g-3G_3<br/>10.64.64.64&nbsp; &nbsp; &nbsp;0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;255.255.255.255 UH&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 0 3g-3G_1<br/>10.64.64.65&nbsp; &nbsp; &nbsp;0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;255.255.255.255 UH&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 0 3g-3G_3<br/>10.64.64.66&nbsp; &nbsp; &nbsp;0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;255.255.255.255 UH&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 0 3g-3G_2<br/>10.64.64.67&nbsp; &nbsp; &nbsp;0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;255.255.255.255 UH&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 0 3g-3G<br/>192.168.1.0&nbsp; &nbsp; &nbsp;0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;255.255.255.0&nbsp; &nbsp;U&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 0 br-lan</p></blockquote></div><p> </p><div class="quotebox"><blockquote><p>Kernel IP routing table<br/>Output of &quot;ip route show&quot;<br/>default via 10.64.64.67 dev 3g-3G proto static metric 10 <br/>default via 10.64.64.64 dev 3g-3G_1 proto static metric 20 <br/>default via 10.64.64.66 dev 3g-3G_2 proto static metric 30 <br/>default via 10.64.64.65 dev 3g-3G_3 proto static metric 40 <br/>10.64.64.64 dev 3g-3G_1 proto kernel scope link src 10.65.57.29 <br/>10.64.64.65 dev 3g-3G_3 proto kernel scope link src 27.70.103.96 <br/>10.64.64.66 dev 3g-3G_2 proto kernel scope link src 10.68.195.236 <br/>10.64.64.67 dev 3g-3G proto kernel scope link src 10.82.211.175 <br/>192.168.1.0/24 dev br-lan proto kernel scope link src 192.168.1.1</p></blockquote></div><p> </p><div class="quotebox"><blockquote><p>Kernel IP routing table<br/>Output of &quot;ip rule show&quot;<br/>0:&nbsp; &nbsp; from all lookup local <br/>1001:&nbsp; &nbsp; from all fwmark 0x100/0xff00 lookup 1001 <br/>1002:&nbsp; &nbsp; from all fwmark 0x200/0xff00 lookup 1002 <br/>1003:&nbsp; &nbsp; from all fwmark 0x300/0xff00 lookup 1003 <br/>1004:&nbsp; &nbsp; from all fwmark 0x400/0xff00 lookup 1004 <br/>1016:&nbsp; &nbsp; from all fwmark 0x1000/0xff00 lookup 1016 <br/>1017:&nbsp; &nbsp; from all fwmark 0x1100/0xff00 lookup 1017 <br/>1018:&nbsp; &nbsp; from all fwmark 0x1200/0xff00 lookup 1018 <br/>1019:&nbsp; &nbsp; from all fwmark 0x1300/0xff00 lookup 1019 <br/>1020:&nbsp; &nbsp; from all fwmark 0x1400/0xff00 lookup 1020 <br/>1021:&nbsp; &nbsp; from all fwmark 0x1500/0xff00 lookup 1021 <br/>32766:&nbsp; &nbsp; from all lookup main <br/>32767:&nbsp; &nbsp; from all lookup default</p></blockquote></div><p> </p><div class="quotebox"><blockquote><p>Kernel IP routing table<br/>Output of &quot;ip route list table 1001-1015&quot;<br/>1001<br/>default via 10.64.64.67 dev 3g-3G <br/>1002<br/>default via 10.64.64.64 dev 3g-3G_1 <br/>1003<br/>default via 10.64.64.66 dev 3g-3G_2 <br/>1004<br/>default via 10.64.64.65 dev 3g-3G_3</p></blockquote></div><p> </p><div class="quotebox"><blockquote><p>Kernel IP routing table<br/>Chain PREROUTING (policy ACCEPT 23280 packets, 10M bytes)<br/> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br/>24586&nbsp; &nbsp;11M mwan3_pre&nbsp; all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p><p>Chain INPUT (policy ACCEPT 3852 packets, 348K bytes)<br/> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br/> 4146&nbsp; 373K mwan3_post&nbsp; all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p><p>Chain FORWARD (policy ACCEPT 19373 packets, 10M bytes)<br/> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br/>19373&nbsp; &nbsp;10M mssfix&nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p><p>Chain OUTPUT (policy ACCEPT 4193 packets, 1042K bytes)<br/> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br/> 4495 1125K mwan3_pre&nbsp; all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p><p>Chain POSTROUTING (policy ACCEPT 23566 packets, 11M bytes)<br/> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br/>24746&nbsp; &nbsp;12M mwan3_post&nbsp; all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p><p>Chain mssfix (1 references)<br/> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br/>&nbsp; &nbsp;62&nbsp; 2976 TCPMSS&nbsp; &nbsp; &nbsp;tcp&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; 3g-3G&nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tcp flags:0x06/0x02 /* wan (mtu_fix) */ TCPMSS clamp to PMTU<br/>&nbsp; 155&nbsp; 7440 TCPMSS&nbsp; &nbsp; &nbsp;tcp&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; 3g-3G_1&nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tcp flags:0x06/0x02 /* wan2 (mtu_fix) */ TCPMSS clamp to PMTU<br/>&nbsp; 193&nbsp; 9264 TCPMSS&nbsp; &nbsp; &nbsp;tcp&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; 3g-3G_2&nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tcp flags:0x06/0x02 /* wan3 (mtu_fix) */ TCPMSS clamp to PMTU<br/>&nbsp; 324 15552 TCPMSS&nbsp; &nbsp; &nbsp;tcp&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; 3g-3G_3&nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tcp flags:0x06/0x02 /* wan4 (mtu_fix) */ TCPMSS clamp to PMTU</p><p>Chain mwan3_default (1 references)<br/> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br/>&nbsp; &nbsp;47&nbsp; 2954 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 224.0.0.0/3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match ! 0x8000/0x8000 MARK or 0x8000<br/>&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 10.64.64.64&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match ! 0x8000/0x8000 MARK or 0x8000<br/>&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 10.64.64.65&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match ! 0x8000/0x8000 MARK or 0x8000<br/>&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 10.64.64.66&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match ! 0x8000/0x8000 MARK or 0x8000<br/>&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 10.64.64.67&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match ! 0x8000/0x8000 MARK or 0x8000<br/> 2989&nbsp; 969K MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 192.168.1.0/24&nbsp; &nbsp; &nbsp; &nbsp;mark match ! 0x8000/0x8000 MARK or 0x8000</p><p>Chain mwan3_post (2 references)<br/> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br/> 4177&nbsp; 655K MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; 3g-3G_3&nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match ! 0x8000/0x8000 MARK xset 0x400/0xff00<br/> 3754&nbsp; 485K MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; 3g-3G_2&nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match ! 0x8000/0x8000 MARK xset 0x300/0xff00<br/> 1847&nbsp; 200K MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; 3g-3G_1&nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match ! 0x8000/0x8000 MARK xset 0x200/0xff00<br/> 1746&nbsp; 164K MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; 3g-3G&nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match ! 0x8000/0x8000 MARK xset 0x100/0xff00<br/>16789&nbsp; &nbsp;10M MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match 0x8000/0x8000 MARK and 0xffff7fff<br/>28892&nbsp; &nbsp;12M CONNMARK&nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CONNMARK save mask 0xff00</p><p>Chain mwan3_pre (2 references)<br/> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br/>29081&nbsp; &nbsp;12M CONNMARK&nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CONNMARK restore mask 0xff00<br/> 4265 2856K MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; 3g-3G_3 *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MARK xset 0x8400/0xff00<br/> 4687 3883K MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; 3g-3G_2 *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MARK xset 0x8300/0xff00<br/> 1849&nbsp; 901K MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; 3g-3G_1 *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MARK xset 0x8200/0xff00<br/> 2109 1321K MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; 3g-3G&nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MARK xset 0x8100/0xff00<br/>15628 2689K mwan3_default&nbsp; all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match ! 0x8000/0x8000<br/> 3067&nbsp; 294K mwan3_rules&nbsp; all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match 0x0/0xff00</p><p>Chain mwan3_rules (1 references)<br/> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br/>&nbsp; 277 26626 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match 0x0/0xff00 statistic mode random probability 0.10000000009 MARK xset 0x100/0xff00<br/>&nbsp; 860 82048 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match 0x0/0xff00 statistic mode random probability 0.33300000010 MARK xset 0x300/0xff00<br/>&nbsp; 584 57921 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match 0x0/0xff00 statistic mode random probability 0.33300000010 MARK xset 0x200/0xff00<br/> 1125&nbsp; 107K MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match 0x0/0xff00 statistic mode random probability 0.99999999953 MARK xset 0x400/0xff00</p></blockquote></div><p> </p><div class="quotebox"><blockquote><p>3g-3G&nbsp; &nbsp; &nbsp;Link encap:Point-to-Point Protocol&nbsp; <br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:10.82.211.175&nbsp; P-t-P:10.64.64.67&nbsp; Mask:255.255.255.255<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP POINTOPOINT RUNNING NOARP MULTICAST&nbsp; MTU:1440&nbsp; Metric:1<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:2494 errors:0 dropped:0 overruns:0 frame:0<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:2081 errors:0 dropped:0 overruns:0 carrier:0<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:3 <br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:1611410 (1.5 MiB)&nbsp; TX bytes:200782 (196.0 KiB)</p><p>3g-3G_1&nbsp; &nbsp;Link encap:Point-to-Point Protocol&nbsp; <br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:10.65.57.29&nbsp; P-t-P:10.64.64.64&nbsp; Mask:255.255.255.255<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP POINTOPOINT RUNNING NOARP MULTICAST&nbsp; MTU:1440&nbsp; Metric:1<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:1857 errors:0 dropped:0 overruns:0 frame:0<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:1858 errors:0 dropped:0 overruns:0 carrier:0<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:3 <br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:900925 (879.8 KiB)&nbsp; TX bytes:200347 (195.6 KiB)</p><p>3g-3G_2&nbsp; &nbsp;Link encap:Point-to-Point Protocol&nbsp; <br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:10.68.195.236&nbsp; P-t-P:10.64.64.66&nbsp; Mask:255.255.255.255<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP POINTOPOINT RUNNING NOARP MULTICAST&nbsp; MTU:1440&nbsp; Metric:1<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:4754 errors:0 dropped:0 overruns:0 frame:0<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:3809 errors:0 dropped:0 overruns:0 carrier:0<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:3 <br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:3914154 (3.7 MiB)&nbsp; TX bytes:506248 (494.3 KiB)</p><p>3g-3G_3&nbsp; &nbsp;Link encap:Point-to-Point Protocol&nbsp; <br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:27.70.103.96&nbsp; P-t-P:10.64.64.65&nbsp; Mask:255.255.255.255<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP POINTOPOINT RUNNING NOARP MULTICAST&nbsp; MTU:1440&nbsp; Metric:1<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:4373 errors:0 dropped:0 overruns:0 frame:0<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:4286 errors:0 dropped:0 overruns:0 carrier:0<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:3 <br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:2897530 (2.7 MiB)&nbsp; TX bytes:690071 (673.8 KiB)</p><p>br-lan&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 14:CF:92:86:C8:F4&nbsp; <br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.1.1&nbsp; Bcast:192.168.1.255&nbsp; Mask:255.255.255.0<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::16cf:92ff:fe86:c8f4/64 Scope:Link<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:11380 errors:0 dropped:0 overruns:0 frame:0<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:12792 errors:0 dropped:0 overruns:0 carrier:0<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:1615156 (1.5 MiB)&nbsp; TX bytes:10184843 (9.7 MiB)</p><p>eth0&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 14:CF:92:86:C8:F4&nbsp; <br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:11392 errors:0 dropped:5 overruns:0 frame:0<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:12793 errors:0 dropped:0 overruns:0 carrier:0<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000 <br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:1775417 (1.6 MiB)&nbsp; TX bytes:10184885 (9.7 MiB)<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Interrupt:4 </p><p>lo&nbsp; &nbsp; &nbsp; &nbsp; Link encap:Local Loopback&nbsp; <br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:127.0.0.1&nbsp; Mask:255.0.0.0<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: ::1/128 Scope:Host<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP LOOPBACK RUNNING&nbsp; MTU:65536&nbsp; Metric:1<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:30 errors:0 dropped:0 overruns:0 frame:0<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:30 errors:0 dropped:0 overruns:0 carrier:0<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:2975 (2.9 KiB)&nbsp; TX bytes:2975 (2.9 KiB)</p><p>wlan0&nbsp; &nbsp; &nbsp;Link encap:Ethernet&nbsp; HWaddr 14:CF:92:86:C8:F4&nbsp; <br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:364 errors:0 dropped:0 overruns:0 carrier:0<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000 <br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:41494 (40.5 KiB)</p></blockquote></div><p> </p><div class="quotebox"><blockquote><p>config rule<br/>&nbsp; &nbsp; option proto &#039;all&#039;<br/>&nbsp; &nbsp; option equalize &#039;1&#039;<br/>&nbsp; &nbsp; option use_policy &#039;wan1_wan2_wan3_wan4_loadbalanced&#039;</p><p>config member &#039;wan1_m1_w3&#039;<br/>&nbsp; &nbsp; option interface &#039;3G&#039;<br/>&nbsp; &nbsp; option metric &#039;1&#039;<br/>&nbsp; &nbsp; option weight &#039;1&#039;</p><p>config member &#039;wan2_m1_w2&#039;<br/>&nbsp; &nbsp; option interface &#039;3G_1&#039;<br/>&nbsp; &nbsp; option metric &#039;1&#039;<br/>&nbsp; &nbsp; option weight &#039;2&#039;</p><p>config policy &#039;wan1_only&#039;<br/>&nbsp; &nbsp; list use_member &#039;wan1_m1_w3&#039;</p><p>config policy &#039;wan2_only&#039;<br/>&nbsp; &nbsp; list use_member &#039;wan2_m1_w2&#039;</p><p>config policy &#039;wan1_wan2_loadbalanced&#039;<br/>&nbsp; &nbsp; list use_member &#039;wan1_m1_w3&#039;<br/>&nbsp; &nbsp; list use_member &#039;wan2_m1_w2&#039;</p><p>config policy &#039;wan1_pri_wan2_sec&#039;<br/>&nbsp; &nbsp; list use_member &#039;wan1_m1_w3&#039;<br/>&nbsp; &nbsp; list use_member &#039;wan2_m2_w2&#039;</p><p>config policy &#039;wan2_pri_wan1_sec&#039;<br/>&nbsp; &nbsp; list use_member &#039;wan1_m2_w3&#039;<br/>&nbsp; &nbsp; list use_member &#039;wan2_m1_w2&#039;</p><p>config interface &#039;3G&#039;<br/>&nbsp; &nbsp; option enabled &#039;1&#039;<br/>&nbsp; &nbsp; list track_ip &#039;8.8.8.8&#039;<br/>&nbsp; &nbsp; option reliability &#039;1&#039;<br/>&nbsp; &nbsp; option count &#039;3&#039;<br/>&nbsp; &nbsp; option timeout &#039;2&#039;<br/>&nbsp; &nbsp; option interval &#039;5&#039;<br/>&nbsp; &nbsp; option down &#039;3&#039;<br/>&nbsp; &nbsp; option up &#039;8&#039;</p><p>config interface &#039;3G_1&#039;<br/>&nbsp; &nbsp; option enabled &#039;1&#039;<br/>&nbsp; &nbsp; list track_ip &#039;8.8.8.8&#039;<br/>&nbsp; &nbsp; option reliability &#039;1&#039;<br/>&nbsp; &nbsp; option count &#039;3&#039;<br/>&nbsp; &nbsp; option timeout &#039;2&#039;<br/>&nbsp; &nbsp; option interval &#039;5&#039;<br/>&nbsp; &nbsp; option down &#039;3&#039;<br/>&nbsp; &nbsp; option up &#039;8&#039;</p><p>config interface &#039;3G_2&#039;<br/>&nbsp; &nbsp; option enabled &#039;1&#039;<br/>&nbsp; &nbsp; list track_ip &#039;8.8.8.8&#039;<br/>&nbsp; &nbsp; option reliability &#039;1&#039;<br/>&nbsp; &nbsp; option count &#039;3&#039;<br/>&nbsp; &nbsp; option timeout &#039;2&#039;<br/>&nbsp; &nbsp; option interval &#039;5&#039;<br/>&nbsp; &nbsp; option down &#039;3&#039;<br/>&nbsp; &nbsp; option up &#039;8&#039;</p><p>config interface &#039;3G_3&#039;<br/>&nbsp; &nbsp; option enabled &#039;1&#039;<br/>&nbsp; &nbsp; list track_ip &#039;8.8.8.8&#039;<br/>&nbsp; &nbsp; option reliability &#039;1&#039;<br/>&nbsp; &nbsp; option count &#039;3&#039;<br/>&nbsp; &nbsp; option timeout &#039;2&#039;<br/>&nbsp; &nbsp; option interval &#039;5&#039;<br/>&nbsp; &nbsp; option down &#039;3&#039;<br/>&nbsp; &nbsp; option up &#039;8&#039;</p><p>config member &#039;wan3_m1_w3&#039;<br/>&nbsp; &nbsp; option interface &#039;3G_2&#039;<br/>&nbsp; &nbsp; option metric &#039;1&#039;<br/>&nbsp; &nbsp; option weight &#039;3&#039;</p><p>config member &#039;wan4_m1_w3&#039;<br/>&nbsp; &nbsp; option interface &#039;3G_3&#039;<br/>&nbsp; &nbsp; option metric &#039;1&#039;<br/>&nbsp; &nbsp; option weight &#039;4&#039;</p><p>config policy &#039;wan1_wan2_wan3_wan4_loadbalanced&#039;<br/>&nbsp; &nbsp; list use_member &#039;wan1_m1_w3&#039;<br/>&nbsp; &nbsp; list use_member &#039;wan2_m1_w2&#039;<br/>&nbsp; &nbsp; list use_member &#039;wan3_m1_w3&#039;<br/>&nbsp; &nbsp; list use_member &#039;wan4_m1_w3&#039;</p></blockquote></div><p> </p><div class="quotebox"><blockquote><p>config interface &#039;loopback&#039;<br/>&nbsp; &nbsp; option ifname &#039;lo&#039;<br/>&nbsp; &nbsp; option proto &#039;static&#039;<br/>&nbsp; &nbsp; option ipaddr &#039;127.0.0.1&#039;<br/>&nbsp; &nbsp; option netmask &#039;255.0.0.0&#039;</p><p>config interface &#039;lan&#039;<br/>&nbsp; &nbsp; option ifname &#039;eth0&#039;<br/>&nbsp; &nbsp; option type &#039;bridge&#039;<br/>&nbsp; &nbsp; option proto &#039;static&#039;<br/>&nbsp; &nbsp; option ipaddr &#039;192.168.1.1&#039;<br/>&nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;</p><p>config globals &#039;globals&#039;<br/>&nbsp; &nbsp; option ula_prefix &#039;fdc8:d83b:c3a::/48&#039;</p><p>config interface &#039;3G&#039;<br/>&nbsp; &nbsp; option proto &#039;3g&#039;<br/>&nbsp; &nbsp; option service &#039;umts&#039;<br/>&nbsp; &nbsp; option device &#039;/dev/ttyUSB0&#039;<br/>&nbsp; &nbsp; option apn &#039;internet&#039;<br/>&nbsp; &nbsp; option username &#039;mms&#039;<br/>&nbsp; &nbsp; option password &#039;mms&#039;<br/>&nbsp; &nbsp; option metric &#039;10&#039;</p><p>config interface &#039;3G_1&#039;<br/>&nbsp; &nbsp; option proto &#039;3g&#039;<br/>&nbsp; &nbsp; option device &#039;/dev/ttyUSB3&#039;<br/>&nbsp; &nbsp; option service &#039;umts&#039;<br/>&nbsp; &nbsp; option apn &#039;internet&#039;<br/>&nbsp; &nbsp; option username &#039;mms&#039;<br/>&nbsp; &nbsp; option password &#039;mms&#039;<br/>&nbsp; &nbsp; option metric &#039;20&#039;</p><p>config interface &#039;3G_2&#039;<br/>&nbsp; &nbsp; option proto &#039;3g&#039;<br/>&nbsp; &nbsp; option device &#039;/dev/ttyUSB6&#039;<br/>&nbsp; &nbsp; option service &#039;umts&#039;<br/>&nbsp; &nbsp; option apn &#039;internet&#039;<br/>&nbsp; &nbsp; option username &#039;mms&#039;<br/>&nbsp; &nbsp; option password &#039;mms&#039;<br/>&nbsp; &nbsp; option metric &#039;30&#039;</p><p>config interface &#039;3G_3&#039;<br/>&nbsp; &nbsp; option proto &#039;3g&#039;<br/>&nbsp; &nbsp; option device &#039;/dev/ttyUSB9&#039;<br/>&nbsp; &nbsp; option service &#039;umts&#039;<br/>&nbsp; &nbsp; option apn &#039;internet&#039;<br/>&nbsp; &nbsp; option username &#039;mms&#039;<br/>&nbsp; &nbsp; option password &#039;mms&#039;<br/>&nbsp; &nbsp; option metric &#039;40&#039;</p></blockquote></div><p><span class="postimg"><img src="http://usb3gvn.com/wp-content/uploads/vpn.png" alt="http://usb3gvn.com/wp-content/uploads/vpn.png"/></span></p><br/><p><span class="postimg"><img src="http://usb3gvn.com/wp-content/uploads/vpn11.png" alt="http://usb3gvn.com/wp-content/uploads/vpn11.png"/></span></p><br/><p><span class="postimg"><img src="http://usb3gvn.com/wp-content/uploads/vpn3.png" alt="http://usb3gvn.com/wp-content/uploads/vpn3.png"/></span></p>											<p class="post-edited">(Last edited by <strong>khanh3t</strong> on 27 Apr 2013, 14:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p199861">
				<div class="post-metadata">
					<div class="post-num">Post #228</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						27 Apr 2013, 19:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>khanh3t wrote:</cite><blockquote><p>I want increase speed when input is 3 x 3Mbps, 1 x 8Mbps, all it is 3G. I use WR703N with OpenWrt Barrier Breaker r36419 / LuCI Trunk (svn-r9807). But when download, i see on interface, load not balance. 3G#3G1#3G2#3G3</p></blockquote></div><br/><p>Your config is looking good. One download will never exceed the speed of one interface, as one session is always routed over the same interface.</p><p>You will need at least 4 (but probably more) downloads, to see an increase in total download speed.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p199886">
				<div class="post-metadata">
					<div class="post-num">Post #229</div>
					<div class="post-author">arfett</div>
					<div class="post-datetime">
						28 Apr 2013, 01:31					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Adze wrote:</cite><blockquote><div class="quotebox"><cite>khanh3t wrote:</cite><blockquote><p>I want increase speed when input is 3 x 3Mbps, 1 x 8Mbps, all it is 3G. I use WR703N with OpenWrt Barrier Breaker r36419 / LuCI Trunk (svn-r9807). But when download, i see on interface, load not balance. 3G#3G1#3G2#3G3</p></blockquote></div><br/><p>Your config is looking good. One download will never exceed the speed of one interface, as one session is always routed over the same interface.</p><p>You will need at least 4 (but probably more) downloads, to see an increase in total download speed.</p></blockquote></div><p>In those pictures he was using uTorrent and also a download manager which was splitting up his download into multiple pieces.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p199892">
				<div class="post-metadata">
					<div class="post-num">Post #230</div>
					<div class="post-author">khanh3t</div>
					<div class="post-datetime">
						28 Apr 2013, 08:47					</div>
				</div>
				<div class="post-content content">
					<p>hi all. i try multi session and multi computer download ( in some test, active connect maybe is 1000-2000 or more ). but nothing change. sometime, it increase but not at all. Load balancing is fail when many pc connect and download.</p><p>i has test ram and cpu, it isn&#039;t overload. I thing something wrong in my setting, maybe metric or weight, but i has change but nothing change. Then i thing maybe subnetmark my connect, but it cann&#039;t be change, it provide from isp.</p><p>could someone help me? sorry my bad english.</p><p>@ adze: if you need, i can upload my config file</p>											<p class="post-edited">(Last edited by <strong>khanh3t</strong> on 28 Apr 2013, 08:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p199910">
				<div class="post-metadata">
					<div class="post-num">Post #231</div>
					<div class="post-author">der.ruben</div>
					<div class="post-datetime">
						28 Apr 2013, 14:07					</div>
				</div>
				<div class="post-content content">
					<p>Hi all!</p><p>First of all, thanks Adze for this great package!</p><p>I am trying to do pretty much the same thing that swoofz tried to do here: <a href="https://forum.openwrt.org/viewtopic.php?pid=191481#p191481">https://forum.openwrt.org/viewtopic.php?pid=191481#p191481</a> and I also get about the same result. Difference is, I am using pptp for connecting to the VPN. </p><p>Before installing mwan I was connecting to specific networks through VPN by using static routes. Now I would like to route specific devices through VPN.</p><p>All traffic from the machine I&#039;m trying to route through VPN gets stuck while all other machines have no trouble connecting through WAN.</p><p>My VPN Interface has metric 5, WAN has 10. </p><p>Please, if anyone could kindly advise what to do - I&#039;m stuck here.</p><p>Thanks!</p><p>route -n:<br/></p><div class="quotebox"><blockquote><p># route -n<br/>Kernel IP routing table<br/>Destination&nbsp; &nbsp; &nbsp;Gateway&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Genmask&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Flags Metric Ref&nbsp; &nbsp; Use Iface<br/>0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;95.168.135.254&nbsp; 0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;UG&nbsp; &nbsp; 10&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; 0 eth1<br/>10.100.0.1&nbsp; &nbsp; &nbsp; 0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;255.255.255.255 UH&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 0 pptp-VPN<br/>46.4.253.175&nbsp; &nbsp; 95.168.135.254&nbsp; 255.255.255.255 UGH&nbsp; &nbsp;10&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; 0 eth1<br/>95.168.135.0&nbsp; &nbsp; 0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;255.255.255.0&nbsp; &nbsp;U&nbsp; &nbsp; &nbsp;10&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; 0 eth1<br/>192.168.1.0&nbsp; &nbsp; &nbsp;0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;255.255.255.0&nbsp; &nbsp;U&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 0 br-lan</p></blockquote></div><p>ping works:<br/></p><div class="quotebox"><blockquote><p># ping -c 1 -I eth1 <a href="http://www.google.com/">www.google.com</a><br/>PING <a href="http://www.google.com/">www.google.com</a> (173.194.69.104): 56 data bytes<br/>64 bytes from 173.194.69.104: seq=0 ttl=50 time=15.394 ms</p><p># ping -c 1 -I pptp-VPN <a href="http://www.google.com/">www.google.com</a><br/>PING <a href="http://www.google.com/">www.google.com</a> (173.194.69.103): 56 data bytes<br/>64 bytes from 173.194.69.103: seq=0 ttl=48 time=53.150 ms</p></blockquote></div><p>/etc/config/network<br/></p><div class="quotebox"><blockquote><p># cat /etc/config/network</p><p>config interface &#039;loopback&#039;<br/>&nbsp; &nbsp; option ifname &#039;lo&#039;<br/>&nbsp; &nbsp; option proto &#039;static&#039;<br/>&nbsp; &nbsp; option ipaddr &#039;127.0.0.1&#039;<br/>&nbsp; &nbsp; option netmask &#039;255.0.0.0&#039;</p><p>config interface &#039;lan&#039;<br/>&nbsp; &nbsp; option ifname &#039;eth0.1&#039;<br/>&nbsp; &nbsp; option type &#039;bridge&#039;<br/>&nbsp; &nbsp; option proto &#039;static&#039;<br/>&nbsp; &nbsp; option ipaddr &#039;192.168.1.1&#039;<br/>&nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;<br/>&nbsp; &nbsp; option ip6assign &#039;60&#039;<br/>&nbsp; &nbsp; option mtu &#039;1492&#039;</p><p>config interface &#039;wan&#039;<br/>&nbsp; &nbsp; option ifname &#039;eth1&#039;<br/>&nbsp; &nbsp; option proto &#039;dhcp&#039;<br/>&nbsp; &nbsp; option mtu &#039;1492&#039;<br/>&nbsp; &nbsp; option metric &#039;10&#039;</p><p>config globals &#039;globals&#039;<br/>&nbsp; &nbsp; option ula_prefix &#039;fdd3:b755:f480::/48&#039;</p><p>config switch<br/>&nbsp; &nbsp; option name &#039;rtl8366s&#039;<br/>&nbsp; &nbsp; option reset &#039;1&#039;<br/>&nbsp; &nbsp; option enable_vlan &#039;1&#039;<br/>&nbsp; &nbsp; option blinkrate &#039;2&#039;<br/>&nbsp; &nbsp; option enable_vlan4k &#039;1&#039;</p><p>config switch_vlan<br/>&nbsp; &nbsp; option device &#039;rtl8366s&#039;<br/>&nbsp; &nbsp; option vlan &#039;1&#039;<br/>&nbsp; &nbsp; option ports &#039;0 1 2 3 5t&#039;</p><p>config switch_vlan<br/>&nbsp; &nbsp; &nbsp; &nbsp; option device &#039;rtl8366s&#039;<br/>&nbsp; &nbsp; &nbsp; &nbsp; option vlan &#039;2&#039;<br/>&nbsp; &nbsp; &nbsp; &nbsp; option ports &#039;4 5t&#039; </p><p>config interface &#039;VPN&#039;<br/>&nbsp; &nbsp; option proto &#039;pptp&#039;<br/>&nbsp; &nbsp; option server &#039;VPN SERVER&#039;<br/>&nbsp; &nbsp; option username &#039;VPN USERNAME&#039;<br/>&nbsp; &nbsp; option password &#039;VPN PASSWORD&#039;<br/>&nbsp; &nbsp; option mtu &#039;1492&#039;<br/>&nbsp; &nbsp; option defaultroute &#039;0&#039;<br/>&nbsp; &nbsp; option metric &#039;5&#039;</p><p>config interface &#039;wan1&#039;<br/>&nbsp; &nbsp; option ifname &#039;eth0.1&#039;<br/>&nbsp; &nbsp; option _orig_ifname &#039;eth0.1&#039;<br/>&nbsp; &nbsp; option _orig_bridge &#039;false&#039;<br/>&nbsp; &nbsp; option proto &#039;dhcp&#039;<br/>&nbsp; &nbsp; option metric &#039;15&#039;<br/>&nbsp; &nbsp; option mtu &#039;1492&#039;</p></blockquote></div><p>/etc/config/mwan3 <br/></p><div class="quotebox"><blockquote><p># cat /etc/config/mwan3 </p><p>config interface &#039;wan&#039;<br/>&nbsp; &nbsp; option enabled &#039;1&#039;<br/>&nbsp; &nbsp; list track_ip &#039;8.8.4.4&#039;<br/>&nbsp; &nbsp; list track_ip &#039;8.8.8.8&#039;<br/>&nbsp; &nbsp; list track_ip &#039;208.67.222.222&#039;<br/>&nbsp; &nbsp; list track_ip &#039;208.67.220.220&#039;<br/>&nbsp; &nbsp; option count &#039;1&#039;<br/>&nbsp; &nbsp; option timeout &#039;2&#039;<br/>&nbsp; &nbsp; option interval &#039;5&#039;<br/>&nbsp; &nbsp; option down &#039;3&#039;<br/>&nbsp; &nbsp; option reliability &#039;1&#039;<br/>&nbsp; &nbsp; option up &#039;8&#039;</p><p>config interface &#039;VPN&#039;<br/>&nbsp; &nbsp; option enabled &#039;1&#039;<br/>&nbsp; &nbsp; list track_ip &#039;8.8.4.4&#039;<br/>&nbsp; &nbsp; list track_ip &#039;8.8.8.8&#039;<br/>&nbsp; &nbsp; list track_ip &#039;208.67.222.222&#039;<br/>&nbsp; &nbsp; list track_ip &#039;208.67.220.220&#039;<br/>&nbsp; &nbsp; option count &#039;1&#039;<br/>&nbsp; &nbsp; option timeout &#039;2&#039;<br/>&nbsp; &nbsp; option interval &#039;5&#039;<br/>&nbsp; &nbsp; option down &#039;3&#039;<br/>&nbsp; &nbsp; option up &#039;8&#039;<br/>&nbsp; &nbsp; option reliability &#039;2&#039;</p><p>config member &#039;wan_m1_w3&#039;<br/>&nbsp; &nbsp; option interface &#039;wan&#039;<br/>&nbsp; &nbsp; option weight &#039;3&#039;<br/>&nbsp; &nbsp; option metric &#039;2&#039;</p><p>config member &#039;VPN_m1_w2&#039;<br/>&nbsp; &nbsp; option interface &#039;VPN&#039;<br/>&nbsp; &nbsp; option metric &#039;1&#039;<br/>&nbsp; &nbsp; option weight &#039;2&#039;</p><p>config policy &#039;wan_only&#039;<br/>&nbsp; &nbsp; list use_member &#039;wan_m1_w3&#039;</p><p>config policy &#039;VPN_only&#039;<br/>&nbsp; &nbsp; list use_member &#039;VPN_m1_w2&#039;</p><p>config rule<br/>&nbsp; &nbsp; option use_policy &#039;VPN_only&#039;<br/>&nbsp; &nbsp; option proto &#039;all&#039;<br/>&nbsp; &nbsp; option src_ip &#039;192.168.1.183&#039;</p><p>config rule<br/>&nbsp; &nbsp; option dest_ip &#039;0.0.0.0/0&#039;<br/>&nbsp; &nbsp; option proto &#039;all&#039;<br/>&nbsp; &nbsp; option use_policy &#039;wan_only&#039;</p></blockquote></div><p>/etc/config/firewall<br/></p><div class="quotebox"><blockquote><p># cat /etc/config/firewall</p><p>config defaults<br/>&nbsp; &nbsp; option syn_flood &#039;1&#039;<br/>&nbsp; &nbsp; option input &#039;ACCEPT&#039;<br/>&nbsp; &nbsp; option output &#039;ACCEPT&#039;<br/>&nbsp; &nbsp; option forward &#039;REJECT&#039;</p><p>config zone<br/>&nbsp; &nbsp; option name &#039;lan&#039;<br/>&nbsp; &nbsp; option input &#039;ACCEPT&#039;<br/>&nbsp; &nbsp; option output &#039;ACCEPT&#039;<br/>&nbsp; &nbsp; option forward &#039;REJECT&#039;<br/>&nbsp; &nbsp; option network &#039;lan&#039;</p><p>config zone<br/>&nbsp; &nbsp; option name &#039;wan&#039;<br/>&nbsp; &nbsp; option output &#039;ACCEPT&#039;<br/>&nbsp; &nbsp; option forward &#039;REJECT&#039;<br/>&nbsp; &nbsp; option masq &#039;1&#039;<br/>&nbsp; &nbsp; option mtu_fix &#039;1&#039;<br/>&nbsp; &nbsp; option input &#039;ACCEPT&#039;<br/>&nbsp; &nbsp; option network &#039;wan&#039;</p><p>config rule<br/>&nbsp; &nbsp; option name &#039;Allow-DHCP-Renew&#039;<br/>&nbsp; &nbsp; option src &#039;wan&#039;<br/>&nbsp; &nbsp; option proto &#039;udp&#039;<br/>&nbsp; &nbsp; option dest_port &#039;68&#039;<br/>&nbsp; &nbsp; option target &#039;ACCEPT&#039;<br/>&nbsp; &nbsp; option family &#039;ipv4&#039;</p><p>config rule<br/>&nbsp; &nbsp; option name &#039;Allow-Ping&#039;<br/>&nbsp; &nbsp; option src &#039;wan&#039;<br/>&nbsp; &nbsp; option proto &#039;icmp&#039;<br/>&nbsp; &nbsp; option icmp_type &#039;echo-request&#039;<br/>&nbsp; &nbsp; option family &#039;ipv4&#039;<br/>&nbsp; &nbsp; option target &#039;ACCEPT&#039;</p><p>config rule<br/>&nbsp; &nbsp; option name &#039;Allow-DHCPv6&#039;<br/>&nbsp; &nbsp; option src &#039;wan&#039;<br/>&nbsp; &nbsp; option proto &#039;udp&#039;<br/>&nbsp; &nbsp; option src_ip &#039;fe80::/10&#039;<br/>&nbsp; &nbsp; option src_port &#039;547&#039;<br/>&nbsp; &nbsp; option dest_ip &#039;fe80::/10&#039;<br/>&nbsp; &nbsp; option dest_port &#039;546&#039;<br/>&nbsp; &nbsp; option family &#039;ipv6&#039;<br/>&nbsp; &nbsp; option target &#039;ACCEPT&#039;</p><p>config rule<br/>&nbsp; &nbsp; option name &#039;Allow-ICMPv6-Input&#039;<br/>&nbsp; &nbsp; option src &#039;wan&#039;<br/>&nbsp; &nbsp; option proto &#039;icmp&#039;<br/>&nbsp; &nbsp; list icmp_type &#039;echo-request&#039;<br/>&nbsp; &nbsp; list icmp_type &#039;echo-reply&#039;<br/>&nbsp; &nbsp; list icmp_type &#039;destination-unreachable&#039;<br/>&nbsp; &nbsp; list icmp_type &#039;packet-too-big&#039;<br/>&nbsp; &nbsp; list icmp_type &#039;time-exceeded&#039;<br/>&nbsp; &nbsp; list icmp_type &#039;bad-header&#039;<br/>&nbsp; &nbsp; list icmp_type &#039;unknown-header-type&#039;<br/>&nbsp; &nbsp; list icmp_type &#039;router-solicitation&#039;<br/>&nbsp; &nbsp; list icmp_type &#039;neighbour-solicitation&#039;<br/>&nbsp; &nbsp; list icmp_type &#039;router-advertisement&#039;<br/>&nbsp; &nbsp; list icmp_type &#039;neighbour-advertisement&#039;<br/>&nbsp; &nbsp; option limit &#039;1000/sec&#039;<br/>&nbsp; &nbsp; option family &#039;ipv6&#039;<br/>&nbsp; &nbsp; option target &#039;ACCEPT&#039;</p><p>config rule<br/>&nbsp; &nbsp; option name &#039;Allow-ICMPv6-Forward&#039;<br/>&nbsp; &nbsp; option src &#039;wan&#039;<br/>&nbsp; &nbsp; option dest &#039;*&#039;<br/>&nbsp; &nbsp; option proto &#039;icmp&#039;<br/>&nbsp; &nbsp; list icmp_type &#039;echo-request&#039;<br/>&nbsp; &nbsp; list icmp_type &#039;echo-reply&#039;<br/>&nbsp; &nbsp; list icmp_type &#039;destination-unreachable&#039;<br/>&nbsp; &nbsp; list icmp_type &#039;packet-too-big&#039;<br/>&nbsp; &nbsp; list icmp_type &#039;time-exceeded&#039;<br/>&nbsp; &nbsp; list icmp_type &#039;bad-header&#039;<br/>&nbsp; &nbsp; list icmp_type &#039;unknown-header-type&#039;<br/>&nbsp; &nbsp; option limit &#039;1000/sec&#039;<br/>&nbsp; &nbsp; option family &#039;ipv6&#039;<br/>&nbsp; &nbsp; option target &#039;ACCEPT&#039;</p><p>config include<br/>&nbsp; &nbsp; option path &#039;/etc/firewall.user&#039;</p><p>config include<br/>&nbsp; &nbsp; option type &#039;script&#039;<br/>&nbsp; &nbsp; option path &#039;/usr/share/firewall/ipv6-ula-border.sh&#039;<br/>&nbsp; &nbsp; option family &#039;IPv6&#039;<br/>&nbsp; &nbsp; option reload &#039;1&#039;</p><p>config forwarding<br/>&nbsp; &nbsp; option dest &#039;lan&#039;<br/>&nbsp; &nbsp; option src &#039;wan&#039;</p><p>config forwarding<br/>&nbsp; &nbsp; option dest &#039;wan&#039;<br/>&nbsp; &nbsp; option src &#039;lan&#039;</p><p>config zone<br/>&nbsp; &nbsp; option output &#039;ACCEPT&#039;<br/>&nbsp; &nbsp; option name &#039;VPN&#039;<br/>&nbsp; &nbsp; option masq &#039;1&#039;<br/>&nbsp; &nbsp; option network &#039;VPN&#039;<br/>&nbsp; &nbsp; option input &#039;REJECT&#039;<br/>&nbsp; &nbsp; option forward &#039;REJECT&#039;</p><p>config rule<br/>&nbsp; &nbsp; option target &#039;ACCEPT&#039;<br/>&nbsp; &nbsp; option src &#039;lan&#039;<br/>&nbsp; &nbsp; option dest &#039;VPN&#039;<br/>&nbsp; &nbsp; option name &#039;VPN&#039;</p></blockquote></div><div class="quotebox"><blockquote><p># ip rule show<br/>0:&nbsp; &nbsp; from all lookup local <br/>1001:&nbsp; &nbsp; from 95.168.135.237 fwmark 0x0/0x8000 lookup 1001 <br/>1008:&nbsp; &nbsp; from all fwmark 0x100/0xff00 lookup 1001 <br/>1016:&nbsp; &nbsp; from all fwmark 0x1000/0xff00 lookup 1016 <br/>1017:&nbsp; &nbsp; from all fwmark 0x1100/0xff00 lookup 1017 <br/>32766:&nbsp; &nbsp; from all lookup main <br/>32767:&nbsp; &nbsp; from all lookup default</p></blockquote></div><p>Thanks again!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p199997">
				<div class="post-metadata">
					<div class="post-num">Post #232</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						29 Apr 2013, 10:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>der.ruben wrote:</cite><blockquote><p>My VPN Interface has metric 5, WAN has 10.<br/>route -n:<br/></p><div class="codebox"><pre><code># route -n
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
0.0.0.0         95.168.135.254  0.0.0.0         UG    10     0        0 eth1
10.100.0.1      0.0.0.0         255.255.255.255 UH    0      0        0 pptp-VPN
46.4.253.175    95.168.135.254  255.255.255.255 UGH   10     0        0 eth1
95.168.135.0    0.0.0.0         255.255.255.0   U     10     0        0 eth1
192.168.1.0     0.0.0.0         255.255.255.0   U     0      0        0 br-lan</code></pre></div></blockquote></div><p>I don&#039;t see any default route for your VPN.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200091">
				<div class="post-metadata">
					<div class="post-num">Post #233</div>
					<div class="post-author">der.ruben</div>
					<div class="post-datetime">
						29 Apr 2013, 21:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Adze wrote:</cite><blockquote><p>I don&#039;t see any default route for your VPN.</p></blockquote></div><p>Well well well...you are absolutely right - I checked &quot;Use default gateway&quot; in my VPN interfaces settings and it&#039;s working now. Thank you again Adze!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200121">
				<div class="post-metadata">
					<div class="post-num">Post #234</div>
					<div class="post-author">arfett</div>
					<div class="post-datetime">
						30 Apr 2013, 00:23					</div>
				</div>
				<div class="post-content content">
					<p>Well my work is just about done on the LuCI page. The last thing I&#039;m working on now is converting the troubleshooting tab to refresh automatically and not have the save &amp; apply button like the overview tab.</p><p>If anyone has any requests I&#039;ll consider them but I&#039;m trying to keep it to mwan3 functionality (no integration with e-mail apps, etc etc)</p>											<p class="post-edited">(Last edited by <strong>arfett</strong> on 1 May 2013, 05:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200124">
				<div class="post-metadata">
					<div class="post-num">Post #235</div>
					<div class="post-author">biatche</div>
					<div class="post-datetime">
						30 Apr 2013, 00:33					</div>
				</div>
				<div class="post-content content">
					<p>In the case of a pppoe connection going down, hotplug is triggered, yes?</p><p>In the case of a pppoe-MODEM losing its dsl connectivity but connected to openwrt with static ip/gateway, is hotplug triggered still?</p><p>Will mwan3 trigger hotplug based on ping of track ips?</p>											<p class="post-edited">(Last edited by <strong>biatche</strong> on 30 Apr 2013, 00:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200145">
				<div class="post-metadata">
					<div class="post-num">Post #236</div>
					<div class="post-author">arfett</div>
					<div class="post-datetime">
						30 Apr 2013, 04:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>biatche wrote:</cite><blockquote><p>In the case of a pppoe connection going down, hotplug is triggered, yes?</p><p>In the case of a pppoe-MODEM losing its dsl connectivity but connected to openwrt with static ip/gateway, is hotplug triggered still?</p><p>Will mwan3 trigger hotplug based on ping of track ips?</p></blockquote></div><p>Yes. Hotplug events are only triggered from mwan3 by the tracking of test IPs.</p><p>I believe mwan3 assumes the link is always up if it is not being tested.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200267">
				<div class="post-metadata">
					<div class="post-num">Post #237</div>
					<div class="post-author">toogle</div>
					<div class="post-datetime">
						1 May 2013, 07:55					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,<br/>First thanks the author for giving such a simply way to configure multiwan policy routing.</p><p>I was stuck when I am trying to find a method to setup a pptp tunnel through one specific wan (pppoe-wan1) port of my two wan interfaces (pppoe-wan1 and pppoe-wan2). Someone said maybe mwan3 could help. But I couldn&#039;t make it.</p><p>my original post for help with illustrations of requirement can be found<br/><a href="https://forum.openwrt.org/viewtopic.php?id=43828">https://forum.openwrt.org/viewtopic.php?id=43828</a></p><p>Now my situation is:<br/>After I configured a pptp-vpn interface by add a pptp interface. I checked the route. the pptp-vpn sometimes connected through pppoe-wan1 sometimes connected through pppoe-wan2. I guess this depends on which pppoe got connected first.</p><p>As mwan3 seems to work based on the definition of interfaces, I don&#039;t know how to configure mwan3 to let my pptp connect<br/>as I expected. </p><p>Hope someone can help me</p><p>Thx</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200397">
				<div class="post-metadata">
					<div class="post-num">Post #238</div>
					<div class="post-author">arfett</div>
					<div class="post-datetime">
						2 May 2013, 07:09					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>toogle wrote:</cite><blockquote><p>Hi all,<br/>First thanks the author for giving such a simply way to configure multiwan policy routing.</p><p>I was stuck when I am trying to find a method to setup a pptp tunnel through one specific wan (pppoe-wan1) port of my two wan interfaces (pppoe-wan1 and pppoe-wan2). Someone said maybe mwan3 could help. But I couldn&#039;t make it.</p><p>my original post for help with illustrations of requirement can be found<br/><a href="https://forum.openwrt.org/viewtopic.php?id=43828">https://forum.openwrt.org/viewtopic.php?id=43828</a></p><p>Now my situation is:<br/>After I configured a pptp-vpn interface by add a pptp interface. I checked the route. the pptp-vpn sometimes connected through pppoe-wan1 sometimes connected through pppoe-wan2. I guess this depends on which pppoe got connected first.</p><p>As mwan3 seems to work based on the definition of interfaces, I don&#039;t know how to configure mwan3 to let my pptp connect<br/>as I expected. </p><p>Hope someone can help me</p><p>Thx</p></blockquote></div><p>Could you post the output of &quot;uci show -p /var/state network&quot; when you have your connections up and running with the VPN on the right interface?</p>											<p class="post-edited">(Last edited by <strong>arfett</strong> on 2 May 2013, 07:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200428">
				<div class="post-metadata">
					<div class="post-num">Post #239</div>
					<div class="post-author">toogle</div>
					<div class="post-datetime">
						2 May 2013, 15:31					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arfett wrote:</cite><blockquote><p>Could you post the output of &quot;uci show -p /var/state network&quot; when you have your connections up and running with the VPN on the right interface?</p></blockquote></div><p>here is the output</p><div class="codebox"><pre><code>network.loopback=interface
network.loopback.ifname=lo
network.loopback.proto=static
network.loopback.ipaddr=127.0.0.1
network.loopback.netmask=255.0.0.0
network.loopback.up=1
network.loopback.connect_time=16
network.loopback.device=lo
network.lan=interface
network.lan.type=bridge
network.lan.proto=static
network.lan.netmask=255.255.255.0
network.lan.ipaddr=192.168.1.1
network.lan.up=1
network.lan.connect_time=14
network.lan.device=eth0.1
network.lan.ifname=br-lan
network.@switch[0]=switch
network.@switch[0].name=rtl8366s
network.@switch[0].reset=1
network.@switch[0].enable_vlan=1
network.@switch[0].blinkrate=2
network.@switch[0].enable_vlan4k=1
network.@switch_vlan[0]=switch_vlan
network.@switch_vlan[0].device=rtl8366s
network.@switch_vlan[0].vlan=1
network.@switch_vlan[0].ports=0 1 5t
network.@switch_port[0]=switch_port
network.@switch_port[0].device=rtl8366s
network.@switch_port[0].port=1
network.@switch_port[0].led=6
network.@switch_port[1]=switch_port
network.@switch_port[1].device=rtl8366s
network.@switch_port[1].port=2
network.@switch_port[1].led=9
network.@switch_port[2]=switch_port
network.@switch_port[2].device=rtl8366s
network.@switch_port[2].port=5
network.@switch_port[2].led=2
network.@switch_vlan[1]=switch_vlan
network.@switch_vlan[1].device=rtl8366s
network.@switch_vlan[1].vlan=2
network.@switch_vlan[1].ports=3 5t
network.@switch_vlan[2]=switch_vlan
network.@switch_vlan[2].device=rtl8366s
network.@switch_vlan[2].vlan=3
network.@switch_vlan[2].ports=2
network.wan1=interface
network.wan1.proto=pppoe
network.wan1.username=name
network.wan1.password=pass
network.wan1.metric=10
network.wan1.up=1
network.wan1.connect_time=29
network.wan1.device=eth1
network.wan1.ifname=pppoe-wan1
network.wan2=interface
network.wan2.proto=pppoe
network.wan2.username=name
network.wan2.password=pass
network.wan2.metric=20
network.wan2.up=1
network.wan2.connect_time=26
network.wan2.device=eth0.2
network.wan2.ifname=pppoe-wan2
network.vpn=interface
network.vpn.proto=pptp
network.vpn.server=68.68.32.79
network.vpn.username=name
network.vpn.password=pass
network.vpn.mtu=1450
network.vpn.metric=30
network.vpn.up=1
network.vpn.connect_time=403
network.vpn.ifname=pptp-vpn</code></pre></div><p>Some more thing I&#039;d say is that the network outputs do not change when the pptp connect via different wan. Actually I am not sure which pppoe-wan* does the pptp-vpn use if I don&#039;t use routetrace. And when the two pppoe-wan interfaces are activated, pptp link is quite unstable. If I delete one pppoe-wan interface, the pptp link works much better.</p><p>So I guess the unstable problem may be due to the vpn control packets sometimes goes to wan1 and sometimes wan2. just guess. because it seems not clear about the default gateway.</p><p>And this is the output from &quot;route -n&quot;</p><div class="codebox"><pre><code>Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
0.0.0.0         68.68.36.129    0.0.0.0         UG    0      0        0 pptp-vpn
0.0.0.0         111.173.20.1    0.0.0.0         UG    10     0        0 pppoe-wan1
0.0.0.0         219.139.228.1   0.0.0.0         UG    20     0        0 pppoe-wan2
68.68.32.79     111.173.20.1    255.255.255.255 UGH   10     0        0 pppoe-wan1
68.68.32.79     219.139.228.1   255.255.255.255 UGH   20     0        0 pppoe-wan2
68.68.36.129    0.0.0.0         255.255.255.255 UH    0      0        0 pptp-vpn
111.173.20.1    0.0.0.0         255.255.255.255 UH    0      0        0 pppoe-wan1
192.168.1.0     0.0.0.0         255.255.255.0   U     0      0        0 br-lan
219.139.228.1   0.0.0.0         255.255.255.255 UH    0      0        0 pppoe-wan2</code></pre></div>											<p class="post-edited">(Last edited by <strong>toogle</strong> on 2 May 2013, 15:41)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200429">
				<div class="post-metadata">
					<div class="post-num">Post #240</div>
					<div class="post-author">arfett</div>
					<div class="post-datetime">
						2 May 2013, 15:38					</div>
				</div>
				<div class="post-content content">
					<p>Are you able to put a metric on the vpn interface? What did your mwan3 config look like?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200432">
				<div class="post-metadata">
					<div class="post-num">Post #241</div>
					<div class="post-author">toogle</div>
					<div class="post-datetime">
						2 May 2013, 15:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arfett wrote:</cite><blockquote><p>Are you able to put a metric on the vpn interface? What did your mwan3 config look like?</p></blockquote></div><p>the three interfaces use different metric<br/>10 20 30</p><p>mwan3 configure rules only for simple test first,&nbsp; wan1 only wan2 only vpn only.</p><p>since my network may stop work if I configured vpn and multiple wan.</p><p>currently I delete wan2 and vpn interfaces.</p><p>I can try to reconfigure as you recommended.</p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200440">
				<div class="post-metadata">
					<div class="post-num">Post #242</div>
					<div class="post-author">arfett</div>
					<div class="post-datetime">
						2 May 2013, 16:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>toogle wrote:</cite><blockquote><div class="quotebox"><cite>arfett wrote:</cite><blockquote><p>Are you able to put a metric on the vpn interface? What did your mwan3 config look like?</p></blockquote></div><p>the three interfaces use different metric<br/>10 20 30</p><p>mwan3 configure rules only for simple test first,&nbsp; wan1 only wan2 only vpn only.</p><p>since my network may stop work if I configured vpn and multiple wan.</p><p>currently I delete wan2 and vpn interfaces.</p><p>I can try to reconfigure as you recommended.</p><p>Thanks</p></blockquote></div><p>The metric on the vpn route shows 0<br/>0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;68.##.##.###&nbsp; &nbsp; 0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;UG&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 0 pptp-vpn</p><p>Assuming your vpn is connecting on the correct physical interface I don&#039;t see why the mwan3 rules wouldn&#039;t work correctly. You just have to ensure the names you give the mwan3 interfaces directly matches the interface names from the network config. I believe the case of the letters matters so make sure they match in /etc/config/network and /etc/config/mwan3.</p>											<p class="post-edited">(Last edited by <strong>arfett</strong> on 2 May 2013, 16:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200443">
				<div class="post-metadata">
					<div class="post-num">Post #243</div>
					<div class="post-author">toogle</div>
					<div class="post-datetime">
						2 May 2013, 18:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arfett wrote:</cite><blockquote><p>The metric on the vpn route shows 0<br/>0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;68.##.##.###&nbsp; &nbsp; 0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;UG&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 0 pptp-vpn</p><p>Assuming your vpn is connecting on the correct physical interface I don&#039;t see why the mwan3 rules wouldn&#039;t work correctly. You just have to ensure the names you give the mwan3 interfaces directly matches the interface names from the network config. I believe the case of the letters matters so make sure they match in /etc/config/network and /etc/config/mwan3.</p></blockquote></div><p>I am afraid the assumption does not hold.&nbsp; My vpn seems not working correctly with two pppoe-wan interfaces. I first suppose I can use mwan3 to let the pptp-vpn interface to be set up through one of the two pppoe-wan interfaces and then use mwan3 again, to do policy routing between vpn and the other pppoe-wan.</p><p>However I found mwan3 first need interfaces already well configured, and then define the rules. when I add the new pptp interface, I just can&#039;t control the tunnel&#039;s routing path.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200477">
				<div class="post-metadata">
					<div class="post-num">Post #244</div>
					<div class="post-author">arfett</div>
					<div class="post-datetime">
						2 May 2013, 23:16					</div>
				</div>
				<div class="post-content content">
					<p>It is possible to route the router&#039;s own traffic using policies. Previously you needed to create an alias for your loopback interface and it&#039;s discussed somewhere between pages 1-3. I think this method has been replaced by the new experimental note mentioned in the first post. Could you not do this and then create a rule for esp/vpn traffic destined to the remote VPN endpoint out one of your WAN ports to do what you want? If you track the VPN tunnel then mwan3 should add the appropriate rules/routes once it is available.</p><p>Any traffic that matches a rule will be blackholed if the configured policy can&#039;t be used so it shouldn&#039;t use the unwanted WAN if the other one is not available yet.</p>											<p class="post-edited">(Last edited by <strong>arfett</strong> on 2 May 2013, 23:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200550">
				<div class="post-metadata">
					<div class="post-num">Post #245</div>
					<div class="post-author">biatche</div>
					<div class="post-datetime">
						3 May 2013, 15:35					</div>
				</div>
				<div class="post-content content">
					<p>arfett:</p><p>do you have any idea why this happens?:<br/><a href="https://forum.openwrt.org/viewtopic.php?pid=200162#p200162">https://forum.openwrt.org/viewtopic.php?pid=200162#p200162</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200712">
				<div class="post-metadata">
					<div class="post-num">Post #246</div>
					<div class="post-author">Thomymaster</div>
					<div class="post-datetime">
						4 May 2013, 23:26					</div>
				</div>
				<div class="post-content content">
					<p>Hi</p><br/><p>I tried to install the mwan3 package from 22.04.2013 (mwan3_1.1-10_ar71xx.ipk) but the installation failed with:</p><div class="codebox"><pre><code>root@gateway:/tmp# opkg install mwan3_1.1-10_ar71xx.ipk
Installing mwan3 (1.1-10) to root...
Collected errors:
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for mwan3:
 *      ip *
 * opkg_install_cmd: Cannot install package mwan3.</code></pre></div><br/><p>Is there an error in the package, or can somebody give me the latest binary for this target (ar71xx -&gt; TP-Link WDR4300)?</p><p>Cheers</p><p>Thomy</p>											<p class="post-edited">(Last edited by <strong>Thomymaster</strong> on 4 May 2013, 23:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200717">
				<div class="post-metadata">
					<div class="post-num">Post #247</div>
					<div class="post-author">arfett</div>
					<div class="post-datetime">
						5 May 2013, 01:00					</div>
				</div>
				<div class="post-content content">
					<p>try these?</p><p><a href="http://www.mediafire.com/?92o06oyjknobl0n,k5c5xop2q9ru1vd">http://www.mediafire.com/?92o06oyjknobl0n,k5c5xop2q9ru1vd</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200728">
				<div class="post-metadata">
					<div class="post-num">Post #248</div>
					<div class="post-author">Thomymaster</div>
					<div class="post-datetime">
						5 May 2013, 02:22					</div>
				</div>
				<div class="post-content content">
					<p>Same problem with these binaries (same error message) <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad"/></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200729">
				<div class="post-metadata">
					<div class="post-num">Post #249</div>
					<div class="post-author">arfett</div>
					<div class="post-datetime">
						5 May 2013, 02:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Thomymaster wrote:</cite><blockquote><p>Same problem with these binaries (same error message) <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad"/></p></blockquote></div><p>I just installed them on my 3700v2. Don&#039;t see why it wouldn&#039;t work on any other AR7161 router.</p><p>Just download the files from github and SCP them to the router.</p><p>scp -r ./files/* root@192.168.1.1:/</p><p>Run that from mwan3 and mwan3-luci directory. Replace the IP with your router&#039;s LAN IP.</p>											<p class="post-edited">(Last edited by <strong>arfett</strong> on 5 May 2013, 05:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200782">
				<div class="post-metadata">
					<div class="post-num">Post #250</div>
					<div class="post-author">Thomymaster</div>
					<div class="post-datetime">
						5 May 2013, 12:59					</div>
				</div>
				<div class="post-content content">
					<p>OK i havent tried this yet, what i am concerned about is if there is an error in the package (look at the error message above).</p><br/><p>What i forget to say is that the error appeared after upgrading from 12.01rc1 to 12.09 release</p>											<p class="post-edited">(Last edited by <strong>Thomymaster</strong> on 5 May 2013, 15:48)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 10 of 65</div><nav><ul><li><a href="viewtopic.php%3Fid=39052&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=39052&amp;p=8.html">8</a></li><li><a href="viewtopic.php%3Fid=39052&amp;p=9.html">9</a></li><li class="pagination-current"><span>10</span></li><li><a href="viewtopic.php%3Fid=39052&amp;p=11.html">11</a></li><li><a href="viewtopic.php%3Fid=39052&amp;p=12.html">12</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=39052&amp;p=65.html">65</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>