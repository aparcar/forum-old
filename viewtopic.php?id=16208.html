<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Extreme latencies: WRT54GL (sta) -&gt; WRT54G (ap)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 27 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p70446">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">jdobbelsteen</div>
					<div class="post-datetime">
						4 Jul 2008, 02:42					</div>
				</div>
				<div class="post-content content">
					<p>Dear,</p><p>I&#039;m having some trouble getting two WRT54Gs to communicate WITH acceptable latencies. In fact, setting up the connection itself was a really smooth and went a LOT quicker than I had initially expected (within half an hour from unpacking the box to client mode). Nice job done to those who deserve this!</p><p>However these seems to be one lingering issue that should be solved before the solution becomes workable: The latencies (using simple ping) vary wildly between 50 to 600 ms, with over 200 ms average. Interactive traffic becomes (quite) unworkable this way. My setup is described below, including config files.</p><p>I have the impression that the &quot;wlan led&quot; on the AP is more busy than on the client. I don&#039;t dare to draw conclusions as its different hardware after all.&nbsp; Could it be that the client is scanning a bit too much or is it just the encryption being done? Or anything else?</p><p>Does anyone have pointers or advice how to troubleshoot this problem?</p><p>- Joris</p><p>==== Access point<br />Linksys WRT54G v2.2 (216 MHz). Kamikaze 7.07.<br />Single SSID: &quot;Joris2k&quot;, using psk (WPA, not WPA2).<br />Has been working for ages, no issues whatsoever over the years.</p><p>==== Laptop<br />IBM T60 Laptop with Intel wireless. Latencies are &lt;1ms, but some spikes well below 100ms.<br />Dell with Intel wireless. Latencies are same as IBM T60.</p><p>==== AP Client<br />Linksys WRT54GL v1.1 (199 MHz). Kamikaze 7.09.<br />New box, communication works fine.</p><p>== Client config:<br />config wifi-device&nbsp; wl0<br />&nbsp; &nbsp; &nbsp; &nbsp; option type&nbsp; &nbsp; &nbsp;broadcom<br />&nbsp; &nbsp; &nbsp; &nbsp; option channel&nbsp; 3</p><p>&nbsp; &nbsp; &nbsp; &nbsp; # REMOVE THIS LINE TO ENABLE WIFI:<br />#&nbsp; &nbsp; &nbsp; &nbsp;option disabled 0</p><p>config wifi-iface<br />&nbsp; &nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp;wl0<br />&nbsp; &nbsp; &nbsp; &nbsp; option network&nbsp; lan<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode&nbsp; &nbsp; &nbsp;sta<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid&nbsp; &nbsp; &nbsp;Joris2k<br />&nbsp; &nbsp; &nbsp; &nbsp; option hidden&nbsp; &nbsp;0<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption&nbsp; &nbsp; &nbsp; &nbsp;psk<br />&nbsp; &nbsp; &nbsp; &nbsp; option key&nbsp; &nbsp; &nbsp; &lt;Something&gt;</p><p>== iwconfig<br />wl0&nbsp; &nbsp; &nbsp; &nbsp;IEEE 802.11-DS&nbsp; ESSID:&quot;Joris2k&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Mode:Repeater&nbsp; Frequency:2.422 GHz&nbsp; Access Point: 00:13:10:92:CE:8E<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Tx-Power:19 dBm<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RTS thr:2347 B&nbsp; &nbsp;Fragment thr:2346 B<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Encryption key:off<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Link Signal level:-31 dBm&nbsp; Noise level:-97 dBm<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rx invalid nwid:0&nbsp; Rx invalid crypt:0&nbsp; Rx invalid frag:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Tx excessive retries:1&nbsp; Invalid misc:0&nbsp; &nbsp;Missed beacon:0</p><p>== ps<br />&nbsp; PID&nbsp; Uid&nbsp; &nbsp; &nbsp;VmSize Stat Command<br />&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp; &nbsp; 400 S&nbsp; &nbsp;init<br />&nbsp; &nbsp; 2 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [keventd]<br />&nbsp; &nbsp; 3 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SWN [ksoftirqd_CPU0]<br />&nbsp; &nbsp; 4 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [kswapd]<br />&nbsp; &nbsp; 5 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [bdflush]<br />&nbsp; &nbsp; 6 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [kupdated]<br />&nbsp; &nbsp; 8 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [mtdblockd]<br />&nbsp; &nbsp;53 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SWN [jffs2_gcd_mtd4]<br />&nbsp; &nbsp;68 root&nbsp; &nbsp; &nbsp; &nbsp; 412 S&nbsp; &nbsp;logger -s -p 6 -t<br />&nbsp; &nbsp;70 root&nbsp; &nbsp; &nbsp; &nbsp; 404 S&nbsp; &nbsp;init<br />&nbsp; &nbsp;92 root&nbsp; &nbsp; &nbsp; &nbsp; 396 S&nbsp; &nbsp;syslogd -C16<br />&nbsp; 101 root&nbsp; &nbsp; &nbsp; &nbsp; 376 S&nbsp; &nbsp;klogd<br />&nbsp; 283 root&nbsp; &nbsp; &nbsp; &nbsp; 376 S&nbsp; &nbsp;crond -c /etc/crontabs<br />&nbsp; 287 root&nbsp; &nbsp; &nbsp; &nbsp; 416 S&nbsp; &nbsp;/usr/sbin/dropbear -p 22<br />&nbsp; 294 root&nbsp; &nbsp; &nbsp; &nbsp; 392 S&nbsp; &nbsp;httpd -p 80 -h /www -r OpenWrt<br />&nbsp; 298 root&nbsp; &nbsp; &nbsp; &nbsp; 596 S&nbsp; &nbsp;/usr/sbin/dropbear -p 22<br />&nbsp; 299 root&nbsp; &nbsp; &nbsp; &nbsp; 580 S&nbsp; &nbsp;-ash<br />&nbsp; 309 root&nbsp; &nbsp; &nbsp; &nbsp; 608 S&nbsp; &nbsp;/usr/sbin/dropbear -p 22<br />&nbsp; 310 root&nbsp; &nbsp; &nbsp; &nbsp; 588 S&nbsp; &nbsp;-ash<br />&nbsp; 395 root&nbsp; &nbsp; &nbsp; &nbsp; 412 R&nbsp; &nbsp;ps</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70458">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jdobbelsteen</div>
					<div class="post-datetime">
						4 Jul 2008, 11:53					</div>
				</div>
				<div class="post-content content">
					<p>Somewhere during the night something has happened to the box (noticed SSH connection was gone). At least now the connection latencies are normal and even more stable than from my laptop. Strange situation...</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>