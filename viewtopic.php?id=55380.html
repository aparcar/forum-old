<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> unable to ssh from wan to router, works for other lan devices</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p263005">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">alirz</div>
					<div class="post-datetime">
						27 Jan 2015, 01:42					</div>
				</div>
				<div class="post-content content">
					<p>Im running openwrt (chadster&#039;s original old release) on a WRT1900ac router.<br />SSh is enabled on the router. I can ssh to it from the lan.<br />My port forwarding rules are also good. if i point that rule to another linux computer, my ssh from wan side takes me to that linux computer.<br />However when i set the rule to port forwards 22 to my router IP, it doesnt work from wan side. I get a &quot;connection refused&quot; error<br />any ideas please?<br />this is the rule by the way:</p><p>config redirect<br />&nbsp; &nbsp; &nbsp; &nbsp; option target &#039;DNAT&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option src &#039;wan&#039;&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option dest &#039;lan&#039;&nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option dest_port &#039;22&#039; <br />&nbsp; &nbsp; &nbsp; &nbsp; option name &#039;router ssh&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;tcp udp&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option src_dport &#039;22&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option dest_ip &#039;192.168.1.150&#039;</p>											<p class="post-edited">(Last edited by <strong>alirz</strong> on 27 Jan 2015, 01:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263028">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jaromanda</div>
					<div class="post-datetime">
						27 Jan 2015, 03:12					</div>
				</div>
				<div class="post-content content">
					<p>Port forwarding is the clue why it works when you forward the port to another machine, as opposed to not forwarding it at all - which is what you are trying to do.</p><p>what you need to do is enable WAN access to SSHd on the router - not in front of my router at the moment, I think it&#039;s dropbear configuration, but I can&#039;t recall where that is.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263029">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">alirz</div>
					<div class="post-datetime">
						27 Jan 2015, 03:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jaromanda wrote:</cite><blockquote><p>Port forwarding is the clue why it works when you forward the port to another machine, as opposed to not forwarding it at all - which is what you are trying to do.</p><p>what you need to do is enable WAN access to SSHd on the router - not in front of my router at the moment, I think it&#039;s dropbear configuration, but I can&#039;t recall where that is.</p></blockquote></div><br /><p>yup thank. I had figured it out.</p><p>i posted the solution int he wrt1900ac thread.Basically as you said. had to allow ssh from wan in the firewall config</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>