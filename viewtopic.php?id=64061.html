<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> router with 2 access points - howto extend guest wlan</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 15 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p318858">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">completelyClueless</div>
					<div class="post-datetime">
						9 Apr 2016, 16:35					</div>
				</div>
				<div class="post-content content">
					<p>hi</p><p>i managed to configure a guest wlan on my main router and want to extend this guest wlan with my 2 access points (WR841N v10 running 15.05).</p><p>WLAN &quot;internal&quot;:&nbsp; 192.168.1.0/24<br />WLAN &quot;guest&quot;:&nbsp; &nbsp; &nbsp;192.168.2.0/24</p><p>my main router (WDR4300 running 15.05) has the IP 192.168.1.1 - his guest interface the IP 192168.2.1<br />the DHCP server on both access points is disabled (DHCP shall be managed by main router)</p><p>I&#039;ve added the guest interface to the access points (hosting both WLANs each) and entered the main router&#039;s IP in the field for the IPv4 gateway (already tried 192.168.1.1 and 192.168.2.1) - but the clients connecting via WLAN &quot;guest&quot; to one of the accesspoints do net get an IP from the main router.<br />Even if I start a DHCP server on the accesspoints (no overlapping of IP ranges) the clients get an IP, but they cannot access the Internet (zone WAN on main router)</p><p>Is it necessary to configure additional firewall rules on the main router ?<br />How can I configure that all guest clients get an IP from the guest-net and can reach the internet (no access to internal LAN/WLAN) ?</p><p>Any help is appreciated<br />Thx</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p318886">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">eas</div>
					<div class="post-datetime">
						9 Apr 2016, 20:31					</div>
				</div>
				<div class="post-content content">
					<p>Its not clear to me what you are actually doing.</p><p>How are the access points connected to the main router?&nbsp; Wired connection? Wireless/WDS bridge?</p><p>I suggest posting /etc/config/network and /etc/config/wireless (with your pass phrases removed).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p319131">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">completelyClueless</div>
					<div class="post-datetime">
						11 Apr 2016, 16:11					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>the access points have a wired connection to the (unmanaged) switch and from there to the main router like this:</p><p>---- Internet Modem --- MainRouter --- Switch --- Access Point 1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;--- Access Point 2</p><p>The &quot;roaming&quot; between the accesspoints for the internal WLAN works without problems (DHCP received by main router, etc.).</p><p>The guest WLAN was established according to the description in the Wiki <a href="https://wiki.openwrt.org/doc/recipes/guest-wlan-webinterface">https://wiki.openwrt.org/doc/recipes/gu â€¦ binterface</a>. From the MainRouter&#039;s point of view it works correctly.</p><p>How is it possible to get an IP from the DHCP server running on the MainRouter when connecting to one of the access points via the guest WLAN ?</p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p319134">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Max Hopper</div>
					<div class="post-datetime">
						11 Apr 2016, 16:34					</div>
				</div>
				<div class="post-content content">
					<p>Write a firewall rule to forward the DHCP-DISCOVER packets (and then the STA will be on the private LAN).</p><p>But then again, the last <a href="https://wiki.openwrt.org/doc/recipes/guest-wlan-webinterface">sentences</a> in the <strong>Guest DNS</strong> and <strong>Guest DHCP</strong> definitions were in all likelihood, ignored</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>