<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> openwrt mount hdd 3TB</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 2 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p355981">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Anson</div>
					<div class="post-datetime">
						11 Apr 2017, 06:02					</div>
				</div>
				<div class="post-content content">
					<p>Router: DIR 825 vB<br />firmware:15.05 or 15.05.1<br />HDD: 3TB, ext3 or ext4</p><p>I mount 3TB hdd, but it&#039;s always read-only! How to solve it ?</p><div class="codebox"><pre><code>root@OpenWrt:~# 
root@OpenWrt:~# mount
rootfs on / type rootfs (rw)
/dev/root on /rom type squashfs (ro,relatime)
proc on /proc type proc (rw,noatime)
sysfs on /sys type sysfs (rw,noatime)
tmpfs on /tmp type tmpfs (rw,nosuid,nodev,noatime)
/dev/mtdblock5 on /overlay type jffs2 (rw,noatime)
overlayfs:/overlay on / type overlay (rw,noatime,lowerdir=/,upperdir=/overlay/upper,workdir=/overlay/work)
tmpfs on /dev type tmpfs (rw,relatime,size=512k,mode=755)
devpts on /dev/pts type devpts (rw,relatime,mode=600)
debugfs on /sys/kernel/debug type debugfs (rw,noatime)
[color=red]/dev/sda1 on /mnt/hdd type ext4 (ro,relatime,stripe=8191,data=ordered)[/color]
/dev/sda2 on /mnt/hdd2 type ext4 (ro,relatime,stripe=8191,data=ordered)
root@OpenWrt:~# 
root@OpenWrt:~# umount /dev/sda1
root@OpenWrt:~# mount
rootfs on / type rootfs (rw)
/dev/root on /rom type squashfs (ro,relatime)
proc on /proc type proc (rw,noatime)
sysfs on /sys type sysfs (rw,noatime)
tmpfs on /tmp type tmpfs (rw,nosuid,nodev,noatime)
/dev/mtdblock5 on /overlay type jffs2 (rw,noatime)
overlayfs:/overlay on / type overlay (rw,noatime,lowerdir=/,upperdir=/overlay/upper,workdir=/overlay/work)
tmpfs on /dev type tmpfs (rw,relatime,size=512k,mode=755)
devpts on /dev/pts type devpts (rw,relatime,mode=600)
debugfs on /sys/kernel/debug type debugfs (rw,noatime)
/dev/sda2 on /mnt/hdd2 type ext4 (ro,relatime,stripe=8191,data=ordered)
root@OpenWrt:~# 
root@OpenWrt:~# mount /dev/sda1 /mnt/hdd
root@OpenWrt:~# 
root@OpenWrt:~# mount
rootfs on / type rootfs (rw)
/dev/root on /rom type squashfs (ro,relatime)
proc on /proc type proc (rw,noatime)
sysfs on /sys type sysfs (rw,noatime)
tmpfs on /tmp type tmpfs (rw,nosuid,nodev,noatime)
/dev/mtdblock5 on /overlay type jffs2 (rw,noatime)
overlayfs:/overlay on / type overlay (rw,noatime,lowerdir=/,upperdir=/overlay/upper,workdir=/overlay/work)
tmpfs on /dev type tmpfs (rw,relatime,size=512k,mode=755)
devpts on /dev/pts type devpts (rw,relatime,mode=600)
debugfs on /sys/kernel/debug type debugfs (rw,noatime)
/dev/sda2 on /mnt/hdd2 type ext4 (ro,relatime,stripe=8191,data=ordered)
[color=red]/dev/sda1 on /mnt/hdd type ext4 (rw,relatime,stripe=8191,data=ordered)[/color]
root@OpenWrt:~# 
root@OpenWrt:~# ls -la /mnt/hdd
drwxrwxrwx    5 root     root          4096 Apr  4 13:48 .
drwxr-xr-x    1 root     root             0 Apr  4 20:22 ..
drwxrwxr-x    2 999      999           4096 Apr  4 13:47 Untitled Folder
drwxrwxr-x    2 999      999           4096 Apr  4 13:48 chenzs
drwx------    2 root     root         16384 Apr  4 13:43 lost+found
root@OpenWrt:~# 
root@OpenWrt:~# mkdir /mnt/hdd/chenzs-test
[color=red]mkdir: can&#039;t create directory &#039;/mnt/hdd/chenzs-test&#039;: Read-only file system[/color]
root@OpenWrt:~# 
root@OpenWrt:~# mount
rootfs on / type rootfs (rw)
/dev/root on /rom type squashfs (ro,relatime)
proc on /proc type proc (rw,noatime)
sysfs on /sys type sysfs (rw,noatime)
tmpfs on /tmp type tmpfs (rw,nosuid,nodev,noatime)
/dev/mtdblock5 on /overlay type jffs2 (rw,noatime)
overlayfs:/overlay on / type overlay (rw,noatime,lowerdir=/,upperdir=/overlay/upper,workdir=/overlay/work)
tmpfs on /dev type tmpfs (rw,relatime,size=512k,mode=755)
devpts on /dev/pts type devpts (rw,relatime,mode=600)
debugfs on /sys/kernel/debug type debugfs (rw,noatime)
/dev/sda2 on /mnt/hdd2 type ext4 (ro,relatime,stripe=8191,data=ordered)
[color=red]/dev/sda1 on /mnt/hdd type ext4 (ro,relatime,stripe=8191,data=ordered)[/color]
root@OpenWrt:~# </code></pre></div><br /><div class="codebox"><pre><code>Tue Apr 11 10:54:58 2017 authpriv.info dropbear[1434]: Child connection from 192.168.7.232:53847
Tue Apr 11 10:54:59 2017 authpriv.notice dropbear[1434]: Password auth succeeded for &#039;root&#039; from 192.168.7.232:53847
Tue Apr 11 10:55:17 2017 kern.crit kernel: [46326.010000] EXT4-fs error (device sda1): ext4_put_super:789: Couldn&#039;t clean up the journal
Tue Apr 11 10:55:37 2017 kern.err kernel: [46346.950000] EXT4-fs (sda1): couldn&#039;t mount as ext3 due to feature incompatibilities
Tue Apr 11 10:55:37 2017 kern.err kernel: [46346.960000] EXT4-fs (sda1): couldn&#039;t mount as ext2 due to feature incompatibilities
Tue Apr 11 10:55:38 2017 kern.warn kernel: [46347.010000] EXT4-fs warning (device sda1): ext4_clear_journal_err:4659: Filesystem error recorded from previous mount: IO failure
Tue Apr 11 10:55:38 2017 kern.warn kernel: [46347.020000] EXT4-fs warning (device sda1): ext4_clear_journal_err:4660: Marking fs in need of filesystem check.
Tue Apr 11 10:55:38 2017 kern.warn kernel: [46347.050000] EXT4-fs (sda1): warning: mounting fs with errors, running e2fsck is recommended
Tue Apr 11 10:55:38 2017 kern.info kernel: [46347.430000] EXT4-fs (sda1): recovery complete
Tue Apr 11 10:55:38 2017 kern.info kernel: [46347.440000] EXT4-fs (sda1): mounted filesystem with ordered data mode. Opts: (null)
Tue Apr 11 10:55:46 2017 kern.info kernel: [46355.700000] sd 0:0:0:0: [sda]  
Tue Apr 11 10:55:46 2017 kern.warn kernel: [46355.700000] Result: hostbyte=0x00 driverbyte=0x08
Tue Apr 11 10:55:46 2017 kern.info kernel: [46355.700000] sd 0:0:0:0: [sda]  
Tue Apr 11 10:55:46 2017 kern.warn kernel: [46355.710000] Sense Key : 0x5 [current] 
Tue Apr 11 10:55:46 2017 kern.info kernel: [46355.710000] sd 0:0:0:0: [sda]  
Tue Apr 11 10:55:46 2017 kern.warn kernel: [46355.710000] ASC=0x24 ASCQ=0x0
Tue Apr 11 10:55:46 2017 kern.info kernel: [46355.720000] sd 0:0:0:0: [sda] CDB: 
Tue Apr 11 10:55:46 2017 kern.warn kernel: [46355.720000] cdb[0]=0x2a: 2a 08 07 40 81 03 00 00 01 00
Tue Apr 11 10:55:46 2017 kern.err kernel: [46355.730000] blk_update_request: critical target error, dev sda, sector 973342744
Tue Apr 11 10:55:46 2017 kern.err kernel: [46355.730000] blk_update_request: critical target error, dev sda, sector 973342744
Tue Apr 11 10:55:46 2017 kern.err kernel: [46355.740000] Aborting journal on device sda1-8.
Tue Apr 11 10:55:47 2017 kern.crit kernel: [46356.360000] EXT4-fs error (device sda1): ext4_journal_check_start:56: Detected aborted journal
Tue Apr 11 10:55:47 2017 kern.crit kernel: [46356.360000] EXT4-fs (sda1): Remounting filesystem read-only</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p355989">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						11 Apr 2017, 08:22					</div>
				</div>
				<div class="post-content content">
					<p>Clean up the filesystem errors, or simply reformat the drive.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p355993">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						11 Apr 2017, 10:06					</div>
				</div>
				<div class="post-content content">
					<p>With the drive unmounted, execute &quot;fsck /dev/sda1&quot;.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p356140">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Anson</div>
					<div class="post-datetime">
						13 Apr 2017, 04:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>tmo26 wrote:</cite><blockquote><p>Clean up the filesystem errors, or simply reformat the drive.</p></blockquote></div><p>I tried, no effect</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p356141">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Anson</div>
					<div class="post-datetime">
						13 Apr 2017, 04:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>eduperez wrote:</cite><blockquote><p>With the drive unmounted, execute &quot;fsck /dev/sda1&quot;.</p></blockquote></div><p>I tried, no effect</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p356153">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						13 Apr 2017, 09:27					</div>
				</div>
				<div class="post-content content">
					<p>Your drive seems to have some &quot;broken&quot; sectors, on the hardware level:<br /></p><div class="quotebox"><blockquote><p>Tue Apr 11 10:55:46 2017 kern.err kernel: [46355.730000] blk_update_request: critical target error, dev sda, sector 973342744</p></blockquote></div><p>Can you format the drive and <span class="bbu">lose the contents</span>? I would check the drive using &quot;badblocks&quot;, activating the (<span class="bbu">destructive</span>) read-write option; this will probably force the drive to remap any bad sector, or at least inform us of any unrecoverable error:<br /></p><div class="codebox"><pre><code>badblocks -wsv /dev/sda</code></pre></div>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>