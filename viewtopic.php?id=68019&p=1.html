<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> MT7628 :  VFS: Cannot open root device &quot;(null)&quot; or unknown-block(0,0)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 31 Mar 2018 and 27 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=68019&amp;p=2.html">2</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p340838">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">liveonlinux</div>
					<div class="post-datetime">
						11 Oct 2016, 11:16					</div>
				</div>
				<div class="post-content content">
					<p>Hi, everyone!</p><p>The router uses MT7628+MT7610 solution, 32MB MX25L25635FMI SPI flash, openwrt_chaos_calmer_v15.05 sdk.<br />It failed to boot. Please help me.<br />The serial port prints information as follows:</p><p>----------------------------------------------------------------------------------------</p><p>[04020C09][04020C07]<br />DDR Calibration DQS reg = 00008485</p><br /><p>U-Boot 1.1.3 (Apr 18 2016 - 16:33:25)</p><p>Board: Ralink APSoC DRAM:&nbsp; 64 MB<br />relocate_code Pointer at: 83fb8000<br />flash manufacture id: c2, device id 20 19<br />find flash: MX25L25635E<br />*** Warning - bad CRC, using default environment</p><p>============================================ <br />Ralink UBoot Version: 4.3.0.0<br />-------------------------------------------- <br />ASIC 7628_MP (Port5&lt;-&gt;None)<br />DRAM component: 512 Mbits DDR, width 16<br />DRAM bus: 16 bit<br />Total memory: 64 MBytes<br />Flash component: SPI Flash<br />Date:Apr 18 2016&nbsp; Time:16:33:25<br />============================================ <br />icache: sets:512, ways:4, linesz:32 ,total:65536<br />dcache: sets:256, ways:4, linesz:32 ,total:32768 </p><p> ##### The CPU freq = 575 MHZ #### <br /> estimate memory size =64 Mbytes<br />RESET MT7628 PHY!!!!!!<br />Please choose the operation: <br />&nbsp; &nbsp;1: Load system code to SDRAM via TFTP. <br />&nbsp; &nbsp;2: Load system code then write to Flash via TFTP. <br />&nbsp; &nbsp;3: Boot system code via Flash (default).<br />&nbsp; &nbsp;4: Entr boot command line interface.<br />&nbsp; &nbsp;7: Load Boot Loader code then write to Flash via Serial. <br />&nbsp; &nbsp;9: Load Boot Loader code then write to Flash via TFTP. <br /> 0 <br />&nbsp; &nbsp;<br />3: System Boot system code via Flash.<br />## Booting image at bc050000 ...<br />&nbsp; &nbsp;Image Name:&nbsp; &nbsp;MIPS OpenWrt Linux-3.18.27<br />&nbsp; &nbsp;Image Type:&nbsp; &nbsp;MIPS Linux Kernel Image (lzma compressed)<br />&nbsp; &nbsp;Data Size:&nbsp; &nbsp; 1138035 Bytes =&nbsp; 1.1 MB<br />&nbsp; &nbsp;Load Address: 80000000<br />&nbsp; &nbsp;Entry Point:&nbsp; 80000000<br />&nbsp; &nbsp;Verifying Checksum ... OK<br />&nbsp; &nbsp;Uncompressing Kernel Image ... OK<br />No initrd<br />## Transferring control to Linux (at address 80000000) ...<br />## Giving linux memsize in MB, 64</p><p>Starting kernel ...</p><p>[&nbsp; &nbsp; 0.000000] Linux version 3.18.27 (wang@software) (gcc version 4.8.3 (OpenWrt/Linaro GCC 4.8-2014.04 r48925) ) #1 Wed Aug 24 18:18:13 CST 2016<br />[&nbsp; &nbsp; 0.000000] Board has DDR2<br />[&nbsp; &nbsp; 0.000000] Analog PMU set to hw control<br />[&nbsp; &nbsp; 0.000000] Digital PMU set to hw control<br />[&nbsp; &nbsp; 0.000000] SoC Type: MediaTek MT7628AN ver:1 eco:2<br />[&nbsp; &nbsp; 0.000000] bootconsole [early0] enabled<br />[&nbsp; &nbsp; 0.000000] CPU0 revision is: 00019655 (MIPS 24KEc)<br />[&nbsp; &nbsp; 0.000000] MIPS: machine is Mediatek MT7628AN evaluation board<br />[&nbsp; &nbsp; 0.000000] Determined physical RAM map:<br />[&nbsp; &nbsp; 0.000000]&nbsp; memory: 02000000 @ 00000000 (usable)<br />[&nbsp; &nbsp; 0.000000] Initrd not found or empty - disabling initrd<br />[&nbsp; &nbsp; 0.000000] Zone ranges:<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal&nbsp; &nbsp;[mem 0x00000000-0x01ffffff]<br />[&nbsp; &nbsp; 0.000000] Movable zone start for each node<br />[&nbsp; &nbsp; 0.000000] Early memory node ranges<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;node&nbsp; &nbsp;0: [mem 0x00000000-0x01ffffff]<br />[&nbsp; &nbsp; 0.000000] Initmem setup node 0 [mem 0x00000000-0x01ffffff]<br />[&nbsp; &nbsp; 0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.<br />[&nbsp; &nbsp; 0.000000] Primary data cache 32kB, 4-way, PIPT, no aliases, linesize 32 bytes<br />[&nbsp; &nbsp; 0.000000] Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 8128<br />[&nbsp; &nbsp; 0.000000] Kernel command line: console=ttyS0,57600 rootfstype=squashfs,jffs2<br />[&nbsp; &nbsp; 0.000000] PID hash table entries: 128 (order: -3, 512 bytes)<br />[&nbsp; &nbsp; 0.000000] Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)<br />[&nbsp; &nbsp; 0.000000] Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)<br />[&nbsp; &nbsp; 0.000000] Writing ErrCtl register=00036a3a<br />[&nbsp; &nbsp; 0.000000] Readback ErrCtl register=00036a3a<br />[&nbsp; &nbsp; 0.000000] Memory: 28880K/32768K available (2513K kernel code, 126K rwdata, 516K rodata, 164K init, 186K bss, 3888K reserved)<br />[&nbsp; &nbsp; 0.000000] SLUB: HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br />[&nbsp; &nbsp; 0.000000] NR_IRQS:256<br />[&nbsp; &nbsp; 0.000000] intc: using register map from devicetree<br />[&nbsp; &nbsp; 0.000000] CPU Clock: 575MHz<br />[&nbsp; &nbsp; 0.000000] clocksource_of_init: no matching clocksources found<br />[&nbsp; &nbsp; 0.000000] Calibrating delay loop... 380.92 BogoMIPS (lpj=1904640)<br />[&nbsp; &nbsp; 0.060000] pid_max: default: 32768 minimum: 301<br />[&nbsp; &nbsp; 0.060000] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.070000] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.080000] pinctrl core: initialized pinctrl subsystem<br />[&nbsp; &nbsp; 0.090000] NET: Registered protocol family 16<br />[&nbsp; &nbsp; 0.100000] rt2880-pinmux pinctrl: invalid group &quot;jtag&quot; for function &quot;gpio&quot;<br />[&nbsp; &nbsp; 0.120000] mt7621_gpio 10000600.gpio: registering 32 gpios<br />[&nbsp; &nbsp; 0.130000] mt7621_gpio 10000600.gpio: registering 32 gpios<br />[&nbsp; &nbsp; 0.140000] mt7621_gpio 10000600.gpio: registering 32 gpios<br />[&nbsp; &nbsp; 0.150000] Switched to clocksource MIPS<br />[&nbsp; &nbsp; 0.160000] NET: Registered protocol family 2<br />[&nbsp; &nbsp; 0.160000] TCP established hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.180000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.190000] TCP: Hash tables configured (established 1024 bind 1024)<br />[&nbsp; &nbsp; 0.200000] TCP: reno registered<br />[&nbsp; &nbsp; 0.210000] UDP hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.220000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.230000] NET: Registered protocol family 1<br />[&nbsp; &nbsp; 0.240000] futex hash table entries: 256 (order: -1, 3072 bytes)<br />[&nbsp; &nbsp; 0.270000] squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />[&nbsp; &nbsp; 0.280000] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.<br />[&nbsp; &nbsp; 0.310000] msgmni has been set to 56<br />[&nbsp; &nbsp; 0.310000] io scheduler noop registered<br />[&nbsp; &nbsp; 0.320000] io scheduler deadline registered (default)<br />[&nbsp; &nbsp; 0.330000] Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled<br />[&nbsp; &nbsp; 0.350000] console [ttyS0] disabled<br />[&nbsp; &nbsp; 0.350000] 10000c00.uartlite: ttyS0 at MMIO 0x10000c00 (irq = 28, base_baud = 2500000) is a 16550A<br />[&nbsp; &nbsp; 0.370000] console [ttyS0] enabled<br />[&nbsp; &nbsp; 0.370000] console [ttyS0] enabled<br />[&nbsp; &nbsp; 0.380000] bootconsole [early0] disabled<br />[&nbsp; &nbsp; 0.380000] bootconsole [early0] disabled<br />[&nbsp; &nbsp; 0.400000] spi-mt7621 10000b00.spi: sys_freq: 191666666<br />[&nbsp; &nbsp; 0.420000] m25p80 spi32766.0: found mx25l25635e, expected en25q64<br />[&nbsp; &nbsp; 0.430000] m25p80 spi32766.0: mx25l25635e (32768 Kbytes)<br />[&nbsp; &nbsp; 0.440000] m25p80 spi32766.0: using chunked io<br />[&nbsp; &nbsp; 0.450000] 4 ofpart partitions found on MTD device spi32766.0<br />[&nbsp; &nbsp; 0.460000] Creating 4 MTD partitions on &quot;spi32766.0&quot;:<br />[&nbsp; &nbsp; 0.470000] 0x000000000000-0x000000030000 : &quot;u-boot&quot;<br />[&nbsp; &nbsp; 0.480000] 0x000000030000-0x000000040000 : &quot;u-boot-env&quot;<br />[&nbsp; &nbsp; 0.490000] 0x000000040000-0x000000050000 : &quot;factory&quot;<br />[&nbsp; &nbsp; 0.500000] 0x000000050000-0x000000800000 : &quot;firmware&quot;<br />[&nbsp; &nbsp; 0.570000] ralink_soc_eth 10100000.ethernet: generated random MAC address 2a:c9:c8:4e:c3:65<br />[&nbsp; &nbsp; 0.590000] ralink_soc_eth 10100000.ethernet eth0: ralink at 0xb0100000, irq 5<br />[&nbsp; &nbsp; 0.600000] mt7621_wdt 10000120.watchdog: Initialized<br />[&nbsp; &nbsp; 0.610000] TCP: cubic registered<br />[&nbsp; &nbsp; 0.620000] NET: Registered protocol family 17<br />[&nbsp; &nbsp; 0.630000] bridge: automatic filtering via arp/ip/ip6tables has been deprecated. Update your scripts to load br_netfilter if you need this.<br />[&nbsp; &nbsp; 0.650000] 8021q: 802.1Q VLAN Support v1.8<br />[&nbsp; &nbsp; 0.670000] VFS: Cannot open root device &quot;(null)&quot; or unknown-block(0,0): error -6<br />[&nbsp; &nbsp; 0.680000] Please append a correct &quot;root=&quot; boot option; here are the available partitions:<br />[&nbsp; &nbsp; 0.700000] 1f00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;192 mtdblock0&nbsp; (driver?)<br />[&nbsp; &nbsp; 0.710000] 1f01&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 64 mtdblock1&nbsp; (driver?)<br />[&nbsp; &nbsp; 0.720000] 1f02&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 64 mtdblock2&nbsp; (driver?)<br />[&nbsp; &nbsp; 0.730000] 1f03&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 7872 mtdblock3&nbsp; (driver?)<br />[&nbsp; &nbsp; 0.740000] Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0)<br />[&nbsp; &nbsp; 0.740000] ---[ end Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0)</p>											<p class="post-edited">(Last edited by <strong>liveonlinux</strong> on 11 Oct 2016, 11:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p340839">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">liveonlinux</div>
					<div class="post-datetime">
						11 Oct 2016, 11:21					</div>
				</div>
				<div class="post-content content">
					<p>If I use another SPI flash,&nbsp; S25FL064PIF instead of MX25L25635FMI,&nbsp; the router can boot successfully. Serial port information as follows:</p><p>---------------------------------------------------------------------</p><p>[04020C09][04020C07]<br />DDR Calibration DQS reg = 00008485</p><br /><p>U-Boot 1.1.3 (Apr 18 2016 - 16:33:25)</p><p>Board: Ralink APSoC DRAM:&nbsp; 64 MB<br />relocate_code Pointer at: 83fb8000<br />flash manufacture id: 1, device id 2 16<br />find flash: FL064AIF<br />*** Warning - bad CRC, using default environment</p><p>============================================ <br />Ralink UBoot Version: 4.3.0.0<br />-------------------------------------------- <br />ASIC 7628_MP (Port5&lt;-&gt;None)<br />DRAM component: 512 Mbits DDR, width 16<br />DRAM bus: 16 bit<br />Total memory: 64 MBytes<br />Flash component: SPI Flash<br />Date:Apr 18 2016&nbsp; Time:16:33:25<br />============================================ <br />icache: sets:512, ways:4, linesz:32 ,total:65536<br />dcache: sets:256, ways:4, linesz:32 ,total:32768 </p><p> ##### The CPU freq = 575 MHZ #### <br /> estimate memory size =64 Mbytes<br />RESET MT7628 PHY!!!!!!<br />Please choose the operation: <br />&nbsp; &nbsp;1: Load system code to SDRAM via TFTP. <br />&nbsp; &nbsp;2: Load system code then write to Flash via TFTP. <br />&nbsp; &nbsp;3: Boot system code via Flash (default).<br />&nbsp; &nbsp;4: Entr boot command line interface.<br />&nbsp; &nbsp;7: Load Boot Loader code then write to Flash via Serial. <br />&nbsp; &nbsp;9: Load Boot Loader code then write to Flash via TFTP. <br /> 0 <br />&nbsp; &nbsp;<br />3: System Boot system code via Flash.<br />## Booting image at bc050000 ...<br />&nbsp; &nbsp;Image Name:&nbsp; &nbsp;MIPS OpenWrt Linux-3.18.27<br />&nbsp; &nbsp;Image Type:&nbsp; &nbsp;MIPS Linux Kernel Image (lzma compressed)<br />&nbsp; &nbsp;Data Size:&nbsp; &nbsp; 1138035 Bytes =&nbsp; 1.1 MB<br />&nbsp; &nbsp;Load Address: 80000000<br />&nbsp; &nbsp;Entry Point:&nbsp; 80000000<br />&nbsp; &nbsp;Verifying Checksum ... OK<br />&nbsp; &nbsp;Uncompressing Kernel Image ... OK<br />No initrd<br />## Transferring control to Linux (at address 80000000) ...<br />## Giving linux memsize in MB, 64</p><p>Starting kernel ...</p><p>[&nbsp; &nbsp; 0.000000] Linux version 3.18.27 (wang@software) (gcc version 4.8.3 (OpenWrt/Linaro GCC 4.8-2014.04 r48925) ) #1 Wed Aug 24 18:18:13 CST 2016<br />[&nbsp; &nbsp; 0.000000] Board has DDR2<br />[&nbsp; &nbsp; 0.000000] Analog PMU set to hw control<br />[&nbsp; &nbsp; 0.000000] Digital PMU set to hw control<br />[&nbsp; &nbsp; 0.000000] SoC Type: MediaTek MT7628AN ver:1 eco:2<br />[&nbsp; &nbsp; 0.000000] bootconsole [early0] enabled<br />[&nbsp; &nbsp; 0.000000] CPU0 revision is: 00019655 (MIPS 24KEc)<br />[&nbsp; &nbsp; 0.000000] MIPS: machine is Mediatek MT7628AN evaluation board<br />[&nbsp; &nbsp; 0.000000] Determined physical RAM map:<br />[&nbsp; &nbsp; 0.000000]&nbsp; memory: 02000000 @ 00000000 (usable)<br />[&nbsp; &nbsp; 0.000000] Initrd not found or empty - disabling initrd<br />[&nbsp; &nbsp; 0.000000] Zone ranges:<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal&nbsp; &nbsp;[mem 0x00000000-0x01ffffff]<br />[&nbsp; &nbsp; 0.000000] Movable zone start for each node<br />[&nbsp; &nbsp; 0.000000] Early memory node ranges<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;node&nbsp; &nbsp;0: [mem 0x00000000-0x01ffffff]<br />[&nbsp; &nbsp; 0.000000] Initmem setup node 0 [mem 0x00000000-0x01ffffff]<br />[&nbsp; &nbsp; 0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.<br />[&nbsp; &nbsp; 0.000000] Primary data cache 32kB, 4-way, PIPT, no aliases, linesize 32 bytes<br />[&nbsp; &nbsp; 0.000000] Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 8128<br />[&nbsp; &nbsp; 0.000000] Kernel command line: console=ttyS0,57600 rootfstype=squashfs,jffs2<br />[&nbsp; &nbsp; 0.000000] PID hash table entries: 128 (order: -3, 512 bytes)<br />[&nbsp; &nbsp; 0.000000] Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)<br />[&nbsp; &nbsp; 0.000000] Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)<br />[&nbsp; &nbsp; 0.000000] Writing ErrCtl register=00036a3a<br />[&nbsp; &nbsp; 0.000000] Readback ErrCtl register=00036a3a<br />[&nbsp; &nbsp; 0.000000] Memory: 28880K/32768K available (2513K kernel code, 126K rwdata, 516K rodata, 164K init, 186K bss, 3888K reserved)<br />[&nbsp; &nbsp; 0.000000] SLUB: HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br />[&nbsp; &nbsp; 0.000000] NR_IRQS:256<br />[&nbsp; &nbsp; 0.000000] intc: using register map from devicetree<br />[&nbsp; &nbsp; 0.000000] CPU Clock: 575MHz<br />[&nbsp; &nbsp; 0.000000] clocksource_of_init: no matching clocksources found<br />[&nbsp; &nbsp; 0.000000] Calibrating delay loop... 380.92 BogoMIPS (lpj=1904640)<br />[&nbsp; &nbsp; 0.060000] pid_max: default: 32768 minimum: 301<br />[&nbsp; &nbsp; 0.060000] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.070000] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.080000] pinctrl core: initialized pinctrl subsystem<br />[&nbsp; &nbsp; 0.090000] NET: Registered protocol family 16<br />[&nbsp; &nbsp; 0.100000] rt2880-pinmux pinctrl: invalid group &quot;jtag&quot; for function &quot;gpio&quot;<br />[&nbsp; &nbsp; 0.120000] mt7621_gpio 10000600.gpio: registering 32 gpios<br />[&nbsp; &nbsp; 0.130000] mt7621_gpio 10000600.gpio: registering 32 gpios<br />[&nbsp; &nbsp; 0.140000] mt7621_gpio 10000600.gpio: registering 32 gpios<br />[&nbsp; &nbsp; 0.150000] Switched to clocksource MIPS<br />[&nbsp; &nbsp; 0.160000] NET: Registered protocol family 2<br />[&nbsp; &nbsp; 0.160000] TCP established hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.180000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.190000] TCP: Hash tables configured (established 1024 bind 1024)<br />[&nbsp; &nbsp; 0.200000] TCP: reno registered<br />[&nbsp; &nbsp; 0.210000] UDP hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.220000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.230000] NET: Registered protocol family 1<br />[&nbsp; &nbsp; 0.240000] futex hash table entries: 256 (order: -1, 3072 bytes)<br />[&nbsp; &nbsp; 0.270000] squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />[&nbsp; &nbsp; 0.280000] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.<br />[&nbsp; &nbsp; 0.310000] msgmni has been set to 56<br />[&nbsp; &nbsp; 0.310000] io scheduler noop registered<br />[&nbsp; &nbsp; 0.320000] io scheduler deadline registered (default)<br />[&nbsp; &nbsp; 0.330000] Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled<br />[&nbsp; &nbsp; 0.350000] console [ttyS0] disabled<br />[&nbsp; &nbsp; 0.350000] 10000c00.uartlite: ttyS0 at MMIO 0x10000c00 (irq = 28, base_baud = 2500000) is a 16550A<br />[&nbsp; &nbsp; 0.370000] console [ttyS0] enabled<br />[&nbsp; &nbsp; 0.370000] console [ttyS0] enabled<br />[&nbsp; &nbsp; 0.380000] bootconsole [early0] disabled<br />[&nbsp; &nbsp; 0.380000] bootconsole [early0] disabled<br />[&nbsp; &nbsp; 0.400000] spi-mt7621 10000b00.spi: sys_freq: 191666666<br />[&nbsp; &nbsp; 0.420000] m25p80 spi32766.0: found s25sl064p, expected en25q64<br />[&nbsp; &nbsp; 0.430000] m25p80 spi32766.0: s25sl064p (8192 Kbytes)<br />[&nbsp; &nbsp; 0.440000] m25p80 spi32766.0: using chunked io<br />[&nbsp; &nbsp; 0.450000] 4 ofpart partitions found on MTD device spi32766.0<br />[&nbsp; &nbsp; 0.460000] Creating 4 MTD partitions on &quot;spi32766.0&quot;:<br />[&nbsp; &nbsp; 0.470000] 0x000000000000-0x000000030000 : &quot;u-boot&quot;<br />[&nbsp; &nbsp; 0.480000] 0x000000030000-0x000000040000 : &quot;u-boot-env&quot;<br />[&nbsp; &nbsp; 0.490000] 0x000000040000-0x000000050000 : &quot;factory&quot;<br />[&nbsp; &nbsp; 0.500000] 0x000000050000-0x000000800000 : &quot;firmware&quot;<br />[&nbsp; &nbsp; 0.540000] 2 uimage-fw partitions found on MTD device firmware<br />[&nbsp; &nbsp; 0.550000] 0x000000050000-0x000000165db3 : &quot;kernel&quot;<br />[&nbsp; &nbsp; 0.570000] 0x000000165db3-0x000000800000 : &quot;rootfs&quot;<br />[&nbsp; &nbsp; 0.580000] mtd: device 5 (rootfs) set to be root filesystem<br />[&nbsp; &nbsp; 0.590000] 1 squashfs-split partitions found on MTD device rootfs<br />[&nbsp; &nbsp; 0.600000] 0x0000002f0000-0x000000800000 : &quot;rootfs_data&quot;<br />[&nbsp; &nbsp; 0.620000] ralink_soc_eth 10100000.ethernet: generated random MAC address ca:55:69:cf:90:96<br />[&nbsp; &nbsp; 0.640000] ralink_soc_eth 10100000.ethernet eth0: ralink at 0xb0100000, irq 5<br />[&nbsp; &nbsp; 0.650000] mt7621_wdt 10000120.watchdog: Initialized<br />[&nbsp; &nbsp; 0.660000] TCP: cubic registered<br />[&nbsp; &nbsp; 0.670000] NET: Registered protocol family 17<br />[&nbsp; &nbsp; 0.680000] bridge: automatic filtering via arp/ip/ip6tables has been deprecated. Update your scripts to load br_netfilter if you need this.<br />[&nbsp; &nbsp; 0.700000] 8021q: 802.1Q VLAN Support v1.8<br />[&nbsp; &nbsp; 0.730000] VFS: Mounted root (squashfs filesystem) readonly on device 31:5.<br />[&nbsp; &nbsp; 0.750000] Freeing unused kernel memory: 164K (80317000 - 80340000)<br />[&nbsp; &nbsp; 2.430000] init: Console is alive<br />[&nbsp; &nbsp; 2.440000] init: - watchdog -<br />[&nbsp; &nbsp; 3.550000] usbcore: registered new interface driver usbfs<br />[&nbsp; &nbsp; 3.560000] usbcore: registered new interface driver hub<br />[&nbsp; &nbsp; 3.570000] usbcore: registered new device driver usb<br />[&nbsp; &nbsp; 3.580000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver<br />[&nbsp; &nbsp; 3.600000] ehci-platform: EHCI generic platform driver<br />[&nbsp; &nbsp; 3.620000] phy phy-10120000.usbphy.0: remote usb device wakeup disabled<br />[&nbsp; &nbsp; 3.630000] phy phy-10120000.usbphy.0: UTMI 16bit 30MHz<br />[&nbsp; &nbsp; 3.640000] ehci-platform 101c0000.ehci: EHCI Host Controller<br />[&nbsp; &nbsp; 3.650000] ehci-platform 101c0000.ehci: new USB bus registered, assigned bus number 1<br />[&nbsp; &nbsp; 3.670000] ehci-platform 101c0000.ehci: irq 26, io mem 0x101c0000<br />[&nbsp; &nbsp; 3.700000] ehci-platform 101c0000.ehci: USB 2.0 started, EHCI 1.00<br />[&nbsp; &nbsp; 3.710000] hub 1-0:1.0: USB hub found<br />[&nbsp; &nbsp; 3.720000] hub 1-0:1.0: 1 port detected<br />[&nbsp; &nbsp; 3.730000] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver<br />[&nbsp; &nbsp; 3.740000] ohci-platform: OHCI generic platform driver<br />[&nbsp; &nbsp; 3.750000] ohci-platform 101c1000.ohci: Generic Platform OHCI controller<br />[&nbsp; &nbsp; 3.760000] ohci-platform 101c1000.ohci: new USB bus registered, assigned bus number 2<br />[&nbsp; &nbsp; 3.780000] ohci-platform 101c1000.ohci: irq 26, io mem 0x101c1000<br />[&nbsp; &nbsp; 3.850000] hub 2-0:1.0: USB hub found<br />[&nbsp; &nbsp; 3.860000] hub 2-0:1.0: 1 port detected<br />[&nbsp; &nbsp; 4.450000] init: - preinit -<br />[&nbsp; &nbsp; 5.180000] rt305x-esw 10110000.esw: link changed 0x00<br />[&nbsp; &nbsp; 5.370000] random: mktemp urandom read with 8 bits of entropy available<br />Press the [f] key and hit [enter] to enter failsafe mode<br />Press the [1], [2], [3] or [4] key and hit [enter] to select the debug level<br />[&nbsp; &nbsp; 8.680000] rt305x-esw 10110000.esw: link changed 0x04<br />[&nbsp; &nbsp; 8.760000] jffs2: notice: (305) jffs2_build_xattr_subsystem: complete building xattr subsystem, 0 of xdatum (0 unchecked, 0 orphan) and 0 of xref (0 dead, 0 orphan) found.<br />[&nbsp; &nbsp; 8.800000] mount_root: switching to jffs2 overlay<br />[&nbsp; &nbsp; 8.840000] procd: - early -<br />[&nbsp; &nbsp; 8.840000] procd: - watchdog -<br />[&nbsp; &nbsp; 9.630000] procd: - ubus -<br />[&nbsp; &nbsp;10.640000] procd: - init -<br />Please press Enter to activate this console.<br />[&nbsp; &nbsp;11.380000] NET: Registered protocol family 10<br />[&nbsp; &nbsp;11.390000] ip6_tables: (C) 2000-2006 Netfilter Core Team<br />[&nbsp; &nbsp;11.420000] ip_tables: (C) 2000-2006 Netfilter Core Team<br />[&nbsp; &nbsp;11.440000] nf_conntrack version 0.5.0 (453 buckets, 1812 max)<br />[&nbsp; &nbsp;11.510000] xt_time: kernel timezone is -0000<br />[&nbsp; &nbsp;11.530000] PPP generic driver version 2.4.2<br />[&nbsp; &nbsp;11.540000] NET: Registered protocol family 24<br />[&nbsp; &nbsp;14.330000] rt305x-esw 10110000.esw: link changed 0x00<br />[&nbsp; &nbsp;16.180000] device eth0.1 entered promiscuous mode<br />[&nbsp; &nbsp;16.190000] device eth0 entered promiscuous mode<br />[&nbsp; &nbsp;16.250000] br-lan: port 1(eth0.1) entered forwarding state<br />[&nbsp; &nbsp;16.260000] br-lan: port 1(eth0.1) entered forwarding state<br />[&nbsp; &nbsp;18.160000] rt305x-esw 10110000.esw: link changed 0x04<br />[&nbsp; &nbsp;18.260000] br-lan: port 1(eth0.1) entered forwarding state</p><br /><br /><p>BusyBox v1.23.2 (2016-08-24 18:14:10 CST) built-in shell (ash)</p><p>&nbsp; _______&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;________&nbsp; &nbsp; &nbsp; &nbsp; __<br /> |&nbsp; &nbsp; &nbsp; &nbsp;|.-----.-----.-----.|&nbsp; |&nbsp; |&nbsp; |.----.|&nbsp; |_<br /> |&nbsp; &nbsp;-&nbsp; &nbsp;||&nbsp; _&nbsp; |&nbsp; -__|&nbsp; &nbsp; &nbsp;||&nbsp; |&nbsp; |&nbsp; ||&nbsp; &nbsp;_||&nbsp; &nbsp;_|<br /> |_______||&nbsp; &nbsp;__|_____|__|__||________||__|&nbsp; |____|<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |__| W I R E L E S S&nbsp; &nbsp;F R E E D O M<br /> -----------------------------------------------------<br /> CHAOS CALMER (Chaos Calmer, r48925)<br /> -----------------------------------------------------<br />&nbsp; * 1 1/2 oz Gin&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Shake with a glassful<br />&nbsp; * 1/4 oz Triple Sec&nbsp; &nbsp; &nbsp; &nbsp;of broken ice and pour<br />&nbsp; * 3/4 oz Lime Juice&nbsp; &nbsp; &nbsp; &nbsp;unstrained into a goblet.<br />&nbsp; * 1 1/2 oz Orange Juice<br />&nbsp; * 1 tsp. Grenadine Syrup<br /> -----------------------------------------------------<br />root@OpenWrt:/# <br />root@OpenWrt:/# <br />root@OpenWrt:/# <br />root@OpenWrt:/# <br />root@OpenWrt:/# <br />root@OpenWrt:/# <br />root@OpenWrt:/# <br />root@OpenWrt:/# <br />root@OpenWrt:/# <br />root@OpenWrt:/# ifconfig<br />br-lan&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 7E:98:E4:96:99:C2&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.1.1&nbsp; Bcast:192.168.1.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fd69:ec65:2998::1/60 Scope:Global<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::7c98:e4ff:fe96:99c2/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:103 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:26 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:15312 (14.9 KiB)&nbsp; TX bytes:2672 (2.6 KiB)</p><p>eth0&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr CA:55:69:CF:90:96&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::c855:69ff:fecf:9096/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:111 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:66 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:19905 (19.4 KiB)&nbsp; TX bytes:10285 (10.0 KiB)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Interrupt:5 </p><p>eth0.1&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr CA:55:69:CF:90:96&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:111 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:28 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:17907 (17.4 KiB)&nbsp; TX bytes:3761 (3.6 KiB)</p><p>eth0.2&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 7E:98:E4:96:99:C3&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::7c98:e4ff:fe96:99c3/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:23 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:4674 (4.5 KiB)</p><p>lo&nbsp; &nbsp; &nbsp; &nbsp; Link encap:Local Loopback&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:127.0.0.1&nbsp; Mask:255.0.0.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: ::1/128 Scope:Host<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP LOOPBACK RUNNING&nbsp; MTU:65536&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:48 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:48 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:3936 (3.8 KiB)&nbsp; TX bytes:3936 (3.8 KiB)</p><p>root@OpenWrt:/#</p>											<p class="post-edited">(Last edited by <strong>liveonlinux</strong> on 11 Oct 2016, 11:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p340842">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">liveonlinux</div>
					<div class="post-datetime">
						11 Oct 2016, 11:32					</div>
				</div>
				<div class="post-content content">
					<p>The .config file for compiling openwrt is as follows:</p><p>-----------------------------------------------------------------------------</p><p> Automatically generated file; DO NOT EDIT.<br /># OpenWrt Configuration<br />#<br />CONFIG_MODULES=y<br />CONFIG_HAVE_DOT_CONFIG=y<br /># CONFIG_TARGET_ppc44x is not set<br /># CONFIG_TARGET_realview is not set<br /># CONFIG_TARGET_arm64 is not set<br /># CONFIG_TARGET_sunxi is not set<br /># CONFIG_TARGET_ath25 is not set<br /># CONFIG_TARGET_ar71xx is not set<br /># CONFIG_TARGET_at91 is not set<br /># CONFIG_TARGET_brcm2708 is not set<br /># CONFIG_TARGET_bcm53xx is not set<br /># CONFIG_TARGET_brcm47xx is not set<br /># CONFIG_TARGET_brcm63xx is not set<br /># CONFIG_TARGET_netlogic is not set<br /># CONFIG_TARGET_cns3xxx is not set<br /># CONFIG_TARGET_octeon is not set<br /># CONFIG_TARGET_gemini is not set<br /># CONFIG_TARGET_mpc85xx is not set<br /># CONFIG_TARGET_imx6 is not set<br /># CONFIG_TARGET_mxs is not set<br /># CONFIG_TARGET_adm8668 is not set<br /># CONFIG_TARGET_adm5120 is not set<br /># CONFIG_TARGET_xburst is not set<br /># CONFIG_TARGET_ixp4xx is not set<br /># CONFIG_TARGET_lantiq is not set<br /># CONFIG_TARGET_malta is not set<br /># CONFIG_TARGET_mvebu is not set<br /># CONFIG_TARGET_kirkwood is not set<br /># CONFIG_TARGET_rb532 is not set<br /># CONFIG_TARGET_mcs814x is not set<br /># CONFIG_TARGET_oxnas is not set<br /># CONFIG_TARGET_au1000 is not set<br />CONFIG_TARGET_ramips=y<br /># CONFIG_TARGET_ar7 is not set<br /># CONFIG_TARGET_omap is not set<br /># CONFIG_TARGET_uml is not set<br /># CONFIG_TARGET_x86 is not set<br /># CONFIG_TARGET_ramips_rt305x is not set<br /># CONFIG_TARGET_ramips_mt7620 is not set<br /># CONFIG_TARGET_ramips_mt7621 is not set<br />CONFIG_TARGET_ramips_mt7628=y<br /># CONFIG_TARGET_ramips_mt7688 is not set<br /># CONFIG_TARGET_ramips_rt3883 is not set<br /># CONFIG_TARGET_ramips_rt288x is not set<br />CONFIG_TARGET_ramips_mt7628_Default=y<br />CONFIG_HAS_SUBTARGETS=y<br />CONFIG_TARGET_BOARD=&quot;ramips&quot;<br />CONFIG_TARGET_ARCH_PACKAGES=&quot;ramips_24kec&quot;<br />CONFIG_DEFAULT_TARGET_OPTIMIZATION=&quot;-Os -pipe -mno-branch-likely -mips32r2 -mtune=24kec -mdsp&quot;<br />CONFIG_CPU_TYPE=&quot;24kec+dsp&quot;<br />CONFIG_LINUX_3_18=y<br />CONFIG_DEFAULT_base-files=y<br />CONFIG_DEFAULT_busybox=y<br />CONFIG_DEFAULT_dnsmasq=y<br />CONFIG_DEFAULT_dropbear=y<br />CONFIG_DEFAULT_firewall=y<br />CONFIG_DEFAULT_fstools=y<br />CONFIG_DEFAULT_ip6tables=y<br />CONFIG_DEFAULT_iptables=y<br />CONFIG_DEFAULT_iwinfo=y<br />CONFIG_DEFAULT_kmod-gpio-button-hotplug=y<br />CONFIG_DEFAULT_kmod-leds-gpio=y<br />CONFIG_DEFAULT_kmod-ledtrig-usbdev=y<br />CONFIG_DEFAULT_kmod-nf-nathelper=y<br />CONFIG_DEFAULT_kmod-usb-core=y<br />CONFIG_DEFAULT_kmod-usb-ohci=y<br />CONFIG_DEFAULT_kmod-usb2=y<br />CONFIG_DEFAULT_libc=y<br />CONFIG_DEFAULT_libgcc=y<br />CONFIG_DEFAULT_mtd=y<br />CONFIG_DEFAULT_netifd=y<br />CONFIG_DEFAULT_odhcp6c=y<br />CONFIG_DEFAULT_odhcpd=y<br />CONFIG_DEFAULT_opkg=y<br />CONFIG_DEFAULT_ppp=y<br />CONFIG_DEFAULT_ppp-mod-pppoe=y<br />CONFIG_DEFAULT_swconfig=y<br />CONFIG_DEFAULT_uci=y<br />CONFIG_DEFAULT_wpad-mini=y<br />CONFIG_AUDIO_SUPPORT=y<br />CONFIG_GPIO_SUPPORT=y<br />CONFIG_PCI_SUPPORT=y<br />CONFIG_USB_SUPPORT=y<br />CONFIG_USES_DEVICETREE=y<br />CONFIG_USES_SQUASHFS=y<br />CONFIG_mipsel=y<br />CONFIG_ARCH=&quot;mipsel&quot;</p><p>#<br /># Target Images<br />#<br /># CONFIG_TARGET_ROOTFS_INITRAMFS is not set<br />CONFIG_EXTERNAL_CPIO=&quot;&quot;</p><p>#<br /># Root filesystem archives<br />#<br /># CONFIG_TARGET_ROOTFS_CPIOGZ is not set<br /># CONFIG_TARGET_ROOTFS_TARGZ is not set</p><p>#<br /># Root filesystem images<br />#<br /># CONFIG_TARGET_ROOTFS_EXT4FS is not set<br /># CONFIG_TARGET_ROOTFS_JFFS2 is not set<br />CONFIG_TARGET_ROOTFS_SQUASHFS=y<br />CONFIG_TARGET_SQUASHFS_BLOCK_SIZE=256<br />CONFIG_TARGET_UBIFS_FREE_SPACE_FIXUP=y<br />CONFIG_TARGET_UBIFS_JOURNAL_SIZE=&quot;&quot;</p><p>#<br /># Image Options<br />#<br />CONFIG_TARGET_ROOTFS_INCLUDE_UIMAGE=y<br />CONFIG_TARGET_ROOTFS_INCLUDE_ZIMAGE=y<br />CONFIG_TARGET_ROOTFS_INCLUDE_FIT=y</p><p>#<br /># Global build settings<br />#<br /># CONFIG_ALL_KMODS is not set<br /># CONFIG_ALL is not set<br />CONFIG_SIGNED_PACKAGES=y</p><p>#<br /># General build options<br />#<br /># CONFIG_DISPLAY_SUPPORT is not set<br />CONFIG_BUILD_PATENTED=y<br /># CONFIG_BUILD_NLS is not set<br />CONFIG_SHADOW_PASSWORDS=y<br /># CONFIG_CLEAN_IPKG is not set<br /># CONFIG_COLLECT_KERNEL_DEBUG is not set</p><p>#<br /># Kernel build options<br />#<br />CONFIG_KERNEL_PRINTK=y<br />CONFIG_KERNEL_CRASHLOG=y<br />CONFIG_KERNEL_SWAP=y<br />CONFIG_KERNEL_DEBUG_FS=y<br /># CONFIG_KERNEL_PERF_EVENTS is not set<br /># CONFIG_KERNEL_PROFILING is not set<br />CONFIG_KERNEL_KALLSYMS=y<br /># CONFIG_KERNEL_FTRACE is not set<br />CONFIG_KERNEL_DEBUG_KERNEL=y<br />CONFIG_KERNEL_DEBUG_INFO=y<br /># CONFIG_KERNEL_DYNAMIC_DEBUG is not set<br /># CONFIG_KERNEL_KPROBES is not set<br /># CONFIG_KERNEL_AIO is not set<br /># CONFIG_KERNEL_DIRECT_IO is not set<br /># CONFIG_KERNEL_FHANDLE is not set<br /># CONFIG_KERNEL_FANOTIFY is not set<br /># CONFIG_KERNEL_BLK_DEV_BSG is not set<br />CONFIG_KERNEL_MAGIC_SYSRQ=y<br />CONFIG_KERNEL_COREDUMP=y<br />CONFIG_KERNEL_ELF_CORE=y<br /># CONFIG_KERNEL_PROVE_LOCKING is not set<br />CONFIG_KERNEL_PRINTK_TIME=y<br /># CONFIG_KERNEL_SLABINFO is not set<br /># CONFIG_KERNEL_PROC_PAGE_MONITOR is not set<br /># CONFIG_KERNEL_KEXEC is not set<br /># CONFIG_USE_RFKILL is not set<br /># CONFIG_USE_SPARSE is not set<br /># CONFIG_KERNEL_DEVTMPFS is not set<br /># CONFIG_KERNEL_CGROUPS is not set<br /># CONFIG_KERNEL_NAMESPACES is not set<br /># CONFIG_KERNEL_LXC_MISC is not set<br /># CONFIG_KERNEL_SECCOMP_FILTER is not set<br /># CONFIG_KERNEL_SECCOMP is not set</p><br /><br /><p>......</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p340843">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">liveonlinux</div>
					<div class="post-datetime">
						11 Oct 2016, 11:46					</div>
				</div>
				<div class="post-content content">
					<p>1. I changed the file: openwrt\target\linux\ramips\dts\MT7628.dts. But it&#039;s useless.</p><p>-------------------------------------------------------------------------</p><br /><p>/include/ &quot;mt7628an.dtsi&quot;</p><p>/ {<br />&nbsp; &nbsp; compatible = &quot;mediatek,mt7628an-eval-board&quot;, &quot;mediatek,mt7628an-soc&quot;;<br />&nbsp; &nbsp; model = &quot;Mediatek MT7628AN evaluation board&quot;;</p><p>&nbsp; &nbsp; memory@0 {<br />&nbsp; &nbsp; &nbsp; &nbsp; device_type = &quot;memory&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;0x0 0x2000000&gt;;<br />&nbsp; &nbsp; };</p><p>&nbsp; &nbsp; pinctrl {<br />&nbsp; &nbsp; &nbsp; &nbsp; state_default: pinctrl0 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gpio {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ralink,group = &quot;i2c&quot;, &quot;jtag&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ralink,function = &quot;gpio&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; };</p><p>&nbsp; &nbsp; palmbus@10000000 {<br />&nbsp; &nbsp; &nbsp; &nbsp; spi@b00 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; status = &quot;okay&quot;;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; m25p80@0 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #address-cells = &lt;1&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #size-cells = &lt;1&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; compatible = &quot;en25q64&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;0 0&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; linux,modalias = &quot;m25p80&quot;, &quot;en25q64&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; spi-max-frequency = &lt;10000000&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; m25p,chunked-io = &lt;32&gt;;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; partition@0 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;u-boot&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;0x0 0x30000&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; read-only;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; partition@30000 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;u-boot-env&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;0x30000 0x10000&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; read-only;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; factory: partition@40000 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;factory&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;0x40000 0x10000&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; read-only;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; partition@50000 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;firmware&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;0x50000 0x7b0000&gt;;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;-----&nbsp; change 7 to f, it&#039;s still failed to boot.<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; };<br />};</p><br /><br /><br /><p>2. I change the file: openwrt\target\linux\ramips\dts\mt7628an.dtsi , add “ root=/dev/mtdblock3”, mtdblock0~3, the router is still not work.&nbsp; </p><p>--------------------------------------------------------------</p><p>before:</p><p>chosen {<br />&nbsp; &nbsp; &nbsp; &nbsp; bootargs = &quot;console=ttyS0,57600&quot;;<br />&nbsp; &nbsp; };</p><br /><p>after:</p><p>chosen {<br />&nbsp; &nbsp; &nbsp; &nbsp; bootargs = &quot;console=ttyS0,57600 root=/dev/mtdblock3&quot;;<br />&nbsp; &nbsp; };</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p340885">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">elektroman</div>
					<div class="post-datetime">
						11 Oct 2016, 19:57					</div>
				</div>
				<div class="post-content content">
					<p>Hi<br />please use git sources for OpenWRT/LEDE</p><p>here are the steps for Edimax BR 6478 V2<br /><a href="https://forum.openwrt.org/viewtopic.php?id=67192">https://forum.openwrt.org/viewtopic.php?id=67192</a><br />please you new new &quot;Device&quot; name for support</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p340915">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">liveonlinux</div>
					<div class="post-datetime">
						12 Oct 2016, 04:10					</div>
				</div>
				<div class="post-content content">
					<p>Hi, elektroman,<br />I&#039;m a new person to openwrt. Could you tell me what&#039;s wrong with the serial log? And I&#039;m sorry, the article about Edimax BR 6478 V2 is hard for me.<br />You mean, LEDE is better than OpenWRT chaos calmer?<br />My router is K6512, it is nearly the same design as D-link DIR-816, both&nbsp; AC750 router, MT7628+MT7610E chips.</p><br /><div class="quotebox"><cite>elektroman wrote:</cite><blockquote><p>Hi<br />please use git sources for OpenWRT/LEDE</p><p>here are the steps for Edimax BR 6478 V2</p><p>please you new new &quot;Device&quot; name for support</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p340973">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">elektroman</div>
					<div class="post-datetime">
						12 Oct 2016, 23:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>liveonlinux wrote:</cite><blockquote><p>Hi, elektroman,<br />I&#039;m a new person to openwrt. Could you tell me what&#039;s wrong with the serial log? And I&#039;m sorry, the article about Edimax BR 6478 V2 is hard for me.<br />You mean, LEDE is better than OpenWRT chaos calmer?<br />My router is K6512, it is nearly the same design as D-link DIR-816, both&nbsp; AC750 router, MT7628+MT7610E chips.</p></blockquote></div><p>So is the both devices are almost the same, take the DIR 816 DTS as blueprint for your (new) K6512 DTS, so you can see the differences after (If there any)</p><p>You can search in the git source tree for the &quot;build recipe&quot; for the DIR-816, they are maybe some hints aka partition number for the MTD device or other magic numbers here</p><p>LEDE is the successor of OpenWRT, last update of OpenWRT git is around may this year, all devs moved to LEDE. Using SDK for a new device is a bad idea.</p><p>The best way (here) is to try and fail, use initramfs for target (in menuconfig).<br />Some hint running initramfs. disable &quot;fail safe mode&quot; in image creation.</p><p>FWIW:<br />I don&#039;t memorize all this stuff, I must search this all by my self.<br />But this &quot;git&quot; tool will help you a great deal ...<br />I know this is hard for a beginner, everybody know this.<br />And in the Edimax thread you will see my git tree and see what steps I&#039;ve done.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p340981">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">liveonlinux</div>
					<div class="post-datetime">
						13 Oct 2016, 04:05					</div>
				</div>
				<div class="post-content content">
					<p>Thank you for you advices!&nbsp; <br />I will try it!&nbsp; And I will use LEDE instead of chaos calmer.</p><br /><div class="quotebox"><cite>elektroman wrote:</cite><blockquote><div class="quotebox"><cite>liveonlinux wrote:</cite><blockquote><p>Hi, elektroman,<br />I&#039;m a new person to openwrt. Could you tell me what&#039;s wrong with the serial log? And I&#039;m sorry, the article about Edimax BR 6478 V2 is hard for me.<br />You mean, LEDE is better than OpenWRT chaos calmer?<br />My router is K6512, it is nearly the same design as D-link DIR-816, both&nbsp; AC750 router, MT7628+MT7610E chips.</p></blockquote></div><p>So is the both devices are almost the same, take the DIR 816 DTS as blueprint for your (new) K6512 DTS, so you can see the differences after (If there any)</p><p>You can search in the git source tree for the &quot;build recipe&quot; for the DIR-816, they are maybe some hints aka partition number for the MTD device or other magic numbers here</p><p>LEDE is the successor of OpenWRT, last update of OpenWRT git is around may this year, all devs moved to LEDE. Using SDK for a new device is a bad idea.</p><p>The best way (here) is to try and fail, use initramfs for target (in menuconfig).<br />Some hint running initramfs. disable &quot;fail safe mode&quot; in image creation.</p><p>FWIW:<br />I don&#039;t memorize all this stuff, I must search this all by my self.<br />But this &quot;git&quot; tool will help you a great deal ...<br />I know this is hard for a beginner, everybody know this.<br />And in the Edimax thread you will see my git tree and see what steps I&#039;ve done.</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p341944">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">liveonlinux</div>
					<div class="post-datetime">
						24 Oct 2016, 03:50					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I download the lede code for mt7628: lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64.tar.bz2.<br />It&#039;s compiled on ubuntu 15.04 (64 bits). There is an error as follows:</p><div class="codebox"><pre><code>make[3]: Entering directory &#039;/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/feeds/base/package/devel/perf&#039;
cp -fpR /home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/build_dir/target-mipsel_24kc_musl-1.1.15/linux-ramips_mt7628/linux-4.4.25/tools/perf/* /home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/build_dir/target-mipsel_24kc_musl-1.1.15/linux-ramips_mt7628/linux-4.4.25/tools/perf-target-mipsel_24kc_musl-1.1.15/
cp: cannot stat &#039;/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/build_dir/target-mipsel_24kc_musl-1.1.15/linux-ramips_mt7628/linux-4.4.25/tools/perf/*&#039;: No such file or directory
Makefile:79: recipe for target &#039;/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/build_dir/target-mipsel_24kc_musl-1.1.15/linux-ramips_mt7628/linux-4.4.25/tools/perf-target-mipsel_24kc_musl-1.1.15/.prepared_e712ac7d83c37ac3b99ac2fce6fb7d53&#039; failed
make[3]: *** [/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/build_dir/target-mipsel_24kc_musl-1.1.15/linux-ramips_mt7628/linux-4.4.25/tools/perf-target-mipsel_24kc_musl-1.1.15/.prepared_e712ac7d83c37ac3b99ac2fce6fb7d53] Error 1
make[3]: Leaving directory &#039;/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/feeds/base/package/devel/perf&#039;
package/Makefile:127: recipe for target &#039;package/feeds/base/perf/compile&#039; failed
make[2]: *** [package/feeds/base/perf/compile] Error 2
make[2]: Leaving directory &#039;/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64&#039;
package/Makefile:124: recipe for target &#039;/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/staging_dir/target-mipsel_24kc_musl-1.1.15/stamp/.package_compile&#039; failed
make[1]: *** [/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/staging_dir/target-mipsel_24kc_musl-1.1.15/stamp/.package_compile] Error 2
make[1]: Leaving directory &#039;/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64&#039;
/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/include/toplevel.mk:187: recipe for target &#039;world&#039; failed
make: *** [world] Error 2
wangfeng@ubuntu:~/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64$ 
wangfeng@ubuntu:~/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64$ 
wangfeng@ubuntu:~/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64$ 
wangfeng@ubuntu:~/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64$ ls /home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/build_dir/target-mipsel_24kc_musl-1.1.15/linux-ramips_mt7628/linux-4.4.25/tools/perf/
ls: cannot access /home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/build_dir/target-mipsel_24kc_musl-1.1.15/linux-ramips_mt7628/linux-4.4.25/tools/perf/: No such file or directory
wangfeng@ubuntu:~/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64$ 
wangfeng@ubuntu:~/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64$ 
wangfeng@ubuntu:~/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64$ 
wangfeng@ubuntu:~/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64$ ls /home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/build_dir/target-mipsel_24kc_musl-1.1.15/linux-ramips_mt7628/linux-4.4.25/tools/
perf-target-mipsel_24kc_musl-1.1.15
wangfeng@ubuntu:~/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64$ ls /home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/build_dir/target-mipsel_24kc_musl-1.1.15/linux-ramips_mt7628/linux-4.4.25/tools/perf-target-mipsel_24kc_musl-1.1.15/
wangfeng@ubuntu:~/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64$ 
wangfeng@ubuntu:~/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64$ 
wangfeng@ubuntu:~/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64$ ls /home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/feeds/base/package/devel/perf
Makefile  musl-compat.h  musl-include
wangfeng@ubuntu:~/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64$ </code></pre></div><br /><p>I use these command to compile:<br />./scripts/feeds update -a&nbsp; &nbsp; &nbsp; <br />./scripts/feeds install -a<br />make menuconfig&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;-- keep default config<br />make V=s&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;-- after long time, compiling failed.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p341958">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">liveonlinux</div>
					<div class="post-datetime">
						24 Oct 2016, 10:26					</div>
				</div>
				<div class="post-content content">
					<p>I modified the feeds/base/package/devel/perf/Makefile.</p><div class="codebox"><pre><code>define Build/Prepare
#       $(CP) $(LINUX_DIR)/tools/perf/* $(PKG_BUILD_DIR)/
endef</code></pre></div><p>Then make again. There is another error:&nbsp; cannot find the&nbsp; Makefile.perf&nbsp; file and stop compiling.<br />I download the tar from: <a href="https://downloads.lede-project.org/snapshots/targets/ramips/mt7628/">https://downloads.lede-project.org/snap … ps/mt7628/</a><br />Is it right?</p><br /><div class="codebox"><pre><code>make[3]: Entering directory &#039;/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/feeds/base/package/devel/perf&#039;
#       cp -fpR /home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/build_dir/target-mipsel_24kc_musl-1.1.15/linux-ramips_mt7628/linux-4.4.25/tools/perf/* /home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/build_dir/target-mipsel_24kc_musl-1.1.15/linux-ramips_mt7628/linux-4.4.25/tools/perf-target-mipsel_24kc_musl-1.1.15/
touch /home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/build_dir/target-mipsel_24kc_musl-1.1.15/linux-ramips_mt7628/linux-4.4.25/tools/perf-target-mipsel_24kc_musl-1.1.15/.prepared_e712ac7d83c37ac3b99ac2fce6fb7d53
rm -f /home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/staging_dir/target-mipsel_24kc_musl-1.1.15/stamp/.perf_installed
(cd /home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/build_dir/target-mipsel_24kc_musl-1.1.15/linux-ramips_mt7628/linux-4.4.25/tools/perf-target-mipsel_24kc_musl-1.1.15/./; if [ -x ./configure ]; then find /home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/build_dir/target-mipsel_24kc_musl-1.1.15/linux-ramips_mt7628/linux-4.4.25/tools/perf-target-mipsel_24kc_musl-1.1.15/ -name config.guess | xargs -r chmod u+w; find /home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/build_dir/target-mipsel_24kc_musl-1.1.15/linux-ramips_mt7628/linux-4.4.25/tools/perf-target-mipsel_24kc_musl-1.1.15/ -name config.guess | xargs -r -n1 cp --remove-destination /home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/scripts/config.guess; find /home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/build_dir/target-mipsel_24kc_musl-1.1.15/linux-ramips_mt7628/linux-4.4.25/tools/perf-target-mipsel_24kc_musl-1.1.15/ -name config.sub | xargs -r chmod u+w; find /home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/build_dir/target-mipsel_24kc_musl-1.1.15/linux-ramips_mt7628/linux-4.4.25/tools/perf-target-mipsel_24kc_musl-1.1.15/ -name config.sub | xargs -r -n1 cp --remove-destination /home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/scripts/config.sub; AR=&quot;mipsel-openwrt-linux-musl-gcc-ar&quot; AS=&quot;ccache_cc -c -Os -pipe -mno-branch-likely -mips32r2 -mtune=24kc -fno-caller-saves -fno-plt -fhonour-copts -Wno-error=unused-but-set-variable -Wno-error=unused-result -msoft-float -iremap /home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/build_dir/target-mipsel_24kc_musl-1.1.15/linux-ramips_mt7628/linux-4.4.25/tools/perf-target-mipsel_24kc_musl-1.1.15:perf-target-mipsel_24kc_musl-1.1.15 -Wformat -Werror=format-security -fstack-protector -D_FORTIFY_SOURCE=1 -Wl,-z,now -Wl,-z,relro&quot; LD=mipsel-openwrt-linux-musl-ld NM=&quot;mipsel-openwrt-linux-musl-gcc-nm&quot; CC=&quot;ccache_cc&quot; GCC=&quot;ccache_cc&quot; CXX=&quot;ccache_cxx&quot; RANLIB=&quot;mipsel-openwrt-linux-musl-gcc-ranlib&quot; STRIP=mipsel-openwrt-linux-musl-strip OBJCOPY=mipsel-openwrt-linux-musl-objcopy OBJDUMP=mipsel-openwrt-linux-musl-objdump SIZE=mipsel-openwrt-linux-musl-size CFLAGS=&quot;-Os -pipe -mno-branch-likely -mips32r2 -mtune=24kc -fno-caller-saves -fno-plt -fhonour-copts -Wno-error=unused-but-set-variable -Wno-error=unused-result -msoft-float -iremap /home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/build_dir/target-mipsel_24kc_musl-1.1.15/linux-ramips_mt7628/linux-4.4.25/tools/perf-target-mipsel_24kc_musl-1.1.15:perf-target-mipsel_24kc_musl-1.1.15 -Wformat -Werror=format-security -fstack-protector -D_FORTIFY_SOURCE=1 -Wl,-z,now -Wl,-z,relro &quot; CXXFLAGS=&quot;-Os -pipe -mno-branch-likely -mips32r2 -mtune=24kc -fno-caller-saves -fno-plt -fhonour-copts -Wno-error=unused-but-set-variable -Wno-error=unused-result -msoft-float -iremap /home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/build_dir/target-mipsel_24kc_musl-1.1.15/linux-ramips_mt7628/linux-4.4.25/tools/perf-target-mipsel_24kc_musl-1.1.15:perf-target-mipsel_24kc_musl-1.1.15 -Wformat -Werror=format-security -fstack-protector -D_FORTIFY_SOURCE=1 -Wl,-z,now -Wl,-z,relro &quot; CPPFLAGS=&quot;-I/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/staging_dir/target-mipsel_24kc_musl-1.1.15/usr/include -I/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/staging_dir/target-mipsel_24kc_musl-1.1.15/include -I/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/staging_dir/toolchain-mipsel_24kc_gcc-5.4.0_musl-1.1.15/usr/include -I/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/staging_dir/toolchain-mipsel_24kc_gcc-5.4.0_musl-1.1.15/include/fortify -I/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/staging_dir/toolchain-mipsel_24kc_gcc-5.4.0_musl-1.1.15/include &quot; LDFLAGS=&quot;-L/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/staging_dir/target-mipsel_24kc_musl-1.1.15/usr/lib -L/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/staging_dir/target-mipsel_24kc_musl-1.1.15/lib -L/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/staging_dir/toolchain-mipsel_24kc_gcc-5.4.0_musl-1.1.15/usr/lib -L/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/staging_dir/toolchain-mipsel_24kc_gcc-5.4.0_musl-1.1.15/lib -znow -zrelro &quot;   ./configure --target=mipsel-openwrt-linux --host=mipsel-openwrt-linux --build=x86_64-linux-gnu --program-prefix=&quot;&quot; --program-suffix=&quot;&quot; --prefix=/usr --exec-prefix=/usr --bindir=/usr/bin --sbindir=/usr/sbin --libexecdir=/usr/lib --sysconfdir=/etc --datadir=/usr/share --localstatedir=/var --mandir=/usr/man --infodir=/usr/info --disable-nls   ; fi; )
rm -f /home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/build_dir/target-mipsel_24kc_musl-1.1.15/linux-ramips_mt7628/linux-4.4.25/tools/perf-target-mipsel_24kc_musl-1.1.15/.configured_*
touch /home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/build_dir/target-mipsel_24kc_musl-1.1.15/linux-ramips_mt7628/linux-4.4.25/tools/perf-target-mipsel_24kc_musl-1.1.15/.configured_yynyyyyy
ARCH=&quot;mips&quot; NO_LIBPERL=1 NO_LIBPYTHON=1 NO_NEWT=1 NO_LZMA=1 NO_BACKTRACE=1 NO_LIBNUMA=1 NO_GTK2=1 NO_LIBAUDIT=1 NO_LIBCRYPTO=1 CROSS_COMPILE=&quot;mipsel-openwrt-linux-musl-&quot; CC=&quot;ccache_cc&quot; LD=&quot;mipsel-openwrt-linux-musl-ld&quot; CFLAGS=&quot;-Os -pipe -mno-branch-likely -mips32r2 -mtune=24kc -fno-caller-saves -fno-plt -fhonour-copts -Wno-error=unused-but-set-variable -Wno-error=unused-result -msoft-float -iremap /home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/build_dir/target-mipsel_24kc_musl-1.1.15/linux-ramips_mt7628/linux-4.4.25/tools/perf-target-mipsel_24kc_musl-1.1.15:perf-target-mipsel_24kc_musl-1.1.15 -Wformat -Werror=format-security -fstack-protector -D_FORTIFY_SOURCE=1 -Wl,-z,now -Wl,-z,relro -I/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/staging_dir/target-mipsel_24kc_musl-1.1.15/usr/include -I/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/staging_dir/target-mipsel_24kc_musl-1.1.15/include -I/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/staging_dir/toolchain-mipsel_24kc_gcc-5.4.0_musl-1.1.15/usr/include -I/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/staging_dir/toolchain-mipsel_24kc_gcc-5.4.0_musl-1.1.15/include/fortify -I/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/staging_dir/toolchain-mipsel_24kc_gcc-5.4.0_musl-1.1.15/include&quot; LDFLAGS=&quot;-L/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/staging_dir/target-mipsel_24kc_musl-1.1.15/usr/lib -L/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/staging_dir/target-mipsel_24kc_musl-1.1.15/lib -L/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/staging_dir/toolchain-mipsel_24kc_gcc-5.4.0_musl-1.1.15/usr/lib -L/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/staging_dir/toolchain-mipsel_24kc_gcc-5.4.0_musl-1.1.15/lib -znow -zrelro&quot; V=&#039;&#039; WERROR=0 prefix=/usr EXTRA_CFLAGS=&quot;-I/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/feeds/base/package/devel/perf/musl-include -include /home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/feeds/base/package/devel/perf/musl-compat.h -D__UCLIBC__&quot; make   -C /home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/build_dir/target-mipsel_24kc_musl-1.1.15/linux-ramips_mt7628/linux-4.4.25/tools/perf-target-mipsel_24kc_musl-1.1.15 -f Makefile.perf --no-print-directory
make[4]: Makefile.perf: No such file or directory
make[4]: *** No rule to make target &#039;Makefile.perf&#039;.  Stop.
Makefile:79: recipe for target &#039;/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/build_dir/target-mipsel_24kc_musl-1.1.15/linux-ramips_mt7628/linux-4.4.25/tools/perf-target-mipsel_24kc_musl-1.1.15/.built&#039; failed
make[3]: *** [/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/build_dir/target-mipsel_24kc_musl-1.1.15/linux-ramips_mt7628/linux-4.4.25/tools/perf-target-mipsel_24kc_musl-1.1.15/.built] Error 2
make[3]: Leaving directory &#039;/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/feeds/base/package/devel/perf&#039;
package/Makefile:127: recipe for target &#039;package/feeds/base/perf/compile&#039; failed
make[2]: *** [package/feeds/base/perf/compile] Error 2
make[2]: Leaving directory &#039;/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64&#039;
package/Makefile:124: recipe for target &#039;/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/staging_dir/target-mipsel_24kc_musl-1.1.15/stamp/.package_compile&#039; failed
make[1]: *** [/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/staging_dir/target-mipsel_24kc_musl-1.1.15/stamp/.package_compile] Error 2
make[1]: Leaving directory &#039;/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64&#039;
/home/wangfeng/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64/include/toplevel.mk:187: recipe for target &#039;world&#039; failed
make: *** [world] Error 2
wangfeng@ubuntu:~/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64$ 
wangfeng@ubuntu:~/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64$ 
wangfeng@ubuntu:~/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64$ 
wangfeng@ubuntu:~/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64$ 
wangfeng@ubuntu:~/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64$ find ./ -iname &quot;Makefile.perf&quot;
wangfeng@ubuntu:~/Desktop/lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64$ </code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342045">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">elektroman</div>
					<div class="post-datetime">
						25 Oct 2016, 07:44					</div>
				</div>
				<div class="post-content content">
					<p>No, don&#039;t use the SDK !!<br />It&#039;s normally used for building a firmware, but you are (currently) far from this</p><p>Please enter this command into the shell<br /></p><div class="codebox"><pre><code>cd ~
git clone git://git.lede-project.org/source.git LEDE
cd ~/LEDE
./scripts/feeds update -a
./scripts/feeds install -a</code></pre></div><p>This will setup the LEDE build enviroment in ~/LEDE<br /></p><div class="codebox"><pre><code>cp target/linux/ramips/dts/WRTNODE2P.dts target/linux/ramips/dts/K6512.dts</code></pre></div><p>I&nbsp; use the WRTNODE2P device here as a sample for the *new* DTS file from your board.<br />Add these lines to target/linux/ramips/image/mt7628.mk<br /></p><div class="codebox"><pre><code>define Device/k6512
  DTS :=  K6512
  IMAGE_SIZE := $(ralink_default_fw_size_8M)
  DEVICE_TITLE :=  K6512
  DEVICE_PACKAGES := kmod-usb2 kmod-usb-ohci kmod-ledtrig-usbdev
endef
TARGET_DEVICES += wrtnode2p</code></pre></div><p>This is for your device with a 8MB flash, but (and this is a big but) with normal flash layout.<br />u-Boot, u-Boot-env, factory (with some info about wifi), and firmware.<br />firmware will parted up after boot into<br />kernel, rootfs and yffs2</p><p>Boot this *only* via TFTP<br />And test, some parts are missing leds, buttons and of course the correct flash layout.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342049">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">liveonlinux</div>
					<div class="post-datetime">
						25 Oct 2016, 09:25					</div>
				</div>
				<div class="post-content content">
					<p>Thank you,&nbsp; elektroman!</p><p>I thought,&nbsp; the lede source from git and web download page were the same. You mean,&nbsp; they are different.</p><p>I get the git source code, and compile it.&nbsp; This file download from LEDE web page:&nbsp; lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64.tar.bz2, must compiled on x86_64 ubuntu OS, but the git source code can be compiled on x86_32 ubuntu OS.</p><p>The compiling need very long time, and it&#039;s not finished. As so far, I find only this difference.</p><br /><p>There is another question, which branch is tested ? I don&#039;t need the newest version, but the tested one.</p><div class="codebox"><pre><code>lede_git/source$ git branch -a
* master
  remotes/origin/HEAD -&gt; origin/master
  remotes/origin/master</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342093">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">elektroman</div>
					<div class="post-datetime">
						25 Oct 2016, 18:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>liveonlinux wrote:</cite><blockquote><p>Thank you,&nbsp; elektroman!<br />I thought,&nbsp; the lede source from git and web download page were the same. You mean,&nbsp; they are different.</p></blockquote></div><p>No completely,<br />but with the git sources you can track your own changes</p><p>And this is the main part of using git here.<br />oif you want to build for a existing device you can use the SDK<br /></p><div class="quotebox"><cite>liveonlinux wrote:</cite><blockquote><p>I get the git source code, and compile it.&nbsp; This file download from LEDE web page:&nbsp; lede-sdk-ramips-mt7628_gcc-5.4.0_musl-1.1.15.Linux-x86_64.tar.bz2, must compiled on x86_64 ubuntu OS, but the git source code can be compiled on x86_32 ubuntu OS.</p></blockquote></div><p>Again not quite right.<br />with the git sources, you buidl your own toolchain for your target.<br />And it&#039;s completely irrelevant on which platform/arch.<br />You can build this also on your raspberrypi, if you have enough time.<br /></p><div class="quotebox"><cite>liveonlinux wrote:</cite><blockquote><p>There is another question, which branch is tested ? I don&#039;t need the newest version, but the tested one.</p><div class="codebox"><pre><code>lede_git/source$ git branch -a
* master
  remotes/origin/HEAD -&gt; origin/master
  remotes/origin/master</code></pre></div></blockquote></div><p>You have cloned the whole repository.<br />By definition &quot;master&quot; is upstream. <br />It depends and the view, if it&#039;s stable of testing.<br />In OpenWRT/LEDE terms this is testing and if you do<br /></p><div class="codebox"><pre><code>git branch -av</code></pre></div><p>you will see all SHA1 hashes are the same.</p><p>remote/origin<br />are the branches from your &quot;origin&quot; repository your initially cloned from.<br />master<br />is your local.</p><p>I forgot to tell, please create a local branch you can work on with<br /></p><div class="codebox"><pre><code>git checkout -b router</code></pre></div><p>with &quot;router&quot; as your local branch name.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342618">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">liveonlinux</div>
					<div class="post-datetime">
						31 Oct 2016, 13:14					</div>
				</div>
				<div class="post-content content">
					<p>Hi, elektroman,</p><p>1. I compiled the git lede code, and the router boot ok now.&nbsp; The router is mt7628 + mt7610. The mt7628 is for 2.4GHz, and the mt7610 for 5GHz. Now the 2.4GHz is ok, but cannot find the 5GHz interface.</p><p>2. I copy the mt7628 dts/dtsi file from git lede code to chaos calmer openwrt code, but it&#039;s still failed to boot. I don&#039;t know why.</p><div class="codebox"><pre><code>[    0.000000] Board has DDR2
[    0.000000] Analog PMU set to hw control
[    0.000000] Digital PMU set to hw control
[    0.000000] SoC Type: MediaTek MT7628AN ver:1 eco:2
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU0 revision is: 00019655 (MIPS 24KEc)
[    0.000000] MIPS: machine is Mediatek MT7628AN evaluation board
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 02000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone ranges:
[    0.000000]   Normal   [mem 0x00000000-0x01ffffff]
[    0.000000] Movable zone start for each node
[    0.000000] Early memory node ranges
[    0.000000]   node   0: [mem 0x00000000-0x01ffffff]
[    0.000000] Initmem setup node 0 [mem 0x00000000-0x01ffffff]
[    0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, PIPT, no aliases, linesize 32 bytes
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
[    0.000000] Kernel command line: console=ttyS0,57600 rootfstype=squashfs,jffs2
[    0.000000] PID hash table entries: 128 (order: -3, 512 bytes)
[    0.000000] Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
[    0.000000] Writing ErrCtl register=00036a3a
[    0.000000] Readback ErrCtl register=00036a3a
[    0.000000] Memory: 28876K/32768K available (2513K kernel code, 126K rwdata, 516K rodata, 164K init, 186K bss, 3892K reserved)
[    0.000000] SLUB: HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.000000] NR_IRQS:256
[    0.000000] intc: using register map from devicetree
[    0.000000] CPU Clock: 575MHz
[    0.000000] clocksource_of_init: no matching clocksources found
[    0.000000] Calibrating delay loop... 380.92 BogoMIPS (lpj=1904640)
[    0.060000] pid_max: default: 32768 minimum: 301
[    0.060000] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.070000] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.080000] pinctrl core: initialized pinctrl subsystem
[    0.090000] NET: Registered protocol family 16
[    0.100000] rt2880-pinmux pinctrl: invalid group &quot;jtag&quot; for function &quot;gpio&quot;
[    0.120000] mt7621_gpio 10000600.gpio: registering 32 gpios
[    0.130000] mt7621_gpio 10000600.gpio: registering 32 gpios
[    0.140000] mt7621_gpio 10000600.gpio: registering 32 gpios
[    0.150000] Switched to clocksource MIPS
[    0.160000] NET: Registered protocol family 2
[    0.160000] TCP established hash table entries: 1024 (order: 0, 4096 bytes)
[    0.180000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
[    0.190000] TCP: Hash tables configured (established 1024 bind 1024)
[    0.200000] TCP: reno registered
[    0.210000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.220000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.230000] NET: Registered protocol family 1
[    0.240000] futex hash table entries: 256 (order: -1, 3072 bytes)
[    0.260000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.270000] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.300000] msgmni has been set to 56
[    0.310000] io scheduler noop registered
[    0.320000] io scheduler deadline registered (default)
[    0.330000] Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled
[    0.340000] console [ttyS0] disabled
[    0.350000] 10000c00.uartlite: ttyS0 at MMIO 0x10000c00 (irq = 28, base_baud = 2500000) is a 16550A
[    0.370000] console [ttyS0] enabled
[    0.370000] console [ttyS0] enabled
[    0.380000] bootconsole [early0] disabled
[    0.380000] bootconsole [early0] disabled
[    0.400000] spi-mt7621 10000b00.spi: sys_freq: 191666666
[    0.420000] ralink_soc_eth 10100000.ethernet: generated random MAC address 5e:97:82:a8:97:47
[    0.440000] ralink_soc_eth 10100000.ethernet eth0: ralink at 0xb0100000, irq 5
[    0.460000] mt7621_wdt 10000120.watchdog: Initialized
[    0.470000] TCP: cubic registered
[    0.470000] NET: Registered protocol family 17
[    0.480000] bridge: automatic filtering via arp/ip/ip6tables has been deprecated. Update your scripts to load br_netfilter if you need this.
[    0.510000] 8021q: 802.1Q VLAN Support v1.8
[    0.520000] VFS: Cannot open root device &quot;(null)&quot; or unknown-block(0,0): error -6
[    0.530000] Please append a correct &quot;root=&quot; boot option; here are the available partitions:
[    0.550000] Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0)
[    0.550000] ---[ end Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0)
[   82.680000] random: nonblocking pool is initialized</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342719">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">liveonlinux</div>
					<div class="post-datetime">
						1 Nov 2016, 16:40					</div>
				</div>
				<div class="post-content content">
					<p>Hi, elektroman, I find two broadcom chip router. One use the same design with netgear R6300v2, the other is same as netgear R7000.&nbsp; I compiled the git lede source code for the two router, and I choose the config file for R6300v2 and R7000.</p><p>When I flashing the firmware for netgear products into my router,&nbsp; the seiral print: TRX magic number error. I find that, the netgear&#039;s router firmware has a 58 bytes head more than my router, so I cut it off (use the dd command). Then flashing is ok.</p><p>But both router failed to boot. </p><div class="codebox"><pre><code>Digital core power voltage set to 0.9375V
Decompressing...done


CFE version 6.37.14.62 (r436032) based on BBP 1.0.37 for BCM947XX (32bit,SP,)
Copyright (C) 2000-2008 Broadcom Corporation.

Init Arena
Init Devs.
Boot partition size = 262144(0x40000)
DDR Clock: 400 MHz
Info: DDR frequency set from clkfreq=800,*400*
et0: Broadcom BCM47XX 10/100/1000 Mbps Ethernet Controller 6.37.14.62 (r436032)
CPU type 0x0: 800MHz
Tot mem: 131072 KBytes

CFE mem:    0x00F00000 - 0x01791D54 (8985940)
Data:       0x00F4A3CC - 0x00F4A88C (1216)
BSS:        0x00F4A898 - 0x00F8FD54 (283836)
Heap:       0x00F8FD54 - 0x0178FD54 (8388608)
Stack:      0x0178FD54 - 0x01791D54 (8192)
Text:       0x00F00000 - 0x00F416F8 (268024)

Device eth0:  hwaddr 00-90-4C-0F-F4-6C, ipaddr 192.168.1.1, mask 255.255.255.0
        gateway not set, nameserver not set
Startup canceled
CFE&gt; ^C
CFE&gt; ^C
CFE&gt; ^C
CFE&gt; ^C
CFE&gt; ^C
CFE&gt; ^C
CFE&gt; nvram erase
*** command status = 0
CFE&gt; 
TRX file size = 6684672
Programming...done. 6684672 bytes written
Digital core power voltage set to 0.9375V
Decompressing...done


CFE version 6.37.14.62 (r436032) based on BBP 1.0.37 for BCM947XX (32bit,SP,)
Copyright (C) 2000-2008 Broadcom Corporation.

Init Arena
Init Devs.
Boot partition size = 262144(0x40000)
DDR Clock: 400 MHz
Info: DDR frequency set from clkfreq=800,*400*
et0: Broadcom BCM47XX 10/100/1000 Mbps Ethernet Controller 6.37.14.62 (r436032)
CPU type 0x0: 800MHz
Tot mem: 131072 KBytes

CFE mem:    0x00F00000 - 0x01791D54 (8985940)
Data:       0x00F4A3CC - 0x00F4A88C (1216)
BSS:        0x00F4A898 - 0x00F8FD54 (283836)
Heap:       0x00F8FD54 - 0x0178FD54 (8388608)
Stack:      0x0178FD54 - 0x01791D54 (8192)
Text:       0x00F00000 - 0x00F416F8 (268024)

Committing NVRAM...done
Waiting for reset button release...donDigital core power voltage set to 0.9375V
Decompressing...done


CFE version 6.37.14.62 (r436032) based on BBP 1.0.37 for BCM947XX (32bit,SP,)
Copyright (C) 2000-2008 Broadcom Corporation.

Init Arena
Init Devs.
Boot partition size = 262144(0x40000)
DDR Clock: 400 MHz
Info: DDR frequency set from clkfreq=800,*400*
et0: Broadcom BCM47XX 10/100/1000 Mbps Ethernet Controller 6.37.14.62 (r436032)
CPU type 0x0: 800MHz
Tot mem: 131072 KBytes

CFE mem:    0x00F00000 - 0x01791D54 (8985940)
Data:       0x00F4A3CC - 0x00F4A88C (1216)
BSS:        0x00F4A898 - 0x00F8FD54 (283836)
Heap:       0x00F8FD54 - 0x0178FD54 (8388608)
Stack:      0x0178FD54 - 0x01791D54 (8192)
Text:       0x00F00000 - 0x00F416F8 (268024)

Device eth0:  hwaddr 00-90-4C-0F-F4-6C, ipaddr 192.168.1.1, mask 255.255.255.0
        gateway not set, nameserver not set
Loader:raw Filesys:tftp Dev:eth0 File:: Options:(null)
Loading: Failed.
Could not load :: Timeout occured
Loader:raw Filesys:raw Dev:nflash0.os File: Options:(null)
Loading: .. 1539871 bytes read
Entry at 0x00008000
Closing network.
Starting program at 0x00008000
Uncompressing Linux... done, booting the kernel.
[    0.000000] Booting Linux on physical CPU 0x0
[    0.000000] Linux version 4.4.27 (wangfeng@software) (gcc version 5.4.0 (LEDE GCC 5.4.0 r1967) ) #0 SMP Mon Oct 24 20:52:44 2016
[    0.000000] CPU: ARMv7 Processor [413fc090] revision 0 (ARMv7), cr=10c5387d
[    0.000000] CPU: PIPT / VIPT nonaliasing data cache, VIPT aliasing instruction cache
[    0.000000] Machine model: Netgear R6300 V2 (BCM4708)
[    0.000000] Memory policy: Data cache writealloc
[    0.000000] PERCPU: Embedded 11 pages/cpu @c6dce000 s12928 r8192 d23936 u45056
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 65280
[    0.000000] Kernel command line: console=ttyS0,115200
[    0.000000] PID hash table entries: 512 (order: -1, 2048 bytes)
[    0.000000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)
[    0.000000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Memory: 254748K/262144K available (3202K kernel code, 102K rwdata, 1208K rodata, 220K init, 280K bss, 7396K reserved, 0K cma-reserved, 131072K highmem)
[    0.000000] Virtual kernel memory layout:
[    0.000000]     vector  : 0xffff0000 - 0xffff1000   (   4 kB)
[    0.000000]     fixmap  : 0xffc00000 - 0xfff00000   (3072 kB)
[    0.000000]     vmalloc : 0xc8800000 - 0xff800000   ( 880 MB)
[    0.000000]     lowmem  : 0xc0000000 - 0xc8000000   ( 128 MB)
[    0.000000]     pkmap   : 0xbfe00000 - 0xc0000000   (   2 MB)
[    0.000000]     modules : 0xbf000000 - 0xbfe00000   (  14 MB)
[    0.000000]       .text : 0xc0008000 - 0xc0456e44   (4412 kB)
[    0.000000]       .init : 0xc0457000 - 0xc048e000   ( 220 kB)
[    0.000000]       .data : 0xc048e000 - 0xc04a7b2c   ( 103 kB)
[    0.000000]        .bss : 0xc04a7b2c - 0xc04eddec   ( 281 kB)
[    0.000000] SLUB: HWalign=64, Order=0-3, MinObjects=0, CPUs=2, Nodes=1
[    0.000000] Hierarchical RCU implementation.
[    0.000000] NR_IRQS:16 nr_irqs:16 16
[    0.000000] L2C: DT/platform modifies aux control register: 0x0a130000 -&gt; 0x0a530000
[    0.000000] L2C-310 enabling early BRESP for Cortex-A9
[    0.000000] L2C-310 full line of zeros enabled for Cortex-A9
[    0.000000] L2C-310 ID prefetch enabled, offset 1 lines
[    0.000000] L2C-310 dynamic clock gating enabled, standby mode enabled
[    0.000000] L2C-310 cache controller enabled, 16 ways, 256 kB
[    0.000000] L2C-310: CACHE_ID 0x410000c8, AUX_CTRL 0x7e530001
[    0.000015] sched_clock: 64 bits at 400MHz, resolution 2ns, wraps every 4398046511103ns
[    0.000039] clocksource: arm_global_timer: mask: 0xffffffffffffffff max_cycles: 0x5c4093a7d1, max_idle_ns: 440795210635 ns
[    0.000255] Calibrating delay loop... 1594.16 BogoMIPS (lpj=7970816)
[    0.090144] pid_max: default: 32768 minimum: 301
[    0.090235] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.090247] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.090792] CPU: Testing write buffer coherency: ok
[    0.091089] CPU0: thread -1, cpu 0, socket 0, mpidr 80000000
[    0.091181] Setting up static identity map for 0x82a0 - 0x82d4
[    0.130139] CPU1: thread -1, cpu 1, socket 0, mpidr 80000001
[    0.130228] Brought up 2 CPUs
[    0.130249] SMP: Total of 2 processors activated (3188.32 BogoMIPS).
[    0.130259] CPU: WARNING: CPU(s) started in wrong/inconsistent modes (primary CPU mode 0x13)
[    0.130266] CPU: This may indicate a broken bootloader or firmware.
[    0.132571] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604462750000 ns
[    0.132696] pinctrl core: initialized pinctrl subsystem
[    0.133182] NET: Registered protocol family 16
[    0.133956] DMA: preallocated 256 KiB pool for atomic coherent allocations
[    0.162509] clocksource: Switched to clocksource arm_global_timer
[    0.163864] NET: Registered protocol family 2
[    0.164536] TCP established hash table entries: 1024 (order: 0, 4096 bytes)
[    0.164569] TCP bind hash table entries: 1024 (order: 1, 8192 bytes)
[    0.164595] TCP: Hash tables configured (established 1024 bind 1024)
[    0.164692] UDP hash table entries: 256 (order: 1, 8192 bytes)
[    0.164727] UDP-Lite hash table entries: 256 (order: 1, 8192 bytes)
[    0.164971] NET: Registered protocol family 1
[    0.166253] futex hash table entries: 512 (order: 3, 32768 bytes)
[    0.166456] Crashlog allocated RAM at address 0x3f00000
[    0.172506] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.172541] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.174483] bounce: pool size: 64 pages
[    0.174510] io scheduler noop registered
[    0.174525] io scheduler deadline registered (default)
[    0.175048] Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled
[    0.175810] console [ttyS0] disabled
[    0.175871] 18000300.serial: ttyS0 at MMIO 0x18000300 (irq = 18, base_baud = 6250000) is a 16550
[    0.607329] console [ttyS0] enabled
[    0.612470] nand: Could not find valid ONFI parameter page; aborting
[    0.618823] nand: device found, Manufacturer ID: 0x01, Chip ID: 0xf1
[    0.625179] nand: AMD/Spansion NAND 128MiB 3,3V 8-bit
[    0.630216] nand: 128 MiB, SLC, erase size: 128 KiB, page size: 2048, OOB size: 64
[    0.637769] iproc_nand 18028000.nand: detected 128MiB total, 128KiB blocks, 2KiB pages, 16B OOB, 8-bit, BCH-8
[    0.647655] Scanning device for bad blocks
[    0.752255] Bad eraseblock 123 at 0x000000f60000
[    1.314718] Bad eraseblock 865 at 0x000006c20000
[    1.393633] Bad eraseblock 965 at 0x0000078a0000
[    1.442035] mtd_read error while parsing (offset: 0x0): -74
[    1.448041] mtd_read error while parsing (offset: 0x20000): -74
[    1.456032] mtd_read error while parsing (offset: 0x80000): -74
[    1.466141] random: nonblocking pool is initialized
[    1.476237] mtd_read error while parsing (offset: 0x200000): -74
[    1.482679] mtd_read error while parsing (offset: 0x220000): -74
[    1.489110] mtd_read error while parsing (offset: 0x240000): -74
[    1.495551] mtd_read error while parsing (offset: 0x260000): -74
[    1.501997] mtd_read error while parsing (offset: 0x280000): -74
[    1.508430] mtd_read error while parsing (offset: 0x2A0000): -74
[    1.514870] mtd_read error while parsing (offset: 0x2C0000): -74
[    1.521313] mtd_read error while parsing (offset: 0x2E0000): -74
[    1.527740] mtd_read error while parsing (offset: 0x300000): -74
[    1.534180] mtd_read error while parsing (offset: 0x320000): -74

...

[    7.562264] mtd_read error while parsing (offset: 0x7F60000): -74
[    7.568751] mtd_read error while parsing (offset: 0x7F80000): -74
[    7.575244] mtd_read error while parsing (offset: 0x7FA0000): -74
[    7.581739] mtd_read error while parsing (offset: 0x7FC0000): -74
[    7.588227] mtd_read error while parsing (offset: 0x7FE0000): -74
[    7.597346] libphy: Fixed MDIO Bus: probed
[    7.601564] bgmac_bcma: Broadcom 47xx GBit MAC driver loaded
[    7.607461] bcma: bus0: Found chip with id 53010, rev 0x00 and package 0x02
[    7.614489] bcma: bus0: Core 0 found: ChipCommon (manuf 0x4BF, id 0x800, rev 0x2A, class 0x0)
[    7.623136] bcma: bus0: Core 1 found: Chipcommon B (manuf 0x4BF, id 0x50B, rev 0x01, class 0x0)
[    7.631943] bcma: bus0: Core 2 found: DMA (manuf 0x4BF, id 0x502, rev 0x01, class 0x0)
[    7.639954] bcma: bus0: Core 3 found: GBit MAC (manuf 0x4BF, id 0x82D, rev 0x05, class 0x0)
[    7.648413] bcma: bus0: Core 4 found: GBit MAC (manuf 0x4BF, id 0x82D, rev 0x05, class 0x0)
[    7.656870] bcma: bus0: Core 5 found: GBit MAC (manuf 0x4BF, id 0x82D, rev 0x05, class 0x0)
[    7.665318] bcma: bus0: Core 6 found: GBit MAC (manuf 0x4BF, id 0x82D, rev 0x05, class 0x0)
[    7.673745] bcma: bus0: Core 7 found: PCIe Gen 2 (manuf 0x4BF, id 0x501, rev 0x01, class 0x0)
[    7.682348] bcma: bus0: Core 8 found: PCIe Gen 2 (manuf 0x4BF, id 0x501, rev 0x01, class 0x0)
[    7.690953] bcma: bus0: Core 9 found: PCIe Gen 2 (manuf 0x4BF, id 0x501, rev 0x01, class 0x0)
[    7.699574] bcma: bus0: Core 10 found: ARM Cortex A9 core (ihost) (manuf 0x4BF, id 0x510, rev 0x01, class 0x0)
[    7.709653] bcma: bus0: Core 11 found: USB 2.0 (manuf 0x4BF, id 0x504, rev 0x01, class 0x0)
[    7.718083] bcma: bus0: Core 12 found: USB 3.0 (manuf 0x4BF, id 0x505, rev 0x01, class 0x0)
[    7.726543] bcma: bus0: Core 13 found: SDIO3 (manuf 0x4BF, id 0x503, rev 0x01, class 0x0)
[    7.734825] bcma: bus0: Core 14 found: ARM Cortex A9 JTAG (manuf 0x4BF, id 0x506, rev 0x01, class 0x0)
[    7.744234] bcma: bus0: Core 15 found: Denali DDR2/DDR3 memory controller (manuf 0x4BF, id 0x507, rev 0x01, class 0x0)
[    7.755025] bcma: bus0: Core 16 found: ROM (manuf 0x4BF, id 0x508, rev 0x01, class 0x0)
[    7.763130] bcma: bus0: Core 17 found: NAND flash controller (manuf 0x4BF, id 0x509, rev 0x01, class 0x0)
[    7.772789] bcma: bus0: Core 18 found: SPI flash controller (manuf 0x4BF, id 0x50A, rev 0x01, class 0x0)
[    7.782255] bcma: bus0: Flash type not supported
[    7.788459] m25p80 spi32766.0: unrecognized JEDEC id bytes: ff, ff, ff
[    7.795213] m25p80 spi32766.0: using Read Manufacturer / Device ID command (0x90) returned ff ff
[    7.803995] m25p80: probe of spi32766.0 failed with error -2
[    7.810235] bgmac_bcma bcma0:3: Found PHY addr: 0
[    7.815011] bgmac_bcma bcma0:3: Invalid MAC addr: 00:00:00:00:00:00
[    7.821306] bgmac_bcma bcma0:3: Using random MAC: 56:84:cf:0a:5e:9a
[    7.829466] b53_common: found switch: BCM53011, rev 5
[    7.835453] bgmac_bcma bcma0:4: Found PHY addr: 0
[    7.840304] bgmac_bcma bcma0:4: Invalid MAC addr: 00:00:00:00:00:00
[    7.846574] bgmac_bcma bcma0:4: Using random MAC: 52:c4:a1:d7:ea:1f
[    7.854333] bgmac_bcma bcma0:5: Found PHY addr: 0
[    7.859119] bgmac_bcma bcma0:5: Invalid MAC addr: 00:00:00:00:00:00
[    7.865440] bgmac_bcma bcma0:5: Using random MAC: be:d9:aa:8a:83:83
[    7.873208] bgmac_bcma bcma0:6: Unsupported core_unit 3
[    7.878453] bgmac_bcma: probe of bcma0:6 failed with error -524
[    7.990287] pcie_iproc_bcma bcma0:7: PCI host bridge to bus 0000:00
[    7.996548] pci_bus 0000:00: root bus resource [mem 0x08000000-0x0fffffff]
[    8.003431] pcie_iproc_bcma bcma0:7: link: UP
[    8.008059] PCI: bus0: Fast back to back transfers disabled
[    8.013639] pci 0000:00:00.0: bridge configuration invalid ([bus 00-00]), reconfiguring
[    8.022137] PCI: bus1: Fast back to back transfers disabled
[    8.027754] pci 0000:00:00.0: BAR 8: assigned [mem 0x08000000-0x080fffff]
[    8.034546] pci 0000:01:00.0: BAR 0: assigned [mem 0x08000000-0x08003fff 64bit]
[    8.041846] pci 0000:00:00.0: PCI bridge to [bus 01]
[    8.046796] pci 0000:00:00.0:   bridge window [mem 0x08000000-0x080fffff]
[    8.160272] pcie_iproc_bcma bcma0:8: PCI host bridge to bus 0001:00
[    8.166531] pci_bus 0001:00: root bus resource [mem 0x40000000-0x47ffffff]
[    8.173409] pcie_iproc_bcma bcma0:8: link: UP
[    8.178037] PCI: bus0: Fast back to back transfers disabled
[    8.183616] pci 0001:00:00.0: bridge configuration invalid ([bus 00-00]), reconfiguring
[    8.192094] PCI: bus1: Fast back to back transfers disabled
[    8.197709] pci 0001:00:00.0: BAR 8: assigned [mem 0x40000000-0x400fffff]
[    8.204500] pci 0001:01:00.0: BAR 0: assigned [mem 0x40000000-0x40007fff 64bit]
[    8.211801] pci 0001:00:00.0: PCI bridge to [bus 01]
[    8.216744] pci 0001:00:00.0:   bridge window [mem 0x40000000-0x400fffff]
[    8.330288] pcie_iproc_bcma bcma0:9: PCI host bridge to bus 0002:00
[    8.336539] pci_bus 0002:00: root bus resource [mem 0x48000000-0x4fffffff]
[    8.343410] pcie_iproc_bcma bcma0:9: PHY or data link is INACTIVE!
[    8.349562] pcie_iproc_bcma bcma0:9: no PCIe EP device detected
[    8.355551] pcie_iproc_bcma bcma0:9: PCIe controller setup failed
[    8.362902] bcm47xx-wdt bcm47xx-wdt.0: BCM47xx Watchdog Timer enabled (30 seconds, Software Timer)
[    8.371880] bcma: bus0: Bus registered
[    8.375785] pci 0000:00:00.0: enabling device (0140 -&gt; 0142)
[    8.381469] bcma-pci-bridge 0000:01:00.0: enabling device (0140 -&gt; 0142)
[    8.388179] bcma: bus1: Found chip with id 0x4331, rev 0x02 and package 0x08
[    8.395239] bcma: bus1: Core 0 found: ChipCommon (manuf 0x4BF, id 0x800, rev 0x25, class 0x0)
[    8.403757] bcma: bus1: Core 1 found: IEEE 802.11 (manuf 0x4BF, id 0x812, rev 0x1D, class 0x0)
[    8.412373] bcma: bus1: Core 2 found: PCIe (manuf 0x4BF, id 0x820, rev 0x13, class 0x0)
[    8.544268] bcma: bus1: Invalid SPROM read from the PCIe card, trying to use fallback SPROM
[    8.590411] bcma: bus1: Bus registered
[    8.594219] pci 0001:00:00.0: enabling device (0140 -&gt; 0142)
[    8.599866] bcma-pci-bridge 0001:01:00.0: enabling device (0140 -&gt; 0142)
[    8.606598] bcma: bus2: Found chip with id 0x4360, rev 0x03 and package 0x01
[    8.613659] bcma: bus2: Core 0 found: ChipCommon (manuf 0x4BF, id 0x800, rev 0x2B, class 0x0)
[    8.622170] bcma: bus2: Core 1 found: IEEE 802.11 (manuf 0x4BF, id 0x812, rev 0x2A, class 0x0)
[    8.630777] bcma: bus2: Core 2 found: ARM CR4 (manuf 0x4BF, id 0x83E, rev 0x02, class 0x0)
[    8.639025] bcma: bus2: Core 3 found: PCIe Gen2 (manuf 0x4BF, id 0x83C, rev 0x01, class 0x0)
[    8.647450] bcma: bus2: Core 4 found: USB 2.0 Device (manuf 0x4BF, id 0x81A, rev 0x11, class 0x0)
[    8.687832] bcma: bus2: Invalid SPROM read from the PCIe card, trying to use fallback SPROM
[    8.698786] bcma: bus2: Bus registered
[    8.703744] NET: Registered protocol family 10
[    8.709438] NET: Registered protocol family 17
[    8.714009] bridge: automatic filtering via arp/ip/ip6tables has been deprecated. Update your scripts to load br_netfilter if you need this.
[    8.726595] 8021q: 802.1Q VLAN Support v1.8
[    8.730857] Registering SWP/SWPB emulation handler
[    8.738938] VFS: Cannot open root device &quot;(null)&quot; or unknown-block(0,0): error -6
[    8.746455] Please append a correct &quot;root=&quot; boot option; here are the available partitions:
[    8.754797] 1f00          131072 mtdblock0  (driver?)
[    8.759836] Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0)
[    8.768060] CPU1: stopping
[    8.770768] CPU: 1 PID: 0 Comm: swapper/1 Not tainted 4.4.27 #0
[    8.776660] Hardware name: BCM5301X
[    8.780135] Backtrace: 
[    8.782606] [&lt;c0017074&gt;] (dump_backtrace) from [&lt;c0017270&gt;] (show_stack+0x18/0x1c)
[    8.790139]  r7:c7859f60 r6:00000000 r5:60000193 r4:00000000
[    8.795827] [&lt;c0017258&gt;] (show_stack) from [&lt;c017d218&gt;] (dump_stack+0x84/0xa4)
[    8.803024] [&lt;c017d194&gt;] (dump_stack) from [&lt;c0018a58&gt;] (handle_IPI+0xf4/0x19c)
[    8.810295]  r5:00000001 r4:c04a7ca8
[    8.813871] [&lt;c0018964&gt;] (handle_IPI) from [&lt;c000948c&gt;] (gic_handle_irq+0x80/0x9c)
[    8.821399]  r7:c049aeec r6:c7859f60 r5:c0490708 r4:c8802100
[    8.827067] [&lt;c000940c&gt;] (gic_handle_irq) from [&lt;c000a074&gt;] (__irq_svc+0x54/0x70)
[    8.834516] Exception stack(0xc7859f60 to 0xc7859fa8)
[    8.839550] 9f60: 00000000 000012ec c6dd9254 c000ae40 c048a224 c0490498 10c0387d c04a7cb0
[    8.847689] 9f80: 0000406a 413fc090 00000000 c7859fbc c7859fc0 c7859fb0 c0014560 c0014564
[    8.855822] 9fa0: 60000013 ffffffff
[    8.859292]  r9:413fc090 r8:0000406a r7:c7859f94 r6:ffffffff r5:60000013 r4:c0014564
[    8.867050] [&lt;c0014530&gt;] (arch_cpu_idle) from [&lt;c004fc34&gt;] (default_idle_call+0x30/0x34)
[    8.875104] [&lt;c004fc04&gt;] (default_idle_call) from [&lt;c004fd68&gt;] (cpu_startup_entry+0x130/0x194)
[    8.883674] [&lt;c004fc38&gt;] (cpu_startup_entry) from [&lt;c0018764&gt;] (secondary_start_kernel+0x10c/0x128)
[    8.892677] [&lt;c0018658&gt;] (secondary_start_kernel) from [&lt;0000954c&gt;] (0x954c)
[    8.899685]  r5:00000051 r4:0784006a
[    8.906260] Rebooting in 1 seconds..Digital core power voltage set to 0.9375V
Decompressing...done


CFE version 6.37.14.62 (r436032) based on BBP 1.0.37 for BCM947XX (32bit,SP,)
Copyright (C) 2000-2008 Broadcom Corporation.

Init Arena
Init Devs.
Boot partition size = 262144(0x40000)
DDR Clock: 400 MHz
Info: DDR frequency set from clkfreq=800,*400*
et0: Broadcom BCM47XX 10/100/1000 Mbps Ethernet Controller 6.37.14.62 (r436032)
CPU type 0x0: 800MHz
Tot mem: 131072 KBytes

CFE mem:    0x00F00000 - 0x01791D54 (8985940)
Data:       0x00F4A3CC - 0x00F4A88C (1216)
BSS:        0x00F4A898 - 0x00F8FD54 (283836)
Heap:       0x00F8FD54 - 0x0178FD54 (8388608)
Stack:      0x0178FD54 - 0x01791D54 (8192)
Text:       0x00F00000 - 0x00F416F8 (268024)

Device eth0:  hwaddr 00-90-4C-0F-F4-6C, ipaddr 192.168.1.1, mask 255.255.255.0
        gateway not set, nameserver not set
Loader:raw Filesys:tftp Dev:eth0 File:: Options:(null)
Loading: </code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342720">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">liveonlinux</div>
					<div class="post-datetime">
						1 Nov 2016, 16:44					</div>
				</div>
				<div class="post-content content">
					<p>And another router(same design as R7000):</p><div class="codebox"><pre><code>Starting program at 0x00008000
Uncompressing Linux... done, booting the kernel.
[    0.000000] Booting Linux on physical CPU 0x0
[    0.000000] Linux version 4.4.27 (wangfeng@software) (gcc version 5.4.0 (LEDE GCC 5.4.0 r1967) ) #0 SMP Mon Oct 24 20:52:44 2016
[    0.000000] CPU: ARMv7 Processor [413fc090] revision 0 (ARMv7), cr=10c5387d
[    0.000000] CPU: PIPT / VIPT nonaliasing data cache, VIPT aliasing instruction cache
[    0.000000] Machine model: Netgear R7000
[    0.000000] Memory policy: Data cache writealloc
[    0.000000] Hit pending asynchronous external abort (FSR=0x00001c06) during first unmask, this is most likely caused by a firmware/bootloader bug.
[    0.000000] PERCPU: Embedded 11 pages/cpu @c6dce000 s12928 r8192 d23936 u45056
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 65280
[    0.000000] Kernel command line: console=ttyS0,115200
[    0.000000] PID hash table entries: 512 (order: -1, 2048 bytes)
[    0.000000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)
[    0.000000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Memory: 254748K/262144K available (3202K kernel code, 102K rwdata, 1208K rodata, 220K init, 280K bss, 7396K reserved, 0K cma-reserved, 131072K highmem)
[    0.000000] Virtual kernel memory layout:
[    0.000000]     vector  : 0xffff0000 - 0xffff1000   (   4 kB)
[    0.000000]     fixmap  : 0xffc00000 - 0xfff00000   (3072 kB)
[    0.000000]     vmalloc : 0xc8800000 - 0xff800000   ( 880 MB)
[    0.000000]     lowmem  : 0xc0000000 - 0xc8000000   ( 128 MB)
[    0.000000]     pkmap   : 0xbfe00000 - 0xc0000000   (   2 MB)
[    0.000000]     modules : 0xbf000000 - 0xbfe00000   (  14 MB)
[    0.000000]       .text : 0xc0008000 - 0xc0456e44   (4412 kB)
[    0.000000]       .init : 0xc0457000 - 0xc048e000   ( 220 kB)
[    0.000000]       .data : 0xc048e000 - 0xc04a7b2c   ( 103 kB)
[    0.000000]        .bss : 0xc04a7b2c - 0xc04eddec   ( 281 kB)
[    0.000000] SLUB: HWalign=64, Order=0-3, MinObjects=0, CPUs=2, Nodes=1
[    0.000000] Hierarchical RCU implementation.
[    0.000000] NR_IRQS:16 nr_irqs:16 16
[    0.000000] L2C: DT/platform modifies aux control register: 0x0a130000 -&gt; 0x0a530000
[    0.000000] L2C-310 enabling early BRESP for Cortex-A9
[    0.000000] L2C-310 full line of zeros enabled for Cortex-A9
[    0.000000] L2C-310 ID prefetch enabled, offset 1 lines
[    0.000000] L2C-310 dynamic clock gating enabled, standby mode enabled
[    0.000000] L2C-310 cache controller enabled, 16 ways, 256 kB
[    0.000000] L2C-310: CACHE_ID 0x410000c8, AUX_CTRL 0x7e530001
[    0.000011] sched_clock: 64 bits at 500MHz, resolution 2ns, wraps every 4398046511103ns
[    0.000029] clocksource: arm_global_timer: mask: 0xffffffffffffffff max_cycles: 0xe6a171a037, max_idle_ns: 881590485102 ns
[    0.000197] Calibrating delay loop... 1987.37 BogoMIPS (lpj=9936896)
[    0.060107] pid_max: default: 32768 minimum: 301
[    0.060178] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.060187] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.060604] CPU: Testing write buffer coherency: ok
[    0.060817] CPU0: thread -1, cpu 0, socket 0, mpidr 80000000
[    0.060886] Setting up static identity map for 0x82a0 - 0x82d4
[    0.120136] CPU1: thread -1, cpu 1, socket 0, mpidr 80000001
[    0.120204] Brought up 2 CPUs
[    0.120220] SMP: Total of 2 processors activated (3981.31 BogoMIPS).
[    0.120227] CPU: WARNING: CPU(s) started in wrong/inconsistent modes (primary CPU mode 0x13)
[    0.120232] CPU: This may indicate a broken bootloader or firmware.
[    0.122088] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604462750000 ns
[    0.122187] pinctrl core: initialized pinctrl subsystem
[    0.122550] NET: Registered protocol family 16
[    0.123125] DMA: preallocated 256 KiB pool for atomic coherent allocations
[    0.151961] clocksource: Switched to clocksource arm_global_timer
[    0.152897] NET: Registered protocol family 2
[    0.153332] TCP established hash table entries: 1024 (order: 0, 4096 bytes)
[    0.153354] TCP bind hash table entries: 1024 (order: 1, 8192 bytes)
[    0.153374] TCP: Hash tables configured (established 1024 bind 1024)
[    0.153424] UDP hash table entries: 256 (order: 1, 8192 bytes)
[    0.153450] UDP-Lite hash table entries: 256 (order: 1, 8192 bytes)
[    0.153612] NET: Registered protocol family 1
[    0.154435] futex hash table entries: 512 (order: 3, 32768 bytes)
[    0.154573] Crashlog allocated RAM at address 0x3f00000
[    0.158943] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.158968] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.160669] bounce: pool size: 64 pages
[    0.160690] io scheduler noop registered
[    0.160702] io scheduler deadline registered (default)
[    0.161097] Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled
[    0.161630] console [ttyS0] disabled
[    0.161676] 18000300.serial: ttyS0 at MMIO 0x18000300 (irq = 18, base_baud = 7812500) is a 16550
[    0.608298] console [ttyS0] enabled
[    0.613066] nand: Could not find valid ONFI parameter page; aborting
[    0.619458] nand: device found, Manufacturer ID: 0x01, Chip ID: 0xf1
[    0.625852] nand: AMD/Spansion NAND 128MiB 3,3V 8-bit
[    0.630921] nand: 128 MiB, SLC, erase size: 128 KiB, page size: 2048, OOB size: 64
[    0.638520] iproc_nand 18028000.nand: detected 128MiB total, 128KiB blocks, 2KiB pages, 16B OOB, 8-bit, BCH-8
[    0.648472] Scanning device for bad blocks
[    0.970547] Bad eraseblock 509 at 0x000003fa0000
[    1.286587] mtd_read error while parsing (offset: 0x0): -74
[    1.292558] mtd_read error while parsing (offset: 0x20000): -74
[    1.300176] mtd_read error while parsing (offset: 0x80000): -74
[    1.308856] random: nonblocking pool is initialized
[    1.318634] mtd_read error while parsing (offset: 0x200000): -74
[    1.325034] mtd_read error while parsing (offset: 0x220000): -74
[    1.331432] mtd_read error while parsing (offset: 0x240000): -74
[    1.337818] mtd_read error while parsing (offset: 0x260000): -74
[    1.344216] mtd_read error while parsing (offset: 0x280000): -74
[    1.350612] mtd_read error while parsing (offset: 0x2A0000): -74
[    1.357000] mtd_read error while parsing (offset: 0x2C0000): -74
[    1.363391] mtd_read error while parsing (offset: 0x2E0000): -74
[    1.369778] mtd_read error while parsing (offset: 0x300000): -74
[    1.376168] mtd_read error while parsing (offset: 0x320000): -74
[    1.382566] mtd_read error while parsing (offset: 0x340000): -74
[    1.388953] mtd_read error while parsing (offset: 0x360000): -74
[    1.395352] mtd_read error while parsing (offset: 0x380000): -74
[    1.401747] mtd_read error while parsing (offset: 0x3A0000): -74
[    1.408128] mtd_read error while parsing (offset: 0x3C0000): -74
[    1.414527] mtd_read error while parsing (offset: 0x3E0000): -74
[    1.420923] mtd_read error while parsing (offset: 0x400000): -74
[    1.427312] mtd_read error while parsing (offset: 0x420000): -74
[    1.433716] mtd_read error while parsing (offset: 0x440000): -74
[    1.440105] mtd_read error while parsing (offset: 0x460000): -74</code></pre></div><br /><p>I know the initramfs is a very importand tool for debugging. Can you tell me how to use it after compiling? Is there any initramfs example for broadcom chip router?</p>											<p class="post-edited">(Last edited by <strong>liveonlinux</strong> on 1 Nov 2016, 16:46)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342721">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">elektroman</div>
					<div class="post-datetime">
						1 Nov 2016, 17:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>liveonlinux wrote:</cite><blockquote><p>Hi, elektroman,</p><p>1. I compiled the git lede code, and the router boot ok now.&nbsp; The router is mt7628 + mt7610. The mt7628 is for 2.4GHz, and the mt7610 for 5GHz. Now the 2.4GHz is ok, but cannot find the 5GHz interface.</p><p>2. I copy the mt7628 dts/dtsi file from git lede code to chaos calmer openwrt code, but it&#039;s still failed to boot. I don&#039;t know why.</p></blockquote></div><p>This is the big thing why you should use git tool.</p><p>Take the change form step one and commit them with git.<br /><a href="https://git-scm.com/">https://git-scm.com/</a><br /><a href="https://www.youtube.com/watch?v=8oRjP8yj2Wo">https://www.youtube.com/watch?v=8oRjP8yj2Wo</a></p><p>For the 5GHz maybe they is a missing pcie entry in the DTS or missing eeprom entry.<br />check the files in target/linux/ramips/dts/<br />For the eeprom entry in the 5Ghz section use <br /></p><div class="codebox"><pre><code>hexdump -C $DEV</code></pre></div><p>i.e with /dev/mtd2</p><p>search for patterns with<br />0x76 0x12<br />or<br />0x76 0x68<br />these are values form mt76x2_pci.c</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342751">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">liveonlinux</div>
					<div class="post-datetime">
						2 Nov 2016, 02:35					</div>
				</div>
				<div class="post-content content">
					<p>Could you give me some advice? I don&#039;t know how to use the initramfs.</p><div class="quotebox"><cite>liveonlinux wrote:</cite><blockquote><p>And another router(same design as R7000):</p><div class="codebox"><pre><code>Starting program at 0x00008000
Uncompressing Linux... done, booting the kernel.
[    0.000000] Booting Linux on physical CPU 0x0
[    0.000000] Linux version 4.4.27 (wangfeng@software) (gcc version 5.4.0 (LEDE GCC 5.4.0 r1967) ) #0 SMP Mon Oct 24 20:52:44 2016
[    0.000000] CPU: ARMv7 Processor [413fc090] revision 0 (ARMv7), cr=10c5387d
[    0.000000] CPU: PIPT / VIPT nonaliasing data cache, VIPT aliasing instruction cache
...</code></pre></div><br /><p>I know the initramfs is a very importand tool for debugging. Can you tell me how to use it after compiling? Is there any initramfs example for broadcom chip router?</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p343129">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">liveonlinux</div>
					<div class="post-datetime">
						6 Nov 2016, 10:53					</div>
				</div>
				<div class="post-content content">
					<p>The firmware compiled from lede git source code can run on netgear r6300v2. But 5GHz wireless SSID is none. I cannot find the interface when I use the ifconfig command.</p><p>The r6300v2 has 128MB nand flash, K9F1G08U0D, made by samsung. My BCM4708 router has same source design with r6300v2, but use Spansion 128MB nand flash S34ML01G100TFI00, instead of samsung one. I think this diffrence make my router failed to boot.</p><div class="codebox"><pre><code>[    0.613066] nand: Could not find valid ONFI parameter page; aborting
[    0.619458] nand: device found, Manufacturer ID: 0x01, Chip ID: 0xf1
[    0.625852] nand: AMD/Spansion NAND 128MiB 3,3V 8-bit
[    0.630921] nand: 128 MiB, SLC, erase size: 128 KiB, page size: 2048, OOB size: 64
[    0.638520] iproc_nand 18028000.nand: detected 128MiB total, 128KiB blocks, 2KiB pages, 16B OOB, 8-bit, BCH-8
[    0.648472] Scanning device for bad blocks
[    0.970547] Bad eraseblock 509 at 0x000003fa0000
[    1.286587] mtd_read error while parsing (offset: 0x0): -74
[    1.292558] mtd_read error while parsing (offset: 0x20000): -74
[    1.300176] mtd_read error while parsing (offset: 0x80000): -74</code></pre></div>											<p class="post-edited">(Last edited by <strong>liveonlinux</strong> on 7 Nov 2016, 10:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p343356">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">liveonlinux</div>
					<div class="post-datetime">
						9 Nov 2016, 13:01					</div>
				</div>
				<div class="post-content content">
					<p>Hi, elektroman,&nbsp; when &quot;make kernel_menuconfig&quot;,&nbsp; I disable the &quot;Seama firmware parser&quot; and compile a new firmware. There is not &quot;could not find valid ONFI parameter&quot; print now. But still &quot;mtd_read error while parsing&quot; in this function:</p><div class="codebox"><pre><code>static int bcm47xxpart_parse(struct mtd_info *master,
                 struct mtd_partition **pparts,
                 struct mtd_part_parser_data *data)
{
...

        /* Read beginning of the block */
        err = mtd_read(master, offset, BCM47XXPART_BYTES_TO_READ,
                   &amp;bytes_read, (uint8_t *)buf);
        if (err &amp;&amp; !mtd_is_bitflip(err)) {
            pr_err(&quot;mtd_read error while parsing (offset: 0x%X): %d\n&quot;,
                   offset, err);
            continue;
        }

...
}</code></pre></div><p>After large times print, the router failed to boot. Maybe the driver is wrong?</p><p>About initramfs, I find this command: boot -tftp -elf 192.168.1.2:/brcm47xx/openwrt-brcm47xx-vmlinux.elf</p><p>I will try it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p343401">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">liveonlinux</div>
					<div class="post-datetime">
						10 Nov 2016, 05:11					</div>
				</div>
				<div class="post-content content">
					<p>On netgear r6300v2, I tried the boot by initramfs, but still failed.</p><div class="codebox"><pre><code>CFE&gt; boot -tftp -elf 192.168.1.2:/lede-bcm53xx-netgear-r6300-v2-initramfs-kernel.bin
Loader:elf Filesys:tftp Dev:eth0 File:192.168.1.2:/lede-bcm53xx-netgear-r6300-v2-initramfs-kernel.bin Options:(null)
Loading: Failed.
Could not load 192.168.1.2:/lede-bcm53xx-netgear-r6300-v2-initramfs-kernel.bin: Loader is not available
*** command status = -35
CFE&gt; boot -tftp -elf 192.168.1.2:lede-bcm53xx-netgear-r6300-v2-initramfs-kernel.bin
Loader:elf Filesys:tftp Dev:eth0 File:192.168.1.2:lede-bcm53xx-netgear-r6300-v2-initramfs-kernel.bin Options:(null)
Loading: Failed.
Could not load 192.168.1.2:lede-bcm53xx-netgear-r6300-v2-initramfs-kernel.bin: Loader is not available
*** command status = -35
CFE&gt; 
CFE&gt; 
CFE&gt; 
CFE&gt; 
CFE&gt; boot -tftp 192.168.1.2:lede-bcm53xx-netgear-r6300-v2-initramfs-kernel.bin
Loader:raw Filesys:tftp Dev:eth0 File:192.168.1.2:lede-bcm53xx-netgear-r6300-v2-initramfs-kernel.bin Options:(null)
Loading: ........... 262144 bytes read
Entry at 0x20000000
Closing network.
Starting program at 0x20000000</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p343411">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">liveonlinux</div>
					<div class="post-datetime">
						10 Nov 2016, 11:51					</div>
				</div>
				<div class="post-content content">
					<p>Error happens in : mtd-&gt;_read() .<br />Maybe lede doesn&#039;t support my nand flash? <br />If I want it support Spansion 128MB nand flash S34ML01G100TFI00, how to change the code? <br />Add something to nand_flash_ids[] ?</p><br /><p>int mtd_read(struct mtd_info *mtd, loff_t from, size_t len, size_t *retlen,<br />&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; u_char *buf)<br />{<br />&nbsp; &nbsp; int ret_code;<br />&nbsp; &nbsp; &nbsp; &nbsp; ...<br />&nbsp; &nbsp; /*<br />&nbsp; &nbsp;&nbsp; * In the absence of an error, drivers return a non-negative integer<br />&nbsp; &nbsp;&nbsp; * representing the maximum number of bitflips that were corrected on<br />&nbsp; &nbsp;&nbsp; * any one ecc region (if applicable; zero otherwise).<br />&nbsp; &nbsp;&nbsp; */<br />&nbsp; &nbsp; ret_code = mtd-&gt;_read(mtd, from, len, retlen, buf);<br />&nbsp; &nbsp; ...<br />&nbsp; &nbsp; <br />}</p><br /><br /><div class="quotebox"><cite>liveonlinux wrote:</cite><blockquote><p>Hi, elektroman,&nbsp; when &quot;make kernel_menuconfig&quot;,&nbsp; I disable the &quot;Seama firmware parser&quot; and compile a new firmware. There is not &quot;could not find valid ONFI parameter&quot; print now. But still &quot;mtd_read error while parsing&quot; in this function:</p><div class="codebox"><pre><code>static int bcm47xxpart_parse(struct mtd_info *master,
                 struct mtd_partition **pparts,
                 struct mtd_part_parser_data *data)
{
...

        /* Read beginning of the block */
        err = mtd_read(master, offset, BCM47XXPART_BYTES_TO_READ,
                   &amp;bytes_read, (uint8_t *)buf);
        if (err &amp;&amp; !mtd_is_bitflip(err)) {
            pr_err(&quot;mtd_read error while parsing (offset: 0x%X): %d\n&quot;,
                   offset, err);
            continue;
        }

...
}</code></pre></div><p>After large times print, the router failed to boot. Maybe the driver is wrong?</p><p>About initramfs, I find this command: boot -tftp -elf 192.168.1.2:/brcm47xx/openwrt-brcm47xx-vmlinux.elf</p><p>I will try it.</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p343495">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">liveonlinux</div>
					<div class="post-datetime">
						12 Nov 2016, 10:36					</div>
				</div>
				<div class="post-content content">
					<p>I debug the nand flash driver. I find that -74 stands for -EBADMSG error. After power on, the router call the nand_read(), and continue to call nand_do_read_ops()&nbsp; function. Sometimes return ok, and sometimes return -EBADMSG. I don&#039;t know why.</p><br /><br /><div class="codebox"><pre><code>static int nand_do_read_ops(struct mtd_info *mtd, loff_t from,
                struct mtd_oob_ops *ops)
{

...
    if (ecc_fail)
        return -EBADMSG;

...
}</code></pre></div><br /><div class="codebox"><pre><code>[    0.618823] nand: device found, Manufacturer ID: 0x01, Chip ID: 0xf1
[    0.625179] nand: AMD/Spansion NAND 128MiB 3,3V 8-bit
[    0.630216] nand: 128 MiB, SLC, erase size: 128 KiB, page size: 2048, OOB size: 64
[    0.637769] iproc_nand 18028000.nand: detected 128MiB total, 128KiB blocks, 2KiB pages, 16B OOB, 8-bit, BCH-8</code></pre></div><p>The nand flash ECC has some error? My friend tell me, my router use : 1-bit Hamming, 16B spare, 512B sector.<br />How to change the source code?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p343517">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">elektroman</div>
					<div class="post-datetime">
						12 Nov 2016, 19:05					</div>
				</div>
				<div class="post-content content">
					<p>Hi</p><p>first of all, sometimes your are digging much to deep</p><div class="quotebox"><cite>liveonlinux wrote:</cite><blockquote><p>The nand flash ECC has some error? My friend tell me, my router use : 1-bit Hamming, 16B spare, 512B sector.<br />How to change the source code?</p></blockquote></div><p>With the error ...<br />NAND Flash *is* broken by *design*<br />For the sector size 2048 is typical , 512 is the logical size<br />Read (if you want, but you don&#039;t need this)<br /><a href="https://en.wikipedia.org/wiki/BCH_code">https://en.wikipedia.org/wiki/BCH_code</a></p><div class="quotebox"><cite>liveonlinux wrote:</cite><blockquote><p>Error happens in : mtd-&gt;_read() .<br />Maybe lede doesn&#039;t support my nand flash? <br />If I want it support Spansion 128MB nand flash S34ML01G100TFI00, how to change the code? <br />Add something to nand_flash_ids[] ?</p></blockquote></div><p>Normally not needed, most vendors are supported in vanilla kernel.<br />check your physical address.<br />Check you DTS file (please post)</p><p>And please <br />I can&#039;t distinguish between two (almost) identical devices in one thread.<br />And I do not begin with this king of sh*t, anyway<br />.. Sorry for that, but I must to be clear here</p><p>And you can&#039;t do it either, you are beginning to mess around</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p343550">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">liveonlinux</div>
					<div class="post-datetime">
						13 Nov 2016, 05:11					</div>
				</div>
				<div class="post-content content">
					<p>Thank you, elektroman!<br />My router is similar to netgear r6300v2 and asus rt68u router. So I compiled the lede code and get firmware for r6300v2 or asus rt68u. I flash the firmware to my router. In another word, I use the dts or physical address for these two types router. Is it a good idea for a new person(like me)? If this is OK, I will make my own dts file. I&#039;m not 100% sure of difference between my router and r6300v2.</p><p>I know r6300v2, rt68u, and my router are BCM4708+ 4360 + 4331 solution, 128MB nand flash( 2KB/page ). They use the same broadcom hardware design. The lede firmware runs OK on r6300v2, but failed on my router.</p><p>You mean start address?<br /></p><div class="codebox"><pre><code>check your physical address.</code></pre></div><p>Is it ?<br /></p><div class="codebox"><pre><code>Starting program at 0x00008000</code></pre></div><p>My router also use 0x00008000 if I flash the broadcom sdk firmware.</p><br /><p>The boot information on r6300v2 is as follows:</p><div class="codebox"><pre><code>Decompressing...done

SHMOO VER 1.13

PKID07DC06011801080000000000001A103F01000000

S300402CF
00002350


RDLYW0 00000004

RDENW0 00000045

RDQSW0 

    0000000000111111111122222222223333333333444444444455555555556666
    0123456789012345678901234567890123456789012345678901234567890123
 00 ----++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++
 01 --------++++++++++++++++++++++++++++X+++++++++++++++++++++++++++
 02 -------++++++++++++++++++++++++++++X++++++++++++++++++++++++++++
 03 -----+++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++
 04 ---++++++++++++++++++++++++++++++X++++++++++++++++++++++++++++++
 05 --------++++++++++++++++++++++++++++X+++++++++++++++++++++++++++
 06 -+++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++
 07 -------++++++++++++++++++++++++++++X++++++++++++++++++++++++++++
 08 ---++++++++++++++++++++++++++++++X++++++++++++++++++++++++++++++
 09 --------++++++++++++++++++++++++++++X+++++++++++++++++++++++++++
 10 ---++++++++++++++++++++++++++++++X++++++++++++++++++++++++++++++
 11 ---------+++++++++++++++++++++++++++X+++++++++++++++++++++++++++
 12 ---++++++++++++++++++++++++++++++X++++++++++++++++++++++++++++++
 13 --------++++++++++++++++++++++++++++X+++++++++++++++++++++++++++
 14 ----++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++
 15 --------++++++++++++++++++++++++++++X+++++++++++++++++++++++++++


PW0 

    0000000000111111111122222222223333333333444444444455555555556666
    0123456789012345678901234567890123456789012345678901234567890123
 00 -+++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++
 01 ------+++++++++++++++++++++++++++++X++++++++++++++++++++++++++++
 02 ----++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++
 03 ---++++++++++++++++++++++++++++++X++++++++++++++++++++++++++++++
 04 ++++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++
 05 --------++++++++++++++++++++++++++++X+++++++++++++++++++++++++++
 06 ++++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++
 07 -----+++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++
 08 --+++++++++++++++++++++++++++++++X++++++++++++++++++++++++++++++
 09 --------++++++++++++++++++++++++++++X+++++++++++++++++++++++++++
 10 -+++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++
 11 ------+++++++++++++++++++++++++++++X++++++++++++++++++++++++++++
 12 -+++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++
 13 -----+++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++
 14 --+++++++++++++++++++++++++++++++X++++++++++++++++++++++++++++++
 15 -----+++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++


NW0 

    0000000000111111111122222222223333333333444444444455555555556666
    0123456789012345678901234567890123456789012345678901234567890123
 00 ----++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++
 01 --------++++++++++++++++++++++++++++X+++++++++++++++++++++++++++
 02 -------++++++++++++++++++++++++++++X++++++++++++++++++++++++++++
 03 -----+++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++
 04 ---++++++++++++++++++++++++++++++X++++++++++++++++++++++++++++++
 05 ---------+++++++++++++++++++++++++++X+++++++++++++++++++++++++++
 06 -+++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++
 07 -------++++++++++++++++++++++++++++X++++++++++++++++++++++++++++
 08 ----++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++
 09 --------++++++++++++++++++++++++++++X+++++++++++++++++++++++++++
 10 ---++++++++++++++++++++++++++++++X++++++++++++++++++++++++++++++
 11 ---------+++++++++++++++++++++++++++X+++++++++++++++++++++++++++
 12 ---++++++++++++++++++++++++++++++X++++++++++++++++++++++++++++++
 13 --------++++++++++++++++++++++++++++X+++++++++++++++++++++++++++
 14 ----++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++
 15 ---------+++++++++++++++++++++++++++X+++++++++++++++++++++++++++


WRDQW0 

    0000000000111111111122222222223333333333444444444455555555556666
    0123456789012345678901234567890123456789012345678901234567890123
 00 +++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++-
 01 +++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++-
 02 +++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++-
 03 +++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++-
 04 +++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++-
 05 +++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++-
 06 +++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++-
 07 +++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++-
 08 +++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++-
 09 --++++++++++++++++++++++++++++++X++++++++++++++++++++++++++++++-
 10 +++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++-
 11 --++++++++++++++++++++++++++++++X++++++++++++++++++++++++++++++-
 12 +++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++-
 13 -+++++++++++++++++++++++++++++++X++++++++++++++++++++++++++++++-
 14 -+++++++++++++++++++++++++++++++X++++++++++++++++++++++++++++++-
 15 --++++++++++++++++++++++++++++++X++++++++++++++++++++++++++++++-


WRDMW0 00000031
WRDMW0 00000031


ADDR

    0000000000111111111122222222223333333333444444444455555555556666
    0123456789012345678901234567890123456789012345678901234567890123
 00 +++++++++++++++++++++++++++++++X+++S++++++++++++++++++++++++++++

Decompressing...done


CFE for Foxconn Router R6300v2 version: v1.0.15
Build Date: Fri May 24 13:47:09 CST 2013 
Init Arena
Init Devs.
Boot up from NAND flash...
Boot partition size = 262144(0x40000)
DDR Clock: 533 MHz
Info: DDR frequency set from clkfreq=800,*533*
et0: Broadcom BCM47XX 10/100/1000 Mbps Ethernet Controller 6.30.163.2002 (r382208)
CPU type 0x0: 800MHz
Tot mem: 262144 KBytes

Device eth0:  hwaddr 00-FF-FF-FF-FF-FF, ipaddr 192.168.1.1, mask 255.255.255.0
        gateway not set, nameserver not set
Checking crc...Loader:raw Filesys:raw Dev:nflash0.os File: Options:(null)
Loading: .. 1539871 bytes read
Entry at 0x00008000
Closing network.
Starting program at 0x00008000
Uncompressing Linux... done, booting the kernel.
[    0.000000] Booting Linux on physical CPU 0x0
[    0.000000] Linux version 4.4.27 (wangfeng@software) (gcc version 5.4.0 (LEDE GCC 5.4.0 r1967) ) #0 SMP Mon Oct 24 20:52:44 2016
[    0.000000] CPU: ARMv7 Processor [413fc090] revision 0 (ARMv7), cr=10c5387d
[    0.000000] CPU: PIPT / VIPT nonaliasing data cache, VIPT aliasing instruction cache
[    0.000000] Machine model: Netgear R6300 V2 (BCM4708)
[    0.000000] Memory policy: Data cache writealloc
[    0.000000] Hit pending asynchronous external abort (FSR=0x00001c06) during first unmask, this is most likely caused by a firmware/bootloader bug.
[    0.000000] PERCPU: Embedded 11 pages/cpu @c6dce000 s12928 r8192 d23936 u45056
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 65280
[    0.000000] Kernel command line: console=ttyS0,115200
[    0.000000] PID hash table entries: 512 (order: -1, 2048 bytes)
[    0.000000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)
[    0.000000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Memory: 254748K/262144K available (3202K kernel code, 102K rwdata, 1208K rodata, 220K init, 280K bss, 7396K reserved, 0K cma-reserved, 131072K highmem)
[    0.000000] Virtual kernel memory layout:
[    0.000000]     vector  : 0xffff0000 - 0xffff1000   (   4 kB)
[    0.000000]     fixmap  : 0xffc00000 - 0xfff00000   (3072 kB)
[    0.000000]     vmalloc : 0xc8800000 - 0xff800000   ( 880 MB)
[    0.000000]     lowmem  : 0xc0000000 - 0xc8000000   ( 128 MB)
[    0.000000]     pkmap   : 0xbfe00000 - 0xc0000000   (   2 MB)
[    0.000000]     modules : 0xbf000000 - 0xbfe00000   (  14 MB)
[    0.000000]       .text : 0xc0008000 - 0xc0456e44   (4412 kB)
[    0.000000]       .init : 0xc0457000 - 0xc048e000   ( 220 kB)
[    0.000000]       .data : 0xc048e000 - 0xc04a7b2c   ( 103 kB)
[    0.000000]        .bss : 0xc04a7b2c - 0xc04eddec   ( 281 kB)
[    0.000000] SLUB: HWalign=64, Order=0-3, MinObjects=0, CPUs=2, Nodes=1
[    0.000000] Hierarchical RCU implementation.
[    0.000000] NR_IRQS:16 nr_irqs:16 16
[    0.000000] L2C: DT/platform modifies aux control register: 0x0a130000 -&gt; 0x0a530000
[    0.000000] L2C-310 enabling early BRESP for Cortex-A9
[    0.000000] L2C-310 full line of zeros enabled for Cortex-A9
[    0.000000] L2C-310 ID prefetch enabled, offset 1 lines
[    0.000000] L2C-310 dynamic clock gating enabled, standby mode enabled
[    0.000000] L2C-310 cache controller enabled, 16 ways, 256 kB
[    0.000000] L2C-310: CACHE_ID 0x410000c8, AUX_CTRL 0x7e530001
[    0.000015] sched_clock: 64 bits at 400MHz, resolution 2ns, wraps every 4398046511103ns
[    0.000040] clocksource: arm_global_timer: mask: 0xffffffffffffffff max_cycles: 0x5c4093a7d1, max_idle_ns: 440795210635 ns
[    0.000254] Calibrating delay loop... 1594.16 BogoMIPS (lpj=7970816)
[    0.090143] pid_max: default: 32768 minimum: 301
[    0.090236] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.090248] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.090798] CPU: Testing write buffer coherency: ok
[    0.091105] CPU0: thread -1, cpu 0, socket 0, mpidr 80000000
[    0.091202] Setting up static identity map for 0x82a0 - 0x82d4
[    0.130138] CPU1: thread -1, cpu 1, socket 0, mpidr 80000001
[    0.130227] Brought up 2 CPUs
[    0.130250] SMP: Total of 2 processors activated (3188.32 BogoMIPS).
[    0.130260] CPU: WARNING: CPU(s) started in wrong/inconsistent modes (primary CPU mode 0x13)
[    0.130266] CPU: This may indicate a broken bootloader or firmware.
[    0.132589] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604462750000 ns
[    0.132715] pinctrl core: initialized pinctrl subsystem
[    0.133207] NET: Registered protocol family 16
[    0.133988] DMA: preallocated 256 KiB pool for atomic coherent allocations
[    0.162541] clocksource: Switched to clocksource arm_global_timer
[    0.163916] NET: Registered protocol family 2
[    0.164584] TCP established hash table entries: 1024 (order: 0, 4096 bytes)
[    0.164618] TCP bind hash table entries: 1024 (order: 1, 8192 bytes)
[    0.164643] TCP: Hash tables configured (established 1024 bind 1024)
[    0.164747] UDP hash table entries: 256 (order: 1, 8192 bytes)
[    0.164795] UDP-Lite hash table entries: 256 (order: 1, 8192 bytes)
[    0.165040] NET: Registered protocol family 1
[    0.166353] futex hash table entries: 512 (order: 3, 32768 bytes)
[    0.166562] Crashlog allocated RAM at address 0x3f00000
[    0.172918] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.172960] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.174921] bounce: pool size: 64 pages
[    0.174949] io scheduler noop registered
[    0.174965] io scheduler deadline registered (default)
[    0.175505] Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled
[    0.176256] console [ttyS0] disabled
[    0.176318] 18000300.serial: ttyS0 at MMIO 0x18000300 (irq = 18, base_baud = 6250000) is a 16550
[    0.620917] console [ttyS0] enabled
[    0.625774] nand: device found, Manufacturer ID: 0xec, Chip ID: 0xf1
[    0.632155] nand: Samsung NAND 128MiB 3,3V 8-bit
[    0.636753] nand: 128 MiB, SLC, erase size: 128 KiB, page size: 2048, OOB size: 64
[    0.644323] iproc_nand 18028000.nand: detected 128MiB total, 128KiB blocks, 2KiB pages, 16B OOB, 8-bit, BCH-8
[    0.654220] Scanning device for bad blocks
[    1.175724] Bad eraseblock 683 at 0x000005560000
[    1.444351] random: nonblocking pool is initialized
[    2.251905] 6 bcm47xxpart partitions found on MTD device brcmnand.0
[    2.258142] Creating 6 MTD partitions on &quot;brcmnand.0&quot;:
[    2.263275] 0x000000000000-0x000000080000 : &quot;boot&quot;
[    2.269064] 0x000000080000-0x0000002a0000 : &quot;nvram&quot;
[    2.274901] 0x0000002a0000-0x000000380000 : &quot;ML&quot;
[    2.280467] 0x000000380000-0x000008000000 : &quot;firmware&quot;
[    2.287183] 0x00000038001c-0x000000780000 : &quot;linux&quot;
[    2.293060] 0x000000780000-0x000008000000 : &quot;ubi&quot;
[    2.299723] libphy: Fixed MDIO Bus: probed
[    2.303953] bgmac_bcma: Broadcom 47xx GBit MAC driver loaded
[    2.309864] bcma: bus0: Found chip with id 53010, rev 0x00 and package 0x02
[    2.316926] bcma: bus0: Core 0 found: ChipCommon (manuf 0x4BF, id 0x800, rev 0x2A, class 0x0)
[    2.325581] bcma: bus0: Core 1 found: Chipcommon B (manuf 0x4BF, id 0x50B, rev 0x01, class 0x0)
[    2.334394] bcma: bus0: Core 2 found: DMA (manuf 0x4BF, id 0x502, rev 0x01, class 0x0)
[    2.342413] bcma: bus0: Core 3 found: GBit MAC (manuf 0x4BF, id 0x82D, rev 0x04, class 0x0)
[    2.350860] bcma: bus0: Core 4 found: GBit MAC (manuf 0x4BF, id 0x82D, rev 0x04, class 0x0)
[    2.359298] bcma: bus0: Core 5 found: GBit MAC (manuf 0x4BF, id 0x82D, rev 0x04, class 0x0)
[    2.367754] bcma: bus0: Core 6 found: GBit MAC (manuf 0x4BF, id 0x82D, rev 0x04, class 0x0)
[    2.376186] bcma: bus0: Core 7 found: PCIe Gen 2 (manuf 0x4BF, id 0x501, rev 0x01, class 0x0)
[    2.384791] bcma: bus0: Core 8 found: PCIe Gen 2 (manuf 0x4BF, id 0x501, rev 0x01, class 0x0)
[    2.393424] bcma: bus0: Core 9 found: ARM Cortex A9 core (ihost) (manuf 0x4BF, id 0x510, rev 0x01, class 0x0)
[    2.403416] bcma: bus0: Core 10 found: USB 2.0 (manuf 0x4BF, id 0x504, rev 0x01, class 0x0)
[    2.411837] bcma: bus0: Core 11 found: USB 3.0 (manuf 0x4BF, id 0x505, rev 0x01, class 0x0)
[    2.420299] bcma: bus0: Core 12 found: SDIO3 (manuf 0x4BF, id 0x503, rev 0x01, class 0x0)
[    2.428571] bcma: bus0: Core 13 found: ARM Cortex A9 JTAG (manuf 0x4BF, id 0x506, rev 0x01, class 0x0)
[    2.437975] bcma: bus0: Core 14 found: Denali DDR2/DDR3 memory controller (manuf 0x4BF, id 0x507, rev 0x01, class 0x0)
[    2.448764] bcma: bus0: Core 15 found: ROM (manuf 0x4BF, id 0x508, rev 0x01, class 0x0)
[    2.456869] bcma: bus0: Core 16 found: NAND flash controller (manuf 0x4BF, id 0x509, rev 0x01, class 0x0)
[    2.466522] bcma: bus0: Core 17 found: SPI flash controller (manuf 0x4BF, id 0x50A, rev 0x01, class 0x0)
[    2.475985] bcma: bus0: Flash type not supported
[    2.482243] m25p80 spi32766.0: unrecognized JEDEC id bytes: ff, ff, ff
[    2.488948] m25p80 spi32766.0: using Read Manufacturer / Device ID command (0x90) returned ff ff
[    2.497772] m25p80: probe of spi32766.0 failed with error -2
[    2.594044] bgmac_bcma bcma0:3: Found PHY addr: 30 (NOREGS)
[    2.599606] bgmac_bcma bcma0:3: Support for Roboswitch not implemented
[    2.608602] b53_common: found switch: BCM53011, rev 2
[    2.614624] bgmac_bcma bcma0:4: Found PHY addr: 0
[    2.619333] bgmac_bcma bcma0:4: Support for Roboswitch not implemented
[    2.627943] bgmac_bcma bcma0:5: Found PHY addr: 0
[    2.632718] bgmac_bcma bcma0:5: Support for Roboswitch not implemented
[    2.639314] bgmac_bcma bcma0:5: Invalid MAC addr: 00:00:00:00:00:00
[    2.645609] bgmac_bcma bcma0:5: Using random MAC: e2:94:df:48:88:f3
[    2.653843] bgmac_bcma bcma0:6: Unsupported core_unit 3
[    2.659085] bgmac_bcma: probe of bcma0:6 failed with error -524
[    2.770289] pcie_iproc_bcma bcma0:7: PCI host bridge to bus 0000:00
[    2.776551] pci_bus 0000:00: root bus resource [mem 0x08000000-0x0fffffff]
[    2.783434] pcie_iproc_bcma bcma0:7: link: UP
[    2.788056] PCI: bus0: Fast back to back transfers disabled
[    2.793635] pci 0000:00:00.0: bridge configuration invalid ([bus 00-00]), reconfiguring
[    2.802132] PCI: bus1: Fast back to back transfers disabled
[    2.807749] pci 0000:00:00.0: BAR 8: assigned [mem 0x08000000-0x080fffff]
[    2.814541] pci 0000:01:00.0: BAR 0: assigned [mem 0x08000000-0x08003fff 64bit]
[    2.821841] pci 0000:00:00.0: PCI bridge to [bus 01]
[    2.826789] pci 0000:00:00.0:   bridge window [mem 0x08000000-0x080fffff]
[    2.940267] pcie_iproc_bcma bcma0:8: PCI host bridge to bus 0001:00
[    2.946523] pci_bus 0001:00: root bus resource [mem 0x40000000-0x47ffffff]
[    2.953403] pcie_iproc_bcma bcma0:8: link: UP
[    2.958005] PCI: bus0: Fast back to back transfers disabled
[    2.963584] pci 0001:00:00.0: bridge configuration invalid ([bus 00-00]), reconfiguring
[    2.972076] PCI: bus1: Fast back to back transfers disabled
[    2.977695] pci 0001:00:00.0: BAR 8: assigned [mem 0x40000000-0x400fffff]
[    2.984489] pci 0001:01:00.0: BAR 0: assigned [mem 0x40000000-0x40007fff 64bit]
[    2.991785] pci 0001:00:00.0: PCI bridge to [bus 01]
[    2.996730] pci 0001:00:00.0:   bridge window [mem 0x40000000-0x400fffff]
[    3.005109] bcm47xx-wdt bcm47xx-wdt.0: BCM47xx Watchdog Timer enabled (30 seconds, Software Timer)
[    3.014084] bcma: bus0: Bus registered
[    3.017985] pci 0000:00:00.0: enabling device (0140 -&gt; 0142)
[    3.023658] bcma-pci-bridge 0000:01:00.0: enabling device (0140 -&gt; 0142)
[    3.030385] bcma: bus1: Found chip with id 0x4331, rev 0x02 and package 0x08
[    3.037427] bcma: bus1: Core 0 found: ChipCommon (manuf 0x4BF, id 0x800, rev 0x25, class 0x0)
[    3.045944] bcma: bus1: Core 1 found: IEEE 802.11 (manuf 0x4BF, id 0x812, rev 0x1D, class 0x0)
[    3.054560] bcma: bus1: Core 2 found: PCIe (manuf 0x4BF, id 0x820, rev 0x13, class 0x0)
[    3.186481] bcma: bus1: Invalid SPROM read from the PCIe card, trying to use fallback SPROM
[    3.330402] bcma: bus1: Bus registered
[    3.334223] pci 0001:00:00.0: enabling device (0140 -&gt; 0142)
[    3.339873] bcma-pci-bridge 0001:01:00.0: enabling device (0140 -&gt; 0142)
[    3.346612] bcma: bus2: Found chip with id 0x4360, rev 0x03 and package 0x01
[    3.353681] bcma: bus2: Core 0 found: ChipCommon (manuf 0x4BF, id 0x800, rev 0x2B, class 0x0)
[    3.362194] bcma: bus2: Core 1 found: IEEE 802.11 (manuf 0x4BF, id 0x812, rev 0x2A, class 0x0)
[    3.370801] bcma: bus2: Core 2 found: ARM CR4 (manuf 0x4BF, id 0x83E, rev 0x02, class 0x0)
[    3.379051] bcma: bus2: Core 3 found: PCIe Gen2 (manuf 0x4BF, id 0x83C, rev 0x01, class 0x0)
[    3.387476] bcma: bus2: Core 4 found: USB 2.0 Device (manuf 0x4BF, id 0x81A, rev 0x11, class 0x0)
[    3.427865] bcma: bus2: Invalid SPROM read from the PCIe card, trying to use fallback SPROM
[    3.459176] bcma: bus2: Bus registered
[    3.464134] NET: Registered protocol family 10
[    3.469839] NET: Registered protocol family 17
[    3.474409] bridge: automatic filtering via arp/ip/ip6tables has been deprecated. Update your scripts to load br_netfilter if you need this.
[    3.486988] 8021q: 802.1Q VLAN Support v1.8
[    3.491257] Registering SWP/SWPB emulation handler
[    3.498462] UBI: auto-attach mtd5
[    3.501672] ubi0: attaching mtd5
[    3.914024] ubi0: scanning is finished
[    3.945811] ubi0: volume 1 (&quot;rootfs_data&quot;) re-sized from 9 to 924 LEBs
[    3.953063] ubi0: attached mtd5 (name &quot;ubi&quot;, size 120 MiB)
[    3.958529] ubi0: PEB size: 131072 bytes (128 KiB), LEB size: 126976 bytes
[    3.965400] ubi0: min./max. I/O unit sizes: 2048/2048, sub-page size 2048
[    3.972163] ubi0: VID header offset: 2048 (aligned 2048), data offset: 4096
[    3.979091] ubi0: good PEBs: 963, bad PEBs: 1, corrupted PEBs: 0
[    3.985079] ubi0: user volume: 2, internal volumes: 1, max. volumes count: 128
[    3.992275] ubi0: max/mean erase counter: 1/0, WL threshold: 4096, image sequence number: 33275472
[    4.001199] ubi0: available PEBs: 0, total reserved PEBs: 963, PEBs reserved for bad PEB handling: 19
[    4.010400] ubi0: background thread &quot;ubi_bgt0d&quot; started, PID 326
[    4.011796] block ubiblock0_0: created from ubi0:0(rootfs)
[    4.011804] ubiblock: device ubiblock0_0 (rootfs) set to be root filesystem
[    4.034852] VFS: Mounted root (squashfs filesystem) readonly on device 254:0.
[    4.042371] Freeing unused kernel memory: 220K (c0457000 - c048e000)
[    4.639996] init: Console is alive
[    4.643692] init: - watchdog -
[    5.177347] usbcore: registered new interface driver usbfs
[    5.183045] usbcore: registered new interface driver hub
[    5.188460] usbcore: registered new device driver usb
[    5.197185] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[    5.204590] ehci-platform: EHCI generic platform driver
[    5.211674] ehci-platform 18021000.ehci: EHCI Host Controller
[    5.212419] bcm_ns_usb3 18105000.usb3-phy: Registered Broadcom Northstar USB 3.0 PHY driver
[    5.213840] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
[    5.214566] ohci-platform: OHCI generic platform driver
[    5.214782] ohci-platform 18022000.ohci: Generic Platform OHCI controller
[    5.214815] ohci-platform 18022000.ohci: new USB bus registered, assigned bus number 1
[    5.214972] ohci-platform 18022000.ohci: irq 28, io mem 0x18022000
[    5.258027] ehci-platform 18021000.ehci: new USB bus registered, assigned bus number 2
[    5.266105] ehci-platform 18021000.ehci: irq 28, io mem 0x18021000
[    5.275071] hub 1-0:1.0: USB hub found
[    5.279013] hub 1-0:1.0: 2 ports detected
[    5.289150] xhci-hcd 18023000.xhci: xHCI Host Controller
[    5.294551] xhci-hcd 18023000.xhci: new USB bus registered, assigned bus number 3
[    5.302353] xhci-hcd 18023000.xhci: hcc params 0x02501164 hci version 0x100 quirks 0x01010010
[    5.302990] ehci-platform 18021000.ehci: USB 2.0 started, EHCI 1.00
[    5.303707] hub 2-0:1.0: USB hub found
[    5.303756] hub 2-0:1.0: 2 ports detected
[    5.324967] xhci-hcd 18023000.xhci: irq 29, io mem 0x18023000
[    5.331549] hub 3-0:1.0: USB hub found
[    5.335378] hub 3-0:1.0: config failed, hub doesn&#039;t have any ports! (err -19)
[    5.342772] xhci-hcd 18023000.xhci: xHCI Host Controller
[    5.348100] xhci-hcd 18023000.xhci: new USB bus registered, assigned bus number 4
[    5.370322] usb usb4: We don&#039;t know the algorithms for LPM for this host, disabling LPM.
[    5.379143] hub 4-0:1.0: USB hub found
[    5.383090] hub 4-0:1.0: 1 port detected
[    5.403213] init: - preinit -
[    7.518554] IPv6: ADDRCONF(NETDEV_UP): eth0: link is not ready
[    7.524578] IPv6: ADDRCONF(NETDEV_UP): eth0.1: link is not ready
Press the [f] key and hit [enter] to enter failsafe mode
Press the [1], [2], [3] or [4] key and hit [enter] to select the debug level
[    8.620277] bgmac_bcma bcma0:3 eth0: Link is Up - 1Gbps/Full - flow control off
[    8.627595] IPv6: ADDRCONF(NETDEV_CHANGE): eth0: link becomes ready
[    8.634180] IPv6: ADDRCONF(NETDEV_CHANGE): eth0.1: link becomes ready
[   10.743312] UBIFS (ubi0:1): default file-system created
[   10.749575] UBIFS (ubi0:1): background thread &quot;ubifs_bgt0_1&quot; started, PID 473
[   10.831833] UBIFS (ubi0:1): UBIFS: mounted UBI device 0, volume 1, name &quot;rootfs_data&quot;
[   10.839644] UBIFS (ubi0:1): LEB size: 126976 bytes (124 KiB), min./max. I/O unit sizes: 2048 bytes/2048 bytes
[   10.849554] UBIFS (ubi0:1): FS size: 115929088 bytes (110 MiB, 913 LEBs), journal size 5840896 bytes (5 MiB, 46 LEBs)
[   10.860145] UBIFS (ubi0:1): reserved for root: 4952683 bytes (4836 KiB)
[   10.866733] UBIFS (ubi0:1): media format: w4/r0 (latest is w4/r0), UUID 65E39360-6CCE-4179-BCD2-67294FED1422, small LPT model
[   10.880299] mount_root: overlay filesystem has not been fully initialized yet
[   10.887996] mount_root: switching to ubifs overlay
[   10.896323] urandom-seed: Seed file not found (/etc/urandom.seed)
[   10.998570] procd: - early -
[   11.001668] procd: - watchdog -
[   11.620476] procd: - ubus -
[   11.681837] procd: - init -
Please press Enter to activate this console.
[   11.861680] ip6_tables: (C) 2000-2006 Netfilter Core Team
[   11.875005] Loading modules backported from Linux version wt-2016-10-03-1-g6fcb1a6
[   11.882608] Backport generated by backports.git backports-20160324-9-g0e38f5c
[   11.891454] ip_tables: (C) 2000-2006 Netfilter Core Team
[   11.902105] nf_conntrack version 0.5.0 (3983 buckets, 15932 max)
[   12.012978] xt_time: kernel timezone is -0000
[   12.045654] PPP generic driver version 2.4.2
[   12.051417] NET: Registered protocol family 24
[   12.062114] b43-phy0: Broadcom 4331 WLAN found (core revision 29)
[   12.070207] b43-phy0: Found PHY: Analog 9, Type 7 (HT), Revision 1
[   12.076370] b43-phy0: Found Radio: Manuf 0x17F, ID 0x2059, Revision 0, Version 1
[   12.090335] b43-phy1: Broadcom 4360 WLAN found (core revision 42)
[   12.100458] b43-phy1 ERROR: FOUND UNSUPPORTED PHY (Analog 12, Type 11 (AC), Revision 1)
[   12.108480] b43: probe of bcma2:1 failed with error -95
[   12.113838] Broadcom 43xx driver loaded [ Features: NL ]
[   17.868084] IPv6: ADDRCONF(NETDEV_UP): eth0: link is not ready
[   17.881819] device eth0.1 entered promiscuous mode
[   17.886627] device eth0 entered promiscuous mode
[   17.894572] IPv6: ADDRCONF(NETDEV_UP): br-lan: link is not ready
[   17.931983] IPv6: ADDRCONF(NETDEV_UP): eth0.2: link is not ready
[   18.620220] bgmac_bcma bcma0:3 eth0: Link is Up - 1Gbps/Full - flow control off
[   18.628235] IPv6: ADDRCONF(NETDEV_CHANGE): eth0: link becomes ready
[   18.650690] br-lan: port 1(eth0.1) entered forwarding state
[   18.656330] br-lan: port 1(eth0.1) entered forwarding state
[   18.662098] IPv6: ADDRCONF(NETDEV_CHANGE): eth0.2: link becomes ready
[   18.671149] IPv6: ADDRCONF(NETDEV_CHANGE): br-lan: link becomes ready
[   20.650164] br-lan: port 1(eth0.1) entered forwarding state



BusyBox v1.25.1 () built-in shell (ash)

     _________
    /        /\      _    ___ ___  ___
   /  LE    /  \    | |  | __|   \| __|
  /    DE  /    \   | |__| _|| |) | _|
 /________/  LE  \  |____|___|___/|___|                      lede-project.org
 \        \   DE /
  \    LE  \    /  -----------------------------------------------------------
   \  DE    \  /    Reboot (HEAD, r1967)
    \________\/    -----------------------------------------------------------

=== WARNING! =====================================
There is no root password defined on this device!
Use the &quot;passwd&quot; command to set up a new password
in order to prevent unauthorized SSH logins.
--------------------------------------------------
root@lede:/# 
root@lede:/# 
root@lede:/# 
root@lede:/# ifconfig
br-lan    Link encap:Ethernet  HWaddr 00:FF:FF:FF:FF:FF  
          inet addr:192.168.1.1  Bcast:192.168.1.255  Mask:255.255.255.0
          inet6 addr: fda4:bcf7:d61d::1/60 Scope:Global
          inet6 addr: fe80::2ff:ffff:feff:ffff/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:59 errors:0 dropped:0 overruns:0 frame:0
          TX packets:36 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:3767 (3.6 KiB)  TX bytes:4043 (3.9 KiB)

eth0      Link encap:Ethernet  HWaddr 00:FF:FF:FF:FF:FF  
          inet6 addr: fe80::2ff:ffff:feff:ffff/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:82 errors:0 dropped:0 overruns:0 frame:0
          TX packets:84 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:7239 (7.0 KiB)  TX bytes:11914 (11.6 KiB)
          Interrupt:22 

eth0.1    Link encap:Ethernet  HWaddr 00:FF:FF:FF:FF:FF  
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:71 errors:0 dropped:0 overruns:0 frame:0
          TX packets:38 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:4407 (4.3 KiB)  TX bytes:4135 (4.0 KiB)

eth0.2    Link encap:Ethernet  HWaddr 00:FF:FF:FF:FF:FF  
          inet6 addr: fe80::2ff:ffff:feff:ffff/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:26 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:0 (0.0 B)  TX bytes:5595 (5.4 KiB)

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:32 errors:0 dropped:0 overruns:0 frame:0
          TX packets:32 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1 
          RX bytes:2192 (2.1 KiB)  TX bytes:2192 (2.1 KiB)

root@lede:/# </code></pre></div><br /><br /><p>My own router failed:<br /></p><div class="codebox"><pre><code>Decompressing...done


CFE version 6.37.14.62 (r436032) based on BBP 1.0.37 for BCM947XX (32bit,SP,)
Build Date: Tue Jun 21 15:42:09 CST 2016 (li@software)
Copyright (C) 2000-2008 Broadcom Corporation.

Init Arena
Init Devs.
Boot partition size = 262144(0x40000)
DDR Clock: 400 MHz
Info: DDR frequency set from clkfreq=800,*400*
et0: Broadcom BCM47XX 10/100/1000 Mbps Ethernet Controller 6.37.14.62 (r436032)
CPU type 0x0: 800MHz
Tot mem: 131072 KBytes

CFE mem:    0x00F00000 - 0x01791D54 (8985940)
Data:       0x00F4A3CC - 0x00F4A88C (1216)
BSS:        0x00F4A898 - 0x00F8FD54 (283836)
Heap:       0x00F8FD54 - 0x0178FD54 (8388608)
Stack:      0x0178FD54 - 0x01791D54 (8192)
Text:       0x00F00000 - 0x00F416F8 (268024)

Committing NVRAM...done
Waiting for reset button release...donDigital core power voltage set to 0.9375V
Decompressing...done


CFE version 6.37.14.62 (r436032) based on BBP 1.0.37 for BCM947XX (32bit,SP,)
Build Date: Tue Jun 21 15:42:09 CST 2016 (li@software)
Copyright (C) 2000-2008 Broadcom Corporation.

Init Arena
Init Devs.
Boot partition size = 262144(0x40000)
DDR Clock: 400 MHz
Info: DDR frequency set from clkfreq=800,*400*
et0: Broadcom BCM47XX 10/100/1000 Mbps Ethernet Controller 6.37.14.62 (r436032)
CPU type 0x0: 800MHz
Tot mem: 131072 KBytes

CFE mem:    0x00F00000 - 0x01791D54 (8985940)
Data:       0x00F4A3CC - 0x00F4A88C (1216)
BSS:        0x00F4A898 - 0x00F8FD54 (283836)
Heap:       0x00F8FD54 - 0x0178FD54 (8388608)
Stack:      0x0178FD54 - 0x01791D54 (8192)
Text:       0x00F00000 - 0x00F416F8 (268024)

Device eth0:  hwaddr 00-90-4C-0F-F4-6C, ipaddr 192.168.1.1, mask 255.255.255.0
        gateway not set, nameserver not set
Loader:raw Filesys:tftp Dev:eth0 File:: Options:(null)
Loading: Failed.
Could not load :: Timeout occured
Loader:raw Filesys:raw Dev:nflash0.os File: Options:(null)
Loading: .. 1539871 bytes read
Entry at 0x00008000
Closing network.
Starting program at 0x00008000
Uncompressing Linux... done, booting the kernel.
[    0.000000] Booting Linux on physical CPU 0x0
[    0.000000] Linux version 4.4.27 (wangfeng@software) (gcc version 5.4.0 (LEDE GCC 5.4.0 r1967) ) #0 SMP Mon Oct 24 20:52:44 2016
[    0.000000] CPU: ARMv7 Processor [413fc090] revision 0 (ARMv7), cr=10c5387d
[    0.000000] CPU: PIPT / VIPT nonaliasing data cache, VIPT aliasing instruction cache
[    0.000000] Machine model: Netgear R6300 V2 (BCM4708)
[    0.000000] Memory policy: Data cache writealloc
[    0.000000] PERCPU: Embedded 11 pages/cpu @c6dce000 s12928 r8192 d23936 u45056
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 65280
[    0.000000] Kernel command line: console=ttyS0,115200
[    0.000000] PID hash table entries: 512 (order: -1, 2048 bytes)
[    0.000000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)
[    0.000000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Memory: 254748K/262144K available (3202K kernel code, 102K rwdata, 1208K rodata, 220K init, 280K bss, 7396K reserved, 0K cma-reserved, 131072K highmem)
[    0.000000] Virtual kernel memory layout:
[    0.000000]     vector  : 0xffff0000 - 0xffff1000   (   4 kB)
[    0.000000]     fixmap  : 0xffc00000 - 0xfff00000   (3072 kB)
[    0.000000]     vmalloc : 0xc8800000 - 0xff800000   ( 880 MB)
[    0.000000]     lowmem  : 0xc0000000 - 0xc8000000   ( 128 MB)
[    0.000000]     pkmap   : 0xbfe00000 - 0xc0000000   (   2 MB)
[    0.000000]     modules : 0xbf000000 - 0xbfe00000   (  14 MB)
[    0.000000]       .text : 0xc0008000 - 0xc0456e44   (4412 kB)
[    0.000000]       .init : 0xc0457000 - 0xc048e000   ( 220 kB)
[    0.000000]       .data : 0xc048e000 - 0xc04a7b2c   ( 103 kB)
[    0.000000]        .bss : 0xc04a7b2c - 0xc04eddec   ( 281 kB)
[    0.000000] SLUB: HWalign=64, Order=0-3, MinObjects=0, CPUs=2, Nodes=1
[    0.000000] Hierarchical RCU implementation.
[    0.000000] NR_IRQS:16 nr_irqs:16 16
[    0.000000] L2C: DT/platform modifies aux control register: 0x0a130000 -&gt; 0x0a530000
[    0.000000] L2C-310 enabling early BRESP for Cortex-A9
[    0.000000] L2C-310 full line of zeros enabled for Cortex-A9
[    0.000000] L2C-310 ID prefetch enabled, offset 1 lines
[    0.000000] L2C-310 dynamic clock gating enabled, standby mode enabled
[    0.000000] L2C-310 cache controller enabled, 16 ways, 256 kB
[    0.000000] L2C-310: CACHE_ID 0x410000c8, AUX_CTRL 0x7e530001
[    0.000015] sched_clock: 64 bits at 400MHz, resolution 2ns, wraps every 4398046511103ns
[    0.000039] clocksource: arm_global_timer: mask: 0xffffffffffffffff max_cycles: 0x5c4093a7d1, max_idle_ns: 440795210635 ns
[    0.000255] Calibrating delay loop... 1594.16 BogoMIPS (lpj=7970816)
[    0.090144] pid_max: default: 32768 minimum: 301
[    0.090235] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.090247] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.090792] CPU: Testing write buffer coherency: ok
[    0.091089] CPU0: thread -1, cpu 0, socket 0, mpidr 80000000
[    0.091181] Setting up static identity map for 0x82a0 - 0x82d4
[    0.130139] CPU1: thread -1, cpu 1, socket 0, mpidr 80000001
[    0.130228] Brought up 2 CPUs
[    0.130249] SMP: Total of 2 processors activated (3188.32 BogoMIPS).
[    0.130259] CPU: WARNING: CPU(s) started in wrong/inconsistent modes (primary CPU mode 0x13)
[    0.130266] CPU: This may indicate a broken bootloader or firmware.
[    0.132571] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604462750000 ns
[    0.132696] pinctrl core: initialized pinctrl subsystem
[    0.133182] NET: Registered protocol family 16
[    0.133956] DMA: preallocated 256 KiB pool for atomic coherent allocations
[    0.162509] clocksource: Switched to clocksource arm_global_timer
[    0.163864] NET: Registered protocol family 2
[    0.164536] TCP established hash table entries: 1024 (order: 0, 4096 bytes)
[    0.164569] TCP bind hash table entries: 1024 (order: 1, 8192 bytes)
[    0.164595] TCP: Hash tables configured (established 1024 bind 1024)
[    0.164692] UDP hash table entries: 256 (order: 1, 8192 bytes)
[    0.164727] UDP-Lite hash table entries: 256 (order: 1, 8192 bytes)
[    0.164971] NET: Registered protocol family 1
[    0.166253] futex hash table entries: 512 (order: 3, 32768 bytes)
[    0.166456] Crashlog allocated RAM at address 0x3f00000
[    0.172506] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.172541] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.174483] bounce: pool size: 64 pages
[    0.174510] io scheduler noop registered
[    0.174525] io scheduler deadline registered (default)
[    0.175048] Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled
[    0.175810] console [ttyS0] disabled
[    0.175871] 18000300.serial: ttyS0 at MMIO 0x18000300 (irq = 18, base_baud = 6250000) is a 16550
[    0.607329] console [ttyS0] enabled
[    0.612470] nand: Could not find valid ONFI parameter page; aborting
[    0.618823] nand: device found, Manufacturer ID: 0x01, Chip ID: 0xf1
[    0.625179] nand: AMD/Spansion NAND 128MiB 3,3V 8-bit
[    0.630216] nand: 128 MiB, SLC, erase size: 128 KiB, page size: 2048, OOB size: 64
[    0.637769] iproc_nand 18028000.nand: detected 128MiB total, 128KiB blocks, 2KiB pages, 16B OOB, 8-bit, BCH-8
[    0.647655] Scanning device for bad blocks
[    0.752255] Bad eraseblock 123 at 0x000000f60000
[    1.314718] Bad eraseblock 865 at 0x000006c20000
[    1.393633] Bad eraseblock 965 at 0x0000078a0000
[    1.442035] mtd_read error while parsing (offset: 0x0): -74
[    1.448041] mtd_read error while parsing (offset: 0x20000): -74
[    1.456032] mtd_read error while parsing (offset: 0x80000): -74
[    1.466141] random: nonblocking pool is initialized
[    1.476237] mtd_read error while parsing (offset: 0x200000): -74
[    1.482679] mtd_read error while parsing (offset: 0x220000): -74
[    1.489110] mtd_read error while parsing (offset: 0x240000): -74
[    1.495551] mtd_read error while parsing (offset: 0x260000): -74
[    1.501997] mtd_read error while parsing (offset: 0x280000): -74
[    1.508430] mtd_read error while parsing (offset: 0x2A0000): -74
[    1.514870] mtd_read error while parsing (offset: 0x2C0000): -74
[    1.521313] mtd_read error while parsing (offset: 0x2E0000): -74
[    1.527740] mtd_read error while parsing (offset: 0x300000): -74
[    1.534180] mtd_read error while parsing (offset: 0x320000): -74
[    1.540624] mtd_read error while parsing (offset: 0x340000): -74
[    1.547049] mtd_read error while parsing (offset: 0x360000): -74
[    1.553490] mtd_read error while parsing (offset: 0x380000): -74
[    1.559924] mtd_read error while parsing (offset: 0x3A0000): -74
[    1.566364] mtd_read error while parsing (offset: 0x3C0000): -74

。。。

[    7.542791] mtd_read error while parsing (offset: 0x7F00000): -74
[    7.549277] mtd_read error while parsing (offset: 0x7F20000): -74
[    7.555771] mtd_read error while parsing (offset: 0x7F40000): -74
[    7.562264] mtd_read error while parsing (offset: 0x7F60000): -74
[    7.568751] mtd_read error while parsing (offset: 0x7F80000): -74
[    7.575244] mtd_read error while parsing (offset: 0x7FA0000): -74
[    7.581739] mtd_read error while parsing (offset: 0x7FC0000): -74
[    7.588227] mtd_read error while parsing (offset: 0x7FE0000): -74
[    7.597346] libphy: Fixed MDIO Bus: probed
[    7.601564] bgmac_bcma: Broadcom 47xx GBit MAC driver loaded
[    7.607461] bcma: bus0: Found chip with id 53010, rev 0x00 and package 0x02
[    7.614489] bcma: bus0: Core 0 found: ChipCommon (manuf 0x4BF, id 0x800, rev 0x2A, class 0x0)
[    7.623136] bcma: bus0: Core 1 found: Chipcommon B (manuf 0x4BF, id 0x50B, rev 0x01, class 0x0)
[    7.631943] bcma: bus0: Core 2 found: DMA (manuf 0x4BF, id 0x502, rev 0x01, class 0x0)
[    7.639954] bcma: bus0: Core 3 found: GBit MAC (manuf 0x4BF, id 0x82D, rev 0x05, class 0x0)
[    7.648413] bcma: bus0: Core 4 found: GBit MAC (manuf 0x4BF, id 0x82D, rev 0x05, class 0x0)
[    7.656870] bcma: bus0: Core 5 found: GBit MAC (manuf 0x4BF, id 0x82D, rev 0x05, class 0x0)
[    7.665318] bcma: bus0: Core 6 found: GBit MAC (manuf 0x4BF, id 0x82D, rev 0x05, class 0x0)
[    7.673745] bcma: bus0: Core 7 found: PCIe Gen 2 (manuf 0x4BF, id 0x501, rev 0x01, class 0x0)
[    7.682348] bcma: bus0: Core 8 found: PCIe Gen 2 (manuf 0x4BF, id 0x501, rev 0x01, class 0x0)
[    7.690953] bcma: bus0: Core 9 found: PCIe Gen 2 (manuf 0x4BF, id 0x501, rev 0x01, class 0x0)
[    7.699574] bcma: bus0: Core 10 found: ARM Cortex A9 core (ihost) (manuf 0x4BF, id 0x510, rev 0x01, class 0x0)
[    7.709653] bcma: bus0: Core 11 found: USB 2.0 (manuf 0x4BF, id 0x504, rev 0x01, class 0x0)
[    7.718083] bcma: bus0: Core 12 found: USB 3.0 (manuf 0x4BF, id 0x505, rev 0x01, class 0x0)
[    7.726543] bcma: bus0: Core 13 found: SDIO3 (manuf 0x4BF, id 0x503, rev 0x01, class 0x0)
[    7.734825] bcma: bus0: Core 14 found: ARM Cortex A9 JTAG (manuf 0x4BF, id 0x506, rev 0x01, class 0x0)
[    7.744234] bcma: bus0: Core 15 found: Denali DDR2/DDR3 memory controller (manuf 0x4BF, id 0x507, rev 0x01, class 0x0)
[    7.755025] bcma: bus0: Core 16 found: ROM (manuf 0x4BF, id 0x508, rev 0x01, class 0x0)
[    7.763130] bcma: bus0: Core 17 found: NAND flash controller (manuf 0x4BF, id 0x509, rev 0x01, class 0x0)
[    7.772789] bcma: bus0: Core 18 found: SPI flash controller (manuf 0x4BF, id 0x50A, rev 0x01, class 0x0)
[    7.782255] bcma: bus0: Flash type not supported
[    7.788459] m25p80 spi32766.0: unrecognized JEDEC id bytes: ff, ff, ff
[    7.795213] m25p80 spi32766.0: using Read Manufacturer / Device ID command (0x90) returned ff ff
[    7.803995] m25p80: probe of spi32766.0 failed with error -2
[    7.810235] bgmac_bcma bcma0:3: Found PHY addr: 0
[    7.815011] bgmac_bcma bcma0:3: Invalid MAC addr: 00:00:00:00:00:00
[    7.821306] bgmac_bcma bcma0:3: Using random MAC: 56:84:cf:0a:5e:9a
[    7.829466] b53_common: found switch: BCM53011, rev 5
[    7.835453] bgmac_bcma bcma0:4: Found PHY addr: 0
[    7.840304] bgmac_bcma bcma0:4: Invalid MAC addr: 00:00:00:00:00:00
[    7.846574] bgmac_bcma bcma0:4: Using random MAC: 52:c4:a1:d7:ea:1f
[    7.854333] bgmac_bcma bcma0:5: Found PHY addr: 0
[    7.859119] bgmac_bcma bcma0:5: Invalid MAC addr: 00:00:00:00:00:00
[    7.865440] bgmac_bcma bcma0:5: Using random MAC: be:d9:aa:8a:83:83
[    7.873208] bgmac_bcma bcma0:6: Unsupported core_unit 3
[    7.878453] bgmac_bcma: probe of bcma0:6 failed with error -524
[    7.990287] pcie_iproc_bcma bcma0:7: PCI host bridge to bus 0000:00
[    7.996548] pci_bus 0000:00: root bus resource [mem 0x08000000-0x0fffffff]
[    8.003431] pcie_iproc_bcma bcma0:7: link: UP
[    8.008059] PCI: bus0: Fast back to back transfers disabled
[    8.013639] pci 0000:00:00.0: bridge configuration invalid ([bus 00-00]), reconfiguring
[    8.022137] PCI: bus1: Fast back to back transfers disabled
[    8.027754] pci 0000:00:00.0: BAR 8: assigned [mem 0x08000000-0x080fffff]
[    8.034546] pci 0000:01:00.0: BAR 0: assigned [mem 0x08000000-0x08003fff 64bit]
[    8.041846] pci 0000:00:00.0: PCI bridge to [bus 01]
[    8.046796] pci 0000:00:00.0:   bridge window [mem 0x08000000-0x080fffff]
[    8.160272] pcie_iproc_bcma bcma0:8: PCI host bridge to bus 0001:00
[    8.166531] pci_bus 0001:00: root bus resource [mem 0x40000000-0x47ffffff]
[    8.173409] pcie_iproc_bcma bcma0:8: link: UP
[    8.178037] PCI: bus0: Fast back to back transfers disabled
[    8.183616] pci 0001:00:00.0: bridge configuration invalid ([bus 00-00]), reconfiguring
[    8.192094] PCI: bus1: Fast back to back transfers disabled
[    8.197709] pci 0001:00:00.0: BAR 8: assigned [mem 0x40000000-0x400fffff]
[    8.204500] pci 0001:01:00.0: BAR 0: assigned [mem 0x40000000-0x40007fff 64bit]
[    8.211801] pci 0001:00:00.0: PCI bridge to [bus 01]
[    8.216744] pci 0001:00:00.0:   bridge window [mem 0x40000000-0x400fffff]
[    8.330288] pcie_iproc_bcma bcma0:9: PCI host bridge to bus 0002:00
[    8.336539] pci_bus 0002:00: root bus resource [mem 0x48000000-0x4fffffff]
[    8.343410] pcie_iproc_bcma bcma0:9: PHY or data link is INACTIVE!
[    8.349562] pcie_iproc_bcma bcma0:9: no PCIe EP device detected
[    8.355551] pcie_iproc_bcma bcma0:9: PCIe controller setup failed
[    8.362902] bcm47xx-wdt bcm47xx-wdt.0: BCM47xx Watchdog Timer enabled (30 seconds, Software Timer)
[    8.371880] bcma: bus0: Bus registered
[    8.375785] pci 0000:00:00.0: enabling device (0140 -&gt; 0142)
[    8.381469] bcma-pci-bridge 0000:01:00.0: enabling device (0140 -&gt; 0142)
[    8.388179] bcma: bus1: Found chip with id 0x4331, rev 0x02 and package 0x08
[    8.395239] bcma: bus1: Core 0 found: ChipCommon (manuf 0x4BF, id 0x800, rev 0x25, class 0x0)
[    8.403757] bcma: bus1: Core 1 found: IEEE 802.11 (manuf 0x4BF, id 0x812, rev 0x1D, class 0x0)
[    8.412373] bcma: bus1: Core 2 found: PCIe (manuf 0x4BF, id 0x820, rev 0x13, class 0x0)
[    8.544268] bcma: bus1: Invalid SPROM read from the PCIe card, trying to use fallback SPROM
[    8.590411] bcma: bus1: Bus registered
[    8.594219] pci 0001:00:00.0: enabling device (0140 -&gt; 0142)
[    8.599866] bcma-pci-bridge 0001:01:00.0: enabling device (0140 -&gt; 0142)
[    8.606598] bcma: bus2: Found chip with id 0x4360, rev 0x03 and package 0x01
[    8.613659] bcma: bus2: Core 0 found: ChipCommon (manuf 0x4BF, id 0x800, rev 0x2B, class 0x0)
[    8.622170] bcma: bus2: Core 1 found: IEEE 802.11 (manuf 0x4BF, id 0x812, rev 0x2A, class 0x0)
[    8.630777] bcma: bus2: Core 2 found: ARM CR4 (manuf 0x4BF, id 0x83E, rev 0x02, class 0x0)
[    8.639025] bcma: bus2: Core 3 found: PCIe Gen2 (manuf 0x4BF, id 0x83C, rev 0x01, class 0x0)
[    8.647450] bcma: bus2: Core 4 found: USB 2.0 Device (manuf 0x4BF, id 0x81A, rev 0x11, class 0x0)
[    8.687832] bcma: bus2: Invalid SPROM read from the PCIe card, trying to use fallback SPROM
[    8.698786] bcma: bus2: Bus registered
[    8.703744] NET: Registered protocol family 10
[    8.709438] NET: Registered protocol family 17
[    8.714009] bridge: automatic filtering via arp/ip/ip6tables has been deprecated. Update your scripts to load br_netfilter if you need this.
[    8.726595] 8021q: 802.1Q VLAN Support v1.8
[    8.730857] Registering SWP/SWPB emulation handler
[    8.738938] VFS: Cannot open root device &quot;(null)&quot; or unknown-block(0,0): error -6
[    8.746455] Please append a correct &quot;root=&quot; boot option; here are the available partitions:
[    8.754797] 1f00          131072 mtdblock0  (driver?)
[    8.759836] Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0)
[    8.768060] CPU1: stopping
[    8.770768] CPU: 1 PID: 0 Comm: swapper/1 Not tainted 4.4.27 #0
[    8.776660] Hardware name: BCM5301X
[    8.780135] Backtrace: 
[    8.782606] [&lt;c0017074&gt;] (dump_backtrace) from [&lt;c0017270&gt;] (show_stack+0x18/0x1c)
[    8.790139]  r7:c7859f60 r6:00000000 r5:60000193 r4:00000000
[    8.795827] [&lt;c0017258&gt;] (show_stack) from [&lt;c017d218&gt;] (dump_stack+0x84/0xa4)
[    8.803024] [&lt;c017d194&gt;] (dump_stack) from [&lt;c0018a58&gt;] (handle_IPI+0xf4/0x19c)
[    8.810295]  r5:00000001 r4:c04a7ca8
[    8.813871] [&lt;c0018964&gt;] (handle_IPI) from [&lt;c000948c&gt;] (gic_handle_irq+0x80/0x9c)
[    8.821399]  r7:c049aeec r6:c7859f60 r5:c0490708 r4:c8802100
[    8.827067] [&lt;c000940c&gt;] (gic_handle_irq) from [&lt;c000a074&gt;] (__irq_svc+0x54/0x70)
[    8.834516] Exception stack(0xc7859f60 to 0xc7859fa8)
[    8.839550] 9f60: 00000000 000012ec c6dd9254 c000ae40 c048a224 c0490498 10c0387d c04a7cb0
[    8.847689] 9f80: 0000406a 413fc090 00000000 c7859fbc c7859fc0 c7859fb0 c0014560 c0014564
[    8.855822] 9fa0: 60000013 ffffffff
[    8.859292]  r9:413fc090 r8:0000406a r7:c7859f94 r6:ffffffff r5:60000013 r4:c0014564
[    8.867050] [&lt;c0014530&gt;] (arch_cpu_idle) from [&lt;c004fc34&gt;] (default_idle_call+0x30/0x34)
[    8.875104] [&lt;c004fc04&gt;] (default_idle_call) from [&lt;c004fd68&gt;] (cpu_startup_entry+0x130/0x194)
[    8.883674] [&lt;c004fc38&gt;] (cpu_startup_entry) from [&lt;c0018764&gt;] (secondary_start_kernel+0x10c/0x128)
[    8.892677] [&lt;c0018658&gt;] (secondary_start_kernel) from [&lt;0000954c&gt;] (0x954c)
[    8.899685]  r5:00000051 r4:0784006a
[    8.906260] Rebooting in 1 seconds..Digital core power voltage set to 0.9375V</code></pre></div><br /><br /><p>I change the kernel config: support software BCH ECC, nand ECC SMart Media Byte Order. <br />But it still failed to boot.</p><p>I can see, brcmnand_read_by_pio() function returns&nbsp; -74 when read oob data. Sometimes OK, and sometimes failed when nand_do_read_oob() called.</p><br /><br /><p>After flashing broadcom sdk firmware, my router print :</p><div class="codebox"><pre><code>Northstar brcmnand NAND Flash Controller driver, Version 0.1 (c) Broadcom Inc. 2012
NAND device: Manufacturer ID: 0x01, Chip ID: 0xf1 (AMD NAND 128MiB 3,3V 8-bit)
Spare area=64 eccbytes 8, ecc bytes located at:
 14 15 30 31 46 47 62 63
Available 55 bytes at (off,len):
(1,13) (16,14) (32,14) (48,14) (0,0) (0,0) (0,0) (0,0) 
Scanning device for bad blocks</code></pre></div>											<p class="post-edited">(Last edited by <strong>liveonlinux</strong> on 17 Nov 2016, 11:31)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=68019&amp;p=2.html">2</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>