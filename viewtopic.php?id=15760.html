<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Buildroot - clear instructions</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 12 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p68572">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">ds18s20</div>
					<div class="post-datetime">
						22 May 2008, 21:48					</div>
				</div>
				<div class="post-content content">
					<p>Is there a clear step-by step WiKi that actually works in real life for compiling buildroot?</p><p>That would include true steps that will produce results - such as: get Fedora9 DVD, install etc, svn the trunk, type make menuconfig, type make, you are done but by done I dont mean someone typed &quot;done&quot; in a non-working WiKi but done by means of compile with no errors at the very last line before the blinking cursor!</p><p>Sadly the trunk flat out bombs out under FC9 and I honetly can&#039;t spend 77 hours monkeying around with packages, etc so a clear directive towards success will be most&nbsp; helpful!</p><p>In other words, is there at least ONE example of successful compile and if yes - what did it take to achive that? 1-2-3?</p><p>Thanks<br />B</p>											<p class="post-edited">(Last edited by <strong>ds18s20</strong> on 22 May 2008, 21:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68576">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">aoz.syn</div>
					<div class="post-datetime">
						22 May 2008, 23:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>Is there a clear step-by step WiKi that actually works in real life for compiling buildroot?</p></blockquote></div><p>I build nearly every day for one reason or another:<br /></p><div class="codebox"><pre><code>mkdir -p ~/build/openwrt
svn co https://svn.openwrt.org/openwrt/trunk/ ~/build/openwrt
cd ~/build/openwrt
make menuconfig
make
ls -l bin</code></pre></div><p>That&#039;s roughly the process I follow (changed directory names to protect the innocent).<br /></p><div class="quotebox"><blockquote><p>Sadly the trunk flat out bombs out under FC9 and I honetly can&#039;t spend 77 hours monkeying around with packages, etc so a clear directive towards success will be most&nbsp; helpful!</p></blockquote></div><p>It would be even more helpful to those that would help you to post what your build error is; not the whole build log, but what the last ~50 lines say after &#039;make V=99&#039;.</p><div class="quotebox"><blockquote><p>In other words, is there at least ONE example of successful compile and if yes - what did it take to achive that? 1-2-3?</p></blockquote></div><p>You have one, and the wiki has some too.&nbsp; It sounds like you&#039;re wanting a FC9-specific HOWTO, which you are unlikely to get; there isn&#039;t a lot of hand-holding patience for development-level work.</p><p>I personally use Gentoo since it&#039;s so developer-friendly and comes with all the toolchain and such that I could need.&nbsp; That said, the build environment is quite good about checking for the things it needs before setting off to compile.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68577">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">ciscostu</div>
					<div class="post-datetime">
						22 May 2008, 23:49					</div>
				</div>
				<div class="post-content content">
					<p>This may help-</p><p><a href="http://forum.openwrt.org/viewtopic.php?id=8410">http://forum.openwrt.org/viewtopic.php?id=8410</a></p><p>Charlie</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68579">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">thepeople</div>
					<div class="post-datetime">
						23 May 2008, 00:27					</div>
				</div>
				<div class="post-content content">
					<p>Without posting the error nobody can tell you what is wrong. I use F9 with the buildroot and it works fine.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68580">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">ds18s20</div>
					<div class="post-datetime">
						23 May 2008, 00:31					</div>
				</div>
				<div class="post-content content">
					<p>But guys you miss the point - errors ARE NOT relevant if a clean way exists to do this.</p><p>aoz.syn - you are getting close to what I was hoping to see. So in your case, would a preeding steps such as those produce a successful outcome or will it again error somewhere:<br /></p><div class="codebox"><pre><code>get the latest ISO of Gentoo
install on blank HD, select ALL (sources, etc)
mkdir -p ~/build/openwrt
svn co https://svn.openwrt.org/openwrt/trunk/ ~/build/openwrt
cd ~/build/openwrt
make menuconfig
make
ls -l bin</code></pre></div><p>I am defenitely NOT committed to FC9. The binary image doesnt care what distro it was compiled under nor does it the wrt54g platform which will run it. I am happy to redo the dev setup as long as clear and PREDICTIBLE steps exist. Meaning 1-2-3 and it works. </p><p>Thanks</p>											<p class="post-edited">(Last edited by <strong>ds18s20</strong> on 23 May 2008, 00:41)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68586">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">aoz.syn</div>
					<div class="post-datetime">
						23 May 2008, 07:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>But guys you miss the point - errors ARE NOT relevant if a clean way exists to do this.</p></blockquote></div><p>I&#039;m afraid that is the point - there are a multitude of very clean, very well-documented approaches to setting up a Linux C/C++ development environment in general, and there are many of us that do the whole process from scratch weekly if not daily.&nbsp; We know the build process works (for some in the very environment you seem to be using), so there <span class="bbu">has</span> to have been either a missing component or a user error.&nbsp; I am not an OpenWRT dev (even though I&#039;ve been around the Linux programming block a time or five), but thepeople most definitely is, and it would behoove you to listen to what they say about the build process.</p><div class="quotebox"><blockquote><p>Meaning 1-2-3 and it works.</p></blockquote></div><p>Therein lies the problem - you are insisting on somebody spoon-feeding you baby steps when you&#039;re trying to venture into an area where you <em><span class="bbu">must</span></em> understand at least the basic concepts and cannot blindly fumble around.&nbsp; The OWRT devs have done a fantastic job of streamlining the build process and making it nearly self-sufficient, which comes back to the issue of, &quot;show us your error and we&#039;ll fix your problem.&quot;</p><p>Here&#039;s the thing: I may be alone in voicing this, but I detest and refuse to author or support HOWTOs.&nbsp; The reason behind this is that they take too much post-authorship work to maintain as a relevant work and are far too brittle - if someone wants or needs to deviate from the steps outlined, they get hopelessly lost.&nbsp; Whether they agree or not, users need concepts, not steps. [insert aphorism about teaching to fish]&nbsp; I have yet to encounter a series of steps to do anything that are absolutely fool-proof and guarantee 100% success for all users.&nbsp; Yes, I&#039;m a cynical engineer and know just about everyone does <em>some</em> kind of deviation from given steps.</p><p>If you are really up for tackling installing Gentoo, the only additional software you need to install is subversion; everything else the OWRT buildroot needs is already there due to Gentoo&#039;s compile-from-source approach.&nbsp; However, it is developer-friendly, not user-friendly.&nbsp; A more user-friendly flavor (Fedora, Ubuntu, etc.) typically need some extras that often come in the form of a &quot;development&quot; package group or the like; if you just took the shotgun &quot;install everything&quot; approach, you probably have what you need.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68589">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">deh</div>
					<div class="post-datetime">
						23 May 2008, 08:10					</div>
				</div>
				<div class="post-content content">
					<p>ds18s20,<br />I just started on building and I have been meeting some &quot;challenges&quot;, too.</p><div class="codebox"><pre><code>cd ~
svn checkout https://svn.openwrt.org/openwrt/trunk/ kamikaze
cd kamikaze
make prereq</code></pre></div><p>This failed with missing g++ and autoconf.&nbsp; I&#039;m using Suse 10.3 so apt-get doesn&#039;t work (though a friend said one can get packages to do this).&nbsp; YAST doesn&#039;t turn up anything for g++, however g++-4.2 was already present and<br /></p><div class="codebox"><pre><code>ln -s g++-4.2 g++</code></pre></div><p>took care of that.&nbsp; YAST installed autoconf fine.<br />Running make prereq then was OK and goes into menuconfig, which goes on to start &quot;make&quot;.&nbsp; This failed right off.&nbsp; I then tried-- <br /></p><div class="codebox"><pre><code>make world</code></pre></div><p>This builds the tools (and takes a long time--hour or so on a 1.8GHz machine with 2GB ram).&nbsp; Alas, this failed, too, though it got most of the way through.&nbsp; The message said to run it again with V=99 to see what happened.&nbsp; Here is the tail-end of that run--<br /></p><div class="codebox"><pre><code>/home/deh/Lnksys/wrt54g/OpenWRT/kamikaze/staging_dir/mipsel/usr/include/lauxlib.h:59: error: `lua_Integer&#039; declared as function return                       ing a function
/home/deh/Lnksys/wrt54g/OpenWRT/kamikaze/staging_dir/mipsel/usr/include/lauxlib.h:59: warning: parameter names (without types) in func                       tion declaration
make[4]: *** [uci.o] Error 1
make[3]: *** [/home/deh/Lnksys/wrt54g/OpenWRT/kamikaze/build_dir/mipsel/uci-0.3.4/.built] Error 2
make[2]: *** [package/uci/compile] Error 2
make[1]: *** [/home/deh/Lnksys/wrt54g/OpenWRT/kamikaze/staging_dir/mipsel/stamp/.package_compile] Error 2
make: *** [world] Error 2</code></pre></div><p>I&#039;m leary that the distro &amp; compiler are part of the problem.&nbsp; All it takes is one small detail for it to fail.&nbsp; (Time for bed.&nbsp; I&#039;ll give it another &quot;go&quot; tomorrow.)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68590">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">thepeople</div>
					<div class="post-datetime">
						23 May 2008, 08:13					</div>
				</div>
				<div class="post-content content">
					<p>@deh: that bug was fixed in r11241, please update and try again.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68592">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">placebo</div>
					<div class="post-datetime">
						23 May 2008, 08:40					</div>
				</div>
				<div class="post-content content">
					<p>You might want to stick with the sources of the released versions of Kamikaze instead of trying to use the trunk. You&#039;ll avoid problems due to the developmental nature of the trunk.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68593">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">ds18s20</div>
					<div class="post-datetime">
						23 May 2008, 08:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>placebo wrote:</cite><blockquote><p>You might want to stick with the sources of the released versions of Kamikaze instead of trying to use the trunk. You&#039;ll avoid problems due to the developmental nature of the trunk.</p></blockquote></div><p>I&#039;m happy to report that kamikaze_7.09 compiles fine on FC9 clean install directly from DVD with &quot;all&quot; option selected:</p><div class="codebox"><pre><code>1839104 2008-05-22 05:58 openwrt-brcm-2.4-squashfs.trx
27072341 2008-05-22 06:00 OpenWrt-ImageBuilder-brcm-2.4-for-Linux-i686.tar.bz2
37482306 2008-05-22 05:59 OpenWrt-SDK-brcm-2.4-for-Linux-i686.tar.bz2
1839132 2008-05-22 05:58 openwrt-usr5461-squashfs.bin
1839112 2008-05-22 05:58 openwrt-wa840g-squashfs.bin
1839112 2008-05-22 05:58 openwrt-we800g-squashfs.bin
1839112 2008-05-22 05:58 openwrt-wr850g-squashfs.bin
1839136 2008-05-22 05:58 openwrt-wrt150n-2.4-squashfs.bin
1839136 2008-05-22 05:58 openwrt-wrt300n_v1-2.4-squashfs.bin
1839136 2008-05-22 05:58 openwrt-wrt54g-2.4-squashfs.bin
1839136 2008-05-22 05:58 openwrt-wrt54g3g-2.4-squashfs.bin
1839136 2008-05-22 05:58 openwrt-wrt54gs-2.4-squashfs.bin
1839136 2008-05-22 05:58 openwrt-wrt54gs_v4-2.4-squashfs.bin
1839136 2008-05-22 05:58 openwrt-wrtsl54gs-2.4-squashfs.bin</code></pre></div><p>The binary images appear &quot;real&quot; and the one which I tested (wrt54g v2) works just fine on my test router. </p><p>I think I am close to having the kind of WiKi I was looking for in the first place. To &quot;freeze&quot; the predictible nature of this setup I would like to make sure that the svn sources do not change.</p><p>I will bzip the tree and integrated into the ISO with a simple script to explode it and voila. I believe this is almost identical to the VMware approach which is wonderful except the Ubuntu VMware image stopped compiling the trunk sources at some point in time during svn changes. Either svn got too &quot;new&quot; or the older Ubuntu version got too &quot;old&quot; for the sources. </p><p>~B</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68595">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">forum2008</div>
					<div class="post-datetime">
						23 May 2008, 11:23					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://forum.openwrt.org/viewtopic.php?id=15201">[Howto] Getting the OpenWrt trunk source and build it</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68773">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">candlerb</div>
					<div class="post-datetime">
						27 May 2008, 15:05					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ds18s20 wrote:</cite><blockquote><p>To &quot;freeze&quot; the predictible nature of this setup I would like to make sure that the svn sources do not change</p></blockquote></div><p>svn co <a href="https://svn.openwrt.org/openwrt/tags/kamikaze_7.09/">https://svn.openwrt.org/openwrt/tags/kamikaze_7.09/</a></p><p>Or if you want to use trunk: svn co -rNNNNN <a href="https://svn.openwrt.org/openwrt/trunk/">https://svn.openwrt.org/openwrt/trunk/</a> where NNNNN is the revision number you want to freeze at.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p71690">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">adyb</div>
					<div class="post-datetime">
						2 Aug 2008, 18:32					</div>
				</div>
				<div class="post-content content">
					<p>Who would like a link to a VMWare machine running ubuntu with all the relevant bits n bobs in place?</p>											<p class="post-edited">(Last edited by <strong>adyb</strong> on 2 Aug 2008, 18:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p71691">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">ds18s20</div>
					<div class="post-datetime">
						2 Aug 2008, 18:52					</div>
				</div>
				<div class="post-content content">
					<p>Sure, that would be very helpful!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p71692">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">adyb</div>
					<div class="post-datetime">
						2 Aug 2008, 19:05					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ll try and have this ready for Monday, if not sooner.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p75785">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">KillaB</div>
					<div class="post-datetime">
						3 Nov 2008, 00:46					</div>
				</div>
				<div class="post-content content">
					<p>To continue on from an off topic post <a href="http://forum.openwrt.org/viewtopic.php?pid=75708#p75708">here</a> I decided to post in this thread.</p><p>Devs, as you can see compiling needs to be standardized.&nbsp; Also, downloading sources every time you compile is not ideal.<br />I know there are more posts on the subject, but <a href="http://forum.openwrt.org/viewtopic.php?pid=38724#p38724">this</a> is one that illustrates the need for defining a standard source directory.&nbsp; How about making /usr/src/OpenWrt/ or /home/username/OpenWrt/downloads/ a placeholder for source tarballs?</p><p>Thanks to dgi, I&#039;ve found the most comprehensive method for compiling so far is thus:<br /></p><div class="codebox"><pre><code>svn co https://svn.openwrt.org/openwrt/trunk/
cd trunk
make menuconfig
make package/symlinks #includes all packages including LuCI
make menuconfig #again
make</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103696">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">KillaB</div>
					<div class="post-datetime">
						25 Feb 2010, 00:27					</div>
				</div>
				<div class="post-content content">
					<p>Compiling instructions are here:<br /><a href="https://dev.openwrt.org/wiki/GetSource">https://dev.openwrt.org/wiki/GetSource</a></p><br /><p>Quick and dirty for 8.09.2:<br /></p><div class="codebox"><pre><code>svn co svn://svn.openwrt.org/openwrt/tags/8.09.2
cd 8.09.2
make menuconfig         #choose your platform, then exit making sure to save changes
make package/symlinks   #includes all packages including LuCI
make menuconfig         #choose the packages you want to install
make V=99</code></pre></div><p>Quick and dirty for trunk:<br /></p><div class="codebox"><pre><code>svn co svn://svn.openwrt.org/openwrt/trunk/
cd trunk
make menuconfig         #choose your platform, then exit making sure to save changes
make package/symlinks   #includes all packages including LuCI
make menuconfig         #choose the packages you want to install
make V=99</code></pre></div><p>Example for a specific directory and build:<br /></p><div class="codebox"><pre><code>svn co svn://svn.openwrt.org/openwrt/trunk/ WR1043ND_19840 -r19840</code></pre></div>											<p class="post-edited">(Last edited by <strong>KillaB</strong> on 25 Feb 2010, 00:47)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>