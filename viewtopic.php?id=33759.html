<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Backfire 10.03.1 bug: UCI or wireless?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 18 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p152372">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">dext3r</div>
					<div class="post-datetime">
						29 Dec 2011, 22:34					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,<br />Just grabbed the latest Backfire binary (didn&#039;t compile from source) and wireless seems to have &#039;shit the bed&#039;, in technical terms.</p><p>I&#039;m on a Asus WL-520GU - Broadcom 53xx<br />Using Broadcom 947xx/953xx profile, 2.6 kernel</p><p>b43 and b43-legacy wireless drivers, using firmware version 508.1084 (From driver 5.10.56.27)</p><p>I&#039;m -NOT- trying to do a bridged wireless client. I&#039;m just trying to set up as masquerade<br />I don&#039;t need anything but the router connected to the network - nothing will be plugged into LAN/WAN ports.<br /><a href="http://wiki.openwrt.org/doc/recipes/routedclient#using.masquerade">http://wiki.openwrt.org/doc/recipes/rou â€¦ masquerade</a></p><p>I follow these steps:<br /></p><div class="codebox"><pre><code>uci del wireless.@wifi-device[0].disabled
uci del wireless.@wifi-iface[0].network
uci set wireless.@wifi-iface[0].mode=sta
uci commit wireless
wifi</code></pre></div><p>When I type &#039;wifi&#039; to restart wifi, everything breaks. According to this dump that shows right after I type &#039;wifi&#039;, I think something is wrong with UCI, but can&#039;t tell why it fails really. Any help? <br />Whats going on here? Thanks for the help.</p><div class="codebox"><pre><code>b43-phy0: Broadcom 5354 WLAN found (core revision 13)
Registered led device: b43-phy0::tx
Registered led device: b43-phy0::rx
Broadcom 43xx driver loaded [ Features: PL ]
Broadcom 43xx-legacy driver loaded [ Features: PLID ]
PPP generic driver version 2.4.2
ip_tables: (C) 2000-2006 Netfilter Core Team
NET: Registered protocol family 24
nf_conntrack version 0.5.0 (209 buckets, 836 max)
CONFIG_NF_CT_ACCT is deprecated and will be removed soon. Please use
nf_conntrack.acct=1 kernel parameter, acct=1 nf_conntrack module option or
sysctl net.netfilter.nf_conntrack_acct=1 to enable it.
b43-phy0: Loading firmware version 508.1084 (2009-01-14 01:32:01)
---!!!!!--HERE--!!!!!-----&gt;uci: page allocation failure. order:0, mode:0x20 &lt;---!!!!!!!-------
Call Trace:[&lt;8000a278&gt;] 0x8000a278
[&lt;8000a278&gt;] 0x8000a278
[&lt;80067a08&gt;] 0x80067a08
[&lt;80091e30&gt;] 0x80091e30
[&lt;80f387b4&gt;] 0x80f387b4
[&lt;80092528&gt;] 0x80092528
[&lt;80193a28&gt;] 0x80193a28
[&lt;80f38490&gt;] 0x80f38490
[&lt;8015172c&gt;] 0x8015172c
[&lt;80056d20&gt;] 0x80056d20
[&lt;8005919c&gt;] 0x8005919c
[&lt;8000e194&gt;] 0x8000e194
[&lt;8002bd7c&gt;] 0x8002bd7c
[&lt;80001444&gt;] 0x80001444
[&lt;8000e194&gt;] 0x8000e194
[&lt;80018a88&gt;] 0x80018a88
[&lt;8012e134&gt;] 0x8012e134
[&lt;8012dacc&gt;] 0x8012dacc
[&lt;8012e134&gt;] 0x8012e134
[&lt;8012e134&gt;] 0x8012e134
[&lt;80001444&gt;] 0x80001444
[&lt;8012da60&gt;] 0x8012da60
[&lt;800f7284&gt;] 0x800f7284
[&lt;800f3578&gt;] 0x800f3578
[&lt;800f339c&gt;] 0x800f339c
[&lt;8000508c&gt;] 0x8000508c
[&lt;800ef6d0&gt;] 0x800ef6d0
[&lt;8003e1f4&gt;] 0x8003e1f4
[&lt;800f7284&gt;] 0x800f7284
[&lt;8003e1f4&gt;] 0x8003e1f4
[&lt;800f00b4&gt;] 0x800f00b4
[&lt;80067760&gt;] 0x80067760
[&lt;800f10ac&gt;] 0x800f10ac
[&lt;8005fc54&gt;] 0x8005fc54
[&lt;8006a650&gt;] 0x8006a650
[&lt;8001d7a0&gt;] 0x8001d7a0
[&lt;8006a6e0&gt;] 0x8006a6e0
[&lt;8006ad24&gt;] 0x8006ad24
[&lt;80061de0&gt;] 0x80061de0
[&lt;80056eac&gt;] 0x80056eac
[&lt;80095bd8&gt;] 0x80095bd8
[&lt;80001444&gt;] 0x80001444
[&lt;80004d2c&gt;] 0x80004d2c
[&lt;8003e1f4&gt;] 0x8003e1f4
[&lt;80084318&gt;] 0x80084318
[&lt;800f7310&gt;] 0x800f7310
[&lt;80096884&gt;] 0x80096884
[&lt;800969fc&gt;] 0x800969fc
[&lt;80003230&gt;] 0x80003230

Mem-Info:
Normal per-cpu:
CPU    0: hi:    0, btch:   1 usd:   0
active_anon:167 inactive_anon:186 isolated_anon:0
 active_file:289 inactive_file:231 isolated_file:0
 unevictable:0 dirty:0 writeback:0 unstable:0
 free:48 slab_reclaimable:136 slab_unreclaimable:1720
 mapped:172 shmem:9 pagetables:48 bounce:0
Normal free:192kB min:508kB low:632kB high:760kB active_anon:668kB inactive_anon:744kB active_file:1156kB inactive_file:924kB unevictable:0kB isolated(anon):0kB isolated(file):0kB present:16256kB mlocked:0kB dirty:0kB writeback:0kB mapped:688kB shmem:36kB slab_reclaimable:544kB slab_unreclaimable:6880kB kernel_stack:264kB pagetables:192kB unstable:0kB bounce:0kB writeback_tmp:0kB pages_scanned:0 all_unreclaimable? no
lowmem_reserve[]: 0 0
Normal: 0*4kB 0*8kB 0*16kB 0*32kB 1*64kB 1*128kB 0*256kB 0*512kB 0*1024kB 0*2048kB 0*4096kB = 192kB
530 total pagecache pages
0 pages in swap cache
Swap cache stats: add 0, delete 0, find 0/0
Free swap  = 0kB
Total swap = 0kB
4096 pages RAM
749 pages reserved
1208 pages shared
2802 pages non-shared</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p152601">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						1 Jan 2012, 18:31					</div>
				</div>
				<div class="post-content content">
					<p>You&#039;re out of memory.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p152670">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">whbjr</div>
					<div class="post-datetime">
						2 Jan 2012, 05:12					</div>
				</div>
				<div class="post-content content">
					<p>jow is right - &quot;page allocation failure&quot; means OpenWRT asked for more memory, but there was none to be had.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p152926">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">dext3r</div>
					<div class="post-datetime">
						3 Jan 2012, 22:26					</div>
				</div>
				<div class="post-content content">
					<p>ah yes, sorry for the n00b-ish question, should have recognized that as memory error...</p><p>BUT, I&#039;m doing this right out of a fresh boot of OpenWRT. I&#039;ve even killed some running processes (dropbear, dnsmasq, etc) to free up any RAM - still happens. Could there be a memory leak somewhere? This router worked with previous versions of Backfire OK and 16MB RAM should be enough to at least get the system running with wifi...</p><p>Something is not right here.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p153068">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">dext3r</div>
					<div class="post-datetime">
						4 Jan 2012, 18:32					</div>
				</div>
				<div class="post-content content">
					<p>Just tried it with fresh Backfire RC5 binary and does not crash when enabling wifi. </p><p>It shows very similar free memory between RC5 and 10.03.1 before enabling wifi:</p><p>RC5<br />Mem total: 13388<br />Mem free: 1072</p><p>10.03.1:<br />Mem total: 13388<br />Mem free: 1448 (after killing some processes)</p><p>then try to enable wifi....crash.</p><p>Difference between RC5 and 10.03.1 is the included b43 driver. <br />RC5 uses 410.2160, <br />10.03.1 (and experimental trunk) uses 508.1084, which seem to cause memory issue for me.</p><p>For now problem seems fixed, thank you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p155747">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">r2d2</div>
					<div class="post-datetime">
						29 Jan 2012, 17:35					</div>
				</div>
				<div class="post-content content">
					<p>Same here with the asus 500gp v2 and 10.3.1 final - <a href="https://forum.openwrt.org/viewtopic.php?pid=155744">https://forum.openwrt.org/viewtopic.php?pid=155744</a></p><p>For me its not critical. Maybe, if its a general and permanent error (because b43), its good to point that out in the devices wiki.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>