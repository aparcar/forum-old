<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [r18946]: FreeSwitch fails to compile</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 4 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p99359">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						27 Dec 2009, 01:05					</div>
				</div>
				<div class="post-content content">
					<p>Today, I just performed an OpenWRT SVN update, i.e. <em>svn up</em> and <em>scripts/feeds update</em>. When I executed <em>make</em>, the compilation returned and error message saying FreeSwitch failed to compile:<br /></p><div class="codebox"><pre><code>make[3] -C feeds/packages/net/freeswitch compile
make -r world: build failed. Please re-run make with V=99 to see what&#039;s going on
make: *** [world] Error 1</code></pre></div><p>Then I executed <em>make package/feeds/packages/freeswitch/compile V=99</em> and the compilation spitted out the following error messages:<br /></p><div class="codebox"><pre><code>make[10]: Entering directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.1/freeswitch-1.0.4/libs/iksemel/src&#039;
 mipsel-openwrt-linux-uclibc-gcc -DHAVE_CONFIG_H -I. -I../include -I../include -I/opt/tmp/openwrt-svn-trunk-WGT634U/staging_dir/target-mipsel_uClibc-0.9.30.1/usr/include -I/opt/tmp/openwrt-svn-trunk-WGT634U/staging_dir/target-mipsel_uClibc-0.9.30.1/include -I/opt/tmp/openwrt-svn-trunk-WGT634U/staging_dir/toolchain-mipsel_gcc-4.3.3+cs_uClibc-0.9.30.1/usr/include -I/opt/tmp/openwrt-svn-trunk-WGT634U/staging_dir/toolchain-mipsel_gcc-4.3.3+cs_uClibc-0.9.30.1/include -Os -pipe -mips32 -mtune=mips32 -funit-at-a-time -fhonour-copts -msoft-float -Wall -I/usr/include -Os -pipe -mips32 -mtune=mips32 -funit-at-a-time -fhonour-copts -msoft-float -Wall -MT libiksemel_la-io-posix.lo -MD -MP -MF .deps/libiksemel_la-io-posix.Tpo -c io-posix.c  -fPIC -DPIC -o libiksemel_la-io-posix.o
cc1: warning: include location &quot;/usr/include&quot; is unsafe for cross-compilation
io-posix.c:1: note: someone does not honour COPTS correctly, passed 2 times
io-posix.c: In function &#039;io_recv&#039;:
io-posix.c:116: error: can&#039;t find a register in class &#039;COP3_REGS&#039; while reloading &#039;asm&#039;
io-posix.c:116: error: &#039;asm&#039; operand has impossible constraints
make[10]: *** [libiksemel_la-io-posix.lo] Error 1
make[10]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.1/freeswitch-1.0.4/libs/iksemel/src&#039;
Making all in tools
make[10]: Entering directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.1/freeswitch-1.0.4/libs/iksemel/tools&#039;
make[10]: *** No rule to make target `../src/libiksemel.la&#039;, needed by `ikslint&#039;.  Stop.
make[10]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.1/freeswitch-1.0.4/libs/iksemel/tools&#039;
Making all in test
make[10]: Entering directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.1/freeswitch-1.0.4/libs/iksemel/test&#039;
make[10]: *** No rule to make target `../src/libiksemel.la&#039;, needed by `tst-ikstack&#039;.  Stop.
make[10]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.1/freeswitch-1.0.4/libs/iksemel/test&#039;
Making all in doc
make[9]: *** [all-recursive] Error 1
make[9]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.1/freeswitch-1.0.4/libs/iksemel&#039;
make[8]: *** [../../../../libs/iksemel/src/libiksemel.la] Error 2
make[8]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.1/freeswitch-1.0.4/src/mod/endpoints/mod_dingaling&#039;
make[7]: *** [all] Error 1
make[7]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.1/freeswitch-1.0.4/src/mod/endpoints/mod_dingaling&#039;
make[6]: *** [mod_dingaling-all] Error 1
make[6]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.1/freeswitch-1.0.4/src/mod&#039;
make[5]: *** [all-recursive] Error 1
make[5]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.1/freeswitch-1.0.4/src&#039;
Making all in build
make[5]: Entering directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.1/freeswitch-1.0.4/build&#039;
 +-------- FreeSWITCH Build Complete -----------+
 + FreeSWITCH has been successfully built.      +
 + Install by running:                          +
 +                                              +
 +               make install                   +
 +----------------------------------------------+
make[5]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.1/freeswitch-1.0.4/build&#039;
make[4]: *** [all-recursive] Error 1
make[4]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.1/freeswitch-1.0.4&#039;
make[3]: *** [all] Error 2
make[3]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.1/freeswitch-1.0.4&#039;
make[2]: *** [/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.1/freeswitch-1.0.4/.built] Error 2
make[2]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/feeds/packages/net/freeswitch&#039;
make[1]: *** [package/feeds/packages/freeswitch/compile] Error 2
make[1]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U&#039;
make: *** [package/feeds/packages/freeswitch/compile] Error 2</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p99620">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						31 Dec 2009, 16:15					</div>
				</div>
				<div class="post-content content">
					<p>Bumped! Anyone?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p99629">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">marca56</div>
					<div class="post-datetime">
						31 Dec 2009, 19:52					</div>
				</div>
				<div class="post-content content">
					<p>Hi, Mazzilo:</p><p>I don&#039;t know about your problem, but I cannot compile it either due to Python dependencies failing before completion. In my case, I think the Python ARCH is incorrect but I&#039;m not enough of a programmer to fix it. If it&#039;s not fixed by someone else with Python experience shortly, my team will look into it in a week or two.</p><p>marc.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p99666">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						1 Jan 2010, 21:52					</div>
				</div>
				<div class="post-content content">
					<p>I hope <a href="https://forum.openwrt.org/profile.php?id=7217">Zandbelt</a> sees this thread and can fix the problem.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p99669">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">marca56</div>
					<div class="post-datetime">
						1 Jan 2010, 22:30					</div>
				</div>
				<div class="post-content content">
					<p>Mazilo:</p><p>We&#039;ll be taking a look at this in a few weeks as well and will straighten it out. I want to use Freeswitch for a commercial application on a brcm63xx platform.</p><p>Right now, we are finishing up a management application and will start on a USB root FS boot. The board we are using has a very big USB flash onboard <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>marc.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p99671">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						2 Jan 2010, 00:19					</div>
				</div>
				<div class="post-content content">
					<p>FS really consumes a lot of CPU resources that it takes sometimes to get ready once launched on a <a href="http://oldwiki.openwrt.org/OpenWrtDocs%282f%29Hardware%282f%29Netgear%282f%29WGT634U.html">WGT634U</a> @200MHz. I don&#039;t know how powerful a BRCM63XX CPU is, but I do believe it is much powerful than the CPU used on a <a href="http://oldwiki.openwrt.org/OpenWrtDocs%282f%29Hardware%282f%29Netgear%282f%29WGT634U.html">WGT634U</a>.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p99672">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">marca56</div>
					<div class="post-datetime">
						2 Jan 2010, 00:37					</div>
				</div>
				<div class="post-content content">
					<p>Mazilo:</p><p>In our case, it&#039;s 256MHz on the BCM6348 MIPS processor. It loads fast enough and though the ipkg from the buildbot is not really optimized, it seems fast enough. Once we get going, we&#039;ll optimize it and do some benchmarks between Freeswitch and Asterisk. </p><p>Based on real world tests in the x86 space, Freeswitch should be faster and consume less resources once optimized.</p><p>marc.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p99680">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						2 Jan 2010, 05:30					</div>
				</div>
				<div class="post-content content">
					<p>Marc,</p><p>Thanks for the information. On my WGT634U, it took 30+ seconds to get FS ready once executed. However, it&nbsp; can take an exhausted 2+ minutes long time to perform an FS shutdown, IIRC.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p100759">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						18 Jan 2010, 00:47					</div>
				</div>
				<div class="post-content content">
					<p>I updated my local OpenWRT with SVN r19193 and recompile the whole trunk after a <em>make distclean</em>. This time, I selected binutils-2.20, gcc-4.4.2, and uClibc-0.9.30.2. However, FreeSwitch compilation still spits out error messages (can&#039;t find a register in class &#039;COP3_REGS&#039; while reloading &#039;asm&#039; under iksemel package) as follows:<br /></p><div class="codebox"><pre><code>make[10]: Entering directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/libs/iksemel/src&#039;
 mipsel-openwrt-linux-uclibc-gcc -DHAVE_CONFIG_H -I. -I../include -I../include -I/opt/tmp/openwrt-svn-trunk-WGT634U/staging_dir/target-mipsel_uClibc-0.9.30.2/usr/include -I/opt/tmp/openwrt-svn-trunk-WGT634U/staging_dir/target-mipsel_uClibc-0.9.30.2/include -I/opt/tmp/openwrt-svn-trunk-WGT634U/staging_dir/toolchain-mipsel_gcc-4.4.2_uClibc-0.9.30.2/usr/include -I/opt/tmp/openwrt-svn-trunk-WGT634U/staging_dir/toolchain-mipsel_gcc-4.4.2_uClibc-0.9.30.2/include -Os -pipe -mips32 -mtune=mips32 -funit-at-a-time -fhonour-copts -msoft-float -Wall -I/usr/include -Os -pipe -mips32 -mtune=mips32 -funit-at-a-time -fhonour-copts -msoft-float -Wall -MT libiksemel_la-io-posix.lo -MD -MP -MF .deps/libiksemel_la-io-posix.Tpo -c io-posix.c  -fPIC -DPIC -o libiksemel_la-io-posix.o
cc1: note: someone does not honour COPTS correctly, passed 2 times
io-posix.c: In function &#039;io_recv&#039;:
io-posix.c:116: error: can&#039;t find a register in class &#039;COP3_REGS&#039; while reloading &#039;asm&#039;
io-posix.c:116: error: &#039;asm&#039; operand has impossible constraints
make[10]: *** [libiksemel_la-io-posix.lo] Error 1
make[10]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/libs/iksemel/src&#039;
Making all in tools
make[10]: Entering directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/libs/iksemel/tools&#039;
make[10]: *** No rule to make target `../src/libiksemel.la&#039;, needed by `ikslint&#039;.  Stop.
make[10]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/libs/iksemel/tools&#039;
Making all in test
make[10]: Entering directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/libs/iksemel/test&#039;
make[10]: *** No rule to make target `../src/libiksemel.la&#039;, needed by `tst-ikstack&#039;.  Stop.
make[10]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/libs/iksemel/test&#039;
Making all in doc
make[9]: *** [all-recursive] Error 1
make[9]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/libs/iksemel&#039;
make[8]: *** [../../../../libs/iksemel/src/libiksemel.la] Error 2
make[8]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/src/mod/endpoints/mod_dingaling&#039;
make[7]: *** [all] Error 1
make[7]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/src/mod/endpoints/mod_dingaling&#039;
make[6]: *** [mod_dingaling-all] Error 1
make[6]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/src/mod&#039;
make[5]: *** [all-recursive] Error 1
make[5]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/src&#039;
Making all in build
make[5]: Entering directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/build&#039;
 +-------- FreeSWITCH Build Complete -----------+
 + FreeSWITCH has been successfully built.      +
 + Install by running:                          +
 +                                              +
 +               make install                   +
 +----------------------------------------------+
make[5]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/build&#039;
make[4]: *** [all-recursive] Error 1
make[4]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4&#039;
make[3]: *** [all] Error 2
make[3]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4&#039;
make[2]: *** [/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/.built] Error 2
make[2]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/feeds/packages/net/freeswitch&#039;
make[1]: *** [package/feeds/packages/freeswitch/compile] Error 2
make[1]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U&#039;
make: *** [package/feeds/packages/freeswitch/compile] Error 2</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p100760">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						18 Jan 2010, 01:23					</div>
				</div>
				<div class="post-content content">
					<p>mazilo, try the following patch:</p><div class="codebox"><pre><code>Index: net/freeswitch/Makefile
===================================================================
--- net/freeswitch/Makefile    (Revision 19204)
+++ net/freeswitch/Makefile    (Arbeitskopie)
@@ -254,7 +254,7 @@
     config_BUILD_CC=&quot;$(HOSTCC)&quot; \
     config_BUILD_CFLAGS=&quot;$(HOST_CFLAGS)&quot; \
     config_TARGET_CC=&quot;$(TARGET_CC)&quot; \
-    config_TARGET_CFLAGS=&quot;$(TARGET_CFLAGS)&quot; \
+    config_TARGET_CFLAGS=&quot;$(TARGET_CFLAGS) -fomit-frame-pointer&quot; \
     config_TARGET_READLINE_INC=&quot;$(TARGET_CPPFLAGS)&quot; \
     config_TARGET_READLINE_LIBS=&quot;$(TARGET_LDFLAGS) -lreadline -lncurses&quot; \
     config_TARGET_LIBS=&quot;$(TARGET_LDFLAGS) -lpthread&quot; \</code></pre></div><p>~ JoW</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p100766">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						18 Jan 2010, 04:18					</div>
				</div>
				<div class="post-content content">
					<p>JoW,</p><p>I have applied the patch and it doesn&#039;t seem to affect the compilation that still spits out the same error messages as show below:<br /></p><div class="codebox"><pre><code> mipsel-openwrt-linux-uclibc-gcc -DHAVE_CONFIG_H -I. -I../include -I../include -I/opt/tmp/openwrt-svn-trunk-WGT634U/staging_dir/target-mipsel_uClibc-0.9.30.2/usr/include -I/opt/tmp/openwrt-svn-trunk-WGT634U/staging_dir/target-mipsel_uClibc-0.9.30.2/include -I/opt/tmp/openwrt-svn-trunk-WGT634U/staging_dir/toolchain-mipsel_gcc-4.4.2_uClibc-0.9.30.2/usr/include -I/opt/tmp/openwrt-svn-trunk-WGT634U/staging_dir/toolchain-mipsel_gcc-4.4.2_uClibc-0.9.30.2/include -Os -pipe -mips32 -mtune=mips32 -funit-at-a-time -fhonour-copts -msoft-float -Wall -I/usr/include -Os -pipe -mips32 -mtune=mips32 -funit-at-a-time -fhonour-copts -msoft-float -Wall -MT libiksemel_la-io-posix.lo -MD -MP -MF .deps/libiksemel_la-io-posix.Tpo -c io-posix.c  -fPIC -DPIC -o libiksemel_la-io-posix.o
cc1: note: someone does not honour COPTS correctly, passed 2 times
io-posix.c: In function &#039;io_recv&#039;:
io-posix.c:116: error: can&#039;t find a register in class &#039;COP3_REGS&#039; while reloading &#039;asm&#039;
io-posix.c:116: error: &#039;asm&#039; operand has impossible constraints
make[10]: *** [libiksemel_la-io-posix.lo] Error 1
make[10]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/libs/iksemel/src&#039;
Making all in tools
make[10]: Entering directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/libs/iksemel/tools&#039;
hash.c: In function &#039;hash_delete&#039;:
hash.c:141: warning: passing argument 1 of &#039;iks_stack_delete&#039; from incompatible pointer type
../include/iksemel.h:27: note: expected &#039;struct ikstack **&#039; but argument is of type &#039;struct ikstack *&#039;
make[10]: *** No rule to make target `../src/libiksemel.la&#039;, needed by `ikslint&#039;.  Stop.
make[10]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/libs/iksemel/tools&#039;
Making all in test
make[10]: Entering directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/libs/iksemel/test&#039;
tst-ikstack.c: In function &#039;test_stack&#039;:
tst-ikstack.c:43: warning: passing argument 1 of &#039;iks_stack_delete&#039; from incompatible pointer type
../include/iksemel.h:27: note: expected &#039;struct ikstack **&#039; but argument is of type &#039;struct ikstack *&#039;
make[10]: *** No rule to make target `../src/libiksemel.la&#039;, needed by `tst-ikstack&#039;.  Stop.
make[10]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/libs/iksemel/test&#039;
Making all in doc
make[9]: *** [all-recursive] Error 1
make[9]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/libs/iksemel&#039;
make[8]: *** [../../../../libs/iksemel/src/libiksemel.la] Error 2
make[8]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/src/mod/endpoints/mod_dingaling&#039;
make[7]: *** [all] Error 1
make[7]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/src/mod/endpoints/mod_dingaling&#039;
make[6]: *** [mod_dingaling-all] Error 1
make[6]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/src/mod&#039;
make[5]: *** [all-recursive] Error 1
make[5]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/src&#039;
Making all in build
make[5]: Entering directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/build&#039;
 +-------- FreeSWITCH Build Complete -----------+
 + FreeSWITCH has been successfully built.      +
 + Install by running:                          +
 +                                              +
 +               make install                   +
 +----------------------------------------------+
make[5]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/build&#039;
make[4]: *** [all-recursive] Error 1
make[4]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4&#039;
make[3]: *** [all] Error 2
make[3]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4&#039;
make[2]: *** [/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/.built] Error 2
make[2]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/feeds/packages/net/freeswitch&#039;
make[1]: *** [package/feeds/packages/freeswitch/compile] Error 2
make[1]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U&#039;
make: *** [package/feeds/packages/freeswitch/compile] Error 2</code></pre></div><p>In other words, no &quot;-fomit-frame-pointer&quot; flag to be found on the compilation line as shown above. <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p100770">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						18 Jan 2010, 06:27					</div>
				</div>
				<div class="post-content content">
					<p>I see. The patch above was done blindly, I did not actually test it. You need to find another way to inject this parameter, it helped me to overcome a similar asm related error in ffmpeg.</p><p>~ JoW</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p100805">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						18 Jan 2010, 14:53					</div>
				</div>
				<div class="post-content content">
					<p>JoW,</p><p>Can you show me your ffmpeg patch?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p100806">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						18 Jan 2010, 15:00					</div>
				</div>
				<div class="post-content content">
					<p>Sure, for ffmpeg I just used the --extra-cflags option of configure:</p><div class="codebox"><pre><code>Index: Makefile
===================================================================
--- Makefile    (revision 18823)
+++ Makefile    (working copy)
@@ -169,6 +169,7 @@
         CFLAGS=&quot;$(TARGET_CFLAGS) $(TARGET_CPPFLAGS) $(FPIC)&quot; \
         LDFLAGS=&quot;$(TARGET_LDFLAGS)&quot; \
         ./configure \
+        --extra-cflags=&quot;-I$(PKG_BUILD_DIR) -fomit-frame-pointer&quot; \
         --enable-cross-compile \
         --cross-prefix=&quot;$(TARGET_CROSS)&quot; \
         --arch=&quot;$(ARCH)&quot; \</code></pre></div>											<p class="post-edited">(Last edited by <strong>jow</strong> on 18 Jan 2010, 15:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p100814">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						18 Jan 2010, 16:54					</div>
				</div>
				<div class="post-content content">
					<p>JoW,</p><p>Thanks for your quick response. I managed to inject the <em>-fomit-frame-pointer</em> flag, but the compilation still spits out the same error messages as show below. It looks like the <em>-fomit-frame-pointer</em> flag has no effect at all.<br /></p><div class="codebox"><pre><code> mipsel-openwrt-linux-uclibc-gcc -DHAVE_CONFIG_H -I. -I../include -I../include -I/opt/tmp/openwrt-svn-trunk-WGT634U/staging_dir/target-mipsel_uClibc-0.9.30.2/usr/include -I/opt/tmp/openwrt-svn-trunk-WGT634U/staging_dir/target-mipsel_uClibc-0.9.30.2/include -I/opt/tmp/openwrt-svn-trunk-WGT634U/staging_dir/toolchain-mipsel_gcc-4.4.2_uClibc-0.9.30.2/usr/include -I/opt/tmp/openwrt-svn-trunk-WGT634U/staging_dir/toolchain-mipsel_gcc-4.4.2_uClibc-0.9.30.2/include -Os -pipe -mips32 -mtune=mips32 -funit-at-a-time -fomit-frame-pointer -fhonour-copts -msoft-float -Wall -I/usr/include -Os -pipe -mips32 -mtune=mips32 -funit-at-a-time -fomit-frame-pointer -fhonour-copts -msoft-float -Wall -MT libiksemel_la-io-posix.lo -MD -MP -MF .deps/libiksemel_la-io-posix.Tpo -c io-posix.c  -fPIC -DPIC -o libiksemel_la-io-posix.o
cc1: note: someone does not honour COPTS correctly, passed 2 times
io-posix.c: In function &#039;io_recv&#039;:
io-posix.c:116: error: can&#039;t find a register in class &#039;COP3_REGS&#039; while reloading &#039;asm&#039;
io-posix.c:116: error: &#039;asm&#039; operand has impossible constraints
make[10]: *** [libiksemel_la-io-posix.lo] Error 1
make[10]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/libs/iksemel/src&#039;
Making all in tools
make[10]: Entering directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/libs/iksemel/tools&#039;
hash.c: In function &#039;hash_delete&#039;:
hash.c:141: warning: passing argument 1 of &#039;iks_stack_delete&#039; from incompatible pointer type
../include/iksemel.h:27: note: expected &#039;struct ikstack **&#039; but argument is of type &#039;struct ikstack *&#039;
make[10]: *** No rule to make target `../src/libiksemel.la&#039;, needed by `ikslint&#039;.  Stop.
make[10]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/libs/iksemel/tools&#039;
Making all in test
make[10]: Entering directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/libs/iksemel/test&#039;
tst-ikstack.c: In function &#039;test_stack&#039;:
tst-ikstack.c:43: warning: passing argument 1 of &#039;iks_stack_delete&#039; from incompatible pointer type
../include/iksemel.h:27: note: expected &#039;struct ikstack **&#039; but argument is of type &#039;struct ikstack *&#039;
make[10]: *** No rule to make target `../src/libiksemel.la&#039;, needed by `tst-ikstack&#039;.  Stop.
make[10]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/libs/iksemel/test&#039;
Making all in doc
make[9]: *** [all-recursive] Error 1
make[9]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/libs/iksemel&#039;
make[8]: *** [../../../../libs/iksemel/src/libiksemel.la] Error 2
make[8]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/src/mod/endpoints/mod_dingaling&#039;
make[7]: *** [all] Error 1
make[7]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/src/mod/endpoints/mod_dingaling&#039;
make[6]: *** [mod_dingaling-all] Error 1
make[6]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/src/mod&#039;
make[5]: *** [all-recursive] Error 1
make[5]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/src&#039;
Making all in build
make[5]: Entering directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/build&#039;
 +-------- FreeSWITCH Build Complete -----------+
 + FreeSWITCH has been successfully built.      +
 + Install by running:                          +
 +                                              +
 +               make install                   +
 +----------------------------------------------+
make[5]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/build&#039;
make[4]: *** [all-recursive] Error 1
make[4]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4&#039;
make[3]: *** [all] Error 2
make[3]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4&#039;
make[2]: *** [/opt/tmp/openwrt-svn-trunk-WGT634U/build_dir/target-mipsel_uClibc-0.9.30.2/freeswitch-1.0.4/.built] Error 2
make[2]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U/feeds/packages/net/freeswitch&#039;
make[1]: *** [package/feeds/packages/freeswitch/compile] Error 2
make[1]: Leaving directory `/opt/tmp/openwrt-svn-trunk-WGT634U&#039;
make: *** [package/feeds/packages/freeswitch/compile] Error 2</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p100919">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						19 Jan 2010, 23:43					</div>
				</div>
				<div class="post-content content">
					<p>Finally, I managed to successfully compile FreeSwitch. All I did was to uncheck the mod-dingaling that uses iksemel library. No mod-dingaling, no compilation on libiksemel. No libiksemel, compilation successful.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>