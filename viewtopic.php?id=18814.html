<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Redirecting HTTPS request to a Transparent proxy on a bridge</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p81292">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">AlfaGulf</div>
					<div class="post-datetime">
						7 Feb 2009, 12:50					</div>
				</div>
				<div class="post-content content">
					<p>I asked this before, but got no answer!</p><p>Will squid3 be available for openwrt soon?<br />I need its new feature to redirect SSL (HTTPS) requests to it in a transparent proxy (In a bridge), they say it works!</p><p>If squid3 is not available for openwrt, does any one know of a proxy server that works as transparent proxy on a bridge and will accept HTTPS request being redirected to it using iptables rules like:<br />iptables -t nat -A PREROUTING -i br-lan -p tcp --dport 443 -j REDIRECT --to-port 3128</p><br /><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81412">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">_bbb_</div>
					<div class="post-datetime">
						8 Feb 2009, 19:52					</div>
				</div>
				<div class="post-content content">
					<p>Let us hope it doesn&#039;t work because that is what is called a man-in-the-middle attack. Most people don&#039;t want that to &quot;work&quot;. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81431">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">AlfaGulf</div>
					<div class="post-datetime">
						8 Feb 2009, 23:38					</div>
				</div>
				<div class="post-content content">
					<p>I know, but like any other feature, could be used or abused!!</p><p>I was tempted after I saw several references to this concept using squid3, like this: <a href="http://felipeferreira.net/?p=136">http://felipeferreira.net/?p=136</a></p><p>On the other hand, I have&nbsp; configured my router to allow only traffic from my proxy server to go out to the internet.&nbsp; This way all users in my network have to explicitly configured their browsers to use my proxy server. yet all users can do https as well as authenticate with secure web sites like online banking!<br />Even though this is not an intercepting proxy, Isn&#039;t there a man-in-the-middle in this case?<br />If so, how come the objection is only related with intercepting proxy setup?!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81477">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">_bbb_</div>
					<div class="post-datetime">
						9 Feb 2009, 17:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>AlfaGulf wrote:</cite><blockquote><p>I know, but like any other feature, could be used or abused!!</p><p>I was tempted after I saw several references to this concept using squid3, like this: <a href="http://felipeferreira.net/?p=136">http://felipeferreira.net/?p=136</a></p><p>On the other hand, I have&nbsp; configured my router to allow only traffic from my proxy server to go out to the internet.&nbsp; This way all users in my network have to explicitly configured their browsers to use my proxy server. yet all users can do https as well as authenticate with secure web sites like online banking!<br />Even though this is not an intercepting proxy, Isn&#039;t there a man-in-the-middle in this case?<br />If so, how come the objection is only related with intercepting proxy setup?!</p></blockquote></div><p>The key difference is that with a normal https proxy the browser knows it is talking to a proxy. The proxy does not see the cleartext data stream, it only forwards encrypted traffic.</p><p>I assumed that a transparent proxy setup would be different: that the proxy would then pretend to be the requested server and try to get to the cleartext datastream. Otherwise the proxy cannot do much...</p><p>If the &quot;transparent proxy&quot; just tunnels the request (acting as a form of NAT device) and never sees the cleartext then it will &quot;work&quot;. But how is this useful? If you need this functionality why not just add a rule to iptables that port 443 should be forwarded with NAT (and perhaps logging)?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81506">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">AlfaGulf</div>
					<div class="post-datetime">
						9 Feb 2009, 22:06					</div>
				</div>
				<div class="post-content content">
					<p>You are right. How is it useful?</p><p>I might as well bridge the 443 traffic.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>