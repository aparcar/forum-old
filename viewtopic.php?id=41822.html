<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> DLINK DIR-300 : memory problems</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 18 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p189726">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">XaT</div>
					<div class="post-datetime">
						23 Jan 2013, 04:01					</div>
				</div>
				<div class="post-content content">
					<p>Hi&#039;</p><p>I&#039;ve a DLINK DIR-300 (rev A1) i want OpenWRT on it.</p><p>I installed it with howto page on the wiki.</p><p>Well after installation : no webui, nothing, seems to be normal wiki said.</p><p>Try to update : opkg update don&#039;t work with DNS </p><p>1st step : set the ip of downloads.openwrt.org on /etc/hosts<br />... OK</p><p>2nd step : update ! It work ! Said the cli ! But not !<br />3rd step : try &amp; retry to get correctly opkg updated (same command 3 ou 4 times...)<br />4rd step : opkg has been updated. Get the correct package.. But didn&#039;t work !</p><p>====<br />Installing luci (trunk+svn9640-1) to root...<br />Downloading <a href="http://downloads.openwrt.org/snapshots/trunk/atheros/packages/luci_trunk+svn9640-1_atheros.ipk.">http://downloads.openwrt.org/snapshots/ … heros.ipk.</a><br />Collected errors:<br />* gz_open: fork: Cannot allocate memory.<br />* opkg_install_pkg: Failed to unpack control files from /tmp/opkg-sQqgVi/luci_trunk+svn9640-1_atheros.ipk.<br />* opkg_install_cmd: Cannot install package luci.<br />====</p><br /><p>Wel... What i&#039;ve to do ?</p><p>Thanks &amp; sorry the topic on wrong cat...</p><p>XaT</p>											<p class="post-edited">(Last edited by <strong>XaT</strong> on 25 Jan 2013, 01:57)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p189727">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">XaT</div>
					<div class="post-datetime">
						23 Jan 2013, 04:04					</div>
				</div>
				<div class="post-content content">
					<p>root@OpenWrt:~# free<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;total&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;used&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;free&nbsp; &nbsp; &nbsp; &nbsp;shared&nbsp; &nbsp; &nbsp; buffers<br />Mem:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;12952&nbsp; &nbsp; &nbsp; &nbsp; 11816&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1136&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1024<br />-/+ buffers:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 10792&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2160<br />Swap:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0<br />root@OpenWrt:~# opkg install luci<br />Unknown package &#039;luci&#039;.<br />Collected errors:<br /> * opkg_install_cmd: Cannot install package luci.<br />root@OpenWrt:~# opkg update<br />Downloading <a href="http://downloads.openwrt.org/snapshots/trunk/atheros/packages/Packages.gz.">http://downloads.openwrt.org/snapshots/ … ckages.gz.</a><br />Updated list of available packages in /var/opkg-lists/barrier_breaker.<br />root@OpenWrt:~# opkg install luci<br />Installing luci (trunk+svn9640-1) to root...<br />Downloading <a href="http://downloads.openwrt.org/snapshots/trunk/atheros/packages/luci_trunk+svn9640-1_atheros.ipk.">http://downloads.openwrt.org/snapshots/ … heros.ipk.</a><br />Collected errors:<br /> * gz_open: fork: Cannot allocate memory.<br /> * opkg_install_pkg: Failed to unpack control files from /tmp/opkg-Urevhi/luci_trunk+svn9640-1_atheros.ipk.<br /> * opkg_install_cmd: Cannot install package luci.<br />root@OpenWrt:~# opkg install luci<br />Installing luci (trunk+svn9640-1) to root...<br />Downloading <a href="http://downloads.openwrt.org/snapshots/trunk/atheros/packages/luci_trunk+svn9640-1_atheros.ipk.">http://downloads.openwrt.org/snapshots/ … heros.ipk.</a><br />Collected errors:<br /> * gz_open: fork: Cannot allocate memory.<br /> * opkg_install_pkg: Failed to unpack control files from /tmp/opkg-bfNjgB/luci_trunk+svn9640-1_atheros.ipk.<br /> * opkg_install_cmd: Cannot install package luci.<br />root@OpenWrt:~#</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p189728">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">XaT</div>
					<div class="post-datetime">
						23 Jan 2013, 04:26					</div>
				</div>
				<div class="post-content content">
					<p>Don&#039;t know if it&#039;s normal : 100% place used on /rom/</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p189730">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">XaT</div>
					<div class="post-datetime">
						23 Jan 2013, 04:57					</div>
				</div>
				<div class="post-content content">
					<p>Idea : can i mount a fs@lan (nfs/samba) &amp; mount a swap ? </p><p>XaT</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p189771">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">XaT</div>
					<div class="post-datetime">
						23 Jan 2013, 15:11					</div>
				</div>
				<div class="post-content content">
					<p>up</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p189920">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">XaT</div>
					<div class="post-datetime">
						25 Jan 2013, 01:57					</div>
				</div>
				<div class="post-content content">
					<p>What can i do ?</p><p>Not enought memory ? I&#039;ve to delete some files or .. ? RAM is overloaded ? </p><p>XaT</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191848">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">mediabox</div>
					<div class="post-datetime">
						13 Feb 2013, 08:35					</div>
				</div>
				<div class="post-content content">
					<p>There isn&#039;t much love on this forum. Did you find a fix for this?</p><p>I have the exact same problem. I have a little more free memory than you but still can&#039;t get Luci installed:</p><p>root@OpenWrt:/tmp/x# free<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;total&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;used&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;free&nbsp; &nbsp; &nbsp; &nbsp;shared&nbsp; &nbsp; &nbsp; buffers<br />Mem:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;13748&nbsp; &nbsp; &nbsp; &nbsp; 10408&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;3340&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 228<br />-/+ buffers:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 10180&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;3568<br />Swap:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0</p><br /><p>root@OpenWrt:/proc# opkg update<br />Downloading <a href="http://downloads.openwrt.org/attitude_adjustment/12.09-rc1/ramips/rt305x/packages/Packages.gz.">http://downloads.openwrt.org/attitude_a … ckages.gz.</a><br />Updated list of available packages in /var/opkg-lists/attitude_adjustment.<br />root@OpenWrt:/proc# opkg install luci<br />Installing luci (0.11+svn9425-1) to root...<br />Downloading <a href="http://downloads.openwrt.org/attitude_adjustment/12.09-rc1/ramips/rt305x/packages/luci_0.11+svn9425-1_ramips.ipk.">http://downloads.openwrt.org/attitude_a … amips.ipk.</a><br />Installing uhttpd (2012-10-30-e57bf6d8bfa465a50eea2c30269acdfe751a46fd) to root...<br />Downloading <a href="http://downloads.openwrt.org/attitude_adjustment/12.09-rc1/ramips/rt305x/packages/uhttpd_2012-10-30-e57bf6d8bfa465a50eea2c30269acdfe751a46fd_ramips.ipk.">http://downloads.openwrt.org/attitude_a … amips.ipk.</a><br />Collected errors:<br /> * gz_open: fork: Cannot allocate memory.<br /> * opkg_install_pkg: Failed to extract data files for uhttpd. Package debris may remain!<br /> * opkg_install_cmd: Cannot install package luci.<br />root@OpenWrt:/proc# free<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;total&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;used&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;free&nbsp; &nbsp; &nbsp; &nbsp;shared&nbsp; &nbsp; &nbsp; buffers<br />Mem:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;13748&nbsp; &nbsp; &nbsp; &nbsp; 10520&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;3228&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 160<br />-/+ buffers:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 10360&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;3388<br />Swap:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0<br />root@OpenWrt:/proc# </p><br /><p>One thing that I did find was to try killing any memory hungry running apps. I used top and did &quot;killall &lt;process_name&gt;&quot;</p><p>Killed stuff like:<br />hostapd<br />netifd<br />syslogd<br />udhcpd<br />ntpd<br />wathcdog<br />telnetd<br />klogd<br />dropbear</p><p>Didn&#039;t help. Let me know if you find anything.... For me, it looks like it&#039;s trying to install uhttpd. I&#039;ll try to build that into my image and see where I go from there. </p><p>Good luck.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191850">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">mediabox</div>
					<div class="post-datetime">
						13 Feb 2013, 09:17					</div>
				</div>
				<div class="post-content content">
					<p>Another idea is to exit into failsafe mode early in the boot process. I had about 7k free but wasn&#039;t able to do much because the system wasn&#039;t online enough. I got my network connectivity ok, but the filessystems weren&#039;t mounted correctly so nothing happened when I ran &quot;opkg....&quot; I&#039;ll play tomorrow....</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192000">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">mediabox</div>
					<div class="post-datetime">
						14 Feb 2013, 19:07					</div>
				</div>
				<div class="post-content content">
					<p>In case it helps anyone this is what I did (I&#039;m running attitude adjustment):</p><p>from: <a href="http://luci.subsignal.org/trac/wiki/Installation">http://luci.subsignal.org/trac/wiki/Installation</a><br /><em><br />Installation<br />OpenWrt Feed</em></p><p><em>1)Change to your OpenWRT buildroot<br />2)Run ./scripts/feeds update<br />3)Run ./scripts/feeds install -a -p luci<br />4)Type make menuconfig<br />You will find all components in the &quot;LuCI&quot; menu<br /></em></p><p>The new image will have it installed. Awesome. Only thing I am dealing with now is random crashes. I think it&#039;s from lack of memory.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225474">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">joeyangx</div>
					<div class="post-datetime">
						16 Feb 2014, 15:58					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I hit the same problem as the above ,any advice ?</p><p>thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225481">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">joeyangx</div>
					<div class="post-datetime">
						16 Feb 2014, 18:06					</div>
				</div>
				<div class="post-content content">
					<p>finally, I flashed it back to dd-wrt to workaround this ,fyi...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230712">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">kirtide13</div>
					<div class="post-datetime">
						19 Apr 2014, 08:18					</div>
				</div>
				<div class="post-content content">
					<p>I have the exact same problem with my DIR-300 (rev A1). Has anyone found a solution?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p231459">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">3zl</div>
					<div class="post-datetime">
						27 Apr 2014, 19:17					</div>
				</div>
				<div class="post-content content">
					<p>---&gt;&gt;&gt;&nbsp; here some &#039;LOVE&#039;&nbsp; &nbsp;meaning doing your work/search YOU could have done yourself learning basics</p><p>Due to the 4MB/16MB of&nbsp; DIR-300A models it comes to this :</p><p>AA&nbsp; images come with LUCI installed&nbsp; : no room for opkg installation of packages</p><p>BB images have too much default installed&nbsp; : little/no room to run opkg&nbsp; ( crash because of RAM buffer&nbsp; )</p><br /><p>Solution : build your own image and leave out what you dont need and include what you need: minimal build ( --IPV6 a.s.o )</p><p>No much use of building mini image &amp; opkg install afterwards</p><p>Besides : once propper set the old DIR300A1 runs fine&nbsp; ( 40+ running in BB/batman-adv mesh playground )<br />Better : buy 8/32 router like MR3020</p><p>regards<br />3zl</p>											<p class="post-edited">(Last edited by <strong>3zl</strong> on 27 Apr 2014, 22:25)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>