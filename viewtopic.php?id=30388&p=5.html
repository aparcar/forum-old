<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WPN824N opensource</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 6 Feb 2018 and 27 Apr 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 5 of 6</div><nav><ul><li><a href="viewtopic.php%3Fid=30388&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=30388&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=30388&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li><li><a href="viewtopic.php%3Fid=30388&amp;p=6.html">6</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p309151">
				<div class="post-metadata">
					<div class="post-num">Post #101</div>
					<div class="post-author">marked</div>
					<div class="post-datetime">
						27 Jan 2016, 06:44					</div>
				</div>
				<div class="post-content content">
					<p>hotplug triggering still does not work for me, with your last build.</p><p>We need a better way to debug.&nbsp; </p><p>Is the GPIO button test script suppose to give a &quot;Resource busy&quot; error if the button is defined?&nbsp; The test script is still working for me to see the status/values of the 3 buttons.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p309414">
				<div class="post-metadata">
					<div class="post-num">Post #102</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						29 Jan 2016, 00:48					</div>
				</div>
				<div class="post-content content">
					<p>I would expect those GPIOs to output a &quot;resource busy error&quot; when trying to export them. I&#039;ve put some debug messages into essential code locations, dmesg will show them (please post here). The GPIO and button code has been updated to the latest patchset. Let&#039;s see how it goes.<br /><a href="http://www.file-upload.net/download-11257130/openwrt-ar71xx-generic-wpn824n-squashfs-sysupgrade.bin.html">openwrt-ar71xx-generic-wpn824n-squashfs-sysupgrade.bin</a>&nbsp; b2486072cbec33e81531d6c1ec9ba7b130537bd2eb9bee5174e1119ac99dfab7</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p309504">
				<div class="post-metadata">
					<div class="post-num">Post #103</div>
					<div class="post-author">marked</div>
					<div class="post-datetime">
						29 Jan 2016, 20:01					</div>
				</div>
				<div class="post-content content">
					<p>Ok, that fixed something.</p><p>WLS button on back makes the Blue LED on front turn on and off.<br />RST button makes the box reboot.</p><p>I didn&#039;t notice any changes when using the WPS button but I assume it&#039;s just not obvious.</p><p>This is the only thing relevant I found in the dmesg.<br /></p><div class="codebox"><pre><code>[   13.220282] ath: phy0: Ignoring endianness difference in EEPROM magic bytes.
[   13.227479] ath: phy0: Enable LNA combining
[   13.231687] ath: phy0: eeprom contains invalid mac address: ff:ff:ff:ff:ff:ff
[   13.238907] ath: phy0: random mac address will be used: d2:5f:cd:c7:d6:c8
[   13.247236] ath: EEPROM regdomain: 0x0
[   13.247255] ath: EEPROM indicates default country code should be used
[   13.247270] ath: doing EEPROM country-&gt;regdmn map search
[   13.247301] ath: country maps to regdmn code: 0x3a
[   13.247318] ath: Country alpha2 being used: US
[   13.247333] ath: Regpair used: 0x3a
[   13.261506] ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;
[   13.267966] AR928x: initiating buttons
[   13.271780] AR928x: processing button named wps, code=529, number=6
[   13.278141] AR928x: processing button named reset, code=408, number=7
[   13.284626] AR928x: processing button named rfkill, code=247, number=8
[   13.291513] gpio_keys_polled_probe: starting
[   13.295850] gpio_keys_button_probe: starting
[   13.300140] gpio_keys_button_probe: Allocating memory for 3 buttons
[   13.306463] gpio_keys_button_probe: requesting GPIO 58 for button
[   13.312595] gpio_keys_button_probe: setting direction to input for GPIO 58
[   13.319515] gpio_keys_button_probe: requesting GPIO 59 for button
[   13.325654] gpio_keys_button_probe: setting direction to input for GPIO 59
[   13.332564] gpio_keys_button_probe: requesting GPIO 60 for button
[   13.338704] gpio_keys_button_probe: setting direction to input for GPIO 60
[   13.345653] AR928x: buttons initiated</code></pre></div><p>Edit: Also your post #83 test script works now generating:<br /></p><div class="codebox"><pre><code>Fri Jan 29 18:05:17 2016 user.notice root: button was rfkill and action was pressed
Fri Jan 29 18:05:17 2016 user.notice root: button was rfkill and action was released
Fri Jan 29 18:05:34 2016 user.notice root: button was reset and action was pressed
Fri Jan 29 18:05:35 2016 user.notice root: button was reset and action was released
Fri Jan 29 18:05:44 2016 user.notice root: button was wps and action was pressed
Fri Jan 29 18:05:44 2016 user.notice root: button was wps and action was released</code></pre></div><p>I think I had to disable the other scripts first.</p><br /><p>Other test script shows the expected &quot;Resource busy now&quot;<br /></p><div class="codebox"><pre><code># ./button.sh 
sh: write error: Resource busy
sh: write error: Resource busy
[GPIO54] value 1
[GPIO55] value 1
[GPIO56] value 1
sh: write error: Resource busy
sh: write error: Resource busy
sh: write error: Resource busy
sh: write error: Resource busy
sh: write error: Resource busy
sh: write error: Resource busy
[GPIO63] value 1</code></pre></div>											<p class="post-edited">(Last edited by <strong>marked</strong> on 29 Jan 2016, 20:09)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p309514">
				<div class="post-metadata">
					<div class="post-num">Post #104</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						29 Jan 2016, 20:44					</div>
				</div>
				<div class="post-content content">
					<p>Nice, so we can finally close this topic. I will send out that last patch, as soon as the GPIO and button patches for the AR928x have been accepted.<br />Is anybody interested to have support for this router in Chaos Calmer? There was a maintenance release 15.05.1 to be released one or two weeks ago, but there seems to be some delay. I don&#039;t know if we can still make it in time - maybe if I ask very politely ;-) But I need to have positive test results on the images I put in post #94.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p309529">
				<div class="post-metadata">
					<div class="post-num">Post #105</div>
					<div class="post-author">marked</div>
					<div class="post-datetime">
						29 Jan 2016, 22:59					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ll run version 94.</p><p>Remind me, is the TTL serial port still enabled?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p309539">
				<div class="post-metadata">
					<div class="post-num">Post #106</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						30 Jan 2016, 00:53					</div>
				</div>
				<div class="post-content content">
					<p>I am not aware of the serial port being disabled. Even when I disabled some functions to get access to the LED GPIOs, I just disabled some RTS/CTS functionality, which isn&#039;t used normally, when using the Tx/Rx/GND header.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p310616">
				<div class="post-metadata">
					<div class="post-num">Post #107</div>
					<div class="post-author">dgenin</div>
					<div class="post-datetime">
						7 Feb 2016, 17:56					</div>
				</div>
				<div class="post-content content">
					<p>I encountered some odd behavior with version 94.</p><p>1. Access to port 80 is blocked so Luci is not available<br />2. SSH root account is not accessible, i.e., can&#039;t login without password<br />3. Telnet access is enabled (this may or may not have been the case previously but seems like a security hole)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p310618">
				<div class="post-metadata">
					<div class="post-num">Post #108</div>
					<div class="post-author">marked</div>
					<div class="post-datetime">
						7 Feb 2016, 18:13					</div>
				</div>
				<div class="post-content content">
					<p>I confirm #1, #2, and #3 for version 94.</p><p>#2 I&#039;ve seen in recent build numbers too.&nbsp; I&#039;m not sure what dropbear is doing, but I know there&#039;s no root password set, but it keeps asking for a password when trying to use ssh.&nbsp; I didn&#039;t try #1 and #3 on other builds.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p310641">
				<div class="post-metadata">
					<div class="post-num">Post #109</div>
					<div class="post-author">dgenin</div>
					<div class="post-datetime">
						7 Feb 2016, 21:32					</div>
				</div>
				<div class="post-content content">
					<p>After telneting in and setting the root password I was able to login over SSH.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p310643">
				<div class="post-metadata">
					<div class="post-num">Post #110</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						7 Feb 2016, 21:46					</div>
				</div>
				<div class="post-content content">
					<p>These issues are probably to be expected. I just did a minimal build, Luci would need to be explicitly selected.<br />Also, until sometime during the past year, it was normal to access the router via telnet, until a root password was set. Then OpenWrt would disable telnet and enable ssh.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p310644">
				<div class="post-metadata">
					<div class="post-num">Post #111</div>
					<div class="post-author">marked</div>
					<div class="post-datetime">
						7 Feb 2016, 21:54					</div>
				</div>
				<div class="post-content content">
					<p>Sure not show stoppers.&nbsp; But I do recall some of these builds used ssh without password for first login.&nbsp; This is why it was confusing and seems like a bug.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p310653">
				<div class="post-metadata">
					<div class="post-num">Post #112</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						7 Feb 2016, 22:33					</div>
				</div>
				<div class="post-content content">
					<p>OK, other than that, everything else works as expected? LEDs light up on their events (like network connection/activity); WAN receives its address via DHCP; LAN and WLAN bridge traffic to each other, are accessible on 192.168.1.1 and provide DHCP addresses; no issues in the bootlog? I would expect it to be fine, just want to double check.<br />Buttons don&#039;t work, yet - still waiting for that patch to get into trunk.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p310684">
				<div class="post-metadata">
					<div class="post-num">Post #113</div>
					<div class="post-author">dgenin</div>
					<div class="post-datetime">
						8 Feb 2016, 02:44					</div>
				</div>
				<div class="post-content content">
					<p>It&#039;s hard to test some of the features without being able to configure the router. For example, my router had wifi turned off when I flashed the new image and I am not entirely certain how to turn it on without Luci. So I can&#039;t tell if the wifi light is working correctly.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p310715">
				<div class="post-metadata">
					<div class="post-num">Post #114</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						8 Feb 2016, 12:22					</div>
				</div>
				<div class="post-content content">
					<p>No problem, the first section of the <a href="https://wiki.openwrt.org/doc/uci/wireless">wireless wiki page</a> gets you started.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p310980">
				<div class="post-metadata">
					<div class="post-num">Post #115</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						11 Feb 2016, 01:27					</div>
				</div>
				<div class="post-content content">
					<p>By the way: you can also install additional packages (except kmod-packages) from the official OpenWrt build server via opkg. So, Luci should be possible.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p312242">
				<div class="post-metadata">
					<div class="post-num">Post #116</div>
					<div class="post-author">dgenin</div>
					<div class="post-datetime">
						21 Feb 2016, 00:59					</div>
				</div>
				<div class="post-content content">
					<p>Tried installing luci but got</p><div class="codebox"><pre><code>root@OpenWrt:~# opkg install luci
Installing luci (git-15.248.30277-3836b45-1) to root...
Downloading http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/luci/luci_git-15.248.30277-3836b45-1_all.ipk.
Installing uhttpd (2015-08-17-f91788b809d9726126e9cf4384fedbbb0c5b8a73) to root...
Downloading http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/base/uhttpd_2015-08-17-f91788b809d9726126e9cf4384fedbbb0c5b8a73_ar71xx.ipk.
Installing uhttpd-mod-ubus (2015-08-17-f91788b809d9726126e9cf4384fedbbb0c5b8a73) to root...
Downloading http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/base/uhttpd-mod-ubus_2015-08-17-f91788b809d9726126e9cf4384fedbbb0c5b8a73_ar71xx.ipk.
Installing luci-mod-admin-full (git-15.248.30277-3836b45-1) to root...
Downloading http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/luci/luci-mod-admin-full_git-15.248.30277-3836b45-1_ar71xx.ipk.
Installing luci-base (git-15.248.30277-3836b45-1) to root...
Downloading http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/luci/luci-base_git-15.248.30277-3836b45-1_ar71xx.ipk.
Installing lua (5.1.5-1) to root...
Downloading http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/base/lua_5.1.5-1_ar71xx.ipk.
Configuring luci-base.
Configuring luci-mod-admin-full.
Configuring uhttpd.
ln: /etc/rc.d/S50uhttpd: No space left on device
Configuring uhttpd-mod-ubus.
Collected errors:
 * wfopen: //usr/lib/opkg/info/lua.control: No space left on device.
 * wfopen: //usr/lib/opkg/info/lua.postinst: No space left on device.
 * wfopen: //usr/lib/opkg/info/lua.prerm: No space left on device.
 * wfopen: /usr/bin/lua: No space left on device.
 * set_flags_from_control: Failed to open //usr/lib/opkg/info/lua.control: No such file or directory.
 * pkg_write_filelist: Failed to open //usr/lib/opkg/info/lua.list: No space left on device.
 * opkg_install_pkg: Failed to extract data files for lua. Package debris may remain!
 * opkg_install_cmd: Cannot install package luci.
 * opkg_conf_write_status_files: Can&#039;t open status file //usr/lib/opkg/status: No space left on device.</code></pre></div><p>I tried removing luci and got</p><div class="codebox"><pre><code>root@OpenWrt:~# opkg remove luci
No packages removed.</code></pre></div><p>Is the package manager borked now?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p312252">
				<div class="post-metadata">
					<div class="post-num">Post #117</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						21 Feb 2016, 03:16					</div>
				</div>
				<div class="post-content content">
					<p>Kind of. Maybe this helps: <a href="https://wiki.openwrt.org/doc/techref/opkg#out_of_space">https://wiki.openwrt.org/doc/techref/opkg#out_of_space</a><br />I plan on disabling the automatic inclusion of USB modules together with the patch for button support. That should free up a few more kB.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313804">
				<div class="post-metadata">
					<div class="post-num">Post #118</div>
					<div class="post-author">swillis11</div>
					<div class="post-datetime">
						6 Mar 2016, 18:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>MBS wrote:</cite><blockquote><p>Is anybody interested to have support for this router in Chaos Calmer? There was a maintenance release 15.05.1 to be released one or two weeks ago, but there seems to be some delay. I don&#039;t know if we can still make it in time - maybe if I ask very politely ;-) But I need to have positive test results on the images I put in post #94.</p></blockquote></div><p>I would be very interested in this. Has there been enough testing for this to happen?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313815">
				<div class="post-metadata">
					<div class="post-num">Post #119</div>
					<div class="post-author">marked</div>
					<div class="post-datetime">
						6 Mar 2016, 20:22					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve found no problems with #94, been running it for a month now.&nbsp; More stable than the rest of my network.</p>											<p class="post-edited">(Last edited by <strong>marked</strong> on 6 Mar 2016, 20:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316708">
				<div class="post-metadata">
					<div class="post-num">Post #120</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						26 Mar 2016, 00:36					</div>
				</div>
				<div class="post-content content">
					<p>What is the difference between these two images? What is the meaning of &quot;NA&quot;? When do I use which image?</p><p><a href="https://downloads.openwrt.org/snapshots/trunk/ar71xx/generic/openwrt-ar71xx-generic-wpn824n-squashfs-factory.img">https://downloads.openwrt.org/snapshots … actory.img</a><br /><a href="https://downloads.openwrt.org/snapshots/trunk/ar71xx/generic/openwrt-ar71xx-generic-wpn824n-squashfs-factory-NA.img">https://downloads.openwrt.org/snapshots … ory-NA.img</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316712">
				<div class="post-metadata">
					<div class="post-num">Post #121</div>
					<div class="post-author">marked</div>
					<div class="post-datetime">
						26 Mar 2016, 01:04					</div>
				</div>
				<div class="post-content content">
					<p>Netgear sold the router with two different firmware.&nbsp; &nbsp;<br />NA means North America, blank is outside North America.</p><p>I only tested the NA version.&nbsp; If dgenin tested the NA too, then technically nobody tested the outside NA version.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316766">
				<div class="post-metadata">
					<div class="post-num">Post #122</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						26 Mar 2016, 09:08					</div>
				</div>
				<div class="post-content content">
					<p>The difference between those two versions is just inside the header block, which is only checked by the stock firmware to make sure it is for the right device. Other than that, they are the same.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316797">
				<div class="post-metadata">
					<div class="post-num">Post #123</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						26 Mar 2016, 13:27					</div>
				</div>
				<div class="post-content content">
					<p>Is there any reason for the factory named *.img and the sysupgrade named *.bin?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316881">
				<div class="post-metadata">
					<div class="post-num">Post #124</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						26 Mar 2016, 22:25					</div>
				</div>
				<div class="post-content content">
					<p>Simple answer: it&#039;s a Netgear thing. It&#039;s been a while since I dug into this (and now too lazy to get that deep into the topic again), so I would guess that the original firmware would check for the file extension. Basically, I just used existing functions for Netgear routers, and it automagically creates the different firmware files. The .bin files are just openwrt-specific.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p317662">
				<div class="post-metadata">
					<div class="post-num">Post #125</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						1 Apr 2016, 11:35					</div>
				</div>
				<div class="post-content content">
					<p>Good news, everyone: full button support is now in trunk, so in a few days you should be able to download such firmware images.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 5 of 6</div><nav><ul><li><a href="viewtopic.php%3Fid=30388&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=30388&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=30388&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li><li><a href="viewtopic.php%3Fid=30388&amp;p=6.html">6</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>