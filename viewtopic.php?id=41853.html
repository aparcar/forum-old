<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TP-Link TL-WR1043ND performance</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 6 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p189876">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">John Peterson</div>
					<div class="post-datetime">
						24 Jan 2013, 15:45					</div>
				</div>
				<div class="post-content content">
					<p><strong>LAN</strong></p><p>The duplex rate is</p><div class="codebox"><pre><code>[ ID] Interval       Transfer     Bandwidth
[  5]  0.0-10.0 sec   113 MBytes  11.3 MBytes/sec
[  4]  0.0-10.0 sec  46.8 MBytes  4.66 MBytes/sec</code></pre></div><p>the simplex rate is</p><div class="codebox"><pre><code>[ ID] Interval       Transfer     Bandwidth
[  5]  0.0-10.0 sec   197 MBytes  19.7 MBytes/sec
[  4]  0.0-10.0 sec   148 MBytes  14.8 MBytes/sec</code></pre></div><p>compared to the gigabit interface max 100/100 MB rate.</p><p><strong>WAN</strong></p><p>The speedtest.net simplex rate is</p><div class="codebox"><pre><code> speed.php …
↓ 16.29 MiB/s  ↑ 1.18 MiB/s    ↔ 2 ms   3 km   …</code></pre></div><p>compared to an expected ~10/1 MB rate (because the WAN account is a flexible 100/10 Mb/s).</p><p><strong>Load</strong></p><p>the `iperf` bottleneck seems to be the CPU because the CPU load is maximized</p><p>duplex</p><div class="codebox"><pre><code>  PID  PPID USER     STAT   VSZ %VSZ %CPU COMMAND
26885 16788 root     S     9792  33%  92% iperf -c ubuntu -fM -d</code></pre></div><p>simplex</p><div class="codebox"><pre><code>  PID  PPID USER     STAT   VSZ %VSZ %CPU COMMAND
26866 16788 root     S     5544  19%  91% iperf -c ubuntu -fM</code></pre></div><p><strong>Tests</strong></p><p>The complete log contain these tests</p><p>iperf -c 192.168.0.1 -fM -d<br />iperf -c 192.168.0.1 -fM -r<br />iperf -c 192.168.0.1 -fM<br />iperf -c ubuntu -fM -d<br />iperf -c ubuntu -fM -r<br />iperf -c ubuntu -fM<br />iperf -c ubuntu -fM -d &amp; sleep 5; top -bn1<br />iperf -c ubuntu -fM &amp; sleep 5; top -bn1<br />netperf -fM<br />netperf -fM -t TCP_MAERTS<br />netperf -fM -H ubuntu<br />netperf -fM -H ubuntu -t TCP_MAERTS<br />netperf -fM -H 192.168.0.1<br />netperf -fM -H 192.168.0.1 -t TCP_MAERTS<br />speed.php …</p><p><strong>System</strong></p><p>TP-Link TL-WR1043ND 1.10<br /></p><div class="codebox"><pre><code>cat /proc/cpuinfo|grep machine
machine            : TP-LINK TL-WR1043ND
cat /etc/banner
ATTITUDE ADJUSTMENT (12.09-rc1, r34185)</code></pre></div><p><strong>Request</strong></p><p>Other results for the same or similar models.</p><p><strong>Resources</strong></p><p>The complete log <a href="http://pastebin.com/PF4HtnB9">http://pastebin.com/PF4HtnB9</a> .</p><p>The wiki page <a href="http://wiki.openwrt.org/doc/hardware/performance">http://wiki.openwrt.org/doc/hardware/performance</a> .</p><p>The setup command is `opkg install iperf-mt netperf`.</p><p>`speed.php` (a command line interface to speedtest.net) is at <a href="https://github.com/john-peterson/john-peterson/blob/master/speed.php">https://github.com/john-peterson/john-p … /speed.php</a> .</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>