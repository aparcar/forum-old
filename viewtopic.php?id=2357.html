<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> AEP-MD5 authentification on WAN doesn&#039;t work with xsupplicant (WRT54G)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 25 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p11031">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">seppelrockt</div>
					<div class="post-datetime">
						19 Aug 2005, 20:34					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I need to authentificate myself over wired LAN with eap-md5 to get access to the internet (internet access routed by the university). The authentification works well with xsupplicant-1.0.1 from my laptop running Gentoo Linux but I want to bring the authetification task over to the WRT54G. </p><p>Therefor I installed the xsupplicant-1.0.1 on it and copied my working xsupplicant.conf to the router. But it doesn&#039;t work :-( My router has the bridge br0 NOT REMOVED (in case this is of any importants, but shouldn&#039;t be) - my WAN is vlan1 (WRT54G 2.2) Here is the output of # xsupplicant -i vlan1 -d A -f:</p><p>Using default config!<br />Logfile: &quot;/var/log/xsupplicant.log&quot;<br />network_list: all<br />Default network: &quot;unibi&quot;<br />Allow Type: MD5<br />Type: Wired<br />ID: &quot;my_id&quot; ###<br />md5 username: &quot;my_username&quot; ### values changed in the log - are set correcty of cause<br />md5 password: &quot;my_passwort&quot; ###<br />[INT] Called event_core_setup()!<br />[INT] Called cardif_linux_rtnetlink_init()!<br />[INT] Found interface : lo<br />[CONFIG] List of denied interfaces is empty! All interfaces will be used!<br />Invalid interface lo<br />[INT] Found interface : eth0<br />[CONFIG] List of denied interfaces is empty! All interfaces will be used!<br />[INT] ADDING INTERFACE : eth0<br />[INT] Flags are : 06<br />[INT] Initializing socket for interface eth0..<br />[INT] Index : 2<br />[INT] Allmulti is currently disabled on this device!<br />Interface eth0 initalized!<br />[INT] Interface eth0 is NOT wireless!<br />[CONFIG] Working from config file /etc/xsupplicant.conf.<br />No configuration information for network &quot;(null)&quot; found.&nbsp; Using default.<br />[INT] Found interface : eth1<br />[CONFIG] List of denied interfaces is empty! All interfaces will be used!<br />[INT] ADDING INTERFACE : eth1<br />[INT] Flags are : 06<br />[INT] Initializing socket for interface eth1..<br />[INT] Index : 3<br />[INT] Allmulti is currently disabled on this device!<br />Interface eth1 initalized!<br />[INT] Interface eth1 is NOT wireless!<br />[CONFIG] Working from config file /etc/xsupplicant.conf.<br />No configuration information for network &quot;(null)&quot; found.&nbsp; Using default.<br />[INT] Found interface : br0<br />[CONFIG] List of denied interfaces is empty! All interfaces will be used!<br />[INT] ADDING INTERFACE : br0<br />[INT] Flags are : 06<br />[INT] Initializing socket for interface br0..<br />[INT] Index : 4<br />[INT] Allmulti is currently disabled on this device!<br />Interface br0 initalized!<br />[INT] Interface br0 is NOT wireless!<br />[CONFIG] Working from config file /etc/xsupplicant.conf.<br />No configuration information for network &quot;(null)&quot; found.&nbsp; Using default.<br />[INT] Found interface : vlan0<br />[CONFIG] List of denied interfaces is empty! All interfaces will be used!<br />[INT] ADDING INTERFACE : vlan0<br />[INT] Flags are : 06<br />[INT] Initializing socket for interface vlan0..<br />[INT] Index : 5<br />[INT] Allmulti is currently disabled on this device!<br />Interface vlan0 initalized!<br />[INT] Interface vlan0 is NOT wireless!<br />[CONFIG] Working from config file /etc/xsupplicant.conf.<br />No configuration information for network &quot;(null)&quot; found.&nbsp; Using default.<br />[INT] Found interface : vlan1<br />[CONFIG] List of denied interfaces is empty! All interfaces will be used!<br />[INT] ADDING INTERFACE : vlan1<br />[INT] Flags are : 06<br />[INT] Initializing socket for interface vlan1..<br />[INT] Index : 6<br />[INT] Allmulti is currently disabled on this device!<br />Interface vlan1 initalized!<br />[INT] Interface vlan1 is NOT wireless!<br />[CONFIG] Working from config file /etc/xsupplicant.conf.<br />No configuration information for network &quot;(null)&quot; found.&nbsp; Using default.<br />[INT] No more interfaces to look at!<br />[CONFIG] Opened socket descriptor #12<br />Checking event interface.<br />[INT] Got an RTM_NEWLINK!<br />[INT] Working with an interface with index of 2.<br />[INT]&nbsp; &nbsp; -- Got a new interface request.<br />[INT] Found interface eth0, with index of 2! (Ignored)<br />[ALL] Processing interface eth0... (Flags : 06)<br />[INT] Interface eth0 is NOT wireless!<br />Couldn&#039;t get frame.&nbsp; (Maybe there weren&#039;t any!)<br />Socket would block!<br />There are no frames to process.<br />[STATE] (global) -&gt; DISCONNECTED<br />[STATE] Processing DISCONNECTED state.<br />[STATE] DISCONNECTED -&gt; CONNECTING<br />[ALL] Processing interface eth1... (Flags : 06)<br />[INT] Interface eth1 is NOT wireless!<br />Couldn&#039;t get frame.&nbsp; (Maybe there weren&#039;t any!)<br />Socket would block!<br />There are no frames to process.<br />[STATE] (global) -&gt; DISCONNECTED<br />[STATE] Processing DISCONNECTED state.<br />[STATE] DISCONNECTED -&gt; CONNECTING<br />[ALL] Processing interface br0... (Flags : 06)<br />[INT] Interface br0 is NOT wireless!<br />Couldn&#039;t get frame.&nbsp; (Maybe there weren&#039;t any!)<br />Socket would block!<br />There are no frames to process.<br />[STATE] (global) -&gt; DISCONNECTED<br />[STATE] Processing DISCONNECTED state.<br />[STATE] DISCONNECTED -&gt; CONNECTING<br />[ALL] Processing interface vlan0... (Flags : 06)<br />[INT] Interface vlan0 is NOT wireless!<br />Couldn&#039;t get frame.&nbsp; (Maybe there weren&#039;t any!)<br />Socket would block!<br />There are no frames to process.<br />[STATE] (global) -&gt; DISCONNECTED<br />[STATE] Processing DISCONNECTED state.<br />[STATE] DISCONNECTED -&gt; CONNECTING<br />[ALL] Processing interface vlan1... (Flags : 06)<br />[INT] Interface vlan1 is NOT wireless!<br />Couldn&#039;t get frame.&nbsp; (Maybe there weren&#039;t any!)<br />Socket would block!<br />There are no frames to process.<br />[STATE] (global) -&gt; DISCONNECTED<br />[STATE] Processing DISCONNECTED state.<br />[STATE] DISCONNECTED -&gt; CONNECTING<br />Checking event interface.<br />[INT] Got an RTM_NEWLINK!<br />[INT] Working with an interface with index of 3.<br />[INT]&nbsp; &nbsp; -- Got a new interface request.<br />[INT] Found interface eth1, with index of 3! (Ignored)<br />[ALL] Processing interface eth0... (Flags : 04)<br />Couldn&#039;t get frame.&nbsp; (Maybe there weren&#039;t any!)<br />Socket would block!<br />There are no frames to process.<br />[STATE] Processing CONNECTING state.<br />[STATE] Sending EAPOL-Start Frame.<br />[ALL] Frame to be sent :<br />01 80 C2 00 00 03 00 13 - 10 27 DE F3 88 8E 01 01 .........&#039;......<br />00 00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;..<br />[ALL] Processing interface eth1... (Flags : 04)<br />Couldn&#039;t get frame.&nbsp; (Maybe there weren&#039;t any!)<br />Socket would block!<br />There are no frames to process.<br />[STATE] Processing CONNECTING state.<br />[STATE] Sending EAPOL-Start Frame.<br />[ALL] Frame to be sent :<br />01 80 C2 00 00 03 00 13 - 10 27 DE F5 88 8E 01 01 .........&#039;......<br />00 00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;..<br />[ALL] Processing interface br0... (Flags : 04)<br />Couldn&#039;t get frame.&nbsp; (Maybe there weren&#039;t any!)<br />Socket would block!<br />There are no frames to process.<br />[STATE] Processing CONNECTING state.<br />[STATE] Sending EAPOL-Start Frame.<br />[ALL] Frame to be sent :<br />01 80 C2 00 00 03 00 13 - 10 27 DE F3 88 8E 01 01 .........&#039;......<br />00 00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;..<br />[ALL] Processing interface vlan0... (Flags : 04)<br />Couldn&#039;t get frame.&nbsp; (Maybe there weren&#039;t any!)<br />Socket would block!<br />There are no frames to process.<br />[STATE] Processing CONNECTING state.<br />[STATE] Sending EAPOL-Start Frame.<br />[ALL] Frame to be sent :<br />01 80 C2 00 00 03 00 13 - 10 27 DE F3 88 8E 01 01 .........&#039;......<br />00 00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;..<br />[ALL] Processing interface vlan1... (Flags : 04)<br />Couldn&#039;t get frame.&nbsp; (Maybe there weren&#039;t any!)<br />Socket would block!<br />There are no frames to process.<br />[STATE] Processing CONNECTING state.<br />[STATE] Sending EAPOL-Start Frame.<br />[ALL] Frame to be sent :<br />01 80 C2 00 00 03 00 13 - 10 27 DE F3 88 8E 01 01 .........&#039;......<br />00 00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;..<br />Checking event interface.<br />[INT] Got an RTM_NEWLINK!<br />[INT] Working with an interface with index of 4.<br />[INT]&nbsp; &nbsp; -- Got a new interface request.<br />[INT] Found interface br0, with index of 4! (Ignored)<br />[ALL] Processing interface eth0... (Flags : 04)<br />Couldn&#039;t get frame.&nbsp; (Maybe there weren&#039;t any!)<br />Socket would block!<br />There are no frames to process.<br />[ALL] Clock tick! authWhile=29 heldWhile=59 startWhen=29 curState=CONNECTING<br />[ALL] Processing interface eth1... (Flags : 04)<br />Couldn&#039;t get frame.&nbsp; (Maybe there weren&#039;t any!)<br />Socket would block!<br />There are no frames to process.<br />[ALL] Clock tick! authWhile=29 heldWhile=59 startWhen=29 curState=CONNECTING<br />[ALL] Processing interface br0... (Flags : 04)<br />Couldn&#039;t get frame.&nbsp; (Maybe there weren&#039;t any!)<br />Socket would block!<br />There are no frames to process.<br />[ALL] Clock tick! authWhile=29 heldWhile=59 startWhen=29 curState=CONNECTING<br />[ALL] Processing interface vlan0... (Flags : 04)<br />Couldn&#039;t get frame.&nbsp; (Maybe there weren&#039;t any!)<br />Socket would block!<br />There are no frames to process.<br />[ALL] Clock tick! authWhile=29 heldWhile=59 startWhen=29 curState=CONNECTING<br />[ALL] Processing interface vlan1... (Flags : 04)<br />Couldn&#039;t get frame.&nbsp; (Maybe there weren&#039;t any!)<br />Socket would block!<br />There are no frames to process.<br />[ALL] Clock tick! authWhile=29 heldWhile=59 startWhen=29 curState=CONNECTING<br />Checking event interface.<br />[INT] Got an RTM_NEWLINK!<br />[INT] Working with an interface with index of 5.<br />[INT]&nbsp; &nbsp; -- Got a new interface request.<br />[INT] Found interface vlan0, with index of 5! (Ignored)<br />[ALL] Processing interface eth0... (Flags : 04)<br />Couldn&#039;t get frame.&nbsp; (Maybe there weren&#039;t any!)<br />Socket would block!<br />There are no frames to process.<br />[ALL] Processing interface eth1... (Flags : 04)<br />Couldn&#039;t get frame.&nbsp; (Maybe there weren&#039;t any!)<br />Socket would block!<br />There are no frames to process.<br />[ALL] Processing interface br0... (Flags : 04)<br />Couldn&#039;t get frame.&nbsp; (Maybe there weren&#039;t any!)<br />Socket would block!<br />There are no frames to process.<br />[ALL] Processing interface vlan0... (Flags : 04)<br />Couldn&#039;t get frame.&nbsp; (Maybe there weren&#039;t any!)<br />Socket would block!<br />There are no frames to process.<br />[ALL] Processing interface vlan1... (Flags : 04)<br />Couldn&#039;t get frame.&nbsp; (Maybe there weren&#039;t any!)<br />Socket would block!<br />AND_SO_ON_AND_SO_ON_TILL_TIMEOUT_FORCES_STATE_AUTHETIFICATED (but isn&#039;t!!!)<br />There are no frames to process.<br />[ALL] Clock tick! authWhile=0 heldWhile=0 startWhen=0 curState=AUTHENTICATED<br />[ALL] Shutting down IPC socket!<br />[CONFIG] Closing socket descriptor #12<br />[ALL] Doing statemachine cleanup!<br />There was no active method in eap_cleanup()!<br />[STATE] Sending EAPOL-Logoff Frame.<br />[INT] Sending Logoff for int eth0!<br />[ALL] Frame to be sent :<br />01 80 C2 00 00 03 00 13 - 10 27 DE F3 88 8E 01 02 .........&#039;......<br />00 00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;..<br />[ALL] Cleaning up interface eth0...<br />[INT] Turning off ALLMULTI mode!<br />[INT] Sending Logoff for int eth1!<br />[ALL] Frame to be sent :<br />01 80 C2 00 00 03 00 13 - 10 27 DE F5 88 8E 01 02 .........&#039;......<br />00 00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;..<br />[ALL] Cleaning up interface eth1...<br />[INT] Turning off ALLMULTI mode!<br />[INT] Sending Logoff for int br0!<br />[ALL] Frame to be sent :<br />01 80 C2 00 00 03 00 13 - 10 27 DE F3 88 8E 01 02 .........&#039;......<br />00 00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;..<br />[ALL] Cleaning up interface br0...<br />[INT] Turning off ALLMULTI mode!<br />[INT] Sending Logoff for int vlan0!<br />[ALL] Frame to be sent :<br />01 80 C2 00 00 03 00 13 - 10 27 DE F3 88 8E 01 02 .........&#039;......<br />00 00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;..<br />[ALL] Cleaning up interface vlan0...<br />[INT] Turning off ALLMULTI mode!<br />[INT] Sending Logoff for int vlan1!<br />[ALL] Frame to be sent :<br />01 80 C2 00 00 03 00 13 - 10 27 DE F3 88 8E 01 02 .........&#039;......<br />00 00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;..<br />[ALL] Cleaning up interface vlan1...<br />[INT] Turning off ALLMULTI mode!<br />[INT] Called event_core_cleanup()!<br />[INT] Called cardif_linux_rtnetlink_cleanup()!<br />[STATE] Deleting PID File...</p><p>I have switched the firewall of temporary with no success? Do I have to change something for routing or things like that? I don&#039;t think so for plain authentification.</p><p>Thanks for yout help! I run the last experimental tarball before white_russian.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p12967">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">seppelrockt</div>
					<div class="post-datetime">
						28 Sep 2005, 23:15					</div>
				</div>
				<div class="post-content content">
					<p>BUMP! Still nobody who can help? What does the &quot;socket would block&quot; mean?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>