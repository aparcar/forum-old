<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> QoS Help - qosfw-scripts_0.4</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 23 Feb 2018 and 22 Apr 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 13 of 13</div><nav><ul><li><a href="viewtopic.php%3Fid=3847&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=3847&amp;p=11.html">11</a></li><li><a href="viewtopic.php%3Fid=3847&amp;p=12.html">12</a></li><li class="pagination-current"><span>13</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p35129">
				<div class="post-metadata">
					<div class="post-num">Post #301</div>
					<div class="post-author">Marek</div>
					<div class="post-datetime">
						9 Oct 2006, 20:27					</div>
				</div>
				<div class="post-content content">
					<p>I installed recent 09-oct build and then qos-script from nbd repository and something is wrong. there is &#039;files&#039; directory in the root and inside all of the files belongs to qos-script...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p35130">
				<div class="post-metadata">
					<div class="post-num">Post #302</div>
					<div class="post-author">nbd</div>
					<div class="post-datetime">
						9 Oct 2006, 20:31					</div>
				</div>
				<div class="post-content content">
					<p>Fixed</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p36642">
				<div class="post-metadata">
					<div class="post-num">Post #303</div>
					<div class="post-author">CWM</div>
					<div class="post-datetime">
						6 Nov 2006, 10:33					</div>
				</div>
				<div class="post-content content">
					<p>Is it possible to use the qos-scripts on an interface other than the &quot;wan&quot; interface?</p><p>My router has its wan interface configured as &quot;br2&quot; which is a bridge between a newly created vlan3 (created from 2 lan ports) and the vlan1 wan port (so that I have a &quot;hub&quot; type of connection between the ISP and two self-firewalled machines sitting on vlan3). However, I would like to use the router to perform QoS on traffic that is sent out the WAN port on vlan1 (including traffic that is bridged from vlan3).</p><p>Maybe what I&#039;m doing isn&#039;t possible -- I&#039;m still reading what I can find to understand the details of how bridging/routing/forwarding/QoS all relate.</p><p>Would the solution be to create a duplicate set of wan_* nvram variables that use vlan1 as the ifname so that the qos-script can use these variables? Would this also mean I would have to make a change to the hotplug method of loading the qos-scripts?</p><p>As you can guess I don&#039;t understand how all these pieces fit together yet (trying though).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p36658">
				<div class="post-metadata">
					<div class="post-num">Post #304</div>
					<div class="post-author">nbd</div>
					<div class="post-datetime">
						6 Nov 2006, 17:07					</div>
				</div>
				<div class="post-content content">
					<p>use anything other than &#039;wan&#039; in the interface section name and add &#039;option device br2&#039; to the interface section</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p36675">
				<div class="post-metadata">
					<div class="post-num">Post #305</div>
					<div class="post-author">Marek</div>
					<div class="post-datetime">
						6 Nov 2006, 22:11					</div>
				</div>
				<div class="post-content content">
					<p>Nbd, how can I adopt your script to work with esfq discipline? (I have this module from tomato software and <br />&#039;insmod&#039; seems working propetly</p><div class="codebox"><pre><code>root@OpenWrt:~# insmod sch_esfq.o
Using sch_esfq.o
root@OpenWrt:~# lsmod
Module                  Size  Used by    Tainted: P
sch_esfq                5984   0 (unused)
ipt_IMQ                  672   1
ipt_length               336   4
ipt_layer7             10512   2
ipt_ipp2p               7320   1
ipt_CONNMARK             816   2
sch_red                 3216   2
sch_sfq                 3912   6
sch_hfsc               15960   2
cls_fw                  2888   8
imq                     2384   1
ehci-hcd               20556   0 (unused)
uhci                   30164   0 (unused)
usb-storage            68624   0 (unused)
sd_mod                 12500   0 (unused)
scsi_mod               70616   1 [usb-storage sd_mod]
usbcore                74808   1 [ehci-hcd uhci usb-storage]
ext2                   41528   0 (unused)
wlcompat               15520   0 (unused)
wl                    423640   0 (unused)
switch-robo             4460   0 (unused)
switch-core             4896   0 [switch-robo]
diag                    3616   0 (unused)</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p36723">
				<div class="post-metadata">
					<div class="post-num">Post #306</div>
					<div class="post-author">CWM</div>
					<div class="post-datetime">
						7 Nov 2006, 17:22					</div>
				</div>
				<div class="post-content content">
					<p>Thank you for the tip nbd, by using &#039;option device vlan1&#039; I was able to have the script generate the output I desire. Now I just need to test that this is doing what I expect. Thanks again.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p36804">
				<div class="post-metadata">
					<div class="post-num">Post #307</div>
					<div class="post-author">speedphreak</div>
					<div class="post-datetime">
						8 Nov 2006, 18:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nbd wrote:</cite><blockquote><div class="quotebox"><cite>Bourdieu wrote:</cite><blockquote><p>Ok I didn&#039;t see the firewall scripts. I don&#039;t understand why would you melt firewalling with qos in a package.</p></blockquote></div><p>The reason for doing this is that I want to add a web interface for both the QoS and the firewalling part. Parsing /etc/firewall.user is too difficult, and the code that parses the classify rules in /etc/config/qos-* is the same that also parses the matching rules in /etc/config/firewall. That&#039;s why I make the code shared and put it in one package.</p></blockquote></div><p>Ok forgive me, I am new to OpenWRT. I came to this community because of the solid QoS scipts offered. I have Sunrocket VOIP at home and nbd&#039;s script has given me fairly consistant MOS score of 4.0 with Visualware&#039;s VOIP test software. I have had 30-40% less jitter with this QoS script as well!</p><p>Now for my question, as I am still confused by other firewall related posts:</p><p>Firewall! Is the firewall now soley in /etc/config/firewall? This also appears to be where the webif is also storing firewall modifications. If /etc/config/firewall is indeed the new firewall location should firewall.user used at all?</p><p>How does one create a DMZ with the new /etc/config/firewall? Would the following work?:</p><p>forward::192.168.1.50</p>											<p class="post-edited">(Last edited by <strong>speedphreak</strong> on 8 Nov 2006, 18:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p36844">
				<div class="post-metadata">
					<div class="post-num">Post #308</div>
					<div class="post-author">speedphreak</div>
					<div class="post-datetime">
						9 Nov 2006, 08:17					</div>
				</div>
				<div class="post-content content">
					<p>Very interesting. I just installed WR RC6. I can now use nbd&#039;s latest 9.2.1 scripts. Now the firewall is gone from the webif, so I decided to use firewall.user instead.</p><p>I&#039;m not sure if im more confused or less confused now, lol...</p><p>I would still like to know if&nbsp; &nbsp;forward::192.168.1.10&nbsp; &nbsp;would essentially make a DMZ. It appears to be that the statement would be saying to forward all ports to 192.168.1.10.</p><p>Is the firewall coming back to the webif?</p><p>Was it decided that the project didn&#039;t want this feature?</p><p>Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p36845">
				<div class="post-metadata">
					<div class="post-num">Post #309</div>
					<div class="post-author">lostnihilist</div>
					<div class="post-datetime">
						9 Nov 2006, 08:24					</div>
				</div>
				<div class="post-content content">
					<p>the best thing i can guess is to do something like<br />forward:1-60000:&lt;ip&gt; <br />or however many ports are legitimate. i&#039;m not sure how to do a DMZ from the new firewall config file. firewall.user is definitely a valid place to put custom rules (e.g. DMZ), but the new layout is made to do the kind of default settings that you would typically see in a webif as it is more easily parsed.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p36958">
				<div class="post-metadata">
					<div class="post-num">Post #310</div>
					<div class="post-author">CWM</div>
					<div class="post-datetime">
						11 Nov 2006, 01:59					</div>
				</div>
				<div class="post-content content">
					<p>My earlier understanding of simply changing the qos-scripts to use vlan1 (described in my previous post) was incorrect as iptables apparently won&#039;t work on a device that makes up the bridge -- I guess I need ebtables to do this.</p><p>Can anybody can confirm if it is or is not possible to get qos-scripts with ebtables to shape traffic on a device that is part of a bridge? I&#039;m hoping to avoid having to write tc filter rules directly. And if it&#039;s currently not possible that would save me a lot of reading.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p36987">
				<div class="post-metadata">
					<div class="post-num">Post #311</div>
					<div class="post-author">nbd</div>
					<div class="post-datetime">
						11 Nov 2006, 17:39					</div>
				</div>
				<div class="post-content content">
					<p>It is currently not possible, but probably not that hard to implement...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p37812">
				<div class="post-metadata">
					<div class="post-num">Post #312</div>
					<div class="post-author">CWM</div>
					<div class="post-datetime">
						26 Nov 2006, 02:35					</div>
				</div>
				<div class="post-content content">
					<p>It took a while for me to get back on this, but I believe I&#039;ve finally managed to get the qos-scripts working with ebtables so I can do traffic-shaping on an ethernet bridge. I can&#039;t say definitively that *everything* is working as it should but I can verify that data is being distributed among the four qdiscs and my voip service is getting higher priority than the bulk traffic (which was my goal).</p><p>For my setup (with the wan port, vlan1, on a new ethernet bridge, br2, with two LAN ports on a new vlan, vlan3) with ebtables installed I had to modify the /etc/init.d/S35firewall script to change the MASQ rules to only MASQUERADE packets that come from the internal network (br0) as I believe the default MASQ rules were incorrectly doing source-nat on packets that were intended to be forwarded through the br2 bridge unchanged when ebtables was installed. This is what I ended up with (diff):<br /></p><div class="codebox"><pre><code> ### MASQ
   iptables -t nat -A PREROUTING -j prerouting_rule
   iptables -t nat -A POSTROUTING -j postrouting_rule
-  iptables -t nat -A POSTROUTING -o $WAN -j MASQUERADE
+  iptables -t nat -A POSTROUTING -o $WAN -s 192.168.1.0/24 -j MASQUERADE</code></pre></div><p>I went down a few wrong paths before finally getting it right. As it turns out, along with the changes to the S35firewall rules all I really needed to do was to install the ebtables packages (ebtables and kmod-ebtables) and then make the change to the etc/config/qos (to change the &quot;config interface wan&quot; line to be &quot;config interface dummy&quot; and then set the interface I want the qos-scripts rule to operate on by adding the &quot;option device vlan1&quot; line underneath):<br /></p><div class="codebox"><pre><code># INTERFACES:
config interface dummy
        option device vlan1
        option classgroup  &quot;Default&quot;</code></pre></div><p>Now the qos-scripts will shape all traffic going out the vlan1 bridge sub-interface. That&#039;s about it; I have &quot;transparent&quot; traffic-shaping working along-side the regular nat/router operation (I&#039;m not sure if &quot;transparent&quot; traffic-shaping can be used in the same manner as it is for transparent firewalling -- I intend it to mean that I&#039;m shaping all traffic going out on vlan1, both bridged traffic from vlan3 and routed traffic from the br2 interface).</p><p>To add a bit more flexibility and security I modified the example rules in firewall.user to only allow incoming ssh conections from the &quot;internal&quot; side of the br2 bridge using the physdev iptables extenstion like this:<br /></p><div class="codebox"><pre><code>## Open port to WAN
## -- This allows port 22 to be answered by (dropbear on) the router
iptables -t nat -A prerouting_rule -i $WAN -p tcp --dport 22 -m physdev --physdev-in vlan3 -j ACCEPT
iptables        -A input_rule      -i $WAN -p tcp --dport 22 -m physdev --physdev-in vlan3 -j ACCEPT</code></pre></div><p>This way I can connect to the router using the router&#039;s WAN ip address from any of the machines on the vlan3 side of the bridge but not from the vlan1 (aka internet) side.</p><p>Thank you to everybody for their efforts on the OpenWRT project as a whole. I am very impressed with the ease of installation, the number of features available in easy to install packages, and the reliability of the system as a whole.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p37821">
				<div class="post-metadata">
					<div class="post-num">Post #313</div>
					<div class="post-author">CWM</div>
					<div class="post-datetime">
						26 Nov 2006, 09:22					</div>
				</div>
				<div class="post-content content">
					<p>... just remember that I did have to add another rule to iptables so that packets would be forwarded across the ethernet bridge (as described in the above post) when ebtables was loaded:<br /></p><div class="codebox"><pre><code>iptables -A FORWARD -m physdev --physdev-in vlan1 -j ACCEPT
iptables -A FORWARD -m physdev --physdev-out vlan1 -j ACCEPT</code></pre></div><p>I have a feel that these rules may be a little too vague and may be accepting traffic that most firewally would typically want to avoid but my router is running on a non-secure section of the network so I&#039;m not too concerned by it. If anybody knows a better iptables rule to allow forwarding all traffic through the ethernet bridge I&#039;d happily listen to the advice.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39312">
				<div class="post-metadata">
					<div class="post-num">Post #314</div>
					<div class="post-author">simsek</div>
					<div class="post-datetime">
						20 Dec 2006, 16:36					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>is there any source where I can find the algorithm being used for developing this script? I would like to understand the paramters being used in the&nbsp; qos script in more detail. For example, linksharing, packetdelay, avgrate... how are these parameters being used for shaping the traffic?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39317">
				<div class="post-metadata">
					<div class="post-num">Post #315</div>
					<div class="post-author">CWM</div>
					<div class="post-datetime">
						20 Dec 2006, 17:28					</div>
				</div>
				<div class="post-content content">
					<p>I had been looking for the same information but have since found that the defaults are working well enough that I haven&#039;t been motivated to pursue this.</p><p>All I&#039;ve been able to find are the links on the QoS How-To page (<a href="http://wiki.openwrt.org/MiniHowtos/QoSHowto?highlight=%28howto%29">http://wiki.openwrt.org/MiniHowtos/QoSH … 28howto%29</a>) to read up on how the HSFC queuing mechanism works in theory, <a href="http://www.cs.cmu.edu/~hzhang/HFSC/main.html">http://www.cs.cmu.edu/~hzhang/HFSC/main.html</a> and the links on the HSFC section of the Linux Traffic-Control-HOWTO at <a href="http://www.linux.com/howtos/Traffic-Control-HOWTO/classful-qdiscs.shtml#qc-hfsc">http://www.linux.com/howtos/Traffic-Con … ml#qc-hfsc</a>. Of course the Traffic-Control-HOWTO itself and the LARTC HOWTO at <a href="http://www.lartc.org/howto/">http://www.lartc.org/howto/</a> could be useful too.</p><p>Sadly I haven&#039;t found any direct information on how the HSFC class is implemented on linux or clear descripton of what the tc parameters for HSFC actually do. I have a feeling it may be pretty similar to the Net/Free BSD implementation of HSFC though but I haven&#039;t followed up on that myself to be certain.</p><p>I&#039;d like to experiment with tweaking some of the settings as well but without a better understanding the HSFC implementation I&#039;d likely make things worse than better at this point.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39325">
				<div class="post-metadata">
					<div class="post-num">Post #316</div>
					<div class="post-author">simsek</div>
					<div class="post-datetime">
						20 Dec 2006, 18:40					</div>
				</div>
				<div class="post-content content">
					<p>many thanks CWM, your&#039;re right, without explicit information about the implementation, it is hard to reconfigure these parameters. If they really affect the QoS significantly is another question. I will work on that and post whatever I found the next days. It is however really sad that there&#039;s no doc for such a useful implementation.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39981">
				<div class="post-metadata">
					<div class="post-num">Post #317</div>
					<div class="post-author">zedstrange</div>
					<div class="post-datetime">
						1 Jan 2007, 16:32					</div>
				</div>
				<div class="post-content content">
					<p>Dear nbd.</p><p>I am using the QoS with the Webif2 interface, on the Asus WL500G, and have implemented your latest package 0.9.4-1</p><p>On a side issue, using the Webif2 interface any of the changes submitted are never saved,&nbsp; but that doesnt bother me as i can edit the etc/config/qos file directly and thats no problem.</p><p>I am an ISDN user with 128k up and down.&nbsp; Normal downloads are 14 to 14.5kilobytes ps<br />All I want to really do now is have any kind of traffic prioritise over P2P, so it seems your script should do this by default</p><p>the only changes i have made to your script is in the following section.</p><p>config interface wan<br />&nbsp; &nbsp; option classgroup&nbsp; &quot;Default&quot;<br />&nbsp; &nbsp; option enabled&nbsp; &nbsp; &nbsp; 1<br />&nbsp; &nbsp; option upload&nbsp; &nbsp; &nbsp; &nbsp;128<br />&nbsp; &nbsp; option download&nbsp; &nbsp;128</p><p>Once the QoS starts to kick in I lose&nbsp; what appears to be exactly 50% of my bandwidth - yet both ISDN channels are still active.&nbsp; Also it does seem that the P2P does not get deprioritised when other protocols are in use.&nbsp; For example in my testing i was running P2p on one computer and doing http downloads on another, and did a lot of testing.&nbsp; </p><p>Is it possible the script simply doesnt suit a connection this slow?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p41393">
				<div class="post-metadata">
					<div class="post-num">Post #318</div>
					<div class="post-author">zap-o-post</div>
					<div class="post-datetime">
						24 Jan 2007, 02:28					</div>
				</div>
				<div class="post-content content">
					<p>I have trouble with the quality of voip.</p><p>So I commented out all lines in /etc/config/qos except the section for UDP packets -500 and set the class to &quot;Priority&quot;.<br />In my tests this was the best quality, but in some cases (surfing on websites with many items/images) I get crackling in voip.<br />I think the biggest problem is the jitter (&gt; 20ms; <a href="http://myspeed.visualware.com/voip/)">http://myspeed.visualware.com/voip/)</a><br />Where can I change the packet delay in /etc/config/qos?</p><p>Is there anything else what I can do?</p><p>zap-o-post</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p41471">
				<div class="post-metadata">
					<div class="post-num">Post #319</div>
					<div class="post-author">cititechs</div>
					<div class="post-datetime">
						25 Jan 2007, 02:35					</div>
				</div>
				<div class="post-content content">
					<p>Hey.. I&#039;ve installed OPENWRT because am trying to get QOS going. </p><p>Here’s my dilemma. When my network first started out I was only running Microsoft ISA 2004 which I use as a router. Then I had the need for VOIP. Well turned out that ISA 2004 nor 2006 support SIP. So I had a few WAN addresses from my ISP. So I decided to add a Linksys firewall to the mix to get VOIP going.&nbsp; All I had to do was make sure that the phones had a gateway&nbsp; address of the Linksys LAN gateway.&nbsp; So now here comes the &quot;but&quot; since both the ISA and the linksys went out the same DSL modem .113 I couldnt just do QOS on the Linksys because it would only effect the clients that used the linksys as a Gateway. </p><p>So here’s my thoughts. I added another Linksys router to the mix running OPENWRT RC6. Disabled the WAN side of the router and gave the LAN side an IP from my ISP .114 in this case. I then went to my ISA box and updated its gateway to 114 and I also went to my Linksys running my VOIP and updated its gateway to 114. So now all traffic passes thru the Linksys running OpenWrt and that one has a gateway of my dsl modem set .113. </p><p>So here is where am at now. Everything is working but I would like to get Rudys or NBD script to do QOS for me. I&#039;ve done my speed test a against a few city’s and I have my numbers. I&#039;ve been able to modify the script but I don’t know if the way I have things configured will things work. Im looking to get QOS going so that my calls sound better. Am willing to hook things up physically different if I have to.</p><p><span class="postimg"><img src="http://www.evelynandeddie.com/ct.png" alt="http://www.evelynandeddie.com/ct.png" /></span></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p59248">
				<div class="post-metadata">
					<div class="post-num">Post #320</div>
					<div class="post-author">loguser</div>
					<div class="post-datetime">
						19 Nov 2007, 22:21					</div>
				</div>
				<div class="post-content content">
					<p>Hi.&nbsp; I was wondering if someone especially nbd if he&#039;s around what the following does in the iptables as I&#039;m new and confused about qos.</p><p>MARK match 0x1 length 400:65535 MARK set 0x0<br />MARK match 0x2 length 800:65535 MARK set 0x0</p><p>Only reason I&#039;m asking is because it&#039;s not listed anywhere in the qos config file?&nbsp; Also I&#039;m wondering if it is wise to reclassify sip packets using layer7 because for whatever reason the class doesn&#039;t seem to catch any while if I change to reclassify it will activate.&nbsp; Thanks a bunch.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p59249">
				<div class="post-metadata">
					<div class="post-num">Post #321</div>
					<div class="post-author">nbd</div>
					<div class="post-datetime">
						19 Nov 2007, 22:22					</div>
				</div>
				<div class="post-content content">
					<p>It is listed, see &#039;maxsize&#039; under the class settings. It automatically emits rules like that. That prevents packets over a certain size from being shaped under these classes.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p59260">
				<div class="post-metadata">
					<div class="post-num">Post #322</div>
					<div class="post-author">loguser</div>
					<div class="post-datetime">
						20 Nov 2007, 02:12					</div>
				</div>
				<div class="post-content content">
					<p>thanks nbd.&nbsp; Can you give me your impression of the qos settings when it comes to sip?</p><p>For example as I mentioned that layer7 sip and h323 does not seem to detect anything when classified but works when it&#039;s reclassified.&nbsp; What&#039;s the benefit if any since layer7 will not work under that situation?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p59261">
				<div class="post-metadata">
					<div class="post-num">Post #323</div>
					<div class="post-author">nbd</div>
					<div class="post-datetime">
						20 Nov 2007, 02:21					</div>
				</div>
				<div class="post-content content">
					<p>sip, h323 and skype are shaped properly for me in the default configuration</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60792">
				<div class="post-metadata">
					<div class="post-num">Post #324</div>
					<div class="post-author">l_zsolt</div>
					<div class="post-datetime">
						23 Dec 2007, 13:50					</div>
				</div>
				<div class="post-content content">
					<p>Hi!</p><p>Is it possible to use nbd&#039;s qos script to the wlan interface?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p63733">
				<div class="post-metadata">
					<div class="post-num">Post #325</div>
					<div class="post-author">dario</div>
					<div class="post-datetime">
						20 Feb 2008, 01:09					</div>
				</div>
				<div class="post-content content">
					<p>i am analyzing the qos script and i want to know more about the rules and what does mean the follow:</p><p>config classify<br />&nbsp; &nbsp; &nbsp; &nbsp; option target&nbsp; &nbsp; &nbsp; &nbsp;&quot;Bulk&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option layer7&nbsp; &nbsp; &nbsp; &nbsp;&quot;edonkey&quot; ??? -------- can i change that option ??? which are my options ??<br />config classify<br />&nbsp; &nbsp; &nbsp; &nbsp; option target&nbsp; &nbsp; &nbsp; &nbsp;&quot;Bulk&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option layer7&nbsp; &nbsp; &nbsp; &nbsp;&quot;bittorrent&quot;??? -------- can i change that option ???&nbsp; &nbsp; &nbsp; &nbsp;Which are my options ??<br />config classify<br />&nbsp; &nbsp; &nbsp; &nbsp; option target&nbsp; &nbsp; &nbsp; &nbsp;&quot;Priority&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ports&nbsp; &nbsp; &nbsp; &nbsp; &quot;22,53&quot;&nbsp; ???? ----- why DNS and SSH is priority???<br />config classify<br />&nbsp; &nbsp; &nbsp; &nbsp; option target&nbsp; &nbsp; &nbsp; &nbsp;&quot;Normal&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; &nbsp; &nbsp; &quot;tcp&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ports&nbsp; &nbsp; &nbsp; &nbsp; &quot;20,21,25,80,110,443,993,995&quot;<br />config classify<br />&nbsp; &nbsp; &nbsp; &nbsp; option target&nbsp; &nbsp; &nbsp; &nbsp;&quot;Express&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ports&nbsp; &nbsp; &nbsp; &nbsp; &quot;5190&quot;<br />config default<br />&nbsp; &nbsp; &nbsp; &nbsp; option target&nbsp; &nbsp; &nbsp; &nbsp;&quot;Express&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; &nbsp; &nbsp; &quot;udp&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option pktsize&nbsp; &nbsp; &nbsp; &quot;-500&quot;&nbsp; ???? ------- what is the unit of this option???&nbsp; &nbsp;Why is -500 ??&nbsp; &nbsp;Can i change this option ??<br />config reclassify<br />&nbsp; &nbsp; &nbsp; &nbsp; option target&nbsp; &nbsp; &nbsp; &nbsp;&quot;Priority&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; &nbsp; &nbsp; &quot;icmp&quot;<br />config default<br />&nbsp; &nbsp; &nbsp; &nbsp; option target&nbsp; &nbsp; &nbsp; &nbsp;&quot;Bulk&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option portrange&nbsp; &nbsp; &quot;1024-65535&quot;<br />config reclassify<br />&nbsp; &nbsp; &nbsp; &nbsp; option target&nbsp; &nbsp; &nbsp; &nbsp;&quot;Priority&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; &nbsp; &nbsp; &quot;tcp&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option pktsize&nbsp; &nbsp; &nbsp; &quot;-128&quot;&nbsp; &nbsp;???? ------- what is the unit of this option???&nbsp; &nbsp;Why is -500 ??&nbsp; &nbsp;Can i change this option ??<br />&nbsp; &nbsp; &nbsp; &nbsp; option mark&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;!Bulk&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option tcpflags&nbsp; &nbsp; &nbsp;&quot;SYN&quot;<br />config reclassify<br />&nbsp; &nbsp; &nbsp; &nbsp; option target&nbsp; &nbsp; &nbsp; &nbsp;&quot;Priority&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; &nbsp; &nbsp; &quot;tcp&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option pktsize&nbsp; &nbsp; &nbsp; &quot;-128&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option mark&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;!Bulk&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option tcpflags&nbsp; &nbsp; &nbsp;&quot;ACK&quot;</p><p>Now in the follow part i have more questions, Â¿can i agree more code lines for this script? Â¿how can i manipulate this values, which is the maximun value and the minimum value? Â¿when does the &quot;priority_down&quot; works? Â¿when does the &quot;normal_down&quot; works?</p><p>config class &quot;Priority&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option packetsize&nbsp; 400<br />&nbsp; &nbsp; &nbsp; &nbsp; option maxsize&nbsp; &nbsp; &nbsp;400<br />&nbsp; &nbsp; &nbsp; &nbsp; option avgrate&nbsp; &nbsp; &nbsp;10<br />&nbsp; &nbsp; &nbsp; &nbsp; option priority&nbsp; &nbsp; 20<br />config class &quot;Priority_down&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option packetsize&nbsp; 1000<br />&nbsp; &nbsp; &nbsp; &nbsp; option avgrate&nbsp; &nbsp; &nbsp;10</p><br /><p>config class &quot;Express&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option packetsize&nbsp; 1000<br />&nbsp; &nbsp; &nbsp; &nbsp; option maxsize&nbsp; &nbsp; &nbsp;800<br />&nbsp; &nbsp; &nbsp; &nbsp; option avgrate&nbsp; &nbsp; &nbsp;50<br />&nbsp; &nbsp; &nbsp; &nbsp; option priority&nbsp; &nbsp; 10</p><p>config class &quot;Normal&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option packetsize&nbsp; 1500<br />&nbsp; &nbsp; &nbsp; &nbsp; option packetdelay 100<br />&nbsp; &nbsp; &nbsp; &nbsp; option avgrate&nbsp; &nbsp; &nbsp;10<br />&nbsp; &nbsp; &nbsp; &nbsp; option priority&nbsp; &nbsp; 5<br />config class &quot;Normal_down&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option avgrate&nbsp; &nbsp; &nbsp;20</p><p>config class &quot;Bulk&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option avgrate&nbsp; &nbsp; &nbsp;1<br />&nbsp; &nbsp; &nbsp; &nbsp; option packetdelay 200</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 13 of 13</div><nav><ul><li><a href="viewtopic.php%3Fid=3847&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=3847&amp;p=11.html">11</a></li><li><a href="viewtopic.php%3Fid=3847&amp;p=12.html">12</a></li><li class="pagination-current"><span>13</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>