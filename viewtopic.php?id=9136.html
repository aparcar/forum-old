<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Bridging in OpenWRT</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 16 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p41306">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">joksi</div>
					<div class="post-datetime">
						23 Jan 2007, 03:59					</div>
				</div>
				<div class="post-content content">
					<p>Hi folks</p><p>I have just suceeded bridgin WLAN to LAN on my router based on OpenWRT.<br />So i can connect my laptop to the AP and get a DHCP adress from the main router. </p><p>Now, i have one more router with OpenWRT that I have setup in STA mode (succesfully connected to the first AP by WPA), but then when i involve a bridge on this one too (eth0 - ath1 -&gt; br0) it doesnt matter how i configure it (open, WPA w/ wpa_supplicant), it just wont crack it. Sometimes i get disconnected, but sometimes i stay connected to the AP. </p><p>The main thing is that the bridge on the client AP somehow mixes things up, i cannot ping the AP. But when shutting down the bridge it works! I have tried many different things last couple of days, and it hade made me insane almost!</p><p>The strangest thing however is that if i issue the command &quot;brctl showmacs br0&quot; on the client AP, i can see mac adresses from devices on my LAN at the other side, so ethernet packets sure traverse the WLAN link through AP master and into the LAN. But no other connectibity works.</p><p>Is it as simple as that OpenWRT can&#039;t do this type of bridge over Wireless?<br />AP master bridging works right away, but AP cllient bridging doesnt work.</p>											<p class="post-edited">(Last edited by <strong>joksi</strong> on 23 Jan 2007, 04:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p41355">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">joksi</div>
					<div class="post-datetime">
						23 Jan 2007, 19:44					</div>
				</div>
				<div class="post-content content">
					<p>No one?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p41362">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mbm</div>
					<div class="post-datetime">
						23 Jan 2007, 21:03					</div>
				</div>
				<div class="post-content content">
					<p>This has been covered multiple times already -</p><p>Client/Station mode can&#039;t bridge properly and hence doesn&#039;t work for DHCP. Use WDS.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p41363">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">joksi</div>
					<div class="post-datetime">
						23 Jan 2007, 21:07					</div>
				</div>
				<div class="post-content content">
					<p>Well is there a upcoming solution for OpenWRT?<br />If not, the only solution is to use DD-WRT?<br />Because WDS mode istn interesting, the client should not accept WLAN connections to it.<br />Also, WDS mode halfs the bandwitdh.</p><p>It however strange it doesnt work, <a href="http://madwifi.org/wiki/UserDocs/TransparentBridge">http://madwifi.org/wiki/UserDocs/TransparentBridge</a></p>											<p class="post-edited">(Last edited by <strong>joksi</strong> on 23 Jan 2007, 21:09)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p41364">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Kevin</div>
					<div class="post-datetime">
						23 Jan 2007, 21:11					</div>
				</div>
				<div class="post-content content">
					<p>wds mode doesn&#039;t magically half the available bandwidth just by using it. only if it&#039;s working as a repeater is bandwidth halved, because it must send and recieve the same traffic</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p41370">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">joksi</div>
					<div class="post-datetime">
						23 Jan 2007, 21:46					</div>
				</div>
				<div class="post-content content">
					<p>Okey, so you mean that by setting it all up as WDS and not using the AP on the client AP it wont affect bandwith between the ethernet port and the AP client interface? Only when there is a computer connected to the client AP over WLAN, then it will be half the badnwitdh beteen that computer and the first AP?</p><p>Well, can i achieve what I want if i setup the AP and the client AP with WDS? That is, bridging client AP with its ethernnet ports? And how?</p><p>And why doesnt the following work in OpenWRT <a href="http://madwifi.org/wiki/UserDocs/TransparentBridge">http://madwifi.org/wiki/UserDocs/TransparentBridge</a> ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p41384">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">mbm</div>
					<div class="post-datetime">
						24 Jan 2007, 00:41					</div>
				</div>
				<div class="post-content content">
					<p>From my list of stock answers -</p><div class="quotebox"><cite>mbm wrote:</cite><blockquote><p>The whole &quot;wds halves bandwidth&quot; is a misconception, it&#039;s not a WDS issue, it&#039;s an issue with a shared medium, namely wireless. To illustrate:</p><p>- - -&nbsp; wireless link<br />=== wired link</p><p>[pc #1] - - - [router #1] - - - [router #2] === [pc #2]</p><p>Here, router #1 is both recieving and transmitting over wireless, creating the bottleneck you&#039;re attempting to describe.</p><p>[pc #1] === [router #1] - - - [router #2] === [pc #2]</p><p>Now it&#039;s gone, just by changing the connection between pc #1 and router #1 to avoid tying up the wireless. It really has nothing to do with WDS.</p><p>Some further education about WDS and client mode:</p><p>You can&#039;t actually &quot;bridge&quot; in client mode, when a client sends a packet to the access point, the packet contains three headers:</p><p>[client/source address][destiation bssid/ap&#039;s address][destination address]</p><p>If you watch the data going through the bridge you&#039;ll see that the client is changing the source address to it&#039;s own address to avoid confusing the access point. WDS solves this problem with an additional field:</p><p>[source address][source bssid][destination bssid][destination address]</p><p>Essentially the source address got split into two fields, allowing it to relay the true address instead of having to use it&#039;s own address as the point of origin.</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p41390">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">joksi</div>
					<div class="post-datetime">
						24 Jan 2007, 01:22					</div>
				</div>
				<div class="post-content content">
					<p>I completely understand the problem now <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>But I have entered this command on both the AP and the STa:<br />iwpriv ath0 wds 1</p><p>And it doesnt work, even though the command should activate frames with four fields.</p><p>With other words, i have just followed the mentionned link <a href="http://madwifi.org/wiki/UserDocs/TransparentBridge">http://madwifi.org/wiki/UserDocs/TransparentBridge</a></p>											<p class="post-edited">(Last edited by <strong>joksi</strong> on 24 Jan 2007, 01:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p41404">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">joksi</div>
					<div class="post-datetime">
						24 Jan 2007, 07:42					</div>
				</div>
				<div class="post-content content">
					<p>I have just atlast suceeded with my goal!</p><p>But only tried it with no encryption, and I wouldnt want to use WEP either.<br />Do you think WPA with wpa_supplicant can work in this configuration?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p41461">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">joksi</div>
					<div class="post-datetime">
						25 Jan 2007, 00:14					</div>
				</div>
				<div class="post-content content">
					<p>Big problems...the AP client seems its connecting every now and then, i can set up a software to pinng every minnute or so, after 10 min, sometimes half an hour, it stops responding. However if i check AP master it says that AP client is still connected :-S</p><p>Any ideas? I have tried with attribute &quot;nosbeacon&quot;, and without, doesnt make a difference.<br />I have only one AP client sta and no AP master on the client, so the command should not be needed.</p><p>I have even put the two routers by the windows, so they are completely cold now and it stays the same issues.<br />So something is telling me it has something with the configuration to do?</p><p>And the short time it works it works well indeed, approx. 24-25Mbps over the link!</p>											<p class="post-edited">(Last edited by <strong>joksi</strong> on 25 Jan 2007, 00:16)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>