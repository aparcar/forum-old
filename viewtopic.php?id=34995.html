<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WAN connection via 3g modem continuously lost</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p158629">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">jfischer</div>
					<div class="post-datetime">
						25 Feb 2012, 07:50					</div>
				</div>
				<div class="post-content content">
					<p>Hi there,</p><p>I tried to setup a Linksys WRT160NL with OpenWRT (I installed the 10.03.1 release with squashfs) in order to use it for access to the Internet via a 3g modem (Huawei-Vodafone K3565-H). In the logs, I see that the modem actually does connect but that it instantly loses the connection again. I have tested in two different countries with different SIMs - both with exactly the same result (BTW: when used on my computer, the modem does connect with both SIMs and the settings used for OpenWRT.</p><p>Here is the relevant par of my /etc/config/network (pin, apn, username and password are correct):</p><div class="codebox"><pre><code>config &#039;interface&#039; &#039;wan&#039;
    option &#039;proto&#039; &#039;3g&#039;
    option &#039;device&#039; &#039;/dev/ttyUSB0&#039;
    option &#039;service&#039; &#039;umts&#039;
    option &#039;username&#039; &#039;xxx&#039;
    option &#039;password&#039; &#039;xxx&#039;
    option &#039;demand&#039; &#039;600&#039;
    option &#039;pppd_options&#039; &#039;debug noipdefault&#039;
    option &#039;pincode&#039; &#039;xxx&#039;
    option &#039;apn&#039; &#039;xxx&#039;</code></pre></div><p>This is an exemplary extract from my syslog (with debug option set for pppd):</p><div class="codebox"><pre><code>Feb 22 10:40:24 router daemon.notice pppd[1422]: pppd 2.4.4 started by root, uid 0
Feb 22 10:40:24 router daemon.info pppd[1422]: Using interface 3g-wan
Feb 22 10:40:24 router daemon.info dnsmasq[1391]: reading /tmp/resolv.conf.auto
Feb 22 10:40:24 router daemon.info dnsmasq[1391]: using nameserver 1.1.1.1#53
Feb 22 10:40:24 router daemon.info dnsmasq[1391]: using local addresses only for domain lux
Feb 22 10:40:24 router daemon.notice pppd[1422]: local  IP address 10.64.64.64
Feb 22 10:40:24 router daemon.notice pppd[1422]: remote IP address 10.112.112.112
Feb 22 10:40:59 router daemon.info pppd[1422]: Starting link
Feb 22 10:41:00 router local2.info chat[1438]: abort on (BUSY)
Feb 22 10:41:00 router local2.info chat[1438]: abort on (NO CARRIER)
Feb 22 10:41:00 router local2.info chat[1438]: abort on (ERROR)
Feb 22 10:41:00 router local2.info chat[1438]: report (CONNECT)
Feb 22 10:41:00 router local2.info chat[1438]: timeout set to 10 seconds
Feb 22 10:41:00 router local2.info chat[1438]: send (AT&amp;F^M)
Feb 22 10:41:00 router local2.info chat[1438]: expect (OK)
Feb 22 10:41:00 router local2.info chat[1438]: AT&amp;F^M^M
Feb 22 10:41:00 router local2.info chat[1438]: OK
Feb 22 10:41:00 router local2.info chat[1438]:  -- got it
Feb 22 10:41:00 router local2.info chat[1438]: send (ATE1^M)
Feb 22 10:41:00 router local2.info chat[1438]: expect (OK)
Feb 22 10:41:00 router local2.info chat[1438]: ^M
Feb 22 10:41:00 router local2.info chat[1438]: ATE1^M^M
Feb 22 10:41:00 router local2.info chat[1438]: OK
Feb 22 10:41:00 router local2.info chat[1438]:  -- got it
Feb 22 10:41:00 router local2.info chat[1438]: send (AT+CGDCONT=1,&quot;IP&quot;,&quot;xxx&quot;^M)
Feb 22 10:41:00 router local2.info chat[1438]: timeout set to 30 seconds
Feb 22 10:41:00 router local2.info chat[1438]: expect (OK)
Feb 22 10:41:00 router local2.info chat[1438]: ^M
Feb 22 10:41:00 router local2.info chat[1438]: AT+CGDCONT=1,&quot;IP&quot;,&quot;xxx&quot;^M^M
Feb 22 10:41:00 router local2.info chat[1438]: OK
Feb 22 10:41:00 router local2.info chat[1438]:  -- got it
Feb 22 10:41:00 router local2.info chat[1438]: send (ATD*99***1#^M)
Feb 22 10:41:00 router local2.info chat[1438]: expect (CONNECT)
Feb 22 10:41:00 router local2.info chat[1438]: ^M
Feb 22 10:41:00 router local2.info chat[1438]: ATD*99***1#^M^M
Feb 22 10:41:00 router local2.info chat[1438]: CONNECT
Feb 22 10:41:00 router local2.info chat[1438]:  -- got it
Feb 22 10:41:00 router local2.info chat[1438]: send ( ^M)
Feb 22 10:41:01 router daemon.info pppd[1422]: Serial connection established.
Feb 22 10:41:01 router daemon.debug pppd[1422]: using channel 1
Feb 22 10:41:01 router daemon.notice pppd[1422]: Connect: 3g-wan &lt;--&gt; /dev/ttyUSB0
Feb 22 10:41:02 router daemon.debug pppd[1422]: sent [LCP ConfReq id=0x1 &lt;asyncmap 0x0&gt; &lt;magic 0x9309fe6d&gt;]
Feb 22 10:41:02 router daemon.debug pppd[1422]: rcvd [LCP ConfReq id=0x0 &lt;asyncmap 0x0&gt; &lt;auth chap MD5&gt; &lt;magic 0xe0e636&gt; &lt;pcomp&gt; &lt;accomp&gt;]
Feb 22 10:41:02 router daemon.debug pppd[1422]: sent [LCP ConfRej id=0x0 &lt;pcomp&gt; &lt;accomp&gt;]
Feb 22 10:41:02 router daemon.debug pppd[1422]: rcvd [LCP ConfAck id=0x1 &lt;asyncmap 0x0&gt; &lt;magic 0x9309fe6d&gt;]
Feb 22 10:41:02 router daemon.debug pppd[1422]: rcvd [LCP ConfReq id=0x1 &lt;asyncmap 0x0&gt; &lt;auth chap MD5&gt; &lt;magic 0xe0e636&gt;]
Feb 22 10:41:02 router daemon.debug pppd[1422]: sent [LCP ConfAck id=0x1 &lt;asyncmap 0x0&gt; &lt;auth chap MD5&gt; &lt;magic 0xe0e636&gt;]
Feb 22 10:41:02 router daemon.debug pppd[1422]: sent [LCP EchoReq id=0x0 magic=0x9309fe6d]
Feb 22 10:41:02 router daemon.debug pppd[1422]: rcvd [LCP DiscReq id=0x2 magic=0xe0e636]
Feb 22 10:41:02 router daemon.debug pppd[1422]: rcvd [CHAP Challenge id=0x1 &lt;1eb8bf0c1ac0d0fea86df43ad44e4b85&gt;, name = &quot;UMTS_CHAP_SRVR&quot;]
Feb 22 10:41:02 router daemon.debug pppd[1422]: sent [CHAP Response id=0x1 &lt;ca7ff7e70d6ebb9a4ab6ebbb0b29d991&gt;, name = &quot;xxx&quot;]
Feb 22 10:41:02 router daemon.debug pppd[1422]: rcvd [LCP EchoRep id=0x0 magic=0xe0e636 93 09 fe 6d]
Feb 22 10:41:02 router daemon.debug pppd[1422]: rcvd [CHAP Success id=0x1 &quot;&quot;]
Feb 22 10:41:02 router daemon.info pppd[1422]: CHAP authentication succeeded
Feb 22 10:41:02 router daemon.notice pppd[1422]: CHAP authentication succeeded
Feb 22 10:41:02 router daemon.debug pppd[1422]: sent [IPCP ConfReq id=0x1 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 0.0.0.0&gt; &lt;ms-dns3 0.0.0.0&gt;]
Feb 22 10:41:03 router daemon.debug pppd[1422]: sent [LCP EchoReq id=0x1 magic=0x9309fe6d]
Feb 22 10:41:03 router daemon.debug pppd[1422]: rcvd [LCP EchoRep id=0x1 magic=0xe0e636 93 09 fe 6d]
Feb 22 10:41:03 router daemon.debug pppd[1422]: rcvd [IPCP ConfNak id=0x1 &lt;ms-dns1 10.11.12.13&gt; &lt;ms-dns3 10.11.12.14&gt; &lt;ms-wins 10.11.12.13&gt; &lt;ms-wins 10.11.12.14&gt;]
Feb 22 10:41:03 router daemon.debug pppd[1422]: sent [IPCP ConfReq id=0x2 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 10.11.12.13&gt; &lt;ms-dns3 10.11.12.14&gt;]
Feb 22 10:41:04 router daemon.debug pppd[1422]: sent [LCP EchoReq id=0x2 magic=0x9309fe6d]
Feb 22 10:41:04 router daemon.debug pppd[1422]: rcvd [LCP EchoRep id=0x2 magic=0xe0e636 93 09 fe 6d]
Feb 22 10:41:04 router daemon.debug pppd[1422]: rcvd [IPCP ConfNak id=0x2 &lt;ms-dns1 10.11.12.13&gt; &lt;ms-dns3 10.11.12.14&gt; &lt;ms-wins 10.11.12.13&gt; &lt;ms-wins 10.11.12.14&gt;]
Feb 22 10:41:04 router daemon.debug pppd[1422]: sent [IPCP ConfReq id=0x3 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 10.11.12.13&gt; &lt;ms-dns3 10.11.12.14&gt;]
Feb 22 10:41:04 router daemon.debug pppd[1422]: rcvd [IPCP ConfReq id=0x0]
Feb 22 10:41:04 router daemon.debug pppd[1422]: sent [IPCP ConfNak id=0x0 &lt;addr 10.112.112.112&gt;]
Feb 22 10:41:04 router daemon.debug pppd[1422]: rcvd [IPCP ConfNak id=0x3 &lt;addr 46.179.185.45&gt; &lt;ms-dns1 81.169.60.107&gt; &lt;ms-dns3 81.169.60.107&gt;]
Feb 22 10:41:04 router daemon.debug pppd[1422]: sent [IPCP ConfReq id=0x4 &lt;addr 46.179.185.45&gt; &lt;ms-dns1 81.169.60.107&gt; &lt;ms-dns3 81.169.60.107&gt;]
Feb 22 10:41:04 router daemon.debug pppd[1422]: rcvd [IPCP ConfAck id=0x4 &lt;addr 46.179.185.45&gt; &lt;ms-dns1 81.169.60.107&gt; &lt;ms-dns3 81.169.60.107&gt;]
Feb 22 10:41:05 router daemon.debug pppd[1422]: sent [LCP EchoReq id=0x3 magic=0x9309fe6d]
Feb 22 10:41:05 router daemon.debug pppd[1422]: rcvd [LCP EchoRep id=0x3 magic=0xe0e636 93 09 fe 6d]
Feb 22 10:41:05 router daemon.debug pppd[1422]: rcvd [IPCP ConfReq id=0x1]
Feb 22 10:41:05 router daemon.debug pppd[1422]: sent [IPCP ConfAck id=0x1]
Feb 22 10:41:05 router daemon.warn pppd[1422]: Local IP address changed to 46.179.185.45
Feb 22 10:41:06 router daemon.info pppd[1422]: Open UDP 46.179.185.45:-3232 -&gt; 1.1.1.1:53
Feb 22 10:41:06 router daemon.debug pppd[1422]: sent [IP data] 45 00 00 44 00 00 40 00 ...
Feb 22 10:41:06 router daemon.debug pppd[1422]: Script /etc/ppp/ip-up started (pid 1445)
Feb 22 10:41:06 router user.notice ifup: Enabling Router Solicitations on wan (3g-wan)
Feb 22 10:41:07 router daemon.debug pppd[1422]: Script /etc/ppp/ip-up finished (pid 1445), status = 0x1
Feb 22 10:41:07 router user.info firewall: adding wan (3g-wan) to zone wan
Feb 22 10:41:08 router daemon.info dnsmasq[1391]: reading /tmp/resolv.conf.auto
Feb 22 10:41:08 router daemon.info dnsmasq[1391]: using nameserver 81.169.60.107#53
Feb 22 10:41:08 router daemon.info dnsmasq[1391]: using local addresses only for domain lux
Feb 22 10:41:18 router daemon.info pppd[1422]: No response to 5 echo-requests
Feb 22 10:41:18 router daemon.notice pppd[1422]: Serial link appears to be disconnected.
Feb 22 10:41:18 router daemon.info pppd[1422]: Connect time 0.2 minutes.
Feb 22 10:41:18 router daemon.info pppd[1422]: Sent 2192 bytes, received 4431 bytes.
Feb 22 10:41:18 router daemon.debug pppd[1422]: Script /etc/ppp/ip-down started (pid 1828)
Feb 22 10:41:18 router daemon.debug pppd[1422]: sent [LCP TermReq id=0x2 &quot;Peer not responding&quot;]
Feb 22 10:41:18 router user.info firewall: removing wan (3g-wan) from zone wan
Feb 22 10:41:19 router daemon.debug pppd[1422]: Script /etc/ppp/ip-down finished (pid 1828), status = 0x1
Feb 22 10:41:21 router daemon.debug pppd[1422]: sent [LCP TermReq id=0x3 &quot;Peer not responding&quot;]
Feb 22 10:41:24 router daemon.notice pppd[1422]: Connection terminated.</code></pre></div><p>It is always this error message &quot;No response to 5 echo-requests&quot; which pops up and terminates my connection directly. Very seldomly, the connection is established for a bit longer (a couple of minutes), but breaks again after some traffic is going over the wan connection. The error message then is LCP terminated by peer (unfortunately. I cannot currently reproduce that error message for copy-paste here).</p><p>Does anybody have an idea what I could do to prevent the premature dropping of the connection? I already used the pppd option &quot;noipdefault&quot; which was recently discussed. But as you see to no avail.</p><p>Thanks to all of you who bother to have a look at this topic!</p><p>Jens</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158636">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						25 Feb 2012, 10:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jfischer wrote:</cite><blockquote><div class="codebox"><pre><code>Feb 22 10:41:18 router daemon.info pppd[1422]: No response to 5 echo-requests
Feb 22 10:41:18 router daemon.notice pppd[1422]: Serial link appears to be disconnected.</code></pre></div></blockquote></div><p>Add,<br /></p><div class="codebox"><pre><code>    option &#039;keepalive&#039; &#039;10&#039;</code></pre></div><p>or modify &quot;lcp-echo-failure&quot; in /etc/ppp/options. Default to 5. Make it 10 or more.</p><p><a href="http://linux.die.net/man/8/pppd">pppd(8): Point-to-Point Protocol Daemon - Linux man page</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158644">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">jfischer</div>
					<div class="post-datetime">
						25 Feb 2012, 12:46					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the reply,</p><p>Did that, the only result seems to be that it now says (the router stays connected a bit longer):</p><div class="codebox"><pre><code>Feb 22 10:45:12 router daemon.info pppd[1352]: No response to 10 echo-requests.</code></pre></div><p>For the rest, we have:</p><div class="codebox"><pre><code>Feb 22 10:43:24 router daemon.notice pppd[1352]: pppd 2.4.4 started by root, uid 0
Feb 22 10:43:24 router daemon.info pppd[1352]: Using interface 3g-wan
Feb 22 10:43:24 router daemon.notice pppd[1352]: local  IP address 10.64.64.64
Feb 22 10:43:24 router daemon.notice pppd[1352]: remote IP address 10.112.112.112
Feb 22 10:44:09 router daemon.info pppd[1352]: Starting link
Feb 22 10:44:10 router local2.info chat[1368]: abort on (BUSY)
Feb 22 10:44:10 router local2.info chat[1368]: abort on (NO CARRIER)
Feb 22 10:44:10 router local2.info chat[1368]: abort on (ERROR)
Feb 22 10:44:10 router local2.info chat[1368]: report (CONNECT)
Feb 22 10:44:10 router local2.info chat[1368]: timeout set to 10 seconds
Feb 22 10:44:10 router local2.info chat[1368]: send (AT&amp;F^M)
Feb 22 10:44:10 router local2.info chat[1368]: expect (OK)
Feb 22 10:44:10 router local2.info chat[1368]: AT&amp;F^M^M
Feb 22 10:44:10 router local2.info chat[1368]: OK
Feb 22 10:44:10 router local2.info chat[1368]:  -- got it
Feb 22 10:44:10 router local2.info chat[1368]: send (ATE1^M)
Feb 22 10:44:10 router local2.info chat[1368]: expect (OK)
Feb 22 10:44:10 router local2.info chat[1368]: ^M
Feb 22 10:44:10 router local2.info chat[1368]: ATE1^M^M
Feb 22 10:44:10 router local2.info chat[1368]: OK
Feb 22 10:44:10 router local2.info chat[1368]:  -- got it
Feb 22 10:44:10 router local2.info chat[1368]: send (AT+CGDCONT=1,&quot;IP&quot;,&quot;xxx&quot;^M)
Feb 22 10:44:10 router local2.info chat[1368]: timeout set to 30 seconds
Feb 22 10:44:10 router local2.info chat[1368]: expect (OK)
Feb 22 10:44:10 router local2.info chat[1368]: ^M
Feb 22 10:44:10 router local2.info chat[1368]: AT+CGDCONT=1,&quot;IP&quot;,&quot;xxx&quot;^M^M
Feb 22 10:44:10 router local2.info chat[1368]: OK
Feb 22 10:44:10 router local2.info chat[1368]:  -- got it
Feb 22 10:44:10 router local2.info chat[1368]: send (ATD*99***1#^M)
Feb 22 10:44:11 router local2.info chat[1368]: expect (CONNECT)
Feb 22 10:44:11 router local2.info chat[1368]: ^M
Feb 22 10:44:11 router local2.info chat[1368]: ATD*99***1#^M^M
Feb 22 10:44:11 router local2.info chat[1368]: CONNECT
Feb 22 10:44:11 router local2.info chat[1368]:  -- got it
Feb 22 10:44:11 router local2.info chat[1368]: send ( ^M)
Feb 22 10:44:11 router daemon.info pppd[1352]: Serial connection established.
Feb 22 10:44:11 router daemon.debug pppd[1352]: using channel 1
Feb 22 10:44:11 router daemon.notice pppd[1352]: Connect: 3g-wan &lt;--&gt; /dev/ttyUSB0
Feb 22 10:44:12 router daemon.debug pppd[1352]: sent [LCP ConfReq id=0x1 &lt;asyncmap 0x0&gt; &lt;magic 0x21634b50&gt;]
Feb 22 10:44:12 router daemon.debug pppd[1352]: rcvd [LCP ConfReq id=0x0 &lt;asyncmap 0x0&gt; &lt;auth chap MD5&gt; &lt;magic 0xe10d10&gt; &lt;pcomp&gt; &lt;accomp&gt;]
Feb 22 10:44:12 router daemon.debug pppd[1352]: sent [LCP ConfRej id=0x0 &lt;pcomp&gt; &lt;accomp&gt;]
Feb 22 10:44:12 router daemon.debug pppd[1352]: rcvd [LCP ConfAck id=0x1 &lt;asyncmap 0x0&gt; &lt;magic 0x21634b50&gt;]
Feb 22 10:44:12 router daemon.debug pppd[1352]: rcvd [LCP ConfReq id=0x1 &lt;asyncmap 0x0&gt; &lt;auth chap MD5&gt; &lt;magic 0xe10d10&gt;]
Feb 22 10:44:12 router daemon.debug pppd[1352]: sent [LCP ConfAck id=0x1 &lt;asyncmap 0x0&gt; &lt;auth chap MD5&gt; &lt;magic 0xe10d10&gt;]
Feb 22 10:44:12 router daemon.debug pppd[1352]: sent [LCP EchoReq id=0x0 magic=0x21634b50]
Feb 22 10:44:12 router daemon.debug pppd[1352]: rcvd [LCP DiscReq id=0x2 magic=0xe10d10]
Feb 22 10:44:12 router daemon.debug pppd[1352]: rcvd [CHAP Challenge id=0x1 &lt;1eb8bf0c1ac0d0fea86df43ad44e4b85&gt;, name = &quot;UMTS_CHAP_SRVR&quot;]
Feb 22 10:44:12 router daemon.debug pppd[1352]: sent [CHAP Response id=0x1 &lt;ca7ff7e70d6ebb9a4ab6ebbb0b29d991&gt;, name = &quot;xxx&quot;]
Feb 22 10:44:12 router daemon.debug pppd[1352]: rcvd [LCP EchoRep id=0x0 magic=0xe10d10 21 63 4b 50]
Feb 22 10:44:12 router daemon.debug pppd[1352]: rcvd [CHAP Success id=0x1 &quot;&quot;]
Feb 22 10:44:12 router daemon.info pppd[1352]: CHAP authentication succeeded
Feb 22 10:44:12 router daemon.notice pppd[1352]: CHAP authentication succeeded
Feb 22 10:44:12 router daemon.debug pppd[1352]: sent [IPCP ConfReq id=0x1 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 0.0.0.0&gt; &lt;ms-dns3 0.0.0.0&gt;]
Feb 22 10:44:13 router daemon.debug pppd[1352]: rcvd [IPCP ConfNak id=0x1 &lt;ms-dns1 10.11.12.13&gt; &lt;ms-dns3 10.11.12.14&gt; &lt;ms-wins 10.11.12.13&gt; &lt;ms-wins 10.11.12.14&gt;]
Feb 22 10:44:13 router daemon.debug pppd[1352]: sent [IPCP ConfReq id=0x2 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 10.11.12.13&gt; &lt;ms-dns3 10.11.12.14&gt;]
Feb 22 10:44:14 router daemon.debug pppd[1352]: rcvd [IPCP ConfNak id=0x2 &lt;ms-dns1 10.11.12.13&gt; &lt;ms-dns3 10.11.12.14&gt; &lt;ms-wins 10.11.12.13&gt; &lt;ms-wins 10.11.12.14&gt;]
Feb 22 10:44:14 router daemon.debug pppd[1352]: sent [IPCP ConfReq id=0x3 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 10.11.12.13&gt; &lt;ms-dns3 10.11.12.14&gt;]
Feb 22 10:44:14 router daemon.debug pppd[1352]: rcvd [IPCP ConfReq id=0x0]
Feb 22 10:44:14 router daemon.debug pppd[1352]: sent [IPCP ConfNak id=0x0 &lt;addr 10.112.112.112&gt;]
Feb 22 10:44:14 router daemon.debug pppd[1352]: rcvd [IPCP ConfNak id=0x3 &lt;addr 178.144.164.70&gt; &lt;ms-dns1 81.169.60.107&gt; &lt;ms-dns3 81.169.60.107&gt;]
Feb 22 10:44:14 router daemon.debug pppd[1352]: sent [IPCP ConfReq id=0x4 &lt;addr 178.144.164.70&gt; &lt;ms-dns1 81.169.60.107&gt; &lt;ms-dns3 81.169.60.107&gt;]
Feb 22 10:44:14 router daemon.debug pppd[1352]: rcvd [IPCP ConfAck id=0x4 &lt;addr 178.144.164.70&gt; &lt;ms-dns1 81.169.60.107&gt; &lt;ms-dns3 81.169.60.107&gt;]
Feb 22 10:44:15 router daemon.debug pppd[1352]: rcvd [IPCP ConfReq id=0x1]
Feb 22 10:44:15 router daemon.debug pppd[1352]: sent [IPCP ConfAck id=0x1]
Feb 22 10:44:15 router daemon.warn pppd[1352]: Local IP address changed to 178.144.164.70
Feb 22 10:44:16 router daemon.info pppd[1352]: Open UDP 178.144.164.70:-15761 -&gt; 1.1.1.1:53
Feb 22 10:44:16 router daemon.debug pppd[1352]: sent [IP data] 45 00 00 44 00 00 40 00 ...
Feb 22 10:44:16 router daemon.debug pppd[1352]: Script /etc/ppp/ip-up started (pid 1375)
Feb 22 10:44:17 router user.notice ifup: Enabling Router Solicitations on wan (3g-wan)
Feb 22 10:44:17 router daemon.debug pppd[1352]: Script /etc/ppp/ip-up finished (pid 1375), status = 0x1
Feb 22 10:44:17 router user.info firewall: adding wan (3g-wan) to zone wan
Feb 22 10:44:18 router daemon.info dnsmasq[1321]: reading /tmp/resolv.conf.auto
Feb 22 10:44:18 router daemon.info dnsmasq[1321]: using nameserver 81.169.60.107#53
Feb 22 10:44:18 router daemon.info dnsmasq[1321]: using local addresses only for domain lux
Feb 22 10:45:12 router daemon.info pppd[1352]: No response to 10 echo-requests
Feb 22 10:45:12 router daemon.notice pppd[1352]: Serial link appears to be disconnected.
Feb 22 10:45:12 router daemon.info pppd[1352]: Connect time 1.0 minutes.
Feb 22 10:45:12 router daemon.info pppd[1352]: Sent 1692 bytes, received 3671 bytes.
Feb 22 10:45:12 router daemon.debug pppd[1352]: Script /etc/ppp/ip-down started (pid 1758)
Feb 22 10:45:12 router daemon.debug pppd[1352]: sent [LCP TermReq id=0x2 &quot;Peer not responding&quot;]
Feb 22 10:45:12 router user.info firewall: removing wan (3g-wan) from zone wan
Feb 22 10:45:13 router daemon.debug pppd[1352]: Script /etc/ppp/ip-down finished (pid 1758), status = 0x1
Feb 22 10:45:15 router daemon.debug pppd[1352]: sent [LCP TermReq id=0x3 &quot;Peer not responding&quot;]
Feb 22 10:45:18 router daemon.notice pppd[1352]: Connection terminated.</code></pre></div><p>Best regards,<br />Jens</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158649">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						25 Feb 2012, 13:06					</div>
				</div>
				<div class="post-content content">
					<p>Try </p><div class="codebox"><pre><code>option &#039;keepalive&#039; &#039;0&#039;</code></pre></div><p>then.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158651">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						25 Feb 2012, 13:22					</div>
				</div>
				<div class="post-content content">
					<p>Remove,<br /></p><div class="quotebox"><cite>jfischer wrote:</cite><blockquote><div class="codebox"><pre><code>    option &#039;demand&#039; &#039;600&#039;</code></pre></div></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158697">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">jfischer</div>
					<div class="post-datetime">
						25 Feb 2012, 22:52					</div>
				</div>
				<div class="post-content content">
					<p>Thanks again for the reply,</p><p>I set keepalive to 0 (both in /etc/config/network and for the sake of safety also in /etc/ppp/options) and also demand to 0. That didn&#039;t help (I am only copying the relevant part, I hope):</p><div class="codebox"><pre><code>Feb 22 10:43:58 router daemon.info pppd[1343]: Serial connection established.
Feb 22 10:43:58 router daemon.debug pppd[1343]: using channel 1
Feb 22 10:43:58 router daemon.info pppd[1343]: Using interface 3g-wan
Feb 22 10:43:58 router daemon.notice pppd[1343]: Connect: 3g-wan &lt;--&gt; /dev/ttyUSB0
Feb 22 10:43:59 router daemon.debug pppd[1343]: sent [LCP ConfReq id=0x1 &lt;asyncmap 0x0&gt; &lt;magic 0x7df11dbb&gt;]
Feb 22 10:43:59 router daemon.debug pppd[1343]: rcvd [LCP ConfReq id=0x0 &lt;asyncmap 0x0&gt; &lt;auth chap MD5&gt; &lt;magic 0xe0dc96&gt; &lt;pcomp&gt; &lt;accomp&gt;]
Feb 22 10:43:59 router daemon.debug pppd[1343]: sent [LCP ConfRej id=0x0 &lt;pcomp&gt; &lt;accomp&gt;]
Feb 22 10:43:59 router daemon.debug pppd[1343]: rcvd [LCP ConfAck id=0x1 &lt;asyncmap 0x0&gt; &lt;magic 0x7df11dbb&gt;]
Feb 22 10:43:59 router daemon.debug pppd[1343]: rcvd [LCP ConfReq id=0x1 &lt;asyncmap 0x0&gt; &lt;auth chap MD5&gt; &lt;magic 0xe0dc96&gt;]
Feb 22 10:43:59 router daemon.debug pppd[1343]: sent [LCP ConfAck id=0x1 &lt;asyncmap 0x0&gt; &lt;auth chap MD5&gt; &lt;magic 0xe0dc96&gt;]
Feb 22 10:43:59 router daemon.debug pppd[1343]: sent [LCP EchoReq id=0x0 magic=0x7df11dbb]
Feb 22 10:43:59 router daemon.debug pppd[1343]: rcvd [LCP DiscReq id=0x2 magic=0xe0dc96]
Feb 22 10:43:59 router daemon.debug pppd[1343]: rcvd [CHAP Challenge id=0x1 &lt;1eb8bf0c1ac0d0fea86df43ad44e4b85&gt;, name = &quot;UMTS_CHAP_SRVR&quot;]
Feb 22 10:43:59 router daemon.debug pppd[1343]: sent [CHAP Response id=0x1 &lt;ca7ff7e70d6ebb9a4ab6ebbb0b29d991&gt;, name = &quot;xxx&quot;]
Feb 22 10:43:59 router daemon.debug pppd[1343]: rcvd [LCP EchoRep id=0x0 magic=0xe0dc96 7d f1 1d bb]
Feb 22 10:43:59 router daemon.debug pppd[1343]: rcvd [CHAP Success id=0x1 &quot;&quot;]
Feb 22 10:43:59 router daemon.info pppd[1343]: CHAP authentication succeeded
Feb 22 10:43:59 router daemon.notice pppd[1343]: CHAP authentication succeeded
Feb 22 10:43:59 router daemon.debug pppd[1343]: sent [IPCP ConfReq id=0x1 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 0.0.0.0&gt; &lt;ms-dns3 0.0.0.0&gt;]
Feb 22 10:44:02 router daemon.debug pppd[1343]: sent [IPCP ConfReq id=0x1 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 0.0.0.0&gt; &lt;ms-dns3 0.0.0.0&gt;]
Feb 22 10:44:04 router daemon.debug pppd[1343]: sent [LCP EchoReq id=0x1 magic=0x7df11dbb]
Feb 22 10:44:05 router daemon.debug pppd[1343]: sent [IPCP ConfReq id=0x1 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 0.0.0.0&gt; &lt;ms-dns3 0.0.0.0&gt;]
Feb 22 10:44:08 router daemon.debug pppd[1343]: sent [IPCP ConfReq id=0x1 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 0.0.0.0&gt; &lt;ms-dns3 0.0.0.0&gt;]
Feb 22 10:44:09 router daemon.debug pppd[1343]: sent [LCP EchoReq id=0x2 magic=0x7df11dbb]
Feb 22 10:44:11 router daemon.debug pppd[1343]: sent [IPCP ConfReq id=0x1 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 0.0.0.0&gt; &lt;ms-dns3 0.0.0.0&gt;]
Feb 22 10:44:14 router daemon.debug pppd[1343]: sent [LCP EchoReq id=0x3 magic=0x7df11dbb]
Feb 22 10:44:14 router daemon.debug pppd[1343]: sent [IPCP ConfReq id=0x1 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 0.0.0.0&gt; &lt;ms-dns3 0.0.0.0&gt;]
Feb 22 10:44:17 router daemon.debug pppd[1343]: sent [IPCP ConfReq id=0x1 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 0.0.0.0&gt; &lt;ms-dns3 0.0.0.0&gt;]
Feb 22 10:44:19 router daemon.debug pppd[1343]: sent [LCP EchoReq id=0x4 magic=0x7df11dbb]
Feb 22 10:44:20 router daemon.debug pppd[1343]: sent [IPCP ConfReq id=0x1 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 0.0.0.0&gt; &lt;ms-dns3 0.0.0.0&gt;]
Feb 22 10:44:23 router daemon.debug pppd[1343]: sent [IPCP ConfReq id=0x1 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 0.0.0.0&gt; &lt;ms-dns3 0.0.0.0&gt;]
Feb 22 10:44:24 router daemon.debug pppd[1343]: sent [LCP EchoReq id=0x5 magic=0x7df11dbb]
Feb 22 10:44:26 router daemon.debug pppd[1343]: sent [IPCP ConfReq id=0x1 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 0.0.0.0&gt; &lt;ms-dns3 0.0.0.0&gt;]
Feb 22 10:44:29 router daemon.debug pppd[1343]: sent [LCP EchoReq id=0x6 magic=0x7df11dbb]
Feb 22 10:44:29 router daemon.warn pppd[1343]: IPCP: timeout sending Config-Requests
Feb 22 10:44:29 router daemon.debug pppd[1343]: sent [LCP TermReq id=0x2 &quot;No network protocols running&quot;]
Feb 22 10:44:32 router daemon.debug pppd[1343]: sent [LCP TermReq id=0x3 &quot;No network protocols running&quot;]
Feb 22 10:44:35 router daemon.notice pppd[1343]: Connection terminated.</code></pre></div><p>What could that mean? I presume the provider has no way of knowing that I am using a router (which I am not supposed to) - in the end OpenWRT should just behave like any Linux-box.</p><p>Any help?</p><p>Jens</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158722">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						26 Feb 2012, 09:31					</div>
				</div>
				<div class="post-content content">
					<p>&quot;Remove&quot;, not set it to 0.</p><p>Before you lost the connection, execute<br /></p><div class="codebox"><pre><code>for x in $(pidof pppd); do tr &#039;\0&#039; &#039; &#039; &lt; /proc/$x/cmdline; echo; done</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158726">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">jfischer</div>
					<div class="post-datetime">
						26 Feb 2012, 09:44					</div>
				</div>
				<div class="post-content content">
					<p>Thanks fyi for the support,</p><p>Result of this is:</p><div class="codebox"><pre><code>/usr/sbin/pppd noaccomp nopcomp novj nobsdcomp noauth lock crtscts 115200 /dev/ttyUSB0 lcp-echo-interval 5 lcp-echo-failure 0 persist usepeerdns defaultroute replacedefaultroute user xxx password xxx ipparam wan ifname 3g-wan connect USE_APN=xxx /usr/sbin/chat -t5 -v -E -f /etc/chatscripts/3g.chat debug noipdefault nodetach</code></pre></div><div class="codebox"><pre><code>Feb 22 10:43:57 router daemon.info pppd[1393]: Serial connection established.
Feb 22 10:43:57 router daemon.debug pppd[1393]: using channel 1
Feb 22 10:43:57 router daemon.info pppd[1393]: Using interface 3g-wan
Feb 22 10:43:57 router daemon.notice pppd[1393]: Connect: 3g-wan &lt;--&gt; /dev/ttyUSB0
Feb 22 10:43:58 router daemon.debug pppd[1393]: sent [LCP ConfReq id=0x1 &lt;asyncmap 0x0&gt; &lt;magic 0xa661c002&gt;]
Feb 22 10:43:58 router daemon.debug pppd[1393]: rcvd [LCP ConfReq id=0x0 &lt;asyncmap 0x0&gt; &lt;auth chap MD5&gt; &lt;magic 0xf4efc7&gt; &lt;pcomp&gt; &lt;accomp&gt;]
Feb 22 10:43:58 router daemon.debug pppd[1393]: sent [LCP ConfRej id=0x0 &lt;pcomp&gt; &lt;accomp&gt;]
Feb 22 10:43:58 router daemon.debug pppd[1393]: rcvd [LCP ConfAck id=0x1 &lt;asyncmap 0x0&gt; &lt;magic 0xa661c002&gt;]
Feb 22 10:43:58 router daemon.debug pppd[1393]: rcvd [LCP ConfReq id=0x1 &lt;asyncmap 0x0&gt; &lt;auth chap MD5&gt; &lt;magic 0xf4efc7&gt;]
Feb 22 10:43:58 router daemon.debug pppd[1393]: sent [LCP ConfAck id=0x1 &lt;asyncmap 0x0&gt; &lt;auth chap MD5&gt; &lt;magic 0xf4efc7&gt;]
Feb 22 10:43:58 router daemon.debug pppd[1393]: sent [LCP EchoReq id=0x0 magic=0xa661c002]
Feb 22 10:43:58 router daemon.debug pppd[1393]: rcvd [LCP DiscReq id=0x2 magic=0xf4efc7]
Feb 22 10:43:58 router daemon.debug pppd[1393]: rcvd [CHAP Challenge id=0x1 &lt;0aad6d24347e7b9c2ed89a6f40ede61e&gt;, name = &quot;UMTS_CHAP_SRVR&quot;]
Feb 22 10:43:58 router daemon.debug pppd[1393]: sent [CHAP Response id=0x1 &lt;1ba965feb9bf455ddcada43f29309784&gt;, name = &quot;xxx&quot;]
Feb 22 10:43:58 router daemon.debug pppd[1393]: rcvd [LCP EchoRep id=0x0 magic=0xf4efc7 a6 61 c0 02]
Feb 22 10:43:58 router daemon.debug pppd[1393]: rcvd [CHAP Success id=0x1 &quot;&quot;]
Feb 22 10:43:58 router daemon.info pppd[1393]: CHAP authentication succeeded
Feb 22 10:43:58 router daemon.notice pppd[1393]: CHAP authentication succeeded
Feb 22 10:43:58 router daemon.debug pppd[1393]: sent [IPCP ConfReq id=0x1 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 0.0.0.0&gt; &lt;ms-dns3 0.0.0.0&gt;]
Feb 22 10:43:59 router daemon.debug pppd[1393]: rcvd [IPCP ConfNak id=0x1 &lt;ms-dns1 10.11.12.13&gt; &lt;ms-dns3 10.11.12.14&gt; &lt;ms-wins 10.11.12.13&gt; &lt;ms-wins 10.11.12.14&gt;]
Feb 22 10:43:59 router daemon.debug pppd[1393]: sent [IPCP ConfReq id=0x2 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 10.11.12.13&gt; &lt;ms-dns3 10.11.12.14&gt;]
Feb 22 10:44:00 router daemon.debug pppd[1393]: rcvd [IPCP ConfNak id=0x2 &lt;ms-dns1 10.11.12.13&gt; &lt;ms-dns3 10.11.12.14&gt; &lt;ms-wins 10.11.12.13&gt; &lt;ms-wins 10.11.12.14&gt;]
Feb 22 10:44:00 router daemon.debug pppd[1393]: sent [IPCP ConfReq id=0x3 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 10.11.12.13&gt; &lt;ms-dns3 10.11.12.14&gt;]
Feb 22 10:44:02 router daemon.debug pppd[1393]: rcvd [IPCP ConfNak id=0x3 &lt;ms-dns1 10.11.12.13&gt; &lt;ms-dns3 10.11.12.14&gt; &lt;ms-wins 10.11.12.13&gt; &lt;ms-wins 10.11.12.14&gt;]
Feb 22 10:44:02 router daemon.debug pppd[1393]: sent [IPCP ConfReq id=0x4 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 10.11.12.13&gt; &lt;ms-dns3 10.11.12.14&gt;]
Feb 22 10:44:02 router daemon.debug pppd[1393]: rcvd [IPCP ConfReq id=0x0]
Feb 22 10:44:02 router daemon.debug pppd[1393]: sent [IPCP ConfNak id=0x0 &lt;addr 0.0.0.0&gt;]
Feb 22 10:44:02 router daemon.debug pppd[1393]: rcvd [IPCP ConfNak id=0x4 &lt;addr 188.5.134.19&gt; &lt;ms-dns1 81.169.62.171&gt; &lt;ms-dns3 81.169.62.171&gt;]
Feb 22 10:44:02 router daemon.debug pppd[1393]: sent [IPCP ConfReq id=0x5 &lt;addr 188.5.134.19&gt; &lt;ms-dns1 81.169.62.171&gt; &lt;ms-dns3 81.169.62.171&gt;]
Feb 22 10:44:02 router daemon.debug pppd[1393]: rcvd [IPCP ConfReq id=0x1]
Feb 22 10:44:02 router daemon.debug pppd[1393]: sent [IPCP ConfAck id=0x1]
Feb 22 10:44:02 router daemon.debug pppd[1393]: rcvd [IPCP ConfAck id=0x5 &lt;addr 188.5.134.19&gt; &lt;ms-dns1 81.169.62.171&gt; &lt;ms-dns3 81.169.62.171&gt;]
Feb 22 10:44:02 router daemon.warn pppd[1393]: Could not determine remote IP address: defaulting to 10.64.64.64
Feb 22 10:44:02 router daemon.notice pppd[1393]: local  IP address 188.5.134.19
Feb 22 10:44:02 router daemon.notice pppd[1393]: remote IP address 10.64.64.64
Feb 22 10:44:02 router daemon.notice pppd[1393]: primary   DNS address 81.169.62.171
Feb 22 10:44:02 router daemon.notice pppd[1393]: secondary DNS address 81.169.62.171
Feb 22 10:44:02 router daemon.debug pppd[1393]: Script /etc/ppp/ip-up started (pid 1473)
Feb 22 10:44:02 router user.notice ifup: Enabling Router Solicitations on wan (3g-wan)
Feb 22 10:44:03 router daemon.debug pppd[1393]: Script /etc/ppp/ip-up finished (pid 1473), status = 0x1
Feb 22 10:44:03 router user.info firewall: adding wan (3g-wan) to zone wan
Feb 22 10:44:04 router daemon.info dnsmasq[1408]: reading /tmp/resolv.conf.auto
Feb 22 10:44:04 router daemon.info dnsmasq[1408]: using nameserver 81.169.62.171#53
Feb 22 10:44:04 router daemon.info dnsmasq[1408]: using local addresses only for domain lux</code></pre></div><p>Both keepalive and demand are still set to 0.</p><p>Obviously, this looks already a bit better, but I cannot access the outside world (i.e. nothing opens in the webbrowser and a ping to openwrt.org results in bad address). I see that the DNS servers and the local IP address seem sensible, but the remote IP address doesn&#039;t (it&#039;s also the default gateway). Also, I note that the ms-dns1 and ms-dns2 values don&#039;t make any sense anymore (they are out of the 10.x.x.x range), whereas previously, they were transmitted to OK addresses.</p><p>Looking back at the very first and second clipping from my syslog which I posted above,&nbsp; could there be a problem with the following line?</p><div class="codebox"><pre><code>Feb 22 10:41:06 router daemon.info pppd[1422]: Open UDP 46.179.185.45:-3232 -&gt; 1.1.1.1:53</code></pre></div><p>It wouldn&#039;t surprise me that a connection from the local IP address to 1.1.1.1 at UDP port 53 cannot be opened.</p><p>Best regards,<br />Jens</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158747">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						26 Feb 2012, 13:49					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>/usr/sbin/pppd novj nobsdcomp noauth lock crtscts 115200 /dev/ttyUSB0 lcp-echo-interval 5 lcp-echo-failure 10 persist usepeerdns defaultroute replacedefaultroute user xxx password xxx ipparam wan ifname 3g-wan connect USE_APN=xxx /usr/sbin/chat -t5 -v -E -f /etc/chatscripts/3g.chat debug noipdefault nodetach</code></pre></div><p>Also try replacing &quot;AT&amp;F&quot; with &quot;ATZ&quot; in /etc/chatscripts/3g.chat.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p159251">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">jfischer</div>
					<div class="post-datetime">
						1 Mar 2012, 22:41					</div>
				</div>
				<div class="post-content content">
					<p>Hi there,</p><p>Have not yet tried the command posted by you above and the modification of the 3g.chat file.</p><p>I manage to establish a connection right now with lcp-echo-interval 5 and lcp-echo failure 10. The problem is that there seems to be a disconnect request from the counterpart:</p><div class="codebox"><pre><code>Mar  1 22:06:31 router daemon.debug pppd[1363]: rcvd [LCP TermReq id=0x3]
Mar  1 22:06:31 router daemon.info pppd[1363]: LCP terminated by peer
Mar  1 22:06:31 router daemon.info pppd[1363]: Connect time 2.8 minutes.
Mar  1 22:06:31 router daemon.info pppd[1363]: Sent 158429 bytes, received 5246902 bytes.
Mar  1 22:06:31 router daemon.debug pppd[1363]: Script /etc/ppp/ip-down started (pid 2076)
Mar  1 22:06:31 router daemon.debug pppd[1363]: sent [LCP TermAck id=0x3]
Mar  1 22:06:31 router daemon.info pppd[1363]: Hangup (SIGHUP)
Mar  1 22:06:31 router daemon.notice pppd[1363]: Modem hangup
Mar  1 22:06:31 router daemon.notice pppd[1363]: Connection terminated.
Mar  1 22:06:31 router user.info firewall: removing wan (3g-wan) from zone wan
Mar  1 22:06:32 router daemon.debug pppd[1363]: Script /etc/ppp/ip-down finished (pid 2076), status = 0x1</code></pre></div><p>Then, the router reconnects and stay online for shorter or longer timespans until another termination request is received, sometimes also with id=0x7.</p><p>Any hints? </p><p>Best regards,<br />Jens</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p159377">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">jfischer</div>
					<div class="post-datetime">
						2 Mar 2012, 21:55					</div>
				</div>
				<div class="post-content content">
					<p>So then,</p><p>Modified the 3g.chat file - that didn&#039;t help.</p><p>Then I tried the command line you posted when the connection was down again. I get a message that /usr/sbin/chat is an unknown option (probably for the pppd command). </p><p>The status currently is that the connection works as such and often stays alive for a couple of minutes (it was even live over the night) but that it disconnects very often, especially when the connection is used (surfing and downloading files and e-mails). I have the impression that the connection is broken when there is a certain load going over the line, especially when more than one computer are online. (There is no such problem when using the modem on my computer, I can download very large files.)</p><p>The messages in the syslog are always as in the clipping posted above, it&#039;s just the time for which the connection stays online which differs.</p><p>Could it be that it is really the provider which kicks me out? Can they determine that I am using the modem on a router (maybe because the NAT uses some weird ports?)?</p><p>It would be really great if you had any tips on what I can test further - as it is, I am completely stuck.</p><p>Thank you very much and best regards,<br />Jens</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p160456">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">jfischer</div>
					<div class="post-datetime">
						11 Mar 2012, 20:34					</div>
				</div>
				<div class="post-content content">
					<p>Does anybody still have hints?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p160501">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						12 Mar 2012, 07:37					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>/usr/sbin/pppd novj nobsdcomp noauth lock crtscts 115200 /dev/ttyUSB0 lcp-echo-interval 5 lcp-echo-failure 10 persist usepeerdns defaultroute replacedefaultroute user xxx password xxx ipparam wan ifname 3g-wan connect &quot;USE_APN=xxx /usr/sbin/chat -t5 -v -E -f /etc/chatscripts/3g.chat&quot; debug noipdefault nodetach</code></pre></div>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>