<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Wifi on DG834GT</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 10 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p187990">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">kev51773</div>
					<div class="post-datetime">
						5 Jan 2013, 22:19					</div>
				</div>
				<div class="post-content content">
					<p>I installed Backfire (10.03.1) following the instructions at <a href="http://wiki.openwrt.org/toh/netgear/dg834gt">http://wiki.openwrt.org/toh/netgear/dg834gt</a><br />I then added kmod-ath9k as per the same instructions.</p><p>I&#039;m stuck as to what to do next to get any kind of Wifi working. I&#039;ve tried various /etc/config/wireless examples from all over the net. I&#039;ve also tried running &#039;wifi detect &gt; /etc/config/wireless&#039; as suggested at <a href="http://wiki.openwrt.org/doc/howto/wireless.essentials">http://wiki.openwrt.org/doc/howto/wireless.essentials</a> This returns no output and as such /etc/config/wireless remains empty.</p><p>The furthest I can get by any means so far is &#039;Wireless is disabled or not associated&#039; on the Wifi page.</p><p>My aim is to use this router as a wireless bridge and then another spare DG834GT as an access point therby extending my wireless coverage without having to run ethernet cable everywhere. </p><p>Any suggestions welcome</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p188054">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">kev51773</div>
					<div class="post-datetime">
						6 Jan 2013, 16:31					</div>
				</div>
				<div class="post-content content">
					<p>Never mind, I figured it out. In case anyone&#039;s having the same issue all that was required was to install kmod-ath5k, which isn&#039;t in the opkg repo so I installed it like</p><p>opkg install <a href="http://downloads.openwrt.org/backfire/10.03.1/brcm63xx/packages/kmod-ath5k_2.6.32.27%2b2011-11-15-1_brcm63xx.ipk">http://downloads.openwrt.org/backfire/1 … cm63xx.ipk</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p198040">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">rumex</div>
					<div class="post-datetime">
						11 Apr 2013, 17:53					</div>
				</div>
				<div class="post-content content">
					<p>Hi <br />I am adding the kmod-ath9k.&nbsp; This has taken 2 hours.&nbsp; If I hit the enter key, the device echos the characters back after about 5 mins.&nbsp; Did your install of kmod-ath9k take this long?<br />R</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p198072">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						11 Apr 2013, 22:20					</div>
				</div>
				<div class="post-content content">
					<p>did you ran out of ram??</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p214667">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">22moose22</div>
					<div class="post-datetime">
						13 Oct 2013, 13:48					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I just wanted to thank kev51773 for giving me the right direction with download of the .ipk packages directly.<br />I did what Kev did, but it didn&#039;t work for me. However, I did persevere and found the additional steps made it work for me<br />using backfire 10.3.1. The stuff below took about 12hrs of trying and googling. Learnt something I can say !</p><p>So as per instructions on&nbsp; <a href="http://wiki.openwrt.org/toh/netgear/dg834gt,">http://wiki.openwrt.org/toh/netgear/dg834gt,</a> I attempted to follow these.<br />I did not configure a dual ethernet PC as this sounded too painful for me as I did not have the kit. <br />The above basically did not work for me. But performing the additional below steps worked.</p><p>STEPS<br />1. After getting backfire onto my DG-834GT, I set it to a static IP address via the gui. <br />&nbsp; &nbsp;Make sure the DNS setting using &quot;Use Custom DNS Servers&quot; or it will not resolve the backfire package repo server.<br />2. I turned off the modem DHCP server via the gui. Ie, this modem is intended to act like a wifi extender, where a wifi<br />&nbsp; &nbsp;connected client will get a DHCP IP address from the DHCP server taht is elsewhere on my ethernet cabled side of the modem.<br />3. I saved and applied then reboot. Takes about 4 mins.<br />4. After confirming that you can ping the DG-834GT, ssh into it.<br />5. On ssh console type, &quot;opkg update&quot;. This should be quite quick.<br />6. On ssh console, &quot;opkg install kmod-ath&quot;. This should be about 30secs.<br />7. On the wiki, the next step says, &quot;opkg install kmod-ath5k&quot;. Now this step takes ages and never works for me.<br />&nbsp; &nbsp;Reading Kev&#039;s input on this step, I am guessing it takes ages and fails because it fails to resolve the package <br />&nbsp; &nbsp;dependencies and therefore fails to pull all the required packages (.ipk) from the repo.<br />&nbsp; &nbsp;By watching the console post errors for dependency, I was able to deduce the dependency list manually.</p><p>&nbsp; &nbsp;So, at this point, don&#039;t issue &quot;opkg install kmod-ath5k&quot; yet, issue the following. All of the below steps are quite quick :-<br />&nbsp; &nbsp;&quot;<br />&nbsp; &nbsp;opkg install <a href="http://downloads.openwrt.org/backfire/10.03.1/brcm63xx/packages/kmod-ath5k_2.6.32.27+2011-11-15-1_brcm63xx.ipk">http://downloads.openwrt.org/backfire/1 … cm63xx.ipk</a>&nbsp; &nbsp; <br />&nbsp; &nbsp;&quot; <br />&nbsp; &nbsp;Above took about about 2 hours, then hung the modem. Ypu can confirm its busy via the following means :-<br />&nbsp; &nbsp;- You can ping it continuously, then it stops occasionally, but never stops entirely.<br />&nbsp; &nbsp;- the ssh session you have into becomes unresponsive, but never times out. Occasionaly processes a Cr/LF.<br />&nbsp; &nbsp;After about 2hours, the whole lot needed needed a full power cycle. Then I went straight to step 12.<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;Below not needed for me, but is noted here incase your modem needs it. This is what I did on a previous occasion.<br />&nbsp; &nbsp;But when I repeated these steps after a full clear, I tried to reduce the steps, and found the following was not needed.<br />&nbsp; &nbsp;It is shown here as the main open wrt wiki talks about the ath9k.</p><p>&nbsp; &nbsp;I dont know why you would need it at this point.<br />&nbsp; &nbsp;&quot;<br />&nbsp; &nbsp;opkg install <a href="http://downloads.openwrt.org/backfire/10.03.1/brcm63xx/packages/kmod-ath9k-common_2.6.32.27+2011-11-15-1_brcm63xx.ipk">http://downloads.openwrt.org/backfire/1 … cm63xx.ipk</a><br />&nbsp; &nbsp;opkg install <a href="http://downloads.openwrt.org/backfire/10.03.1/brcm63xx/packages/kmod-nls-base_2.6.32.27-1_brcm63xx.ipk">http://downloads.openwrt.org/backfire/1 … cm63xx.ipk</a> <br />&nbsp; &nbsp;opkg install <a href="http://downloads.openwrt.org/backfire/10.03.1/brcm63xx/packages/kmod-usb-core_2.6.32.27-1_brcm63xx.ipk">http://downloads.openwrt.org/backfire/1 … cm63xx.ipk</a><br />&nbsp; &nbsp;opkg install <a href="http://downloads.openwrt.org/backfire/10.03.1/brcm63xx/packages/kmod-ath9k-htc_2.6.32.27+2011-11-15-1_brcm63xx.ipk">http://downloads.openwrt.org/backfire/1 … cm63xx.ipk</a><br />&nbsp; &nbsp;opkg install <a href="http://downloads.openwrt.org/backfire/10.03.1/brcm63xx/packages/kmod-ath9k_2.6.32.27+2011-11-15-1_brcm63xx.ipk">http://downloads.openwrt.org/backfire/1 … cm63xx.ipk</a><br />&nbsp; &nbsp;&quot;&nbsp; &nbsp;</p><p>&nbsp; &nbsp;If you get an error like, cannot resolve or cannot find &quot;<a href="http://downloads.openwrt.org">http://downloads.openwrt.org</a>&quot;, try resolving the remote machine name <br />&nbsp; &nbsp;with &quot;wget <a href="http://downloads.openwrt.org">http://downloads.openwrt.org</a>&quot;. It should pull a index.html file. If it cannot, your DNS setting on the modem is not setup.<br />&nbsp; &nbsp;You can determine this, by using any windows machine on your subnet and typing &quot;ipconfig -all&quot;. It will show the DNS in there.<br />&nbsp; &nbsp;If you cannot do this, try replacing the above http machine name &quot;downloads.openwrt.org&quot; with its direct IP address &quot;78.24.191.177&quot;<br />&nbsp; &nbsp;ie. &quot;opkg install <a href="http://78.24.191.177/backfire/10.03.1/brcm63xx/packages/kmod-nls-base_2.6.32.27-1_brcm63xx.ipk\">http://78.24.191.177/backfire/10.03.1/brcm63xx/packages/kmod-nls-base_2.6.32.27-1_brcm63xx.ipk&quot;</a>&nbsp; <br />&nbsp; &nbsp;As this post I am writing could sit for years, the above machine name, may change its IP Address, so using the DNS is better.<br />8. Now, once the above packages (.ipk ) is all pulled down, there should be no errors. If there is an error, and it shows another <br />&nbsp; &nbsp;package name, locate it on the package repo link shown in the references section and pull it.<br />&nbsp; &nbsp;So, with no errors on the .ipk download, Now issue the step &quot;opkg install kmod-ath5k&quot;. This will now complete<br />&nbsp; &nbsp;reasonably quickly as the dependencies are all pre-downloaded.<br />9. This next bit, I am unclear as to if this made it work for me or not, so I did it anyway. This bit will complete quite quickly.<br />&nbsp; &nbsp;&quot;opkg install kmod-ath9k-common&quot;<br />&nbsp; &nbsp;&quot;opkg install kmod-ath9k&quot;<br />10. With all the above completing quite quickly, which is the sign its working, now reboot the modem, by typing &quot;reboot&quot;.<br />11. The forums then say use &quot;wifi detect&quot; and see if this produces any text. Then direct this to /etc/config/wireless. <br />&nbsp; &nbsp; This never does anything on my setup, even after I&nbsp; got wifi on the modem working. <br />&nbsp; &nbsp; I must still be missing a package. I will try to find out why.<br />12. The next bit is the key bit.<br />&nbsp; &nbsp; Log back in on the gui. Go to, &#039;Network, Wifi&#039;. Click on enable and Configure your wifi here.<br />&nbsp; &nbsp; If this is working, you should see the Channel Number being shown and the signal level.<br />&nbsp; &nbsp; Before, I got this working, this area was more or less default data. I could not enable anything.<br />&nbsp; &nbsp; But with the individual .ipk loaded and in the order of dependency, this worked for me.<br />&nbsp; &nbsp; One final part, the act of enabling WIFI via the gui, then configures text inside &quot;/etc/config/wireless&quot;.</p><p>&nbsp; &nbsp; The text that was in there is (modified) :-<br />&nbsp; &nbsp; config &#039;wifi-device&#039; &#039;radio0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; option &#039;type&#039; &#039;mac80211&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; option &#039;channel&#039; &#039;11&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; option &#039;macaddr&#039; &#039;00:c0:02:XX:XX:XX&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; option &#039;hwmode&#039; &#039;11g&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; option &#039;txpower&#039; &#039;27&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; option &#039;country&#039; &#039;US&#039;</p><p>&nbsp; &nbsp; config &#039;wifi-iface&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; option &#039;device&#039; &#039;radio0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; option &#039;network&#039; &#039;lan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; option &#039;mode&#039; &#039;ap&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; option &#039;ssid&#039; &#039;myssid&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; option &#039;encryption&#039; &#039;psk-mixed&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; option &#039;key&#039; &#039;mypassword&#039;</p><p>&nbsp; The above implies &quot;wifi detect&quot; should have been doing the same thing the &quot;enable&quot; button does. If I can<br />&nbsp; what script that button calls, thats the step to execute instead of &quot;wifi detect&quot; I am guessing.</p><p>&nbsp; &nbsp; <br />REF: The DG-834GT uses the broadcom 63xx chipset. All BRCM63xx packages are listed out here for backfire. <br />These can be loaded by using the technique.<br /><a href="http://downloads.openwrt.org/backfire/10.03.1/brcm63xx/">http://downloads.openwrt.org/backfire/10.03.1/brcm63xx/</a>&nbsp; &nbsp; <br />&nbsp; &nbsp; <br />Aside: <br />- I had a defunct Sky DG-834GT. To unlock the boot loader, use this <a href="http://www.jjclements.co.uk/2007/09/30/sky-router-dg834gt-unlock/">http://www.jjclements.co.uk/2007/09/30/ … gt-unlock/</a><br />&nbsp; I had to use a old XP laptop.<br />- After loading Backfire, the modem LEDs all go wierd except for power. This is likely that in the backfire bsp, the LEDs are not<br />&nbsp; configured for DG-834GT, or I have not setup or loaded something.<br />&nbsp; - The wifi led never lights up, even though I have wifi working. This should blink green on activity.<br />&nbsp; - The ethernet LEDs are amber, even though the ports are working. This should blink green on activity.<br />&nbsp; I subsequently found that there is a LED Setup option in the gui, on System, Led Configuration.<br />&nbsp; I played with that, confirmed it changed LED states, then hung my modem and put it into a crash loop.<br />&nbsp; (I want to find a good tutorial on getting this setup correctly).<br />&nbsp; The crash loop was fatal. I could not clear this LED setting out as it crashed before I can get back in over gui or SSH.<br />&nbsp; The reset button does not clear any open-wrt settings. This is a bit of a flaw, but maybe that is a build option not <br />&nbsp; yet coded into this great project <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />&nbsp; Reboot loop, what a pain !<br />&nbsp; I then could not wipe backfire using netgear tools. I then wasted another 2 hours trying to recover it.<br />&nbsp; All hope was lost. Until I tried the the 834PN rename trick cover in posted #56 and #116 in<br />&nbsp; <a href="http://www.jjclements.co.uk/2007/09/30/sky-router-dg834gt-unlock/">http://www.jjclements.co.uk/2007/09/30/ … gt-unlock/</a><br />&nbsp; It looks like the process or upgrading to open-wrt had changed the product ID string of my modem with the 834PN version.<br />&nbsp; I did these steps and like before not 100% sure what made he difference :-<br />&nbsp; - XP laptop.<br />&nbsp; - MS loopback driver installed. (doubt if this makes any difference, but forums talks about it, so did it)<br />&nbsp; - wifi present. (doubt if this makes any difference, but forums talks about it, so did it)<br />&nbsp; - ethernet cabled directly into modem, any ethernet port.<br />&nbsp; - Flipped modem into boot loader and flash download mode. Fast blinking of power and tick LED, using power on with paper clip for 10secs.<br />&nbsp; - copy firmware file for DG834PN ref: <a href="http://support.netgear.com/product/DG834PN">http://support.netgear.com/product/DG834PN</a><br />&nbsp; &nbsp; from netgear web site and into the same directory as the netgear downloader. Ensure no other firmware files are in there.<br />&nbsp; - start netgear recovery tool.<br />&nbsp; - go through the motions. Select local ethernet driver. Bingo, it finds the open-wrt boot loader.<br />&nbsp; &nbsp; The winpcap method will at this point confirm what open-wrt is reporting itself as.<br />&nbsp; &nbsp; REF: <a href="http://www.skyuser.co.uk/forum/asking-help/21824-recovery-utility-issues.html">http://www.skyuser.co.uk/forum/asking-h … ssues.html</a><br />&nbsp; &nbsp; Now I would struggle to think at this point why this has anything to do with open-wrt.<br />&nbsp; &nbsp; Although I cant see into the rs232 of the modem (not wired rs232 up yet !), I believe it is in the netgear boot loader still.<br />&nbsp; &nbsp; Now the modem can be found by downloader, DO NOT download the DG834PN code. !<br />&nbsp; &nbsp; Copy the DG834GT 1.02.13 firmware into the same folder. Delete the DG834PN code and rename DG834GT to the same<br />&nbsp; &nbsp; name as the DG834PN firmware. This tricks the downloader. Now complete the download as normal.<br />&nbsp; &nbsp; I interpret the above as the netgear downloader is protecting customers from downloading wrong firmware to the modem via <br />&nbsp; &nbsp; a Product ID String key. This key is normally correctly set for DG834GT as DG834GT. But for some reason,<br />&nbsp; &nbsp; once open-wrt is loaded this reported ProductID string from the Modem, changes. This tells netgear downloader to<br />&nbsp; &nbsp; not show the modem. The 834PN filename swap trick, effectly rematches the firmware image to the reported modem string.<br />&nbsp; &nbsp; This allows the modem to get populated into the downloader screen. Of course, the final step of replacing the 834PN file <br />&nbsp; &nbsp; with the REAL 834GT file, just ensures the modem, gets back its proper Firmware.</p> <br /><p>Hope the above helps you.<br />Hats off to the open-wrt community. !</p>											<p class="post-edited">(Last edited by <strong>22moose22</strong> on 15 Oct 2013, 12:39)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>