<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> NLSU2 experience: the good, the bad...</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 2 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p68425">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">EffE</div>
					<div class="post-datetime">
						20 May 2008, 00:09					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,<br />first post here after lurking for some days.</p><p>I&#039;m a Linux enthusiast and I&#039;m quite familiar with console and commands of the free world. I bought a second NSLU2 some days ago and curious like a child I installed the 7.09. It&#039;s perfectly clear for me OpenWrt it&#039;s better on a router than a NAS, but it&#039;s extremely lite and fast compared to Unslug firmware, even if I not understood why some simple things are not available with simple packages. I&#039;m talking about USB auto mount for example: what the hell isn&#039;t a package to make it available immediately after plug-in? Dmesg found the devices but I must manually mount them (ext3 are ok, vfat no). I see there are some script around here like 01-mount,&nbsp; but I cannot found an interesting wiki nor a good thread.</p><p>I&#039;m missing something on the forum? Could someone drive me to the right direction for use it with automount, samba etc?</p><p>Thank you in advance for your patience.</p><p>Federico</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68438">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">NMI</div>
					<div class="post-datetime">
						20 May 2008, 10:03					</div>
				</div>
				<div class="post-content content">
					<p>I could not agree more (unfortunately).<br />Filesystems to mount should be listed in /etc/config/fstab as far as I can figure out.</p><p>There are some information scattered around in the Wiki, that&#039;s not completely outdated and offer some clues, but be prepared to read through the init-scripts yourself to understand whats going on.<br /><a href="http://wiki.openwrt.org/SambaHowto">http://wiki.openwrt.org/SambaHowto</a><br /><a href="http://wiki.openwrt.org/LocalFileSystemHowTo">http://wiki.openwrt.org/LocalFileSystemHowTo</a></p><p>Kamikaze 7.09 is getting old and I suggest that you try and build a more recent trunk version. It&#039;s not that hard, it&#039;s in the build-system that OpenWrt really excels!</p><p>You should also be aware of these still open tickets:<br /><a href="https://dev.openwrt.org/ticket/1945">https://dev.openwrt.org/ticket/1945</a><br /><a href="https://dev.openwrt.org/ticket/3287">https://dev.openwrt.org/ticket/3287</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68442">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">michu</div>
					<div class="post-datetime">
						20 May 2008, 11:00					</div>
				</div>
				<div class="post-content content">
					<p>automount does work, just make sure that you installed all optional fs modules</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68449">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">EffE</div>
					<div class="post-datetime">
						20 May 2008, 14:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>michu wrote:</cite><blockquote><p>automount does work, just make sure that you installed all optional fs modules</p></blockquote></div><p>Could you gently tell me which one and why I can&#039;t find a wiki about it?<br /></p><div class="quotebox"><cite>NMI wrote:</cite><blockquote><p>I could not agree more (unfortunately).</p></blockquote></div><p>Indeed. Probably at the moment is just a geek thing, but has a GREAT potential. I think left it without waste some time for it isn&#039;t the right choice. I&#039;m reading the wiki you provide right now, thanks for the links. Compiling isn&#039;t a good idea if you are looking for stability, but I&#039;ll think on it...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68451">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">michu</div>
					<div class="post-datetime">
						20 May 2008, 14:18					</div>
				</div>
				<div class="post-content content">
					<p>automount is done when you for example connect a usb memorystick to your router. the the automount script is started. in this script the device gets mounted. its path is /sbin/usb-storage.</p><p>what kind of moudules you neeed depends on you, but perhaps kmod-nls*, kmod-fs-ext3, kmod-fs-vfat..</p><p>cheers</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68452">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Sonic</div>
					<div class="post-datetime">
						20 May 2008, 14:37					</div>
				</div>
				<div class="post-content content">
					<p>For me I had problem with 7.09 and kmod-nls-... so I use snapshot version of kamikaze at x-wrt repository to avoid any problems about kmod-nls-... ( <a href="http://downloads.x-wrt.org/xwrt/kamikaze/snapshots/ixp4xx-2.6/">http://downloads.x-wrt.org/xwrt/kamikaz â€¦ xp4xx-2.6/</a> )</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68463">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">EffE</div>
					<div class="post-datetime">
						20 May 2008, 22:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>michu wrote:</cite><blockquote><p>automount is done when you for example connect a usb memorystick to your router. the the automount script is started. in this script the device gets mounted. its path is /sbin/usb-storage.</p><p>what kind of moudules you neeed depends on you, but perhaps kmod-nls*, kmod-fs-ext3, kmod-fs-vfat..</p><p>cheers</p></blockquote></div><p>Automount does not work on my NSLU2.&nbsp; I tried with a simple USB thumb (512MB):<br /></p><div class="codebox"><pre><code>root@OpenWrt:~# fdisk -l

Disk /dev/sda: 508 MB, 508624384 bytes
255 heads, 63 sectors/track, 61 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1               1          61      489951    b  W95 FAT32

root@OpenWrt:~# mkdir /mnt/disk
root@OpenWrt:/mnt# mount /dev/sda1 /mnt/disk
mount: mounting /dev/sda1 on /mnt/disk failed</code></pre></div><p>Packages installed:<br /></p><div class="codebox"><pre><code>kmod-fs-ext2    2.6.21.6-ixp4xx-1    
kmod-fs-ext3    2.6.21.6-ixp4xx-1    
kmod-fs-msdos    2.6.21.6-ixp4xx-1    
kmod-fs-nfs    2.6.21.6-ixp4xx-1    
kmod-fs-vfat    2.6.21.6-ixp4xx-1    
kmod-nls-base    2.6.21.6-ixp4xx-1    
kmod-nls-cp1250    2.6.21.6-ixp4xx-1    
kmod-nls-utf8    2.6.21.6-ixp4xx-1</code></pre></div><p>Disk status leds are off even if a device is recognized. <br />Before do a script modify or try other packages I&#039;ll try with a snapshot firmware as proposed by Sonic but I don&#039;t know which one because there a re two bin files, openwrt-nslu2-squashfs.bin and openwrt-nslu2-squashfs-16mb.bin.<br />Just a couple of questions: need I to upgrade in red boot mode or simply I can use the upgrade page on X-wrt? Must I cancel the JFFS2 partition?<br />Thanks to all.</p><p>Federico</p>											<p class="post-edited">(Last edited by <strong>EffE</strong> on 20 May 2008, 23:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68464">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">michu</div>
					<div class="post-datetime">
						21 May 2008, 00:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>EffE wrote:</cite><blockquote><div class="quotebox"><cite>michu wrote:</cite><blockquote><p>automount is done when you for example connect a usb memorystick to your router. the the automount script is started. in this script the device gets mounted. its path is /sbin/usb-storage.</p><p>what kind of moudules you neeed depends on you, but perhaps kmod-nls*, kmod-fs-ext3, kmod-fs-vfat..</p><p>cheers</p></blockquote></div><p>Automount does not work on my NSLU2.&nbsp; I tried with a simple USB thumb (512MB):</p><p>...<br />Federico</p></blockquote></div><p>just another question, did you installed all needed usb modules? what does syslog say?</p><p>and yes, using the trunk version is (almost every time) a good idea..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68469">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">NMI</div>
					<div class="post-datetime">
						21 May 2008, 01:00					</div>
				</div>
				<div class="post-content content">
					<p>This might be a stupid question, but are you sure cp1250 is the correct one and not cp850 and/or cp437? </p><p>I just tried if automount works on my slug by connecting a 4GB usb-stick and it worked.<br />But I&#039;m using trunk r10252 and have the following packages installed:<br /></p><div class="codebox"><pre><code>kmod-fs-ext2 - 2.6.23.14-ixp4xx-1 - 
kmod-fs-ext3 - 2.6.23.14-ixp4xx-1 - 
kmod-fs-vfat - 2.6.23.14-ixp4xx-1 - 
kmod-nls-base - 2.6.23.14-ixp4xx-1 - 
kmod-nls-cp437 - 2.6.23.14-ixp4xx-1 - 
kmod-nls-cp850 - 2.6.23.14-ixp4xx-1 - 
kmod-nls-iso8859-1 - 2.6.23.14-ixp4xx-1 - 
kmod-nls-iso8859-15 - 2.6.23.14-ixp4xx-1 - 
kmod-nls-utf8 - 2.6.23.14-ixp4xx-1 -</code></pre></div><p>Personally I really like OpenWrt&#039;s minimalistic approach, (might be my SunOS4 and NetBSD upbringing). It&#039;s really a rough diamond that just needs <strong>a lot</strong> of polish to really shine. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68473">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Sonic</div>
					<div class="post-datetime">
						21 May 2008, 01:42					</div>
				</div>
				<div class="post-content content">
					<p>EffE you need to use &quot;logread&quot; to read cause of mounting errors ... I&#039;m sure it&#039;s caused by missing packages, NMI packages list will fix your problem with snapshot firmware. The firmware to use is about 8Mb ( <a href="http://downloads.x-wrt.org/xwrt/kamikaze/snapshots/ixp4xx-2.6/openwrt-nslu2-squashfs.bin">http://downloads.x-wrt.org/xwrt/kamikaz â€¦ uashfs.bin</a> )</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68480">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">EffE</div>
					<div class="post-datetime">
						21 May 2008, 08:13					</div>
				</div>
				<div class="post-content content">
					<p>@michu: Yep. Drivers are ok.<br />@Sonic: here&#039;s the log:<br /></p><div class="codebox"><pre><code>May 21 09:00:47 (none) user.info kernel: usb 1-2: new high speed USB device using ehci_hcd and address 2
May 21 09:00:47 (none) user.info kernel: usb 1-2: configuration #1 chosen from 1 choice
May 21 09:00:47 (none) user.info kernel: scsi0 : SCSI emulation for USB Mass Storage devices
May 21 09:00:47 (none) user.debug kernel: usb-storage: device found at 2
May 21 09:00:47 (none) user.debug kernel: usb-storage: waiting for device to settle before scanning
May 21 09:00:48 (none) user.info : /sbin/hotplug-call: /etc/hotplug.d/usb/10-usb-storage: 12: /sbin/usb-storage: Permission denied 
May 21 09:00:52 (none) user.notice kernel: scsi 0:0:0:0: Direct-Access     CBM      Flash Disk       4.00 PQ: 0 ANSI: 2
May 21 09:00:52 (none) user.notice kernel: SCSI device sda: 993407 512-byte hdwr sectors (509 MB)
May 21 09:00:52 (none) user.notice kernel: sda: Write Protect is off
May 21 09:00:52 (none) user.debug kernel: sda: Mode Sense: 00 00 00 00
May 21 09:00:52 (none) user.err kernel: sda: assuming drive cache: write through
May 21 09:00:52 (none) user.notice kernel: SCSI device sda: 993407 512-byte hdwr sectors (509 MB)
May 21 09:00:52 (none) user.notice kernel: sda: Write Protect is off
May 21 09:00:52 (none) user.debug kernel: sda: Mode Sense: 00 00 00 00
May 21 09:00:52 (none) user.err kernel: sda: assuming drive cache: write through
May 21 09:00:53 (none) user.info kernel:  sda1
May 21 09:00:53 (none) user.notice kernel: sd 0:0:0:0: Attached scsi removable disk sda
May 21 09:00:53 (none) user.debug kernel: usb-storage: device scan complete</code></pre></div><div class="quotebox"><cite>NMI wrote:</cite><blockquote><p>This might be a stupid question, but are you sure cp1250 is the correct one and not cp850 and/or cp437?</p></blockquote></div><p>After a mount:</p><div class="codebox"><pre><code>May 21 09:03:45 (none) user.err kernel: FAT: codepage cp437 not found
May 21 09:03:45 (none) user.err kernel: FAT: codepage cp437 not found</code></pre></div><p>This package isn&#039; available even after a ipkg update. Moving to a snapshot firmware today.</p>											<p class="post-edited">(Last edited by <strong>EffE</strong> on 21 May 2008, 08:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68486">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">fred4712</div>
					<div class="post-datetime">
						21 May 2008, 11:48					</div>
				</div>
				<div class="post-content content">
					<p>hi,<br />ie got the same Problem<br />here a output vom logread :<br />ay 22 03:41:57 OpenWrt user.info kernel: scsi0 : SCSI emulation for USB Mass Storage devices<br />May 22 03:41:57 OpenWrt user.debug kernel: usb-storage: device found at 2<br />May 22 03:41:57 OpenWrt user.debug kernel: usb-storage: waiting for device to settle before scanning<br />May 22 03:41:58 OpenWrt user.notice root: usb device is mass storage<br />May 22 03:41:58 OpenWrt user.notice root: waiting on usb drive 0 ...<br />May 22 03:41:58 OpenWrt user.info kernel: eth0: link down<br />May 22 03:41:59 OpenWrt user.notice root: waiting on usb drive 1 ...<br />May 22 03:42:00 OpenWrt user.notice root: waiting on usb drive 2 ...<br />May 22 03:42:01 OpenWrt user.notice root: waiting on usb drive 3 ...<br />May 22 03:42:01 OpenWrt user.info kernel: eth0: link up, 100Mbps, full-duplex, lpa 0x45E1<br />May 22 03:42:02 OpenWrt user.notice root: waiting on usb drive 4 ...<br />May 22 03:42:02 OpenWrt user.notice kernel: scsi 0:0:0:0: Direct-Access&nbsp; &nbsp; &nbsp;SanDisk&nbsp; Cruzer Mini&nbsp; &nbsp; &nbsp; 0.2&nbsp; PQ: 0 ANSI: 2<br />May 22 03:42:02 OpenWrt user.notice kernel: sd 0:0:0:0: [sda] 250879 512-byte hardware sectors (128 MB)<br />May 22 03:42:02 OpenWrt user.notice kernel: sd 0:0:0:0: [sda] Write Protect is off<br />May 22 03:42:02 OpenWrt user.debug kernel: sd 0:0:0:0: [sda] Mode Sense: 03 00 00 00<br />May 22 03:42:02 OpenWrt user.err kernel: sd 0:0:0:0: [sda] Assuming drive cache: write through<br />May 22 03:42:02 OpenWrt user.notice kernel: sd 0:0:0:0: [sda] 250879 512-byte hardware sectors (128 MB)<br />May 22 03:42:02 OpenWrt user.notice kernel: sd 0:0:0:0: [sda] Write Protect is off<br />May 22 03:42:02 OpenWrt user.debug kernel: sd 0:0:0:0: [sda] Mode Sense: 03 00 00 00<br />May 22 03:42:02 OpenWrt user.err kernel: sd 0:0:0:0: [sda] Assuming drive cache: write through<br />May 22 03:42:02 OpenWrt user.info kernel:&nbsp; sda:<br />May 22 03:42:02 OpenWrt user.info kernel:&nbsp; sda1<br />May 22 03:42:02 OpenWrt user.notice kernel: sd 0:0:0:0: [sda] Attached SCSI removable disk<br />May 22 03:42:02 OpenWrt user.debug kernel: usb-storage: device scan complete<br />May 22 03:42:03 OpenWrt user.notice root: waiting on usb drive 5 ...<br />May 22 03:42:06 OpenWrt user.notice root: waiting on usb drive 6 ...<br />May 22 03:42:10 OpenWrt user.notice root: waiting on usb drive 7 ...<br />May 22 03:42:13 OpenWrt user.notice root: waiting on usb drive 8 ...<br />May 22 03:42:17 OpenWrt user.notice root: waiting on usb drive 9 ...<br />May 22 03:42:20 OpenWrt user.notice root: waiting on usb drive 10 ...</p><p>Someone an idea ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68490">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">Sonic</div>
					<div class="post-datetime">
						21 May 2008, 13:38					</div>
				</div>
				<div class="post-content content">
					<p>if I remember in the 7.09&nbsp; the /sbin/usb-storage file isn&#039;t executable by default ... you need to chmod it </p><div class="codebox"><pre><code>chmod a+x /sbin/usb-storage</code></pre></div><p>so automount will work.<br />For </p><div class="codebox"><pre><code>user.err kernel: FAT: codepage cp437 not found</code></pre></div><p>you can&#039;t fix it with 7.09 repository and 7.09 firmware, you must use snapshot image, it&#039;s my opinion ... I&#039;m not guru of openwrt and nslu2 ... to work correctly I use snapshot where cp437 package is available ... Good luck !</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68533">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">EffE</div>
					<div class="post-datetime">
						22 May 2008, 07:57					</div>
				</div>
				<div class="post-content content">
					<p>Sonic,<br />I&#039;ll be very happy to use the snapshot if it work...<br />I upgraded trough upslug2 because the x-wrt upgrade page didn&#039;t work (nslu2 need redboot mode before upgrade it). Upgraded ok but my NAS did not up. Tried twice and the file md5sum is right, I think is not a image issue. <br />Now I&#039;m back to Linksys r63 original firmware. I&#039;ll wait a new snapshot revision before make another attempt with openwrt. <br />Thanks to all for now.</p><p>Federico</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68612">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">fred4712</div>
					<div class="post-datetime">
						23 May 2008, 16:46					</div>
				</div>
				<div class="post-content content">
					<p>Hi, <br />can someone send me his .config file in that this automount work ?&nbsp; so i can compile it by my self !<br />Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68617">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">fred4712</div>
					<div class="post-datetime">
						23 May 2008, 18:09					</div>
				</div>
				<div class="post-content content">
					<p>in the latest snapshot automount wouldnt work too ... ;-(</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68684">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">EffE</div>
					<div class="post-datetime">
						25 May 2008, 15:50					</div>
				</div>
				<div class="post-content content">
					<p>Hi there.<br />Busy days... But I found the time to try two different snapshots on my slug.<br />The result is still the same: I can upload firmware but it didn&#039;t up.&nbsp; Unslug and original firmware works perfectly.<br />Don&#039;t know if I need to erase the jffs2 partition as proposed as an option on Webif upgrade page but I prefer stay sharp and due to those issues obviously I&#039;m back to the old-but-good Unslug for now. I&#039;ll wait a new stable version of Openwrt before give it a try again.</p><p>Cheers,</p><p>Federico</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68795">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">yasha</div>
					<div class="post-datetime">
						27 May 2008, 19:54					</div>
				</div>
				<div class="post-content content">
					<p>I got mine working, but it was painstaking. The good news is after all the manual package installs, the samba config, etc.. It&#039;s back up essentially the way it was with linksys&#039;s firmware but better, far more stable, and I don&#039;t have to worry about my file dates being set to 1970 anymore since the unit can now keep a friggin&#039; set date.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70656">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">raggy_10</div>
					<div class="post-datetime">
						8 Jul 2008, 19:59					</div>
				</div>
				<div class="post-content content">
					<p>I am having similar problems on 7.09 and FAT disks with my slug. Samba is working fine with Ext2 and Ext3 formated disks but I also get the cp437 error with FAT disks. I have tried to find the relevant kmod-cp437 package so I am thinking of using a snapshot image but I do not know how to use a snapshot image.&nbsp; If someone could point me at a how-to on snapshot usage I would be grateful. I am confused by the ZImage, and the different .bin files, they are different from the release names.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>