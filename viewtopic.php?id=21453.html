<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> flash impossible on wrt54gl</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 2 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p92843">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">tono25</div>
					<div class="post-datetime">
						18 Aug 2009, 23:01					</div>
				</div>
				<div class="post-content content">
					<p>Hello i have a problem to flash my router wrt54gl. Yesterday i flash my router with the firmware kamikaze 8.09 (brcm-2.4) and now i can&#039;t flash with an other firmware because i have a error message&nbsp; &quot;The uploaded image file does not contain a supported format. Make sure that you choose the generic image format for your platform.&quot; I need help. thank you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92855">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Velda2</div>
					<div class="post-datetime">
						19 Aug 2009, 01:33					</div>
				</div>
				<div class="post-content content">
					<p>What other firmware are you trying to flash?</p><p>If you want to go back to the manufactures firmware try this. Download the firmware then open it in a hex editor and trim the first 32 bytes (0x20h) from the file. After you do this the first line should be &#039;HDR0&#039; (or 48 44 52 30h). Do not flash the firmware if this doesn&#039;t match.</p><p>The reason for this is, the original Linksys firmware uses a 32 byte header. OpenWRT does not need or want this header, so you simply trim it off.</p><p>If you want to change to another version of OpenWRT you need to download and flash the version that comes in a .trx file. This is the header-less version.</p><p>Hope this helps. If you have any more questions feel free to ask.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92861">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">madmatrix</div>
					<div class="post-datetime">
						19 Aug 2009, 03:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Velda2 wrote:</cite><blockquote><p>What other firmware are you trying to flash?</p><p>If you want to go back to the manufactures firmware try this. Download the firmware then open it in a hex editor and trim the first 32 bytes (0x20h) from the file. After you do this the first line should be &#039;HDR0&#039; (or 48 44 52 30h). Do not flash the firmware if this doesn&#039;t match.</p><p>The reason for this is, the original Linksys firmware uses a 32 byte header. OpenWRT does not need or want this header, so you simply trim it off.</p><p>If you want to change to another version of OpenWRT you need to download and flash the version that comes in a .trx file. This is the header-less version.</p><p>Hope this helps. If you have any more questions feel free to ask.</p></blockquote></div><p>For flash the new openwrt version into my router, do I need serial console to my router? I could have this situation in the future:</p><p>I could compile another openwrt with more packages included. So I will need flash the new openwrt firmware into the router. I have been using DD-WRT for a long time and always use the GUI to load the new firmware into the router. For openwrt, I don&#039;t know it&#039;s possible in its CLI to flash the new firmware. Please clarify. Thanks a lot.</p><p>Lou</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92870">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Velda2</div>
					<div class="post-datetime">
						19 Aug 2009, 06:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>madmatrix wrote:</cite><blockquote><div class="quotebox"><cite>Velda2 wrote:</cite><blockquote><p>What other firmware are you trying to flash?</p><p>If you want to go back to the manufactures firmware try this. Download the firmware then open it in a hex editor and trim the first 32 bytes (0x20h) from the file. After you do this the first line should be &#039;HDR0&#039; (or 48 44 52 30h). Do not flash the firmware if this doesn&#039;t match.</p><p>The reason for this is, the original Linksys firmware uses a 32 byte header. OpenWRT does not need or want this header, so you simply trim it off.</p><p>If you want to change to another version of OpenWRT you need to download and flash the version that comes in a .trx file. This is the header-less version.</p><p>Hope this helps. If you have any more questions feel free to ask.</p></blockquote></div><p>For flash the new openwrt version into my router, do I need serial console to my router? I could have this situation in the future:</p><p>I could compile another openwrt with more packages included. So I will need flash the new openwrt firmware into the router. I have been using DD-WRT for a long time and always use the GUI to load the new firmware into the router. For openwrt, I don&#039;t know it&#039;s possible in its CLI to flash the new firmware. Please clarify. Thanks a lot.</p><p>Lou</p></blockquote></div><p>First, don&#039;t hijack someone elses post. It&#039;s rude.</p><p>The basic installation instructions can be found here, in the <a href="http://wiki.openwrt.org/doc/howto/installing">wiki</a>.<br />On most routers you can download the firmware directly from the CLI with something like: </p><div class="codebox"><pre><code>wget http://www.somesite.com/firmware.trx -O /tmp/firmware.trx</code></pre></div><p>and then flash it with the following command</p><div class="codebox"><pre><code>mtd -r write /tmp/firmware.trx linux</code></pre></div><p>Do not use the above commands on a firmware that has a header, strip it off first.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92885">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">eryter</div>
					<div class="post-datetime">
						19 Aug 2009, 13:32					</div>
				</div>
				<div class="post-content content">
					<p>Hi, i have a wrt54gl too. In Kamikaze 8.09.1 2.6 kernel nvram is not present. How I can set the boot wait to flash via tftp? I tried to search for, but I could not find something about.<br />Thanks a lot.</p>											<p class="post-edited">(Last edited by <strong>eryter</strong> on 19 Aug 2009, 13:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92896">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">madmatrix</div>
					<div class="post-datetime">
						19 Aug 2009, 17:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Velda2 wrote:</cite><blockquote><div class="quotebox"><cite>madmatrix wrote:</cite><blockquote><div class="quotebox"><cite>Velda2 wrote:</cite><blockquote><p>What other firmware are you trying to flash?</p><p>If you want to go back to the manufactures firmware try this. Download the firmware then open it in a hex editor and trim the first 32 bytes (0x20h) from the file. After you do this the first line should be &#039;HDR0&#039; (or 48 44 52 30h). Do not flash the firmware if this doesn&#039;t match.</p><p>The reason for this is, the original Linksys firmware uses a 32 byte header. OpenWRT does not need or want this header, so you simply trim it off.</p><p>If you want to change to another version of OpenWRT you need to download and flash the version that comes in a .trx file. This is the header-less version.</p><p>Hope this helps. If you have any more questions feel free to ask.</p></blockquote></div><p>For flash the new openwrt version into my router, do I need serial console to my router? I could have this situation in the future:</p><p>I could compile another openwrt with more packages included. So I will need flash the new openwrt firmware into the router. I have been using DD-WRT for a long time and always use the GUI to load the new firmware into the router. For openwrt, I don&#039;t know it&#039;s possible in its CLI to flash the new firmware. Please clarify. Thanks a lot.</p><p>Lou</p></blockquote></div><p>First, don&#039;t hijack someone elses post. It&#039;s rude.</p><p>The basic installation instructions can be found here, in the <a href="http://wiki.openwrt.org/doc/howto/installing">wiki</a>.<br />On most routers you can download the firmware directly from the CLI with something like: </p><div class="codebox"><pre><code>wget http://www.somesite.com/firmware.trx -O /tmp/firmware.trx</code></pre></div><p>and then flash it with the following command</p><div class="codebox"><pre><code>mtd -r write /tmp/firmware.trx linux</code></pre></div><p>Do not use the above commands on a firmware that has a header, strip it off first.</p></blockquote></div><p>Thanks a lot. Your answer is really helpful. </p><p>I will never hijack the other one&#039;s post. Thanks for the reminder. :-)</p><p>Lou</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92899">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">tono25</div>
					<div class="post-datetime">
						19 Aug 2009, 19:46					</div>
				</div>
				<div class="post-content content">
					<p>The solution wget <a href="http://www.somesite.com/firmware.trx">http://www.somesite.com/firmware.trx</a> -O /tmp/firmware.trx and wget <a href="http://www.somesite.com/firmware.trx">http://www.somesite.com/firmware.trx</a> -O /tmp/firmware.trx operate but after i can&#039;t flash with firmware .bin in the graphic interface.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92900">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">tono25</div>
					<div class="post-datetime">
						19 Aug 2009, 19:50					</div>
				</div>
				<div class="post-content content">
					<p>I have a question is it possible to flash the router with this solution but with a firmware .bin?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92902">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Velda2</div>
					<div class="post-datetime">
						19 Aug 2009, 20:12					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>tono25 wrote:</cite><blockquote><p>I have a question is it possible to flash the router with this solution but with a firmware .bin?</p></blockquote></div><p>Yes. I addressed that here.</p><div class="quotebox"><cite>Velda2 wrote:</cite><blockquote><p>Download the firmware (.bin) then open it in a hex editor and trim the first 32 bytes (0x20h) from the file. After you do this the first line should be &#039;HDR0&#039; (or 48 44 52 30h). Do not flash the firmware if this doesn&#039;t match.</p><p>The reason for this is, the original Linksys firmware uses a 32 byte header. OpenWRT does not need or want this header, so you simply trim it off.</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92909">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">tono25</div>
					<div class="post-datetime">
						19 Aug 2009, 21:15					</div>
				</div>
				<div class="post-content content">
					<p>Since i flash with the firmware .trx i don&#039;t configure the wifi.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92910">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">tono25</div>
					<div class="post-datetime">
						19 Aug 2009, 21:33					</div>
				</div>
				<div class="post-content content">
					<p>I test with teh hex editor and flash the router but i have alwys the same problem i can&#039;t configure my wifi and i test in text mode with command line nvram... but it&#039;s don&#039;t work. If you have an idea? Thank you velda2 for your responses and excuse me for my nasty english but i&#039;m french.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92933">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">ian_wk</div>
					<div class="post-datetime">
						20 Aug 2009, 07:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>eryter wrote:</cite><blockquote><p>Hi, i have a wrt54gl too. In Kamikaze 8.09.1 2.6 kernel nvram is not present. How I can set the boot wait to flash via tftp? I tried to search for, but I could not find something about.<br />Thanks a lot.</p></blockquote></div><p>I think that you should flash the 2.4 version first in order to set boot wait via serial cable.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94605">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">mokum</div>
					<div class="post-datetime">
						18 Sep 2009, 12:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Velda2 wrote:</cite><blockquote><p>If you want to go back to the manufactures firmware try this. Download the firmware then open it in a hex editor and trim the first 32 bytes (0x20h) from the file. After you do this the first line should be &#039;HDR0&#039; (or 48 44 52 30h). Do not flash the firmware if this doesn&#039;t match.</p><p>The reason for this is, the original Linksys firmware uses a 32 byte header. OpenWRT does not need or want this header, so you simply trim it off.</p></blockquote></div><p>Sorry for reviving this nearly dead post but it saved my skinny ass. Thanks for clarifying this.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p176815">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">666neuromancer666</div>
					<div class="post-datetime">
						4 Sep 2012, 01:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mokum wrote:</cite><blockquote><div class="quotebox"><cite>Velda2 wrote:</cite><blockquote><p>If you want to go back to the manufactures firmware try this. Download the firmware then open it in a hex editor and trim the first 32 bytes (0x20h) from the file. After you do this the first line should be &#039;HDR0&#039; (or 48 44 52 30h). Do not flash the firmware if this doesn&#039;t match.</p><p>The reason for this is, the original Linksys firmware uses a 32 byte header. OpenWRT does not need or want this header, so you simply trim it off.</p></blockquote></div><p>Sorry for reviving this nearly dead post but it saved my skinny ass. Thanks for clarifying this.</p></blockquote></div><p>same here, thanks! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202094">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">flyy</div>
					<div class="post-datetime">
						18 May 2013, 01:06					</div>
				</div>
				<div class="post-content content">
					<p><a href="https://dl.dropboxusercontent.com/u/8638670/hex.png">https://dl.dropboxusercontent.com/u/8638670/hex.png</a><br />how much do I have to trim?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202095">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">dustbyter</div>
					<div class="post-datetime">
						18 May 2013, 01:21					</div>
				</div>
				<div class="post-content content">
					<p>Do you know if the TFTP mode is still there? </p><p>If so you can flash it with stock firmware and restart the process.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>