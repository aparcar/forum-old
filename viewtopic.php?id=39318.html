<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TAP OpenVPN fails on 12.09 with &quot;Cannot load...server_tap_bridge.cert&quot;</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 8 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p177837">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">sabidabi</div>
					<div class="post-datetime">
						11 Sep 2012, 21:25					</div>
				</div>
				<div class="post-content content">
					<p>My OpenVPN worked ok on the 10.3.1, and on several of the trunk release I tried. I used LuCI to configure it.<br />I now upgraded to 12.09 Beta, and regenerated the certificates and keys with the easy-rsa utility.<br />When I start the tap-server instance it fails with the following error log:<br />Cannot load certificate file /lib/uci/upload/cbid.openvpn.server_tap_bridge.cert: error:0906D06C:lib(9):func(109):reason(108): error:140AD009:lib(20):func(173):reason(9)<br />Have I missed anything, or is it a bug I must report?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177838">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						11 Sep 2012, 21:38					</div>
				</div>
				<div class="post-content content">
					<p>It means the certificate is malformed.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177840">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">sabidabi</div>
					<div class="post-datetime">
						11 Sep 2012, 21:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jow wrote:</cite><blockquote><p>It means the certificate is malformed.</p></blockquote></div><p>This is not one of the certificates I created. The ones I created is dh1024.pem, server.crt etc. How does the server_tap_bridge.cert get created? How can I fix it?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177844">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						11 Sep 2012, 22:03					</div>
				</div>
				<div class="post-content content">
					<p>The path looks like you uploaded it through the web interface. Your original certs are maybe in windows file format, convert them to unix line endings with an editor like Notepad++ and try reuploading them.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177847">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">sabidabi</div>
					<div class="post-datetime">
						11 Sep 2012, 22:29					</div>
				</div>
				<div class="post-content content">
					<p>I generated the certificates on the openwrt itself, and then sftp&#039;ed the files to a windows file server where I intend to keep them safe as backup. To see that I would be able to restore them I uploaded them back via the LuCi web. I did not change them on the windows machine. Following your advice I checked the files with Editpad Lite and found out that the line endings are unix. No edit needed.<br />If there is anything else that is wrong in the files it must have happened either on the openwrt router when I generated them with easy-rsa or during the sftp.<br />Again, the only files I moved this way were ca.crt, server.crt, server.key and dh1024.pem. I have no idea what and how server_tap_bridge.cert is at all related to them.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177848">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						11 Sep 2012, 22:38					</div>
				</div>
				<div class="post-content content">
					<p>The file &quot;server_tap_bridge.cert&quot; is simply a renamed &quot;server.crt&quot;, the gui renames it to an internal file name if you upload it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177850">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">sabidabi</div>
					<div class="post-datetime">
						11 Sep 2012, 22:58					</div>
				</div>
				<div class="post-content content">
					<p>jow thanks for the support.<br />I simply re-uploaded the file server.crt, and viola - the openvpn is up now.<br />Something must have went wrong when I uploaded it the first time.<br />Now that I understood the renaming of the files by the GUI I could figure it out</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>