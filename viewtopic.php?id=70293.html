<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Repeater with a MR3040 and a RT5370</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p354645">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">rchadwick7</div>
					<div class="post-datetime">
						20 Mar 2017, 17:51					</div>
				</div>
				<div class="post-content content">
					<p>I have a TPLink TL-MR3040, Flashed with OpenWRT Chaos Calmer 15.05, and want it to use a USB Wifi adapter (I have a few RT5370&#039;s sitting around, but willing to get what&#039;s needed), and would like to configure it as a wifi repeater, where the WAN side uses the USB adapter, and will have a different IP range than the LAN side. I came across directions to make a repeater, but I don&#039;t know how to get the MR3040 to recognize the USB Wifi adapter. After searching, all I can find is that it looks like it&#039;s supported.</p><p>Thanks for any help!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p354651">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						20 Mar 2017, 18:57					</div>
				</div>
				<div class="post-content content">
					<p>You can use sources like wikidevi to find info on the hardware<br /><a href="https://wikidevi.com/wiki/Ralink_RT5370_Reference_Design">https://wikidevi.com/wiki/Ralink_RT5370 â€¦ nce_Design</a><br />This indicates a &quot;2800&quot; Linux driver.</p><p>Goto Luci=&gt; system =&gt; software<br />Update the package repository<br />Search for 2800.</p><p>Not sure what you need from the results or how well it works.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p354658">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">rchadwick7</div>
					<div class="post-datetime">
						20 Mar 2017, 20:34					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the response. I searched for 2800, and installed kmod-rt2800-usb. However, after reboot the extra interface hasn&#039;t shown up in Luci. Is there something else I need to do? Although I played around with DDWRT back in the day, I&#039;m very new to OpenWRT. Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p354678">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						21 Mar 2017, 00:00					</div>
				</div>
				<div class="post-content content">
					<p>If the only thing you have installed is this kmod, then it will not work.&nbsp; You need to install USB Basic support first.</p><p><a href="https://wiki.openwrt.org/doc/howto/usb.essentials">https://wiki.openwrt.org/doc/howto/usb.essentials</a><br /><a href="https://wiki.openwrt.org/start?do=search&amp;id=usb">https://wiki.openwrt.org/start?do=search&amp;id=usb</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p354680">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">rchadwick7</div>
					<div class="post-datetime">
						21 Mar 2017, 00:53					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the response. I checked the links, but it seems USB support was already installed. I ran ifconfig, but it doesn&#039;t look like the USB device is showing up. I&#039;m trying different RT5370 based adapters, but nothing yet. Anything else I can check? Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p354683">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">rchadwick7</div>
					<div class="post-datetime">
						21 Mar 2017, 01:19					</div>
				</div>
				<div class="post-content content">
					<p>I just realized that in Luci-&gt;System-&gt;LED Configuration, it shows in USB Device the wifi adapter. It shows a Realtek adapter when plugged in, and nothing when unplugged, so something seems to be working. Any idea on how I can actually use it?<br />Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p354684">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">remlei</div>
					<div class="post-datetime">
						21 Mar 2017, 01:21					</div>
				</div>
				<div class="post-content content">
					<p>execute this on terminal</p><div class="quotebox"><blockquote><p>opkg update<br />opkg install kmod-rt2800-lib kmod-rt2800-usb kmod-rt2x00-lib kmod-rt2x00-usb</p></blockquote></div><p>reboot<br />loigin to luci, go network tab and wifi tab should be available, set it up as you like.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p354685">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						21 Mar 2017, 01:33					</div>
				</div>
				<div class="post-content content">
					<p>Also<br />iw list<br />Scroll up and confirm you see two big blocks, for two phy&#039;s (phy 0 and phy1).&nbsp; Phy0 will usually be the built in radio and phy1 the USB.</p><p>If you do have two radios now, rebuild your wireless config file:<br />rm /etc/config/wireless<br />wifi detect &gt; /etc/config/wireless</p><p>This will require you to reconfigure all wireless.&nbsp; Thus you should be connected by ethernet to avoid becoming bricked out.</p><p>It only makes sense to use a USB adapter if you need a big antenna on it to reach the AP that you&#039;re trying to get Internet from.&nbsp; If you are in good radio range, you can do what you originally set out to do simply by making two wifi interfaces on the built-in radio.</p>											<p class="post-edited">(Last edited by <strong>mk24</strong> on 21 Mar 2017, 01:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p354692">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">rchadwick7</div>
					<div class="post-datetime">
						21 Mar 2017, 03:22					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the replies. It hasn&#039;t worked, so I think i&#039;ll give up and not use an external USB Wifi adapter. My original thought was to make it easy to change MAC addresses on the WAN side. Having the option for an antenna was a bonus.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p354694">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						21 Mar 2017, 04:21					</div>
				</div>
				<div class="post-content content">
					<p>You can make a spoof MAC address for any interface, independently of the others.&nbsp; Put option macaddr &#039;nn:nn...&#039; in the interface block in /etc/config/wireless.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>