<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> usb_modeswitch not work with new zte mu351</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 9 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p116365">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">yupnfy</div>
					<div class="post-datetime">
						3 Sep 2010, 06:26					</div>
				</div>
				<div class="post-content content">
					<p>i have new version of zte mu351 modem.i found out the serial port&#039;s vendor&amp;product id in xp is 19d2:0034<br />openwrt only show 19d2:0090 ZTE Mass Storage Device,but usb_modeswitch will halt</p><p>root@OpenWrt:~# usb_modeswitch -W<br />Reading config file: /etc/usb-modeswitch.conf</p><p> * usb-modeswitch: handle USB devices with multiple modes<br /> * Version 1.1.0 (C) Josua Dietze 2010<br /> * Based on libusb 0.1.12</p><p> ! PLEASE REPORT NEW CONFIGURATIONS !</p><p>DefaultVendor=&nbsp; 0x19d2<br />DefaultProduct= 0x0090<br />TargetVendor=&nbsp; &nbsp;0x19d2<br />TargetProduct=&nbsp; 0x0034<br />TargetClass=&nbsp; &nbsp; not set</p><p>DetachStorageOnly=0<br />HuaweiMode=0<br />SierraMode=0<br />SonyMode=0<br />GCTMode=0<br />MessageEndpoint= not set<br />MessageContent=&quot;55534243123456780000000000000011060000000000000000000000000000&quot;<br />NeedResponse=0<br />ResponseEndpoint= not set<br />Interface=0x00</p><p>InquireDevice enabled (default)<br />Success check disabled<br />System integration mode disabled</p><p>usb_set_debug: Setting debugging level to 15 (on)<br />usb_os_find_busses: Found 002<br />usb_os_find_busses: Found 001<br />usb_os_find_busses: Skipping non bus directory devices<br />usb_os_find_devices: Found 002 on 002<br />usb_os_find_devices: Found 001 on 002<br />error obtaining child information: Inappropriate ioctl for device<br />usb_os_find_devices: Found 001 on 001</p><p>Looking for target devices ...<br />&nbsp; searching devices, found USB ID 19d2:0090<br />&nbsp; &nbsp;found matching vendor ID<br />&nbsp; searching devices, found USB ID 1d6b:0001<br />&nbsp; searching devices, found USB ID 1d6b:0002<br /> No devices in target mode or class found<br />Looking for default devices ...<br />&nbsp; searching devices, found USB ID 19d2:0090<br />&nbsp; &nbsp;found matching vendor ID<br />&nbsp; &nbsp;found matching product ID<br />&nbsp; searching devices, found USB ID 1d6b:0001<br />&nbsp; searching devices, found USB ID 1d6b:0002<br /> Found default devices (1)<br />Accessing device 002 on bus 002 ...<br />Ambiguous Class/InterfaceClass: 0x02/0x08Using endpoints 0x0f (out) and 0x8f (in)<br />Inquiring device details; driver will be detached ...<br />Looking for active driver ...<br /> OK, driver found (&quot;usb-storage&quot;)<br /> OK, driver &quot;usb-storage&quot; detached</p><p>Halt here,only ctrl+c to return to shell.</p><p>below is lsusb -v</p><p>Bus 002 Device 002: ID 19d2:0090 ONDA Communication S.p.A.<br />Device Descriptor:<br />&nbsp; bLength&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 18<br />&nbsp; bDescriptorType&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1<br />&nbsp; bcdUSB&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2.00<br />&nbsp; bDeviceClass&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2 Communications<br />&nbsp; bDeviceSubClass&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0<br />&nbsp; bDeviceProtocol&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0<br />&nbsp; bMaxPacketSize0&nbsp; &nbsp; &nbsp; &nbsp; 64<br />&nbsp; idVendor&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x19d2 ONDA Communication S.p.A.<br />&nbsp; idProduct&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x0090<br />&nbsp; bcdDevice&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.00<br />&nbsp; iManufacturer&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 ZTE Semiconductors<br />&nbsp; iProduct&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2 ZTE System Solution<br />&nbsp; iSerial&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;3 000000-00-000000<br />&nbsp; bNumConfigurations&nbsp; &nbsp; &nbsp; 1<br />&nbsp; Configuration Descriptor:<br />&nbsp; &nbsp; bLength&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;9<br />&nbsp; &nbsp; bDescriptorType&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2<br />&nbsp; &nbsp; wTotalLength&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;8192<br />&nbsp; &nbsp; bNumInterfaces&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1<br />&nbsp; &nbsp; bConfigurationValue&nbsp; &nbsp; &nbsp;4<br />&nbsp; &nbsp; iConfiguration&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0<br />&nbsp; &nbsp; bmAttributes&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0xc0<br />&nbsp; &nbsp; &nbsp; Self Powered<br />&nbsp; &nbsp; MaxPower&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 500mA<br />&nbsp; &nbsp; Interface Descriptor:<br />&nbsp; &nbsp; &nbsp; bLength&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;9<br />&nbsp; &nbsp; &nbsp; bDescriptorType&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;4<br />&nbsp; &nbsp; &nbsp; bInterfaceNumber&nbsp; &nbsp; &nbsp; &nbsp; 0<br />&nbsp; &nbsp; &nbsp; bAlternateSetting&nbsp; &nbsp; &nbsp; &nbsp;0<br />&nbsp; &nbsp; &nbsp; bNumEndpoints&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2<br />&nbsp; &nbsp; &nbsp; bInterfaceClass&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;8 Mass Storage<br />&nbsp; &nbsp; &nbsp; bInterfaceSubClass&nbsp; &nbsp; &nbsp; 6 SCSI<br />&nbsp; &nbsp; &nbsp; bInterfaceProtocol&nbsp; &nbsp; &nbsp;80 Bulk (Zip)<br />&nbsp; &nbsp; &nbsp; iInterface&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;11 ZTE Mass Storage Device<br />&nbsp; &nbsp; &nbsp; Endpoint Descriptor:<br />&nbsp; &nbsp; &nbsp; &nbsp; bLength&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;7<br />&nbsp; &nbsp; &nbsp; &nbsp; bDescriptorType&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5<br />&nbsp; &nbsp; &nbsp; &nbsp; bEndpointAddress&nbsp; &nbsp; &nbsp;0x0f&nbsp; EP 15 OUT<br />&nbsp; &nbsp; &nbsp; &nbsp; bmAttributes&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Transfer Type&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Bulk<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Synch Type&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;None<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Usage Type&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Data<br />&nbsp; &nbsp; &nbsp; &nbsp; wMaxPacketSize&nbsp; &nbsp; &nbsp;0x4000&nbsp; 1x 0 bytes<br />&nbsp; &nbsp; &nbsp; &nbsp; bInterval&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0<br />&nbsp; &nbsp; &nbsp; Endpoint Descriptor:<br />&nbsp; &nbsp; &nbsp; &nbsp; bLength&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;7<br />&nbsp; &nbsp; &nbsp; &nbsp; bDescriptorType&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5<br />&nbsp; &nbsp; &nbsp; &nbsp; bEndpointAddress&nbsp; &nbsp; &nbsp;0x8f&nbsp; EP 15 IN<br />&nbsp; &nbsp; &nbsp; &nbsp; bmAttributes&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Transfer Type&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Bulk<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Synch Type&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;None<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Usage Type&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Data<br />&nbsp; &nbsp; &nbsp; &nbsp; wMaxPacketSize&nbsp; &nbsp; &nbsp;0x4000&nbsp; 1x 0 bytes<br />&nbsp; &nbsp; &nbsp; &nbsp; bInterval&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0<br />Device Status:&nbsp; &nbsp; &nbsp;0x0000</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>