<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Serial Ports</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p427">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">dc2rpt</div>
					<div class="post-datetime">
						17 May 2004, 00:55					</div>
				</div>
				<div class="post-content content">
					<p>Hi</p><p>Has anybody got the second serial port working ?</p><p>With cat/echo... i could write text on the first, but the second seems to be uninitialized.</p><p>dmesg says:<br />(...)<br />Serial driver version 5.05c (2001-07-08) with MANY_PORTS SHARE_IRQ SERIAL_PCI enabled<br />ttyS00 at 0xb8000300 (irq = 3) is a 16550A<br />ttyS01 at 0xb8000400 (irq = 0) is a 16550A<br />(...)</p><p>Is the irq=0 correct ? </p><p>cu Thomas</p><p>ps: With the new version of openwrt the problems with mips/mipsel and configure-scripts in a mountet buildroot have been gone and all is working very well. Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p439">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">rwhitby</div>
					<div class="post-datetime">
						18 May 2004, 17:20					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>Hi</p><p>Has anybody got the second serial port working ?</p><p>With cat/echo... i could write text on the first, but the second seems to be uninitialized.</p><p>dmesg says:<br />(...)<br />Serial driver version 5.05c (2001-07-08) with MANY_PORTS SHARE_IRQ SERIAL_PCI enabled<br />ttyS00 at 0xb8000300 (irq = 3) is a 16550A<br />ttyS01 at 0xb8000400 (irq = 0) is a 16550A<br />(...)</p><p>Is the irq=0 correct ? </p><p>cu Thomas</p><p>ps: With the new version of openwrt the problems with mips/mipsel and configure-scripts in a mountet buildroot have been gone and all is working very well. Thanks!</p></blockquote></div><p>Hmm - I designed the dual port mod, and I haven&#039;t been able to test it yet.</p><p>I&#039;ve been trying to compile minicom or mingetty or something simple like that, but have had no success.</p><p>So I don&#039;t even know whether my second serial port works or not!</p><p>-- Rod</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p461">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">dc2rpt</div>
					<div class="post-datetime">
						21 May 2004, 18:03					</div>
				</div>
				<div class="post-content content">
					<p>Hi</p><div class="quotebox"><blockquote><p>Hmm - I designed the dual port mod, and I haven&#039;t been able to test it yet.</p><p>I&#039;ve been trying to compile minicom or mingetty or something simple like that, but have had no success.</p><p>So I don&#039;t even know whether my second serial port works or not!</p></blockquote></div><p>On the first port a echo &quot;foo&quot; &gt;/dev/tts/0 does work, a cat /dev/tts/0 also.. But on the second not. </p><p>I compiled setserial already, but its output seems correct...</p><p>cu Thomas</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2256">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">hansliss</div>
					<div class="post-datetime">
						24 Sep 2004, 11:09					</div>
				</div>
				<div class="post-content content">
					<p>Second port works fine, but (at least with the stock firmware) seems to be initialized to 9600 baud by default. Configure it as a DCE port (or use a null modem cable), set your comm software to 9600 baud, no hw handshake. Then run</p><p>&nbsp; /bin/sh &gt; /dev/tts/1 2&gt;&amp;1 &lt; /dev/tts/1</p><p>and you should get a shell on the second port. It&#039;s obviously best to install a proper getty/login combo, tho.</p><p>One strange thing I&#039;ve encountered is when I do run getty/login on both ports and set them to 115200 baud. Then the second port feels significantly slower than the first one, even though they run at the same baudrate. Not that I&#039;ve tried to&nbsp; find out what causes this... Any ideas why?</p><p>/Hans</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p11182">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">danversj</div>
					<div class="post-datetime">
						23 Aug 2005, 07:00					</div>
				</div>
				<div class="post-content content">
					<p>I have added a USB-serial adaptor to my WL500g and am attempting to get a serial console up with it.</p><p>I can plug two adaptors in at once and they appear as /dev/usb/tts/0 and /dev/usb/tts/1 and I can send and receive data on both of them - I tested this by echo-ing text to them, and cat-ing text from them using a null-modem cable attached to my PC.</p><p>My PC is Windows XP and I&#039;ve been using two terminal programs - Hyperterminal and <a href="http://www.choung.net/Token2/">Token 2</a>.<br />I&#039;ve been attempting to get a serial console up on my PC using these programs.&nbsp; I&#039;ve been using</p><p> /bin/sh &gt; /dev/usb/tts/0 2&gt;&amp;1 &lt; /dev/usb/tts/0</p><p>or the getty included in the <a href="http://tracker.openwrt.org/packages/show.php?id=1696">TinyLogin package</a> on the WL500g.</p><p>In all cases, I get a serial console, but there are no newlines or carraige returns in the resulting text, making for frustrating and difficult reading on my screen.</p><p>Can anyone suggest why there are no newlines or carraige returns?&nbsp; Is the ash shell on OpenWRT not sending them, or (more likely) are Hyperterminal and Token 2 not interpreting them correctly?&nbsp; How can I fix this?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p11354">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">danversj</div>
					<div class="post-datetime">
						26 Aug 2005, 17:21					</div>
				</div>
				<div class="post-content content">
					<p>Just an update to say I&#039;ve tried again with this and not much luck.</p><p>I&#039;m still seeing text in my serial console with no linefeeds at all - the text just wraps when it gets to the end of each line making for an almost unreadable console.&nbsp; I&#039;ve installed Terra Term and it has the same problem as Hyperterminal and Token 2 - so I&#039;m starting to think it&#039;s a problem I&#039;m having with OpenWRT.&nbsp; I&#039;ve been setting all my terminal programs to vt100 emulation or autodetect, but nothing seems to work.</p><p>I&#039;ve installed the terminfo package so I now have terminfo files for vt100, etc.<br />I have added this line to /etc/profile<br /></p><div class="codebox"><pre><code>export TERMINFO=/usr/share/terminfo</code></pre></div><p>And I am executing my serial console like this:<br /></p><div class="codebox"><pre><code>root@OpenWrt:/# getty -L 9600 /dev/usb/tts/0 vt100</code></pre></div><p>But still I get no linefeeds on the console.</p><p>My wl500g is connected to my pc via a PL2303-chipset USB-serial adaptor, and I&#039;m using a 3-wire homemade null-modem cable - the wires are TD-RD, RD-TD and SG-SG.&nbsp; I didn&#039;t think I&#039;d need any of the handshaking or hardware flow control lines, and I still don&#039;t think I need them.</p><p>The only getty program that I can get to work at all is the Getty in the Tinylogin package.&nbsp; The agetty package in the hansliss repository and the mgetty package in the freifunk repository seem to not work under WhiteRussian RC2.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>