<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Default reset - tl-wr941nd v5</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 9 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p219563">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">marcositu</div>
					<div class="post-datetime">
						10 Dec 2013, 04:31					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I have a &quot;tl-wr941nd v5&quot; router with a &quot;LuCI&quot; interface (OpenWrt | OpenWrt Attitude Adjustment 12.09 | Load: 0.11 0.15 0.06).</p><p>I need to return it back to its original firmware, but when I attempt to load it, I get this message:</p><p>&quot;The uploaded image file does not contain a supported format. Make sure that you choose the generic image format for your platform.&quot;</p><p>I have tried the following firmwares:<br />- wr941nv3_en_3_13_9_up(120201).bin<br />- wr941ndv5_en_3_13_31_up_boot(130105).bin<br />- wr941ndv5_en_3_14_5_up_boot(130709).bin<br />- wr941ndv5_webrevert.bin</p><p>In addition, I tried resetting it to factory settings by using the button located on the back, but it did not work, as it did not restart.</p><p>If anyone can assist, I would greatly appreciate it.</p><p>Thank you</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219573">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">xcb567</div>
					<div class="post-datetime">
						10 Dec 2013, 09:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>wiki.openwrt.org wrote:</cite><blockquote><p><strong>&nbsp; Warning!</strong><br />This section describes actions that might damage your device or firmware. Proceed with care!<br />......<br />Flash via uboot or mtd, you <strong>cannot</strong> flash via WebGUI otherwise you will turn your router into brick.</p></blockquote></div><p>Check the wiki for more information, <a href="http://wiki.openwrt.org/toh/tp-link/tl-wr941nd#revert.to.original.firmware">http://wiki.openwrt.org/toh/tp-link/tl- … l.firmware</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219593">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">marcositu</div>
					<div class="post-datetime">
						10 Dec 2013, 15:42					</div>
				</div>
				<div class="post-content content">
					<p>thanks <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219673">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">marcositu</div>
					<div class="post-datetime">
						11 Dec 2013, 04:19					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve done what <a href="http://wiki.openwrt.org/toh/tp-link/tl-wr941nd#revert.to.original.firmware">http://wiki.openwrt.org/toh/tp-link/tl- … l.firmware</a> says (using firmware wr941ndv5_en_3_14_5_up_boot(130709).bin ), but now only the power light turns on. have I turned it into brick? <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219681">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						11 Dec 2013, 08:00					</div>
				</div>
				<div class="post-content content">
					<p>report precisely every operation and command you did.</p><p>did you save a log/screenshot of the terminal window?</p>											<p class="post-edited">(Last edited by <strong>nebbia88</strong> on 11 Dec 2013, 08:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219718">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">marcositu</div>
					<div class="post-datetime">
						11 Dec 2013, 15:54					</div>
				</div>
				<div class="post-content content">
					<p>I didn&#039;t capture screenshots and I don&#039;t have the logs</p><p>I execute the following commands:</p><p>cd /tmp/<br />dd if=wr941ndv5_en_3_14_5_up_boot(130709).bin of=tplink_boot.bin skip=257 bs=512<br />mtd -r write tplink_boot.bin firmware</p><p>Then it started to write and reboot.</p><p>In addition, I tried resetting it to factory settings by using the button located on the back, but it did not work, as it did not restart.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p331419">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">hojuruku</div>
					<div class="post-datetime">
						13 Jul 2016, 17:43					</div>
				</div>
				<div class="post-content content">
					<p>you should have found a genuine tp-link firmware file with out the _boot in the filename and verified it doesn&#039;t need to be stripped and just wrote it out to the firmware partition. Then from there if you wanted a newer bootloader then let tp-link upgrade it for you with the factory firmware. If your newest firmware isn&#039;t a _boot and you wanted the bootloader upgrade then find an older factory firmware before the bootloader.</p><p>Another idea is ERASE the region that the firmware is going into being mindful not to erase your art partition. Erasing the whole firmware mtd partition is everything but the art and the bootloader usually. Why? The config partition is also used by tp-link and it should be zero-ed out before the factory firmware first boots.</p><p>For future people about to make this cock up<br />~ $ dd if=routerbackup.bin bs=4 count=1 skip=37 2&gt;/dev/null | hexdump -v -n 4 -e &#039;1/1 &quot;%02x&quot;&#039;<br />00000000<br />(a 4mb entire eeprom backup)<br /> ~ $ dd if=kernel.img bs=4 count=1 skip=37 2&gt;/dev/null | hexdump -v -n 4 -e &#039;1/1 &quot;%02x&quot;&#039;<br />00000000<br />( a tp-link factory firmware kernel image )</p><p>Bugger that was mean&#039;t to be non-zero for the first one. I thought we had a new way of checking if firmware file was stripped or not. It should return someting different if the file name from tp-link has a _boot in it.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>