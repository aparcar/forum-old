<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> pppoe on t-dsl connection not working</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 20 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p269541">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">daaeda</div>
					<div class="post-datetime">
						22 Mar 2015, 02:56					</div>
				</div>
				<div class="post-content content">
					<p>Hi there,</p><p>I&#039;ve got an Speedport W 723V Router which I got by the Provider (Telekom) and which I really don&#039;t like.<br />Fortunately it has got a dsl modem in it. I can configure the Router/modem to behave like a modem only.</p><p>I entered my login data into the configs of my openwrt router. Unfortunately I cannot get it running I don&#039;t get a connection on the wan side <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>Here is what </p><div class="codebox"><pre><code>ifstatus wan</code></pre></div><p>produces</p><div class="codebox"><pre><code>{
        &quot;up&quot;: false,
        &quot;pending&quot;: true,
        &quot;available&quot;: true,
        &quot;autostart&quot;: true,
        &quot;proto&quot;: &quot;pppoe&quot;,
        &quot;device&quot;: &quot;eth0.2&quot;,
        &quot;data&quot;: {

        }
}</code></pre></div><p> <br />This is what the ppd.log shows</p><div class="codebox"><pre><code>Plugin rp-pppoe.so loaded.
RP-PPPoE plugin version 3.8p compiled against pppd 2.4.7
Send PPPOE Discovery V1T1 PADI session 0x0 length 12
 dst ff:ff:ff:ff:ff:ff  src cc:b2:55:d1:1b:2d
 [service-name] [host-uniq  00 00 5f 22]
Send PPPOE Discovery V1T1 PADI session 0x0 length 12
 dst ff:ff:ff:ff:ff:ff  src cc:b2:55:d1:1b:2d
 [service-name] [host-uniq  00 00 5f 22]
Send PPPOE Discovery V1T1 PADI session 0x0 length 12
 dst ff:ff:ff:ff:ff:ff  src cc:b2:55:d1:1b:2d
 [service-name] [host-uniq  00 00 5f 22]
Timeout waiting for PADO packets
Unable to complete PPPoE Discovery
Plugin rp-pppoe.so loaded.
RP-PPPoE plugin version 3.8p compiled against pppd 2.4.7
Send PPPOE Discovery V1T1 PADI session 0x0 length 12
 dst ff:ff:ff:ff:ff:ff  src cc:b2:55:d1:1b:2d
 [service-name] [host-uniq  00 00 5f 8b]
Send PPPOE Discovery V1T1 PADI session 0x0 length 12
 dst ff:ff:ff:ff:ff:ff  src cc:b2:55:d1:1b:2d
 [service-name] [host-uniq  00 00 5f 8b]
Send PPPOE Discovery V1T1 PADI session 0x0 length 12
 dst ff:ff:ff:ff:ff:ff  src cc:b2:55:d1:1b:2d
 [service-name] [host-uniq  00 00 5f 8b]
Timeout waiting for PADO packets
Unable to complete PPPoE Discovery
Plugin rp-pppoe.so loaded.
RP-PPPoE plugin version 3.8p compiled against pppd 2.4.7
Send PPPOE Discovery V1T1 PADI session 0x0 length 12
 dst ff:ff:ff:ff:ff:ff  src cc:b2:55:d1:1b:2d
 [service-name] [host-uniq  00 00 5f c8]
Send PPPOE Discovery V1T1 PADI session 0x0 length 12
 dst ff:ff:ff:ff:ff:ff  src cc:b2:55:d1:1b:2d
 [service-name] [host-uniq  00 00 5f c8]
Send PPPOE Discovery V1T1 PADI session 0x0 length 12
 dst ff:ff:ff:ff:ff:ff  src cc:b2:55:d1:1b:2d
 [service-name] [host-uniq  00 00 5f c8]
Timeout waiting for PADO packets
Unable to complete PPPoE Discovery
Plugin rp-pppoe.so loaded.
RP-PPPoE plugin version 3.8p compiled against pppd 2.4.7
Send PPPOE Discovery V1T1 PADI session 0x0 length 12
 dst ff:ff:ff:ff:ff:ff  src cc:b2:55:d1:1b:2d
 [service-name] [host-uniq  00 00 5f fe]
Send PPPOE Discovery V1T1 PADI session 0x0 length 12
 dst ff:ff:ff:ff:ff:ff  src cc:b2:55:d1:1b:2d
}</code></pre></div><br /><p>and this is how my network settings are</p><div class="codebox"><pre><code>config interface &#039;loopback&#039;
        option ifname &#039;lo&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;127.0.0.1&#039;
        option netmask &#039;255.0.0.0&#039;

config globals &#039;globals&#039;
        option ula_prefix &#039;fd9b:7a45:5ea7::/48&#039;

config interface &#039;lan&#039;
        option ifname &#039;eth0.1&#039;
        option type &#039;bridge&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;192.168.66.1&#039;
        option netmask &#039;255.255.255.0&#039;
        option ip6assign &#039;60&#039;

config interface &#039;wan&#039;
        option _orig_ifname &#039;eth0.2&#039;
        option _orig_bridge &#039;true&#039;
        option ifname &#039;eth0.2&#039;
        option proto &#039;pppoe&#039;
        option username &#039;xxxxxxxxxxxxyyyyyyyyyyyy#0001@t-online.de&#039;    
        option password &#039;zzzzzzzz&#039;

config interface &#039;wan6&#039;
        option ifname &#039;@wan&#039;
        option proto &#039;dhcpv6&#039;

config switch
        option name &#039;switch0&#039;
        option reset &#039;1&#039;
        option enable_vlan &#039;1&#039;

config switch_vlan
        option device &#039;switch0&#039;
        option vlan &#039;1&#039;
        option ports &#039;0t 1 2 3 4&#039;
        option vid &#039;1&#039;

config switch_vlan
        option device &#039;switch0&#039;
        option vlan &#039;2&#039;
        option ports &#039;0t 5&#039;
        option vid &#039;2&#039;</code></pre></div><p>x is Anschlusskennung <br />y is Zugangsnummer<br />z is password</p><p>so what is going wrong here?</p><p>I have absolutely no idea?</p><p>Can anybody help</p>											<p class="post-edited">(Last edited by <strong>daaeda</strong> on 22 Mar 2015, 02:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269560">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">moeller0</div>
					<div class="post-datetime">
						22 Mar 2015, 11:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>daaeda wrote:</cite><blockquote><p>Hi there,</p><p>I&#039;ve got an Speedport W 723V Router which I got by the Provider (Telekom) and which I really don&#039;t like.<br />Fortunately it has got a dsl modem in it. I can configure the Router/modem to behave like a modem only.</p><p>I entered my login data into the configs of my openwrt router. Unfortunately I cannot get it running I don&#039;t get a connection on the wan side <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>Here is what </p><div class="codebox"><pre><code>ifstatus wan</code></pre></div><p>produces</p><div class="codebox"><pre><code>{
        &quot;up&quot;: false,
        &quot;pending&quot;: true,
        &quot;available&quot;: true,
        &quot;autostart&quot;: true,
        &quot;proto&quot;: &quot;pppoe&quot;,
        &quot;device&quot;: &quot;eth0.2&quot;,
        &quot;data&quot;: {

        }
}</code></pre></div><p> <br />This is what the ppd.log shows</p><div class="codebox"><pre><code>Plugin rp-pppoe.so loaded.
RP-PPPoE plugin version 3.8p compiled against pppd 2.4.7
Send PPPOE Discovery V1T1 PADI session 0x0 length 12
 dst ff:ff:ff:ff:ff:ff  src cc:b2:55:d1:1b:2d
 [service-name] [host-uniq  00 00 5f 22]
Send PPPOE Discovery V1T1 PADI session 0x0 length 12
 dst ff:ff:ff:ff:ff:ff  src cc:b2:55:d1:1b:2d
 [service-name] [host-uniq  00 00 5f 22]
Send PPPOE Discovery V1T1 PADI session 0x0 length 12
 dst ff:ff:ff:ff:ff:ff  src cc:b2:55:d1:1b:2d
 [service-name] [host-uniq  00 00 5f 22]
Timeout waiting for PADO packets
Unable to complete PPPoE Discovery
Plugin rp-pppoe.so loaded.
RP-PPPoE plugin version 3.8p compiled against pppd 2.4.7
Send PPPOE Discovery V1T1 PADI session 0x0 length 12
 dst ff:ff:ff:ff:ff:ff  src cc:b2:55:d1:1b:2d
 [service-name] [host-uniq  00 00 5f 8b]
Send PPPOE Discovery V1T1 PADI session 0x0 length 12
 dst ff:ff:ff:ff:ff:ff  src cc:b2:55:d1:1b:2d
 [service-name] [host-uniq  00 00 5f 8b]
Send PPPOE Discovery V1T1 PADI session 0x0 length 12
 dst ff:ff:ff:ff:ff:ff  src cc:b2:55:d1:1b:2d
 [service-name] [host-uniq  00 00 5f 8b]
Timeout waiting for PADO packets
Unable to complete PPPoE Discovery
Plugin rp-pppoe.so loaded.
RP-PPPoE plugin version 3.8p compiled against pppd 2.4.7
Send PPPOE Discovery V1T1 PADI session 0x0 length 12
 dst ff:ff:ff:ff:ff:ff  src cc:b2:55:d1:1b:2d
 [service-name] [host-uniq  00 00 5f c8]
Send PPPOE Discovery V1T1 PADI session 0x0 length 12
 dst ff:ff:ff:ff:ff:ff  src cc:b2:55:d1:1b:2d
 [service-name] [host-uniq  00 00 5f c8]
Send PPPOE Discovery V1T1 PADI session 0x0 length 12
 dst ff:ff:ff:ff:ff:ff  src cc:b2:55:d1:1b:2d
 [service-name] [host-uniq  00 00 5f c8]
Timeout waiting for PADO packets
Unable to complete PPPoE Discovery
Plugin rp-pppoe.so loaded.
RP-PPPoE plugin version 3.8p compiled against pppd 2.4.7
Send PPPOE Discovery V1T1 PADI session 0x0 length 12
 dst ff:ff:ff:ff:ff:ff  src cc:b2:55:d1:1b:2d
 [service-name] [host-uniq  00 00 5f fe]
Send PPPOE Discovery V1T1 PADI session 0x0 length 12
 dst ff:ff:ff:ff:ff:ff  src cc:b2:55:d1:1b:2d
}</code></pre></div><br /><p>and this is how my network settings are</p><div class="codebox"><pre><code>config interface &#039;loopback&#039;
        option ifname &#039;lo&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;127.0.0.1&#039;
        option netmask &#039;255.0.0.0&#039;

config globals &#039;globals&#039;
        option ula_prefix &#039;fd9b:7a45:5ea7::/48&#039;

config interface &#039;lan&#039;
        option ifname &#039;eth0.1&#039;
        option type &#039;bridge&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;192.168.66.1&#039;
        option netmask &#039;255.255.255.0&#039;
        option ip6assign &#039;60&#039;

config interface &#039;wan&#039;
        option _orig_ifname &#039;eth0.2&#039;
        option _orig_bridge &#039;true&#039;
        option ifname &#039;eth0.2&#039;
        option proto &#039;pppoe&#039;
        option username &#039;xxxxxxxxxxxxyyyyyyyyyyyy#0001@t-online.de&#039;    
        option password &#039;zzzzzzzz&#039;

config interface &#039;wan6&#039;
        option ifname &#039;@wan&#039;
        option proto &#039;dhcpv6&#039;

config switch
        option name &#039;switch0&#039;
        option reset &#039;1&#039;
        option enable_vlan &#039;1&#039;

config switch_vlan
        option device &#039;switch0&#039;
        option vlan &#039;1&#039;
        option ports &#039;0t 1 2 3 4&#039;
        option vid &#039;1&#039;

config switch_vlan
        option device &#039;switch0&#039;
        option vlan &#039;2&#039;
        option ports &#039;0t 5&#039;
        option vid &#039;2&#039;</code></pre></div><p>x is Anschlusskennung <br />y is Zugangsnummer<br />z is password</p><p>so what is going wrong here?</p><p>I have absolutely no idea?</p><p>Can anybody help</p></blockquote></div><br /><p>&nbsp; &nbsp; &nbsp; &nbsp; Hi daaeda,</p><p>I believe &#039;xxxxxxxxxxxxyyyyyyyyyyyy#0001@t-online.de&#039; this to be wrong. The &#039;#&#039; hash between the Zugangsnummer and the Mitbenutzernummer looks wrong. At least on my link I use the same logic to create the username, but without the # and it seems to work (but maybe this depends on the actual TAL). And I also use a speed port w723v typ A as &quot;modem&quot;* (note, you need to activate &quot;Gerät als DSL-Modem nutzen (PPPoE Pass-Through)&quot; and press the &quot;Internet sperren&quot; button at the bottom of the &quot;Startseite&quot; of the modems GUI, as DTAG does not allow concurrent pppoe-logins of the same account, but I guess you know that already).</p><p>Gruss<br />&nbsp; &nbsp; &nbsp; &nbsp; M.</p><p>* the speed port is not acting as true bridging modem, it insists on terminating a potential VLAN (say in case of a DTAG vdsl2 link)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269586">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">daaeda</div>
					<div class="post-datetime">
						22 Mar 2015, 17:44					</div>
				</div>
				<div class="post-content content">
					<p>Hi thanks for your reply</p><p>I tried both with and without #. I found some hints in telekom forums, that when the second number is only 11 digits you net the # sign. I deleted the login data from the webinterface of the speedport machine. <br />I enabled using it as a modem like you said. It did not work anyway.</p><p>I found someone trying to do this with vdsl and he had to configure som vlans, but I did not get it what I had to do ;(</p><p>It&#039;s an old adsl connection not a vdsl connection</p>											<p class="post-edited">(Last edited by <strong>daaeda</strong> on 22 Mar 2015, 17:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269588">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">moeller0</div>
					<div class="post-datetime">
						22 Mar 2015, 18:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>daaeda wrote:</cite><blockquote><p>Hi thanks for your reply</p><p>I tried both with and without #. I found some hints in telekom forums, that when the second number is only 11 digits you net the # sign. I deleted the login data from the webinterface of the speedport machine. <br />I enabled using it as a modem like you said. It did not work anyway.</p><p>I found someone trying to do this with vdsl and he had to configure som vlans, but I did not get it what I had to do ;(</p><p>It&#039;s an old adsl connection not a vdsl connection</p></blockquote></div><p>Hi daaeda,</p><p>sorry, I guess than I can not offer any more help; I did not delete any login data in the speedport but only used the &quot;Internet sperren&quot; button to deactivate the speedport&#039;s pppoe login... Now I wonder whether DTAG might block pppoe login attempts for some time after a (non-clean) shutdown of the previous session, you might want to wait for 15 minutes and/or power cycle the speedport and try again. Also you could enable more verbose logging in openwrt&#039;s ppp deamon (see /etc/ppp/options and add:<br />debug<br />logfile /tmp/ppp_log<br />)<br />&nbsp; &nbsp; &nbsp; &nbsp; BTW you have a typ A as well, maybe the typ B behaves differently. For DTAG without entertain they use VLAN7 (with entertain the iptv would be vlan8 I believe and data still on vlan7, but there ,ight be exeptions), but most likely not on a normal ADSL link (even though, back when I was on ADSL2+ for a few weeks it looked like there was a hidden vlan tag on the link.)</p><p>Best Regards<br />&nbsp; &nbsp; &nbsp; &nbsp; M.</p><p>P.S.: see <a href="https://forum.openwrt.org/viewtopic.php?id=55158">https://forum.openwrt.org/viewtopic.php?id=55158</a> for a somewhat voodoo solution... (but if that helps it might allow further investigation)</p>											<p class="post-edited">(Last edited by <strong>moeller0</strong> on 22 Mar 2015, 18:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269718">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">daaeda</div>
					<div class="post-datetime">
						23 Mar 2015, 19:48					</div>
				</div>
				<div class="post-content content">
					<p>unfortunately I cannot test this for a longer time since the machine is at my parents&#039; and I will not be there for a longer time.</p><p>But vlan tagging should bother the establishing of a pppoe connection? It should only get problems with the connection over this link? Or am I getting somethin wrong here.</p><p>The mentioned article wants to restart the modem/speedport.<br />I did not do this either since I had not had a lot of time, an in my opinion something like this should work without power cycle the speedport.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269731">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">moeller0</div>
					<div class="post-datetime">
						23 Mar 2015, 22:28					</div>
				</div>
				<div class="post-content content">
					<p>Hi daaeda,</p><div class="quotebox"><cite>daaeda wrote:</cite><blockquote><p>unfortunately I cannot test this for a longer time since the machine is at my parents&#039; and I will not be there for a longer time.</p><p>But vlan tagging should bother the establishing of a pppoe connection? It should only get problems with the connection over this link? Or am I getting somethin wrong here.</p></blockquote></div><p>&nbsp; &nbsp; &nbsp; &nbsp; I am not an expert but your pppoe trace looks like your router tries to talk to someone and gets no response back, so using the wrong VLAN might explain this... If the ISP is running everything over a VLAN untagged packets might just be dropped? But again I am not an expert...<br /></p><div class="quotebox"><cite>daaeda wrote:</cite><blockquote><p>The mentioned article wants to restart the modem/speedport.<br />I did not do this either since I had not had a lot of time, an in my opinion something like this should work without power cycle the speedport.</p></blockquote></div><p>&nbsp; &nbsp; &nbsp; &nbsp; The operational word here is &quot;should&quot; and I agree; I called it a voodoo solution as I do not understand why/how it should work, but it still might be worthwhile to try it, if it works I am certain thee is a reasonable explanation why...</p><p>Best Regards<br />&nbsp; &nbsp; &nbsp; &nbsp; M.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>