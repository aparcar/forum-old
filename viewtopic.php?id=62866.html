<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> RPI2 Custom Compile with LUCI and MWAN3</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 8 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p312273">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">pyrater</div>
					<div class="post-datetime">
						21 Feb 2016, 23:30					</div>
				</div>
				<div class="post-content content">
					<p>Hello all. I am trying to learn as much as i can here so please forgive my noobish questions. I am trying to compile openwrt for the RPI2 (BRCM2709). It has a stable build for 15.05, however, it does not have the latest kernel needed for multiwan. </p><p>There i have compiled my own from source using:<br /><a href="http://dab-embedded.com/en/blogs/openwrt-on-arm-based-platform-raspberry-pi-2/">http://dab-embedded.com/en/blogs/openwr … erry-pi-2/</a></p><p>However when i change anything (like trying to include luci) the build always fails. In my desperation i pulled the config.diff file from <a href="https://downloads.openwrt.org/chaos_calmer/15.05/brcm2708/bcm2709/">https://downloads.openwrt.org/chaos_cal … 8/bcm2709/</a> and ran a make defconfig This is still resulting in a failure to build the packages. </p><p>&quot;&quot;<br />make[3]: Entering directory &#039;/home/joe/openwrt1/toolchain/gcc/minimal&#039;<br />make[3]: Nothing to be done for &#039;prepare&#039;.<br />make[3]: Leaving directory &#039;/home/joe/openwrt1/toolchain/gcc/minimal&#039;<br />make[3]: Entering directory &#039;/home/joe/openwrt1/toolchain/gcc/minimal&#039;<br />export SHELL=&quot;bash&quot;; make CFLAGS=&quot;-O2 -I/home/joe/openwrt1/staging_dir/host/include -I/home/joe/openwrt1/staging_dir/host/usr/include &quot; CFLAGS_FOR_TARGET=&quot;-Os -pipe -march=armv7-a -mtune=cortex-a7 -mfpu=neon-vfpv4 -fno-caller-saves -fno-plt -fhonour-copts -Wno-error=unused-but-set-variable -Wno-error=unused-result -mfloat-abi=hard&quot; CXXFLAGS_FOR_TARGET=&quot;-Os -pipe -march=armv7-a -mtune=cortex-a7 -mfpu=neon-vfpv4 -fno-caller-saves -fno-plt -fhonour-copts -Wno-error=unused-but-set-variable -Wno-error=unused-result -mfloat-abi=hard&quot;&nbsp; &nbsp;-C /home/joe/openwrt1/build_dir/toolchain-arm_cortex-a7+neon-vfpv4_gcc-5.2.0_musl-1.1.12_eabi/gcc-5.2.0-minimal all-gcc all-target-libgcc<br />make[4]: Entering directory &#039;/home/joe/openwrt1/build_dir/toolchain-arm_cortex-a7+neon-vfpv4_gcc-5.2.0_musl-1.1.12_eabi/gcc-5.2.0-minimal&#039;<br />Configuring in ./intl<br />configure: loading cache ./config.cache<br />configure: error: `CFLAGS&#039; has changed since the previous run:<br />configure:&nbsp; &nbsp;former value:&nbsp; `-O2 -I/home/joe/openwrt/staging_dir/host/include -I/home/joe/openwrt/staging_dir/host/usr/include &#039;<br />configure:&nbsp; &nbsp;current value: `-O2 -I/home/joe/openwrt1/staging_dir/host/include -I/home/joe/openwrt1/staging_dir/host/usr/include &#039;<br />configure: error: in `/home/joe/openwrt1/build_dir/toolchain-arm_cortex-a7+neon-vfpv4_gcc-5.2.0_musl-1.1.12_eabi/gcc-5.2.0-minimal/intl&#039;:<br />configure: error: changes in the environment can compromise the build<br />configure: error: run `make distclean&#039; and/or `rm ./config.cache&#039; and start over<br />Makefile:5296: recipe for target &#039;configure-intl&#039; failed<br />make[4]: *** [configure-intl] Error 1<br />make[4]: Leaving directory &#039;/home/joe/openwrt1/build_dir/toolchain-arm_cortex-a7+neon-vfpv4_gcc-5.2.0_musl-1.1.12_eabi/gcc-5.2.0-minimal&#039;<br />Makefile:46: recipe for target &#039;/home/joe/openwrt1/build_dir/toolchain-arm_cortex-a7+neon-vfpv4_gcc-5.2.0_musl-1.1.12_eabi/gcc-5.2.0-minimal/.built&#039; failed<br />make[3]: *** [/home/joe/openwrt1/build_dir/toolchain-arm_cortex-a7+neon-vfpv4_gcc-5.2.0_musl-1.1.12_eabi/gcc-5.2.0-minimal/.built] Error 2<br />make[3]: Leaving directory &#039;/home/joe/openwrt1/toolchain/gcc/minimal&#039;<br />toolchain/Makefile:81: recipe for target &#039;toolchain/gcc/minimal/compile&#039; failed<br />make[2]: *** [toolchain/gcc/minimal/compile] Error 2<br />make[2]: Leaving directory &#039;/home/joe/openwrt1&#039;<br />toolchain/Makefile:80: recipe for target &#039;/home/joe/openwrt1/staging_dir/toolchain-arm_cortex-a7+neon-vfpv4_gcc-5.2.0_musl-1.1.12_eabi/stamp/.toolchain_install&#039; failed<br />make[1]: *** [/home/joe/openwrt1/staging_dir/toolchain-arm_cortex-a7+neon-vfpv4_gcc-5.2.0_musl-1.1.12_eabi/stamp/.toolchain_install] Error 2<br />make[1]: Leaving directory &#039;/home/joe/openwrt1&#039;<br />/home/joe/openwrt1/include/toplevel.mk:192: recipe for target &#039;world&#039; failed<br />make: *** [world] Error 2<br />&quot;&quot;</p><p>The only success i have had has been a BAREBONES build that includes nothing but the CLI and the target system. Which wouldnt be a problem if i could add the packages with okpg however that does not work either due to bad signatures...? </p><p>&quot;<br />dest root /<br />dest ram /tmp<br />lists_dir ext /var/opkg-lists<br />option overlay_root /overlay<br />option check_signature 0<br />src/gz chaos_calmer_targets <a href="http://downloads.openwrt.org/chaos_calmer/15.05-rc1/brcm2708/bcm2709/packages/targets">http://downloads.openwrt.org/chaos_calm … es/targets</a><br />src/gz chaos_calmer_base <a href="http://downloads.openwrt.org/latest/brcm2708/bcm2709/packages/base">http://downloads.openwrt.org/latest/brc … kages/base</a><br />src/gz chaos_calmer_luci <a href="http://downloads.openwrt.org/latest/brcm2708/bcm2709/packages/luci">http://downloads.openwrt.org/latest/brc … kages/luci</a><br />src/gz chaos_calmer_packages <a href="http://downloads.openwrt.org/latest/brcm2708/bcm2709/packages/packages">http://downloads.openwrt.org/latest/brc … s/packages</a><br />src/gz chaos_calmer_routing <a href="http://downloads.openwrt.org/latest/brcm2708/bcm2709/packages/routing">http://downloads.openwrt.org/latest/brc … es/routing</a><br />src/gz chaos_calmer_telephony <a href="http://downloads.openwrt.org/latest/brcm2708/bcm2709/packages/telephony">http://downloads.openwrt.org/latest/brc … /telephony</a><br />src/gz chaos_calmer_management <a href="http://downloads.openwrt.org/latest/brcm2708/bcm2709/packages/management">http://downloads.openwrt.org/latest/brc … management</a><br />&quot;</p><p>Any advice is appreciated!!</p>											<p class="post-edited">(Last edited by <strong>pyrater</strong> on 21 Feb 2016, 23:36)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>