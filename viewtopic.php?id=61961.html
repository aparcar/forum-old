<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Help with VPN setup</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 6 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p306223">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Gboy</div>
					<div class="post-datetime">
						4 Jan 2016, 22:14					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys, in the last 3 days I&#039;ve been trying to setup a VPN client in my OpenWRT router (TP-Link WR841ND v8 with this build <a href="https://forum.openwrt.org/viewtopic.php?id=54604">https://forum.openwrt.org/viewtopic.php?id=54604</a> ; thanks amq, can&#039;t thank you enough!!).</p><p>I&#039;m following this guide <a href="https://wiki.openwrt.org/doc/howto/vpn.openvpn">https://wiki.openwrt.org/doc/howto/vpn.openvpn</a> and adjusting the settings for my vpn setup. I configured the VPN client in my router correctly since the log doesn&#039;t report any error and the tunnel stays running, here&#039;s what&#039;s inside the openvpn.log file:<br /></p><div class="codebox"><pre><code>Thu Jan 14 19:28:30 2016 OpenVPN 2.3.6 mips-openwrt-linux-gnu [SSL (PolarSSL)] [LZO] [EPOLL] [MH] [IPv6] built on Sep 13 2015
Thu Jan 14 19:28:30 2016 library versions: PolarSSL 1.3.11, LZO 2.08
Thu Jan 14 19:28:30 2016 Control Channel Authentication: using &#039;/etc/openvpn/ta.key&#039; as a OpenVPN static key file
Thu Jan 14 19:28:30 2016 Outgoing Control Channel Authentication: Using 160 bit message hash &#039;SHA1&#039; for HMAC authentication
Thu Jan 14 19:28:30 2016 Incoming Control Channel Authentication: Using 160 bit message hash &#039;SHA1&#039; for HMAC authentication
Thu Jan 14 19:28:30 2016 Socket Buffers: R=[163840-&gt;131072] S=[163840-&gt;131072]
Thu Jan 14 19:28:30 2016 UDPv4 link local: [undef]
Thu Jan 14 19:28:31 2016 UDPv4 link remote: [AF_INET]xxx
Thu Jan 14 19:28:31 2016 TLS: Initial packet from [AF_INET]xxx:2049, sid=a82578cc a832ffc5
Thu Jan 14 19:28:31 2016 VERIFY OK: depth=1, C=MT, ST=Malta, L=Malta, O=xxxx.net, CN=xxx.net CA, emailAddress=support@xxx.net
Thu Jan 14 19:28:31 2016 VERIFY OK: nsCertType=SERVER
Thu Jan 14 19:28:31 2016 VERIFY OK: depth=0, C=MT, ST=Malta, L=Malta, O=xxx.net, CN=rxxx.net, emailAddress=support@xxx.net
Thu Jan 14 19:28:35 2016 Data Channel Encrypt: Cipher &#039;AES-256-CBC&#039; initialized with 256 bit key
Thu Jan 14 19:28:35 2016 Data Channel Encrypt: Using 160 bit message hash &#039;SHA1&#039; for HMAC authentication
Thu Jan 14 19:28:35 2016 Data Channel Decrypt: Cipher &#039;AES-256-CBC&#039; initialized with 256 bit key
Thu Jan 14 19:28:35 2016 Data Channel Decrypt: Using 160 bit message hash &#039;SHA1&#039; for HMAC authentication
Thu Jan 14 19:28:35 2016 Control Channel: TLSv1.0, cipher TLS-DHE-RSA-WITH-AES-256-CBC-SHA, 4096 bit RSA
Thu Jan 14 19:28:35 2016 [xxxpn.net] Peer Connection Initiated with [AF_INET]xxx:2049
Thu Jan 14 19:28:37 2016 SENT CONTROL [xxx.net]: &#039;PUSH_REQUEST&#039; (status=1)
Thu Jan 14 19:28:37 2016 PUSH: Received control message: &#039;PUSH_REPLY,redirect-gateway def1,explicit-exit-notify 3,route-gateway 10.23.16.1,topology subnet,ping 10,ping-restart 60,dhcp-option DNS 10.23.0.1,ifconfig 10.23.16.2 255.255.252.0&#039;
Thu Jan 14 19:28:37 2016 Options error: Unrecognized option or missing parameter(s) in [PUSH-OPTIONS]:2: explicit-exit-notify (2.3.6)
Thu Jan 14 19:28:37 2016 OPTIONS IMPORT: timers and/or timeouts modified
Thu Jan 14 19:28:37 2016 OPTIONS IMPORT: --ifconfig/up options modified
Thu Jan 14 19:28:37 2016 OPTIONS IMPORT: route options modified
Thu Jan 14 19:28:37 2016 OPTIONS IMPORT: route-related options modified
Thu Jan 14 19:28:37 2016 OPTIONS IMPORT: --ip-win32 and/or --dhcp-option options modified
Thu Jan 14 19:28:37 2016 TUN/TAP device tun0 opened
Thu Jan 14 19:28:37 2016 TUN/TAP TX queue length set to 100
Thu Jan 14 19:28:37 2016 do_ifconfig, tt-&gt;ipv6=0, tt-&gt;did_ifconfig_ipv6_setup=0
Thu Jan 14 19:28:37 2016 /sbin/ifconfig tun0 10.23.16.2 netmask 255.255.252.0 mtu 1500 broadcast 10.23.19.255
Thu Jan 14 19:28:37 2016 /sbin/route add -net xxx netmask 255.255.255.255 gw xxx
Thu Jan 14 19:28:37 2016 /sbin/route add -net 0.0.0.0 netmask 128.0.0.0 gw 10.23.16.1
Thu Jan 14 19:28:37 2016 /sbin/route add -net 128.0.0.0 netmask 128.0.0.0 gw 10.23.16.1
Thu Jan 14 19:28:37 2016 Initialization Sequence Completed</code></pre></div><p>and here what&#039;s inside the /etc/config/openvpn file:<br /></p><div class="codebox"><pre><code>config openvpn &#039;Bella&#039;
    option client &#039;1&#039;
    option nobind &#039;1&#039;
    option dev &#039;tun&#039;
    option proto &#039;udp&#039;
    option remote &#039;xxx&#039;
    option port &#039;2049&#039;
    option auth_user_pass &#039;/etc/openvpn/pass&#039;
    option ca &#039;/etc/openvpn/ca.crt&#039;
    option cert &#039;/etc/openvpn/client1.crt&#039;
    option key &#039;/etc/openvpn/client1.key&#039;
    option tls_auth &#039;/etc/openvpn/ta.key 1&#039;
    option resolv_retry &#039;infinite&#039;
    option auth_nocache &#039;1&#039;
    option persist_tun &#039;1&#039;
    option persist_key &#039;1&#039;
    option cipher &#039;AES-256-CBC&#039;
    option ns_cert_type &#039;server&#039;
    option verb &#039;3&#039;
    option comp_lzo &#039;yes&#039;
    option log &#039;/etc/openvpn/openvpn.log&#039;
    option enabled &#039;1&#039;</code></pre></div><p>The problem is that once I activate the VPN client on the router any lan or wireless client can&#039;t browse the internet but router can ping any address and resolve hostnames; the error I get on a windows host is:<br />Response from 192.168.1.1: The destination port is not reachable<br />Here&#039;s a screenshot of the result of the ping command executed from the windows client (left) and from the router (right):<br /><a href="http://i.imgur.com/3d00lFj.png">http://i.imgur.com/3d00lFj.png</a></p><p>I noticed that if I connect with the windows client to the same VPN server (the one I setup a client on the router) with the OpenVPN program I can browse the internet normally. If I try to connect to any other server from my VPN provider other than the one I setup a tunnel in my router it won&#039;t connect and I don&#039;t have connectivity. I don&#039;t have enough knowledge to understand why this happens though <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /> <br />EDIT:it&#039;s a routing problem</p><p>Here the contenct of the /etc/config/firewall file:<br /></p><div class="codebox"><pre><code>config defaults
    option syn_flood &#039;1&#039;
    option input &#039;ACCEPT&#039;
    option output &#039;ACCEPT&#039;
    option forward &#039;REJECT&#039;

config zone
    option name &#039;lan&#039;
    list network &#039;lan&#039;
    option input &#039;ACCEPT&#039;
    option output &#039;ACCEPT&#039;
    option forward &#039;ACCEPT&#039;

config zone
    option name &#039;wan&#039;
    list network &#039;wan&#039;
    list network &#039;wan6&#039;
    option input &#039;REJECT&#039;
    option output &#039;ACCEPT&#039;
    option forward &#039;REJECT&#039;
    option masq &#039;1&#039;
    option mtu_fix &#039;1&#039;

config forwarding
    option src &#039;lan&#039;
    option dest &#039;wan&#039;

config rule
    option name &#039;Allow-DHCP-Renew&#039;
    option src &#039;wan&#039;
    option proto &#039;udp&#039;
    option dest_port &#039;68&#039;
    option target &#039;ACCEPT&#039;
    option family &#039;ipv4&#039;

config rule
    option name &#039;Allow-Ping&#039;
    option src &#039;wan&#039;
    option proto &#039;icmp&#039;
    option icmp_type &#039;echo-request&#039;
    option family &#039;ipv4&#039;
    option target &#039;ACCEPT&#039;

config rule
    option name &#039;Allow-IGMP&#039;
    option src &#039;wan&#039;
    option proto &#039;igmp&#039;
    option family &#039;ipv4&#039;
    option target &#039;ACCEPT&#039;

config rule
    option name &#039;Allow-DHCPv6&#039;
    option src &#039;wan&#039;
    option proto &#039;udp&#039;
    option src_ip &#039;fe80::/10&#039;
    option src_port &#039;547&#039;
    option dest_ip &#039;fe80::/10&#039;
    option dest_port &#039;546&#039;
    option family &#039;ipv6&#039;
    option target &#039;ACCEPT&#039;

config rule
    option name &#039;Allow-MLD&#039;
    option src &#039;wan&#039;
    option proto &#039;icmp&#039;
    option src_ip &#039;fe80::/10&#039;
    list icmp_type &#039;130/0&#039;
    list icmp_type &#039;131/0&#039;
    list icmp_type &#039;132/0&#039;
    list icmp_type &#039;143/0&#039;
    option family &#039;ipv6&#039;
    option target &#039;ACCEPT&#039;

config rule
    option name &#039;Allow-ICMPv6-Input&#039;
    option src &#039;wan&#039;
    option proto &#039;icmp&#039;
    list icmp_type &#039;echo-request&#039;
    list icmp_type &#039;echo-reply&#039;
    list icmp_type &#039;destination-unreachable&#039;
    list icmp_type &#039;packet-too-big&#039;
    list icmp_type &#039;time-exceeded&#039;
    list icmp_type &#039;bad-header&#039;
    list icmp_type &#039;unknown-header-type&#039;
    list icmp_type &#039;router-solicitation&#039;
    list icmp_type &#039;neighbour-solicitation&#039;
    list icmp_type &#039;router-advertisement&#039;
    list icmp_type &#039;neighbour-advertisement&#039;
    option limit &#039;1000/sec&#039;
    option family &#039;ipv6&#039;
    option target &#039;ACCEPT&#039;

config rule
    option name &#039;Allow-ICMPv6-Forward&#039;
    option src &#039;wan&#039;
    option dest &#039;*&#039;
    option proto &#039;icmp&#039;
    list icmp_type &#039;echo-request&#039;
    list icmp_type &#039;echo-reply&#039;
    list icmp_type &#039;destination-unreachable&#039;
    list icmp_type &#039;packet-too-big&#039;
    list icmp_type &#039;time-exceeded&#039;
    list icmp_type &#039;bad-header&#039;
    list icmp_type &#039;unknown-header-type&#039;
    option limit &#039;1000/sec&#039;
    option family &#039;ipv6&#039;
    option target &#039;ACCEPT&#039;

config include
    option path &#039;/etc/firewall.user&#039;

config rule
    option src &#039;wan&#039;
    option dest &#039;lan&#039;
    option proto &#039;esp&#039;
    option target &#039;ACCEPT&#039;

config rule
    option src &#039;wan&#039;
    option dest &#039;lan&#039;
    option dest_port &#039;500&#039;
    option proto &#039;udp&#039;
    option target &#039;ACCEPT&#039;

config include &#039;miniupnpd&#039;
    option type &#039;script&#039;
    option path &#039;/usr/share/miniupnpd/firewall.include&#039;
    option family &#039;any&#039;
    option reload &#039;1&#039;

config rule
    option name &#039;Allow-OpenVPN-Inbound&#039;
    option target &#039;ACCEPT&#039;
    option src &#039;*&#039;
    option proto &#039;udp&#039;
    option dest_port &#039;2094&#039;</code></pre></div><p>Here the contenct of the /etc/config/network file:<br /></p><div class="codebox"><pre><code>config interface &#039;loopback&#039;
    option ifname &#039;lo&#039;
    option proto &#039;static&#039;
    option ipaddr &#039;127.0.0.1&#039;
    option netmask &#039;255.0.0.0&#039;

config globals &#039;globals&#039;
    option ula_prefix &#039;fd22:c6f5:0910::/48&#039;

config interface &#039;lan&#039;
    option ifname &#039;eth1&#039;
    option force_link &#039;1&#039;
    option type &#039;bridge&#039;
    option proto &#039;static&#039;
    option ipaddr &#039;192.168.1.1&#039;
    option netmask &#039;255.255.255.0&#039;
    option ip6assign &#039;60&#039;
    option dns &#039;85.25.105.193&#039;

config interface &#039;wan&#039;
    option ifname &#039;eth0&#039;
    option _orig_ifname &#039;eth0&#039;
    option _orig_bridge &#039;false&#039;
    option proto &#039;pppoe&#039;
    option username &#039;xxxx&#039;
    option password &#039;xxxx&#039;
    option peerdns &#039;0&#039;
    option dns &#039;85.25.105.193&#039;

config interface &#039;wan6&#039;
    option ifname &#039;eth0&#039;
    option proto &#039;dhcpv6&#039;
    option reqaddress &#039;try&#039;
    option reqprefix &#039;auto&#039;

config switch
    option name &#039;switch0&#039;
    option reset &#039;1&#039;
    option enable_vlan &#039;1&#039;

config switch_vlan
    option device &#039;switch0&#039;
    option vlan &#039;1&#039;
    option ports &#039;0 1 2 3 4&#039;

config interface &#039;vpn0&#039;
    option ifname &#039;tun0&#039;
    option proto &#039;none&#039;
    option auto &#039;1&#039;</code></pre></div><br /><p>I&#039;ve another question, which is not related to my problem but to the VPN stuff: if I connected from the windows client with the OpenVPN program and I visit the site ipleak.net it still shows my ISP DNS even though I setup my router to use a different DNS.<br />EDIT: Had to set the WAN DNS not the LAN DNS</p><p>Sorry for my not-so-good english and hope somebody mroe experienced can tell me what I&#039;m doing wrong.</p>											<p class="post-edited">(Last edited by <strong>Gboy</strong> on 29 Jan 2016, 15:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306255">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						5 Jan 2016, 04:22					</div>
				</div>
				<div class="post-content content">
					<p>Try this wiki instead.&nbsp; <a href="https://wiki.openwrt.org/doc/howto/openvpn-streamlined-server-setup">https://wiki.openwrt.org/doc/howto/open … rver-setup</a></p><p>Looks like you might be missing some entries for forwarding in your firewall.</p><p>Your DNS is not configured in the correct place.&nbsp; Network=&gt;Interfaces=&gt;WAN =&gt; Use Custom DNS Servers</p><p>Is the script from your provider?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306309">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Gboy</div>
					<div class="post-datetime">
						5 Jan 2016, 16:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>RangerZ wrote:</cite><blockquote><p>Try this wiki instead.&nbsp; <a href="https://wiki.openwrt.org/doc/howto/openvpn-streamlined-server-setup">https://wiki.openwrt.org/doc/howto/open … rver-setup</a></p><p>Looks like you might be missing some entries for forwarding in your firewall.</p><p>Your DNS is not configured in the correct place.&nbsp; Network=&gt;Interfaces=&gt;WAN =&gt; Use Custom DNS Servers</p><p>Is the script from your provider?</p></blockquote></div><p>Alright I fixed the DNS thing, thank you!</p><p>The tutorial you linked me is NOT what Im trying to do.<br />I&#039;ve ppoe access for eth0 (WAN) and want all the LAN traffic to go through a remote vpn server configured as a client. Is that possible?</p>											<p class="post-edited">(Last edited by <strong>Gboy</strong> on 5 Jan 2016, 19:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306345">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Gboy</div>
					<div class="post-datetime">
						5 Jan 2016, 19:47					</div>
				</div>
				<div class="post-content content">
					<p>I spent several hours today reading trhough OpenVPN wiki and OpenWRT wiki but I can&#039;t figure this out.<br />This is the output of the netstat -nr command from the router when connected to the VPN<br />deleted<br />What am I doing wrong? Can someone please help me? <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>											<p class="post-edited">(Last edited by <strong>Gboy</strong> on 29 Jan 2016, 15:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306866">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Gboy</div>
					<div class="post-datetime">
						9 Jan 2016, 17:44					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m willing to donate money to anyone who helps me</p>											<p class="post-edited">(Last edited by <strong>Gboy</strong> on 9 Jan 2016, 17:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306870">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">cptdondo</div>
					<div class="post-datetime">
						9 Jan 2016, 18:15					</div>
				</div>
				<div class="post-content content">
					<p>You have two default routes.&nbsp; Do you want to route everything through the VPN, or specific hosts/destinations?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306883">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Gboy</div>
					<div class="post-datetime">
						9 Jan 2016, 19:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>cptdondo wrote:</cite><blockquote><p>You have two default routes.&nbsp; Do you want to route everything through the VPN, or specific hosts/destinations?</p></blockquote></div><p>Everything</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306928">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						9 Jan 2016, 23:34					</div>
				</div>
				<div class="post-content content">
					<p>If you want to route your LAN through the VPN, you will need to apply masquerading/SNAT in order for the traffic to come back again. Keep in mind that the remote network does not know where your local network is, so the traffic will be sent to it&#039;s default route.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306933">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">cptdondo</div>
					<div class="post-datetime">
						10 Jan 2016, 00:06					</div>
				</div>
				<div class="post-content content">
					<p>You have to masquerade everything going through the tunnel, and you have to get rid of your default route through the ppp interface.&nbsp; Then you have to make sure that OpenVPN can find its peer through the ppp interface.&nbsp; It&#039;s a bit complicated and unfortunately I don&#039;t have the time right now to go through it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p307630">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Gboy</div>
					<div class="post-datetime">
						14 Jan 2016, 18:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arokh wrote:</cite><blockquote><p>If you want to route your LAN through the VPN, you will need to apply masquerading/SNAT in order for the traffic to come back again. Keep in mind that the remote network does not know where your local network is, so the traffic will be sent to it&#039;s default route.</p></blockquote></div><div class="codebox"><pre><code>/sbin/ifconfig tun0 10.23.16.12 netmask 255.255.252.0 mtu 1500 broadcast 10.23.19.255
/sbin/route add -net 1xxx netmask 255.255.255.255 gw xxx
/sbin/route add -net 0.0.0.0 netmask 128.0.0.0 gw 10.23.16.1</code></pre></div><p>deleted<br />Is this command ok for routing all traffic through the vpn?<br /></p><div class="codebox"><pre><code>iptables -I FORWARD -i tun0 -o eth0 \
         -s 10.8.0.0/24 -m conntrack --ctstate NEW -j ACCEPT
iptables -I FORWARD -m conntrack --ctstate RELATED,ESTABLISHED \
         -j ACCEPT
iptables -t nat -I POSTROUTING -o eth0 \
          -s 10.8.0.0/24 -j MASQUERADE</code></pre></div><p>If not, what has to be changed?</p><p>Please someone help me I&#039;ll donate money to nayone who solves this. I can&#039;t figure it out ffs</p>											<p class="post-edited">(Last edited by <strong>Gboy</strong> on 29 Jan 2016, 15:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p307635">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">adwinsky</div>
					<div class="post-datetime">
						14 Jan 2016, 19:43					</div>
				</div>
				<div class="post-content content">
					<p>Hey man,</p><p>I just had EXACTLY the same issue. Try this:</p><p>iptables -t nat -I POSTROUTING -o tun0&nbsp; -j MASQUERADE</p><p>I tried lots of other iptables configuraitons, but I think this one helped.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p307648">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Gboy</div>
					<div class="post-datetime">
						14 Jan 2016, 21:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>adwinsky wrote:</cite><blockquote><p>Hey man,</p><p>I just had EXACTLY the same issue. Try this:</p><p>iptables -t nat -I POSTROUTING -o tun0&nbsp; -j MASQUERADE</p><p>I tried lots of other iptables configuraitons, but I think this one helped.</p></blockquote></div><p>Not working still <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /><br />After executing iptables -t nat -I POSTROUTING -o tun0&nbsp; -j MASQUERADE, how do I revert it?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p307693">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">mikma</div>
					<div class="post-datetime">
						15 Jan 2016, 03:22					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Gboy wrote:</cite><blockquote><p>After executing iptables -t nat -I POSTROUTING -o tun0&nbsp; -j MASQUERADE, how do I revert it?</p></blockquote></div><p>Delete with -D: </p><div class="codebox"><pre><code>iptables -t nat -D POSTROUTING -o tun0  -j MASQUERADE</code></pre></div>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>