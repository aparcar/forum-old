<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> UpnP problem with ushare - not present in network</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 18 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p96018">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">macmus</div>
					<div class="post-datetime">
						18 Oct 2009, 01:52					</div>
				</div>
				<div class="post-content content">
					<p>so i did install the ushare on disk </p><div class="codebox"><pre><code>root@OpenWrt:/etc# ushare
Interface eth0.1 is down.
Recheck uShare&#039;s configuration and try again !
uShare (version 1.1a), a lightweight UPnP A/V and DLNA Media Server.
Benjamin Zores (C) 2005-2007, for GeeXboX Team.
See http://ushare.geexbox.org/ for updates.
Listening on telnet port 0
Initializing UPnP subsystem ...
UPnP MediaServer listening on 192.168.0.2:49200
Sending UPnP advertisement for device ...
Listening for control point connections ...
Building Metadata List ...
Looking for files in content directory : /mnt/sda1/share/filmy
Found 5 files and subdirectories.</code></pre></div><p>as it can be seen on first line eth0.1 is down... but why i am using it all the time as my input (and the only one)&nbsp; interface towards router<br /></p><div class="codebox"><pre><code>root@OpenWrt:/etc# ifconfig -a
br-lan    Link encap:Ethernet  HWaddr 00:17:31:DC:08:F7
          inet addr:192.168.1.1  Bcast:192.168.1.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:1 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:0 (0.0 B)  TX bytes:403 (403.0 B)

eth0      Link encap:Ethernet  HWaddr 00:17:31:DC:08:F7
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:22410 errors:0 dropped:0 overruns:0 frame:0
          TX packets:16911 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:31685031 (30.2 MiB)  TX bytes:1227746 (1.1 MiB)
          Interrupt:4

eth0.0    Link encap:Ethernet  HWaddr 00:17:31:DC:08:F7
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:1 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:0 (0.0 B)  TX bytes:407 (407.0 B)

eth0.1    Link encap:Ethernet  HWaddr 00:17:31:DC:08:F7
          inet addr:192.168.0.2  Bcast:192.168.0.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:22415 errors:0 dropped:0 overruns:0 frame:0
          TX packets:16915 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:31282135 (29.8 MiB)  TX bytes:1137503 (1.0 MiB)

eth1      Link encap:Ethernet  HWaddr 40:10:18:00:00:2D
          BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)
          Interrupt:5

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:87 errors:0 dropped:0 overruns:0 frame:0
          TX packets:87 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:10153 (9.9 KiB)  TX bytes:10153 (9.9 KiB)

wlan0     Link encap:Ethernet  HWaddr 00:17:31:DC:08:F7
          BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)</code></pre></div><p>of course it is not possible to start interface which is already down<br /></p><div class="codebox"><pre><code>root@OpenWrt:/etc# ifup eth0.1 up
/sbin/ifdown: eval: line 1: syntax error: bad substitution
/sbin/ifup: eval: line 1: syntax error: bad substitution</code></pre></div><p>the problem is present for all interfaces:<br /></p><div class="codebox"><pre><code>root@OpenWrt:/etc# ushare
Interface br-lan is down.
Recheck uShare&#039;s configuration and try again !
uShare (version 1.1a), a lightweight UPnP A/V and DLNA Media Server.
Benjamin Zores (C) 2005-2007, for GeeXboX Team.
See http://ushare.geexbox.org/ for updates.
Listening on telnet port 0
Initializing UPnP subsystem ...
UPnP MediaServer listening on 192.168.1.1:49200
Sending UPnP advertisement for device ...
Listening for control point connections ...
Building Metadata List ...
Looking for files in content directory : /mnt/sda1/share/filmy
Found 5 files and subdirectories.</code></pre></div><p>when i am using media sharing from windows it works perfectly that is why i think the problem lays somewhere in openwrt. </p><p>I am not using any firewall of any sort.</p><p>also did try via starting the /etc/init.d/ushare start with folllowing options:</p><div class="codebox"><pre><code>root@OpenWrt:~# cat /etc/config/ushare
config &#039;ushare&#039;
        option &#039;username&#039; &#039;nobody&#039;
        option &#039;servername&#039; &#039;OpenWrt&#039;
        option &#039;interface&#039; &#039;eth0.1&#039;
        option &#039;options&#039; &#039;-x&#039;
        option &#039;content_directories&#039; &#039;/mnt/sda1/share/filmy&#039;
        option &#039;disable_telnet&#039; &#039;1&#039;
        option &#039;disable_webif&#039; &#039;1&#039;
        option &#039;enabled&#039; &#039;1&#039;</code></pre></div><p>any idea whats up ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p96020">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">moparhemi</div>
					<div class="post-datetime">
						18 Oct 2009, 02:54					</div>
				</div>
				<div class="post-content content">
					<p>I have ushare running please post &quot;route&quot;.</p><p>MH</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p96024">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">macmus</div>
					<div class="post-datetime">
						18 Oct 2009, 03:54					</div>
				</div>
				<div class="post-content content">
					<p>yes sir</p><div class="codebox"><pre><code>root@OpenWrt:/# route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
192.168.1.0     *               255.255.255.0   U     0      0        0 br-lan
192.168.0.0     *               255.255.255.0   U     0      0        0 eth0.1
default         192.168.0.1     0.0.0.0         UG    0      0        0 eth0.1</code></pre></div><p>connections are</p><p>xbox 192.168.0.3&nbsp; &nbsp; &nbsp; &lt;---&gt; router 192.168.0.1 (cable)<br />openwrt(wan eth0.1) &lt;---&gt; router 192.168.0.1 (cable)<br />pc 192.168.0.169&nbsp; &nbsp; &nbsp; &lt;---&gt; router 192.168.0.1</p><p>when i start sharing files in pc (in WMP) they are visible on xbox</p>											<p class="post-edited">(Last edited by <strong>macmus</strong> on 18 Oct 2009, 03:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p96025">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">moparhemi</div>
					<div class="post-datetime">
						18 Oct 2009, 05:49					</div>
				</div>
				<div class="post-content content">
					<p>In your first post seems to be running on port 49200. What does &quot;netstat -an&quot; show.<br />Have you tried&nbsp; the port in a web browser &quot;192.168.0.2:49200/web/ushare.html&quot;.<br />Also a few more option. ENABLE_WEB=yes&nbsp; &nbsp;ENABLE_XBOX=yes.</p><p>MH</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p96061">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">macmus</div>
					<div class="post-datetime">
						18 Oct 2009, 21:48					</div>
				</div>
				<div class="post-content content">
					<p>yes the webinterface works from pc and properly shows&nbsp; the shared drives.</p><p>i have XBOX support enabled with option -x </p><div class="codebox"><pre><code>config &#039;ushare&#039;
        option &#039;username&#039; &#039;nobody&#039;
        option &#039;servername&#039; &#039;OpenWrt&#039;
        option &#039;interface&#039; &#039;eth0.1&#039;
        option &#039;options&#039; &#039;-x&#039;
        option &#039;content_directories&#039; &#039;/mnt/sda1/share/filmy&#039;
        option &#039;disable_telnet&#039; &#039;1&#039;
        option &#039;disable_webif&#039; &#039;0&#039;
        option &#039;enabled&#039; &#039;1&#039;</code></pre></div><p>or i miss somethings ?</p><p>i have found on page <a href="http://www.dd-wrt.com/wiki/index.php/Ushare_uPnP_media_server">http://www.dd-wrt.com/wiki/index.php/Us … dia_server</a> </p><p>as a prerequisite there is: &quot;UPnP Service&quot; enable under router web interface</p><p>what the hell it is ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p96063">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">moparhemi</div>
					<div class="post-datetime">
						19 Oct 2009, 00:09					</div>
				</div>
				<div class="post-content content">
					<p>Do not know what is going on with your setup but mine shows Xbox starting.<br />Maybe DLNA mode is on. Try to use config file with the -f instead.<br />I think you only need libupnp to run.</p><p>OpenWrt daemon.notice uShare[963]: Initializing UPnP subsystem ...<br />Oct 14 20:46:42 OpenWrt daemon.notice uShare[963]: Starting in XboX 360 compliant profile</p><p>MH</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123653">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">k4021</div>
					<div class="post-datetime">
						21 Dec 2010, 23:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>macmus wrote:</cite><blockquote><p>i have found on page <a href="http://www.dd-wrt.com/wiki/index.php/Ushare_uPnP_media_server">http://www.dd-wrt.com/wiki/index.php/Us … dia_server</a> </p><p>as a prerequisite there is: &quot;UPnP Service&quot; enable under router web interface</p><p>what the hell it is ?</p></blockquote></div><p>Go into the webinterface --&gt;administration --&gt;system--&gt;software and install and enable &quot;luci-app-upnp&quot;</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>