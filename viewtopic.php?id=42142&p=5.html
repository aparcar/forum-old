<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Hi-Link wireless module HLK-RM04</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 1 Jan 2018 and 26 Apr 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 5 of 9</div><nav><ul><li><a href="viewtopic.php%3Fid=42142&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42142&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=42142&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li><li><a href="viewtopic.php%3Fid=42142&amp;p=6.html">6</a></li><li><a href="viewtopic.php%3Fid=42142&amp;p=7.html">7</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42142&amp;p=9.html">9</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p228158">
				<div class="post-metadata">
					<div class="post-num">Post #101</div>
					<div class="post-author">belleview</div>
					<div class="post-datetime">
						21 Mar 2014, 23:15					</div>
				</div>
				<div class="post-content content">
					<p>Hello Everyone,</p><p>I also bought a HLK RM-04 an would like openwrt to run on it.<br />I managed to get openwrt to run on it but the standard sdram is not enough for my needs.</p><p>now i&#039;m looking for the right IC and found a couple.<br />I would like some confirmations if these are good and what the differences are since some are twice the price of others.</p><p>A43L4616AV-7F<br />H57V2562GTR-75C<br />IS42S16160G-7BLI<br />IS42S16160G-7TLI<br />MT48LC16M16A2P-6A<br />MT48LC16M16A2P-6A IT<br />MT48LC16M16A2P-7E</p><p>As of my research i think i can just replace them and use the right uboot and it should work right out of the box, please correct me if i&#039;m wrong.</p><p>For the Flash ram i can imagine there are extra steps involved if i want to upgrade it, does anyone know a good guide on how todo this?</p><p>Thanks in advance for any reply or answer <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>And everyone have a nice weekend.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p228361">
				<div class="post-metadata">
					<div class="post-num">Post #102</div>
					<div class="post-author">TJC</div>
					<div class="post-datetime">
						25 Mar 2014, 00:47					</div>
				</div>
				<div class="post-content content">
					<p>Hey guys,</p><p>Thank you all so much for the recon and effort you share with everyone here.</p><p>I posted a tech writeup on my blog with a custom-released official firmware that enables GPIO-1 (pin #9) through the HTTP server as well as the serial interface. One of the engineers from HiLink-Tech created it when I asked them about it, amazingly good service!</p><p>You can find it, including all firmware files (default V1.78 and GPIO-enabled, unreleased V1.83) and the user manual, here:<a href="http://www.unmanageable.nl/2014/03/messing-about-with-the-hi-link-rm04/">http://www.unmanageable.nl/2014/03/mess … link-rm04/</a>.</p><p>I also made the source code for a simple home automation server that uses this GPIO functionality publicly available on github: <a href="https://github.com/tjclement/jarvis-home-automation">https://github.com/tjclement/jarvis-home-automation</a></p><p>Enjoy!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p229640">
				<div class="post-metadata">
					<div class="post-num">Post #103</div>
					<div class="post-author">maciel310</div>
					<div class="post-datetime">
						9 Apr 2014, 00:30					</div>
				</div>
				<div class="post-content content">
					<p>Could someone post the details on how to pull up a serial console on this board? I&#039;ve tried everything I can think of, but I can&#039;t seem to get anything. I don&#039;t have the dev board, just the module itself. I have a usb-&gt;TTL serial interface that supports both 5V and 3.3V, and I have tried connecting it to both serial ports and used a variety of baud rates. If someone can post the configuration that they have confirmed works I&#039;d really appreciate it, so I can rule out whether it is an issue with my setup or possibly a bad flash of uboot.</p><p>I flashed the uboot128.img from <a href="https://github.com/JiapengLi/OpenWrt-HiLink-HLK-RM04">https://github.com/JiapengLi/OpenWrt-HiLink-HLK-RM04</a> using the factory web interface, and I compiled and flashed the openwrt image from source, in case that makes any difference for the configuration.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p229702">
				<div class="post-metadata">
					<div class="post-num">Post #104</div>
					<div class="post-author">WrtQuater</div>
					<div class="post-datetime">
						9 Apr 2014, 15:41					</div>
				</div>
				<div class="post-content content">
					<p>@Maciel310</p><p>This configuration works for me:</p><p>hlk-Rm04 pin 20 (RX) to TX of FTDI<br />pin 21 (TX) to RX of FTDI<br />Pin 2 (GND)&nbsp; to FTDI GND</p><p>baud rate is define in dts file</p><p>chosen {<br />&nbsp; &nbsp; &nbsp; &nbsp; bootargs = &quot;console=ttyS0,57600&quot;;<br />};</p><p>uboot128.img works!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p229766">
				<div class="post-metadata">
					<div class="post-num">Post #105</div>
					<div class="post-author">maciel310</div>
					<div class="post-datetime">
						10 Apr 2014, 05:04					</div>
				</div>
				<div class="post-content content">
					<p>Thanks @WrtQuarter! That worked. That must have been the only configuration I didn&#039;t try.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p231360">
				<div class="post-metadata">
					<div class="post-num">Post #106</div>
					<div class="post-author">gume</div>
					<div class="post-datetime">
						26 Apr 2014, 22:39					</div>
				</div>
				<div class="post-content content">
					<p>Hi! I just have got this device coming from China. I read through the messages but I still have some questions. Could you help me?</p><p>1. My one has a 1.78 firmware. I can start a telnetd using the html post in the previous messages. Should I upload a new boot image (uboot128.img) to replace the factory boot? Does it help to recover any unwanted moves or this is not necessary?</p><p>2. I only found this image: &quot;hlk-rm04-16m-luci-ser2net-usb2serial-r38025.bin&quot;. Looks like a bit old. Are there any newer images to upload, or should I compile one for myself? As I read it, I don&#039;t need luci at all. I&#039;m not sure in usb, as my test board has no usb connector.</p><p>3. My real purpose is to connect this device to an arduino mc. I planned to use i2c and some self developed transport protocol. I can see that it should support i2c. Do you know anything how to access that. Or should I look up available gpio and use some linux drivers?</p><p>4. What is the performance of the serial ip connection. I might use this one if I2C would be too complicated.</p><p>Thanks for any help!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232011">
				<div class="post-metadata">
					<div class="post-num">Post #107</div>
					<div class="post-author">maciel310</div>
					<div class="post-datetime">
						1 May 2014, 23:13					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m trying to load an OpenWRT firmware image on the device, but so far I&#039;m not having any luck. For some reason whenever I try uploading an image from the web interface the page freezes after I click upload, but nothing ever happens. The only way it responds again is if I reset the device&#039;s power. I did upgrade uboot before trying to load the new firmware on it, so maybe that is interfering with something? I would try restoring the factory uboot but I can&#039;t seem to find an image of it anywhere. This is happening with any image I&#039;ve tried including downloaded, custom compiled, and the semi-official version that TJC posted about.</p><p>I don&#039;t have the development board for the device, so I&#039;m limited to using WiFi and Serial to perform the upload which rules out the suggested tftp upload option.</p><p>I tried following the generic serial flashing instructions in the OpenWRT wiki using Kermit, but it looks like the commands in the wiki don&#039;t match what is expected in this version of uboot. For instance, erase expects a &quot;partition&quot; name, rather than an offset range. This wouldn&#039;t be an issue except that for some reason I am unable to pass in a length to the `cp` command, resulting in it copying 0 bytes and doing nothing.</p><p>I&#039;m willing to try any suggestions, and I&#039;m comfortable using telnetd to manually flash (mtd_write?) or compiling a custom uboot to take care of this if necessary. I&#039;d just need some pointers for the commands, since I&#039;m not too deeply familiar with the inner workings of OpenWRT.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232332">
				<div class="post-metadata">
					<div class="post-num">Post #108</div>
					<div class="post-author">otaku22</div>
					<div class="post-datetime">
						4 May 2014, 20:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>maciel310 wrote:</cite><blockquote><p>I&#039;m trying to load an OpenWRT firmware image on the device, but so far I&#039;m not having any luck. For some reason whenever I try uploading an image from the web interface the page freezes after I click upload, but nothing ever happens. The only way it responds again is if I reset the device&#039;s power.</p></blockquote></div><p>So you are flashing over wifi, right? I also tried but failed with the same problem. Using the ethernet connection I&#039;ve flashed without problems. <br />You can flash also from the bootloader (pressing &quot;2&quot; via serial console during boot), but still you need ethernet for copying the firmare.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232334">
				<div class="post-metadata">
					<div class="post-num">Post #109</div>
					<div class="post-author">otaku22</div>
					<div class="post-datetime">
						4 May 2014, 20:49					</div>
				</div>
				<div class="post-content content">
					<p>Dear gaplee,<br />Could you please change the installation instructions on your github repository?<br />Those instructions are <strong><span class="bbu">BROKEN. Please fix them.</span></strong>.</p><p>You say:<br /></p><div class="quotebox"><blockquote><p>Jeff Kent made the firmware upload much easier. We can upload the OpenWRT firmware to the HLK-RM04 directly through the upload firmware WEBUI interface.</p></blockquote></div><p>That file is <span class="bbu">not working</span>. A lot of peole in previous messages bricked the device due to these wrong instructions you wrote. <br />Also you don&#039;t say to change uboot on the new firmware upload method, so the people with bricked device can&#039;t flash it easily!<br />Maybe it is working for 32MB ram version, but surely not for the 16MB one.</p><p>I found out how to <strong>unbrick the device and flash the new firmware</strong> without the new version of uboot you provided.<br />I&#039;ve setted a static IP address on my computer: 10.10.10.3 with netmask 255.255.255.0, then I&#039;ve setupped a tftp server and I&#039;ve placed the new firmware to upload into the tftp server folder, calling it &quot;tim_uImage&quot;.<br />Then I&#039;ve connected the device to my computer using the LAN ethernet port.<br />While keeping pressed the WPS/Default button, I gave power to the board and keep pressed the button for ~5 seconds. After releasing the button, the board starts the firmware download and then boot.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232518">
				<div class="post-metadata">
					<div class="post-num">Post #110</div>
					<div class="post-author">maciel310</div>
					<div class="post-datetime">
						5 May 2014, 23:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>otaku22 wrote:</cite><blockquote><div class="quotebox"><cite>maciel310 wrote:</cite><blockquote><p>I&#039;m trying to load an OpenWRT firmware image on the device, but so far I&#039;m not having any luck. For some reason whenever I try uploading an image from the web interface the page freezes after I click upload, but nothing ever happens. The only way it responds again is if I reset the device&#039;s power.</p></blockquote></div><p>So you are flashing over wifi, right? I also tried but failed with the same problem. Using the ethernet connection I&#039;ve flashed without problems. <br />You can flash also from the bootloader (pressing &quot;2&quot; via serial console during boot), but still you need ethernet for copying the firmare.</p></blockquote></div><p>Yes, I&#039;m trying to use WiFi. I don&#039;t have the breakout board with the network jack so unfortunately ethernet isn&#039;t an option. If you had the same issue I guess the stock firmware has a bug where it won&#039;t work... That&#039;s unfortunate.</p><p>The bootloader does have an option to load the firmware over the serial connection directly, but I can&#039;t get the commands figured out since they don&#039;t match the instructions in the generic flashing wiki article. If anyone has experience with the Kermit protocol in uboot I&#039;d really appreciate it if you could provide some assistance. Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232760">
				<div class="post-metadata">
					<div class="post-num">Post #111</div>
					<div class="post-author">fgomes</div>
					<div class="post-datetime">
						8 May 2014, 03:03					</div>
				</div>
				<div class="post-content content">
					<p>Hi Everyone</p><p>I&#039;ve followed the instructions in this post: </p><p><a href="https://github.com/JiapengLi/OpenWrt-HiLink-HLK-RM04">https://github.com/JiapengLi/OpenWrt-HiLink-HLK-RM04</a></p><p>I have made the uboot upgrade (without any issues) and now I want to install the OpenWRT. The image that I have generated is this one:</p><p>openwrt-ramips-rt305x-hlk-rm04-initramfs-factory.bin</p><p>In the mentioned instructions the upgrade can be done with the image that I have generated, using the WEBUI, but otaku22 says that this bricks the module, so what is your suggestion to install the openWRT image? Should I install it according with the wiki instructions, using a serial port and a tftp server? In the wiki the image name is not the same, it is openwrt-ramips-rt305x-hlk-rm04-squashfs-sysupgrade.bin, can you clarify what is the correct image?</p><p>Thanks in advance</p><p>Fernando</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232845">
				<div class="post-metadata">
					<div class="post-num">Post #112</div>
					<div class="post-author">fgomes</div>
					<div class="post-datetime">
						9 May 2014, 01:56					</div>
				</div>
				<div class="post-content content">
					<p>After updating the OpenWRT with an image built using <a href="https://github.com/JiapengLi/OpenWrt-HiLink-HLK-RM04,">https://github.com/JiapengLi/OpenWrt-HiLink-HLK-RM04,</a> it hangs during boot, any tip of what could be the cause?</p><br /><p>U-Boot 1.1.3 (Jan&nbsp; 9 2014 - 18:11:05)</p><p>Board: Ralink APSoC DRAM:&nbsp; 16 MB<br />relocate_code Pointer at: 80fb4000<br />spi_wait_nsec: 42<br />spi device id: ef 40 16 0 0 (40160000)<br />find flash: W25Q32BV<br />raspi_read: from:30000 len:1000<br />.raspi_read: from:30000 len:1000<br />.============================================<br />Ralink UBoot Version: 3.6.0.0<br />--------------------------------------------<br />ASIC 5350_MP (Port5&lt;-&gt;None)<br />DRAM_CONF_FROM: EEPROM<br />DRAM_SIZE: 128 Mbits SDR<br />DRAM_TOTAL_WIDTH: 16 bits<br />TOTAL_MEMORY_SIZE: 16 MBytes<br />Flash component: SPI Flash<br />Date:Jan&nbsp; 9 2014&nbsp; Time:18:11:05<br />============================================<br />icache: sets:256, ways:4, linesz:32 ,total:32768<br />dcache: sets:128, ways:4, linesz:32 ,total:16384</p><p> ##### The CPU freq = 360 MHZ ####<br /> estimate memory size =16 Mbytes</p><p>Please choose the operation:<br />&nbsp; &nbsp;1: Load system code to SDRAM via TFTP.<br />&nbsp; &nbsp;2: Load system code then write to Flash via TFTP.<br />&nbsp; &nbsp;3: Boot system code via Flash (default).<br />&nbsp; &nbsp;4: Entr boot command line interface.<br />&nbsp; &nbsp;7: Load Boot Loader code then write to Flash via Serial.<br />&nbsp; &nbsp;9: Load Boot Loader code then write to Flash via TFTP.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0</p><p>3: System Boot system code via Flash.<br />## Booting image at bc050000 ...<br />raspi_read: from:50000 len:40<br />.&nbsp; &nbsp;Image Name:&nbsp; &nbsp;HLK-RM02<br />&nbsp; &nbsp;Created:&nbsp; &nbsp; &nbsp; 2014-05-08&nbsp; 17:46:28 UTC<br />&nbsp; &nbsp;Image Type:&nbsp; &nbsp;MIPS Linux Kernel Image (lzma compressed)<br />&nbsp; &nbsp;Data Size:&nbsp; &nbsp; 3765646 Bytes =&nbsp; 3.6 MB<br />&nbsp; &nbsp;Load Address: 80000000<br />&nbsp; &nbsp;Entry Point:&nbsp; 80000000<br />raspi_read: from:50040 len:39758e<br />..........................................................&nbsp; &nbsp;Verifying Checksum ... OK<br />&nbsp; &nbsp;Uncompressing Kernel Image ... OK<br />No initrd<br />## Transferring control to Linux (at address 80000000) ...<br />## Giving linux memsize in MB, 16</p><p>Starting kernel ...</p><p>[&nbsp; &nbsp; 0.000000] Linux version 3.10.13 (administrator@elementaryOS) (gcc version 4.6.4 (OpenWrt/Linaro GCC 4.6-2013.05 r38333) ) #6 Thu May 8 18:45:19 WEST 2014<br />[&nbsp; &nbsp; 0.000000] SoC Type: Ralink RT5350 id:1 rev:3<br />[&nbsp; &nbsp; 0.000000] bootconsole [early0] enabled<br />[&nbsp; &nbsp; 0.000000] CPU revision is: 0001964c (MIPS 24KEc)<br />[&nbsp; &nbsp; 0.000000] MIPS: machine is HILINK HLK-RM04<br />[&nbsp; &nbsp; 0.000000] Determined physical RAM map:<br />[&nbsp; &nbsp; 0.000000]&nbsp; memory: 02000000 @ 00000000 (usable)<br />[&nbsp; &nbsp; 0.000000] User-defined physical RAM map:<br />[&nbsp; &nbsp; 0.000000]&nbsp; memory: 01000000 @ 00000000 (usable)<br />[&nbsp; &nbsp; 0.000000] Initrd not found or empty - disabling initrd<br />[&nbsp; &nbsp; 0.000000] Zone ranges:<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal&nbsp; &nbsp;[mem 0x00000000-0x00ffffff]<br />[&nbsp; &nbsp; 0.000000] Movable zone start for each node<br />[&nbsp; &nbsp; 0.000000] Early memory node ranges<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;node&nbsp; &nbsp;0: [mem 0x00000000-0x00ffffff]<br />[&nbsp; &nbsp; 0.000000] Primary instruction cache 32kB, VIPT, 4-way, linesize 32 bytes.<br />[&nbsp; &nbsp; 0.000000] Primary data cache 16kB, 4-way, VIPT, no aliases, linesize 32 bytes<br />[&nbsp; &nbsp; 0.000000] Built 1 zonelists in Zone order, mobility grouping off.&nbsp; Total pages: 4064<br />[&nbsp; &nbsp; 0.000000] Kernel command line: console=ttyS0,57600 rootfstype=squashfs,jffs2 mem=16M<br />[&nbsp; &nbsp; 0.000000] PID hash table entries: 64 (order: -4, 256 bytes)<br />[&nbsp; &nbsp; 0.000000] Dentry cache hash table entries: 2048 (order: 1, 8192 bytes)<br />[&nbsp; &nbsp; 0.000000] Inode-cache hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.000000] Writing ErrCtl register=0000f0ff<br />[&nbsp; &nbsp; 0.000000] Readback ErrCtl register=0000f0ff<br />[&nbsp; &nbsp; 0.000000] Memory: 10420k/16384k available (2118k kernel code, 5964k reserved, 536k data, 2912k init, 0k highmem)<br />[&nbsp; &nbsp; 0.000000] SLUB: HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br />[&nbsp; &nbsp; 0.000000] NR_IRQS:128<br />[&nbsp; &nbsp; 0.000000] CPU Clock: 360MHz<br />[&nbsp; &nbsp; 0.000000] Calibrating delay loop... 239.61 BogoMIPS (lpj=1198080)<br />[&nbsp; &nbsp; 0.070000] pid_max: default: 32768 minimum: 301<br />[&nbsp; &nbsp; 0.070000] Mount-cache hash table entries: 512<br />[&nbsp; &nbsp; 0.080000] pinctrl core: initialized pinctrl subsystem<br />[&nbsp; &nbsp; 0.090000] NET: Registered protocol family 16<br />[&nbsp; &nbsp; 0.110000] rt2880-pinmux pinctrl.1: invalid group &quot;rgmii&quot; for function &quot;gpio&quot;<br />[&nbsp; &nbsp; 0.120000] rt2880-pinmux pinctrl.1: invalid group &quot;mdio&quot; for function &quot;gpio&quot;<br />[&nbsp; &nbsp; 0.150000] bio: create slab &lt;bio-0&gt; at 0<br />[&nbsp; &nbsp; 0.160000] rt2880_gpio 10000600.gpio: registering 24 gpios<br />[&nbsp; &nbsp; 0.170000] rt2880_gpio 10000600.gpio: registering 24 irq handlers<br />[&nbsp; &nbsp; 0.180000] Switching to clocksource MIPS<br />[&nbsp; &nbsp; 0.190000] NET: Registered protocol family 2<br />[&nbsp; &nbsp; 0.200000] TCP established hash table entries: 512 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.220000] TCP bind hash table entries: 512 (order: -1, 2048 bytes)<br />[&nbsp; &nbsp; 0.230000] TCP: Hash tables configured (established 512 bind 512)<br />[&nbsp; &nbsp; 0.240000] TCP: reno registered<br />[&nbsp; &nbsp; 0.250000] UDP hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.260000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.270000] NET: Registered protocol family 1</p><p>It hangs here :-(</p><p>The module works well (at least the module boots and I can interact with it through the serial console) with the image rt305x-hlk-rm04-generic-sysupgrade.bin obtained here: <a href="https://github.com/bogdanr/HLK-RM04.">https://github.com/bogdanr/HLK-RM04.</a> I&#039;ve made the upgrade through TFTP.</p><p>Thanks in advance</p><p>Fernando</p>											<p class="post-edited">(Last edited by <strong>fgomes</strong> on 9 May 2014, 13:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232971">
				<div class="post-metadata">
					<div class="post-num">Post #113</div>
					<div class="post-author">forsakenrider</div>
					<div class="post-datetime">
						10 May 2014, 18:31					</div>
				</div>
				<div class="post-content content">
					<p>Well we are all getting stuff now! I managed to load the new uboot via the web interface but now my system hangs at &quot;starting kernel...&quot;</p><p>Do I need to do the resistor mod after the flash? I tried flashing via TFTP after changing the resistors and it hangs mid flash, so i changed the resistors back to stock and it seems to work and restarts and then hangs at &quot;.Bad Magic Number,39689D76&quot;.</p><p>Any ideas?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p233057">
				<div class="post-metadata">
					<div class="post-num">Post #114</div>
					<div class="post-author">fgomes</div>
					<div class="post-datetime">
						11 May 2014, 23:46					</div>
				</div>
				<div class="post-content content">
					<p>Hi forsakenrider</p><p>Some thoughts: For the &quot;Bad Magic Number&quot; I think you are uploading by TFTP an image that is not for TFTP upload - if you try to upload by TFTP the image that is for the first update you get this error, you should use a sysupgrade image to update by TFTP<br />For the resistors, if you use the sugested kernel hack (kernel command line forcing 16M), it works even without changing the resistors. It is easy to find out if yu forgot the kernel hack and have the wrong resistors setup, the kernel boot stops like this:</p><p>Starting kernel ...</p><p>[&nbsp; &nbsp; 0.000000] Linux version 3.10.13 (jonas@mint) (gcc version 4.6.4 (OpenWrt/Linaro GCC 4.6-2013.05 r38333) ) #1 Thu Oct 24 13:49:23 CEST 2013<br />[&nbsp; &nbsp; 0.000000] SoC Type: Ralink RT5350 id:1 rev:3<br />[&nbsp; &nbsp; 0.000000] bootconsole [early0] enabled<br />[&nbsp; &nbsp; 0.000000] CPU revision is: 0001964c (MIPS 24KEc)<br />[&nbsp; &nbsp; 0.000000] MIPS: machine is HILINK HLK-RM04<br />[&nbsp; &nbsp; 0.000000] Determined physical RAM map:<br />[&nbsp; &nbsp; 0.000000]&nbsp; memory: 02000000 @ 00000000 (usable)<br />[&nbsp; &nbsp; 0.000000] Initrd not found or empty - disabling initrd<br />[&nbsp; &nbsp; 0.000000] Zone ranges:<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal&nbsp; &nbsp;[mem 0x00000000-0x01ffffff]<br />[&nbsp; &nbsp; 0.000000] Movable zone start for each node<br />[&nbsp; &nbsp; 0.000000] Early memory node ranges<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;node&nbsp; &nbsp;0: [mem 0x00000000-0x01ffffff]</p><p>Fernando</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p234659">
				<div class="post-metadata">
					<div class="post-num">Post #115</div>
					<div class="post-author">forsakenrider</div>
					<div class="post-datetime">
						27 May 2014, 00:22					</div>
				</div>
				<div class="post-content content">
					<p>Well I&#039;ve upgraded my RAM and Uboot but openwrt still seems to only see 16mb on ram. Any idea on why? Do I have to do some kernel hacking to make it see it?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p234676">
				<div class="post-metadata">
					<div class="post-num">Post #116</div>
					<div class="post-author">WrtQuater</div>
					<div class="post-datetime">
						27 May 2014, 03:26					</div>
				</div>
				<div class="post-content content">
					<p>@forsakenrider</p><p>I believe you have to modify the dts file and recompile.</p><p>hlkrm04.dts is located in trunk/target/linux/ramips/dts/ </p><p>&nbsp; &nbsp; memory@0 {<br />&nbsp; &nbsp; &nbsp; &nbsp; device_type = &quot;memory&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; //reg = &lt;0x0 0x1000000&gt;; /* 16 MB*/<br />&nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;0x0 0x2000000&gt;; /* 32 MB*/<br />&nbsp; &nbsp; };</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p234734">
				<div class="post-metadata">
					<div class="post-num">Post #117</div>
					<div class="post-author">forsakenrider</div>
					<div class="post-datetime">
						27 May 2014, 16:01					</div>
				</div>
				<div class="post-content content">
					<p>Hey WrtQuater,</p><p>I did, make kernel_menuconfig and changed the line in kernal hacking to &quot;rootfstype=squashfs,jffs2 mem=32M&quot; and its working great!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p235365">
				<div class="post-metadata">
					<div class="post-num">Post #118</div>
					<div class="post-author">sancho</div>
					<div class="post-datetime">
						2 Jun 2014, 00:09					</div>
				</div>
				<div class="post-content content">
					<p>Can anyone advice, how can I build a custom system for this device?<br />I&#039;d like to have mjpg-streamer, kmod-video-uvc, kmod-video-core, kmod-video-videobuf2, kmod-usb2, some i2c driver for the i2c interface and i2c-tools.<br />Of course, I&#039;d like to remove as much &quot;crap&quot; from the kernel and the core system as possible - e.g. I do not need IPv6, no firewall, ...<br />Whenever I try to compile the trunk version, I end up with error on Curl <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /><br />I tried to use the trunk build, but even opkg list kill the device - I run out of memory <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>											<p class="post-edited">(Last edited by <strong>sancho</strong> on 2 Jun 2014, 00:31)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p235374">
				<div class="post-metadata">
					<div class="post-num">Post #119</div>
					<div class="post-author">sancho</div>
					<div class="post-datetime">
						2 Jun 2014, 01:02					</div>
				</div>
				<div class="post-content content">
					<p>Wow. never mind.<br />I disabled the dnsmasq (not needed), edited the list in&nbsp; /etc/modules.d - removed ipv6 modules (20-ipv6 and 42-ip6tables), led trigger module for USB and both ppp files and now I have almost 3MB free after boot <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />Now I am able to list opkg packages and gre the result with no out-of-memory problem <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p236985">
				<div class="post-metadata">
					<div class="post-num">Post #120</div>
					<div class="post-author">e_lm_70</div>
					<div class="post-datetime">
						16 Jun 2014, 15:41					</div>
				</div>
				<div class="post-content content">
					<p>Hi</p><p>I just got the nake HLK-RM04 module from BangGood: <a href="http://www.banggood.com/Uart-Serial-Port-To-Ethernet-WiFi-Wireless-Converting-Adapter-Module-p-930217.html">http://www.banggood.com/Uart-Serial-Por … 30217.html</a></p><p>Still default firmware.</p><p>Playing with the WEB interface I set &quot;Serial to Wifi AP&quot;</p><p>Now the WEB GUI is not working anymore. Nor I&#039;m able to see or make any command on the serial interface.</p><p>Factory reset is via RS/EST pin .. but none of the 28 pin is named in this way ...&nbsp; any idea ?</p><p>I would like to have the most simple way to use the serial port (as server) and have a client over Wifi, possibly using telnet that send 1:1 what is over telnet to the serial server ...</p><p>How can I do it .. and how I can reset my board to default mode ?</p><p>Thanks</p><p>e_lm_70</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p236988">
				<div class="post-metadata">
					<div class="post-num">Post #121</div>
					<div class="post-author">e_lm_70</div>
					<div class="post-datetime">
						16 Jun 2014, 16:21					</div>
				</div>
				<div class="post-content content">
					<p>Looking at the picture on post #17 .... it is looking that one of the two switch is connected to pin 19 ... still if I put pin 19 to gnd, I can&#039;t make any factory reset ... pin 19 per specs is RTS_N ... that is more the Ready To Send serial input signal ...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p236997">
				<div class="post-metadata">
					<div class="post-num">Post #122</div>
					<div class="post-author">e_lm_70</div>
					<div class="post-datetime">
						16 Jun 2014, 17:18					</div>
				</div>
				<div class="post-content content">
					<p>Still messing around with this module. I did notice that the change in the GUI did change the IP address used for the GUI itself , from 192.168.16.254 to 192.168.11.254</p><p>Anyhow, apparently my TCP test client can open the 192.168.11.245 or 192.168.16.254 port 8080 ... but still I can&#039;t see anything over my USB-Serial adapter .. connected to the primary TX pins ...</p><p>I&#039;m using directly the naked board, without the &quot;adapter&quot; ... not sure what I&#039;m doing wrong ... at least it is still alive my module</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237002">
				<div class="post-metadata">
					<div class="post-num">Post #123</div>
					<div class="post-author">e_lm_70</div>
					<div class="post-datetime">
						16 Jun 2014, 17:56					</div>
				</div>
				<div class="post-content content">
					<p>Problem fixed ... at least ... I get the basic to work .. still I don&#039;t know how to get the AT &quot;console&quot;</p><p>The documentation was quite poor.</p><p>The main serial interface is the one on pin 20 and 21 ... not the one on pin 22 and 26</p><p>Using the the default setting, the TCP client work on port 192.168.16.254 ... and I can communicate over serial ... nice <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>The pin documentation here is more clean:<br /><a href="http://www.hlktech.net/product_detail.php?ProId=39">http://www.hlktech.net/product_detail.php?ProId=39</a></p><p>The one from the PDF manual is quite confusing</p><p>The reset button is looking is pin 25 from this page ...&nbsp; what was documented as RIN in the PDF</p><p>Ups not .. pin 10 is ES/RST <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>e_lm_70</strong> on 16 Jun 2014, 18:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237325">
				<div class="post-metadata">
					<div class="post-num">Post #124</div>
					<div class="post-author">ABATAPA</div>
					<div class="post-datetime">
						19 Jun 2014, 11:38					</div>
				</div>
				<div class="post-content content">
					<p>Hello!<br />How correspondens the GPIO numbers and module pin?<br />For example, I do (patched dts):<br />echo 11 &gt;&nbsp; /sys/class/gpio/export<br />ls -l <br />root@OpenWrt:/# ls -l /sys/class/gpio/<br />--w-------&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4096 Jun 19 08:30 export<br />lrwxrwxrwx&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 Jun 19 08:26 gpio11 -&gt; ../../devices/10000000.palmbus/10000600.gpio/gpio/gpio11<br />lrwxrwxrwx&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 Jan&nbsp; 1&nbsp; 1970 gpiochip0 -&gt; ../../devices/10000000.palmbus/10000600.gpio/gpio/gpiochi0<br />--w-------&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4096 Jan&nbsp; 1&nbsp; 1970 unexport</p><p>What pin corresponds to GPIO 11?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237329">
				<div class="post-metadata">
					<div class="post-num">Post #125</div>
					<div class="post-author">tman</div>
					<div class="post-datetime">
						19 Jun 2014, 12:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ABATAPA wrote:</cite><blockquote><p>What pin corresponds to GPIO 11?</p></blockquote></div><p>GPIO11 isn&#039;t available on the HLK-RM04 module pins. Look at the link provided by e_lm_70 above to see which GPIOs are available.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 5 of 9</div><nav><ul><li><a href="viewtopic.php%3Fid=42142&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42142&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=42142&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li><li><a href="viewtopic.php%3Fid=42142&amp;p=6.html">6</a></li><li><a href="viewtopic.php%3Fid=42142&amp;p=7.html">7</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42142&amp;p=9.html">9</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>