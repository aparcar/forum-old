<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Random reboot TL-WR1043ND with OpenWrt 15.05 or 15.05.1</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 12 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p317386">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">dangar</div>
					<div class="post-datetime">
						30 Mar 2016, 18:27					</div>
				</div>
				<div class="post-content content">
					<p>I have troubles with TL-WR1043ND v 1.7 router using OpenWrt 15.05 or 15.05.1. Router is not able to reach more than 3 days of uptime. There is nothing special installed, router is using default settings and it is working in client mode. It is without any load, just in idle mode. No cable is plugged in. I even tried to CPU stress for more then 2 hours but there was no reboot during this testing.</p><p>So router is now on the floor and occasionally I am checking it&#039;s uptime and highest number was hardly 3 days.</p><p>When I went back to stock latest firmware, the router was able to stay online without reboot (under same conditions) for almost 5 days - than I went back to OpenWrt. </p><p>Is there any possibility how to get some info, why router was rebooted? </p><p>I tried logging to usb flash drive but there was nothing suspicious - at least for me <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" />. There are just many records with renew of ip address on wwan and when it reboots, there is just wrong time for a while after reboot.</p><p>Here is small part from the log when it reboots<br /></p><div class="codebox"><pre><code>Sun Feb 21 14:49:22 2016 daemon.notice netifd: wwan (2487): Sending renew...
Sun Feb 21 14:49:22 2016 daemon.notice netifd: wwan (2487): Lease of 192.168.5.35 obtained, lease time 3600
Thu Feb 18 15:58:51 2016 daemon.info procd: - init complete -
Thu Feb 18 15:58:52 2016 user.notice firewall: Reloading firewall due to ifup of wwan (wlan0)
Thu Feb 18 15:58:58 2016 kern.notice kernel: [   37.380000] random: nonblocking pool is initialized
Sun Feb 21 15:32:31 2016 daemon.notice netifd: wwan (1125): Sending renew...
Sun Feb 21 15:32:31 2016 daemon.notice netifd: wwan (1125): Lease of 192.168.5.35 obtained, lease time 3600 </code></pre></div><p>I did not try older version of OpenWrt on this particular device yet.</p><p>Thanks for any pointing how to continue.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p317424">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">bolvan</div>
					<div class="post-datetime">
						30 Mar 2016, 21:18					</div>
				</div>
				<div class="post-content content">
					<p>Probably kernel panic. After reboot see if /sys/kernel/debug/crashlog present</p>											<p class="post-edited">(Last edited by <strong>bolvan</strong> on 30 Mar 2016, 21:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p317478">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">ckm</div>
					<div class="post-datetime">
						31 Mar 2016, 08:03					</div>
				</div>
				<div class="post-content content">
					<p>Do a upgrade with this <a href="http://s000.tinyupload.com/index.php?file_id=04339510412418491923">http://s000.tinyupload.com/index.php?fi … 2418491923</a><br />That should fix it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p317533">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">dangar</div>
					<div class="post-datetime">
						31 Mar 2016, 14:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>bolvan wrote:</cite><blockquote><p>Probably kernel panic. After reboot see if /sys/kernel/debug/crashlog present</p></blockquote></div><p>I checked and there is no crashlog file <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p317534">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">dangar</div>
					<div class="post-datetime">
						31 Mar 2016, 14:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ckm wrote:</cite><blockquote><p>Do a upgrade with this <a href="http://s000.tinyupload.com/index.php?file_id=04339510412418491923">http://s000.tinyupload.com/index.php?fi … 2418491923</a><br />That should fix it.</p></blockquote></div><p>Ok thanks I will try it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p317552">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">bolvan</div>
					<div class="post-datetime">
						31 Mar 2016, 16:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>bolvan wrote:</cite><blockquote><p>Probably kernel panic. After reboot see if /sys/kernel/debug/crashlog present</p></blockquote></div><p>Others also blamed this feature. It can fail.<br />The only 100% method of detecting kernel panic is serial console.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p318517">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">dangar</div>
					<div class="post-datetime">
						7 Apr 2016, 12:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dangar wrote:</cite><blockquote><div class="quotebox"><cite>ckm wrote:</cite><blockquote><p>Do a upgrade with this <a href="http://s000.tinyupload.com/index.php?file_id=04339510412418491923">http://s000.tinyupload.com/index.php?fi … 2418491923</a><br />That should fix it.</p></blockquote></div><p>Ok thanks I will try it.</p></blockquote></div><p>So I tried and it seems that when router is using final version of BarrierBreaker then it is stable again. Almost 7 days uptime so I am going to consider it as stable and ready for final configuration <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>Does it mean that this router is not and probably never will be friend with Chaos Calmer?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p321176">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">dangar</div>
					<div class="post-datetime">
						25 Apr 2016, 10:35					</div>
				</div>
				<div class="post-content content">
					<p>I attached serial console to the router to monitor what is going on when it reboots. When it reboots there is just this:</p><div class="codebox"><pre><code>root@OpenWrt:/# uptime
 18:51:05 up 1 day, 10:23,  load average: 0.00, 0.01, 0.04
root@OpenWrt:/# [144298.510000] ath: phy0: DMA failed to stop in 10 ms AR_CR=0x00000024 AR_DIAG_SW=0x42100020 DMADBG_7=0x000084c0
[144299.420000] wlan0: authenticate with f4:ec:38:fc:11:18
[144299.450000] wlan0: send auth to f4:ec:38:fc:11:18 (try 1/3)
[144299.460000] wlan0: authenticated
[144299.480000] wlan0: associate with f4:ec:38:fc:11:18 (try 1/3)
[144299.480000] wlan0: RX AssocResp from f4:ec:38:fc:11:18 (capab=0x411 status=0 aid=3)
[144299.490000] wlan0: associated
uptime
 09:54:33 up 2 days,  1:26,  load average: 0.00, 0.01, 0.04
root@OpenWrt:/# [212833.490000] wlan0: authenticate with f4:ec:38:fc:11:18
[212833.520000] wlan0: send auth to f4:ec:38:fc:11:18 (try 1/3)
[212833.530000] wlan0: authenticated
[212833.550000] wlan0: associate with f4:ec:38:fc:11:18 (try 1/3)
[212833.550000] wlan0: RX AssocResp from f4:ec:38:fc:11:18 (capab=0x411 status=0 aid=3)
[212833.560000] wlan0: associated
[219004.090000] wlan0: authenticate with f4:ec:38:fc:11:18
[219004.120000] wlan0: send auth to f4:ec:38:fc:11:18 (try 1/3)
[219004.130000] wlan0: authenticated
[219004.150000] wlan0: associate with f4:ec:38:fc:11:18 (try 1/3)
[219004.150000] wlan0: RX AssocResp from f4:ec:38:fc:11:18 (capab=0x411 status=0 aid=3)
[219004.160000] wlan0: associated
˙

U-Boot 1.1.4 (Apr 28 2013 - 16:01:02)</code></pre></div><p>Is it possible to get better information than this? <br />I am attaching full log file for 9 days of monitoring. It rebooted 3x during this time.</p><p><a href="https://www.dropbox.com/s/eazyrk4bz9vy7o4/cutecom.log?dl=0">https://www.dropbox.com/s/eazyrk4bz9vy7 … m.log?dl=0</a></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>