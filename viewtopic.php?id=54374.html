<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> dns resolving error frmo wifi connected devices</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 3 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p256398">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">nass</div>
					<div class="post-datetime">
						3 Dec 2014, 10:52					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,<br />I am not sure what have I messed up, but I cannot resolv other pc&#039;s in my local network from the wifi-connected devices (laptops and cell phones).<br />I have a separate tower-pc that acts as a dns and dhcp server (among other things) so from openwrt, I thought I was forwarding the dns the requests to that dns server. apparently something is wrong and I cannot pin-point it.</p><p>observations:<br />1. from all wifi-clients, I can get a FQDN be resolved. So if my intranet domain is &quot;xsolutions.office.&quot; and I &quot;nslookup pc1.xsolutions.office&quot; , this will work file. What does not work is &quot;nslookup pc1&quot;.<br />1. if I ssh into the openwrt router and &quot;nslookup pc1&quot;, it works:</p><p>root@OpenWrt:~# nslookup&nbsp; pc1<br />Server:&nbsp; &nbsp; 192.168.112.112<br />Address 1: 192.168.112.112 srv.xsolutions.office</p><p>Name:&nbsp; &nbsp; &nbsp; pc1<br />Address 1: 192.168.112.161 pc1.xsolutions.office</p><p>2. nslookup from a windows laptop , does not work at all. not even with FQDN!</p><br /><p>these are my dns and wireless info:</p><p>wireless.wl0=wifi-device<br />wireless.wl0.type=broadcom<br />wireless.wl0.channel=auto<br />wireless.wl0.txpower=18<br />wireless.wl0.hwmode=11gst<br />wireless.wl0.txantenna=3<br />wireless.wl0.rxantenna=3<br />wireless.@wifi-iface[0]=wifi-iface<br />wireless.@wifi-iface[0].device=wl0<br />wireless.@wifi-iface[0].network=lan<br />wireless.@wifi-iface[0].mode=ap<br />wireless.@wifi-iface[0].ssid=OpenWrt<br />wireless.@wifi-iface[0].encryption=psk2<br />wireless.@wifi-iface[0].key=*********<br />wireless.@wifi-iface[0].doth=1</p><p>root@OpenWrt:~# uci show | grep dns<br />dhcp.@dnsmasq[0]=dnsmasq<br />dhcp.@dnsmasq[0].localise_queries=1<br />dhcp.@dnsmasq[0].rebind_protection=1<br />dhcp.@dnsmasq[0].rebind_localhost=1<br />dhcp.@dnsmasq[0].expandhosts=1<br />dhcp.@dnsmasq[0].readethers=1<br />dhcp.@dnsmasq[0].leasefile=/tmp/dhcp.leases<br />dhcp.@dnsmasq[0].resolvfile=/tmp/resolv.conf.auto<br />dhcp.@dnsmasq[0].server=srv.xsolutions.office<br />dhcp.@dnsmasq[0].logqueries=1<br />dhcp.@dnsmasq[0].domain=xsolutions.office.<br />network.lan.dns=192.168.112.112<br />ucitrack.@dhcp[0].init=dnsmasq</p><p>could you help out? </p><p>thank you!</p><br /><p>EDIT:<br />connecting a pc in one of the switch ports (say port 2, since port 1 is where the wifi gets connected to the home server and gets it&#039;s internet from) with an ethernet wire, I get &quot;nslookup&quot; to work properly!<br />every port of the switch works fine. <br />It seems as if packets are not fwd correctly between switch (lan ports) and wifi even though they are bridged together under br0. what could be wrong?</p>											<p class="post-edited">(Last edited by <strong>nass</strong> on 6 Dec 2014, 03:22)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>