<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TP-Link TL-WR841N v8.0</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 26 Jul 2014 and 6 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 4 of 21</div><nav><ul><li><a href="viewtopic.php%3Fid=37010&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=37010&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=37010&amp;p=3.html">3</a></li><li class="pagination-current"><span>4</span></li><li><a href="viewtopic.php%3Fid=37010&amp;p=5.html">5</a></li><li><a href="viewtopic.php%3Fid=37010&amp;p=6.html">6</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=37010&amp;p=21.html">21</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p183208">
				<div class="post-metadata">
					<div class="post-num">Post #76</div>
					<div class="post-author">teone</div>
					<div class="post-datetime">
						14 Nov 2012, 09:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><div class="quotebox"><cite>teone wrote:</cite><blockquote><p>The first time I flashed from original UI <a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/openwrt-ar71xx-generic-tl-wr841nd-v7-squashfs-factory.bin">http://downloads.openwrt.org/snapshots/ … actory.bin</a> I bricked <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p></blockquote></div><p>this makes no sense.. Snapshot builds change continuously, you can&#039;t trust them, and you can&#039;t make these comparisions.</p></blockquote></div><p>Hence you suggest to use the attitude_adjustment?<br />May I ask you what&#039;s the difference between snapshot and attitude_Adjustment?</p><p>Thank you,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p183231">
				<div class="post-metadata">
					<div class="post-num">Post #77</div>
					<div class="post-author">undermonster</div>
					<div class="post-datetime">
						14 Nov 2012, 14:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>undermonster wrote:</cite><blockquote><p><strong>I Unbricked my WR841N v8.2 - without hardware hacks.</strong></p><p>I will explain how to revert to STOCK firmware.</p><p><strong>Must Understand!!!</strong><br />You cannot copy a file over Telnet <em>with ease</em>.<br />I installed <span style="color: red">xampp</span> on my PC, and then put the <span style="color: red">factory <strong>.bin</strong></span> in the <span style="color: red">htdocs</span> folder.<br />Use google to find the location of the HTDOCS folder for your OS.<br />Windows is: C:\xampp\htdocs\<br />Then I started the <span style="color: red">apache</span> service.<br />This allowed me to transfer the file via HTTP, or more specifically using the command wget.</p><p><strong>Getting the router Ready</strong><br />1) Connect ETHERNET cable to your router, in the WAN port (<em>blue</em>)<br />2) Turn Router ON. Press the <strong>WPS/Reset</strong> button many times.<br />3) Wait for LED under <strong>gear</strong> icon to flash rapidly.<br /><span style="color: green">Your router is in <strong>Recovery Mode</strong> now.</span></p><p><strong>Connecting to the router via telnet</strong><br />1) Set your Computer IP to 192.168.1.2 (<em>Ethernet, not WiFi</em>)<br />2) Open CMD/Terminal<br />3) Type: <span style="color: blue">ping 192.168.1.1</span><br />4) Wait for PING to respond (<em>Not failed response</em>). Cancel pinging (<span style="color: blue">CTRL + C</span>)<br />5) Type: <span style="color: blue">telnet 192.168.1.1</span><br />6) <span style="color: purple">openWRT in Recovery Mode does not require username/password!</span><br /><span style="color: green">You are now accessing the router via telnet.</span></p><p><strong> Transferring stock firmware to the router</strong><br /><span style="color: red">You should be connected in a telnet session now!</span><br /><span style="color: red">Assuming you have set up xampp on your PC!</span><br />1) Type: <span style="color: blue">cd /tmp</span><br />2) Type: <span style="color: blue">wget <a href="http://192.168.1.2/wr841nv8_en_3_13_18_up(120522).bin">http://192.168.1.2/wr841nv8_en_3_13_18_up(120522).bin</a></span><br />3) Type: <span style="color: blue">mv wr841nv8_en_3_13_18_up(120522).bin tplink.bin</span><br /><span style="color: Green">You have now transferred the stock firmware to the router.</span></p><p><strong>Flashing the router with the firmware</strong><br />1) Type: <span style="color: blue">mtd -r write /tmp/tplink.bin firmware</span><br />2) Wait for &quot;Reboot&quot; message. If error message appears, manually reboot.<br /><span style="color: green">You are now using stock firmware.</span></p><p>Your router is now back to Factory Defaults.<br />Disconnect the ethernet cable from WAN and insert to LAN-1.<br />Set your PC to assign IP via DHCP.</p></blockquote></div><p>I have made it a little easier to understand.</p><p>I apologise for my first one being a little, amateurish.<br />I don&#039;t make tutorials.. sorry <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> </p><p>If you need any more help, please feel free to ask. I will try and answer.<br />Unfortunately, I have other commitments in life and may not be able to answer immediately.</p>											<p class="post-edited">(Last edited by <strong>undermonster</strong> on 14 Nov 2012, 14:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p183307">
				<div class="post-metadata">
					<div class="post-num">Post #78</div>
					<div class="post-author">davidmeyer1</div>
					<div class="post-datetime">
						15 Nov 2012, 13:56					</div>
				</div>
				<div class="post-content content">
					<p>used the file in the instructions<br />after writing resulted in &quot;[e] error writing over block&quot; \\ something along those lines<br />rebooted and now all leds except power led just flash in concert while the power led is on without blinking</p><br /><br /><div class="quotebox"><cite>undermonster wrote:</cite><blockquote><div class="quotebox"><cite>undermonster wrote:</cite><blockquote><p><strong>I Unbricked my WR841N v8.2 - without hardware hacks.</strong></p><p>I will explain how to revert to STOCK firmware.</p><p><strong>Must Understand!!!</strong><br />You cannot copy a file over Telnet <em>with ease</em>.<br />I installed <span style="color: red">xampp</span> on my PC, and then put the <span style="color: red">factory <strong>.bin</strong></span> in the <span style="color: red">htdocs</span> folder.<br />Use google to find the location of the HTDOCS folder for your OS.<br />Windows is: C:\xampp\htdocs\<br />Then I started the <span style="color: red">apache</span> service.<br />This allowed me to transfer the file via HTTP, or more specifically using the command wget.</p><p><strong>Getting the router Ready</strong><br />1) Connect ETHERNET cable to your router, in the WAN port (<em>blue</em>)<br />2) Turn Router ON. Press the <strong>WPS/Reset</strong> button many times.<br />3) Wait for LED under <strong>gear</strong> icon to flash rapidly.<br /><span style="color: green">Your router is in <strong>Recovery Mode</strong> now.</span></p><p><strong>Connecting to the router via telnet</strong><br />1) Set your Computer IP to 192.168.1.2 (<em>Ethernet, not WiFi</em>)<br />2) Open CMD/Terminal<br />3) Type: <span style="color: blue">ping 192.168.1.1</span><br />4) Wait for PING to respond (<em>Not failed response</em>). Cancel pinging (<span style="color: blue">CTRL + C</span>)<br />5) Type: <span style="color: blue">telnet 192.168.1.1</span><br />6) <span style="color: purple">openWRT in Recovery Mode does not require username/password!</span><br /><span style="color: green">You are now accessing the router via telnet.</span></p><p><strong> Transferring stock firmware to the router</strong><br /><span style="color: red">You should be connected in a telnet session now!</span><br /><span style="color: red">Assuming you have set up xampp on your PC!</span><br />1) Type: <span style="color: blue">cd /tmp</span><br />2) Type: <span style="color: blue">wget <a href="http://192.168.1.2/wr841nv8_en_3_13_18_up(120522).bin">http://192.168.1.2/wr841nv8_en_3_13_18_up(120522).bin</a></span><br />3) Type: <span style="color: blue">mv wr841nv8_en_3_13_18_up(120522).bin tplink.bin</span><br /><span style="color: Green">You have now transferred the stock firmware to the router.</span></p><p><strong>Flashing the router with the firmware</strong><br />1) Type: <span style="color: blue">mtd -r write /tmp/tplink.bin firmware</span><br />2) Wait for &quot;Reboot&quot; message. If error message appears, manually reboot.<br /><span style="color: green">You are now using stock firmware.</span></p><p>Your router is now back to Factory Defaults.<br />Disconnect the ethernet cable from WAN and insert to LAN-1.<br />Set your PC to assign IP via DHCP.</p></blockquote></div><p>I have made it a little easier to understand.</p><p>I apologise for my first one being a little, amateurish.<br />I don&#039;t make tutorials.. sorry <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> </p><p>If you need any more help, please feel free to ask. I will try and answer.<br />Unfortunately, I have other commitments in life and may not be able to answer immediately.</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p183487">
				<div class="post-metadata">
					<div class="post-num">Post #79</div>
					<div class="post-author">gulweb</div>
					<div class="post-datetime">
						17 Nov 2012, 14:40					</div>
				</div>
				<div class="post-content content">
					<p>Hello all,</p><p>I have successfully flashed two routers with the AA 12.09 beta2 build. While most of the firmware seems A+, there are three problems that I have discovered.<br />1. When set to SE wireless domain, channels 12 and 13 are missing.<br />2. WDS is not transparent, and will not pass ethernet packets with IPV6 , so the boxes cannot&nbsp; replace older &quot;bridges&quot;<br />3. If I install kmod-ipv6, still keeling the config where the WAN ports are not used / configured, but everything connected to the LAN ports<br />and wifi used for WDS bridging, the routers will eventually pick up the proper IPV6 prefix that is advertised by another third router, but<br />IPV6 connectivity will not happen. It looks like the WDS / IPV6 code modifies packets that should be forwarded transparentlt over the LAN L2 domain.</p>											<p class="post-edited">(Last edited by <strong>gulweb</strong> on 17 Nov 2012, 17:57)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p183488">
				<div class="post-metadata">
					<div class="post-num">Post #80</div>
					<div class="post-author">y.yumu</div>
					<div class="post-datetime">
						17 Nov 2012, 14:55					</div>
				</div>
				<div class="post-content content">
					<p>Hi gulweb.. can you tell me what version of tp link wr841nd did you had ? V8.0, v8.1 etc <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" />. Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p183491">
				<div class="post-metadata">
					<div class="post-num">Post #81</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						17 Nov 2012, 15:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>teone wrote:</cite><blockquote><p>Hence you suggest to use the attitude_adjustment?<br />May I ask you what&#039;s the difference between snapshot and attitude_Adjustment?</p><p>Thank you,</p></blockquote></div><p>This post should clear you everything</p><p><a href="https://forum.openwrt.org/viewtopic.php?pid=183395#p183395">https://forum.openwrt.org/viewtopic.php … 95#p183395</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p183509">
				<div class="post-metadata">
					<div class="post-num">Post #82</div>
					<div class="post-author">gulweb</div>
					<div class="post-datetime">
						17 Nov 2012, 17:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>y.yumu wrote:</cite><blockquote><p>Hi gulweb.. can you tell me what version of tp link wr841nd did you had ? V8.0, v8.1 etc <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" />. Thanks</p></blockquote></div><p>My hardware was 8.0. I first tried stock firmware, which seemed OK, but did not work with IPv6. Hence, I tried openwrt, and picked up the<br />prebuilt AA image that came out in nov, to save myself of the hazzle of adding all the web components. ( I have done that befor with another router<br />and it was a bit tedious)</p><p>Unfortunately I still cannot get IPv6 to work. (i did not expect miracles, but expected BRIDGING to work)</p><p>:-)</p><p>Gulweb</p>											<p class="post-edited">(Last edited by <strong>gulweb</strong> on 17 Nov 2012, 17:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p183543">
				<div class="post-metadata">
					<div class="post-num">Post #83</div>
					<div class="post-author">y.yumu</div>
					<div class="post-datetime">
						17 Nov 2012, 23:59					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ll try install it on my router.. btw a new update for the stock firmware came out for who wants to check it out.. I&#039;d like to see more of you posting in this thread your experience with this router..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p183563">
				<div class="post-metadata">
					<div class="post-num">Post #84</div>
					<div class="post-author">aveyer</div>
					<div class="post-datetime">
						18 Nov 2012, 08:06					</div>
				</div>
				<div class="post-content content">
					<p>Working fine in my v8.2, other than 2 problems:<br />Channel 12 and 13 seem to be missing regardless of the domain used.<br />Vlan config through LUCI is messed up, it doesn&#039;t show the WAN port there and it shows port 2 connected when i&#039;m actually connected through port 1 etc.<br />I got vlan tagging working through UCI instead.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p183630">
				<div class="post-metadata">
					<div class="post-num">Post #85</div>
					<div class="post-author">y.yumu</div>
					<div class="post-datetime">
						19 Nov 2012, 00:37					</div>
				</div>
				<div class="post-content content">
					<p>Installed openwrt on my v8.0 and... worked <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" />. I guess if i want to go back to the original i can brick it ? Someone can help me ? If i use this command mtd -r write /tmp/tplink.bin firmware to write the original, it will work ? Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p183667">
				<div class="post-metadata">
					<div class="post-num">Post #86</div>
					<div class="post-author">teone</div>
					<div class="post-datetime">
						19 Nov 2012, 13:34					</div>
				</div>
				<div class="post-content content">
					<p>anyone with a 8.1 working?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p183679">
				<div class="post-metadata">
					<div class="post-num">Post #87</div>
					<div class="post-author">y.yumu</div>
					<div class="post-datetime">
						19 Nov 2012, 14:52					</div>
				</div>
				<div class="post-content content">
					<p>Great news. Wanted to go back to my stock firmware, so i used mtd -r write /tmp/tplink.bin firmware and worked like a charm ! ATTENTION ! Download the first firmware (not the one on the top, the one on the bottom, wr841nv8_en_3_13_18_up(120522).bin) from the firmware list of your version(in our case, v8). It must NOT contain the word boot in it, otherwise you&#039;ll brick your router.</p>											<p class="post-edited">(Last edited by <strong>y.yumu</strong> on 19 Nov 2012, 14:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p183707">
				<div class="post-metadata">
					<div class="post-num">Post #88</div>
					<div class="post-author">gulweb</div>
					<div class="post-datetime">
						19 Nov 2012, 20:24					</div>
				</div>
				<div class="post-content content">
					<p>A word of warning until this is verified properly, RESTORING orig firmware.</p><p>TL-WR841ND V 8.0000</p><p>Today I tried to restore the original TP-link firmware. I copied it to /tmp and tried to write it with mtd -r write /tmp/fw.bin firmware</p><p>This proceeded for about two minutes, but after that I got an error saying <br />cannot erase flash sector (or somesuch)</p><p>I didn&#039;t want to take the risk of bricking the box, so I downloaded Openwrt again, and flashed that, since I did not know if <br />flash was halfwritten. This worked OK, but I had to set the router up again from initial boot state</p><p>It could be flash WAS written properly, but I did not take the risk to find out....</p><p>Undermonster:&nbsp; &nbsp;is this error about not being able to erase the one you have seen, i.e. NOT a problem??</p>											<p class="post-edited">(Last edited by <strong>gulweb</strong> on 19 Nov 2012, 21:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p183718">
				<div class="post-metadata">
					<div class="post-num">Post #89</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						19 Nov 2012, 22:50					</div>
				</div>
				<div class="post-content content">
					<p>Be really careful about file size of original firmware, you need one without bootloader!</p><p> <a href="https://forum.openwrt.org/viewtopic.php?pid=182333#p182333">https://forum.openwrt.org/viewtopic.php … 33#p182333</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p183719">
				<div class="post-metadata">
					<div class="post-num">Post #90</div>
					<div class="post-author">undermonster</div>
					<div class="post-datetime">
						19 Nov 2012, 23:10					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>gulweb wrote:</cite><blockquote><p>Undermonster:&nbsp; &nbsp;is this error about not being able to erase the one you have seen, i.e. NOT a problem??</p></blockquote></div><p>The error I am referring to is an error with rebooting, nothing else.</p><p>If there is an error writing to the flash, that is completely different.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p183793">
				<div class="post-metadata">
					<div class="post-num">Post #91</div>
					<div class="post-author">gulweb</div>
					<div class="post-datetime">
						20 Nov 2012, 18:12					</div>
				</div>
				<div class="post-content content">
					<p>Thanks Undermonster,</p><p>I suspected that, so, I&#039;ll have to find a firmware without loader....</p><p>gulweb</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p183943">
				<div class="post-metadata">
					<div class="post-num">Post #92</div>
					<div class="post-author">gulweb</div>
					<div class="post-datetime">
						22 Nov 2012, 01:45					</div>
				</div>
				<div class="post-content content">
					<p>I decided to restore tp-link firmware on my two 841&#039;s . They say 8.1 on the box, but 8.0 in firmware. I restored the wr841nv8_en_3_13_18_up(120522).bin firmware, since that was said to be sucessful. The router came back up, and I applied the two later tplink upgrades, ending with wr841nv8_en_3_13_27_up_boot(121101).bin</p><p>Triggered by the sucess, I applied the same procedure to the other router. It flashed the image without complaining, stated that it was rebooting,<br />and Voila --- A BRICK. It does not repond to the 192.168.1.1 address, its 192.168.1.249 address(which it had on my lan) , it only lights up the power indicator, none of the other leds are on. I tried the debricking procedure by connecting BLUE port, and pinging 192.168.1.1 from 192.168.1.2.</p><p>Nothing. I brought it to my workshop, I can see that it transmits something on the uart TX pin, but I dont have an adapter cable, will set that up tomorrow.</p><p>So, either the HW is erratic, or the openwrt / mtd / restore process, since routers are identical as far as I can see, and my procedure as well.</p><p>On power up, it lights up all leds for 1/2 sec, turns everything off except the power led, there is an extremely weak/short blink of the rightmost led, only visible in pitch dark, then no more visible action.</p>											<p class="post-edited">(Last edited by <strong>gulweb</strong> on 22 Nov 2012, 01:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p183974">
				<div class="post-metadata">
					<div class="post-num">Post #93</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						22 Nov 2012, 11:16					</div>
				</div>
				<div class="post-content content">
					<p>we well see from the serial console what gone wrong! seems strange...</p><p>did you do a &quot;firstboot&quot; or &quot;perform reset&quot; before flashing?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p184033">
				<div class="post-metadata">
					<div class="post-num">Post #94</div>
					<div class="post-author">gulweb</div>
					<div class="post-datetime">
						23 Nov 2012, 00:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><p>we well see from the serial console what gone wrong! seems strange...</p><p>did you do a &quot;firstboot&quot; or &quot;perform reset&quot; before flashing?</p></blockquote></div><p>I built a serial interface for the bricked box. I could only see a lot of garbage on the screen and then the linux booting (tplink linux).</p><p>The boot process complained about squasfs errors, no ethernet, no httpd process. It was possible to load a couple of net modules, ifconfig eth1 up<br />(the wan port) and get ip connectivity. I could even tftp things onto the router, but I could find no tool to write the flash.</p><p>After checking the &quot;garbage&quot; with an oscilloscope, I realised that the Uboot needed 7bitSPACE parity, to display and accept minicom. After trying many many times, I managed to get into the boot and was greeted with a wasp&gt; prompt. I tried to restore the formware, but probably messed up the procedure, since after booting the newly installed firmware I got a message &quot;decompressed image to big&quot;, and that was the final end of it!!</p><p>SO, it could perhaps have been saved, but now it is gone on to greener pastures.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p184034">
				<div class="post-metadata">
					<div class="post-num">Post #95</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						23 Nov 2012, 00:26					</div>
				</div>
				<div class="post-content content">
					<p>omg very strange thing you said about uboot o.O</p><p>it has always been 8n1 115200 baud!</p><p>i cannot understand how you could damage it, what did you do in the wasp prompt???</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p184039">
				<div class="post-metadata">
					<div class="post-num">Post #96</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						23 Nov 2012, 00:52					</div>
				</div>
				<div class="post-content content">
					<p>anyway you are lucky to have another working flash.. With some skill you could try this trick to recover the bad flash!</p><p> <a href="https://forum.openwrt.org/viewtopic.php?pid=179169#p179169">https://forum.openwrt.org/viewtopic.php … 69#p179169</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p184043">
				<div class="post-metadata">
					<div class="post-num">Post #97</div>
					<div class="post-author">gulweb</div>
					<div class="post-datetime">
						23 Nov 2012, 03:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><p>omg very strange thing you said about uboot o.O</p><p>it has always been 8n1 115200 baud!</p><p>i cannot understand how you could damage it, what did you do in the wasp prompt???</p></blockquote></div><p>Well, I do not really know, maybe there is something wrong with the board. Remember, I got into this state when trying to restore tplink<br />firmware. I used a -3 version, which does NOT contain boot. I copied it with scp to router #1, wrote it with mtd, the router rebooted and all<br />was OK. I then upgraded router #1 two times to get to a NOV release. This was sucessful, so I tried to repeat the procedure with route #2.<br />This resulted in a brick. I think I did the correct thing from wasp&gt;, downloading was OK, size seemed OK, erase was OK, cp.b was OK,<br />bootm gave an expand error, and HALT. </p><p>Thanks for the link, but would it not be equivalen if I just cut out the first part of the tp-link files ( they do NOT say boot in filename, but a strings show<br />the first part is *probably* Uboot ). I guess I WILL cut that part out of the two latest fw and just compare to see if there are changes to Uboot too.</p><p>About terminal, I initially had it at 8N1, but got garbles on term. I captured some in minicom and had a look with od -x -a, I could see that the MSB was set, i.e. all chars were larger than 0x80. I tried various combos until I got correct chars....could it be an initialization problem in Uboot,<br />where the uart is not set properly?? Linux printout was readable.....</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p184059">
				<div class="post-metadata">
					<div class="post-num">Post #98</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						23 Nov 2012, 10:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>gulweb wrote:</cite><blockquote><p>Thanks for the link, but would it not be equivalen if I just cut out the first part of the tp-link files ( they do NOT say boot in filename, but a strings show<br />the first part is *probably* Uboot ). I guess I WILL cut that part out of the two latest fw and just compare to see if there are changes to Uboot too.</p></blockquote></div><p>NO, if they are 0x3c0000 in size, the have NOT uboot. and must not be trimmed!</p><br /><p>you can clearly see the uboot &quot;first rows&quot; are different from the firmware &quot;first rows&quot; with HEXCMP, comparing a file with boot in name (0x3e0200 file size) and one without.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p184061">
				<div class="post-metadata">
					<div class="post-num">Post #99</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						23 Nov 2012, 10:17					</div>
				</div>
				<div class="post-content content">
					<p>anyway what you mean by &quot;-3 version&quot;??</p><p>also, i can&#039;t understand now what happen in serial when you power up!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p184079">
				<div class="post-metadata">
					<div class="post-num">Post #100</div>
					<div class="post-author">gulweb</div>
					<div class="post-datetime">
						23 Nov 2012, 13:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><p>anyway what you mean by &quot;-3 version&quot;??</p><p>also, i can&#039;t understand now what happen in serial when you power up!</p></blockquote></div><p>Sorry, -3 = 3 versions back, which is the only file I can find on the tplink site that is without boot.</p><p>That was the one I used, thinking that since openwrt wants the image-only file, and the tp-link fw comes<br />in two versions (which the tplink code must accept) it would be safer to flash something where the bootloader<br />was NOT updated / modified (if it is in newer fw), and then update with the tplink, and let it do whatever it wanted<br />with the combined image.</p><p>The latest two versions are WITH boot, and if I strip the boot, I can see the header again, for the image in the first 20+ bytes.</p><p>0001 0000 T P - LINK .........</p><p>So the newer two versions seem to be just the image + boot concatenated. One question is WHY they supply the boot again,<br />has the bootloader changed, (bugfix, size of image, prevent loading of alien fw) ??</p><p>I guess there must be some documentation of the header somewhere...</p><p>About power up: When I did the (crude) serial interface I used a transistor for output. It was drivven by 10 k ohm from the TX pin.<br />This prevented the router from booting, i.e. I could not see any activity on the oscilloscope. I had to increase that value to 39k before<br />I got anything on the terminal. I first verified activity with the scope, then built the output IF to see what was happening, and got nothing.</p><p>So, I had to experiment with the values to get ANY output, and it does not have to do with drive capability, since with 10 k there is only<br />(3.3 -0.6 V)/10 k = 270 uA flowing. With this value there is NO activity on TX, with 39 k, abt 70 uA activity starts immediately. It seems the router<br />&quot;senses&quot; pin level before starting output, maybe checking it is not &quot;shorted&quot;, or could be dual purpose pin.</p><p>And, minicom gave lots of little diamods with a ? in them, until Linux kernel boot messages. I first figured baud rate was wrong...</p>											<p class="post-edited">(Last edited by <strong>gulweb</strong> on 23 Nov 2012, 13:13)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 4 of 21</div><nav><ul><li><a href="viewtopic.php%3Fid=37010&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=37010&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=37010&amp;p=3.html">3</a></li><li class="pagination-current"><span>4</span></li><li><a href="viewtopic.php%3Fid=37010&amp;p=5.html">5</a></li><li><a href="viewtopic.php%3Fid=37010&amp;p=6.html">6</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=37010&amp;p=21.html">21</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>