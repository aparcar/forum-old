<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WDS for TL WDR3600</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 31 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p203699">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">sunkai</div>
					<div class="post-datetime">
						4 Jun 2013, 18:13					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I have two TL WDR3600 routers, running AA RC1.</p><p>WDS worked with the stock firmware, but I am unable to create an operational subnet across the wireless routers using OpenWrt.</p><p>The Master and Client MAC addresses appear in the Associated Stations list on each router, but I am unable to ping one from the other (both have static IP addresses on the same subnet). Here are the configurations:</p><p>Master:</p><p>network<br /></p><div class="quotebox"><blockquote><p>config interface &#039;lan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname &#039;eth0.1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option type &#039;bridge&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr &#039;192.168.1.1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;</p></blockquote></div><p>wireless<br /></p><div class="quotebox"><blockquote><p>config wifi-iface<br />&nbsp; &nbsp; &nbsp; &nbsp; option device &#039;radio0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option network &#039;lan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode &#039;ap&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid &#039;OpenWrt&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option wds &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption &#039;wep-open&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option key &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option key1 &#039;xxxxxxxxxx&#039;</p></blockquote></div><p>Client:</p><p>network<br /></p><div class="quotebox"><blockquote><p>config interface &#039;lan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname &#039;eth0.1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option type &#039;bridge&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr &#039;192.168.1.2&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option gateway &#039;192.168.1.1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option dns &#039;192.168.1.1&#039;</p></blockquote></div><p>wireless<br /></p><div class="quotebox"><blockquote><p>config wifi-iface<br />&nbsp; &nbsp; &nbsp; &nbsp; option device &#039;radio0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option network &#039;lan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid &#039;OpenWrt&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode &#039;sta&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option wds &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption &#039;wep-open&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option key &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option key1 &#039;xxxxxxxxxx&#039;</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p203705">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						4 Jun 2013, 18:46					</div>
				</div>
				<div class="post-content content">
					<p>Don&#039;t use wep-open, switch to psk2.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p203709">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">sunkai</div>
					<div class="post-datetime">
						4 Jun 2013, 19:00					</div>
				</div>
				<div class="post-content content">
					<p>I just installed the latest version of Gargoyle to see if it had issues with the WDS capabilities of the model, and it worked correctly (even with wep).</p><p>Gargoyle is based on OpenWrt revision r36669, so I&#039;m thinking that AA RC1 just isn&#039;t compatible with the WDR3600&#039;s WDS functionality.</p><p>I&#039;ll try installing OpenWrt revision r36669 and see if I can get WDS working.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p203719">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">sunkai</div>
					<div class="post-datetime">
						4 Jun 2013, 20:47					</div>
				</div>
				<div class="post-content content">
					<p>Well, the Master router loaded with r36817 continued to work with the Client router loaded with Gargoyle 1.5.10.</p><p>However, WDS stopped working when I loaded the Client router with r36817.</p><p>This suggest that this setup guide is incorrect for the Client (Station):</p><p><a href="http://wiki.openwrt.org/doc/recipes/atheroswds">http://wiki.openwrt.org/doc/recipes/atheroswds</a></p><p>I&#039;d stick with Gargoyle, which is configuring the routers correctly automatically, except that I need more control over how the different bands are used (2.4GHz &amp; 5GHz) than is available in the web interface for Gargoyle.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p203723">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">sunkai</div>
					<div class="post-datetime">
						4 Jun 2013, 21:16					</div>
				</div>
				<div class="post-content content">
					<p>Actually, on reverting the Client station to Gargoyle, to see if it would still work, I noticed it defaults to connecting in Client Bridge mode, not WDS mode.</p><p>After flipping the connection method on the Client station to WDS, the connection was broken again.</p><p>So, it looks like WDS mode just isn&#039;t supported by OpenWrt for the WDR3600.</p><p>Disappointing.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p203725">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">sunkai</div>
					<div class="post-datetime">
						4 Jun 2013, 21:48					</div>
				</div>
				<div class="post-content content">
					<p>Gah!</p><p>I just tried the WDS Gargoyle setup with WPA2 PSK encryption, and it&#039;s now working.</p><p>I didn&#039;t realise from jow&#039;s earlier post that WDS and WEP are incompatible under OpenWrt (the stock firmware allowed this combination).</p><p>I had hoped to keep WEP as a (poor) encryption method for some legacy devices, but I&#039;ll run an AP for them on a separate radio.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p203780">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">sunkai</div>
					<div class="post-datetime">
						5 Jun 2013, 14:35					</div>
				</div>
				<div class="post-content content">
					<p>N.B. I tried having two separate WDS connected networks on the different bands (2.4GHz &amp; 5GHz), using PSK 2, and the client station became inaccessible (due to its CPU being overloaded I believe).</p><p>It was possible to have one of the bands operate in WDS mode, and have individual APs on the other band on each router. These individual APs are bridged to the LAN by default.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p302644">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">piranhaphish</div>
					<div class="post-datetime">
						6 Dec 2015, 21:07					</div>
				</div>
				<div class="post-content content">
					<p>Enable STP on your bridges.</p><p>I&#039;m going to assume that, like me, you have your two WDS WiFis on the same bridged interface.&nbsp; Well, just like having two cables between the same two bridges/switches, a packet storm develops between the devices.&nbsp; Enabling STP prevents that.</p><p>I know this is an old thread, but I just found it and wanted to put this out there for others like me.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>