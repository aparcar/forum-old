<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> php on busybox? possible?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p50118">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">delirium</div>
					<div class="post-datetime">
						9 Jun 2007, 10:20					</div>
				</div>
				<div class="post-content content">
					<p>I have made (per the tutorial) busybox run administration on port 81 and serve port 80 to another web directory.&nbsp; Is it possible for me to add php to busybox rather than have to use thttpd or lighthttpd? all I&#039;m after is taking a form submission into flat text files.&nbsp; If this can be done without adding php I&#039;d love to know how.</p><p>thanks!<br />delirium</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p50131">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">osmosis</div>
					<div class="post-datetime">
						9 Jun 2007, 15:17					</div>
				</div>
				<div class="post-content content">
					<p>Install php4/5 (cgi).</p><p>Add the following line to /etc/httpd.conf:<br /></p><div class="codebox"><pre><code>*.php:/usr/bin/php</code></pre></div><p>Restart httpd:<br /></p><div class="codebox"><pre><code>/etc/init.d/httpd restart</code></pre></div><p>Create a file, phpinfo.php in /www/cgi-bin with the following:<br /></p><div class="codebox"><pre><code>&lt;?php
phpinfo();
?&gt;</code></pre></div><p>Point your browser at the file and thats it.</p>											<p class="post-edited">(Last edited by <strong>osmosis</strong> on 12 Jun 2007, 23:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p50314">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">delirium</div>
					<div class="post-datetime">
						12 Jun 2007, 09:05					</div>
				</div>
				<div class="post-content content">
					<p>hey thanks alot! theres only a few things I&#039;m having trouble with (perhaps because I&#039;m trying this in dd-wrt), I can&#039;t find a http.conf int the etc folder, nor could I try writing one in winscp because it said that was a non writable folder</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p50369">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">osmosis</div>
					<div class="post-datetime">
						12 Jun 2007, 23:16					</div>
				</div>
				<div class="post-content content">
					<p>Sorry, the file was called httpd.conf and should already exist if the busybox httpd was installed.</p><p>I don&#039;t use a squash filesystem so my instructions may have limited mileage for you????</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p50370">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">vincentfox</div>
					<div class="post-datetime">
						12 Jun 2007, 23:30					</div>
				</div>
				<div class="post-content content">
					<p>Using OpenWRT you would have real filesystem.</p><p>Otherwise, ask questions in DD-WRT forums not OpenWRT Kamikaze.</p>											<p class="post-edited">(Last edited by <strong>vincentfox</strong> on 12 Jun 2007, 23:31)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p50389">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">delirium</div>
					<div class="post-datetime">
						13 Jun 2007, 06:38					</div>
				</div>
				<div class="post-content content">
					<p>i am using the newest copy of kamikaze on a fonera and I can&#039;t find the httpd.conf file, but I know that busy box is working because I can browse to anything I&#039;ve put in the www folder</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p50401">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Pulseammo</div>
					<div class="post-datetime">
						13 Jun 2007, 11:32					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://wiki.openwrt.org/OpenWrtDocs/httpd.conf">http://wiki.openwrt.org/OpenWrtDocs/httpd.conf</a></p><p>If you read to the bottom of the page, it explains that the httpd within busybox runs in a default configuration without httpd.conf. Simply create the httpd.conf file within your etc folder, restart httpd as explained by osmosis and it will digest the new configuration.</p><p>Does that clear anything up?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p50450">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">delirium</div>
					<div class="post-datetime">
						14 Jun 2007, 02:31					</div>
				</div>
				<div class="post-content content">
					<p>thanks for helping me out, I really appreciate it!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p50578">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">delirium</div>
					<div class="post-datetime">
						15 Jun 2007, 20:29					</div>
				</div>
				<div class="post-content content">
					<p>unfortunately I get this error when trying to access phpinfo.php</p><div class="codebox"><pre><code>Security Alert! The PHP CGI cannot be accessed directly.

This PHP CGI binary was compiled with force-cgi-redirect enabled. This means that a page will only be served up if the REDIRECT_STATUS CGI variable is set, e.g. via an Apache Action directive.

For more information as to why this behaviour exists, see the manual page for CGI security.

For more information about changing this behaviour or re-enabling this webserver, consult the installation file that came with this distribution, or visit the manual page.</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p50579">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">delirium</div>
					<div class="post-datetime">
						15 Jun 2007, 20:37					</div>
				</div>
				<div class="post-content content">
					<p>make these changes in php.ini will allow php to work!!! </p><p>thanks for your help everyone!</p><br /><div class="codebox"><pre><code>cgi.force_redirect = 0
cgi.redirect_status_env =&quot;yes&quot;;</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95711">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">miguipda</div>
					<div class="post-datetime">
						11 Oct 2009, 10:30					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I tried all i sexplained here.<br />For this I let the luci httpd settings to the port 80.<br />Due to not enough space I installed PHP on the USB key.</p><p>I followed these instructions :<br />Add the following line to /etc/httpd.conf:<br />Code:<br />*.php:/usr/bin/php</p><p>Restart httpd:<br />Code:<br />/etc/init.d/httpd restart</p><p>TO USE A DIFFERENT WWW place I created a WWW on the US Key and I followed the instructions by :<br />Create a file, phpinfo.php in /www/cgi-bin with the following:<br />Code:<br />&lt;?php<br />phpinfo();<br />?&gt;</p><p>I also installed a simple index.html on the /www (USB Key)</p><p>I also followed the instruction by adding :<br />cgi.force_redirect = 0<br />cgi.redirect_status_env =&quot;yes&quot;;</p><p>On the php.ini which is on the USB Key.</p><p>I also (personnaly) added those lines in the /etc/config/httpd file :<br />option &#039;port&#039;&nbsp; &nbsp; &#039;81&#039;<br />option &#039;home&#039;&nbsp; &#039;/mnt/usbdrive-1/www&#039;</p><p>I also do httpd -p 81 -c /etc/httpd.conf (explained by sn4ke in <a href="https://forum.openwrt.org/viewtopic.php?id=21450)">https://forum.openwrt.org/viewtopic.php?id=21450)</a>.</p><p>1) The problem is when I use this URL (<a href="http://192.168.1.1:81">http://192.168.1.1:81</a>) it well display my index file but directly goes (automatically) to <a href="http://192.168.1.1:81/cgi-bin/luci">http://192.168.1.1:81/cgi-bin/luci</a> by giving a 404 not found error.<br />2) The seond problem is I can find the /usr/bin/php which is used in the httpd.conf (I searched in the / of the router and also on the USB Key). I can&#039;t find it. And PHP5 is well installed :<br />php5 - 5.2.6-2 -<br />php5-mod-mysql - 5.2.6-2 -<br />php5-mod-session - 5.2.6-2 -<br />php5-mod-xml - 5.2.6-2 -</p><br /><p>Can somebody tell me what to do to give the correct php in the httpd.conf ? And how to keep displayed my index file without going to the&nbsp; <a href="http://192.168.1.1:81/cgi-bin/luci">http://192.168.1.1:81/cgi-bin/luci</a></p><p>Sincerely thanks and have a nice day.</p><p>Miguipda ;-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p99466">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">filifjonkan</div>
					<div class="post-datetime">
						29 Dec 2009, 06:46					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Goal: Php4 with busybox httpd server (kamikaze 8.09 + x-wrt on a WL500gp v2)</p><p>I have tried the following:</p><p>- installed php4 (on usb disk) (using the packages from <a href="http://downloads.openwrt.org/kamikaze/8.09/brcm-2.4/packages)">http://downloads.openwrt.org/kamikaze/8 … /packages)</a><br />- more specifically I have now installed the following packages (php4, php4-cli, php4-fastcgi, php4-curl)<br />- added a &quot;*.php:/mnt/Optware/usr/bin/php&quot; to httpd.conf (at the bottom of this file)<br />- created file phpinfo.php<br />- configured &quot;cgi.force_redirect = 0 and cgi.redirect_status_env =&quot;yes&quot;;&quot; in php.ini<br />- php-commands work - OK (requesting phpinfo.php in the browser displays a lot of phpinfo)</p><p>However: I cannot get the webserver to output a file that will be recognized as a html page. How do get the php output to be recognized as html?</p><p>I have seen this question in one post before but could not see an answer.</p><p>/Filifjonkan</p><p>Firmware&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; OpenWrt Kamikaze - With X-Wrt Extensions 8.09<br />Kernel&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; Linux 2.4.35.4 #3 Tue May 12 09:24:48 CDT 2009<br />MAC&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;00:XXXXXXX<br />Device&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; ASUS WL-500g Premium V2<br />Board&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; Broadcom BCM5354 chip rev 3</p>											<p class="post-edited">(Last edited by <strong>filifjonkan</strong> on 29 Dec 2009, 06:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p99487">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">kadettgte</div>
					<div class="post-datetime">
						29 Dec 2009, 14:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>filifjonkan wrote:</cite><blockquote><p>Hi,</p><p>Goal: Php4 with busybox httpd server (kamikaze 8.09 + x-wrt on a WL500gp v2)</p><p>I have tried the following:</p><p>- installed php4 (on usb disk) (using the packages from <a href="http://downloads.openwrt.org/kamikaze/8.09/brcm-2.4/packages)">http://downloads.openwrt.org/kamikaze/8 … /packages)</a><br />- more specifically I have now installed the following packages (php4, php4-cli, php4-fastcgi, php4-curl)<br />- added a &quot;*.php:/mnt/Optware/usr/bin/php&quot; to httpd.conf (at the bottom of this file)<br />- created file phpinfo.php<br />- configured &quot;cgi.force_redirect = 0 and cgi.redirect_status_env =&quot;yes&quot;;&quot; in php.ini<br />- php-commands work - OK (requesting phpinfo.php in the browser displays a lot of phpinfo)</p><p>However: I cannot get the webserver to output a file that will be recognized as a html page. How do get the php output to be recognized as html?</p><p>I have seen this question in one post before but could not see an answer.</p><p>/Filifjonkan</p><p>Firmware&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; OpenWrt Kamikaze - With X-Wrt Extensions 8.09<br />Kernel&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; Linux 2.4.35.4 #3 Tue May 12 09:24:48 CDT 2009<br />MAC&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;00:XXXXXXX<br />Device&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; ASUS WL-500g Premium V2<br />Board&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; Broadcom BCM5354 chip rev 3</p></blockquote></div><p><a href="https://forum.openwrt.org/viewtopic.php?id=18889">https://forum.openwrt.org/viewtopic.php?id=18889</a> check this post</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p99635">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">filifjonkan</div>
					<div class="post-datetime">
						31 Dec 2009, 21:36					</div>
				</div>
				<div class="post-content content">
					<p>OK,<br />I do not know what made the difference. I uninstalled everything, and installed again. Suddenly html worked in the browser. Maybe I am too stupid to understand, but I could not find any new info in the referred post. Anyway, it made me do everything once again, and now it works! Thank you!!!! (could it be the exact packages I installed??? they where not the same??? this time I only installed php4-cgi)</p><p>Now I am going to start working with php seriously</p><p>/Per</p>											<p class="post-edited">(Last edited by <strong>filifjonkan</strong> on 31 Dec 2009, 21:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p99640">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">kadettgte</div>
					<div class="post-datetime">
						1 Jan 2010, 06:26					</div>
				</div>
				<div class="post-content content">
					<p>yes, it had to do with the packages <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p201283">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">kchandrasekar2002</div>
					<div class="post-datetime">
						9 May 2013, 17:43					</div>
				</div>
				<div class="post-content content">
					<p>Hi Osmosis<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Please furnish STEP BY STEP how to download and install php4/5-cgi in Busybox. <br />However the link following is not working &quot;<a href="https://forum.openwrt.org/index.php?login=1">https://forum.openwrt.org/index.php?login=1</a>&quot;. <br />NOTE:<br />If i need to &quot;make&quot; i should use &quot;arm-9tdmi-linux-gnu-gcc&quot; as &quot;CC&quot;.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219696">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">yoramdudi@gmail.com</div>
					<div class="post-datetime">
						11 Dec 2013, 10:42					</div>
				</div>
				<div class="post-content content">
					<p>Hi </p><p>Where can I find link to download php for busybox ?</p><p>Please help</p><p>Thanks</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>