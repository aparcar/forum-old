<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Advanced Routing</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 18 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p28455">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mgbowman</div>
					<div class="post-datetime">
						6 Jun 2006, 05:41					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m trying to figure out how to add more routing table so that I can follow the guide found at <a href="http://lartc.org/howto/">http://lartc.org/howto/</a>.&nbsp; On any other &#039;nix box it would be /etc/iproute2/rt_tables but that file is not found and creating it did nothing.&nbsp; I have done &#039;ipkg install ip&#039; but is there an &#039;ipkg install iproute2&#039; I am missing?</p><p>--mgb</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p28475">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">LSU_guy</div>
					<div class="post-datetime">
						6 Jun 2006, 13:06					</div>
				</div>
				<div class="post-content content">
					<p>The package your are looking for you is called &quot;ip&quot;</p><p>Look at:<br /><a href="https://dev.openwrt.org/browser/trunk/openwrt/package/iproute2">https://dev.openwrt.org/browser/trunk/o … e/iproute2</a><br /><a href="https://dev.openwrt.org/browser/trunk/openwrt/package/iproute2/ipkg">https://dev.openwrt.org/browser/trunk/o … oute2/ipkg</a><br /><a href="https://dev.openwrt.org/browser/trunk/openwrt/package/iproute2/ipkg/ip.control">https://dev.openwrt.org/browser/trunk/o … ip.control</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p28625">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mgbowman</div>
					<div class="post-datetime">
						9 Jun 2006, 02:12					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>LSU_guy wrote:</cite><blockquote><p>The package your are looking for you is called &quot;ip&quot;</p></blockquote></div><p>Re-read my post.&nbsp; I have installed this already.&nbsp; What I&#039;m lacking - from previous experience with <a href="http://lartc.org/howto/">LARTC</a> - is the ability to add additional routing tables.&nbsp; I&#039;m using a WRT54GL and unless I&#039;m able to do source-based routing through additional tables, I doubt load balancing will succeed.&nbsp; </p><p>Thanks for you response but anybody else willing to take a stab at this one?</p><p>--mgb</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p28651">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">doddel</div>
					<div class="post-datetime">
						10 Jun 2006, 15:23					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve added additional routing by adding a script in //etc/init.d that contains a bunch of &#039;ip route add .... &#039; commands. It should be executed after S40network ran, which sets the default routes. I rerun it at regular intervals under crond on boxes that have ppp0 connection being started and stopped. If a route already exists ip ignores the command to add it again.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p28666">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">mgbowman</div>
					<div class="post-datetime">
						10 Jun 2006, 19:54					</div>
				</div>
				<div class="post-content content">
					<p>But I don&#039;t think you can create this type of <a href="http://lartc.org/howto/lartc.rpdb.html">routing policy database</a> using a series of &#039;ip route add ...&#039; commands can you?&nbsp; I think I am lacking the ability to create new routing tables of my own.&nbsp; Like I said on any other &#039;nix box this is done using the /etc/iproute2/rt_tables file and the iproute2 package.&nbsp; Once I can create that type of database, I will be able to <a href="http://lartc.org/howto/lartc.rpdb.multiple-links.html">route for multiple uplinks</a>. I&#039;ve read, re-read and re-re-read this guide and was successful on my Gentoo Linux box, but I want to do this on a couple of spare WRTs I have laying around - potentially becoming a 4-port WAN routers.&nbsp; Please someone ... anyone?</p><p>--mgb</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p28687">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">doddel</div>
					<div class="post-datetime">
						11 Jun 2006, 12:33					</div>
				</div>
				<div class="post-content content">
					<p>Just read the link <a href="http://lartc.org/howto/lartc.rpdb.html">http://lartc.org/howto/lartc.rpdb.html</a> you gave and tried the &#039;ip route list table local&#039; command. It shows the extra routes defined in ny start-up script. To me the examples given appear to be nothing more than some additional ip commands and the definition of named tables for ease of readability. Why couldn&#039;t they be issued from a start-up script ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p28713">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">mgbowman</div>
					<div class="post-datetime">
						12 Jun 2006, 02:47					</div>
				</div>
				<div class="post-content content">
					<p>You need the ability for multiple default routes and this can be done in a single&nbsp; table.&nbsp; You need the ability to separate incoming traffic so that it is routed back out the same interface.&nbsp; Then for outgoing traffic, you use the multiple default gateway statement as show in the guide.&nbsp; This effectively load balances outgoing traffic over the two links but also ensures incoming traffic goes back out the interface it originated from.&nbsp; This is where I think the need for multiple tables comes in.</p><p>--mgb</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p29903">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">fgp</div>
					<div class="post-datetime">
						3 Jul 2006, 19:30					</div>
				</div>
				<div class="post-content content">
					<p>The package contains everything you need. It doesn&#039;t include /etc/iproute2/rt_tables,<br />but you can easily create this file yourself.<br />Just open /etc/iproute2/rt_tables using vi, and add:<br />255&nbsp; &nbsp; &nbsp;local<br />254&nbsp; &nbsp; &nbsp;main<br />253&nbsp; &nbsp; &nbsp;default<br />0&nbsp; &nbsp; &nbsp; &nbsp;unspec</p><p>Then add whatever additional tables you need.<br />Note, however, that /etc/iproute2/rt_tables is needed _only_ for translating table-names<br />into table-numbers. You can ignore this file alltogether, and just use numbers instead of<br />names for your tables.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>