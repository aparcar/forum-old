<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Restore original Firmware/Stuck at OpenWrt on WNDR3400v2</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p193157">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">zloop</div>
					<div class="post-datetime">
						25 Feb 2013, 18:34					</div>
				</div>
				<div class="post-content content">
					<p>After installing a slightly modified image to test OpenWrt support my router is stuck with that firmware version. Any advice is appreciated </p><p><strong>Non working</strong> CFE bootlog with &quot;tftpd&quot; on router and tftp-client from a linux pc<br /></p><div class="codebox"><pre><code>CFE for WNDR3400v2 version: v1.0.15
Build Date: Mon Sep  5 13:35:48 CST 2011 
Init Arena
Init Devs.
Boot partition size = 262144(0x40000)
Found a 8MB ST compatible serial flash
et0: Broadcom BCM47XX 10/100/1000 Mbps Ethernet Controller 5.60.127.17 
CPU type 0x19749: 530MHz
Tot mem: 65536 KBytes

Device eth0:  hwaddr 00-FF-FF-FF-FF-FF, ipaddr 192.168.1.1, mask 255.255.255.0
        gateway not set, nameserver not set
Loader:raw Filesys:tftp Dev:eth0 File:192.168.1.2:vmlinuz Options:(null)
Loading: ... 7307322 bytes read
Entry at 0x807bfc10
             
Image ID : U12H187T00_NETGEAR
Reading :: </code></pre></div><p><strong>workinig flash from stock to openwrt</strong><br /></p><div class="codebox"><pre><code>CFE for WNDR3400v2 version: v1.0.15
Build Date: Mon Sep  5 13:35:48 CST 2011 
Init Arena
Init Devs.
Boot partition size = 262144(0x40000)
Found a 8MB ST compatible serial flash
et0: Broadcom BCM47XX 10/100/1000 Mbps Ethernet Controller 5.60.127.17 
CPU type 0x19749: 530MHz
Tot mem: 65536 KBytes

Device eth0:  hwaddr 74-44-01-37-C6-69, ipaddr 192.168.1.1, mask 255.255.255.0
        gateway not set, nameserver not set
Startup canceled
CFE&gt; ^C
CFE&gt; ^C
CFE&gt; tftpd
Start TFTP server
Reading :: Done. 3018752 bytes read
Reading :: Done. 3018810 bytes read
Board ID : U12H187T00_NETGEAR
Image ID : U12H155T00_NETGEAR
Reading :: Done. 4526138 bytes read
Programming...done. 4526138 bytes written
Write len/chksum offset @ 0x006FFFF8...done.
Decompressing..........done


CFE for WNDR3400v2 version: v1.0.15
Build Date: Mon Sep  5 13:35:48 CST 2011 
Init Arena
Init Devs.
Boot partition size = 262144(0x40000)
Found a 8MB ST compatible serial flash
et0: Broadcom BCM47XX 10/100/1000 Mbps Ethernet Controller 5.60.127.17 
CPU type 0x19749: 530MHz
Tot mem: 65536 KBytes

Device eth0:  hwaddr 74-44-01-37-C6-69, ipaddr 192.168.1.1, mask 255.255.255.0
        gateway not set, nameserver not set
too long file.
LZMA boot failed
Loader:raw Filesys:raw Dev:flash0.os File: Options:(null)
Loading: .. 3780 bytes read
Entry at 0x80001000
Closing network.
Starting program at 0x80001000
[    0.000000] Linux version 3.6.11 (tenchi@tenchi-htpc) (gcc version 4.6.4 20121210 (prerelease) (Linaro GCC 4.6-2012.12) ) #3 Sun Feb 24 22:46:06 CET 2013</code></pre></div><p>Netgear stripped the CFE on this model too.<br />In contrast to the WGT634U (<a href="https://forum.openwrt.org/viewtopic.php?id=20176">Thread</a>) the bootloader doesnt seem to have printenv / setenv settings.<br />Somehow Lan is broken if OpenWrt gets booted (some vlan/port issue maybe?) so for now its CFE ...</p><p><strong>TFTPBoot gets stuck too - maybe some missing parameters ?</strong><br /></p><div class="codebox"><pre><code>Device eth0:  hwaddr 00-FF-FF-FF-FF-FF, ipaddr 192.168.1.1, mask 255.255.255.0
        gateway not set, nameserver not set
Loader:raw Filesys:tftp Dev:eth0 File:192.168.1.2:vmlinuz Options:(null)
Loading: ... 7307322 bytes read
Entry at 0x807bfc10
Loader:raw Filesys:memory Dev:eth0 File::0x807bfc10 Options:(null)
Loading: .. 33 bytes read
Entry at 0x80001000
Closing network.
Starting program at 0x80001000</code></pre></div><p>factory logs are available in the wiki: <a href="http://wiki.openwrt.org/toh/netgear/wndr3400#wndr3400v2">WNDR3400v2</a></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>