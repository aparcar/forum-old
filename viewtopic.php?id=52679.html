<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> qos dont work</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 12 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p246741">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">nataliaederlandes</div>
					<div class="post-datetime">
						11 Sep 2014, 13:11					</div>
				</div>
				<div class="post-content content">
					<p>Qos dont work here. I am using tplink&nbsp; 3500. I,m waiting for rc4 or final...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p246745">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						11 Sep 2014, 14:14					</div>
				</div>
				<div class="post-content content">
					<p>It works here.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p246796">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">nozombian</div>
					<div class="post-datetime">
						12 Sep 2014, 01:52					</div>
				</div>
				<div class="post-content content">
					<p>Sort of, there&#039;s a discussion about it here and there. If you expect qos to divide traffic fairly between clients, so they will get same piece of cake no matter how many connections they have open, then this is how it does not work. If you expect from qos something else, then it supposedly works. At least more clever dudes here at openwrt are saying so.</p><p>They say also if your compass does not point north, it does not mean it is broken <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> No one ever told me how can I configure qos so it will divide the traffic rightly, because that&#039;s what I&#039;d expect.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p246815">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">drawz</div>
					<div class="post-datetime">
						12 Sep 2014, 06:16					</div>
				</div>
				<div class="post-content content">
					<p>QoS is not designed to divide the bandwidth. It&#039;s not even what the name implies. It keeps latency low, which keeps your internet connection useable in the face of heavy bandwidth use. Web browsing is still snappy, real-time applications like games and VOIP don&#039;t have lag, etc. This is way more useful than dividing bandwidth. </p><p>There may be some other way to divide bandwidth, maybe with wondershaper? Or custom configuration of qos-scripts?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p246817">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">drawz</div>
					<div class="post-datetime">
						12 Sep 2014, 06:31					</div>
				</div>
				<div class="post-content content">
					<p>actually, there must be a way to do it. Openwireless.org is an alternative firmware based on cerowrt (which in turn is based on openwrt) and it offers the functionality to restrict bandwidth on the guest network to a certain percentage. I just don&#039;t personally know how to do it through luci-app-qos. But I also have no desire to do so.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p246828">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						12 Sep 2014, 09:20					</div>
				</div>
				<div class="post-content content">
					<p>Sure you can do that. It&#039;s Linux, and you have all the tools you need at your disposal. Like drawz say though, fair sharing of bandwidth is not what it&#039;s designed to do.</p><p><a href="http://en.wikipedia.org/wiki/Quality_of_service">http://en.wikipedia.org/wiki/Quality_of_service</a></p><p>I recently set up QoS-scripts and I can run bittorrents while streaming Netflix buffer free or playing online with my PS4 without lag. So I&#039;d say it works.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p246834">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">nozombian</div>
					<div class="post-datetime">
						12 Sep 2014, 09:57					</div>
				</div>
				<div class="post-content content">
					<p>Thank you guys, now I get it.</p><p>But it would be great anyway, if there would be some IP-based solution, which would divide the traffic. On a 100mbit line and 4 downloading IPs, I&#039;d like to give 25mbit each of them. The situation now is the torrent eats 90mbit and the rest of users are sharing the remaining 10mbit, which is imho unfair. I can&#039;t deny that voip works and streaming too, but 720p streaming we have in here needs only about 4mbit and it works with qos disabled too, so for me there&#039;s no way to feel the benefit of qos scripts enabled. I see it running, but I don&#039;t feel it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p246836">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						12 Sep 2014, 10:34					</div>
				</div>
				<div class="post-content content">
					<p>Google &quot;fair sharing bandwidth tc&quot;. There isn&#039;t any package in OpenWrt that&#039;s doing it, but there are lots and lots of information out there on how to do it and you got the tools you need. Why not set it up, package it and share with the rest of the community?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p246887">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">drawz</div>
					<div class="post-datetime">
						12 Sep 2014, 23:58					</div>
				</div>
				<div class="post-content content">
					<p>that would be a nice feature to add, either via luci-app-qos or as a separate luci-app.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p246922">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">moeller0</div>
					<div class="post-datetime">
						13 Sep 2014, 12:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nozombian wrote:</cite><blockquote><p>Thank you guys, now I get it.</p><p>But it would be great anyway, if there would be some IP-based solution, which would divide the traffic. On a 100mbit line and 4 downloading IPs, I&#039;d like to give 25mbit each of them. The situation now is the torrent eats 90mbit and the rest of users are sharing the remaining 10mbit, which is imho unfair. I can&#039;t deny that voip works and streaming too, but 720p streaming we have in here needs only about 4mbit and it works with qos disabled too, so for me there&#039;s no way to feel the benefit of qos scripts enabled. I see it running, but I don&#039;t feel it.</p></blockquote></div><p>&nbsp; &nbsp; &nbsp;Interestingly, this shows that your torrents are not working as expected, in theory they should get out of the way of your real traffic. You might be able to get away with running qos and making sure all torrent traffic ends up in the bulk priority class. So either the torrent packets have a special marking, say a specific TOS/DSCP marking in them or come from a specific IP only, then you can configure these packets or all traffic from that host to bulk class and all should be well...<br />&nbsp; &nbsp; &nbsp;Alternatively you can have a look at: <a href="http://git.coverfire.com/?p=linux-qos-scripts.git;a=blob;f=src-3tos.sh;hb=HEAD,">http://git.coverfire.com/?p=linux-qos-s â€¦ h;hb=HEAD,</a> note that it seems QOS (and the linked script) currently have issues with IPv6, while cerowrt&#039;s SQM system 9http://www.bufferbloat.net/projects/cerowrt/wiki/Smart_Queue_Management) does IPv6 reasonably well, but currently does not allow to move traffic into priority classes by soure ip-addresses... (you can always modify the scripts directly though).</p><p>Best Regards<br />&nbsp; &nbsp; &nbsp; M.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p246951">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">drawz</div>
					<div class="post-datetime">
						13 Sep 2014, 18:38					</div>
				</div>
				<div class="post-content content">
					<p>ah that would be very interesting if it was an ipv6 problem, which is one of the limitations of the current qos scripts that has been solved by cerowrt sqm scripts (as noted above). Would love to see a trial of sqm to see if it helps here. </p><p>Maybe try disabling ipv6 if you have it, at least on the client with torrents running, just to test.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p247014">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">nataliaederlandes</div>
					<div class="post-datetime">
						14 Sep 2014, 14:31					</div>
				</div>
				<div class="post-content content">
					<p>I have 15 MB of internet, I would have only 2 MB in ps4, to avoid lag compensation. Qos script installed, configured the ip ps4 to 2MB. But when I do the speed test in ps4, it shows 15 MB. Installed via luci, and I&#039;ve tried via command code but does not work.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p247016">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">nataliaederlandes</div>
					<div class="post-datetime">
						14 Sep 2014, 14:33					</div>
				</div>
				<div class="post-content content">
					<p>Guys, excuse me the wrong english, I&#039;m Brazilian.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p247048">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">drawz</div>
					<div class="post-datetime">
						14 Sep 2014, 20:09					</div>
				</div>
				<div class="post-content content">
					<p>i suspect QoS scripts will keep the latency (lag) low on your PS4 without restricting the bandwidth to any device. Try it and let us know how it goes. It&#039;s not really designed for restricting bandwidth to a specific device (or guaranteeing a minimum). It will keep the ping low, which is what is important here.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p247054">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">nataliaederlandes</div>
					<div class="post-datetime">
						14 Sep 2014, 21:06					</div>
				</div>
				<div class="post-content content">
					<p>I fixed that. I thought that would limit the bandwidth, but the ping decreased, and the lag too. Thank all.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>