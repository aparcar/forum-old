<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> How can I misuse the SecureEasySetup Button?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 7 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p18755">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">hlipp</div>
					<div class="post-datetime">
						12 Jan 2006, 14:08					</div>
				</div>
				<div class="post-content content">
					<p>Hi Guys!</p><p>I am using the WRT54G Router (the one with the SecureEasySetup button).<br />Maybe it was a nice idea with this SES, but i do not need it. So, I have an unused button.</p><p>Maybe, you can help me to change this! Wouldn&#039;t it be nice to use this button for enabling/disabling WLAN radio?<br />For example: <br />I don&#039;t want to have the WLAN radio activated all the time because of several reasons.<br />That&#039;s why I&#039;ve disabled it by default.</p><p>So, if I want to use WLAN with my laptop, I have to boot up my PC, that I am able to start WLAN radio.<br />Use WLAN with my Laptop; afterwards shutdown Laptop, WLAN and PC when I am finished with work.<br />This is very long winded (and silly).<br />It could be shortened with one &quot;click&quot; on SES button to activate and one &quot;click&quot; to deactivate radio.</p><p>Can you tell me how I can do this &quot;mod&quot; ? Or even where to begin?<br />Oh, and yes, I am a newbie ;-)</p><p>Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p18775">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">dl</div>
					<div class="post-datetime">
						12 Jan 2006, 21:52					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://forum.openwrt.org/viewtopic.php?id=2661">Search?</a> There are other threads also but this is the one that popped right up.</p><p>- DL</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p18780">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">hlipp</div>
					<div class="post-datetime">
						13 Jan 2006, 00:09					</div>
				</div>
				<div class="post-content content">
					<p>You are right.<br />I found some threads in which people were thinking about it, showing code-snippets and packages.<br />Also I read about the idea to implement this feature in official openwrt release. <br />(wifi on/off via front button or reset button)</p><p>The problem is, I do not know what to do / where to place such code-snippets or howto use such a package.<br />Who can tell me if it is really planned to build in this feature in an new openwrt release? This would solve my problem easily.<br />Sorry, but I am completely new in this stuff.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p18927">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">jochen</div>
					<div class="post-datetime">
						14 Jan 2006, 19:06					</div>
				</div>
				<div class="post-content content">
					<p>If you want to use the packages in order to use the button for wifi on/off, just execute on your box:</p><div class="codebox"><pre><code>ipkg install http://www.ethernal.org/openwrt/gpio_0.1-1_mipsel.ipk
ipkg install http://www.ethernal.org/openwrt/cisco-button_0.1-3_mipsel.ipk</code></pre></div><p>Then, reboot and that&#039;s it.</p>											<p class="post-edited">(Last edited by <strong>jochen</strong> on 14 Jan 2006, 19:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p23475">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						23 Mar 2006, 20:10					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jochen wrote:</cite><blockquote><p>If you want to use the packages in order to use the button for wifi on/off, just execute on your box:</p><div class="codebox"><pre><code>ipkg install http://www.ethernal.org/openwrt/gpio_0.1-1_mipsel.ipk
ipkg install http://www.ethernal.org/openwrt/cisco-button_0.1-3_mipsel.ipk</code></pre></div><p>Then, reboot and that&#039;s it.</p></blockquote></div><p>OK.<br />Will it work for <strong>WRT54GL v1.0</strong> on <strong>OpenWRT RC4</strong> too?</p>											<p class="post-edited">(Last edited by <strong>booBot</strong> on 23 Mar 2006, 20:13)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p23651">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">mattiasc</div>
					<div class="post-datetime">
						26 Mar 2006, 14:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>booBot wrote:</cite><blockquote><p>OK.<br />Will it work for <strong>WRT54GL v1.0</strong> on <strong>OpenWRT RC4</strong> too?</p></blockquote></div><p>At least, the GPIO works fine, havn&#039;t tried the ciscobutton-script</p><p>&quot;gpio disable 2&quot; light up the white led<br />&quot;gpio enable 2&quot; turn the white led off<br />&quot;gpio enable 3&quot; light up the orange/amber led<br />&quot;gpio enable 3 &quot; turn it off</p><p>I use it togther with my asterisk-server inside my 54GL:</p><p>Orange/amber: one or more incoming calls<br />White: one or more new voicemail messages</p><p>I havn&#039;t yet found a good way to detect if a call is missed or aswered so the orange led lights up in both cases.</p><p>EDIT: Now I tried the cisco-button-script and it worked just fine on my WRT54GL</p>											<p class="post-edited">(Last edited by <strong>mattiasc</strong> on 26 Mar 2006, 23:09)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p24530">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						5 Apr 2006, 15:41					</div>
				</div>
				<div class="post-content content">
					<p>I did this on <strong>RC5</strong>.<br />What else (beyond <strong>ipkg</strong> and <strong>reboot</strong>) should I do?</p><p>The button is not lit, it does not sence my pressings, the WiFi is always ON (according to it&#039;s LED).</p><p>Digging deeper...<br /></p><div class="codebox"><pre><code>root@OpenWrt:~# /etc/init.d/S60cisco-button start
root@OpenWrt:~# /usr/sbin/gpio: can&#039;t load library &#039;libgcc_s.so.1&#039;
/usr/sbin/gpio: can&#039;t load library &#039;libgcc_s.so.1&#039;</code></pre></div><p>How solve this?</p><p>Is <a href="http://downloads.openwrt.org/whiterussian/packages/libgcc_3.4.4-8_mipsel.ipk">this</a> what I miss?</p><p>Digging deeper still...<br />Yes, <strong>libgcc_3.4.4-8_mipsel.ipk</strong> is needed.</p><p>Now, how do I make <strong>S60cisco-button</strong> to start with &quot;<strong>start</strong>&quot; parameter?</p><p>----------------------</p><p>OK, one extra reboot with all dependancies resolved made this button working.</p><p>This is what I see in <strong>ps</strong>:<br /></p><div class="codebox"><pre><code>460 root        388 S   /bin/sh /usr/sbin/cisco-button
471 root        232 R   /usr/sbin/gpio poll 4
472 root        396 S   /bin/sh /usr/sbin/cisco-button</code></pre></div><p>Hope this is normal.<br />Please comment.</p><p>By the way, with WiFi disabled I get <strong>POWER</strong> LED blinking as discussed elsewhere.<br />Hope this is normal too.</p>											<p class="post-edited">(Last edited by <strong>booBot</strong> on 5 Apr 2006, 16:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p24925">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						10 Apr 2006, 20:42					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m really puzzled.<br />Why this script works at all?</p><div class="codebox"><pre><code>root@OpenWrt:~# cat /etc/init.d/S60cisco-button
#!/bin/sh

case &quot;$1&quot; in
   start)
      /usr/sbin/cisco-button &amp;
      ;;
   stop)
      # Horrible hack, but will kill the polling gpio..
      # as well as any others.. :)
      killall gpio
      ;;
   *)
      echo &quot;Usage: $0 {start|stop}&quot;
      exit 1
esac

exit 0</code></pre></div><p>I can&#039;t see how it gets it&#039;s <strong>start</strong> parameter...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p24942">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						10 Apr 2006, 23:41					</div>
				</div>
				<div class="post-content content">
					<p>Sorry for making fuss out of nothing - I came from QNX4 world where there is no <strong>rc.d</strong> conception at all.</p><p>Do I get it right - all <strong>/etc/init.d/</strong> scripts are given their <strong>start</strong> parameters by boot-process?</p>											<p class="post-edited">(Last edited by <strong>booBot</strong> on 10 Apr 2006, 23:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p24950">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">vincentfox</div>
					<div class="post-datetime">
						11 Apr 2006, 02:10					</div>
				</div>
				<div class="post-content content">
					<p>In the System-V world, a high-level script starts all these and passes a &quot;start&quot; to them.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p24992">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						11 Apr 2006, 15:26					</div>
				</div>
				<div class="post-content content">
					<p>Thank you, <strong>vincentfox</strong>.<br />Could you give a hint why <strong>ps</strong> shows two instances of <strong>cisco-button</strong> processes?</p><p>It all works OK but I&#039;d like to scrap all unnesessary processes out...</p>											<p class="post-edited">(Last edited by <strong>booBot</strong> on 11 Apr 2006, 15:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p25006">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">vincentfox</div>
					<div class="post-datetime">
						11 Apr 2006, 17:47					</div>
				</div>
				<div class="post-content content">
					<p>Perhaps you started more than one?&nbsp; I notice your script doesn&#039;t check if there are existing processes before starting a new instance. Traditionally in startup scripts they use something like recording a PID file when a process is started.&nbsp; Then your script checks for either the PID file or the process already in the table, before starting a new one.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p25007">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						11 Apr 2006, 17:56					</div>
				</div>
				<div class="post-content content">
					<p>No, I did not start them manually - I just installed the packages and what they depend on - and rebooted. Rebooted several times - always these two instances...</p><p>And I can see only one <strong>/etc/init.d/S60cisco-button</strong> there...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p25016">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						11 Apr 2006, 19:54					</div>
				</div>
				<div class="post-content content">
					<p>OK.<br />This is not due to how it is started.</p><p>It is somehow from this line in <strong>/usr/sbin/cisco-button</strong> script:<br /></p><div class="codebox"><pre><code>$gpio poll $cisco_button | while read value;do</code></pre></div><p>A sort of spawns another process (gpio) and waits for it&#039;s output.<br />I have to learn more about bash I believe...<br />(In QNX4 I&#039;m used to ksh)</p>											<p class="post-edited">(Last edited by <strong>booBot</strong> on 11 Apr 2006, 19:55)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>