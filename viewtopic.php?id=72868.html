<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> kernel warning message attaching usb wifi dongle</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p370133">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Pippo1980</div>
					<div class="post-datetime">
						28 Dec 2017, 12:32					</div>
				</div>
				<div class="post-content content">
					<p>Hi trying to learn about openwrt,</p><p>I&#039;va a small router with one antenna and a usb slot.</p><p>I attach to the usb slot a unpowered usb hub&nbsp; and to that I plug a usb storage drive </p><p>to be able to save system log messages </p><p>the sqashfs-root/etc/config/system files contains</p><p>config system<br />&nbsp; &nbsp; option hostname Router<br />&nbsp; &nbsp; option timezone UTC<br />&nbsp; &nbsp; &nbsp; &nbsp; option log_type &#039;file&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option log_file &#039;/mnt/usb/messages&#039; </p><p>so the cronlogleve and conloglevel are set to default values.</p><p>Everything works fine but as soon as I plug (or reboot) with a second usb wifi dongle attached to the unpowered</p><p>usb hub the messages log gets populated by the same kernel warn message below</p><p>......</p><p>Tue Dec 26 15:09:07 2017 kern.warn kernel: [&nbsp; &nbsp;24.209135] ------------[ cut here ]------------<br />Tue Dec 26 15:09:07 2017 kern.warn kernel: [&nbsp; &nbsp;24.212450] WARNING: CPU: 0 PID: 75 at drivers/usb/core/urb.c:449 usb_submit_urb+0x2dc/0x538 [usbcore]()<br />Tue Dec 26 15:09:07 2017 kern.warn kernel: [&nbsp; &nbsp;24.221842] usb 1-1.2: BOGUS urb xfer, pipe 1 != type 3</p><p>.......................</p><p>when I log the messages in memory and without the usb hub attached </p><p>and attaching the second usb wifi dongle directly to the USB port I dont get any error at all</p><br /><br /><p>any idea on what is going on ???</p><p>I build my router image from trunk repo.</p><p>Thank _You very much for any help with this</p><p>Bests</p><p>P</p>											<p class="post-edited">(Last edited by <strong>Pippo1980</strong> on 28 Dec 2017, 12:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370136">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Antek</div>
					<div class="post-datetime">
						28 Dec 2017, 13:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Pippo1980 wrote:</cite><blockquote><p>I attach to the usb slot a unpowered usb hub&nbsp; and to that I plug a usb storage drive<br />...<br />Everything works fine but as soon as I plug (or reboot) with a second usb wifi dongle attached to the unpowered usb hub the messages log gets populated by the same kernel warn message below<br />...<br />and attaching the second usb wifi dongle directly to the USB port I dont get any error at all</p></blockquote></div><p>You&#039;ve already stated that the dongle works fine if you plug it directly to the USB port. Does the wi-fi dongle work correctly if you plug it into the hub alone, without the USB storage device?</p><p>Based on the symptoms and behavior it sounds like your router might be incapable of providing enough power through the USB bus to operate the unpowered hub and these two devices simultaneously. You should consider an externally powered USB hub with high enough power ratings to satisfy the requirements of your two devices.</p>											<p class="post-edited">(Last edited by <strong>Antek</strong> on 28 Dec 2017, 13:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370138">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Pippo1980</div>
					<div class="post-datetime">
						28 Dec 2017, 13:16					</div>
				</div>
				<div class="post-content content">
					<p>the error says</p><p>....&nbsp; usb 1-1.2: ...........</p><p>colud it be (being a USB 2.0 hub) that I am building the image with a usb hub 1.1 driver ??</p><p>P.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370140">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Pippo1980</div>
					<div class="post-datetime">
						28 Dec 2017, 13:31					</div>
				</div>
				<div class="post-content content">
					<p>I don&#039;t get the error using hub + usb storage</p><p>Get the error using&nbsp; hub + usb storage + wifi dongle</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370141">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Pippo1980</div>
					<div class="post-datetime">
						28 Dec 2017, 13:43					</div>
				</div>
				<div class="post-content content">
					<p>in my buildroot</p><p>I selected as kernel modules / usb support :</p><p>kmod-usb-ohci (should be usb 1 correct me if I am wrong)</p><p>kmod-usb-storage</p><p>kmod-usb-storage-extras</p><p>kmod usb2</p><p>kmod-usbmon</p><p>Is everything Ok this way ??</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370143">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						28 Dec 2017, 14:12					</div>
				</div>
				<div class="post-content content">
					<p>What happens if you replace the unpowered USB hub by a powered one?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370147">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Pippo1980</div>
					<div class="post-datetime">
						28 Dec 2017, 15:36					</div>
				</div>
				<div class="post-content content">
					<p>HI Antek &amp; tm026,</p><p> I discovered my cheap usb hub marked as usb 2.0&nbsp; is indeed a usb 1.0 hub !!!!!!</p><p>Never trust am.... marketplace !!! I&#039;ll let you know as soon as I get my hand on a real usb 2.0 hub !!</p><p>Thank you very much for helping me out</p><p>Bests</p><p>P.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p371300">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Pippo1980</div>
					<div class="post-datetime">
						27 Jan 2018, 13:55					</div>
				</div>
				<div class="post-content content">
					<p>HI Antek &amp; tm026,</p><p>&nbsp; finally got a USB 3.0 hub.</p><p>Sorry for the a naive question should I install usb 3.0 support kernel module or the 2.0 one would work ?</p><p>Thanks</p><p>Best</p><p>P.</p>											<p class="post-edited">(Last edited by <strong>Pippo1980</strong> on 27 Jan 2018, 14:10)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>