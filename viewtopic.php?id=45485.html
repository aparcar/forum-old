<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> usb_modeswitch and Huawei E173s-6</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p208250">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">jpconde</div>
					<div class="post-datetime">
						27 Jul 2013, 08:28					</div>
				</div>
				<div class="post-content content">
					<p>Hi everyone.</p><p>I am trying to switch an E173s-6 modem in order to be able to use it. </p><p>The file for usb_modeswitch I am using is like this: </p><div class="codebox"><pre><code>#Huawei E173s-6      
                     
DefaultVendor= 0x12d1                                                           
DefaultProduct=0x1c24
                     
TargetVendor= 0x12d1                                                            
TargetProduct= 0x1c0b                                                          
                                                                                
MessageContent=&quot;55534243123456780000000000000011062000000100000000000000000000&quot;
               
CheckSuccess=20</code></pre></div><p>I have set the TargetProduct as 0x1c0b because it is the most similar in my /etc/usb_modeswitch.d/ directory. <br />However, the modem cannot be switched, and then the serial devices (/dev/ttyUSBx) are not created. Here is the ouput from the dmesg: </p><div class="codebox"><pre><code>...
Jul 26 02:56:04 OpenWrt kern.info kernel: [    9.860000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
Jul 26 02:56:04 OpenWrt kern.info kernel: [    9.860000] ehci-platform ehci-platform: Generic Platform EHCI Controller
Jul 26 02:56:04 OpenWrt kern.info kernel: [    9.870000] ehci-platform ehci-platform: new USB bus registered, assigned bus number 1
Jul 26 02:56:04 OpenWrt kern.info kernel: [    9.910000] ehci-platform ehci-platform: irq 3, io mem 0x1b000000
Jul 26 02:56:04 OpenWrt kern.info kernel: [    9.930000] ehci-platform ehci-platform: USB 2.0 started, EHCI 1.00
Jul 26 02:56:04 OpenWrt kern.info kernel: [    9.930000] hub 1-0:1.0: USB hub found
Jul 26 02:56:04 OpenWrt kern.info kernel: [    9.930000] hub 1-0:1.0: 1 port detected
Jul 26 02:56:04 OpenWrt kern.info kernel: [    9.960000] nf_conntrack version 0.5.0 (456 buckets, 1824 max)
Jul 26 02:56:04 OpenWrt kern.info kernel: [   10.210000] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
Jul 26 02:56:04 OpenWrt kern.info kernel: [   10.240000] uhci_hcd: USB Universal Host Controller Interface driver
Jul 26 02:56:04 OpenWrt kern.info kernel: [   10.260000] usb 1-1: new high-speed USB device number 2 using ehci-platform
Jul 26 02:56:04 OpenWrt kern.info kernel: [   10.360000] usbcore: registered new interface driver cdc_acm
Jul 26 02:56:04 OpenWrt kern.info kernel: [   10.370000] cdc_acm: USB Abstract Control Model driver for USB modems and ISDN adapters
Jul 26 02:56:04 OpenWrt kern.info kernel: [   10.420000] usbcore: registered new interface driver usbserial
Jul 26 02:56:04 OpenWrt kern.info kernel: [   10.420000] USB Serial support registered for generic
Jul 26 02:56:04 OpenWrt kern.info kernel: [   10.430000] usbcore: registered new interface driver usbserial_generic
Jul 26 02:56:04 OpenWrt kern.info kernel: [   10.430000] usbserial: USB Serial Driver core
Jul 26 02:56:04 OpenWrt kern.info kernel: [   10.500000] USB Serial support registered for GSM modem (1-port)
Jul 26 02:56:04 OpenWrt kern.info kernel: [   10.510000] usbcore: registered new interface driver option
Jul 26 02:56:04 OpenWrt kern.info kernel: [   10.510000] option: v0.7.2:USB Driver for GSM modems
Jul 26 02:56:06 OpenWrt kern.info kernel: [   13.780000] device eth0 entered promiscuous mode
Jul 26 02:56:06 OpenWrt daemon.notice netifd: Interface &#039;lan&#039; is now up
Jul 26 02:56:06 OpenWrt daemon.notice netifd: Interface &#039;loopback&#039; is now up
Jul 26 02:56:06 OpenWrt daemon.notice netifd: Interface &#039;wan&#039; is now down
Jul 26 02:56:07 OpenWrt user.notice usb-modeswitch: 1-0:1.0: Manufacturer=Linux_3.3.8_ehci_hcd Product=Generic_Platform_EHCI_Controller Serial=ehci-platform
Jul 26 02:56:07 OpenWrt user.notice ifup: Enabling Router Solicitations on lan (br-lan)
Jul 26 02:56:07 OpenWrt user.notice usb-modeswitch: 1-1:1.0: Manufacturer=HUAWEI Product=HUAWEI_Mobile Serial=?
Jul 26 02:56:07 OpenWrt user.notice usb-modeswitch: 1-1:1.0: Selecting /etc/usb_modeswitch.d/12d1:1c24 for mode switching
Jul 26 02:56:07 OpenWrt syslog.notice usb_modeswitch: switching device 12d1:1c24 on 001/002
Jul 26 02:56:07 OpenWrt kern.info kernel: [   15.400000] usb 1-1: USB disconnect, device number 2
Jul 26 02:56:09 OpenWrt kern.info kernel: [   17.210000] device wlan0 entered promiscuous mode
Jul 26 02:56:10 OpenWrt user.notice ifup: Enabling Router Solicitations on loopback (lo)
Jul 26 02:56:10 OpenWrt kern.info kernel: [   18.160000] br-lan: port 2(wlan0) entered forwarding state
Jul 26 02:56:10 OpenWrt kern.info kernel: [   18.170000] br-lan: port 2(wlan0) entered forwarding state
Jul 26 02:56:12 OpenWrt kern.info kernel: [   20.170000] br-lan: port 2(wlan0) entered forwarding state
Jul 26 02:56:12 OpenWrt kern.info kernel: [   20.570000] usb 1-1: new high-speed USB device number 3 using ehci-platform
Jul 26 02:56:13 OpenWrt user.info sysinit: Loading defaults
Jul 26 02:56:14 OpenWrt user.info sysinit: Loading synflood protection
Jul 26 02:56:14 OpenWrt user.info sysinit: Adding custom chains
Jul 26 02:56:14 OpenWrt user.info sysinit: Loading zones
Jul 26 02:56:15 OpenWrt user.info sysinit: Loading forwardings
Jul 26 02:56:15 OpenWrt user.info sysinit: Loading rules
Jul 26 02:56:15 OpenWrt user.info sysinit: Loading redirects
Jul 26 02:56:15 OpenWrt user.info sysinit: Loading includes
Jul 26 02:56:15 OpenWrt user.info sysinit: Optimizing conntrack
Jul 26 02:56:15 OpenWrt user.info sysinit: Loading interfaces
Jul 26 02:56:15 OpenWrt user.info firewall: adding lan (br-lan) to zone lan
Jul 26 02:56:17 OpenWrt authpriv.info dropbear[1127]: Running in background
Jul 26 02:56:18 OpenWrt user.notice dnsmasq: DNS rebinding protection is active, will discard upstream RFC1918 responses!
Jul 26 02:56:18 OpenWrt user.notice dnsmasq: Allowing 127.0.0.0/8 responses
Jul 26 02:56:22 OpenWrt daemon.info dnsmasq[1179]: started, version 2.62 cachesize 150
Jul 26 02:56:22 OpenWrt daemon.info dnsmasq[1179]: compile time options: IPv6 GNU-getopt no-DBus no-i18n no-IDN DHCP no-DHCPv6 no-Lua TFTP no-conntrack
Jul 26 02:56:22 OpenWrt daemon.info dnsmasq-dhcp[1179]: DHCP, IP range 192.168.1.100 -- 192.168.1.249, lease time 12h
Jul 26 02:56:22 OpenWrt daemon.info dnsmasq[1179]: using local addresses only for domain lan
Jul 26 02:56:22 OpenWrt daemon.warn dnsmasq[1179]: no servers found in /tmp/resolv.conf.auto, will retry
Jul 26 02:56:22 OpenWrt daemon.info dnsmasq[1179]: read /etc/hosts - 1 addresses
Jul 26 02:56:22 OpenWrt daemon.info dnsmasq-dhcp[1179]: read /etc/ethers - 0 addresses
Jul 26 02:56:22 OpenWrt user.info sysinit: setting up led USB
Jul 26 02:56:22 OpenWrt user.info sysinit: setting up led WLAN
Jul 26 02:56:22 OpenWrt user.info sysinit: setting up led LAN
Jul 26 02:56:31 OpenWrt user.notice usb-modeswitch: 1-1:1.1: Manufacturer=HUAWEI Product=HUAWEI_Mobile Serial=?
Jul 26 02:56:35 OpenWrt user.notice usb-modeswitch: 1-1:1.0: Manufacturer=HUAWEI Product=HUAWEI_Mobile Serial=?
Jul 26 02:56:35 OpenWrt user.notice usb-modeswitch: 1-1:1.1: Manufacturer=HUAWEI Product=HUAWEI_Mobile Serial=?
Jul 26 02:56:35 OpenWrt user.notice usb-modeswitch: 1-1:1.2: Manufacturer=HUAWEI Product=HUAWEI_Mobile Serial=?
Jul 26 02:56:35 OpenWrt user.notice usb-modeswitch: 1-1:1.3: Manufacturer=HUAWEI Product=HUAWEI_Mobile Serial=?
Jul 26 02:56:35 OpenWrt user.notice usb-modeswitch: 1-1:1.4: Manufacturer=HUAWEI Product=HUAWEI_Mobile Serial=?
Jul 26 02:58:54 OpenWrt daemon.info hostapd: wlan0: STA 28:cf:da:d3:b2:d8 IEEE 802.11: authenticated
Jul 26 02:58:54 OpenWrt daemon.info hostapd: wlan0: STA 28:cf:da:d3:b2:d8 IEEE 802.11: associated (aid 1)
Jul 26 02:59:03 OpenWrt daemon.info hostapd: wlan0: STA 28:cf:da:d3:b2:d8 IEEE 802.11: deauthenticated due to local deauth request
Jul 26 02:59:05 OpenWrt daemon.info hostapd: wlan0: STA 28:cf:da:d3:b2:d8 IEEE 802.11: authenticated
Jul 26 02:59:05 OpenWrt daemon.info hostapd: wlan0: STA 28:cf:da:d3:b2:d8 IEEE 802.11: associated (aid 1)
Jul 26 02:59:05 OpenWrt daemon.info hostapd: wlan0: STA 28:cf:da:d3:b2:d8 WPA: pairwise key handshake completed (RSN)
Jul 26 02:59:06 OpenWrt daemon.info dnsmasq-dhcp[1179]: DHCPREQUEST(br-lan) 192.168.1.206 28:cf:da:d3:b2:d8 
Jul 26 02:59:06 OpenWrt daemon.info dnsmasq-dhcp[1179]: DHCPACK(br-lan) 192.168.1.206 28:cf:da:d3:b2:d8 </code></pre></div><p>I have already tried some other configuration with no success. However, this seems to be the proper (or the closer otherwise). </p><p>Any ideas/suggestions?</p><br /><p>Thanks in advance, </p><br /><br /><p>Juan Pablo</p>											<p class="post-edited">(Last edited by <strong>jpconde</strong> on 28 Jul 2013, 20:43)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>