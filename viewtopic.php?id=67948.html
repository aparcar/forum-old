<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Help with reverting WRT1900AC</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 20 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p340451">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">todd.nine</div>
					<div class="post-datetime">
						6 Oct 2016, 21:41					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,<br />&nbsp; I&#039;m attempting to revert my original firmware using this wiki.</p><div class="codebox"><pre><code>wiki.openwrt.org/doc/howto/generic.uninstall</code></pre></div><p>However, I don&#039;t have a &quot;linux&quot; partition.&nbsp; cat /proc/mtd returns this.</p><div class="codebox"><pre><code>cat /proc/mtd
dev:    size   erasesize  name
mtd0: 00100000 00020000 &quot;u-boot&quot;
mtd1: 00040000 00020000 &quot;u_env&quot;
mtd2: 00040000 00020000 &quot;s_env&quot;
mtd3: 00100000 00020000 &quot;devinfo&quot;
mtd4: 02800000 00020000 &quot;kernel1&quot;
mtd5: 02500000 00020000 &quot;ubi&quot;
mtd6: 02800000 00020000 &quot;kernel2&quot;
mtd7: 02500000 00020000 &quot;rootfs2&quot;
mtd8: 02600000 00020000 &quot;syscfg&quot;
mtd9: 00780000 00020000 &quot;unused_area&quot;
mtd10: 00008000 00008000 &quot;spi0.0&quot;</code></pre></div><p>Which partition should I flash?&nbsp; My goal is to remove open WRT. It&#039;s not clear to me which partition I should overwrite.&nbsp; I&#039;m turning my WRT1900AC into a dumb AP, and unfortunately I can&#039;t get the WAN port (eth1) to bridge onto the LAN.</p><p>Thanks,<br />Todd</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p340452">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						6 Oct 2016, 21:59					</div>
				</div>
				<div class="post-content content">
					<p>I think that you can just use Openwrt to flash with the OEM firmware.<br /><a href="https://wiki.openwrt.org/toh/linksys/wrt1x00ac_series#tab__prerequisite">https://wiki.openwrt.org/toh/linksys/wr … erequisite</a><br /><a href="https://wiki.openwrt.org/toh/linksys/wrt1x00ac_series#tab__flash2">https://wiki.openwrt.org/toh/linksys/wr … ab__flash2</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p340454">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">anomeome</div>
					<div class="post-datetime">
						6 Oct 2016, 22:05					</div>
				</div>
				<div class="post-content content">
					<p>But if you have a deep seated need to get down and <a href="https://forum.openwrt.org/viewtopic.php?pid=339949#p339949">dirty</a>. Also if you have&nbsp; not already flashed over your original OEM on the other partition, toggle the power switch 3 times, or do <a href="https://forum.openwrt.org/viewtopic.php?pid=338569#p338569">this</a>.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p340463">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">todd.nine</div>
					<div class="post-datetime">
						6 Oct 2016, 23:06					</div>
				</div>
				<div class="post-content content">
					<p>So bad news and worse news.....</p><p>I&#039;ve tried the 3 toggle to switch boot partitions.&nbsp; Unfortunately, it doesn&#039;t seem to solve my issue.&nbsp; I seem to have somehow managed to get myself into a state where both partitions are the WRT1900AC factory firmware.&nbsp; I think this is the case due to the orange LED on the internet light blinking as it boots.&nbsp; OpenWRT doesn&#039;t do that. </p><p>Unfortunately, when I get an IP of 192.168.1.203 and connect to 192.168.1.1 in my browser, I get some unrecognizable text that seems to be html in the wrong language, with no CSS and no links/buttons I can follow.&nbsp; </p><p>Specifically, I see this.</p><div class="codebox"><pre><code>0324384f=Martedì 0635e043=Che cos&#039;è la Pianificazione wireless 07a17b06=PIN dispositivo 0c7cf4f3=Automatica 1013d277=Filtri MAC 127663c3=Modalità di rete 129e4346=Elenco filtri MAC 129eeb80=Scegliere se si desidera abilitare la connessione SimpleTap. Questa funzione consente di connettere un dispositivo mobile compatibile con NFC alla rete utilizzando la scheda SimpleTap in dotazione con il router. 13e22435=Consenti l&#039;accesso SOLO agli indirizzi MAC inclusi nell&#039;elenco 14732497=Connessione SimpleTapTM 1499c864=Se si disattiva la funzionalità Wi-Fi Protected Setup in questa pagina, anche il relativo pulsante sul router sarà disattivato. 1976e32a=2,4 GHz 1c7c5288=Il dispositivo client non è riuscito a connettersi alla rete. Per ulteriori informazioni, fare riferimento al dispositivo client. 1e538eb6=Wireless disattivato 1f2cb273=È stata configurata una pianificazione wireless. 256fee65=Compatibilità per la funzionalità Wi-Fi Protected Setup 25f8bf32=Nessuna 2fe65abd=Opzioni di filtro 30c623e8=Password: 3618bd6a=Elimina 378171a9=Mercoledì 3a22962e=Ampiezza canale: 3cedff94=Modalità di protezione: 3d843555=Se il dispositivo client richiede il codice PIN del router, immettere il codice nel dispositivo client. 3d896dd1=Attivato 4201de09=Connessione intelligente: 442cb6c7=Impostazioni del router 448878f3=È stato immesso il numero massimo consentito di indirizzi MAC. Impossibile aggiungerne altri. 450a4780=PIN router 46bd419c=Venerdì 46d33a9a=Pulsante 4929b67e=Aggiungi indirizzo MAC 4a370bdd=Modifica 4a868832=Porta RADIUS: 4bc9132a=Modalità di rete: 4c84c5e8=Se il dispositivo client è dotato di un codice PIN per la funzionalità Wi-Fi Protected Setup, inserirlo qui, quindi fare clic su Registra. 4e4b66b6=4 4fa1819c=Solo 802.11b 4fd07f02=Cifratura: 504061d0=Numero PIN non valido. 51248839=AVVERTENZA: L&#039;impostazione della modalità di protezione su WEP, WPA Personal o WPA Enterprise causerà la disattivazione della funzionalità WPS (Wi-Fi Protected Setup). Non sarà disponibile neanche la modalità di rete Wireless-N. Procedere? 529f86cb=Non protetto 52fd3a01=40/64 bit (10 cifre esadecimali) 55ae8f3f=Connessione non riuscita. 5e95afe8=Che cos&#039;è la gestione di banda Connessione intelligente? 5ea8b8c2=Chiave 2: 5f0cf02a=80 MHz 6311b9b2=L&#039;Utilità di pianificazione wireless ha disattivato il wireless. 66902e86=Per essere operativa, la funzionalità Wi-Fi Protected Setup richiede la trasmissione dell&#039;SSID. Sarà possibile utilizzare la funzionalità Wi-Fi Protected Setup soltanto per gli SSID che vengono trasmessi. 679449f9=Ricerca dispositivo client in corso. 6a377dc5=SimpleTap 6c813321=40 MHz 723ace2b=Salva 728d6236=Attendere... 72d5b8ea=1 74f0ca39=Wireless 760c45b1=SSID 2,4 GHz: 761608b5=Solo 802.11b/g 77ba6059=Per essere operativa, la funzionalità Wi-Fi Protected Setup richiede la trasmissione dell&#039;SSID. Si desidera attivare la trasmissione dell&#039;SSID? 78248efd=Disattivato 791ce4a1=La pianificazione creata disattiverà ora l&#039;accesso wireless. Tutti i dispositivi wireless saranno disconnessi. Continuare? 7b701b91=Domenica 7d7c6474=Nega l&#039;accesso agli indirizzi MAC inclusi nell&#039;elenco 7e80b0d3=Trasmetti SSID: 7f3ef59c=L&#039;attivazione del filtraggio MAC disattiverà la funzione WPS. Continuare? 7fdeae92=Chiudi 82752b70=Utilizzare uno dei metodi riportati in basso per connettere il dispositivo utilizzando la funzionalità Wi-Fi Protected Setup. 8446cb23=Solo 20 MHz 85b3973a=Visualizza e modifica la configurazione wireless 86967226=Solo 802.11a 880cd1f9=SSID non trasmesso. 8885e952=Lunedì 8d475e28=Solo 802.11b/g/n 8f475444=Annulla 91b1215d=Il dispositivo client è ora connesso alla rete. 95bf52fd=Solo 802.11a/n 9638a358=Ampiezza canale 967fece9=Mista 96d3c7d5=Mostra widget sulla homepage. a33dffc6=Chiave TX: a607a42a=Orario del router: a62597b9=Nome della rete: a8afb84b=104/128 bit (26 cifre esadecimali) a98877f4=Giovedì af11364f=2 b04db74f=Visualizza e modifica le impostazioni del router b0725057=Indirizzo MAC b15f9c79=Gestione della banda da 5 GHz b66dfc28=Registra b805542e=Rete: b9ef9a13=No bd32b640=Utilità di pianificazione wireless bfbaa700=Connessione intelligente c0aca228=Wi-Fi Protected Setup c0e04dfd=È possibile attivare e disattivare le reti wireless, facendo clic sul calendario in basso. c397d39e=Sì c3a5ca53=Reti singole c45ebad7=La modalità di protezione è disabilitata su una o più reti wireless in uso. La rete potrebbe essere accessibile a utenti non autorizzati. Procedere? c48003ed=3 c5b74657=Azione c681481a=Canale: c7909e11=Solo 802.11g c9b9fe80=Chiave 3: ca3e67c6=Chiave 1: cb460ddb=Wi-Fi Protected SetupTM cbda92fc=Se il dispositivo client è dotato di un pulsante Wi-Fi Protected Setup, selezionare o premere tale pulsante, quindi fare clic sul pulsante riportato di seguito. ceed77ee=Solo 802.11ac d3805946=Genera d5a932d7=Canale d792743b=Server RADIUS: d9c3794a=Filtraggio MAC db4c422e=Congratulazioni. de8a0fc8=Solo 802.11n df0302f8=Passphrase: e57d63f9=La funzionalità Wi-Fi Protected Setup non può essere utilizzata con la modalità di protezione wireless WEP o WPA o con il filtraggio MAC. Per utilizzare la funzionalità Wi-Fi Protected Setup, modificare la modalità di protezione wireless e/o disattivare l&#039;opzione Filtraggio Mac. e9b662b3=OK ec4dc4e7=Per essere operativa, la funzionalità Wi-Fi Protected Setup richiede la trasmissione dell&#039;SSID. Si desidera abilitare la trasmissione dell&#039;SSID (il router verrà riavviato)? eed5a000=Sabato f17d9d5f=Modalità di sicurezza f29550e5=Wireless attivato f47b8767=Chiave 4: fce86bf7=Applica fdedcaa0=Chiave condivisa: fe960f2a=Protetto ff28c9be=Solo 802.11a/n/ac</code></pre></div><p>I&#039;ve tried holding the reset button 10 seconds to no avail, as well as a 30/30/30 reset for good measure.&nbsp; Unfortunately my router reset 1 legged dance didn&#039;t work, nor did my string of expletives...&nbsp; Any other ideas?</p><p>Thanks,<br />Todd</p>											<p class="post-edited">(Last edited by <strong>todd.nine</strong> on 6 Oct 2016, 23:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p340464">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">anomeome</div>
					<div class="post-datetime">
						6 Oct 2016, 23:17					</div>
				</div>
				<div class="post-content content">
					<p>Is that Italian? Where did you pull the OEM image from? Yes, it looks like OEM on both partitions. If you are sure that you are actually flipping partitions, and you cannot work your way through the screens to flash something else, than I guess you will need a serial console to flash from the uboot console. I don&#039;t know if there is any none-serial method of doing a tftp with this device, the wiki would have you believe the answer is no.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p340466">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">todd.nine</div>
					<div class="post-datetime">
						6 Oct 2016, 23:33					</div>
				</div>
				<div class="post-content content">
					<p>So thankfully I was wrong.&nbsp; I was shutting off the power too early when using the toggle switch to select the boot partition. The good news is I was able to get into Open WRT.&nbsp; I then flashed with the following (via ssh)</p><div class="codebox"><pre><code>cd /tmp
wget cache-www.belkin.com/support/dl/FW_WRT1900AC_1.1.10.167514_prod.img

/usr/sbin/fw_printenv -n boot_part</code></pre></div><p>This returns 1, therefore, this means the my WRT install is on kernel1, as a result, I want to flash kernel2.&nbsp; I proceed with the following</p><div class="codebox"><pre><code>mtd -r write FW_WRT1900AC_1.1.10.167514_prod.img kernel2</code></pre></div><p>My system writes, then reboots. I then used the 3 cycle trick to switch back to the factory partition.&nbsp; I end up in exactly the same state.&nbsp; This makes me thing something with my settings in the factory partition (kernel2) isn&#039;t correct.&nbsp; Does the configuration come from this partition or does it come from a different partition?&nbsp; If I 0 out the configuration partition with dd, will that most likely cause the factory firmware to function in it&#039;s default state?</p><p>Thanks,<br />Todd</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p340469">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">anomeome</div>
					<div class="post-datetime">
						6 Oct 2016, 23:48					</div>
				</div>
				<div class="post-content content">
					<p>I guess I would be inclined to a higher level call:<br /></p><div class="codebox"><pre><code>sysupgrade -n -v image-name</code></pre></div><p>in going between owrt and OEM as the partition layout is not the same.</p><p>As well as getting the environment setup correctly as per my earlier link.</p>											<p class="post-edited">(Last edited by <strong>anomeome</strong> on 6 Oct 2016, 23:53)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>