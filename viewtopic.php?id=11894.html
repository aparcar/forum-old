<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Meraki &amp; EasyFlash</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 13 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p53209">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">DiarmuidWrenne</div>
					<div class="post-datetime">
						1 Aug 2007, 14:46					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I have a Meraki and attempted to upload the latest firware (untested) to it using the EasyFlash utility.</p><p><a href="http://wiki.openwrt.org/OpenWrtDocs/Hardware/Meraki/Mini#head-d148eeeb6f913513765e33aa0629009f3e8584a3">http://wiki.openwrt.org/OpenWrtDocs/Har … 9f3e8584a3</a></p><br /><p>I did as stated in the wiki post, but I don&#039;t know what is meant to happen now. I have repowered the device, but it is not getting an address from the router. The right hand ethernet light is flashing continuously.</p><p>Just to be sure I am right about the instructions.</p><p>I downloaded the ap51-flash-gui.exe for winxp<br />I downloaded the openwrt-atheros-2.6-vmlinux.gz and openwrt-atheros-2.6-root.jffs2-64k from the latest compile. I also tried the files from the snapshot (26/07/2007)<br />I then run the gui app, select the files, press Go, then add power to the meraki. </p><p>This is what I get now. Followed swiftly with either arp errors or tftp errors. I have winpcap installed.</p><p>&lt;a href=&quot;http://photobucket.com&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;http://i86.photobucket.com/albums/k109/dwrenne/fail1.png&quot; border=&quot;0&quot; alt=&quot;Photo Sharing and Video Hosting at Photobucket&quot;&gt;&lt;/a&gt;</p><p>Maybe teh device is working, but it is not responing to ping requests on 192.168.1.1. Is it on a different address</p><p>Regards</p><p>Diarmuid</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p53210">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">DiarmuidWrenne</div>
					<div class="post-datetime">
						1 Aug 2007, 14:47					</div>
				</div>
				<div class="post-content content">
					<p><span class="postimg"><img src="http://i86.photobucket.com/albums/k109/dwrenne/fail1.png" alt="http://i86.photobucket.com/albums/k109/dwrenne/fail1.png" /></span></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p53211">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">DiarmuidWrenne</div>
					<div class="post-datetime">
						1 Aug 2007, 15:55					</div>
				</div>
				<div class="post-content content">
					<p>I set up the serial link and this is what I get when I run EasyFlash and then let it boot. This time it ran without errors but gain is unresponsive once it boots.</p><br /><p>&lt;0&gt;&lt;0&gt;&lt;0&gt;&lt;0&gt;Ethernet eth0: MAC address 00:18:0a:01:19:37<br />IP: 192.168.84.1/255.255.255.0, Gateway: 0.0.0.0<br />Default server: 192.168.84.9</p><p>RedBoot(tm) bootstrap and debug environment [ROMRAM]<br />Release, version V1.04 - built 12:24:00, Apr 17 2006</p><p>Copyright (C) 2000, 2001, 2002, 2003, 2004 Red Hat, Inc.</p><p>Board: Meraki Mini <br />RAM: 0x80000000-0x82000000, [0x8003d110-0x80fe1000] available<br />FLASH: 0xa8000000 - 0xa87e0000, 128 blocks of 0x00010000 bytes each.<br />== Executing boot script in 2.000 seconds - enter ^C to abort<br />&lt;0&gt;&lt;0&gt;&lt;0&gt;&lt;0&gt;Ethernet eth0: MAC address 00:18:0a:01:19:37<br />IP: 192.168.84.1/255.255.255.0, Gateway: 0.0.0.0<br />Default server: 192.168.84.9</p><p>RedBoot(tm) bootstrap and debug environment [ROMRAM]<br />Release, version V1.04 - built 12:24:00, Apr 17 2006</p><p>Copyright (C) 2000, 2001, 2002, 2003, 2004 Red Hat, Inc.</p><p>Board: Meraki Mini <br />RAM: 0x80000000-0x82000000, [0x8003d110-0x80fe1000] available<br />FLASH: 0xa8000000 - 0xa87e0000, 128 blocks of 0x00010000 bytes each.<br />== Executing boot script in 2.000 seconds - enter ^C to abort<br />RedBoot&gt; fis load -d vmlinux.bin.l7<br />Image loaded from 0x80041000-0x80290086<br />RedBoot&gt; exec<br />Now booting linux kernel:<br /> Base address 0x80030000 Entry 0x80041000<br /> Cmdline :</p>											<p class="post-edited">(Last edited by <strong>DiarmuidWrenne</strong> on 1 Aug 2007, 15:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p53213">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">DiarmuidWrenne</div>
					<div class="post-datetime">
						1 Aug 2007, 16:27					</div>
				</div>
				<div class="post-content content">
					<p>Ctrl-c </p><p>I was having trouble sending ctrl-c but have it now. The flow control was set to TRS/CTS when it should be NONE, absent, nada, rien, nothing, etc.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p53223">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">DiarmuidWrenne</div>
					<div class="post-datetime">
						1 Aug 2007, 18:22					</div>
				</div>
				<div class="post-content content">
					<p>I have tried to use the serial method but The wiki page is confusing. Does it describe 4 different ways of flashing the Meraki? I don&#039;t know which bits are essential and which are parts of other methods. So if you look at section 4, where do I start? <br />4.1 ran fine the first time but ran all the way to boot and I ended with a shell. Then I rebooted got to redboot prompt and continued with 4.2 and now seem to have totally screwed it as all I get now is</p><p>Ethernet eth0: MAC address 00:18:0a:01:19:37<br />IP: 192.168.84.1/255.255.255.0, Gateway: 0.0.0.0<br />Default server: 192.168.84.9</p><p>RedBoot(tm) bootstrap and debug environment [ROMRAM]<br />Release, version V1.04 - built 12:24:00, Apr 17 2006</p><p>Copyright (C) 2000, 2001, 2002, 2003, 2004 Red Hat, Inc.</p><p>Board: Meraki Mini <br />RAM: 0x80000000-0x82000000, [0x8003d110-0x80fe1000] available<br />FLASH: 0xa8000000 - 0xa87e0000, 128 blocks of 0x00010000 bytes each.<br />== Executing boot script in 2.000 seconds - enter ^C to abort<br />ÿÿÿ^C<br />RedBoot&gt; c^C<br />RedBoot&gt; ^C<br />RedBoot&gt; c^C<br />RedBoot&gt; ^C<br />RedBoot&gt; ^C<br />RedBoot&gt; ^C<br />RedBoot&gt; <br />RedBoot&gt; <br />RedBoot&gt; fis list<br />Name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FLASH addr&nbsp; Mem addr&nbsp; &nbsp; Length&nbsp; &nbsp; &nbsp; Entry point<br />RedBoot&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0xA8000000&nbsp; 0xA8000000&nbsp; 0x00030000&nbsp; 0x00000000<br />rootfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0xA8030000&nbsp; 0x80041000&nbsp; 0x006A0000&nbsp; 0x80041000<br />linux&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0xA8150000&nbsp; 0x80041000&nbsp; 0x00340000&nbsp; 0x80041000<br />vmlinux.bin.l7&nbsp; &nbsp; 0xA86D0000&nbsp; 0x80041000&nbsp; 0x00100000&nbsp; 0x80041000<br />FIS directory&nbsp; &nbsp; &nbsp;0xA87D0000&nbsp; 0xA87D0000&nbsp; 0x0000F000&nbsp; 0x00000000<br />RedBoot config&nbsp; &nbsp; 0xA87DF000&nbsp; 0xA87DF000&nbsp; 0x00001000&nbsp; 0x00000000<br />RedBoot&gt; fis load -d linux<br />decompression error: incorrect header check<br />RedBoot&gt;</p><p>Do those partition look ok. </p><p>Is there a serial guide for idiots out there. </p><p>Regards</p><p>Diarmuid</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p53229">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">DiarmuidWrenne</div>
					<div class="post-datetime">
						1 Aug 2007, 19:03					</div>
				</div>
				<div class="post-content content">
					<p>So now I felt that I had messed up the partitioions so I deleted them as per 5.1.1 then I ran the following commands</p><p>RedBoot&gt; fis init<br />RedBoot&gt; load -r -b 0x80041000 -m tftp -h 192.168.84.9 openwrt-atheros-2.6-vmlinux.gz<br />RedBoot&gt; fis create -r 0x80041000 -l 0x180000 -e 0x80041000 linux<br />RedBoot&gt; load -r -b 0x80041000 -m tftp -h 192.168.84.9 openwrt-atheros-2.6-root.jffs2-64k<br />RedBoot&gt; fis create -r 0x80041000 -l 0x620000 rootfs</p><p>That all ran fine with no errors (taking maybe 20 minutes), then I modified the boot script to add the lines<br />&gt;&gt; fis load -d linux<br />&gt;&gt; exec</p><p>Now when I boot I get </p><p>Ethernet eth0: MAC address 00:18:0a:01:19:37<br />IP: 192.168.84.1/255.255.255.0, Gateway: 0.0.0.0<br />Default server: 192.168.84.9</p><p>RedBoot(tm) bootstrap and debug environment [ROMRAM]<br />Release, version V1.04 - built 12:24:00, Apr 17 2006</p><p>Copyright (C) 2000, 2001, 2002, 2003, 2004 Red Hat, Inc.</p><p>Board: Meraki Mini <br />RAM: 0x80000000-0x82000000, [0x8003d110-0x80fe1000] available<br />FLASH: 0xa8000000 - 0xa87e0000, 128 blocks of 0x00010000 bytes each.<br />== Executing boot script in 2.000 seconds - enter ^C to abort<br />RedBoot&gt; fis load -d linux<br />Image loaded from 0x80041000-0x80296085<br />RedBoot&gt; exec<br />Now booting linux kernel:<br /> Base address 0x80030000 Entry 0x80041000<br /> Cmdline </p><p>Then nothing.</p><p>Any Ideas?</p><p>Thanks</p><p>Diarmuid</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p53232">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">lschweiss</div>
					<div class="post-datetime">
						1 Aug 2007, 19:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>DiarmuidWrenne wrote:</cite><blockquote><p>RedBoot&gt; fis init<br />RedBoot&gt; load -r -b 0x80041000 -m tftp -h 192.168.84.9 openwrt-atheros-2.6-vmlinux.gz<br />RedBoot&gt; fis create -r 0x80041000 -l 0x180000 -e 0x80041000 linux<br />RedBoot&gt; load -r -b 0x80041000 -m tftp -h 192.168.84.9 openwrt-atheros-2.6-root.jffs2-64k<br />RedBoot&gt; fis create -r 0x80041000 -l 0x620000 rootfs</p></blockquote></div><p>This is the method I use for flashing the Meraki all the time and is working well.&nbsp; Sounds like your kernel is not built correctly if it does not boot.&nbsp; &nbsp;It does take the Meraki about 30 seconds to decompress the kernel and start it, so be patient.&nbsp; &nbsp;(Hopefully the lzma loader for the Meraki will be done soon.&nbsp; )</p><p>Try one of the kernels from the prebuilt kamikaze: <a href="http://downloads.openwrt.org/kamikaze/7.07/atheros-2.6/openwrt-atheros-2.6-vmlinux.gz">http://downloads.openwrt.org/kamikaze/7 … vmlinux.gz</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p53235">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">DiarmuidWrenne</div>
					<div class="post-datetime">
						1 Aug 2007, 20:16					</div>
				</div>
				<div class="post-content content">
					<p>Hi lschweiss,</p><p>Those are the images I am using for my install (26/07/2007 15:38). I am using WinAgents TFTP server (30 day trial) on WinXP. </p><p>This is the current state of my partitions. Do yours match this? Or would you expect them to.</p><p>[BBCode]</p><p>RedBoot&gt; ^C<br />RedBoot&gt; fis list<br />Name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FLASH addr&nbsp; Mem addr&nbsp; &nbsp; Length&nbsp; &nbsp; &nbsp; Entry point<br />RedBoot&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0xA8000000&nbsp; 0xA8000000&nbsp; 0x00030000&nbsp; 0x00000000<br />linux&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0xA8030000&nbsp; 0x80041000&nbsp; 0x00180000&nbsp; 0x80041000<br />rootfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0xA81B0000&nbsp; 0x80041000&nbsp; 0x00620000&nbsp; 0x80041000<br />FIS directory&nbsp; &nbsp; &nbsp;0xA87D0000&nbsp; 0xA87D0000&nbsp; 0x0000F000&nbsp; 0x00000000<br />RedBoot config&nbsp; &nbsp; 0xA87DF000&nbsp; 0xA87DF000&nbsp; 0x00001000&nbsp; 0x00000000<br />RedBoot&gt; </p><br /><p>RedBoot&gt; fconfig -l<br />Run script at boot: true<br />Boot script: <br />.. fis load -d linux<br />.. exec</p><p>Boot script timeout (1000ms resolution): 2<br />Use BOOTP for network configuration: false<br />Gateway IP address: 0.0.0.0<br />Local IP address: 192.168.84.1<br />Local IP address mask: 255.255.255.0<br />Default server IP address: 192.168.84.9<br />Console baud rate: 115200<br />GDB connection port: 9000<br />Force console for special debug messages: false<br />Network debug at boot time: false</p><br /><p>[/BBCode]</p><p>Thanks</p><p>Diarmuid</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p53238">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">DiarmuidWrenne</div>
					<div class="post-datetime">
						1 Aug 2007, 20:52					</div>
				</div>
				<div class="post-content content">
					<p>Hi</p><p>I ran the following and got it to boot, ping, etc. However, I don&#039;t know if the wifi was running. How would I test that?</p><p>Whats this does show is that the kernal image is working. So why is it not booting. Are there any diagnostics I could run&nbsp; and post teh results here.</p><p>RedBoot&gt; <br />RedBoot&gt; <br />RedBoot&gt; load -r -d -b 0x80041000 -m tftp -h 192.168.84.9 openwrt-atheros-2.6-vmlinux.gz<br />Raw file loaded 0x80041000-0x80290085, assumed entry at 0x80041000<br />RedBoot&gt; exec<br />Now booting linux kernel:<br /> Base address 0x80030000 Entry 0x80041000<br /> Cmdline : <br />Linux version 2.6.21.5 (nbd@ds10) (gcc version 4.1.2) #12 Thu Jul 26 17:38:18 CEST 2007</p><p>but that obviously did not save. When I boot again, it stalls at the&nbsp; same point as below.</p><p>Cheers</p><p>Diarmuid</p>											<p class="post-edited">(Last edited by <strong>DiarmuidWrenne</strong> on 1 Aug 2007, 20:57)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p53391">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">lschweiss</div>
					<div class="post-datetime">
						4 Aug 2007, 16:11					</div>
				</div>
				<div class="post-content content">
					<p>If your using a serial connection, the default build makes the kernel switch to 9600 bps, and you need to change your terminal speed once the kernel loads.</p><p>Wireless is disabled by default.&nbsp; Look in /etc/config/wireless once you login.&nbsp; </p><p>See this thread about configuring the baud rate when building:</p><p><a href="http://forum.openwrt.org/viewtopic.php?id=11904">http://forum.openwrt.org/viewtopic.php?id=11904</a></p>											<p class="post-edited">(Last edited by <strong>lschweiss</strong> on 4 Aug 2007, 16:13)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>