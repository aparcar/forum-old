<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> pptp Server on Openwrt</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 16 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p370391">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Christian283</div>
					<div class="post-datetime">
						3 Jan 2018, 13:45					</div>
				</div>
				<div class="post-content content">
					<p>Hello everyone,<br />last year I bought a MC PMRL router to run a pptp server on it.<br />pptp is necessary because the Remotesoftware works with it .<br />To make the pptp connection safe I put the pptp connection in a openvpn connection.</p><p>Now I have a problem to run the pptp server on openwrt I cant finde the &#039;pptpd&#039; package witch is necessary to adjust the server.</p><div class="codebox"><pre><code>root@MC-PMRx:~# opkg install pptpd
Unknown package &#039;pptpd&#039;.
Collected errors:
 * opkg_install_cmd: Cannot install package pptpd.</code></pre></div><p>wiki.openwrt.org/doc/howto/vpn.server.pptpd</p><p>I hope someone can help me <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>Christian283</strong> on 3 Jan 2018, 13:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370480">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mpjanet</div>
					<div class="post-datetime">
						4 Jan 2018, 23:25					</div>
				</div>
				<div class="post-content content">
					<p>run &quot;opkg update&quot; first.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370609">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Christian283</div>
					<div class="post-datetime">
						8 Jan 2018, 08:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>run &quot;opkg update&quot; first.</p></blockquote></div><p>I have done that, of course. But I donÂ´t can find the package.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370616">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">rj-45</div>
					<div class="post-datetime">
						8 Jan 2018, 11:09					</div>
				</div>
				<div class="post-content content">
					<p>How about you try this command<br /></p><div class="codebox"><pre><code>opkg list | grep pptp</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370695">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Christian283</div>
					<div class="post-datetime">
						9 Jan 2018, 18:51					</div>
				</div>
				<div class="post-content content">
					<p>I do not have the device right now I&#039;ll test it tomorrow, but I thank you in advance.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370941">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Christian283</div>
					<div class="post-datetime">
						16 Jan 2018, 16:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>rj-45 wrote:</cite><blockquote><p>How about you try this command<br /></p><div class="codebox"><pre><code>opkg list | grep pptp</code></pre></div></blockquote></div><br /><div class="codebox"><pre><code>root@MC-PMRx:~# opkg list | grep pptp
kmod-pptp - 3.18.23-1
ppp-mod-pptp - 2.4.7-6</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p372506">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Christian283</div>
					<div class="post-datetime">
						20 Feb 2018, 08:39					</div>
				</div>
				<div class="post-content content">
					<p>I was able to install all packages manually, if i want to build the connection remotely, the log will give me the following logfile.</p><p>Maybe someone can help me with this:</p><div class="codebox"><pre><code>Mon Feb 19 17:01:22 2018 daemon.info pptpd[27016]: CTRL: Client 172.211.213.16 control connection started
Mon Feb 19 17:01:22 2018 daemon.info pptpd[27016]: CTRL: Starting call (launching pppd, opening GRE)
Mon Feb 19 17:01:22 2018 daemon.notice pppd[27017]: pppd 2.4.7 started by root, uid 0
Mon Feb 19 17:01:22 2018 daemon.debug pppd[27017]: using channel 9
Mon Feb 19 17:01:22 2018 daemon.info pppd[27017]: Using interface ppp1
Mon Feb 19 17:01:22 2018 daemon.notice pppd[27017]: Connect: ppp1 &lt;--&gt; /dev/pts/0
Mon Feb 19 17:01:22 2018 daemon.debug pppd[27017]: sent [LCP ConfReq id=0x1 &lt;mru 1482&gt; &lt;auth chap MS-v2&gt; &lt;magic 0x30c64d9e&gt;]
Mon Feb 19 17:01:22 2018 daemon.debug pppd[27017]: rcvd [LCP ConfReq id=0x0 &lt;mru 1400&gt; &lt;magic 0x5e0b3a9a&gt; &lt;pcomp&gt; &lt;accomp&gt; &lt;callback CBCP&gt;]
Mon Feb 19 17:01:22 2018 daemon.debug pppd[27017]: sent [LCP ConfRej id=0x0 &lt;pcomp&gt; &lt;accomp&gt; &lt;callback CBCP&gt;]
Mon Feb 19 17:01:22 2018 daemon.debug pppd[27017]: rcvd [LCP ConfAck id=0x1 &lt;mru 1482&gt; &lt;auth chap MS-v2&gt; &lt;magic 0x30c64d9e&gt;]
Mon Feb 19 17:01:22 2018 daemon.debug pppd[27017]: rcvd [LCP ConfReq id=0x1 &lt;mru 1400&gt; &lt;magic 0x5e0b3a9a&gt;]
Mon Feb 19 17:01:22 2018 daemon.debug pppd[27017]: sent [LCP ConfAck id=0x1 &lt;mru 1400&gt; &lt;magic 0x5e0b3a9a&gt;]
Mon Feb 19 17:01:22 2018 daemon.debug pppd[27017]: sent [LCP EchoReq id=0x0 magic=0x30c64d9e]
Mon Feb 19 17:01:22 2018 daemon.debug pppd[27017]: sent [CHAP Challenge id=0xc8 &lt;50c1b7aff0345987ec773fe3e2e00560&gt;, name = &quot;pptp-server&quot;]
Mon Feb 19 17:01:23 2018 daemon.debug pppd[27017]: rcvd [LCP Ident id=0x2 magic=0x5e0b3a9a &quot;MSRASV5.20&quot;]
Mon Feb 19 17:01:23 2018 daemon.debug pppd[27017]: rcvd [LCP Ident id=0x3 magic=0x5e0b3a9a &quot;MSRAS-0-NB06&quot;]
Mon Feb 19 17:01:23 2018 daemon.debug pppd[27017]: rcvd [LCP Ident id=0x4 magic=0x5e0b3a9a &quot;\37777777710\37777777774\37777777622tA\37777777615\37777777670C\37777777626K\031\37777777667\37777777607\014\37777777743,&quot;]
Mon Feb 19 17:01:23 2018 daemon.debug pppd[27017]: rcvd [LCP EchoRep id=0x0 magic=0x5e0b3a9a]
Mon Feb 19 17:01:23 2018 daemon.debug pppd[27017]: rcvd [CHAP Response id=0xc8 &lt;31da1074f4d1a256a2c39baa91af4640000000000000000041a90d2001b9440ce3563159bce9590fa483b2fe50abd58300&gt;, name = &quot;gast&quot;]
Mon Feb 19 17:01:23 2018 daemon.warn pppd[27017]: Warning - secret file /etc/ppp/chap-secrets has world and/or group access
Mon Feb 19 17:01:23 2018 daemon.debug pppd[27017]: sent [CHAP Success id=0xc8 &quot;S=5B9EE45F4D227084F94CA0014269EB495FF463EF M=Access granted&quot;]
Mon Feb 19 17:01:23 2018 daemon.notice pppd[27017]: peer from calling number 172.211.213.16 authorized
Mon Feb 19 17:01:23 2018 daemon.err pppd[27017]: MPPE required, but kernel has no support.
Mon Feb 19 17:01:23 2018 daemon.debug pppd[27017]: sent [LCP TermReq id=0x2 &quot;MPPE required but not available&quot;]
Mon Feb 19 17:01:23 2018 daemon.debug pppd[27017]: rcvd [IPV6CP ConfReq id=0x5 &lt;addr fe80::a41c:42df:8947:8398&gt;]
Mon Feb 19 17:01:23 2018 daemon.debug pppd[27017]: Discarded non-LCP packet when LCP not open
Mon Feb 19 17:01:23 2018 daemon.debug pppd[27017]: rcvd [CCP ConfReq id=0x6 &lt;mppe +H -M +S -L -D -C&gt;]
Mon Feb 19 17:01:23 2018 daemon.debug pppd[27017]: Discarded non-LCP packet when LCP not open
Mon Feb 19 17:01:23 2018 daemon.debug pppd[27017]: rcvd [IPCP ConfReq id=0x7 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 0.0.0.0&gt; &lt;ms-wins 0.0.0.0&gt; &lt;ms-dns2 0.0.0.0&gt; &lt;ms-wins 0.0.0.0&gt;]
Mon Feb 19 17:01:23 2018 daemon.debug pppd[27017]: Discarded non-LCP packet when LCP not open
Mon Feb 19 17:01:23 2018 daemon.debug pppd[27017]: rcvd [LCP TermAck id=0x2 &quot;MPPE required but not available&quot;]
Mon Feb 19 17:01:23 2018 daemon.notice pppd[27017]: Connection terminated.
Mon Feb 19 17:01:23 2018 daemon.info pppd[27017]: Connect time 0.1 minutes.
Mon Feb 19 17:01:23 2018 daemon.info pppd[27017]: Sent 0 bytes, received 0 bytes.
Mon Feb 19 17:01:23 2018 daemon.info pppd[27017]: Exit.
Mon Feb 19 17:01:23 2018 daemon.err pptpd[27016]: GRE: read(fd=6,buffer=41ec5c,len=8196) from PTY failed: status = -1 error = Input/output error, usually caused by unexpected termination of pppd, check option syntax and pppd logs
Mon Feb 19 17:01:23 2018 daemon.err pptpd[27016]: CTRL: PTY read or GRE write failed (pty,gre)=(6,7)
Mon Feb 19 17:01:23 2018 daemon.debug pptpd[27016]: CTRL: Reaping child PPP[27017]
Mon Feb 19 17:01:23 2018 daemon.info pptpd[27016]: CTRL: Client 172.211.213.16 control connection finished
Mon Feb 19 17:01:23 2018 daemon.err pptpd[27016]: CTRL: Couldn&#039;t write packet to client.</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p372509">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						20 Feb 2018, 09:28					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>Mon Feb 19 17:01:23 2018 daemon.err pppd[27017]: MPPE required, but kernel has no support.</code></pre></div><p>Looks like you need to install the MPPE kernel module.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p372512">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Christian283</div>
					<div class="post-datetime">
						20 Feb 2018, 10:34					</div>
				</div>
				<div class="post-content content">
					<p>I guess I need the following package: kmod-mppe ?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>