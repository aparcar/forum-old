<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> error installing usb server - help to compile it</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p105453">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">gaucho</div>
					<div class="post-datetime">
						28 Mar 2010, 21:18					</div>
				</div>
				<div class="post-content content">
					<p>i need usbserver on x86 pc with openwrt on it.<br />i&#039;m using a vmware virtual machine downloaded from internet, to test usbserver. This virtual machine is openwrt kamikaze 8.09 for x86.</p><p>i got this error while tring to install usb server on openwrt kamikaze 8.09:<br /></p><div class="codebox"><pre><code>BusyBox v1.11.2 (2009-01-27 17:33:31 CST) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 KAMIKAZE (8.09, r14252) ----------------------------
  * 10 oz Vodka       Shake well with ice and strain
  * 10 oz Triple sec  mixture into 10 shot glasses.
  * 10 oz lime juice  Salute!
 ---------------------------------------------------
root@OpenWrt:~# cd /root/usb-server/
root@OpenWrt:~/usb-server# ./installer.sh install-server
./installer.sh: line 358: whoami: not found
sh: root: unknown operand

*** Installing IncentivesPro USB Server + USB Client v.2.0.8
sh: =~: unknown operand
***  No kernel module found for your kernel version. Will try to compile from sources.
***  Compiling kernel module...
***  Cannot compile kernel module. Installation terminated. See buildlog.txt file for more information.
make: *** /usr/src/linux: No such file or directory.  Stop.
make: *** [clean] Error 2
root@OpenWrt:~/usb-server#</code></pre></div><p>if i try instead to install client and server i get the following error:<br /></p><div class="codebox"><pre><code>BusyBox v1.11.2 (2009-01-27 17:33:31 CST) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 KAMIKAZE (8.09, r14252) ----------------------------
  * 10 oz Vodka       Shake well with ice and strain
  * 10 oz Triple sec  mixture into 10 shot glasses.
  * 10 oz lime juice  Salute!
 ---------------------------------------------------
root@OpenWrt:~# cd /root/usb-server/
root@OpenWrt:~/usb-server# ./installer.sh install
./installer.sh: line 358: whoami: not found
sh: root: unknown operand

*** Installing IncentivesPro USB Server + USB Client v.2.0.8
!!!  Required file /usr/src/linux/drivers/usb/core/hcd.h is missing. Installer cannot continue.
!!!  This  error  means that you don&#039;t have full kernel sources installed.
!!!  Some systems are shipped with stripped kernel sources, but USB server
!!!  kernel module requires at least the following two files to be present
!!!  amongst others:
!!!  drivers/usb/core/usb/hcd.h
!!!  drivers/usb/core/usb/hub.h
root@OpenWrt:~/usb-server#</code></pre></div><p>do you have any suggestion to help me install or compile the usbserver?<br />thank you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p105455">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Dogge</div>
					<div class="post-datetime">
						28 Mar 2010, 22:38					</div>
				</div>
				<div class="post-content content">
					<p>You can&#039;t build on the router. Use the build-system and create a package Makefile...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p105487">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">gaucho</div>
					<div class="post-datetime">
						29 Mar 2010, 12:06					</div>
				</div>
				<div class="post-content content">
					<p>thank you dogge, i found this link (<a href="http://wiki.openwrt.org/doc/howto/build">http://wiki.openwrt.org/doc/howto/build</a>) and now i&#039;m studing it.<br />i&#039;ll let u know.<br />ciao.</p>											<p class="post-edited">(Last edited by <strong>gaucho</strong> on 2 Apr 2010, 19:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p105899">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">gaucho</div>
					<div class="post-datetime">
						2 Apr 2010, 20:22					</div>
				</div>
				<div class="post-content content">
					<p>following the guide, of my previous link, i successfully executed the command make, compiling each pakage for kamikaze and the kernel (all this with the default configuration, except the flag that select each package in menuconfig).</p><p>now if i download usb server from <a href="http://incentivespro.com/usb-server.tar.gz">http://incentivespro.com/usb-server.tar.gz</a><br />i can see that there is no makefile inside it. then i don&#039;t know how to make a package for it!<br />help please!<br />i&#039;m very newbye!</p><p>what i&#039;m tring to understand is: do i need to create a package for usbserver, or do i need to compile a new kernel for openwrt?</p><p>how to include hcd.h as requested during usbserver setup? (see the log of my previous posts)</p>											<p class="post-edited">(Last edited by <strong>gaucho</strong> on 2 Apr 2010, 20:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106053">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">gaucho</div>
					<div class="post-datetime">
						4 Apr 2010, 23:01					</div>
				</div>
				<div class="post-content content">
					<p>i started over, changing the base OS version.<br />i downloaded the vmware image of Ubuntu 9.10 from vmware website.<br />now i&#039;ll try first to compile usb-server on ubuntu, then later i will try to install it on openwrt.</p><p>i repeated previous steps.<br />downloaded usb-server, extracted on desktop,<br />downloaded last tusbd sources, and extracted in the proper path ( inside usb-server/modules/src/tusbd)<br />Then the following commands:<br />sudo apt-get source linux-image-$(uname -r)<br />cd /usr/src/linux-2.6.31<br />sudo make oldconfig<br />sudo make prepare<br />sudo make modules<br />cd /home/user/Desktop/usb-server<br />vi installer.sh<br />(edited installer with correct kernel path)<br />cd /home/user/Desktop/usb-server/modules/src/tusbd/<br />vi Makefile<br />(edited Makefile with correct kernel path)<br />cd /home/user/Desktop/usb-server<br />sudo ./installer.sh install sudo apt-get source linux-image-$(uname -r)</p><p>This gives me the following error:<br /></p><div class="codebox"><pre><code>vadmin@ubuntu:~/Desktop/usb-server$ sudo ./installer.sh install
[sudo] password for vadmin:
 
*** Installing IncentivesPro USB Server + USB Client v.2.0.8
./installer.sh: 381: [[: not found
***  No kernel module found for your kernel version. Will try to compile from sources.
***  Compiling kernel module...
***  Kernel module succesfully compiled
***  Copying files...
***  Starting daemon...
insmod: error inserting &#039;/usr/local/usb-server/bin/tusbd.ko&#039;: -1 Invalid module format
??? Cannot start USB Server
 
*** Uninstalling IncentivesPro USB Server...
***  Stopping daemon...
***  Removing files...
***  Uninstallation successful!
vadmin@ubuntu:~/Desktop/usb-server$</code></pre></div><p>the result of the command uname is this:<br /></p><div class="codebox"><pre><code>vadmin@ubuntu:~/Desktop/usb-server$ uname -r
2.6.31-17-generic</code></pre></div><p>but the sources obtained with the command<br />sudo apt-get source linux-image-$(uname -r)<br />creates the folder linux-2.6.31</p><p>And the original folder linux-headers-2.6.31-17-generic doesn&#039;t contain the files /usr/src/linux-headers-2.6.31-17-generic/drivers/usb/core/usb/hcd.h and /usr/src/linux-headers-2.6.31-17-generic/drivers/usb/core/usb/hub.h</p><p>could please someone help me?<br />Thank you.<br />.....</p>											<p class="post-edited">(Last edited by <strong>gaucho</strong> on 4 Apr 2010, 23:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106696">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">gaucho</div>
					<div class="post-datetime">
						12 Apr 2010, 21:35					</div>
				</div>
				<div class="post-content content">
					<p>i had success installing usb-server on ubuntu.</p><p>then, because i have no patience,<br />i stopped tring to install usb-server on openwrt. <br />now i&#039;m working on ubuntu server 9.10. <br />i installed usb-server by the same way i did on ubuntu desktop.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>