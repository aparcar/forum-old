<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WR703n hub, extroot card stops reading</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 19 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p222565">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">alias_neo</div>
					<div class="post-datetime">
						13 Jan 2014, 14:03					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,</p><p>I performed the hardware hub mod on my WR703n. on the hub, I have two microSD card readers, one is internal to the device, and the other external.</p><p>On the internal card I have extended the root partition, using the standard method, by modifying the fstab config.</p><p>The problem I have is that when I read&nbsp; from the second (external) device, the internal card seems to die, as in I lose all access to the file system, ash can&#039;t find any binaries, I can&#039;t run reboot, or ls, or anything, as if the entire file system has disappeared.</p><p>Can anybody suggest some way for me to debug this or what the issue might possibly be?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p222611">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						13 Jan 2014, 21:32					</div>
				</div>
				<div class="post-content content">
					<p>Well, if you can reproduce this problem, you could copy busybox to /tmp. After such crash, you could issue &quot;/tmp/busybox dmesg&quot; to have a first idea of what the kernel is facing.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p222621">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">alias_neo</div>
					<div class="post-datetime">
						13 Jan 2014, 23:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>MBS wrote:</cite><blockquote><p>Well, if you can reproduce this problem, you could copy busybox to /tmp. After such crash, you could issue &quot;/tmp/busybox dmesg&quot; to have a first idea of what the kernel is facing.</p></blockquote></div><br /><p>Thanks for the heads up, after doing this I see a port reset and I/O error in dmesg. It appears the issue is power related. If I use a power supply that supplies less than an amp, it boots up with no devices mounted, with hte 1A supply that came with it, both devices are available, but if I read from them, they drop out.</p><p>Even with a 1.5A supply the issue still occurs so I imagine the issue is with the hub/usb port supplying enough power, any suggestions on how I can increase this?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p222668">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						14 Jan 2014, 10:07					</div>
				</div>
				<div class="post-content content">
					<p>Have you already tried a different hub, preferrably a self powered hub?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p222669">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">alias_neo</div>
					<div class="post-datetime">
						14 Jan 2014, 10:10					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>tmo26 wrote:</cite><blockquote><p>Have you already tried a different hub, preferrably a self powered hub?</p></blockquote></div><p>Afraid not, I actually soldered this hub in place of the single port on the device, destroying the original port in the process. </p><p>Someone had successfully done so before so I would not have thought power would be an issue, especially since I&#039;m using two small, very low power card readers.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p222670">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						14 Jan 2014, 10:18					</div>
				</div>
				<div class="post-content content">
					<p>Yes, it&#039;s unusual that power should be a problem with just two thumbdrives. Usually, those drives draw not more than 100mA, so alltogether the current draw should stay well below 500mA.</p><p>Have you changed the power cord already, just to make sure that it&#039;s not a bad one with high resistance?</p><p>By the way: Please show some pictures of your mod (please make sure the pictures are &lt;100kB).</p>											<p class="post-edited">(Last edited by <strong>tmo26</strong> on 14 Jan 2014, 10:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p222671">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">alias_neo</div>
					<div class="post-datetime">
						14 Jan 2014, 10:23					</div>
				</div>
				<div class="post-content content">
					<p>Yes, I tried a whole other power supply and cable, with the second one, it wouldn&#039;t even mount the devices at boot, then a third power supply and cable which mounted at boot but same issue persists.</p><p>It&#039;s really strange. </p><p>I&#039;d rather not do-solder the hub because I&#039;ve made enough mess already, but I may do so just to get an ammeter in line if I can&#039;t figure out the issue. </p><p>It&#039;s unusable currently so I hope I can solve the issue with some help.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p222686">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						14 Jan 2014, 13:32					</div>
				</div>
				<div class="post-content content">
					<p>Hmm... I&#039;d say: Desolder your hub-solution and try with a standard external USB hub and see, if the problem still persists.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p222734">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						14 Jan 2014, 19:36					</div>
				</div>
				<div class="post-content content">
					<p>Did the hub work correctly with both SD-readers *before* you soldered it into the router?</p><p>Did the router boot correctly with both readers attached *before* you soldered the hub into the router?</p><p>Are you sure that it&#039;s not a &quot;hub&quot; like this one, without any ICs on it?<br /><a href="https://www.mikrocontroller.net/attachment/201008/IMG_20131217_164354.jpg">https://www.mikrocontroller.net/attachm â€¦ 164354.jpg</a><br />You know, these days, you have to take into account even the weirdest hardware designs <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Are you sure that the filesystem on one or both SD-cards isn&#039;t damaged?<br />Have you tried accessing both SD cards on another computer, especially the second one?<br />Have you already done a filesystem check, especially on the second one?</p><p>What version of OpenWRT are you using?</p><p>And just to get it right:<br />As long as you do not read from the second SD card, the router is working fine, for hours or even for days, correct?<br />And as soon as you read from the second SD card, the first one becomes inaccessible, correct?</p><p>When the issue occurs again, please post the relevant part of dmesg and mount.</p><p>And by the way: Yes, pics please!</p>											<p class="post-edited">(Last edited by <strong>tmo26</strong> on 14 Jan 2014, 19:36)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>