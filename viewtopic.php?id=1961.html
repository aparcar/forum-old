<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> RRDTool?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 13 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p9254">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">pcbroch</div>
					<div class="post-datetime">
						8 Jul 2005, 16:55					</div>
				</div>
				<div class="post-content content">
					<p>Any chance of anyone having the rrdtools running on a WRT?&nbsp; I&#039;m comtemplating turning one of mine into a datalogging device for my weather station and temperature sensors.&nbsp; I have written all the code to do the actual logging on linux, but it relies on rrdtool.&nbsp; I can get it to run on my WRT, collect the data from a serial interface, but it would be nifty to be able to serve it directly from the WRT.</p><p>If not, are there other similar tools already available (mostly for generating the graphs, I can rewrite the logging part).</p><p>Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p9256">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">olli</div>
					<div class="post-datetime">
						8 Jul 2005, 17:00					</div>
				</div>
				<div class="post-content content">
					<p>rrdtool/rrdcollect is already packaged for OpenWRT at <a href="http://openwrt.brainabuse.de/rrdcollect/">http://openwrt.brainabuse.de/rrdcollect/</a> but the version is outdated.</p><p>When I tried to compile a new version of rrdtool I always get I always get an IEEE math compile error. Maybe someone could build an updated package.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p9276">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">pcbroch</div>
					<div class="post-datetime">
						9 Jul 2005, 23:18					</div>
				</div>
				<div class="post-content content">
					<p>Sweet, thanks so much.&nbsp; I got the rrdtool pkg and installed it.&nbsp; My program runs great with this version!</p><p><a href="http://www.kegit.com:88/temp05">http://www.kegit.com:88/temp05</a></p>											<p class="post-edited">(Last edited by <strong>pcbroch</strong> on 11 Jul 2005, 15:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p9684">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">raymond</div>
					<div class="post-datetime">
						18 Jul 2005, 23:26					</div>
				</div>
				<div class="post-content content">
					<p>I wrote a mail to the guy who offers rrdtool as ipk:</p><br /><p>I will do that after vacation.</p><p>greets<br />Christian</p><p>&gt; Hello,<br />&gt;<br />&gt; can you update rrdtool to 1.2?<br />&gt; Some people have problems to compile the current package:<br />&gt; (the last version you offer is <a href="http://openwrt.brainabuse.de">http://openwrt.brainabuse.de</a>/ <br />&gt; rrdcollect/ipk/rrdtool_1.0.49_mipsel.ipk )<br />&gt;<br />&gt; <a href="http://openwrt.org/forum/viewtopic.php?id=1961">http://openwrt.org/forum/viewtopic.php?id=1961</a><br />&gt;<br />&gt; thanks<br />&gt;<br />&gt; Raymond<br />&gt;</p>											<p class="post-edited">(Last edited by <strong>raymond</strong> on 18 Jul 2005, 23:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p9689">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">olli</div>
					<div class="post-datetime">
						19 Jul 2005, 01:31					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve packaged already rrdtool 1.2.10 and rrdcollect 0.2.3 for latest OpenWRT.</p><p>The only thing I need to fix is printing graphs with rrdcollect (rrdcgi). The rest is working.</p><p>When it&#039;s ready I&#039;ll give it to nbd, so he can put it into cvs.</p>											<p class="post-edited">(Last edited by <strong>olli_04</strong> on 19 Jul 2005, 01:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p9716">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">olli</div>
					<div class="post-datetime">
						19 Jul 2005, 12:05					</div>
				</div>
				<div class="post-content content">
					<p>Ok. <a href="http://openwrt.ertl-net.net/downloads/test/buildroot-packages.tar.bz2">Here is</a> the package directory for the OpenWRT SDK to build the rrdtool, rrdcollect and the other required packages.</p><p>Just extract the tarball in the package directory from the SDK and run make clean compile<br />For now it isn&#039;t watching for dependencies, but it compiles fine.</p><p>I&#039;ve problems to update /usr/bin/rrd.sh (for the new version) which creates /tmp/rrd.cgi . Is only required for rrdcollect.</p><p><a href="http://downloads.openwrt.org/docs/buildroot-documentation.html">Buildroot - Usage und documentation</a></p><p>You are welcome to help, to get this thing working.</p>											<p class="post-edited">(Last edited by <strong>olli_04</strong> on 19 Jul 2005, 12:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p10743">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">olli</div>
					<div class="post-datetime">
						14 Aug 2005, 11:45					</div>
				</div>
				<div class="post-content content">
					<p>rrdtool v1.2.11 and rrdcollect v0.2.3 are ported to OpenWRT and is waiting for testing.</p><p>You can find it in the CVS tree.</p><p>Feedback is welcome. Also, if you found a bug please report it. Thanks.</p>											<p class="post-edited">(Last edited by <strong>olli_04</strong> on 14 Aug 2005, 11:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p10753">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Nico</div>
					<div class="post-datetime">
						14 Aug 2005, 16:58					</div>
				</div>
				<div class="post-content content">
					<p>I made some changes when integrating to CVS :</p><p>* rrdtool now builds a shared librrd<br />* rrdcollect is linked against the previous library and uses it directly (no need for rrdtool anymore)</p><p>can someone confirm rrdcollect is still working as expected ?</p><p>Oliver, is it wise to do so ?</p><p>Thanks for your help</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p10801">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">olli</div>
					<div class="post-datetime">
						15 Aug 2005, 13:45					</div>
				</div>
				<div class="post-content content">
					<p>Nico, works almost fine now.</p><p>Found two things:</p><p>1) rrd.cgi is created in / instead of /var/lib/rrdcollect</p><p>2) In /etc/init.d/S98rrdcollect I found some small things, I make changes on lines 19, 20 and 21<br /></p><div class="codebox"><pre><code>root@OpenWrt:/# cat /etc/init.d/S98rrdcollect | awk &#039;{printf &quot;%3d %s\n&quot;, NR, $0}&#039;  
  1 #!/bin/sh
  2 
  3 BIN=rrdcollect
  4 DEFAULT=/etc/default/$BIN
  5 RUN_D=/var/run
  6 PID_F=$RUN_D/$BIN.pid
  7 LIB_D=/var/lib/rrdcollect
  8 CGI_S=$LIB_D/rrd.cgi
  9 IMG_D=$LIB_D/img
 10 RRD_D=$LIB_D/rrd
 11 RRD_F=$(find $RRD_D -name &quot;*.rrd&quot; 2&gt;/dev/null)
 12 [ -f $DEFAULT ] &amp;&amp; . $DEFAULT
 13 
 14 case $1 in
 15  start)
 16   mkdir -p $RUN_D
 17   mkdir -p $IMG_D
 18   mkdir -p $RRD_D
 19   mkdir -p $LIB_D
 20   [ -x &quot;$RRD_D&quot; ] &amp;&amp; /usr/bin/rrd.sh init
 21   [ -n &quot;$CGI_S&quot; ] &amp;&amp; /usr/bin/rrd.sh cgi
 22   $BIN $OPTIONS
 23   ;;
 24  stop)
 25   [ -f $PID_F ] &amp;&amp; kill $(cat $PID_F)
 26   ;;
 27  *)
 28   echo &quot;usage: $0 (start|stop)&quot;
 29   exit 1
 30 esac
 31 
 32 exit $?
root@OpenWrt:/#</code></pre></div><p>EDIT: Don&#039;t add line 19, I saw they where created before. Just change line 20 and 21.</p><p>Thanks for fixing.</p>											<p class="post-edited">(Last edited by <strong>olli_04</strong> on 15 Aug 2005, 13:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p10982">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">d1mag</div>
					<div class="post-datetime">
						18 Aug 2005, 16:52					</div>
				</div>
				<div class="post-content content">
					<p>I have made some new packages to OpenWRT, and then I found some minor problems with the<br />package fuse and rrdtool at the time.</p><p>I have updated the old package rrdtool 1.0.49, since it&#039;s really saving some flash space instead of using<br />rrdtool 1.2.11.&nbsp; Many smaller systems doesn&#039;t need cgilib, libgd, libpng, libart, freetype, etc as<br />dynamic libraries since they are only used by two appliications&nbsp; (rrdtool, rrdcgi)</p><p>rrdtool 1.2.11&nbsp; &nbsp;1321873 bytes&nbsp; (All binaries + all libraries)<br />rrdtool 1.0.49&nbsp; &nbsp;684919 bytes&nbsp; &nbsp;(All binaries + librrd.so)</p><p>The package (which I have called rrdtool1) looks very much like the rrdtool. Some dependencies are<br />added to avoid both versions defined at the same time. It&#039;s possible to use the package rrdcollect with<br />the 1.0.49 version as well.</p><p>Where should I send the patches&nbsp; (for fuse and rrdtool1)?</p><p>/Christian</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>