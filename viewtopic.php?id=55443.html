<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Barrier Breaker final breaks PPPoE on my WR1043ND</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p263450">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">adrinux</div>
					<div class="post-datetime">
						30 Jan 2015, 01:46					</div>
				</div>
				<div class="post-content content">
					<p>Today I belatedly realised BB final came out some time ago and decided to upgrade -- I was already running BB trunk from June 2014 so expected a smooth upgrade, but have thus far been unable to convince BB final to connect via PPPoE.</p><p>Each time it seems to connect for a few seconds and then disconnects. Here is a snippet from syslog:<br /></p><div class="codebox"><pre><code>Thu Jan 29 22:23:38 2015 daemon.notice netifd: Interface &#039;wan&#039; is enabled
Thu Jan 29 22:23:38 2015 daemon.notice netifd: Interface &#039;wan&#039; is setting up now
Thu Jan 29 22:23:38 2015 daemon.notice netifd: VLAN &#039;eth0.2&#039; link is down
Thu Jan 29 22:23:38 2015 daemon.notice netifd: Interface &#039;wan&#039; has link connectivity loss
Thu Jan 29 22:23:38 2015 daemon.notice netifd: VLAN &#039;eth0.2&#039; link is up
Thu Jan 29 22:23:38 2015 daemon.notice netifd: Interface &#039;wan&#039; has link connectivity 
Thu Jan 29 22:23:38 2015 daemon.info pppd[2324]: Plugin rp-pppoe.so loaded.
Thu Jan 29 22:23:38 2015 daemon.info pppd[2324]: RP-PPPoE plugin version 3.8p compiled against pppd 2.4.7
Thu Jan 29 22:23:38 2015 daemon.notice pppd[2324]: pppd 2.4.7 started by root, uid 0
Thu Jan 29 22:23:38 2015 daemon.info pppd[2324]: PPP session is 6
Thu Jan 29 22:23:38 2015 daemon.warn pppd[2324]: Connected to 00:50:7f:39:85:75 via interface eth0.2
Thu Jan 29 22:23:38 2015 daemon.info pppd[2324]: Using interface pppoe-wan
Thu Jan 29 22:23:38 2015 daemon.notice pppd[2324]: Connect: pppoe-wan &lt;--&gt; eth0.2
Thu Jan 29 22:24:03 2015 daemon.info pppd[2324]: CHAP authentication succeeded
Thu Jan 29 22:24:03 2015 daemon.notice pppd[2324]: CHAP authentication succeeded
Thu Jan 29 22:24:03 2015 daemon.notice pppd[2324]: peer from calling number 00:50:7F:39:85:75 authorized
Thu Jan 29 22:24:03 2015 daemon.notice pppd[2324]: local  LL address fe80::81a8:08e4:719f:3d66
Thu Jan 29 22:24:03 2015 daemon.notice pppd[2324]: remote LL address fe80::523d:e5ff:feb7:e718
Thu Jan 29 22:24:03 2015 daemon.notice pppd[2324]: local  IP address 93.89.134.219
Thu Jan 29 22:24:03 2015 daemon.notice pppd[2324]: remote IP address 212.69.63.98
Thu Jan 29 22:24:03 2015 daemon.notice pppd[2324]: primary   DNS address 212.69.36.13
Thu Jan 29 22:24:03 2015 daemon.notice pppd[2324]: secondary DNS address 212.69.40.13
Thu Jan 29 22:24:03 2015 daemon.notice netifd: Network device &#039;pppoe-wan&#039; link is up
Thu Jan 29 22:24:03 2015 daemon.notice netifd: Interface &#039;wan6&#039; is enabled
Thu Jan 29 22:24:03 2015 daemon.notice netifd: Network alias &#039;pppoe-wan&#039; link is up
Thu Jan 29 22:24:03 2015 daemon.notice netifd: Interface &#039;wan6&#039; has link connectivity 
Thu Jan 29 22:24:03 2015 daemon.notice netifd: Interface &#039;wan6&#039; is setting up now
Thu Jan 29 22:24:03 2015 daemon.notice netifd: Interface &#039;wan&#039; is now up
Thu Jan 29 22:24:03 2015 daemon.notice odhcp6c[2370]: (re)starting transaction on pppoe-wan
Thu Jan 29 22:24:03 2015 daemon.notice odhcp6c[2370]: Starting SOLICIT transaction (timeout 4294967295s, max rc 0)
Thu Jan 29 22:24:03 2015 user.notice firewall: Reloading firewall due to ifup of wan (pppoe-wan)
Thu Jan 29 22:24:08 2015 daemon.notice odhcp6c[2370]: Got a valid reply after 5035ms
Thu Jan 29 22:24:08 2015 daemon.info pppd[2324]: LCP terminated by peer
Thu Jan 29 22:24:08 2015 daemon.info pppd[2324]: Connect time 0.1 minutes.
Thu Jan 29 22:24:08 2015 daemon.info pppd[2324]: Sent 895 bytes, received 1096 bytes.
Thu Jan 29 22:24:08 2015 daemon.notice odhcp6c[2370]: Starting SOLICIT transaction (timeout 4294967295s, max rc 0)
Thu Jan 29 22:24:08 2015 daemon.info dnsmasq[1037]: reading /tmp/resolv.conf.auto
Thu Jan 29 22:24:08 2015 daemon.info dnsmasq[1037]: using local addresses only for domain lan
Thu Jan 29 22:24:08 2015 daemon.info dnsmasq[1037]: using nameserver 212.69.36.13#53
Thu Jan 29 22:24:08 2015 daemon.info dnsmasq[1037]: using nameserver 212.69.40.13#53
Thu Jan 29 22:24:08 2015 daemon.notice odhcp6c[2370]: carrier =&gt; 0 event on pppoe-wan
Thu Jan 29 22:24:08 2015 daemon.notice odhcp6c[2370]: (re)starting transaction on pppoe-wan
Thu Jan 29 22:24:08 2015 daemon.notice netifd: Network device &#039;pppoe-wan&#039; link is down
Thu Jan 29 22:24:08 2015 daemon.notice netifd: Network alias &#039;pppoe-wan&#039; link is down
Thu Jan 29 22:24:08 2015 daemon.notice odhcp6c[2370]: Starting SOLICIT transaction (timeout 4294967295s, max rc 0)
Thu Jan 29 22:24:08 2015 daemon.notice netifd: Interface &#039;wan6&#039; has link connectivity loss
Thu Jan 29 22:24:08 2015 daemon.notice netifd: Interface &#039;wan&#039; has lost the connection
Thu Jan 29 22:24:09 2015 daemon.notice netifd: Interface &#039;wan6&#039; is now down
Thu Jan 29 22:24:09 2015 daemon.notice netifd: Interface &#039;wan6&#039; is disabled
Thu Jan 29 22:24:11 2015 daemon.notice pppd[2324]: Connection terminated.
Thu Jan 29 22:24:11 2015 daemon.info pppd[2324]: Connect time 0.1 minutes.
Thu Jan 29 22:24:11 2015 daemon.info pppd[2324]: Sent 1060 bytes, received 1096 bytes.
Thu Jan 29 22:24:11 2015 daemon.notice pppd[2324]: Modem hangup</code></pre></div><p>Is it dying because of the Firewall reload it does? How to work around that?</p><p>FYI<br />- The hardware setup is tplink wr1043nd &gt; Draytek Vigor 120 adsl modem &gt; adsl connection<br />- I can connection directly to the modem and everything works fine, so issue is isolated to the router.<br />- I can downgrade back to the BB trunk version I was using before and am able to use PPPoE (doing that to post this)</p><p>So it seems somewhere between BB trunk r41391 and BB final r42625 something seems to have gone awry. Haven yet looked at the 1200+ commits to see what...</p><p>From looking at the [wiki](<a href="http://wiki.openwrt.org/toh/tp-link/tl-wr1043nd">http://wiki.openwrt.org/toh/tp-link/tl-wr1043nd</a>) I thought the issue might be the ¨wan port disable bug¨ described there. My firmware matches the possibly vulnerable version but I used AA and then a couple of versions of BB trunk without issue. So not surprisingly flashing back to the original firmware and then to the German firmware went well but still didn&#039;t fix my PPPoE&nbsp; issue with BB final.</p><p>Anyone got any suggestions?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263469">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						30 Jan 2015, 09:01					</div>
				</div>
				<div class="post-content content">
					<p>Add a &quot;option &#039;pppd_options&#039; &#039;debug&#039;&quot; line in your &quot;/etc/config/network&quot; file, below the &quot;config &#039;interface&#039; &#039;wan&#039;&quot; section, and post the logs here.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263497">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">adrinux</div>
					<div class="post-datetime">
						30 Jan 2015, 12:55					</div>
				</div>
				<div class="post-content content">
					<p>Reverted back to my original TP-Link firmware and reflashed with BB final so everything is fresh and unadulterated bar setting up passwd and Wan.</p><p>With debug option added:<br /></p><div class="codebox"><pre><code>Fri Jan 30 10:37:56 2015 daemon.notice netifd: Interface &#039;wan&#039; is enabled
Fri Jan 30 10:37:56 2015 daemon.notice netifd: VLAN &#039;eth0.2&#039; link is up
Fri Jan 30 10:37:56 2015 daemon.notice netifd: Interface &#039;wan&#039; has link connectivity 
Fri Jan 30 10:37:56 2015 daemon.notice netifd: Interface &#039;wan&#039; is setting up now
Fri Jan 30 10:37:57 2015 daemon.info pppd[2514]: Plugin rp-pppoe.so loaded.
Fri Jan 30 10:37:57 2015 daemon.info pppd[2514]: RP-PPPoE plugin version 3.8p compiled against pppd 2.4.7
Fri Jan 30 10:37:57 2015 daemon.notice pppd[2514]: pppd 2.4.7 started by root, uid 0
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: Send PPPOE Discovery V1T1 PADI session 0x0 length 12
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]:  dst ff:ff:ff:ff:ff:ff  src f8:d1:11:2f:46:b4
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]:  [service-name] [host-uniq  00 00 09 d2]
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: Recv PPPOE Discovery V1T1 PADO session 0x0 length 56
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]:  dst f8:d1:11:2f:46:b4  src 00:50:7f:39:85:75
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]:  [service-name] [AC-name Vigor2000 PPPoE] [host-uniq  00 00 09 d2] [AC-cookie  41 43 20 43 6f 6f 6b 69 65 20 66 6f 72 20 54 65 73 74 69 6e 67]
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: Send PPPOE Discovery V1T1 PADR session 0x0 length 37
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]:  dst 00:50:7f:39:85:75  src f8:d1:11:2f:46:b4
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]:  [service-name] [host-uniq  00 00 09 d2] [AC-cookie  41 43 20 43 6f 6f 6b 69 65 20 66 6f 72 20 54 65 73 74 69 6e 67]
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: Recv PPPOE Discovery V1T1 PADS session 0x6 length 37
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]:  dst f8:d1:11:2f:46:b4  src 00:50:7f:39:85:75
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]:  [service-name] [host-uniq  00 00 09 d2] [AC-cookie  41 43 20 43 6f 6f 6b 69 65 20 66 6f 72 20 54 65 73 74 69 6e 67]
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: PADS: Service-Name: &#039;&#039;
Fri Jan 30 10:37:57 2015 daemon.info pppd[2514]: PPP session is 6
Fri Jan 30 10:37:57 2015 daemon.warn pppd[2514]: Connected to 00:50:7f:39:85:75 via interface eth0.2
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: using channel 7
Fri Jan 30 10:37:57 2015 daemon.info pppd[2514]: Using interface pppoe-wan
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: rcvd [LCP ConfReq id=0xb9 &lt;mru 1492&gt; &lt;auth chap MD5&gt; &lt;magic 0x71df93db&gt;]
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: sent [LCP ConfAck id=0xb9 &lt;mru 1492&gt; &lt;auth chap MD5&gt; &lt;magic 0x71df93db&gt;]
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: rcvd [LCP ConfAck id=0x1 &lt;mru 1492&gt; &lt;magic 0x1f63e870&gt;]
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: sent [LCP EchoReq id=0x0 magic=0x1f63e870]
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: rcvd [CHAP Challenge id=0x1 &lt;f9edd3c398edc1a72e477e4eef8ab682&gt;, name = &quot;bras-red2.fk&quot;]
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: sent [CHAP Response id=0x1 &lt;33d94171b6a29bc32c50702f4ef8db95&gt;, name = &quot;REDACTEDLOGIN&quot;]
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: rcvd [LCP EchoRep id=0x0 magic=0x71df93db]
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: rcvd [LCP ConfReq id=0x1 &lt;auth chap MD5&gt; &lt;magic 0x54d605f8&gt; &lt;mrru 1524&gt; &lt;endpoint 13 0b 01 49 44 4e 65 74 4c 4e 53&gt;]
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: sent [LCP ConfReq id=0x2 &lt;mru 1492&gt; &lt;magic 0xcc8203d7&gt;]
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: sent [LCP ConfRej id=0x1 &lt;mrru 1524&gt;]
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: rcvd [LCP ConfNak id=0x2 &lt;mru 1500&gt;]
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: sent [LCP ConfReq id=0x3 &lt;magic 0xcc8203d7&gt;]
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: rcvd [LCP ConfReq id=0x2 &lt;auth chap MD5&gt; &lt;magic 0x54d605f8&gt; &lt;endpoint 13 0b 01 49 44 4e 65 74 4c 4e 53&gt;]
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: sent [LCP ConfAck id=0x2 &lt;auth chap MD5&gt; &lt;magic 0x54d605f8&gt; &lt;endpoint 13 0b 01 49 44 4e 65 74 4c 4e 53&gt;]
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: rcvd [LCP ConfAck id=0x3 &lt;magic 0xcc8203d7&gt;]
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: sent [LCP EchoReq id=0x0 magic=0xcc8203d7]
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: rcvd [LCP EchoRep id=0x0 magic=0x54d605f8] 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 20 20 20 20
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: rcvd [CHAP Challenge id=0x2 &lt;736ce31fd0afbf308e7e26a34ff839da&gt;, name = &quot;IDNetLNS&quot;]
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: sent [CHAP Response id=0x2 &lt;e6e816ab35c112f96ec9e15120a3a8ea&gt;, name = &quot;REDACTEDLOGIN&quot;]
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: rcvd [CHAP Success id=0x2 &quot;&quot;]
Fri Jan 30 10:37:57 2015 daemon.info pppd[2514]: CHAP authentication succeeded
Fri Jan 30 10:37:57 2015 daemon.notice pppd[2514]: CHAP authentication succeeded
Fri Jan 30 10:37:57 2015 daemon.notice pppd[2514]: peer from calling number 00:50:7F:39:85:75 authorized
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: sent [IPCP ConfReq id=0x1 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 0.0.0.0&gt; &lt;ms-dns2 0.0.0.0&gt;]
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: sent [IPV6CP ConfReq id=0x1 &lt;addr fe80::1946:90e3:ef62:3ef9&gt;]
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: rcvd [IPCP ConfReq id=0x1 &lt;addr 212.69.63.98&gt;]
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: sent [IPCP ConfAck id=0x1 &lt;addr 212.69.63.98&gt;]
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: rcvd [IPV6CP ConfReq id=0x1 &lt;addr fe80::523d:e5ff:feb7:e718&gt;]
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: sent [IPV6CP ConfAck id=0x1 &lt;addr fe80::523d:e5ff:feb7:e718&gt;]
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: rcvd [IPCP ConfNak id=0x1 &lt;addr 93.89.134.219&gt; &lt;ms-dns1 212.69.36.13&gt; &lt;ms-dns2 212.69.40.13&gt;]
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: sent [IPCP ConfReq id=0x2 &lt;addr 93.89.134.219&gt; &lt;ms-dns1 212.69.36.13&gt; &lt;ms-dns2 212.69.40.13&gt;]
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: rcvd [IPV6CP ConfAck id=0x1 &lt;addr fe80::1946:90e3:ef62:3ef9&gt;]
Fri Jan 30 10:37:57 2015 daemon.notice pppd[2514]: local  LL address fe80::1946:90e3:ef62:3ef9
Fri Jan 30 10:37:57 2015 daemon.notice pppd[2514]: remote LL address fe80::523d:e5ff:feb7:e718
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: Script /lib/netifd/ppp-up started (pid 2539)
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: rcvd [IPCP ConfAck id=0x2 &lt;addr 93.89.134.219&gt; &lt;ms-dns1 212.69.36.13&gt; &lt;ms-dns2 212.69.40.13&gt;]
Fri Jan 30 10:37:57 2015 daemon.notice pppd[2514]: local  IP address 93.89.134.219
Fri Jan 30 10:37:57 2015 daemon.notice pppd[2514]: remote IP address 212.69.63.98
Fri Jan 30 10:37:57 2015 daemon.notice pppd[2514]: primary   DNS address 212.69.36.13
Fri Jan 30 10:37:57 2015 daemon.notice pppd[2514]: secondary DNS address 212.69.40.13
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: Script /lib/netifd/ppp-up started (pid 2540)
Fri Jan 30 10:37:57 2015 daemon.notice netifd: Network device &#039;pppoe-wan&#039; link is up
Fri Jan 30 10:37:57 2015 daemon.notice netifd: Interface &#039;wan6&#039; is enabled
Fri Jan 30 10:37:57 2015 daemon.notice netifd: Network alias &#039;pppoe-wan&#039; link is up
Fri Jan 30 10:37:57 2015 daemon.notice netifd: Interface &#039;wan6&#039; has link connectivity 
Fri Jan 30 10:37:57 2015 daemon.notice netifd: Interface &#039;wan6&#039; is setting up now
Fri Jan 30 10:37:57 2015 daemon.notice netifd: Interface &#039;wan&#039; is now up
Fri Jan 30 10:37:57 2015 daemon.debug pppd[2514]: Script /lib/netifd/ppp-up finished (pid 2539), status = 0x1
Fri Jan 30 10:37:58 2015 daemon.debug pppd[2514]: Script /lib/netifd/ppp-up finished (pid 2540), status = 0x1
Fri Jan 30 10:37:58 2015 daemon.notice odhcp6c[2567]: (re)starting transaction on pppoe-wan
Fri Jan 30 10:37:58 2015 daemon.notice odhcp6c[2567]: Starting SOLICIT transaction (timeout 4294967295s, max rc 0)
Fri Jan 30 10:37:58 2015 user.notice firewall: Reloading firewall due to ifup of wan (pppoe-wan)
Fri Jan 30 10:38:03 2015 daemon.debug pppd[2514]: rcvd [LCP TermReq id=0x3]
Fri Jan 30 10:38:03 2015 daemon.info pppd[2514]: LCP terminated by peer
Fri Jan 30 10:38:03 2015 daemon.info pppd[2514]: Connect time 0.1 minutes.
Fri Jan 30 10:38:03 2015 daemon.info pppd[2514]: Sent 1023 bytes, received 804 bytes.
Fri Jan 30 10:38:03 2015 daemon.notice odhcp6c[2567]: Got a valid reply after 5040ms
Fri Jan 30 10:38:03 2015 daemon.info dnsmasq[1654]: reading /tmp/resolv.conf.auto
Fri Jan 30 10:38:03 2015 daemon.info dnsmasq[1654]: using local addresses only for domain lan
Fri Jan 30 10:38:03 2015 daemon.info dnsmasq[1654]: using nameserver 212.69.36.13#53
Fri Jan 30 10:38:03 2015 daemon.info dnsmasq[1654]: using nameserver 212.69.40.13#53
Fri Jan 30 10:38:03 2015 daemon.notice odhcp6c[2567]: Starting SOLICIT transaction (timeout 4294967295s, max rc 0)
Fri Jan 30 10:38:03 2015 daemon.debug pppd[2514]: Script /lib/netifd/ppp-down started (pid 2620)
Fri Jan 30 10:38:03 2015 daemon.notice odhcp6c[2567]: carrier =&gt; 0 event on pppoe-wan
Fri Jan 30 10:38:03 2015 daemon.notice odhcp6c[2567]: (re)starting transaction on pppoe-wan
Fri Jan 30 10:38:03 2015 daemon.notice netifd: Network device &#039;pppoe-wan&#039; link is down
Fri Jan 30 10:38:03 2015 daemon.notice netifd: Network alias &#039;pppoe-wan&#039; link is down
Fri Jan 30 10:38:03 2015 daemon.notice netifd: Interface &#039;wan6&#039; has link connectivity loss
Fri Jan 30 10:38:03 2015 daemon.notice odhcp6c[2567]: Starting SOLICIT transaction (timeout 4294967295s, max rc 0)
Fri Jan 30 10:38:03 2015 daemon.debug pppd[2514]: Script /lib/netifd/ppp-down started (pid 2621)
Fri Jan 30 10:38:03 2015 daemon.debug pppd[2514]: sent [LCP TermAck id=0x3]
Fri Jan 30 10:38:03 2015 daemon.notice netifd: Interface &#039;wan&#039; has lost the connection
Fri Jan 30 10:38:03 2015 daemon.debug pppd[2514]: Script /lib/netifd/ppp-down finished (pid 2620), status = 0x1
Fri Jan 30 10:38:03 2015 daemon.debug pppd[2514]: Script /lib/netifd/ppp-down finished (pid 2621), status = 0x1
Fri Jan 30 10:38:03 2015 daemon.notice netifd: Interface &#039;wan6&#039; is now down
Fri Jan 30 10:38:03 2015 daemon.notice netifd: Interface &#039;wan6&#039; is disabled
Fri Jan 30 10:38:05 2015 daemon.debug pppd[2514]: rcvd [LCP TermReq id=0x1]
Fri Jan 30 10:38:05 2015 daemon.debug pppd[2514]: sent [LCP TermAck id=0x1]
Fri Jan 30 10:38:06 2015 daemon.notice pppd[2514]: Connection terminated.
Fri Jan 30 10:38:06 2015 daemon.info pppd[2514]: Connect time 0.1 minutes.
Fri Jan 30 10:38:06 2015 daemon.info pppd[2514]: Sent 1188 bytes, received 804 bytes.
Fri Jan 30 10:38:06 2015 daemon.notice pppd[2514]: Modem hangup
Fri Jan 30 10:38:11 2015 daemon.warn dnsmasq[1654]: no servers found in /tmp/resolv.conf.auto, will retry</code></pre></div><p>Appears to run into problems with odhcp6c? Is it the automated IP6 config causing issues? My ISP does provide IP6 details along with IP4...</p>											<p class="post-edited">(Last edited by <strong>adrinux</strong> on 30 Jan 2015, 12:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263503">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						30 Jan 2015, 13:24					</div>
				</div>
				<div class="post-content content">
					<p>I could not see anything relevant in that log... I would try this:</p><p>* Disable IPv6 on the WAN connection.<br />* Add &quot;option &#039;pppd_options&#039; &#039;debug noipdefault&#039;&quot; to &quot;/etc/config/network&quot;.<br />* Post your firewall settings here.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263517">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">adrinux</div>
					<div class="post-datetime">
						30 Jan 2015, 15:05					</div>
				</div>
				<div class="post-content content">
					<p>I unchecked ¨Use builtin IPv6-management¨ on the Wan interface advance settings in luci and also stopped the WAN6 interface. I know have a working connection over the WAN interface.</p><p>When you say ¨add¨ debug noipdefault, do you mean add an additional option line with that or just alter the debug line I already added? I altered the existing debug line, but since the connection completes ok with IPv6 off that&#039;s moot. About to try turning it back on again and see whats logged after grabbing some food.</p><p>Firewall config should be default, removed the example sections, seems to have relevant IPv6 rules:<br /></p><div class="codebox"><pre><code>config defaults
    option syn_flood    1
    option input        ACCEPT
    option output        ACCEPT
    option forward        REJECT
# Uncomment this line to disable ipv6 rules
#    option disable_ipv6    1

config zone
    option name        lan
    list   network        &#039;lan&#039;
    option input        ACCEPT
    option output        ACCEPT
    option forward        ACCEPT

config zone
    option name        wan
    list   network        &#039;wan&#039;
    list   network        &#039;wan6&#039;
    option input        REJECT
    option output        ACCEPT
    option forward        REJECT
    option masq        1
    option mtu_fix        1

config forwarding
    option src        lan
    option dest        wan

# We need to accept udp packets on port 68,
# see https://dev.openwrt.org/ticket/4108
config rule
    option name        Allow-DHCP-Renew
    option src        wan
    option proto        udp
    option dest_port    68
    option target        ACCEPT
    option family        ipv4

# Allow IPv4 ping
config rule
    option name        Allow-Ping
    option src        wan
    option proto        icmp
    option icmp_type    echo-request
    option family        ipv4
    option target        ACCEPT

# Allow DHCPv6 replies
# see https://dev.openwrt.org/ticket/10381
config rule
    option name        Allow-DHCPv6
    option src        wan
    option proto        udp
    option src_ip        fe80::/10
    option src_port        547
    option dest_ip        fe80::/10
    option dest_port    546
    option family        ipv6
    option target        ACCEPT

# Allow essential incoming IPv6 ICMP traffic
config rule
    option name        Allow-ICMPv6-Input
    option src        wan
    option proto    icmp
    list icmp_type        echo-request
    list icmp_type        echo-reply
    list icmp_type        destination-unreachable
    list icmp_type        packet-too-big
    list icmp_type        time-exceeded
    list icmp_type        bad-header
    list icmp_type        unknown-header-type
    list icmp_type        router-solicitation
    list icmp_type        neighbour-solicitation
    list icmp_type        router-advertisement
    list icmp_type        neighbour-advertisement
    option limit        1000/sec
    option family        ipv6
    option target        ACCEPT

# Allow essential forwarded IPv6 ICMP traffic
config rule
    option name        Allow-ICMPv6-Forward
    option src        wan
    option dest        *
    option proto        icmp
    list icmp_type        echo-request
    list icmp_type        echo-reply
    list icmp_type        destination-unreachable
    list icmp_type        packet-too-big
    list icmp_type        time-exceeded
    list icmp_type        bad-header
    list icmp_type        unknown-header-type
    option limit        1000/sec
    option family        ipv6
    option target        ACCEPT

# include a file with users custom iptables rules
config include
    option path /etc/firewall.user</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263527">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">adrinux</div>
					<div class="post-datetime">
						30 Jan 2015, 17:00					</div>
				</div>
				<div class="post-content content">
					<p>I enabled wan6 interface and the connection went down right away, log follows. I cant see much different from before. <br /></p><div class="codebox"><pre><code>Fri Jan 30 14:58:55 2015 daemon.notice netifd: Interface &#039;wan6&#039; is setting up now
Fri Jan 30 14:58:55 2015 daemon.notice odhcp6c[18761]: (re)starting transaction on pppoe-wan
Fri Jan 30 14:58:55 2015 daemon.notice odhcp6c[18761]: Starting SOLICIT transaction (timeout 4294967295s, max rc 0)
Fri Jan 30 14:59:00 2015 daemon.notice odhcp6c[18761]: Got a valid reply after 5036ms
Fri Jan 30 14:59:00 2015 daemon.debug pppd[5643]: rcvd [LCP TermReq id=0x3]
Fri Jan 30 14:59:00 2015 daemon.info pppd[5643]: LCP terminated by peer
Fri Jan 30 14:59:00 2015 daemon.info pppd[5643]: Connect time 138.2 minutes.
Fri Jan 30 14:59:00 2015 daemon.info pppd[5643]: Sent 7059767 bytes, received 58459158 bytes.
Fri Jan 30 14:59:00 2015 daemon.notice odhcp6c[18761]: Starting SOLICIT transaction (timeout 4294967295s, max rc 0)
Fri Jan 30 14:59:00 2015 daemon.debug pppd[5643]: Script /lib/netifd/ppp-down started (pid 18772)
Fri Jan 30 14:59:00 2015 daemon.notice odhcp6c[18761]: carrier =&gt; 0 event on pppoe-wan
Fri Jan 30 14:59:00 2015 daemon.notice odhcp6c[18761]: (re)starting transaction on pppoe-wan
Fri Jan 30 14:59:00 2015 daemon.notice netifd: Network device &#039;pppoe-wan&#039; link is down
Fri Jan 30 14:59:00 2015 daemon.notice netifd: Network alias &#039;pppoe-wan&#039; link is down
Fri Jan 30 14:59:00 2015 daemon.notice netifd: Interface &#039;wan6&#039; has link connectivity loss
Fri Jan 30 14:59:00 2015 daemon.notice odhcp6c[18761]: Starting SOLICIT transaction (timeout 4294967295s, max rc 0)
Fri Jan 30 14:59:00 2015 daemon.debug pppd[5643]: Script /lib/netifd/ppp-down started (pid 18773)
Fri Jan 30 14:59:00 2015 daemon.debug pppd[5643]: sent [LCP TermAck id=0x3]
Fri Jan 30 14:59:00 2015 daemon.notice netifd: Interface &#039;wan&#039; has lost the connection
Fri Jan 30 14:59:00 2015 daemon.debug pppd[5643]: Script /lib/netifd/ppp-down finished (pid 18772), status = 0x1
Fri Jan 30 14:59:00 2015 daemon.debug pppd[5643]: Script /lib/netifd/ppp-down finished (pid 18773), status = 0x1
Fri Jan 30 14:59:00 2015 daemon.notice netifd: Interface &#039;wan6&#039; is now down
Fri Jan 30 14:59:00 2015 daemon.notice netifd: Interface &#039;wan6&#039; is disabled
Fri Jan 30 14:59:02 2015 daemon.debug pppd[5643]: rcvd [LCP TermReq id=0x1]
Fri Jan 30 14:59:02 2015 daemon.debug pppd[5643]: sent [LCP TermAck id=0x1]
Fri Jan 30 14:59:03 2015 daemon.notice pppd[5643]: Connection terminated.
Fri Jan 30 14:59:03 2015 daemon.info pppd[5643]: Connect time 138.2 minutes.
Fri Jan 30 14:59:03 2015 daemon.info pppd[5643]: Sent 7059932 bytes, received 58459158 bytes.
Fri Jan 30 14:59:03 2015 daemon.notice pppd[5643]: Modem hangup
Fri Jan 30 14:59:31 2015 daemon.warn dnsmasq[5222]: no servers found in /tmp/resolv.conf.auto, will retry
Fri Jan 30 14:59:33 2015 daemon.debug pppd[5643]: Send PPPOE Discovery V1T1 PADI session 0x0 length 12
Fri Jan 30 14:59:33 2015 daemon.debug pppd[5643]:  dst ff:ff:ff:ff:ff:ff  src f8:d1:11:2f:46:b4
Fri Jan 30 14:59:33 2015 daemon.debug pppd[5643]:  [service-name] [host-uniq  00 00 16 0b]
Fri Jan 30 14:59:33 2015 daemon.debug pppd[5643]: Recv PPPOE Discovery V1T1 PADO session 0x0 length 56
Fri Jan 30 14:59:33 2015 daemon.debug pppd[5643]:  dst f8:d1:11:2f:46:b4  src 00:50:7f:39:85:75
Fri Jan 30 14:59:33 2015 daemon.debug pppd[5643]:  [service-name] [AC-name Vigor2000 PPPoE] [host-uniq  00 00 16 0b] [AC-cookie  41 43 20 43 6f 6f 6b 69 65 20 66 6f 72 20 54 65 73 74 69 6e 67]
Fri Jan 30 14:59:33 2015 daemon.debug pppd[5643]: Send PPPOE Discovery V1T1 PADR session 0x0 length 37
Fri Jan 30 14:59:33 2015 daemon.debug pppd[5643]:  dst 00:50:7f:39:85:75  src f8:d1:11:2f:46:b4
Fri Jan 30 14:59:33 2015 daemon.debug pppd[5643]:  [service-name] [host-uniq  00 00 16 0b] [AC-cookie  41 43 20 43 6f 6f 6b 69 65 20 66 6f 72 20 54 65 73 74 69 6e 67]
Fri Jan 30 14:59:33 2015 daemon.debug pppd[5643]: Recv PPPOE Discovery V1T1 PADS session 0x6 length 37
Fri Jan 30 14:59:33 2015 daemon.debug pppd[5643]:  dst f8:d1:11:2f:46:b4  src 00:50:7f:39:85:75
Fri Jan 30 14:59:33 2015 daemon.debug pppd[5643]:  [service-name] [host-uniq  00 00 16 0b] [AC-cookie  41 43 20 43 6f 6f 6b 69 65 20 66 6f 72 20 54 65 73 74 69 6e 67]
Fri Jan 30 14:59:33 2015 daemon.debug pppd[5643]: PADS: Service-Name: &#039;&#039;
Fri Jan 30 14:59:33 2015 daemon.info pppd[5643]: PPP session is 6
Fri Jan 30 14:59:33 2015 daemon.warn pppd[5643]: Connected to 00:50:7f:39:85:75 via interface eth0.2
Fri Jan 30 14:59:33 2015 daemon.debug pppd[5643]: using channel 26
Fri Jan 30 14:59:33 2015 daemon.info pppd[5643]: Using interface pppoe-wan
Fri Jan 30 14:59:33 2015 daemon.notice pppd[5643]: Connect: pppoe-wan &lt;--&gt; eth0.2
Fri Jan 30 14:59:33 2015 daemon.debug pppd[5643]: sent [LCP ConfReq id=0x4 &lt;mru 1492&gt; &lt;magic 0x45b3f50&gt;]
Fri Jan 30 14:59:33 2015 daemon.debug pppd[5643]: rcvd [LCP ConfReq id=0xb0 &lt;mru 1492&gt; &lt;auth chap MD5&gt; &lt;magic 0x46ecbcf&gt;]
Fri Jan 30 14:59:33 2015 daemon.debug pppd[5643]: sent [LCP ConfAck id=0xb0 &lt;mru 1492&gt; &lt;auth chap MD5&gt; &lt;magic 0x46ecbcf&gt;]
Fri Jan 30 14:59:33 2015 daemon.debug pppd[5643]: rcvd [LCP ConfAck id=0x4 &lt;mru 1492&gt; &lt;magic 0x45b3f50&gt;]
Fri Jan 30 14:59:33 2015 daemon.debug pppd[5643]: sent [LCP EchoReq id=0x0 magic=0x45b3f50]
Fri Jan 30 14:59:33 2015 daemon.debug pppd[5643]: rcvd [CHAP Challenge id=0x1 &lt;5fc036269101f3c50f07c278975823ca&gt;, name = &quot;bras-red2.fk&quot;]
Fri Jan 30 14:59:33 2015 daemon.debug pppd[5643]: sent [CHAP Response id=0x1 &lt;3fbbf5c7c7ec5d8283af7cf875db55f7&gt;, name = &quot;redacted&quot;]
Fri Jan 30 14:59:33 2015 daemon.debug pppd[5643]: rcvd [LCP EchoRep id=0x0 magic=0x46ecbcf]
Fri Jan 30 14:59:34 2015 daemon.debug pppd[5643]: rcvd [LCP ConfReq id=0x1 &lt;auth chap MD5&gt; &lt;magic 0x55c5b410&gt; &lt;mrru 1524&gt; &lt;endpoint 13 0b 01 49 44 4e 65 74 4c 4e 53&gt;]
Fri Jan 30 14:59:34 2015 daemon.debug pppd[5643]: sent [LCP ConfReq id=0x5 &lt;mru 1492&gt; &lt;magic 0x9c2ca1ec&gt;]
Fri Jan 30 14:59:34 2015 daemon.debug pppd[5643]: sent [LCP ConfRej id=0x1 &lt;mrru 1524&gt;]
Fri Jan 30 14:59:34 2015 daemon.debug pppd[5643]: rcvd [LCP ConfNak id=0x5 &lt;mru 1500&gt;]
Fri Jan 30 14:59:34 2015 daemon.debug pppd[5643]: sent [LCP ConfReq id=0x6 &lt;magic 0x9c2ca1ec&gt;]
Fri Jan 30 14:59:34 2015 daemon.debug pppd[5643]: rcvd [LCP ConfReq id=0x2 &lt;auth chap MD5&gt; &lt;magic 0x55c5b410&gt; &lt;endpoint 13 0b 01 49 44 4e 65 74 4c 4e 53&gt;]
Fri Jan 30 14:59:34 2015 daemon.debug pppd[5643]: sent [LCP ConfAck id=0x2 &lt;auth chap MD5&gt; &lt;magic 0x55c5b410&gt; &lt;endpoint 13 0b 01 49 44 4e 65 74 4c 4e 53&gt;]
Fri Jan 30 14:59:34 2015 daemon.debug pppd[5643]: rcvd [LCP ConfAck id=0x6 &lt;magic 0x9c2ca1ec&gt;]
Fri Jan 30 14:59:34 2015 daemon.debug pppd[5643]: sent [LCP EchoReq id=0x0 magic=0x9c2ca1ec]
Fri Jan 30 14:59:34 2015 daemon.debug pppd[5643]: rcvd [LCP EchoRep id=0x0 magic=0x55c5b410] 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 20 20 20 20
Fri Jan 30 14:59:34 2015 daemon.debug pppd[5643]: rcvd [CHAP Challenge id=0x2 &lt;643facae03c7f87b8e7e26a38bc33120&gt;, name = &quot;IDNetLNS&quot;]
Fri Jan 30 14:59:34 2015 daemon.debug pppd[5643]: sent [CHAP Response id=0x2 &lt;9cef7eb3c7543ea15c8b5cdf64a81eff&gt;, name = &quot;redacted&quot;]
Fri Jan 30 14:59:34 2015 daemon.debug pppd[5643]: rcvd [CHAP Success id=0x2 &quot;&quot;]
Fri Jan 30 14:59:34 2015 daemon.info pppd[5643]: CHAP authentication succeeded
Fri Jan 30 14:59:34 2015 daemon.notice pppd[5643]: CHAP authentication succeeded
Fri Jan 30 14:59:34 2015 daemon.notice pppd[5643]: peer from calling number 00:50:7F:39:85:75 authorized
Fri Jan 30 14:59:34 2015 daemon.debug pppd[5643]: sent [IPCP ConfReq id=0x3 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 0.0.0.0&gt; &lt;ms-dns2 0.0.0.0&gt;]
Fri Jan 30 14:59:34 2015 daemon.debug pppd[5643]: sent [IPV6CP ConfReq id=0x2 &lt;addr fe80::2cab:0e13:a320:7b5f&gt;]
Fri Jan 30 14:59:34 2015 daemon.debug pppd[5643]: rcvd [IPCP ConfReq id=0x1 &lt;addr 212.69.63.98&gt;]
Fri Jan 30 14:59:34 2015 daemon.debug pppd[5643]: sent [IPCP ConfAck id=0x1 &lt;addr 212.69.63.98&gt;]
Fri Jan 30 14:59:34 2015 daemon.debug pppd[5643]: rcvd [IPV6CP ConfReq id=0x1 &lt;addr fe80::523d:e5ff:feb7:e718&gt;]
Fri Jan 30 14:59:34 2015 daemon.debug pppd[5643]: sent [IPV6CP ConfAck id=0x1 &lt;addr fe80::523d:e5ff:feb7:e718&gt;]
Fri Jan 30 14:59:34 2015 daemon.debug pppd[5643]: rcvd [IPCP ConfNak id=0x3 &lt;addr 93.89.134.219&gt; &lt;ms-dns1 212.69.36.13&gt; &lt;ms-dns2 212.69.40.13&gt;]
Fri Jan 30 14:59:34 2015 daemon.debug pppd[5643]: sent [IPCP ConfReq id=0x4 &lt;addr 93.89.134.219&gt; &lt;ms-dns1 212.69.36.13&gt; &lt;ms-dns2 212.69.40.13&gt;]
Fri Jan 30 14:59:34 2015 daemon.debug pppd[5643]: rcvd [IPV6CP ConfAck id=0x2 &lt;addr fe80::2cab:0e13:a320:7b5f&gt;]
Fri Jan 30 14:59:34 2015 daemon.notice netifd: Network device &#039;pppoe-wan&#039; link is up
Fri Jan 30 14:59:34 2015 daemon.notice pppd[5643]: local  LL address fe80::2cab:0e13:a320:7b5f
Fri Jan 30 14:59:34 2015 daemon.notice pppd[5643]: remote LL address fe80::523d:e5ff:feb7:e718
Fri Jan 30 14:59:34 2015 daemon.debug pppd[5643]: Script /lib/netifd/ppp-up started (pid 18846)
Fri Jan 30 14:59:34 2015 daemon.notice netifd: Interface &#039;wan6&#039; is enabled
Fri Jan 30 14:59:34 2015 daemon.notice netifd: Network alias &#039;pppoe-wan&#039; link is up
Fri Jan 30 14:59:34 2015 daemon.notice netifd: Interface &#039;wan6&#039; has link connectivity 
Fri Jan 30 14:59:34 2015 daemon.notice netifd: Interface &#039;wan6&#039; is setting up now
Fri Jan 30 14:59:34 2015 daemon.notice netifd: Interface &#039;wan&#039; is now up
Fri Jan 30 14:59:34 2015 daemon.debug pppd[5643]: Script /lib/netifd/ppp-up finished (pid 18846), status = 0x1
Fri Jan 30 14:59:34 2015 daemon.debug pppd[5643]: rcvd [IPCP ConfAck id=0x4 &lt;addr 93.89.134.219&gt; &lt;ms-dns1 212.69.36.13&gt; &lt;ms-dns2 212.69.40.13&gt;]
Fri Jan 30 14:59:34 2015 daemon.notice pppd[5643]: local  IP address 93.89.134.219
Fri Jan 30 14:59:34 2015 daemon.notice pppd[5643]: remote IP address 212.69.63.98
Fri Jan 30 14:59:34 2015 daemon.notice pppd[5643]: primary   DNS address 212.69.36.13
Fri Jan 30 14:59:34 2015 daemon.notice pppd[5643]: secondary DNS address 212.69.40.13
Fri Jan 30 14:59:34 2015 daemon.info dnsmasq[5222]: reading /tmp/resolv.conf.auto
Fri Jan 30 14:59:34 2015 daemon.info dnsmasq[5222]: using local addresses only for domain lan
Fri Jan 30 14:59:34 2015 daemon.info dnsmasq[5222]: using nameserver 212.69.36.13#53
Fri Jan 30 14:59:34 2015 daemon.info dnsmasq[5222]: using nameserver 212.69.40.13#53
Fri Jan 30 14:59:34 2015 daemon.debug pppd[5643]: Script /lib/netifd/ppp-up started (pid 18853)
Fri Jan 30 14:59:34 2015 daemon.debug pppd[5643]: Script /lib/netifd/ppp-up finished (pid 18853), status = 0x1
Fri Jan 30 14:59:34 2015 daemon.notice odhcp6c[18871]: (re)starting transaction on pppoe-wan
Fri Jan 30 14:59:34 2015 daemon.notice odhcp6c[18871]: Starting SOLICIT transaction (timeout 4294967295s, max rc 0)
Fri Jan 30 14:59:34 2015 user.notice firewall: Reloading firewall due to ifup of wan (pppoe-wan)
Fri Jan 30 14:59:39 2015 daemon.notice odhcp6c[18871]: Got a valid reply after 5037ms
Fri Jan 30 14:59:39 2015 daemon.debug pppd[5643]: rcvd [LCP TermReq id=0x3]
Fri Jan 30 14:59:39 2015 daemon.info pppd[5643]: LCP terminated by peer
Fri Jan 30 14:59:39 2015 daemon.info pppd[5643]: Connect time 0.1 minutes.
Fri Jan 30 14:59:39 2015 daemon.info pppd[5643]: Sent 4272 bytes, received 945 bytes.
Fri Jan 30 14:59:39 2015 daemon.notice odhcp6c[18871]: Starting SOLICIT transaction (timeout 4294967295s, max rc 0)
Fri Jan 30 14:59:39 2015 daemon.debug pppd[5643]: Script /lib/netifd/ppp-down started (pid 18927)
Fri Jan 30 14:59:39 2015 daemon.notice netifd: Network device &#039;pppoe-wan&#039; link is down
Fri Jan 30 14:59:39 2015 daemon.notice netifd: Network alias &#039;pppoe-wan&#039; link is down
Fri Jan 30 14:59:39 2015 daemon.notice netifd: Interface &#039;wan6&#039; has link connectivity loss
Fri Jan 30 14:59:39 2015 daemon.debug pppd[5643]: Script /lib/netifd/ppp-down started (pid 18928)
Fri Jan 30 14:59:39 2015 daemon.debug pppd[5643]: sent [LCP TermAck id=0x3]
Fri Jan 30 14:59:39 2015 daemon.notice odhcp6c[18871]: carrier =&gt; 0 event on pppoe-wan
Fri Jan 30 14:59:39 2015 daemon.notice odhcp6c[18871]: (re)starting transaction on pppoe-wan
Fri Jan 30 14:59:39 2015 daemon.notice odhcp6c[18871]: Starting SOLICIT transaction (timeout 4294967295s, max rc 0)
Fri Jan 30 14:59:39 2015 daemon.notice netifd: Interface &#039;wan&#039; has lost the connection
Fri Jan 30 14:59:39 2015 daemon.debug pppd[5643]: Script /lib/netifd/ppp-down finished (pid 18928), status = 0x1
Fri Jan 30 14:59:39 2015 daemon.debug pppd[5643]: Script /lib/netifd/ppp-down finished (pid 18927), status = 0x1
Fri Jan 30 14:59:40 2015 daemon.notice netifd: Interface &#039;wan6&#039; is now down
Fri Jan 30 14:59:40 2015 daemon.notice netifd: Interface &#039;wan6&#039; is disabled
Fri Jan 30 14:59:42 2015 daemon.debug pppd[5643]: rcvd [LCP TermReq id=0x1]
Fri Jan 30 14:59:42 2015 daemon.debug pppd[5643]: sent [LCP TermAck id=0x1]
Fri Jan 30 14:59:42 2015 daemon.notice pppd[5643]: Connection terminated.
Fri Jan 30 14:59:42 2015 daemon.info pppd[5643]: Connect time 0.1 minutes.
Fri Jan 30 14:59:42 2015 daemon.info pppd[5643]: Sent 4272 bytes, received 945 bytes.
Fri Jan 30 14:59:42 2015 daemon.notice pppd[5643]: Modem hangup</code></pre></div>											<p class="post-edited">(Last edited by <strong>adrinux</strong> on 30 Jan 2015, 21:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263537">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">adrinux</div>
					<div class="post-datetime">
						30 Jan 2015, 17:35					</div>
				</div>
				<div class="post-content content">
					<p>Success!</p><p>Noticed wan6 defaulted to protocol *static*, changed it to DHCP client and I can now start wan6 without it taking down the wan interface too.</p><p>EDIT: Turns out *static* is what Luci displays for the interface protocol when uci has proto set at dhcpv6, so it wasn&#039;t actually static.</p><p>EDIT2: Luci needs an extra package to support ipv6:</p><p>opkg install luci-proto-ipv6</p><p>installing that allows dhcpv6 client as a choice luci when configuring the wan6 interface</p>											<p class="post-edited">(Last edited by <strong>adrinux</strong> on 30 Jan 2015, 19:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263544">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">adrinux</div>
					<div class="post-datetime">
						30 Jan 2015, 18:36					</div>
				</div>
				<div class="post-content content">
					<p>But that leaves me with network config of ¨network.wan6.proto=dhcp¨ when surely it should be dhcpv6, and v6 in general doesn&#039;t seem to be working.</p><p>No default route and the prefix doesn&#039;t match my isp provided one either.</p><div class="codebox"><pre><code>ifstatus wan6
{
    &quot;up&quot;: false,
    &quot;pending&quot;: true,
    &quot;available&quot;: true,
    &quot;autostart&quot;: true,
    &quot;proto&quot;: &quot;dhcp&quot;,
    &quot;device&quot;: &quot;pppoe-wan&quot;,
    &quot;data&quot;: {
        
    }
}</code></pre></div><br /><br /><p>IPv6 has been on my ¨need to look into this when I have time&quot; list for far too long. Really need to educate myself <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /><br />Leaning towards disabling IPv6 for now until I&#039;ve educated myself a bit better.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263552">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">adrinux</div>
					<div class="post-datetime">
						30 Jan 2015, 19:48					</div>
				</div>
				<div class="post-content content">
					<p>Have just installed luci support for ipv6, as per comment 7 above, but using it still breaks wan just as with using uci.</p><p>Also ran opkg update and installed a newer odhcp6c - no fix though, wan still dies as soon as wan6 is enabled. It does seem to be retrieving an ipv6 address from my isp, but still dies within seconds.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>