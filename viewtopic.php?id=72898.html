<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Problem with OpenWRT AP and Android Smartphones</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 25 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p370337">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">TheGrue</div>
					<div class="post-datetime">
						1 Jan 2018, 20:54					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I have an OpenWRT router that I configured as WLAN Access Point. DNS, DHCP and everything else are handled by my FritzBox.. It works well from my laptops.</p><p>My Android (7) Phones can connect and talk to servers on the internet. Unfortunately, they are not able to talk to the servers in my LAN <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> (which my laptops can !?!?)</p><p>If I use IPv4 addresses instead of names on the smartphones, they can contact my servers. Only if I use host names, nothing works.</p><p>You surely need more information about my setup. I&#039;m an openwrt rookie and don&#039;t know what information you need exactly and how to obtain it, so please tell me what I have to do to give you the information that you need...</p><p>Thanks very much for your help!</p><p>TheGrue</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370339">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Notsofast</div>
					<div class="post-datetime">
						1 Jan 2018, 22:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>TheGrue wrote:</cite><blockquote><p>Hello,</p><p>I have an OpenWRT router that I configured as WLAN Access Point. DNS, DHCP and everything else are handled by my FritzBox.. It works well from my laptops.</p><p>My Android (7) Phones can connect and talk to servers on the internet. Unfortunately, they are not able to talk to the servers in my LAN <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> (which my laptops can !?!?)</p><p>If I use IPv4 addresses instead of names on the smartphones, they can contact my servers. Only if I use host names, nothing works.</p><p>You surely need more information about my setup. I&#039;m an openwrt rookie and don&#039;t know what information you need exactly and how to obtain it, so please tell me what I have to do to give you the information that you need...</p><p>Thanks very much for your help!</p><p>TheGrue</p></blockquote></div><p>Sounds like samba or windows IIS is not configured. DNS Is diff than windows or Apple network methods. Android is a basic os and cannot do everything on its own, like network with mixed environments.</p><p>There are some windows client apps that allow connections to shared&nbsp; networkresources.</p>											<p class="post-edited">(Last edited by <strong>Notsofast</strong> on 1 Jan 2018, 22:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370340">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">TheGrue</div>
					<div class="post-datetime">
						1 Jan 2018, 22:38					</div>
				</div>
				<div class="post-content content">
					<p>Hello Notsofast,</p><p>thanks for your input, but that certainly is not the case. I live in a linux-only-household and I&#039;m not talking abou webpages (well, not only). BTW, as I wrote: with the laptops (debian 9) everything is fine.</p><p>Examples: (I&#039;m not allowed to post urls <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> so I substituted htper text transport protocol with ht_tp below. That&#039; NOT a typo...</p><p>I can access ht_tp://ha/fhem on my raspberry from the laptops, but not from the smartphones. But I /can/ access ht_tp://192.168.178.51/fhem from the phones.</p><p>I can ssh to zem from the laptops, but not from the smartphones. I /can/ ssh to 192.168.178.2 from the smartphones</p><p>And so on. I suspect some IPv6 dns problem, but that&#039;s only a guess.</p><p>cu<br />TheGrue</p><p>BTW: WTF? I&#039;m not allowed to post URLs in a forum about a router firmware?!?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370341">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Notsofast</div>
					<div class="post-datetime">
						1 Jan 2018, 23:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>TheGrue wrote:</cite><blockquote><p>Hello Notsofast,</p><p>thanks for your input, but that certainly is not the case. I live in a linux-only-household and I&#039;m not talking abou webpages (well, not only). BTW, as I wrote: with the laptops (debian 9) everything is fine.</p><p>Examples: (I&#039;m not allowed to post urls <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> so I substituted htper text transport protocol with ht_tp below. That&#039; NOT a typo...</p><p>I can access ht_tp://ha/fhem on my raspberry from the laptops, but not from the smartphones. But I /can/ access ht_tp://192.168.178.51/fhem from the phones.</p><p>I can ssh to zem from the laptops, but not from the smartphones. I /can/ ssh to 192.168.178.2 from the smartphones</p><p>And so on. I suspect some IPv6 dns problem, but that&#039;s only a guess.</p><p>cu<br />TheGrue</p><p>BTW: WTF? I&#039;m not allowed to post URLs in a forum about a router firmware?!?</p></blockquote></div><p>Well it sounds like the phone is using its data connex for Internet DNS, which will kill name resolution inside your lan. Plus there are some settings which over ride dns using Google&#039;s dns servers. Google has a lot of dung setup to make your phone be connected to Google as primary connex. So you will need to use IP for connecting internal connections through Android devices.</p><p>Or setup internal DNS server as a intranet DNS and Internet DNS cache and point your primary DNS on the router to your networks internal DNS server.</p><p>This way all internal DNS resolutions will be seen by your android devices and route internally without looping out and back from the Internet.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370357">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">TheGrue</div>
					<div class="post-datetime">
						2 Jan 2018, 12:49					</div>
				</div>
				<div class="post-content content">
					<p>The Smartphones used a wrong DNS server - no idea why and to whom that IP belongs. Doesn&#039;t seem to be one of mine... So I looked in the settings of my Fritzbox, found the DNSv6 server settings, copied that IP and entered it in open wrt unter Network-&gt;interfaces-&gt;Lan-&gt;edit-&gt;IPv6 Settings (down in the &quot;DHCP Server&quot; region of the page...) -&gt; Announced DNS servers.</p><p>Restarted wifi on the phones and everything is fine <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370358">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						2 Jan 2018, 15:45					</div>
				</div>
				<div class="post-content content">
					<p>Android smartphones are hard-wired to always use Google&#039;s DNSs (8.8.8.8, 8.8.4.4), independently of any local network configuration; if you want them to use your local DNS instead, you must use the firewall to make a redirection.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>