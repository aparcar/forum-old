<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> kamikaze 8_09: ip_queue failed to register queue handler</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 2 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p98163">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">tangrop</div>
					<div class="post-datetime">
						2 Dec 2009, 17:06					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,<br />I want to test a program that I wrote some days ago. I want to use it on a Linksys WRT54GL. My program use libipq to modify packets headers so I need it.<br />I use kamikaze 8_09 forbrcm47xx&nbsp; and I compile a bin image with iptables and the associated modules enabled.<br />The problem is when I want to use libipq, it doesnt wort.</p><p>If I look at my loaded modules, I dont have ip_queue. <br />If I try to insert ip_queue module, it gives me:</p><div class="codebox"><pre><code> insmod ip_queue
insmod: cannot insert &#039;/lib/modules/2.6.25.20/ip_queue.ko&#039;: invalid parameters (16): Invalid argument</code></pre></div><p>If I have a look on dmesg:</p><div class="codebox"><pre><code>ip_queue: failed to register queue handler</code></pre></div><p>I dont know what am I doing wrong, if someone could indicate me what&#039;s going on...</p><p>Cheers, <br />Tanguy</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98170">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">tangrop</div>
					<div class="post-datetime">
						2 Dec 2009, 18:25					</div>
				</div>
				<div class="post-content content">
					<p>Maybe it&#039;s the fact tohave&nbsp; post on the forum but I found the solution to my problem... In fact, it comes from imq.</p><p>As said here, <a href="http://www.linuximq.net/faq.html">http://www.linuximq.net/faq.html</a></p><p>The imq device feeds itself packets through netfilter queueing mechanism. At the moment there can only be one netfilter queue per protocol family so this means imq came first and ip(6)_queue cannot register as PF_INET(6) netfilter queue.</p><p>So I just removed imq packages and everything went fine... Does someone know what consequences do it have on the router when imq is removed?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>