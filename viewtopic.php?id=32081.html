<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Netatalk 2.2.1</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 16 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p144392">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">_seal</div>
					<div class="post-datetime">
						24 Sep 2011, 21:41					</div>
				</div>
				<div class="post-content content">
					<p>Please describe how to install Netatalk 2.2.1 to </p><br /><p>root@OpenWrt:~# uname -a<br />Linux OpenWrt 2.6.39.4 #1 Fri Aug 19 14:28:29 OMSST 2011 mips GNU/Linux</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144398">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">samcrawford</div>
					<div class="post-datetime">
						24 Sep 2011, 23:39					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m not familiar with Netatalk, but have you tried the obvious:</p><div class="codebox"><pre><code>opkg update
Opkg install netatalk</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144412">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">_seal</div>
					<div class="post-datetime">
						25 Sep 2011, 08:15					</div>
				</div>
				<div class="post-content content">
					<p>but i need version 2.2.1 with mac os lion support. last package version is <br />netatalk - 2.1.5-1 - netatalk</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144578">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						27 Sep 2011, 11:26					</div>
				</div>
				<div class="post-content content">
					<p>Here you go:</p><p><a href="http://enduser.subsignal.org/~trondah/packages/netatalk_2.2.1-1_ar71xx.ipk">http://enduser.subsignal.org/~trondah/p … ar71xx.ipk</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144583">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">_seal</div>
					<div class="post-datetime">
						27 Sep 2011, 11:56					</div>
				</div>
				<div class="post-content content">
					<p>great! thank!!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144628">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">_seal</div>
					<div class="post-datetime">
						27 Sep 2011, 20:36					</div>
				</div>
				<div class="post-content content">
					<p>arokh, i install netatalk from yous package</p><br /><p>root@OpenWrt:/etc/netatalk# opkg update<br />Downloading <a href="http://enduser.subsignal.org/~trondah/packages//Packages.gz">http://enduser.subsignal.org/~trondah/p … ackages.gz</a>.</p><p>Inflating <a href="http://enduser.subsignal.org/~trondah/packages//Packages.gz">http://enduser.subsignal.org/~trondah/p … ackages.gz</a>.<br />Updated list of available packages in /var/opkg-lists/snapshots.<br />root@OpenWrt:/etc/netatalk# <br />root@OpenWrt:/etc/netatalk# <br />root@OpenWrt:/etc/netatalk# opkg install netatalk<br />Installing netatalk (2.2.1-1) to root...<br />Downloading <a href="http://enduser.subsignal.org/~trondah/packages//netatalk_2.2.1-1_ar71xx.ipk">http://enduser.subsignal.org/~trondah/p … ar71xx.ipk</a>.<br />Configuring netatalk.<br />root@OpenWrt:/etc/netatalk# </p><p>but afpf don&#039;t run <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> no logs, no cores</p><br /><p>root@OpenWrt:/sbin# ldd afpd<br />&nbsp; &nbsp; librpc.so =&gt; /lib/librpc.so (0x2ae0a000)<br />&nbsp; &nbsp; libgcrypt.so.11 =&gt; /usr/lib/libgcrypt.so.11 (0x2ae2d000)<br />&nbsp; &nbsp; libgpg-error.so.0 =&gt; /usr/lib/libgpg-error.so.0 (0x2ae90000)<br />&nbsp; &nbsp; libdl.so.0 =&gt; /lib/libdl.so.0 (0x2aea3000)<br />&nbsp; &nbsp; libpthread.so.0 =&gt; /lib/libpthread.so.0 (0x2aeb6000)<br />&nbsp; &nbsp; libgcc_s.so.1 =&gt; /lib/libgcc_s.so.1 (0x2aedb000)<br />&nbsp; &nbsp; libc.so.0 =&gt; /lib/libc.so.0 (0x2aefd000)<br />&nbsp; &nbsp; ld-uClibc.so.0 =&gt; /lib/ld-uClibc.so.0 (0x2adf2000)<br />root@OpenWrt:/sbin# <br />root@OpenWrt:/sbin#</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144642">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						27 Sep 2011, 23:53					</div>
				</div>
				<div class="post-content content">
					<p>You&#039;ll probably need to install libgcrypt and libgpg-error from the same source.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144753">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">_seal</div>
					<div class="post-datetime">
						29 Sep 2011, 14:50					</div>
				</div>
				<div class="post-content content">
					<p>I do just that. all packages are installed from the correct repository.</p><br /><p>root@OpenWrt:~# opkg update<br />Downloading <a href="http://enduser.subsignal.org/~trondah/packages//Packages.gz">http://enduser.subsignal.org/~trondah/p … ackages.gz</a>.<br />Inflating <a href="http://enduser.subsignal.org/~trondah/packages//Packages.gz">http://enduser.subsignal.org/~trondah/p … ackages.gz</a>.<br />Updated list of available packages in /var/opkg-lists/snapshots.<br />root@OpenWrt:~# opkg install netatalk<br />Installing netatalk (2.2.1-1) to root...<br />Downloading <a href="http://enduser.subsignal.org/~trondah/packages//netatalk_2.2.1-1_ar71xx.ipk">http://enduser.subsignal.org/~trondah/p … ar71xx.ipk</a>.<br />Installing libgcrypt (1.5.0-1) to root...<br />Downloading <a href="http://enduser.subsignal.org/~trondah/packages//libgcrypt_1.5.0-1_ar71xx.ipk">http://enduser.subsignal.org/~trondah/p … ar71xx.ipk</a>.<br />Installing libgpg-error (1.9-1) to root...<br />Downloading <a href="http://enduser.subsignal.org/~trondah/packages//libgpg-error_1.9-1_ar71xx.ipk">http://enduser.subsignal.org/~trondah/p … ar71xx.ipk</a>.<br />Configuring libgpg-error.<br />Configuring libgcrypt.<br />Configuring netatalk.<br />root@OpenWrt:~# cd /etc/init.d/<br />root@OpenWrt:/etc/init.d# ./afpd start<br />root@OpenWrt:/etc/init.d# <br />root@OpenWrt:/etc/init.d# <br />root@OpenWrt:/etc/init.d# ps | grep afp<br />14524 root&nbsp; &nbsp; &nbsp; 1620 S&nbsp; &nbsp; grep afp<br />root@OpenWrt:/etc/init.d# </p><p>and no logs, no cores <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144758">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						29 Sep 2011, 15:36					</div>
				</div>
				<div class="post-content content">
					<p>Try starting the binary manually (ie not from the init script) and see what happens. Which version of OpenWrt are you running? I&#039;m compiling for trunk.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144760">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">_seal</div>
					<div class="post-datetime">
						29 Sep 2011, 15:39					</div>
				</div>
				<div class="post-content content">
					<p>root@OpenWrt:~# cd /usr/sbin/<br />root@OpenWrt:/usr/sbin# ./afpd <br />root@OpenWrt:/usr/sbin# ps | grep afp<br />14976 root&nbsp; &nbsp; &nbsp; 1620 S&nbsp; &nbsp; grep afp<br />root@OpenWrt:/usr/sbin# </p><br /><br /><p>root@OpenWrt:/usr/sbin# uname -av<br />Linux OpenWrt 2.6.39.4 #1 Fri Aug 19 14:28:29 OMSST 2011 mips GNU/Linux</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144762">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						29 Sep 2011, 15:53					</div>
				</div>
				<div class="post-content content">
					<p>Run with debug then, afpd -d.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144763">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">_seal</div>
					<div class="post-datetime">
						29 Sep 2011, 15:54					</div>
				</div>
				<div class="post-content content">
					<p>root@OpenWrt:~# <br />root@OpenWrt:~# cd /usr/sbin/<br />root@OpenWrt:/usr/sbin# ./afpd -d<br />./afpd: can&#039;t resolve symbol &#039;setxattr&#039;<br />root@OpenWrt:/usr/sbin#</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145222">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">skramnz</div>
					<div class="post-datetime">
						6 Oct 2011, 14:40					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m getting the same error with netatalk - 2.2.1-1</p><p>afpd: can&#039;t resolve symbol &#039;setxattr&#039;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145229">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						6 Oct 2011, 16:26					</div>
				</div>
				<div class="post-content content">
					<p>Ah, right. I compiled uClibc with xattr support so my netatalk package expects that. You&#039;ll need to roll your own build <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145286">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">skramnz</div>
					<div class="post-datetime">
						7 Oct 2011, 05:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arokh wrote:</cite><blockquote><p>Ah, right. I compiled uClibc with xattr support so my netatalk package expects that. You&#039;ll need to roll your own build <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>I&#039;m new to Openwrt and would be grateful for a little direction with building a Netatalk package that is compatible with my build.</p><p>I have a Buildroot environment set up and I have been able to create a customised image for my Buffalo WZR-HP-G300NH.</p><p>How do I compile Netatalk 2.2.1 for Openwrt?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p148345">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">stevo</div>
					<div class="post-datetime">
						13 Nov 2011, 10:48					</div>
				</div>
				<div class="post-content content">
					<p>I compiled it for backfire on ar71xx using the makefile an patches from arokhs repository:</p><p><a href="http://www.megaupload.com/?d=54GI9FXF">http://www.megaupload.com/?d=54GI9FXF</a></p><p>However I can&#039;t really get it to work. It starts without errors but I am unable to log in with my mac. It always says password incorrect. I used afppasswd to create the afp password file for root. </p><p>The log output shows no real issues <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p><p>edit: found the issue, libgcrypt and libgpg-error needed to be updated and compiled with CAST5 cipher. Works fine now, but logging in takes some seconds.</p>											<p class="post-edited">(Last edited by <strong>stevo</strong> on 25 Nov 2011, 10:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p151302">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">surtin</div>
					<div class="post-datetime">
						16 Dec 2011, 08:51					</div>
				</div>
				<div class="post-content content">
					<p>Anyone willing to go through this step by step for me? I&#039;m completely new to the whole OpenWRT thing and I&#039;m just trying to get things rolling so I never have to think about this stuff again. Should probably add that I&#039;m running Backfire on a WNDR3700v2.</p>											<p class="post-edited">(Last edited by <strong>surtin</strong> on 16 Dec 2011, 18:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p151364">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">surtin</div>
					<div class="post-datetime">
						17 Dec 2011, 04:24					</div>
				</div>
				<div class="post-content content">
					<p>Alright, well I got it up and running with the compile by stevo, I&#039;m just running into the problem of getting authentication to work. Do I need to add a user via ssh so that there&#039;s a user on the router or am I completely missing something here. I&#039;m trying to authenticate from an OS X Lion account.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p160426">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">jake1981</div>
					<div class="post-datetime">
						11 Mar 2012, 16:00					</div>
				</div>
				<div class="post-content content">
					<p>Okay. I just got login work just fine..</p><p>If you _need_ login possibility, you need a -with-shadow flag enabled during compile time and basic package has -without-shadow flag.</p><p>Also, users must be on shadow/passwd, if you want a different password to be used on afp and shadow, you can use afppasswd - but user that is only at afppasswd - not on shadow, is not enough. You need user to be on both..</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>