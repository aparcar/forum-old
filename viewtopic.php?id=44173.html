<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> opkg - package list not updating?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 2 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p201631">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">ericromzek</div>
					<div class="post-datetime">
						13 May 2013, 04:44					</div>
				</div>
				<div class="post-content content">
					<p>I want to install Samba on my TPL 1043DN with a USB hard drive hooked up. Samba is not listed in my packages:</p><div class="codebox"><pre><code>root@OpenWrt:~# opkg list
base-files - 117-r36088
busybox - 1.19.4-6
dnsmasq - 2.62-2
dropbear - 2011.54-2
firewall - 2-55.1
hotplug2 - 1.0-beta-4
iptables - 1.4.10-4
iw - 3.6-1
jshn - 2013-01-29-0bc317aa4d9af44806c28ca286d79a8b5a92b2b8
kernel - 3.3.8-1-d6597ebf6203328d3519ea3c3371a493
kmod-ath - 3.3.8+2012-09-07-3
kmod-ath9k - 3.3.8+2012-09-07-3
kmod-ath9k-common - 3.3.8+2012-09-07-3
kmod-cfg80211 - 3.3.8+2012-09-07-3
kmod-crypto-aes - 3.3.8-1
kmod-crypto-arc4 - 3.3.8-1
kmod-crypto-core - 3.3.8-1
kmod-gpio-button-hotplug - 3.3.8-1
kmod-ipt-conntrack - 3.3.8-1
kmod-ipt-core - 3.3.8-1
kmod-ipt-nat - 3.3.8-1
kmod-ipt-nathelper - 3.3.8-1
kmod-leds-gpio - 3.3.8-1
kmod-ledtrig-default-on - 3.3.8-1
kmod-ledtrig-netdev - 3.3.8-1
kmod-ledtrig-timer - 3.3.8-1
kmod-ledtrig-usbdev - 3.3.8-1
kmod-lib-crc-ccitt - 3.3.8-1
kmod-mac80211 - 3.3.8+2012-09-07-3
kmod-nls-base - 3.3.8-1
kmod-ppp - 3.3.8-1
kmod-pppoe - 3.3.8-1
kmod-pppox - 3.3.8-1
kmod-usb-core - 3.3.8-1
kmod-usb-ohci - 3.3.8-1
kmod-usb2 - 3.3.8-1
kmod-wdt-ath79 - 3.3.8-1
libblobmsg-json - 2013-01-29-0bc317aa4d9af44806c28ca286d79a8b5a92b2b8
libc - 0.9.33.2-1
libgcc - 4.6-linaro-1
libip4tc - 1.4.10-4
libiwinfo - 36
libiwinfo-lua - 36
libjson - 0.9-2
liblua - 5.1.4-8
libnl-tiny - 0.1-3
libubox - 2013-01-29-0bc317aa4d9af44806c28ca286d79a8b5a92b2b8
libubus - 2013-01-13-bf566871bd6a633e4504c60c6fc55b2a97305a50
libubus-lua - 2013-01-13-bf566871bd6a633e4504c60c6fc55b2a97305a50
libuci - 2013-01-04.1-1
libuci-lua - 2013-01-04.1-1
libxtables - 1.4.10-4
lua - 5.1.4-8
luci - 0.11.1-1
luci-app-firewall - 0.11.1-1
luci-i18n-english - 0.11.1-1
luci-lib-core - 0.11.1-1
luci-lib-ipkg - 0.11.1-1
luci-lib-nixio - 0.11.1-1
luci-lib-sys - 0.11.1-1
luci-lib-web - 0.11.1-1
luci-mod-admin-core - 0.11.1-1
luci-mod-admin-full - 0.11.1-1
luci-proto-core - 0.11.1-1
luci-proto-ppp - 0.11.1-1
luci-sgi-cgi - 0.11.1-1
luci-theme-base - 0.11.1-1
luci-theme-openwrt - 0.11.1-1
mtd - 18.1
netifd - 2013-01-29.2-4bb99d4eb462776336928392010b372236ac3c93
opkg - 618-3
ppp - 2.4.5-8
ppp-mod-pppoe - 2.4.5-8
swconfig - 10
uboot-envtools - 2012.04.01-1
ubus - 2013-01-13-bf566871bd6a633e4504c60c6fc55b2a97305a50
ubusd - 2013-01-13-bf566871bd6a633e4504c60c6fc55b2a97305a50
uci - 2013-01-04.1-1
uhttpd - 2012-10-30-e57bf6d8bfa465a50eea2c30269acdfe751a46fd
wpad-mini - 20120910-1</code></pre></div><p>So, I figure I am not up to date, so I run update:</p><br /><div class="codebox"><pre><code>root@OpenWrt:~# opkg update -V 4
opkg_conf_parse_file: Loading conf file /etc/opkg.conf.
pkg_hash_load_feeds:
pkg_hash_load_status_files:</code></pre></div><p>The list is still the same and I don&#039;t have Samba available. What am I doing wrong? Should I see verbose downloads of the new lists when i run the update command?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p201646">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">robthebrew</div>
					<div class="post-datetime">
						13 May 2013, 08:44					</div>
				</div>
				<div class="post-content content">
					<p>That is nowhere near a complete list of available packages.<br />Did you edit opkg.conf to look somewhere other than the default downloads.openwrt.org?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p201647">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						13 May 2013, 09:35					</div>
				</div>
				<div class="post-content content">
					<p>That looks like the list of currently installed packages.<br />If you have upgraded from some old Openwrt version to Attitude Adjustment, you may have old contents in the opkg.conf (copied along your other settings in the sysupgrade).</p><p>What does your /etc/opkg.conf contain?<br />Does it point to <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/packages/">http://downloads.openwrt.org/attitude_a … /packages/</a>&nbsp; ?</p><p>If necessary, edit the file, or if you are using squashfs version, copy the original from /rom.<br />(cp /rom/etc/opkg.conf /etc )</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p201682">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">ericromzek</div>
					<div class="post-datetime">
						13 May 2013, 16:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>robthebrew wrote:</cite><blockquote><p>That is nowhere near a complete list of available packages.<br />Did you edit opkg.conf to look somewhere other than the default downloads.openwrt.org?</p></blockquote></div><p>I know i did not edit it, this is really the first time I SSH&#039;ed into the box to do anything more advanced then the standard wireless setup that I did from the web interface.</p><div class="quotebox"><cite>hnyman wrote:</cite><blockquote><p>That looks like the list of currently installed packages.<br />If you have upgraded from some old Openwrt version to Attitude Adjustment, you may have old contents in the opkg.conf (copied along your other settings in the sysupgrade).</p><p>What does your /etc/opkg.conf contain?<br />Does it point to <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/packages/">http://downloads.openwrt.org/attitude_a … /packages/</a>&nbsp; ?</p><p>If necessary, edit the file, or if you are using squashfs version, copy the original from /rom.<br />(cp /rom/etc/opkg.conf /etc )</p></blockquote></div><p>I think this file is completely empty. I will try to copy from the /rom directory. </p><br /><p>On a side note what are the major differences between the jffs2 version and the squashfs version? Is this just the file system the OS runs on? The wiki just said to grab squashfs for my router (TL-WR1043nd) so I never really looked at the jffs2 build thinking that maybe it would not fit into my routers physical storage capacity.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p201694">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						13 May 2013, 18:39					</div>
				</div>
				<div class="post-content content">
					<p>jffs2 does not provide good reset capability and it takes more space, so it is more complicated.<br />But useful for real pros constantyl testing/installing/removing modules.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p201696">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">robthebrew</div>
					<div class="post-datetime">
						13 May 2013, 18:54					</div>
				</div>
				<div class="post-content content">
					<p>Translating hnyman: AVOID jffs unless you can fix stuff on your own. Plus, why? Sure there are reasons for jffs, but not for most people.</p><p>.. anyway, back on topic, where from and how did you install openWRT? PLease include all paths</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p201736">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">ericromzek</div>
					<div class="post-datetime">
						14 May 2013, 01:54					</div>
				</div>
				<div class="post-content content">
					<p>OK, so my /etc/opkg.conf was blank. I copied over the one from the /rom/etc and it actually was verbose about going out to the url and updating the list. Did a opkg list and now I got TONS of packages to pick from.</p><p>Is there a package that will allow read / write to a NTFS drive or should I just wipe the drive and start over. Reason why I ask is the external drive is larger then my SSD&#039;s and I will have to do some deleting of things I would rather not delete so they will fix on my SSD&#039;s while I wipe the drive to ext, then copy them back. I guess I could always bust out the DVD&#039;s :-/</p><p>Thanks for the prompt help!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p201750">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">robthebrew</div>
					<div class="post-datetime">
						14 May 2013, 08:38					</div>
				</div>
				<div class="post-content content">
					<p>NTFS is a pain, use ext3/ext4<br />Some useful links:<br /><a href="http://wiki.openwrt.org/doc/howto/extroot">http://wiki.openwrt.org/doc/howto/extroot</a><br /><a href="http://wiki.openwrt.org/doc/howto/usb.storage">http://wiki.openwrt.org/doc/howto/usb.storage</a></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>