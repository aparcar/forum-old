<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Change OverlayFS type</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 11 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p284015">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">tzviel</div>
					<div class="post-datetime">
						19 Jul 2015, 08:58					</div>
				</div>
				<div class="post-content content">
					<p>I am looking for an elegant way to change Overlay File System (FS) type.</p><p>Currently, Overlay FS is mounted as JFFS2 on my OpenWRT Linux environment. What I want is to change it to mount as UBIFS.</p><p>Looking at the code, I can see that UBIFS is supported feature for Overlay FS, but I couldn&#039;t find where to configure it or elegantly change the code (of course that brute change the entire sequence will work).</p><p>Thank you all in advance!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p284025">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						19 Jul 2015, 12:03					</div>
				</div>
				<div class="post-content content">
					<p>You&#039;ve got it wrong, there is a JFFS2 and there is a OverlayFS. They are separate filesystems. Switching from JFFS2 to UBIFS would be best done at compile time, but you won&#039;t even notice a difference if you did unless maybe if you got a huge flash.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p284030">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">tzviel</div>
					<div class="post-datetime">
						19 Jul 2015, 13:06					</div>
				</div>
				<div class="post-content content">
					<p>Thanks Arokh,<br />I understand this can be done in compilation time as you suggested, but I was looking for a way to do it in run-time.<br />Idealy, I would like to set a flag in Kernel command line and according to it - openWRT will be mounted to JFFS2 or UBIFS.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p284107">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						20 Jul 2015, 04:25					</div>
				</div>
				<div class="post-content content">
					<p>You can&#039;t just set a different command line, the filesystem on your router is already JFFS2. Some targets already use UBIFS so I guess you could replicate that for your arch if you wanted to. Why do you want to change the fs though?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p284303">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">tzviel</div>
					<div class="post-datetime">
						21 Jul 2015, 13:37					</div>
				</div>
				<div class="post-content content">
					<p>Hello Arokh - thanks for this conversation.</p><p>I want to compile my openWRT again, but this time I want my overlayFS to include the following:<br />1. RO file system - squashFS as defined<br />2. RW file system - I want this FS to be UBIFS instead of JFFS2</p><p>Idealy - this is all what I want to do.</p><p>Can you suggest how to proceed?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p284305">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						21 Jul 2015, 13:42					</div>
				</div>
				<div class="post-content content">
					<p>I suggest you start reading the image/Makefile for the target you want to build for, then compare it with a target that uses UBIFS.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>