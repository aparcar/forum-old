<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> sys-config partition</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p81733">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">sara</div>
					<div class="post-datetime">
						12 Feb 2009, 16:39					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I would like to have a sys-config partition in addition to kernel, rootfs and rootfs_data on Intel Sharp flash chip of Intel IXP425 board. <br />The sys-config contains 12 system configuration (*.conf) files. Can anybody precise me, what type of file system is the best to flash,<br />mount and handle the sys-config partition ? </p><p>sara</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81942">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jra</div>
					<div class="post-datetime">
						16 Feb 2009, 01:49					</div>
				</div>
				<div class="post-content content">
					<p>I was just looking into the same idea tonight and I discovered a different way to do it, using what&#039;s already built-in.</p><p>Did you know that OpenWRT already has a system for restoring arbitrary files on each flash (if and only if you flash from inside OpenWRT)?</p><p>Take a look at how /sbin/luci-flash uses the -k argument to put a tarfile into the / of the new JFFS, then how /etc/preinit untars the tarfile and deletes it on the next boot.</p><p>As long as you only use luci-flash (even if you never use LuCI) you&#039;ll protect the config files (as long as you name them after the -k). If you do an install by moving the CF card and dd over it, then you&#039;ll lose your config files.</p><p>&nbsp; -jra</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81944">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						16 Feb 2009, 01:55					</div>
				</div>
				<div class="post-content content">
					<p>Hi.</p><p>The luci-flash executable just uses the shell libraries of sysupgrade, which is the command line pendant. You&#039;ll find the same functionality there.</p><p>~ JoW</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81972">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">sara</div>
					<div class="post-datetime">
						16 Feb 2009, 14:50					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I just simply want to have a partition &quot;sys-config&quot; mounted to /mnt/rw for e.g like mount -t jffs2 /dev/mtdblock5 /mnt/rw. The variables in the .conf files of &quot;sys-config&quot; partition are then updated/modified by the user GUI interface . So on the next reboot, the system has to mount <br />the &quot;sys-config&quot;partition to use the modified .conf for the application startup. I don&#039;t want to have a backup sort of things to just maintain the <br />system configuration partition.</p><p>thanks<br />Sara</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>