<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> PC Engines Alix 2 board with a mini pci wifi adapter</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 23 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p361807">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">gf779sgf9sfugsgf9sgg</div>
					<div class="post-datetime">
						11 Jul 2017, 18:23					</div>
				</div>
				<div class="post-content content">
					<p>Hello.<br />I have a PC Engines Alix 2 board with a mini pci wifi adapter:<br />Model: WLM54GP23ESD; FCC ID: TK4-WLM54GP23ESD (Atheros)<br />i.imgur.com/4jWkLOA.jpg</p><p>I flashed the pre built /chaos_calmer/15.05.1/x86/generic/openwrt-15.05.1-x86-generic-combined-ext4.img image. <br />It boots and I can access it via LuCi and SSH, but WiFi does not seem to work. Running the ifconfig command does not show a wlan0 interface. I already installed some drivers with opkg which were listed in the wireless wiki page (ath5k, ...), but no success.<br />Is my wifi card unsupported?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361908">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">gf779sgf9sfugsgf9sgg</div>
					<div class="post-datetime">
						13 Jul 2017, 12:48					</div>
				</div>
				<div class="post-content content">
					<p>bump</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361957">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						14 Jul 2017, 06:59					</div>
				</div>
				<div class="post-content content">
					<p>Probably worth stating the drivers you loaded, your config files and relevant log entries.</p><p>That said if you look on the PC-Engines site they basically offer compex and wistron cards.&nbsp; <br /><a href="https://www.pcengines.ch/newshop.php?c=4">https://www.pcengines.ch/newshop.php?c=4</a></p><p>The old product list contains, I think, all the items they offered which does not seem to include this card.<br /><a href="https://www.pcengines.ch/product.htm">https://www.pcengines.ch/product.htm</a></p><p>I had discussions with them a couple years back on this and seem to recall them suggesting Compex, but do not recall the item number.&nbsp; Also be aware that if you read the card info it says they are dual band, but what that really means is they can do either band, but not both bands simultaneously.</p><p>I found using a separate AP just works better and easier to locate in a good location.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361973">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">augustus_meyer</div>
					<div class="post-datetime">
						14 Jul 2017, 13:02					</div>
				</div>
				<div class="post-content content">
					<p>Compex worth a try. I use Compex on APU2 running openwrt. And used Compex on ALIX runing voyage.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p362061">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">gf779sgf9sfugsgf9sgg</div>
					<div class="post-datetime">
						15 Jul 2017, 20:29					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for your replies.<br />The hardware previously was used with fli4l which is also a router firmware similar to OpenWRT.<br />With the fli4l software the wifi card worked, so I do not think it is a incompatibility between the board and the mini pci card...<br />fli4l is also linux based, so linux drivers for the wifi card should be available?<br />The reason I want to switch to OpenWRT is that it seems more flexible configuration wise (in fli4l you have to choose your packages at build time).<br />I used the package manager to install the following packages: kmod-ath9k, kmod-ath5k, kmod-b43, kmod-mac80211, kmod-cfg80211, wireless-tools</p><p>Which log files should I post and where can I find them?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p362063">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						15 Jul 2017, 20:43					</div>
				</div>
				<div class="post-content content">
					<p>First you need to be sure the PCI bus is working.&nbsp; The bus itself requires a kernel driver.&nbsp; </p><p>Install pcitools and use lspci to see if your card is found on the PCI bus.&nbsp; Then look at the wifi driver.&nbsp; This should be an ath5k card.&nbsp; IN that case, you will not need ath9k (Atheros n cards) or b43 (Broadcom).</p>											<p class="post-edited">(Last edited by <strong>mk24</strong> on 15 Jul 2017, 20:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p362069">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">gf779sgf9sfugsgf9sgg</div>
					<div class="post-datetime">
						15 Jul 2017, 21:16					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>root@OpenWrt-Alix2-AP:~# lspci
00:01.0 Host bridge: Advanced Micro Devices, Inc. [AMD] CS5536 [Geode companion] Host Bridge (rev 33)
00:01.2 Entertainment encryption device: Advanced Micro Devices, Inc. [AMD] Geode LX AES Security Block
00:09.0 Ethernet controller: VIA Technologies, Inc. VT6105M [Rhine-III] (rev 96)
00:0a.0 Ethernet controller: VIA Technologies, Inc. VT6105M [Rhine-III] (rev 96)
00:0b.0 Ethernet controller: VIA Technologies, Inc. VT6105M [Rhine-III] (rev 96)
00:0c.0 Ethernet controller: Qualcomm Atheros AR2413/AR2414 Wireless Network Adapter [AR5005G(S) 802.11bg] (rev 01)
00:0f.0 ISA bridge: Advanced Micro Devices, Inc. [AMD] CS5536 [Geode companion] ISA (rev 03)
00:0f.2 IDE interface: Advanced Micro Devices, Inc. [AMD] CS5536 [Geode companion] IDE (rev 01)
00:0f.4 USB controller: Advanced Micro Devices, Inc. [AMD] CS5536 [Geode companion] OHC (rev 02)
00:0f.5 USB controller: Advanced Micro Devices, Inc. [AMD] CS5536 [Geode companion] EHC (rev 02)</code></pre></div><p>The wireless card is found: Ethernet controller: Qualcomm Atheros AR2413/AR2414 Wireless Network Adapter [AR5005G(S) 802.11bg] (rev 01)</p><p>I removed the other drivers and only kept kmod-ath5k and regenerated the config but still no wlan0 when running the ifconfig command...</p><p>Is installed the generic x86 image, would the geode image be better / more suitable?</p>											<p class="post-edited">(Last edited by <strong>gf779sgf9sfugsgf9sgg</strong> on 15 Jul 2017, 21:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p362070">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						15 Jul 2017, 21:24					</div>
				</div>
				<div class="post-content content">
					<p>Check dmesg for any ath5k related messages.&nbsp; Run iw list to see if any wifi device exists.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p362072">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">gf779sgf9sfugsgf9sgg</div>
					<div class="post-datetime">
						15 Jul 2017, 21:44					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>root@OpenWrt-Alix2-AP:~# dmesg | grep ath5k
[    8.083798] ath5k 0000:00:0c.0: registered as &#039;phy0&#039;
[    8.754012] ath5k: phy0: Atheros AR2413 chip found (MAC: 0x78, PHY: 0x45)</code></pre></div><div class="codebox"><pre><code>root@OpenWrt-Alix2-AP:~# iw list
Wiphy phy0
        max # scan SSIDs: 4
        max scan IEs length: 2285 bytes
        Retry short limit: 7
        Retry long limit: 4
        Coverage class: 0 (up to 0m)
        Available Antennas: TX 0x3 RX 0x3
        Configured Antennas: TX 0x3 RX 0x3
        Supported interface modes:
                 * IBSS
                 * managed
                 * AP
                 * AP/VLAN
                 * monitor
                 * mesh point
        Band 1:
                Frequencies:
                        * 2412 MHz [1] (30.0 dBm)
                        * 2417 MHz [2] (30.0 dBm)
                        * 2422 MHz [3] (30.0 dBm)
                        * 2427 MHz [4] (30.0 dBm)
                        * 2432 MHz [5] (30.0 dBm)
                        * 2437 MHz [6] (30.0 dBm)
                        * 2442 MHz [7] (30.0 dBm)
                        * 2447 MHz [8] (30.0 dBm)
                        * 2452 MHz [9] (30.0 dBm)
                        * 2457 MHz [10] (30.0 dBm)
                        * 2462 MHz [11] (30.0 dBm)
                        * 2467 MHz [12] (disabled)
                        * 2472 MHz [13] (disabled)
                        * 2484 MHz [14] (disabled)
        valid interface combinations:
                 * #{ managed } &lt;= 2048, #{ AP, mesh point } &lt;= 4, #{ IBSS } &lt;= 1,
                   total &lt;= 2048, #channels &lt;= 1
        HT Capability overrides:
                 * MCS: ff ff ff ff ff ff ff ff ff ff
                 * maximum A-MSDU length
                 * supported channel width
                 * short GI for 40 MHz
                 * max A-MPDU length exponent
                 * min MPDU start spacing</code></pre></div><p>//edit:<br />Just did a clean flash with the x86 geode pre-built image, enabled wifi over LuCi, and now wifi works! Dont know if it is because of the different image or I just messed up my config somehow before...<br />Thanks for your help</p>											<p class="post-edited">(Last edited by <strong>gf779sgf9sfugsgf9sgg</strong> on 15 Jul 2017, 22:40)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>