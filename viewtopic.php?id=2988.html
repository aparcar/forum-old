<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Package added: gpsd</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 6 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p14056">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Nico</div>
					<div class="post-datetime">
						20 Oct 2005, 23:54					</div>
				</div>
				<div class="post-content content">
					<p>A new package, <a href="http://gpsd.berlios.de/">gpsd</a>, is available for testing. You can find it in my <a href="http://openwrt.org/downloads/people/nico/testing/mipsel/packages/">testing</a> repository.</p><p>Please report success / failure / comments / problems in this thread. Thanks for your help !</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p14069">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">frogzoo</div>
					<div class="post-datetime">
						21 Oct 2005, 04:16					</div>
				</div>
				<div class="post-content content">
					<p>Woot! Thanks Nico - this is just what I needed.</p><p>Package works fine on my wrt54gs v1.1 (WR-RC3).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p14072">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Void Main</div>
					<div class="post-datetime">
						21 Oct 2005, 04:35					</div>
				</div>
				<div class="post-content content">
					<p>I use gpsd on my laptop with gpsdrive but I have to ask, why would you need it on a router? I&#039;m sure there is a reason but the only thing I can think of is if you have a WRT installed in a bus or something. Just curious.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p14075">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">frogzoo</div>
					<div class="post-datetime">
						21 Oct 2005, 05:02					</div>
				</div>
				<div class="post-content content">
					<p>Yep, any sort of vehicle tracking, for which the WRT (12V) is perfect. You then use GSM/CDMA for back haul.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p14472">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">0xc0de</div>
					<div class="post-datetime">
						29 Oct 2005, 01:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Void Main wrote:</cite><blockquote><p>I use gpsd on my laptop with gpsdrive but I have to ask, why would you need it on a router? I&#039;m sure there is a reason but the only thing I can think of is if you have a WRT installed in a bus or something. Just curious.</p></blockquote></div><p>Here is what I need it for.<br />I live in tornadio country&nbsp; (OKC).&nbsp; I do storm spoting.&nbsp; I&#039;m a amature radio guy (HAM) like must of the storm spoters.&nbsp; The most ask question on the radio is &quot;Wher are you&quot;.&nbsp; Often answered badly like... &quot;I&#039;m one block south of the gas station neer the water tower in Cregs.&quot;</p><p>Now. Take a WRT54G add in serial ports.&nbsp; One for the GPS and ther other for an 2 meter amature.&nbsp; Use some software know as APRS (Amature Possion Reporting System) and you can plot your possion and everyone else.&nbsp; &nbsp;EXAMPLE:&nbsp; map.findu.com/kd5amb-9 </p><p>More project insue.</p><p>I have been trying to compile the gpsd-2.30 version my self but I&#039;ve run into troubles.&nbsp; I&#039;d like to know what changes if any had to be made to the inverment or code to get it working.</p><p>Mark G.&nbsp; KD5ABM</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p14479">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Void Main</div>
					<div class="post-datetime">
						29 Oct 2005, 01:59					</div>
				</div>
				<div class="post-content content">
					<p>Interesting. I would think a laptop might work better for something like that though. I run gpsd on my laptop with gpsdrive to see and record my progress on a map. At the same time I might be running kismet. You could also plug your radio in and do whatever you do there. I just thought it odd that you would use a WRT54G for that. I guess the advantage is that you could just mount it in your car and leave it there and it&#039;s small and out of the way.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p14494">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">frogzoo</div>
					<div class="post-datetime">
						29 Oct 2005, 13:52					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>0xc0de wrote:</cite><blockquote><p>[<br />I have been trying to compile the gpsd-2.30 version my self but I&#039;ve run into troubles.&nbsp; I&#039;d like to know what changes if any had to be made to the inverment or code to get it working.</p><p>Mark G.&nbsp; KD5ABM</p></blockquote></div><p>The whole point of packages is to save you the trouble: just ipkg &amp; you&#039;re done.</p><p>Gpsd can be found here: <a href="http://openwrt.org/downloads/people/nico/testing/mipsel/packages/gpsd_2.30-1_mipsel.ipk">http://openwrt.org/downloads/people/nic … mipsel.ipk</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p14513">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">0xc0de</div>
					<div class="post-datetime">
						29 Oct 2005, 22:35					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>Gpsd can be found here: <a href="http://openwrt.org/downloads/people/nico/testing/mipsel/packages/gpsd_2.30-1_mipsel.ipk">http://openwrt.org/downloads/people/nic … mipsel.ipk</a></p></blockquote></div><p>I&#039;ll give that.&nbsp; I like doing it myself but... </p><p>Do you plan to include/maintain gpsd as a part of the OpenWRT&nbsp; package list?&nbsp; &nbsp;Is your repository more like a DAG repository?</p><p>Meanwhile, I intalled the lattest&nbsp; WR R3 (not my own compile) and then installed gpsd and when it runs I just get a (KILLED) back.&nbsp; Whats up with that?</p><p>thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p14552">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">0xc0de</div>
					<div class="post-datetime">
						30 Oct 2005, 17:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Nico wrote:</cite><blockquote><p>A new package, <a href="http://gpsd.berlios.de/">gpsd</a>, is available for testing. You can find it in my <a href="http://openwrt.org/downloads/people/nico/testing/mipsel/packages/">testing</a> repository.</p><p>Please report success / failure / comments / problems in this thread. Thanks for your help !</p></blockquote></div><p>GPSD, in your repository, has a problem.&nbsp; (Double striping maybe?)</p><p>I tried it with the &quot;standard&quot;&nbsp; WH R3 but it just says KILLED.&nbsp; &nbsp;I then download your version of WR R3 (<a href="http://openwrt.org/downloads/people/nico/testing/mipsel/openwrt-wrt54g-squashfs.bin">http://openwrt.org/downloads/people/nic … uashfs.bin</a>).&nbsp; Configure it and installed gpsd from the repository again.</p><p>Same results.&nbsp; KILLED.</p><p>Would you like some beta testers? :-)</p><p>mark KD5AMB</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p14553">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">0xc0de</div>
					<div class="post-datetime">
						30 Oct 2005, 17:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>frogzoo wrote:</cite><blockquote><p>The whole point of packages is to save you the trouble: just ipkg &amp; you&#039;re done.</p></blockquote></div><p>I have no problem with this.&nbsp; I like haveing other people do my work for me.&nbsp; Now I need aprsd.</p><p>&nbsp; <a href="http://ve2.ele.etsmtl.ca/aprs/PortsAng.html">http://ve2.ele.etsmtl.ca/aprs/PortsAng.html</a></p><p>This allows wireless access to the radio modem via TCP/IP.&nbsp; &nbsp;<img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>0xc0de</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p14609">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">frogzoo</div>
					<div class="post-datetime">
						1 Nov 2005, 02:50					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>0xc0de wrote:</cite><blockquote><div class="quotebox"><cite>Nico wrote:</cite><blockquote><p>A new package, <a href="http://gpsd.berlios.de/">gpsd</a>, is available for testing. You can find it in my <a href="http://openwrt.org/downloads/people/nico/testing/mipsel/packages/">testing</a> repository.</p><p>Please report success / failure / comments / problems in this thread. Thanks for your help !</p></blockquote></div><p>GPSD, in your repository, has a problem.&nbsp; (Double striping maybe?)</p><p>I tried it with the &quot;standard&quot;&nbsp; WH R3 but it just says KILLED.&nbsp; &nbsp;I then download your version of WR R3 (<a href="http://openwrt.org/downloads/people/nico/testing/mipsel/openwrt-wrt54g-squashfs.bin">http://openwrt.org/downloads/people/nic … uashfs.bin</a>).&nbsp; Configure it and installed gpsd from the repository again.</p><p>Same results.&nbsp; KILLED.</p><p>Would you like some beta testers? :-)</p><p>mark KD5AMB</p></blockquote></div><p>What about package dependencies?<br /></p><div class="codebox"><pre><code>root@OpenWrt:/etc# ipkg info gpsd
Package: gpsd
Version: 2.30-1
Depends: libpthread, uclibc++
Status: install user installed
Section: net
Architecture: mipsel
maintainer: OpenWrt Developers Team &lt;openwrt-devel@openwrt.org&gt;
MD5Sum: 70e26ae0d059ab9b6fd63540379eef28
Size: 65865
Filename: gpsd_2.30-1_mipsel.ipk
Source: buildroot internal
Description: An interface daemon for GPS receivers.

Successfully terminated.

root@OpenWrt:/etc# ipkg info libpthread
Package: libpthread
Version: 0.9.27-1
Status: install ok installed
Section: libs
Architecture: mipsel
maintainer: Nico &lt;nthill@free.fr&gt;
MD5Sum: 5e04769f3572902e80dbbe77df34e1ff
Size: 18659
Filename: libpthread_0.9.27-1_mipsel.ipk
Source: buildroot internal
Description: POSIX threads library

Successfully terminated.
root@OpenWrt:/etc# ipkg info uclibc++
Package: uclibc++
Version: 0.1.11-1
Status: install ok installed
Section: libs
Architecture: mipsel
maintainer: Felix Fietkau &lt;nbd@vd-s.ath.cx&gt;
MD5Sum: 19d8b0ce32b12d4a61fc72a86469421a
Size: 55430
Filename: uclibc++_0.1.11-1_mipsel.ipk
Source: buildroot internal
Description: A standard c++ library for embedded systems

Successfully terminated.</code></pre></div>											<p class="post-edited">(Last edited by <strong>frogzoo</strong> on 1 Nov 2005, 02:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p15048">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">0xc0de</div>
					<div class="post-datetime">
						8 Nov 2005, 05:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Nico wrote:</cite><blockquote><p>A new package, <a href="http://gpsd.berlios.de/">gpsd</a>, is available for testing. You can find it in my <a href="http://openwrt.org/downloads/people/nico/testing/mipsel/packages/">testing</a> repository.</p><p>Please report success / failure / comments / problems in this thread. Thanks for your help !</p></blockquote></div><p>I&#039;ve got my copy of gpsd to compile.&nbsp; But I get the same thing your version does.&nbsp; When I issue a gpsd or even a &quot;gpsd /dev/tts/1&quot; I just get </p><p>&nbsp; KILLED</p><p>and the prompt back.&nbsp; &nbsp;Other ipkg installs work just fine.&nbsp; has anyone got this to work or is it just me?</p><p>thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p15051">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">Nico</div>
					<div class="post-datetime">
						8 Nov 2005, 06:22					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>root@ap4:~# ipkg install http://openwrt.org/downloads/people/nico/testing/mipsel/packages/gpsd_2.30-1_mipsel.ipk
Downloading http://openwrt.org/downloads/people/nico/testing/mipsel/packages/gpsd_2.30-1_mipsel.ipk
Installing gpsd (2.30-1) to root...
Configuring gpsd
Successfully terminated.

root@ap4:~# gpsd -h
usage: gpsd [-d dgpsip-server] [-D n] [-F sockfile] [-P pidfile] [-S port] [-h] device...
  Options include:
  -d host[:port]                = set DGPS server
  -F sockfile                   = specift control socket location
  -P pidfile                    = set file to record process ID
  -D integer (default 0)        = set debug level
  -S integer (default 2947)     = set port for daemon
  -h                            = help message</code></pre></div><p>0xc0de, are you running a stock WhiteRussian RC3 now ? If are still running the image you grabbed from my testing directory, you are certainly not...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p15056">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">rweait</div>
					<div class="post-datetime">
						8 Nov 2005, 08:37					</div>
				</div>
				<div class="post-content content">
					<p>Nico,<br />Works on a WRT54GS v2.0.&nbsp; Thank you very much.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p15172">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">0xc0de</div>
					<div class="post-datetime">
						10 Nov 2005, 08:03					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Nico wrote:</cite><blockquote><div class="codebox"><pre><code>root@ap4:~# ipkg install http://openwrt.org/downloads/people/nico/testing/mipsel/packages/gpsd_2.30-1_mipsel.ipk
Downloading http://openwrt.org/downloads/people/nico/testing/mipsel/packages/gpsd_2.30-1_mipsel.ipk
Installing gpsd (2.30-1) to root...
Configuring gpsd
Successfully terminated.</code></pre></div></blockquote></div><p>Well, I tried it on my Linsys 54GS (no v #) - This works..&nbsp; <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>What it isn&#039;t working on is a Linksys 54G V.2. :rolleyes</p><p>Why would this be?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p15179">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">frogzoo</div>
					<div class="post-datetime">
						10 Nov 2005, 15:35					</div>
				</div>
				<div class="post-content content">
					<p>By the by, anyone managed to get ntpclient to work with gpsd?</p><p>my /etc/ntp.conf<br /></p><div class="codebox"><pre><code>server 127.127.28.0 

server 127.127.28.1</code></pre></div><p>just gives me a generic &quot;connection refused&quot; when starting ntpclient</p><p>Also there&#039;s a problem somewhere. Gpsd craps out for me after 20mins or so. Will upgrade to latest and retest.</p>											<p class="post-edited">(Last edited by <strong>frogzoo</strong> on 10 Nov 2005, 15:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p15260">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">rweait</div>
					<div class="post-datetime">
						12 Nov 2005, 00:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>frogzoo wrote:</cite><blockquote><p>By the by, anyone managed to get ntpclient to work with gpsd?</p><p>my /etc/ntp.conf<br /></p><div class="codebox"><pre><code>server 127.127.28.0 

server 127.127.28.1</code></pre></div><p>just gives me a generic &quot;connection refused&quot; when starting ntpclient</p><p>Also there&#039;s a problem somewhere. Gpsd craps out for me after 20mins or so. Will upgrade to latest and retest.</p></blockquote></div><p>I&#039;d like to see suggestions on making gpsd work to set the local time, too.&nbsp; Should it be ntpclient or ntpd that works with gpsd?&nbsp; </p><p>On your gpsd stopping after twenty minutes ... My gps unit is a fairly cheap&nbsp; Holux unit.&nbsp; It falls out of NMEA mode into SiRF from time to time.&nbsp; You might be having the same problem.&nbsp; Fix it by starting gpsd, then sending N=0 to the gps.&nbsp; Mine needs this after each power cycle.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p15915">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">titus-36</div>
					<div class="post-datetime">
						23 Nov 2005, 13:53					</div>
				</div>
				<div class="post-content content">
					<p>&gt; I&#039;ve got my copy of gpsd to compile.&nbsp; But I get the same thing your version &gt; does.&nbsp; When I issue a gpsd or even a &quot;gpsd /dev/tts/1&quot; I just get<br />&gt; KILLED</p><p>This is a memory related problem. On 16MB machines gpds will not start. I solved the problem on my 16 MB Asus Wlhdd (includes a harddisk) by adding swap space. </p><p>After starting up, gpsd uses not much ram, only about 600 Byte.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p16953">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">waddler</div>
					<div class="post-datetime">
						10 Dec 2005, 07:46					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m in a little hurry but decided to post this before forgeting it again..<br />My royaltek bluetooth gps dongle also doesn&#039;t work with that gpsd version (probably due to those sirf issues, haven&#039;t really looked at it yet). So I packaged gpsd 2.09 and since that version doesn&#039;t yet have ntpd support, I solved the date setting problem by adding this in init.d/S99done after insmodding bluetooth.</p><p>hciconfig hci0 &amp;&amp; (hciconfig hci0 up;<br />rfcomm bind 0 00:00:DE:CA:FB:AD 1 &amp;&amp;<br />gpsd -np /dev/bluetooth/rfcomm/0</p><p># to-do: poll for the lock instead of testing for &quot;correct&quot; year</p><p># EDIT: strike that, see below</p><p>) &gt;&gt;/tmp/bootup.log</p>											<p class="post-edited">(Last edited by <strong>waddler</strong> on 12 Dec 2005, 08:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p16954">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">waddler</div>
					<div class="post-datetime">
						10 Dec 2005, 08:52					</div>
				</div>
				<div class="post-content content">
					<p>Ok, that&#039;s what you get for rewriting something without testing it properly, this works better..</p><p>i=0; while (i=$(($i+1)) &amp;&amp; [ &quot;$i&quot; -lt 5 ]); do<br />&nbsp; &nbsp; &nbsp; &nbsp; sleep 5<br />&nbsp; &nbsp; &nbsp; &nbsp; date=$(echo &#039;d&#039; | nc localhost 2947)<br />&nbsp; &nbsp; &nbsp; &nbsp; year=$(echo $date | sed &#039;s/.*D=\([0-9]*\)-.*/\1/&#039;)<br />&nbsp; &nbsp; &nbsp; &nbsp; [ &quot;$year&quot; -gt 2004 ] &amp;&amp; break<br />done; echo &quot;slept $i times while waiting gps lock..&quot;</p><p>echo &quot;Setting date $date&quot;<br />date -s $(echo $date | sed &#039;s/GPSD,D=\([0-9]*\)\(.*\):.*/\2\1/&#039; | sed &#039;s/[^0-9]//g&#039;)</p><p>Hope that helps someone.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p16993">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">rweait</div>
					<div class="post-datetime">
						11 Dec 2005, 04:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>waddler wrote:</cite><blockquote><p>[script for setting date from gpsd output]<br />Hope that helps someone.</p></blockquote></div><p>Wonderful!!!&nbsp; Thank you so much.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27689">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">mrdvt92</div>
					<div class="post-datetime">
						23 May 2006, 05:32					</div>
				</div>
				<div class="post-content content">
					<p>Looks like Nico&#039;s gpsd pkg is gone.&nbsp; Is there another on the net?</p>											<p class="post-edited">(Last edited by <strong>mrdvt92</strong> on 23 May 2006, 05:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27695">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">Nico</div>
					<div class="post-datetime">
						23 May 2006, 10:24					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://downloads.openwrt.org/backports/rc5/">backports</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103256">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">DeusExMachina</div>
					<div class="post-datetime">
						19 Feb 2010, 15:49					</div>
				</div>
				<div class="post-content content">
					<p>new netcat installed on 8.09 and new script:</p><p>&nbsp; &nbsp; &nbsp; &nbsp; #setup time via gps<br />&nbsp; &nbsp; &nbsp; &nbsp; i=0;<br />&nbsp; &nbsp; &nbsp; &nbsp; while (i=$(($i+1)) &amp;&amp; [ &quot;$i&quot; -lt 5 ]); <br />&nbsp; &nbsp; &nbsp; &nbsp; do<br />&nbsp; &nbsp; &nbsp; &nbsp; sleep 5<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; (echo d ; sleep 1; echo d; sleep 1; echo d) | (nc localhost 2947) &gt; /tmp/gps_time &amp;<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; TEST=$!<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; sleep 4<br />&nbsp; &nbsp; &nbsp; &nbsp; kill -s SIGINT $TEST<br />&nbsp; &nbsp; &nbsp; &nbsp; killall nc<br />&nbsp; &nbsp; &nbsp; &nbsp; date=$`cat /tmp/gps_time | tail -n 1`<br />&nbsp; &nbsp; &nbsp; &nbsp; year=$(echo $date | sed &#039;s/.*D=\([0-9]*\)-.*/\1/&#039;)<br />&nbsp; &nbsp; &nbsp; &nbsp; [ &quot;$year&quot; -gt 2004 ] &amp;&amp; break<br />&nbsp; &nbsp; &nbsp; &nbsp; done; <br />&nbsp; &nbsp; &nbsp; &nbsp; echo &quot;slept $i times while waiting gps lock..&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; echo &quot;Setting date $date&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; date -s $(echo $date | sed &#039;s/GPSD,D=\([0-9]*\)\(.*\):.*/\2\1/&#039; | sed &#039;s/[^0-9]//g&#039;)</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>