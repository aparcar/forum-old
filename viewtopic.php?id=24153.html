<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> b43 of BackFire10.03 on whr-amg54 fails to detect wireless.</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 2 Feb 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p106088">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">yapoo</div>
					<div class="post-datetime">
						5 Apr 2010, 15:28					</div>
				</div>
				<div class="post-content content">
					<p>Hi.</p><p>whr-amg54 has<br/>bcm5351<br/>bcm4318<br/>bcm2060<br/>This supports 802.11a/g.</p><p>I tried to install BackFire10.03 and works well except for b43.<br/>dmesg is<br/></p><div class="codebox"><pre><code>root@OpenWrt:/# dmesg
Linux version 2.6.32.10 (owrt@localhost) (gcc version 4.3.3 (GCC) ) #6 Mon Apr 5 18:58:52 JST 2010
CPU revision is: 00029008 (Broadcom BCM3302)
ssb: Core 0 found: ChipCommon (cc 0x800, rev 0x09, vendor 0x4243)
ssb: Core 1 found: Fast Ethernet (cc 0x806, rev 0x08, vendor 0x4243)
ssb: Core 2 found: IPSEC (cc 0x80B, rev 0x02, vendor 0x4243)
ssb: Core 3 found: USB 1.1 Hostdev (cc 0x808, rev 0x03, vendor 0x4243)
ssb: Core 4 found: PCI (cc 0x804, rev 0x0A, vendor 0x4243)
ssb: Core 5 found: MIPS 3302 (cc 0x816, rev 0x02, vendor 0x4243)
ssb: Core 6 found: MEMC SDRAM (cc 0x80F, rev 0x01, vendor 0x4243)
ssb: Core 7 found: IEEE 802.11 (cc 0x812, rev 0x07, vendor 0x4243)
ssb: Core 8 found: Roboswitch (cc 0x81C, rev 0x00, vendor 0x4243)
ssb: Initializing MIPS core...
ssb: set_irq: core 0x0806, irq 4 =&gt; 4
ssb: set_irq: core 0x0804, irq 5 =&gt; 5
ssb: set_irq: core 0x0808, irq 6 =&gt; 2
ssb: set_irq: core 0x0812, irq 3 =&gt; 6
ssb: after irq reconfiguration
ssb: core 0x0800, irq : 2(S)* 3  4  5  6  D  I
ssb: core 0x0806, irq : 2(S)  3  4* 5  6  D  I
ssb: core 0x080b, irq : 2(S)  3  4  5  6  D* I
ssb: core 0x0808, irq : 2(S)* 3  4  5  6  D  I
ssb: core 0x0804, irq : 2(S)  3  4  5* 6  D  I
ssb: core 0x0816, irq : 2(S)* 3  4  5  6  D  I
ssb: core 0x080f, irq : 2(S)  3  4  5  6  D  I*
ssb: core 0x0812, irq : 2(S)  3  4  5  6* D  I
ssb: core 0x081c, irq : 2(S)  3  4  5  6  D  I*
ssb: Sonics Silicon Backplane found at address 0x18000000
Serial init done.
Determined physical RAM map:
 memory: 01000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00001000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00001000
On node 0 totalpages: 4096
free_area_init_node: node 0, pgdat 802a3b10, node_mem_map 802e9000
  Normal zone: 32 pages used for memmap
  Normal zone: 0 pages reserved
  Normal zone: 4064 pages, LIFO batch:0
Built 1 zonelists in Zone order, mobility grouping off.  Total pages: 4064
Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,jffs2 noinitrd console=ttyS0,115200
PID hash table entries: 64 (order: -4, 256 bytes)
Dentry cache hash table entries: 2048 (order: 1, 8192 bytes)
Inode-cache hash table entries: 1024 (order: 0, 4096 bytes)
Primary instruction cache 16kB, VIPT, 2-way, linesize 16 bytes.
Primary data cache 8kB, 2-way, VIPT, no aliases, linesize 16 bytes
Memory: 13260k/16384k available (2227k kernel code, 3124k reserved, 473k data, 136k init, 0k highmem)
Hierarchical RCU implementation.
NR_IRQS:128
console [ttyS0] enabled
Calibrating delay loop... 199.16 BogoMIPS (lpj=398336)
Mount-cache hash table entries: 512
NET: Registered protocol family 16
bio: create slab &lt;bio-0&gt; at 0
Switching to clocksource MIPS
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 512 (order: 0, 4096 bytes)
TCP bind hash table entries: 512 (order: -1, 2048 bytes)
TCP: Hash tables configured (established 512 bind 512)
TCP reno registered
NET: Registered protocol family 1
squashfs: version 4.0 (2009/01/31) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) (SUMMARY)  c 2001-2006 Red Hat, Inc.
msgmni has been set to 25
io scheduler noop registered
io scheduler deadline registered (default)
Serial: 8250/16550 driver, 2 ports, IRQ sharing enabled
serial8250: ttyS0 at MMIO 0xb8000300 (irq = 2) is a 16550A
serial8250: ttyS1 at MMIO 0xb8000400 (irq = 2) is a 16550A
serial8250.0: ttyS0 at MMIO 0xb8000300 (irq = 2) is a 16550A
serial8250.0: ttyS1 at MMIO 0xb8000400 (irq = 2) is a 16550A
flash init: 0x1c000000 0x02000000
Physically mapped flash: Found 1 x16 devices at 0x0 in 16-bit bank
Physically mapped flash: Found an alias at 0x400000 for the chip at 0x0
Physically mapped flash: Found an alias at 0x800000 for the chip at 0x0
Physically mapped flash: Found an alias at 0xc00000 for the chip at 0x0
Physically mapped flash: Found an alias at 0x1000000 for the chip at 0x0
Physically mapped flash: Found an alias at 0x1400000 for the chip at 0x0
Physically mapped flash: Found an alias at 0x1800000 for the chip at 0x0
Physically mapped flash: Found an alias at 0x1c00000 for the chip at 0x0
 Amd/Fujitsu Extended Query Table at 0x0040
number of CFI chips: 1
cfi_cmdset_0002: Disabling erase-suspend-program due to code brokenness.
Flash device: 0x400000 at 0x1fc00000
bootloader size: 262144
Updating TRX offsets and length:
old trx = [0x0000001c, 0x00000974, 0x000e2400], len=0x00281000 crc32=0xdb420196
new trx = [0x0000001c, 0x00000974, 0x000e2400], len=0x000e2400 crc32=0x45a5b34b
Done
Creating 4 MTD partitions on &quot;Physically mapped flash&quot;:
0x000000000000-0x000000040000 : &quot;cfe&quot;
0x000000040000-0x0000003f0000 : &quot;linux&quot;
0x000000122400-0x0000003f0000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
mtd: partition &quot;rootfs&quot; set to be root filesystem
mtd: partition &quot;rootfs_data&quot; created automatically, ofs=2A0000, len=150000
0x0000002a0000-0x0000003f0000 : &quot;rootfs_data&quot;
0x0000003f0000-0x000000400000 : &quot;nvram&quot;
b44.c:v2.0
eth0: Broadcom 44xx/47xx 10/100BaseT Ethernet 00:16:01:3b:18:2e
BCM47xx Watchdog Timer enabled (30 seconds, nowayout)
TCP westwood registered
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
Freeing unused kernel memory: 136k freed
Please be patient, while OpenWrt loads ...
diag: Detected &#039;Buffalo (unknown)&#039;
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
roboswitch: Probing device eth0: found a 5325! It&#039;s a 5350.
b44: eth0: powering down PHY
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
b44: eth0: powering down PHY
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
b44: eth0: powering down PHY
mini_fo: using base directory: /
mini_fo: using storage directory: /tmp/root
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
b44: eth0: powering down PHY
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
b44: eth0: powering down PHY
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
device eth0.0 entered promiscuous mode
device eth0 entered promiscuous mode
br-lan: port 1(eth0.0) entering forwarding state
Generic kernel compatibility enabled based on linux-next next-20100113
cfg80211: Calling CRDA to update world regulatory domain
cfg80211: World regulatory domain updated:
    (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
    (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
    (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
    (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
    (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
    (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
b43-phy0: Broadcom 5350 WLAN found (core revision 7)
Data bus error, epc == 80188cc4, ra == 804c2214
Oops[#1]:
Cpu 0
$ 0   : 00000000 10009401 00007000 b8007120
$ 4   : 802d15a8 00007120 802d1490 ffff00fe
$ 8   : fffffffe 00009400 00000000 80292000
$12   : 00000000 7f951588 00000000 00000000
$16   : 20070000 80b0f400 200c0000 808259e0
$20   : 802d1880 00403734 00000000 00000002
$24   : 00000000 2ab19040
$28   : 80a44000 80a45d20 00000000 804c2214
Hi    : 00000006
Lo    : 7f354000
epc   : 80188cc4 ssb_ssb_read32+0x1c/0x28
    Not tainted
ra    : 804c2214 b43_wireless_core_reset+0xf8/0x144 [b43]
Status: 10009403    KERNEL EXL IE
Cause : 0080001c
PrId  : 00029008 (Broadcom BCM3302)
Modules linked in: b43(+) mac80211 crc_ccitt cfg80211 compat_firmware_class compat arc4 aes_generic deflate ecb cbc switch_robo switch_core diag
Process insmod (pid: 560, threadinfo=80a44000, task=80353188, tls=00000000)
Stack : 00005350 00000007 80a45d48 808259e0 808259e0 80b0f400 00000000 804c48f8
        80a45d70 80c4b5b8 00005350 00000007 00000000 00000002 808259e0 802d1490
        00000001 00000001 80825a64 80b0f6ec 00000001 80ffc058 804e2bec 802d15a8
        802e0000 804e2c08 802d1880 00403734 00000000 00000002 7fc8afc8 8018902c
        802d15a8 00000000 00000000 00000001 80c5b480 80c5b480 80c5b480 80166b90
        ...
Call Trace:
[&lt;80188cc4&gt;] ssb_ssb_read32+0x1c/0x28
[&lt;804c2214&gt;] b43_wireless_core_reset+0xf8/0x144 [b43]
[&lt;804c48f8&gt;] b43_probe+0x494/0xd30 [b43]
[&lt;8018902c&gt;] ssb_device_probe+0x44/0x80
[&lt;80166b90&gt;] driver_probe_device+0x13c/0x28c
[&lt;80166d4c&gt;] __driver_attach+0x6c/0xa4
[&lt;80166248&gt;] bus_for_each_dev+0x64/0xb4
[&lt;80165998&gt;] bus_add_driver+0xd0/0x274
[&lt;801670fc&gt;] driver_register+0xe0/0x19c
[&lt;804f0020&gt;] b43_init+0x20/0x70 [b43]
[&lt;8000d578&gt;] do_one_initcall+0x70/0x1f4
[&lt;800570d4&gt;] sys_init_module+0xe0/0x224
[&lt;80003230&gt;] stack_done+0x20/0x3c


Code: 8cc30000  30a5ffff  00651821 &lt;8c620000&gt; 03e00008  00000000  90820012  8c870008  00021300
Disabling lock debugging due to kernel taint
Broadcom 43xx-legacy driver loaded [ Features: PLID, Firmware-ID: FW10 ]
PPP generic driver version 2.4.2
ip_tables: (C) 2000-2006 Netfilter Core Team
NET: Registered protocol family 24
nf_conntrack version 0.5.0 (209 buckets, 836 max)
jffs2_scan_eraseblock(): End of filesystem marker found at 0x0
jffs2_build_filesystem(): unlocking the mtd device... done.
jffs2_build_filesystem(): erasing all blocks after the end marker...
root@OpenWrt:/#</code></pre></div><p>Is there any chance to work b43 on this device? I don&#039;t need 802.11a.</p><p>regards,<br/>zukky</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>