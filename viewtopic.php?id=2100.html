<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> add new user</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p9925">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">thierry_b</div>
					<div class="post-datetime">
						24 Jul 2005, 02:56					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I&#039;d like to add a new user on my router.<br />I explain you the reasons.</p><p>I&#039;d like from outside, to be able to connect to my routuer by ssh or to my desktop linux computer.</p><p>So I&#039;d like to use user root, to directly connect to my router, and another user, so that in his home, I put in his .bashrc, a command ssh, which connect to the desktop linux computer with a system of keys, so I don&#039;t have to type the password :-)</p><p>In effect, I add the user in /etc/passwd, because there is no useradd command lol.</p><p>I changed the pasword for that user, with passwd user, it worked very well, but when I try to connect by ssh with that user, it failed even if I type the good password :-(.</p><p>What do you think of that?</p><p>Thanks.<br />bye</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p9928">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">florian_</div>
					<div class="post-datetime">
						24 Jul 2005, 04:55					</div>
				</div>
				<div class="post-content content">
					<p>Give him a home directory, for instance :</p><div class="codebox"><pre><code>guest:x:1002:100::/home/guest/:/bin/ash</code></pre></div><p>Should work very well</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p9930">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">thierry_b</div>
					<div class="post-datetime">
						24 Jul 2005, 05:04					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I put that:<br />thierry:xxxxxxx:0:0:thierry:/home/thierry:/bin/sh</p><p>I put /bin/bash , to use .bashrc in fact in the directory /home/thierry, that I have created:</p><p>root@OpenWrt:/# ls -al /home/thierry/<br />drwxr-xr-x&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 Jul 24 01:33 .</p><p>It&#039;s works, but with /bin/ash instead of /bin/sh.</p><p>So i&#039;m asking if a ssh command in .bashrc will work :-(.</p><p>There is an equivalent of .bashrc in bash, to put my ssh command so it will be executed as soon as I will be loggued as thierry?</p><br /><p>Thanks.</p><p>Bye</p>											<p class="post-edited">(Last edited by <strong>thierry_b</strong> on 24 Jul 2005, 05:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p9931">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Nico</div>
					<div class="post-datetime">
						24 Jul 2005, 05:07					</div>
				</div>
				<div class="post-content content">
					<p>the user you created should own is home directory (and the files you put in there) :<br /></p><div class="codebox"><pre><code># chown -R thierry /home/thierry</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p9932">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">thierry_b</div>
					<div class="post-datetime">
						24 Jul 2005, 05:13					</div>
				</div>
				<div class="post-content content">
					<p>Yes of course.</p><p>I found that I have to create the .profile, in my home :-)</p><p>But it&#039;s strange, I forgot to do the chown and it worked lol...<br />Maybe I did that with the user root LOL.<br />That&#039;s the only explication possible lol.</p><p>root@OpenWrt:/home/thierry# ls -al<br />drwxr-xr-x&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 Jul 24 04:09 .<br />drwxr-xr-x&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 Jul 24 01:33 ..<br />-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;16 Jul 24 04:09 .profile<br />root@OpenWrt:/home/thierry#</p><p>But I manage to put what I want in .profile :-)</p><p>Thanks.</p><p>Bye</p>											<p class="post-edited">(Last edited by <strong>thierry_b</strong> on 24 Jul 2005, 11:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p9979">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">thierry_b</div>
					<div class="post-datetime">
						25 Jul 2005, 01:52					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve a problem when I log with thierry and my password I have thay:</p><p>login as: thierry<br />thierry@192.168.0.1&#039;s password:</p><br /><p>BusyBox v1.00 (2005.07.18-21:49+0000) Built-in shell (ash)<br />Enter &#039;help&#039; for a list of built-in commands.</p><p>&nbsp; _______&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;________&nbsp; &nbsp; &nbsp; &nbsp; __<br /> |&nbsp; &nbsp; &nbsp; &nbsp;|.-----.-----.-----.|&nbsp; |&nbsp; |&nbsp; |.----.|&nbsp; |_<br /> |&nbsp; &nbsp;-&nbsp; &nbsp;||&nbsp; _&nbsp; |&nbsp; -__|&nbsp; &nbsp; &nbsp;||&nbsp; |&nbsp; |&nbsp; ||&nbsp; &nbsp;_||&nbsp; &nbsp;_|<br /> |_______||&nbsp; &nbsp;__|_____|__|__||________||__|&nbsp; |____|<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |__| W I R E L E S S&nbsp; &nbsp;F R E E D O M<br /> WHITE RUSSIAN (RC2) -------------------------------<br />&nbsp; * 2 oz Vodka&nbsp; &nbsp;Mix the Vodka and Kahlua together<br />&nbsp; * 1 oz Kahlua&nbsp; over ice, then float the cream or<br />&nbsp; * 1/2oz cream&nbsp; milk on the top.<br /> ---------------------------------------------------<br />root@OpenWrt:/home/thierry#</p><p>root@OpenWrt:~# ls -l /home/thierry/<br />-rw-r--r--&nbsp; &nbsp; 1 1000&nbsp; &nbsp; &nbsp;thierry&nbsp; &nbsp; &nbsp; 1051 Jul 24 16:32 ssh2.tar.gz<br />root@OpenWrt:~# chown -R thierry:thierry /home/thierry/<br />root@OpenWrt:~# ls -l /home/thierry/<br />-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;thierry&nbsp; &nbsp; &nbsp; 1051 Jul 24 16:32 ssh2.tar.gz</p><p>root@OpenWrt:/home/thierry# ls -l /home/thierry/<br />-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;thierry&nbsp; &nbsp; &nbsp; 1051 Jul 24 16:32 ssh2.tar.gz</p><p>SO the user is root and the group thierry.</p><p>I added a group in /etc/group:<br />root@OpenWrt:/home/thierry# cat /etc/group<br />root:x:0:<br />nogroup:x:65534:<br />thierry:x:1000:</p><p>But I&#039;d like to have the user thierry and group thierry associated with the name &quot;thierry&quot;.</p><p>This is the content of my passwd.<br />root@OpenWrt:/home/thierry# cat /etc/passwd<br />root:$x$$xxxxxxxxxxxxxxxxxxxxxxxxx:0:0:root:/tmp:/bin/ash<br />nobody:*:65534:65534:nobody:/var:/bin/false<br />thierry:$1$$xxxxxxxxxxxxxxxxxxxx:0:0::/home/thierry:/bin/ash</p><p>I can modify the line thierry, to have a real user thierry and a real group thierry, so that when I do chown -R thiery:thierry, I see thierry:thierry and not root:thierry?</p><p>If I try to put that in /etc/passwd:</p><p>thierry:$1$xxxxxxxxxxxxxxxxxxx:1000:1000::/home/thierry:/bin/ash</p><p>and I try to log on thierry, I have that:</p><p>login as: thierry<br />thierry@192.168.0.1&#039;s password:</p><br /><p>BusyBox v1.00 (2005.07.18-21:49+0000) Built-in shell (ash)<br />Enter &#039;help&#039; for a list of built-in commands.</p><p>You don&#039;t exist, go away!<br />/home/thierry $</p><br /><p>Thanks.</p>											<p class="post-edited">(Last edited by <strong>thierry_b</strong> on 25 Jul 2005, 02:01)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>