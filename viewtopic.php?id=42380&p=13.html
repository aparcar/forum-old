<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Tp-Link td-w8970</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 26 Mar 2018 and 7 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 13 of 16</div><nav><ul><li><a href="viewtopic.php%3Fid=42380&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42380&amp;p=11.html">11</a></li><li><a href="viewtopic.php%3Fid=42380&amp;p=12.html">12</a></li><li class="pagination-current"><span>13</span></li><li><a href="viewtopic.php%3Fid=42380&amp;p=14.html">14</a></li><li><a href="viewtopic.php%3Fid=42380&amp;p=15.html">15</a></li><li><a href="viewtopic.php%3Fid=42380&amp;p=16.html">16</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p336819">
				<div class="post-metadata">
					<div class="post-num">Post #301</div>
					<div class="post-author">rezad1393</div>
					<div class="post-datetime">
						1 Sep 2016, 08:10					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Toutatis wrote:</cite><blockquote><p>@ rezad1393<br /></p><div class="quotebox"><blockquote><p>the source port should be added . without that port forwarding doesn&#039;t mean anything.</p></blockquote></div><p>- Thread<br /><a href="https://forum.openwrt.org/viewtopic.php?id=36055">https://forum.openwrt.org/viewtopic.php?id=36055</a><br />Post 21<br />Point b) the source ip is either unset (should be this way) ...</p></blockquote></div><p>in your situation as i said you meant port not IP.<br />I don&#039;t know who wrote that but that doesn&#039;t seem right.maybe he(or she) meant that if you set the source port then the IP is not always needed and if you set the source IP then the source port is not needed (which the first scenario is the most used one for torrenting and such).</p><p>but consider this. you are telling your router(firewall) to send(forwards) some packages that were not initiated from lan before to a host on your lan on some specified port. so how does your firewall know which ones to send?<br />either by port or by IP or by both. see?<br />because in port forwarding(for torrenting for example) (unlike simple web browsing) the wan side initiate a connection and if you don&#039;t open the port(forward it in this case) the firewall sees that as a not valid request , like a hacker trying to connect to your LAN and blocks that.</p><p>BTW through alll of this it is necessary to have the application running. did you do that?<br />if you use a private tracker some of them have port checking that work quite correctly.</p>											<p class="post-edited">(Last edited by <strong>rezad1393</strong> on 1 Sep 2016, 08:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336906">
				<div class="post-metadata">
					<div class="post-num">Post #302</div>
					<div class="post-author">Toutatis</div>
					<div class="post-datetime">
						1 Sep 2016, 20:27					</div>
				</div>
				<div class="post-content content">
					<p>Sorry I meant port<br /></p><div class="quotebox"><blockquote><p>c) the source port is either unset (should be this way)</p></blockquote></div><p>For my understanding, could you tell me the concept of<br />- External IP address (the drop-down list has all the lan host IP)<br />- External port<br />in the firewall port forwards<br />- What does mean &quot;d&quot; in src_dport</p>											<p class="post-edited">(Last edited by <strong>Toutatis</strong> on 1 Sep 2016, 20:31)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336952">
				<div class="post-metadata">
					<div class="post-num">Post #303</div>
					<div class="post-author">rezad1393</div>
					<div class="post-datetime">
						2 Sep 2016, 10:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Toutatis wrote:</cite><blockquote><p>Sorry I meant port<br /></p><div class="quotebox"><blockquote><p>c) the source port is either unset (should be this way)</p></blockquote></div><p>For my understanding, could you tell me the concept of<br />- External IP address (the drop-down list has all the lan host IP)<br />- External port<br />in the firewall port forwards<br />- What does mean &quot;d&quot; in src_dport</p></blockquote></div><p>I dont understand your question.<br />are you fimiliar at all with port forwarding?<br />external ip and port are the wan side of connection in this case.<br />when you are torrenting you want other users to initiate conncetion to your torrent client. if you dont use port forwarding(opening ports for some WAN IPs or all WAN IPs) then they cant see your client because your firewall blocks them.<br />firewall are state orientated, which mean they keep track of connections orogins for firewalling , so when somebody frmo WAN side tries to connect to you inside you LAN , they are Excternall to your LAN network, so their IP and port are said to be external.<br />that&#039;s it.</p><p>based on some info on internet:<br />config redirect<br />&nbsp; &nbsp; option&nbsp; src&nbsp; &nbsp; &nbsp; &nbsp;$source_interface<br />&nbsp; &nbsp; option&nbsp; src_dport $original_destination_port<br />&nbsp; &nbsp; option&nbsp; dest&nbsp; &nbsp; &nbsp; $destination_interface<br />&nbsp; &nbsp; option&nbsp; dest_ip&nbsp; &nbsp;$destination_ip<br />&nbsp; &nbsp; option&nbsp; dest_port $destination_port<br />&nbsp; &nbsp; option&nbsp; proto&nbsp; &nbsp; &nbsp;$protocol</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336993">
				<div class="post-metadata">
					<div class="post-num">Post #304</div>
					<div class="post-author">Toutatis</div>
					<div class="post-datetime">
						2 Sep 2016, 16:43					</div>
				</div>
				<div class="post-content content">
					<p>I eventually got it working.<br />Please see this thread<br /><a href="https://forum.openwrt.org/viewtopic.php?pid=336992#p336992">https://forum.openwrt.org/viewtopic.php … 92#p336992</a></p><p>Thank you</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336997">
				<div class="post-metadata">
					<div class="post-num">Post #305</div>
					<div class="post-author">rezad1393</div>
					<div class="post-datetime">
						2 Sep 2016, 17:31					</div>
				</div>
				<div class="post-content content">
					<p>happy to hear that.<br />but from what I read you didn&#039;t find the issue causing this.it just got fixed by itself( hail the magic unicorns running our routers).<br />btw what image you used for installing ? maybe it had a bug.<br />and I just copy from some section of my firewall config to other and restart the firewall service and it always worked.<br />I usually use the trunk version. but because I create my own images so I can replace the default installed apps.<br />If you have any more questions , I will be happy to help,though I am a newbie like you with just a little bit more exp.</p><p>P.S. be careful with your router . mine got bad sector( i think). whatever you write to its space it will be written to the flash and they are not really&nbsp; for many writes ( manufactures just writes the firmware updates to them).</p><p>if you write (create) files on it and write to them ( like logs outside of tmp area) , I recommend using a external_root approach with a usb. that way you will also get more space for other stuff to install.</p><p>I will go that way for my new wrt1200ac router too even though it has 128MB flash.(supposedly but I can only see 22MB, the rest is for many configs that I cant touch). I was burned once with flash bad sector ( or what ever that is maybe it was ram bad sector) so I will try to use the usb approach.</p>											<p class="post-edited">(Last edited by <strong>rezad1393</strong> on 2 Sep 2016, 17:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p339685">
				<div class="post-metadata">
					<div class="post-num">Post #306</div>
					<div class="post-author">hacki</div>
					<div class="post-datetime">
						29 Sep 2016, 17:13					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I&#039;d&nbsp; like to give that whole VDSL with OpenWRT business another try.</p><p>But first, i have to ask... What kind of cable do i even need, what port on the Router do i use? </p><p>You see, my Telekom Speedport has a cable with a TAE-F plug on one end and an RJ45 on the other. </p><p>The W8970 has 4 (RJ45) Ethernet ports and one RJ11 labled &quot;ADSL&quot; </p><p>Surely this cant work if i just stick that telekom cable into one of the ethernet ports? </p><p>And surely a regular RJ11 telephone cable doenst have enough shielding for vdsl 50? </p><br /><p>Thanks</p>											<p class="post-edited">(Last edited by <strong>hacki</strong> on 29 Sep 2016, 17:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p339698">
				<div class="post-metadata">
					<div class="post-num">Post #307</div>
					<div class="post-author">dziny</div>
					<div class="post-datetime">
						29 Sep 2016, 18:52					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hacki wrote:</cite><blockquote><p>And surely a regular RJ11 telephone cable doenst have enough shielding for vdsl 50?</p></blockquote></div><p>Shielding? We are talking about copper wires between you and the exchange which many times are not even twisted. Regular RJ11 cable works just fine for all of us.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p339706">
				<div class="post-metadata">
					<div class="post-num">Post #308</div>
					<div class="post-author">hacki</div>
					<div class="post-datetime">
						29 Sep 2016, 21:03					</div>
				</div>
				<div class="post-content content">
					<p>Alright.</p><p>Well, in any case, it doesnt work, still only syncs up with ADSL speed (18/7mbits) and doesnt log in.</p><p>I&#039;ll wait for the next release of openwrt or an official release of LEDE. Dont want to screw around with snapshots. </p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p339721">
				<div class="post-metadata">
					<div class="post-num">Post #309</div>
					<div class="post-author">dziny</div>
					<div class="post-datetime">
						30 Sep 2016, 00:11					</div>
				</div>
				<div class="post-content content">
					<p>Hacki, you might want to post your /etc/config/network just to see that your config looks right.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p339794">
				<div class="post-metadata">
					<div class="post-num">Post #310</div>
					<div class="post-author">hacki</div>
					<div class="post-datetime">
						30 Sep 2016, 15:17					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I got it (kindof) working with the following config: </p><div class="codebox"><pre><code>config atm-bridge &#039;atm&#039;
        option vpi &#039;1&#039;
        option vci &#039;32&#039;
        option encaps &#039;llc&#039;
        option payload &#039;bridged&#039;

config interface &#039;wan&#039;
    option ifname &#039;ptm0.7&#039;
    option proto &#039;pppoe&#039;
    option username &#039;foo &#039;
    option password &#039;bar&#039;
    option ipv6 &#039;1&#039;


config vdsl &#039;dsl&#039;
    option annex &#039;b&#039; 
    option firmware &#039;/lib/firmware/vdsl.bin&#039; 
    option tone &#039;bv&#039; 
    option xfer_mode &#039;ptm&#039;</code></pre></div><p>I&#039;m using the Firmware_Speedport_W921V_1.21.000.bin firmware.</p><br /><p>Unfortunately it still only syncs at ADSL speeds; but at least im online.</p><div class="codebox"><pre><code>~# /etc/init.d/dsl_control status
Chipset:        Lantiq-VRx Unknown
Line State:        UP [0x801: showtime_tc_sync]
Data Rate:        18.820 Mb/s / 1.416 Mb/s
Line Attenuation:    8.3dB / 0.0dB
Noise Margin:        6.0dB / 5.6dB
Line Uptime:        1m 59s</code></pre></div><br /><p>I suspect its a problem with the firmware i&#039;m using?<br />Is there some other firmware that might work?</p><p>Tried the Annex B vdsl.bin from here <a href="https://github.com/ScApi/P2812HNUFx-Pre-Build/tree/OpenWrt-Designated-Driver-r47026/F3%20OpenWRT/vdsl%20firmware">https://github.com/ScApi/P2812HNUFx-Pre … 20firmware</a></p><p>Played around with the tone/annex settings (a,av,b,bv), </p><p>still only adsl speed. (I have a VDSL 50 line)</p>											<p class="post-edited">(Last edited by <strong>hacki</strong> on 30 Sep 2016, 15:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p339820">
				<div class="post-metadata">
					<div class="post-num">Post #311</div>
					<div class="post-author">dziny</div>
					<div class="post-datetime">
						30 Sep 2016, 19:41					</div>
				</div>
				<div class="post-content content">
					<p>Your config looks OK but you are clearly using an older version of dsl_control (old firmware) as the new one gives much more info. I just use firmware that was packed with recent trunk and it works OK. The info looks like this<br /></p><div class="codebox"><pre><code>ATU-C Vendor ID:                          Broadcom 164.140
ATU-C System Vendor ID:                   Broadcom
Chipset:                                  Lantiq-VRX200 Unknown
Firmware Version:                         5.7.3.3.0.6
API Version:                              4.16.6.3
XTSE Capabilities:                        0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x2
Annex:                                    B
Line Mode:                                G.993.2 (VDSL2)
Profile:                                  17a
Line State:                               UP [0x801: showtime_tc_sync]
Forward Error Correction Seconds (FECS):  Near: 0 / Far: 6343
Errored seconds (ES):                     Near: 0 / Far: 1134
Severely Errored Seconds (SES):           Near: 0 / Far: 0
Loss of Signal Seconds (LOSS):            Near: 0 / Far: 0
Unavailable Seconds (UAS):                Near: 33 / Far: 33
Header Error Code Errors (HEC):           Near: 0 / Far: 0
Non Pre-emtive CRC errors (CRC_P):        Near: 0 / Far: 0
Pre-emtive CRC errors (CRCP_P):           Near: 0 / Far: 0
Power Management Mode:                    L0 - Synchronized
Latency / Interleave Delay:               Down: Fast (0.16 ms) / Up: Fast (0.0 ms)
Data Rate:                                Down: 39.950 Mb/s / Up: 1.999 Mb/s
Line Attenuation (LATN):                  Down: 13.6dB / Up: 15.0dB
Signal Attenuation (SATN):                Down: 13.7dB / Up: 15.8dB
Noise Margin (SNR):                       Down: 14.1dB / Up: 29.5dB
Aggregate Transmit Power(ACTATP):         Down: 2.1dB / Up: 13.5dB
Max. Attainable Data Rate (ATTNDR):       Down: 66.779 Mb/s / Up: 24.246 Mb/s
Line Uptime Seconds:                      446034
Line Uptime:                              5d 3h 53m 54s</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p339825">
				<div class="post-metadata">
					<div class="post-num">Post #312</div>
					<div class="post-author">hacki</div>
					<div class="post-datetime">
						30 Sep 2016, 20:41					</div>
				</div>
				<div class="post-content content">
					<p>Yes, well, i&#039;m using CC 15.05.1 </p><p>I dont really feel like flashing a new image, especially since im using an extroot setup, and i dont exactly know how that would work out. <br />Dont want to spend hours trying to get that thing working again..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p339851">
				<div class="post-metadata">
					<div class="post-num">Post #313</div>
					<div class="post-author">hacki</div>
					<div class="post-datetime">
						1 Oct 2016, 01:07					</div>
				</div>
				<div class="post-content content">
					<p>This is starting to piss me off. </p><p>I couldnt resist and tried upgrading to Trunk. </p><p>That worked, but then it turned out USB is broken. It didnt work, despite having all the modules installed and loaded. <br />Great.</p><p>So on to LEDE Trunk. USB works! Yay. </p><p>But: </p><div class="codebox"><pre><code>ATU-C Vendor ID:                          
ATU-C System Vendor ID:                   
Chipset:                                  Lantiq-VRX200 Unknown
Firmware Version:                         5.8.1.5.0.7
API Version:                              4.17.18.6
XTSE Capabilities:                        0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x2
Annex:                                    B
Line Mode:                                G.993.2 (VDSL2)
Profile:                                  17a
Line State:                               UP [0x801: showtime_tc_sync]
Forward Error Correction Seconds (FECS):  Near: 0 / Far: 0
Errored seconds (ES):                     Near: 0 / Far: 82
Severely Errored Seconds (SES):           Near: 0 / Far: 22
Loss of Signal Seconds (LOSS):            Near: 0 / Far: 4
Unavailable Seconds (UAS):                Near: 220 / Far: 220
Header Error Code Errors (HEC):           Near: 0 / Far: 0
Non Pre-emtive CRC errors (CRC_P):        Near: 0 / Far: 0
Pre-emtive CRC errors (CRCP_P):           Near: 0 / Far: 0
Power Management Mode:                    L0 - Synchronized
Latency / Interleave Delay:               Down: Fast (0.16 ms) / Up: Interleave (5.0 ms)
Data Rate:                                Down: 18.710 Mb/s / Up: 1.532 Mb/s
Line Attenuation (LATN):                  Down: 7.9dB / Up: 3.7dB
Signal Attenuation (SATN):                Down: 7.9dB / Up: 3.7dB
Noise Margin (SNR):                       Down: 6.0dB / Up: 6.2dB
Aggregate Transmit Power (ACTATP):        Down: 12.8dB / Up: 14.5dB
Max. Attainable Data Rate (ATTNDR):       Down: 19.730 Mb/s / Up: 1.558 Mb/s
Line Uptime Seconds:                      7
Line Uptime:                              7s</code></pre></div><p>... Great. </p><p>I tried firmware versions 5.7.3.3.0.6 as well as 5.7.9.9.0.something - no difference. It only wants to sync at about 19/1.5 mbit\s </p><p>So what now?</p><p>And before you ask; the speedport gets a sync with 55 mbit\s or something.</p>											<p class="post-edited">(Last edited by <strong>hacki</strong> on 1 Oct 2016, 01:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p339898">
				<div class="post-metadata">
					<div class="post-num">Post #314</div>
					<div class="post-author">hacki</div>
					<div class="post-datetime">
						1 Oct 2016, 14:52					</div>
				</div>
				<div class="post-content content">
					<p>Problem Solved.</p><p>It was in fact the Cable. </p><p>I slapped together a little RJ45 to RJ11 adapter to use the telekom cable i have with the W8970 .. Lo and behold: </p><div class="codebox"><pre><code>ATU-C Vendor ID:                          Broadcom 176.29
ATU-C System Vendor ID:                   Broadcom
Chipset:                                  Lantiq-VRX200 Unknown
Firmware Version:                         5.8.1.5.0.7
API Version:                              4.17.18.6
XTSE Capabilities:                        0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x2
Annex:                                    B
Line Mode:                                G.993.5 (VDSL2 with down- and upstream vectoring)
Profile:                                  17a
Line State:                               UP [0x801: showtime_tc_sync]
Forward Error Correction Seconds (FECS):  Near: 0 / Far: 33955
Errored seconds (ES):                     Near: 0 / Far: 163
Severely Errored Seconds (SES):           Near: 0 / Far: 22
Loss of Signal Seconds (LOSS):            Near: 0 / Far: 4
Unavailable Seconds (UAS):                Near: 110 / Far: 110
Header Error Code Errors (HEC):           Near: 0 / Far: 0
Non Pre-emtive CRC errors (CRC_P):        Near: 0 / Far: 0
Pre-emtive CRC errors (CRCP_P):           Near: 0 / Far: 0
Power Management Mode:                    L0 - Synchronized
Latency / Interleave Delay:               Down: Fast (0.15 ms) / Up: Fast (1.0 ms)
Data Rate:                                Down: 51.392 Mb/s / Up: 10.046 Mb/s
Line Attenuation (LATN):                  Down: 15.0dB / Up: 15.4dB
Signal Attenuation (SATN):                Down: 15.1dB / Up: 15.5dB
Noise Margin (SNR):                       Down: 19.4dB / Up: 25.1dB
Aggregate Transmit Power (ACTATP):        Down: 3.6dB / Up: 14.5dB
Max. Attainable Data Rate (ATTNDR):       Down: 102.941 Mb/s / Up: 38.728 Mb/s
Line Uptime Seconds:                      10
Line Uptime:                              10s</code></pre></div><p>I suspect it has something to do with the little board thats hidden in the TAE plug, looks like a resistor and a diode or something.</p><p>Edit: This is really weird. <br />I looked into it a little further and it turns out the little board in there is called the &quot;galvanic signature&quot; or somesuch; its only there for diagnostic purposes and nothing else. <br />So whats the difference between the two cables? Well; the telecom cable only has two pins. <br />The other cables has all 6 pins connected. So i tried what happens when i cut pins 3 through 6 .... What should i say: </p><div class="codebox"><pre><code>/etc/init.d/dsl_control status
ATU-C Vendor ID:                          
ATU-C System Vendor ID:                   
Chipset:                                  Lantiq-VRX200 Unknown
Firmware Version:                         5.8.1.5.0.7
API Version:                              4.17.18.6
XTSE Capabilities:                        0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x2
Annex:                                    B
Line Mode:                                G.993.5 (VDSL2 with down- and upstream vectoring)
Profile:                                  17a
Line State:                               UP [0x801: showtime_tc_sync]
Forward Error Correction Seconds (FECS):  Near: 0 / Far: 0
Errored seconds (ES):                     Near: 0 / Far: 163
Severely Errored Seconds (SES):           Near: 0 / Far: 22
Loss of Signal Seconds (LOSS):            Near: 3 / Far: 4
Unavailable Seconds (UAS):                Near: 286 / Far: 286
Header Error Code Errors (HEC):           Near: 0 / Far: 0
Non Pre-emtive CRC errors (CRC_P):        Near: 0 / Far: 0
Pre-emtive CRC errors (CRCP_P):           Near: 0 / Far: 0
Power Management Mode:                    L0 - Synchronized
Latency / Interleave Delay:               Down: Fast (0.15 ms) / Up: Fast (1.0 ms)
Data Rate:                                Down: 51.392 Mb/s / Up: 10.046 Mb/s
Line Attenuation (LATN):                  Down: 15.2dB / Up: 15.5dB
Signal Attenuation (SATN):                Down: 15.3dB / Up: 15.5dB
Noise Margin (SNR):                       Down: 20.2dB / Up: 25.6dB
Aggregate Transmit Power (ACTATP):        Down: 3.5dB / Up: 14.5dB
Max. Attainable Data Rate (ATTNDR):       Down: 105.594 Mb/s / Up: 39.302 Mb/s
Line Uptime Seconds:                      4
Line Uptime:                              4s</code></pre></div><br /><p>This doesnt make a whole lot of sense to me since there are only 2 pins connected inside the telephone wall jack.</p><p>I&#039;m just glad i finally got it working..</p>											<p class="post-edited">(Last edited by <strong>hacki</strong> on 1 Oct 2016, 15:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p339909">
				<div class="post-metadata">
					<div class="post-num">Post #315</div>
					<div class="post-author">Scotch&#039;s</div>
					<div class="post-datetime">
						1 Oct 2016, 16:20					</div>
				</div>
				<div class="post-content content">
					<p>From the beginning I suspected that there was something wrong with Your connection - Your SNR was very low (6dB).</p><p>Now I have a tip for you. <br />Since your SNR is around 20dB now You can try to reduce it for 3dB using commands below:<br /></p><div class="codebox"><pre><code>dsl_cpe_pipe.sh locs 0 -30
dsl_cpe_pipe.sh acs 2</code></pre></div><p>As the result your router should have better synchro (over 50Mb/s)</p><p>It works with LEDE - I checked that with my ZyXEL P-2812HNU-F1<br />My default synchro was 64Mb/s - after I reduced SNR for 5dB (dsl_cpe_pipe.sh locs 0 -50) I get synchro 77Mb/s (my vdsl line is 80Mb/s).</p>											<p class="post-edited">(Last edited by <strong>Scotch&#039;s</strong> on 1 Oct 2016, 16:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p339910">
				<div class="post-metadata">
					<div class="post-num">Post #316</div>
					<div class="post-author">hacki</div>
					<div class="post-datetime">
						1 Oct 2016, 16:26					</div>
				</div>
				<div class="post-content content">
					<p>Hi, </p><p>The synchro im getting now is fine, since i only have a VDSL 50 line. <br />Its now getting precisely the same rate i&#039;m getting with the telekom speedport. </p><p>I just dont understand how cutting a few cables could have that effect. I wonder if they are cross-connected inside the wall jack which confuses the W8970 or the DSLAM.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p339934">
				<div class="post-metadata">
					<div class="post-num">Post #317</div>
					<div class="post-author">dziny</div>
					<div class="post-datetime">
						1 Oct 2016, 21:44					</div>
				</div>
				<div class="post-content content">
					<p>Great! By the way in your config you can safely delete the section &quot;atm-bridge&quot;</p><div class="codebox"><pre><code>config atm-bridge &#039;atm&#039;
        option vpi &#039;1&#039;
        option vci &#039;32&#039;
        option encaps &#039;llc&#039;
        option payload &#039;bridged&#039;</code></pre></div><p>as this is for adsl not vdsl. It makes no difference performance-wise just your config is nicer and cleaner.</p>											<p class="post-edited">(Last edited by <strong>dziny</strong> on 1 Oct 2016, 21:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p340002">
				<div class="post-metadata">
					<div class="post-num">Post #318</div>
					<div class="post-author">trismo</div>
					<div class="post-datetime">
						2 Oct 2016, 19:52					</div>
				</div>
				<div class="post-content content">
					<p>@haki<br />Scotch&#039;s tip increase the line quality not the speed <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p340785">
				<div class="post-metadata">
					<div class="post-num">Post #319</div>
					<div class="post-author">s7mx1</div>
					<div class="post-datetime">
						10 Oct 2016, 15:15					</div>
				</div>
				<div class="post-content content">
					<p><strong>How to backup original firmware and install openwrt without opening the case</strong></p><p>You will need:</p><p>1) a usb stick/thumb drive formatted as vfat/msdos <br />2) PC connected to TD-W8970 v 1 running original firmware either by wire or wireless<br />3) Telent and dd installed on the PC</p><p><strong>Prepare the openwrt images on PC</strong></p><p>Download the official 15.05 relese of openwrt-lantiq-xrx200-TDW8970-sysupgrade.image and run the following commnad:</p><div class="codebox"><pre><code>dd if=openwrt-lantiq-xrx200-TDW8970-sysupgrade.image bs=1310720 skip=1 of=openwrt-lantiq-xrx200-TDW8970-sysupgrade-1.image</code></pre></div><p>Create folder td-w8970 on your usb stick/thumb drive then copy these two files over the newly created folder. Unmount/eject the usb stick and plug it into the usb port on the back of TD-W8970.</p><p><strong>Backup the original firmware</strong><br />Open telnet and connect to 192.168.1.1 with login/password both as admin. Type sh after logging successfully. Run the following command to backup:<br /></p><div class="codebox"><pre><code>cat /dev/mtd0 &gt; /var/usbdisk/sda1/td-w8970/mtd0
cat /dev/mtd1 &gt; /var/usbdisk/sda1/td-w8970/mtd1
cat /dev/mtd2 &gt; /var/usbdisk/sda1/td-w8970/mtd2
cat /dev/mtd3 &gt; /var/usbdisk/sda1/td-w8970/mtd3
cat /dev/mtd4 &gt; /var/usbdisk/sda1/td-w8970/mtd4
cat /dev/mtd5 &gt; /var/usbdisk/sda1/td-w8970/mtd5
cat /dev/mtd6 &gt; /var/usbdisk/sda1/td-w8970/mtd6</code></pre></div><p>Verify the size of mtd1 file on the usb stick by executing the following command:<br /></p><div class="codebox"><pre><code>ls -l /var/usbdisk/sda1/td-w8970/mtd1</code></pre></div><p>If the size is 1310720 you can go ahead with installing openwrt otherwise go back to &quot;Prepare the openwrt images on PC&quot; and replace 1310720 by the actual size in the dd command.</p><p><strong>Install openwrt</strong><br />Run the following command<br /></p><div class="codebox"><pre><code>cat /var/usbdisk/sda1/td-w8970/openwrt-lantiq-xrx200-TDW8970-sysupgrade.image &gt; /dev/mtdblock1
cat /var/usbdisk/sda1/td-w8970/openwrt-lantiq-xrx200-TDW8970-sysupgrade-1.image &gt; /dev/mtdblock2</code></pre></div><p>Reboot router afterwards.</p><p><strong>Notes</strong><br />DSL firmware install script no longer works. Google dsl_vr9_firmware_xdsl-05.04.08.00.00.06_05.04.04.04.00.01.bin and save either to /lib/firmware/vdsl.bin or mtdblock4 (mtd erase first then mount) and do a symbolic link to vdsl.bin</p><p>fq_codel is the default qdisc which caused unexplained packet loss and network dealy once on the wired network. I have now disabled it by having these lines in /etc/rc.local<br /></p><div class="codebox"><pre><code>for device in eth0 ifb0 ifb1 wlan0 wlan0-1; do
tc qdisc del dev $device root
tc qdisc del dev $device ingress
tc qdisc add dev $device root pfifo
done</code></pre></div><p>Sample network config section for UK ADSL PPOA (atm bridge section is not needed):<br /></p><div class="codebox"><pre><code>config interface &#039;wan&#039;
    option proto &#039;pppoa&#039;
    option encaps &#039;vc&#039;
    option vci &#039;38&#039;
    option vpi &#039;0&#039;
    option username &#039;foo&#039;
    option password &#039;bar&#039;
    option ipv6 &#039;0&#039;
    option mtu &#039;1492&#039;

config vdsl &#039;dsl&#039;
    option xfer_mode &#039;atm&#039;
    option tone &#039;av&#039;
    option annex &#039;a&#039;
    option firmware &#039;/lib/firmware/vdsl.bin&#039;</code></pre></div>											<p class="post-edited">(Last edited by <strong>s7mx1</strong> on 10 Oct 2016, 15:18)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p341489">
				<div class="post-metadata">
					<div class="post-num">Post #320</div>
					<div class="post-author">daryo24</div>
					<div class="post-datetime">
						18 Oct 2016, 20:16					</div>
				</div>
				<div class="post-content content">
					<p>I accidentally deleted the boot partition. now with a Raspberry Pi I want to write a rom that is empty. someone has the chip dump?<br />Thank You!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p341964">
				<div class="post-metadata">
					<div class="post-num">Post #321</div>
					<div class="post-author">bloodmaster</div>
					<div class="post-datetime">
						24 Oct 2016, 10:51					</div>
				</div>
				<div class="post-content content">
					<p>I flash my W8970 with Openwrt but the Wlan is not working (Led open green but no ssid on air)</p><p>I must have overwritten or erased by mistake the radio required for WLAN in flash and perhaps the&nbsp; MAC address for&nbsp; WLAN (ART Partition).</p><p>All the rest working fine with the W8970<br />.<br />Is anyway to restore Wlan fuction?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342053">
				<div class="post-metadata">
					<div class="post-num">Post #322</div>
					<div class="post-author">rogerw1984</div>
					<div class="post-datetime">
						25 Oct 2016, 09:55					</div>
				</div>
				<div class="post-content content">
					<p>Hi<br />Can anyone write the specs of 2 diodes for me.<br />D9 and D10. If you place the boards antennas towards you, they are on the middle of the left side of the board.<br />Thanks guys.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342666">
				<div class="post-metadata">
					<div class="post-num">Post #323</div>
					<div class="post-author">asc</div>
					<div class="post-datetime">
						1 Nov 2016, 02:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>bloodmaster wrote:</cite><blockquote><p>I flash my W8970 with Openwrt but the Wlan is not working (Led open green but no ssid on air)</p><p>I must have overwritten or erased by mistake the radio required for WLAN in flash and perhaps the&nbsp; MAC address for&nbsp; WLAN (ART Partition).</p><p>All the rest working fine with the W8970<br />.<br />Is anyway to restore Wlan fuction?</p></blockquote></div><p>Check first, if mdtblock6 was deleted, if yes, you can try to rewite.</p><p>hexdump&nbsp; /dev/mtdblock6 -C</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342722">
				<div class="post-metadata">
					<div class="post-num">Post #324</div>
					<div class="post-author">SlavekTT</div>
					<div class="post-datetime">
						1 Nov 2016, 17:46					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I&#039;m trying to install openwrt on my td-8970 ver.1.2 using <strong>s7mx1</strong>&#039;s guide from this topic. Everything went fine until I telnet my router. Login password admin/admin and I was in but my router via telnet did not recognize command &quot;sh&quot;. When I type help I&#039;ve got only few commands avaliable. What did I do wrong? My w8970 is running firmware softwareVersion=0.6.0 2.12 v000c.0 Build 140613 Rel.31066n<br /></p><div class="codebox"><pre><code>----------------------------------------------------------------------------------------------------------------
Welcome To Use TP-LINK COMMAND-LINE Interface Model.
----------------------------------------------------------------------------------------------------------------
TP-LINK(conf)#help
normal mode commands:
        clear           ---     clear screen
        exit            ---     leave to the privious mode
        help            ---     help info
        history         ---     show histroy commands
        logout          ---     logout cli model
config mode commands:
        config          ---     enter config mode
        adsl            ---     config adsl
        igmp            ---     igmp config
        wan             ---     wan config
        wlctl           ---     wireless config
        lan             ---     lan config
        dev             ---     device control
TP-LINK(conf)#sh
Command not found:sh</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p343429">
				<div class="post-metadata">
					<div class="post-num">Post #325</div>
					<div class="post-author">bassplayerchris</div>
					<div class="post-datetime">
						10 Nov 2016, 17:30					</div>
				</div>
				<div class="post-content content">
					<p>Please read to the end before you try this - while each step worked, my router didn&#039;t come back up at the end of it.</p><div class="quotebox"><cite>SlavekTT wrote:</cite><blockquote><p>Hi, I&#039;m trying to install openwrt on my td-8970 ver.1.2 using <strong>s7mx1</strong>&#039;s guide from this topic. Everything went fine until I telnet my router. Login password admin/admin and I was in but my router via telnet did not recognize command &quot;sh&quot;.</p></blockquote></div><p>You cannot use the standard telnet interface in this case. I was able to get a telnet interface by following and modifying the instructions here on the TD8890 page on the openwrt wiki</p><p>In the section &quot;Web Interface Hack (without opening the case)&quot;.&nbsp; </p><p>I basically downloaded the&nbsp; statPOSTer.jar file, and then ran it to download and decrypt the config file. I then added the single line:</p><div class="codebox"><pre><code>      &lt;Description val=&quot;N600 Wireless Dual Band Gigabit VDSL2 Modem Router`telnetd -p 1023 -l login`&quot; /&gt;</code></pre></div><p>Under the DeviceInfo section.</p><p>Created an encrypted config and uploaded it to the router. That gave me a telnet session on port 1023, which gives me access to a shell prompt.</p><p>I then followed the instructions outlined by s7mx1 (including the block size check against the size of mtd1). Unfortunately after a reboot (by typing &#039;reboot&#039; on the telnet shell), my router didn&#039;t come back up, appears bricked, and I&#039;ll need to dig out a serial interface to restore it, probably.</p>											<p class="post-edited">(Last edited by <strong>bassplayerchris</strong> on 10 Nov 2016, 23:24)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 13 of 16</div><nav><ul><li><a href="viewtopic.php%3Fid=42380&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42380&amp;p=11.html">11</a></li><li><a href="viewtopic.php%3Fid=42380&amp;p=12.html">12</a></li><li class="pagination-current"><span>13</span></li><li><a href="viewtopic.php%3Fid=42380&amp;p=14.html">14</a></li><li><a href="viewtopic.php%3Fid=42380&amp;p=15.html">15</a></li><li><a href="viewtopic.php%3Fid=42380&amp;p=16.html">16</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>