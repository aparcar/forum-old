<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> mwan3; multi-wan policy routing (general topic)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 22 May 2013 and 6 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 55 of 65</div><nav><ul><li><a href="viewtopic.php%3Fid=39052&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=39052&amp;p=53.html">53</a></li><li><a href="viewtopic.php%3Fid=39052&amp;p=54.html">54</a></li><li class="pagination-current"><span>55</span></li><li><a href="viewtopic.php%3Fid=39052&amp;p=56.html">56</a></li><li><a href="viewtopic.php%3Fid=39052&amp;p=57.html">57</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=39052&amp;p=65.html">65</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p288774">
				<div class="post-metadata">
					<div class="post-num">Post #1351</div>
					<div class="post-author">Vahe91</div>
					<div class="post-datetime">
						22 Aug 2015, 16:03					</div>
				</div>
				<div class="post-content content">
					<p>OpenWrt Chaos Calmer r46693 / LuCI (git-15.231.29322-8597b86) , Kernel Version&nbsp; &nbsp; 4.1.5<br />This message show for all interfaces<br />WARNING: some interfaces have no default route in the main routing table!</p><div class="codebox"><pre><code>Software versions : 

OpenWrt - OpenWrt Chaos Calmer r46693
LuCI - git-15.231.29322-8597b86

mwan3 - 1.6-2
mwan3-luci - 1.4-3

Output of &quot;cat /etc/config/mwan3&quot; : 

config rule &#039;dns&#039;
    option dest_ip &#039;92.43.137.17&#039;
    option proto &#039;all&#039;
    option sticky &#039;0&#039;
    option use_policy &#039;dnsucom&#039;

config rule &#039;dns1&#039;
    option dest_ip &#039;92.43.138.17&#039;
    option proto &#039;all&#039;
    option sticky &#039;0&#039;
    option use_policy &#039;dnsucom&#039;

config rule &#039;dns2&#039;
    option dest_ip &#039;92.43.138.1&#039;
    option proto &#039;all&#039;
    option sticky &#039;0&#039;
    option use_policy &#039;dnsucom&#039;

config rule &#039;dns3&#039;
    option dest_ip &#039;92.43.137.1&#039;
    option proto &#039;all&#039;
    option sticky &#039;0&#039;
    option use_policy &#039;dnsucom&#039;

config rule &#039;dns4&#039;
    option dest_ip &#039;188.115.192.34&#039;
    option proto &#039;all&#039;
    option sticky &#039;0&#039;
    option use_policy &#039;dnsorange&#039;

config rule &#039;dns5&#039;
    option dest_ip &#039;188.115.193.34&#039;
    option proto &#039;all&#039;
    option sticky &#039;0&#039;
    option use_policy &#039;dnsorange&#039;

config rule &#039;default_rule&#039;
    option dest_ip &#039;0.0.0.0/0&#039;
    option use_policy &#039;balanced&#039;

config policy &#039;wan_only&#039;
    option last_resort &#039;default&#039;
    list use_member &#039;wan_m1_w3&#039;
    list use_member &#039;wan3g_m2_w4&#039;

config policy &#039;wan2_only&#039;
    option last_resort &#039;default&#039;
    list use_member &#039;wan2_m1_w2&#039;
    list use_member &#039;wan3g_m2_w4&#039;

config policy &#039;wan3g_only&#039;
    list use_member &#039;wan3g_m1_w4&#039;
    option last_resort &#039;default&#039;

config policy &#039;dnsucom&#039;
    list use_member &#039;wan_m1_w3&#039;
    list use_member &#039;wan2_m2_w2&#039;
    option last_resort &#039;unreachable&#039;

config policy &#039;dnsorange&#039;
    list use_member &#039;wan3g_m1_w4&#039;
    option last_resort &#039;unreachable&#039;

config policy &#039;balanced&#039;
    list use_member &#039;wan_m1_w3&#039;
    list use_member &#039;wan2_m1_w2&#039;
    list use_member &#039;wan3g_m2_w4&#039;
    option last_resort &#039;unreachable&#039;

config member &#039;wan_m1_w3&#039;
    option interface &#039;wan&#039;
    option metric &#039;1&#039;
    option weight &#039;3&#039;

config member &#039;wan_m2_w3&#039;
    option interface &#039;wan&#039;
    option metric &#039;2&#039;
    option weight &#039;3&#039;

config member &#039;wan2_m1_w2&#039;
    option interface &#039;wan2&#039;
    option metric &#039;1&#039;
    option weight &#039;2&#039;

config member &#039;wan2_m2_w2&#039;
    option interface &#039;wan2&#039;
    option metric &#039;2&#039;
    option weight &#039;2&#039;

config member &#039;wan3g_m1_w4&#039;
    option interface &#039;wan3g&#039;
    option metric &#039;1&#039;
    option weight &#039;4&#039;

config member &#039;wan3g_m2_w4&#039;
    option interface &#039;wan3g&#039;
    option weight &#039;4&#039;
    option metric &#039;2&#039;

config interface &#039;wan&#039;
    option enabled &#039;1&#039;
    list track_ip &#039;8.8.4.4&#039;
    list track_ip &#039;8.8.8.8&#039;
    list track_ip &#039;208.67.222.222&#039;
    list track_ip &#039;208.67.220.220&#039;
    option reliability &#039;2&#039;
    option count &#039;1&#039;
    option timeout &#039;2&#039;
    option interval &#039;5&#039;
    option down &#039;3&#039;
    option up &#039;8&#039;

config interface &#039;wan2&#039;
    list track_ip &#039;8.8.8.8&#039;
    list track_ip &#039;208.67.220.220&#039;
    option reliability &#039;1&#039;
    option count &#039;1&#039;
    option timeout &#039;2&#039;
    option interval &#039;5&#039;
    option down &#039;3&#039;
    option up &#039;8&#039;
    option enabled &#039;1&#039;

config interface &#039;wan3g&#039;
    option enabled &#039;1&#039;
    list track_ip &#039;8.8.8.8&#039;
    option reliability &#039;1&#039;
    option count &#039;1&#039;
    option timeout &#039;2&#039;
    option interval &#039;5&#039;
    option down &#039;5&#039;
    option up &#039;5&#039;

Output of &quot;cat /etc/config/network&quot; : 

config interface &#039;loopback&#039;
    option ifname &#039;lo&#039;
    option proto &#039;static&#039;
    option ipaddr &#039;127.0.0.1&#039;
    option netmask &#039;255.0.0.0&#039;

config globals &#039;globals&#039;
    option ula_prefix &#039;fddc:e4d3:ab15::/48&#039;

config interface &#039;lan&#039;
    option ifname &#039;eth1&#039;
    option force_link &#039;1&#039;
    option type &#039;bridge&#039;
    option proto &#039;static&#039;
    option ipaddr &#039;192.168.1.1&#039;
    option netmask &#039;255.255.255.0&#039;
    option ip6assign &#039;60&#039;

config interface &#039;wan&#039;
    option proto &#039;dhcp&#039;
    option _orig_ifname &#039;eth0&#039;
    option _orig_bridge &#039;false&#039;
    option ifname &#039;eth0.2&#039;
    option metric &#039;10&#039;
    option macaddr &#039;46:C7:E1:8B:16:F9&#039;

config interface &#039;wan6&#039;
    option proto &#039;dhcpv6&#039;
    option _orig_ifname &#039;eth0&#039;
    option _orig_bridge &#039;false&#039;
    option ifname &#039;eth0.2&#039;
    option reqaddress &#039;try&#039;
    option reqprefix &#039;auto&#039;

config switch
    option name &#039;switch0&#039;
    option reset &#039;1&#039;
    option enable_vlan &#039;1&#039;
    option mirror_source_port &#039;0&#039;
    option mirror_monitor_port &#039;0&#039;

config switch_vlan
    option device &#039;switch0&#039;
    option vlan &#039;1&#039;
    option ports &#039;0 2 3 4&#039;
    option vid &#039;1&#039;

config switch_vlan
    option device &#039;switch0&#039;
    option vlan &#039;2&#039;
    option vid &#039;2&#039;
    option ports &#039;5 6t&#039;

config switch_vlan
    option device &#039;switch0&#039;
    option vlan &#039;3&#039;
    option vid &#039;3&#039;
    option ports &#039;1 6t&#039;

config interface &#039;wan2&#039;
    option proto &#039;dhcp&#039;
    option ifname &#039;eth0.3&#039;
    option metric &#039;20&#039;
    option macaddr &#039;8E:75:8D:C7:7E:5E&#039;

config interface &#039;wan3g&#039;
    option proto &#039;3g&#039;
    option device &#039;/dev/ttyUSB2&#039;
    option service &#039;umts_only&#039;
    option apn &#039;internet&#039;
    option pincode &#039;1111&#039;
    option dialnumber &#039;*99***1#&#039;
    option ipv6 &#039;auto&#039;
    option metric &#039;30&#039;

Output of &quot;ifconfig&quot; : 

3g-wan3g  Link encap:Point-to-Point Protocol  
          inet addr:5.77.237.90  P-t-P:10.64.64.64  Mask:255.255.255.255
          UP POINTOPOINT RUNNING NOARP MULTICAST  MTU:1500  Metric:1
          RX packets:17079 errors:0 dropped:0 overruns:0 frame:0
          TX packets:15397 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:3 
          RX bytes:14241563 (13.5 MiB)  TX bytes:1866023 (1.7 MiB)

br-lan    Link encap:Ethernet  HWaddr E8:94:F6:69:07:CA  
          inet addr:192.168.1.1  Bcast:192.168.1.255  Mask:255.255.255.0
          inet6 addr: fddc:e4d3:ab15::1/60 Scope:Global
          inet6 addr: fe80::ea94:f6ff:fe69:7ca/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:306842 errors:0 dropped:0 overruns:0 frame:0
          TX packets:438620 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:162416626 (154.8 MiB)  TX bytes:404287929 (385.5 MiB)

eth0      Link encap:Ethernet  HWaddr E8:94:F6:69:07:CB  
          inet6 addr: fe80::ea94:f6ff:fe69:7cb/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:397538 errors:0 dropped:0 overruns:0 frame:0
          TX packets:288245 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:374398624 (357.0 MiB)  TX bytes:163823901 (156.2 MiB)
          Interrupt:4 

eth0.2    Link encap:Ethernet  HWaddr 46:C7:E1:8B:16:F9  
          inet addr:46.162.218.193  Bcast:46.162.219.255  Mask:255.255.252.0
          inet6 addr: fe80::44c7:e1ff:fe8b:16f9/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:227488 errors:0 dropped:0 overruns:0 frame:0
          TX packets:174546 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:180050586 (171.7 MiB)  TX bytes:86104293 (82.1 MiB)

eth0.3    Link encap:Ethernet  HWaddr 8E:75:8D:C7:7E:5E  
          inet addr:46.162.218.197  Bcast:46.162.219.255  Mask:255.255.252.0
          inet6 addr: fe80::8c75:8dff:fec7:7e5e/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:170050 errors:0 dropped:0 overruns:0 frame:0
          TX packets:113691 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:187192354 (178.5 MiB)  TX bytes:76565772 (73.0 MiB)

eth1      Link encap:Ethernet  HWaddr E8:94:F6:69:07:CA  
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:291329 errors:0 dropped:35 overruns:0 frame:0
          TX packets:406475 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:151878912 (144.8 MiB)  TX bytes:380814017 (363.1 MiB)
          Interrupt:5 

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:7989 errors:0 dropped:0 overruns:0 frame:0
          TX packets:7989 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:694571 (678.2 KiB)  TX bytes:694571 (678.2 KiB)

Output of &quot;route -n&quot; : 

Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
10.64.64.64     0.0.0.0         255.255.255.255 UH    0      0        0 3g-wan3g
46.162.216.0    0.0.0.0         255.255.252.0   U     10     0        0 eth0.2
46.162.216.0    0.0.0.0         255.255.252.0   U     20     0        0 eth0.3
46.162.216.1    0.0.0.0         255.255.255.255 UH    10     0        0 eth0.2
46.162.216.1    0.0.0.0         255.255.255.255 UH    20     0        0 eth0.3
192.168.1.0     0.0.0.0         255.255.255.0   U     0      0        0 br-lan

Output of &quot;ip rule show&quot; : 

0:    from all lookup 128 
1:    from all lookup local 
1001:    from all iif eth0.2 lookup main 
1002:    from all iif eth0.3 lookup main 
1003:    from all iif 3g-wan3g lookup main 
2001:    from all fwmark 0x100/0xff00 lookup 1 
2002:    from all fwmark 0x200/0xff00 lookup 2 
2003:    from all fwmark 0x300/0xff00 lookup 3 
2253:    from all fwmark 0xfd00/0xff00 blackhole
2254:    from all fwmark 0xfe00/0xff00 unreachable
32766:    from all lookup main 
32767:    from all lookup default

Output of &quot;ip route list table 1-250&quot; : 

1
default via 46.162.216.1 dev eth0.2 
2
default via 46.162.216.1 dev eth0.3 
3
default via 10.64.64.64 dev 3g-wan3g</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p288800">
				<div class="post-metadata">
					<div class="post-num">Post #1352</div>
					<div class="post-author">arfett</div>
					<div class="post-datetime">
						22 Aug 2015, 20:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Vahe91 wrote:</cite><blockquote><p>OpenWrt Chaos Calmer r46693 / LuCI (git-15.231.29322-8597b86) , Kernel Version&nbsp; &nbsp; 4.1.5<br />This message show for all interfaces<br />WARNING: some interfaces have no default route in the main routing table!</p></blockquote></div><p>Is mwan3 still working correctly even with the LuCI message?</p><p>I&#039;ll need to try the new CC and see what&#039;s going on.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p288802">
				<div class="post-metadata">
					<div class="post-num">Post #1353</div>
					<div class="post-author">Vahe91</div>
					<div class="post-datetime">
						22 Aug 2015, 20:22					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arfett wrote:</cite><blockquote><div class="quotebox"><cite>Vahe91 wrote:</cite><blockquote><p>OpenWrt Chaos Calmer r46693 / LuCI (git-15.231.29322-8597b86) , Kernel Version&nbsp; &nbsp; 4.1.5<br />This message show for all interfaces<br />WARNING: some interfaces have no default route in the main routing table!</p></blockquote></div><p>Is mwan3 still working correctly even with the LuCI message?</p><p>I&#039;ll need to try the new CC and see what&#039;s going on.</p></blockquote></div><p>yes, mwan3 working correctly</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p289136">
				<div class="post-metadata">
					<div class="post-num">Post #1354</div>
					<div class="post-author">braveheartleo</div>
					<div class="post-datetime">
						25 Aug 2015, 14:46					</div>
				</div>
				<div class="post-content content">
					<p>Hi Adze,</p><p>I just wonder, is there any reason why mwan3 can&#039;t use the <em>nth</em> mode for the <em>statistic</em> iptables module, instead of the <em>random</em> mode?</p><p>Suppose the following examples taken from [1]:</p><div class="codebox"><pre><code>iptables -t nat -N OUTPUT_LB
iptables -t nat -A OUTPUT_LB -m statistic --mode nth --every 5 --packet 0 -j SNAT --to x1
iptables -t nat -A OUTPUT_LB -m statistic --mode nth --every 4 --packet 0 -j SNAT --to x2
iptables -t nat -A OUTPUT_LB -m statistic --mode nth --every 3 --packet 0 -j SNAT --to x3
iptables -t nat -A OUTPUT_LB -m statistic --mode nth --every 2 --packet 0 -j SNAT --to x4
iptables -t nat -A OUTPUT_LB -j SNAT --to x5
iptables -t nat -A OUTPUT -m state --state NEW -j OUTPUT_LB</code></pre></div><div class="codebox"><pre><code>iptables -t nat -N OUTPUT_LB
iptables -t nat -A OUTPUT_LB -m statistic --mode random --probability 0.20000  -j SNAT --to x1
iptables -t nat -A OUTPUT_LB -m statistic --mode random --probability 0.25000  -j SNAT --to x2
iptables -t nat -A OUTPUT_LB -m statistic --mode random --probability 0.33333  -j SNAT --to x3
iptables -t nat -A OUTPUT_LB -m statistic --mode random --probability 0.50000  -j SNAT --to x4
iptables -t nat -A OUTPUT_LB -j SNAT --to x5
iptables -t nat -A OUTPUT -m state --state NEW -j OUTPUT_LB</code></pre></div><p>You can see that the <em>nth</em> mode properly does load balancing by matching every <em>n</em>th packet and distributing to each configured WANs.</p><p>Unlike the <em>random</em> mode that does &quot;random&quot; balancing, you really can&#039;t rely on probablity to <span class="bbu">properly load balance each time</span>. The problem with &quot;random&quot; balancing is that there can exist corner cases where the probabilistic matching algorithm assigns all packets to a single WAN interface, and I have encountered such corner cases occasionally in my dual-WAN setup even at 0.5 probability. I had to restart the bandwidth tests (bufferbloat measurements using betterspeedtest.sh from [2]) when I noticed that only a single WAN is having any activity (from the physical port indicator located on the router, on a quiet network) and thus I wasn&#039;t getting the combined bandwidth (and bufferbloat effects if any) of my two WANs.</p><p>The uninitiated might be lead into thinking that mwan3 <span class="bbu">really</span> does load balancing, when it actually does &quot;random&quot; balancing and expect proper distribution of traffic depending upon the user-defined rules.</p><p>[1] <a href="https://bbs.archlinux.org/viewtopic.php?pid=1480716#p1480716">https://bbs.archlinux.org/viewtopic.php … 6#p1480716</a><br />[2] <a href="https://github.com/richb-hanover/CeroWrtScripts/">https://github.com/richb-hanover/CeroWrtScripts/</a></p>											<p class="post-edited">(Last edited by <strong>braveheartleo</strong> on 25 Aug 2015, 15:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p290165">
				<div class="post-metadata">
					<div class="post-num">Post #1355</div>
					<div class="post-author">gamba47</div>
					<div class="post-datetime">
						2 Sep 2015, 15:26					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys. This post is so huge! sorry for ask here.</p><p>Is there any maintainer of this great scripts ?</p><p>I have a <a href="https://forum.openwrt.org/viewtopic.php?id=59285">problem</a> an the possible solution but i can&#039;t see how can i contribute.<br />There is a <a href="https://github.com/Adze1502/mwan">github mwan3</a> but it say is no longer maintained.</p><br /><p>Best regards.</p><p>gamba47</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p290166">
				<div class="post-metadata">
					<div class="post-num">Post #1356</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						2 Sep 2015, 15:34					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m the maintainer.. What is your problem?</p><p>The maintained current version is available at <a href="https://github.com/openwrt/packages/tree/master/net/mwan3">https://github.com/openwrt/packages/tre … /net/mwan3</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p290168">
				<div class="post-metadata">
					<div class="post-num">Post #1357</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						2 Sep 2015, 15:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>braveheartleo wrote:</cite><blockquote><p>I just wonder, is there any reason why mwan3 can&#039;t use the <em>nth</em> mode for the <em>statistic</em> iptables module, instead of the <em>random</em> mode?</p></blockquote></div><p>Sorry for late reply, i did not see any update on this thread until just now.</p><p>There is no specific reason why i used random instead of nth. I was familiar with random and not with nth. As you already mentioned, the distrubution over the load-balanced wan interfaces gets better with higher loads. Deviation gets higher with fewer samples.</p><p>At first glance i think random is more easy to implement than nth. Let me explain why. Lets take for example a load-balanced setup with three interfaces with a 40-40-20 distribution. With random random i can do this with just three lines. With nth (if not mistaken) i need at least 5 lines. That&#039;s why i like to keep it at random, unless you can tell me a way to do above example also in three lines.</p>											<p class="post-edited">(Last edited by <strong>Adze</strong> on 2 Sep 2015, 15:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p290197">
				<div class="post-metadata">
					<div class="post-num">Post #1358</div>
					<div class="post-author">gamba47</div>
					<div class="post-datetime">
						2 Sep 2015, 18:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Adze wrote:</cite><blockquote><p>I&#039;m the maintainer.. What is your problem?</p><p>The maintained current version is available at <a href="https://github.com/openwrt/packages/tree/master/net/mwan3">https://github.com/openwrt/packages/tre … /net/mwan3</a></p></blockquote></div><br /><p>Hi Adze!</p><p>My problem is here <a href="https://forum.openwrt.org/viewtopic.php?id=59285">https://forum.openwrt.org/viewtopic.php?id=59285</a></p><p>I can&#039;t ping to any IP using eth0.2 but this is a ISP problem. They don&#039;t wan&#039;t solve this.</p><br /><p>This works. <br /></p><div class="codebox"><pre><code>statusCode=$(curl --write-out %{http_code} --silent --output ip.txt http://ifconfig.me/ip)
if [ ${statusCode} -eq 200 ]
then
   echo OK
else
   echo NOOOO
fi</code></pre></div><p>How can i help to put this inside /usr/sbin/mwan3track ?</p><p>Best regards.</p><p>gamba47</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291079">
				<div class="post-metadata">
					<div class="post-num">Post #1359</div>
					<div class="post-author">Dook</div>
					<div class="post-datetime">
						9 Sep 2015, 22:29					</div>
				</div>
				<div class="post-content content">
					<p>last_resort is available in version 1.4?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291119">
				<div class="post-metadata">
					<div class="post-num">Post #1360</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						10 Sep 2015, 10:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Dook wrote:</cite><blockquote><p>last_resort is available in version 1.4?</p></blockquote></div><p>No, last_resort is introduced in 1.5-6</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291121">
				<div class="post-metadata">
					<div class="post-num">Post #1361</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						10 Sep 2015, 10:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>gamba47 wrote:</cite><blockquote><p>How can i help to put this inside /usr/sbin/mwan3track ?</p></blockquote></div><p>You could try and manually edit /usr/sbin/mwan3track. If the ping command in this script exit with anything other then 0, it is considered unsuccessful. If you were to replace the ping rule with someting like:</p><div class="codebox"><pre><code>local statuscode

statuscode=$(curl --write-out %{http_code} --silent --output ip.txt http://ifconfig.me/ip)

if [ ${statuscode} -eq 200 ]; then
   return 0
else
   return 1
fi</code></pre></div><p>it might work. Keep in mind though that using a check relying on DNS names could introduce unwanted effects. I would strongly advice to use checks based on ip addresses only.</p>											<p class="post-edited">(Last edited by <strong>Adze</strong> on 10 Sep 2015, 10:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291138">
				<div class="post-metadata">
					<div class="post-num">Post #1362</div>
					<div class="post-author">gamba47</div>
					<div class="post-datetime">
						10 Sep 2015, 16:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Adze wrote:</cite><blockquote><div class="quotebox"><cite>gamba47 wrote:</cite><blockquote><p>How can i help to put this inside /usr/sbin/mwan3track ?</p></blockquote></div><p>You could try and manually edit /usr/sbin/mwan3track. If the ping command in this script exit with anything other then 0, it is considered unsuccessful. If you were to replace the ping rule with someting like:</p><div class="codebox"><pre><code>local statuscode

statuscode=$(curl --write-out %{http_code} --silent --output ip.txt http://ifconfig.me/ip)

if [ ${statuscode} -eq 200 ]; then
   return 0
else
   return 1
fi</code></pre></div><p>it might work. Keep in mind though that using a check relying on DNS names could introduce unwanted effects. I would strongly advice to use checks based on ip addresses only.</p></blockquote></div><p>OK! i will make a try.<br />It&#039;s true about DNS names. I will search another way to do the same without use DNS.</p><p>Thanks for your time.</p><p>gamba47</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291145">
				<div class="post-metadata">
					<div class="post-num">Post #1363</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						10 Sep 2015, 18:32					</div>
				</div>
				<div class="post-content content">
					<p>You also have to tell curl which interface to use:</p><div class="codebox"><pre><code>local statuscode

statuscode=$(curl --ipv4 --interface $2 --write-out %{http_code} --silent --output ip.txt http://$track_ip/test.html)

if [ ${statuscode} -eq 200 ]; then
   return 0
else
   return 1
fi</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291181">
				<div class="post-metadata">
					<div class="post-num">Post #1364</div>
					<div class="post-author">Dook</div>
					<div class="post-datetime">
						10 Sep 2015, 23:25					</div>
				</div>
				<div class="post-content content">
					<p>In 1.4 if all members for that policy are down, what strategy mwan uses? blackhole, unreachable or default?</p>											<p class="post-edited">(Last edited by <strong>Dook</strong> on 10 Sep 2015, 23:31)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291191">
				<div class="post-metadata">
					<div class="post-num">Post #1365</div>
					<div class="post-author">gamba47</div>
					<div class="post-datetime">
						11 Sep 2015, 01:30					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Adze wrote:</cite><blockquote><p>You also have to tell curl which interface to use:</p><div class="codebox"><pre><code>local statuscode

statuscode=$(curl --ipv4 --interface $2 --write-out %{http_code} --silent --output ip.txt http://$track_ip/test.html)

if [ ${statuscode} -eq 200 ]; then
   return 0
else
   return 1
fi</code></pre></div></blockquote></div><p>First step OK!</p><p>I change this lines&nbsp; of /usr/sbin/mwan3track from this</p><div class="codebox"><pre><code>for track_ip in $track_ips; do
    ping -I $2 -c $4 -W $5 -s 4 -q $track_ip &amp;&gt; /dev/null
    if [ $? -eq 0 ]; then
        let host_up_count++
    else
        let lost++
    fi
done</code></pre></div><p>to this:</p><div class="codebox"><pre><code>for track_ip in $track_ips; do
         local statuscode
         statuscode=$(curl --ipv4 --interface $2 --write-out %{http_code} --silent --output /tmp/ip.txt http://ifconfig.me)
     if [ $statuscode -eq 200 ]; then
            let host_up_count++
        else
            let lost++
        fi
    done</code></pre></div><p>This works and mark both wan&#039;s online. When i force a shutdown on wan1 the scripts detects this and put wan1 in &quot;offline mode&quot;. When i power on again wan1 the script never get this new state.</p><p>Thanks for your time.</p><p>gamba47</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291268">
				<div class="post-metadata">
					<div class="post-num">Post #1366</div>
					<div class="post-author">dnahc</div>
					<div class="post-datetime">
						11 Sep 2015, 17:24					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>Interfaces status in Luci &quot;MWAN Interface Live Status&quot; seems broken in Chaos Calmer. It always shows &quot;offline&quot; status despite online interfaces, confirmed by detailed status and cli. Each time Overwiew is reloaded I get some uhttpd errors :<br />daemon.err uhttpd[20388]: ip: invalid argument &#039;1&#039; to &#039;table&#039;<br />daemon.err uhttpd[20388]: ip: invalid argument &#039;2&#039; to &#039;table&#039;</p><p>Thank you for this great package.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291275">
				<div class="post-metadata">
					<div class="post-num">Post #1367</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						11 Sep 2015, 18:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>gamba47 wrote:</cite><blockquote><p>When i power on again wan1 the script never get this new state.</p><p>Thanks for your time.</p><p>gamba47</p></blockquote></div><p>Could you try and create a mwan3 rule for the host(s) you are polling with policy default? Make sure that you place the rule on top of other rules. If this helps, i think i know why it fails.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291353">
				<div class="post-metadata">
					<div class="post-num">Post #1368</div>
					<div class="post-author">gamba47</div>
					<div class="post-datetime">
						12 Sep 2015, 00:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Adze wrote:</cite><blockquote><p>Could you try and create a mwan3 rule for the host(s) you are polling with policy default? Make sure that you place the rule on top of other rules. If this helps, i think i know why it fails.</p></blockquote></div><p>I don&#039;t understand you Adze :S</p><p>The problem is when i run </p><p><strong>mwan3 status | grep Interface</strong></p><p>this is a good result:</p><p><em><br />Interface status:<br />Interface wan is online (tracking active)<br />Interface wan2 is online (tracking active)<br /></em></p><p>this is the actual result:</p><p><em><br />Interface status:<br />Interface wan is offline (tracking active)<br />Interface wan2 is online (tracking active)<br /></em></p><br /><p>In the last result the WAN interface is OK but not yet reflects the propper status. If i restart mwan3 everything goes up again.</p><p>Best regards.</p><p>gamba47</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p292795">
				<div class="post-metadata">
					<div class="post-num">Post #1369</div>
					<div class="post-author">1wheler1</div>
					<div class="post-datetime">
						21 Sep 2015, 11:04					</div>
				</div>
				<div class="post-content content">
					<p>I have wdr4300, wan - GSM, wan2 - lan<br />I have a problem with running a VPN (PPTP)<br />In the first configuration, PPTP is working and not mwan3<br />In the second configuration, network with wan and wan2 I add a metric option &#039;10&#039; and the metric option &#039;20&#039;<br />Here it mwan3 work, and switches very smoothly in case of power wan, but stopped working pptp, in the gui as if you can see that it is connected but the traffic does not go through the VPN.</p><p>How do configure it to work mwan3 and PPTP???</p><p>1.<br /></p><div class="codebox"><pre><code>root@Gargoyle:~# route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
default         10.1xx.xxx.254  0.0.0.0         UG    0      0        0 pptp-vpn                   pptp
10.1xx.xxx.254  *               255.255.255.255 UH    0      0        0 pptp-vpn                   pptp
192.168.1.0     *               255.255.255.0   U     0      0        0 eth0.2
192.168.3.0     *               255.255.255.0   U     0      0        0 br-lan
192.168.178.0   *               255.255.255.0   U     0      0        0 eth1
2xx.xx.xx.186   192.168.178.1   255.255.255.255 UGH   0      0        0 eth1
root@Gargoyle:~# mwan3 status
Interface status:
Interface wan is offline (tracking down)
Interface wan2 is offline (tracking down)

root@Gargoyle:~#



/etc/config/network

config interface &#039;loopback&#039;
    option ifname &#039;lo&#039;
    option proto &#039;static&#039;
    option ipaddr &#039;127.0.0.1&#039;
    option netmask &#039;255.0.0.0&#039;

config interface &#039;lan&#039;
    option ifname &#039;eth0.1&#039;
    option type &#039;bridge&#039;
    option proto &#039;static&#039;
    option netmask &#039;255.255.255.0&#039;
    option ipaddr &#039;192.168.3.1&#039;
    option dns &#039;192.168.3.1&#039;

config interface &#039;wan&#039;
    option proto &#039;dhcp&#039;
    option ifname &#039;eth1&#039;
    
config interface &#039;wan2&#039;
    option proto &#039;dhcp&#039;
    option ifname &#039;eth0.2&#039;

config switch
    option name &#039;eth0&#039;
    option reset &#039;1&#039;
    option enable_vlan &#039;1&#039;

config switch_vlan
    option device &#039;eth0&#039;
    option vlan &#039;1&#039;
    option ports &#039;0t 2 3 4 5&#039;

config switch_vlan
    option device &#039;eth0&#039;
    option vlan &#039;2&#039;
    option ports &#039;0t 1&#039;

config interface &#039;vpnpptp&#039;
    option proto &#039;pptp&#039;
    option server &#039;xsrv.eux&#039;
    option username &#039;xloginx&#039;
    option password &#039;xpassx&#039;




/etc/config/firewall


config defaults
    option syn_flood &#039;1&#039;
    option input &#039;ACCEPT&#039;
    option output &#039;ACCEPT&#039;
    option forward &#039;REJECT&#039;

config zone
    option name &#039;lan&#039;
    list network &#039;lan&#039;
    option input &#039;ACCEPT&#039;
    option output &#039;ACCEPT&#039;
    option forward &#039;REJECT&#039;

config zone
    option name &#039;wan&#039;
    list network &#039;wan&#039;
    list network &#039;wan2&#039;
    option input &#039;REJECT&#039;
    option output &#039;ACCEPT&#039;
    option forward &#039;REJECT&#039;
    option masq &#039;1&#039;
    option mtu_fix &#039;1&#039;

config forwarding
    option src &#039;lan&#039;
    option dest &#039;wan&#039;

config rule
    option name &#039;Allow-DHCP-Renew&#039;
    option src &#039;wan&#039;
    option proto &#039;udp&#039;
    option dest_port &#039;68&#039;
    option target &#039;ACCEPT&#039;
    option family &#039;ipv4&#039;

config rule
    option name &#039;Allow-Ping&#039;
    option src &#039;wan&#039;
    option proto &#039;icmp&#039;
    option icmp_type &#039;echo-request&#039;
    option family &#039;ipv4&#039;
    option target &#039;ACCEPT&#039;

config rule
    option name &#039;Allow-DHCPv6&#039;
    option src &#039;wan&#039;
    option proto &#039;udp&#039;
    option src_ip &#039;fe80::/10&#039;
    option src_port &#039;547&#039;
    option dest_ip &#039;fe80::/10&#039;
    option dest_port &#039;546&#039;
    option family &#039;ipv6&#039;
    option target &#039;ACCEPT&#039;

config rule
    option name &#039;Allow-ICMPv6-Input&#039;
    option src &#039;wan&#039;
    option proto &#039;icmp&#039;
    list icmp_type &#039;echo-request&#039;
    list icmp_type &#039;echo-reply&#039;
    list icmp_type &#039;destination-unreachable&#039;
    list icmp_type &#039;packet-too-big&#039;
    list icmp_type &#039;time-exceeded&#039;
    list icmp_type &#039;bad-header&#039;
    list icmp_type &#039;unknown-header-type&#039;
    list icmp_type &#039;router-solicitation&#039;
    list icmp_type &#039;neighbour-solicitation&#039;
    list icmp_type &#039;router-advertisement&#039;
    list icmp_type &#039;neighbour-advertisement&#039;
    option limit &#039;1000/sec&#039;
    option family &#039;ipv6&#039;
    option target &#039;ACCEPT&#039;

config rule
    option name &#039;Allow-ICMPv6-Forward&#039;
    option src &#039;wan&#039;
    option dest &#039;*&#039;
    option proto &#039;icmp&#039;
    list icmp_type &#039;echo-request&#039;
    list icmp_type &#039;echo-reply&#039;
    list icmp_type &#039;destination-unreachable&#039;
    list icmp_type &#039;packet-too-big&#039;
    list icmp_type &#039;time-exceeded&#039;
    list icmp_type &#039;bad-header&#039;
    list icmp_type &#039;unknown-header-type&#039;
    option limit &#039;1000/sec&#039;
    option family &#039;ipv6&#039;
    option target &#039;ACCEPT&#039;

config include
    option path &#039;/etc/firewall.user&#039;
    option reload &#039;1&#039;

config include
    option type &#039;script&#039;
    option path &#039;/usr/lib/gargoyle_firewall_util/gargoyle_additions.firewall&#039;
    option family &#039;IPv4&#039;
    option reload &#039;1&#039;

config include &#039;miniupnpd&#039;
    option type &#039;script&#039;
    option path &#039;/usr/share/miniupnpd/firewall.include&#039;
    option family &#039;IPv4&#039;
    option reload &#039;1&#039;

config include &#039;openvpn_include_file&#039;
    option path &#039;/etc/openvpn.firewall&#039;
    option reload &#039;1&#039;

config zone &#039;vpnpptp_zone&#039;
    option name &#039;vpnpptp&#039;
    option network &#039;vpnpptp&#039;
    option input &#039;ACCEPT&#039;
    option output &#039;ACCEPT&#039;
    option forward &#039;ACCEPT&#039;
    option mtu_fix &#039;1&#039;
    option masq &#039;1&#039;

config forwarding &#039;vpnpptp_lan_forwarding&#039;
    option src &#039;lan&#039;
    option dest &#039;vpnpptp&#039;</code></pre></div><p>2.<br /></p><div class="codebox"><pre><code>root@Gargoyle:~# route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
default         10.1xx.xxx.254  0.0.0.0         UG    0      0        0 pptp-vpn         pptp
default         192.168.178.1   0.0.0.0         UG    10     0        0 eth1
default         192.168.1.1     0.0.0.0         UG    20     0        0 eth0.2
10.1xx.xxx.254  *               255.255.255.255 UH    0      0        0 pptp-vpn         pptp
192.168.1.0     *               255.255.255.0   U     20     0        0 eth0.2
192.168.3.0     *               255.255.255.0   U     0      0        0 br-lan
192.168.178.0   *               255.255.255.0   U     10     0        0 eth1
2xx.xx.xx.186   192.168.178.1   255.255.255.255 UGH   10     0        0 eth1
root@Gargoyle:~# mwan3 status
Interface status:
Interface wan is online (tracking active)
Interface wan2 is online (tracking active)

Policy balanced:
 wan2 (40%)
 wan (60%)

Policy wan2_only:
 wan2 (100%)

Policy wan2_wan:
 wan2 (100%)

Policy wan_only:
 wan (100%)

Policy wan_wan2:
 wan (100%)

Known networks:
destination        policy             hits
------------------------------------------------
127.0.0.0/8        default            24
224.0.0.0/3        default            44
10.100.201.254     default            0
192.168.1.0/24     default            48
192.168.3.0/24     default            108
192.168.178.0/24   default            387
2xx.xx.xx.186      default            6
10.100.200.184     default            1
127.0.0.0          default            0
127.0.0.0/8        default            24
127.0.0.1          default            24
127.255.255.255    default            0
192.168.1.0        default            0
192.168.1.122      default            45
192.168.1.255      default            0
192.168.3.0        default            0
192.168.3.1        default            57
192.168.3.255      default            0
192.168.178.0      default            0
192.168.178.100    default            381
192.168.178.255    default            0

Active rules:
source             destination        proto  src-port      dest-port     policy        hits
---------------------------------------------------------------------------------------------------
0.0.0.0/0          0.0.0.0/0          all                                wan_wan2       159

root@Gargoyle:~#</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p293949">
				<div class="post-metadata">
					<div class="post-num">Post #1370</div>
					<div class="post-author">dnahc</div>
					<div class="post-datetime">
						29 Sep 2015, 17:36					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dnahc wrote:</cite><blockquote><p>Hello,</p><p>Interfaces status in Luci &quot;MWAN Interface Live Status&quot; seems broken in Chaos Calmer. It always shows &quot;offline&quot; status despite online interfaces, confirmed by detailed status and cli. Each time Overwiew is reloaded I get some uhttpd errors :<br />daemon.err uhttpd[20388]: ip: invalid argument &#039;1&#039; to &#039;table&#039;<br />daemon.err uhttpd[20388]: ip: invalid argument &#039;2&#039; to &#039;table&#039;</p><p>Thank you for this great package.</p></blockquote></div><p>My mistake, it is on Luci from trunk, interfaces status work fine in Chaos Calmer version.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p294105">
				<div class="post-metadata">
					<div class="post-num">Post #1371</div>
					<div class="post-author">Philipp11</div>
					<div class="post-datetime">
						30 Sep 2015, 23:47					</div>
				</div>
				<div class="post-content content">
					<p>At first i want to thank you so much Adze for one of the best plugins i couldn&#039;t live without!</p><p>So I&#039;ve been using mwan3 for the past 2 years now at numerous locations. I always managed to figure out eventually occuring problems by mself, but I can&#039;t seem to perfectly configure my own setup.</p><p>What I have and want to achieve :<br />1 x wired WAN<br />1 x radiolink with 2 gateways and 2 static ipadresses over 1 physical ethernet port</p><p>I want to achieve beeing able to load balance my traffic over 2 different gateways only using 1 physical ethernet port (which is connected to my radio-link antenna)<br />Balancing between the wired connection and one of the radiolink gateways works without a hassle, the problem is that the 2nd&nbsp; interface of the vlan 1.3 uses the same gateway as the first one. Both virtual interfaces appear to be up and running since the ping of the 2nd virtual interface simply passes through the gateway from the first virtual interface.</p><br /><p>my /etc/config/network<br /></p><div class="codebox"><pre><code>cconfig interface &#039;loopback&#039;
    option ifname &#039;lo&#039;
    option proto &#039;static&#039;
    option ipaddr &#039;127.0.0.1&#039;
    option netmask &#039;255.0.0.0&#039;

config globals &#039;globals&#039;
    option ula_prefix &#039;fd30:0c4a:0bba::/48&#039;

config interface &#039;lan&#039;
    option ifname &#039;eth1.1&#039;
    option proto &#039;static&#039;
    option netmask &#039;255.255.255.0&#039;
    option type &#039;bridge&#039;
    option dns &#039;8.8.8.8&#039;
    option ipaddr &#039;192.168.0.1&#039;
    option gateway &#039;192.168.0.250&#039;

config interface &#039;wan2&#039;
    option proto &#039;static&#039;
    option netmask &#039;255.255.255.0&#039;
    option macaddr &#039;B0:48:7A:FF:36:95&#039;
    option metric &#039;20&#039;
    option ifname &#039;eth1.3&#039;
    option ipaddr &#039;192.168.20.38&#039;
    option dns &#039;213.73.91.35 8.8.8.8&#039;
    option gateway &#039;192.168.20.4&#039;

config interface &#039;wan2_2&#039;
    option proto &#039;static&#039;
    option netmask &#039;255.255.255.0&#039;
    option metric &#039;30&#039;
    option ifname &#039;eth1.3&#039;
    option macaddr &#039;B0:48:7A:FF:36:96&#039;
    option ipaddr &#039;192.168.20.37&#039;
    option gateway &#039;192.168.20.1&#039;
    option dns &#039;213.73.91.35 8.8.8.8&#039;

config interface &#039;wan&#039;
    option proto &#039;pppoe&#039;
    USERNAME HIDDEN
    PASSWORD HIDDEN
    option metric &#039;10&#039;
    option _orig_ifname &#039;eth0&#039;
    option _orig_bridge &#039;false&#039;
    option ifname &#039;eth0&#039;

config interface &#039;wan6&#039;
    option ifname &#039;@wan&#039;
    option proto &#039;dhcpv6&#039;

config switch
    option name &#039;switch0&#039;
    option reset &#039;1&#039;
    option enable_vlan &#039;1&#039;

config switch_vlan
    option device &#039;switch0&#039;
    option vlan &#039;1&#039;
    option vid &#039;1&#039;
    option ports &#039;0t 1 2 3&#039;

config switch_vlan
    option device &#039;switch0&#039;
    option vlan &#039;3&#039;
    option ports &#039;0t 4&#039;
    option vid &#039;3&#039;

config switch_vlan
    option device &#039;switch0&#039;
    option vlan &#039;2&#039;
    option ports &#039;5 6&#039;
    option vid &#039;2&#039;</code></pre></div><p>mwan3 status :<br /></p><div class="codebox"><pre><code>Interface status:
 interface wan is online (tracking active)
 interface wan2 is online (tracking active)
 interface wan2_2 is online (tracking active)

Policy balanced:
 wan2 (50%)
 wan2_2 (50%)

Policy balancedg2g3:
 unreachable

Policy express:
 wan2_2 (33%)
 wan2 (33%)
 wan (33%)

Policy wan2_only:
 wan2 (100%)

Policy wan2_wan:
 wan2 (100%)

Policy wan_only:
 wan (100%)

Policy wan_wan2:
 wan (100%)

Known networks:
 192.168.0.0/24
 192.168.0.0
 127.0.0.0/8
 192.168.20.38
 224.0.0.0/3
 62.218.4.126
 192.168.20.0
 192.168.20.37
 86.33.124.2
 127.0.0.1
 0.0.0.0
 127.255.255.255
 192.168.20.255
 192.168.0.1
 127.0.0.0
 192.168.20.0/24
 192.168.0.255

Active rules:
15442 1413K - balanced  all  --  *      *       192.168.0.101        0.0.0.0/0  
    0     0 - balanced  all  --  *      *       192.168.0.111        0.0.0.0/0  
   22  1320 - balanced  all  --  *      *       192.168.0.112        0.0.0.0/0  
    0     0 - balanced  all  --  *      *       192.168.0.113        0.0.0.0/0  
    0     0 - wan_only  tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            multiport sports 0:65535 multiport dports 6112
   35  1930 - wan_only  udp  --  *      *       0.0.0.0/0            0.0.0.0/0            multiport sports 0:65535 multiport dports 27000:29000,25162,9899,20006,9989,13000
    0     0 - wan_only  udp  --  *      *       0.0.0.0/0            0.0.0.0/0            multiport sports 0:65535 multiport dports 9987,1337
 4919  417K - balanced  all  --  *      *       0.0.0.0/0            0.0.0.0/0  
    0     0 - wan_only  tcp  --  *      *       0.0.0.0/0.0.0.1      0.0.0.0/0            multiport sports 0:65535 multiport dports 443
    0     0 - wan2_wan  tcp  --  *      *       0.0.0.1/0.0.0.1      0.0.0.0/0            multiport sports 0:65535 multiport dports 443
    0     0 - wan_only  udp  --  *      *       192.168.0.123        0.0.0.0/0            multiport sports 0:65535 multiport dports 3659,9565,9570,9000:9999
/etc/config/mwan3</code></pre></div><div class="codebox"><pre><code>config interface &#039;wan&#039;
    option enabled &#039;1&#039;
    list track_ip &#039;8.8.4.4&#039;
    list track_ip &#039;8.8.8.8&#039;
    list track_ip &#039;208.67.222.222&#039;
    list track_ip &#039;208.67.220.220&#039;
    option reliability &#039;2&#039;
    option count &#039;1&#039;
    option timeout &#039;2&#039;
    option interval &#039;5&#039;
    option down &#039;3&#039;
    option up &#039;8&#039;

config interface &#039;wan2&#039;
    list track_ip &#039;8.8.8.8&#039;
    list track_ip &#039;208.67.220.220&#039;
    option reliability &#039;1&#039;
    option count &#039;1&#039;
    option down &#039;3&#039;
    option enabled &#039;1&#039;
    option timeout &#039;4&#039;
    option interval &#039;10&#039;
    option up &#039;1&#039;

config interface &#039;wan2_2&#039;
    list track_ip &#039;8.8.8.8&#039;
    list track_ip &#039;208.67.220.220&#039;
    option reliability &#039;1&#039;
    option count &#039;1&#039;
    option down &#039;3&#039;
    option enabled &#039;1&#039;
    option timeout &#039;4&#039;
    option interval &#039;10&#039;
    option up &#039;1&#039;</code></pre></div><div class="codebox"><pre><code>Traceroute Virtual Interface 1.3 Gate 1 : 

root@OpenWrt:~# traceroute -s 192.168.20.38 cwtech.at
traceroute to cwtech.at (89.185.96.2) from 192.168.20.38, 30 hops max, 38 byte packets
 1  192.168.20.4 (192.168.20.4)  29.748 ms  15.921 ms  20.541 ms
 2  *  *  *

Traceroute Virtual Interface 1.3 Gate 2 : 
root@OpenWrt:~# traceroute -s 192.168.20.37 cwtech.at
traceroute to cwtech.at (89.185.96.2) from 192.168.20.37, 30 hops max, 38 byte packets
 1  192.168.20.4 (192.168.20.4)  10.060 ms  20.289 ms  17.060 ms
 2  *  *</code></pre></div><p>relevant output of ifconfig... here i notice that i can&#039;t find the IP of the vlans 2nd interface :<br /></p><div class="codebox"><pre><code>eth1.3    Link encap:Ethernet  HWaddr B0:48:7A:FF:36:96  
          inet addr:192.168.20.38  Bcast:192.168.20.255  Mask:255.255.255.0
          inet6 addr: fe80::b248:7aff:feff:3696/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:66463281 errors:0 dropped:3 overruns:0 frame:0
          TX packets:5771977 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:13234323480 (12.3 GiB)  TX bytes:633502959 (604.1 MiB)</code></pre></div><div class="codebox"><pre><code>Software versions : 

OpenWrt - OpenWrt Chaos Calmer 15.05
LuCI - git-15.248.30277-3836b45

mwan3 - 1.6-2
mwan3-luci - 1.4-3</code></pre></div><br /><br /><br /><p>Full output of &quot;ifconfig&quot; : <br /></p><div class="codebox"><pre><code>br-lan    Link encap:Ethernet  HWaddr 14:CC:20:A9:2E:36  
          inet addr:192.168.0.1  Bcast:192.168.0.255  Mask:255.255.255.0
          inet6 addr: fe80::16cc:20ff:fea9:2e36/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:25878124 errors:0 dropped:159 overruns:0 frame:0
          TX packets:37408486 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:3076950846 (2.8 GiB)  TX bytes:35435790822 (33.0 GiB)

eth0      Link encap:Ethernet  HWaddr 14:CC:20:A9:2E:37  
          inet6 addr: fe80::16cc:20ff:fea9:2e37/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:25127539 errors:0 dropped:0 overruns:0 frame:0
          TX packets:18068972 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:2696865450 (2.5 GiB)  TX bytes:2623394287 (2.4 GiB)
          Interrupt:4 

eth1      Link encap:Ethernet  HWaddr 14:CC:20:A9:2E:36  
          inet6 addr: fe80::16cc:20ff:fea9:2e36/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:117736341 errors:0 dropped:4 overruns:3 frame:0
          TX packets:44669911 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:2972906647 (2.7 GiB)  TX bytes:1291448577 (1.2 GiB)
          Interrupt:5 

eth1.1    Link encap:Ethernet  HWaddr 14:CC:20:A9:2E:36  
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:25374189 errors:0 dropped:333 overruns:0 frame:0
          TX packets:36654204 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:3057028219 (2.8 GiB)  TX bytes:34604726424 (32.2 GiB)

eth1.3    Link encap:Ethernet  HWaddr B0:48:7A:FF:36:96  
          inet addr:192.168.20.38  Bcast:192.168.20.255  Mask:255.255.255.0
          inet6 addr: fe80::b248:7aff:feff:3696/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:66465463 errors:0 dropped:3 overruns:0 frame:0
          TX packets:5774042 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:13235248775 (12.3 GiB)  TX bytes:633756892 (604.3 MiB)

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:2364 errors:0 dropped:0 overruns:0 frame:0
          TX packets:2364 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:177010 (172.8 KiB)  TX bytes:177010 (172.8 KiB)

pppoe-wan Link encap:Point-to-Point Protocol  
          inet addr:xxx P-t-P:62.218.4.126  Mask:255.255.255.255
          UP POINTOPOINT RUNNING NOARP MULTICAST  MTU:1492  Metric:1
          RX packets:24757788 errors:0 dropped:0 overruns:0 frame:0
          TX packets:17699176 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:3 
          RX bytes:19308106145 (17.9 GiB)  TX bytes:2222873720 (2.0 GiB)

wlan0     Link encap:Ethernet  HWaddr 14:CC:20:A9:2E:36  
          inet6 addr: fe80::16cc:20ff:fea9:2e36/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:877591 errors:0 dropped:0 overruns:0 frame:0
          TX packets:1505391 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:127880983 (121.9 MiB)  TX bytes:1010147471 (963.3 MiB)</code></pre></div><p>Output of &quot;route -n&quot; : </p><div class="codebox"><pre><code>Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
0.0.0.0         192.168.20.1    255.255.255.255 UGH   0      0        0 eth1.3
0.0.0.0         192.168.0.250   0.0.0.0         UG    0      0        0 br-lan
0.0.0.0         62.218.4.126    0.0.0.0         UG    10     0        0 pppoe-wan
0.0.0.0         192.168.20.4    0.0.0.0         UG    20     0        0 eth1.3
0.0.0.0         192.168.20.1    0.0.0.0         UG    30     0        0 eth1.3
62.218.4.126    0.0.0.0         255.255.255.255 UH    0      0        0 pppoe-wan
192.168.0.0     0.0.0.0         255.255.255.0   U     0      0        0 br-lan
192.168.20.0    0.0.0.0         255.255.255.0   U     20     0        0 eth1.3
192.168.20.0    0.0.0.0         255.255.255.0   U     30     0        0 eth1.3</code></pre></div><p>Output of &quot;ip rule show&quot; : <br /></p><div class="codebox"><pre><code>0:    from all lookup 128 
1:    from all lookup local 
1001:    from all iif pppoe-wan lookup main 
1002:    from all iif eth1.3 lookup main 
1003:    from all iif eth1.3 lookup main 
2001:    from all fwmark 0x100/0xff00 lookup 1 
2002:    from all fwmark 0x200/0xff00 lookup 2 
2003:    from all fwmark 0x300/0xff00 lookup 3 
2253:    from all fwmark 0xfd00/0xff00 blackhole
2254:    from all fwmark 0xfe00/0xff00 unreachable
32766:    from all lookup main 
32767:    from all lookup default</code></pre></div><p>Output of &quot;ip route list table 1-250&quot; : <br /></p><div class="codebox"><pre><code>1
default via 62.218.4.126 dev pppoe-wan 
2
default via 192.168.20.4 dev eth1.3 
3
default via 192.168.20.4 dev eth1.3 </code></pre></div><p>I would really really appreciate hints on what mistake(s) i made.</p><p>regards Philipp</p>											<p class="post-edited">(Last edited by <strong>Philipp11</strong> on 1 Oct 2015, 00:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p294498">
				<div class="post-metadata">
					<div class="post-num">Post #1372</div>
					<div class="post-author">arfett</div>
					<div class="post-datetime">
						3 Oct 2015, 20:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dnahc wrote:</cite><blockquote><div class="quotebox"><cite>dnahc wrote:</cite><blockquote><p>Hello,</p><p>Interfaces status in Luci &quot;MWAN Interface Live Status&quot; seems broken in Chaos Calmer. It always shows &quot;offline&quot; status despite online interfaces, confirmed by detailed status and cli. Each time Overwiew is reloaded I get some uhttpd errors :<br />daemon.err uhttpd[20388]: ip: invalid argument &#039;1&#039; to &#039;table&#039;<br />daemon.err uhttpd[20388]: ip: invalid argument &#039;2&#039; to &#039;table&#039;</p><p>Thank you for this great package.</p></blockquote></div><p>My mistake, it is on Luci from trunk, interfaces status work fine in Chaos Calmer version.</p></blockquote></div><p>I will investigate and see if I need to fix anything for the trunk branch.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p294672">
				<div class="post-metadata">
					<div class="post-num">Post #1373</div>
					<div class="post-author">inquba</div>
					<div class="post-datetime">
						4 Oct 2015, 23:04					</div>
				</div>
				<div class="post-content content">
					<p>HI. I was wondering if it is possible in mwan3 1.6&nbsp; &nbsp;that a ipset rule instead of a domain name or several domains... it could be put any domain ? or any ip.....?&nbsp; this is what I want to do</p><p>source IP =192.168.10.165&nbsp; &nbsp; destination address=0.0.0.0/0&nbsp; &nbsp;destination port= 80,443&nbsp; protocol=tcp sticky=yes ipset=kodi pollcy=balanced</p><p>so I should put the ipset rule in /etc/dnsmasq.conf.......but it is correct to put this way ? &quot; ipset=/0.0.0.0/0/kodi &quot; ??? it is correct to allow all ips that the source ip 192.168.10.165 wants ? with port 80 and 443 </p><p>thanks so much</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p294696">
				<div class="post-metadata">
					<div class="post-num">Post #1374</div>
					<div class="post-author">inquba</div>
					<div class="post-datetime">
						5 Oct 2015, 01:38					</div>
				</div>
				<div class="post-content content">
					<p>by the way.... I just install CC 15.05 in tl-mr3420 ..... i first install mwan3 since I wanted to use the ipset in version 1.6<br />I install and fine..... then I install dnsCrypt.... in two days I have to change a lot and sometimes reset.... the problem is that it works fine but when reboot.. sometimes i can not navigate in internet I dont have ouside internet. even when my 4 wans shown connected and working even in tests they have 0 loss in test... but in my PC I can go outside..... other times when reboot openwrt does not give DHCP registration... so I need to set fix IP in my pc in order to access...... I dont know if something brake with dnsCrypt.... then i did test from fresh install and wihout set or install DnsCrypt...... i thought dnscrypt was guilt.. when I set ignore resolv list.. as it said that should be...... so I didnt install anymore .....but have random problems with internet even without dnscrypt... maybe and maybe is when I put in /etc/dnsmasq.conf&nbsp; &nbsp;the ipset..... if I put ipset rule inside... sometimes I have no internet..... and when dont put ipset in fresh install.... i have internet fine...... it is possible that ipset in /etc/dnsmasq.conf break something ?&nbsp; thanks so much</p><p>NOTE: I have 4 more router that are installed with AA 12.09 with mwan3 and dnscrypt... wshaper and working excelent without any problem the router are wr740n, wr740nd and wr841ndv8.... my actual MR3420v2.2 is not compatible with AA 12.9 by the way</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p294720">
				<div class="post-metadata">
					<div class="post-num">Post #1375</div>
					<div class="post-author">inquba</div>
					<div class="post-datetime">
						5 Oct 2015, 07:06					</div>
				</div>
				<div class="post-content content">
					<p>last question.&nbsp; &nbsp;is SQM package in 15.05 now compatible with mwan3 ? wshaper take more ram than SQM and I was wondering if SQM would NO Hurt my mwan3 </p><p>thanks in advance<br />inquba</p>									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 1376 to 1375 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 55 of 65</div><nav><ul><li><a href="viewtopic.php%3Fid=39052&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=39052&amp;p=53.html">53</a></li><li><a href="viewtopic.php%3Fid=39052&amp;p=54.html">54</a></li><li class="pagination-current"><span>55</span></li><li><a href="viewtopic.php%3Fid=39052&amp;p=56.html">56</a></li><li><a href="viewtopic.php%3Fid=39052&amp;p=57.html">57</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=39052&amp;p=65.html">65</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>