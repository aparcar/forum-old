<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Howto enable channel 12 and 13 on TP-Link WR-1043ND?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 24 Mar 2018 and 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 3 of 4</div><nav><ul><li><a href="viewtopic.php%3Fid=35828&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=35828&amp;p=2.html">2</a></li><li class="pagination-current"><span>3</span></li><li><a href="viewtopic.php%3Fid=35828&amp;p=4.html">4</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p164971">
				<div class="post-metadata">
					<div class="post-num">Post #51</div>
					<div class="post-author">fame</div>
					<div class="post-datetime">
						18 Apr 2012, 21:54					</div>
				</div>
				<div class="post-content content">
					<p>This isn&#039;t a problem at all, because I have to wait 6 weeks for my vdsl (moving to a new city in june).</p><p>Would it be less work for you if you do it in german? I will send you my e-mail address via PM, so it&#039;s up to you to device wether you post it here in english or send it to me in german. Thanks again!</p><p>Here are some information about the vlan trunking which could be useful:</p><p><a href="https://forum.openwrt.org/viewtopic.php?pid=132148#p132148">https://forum.openwrt.org/viewtopic.php … 48#p132148</a></p>											<p class="post-edited">(Last edited by <strong>fame</strong> on 18 Apr 2012, 21:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p166366">
				<div class="post-metadata">
					<div class="post-num">Post #52</div>
					<div class="post-author">DerUltrazauberer</div>
					<div class="post-datetime">
						3 May 2012, 00:05					</div>
				</div>
				<div class="post-content content">
					<p>I tested the TP-Link with my VDSL2 connection and I get the normal internet working, but not the IPTV. So on next sunday I will test another config. My IPTV receiver won&#039;t receive any pictures. Very strange...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p168249">
				<div class="post-metadata">
					<div class="post-num">Post #53</div>
					<div class="post-author">cityedvlinz</div>
					<div class="post-datetime">
						27 May 2012, 02:36					</div>
				</div>
				<div class="post-content content">
					<p>The best und easy way, it works for me:</p><div class="codebox"><pre><code>cd /usr/lib/crda/
rm regulatory.bin
wget http://datatomb.de/mirror/stuff/regulatory.bin
reboot

iw reg set $YOURCOUNTRYCODE
iwlist wlan0 channel</code></pre></div><p>(Taken from <a href="http://smorgasbord.gavagai.nl/2010/09/wifi-regulatory-compliance-and-how-to-fix-it)">http://smorgasbord.gavagai.nl/2010/09/w … to-fix-it)</a><br />Thanks goes to Cejvik</p><p>Best regards,<br />Jürgen</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p174080">
				<div class="post-metadata">
					<div class="post-num">Post #54</div>
					<div class="post-author">yamada-kun</div>
					<div class="post-datetime">
						5 Aug 2012, 04:16					</div>
				</div>
				<div class="post-content content">
					<p>Due to:<br /><a href="https://dev.openwrt.org/changeset/31954/">https://dev.openwrt.org/changeset/31954/</a><br />tweaking the regulatory.bin is not an option anymore.</p><p>So a vanilla build of OpenWrt will not let you match your non-US regulatory requirements, because the chip vendor insists on enforcing the EEPROM setting, while not insisting on having the setting properly set up in end products... Oh the irony.<br />Does not make me feel any better about building my own firmware to work around this. Just to use channel 13 which I am allowed to do where I reside.<br />Any chance Atheros can be talked back into allowing ATH_USER_REGD in the vanilla build?</p>											<p class="post-edited">(Last edited by <strong>yamada-kun</strong> on 5 Aug 2012, 04:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p176753">
				<div class="post-metadata">
					<div class="post-num">Post #55</div>
					<div class="post-author">wkweksl</div>
					<div class="post-datetime">
						3 Sep 2012, 11:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>yamada-kun wrote:</cite><blockquote><p>Due to:<br /><a href="https://dev.openwrt.org/changeset/31954/">https://dev.openwrt.org/changeset/31954/</a><br />tweaking the regulatory.bin is not an option anymore.</p><p>So a vanilla build of OpenWrt will not let you match your non-US regulatory requirements, because the chip vendor insists on enforcing the EEPROM setting, while not insisting on having the setting properly set up in end products... Oh the irony.<br />Does not make me feel any better about building my own firmware to work around this. Just to use channel 13 which I am allowed to do where I reside.<br />Any chance Atheros can be talked back into allowing ATH_USER_REGD in the vanilla build?</p></blockquote></div><p>Ditto. Any new workaround without compiling? Would like to use channel 13.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177457">
				<div class="post-metadata">
					<div class="post-num">Post #56</div>
					<div class="post-author">dabyd64</div>
					<div class="post-datetime">
						8 Sep 2012, 17:57					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m compiling the latest trunk.<br />I will build the firmware for ALL Atheros devices, with the default settings but with the country select enabled, so all non USA users can use its country regulations. I was facing the same problem in Spain, where the channels 12 and 13 are legal.<br /><span class="postimg"><img src="http://img266.imageshack.us/img266/5245/13chan.jpg" alt="http://img266.imageshack.us/img266/5245/13chan.jpg" /></span><br />Will upload to my public dropbox folder, or similar.<br />Check the HOWTO forum, will post it today or tomorrow!</p>											<p class="post-edited">(Last edited by <strong>dabyd64</strong> on 8 Sep 2012, 18:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177494">
				<div class="post-metadata">
					<div class="post-num">Post #57</div>
					<div class="post-author">dabyd64</div>
					<div class="post-datetime">
						9 Sep 2012, 02:37					</div>
				</div>
				<div class="post-content content">
					<p>Done: <a href="https://forum.openwrt.org/viewtopic.php?pid=177492#p177492">https://forum.openwrt.org/viewtopic.php … 92#p177492</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181153">
				<div class="post-metadata">
					<div class="post-num">Post #58</div>
					<div class="post-author">swiftgeek</div>
					<div class="post-datetime">
						22 Oct 2012, 04:31					</div>
				</div>
				<div class="post-content content">
					<p>from modinfo cfg80211<br /></p><div class="codebox"><pre><code>parm:           ieee80211_regdom:IEEE 802.11 regulatory domain code (charp)</code></pre></div><p>It doesn&#039;t work as it should, but at least it unlocks power levels (and starts spamming in dmesg)</p>											<p class="post-edited">(Last edited by <strong>swiftgeek</strong> on 22 Oct 2012, 04:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p184712">
				<div class="post-metadata">
					<div class="post-num">Post #59</div>
					<div class="post-author">jdobry</div>
					<div class="post-datetime">
						30 Nov 2012, 01:15					</div>
				</div>
				<div class="post-content content">
					<p>I found this thread when I try to solve problem on different HW but also Atheros (in my case Atheros 5413)</p><p>It is possible change regulatory domain on EEPROM.<br />package kmod-madwifi contain nice tool ath_info :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p184907">
				<div class="post-metadata">
					<div class="post-num">Post #60</div>
					<div class="post-author">AndrejaKo</div>
					<div class="post-datetime">
						1 Dec 2012, 19:01					</div>
				</div>
				<div class="post-content content">
					<p>How would I get the address of the card on a PCI-less router for use with the ath_info?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p185278">
				<div class="post-metadata">
					<div class="post-num">Post #61</div>
					<div class="post-author">AndrejaKo</div>
					<div class="post-datetime">
						5 Dec 2012, 03:06					</div>
				</div>
				<div class="post-content content">
					<p>In retrospective it should have been obvious how to get the address of the device. It appears in kernel log when the driver loads. It seems that it is 0xb80c0000. Unfortunately, ath_info can&#039;t seem to read the data.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186206">
				<div class="post-metadata">
					<div class="post-num">Post #62</div>
					<div class="post-author">swiftgeek</div>
					<div class="post-datetime">
						16 Dec 2012, 16:33					</div>
				</div>
				<div class="post-content content">
					<p>Everything should be in mtd4 art partition … just what bits we have to change?<br />Is 1043ND with working 12&amp;13 channels even available? (I have bought one in local shop and it&#039;s locked to USA <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /> ).&nbsp; If yes then we maybe could find sth by just diffing those partition images</p><p>ath_info works only with ath5k</p>											<p class="post-edited">(Last edited by <strong>swiftgeek</strong> on 16 Dec 2012, 16:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186213">
				<div class="post-metadata">
					<div class="post-num">Post #63</div>
					<div class="post-author">AndrejaKo</div>
					<div class="post-datetime">
						16 Dec 2012, 18:37					</div>
				</div>
				<div class="post-content content">
					<p>Did anyone check the German version of 1043? Since they seem to have made a special version for that market, it would be reasonable to expect it to have correct regulatory data in the EEPROM. Still we can never be sure until we check.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186676">
				<div class="post-metadata">
					<div class="post-num">Post #64</div>
					<div class="post-author">ninno</div>
					<div class="post-datetime">
						21 Dec 2012, 19:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>AndrejaKo wrote:</cite><blockquote><p>Did anyone check the German version of 1043? Since they seem to have made a special version for that market, it would be reasonable to expect it to have correct regulatory data in the EEPROM. Still we can never be sure until we check.</p></blockquote></div><p>Not different to the international ones, I tested a &quot;TL-WR1043ND(DE) Ver:1.1&quot;, same behavior for ch12+13.<br />TP-Link does not seem to care about this, without patching the regdb yourself there is no way to get these channels activated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186680">
				<div class="post-metadata">
					<div class="post-num">Post #65</div>
					<div class="post-author">AndrejaKo</div>
					<div class="post-datetime">
						21 Dec 2012, 20:58					</div>
				</div>
				<div class="post-content content">
					<p>So how would that work on Attitude Adjustment?&nbsp; Since changes in the way regulatory database is used, the older regulatory.bin hack doesn&#039;t work. </p><br /><p>There is a way to enable this using the kernel option, but that would require someone to host unofficial image, since from what I&#039;ve seen OpenWRT team doesn&#039;t want to distribute images with that option enabled.</p><p>Also those two channels were working for me on some versions of DD-WRT (but I forgot which ones). Maybe we should take a look at how they solved the problem.</p><br /><p>Also did anyone check how things work in the official TP-LINK image? I&#039;ve heard reports from people that on stock firmware those channels work, but I didn&#039;t check that out yet myself. EDIT: They do work.</p>											<p class="post-edited">(Last edited by <strong>AndrejaKo</strong> on 21 Dec 2012, 21:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186681">
				<div class="post-metadata">
					<div class="post-num">Post #66</div>
					<div class="post-author">swiftgeek</div>
					<div class="post-datetime">
						21 Dec 2012, 21:05					</div>
				</div>
				<div class="post-content content">
					<p>It doesn&#039;t matter since we only care about &quot;EEPROM&quot; data which should be on mtd4 partition. This is not being overwritten by any alternative firmware</p><p><a href="http://www.mail-archive.com/ath9k-devel@lists.ath9k.org/msg01345.html">http://www.mail-archive.com/ath9k-devel … 01345.html</a><br />It isn&#039;t a end of the problems - there is also some checksum obviously</p><p>BTW has anyone checked u-boot commands? Maybe there is sth for it?</p><p>Also<br /><a href="https://code.google.com/p/iwleeprom/source/browse/#svn%2Fbranches%2Fatheros">https://code.google.com/p/iwleeprom/sou … %2Fatheros</a></p>											<p class="post-edited">(Last edited by <strong>swiftgeek</strong> on 21 Dec 2012, 21:29)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186687">
				<div class="post-metadata">
					<div class="post-num">Post #67</div>
					<div class="post-author">ninno</div>
					<div class="post-datetime">
						21 Dec 2012, 21:50					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>AndrejaKo wrote:</cite><blockquote><p>So how would that work on Attitude Adjustment?&nbsp; Since changes in the way regulatory database is used, the older regulatory.bin hack doesn&#039;t work. <br />...<br />Also those two channels were working for me on some versions of DD-WRT (but I forgot which ones). Maybe we should take a look at how they solved the problem.</p></blockquote></div><p>The limits seem to be applied incrementally - if you have a country &quot;00&quot; or &quot;US&quot; which does not allow ch12+13 but 500mW, in whole europe you would be able to legally use ch1-13 but no more than 100mW - setting the country to &quot;DE&quot;, you will end up with ch1-11 and 100mW.</p><p>I needed ch13 in one 1043nd, for this one I had to completely open country 00 and US, created a country &quot;UX&quot; which matches the US regulations. This way I can set country &quot;DE&quot; and get the correct limits (ch1-13, 100mW). To match the original US limits I need to set the country to &quot;UX&quot;.</p><p>This is of course no solution for openwrt, if TP-Link fails to set the country code in their products.</p><div class="quotebox"><cite>AndrejaKo wrote:</cite><blockquote><p>Also did anyone check how things work in the official TP-LINK image? I&#039;ve heard reports from people that on stock firmware those channels work, but I didn&#039;t check that out yet myself.</p></blockquote></div><p>Yes, you can enable any channel in the stock firmware, so the openwrt image is by far more FCC-Compliant than the original firmware.</p><p>I dont know the reasons for the switch to the &quot;internal regdb&quot; in openwrt, because the images distributed before also followed those FCC rules if the user of the firmware did not break them intentionally. But i am not a lawyer - and for whatever reason this has been done, I am quite sure it was *not* done to spoon-feed the users. If anyone could come up with a solution to modify the flash to set the right local country code this would be nice. Unfortunately this is beyond my knowledge. </p><p>Otherwise you only have the one option to compile your own image in order to overcome the channel-limit.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186725">
				<div class="post-metadata">
					<div class="post-num">Post #68</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						22 Dec 2012, 12:38					</div>
				</div>
				<div class="post-content content">
					<p>Use <a href="http://luci.subsignal.org/~jow/reghack/">http://luci.subsignal.org/~jow/reghack/</a> to enable channel 12 and 13.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186727">
				<div class="post-metadata">
					<div class="post-num">Post #69</div>
					<div class="post-author">ninno</div>
					<div class="post-datetime">
						22 Dec 2012, 13:20					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jow wrote:</cite><blockquote><p>Use <a href="http://luci.subsignal.org/~jow/reghack/">http://luci.subsignal.org/~jow/reghack/</a> to enable channel 12 and 13.</p></blockquote></div><p>Thanks jow - just tested it against the current trunk release, working fine.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186729">
				<div class="post-metadata">
					<div class="post-num">Post #70</div>
					<div class="post-author">naturelle</div>
					<div class="post-datetime">
						22 Dec 2012, 13:35					</div>
				</div>
				<div class="post-content content">
					<p>So this does work with OpenWrt Barrier Breaker r34761?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186737">
				<div class="post-metadata">
					<div class="post-num">Post #71</div>
					<div class="post-author">AndrejaKo</div>
					<div class="post-datetime">
						22 Dec 2012, 15:36					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jow wrote:</cite><blockquote><p>Use <a href="http://luci.subsignal.org/~jow/reghack/">http://luci.subsignal.org/~jow/reghack/</a> to enable channel 12 and 13.</p></blockquote></div><br /><p>Thanks a lot!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186782">
				<div class="post-metadata">
					<div class="post-num">Post #72</div>
					<div class="post-author">riz.kazi</div>
					<div class="post-datetime">
						23 Dec 2012, 10:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jow wrote:</cite><blockquote><p>Use <a href="http://luci.subsignal.org/~jow/reghack/">http://luci.subsignal.org/~jow/reghack/</a> to enable channel 12 and 13.</p></blockquote></div><p>Thanks a lot Jow. Tried this on attitude_adjustment beta2 and it is working great.&nbsp; Was looking for something like this for few days as i am not comfortable building kernel from source.</p><p>Thanks again</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p187482">
				<div class="post-metadata">
					<div class="post-num">Post #73</div>
					<div class="post-author">hanz.1</div>
					<div class="post-datetime">
						31 Dec 2012, 14:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jow wrote:</cite><blockquote><p>Use <a href="http://luci.subsignal.org/~jow/reghack/">http://luci.subsignal.org/~jow/reghack/</a> to enable channel 12 and 13.</p></blockquote></div><p>Hi, will it work on 1043ND with Backfire 10.03.1-RC6?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p187485">
				<div class="post-metadata">
					<div class="post-num">Post #74</div>
					<div class="post-author">AndrejaKo</div>
					<div class="post-datetime">
						31 Dec 2012, 15:36					</div>
				</div>
				<div class="post-content content">
					<p>Try it and let us know!</p><p>Also if you don&#039;t want to experiment, you can go back to page 2 and get the hacked regulatory.bin file which will definitely work there.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p187828">
				<div class="post-metadata">
					<div class="post-num">Post #75</div>
					<div class="post-author">hanz.1</div>
					<div class="post-datetime">
						4 Jan 2013, 00:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jow wrote:</cite><blockquote><p>Use <a href="http://luci.subsignal.org/~jow/reghack/">http://luci.subsignal.org/~jow/reghack/</a> to enable channel 12 and 13.</p></blockquote></div><p>Working fine on Backfire 10.03.1-RC6</p><p>Thanks jow!</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 3 of 4</div><nav><ul><li><a href="viewtopic.php%3Fid=35828&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=35828&amp;p=2.html">2</a></li><li class="pagination-current"><span>3</span></li><li><a href="viewtopic.php%3Fid=35828&amp;p=4.html">4</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>