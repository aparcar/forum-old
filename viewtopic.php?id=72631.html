<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Adding new packages to openwrt code base as part of customization</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 31 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p368703">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">punyaelsa</div>
					<div class="post-datetime">
						23 Nov 2017, 10:48					</div>
				</div>
				<div class="post-content content">
					<p>I was trying to build an image for an IPQ806X target.<br />The image is well compatible with my hardware model.<br />But I was not able to bring the ethernet driver up.<br />On furthur research on the topic , I found extra kernel packages <br />needs to be added for this. Recognized I had to add qca-edma package which I downloaded <br />and made the make file changes for build. However I am getting some compilation errors on <br />this&nbsp; like following.</p><p>But since its an already existing package I am not sure I should be making code changes.<br />Am I missing something important? Does anyone have any idea why this issue might be happening. Linux version is 4.14.</p><p>Thankyou. Looking forward to replies.</p><p>set_rfs_filter_callback_t set_rfs_rule;<br />&nbsp; ^<br />/home/guru/punya/trunkpull/openwrt/build_dir/target-arm_cortex-a9+neon-vfpv4_musl-1.1.16_eabi/linux-ipq806x/qca-edma/ipq806x/edma.h:445:3: error: unknown type name &#039;set_rfs_filter_callback_t&#039;<br />&nbsp; &nbsp;set_rfs_filter_callback_t set_filter);<br />&nbsp; &nbsp;^<br />/home/guru/punya/trunkpull/openwrt/build_dir/target-arm_cortex-a9+neon-vfpv4_musl-1.1.16_eabi/linux-ipq806x/qca-edma/ipq806x/edma_axi.c:975:2: error: unknown field &#039;ndo_register_rfs_filter&#039; specified in initializer<br />&nbsp; .ndo_register_rfs_filter = edma_register_rfs_filter,<br />&nbsp; ^<br />/home/guru/punya/trunkpull/openwrt/build_dir/target-arm_cortex-a9+neon-vfpv4_musl-1.1.16_eabi/linux-ipq806x/qca-edma/ipq806x/edma_axi.c:975:29: error: &#039;edma_register_rfs_filter&#039; undeclared here (not in a function)<br />&nbsp; .ndo_register_rfs_filter = edma_register_rfs_filter,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^<br />/home/guru/punya/trunkpull/openwrt/build_dir/target-arm_cortex-a9+neon-vfpv4_musl-1.1.16_eabi/linux-ipq806x/qca-edma/ipq806x/edma_axi.c:976:2: error: unknown field &#039;ndo_get_default_vlan_tag&#039; specified in initializer<br />&nbsp; .ndo_get_default_vlan_tag = edma_get_default_vlan_tag,<br />&nbsp; ^<br />/home/guru/punya/trunkpull/openwrt/build_dir/target-arm_cortex-a9+neon-vfpv4_musl-1.1.16_eabi/linux-ipq806x/qca-edma/ipq806x/edma_axi.c:976:30: warning: initialization from incompatible pointer type [-Wincompatible-pointer-types]<br />&nbsp; .ndo_get_default_vlan_tag = edma_get_default_vlan_tag,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ^<br />/home/guru/punya/trunkpull/openwrt/build_dir/target-arm_cortex-a9+neon-vfpv4_musl-1.1.16_eabi/linux-ipq806x/qca-edma/ipq806x/edma_axi.c:976:30: note: (near initialization for &#039;edma_axi_netdev_ops.ndo_del_slave&#039;)<br />scripts/Makefile.build:258: recipe for target &#039;/home/guru/punya/trunkpull/openwrt/build_dir/target-arm_cortex-a9+neon-vfpv4_musl-1.1.16_eabi/linux-ipq806x/qca-edma/ipq806x/edma_axi.o&#039; failed<br />make[6]: *** [/home/guru/punya/trunkpull/openwrt/build_dir/target-arm_cortex-a9+neon-vfpv4_musl-1.1.16_eabi/linux-ipq806x/qca-edma/ipq806x/edma_axi.o] Error 1<br />scripts/Makefile.build:403: recipe for target &#039;/home/guru/punya/trunkpull/openwrt/build_dir/target-arm_cortex-a9+neon-vfpv4_musl-1.1.16_eabi/linux-ipq806x/qca-edma/ipq806x&#039; failed<br />make[5]: *** [/home/guru/punya/trunkpull/openwrt/build_dir/target-arm_cortex-a9+neon-vfpv4_musl-1.1.16_eabi/linux-ipq806x/qca-edma/ipq806x] Error 2<br />Makefile:1385: recipe for target &#039;_module_/home/guru/punya/trunkpull/openwrt/build_dir/target-arm_cortex-a9+neon-vfpv4_musl-1.1.16_eabi/linux-ipq806x/qca-edma&#039; failed<br />make[4]: *** [_module_/home/guru/punya/trunkpull/openwrt/build_dir/target-arm_cortex-a9+neon-vfpv4_musl-1.1.16_eabi/linux-ipq806x/qca-edma] Error 2<br />make[4]: Leaving directory &#039;/home/guru/punya/trunkpull/openwrt/build_dir/target-arm_cortex-a9+neon-vfpv4_musl-1.1.16_eabi/linux-ipq806x/linux-4.4.14&#039;<br />Makefile:54: recipe for target &#039;/home/guru/punya/trunkpull/openwrt/build_dir/target-arm_cortex-a9+neon-vfpv4_musl-1.1.16_eabi/linux-ipq806x/qca-edma/.built&#039; failed<br />make[3]: *** [/home/guru/punya/trunkpull/openwrt/build_dir/target-arm_cortex-a9+neon-vfpv4_musl-1.1.16_eabi/linux-ipq806x/qca-edma/.built] Error 2<br />make[3]: Leaving directory &#039;/home/guru/punya/trunkpull/openwrt/package/kernel/qca-edma&#039;<br />package/Makefile:196: recipe for target &#039;package/kernel/qca-edma/compile&#039; failed<br />make[2]: *** [package/kernel/qca-edma/compile] Error 2<br />make[2]: Leaving directory &#039;/home/guru/punya/trunkpull/openwrt&#039;<br />package/Makefile:193: recipe for target &#039;/home/guru/punya/trunkpull/openwrt/staging_dir/target-arm_cortex-a9+neon-vfpv4_musl-1.1.16_eabi/stamp/.package_compile&#039; failed<br />make[1]: *** [/home/guru/punya/trunkpull/openwrt/staging_dir/target-arm_cortex-a9+neon-vfpv4_musl-1.1.16_eabi/stamp/.package_compile] Error 2<br />make[1]: Leaving directory &#039;/home/guru/punya/trunkpull/openwrt&#039;<br />/home/guru/punya/trunkpull/openwrt/include/toplevel.mk:192: recipe for target &#039;world&#039; failed<br />make: *** [world] Error 2</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>