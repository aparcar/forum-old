<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [HELP] How to configure TP-Link WA830RE as Router WiFi</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 16 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p254221">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">federico.gallo</div>
					<div class="post-datetime">
						13 Nov 2014, 19:54					</div>
				</div>
				<div class="post-content content">
					<p>Hey there, i&#039;m trying to configure my repeater as a simply router wifi. <br />i ve a cable-modem ISP. with an Arris modem, which i can&#039;t configure. </p><p>i&#039;ve installed Openwrt on my RE and works fine, i could creat de wifi network, but can&#039;t connect to the internet, <br />i&#039;ve tryed everything, and read a lot, i need some help, y couldn&#039;t find someone that has configured the same as me.</p><p>Thanks a lot!!!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254229">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">danymarc</div>
					<div class="post-datetime">
						13 Nov 2014, 21:10					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>federico.gallo wrote:</cite><blockquote><p>Hey there, i&#039;m trying to configure my repeater as a simply router wifi</p></blockquote></div><p>simply router, by default after flash or after factory default, just turn on wifi, add security and its a router.<br />what did you flashed Trunk, Attitude&nbsp; Adjustemet or Barrier Braker</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254230">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">federico.gallo</div>
					<div class="post-datetime">
						13 Nov 2014, 21:16					</div>
				</div>
				<div class="post-content content">
					<p>Chaos Calmer...<br />how do i get back to default every configuration?<br />or how do i reinstall the firmware?</p>											<p class="post-edited">(Last edited by <strong>federico.gallo</strong> on 13 Nov 2014, 21:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254232">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">danymarc</div>
					<div class="post-datetime">
						13 Nov 2014, 21:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>federico.gallo wrote:</cite><blockquote><p>Chaos Calmer...</p></blockquote></div><p>install LuCi web interface<br />opkg update<br />opkg install luci<br />/etc/init.d/uhttpd restart<br />/etc/init.d/uhttpd start<br />/etc/init.d/uhttpd enable</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254233">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">federico.gallo</div>
					<div class="post-datetime">
						13 Nov 2014, 21:42					</div>
				</div>
				<div class="post-content content">
					<p>i can&#039;t install luci, there&#039;s no memory available for it... i&#039;ve already try</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254236">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">danymarc</div>
					<div class="post-datetime">
						13 Nov 2014, 22:01					</div>
				</div>
				<div class="post-content content">
					<p>ok you might have to go back to stock, from here <a href="ftp://tplink-forum.pl/orgin_bez_boot/">ftp://tplink-forum.pl/orgin_bez_boot/</a> download a stripped fw for your 830 make sure you have a Version 2 <br />2 Download and install WinSCP (<a href="http://winscp.net">http://winscp.net</a>); <br />3 Download corresponding firmware from <a href="ftp://tplink-forum.pl/orgin_bez_boot/">ftp://tplink-forum.pl/orgin_bez_boot/</a> <br />4 Download putty (<a href="http://www.putty.org/">http://www.putty.org/</a>) <br />5 On WinSCP: <br />5.1 Select New Site; <br />5.2 File protocol: SCP; <br />5.3 Hostname: 192.168.1.1 (or your router IP); <br />5.4 Username: root <br />5.5 Password: your admin pass <br />5.6 Drag downloaded firmware from Download folder and drop in /tmp <br />5.7 (Important, I think...) On Transfer Settings, select Binary <br />5.8 Transfer; <br />6 On putty; <br />6.1 Login on 192.168.1.1 (user root and pass); <br />6.2 Type: <br />cd /tmp (Enter) <br />mtd -r write xxxxx.bin firmware (Enter) (Sure, replace xxxx with your firmware filename...) <br />8 Use at your own risk. (I cannot confirm if it will work on your model, router, etc.) <br />I dont know if instead of flashing stripped FW to go back to stock will be the same to flash Barrier Braker it has LuCi and if yes I dont know if you use the Factory or Sysupgrade logic to me is Sysugrade you can get the file from here <a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/">http://downloads.openwrt.org/barrier_br … x/generic/</a><br />Some one with experience will have to answer my doubts.</p>											<p class="post-edited">(Last edited by <strong>danymarc</strong> on 13 Nov 2014, 22:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254238">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">federico.gallo</div>
					<div class="post-datetime">
						13 Nov 2014, 22:12					</div>
				</div>
				<div class="post-content content">
					<p>i could try that, but i dont think it&#039;ll work. <br />i&#039;ve tryed this: <a href="http://wiki.openwrt.org/es/doc/howto/generic.flashing">http://wiki.openwrt.org/es/doc/howto/generic.flashing</a><br />and i realized that i have no left space to add something to the memory of the wa830re</p><p>btw thanks very much for your answers, i&#039;ll try that now</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254239">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">danymarc</div>
					<div class="post-datetime">
						13 Nov 2014, 22:14					</div>
				</div>
				<div class="post-content content">
					<p>With that method you are not adding any to the router it will be on Temp folder read step 5.6</p>											<p class="post-edited">(Last edited by <strong>danymarc</strong> on 13 Nov 2014, 22:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254241">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">federico.gallo</div>
					<div class="post-datetime">
						13 Nov 2014, 22:32					</div>
				</div>
				<div class="post-content content">
					<p>OK i did it... i reinstalled the firmware <br />i used this one: <a href="https://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wa830re-v2-squashfs-factory.bin">https://downloads.openwrt.org/barrier_b … actory.bin</a><br />but i copied using ssh from my pc like this: </p><div class="codebox"><pre><code> fede@fede-ITeDA:~/Descargas$ scp openwrt-ar71xx-generic-tl-wa830re-v2-squashfs-sysupgrade.bin root@168.96.255.53:/tmp </code></pre></div><p>now im back to original openwrt... <br />i changed ipaddr entering here, so i could enter from another pc in the network<br /></p><div class="codebox"><pre><code> vi /etc/config/network </code></pre></div><p>so now, you were saying i should only enable wifi???</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254247">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">federico.gallo</div>
					<div class="post-datetime">
						13 Nov 2014, 23:17					</div>
				</div>
				<div class="post-content content">
					<p>i enabled wifi ...<br />and added to /etc/config/network the following:<br /></p><div class="codebox"><pre><code>network:
config interface &#039;wan&#039;
        option ifname &#039;wlan0&#039;
        option proto &#039;dhcp&#039;</code></pre></div>											<p class="post-edited">(Last edited by <strong>federico.gallo</strong> on 13 Nov 2014, 23:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254250">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">danymarc</div>
					<div class="post-datetime">
						13 Nov 2014, 23:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>federico.gallo wrote:</cite><blockquote><p>i enabled wifi ...</p></blockquote></div><p>If you are doing everything through CLI why did you change FW, <a href="https://forum.openwrt.org/viewtopic.php?id=39077">https://forum.openwrt.org/viewtopic.php?id=39077</a><br />now you have web interface LuCi use any browser open 192.168.1.1&nbsp; <br />or <a href="http://192.168.1.1/cgi-bin/luci">http://192.168.1.1/cgi-bin/luci</a><br />you need router or repeater</p>											<p class="post-edited">(Last edited by <strong>danymarc</strong> on 14 Nov 2014, 00:18)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254253">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						14 Nov 2014, 00:20					</div>
				</div>
				<div class="post-content content">
					<p>For cable ISP you would set the WAN to DHCP Client.&nbsp; A common rookie mistake is not realizing that the cable modem gave you an address of 192.168.1.x.&nbsp; The WAN IP and the LAN IP have to be different subnets-- or everything will seem to work except that you cannot reach the Internet.&nbsp; If this is the case, since you can&#039;t reconfigure the modem, change your LAN subnet to something different, such as 192.168.2.1.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254255">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">danymarc</div>
					<div class="post-datetime">
						14 Nov 2014, 00:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mk24 wrote:</cite><blockquote><p>change your LAN subnet to something different, such as 192.168.2.1.</p></blockquote></div><p>Very good point, but in his case on #1 he posted Arris modem that one has Gateway 192.168.0.1</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254260">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">federico.gallo</div>
					<div class="post-datetime">
						14 Nov 2014, 01:15					</div>
				</div>
				<div class="post-content content">
					<p>i cant change anything in the arris modem... LAN from arris modem is sth like 192.168.0.x<br />i dont understand how should i configure my wan and lan in the openwrt router<br />the router is conected to the modem via ethernet, andi can acces it via </p><div class="codebox"><pre><code> ssh root@192.168.0.254 </code></pre></div><p>if i change lan subnet from the router i wouldn be able to acces it... </p><p>so i&#039;m pretty fucked up haha. this shouldn&#039;t be that difficult ... i feel like an idiot</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254265">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						14 Nov 2014, 01:29					</div>
				</div>
				<div class="post-content content">
					<p>OK, it appears that you are looking for an Access Point, not a router setup.</p><p>The main rule here is to turn OFF the DHCP Server in your OpenWrt router device.&nbsp; You are using it as an Access point which means that you let the router function built into the modem do all address assignments and routing.&nbsp; After you connect a PC wirelessly, you should see that it has Gateway 192.168.0.1 (the modem/router) and not Gateway 192.168.0.254 (the AP)&nbsp; (The AP IP is used only for administration.)&nbsp; Your client PC should also pick up the DNS settings from the cable modem/router, which will be somewhere in the cable company and/or 192.168.0.1.</p><p>Also you need to be sure that the wifi0 and eth0 are bridged on the same network.&nbsp; You should be able to ping the cable modem/router at 192.168.0.1 from a wifi PC.</p><p>----</p><p>If instead you want to actually route with OpenWrt (which has some advantages and disadvantage), then you would--<br />WAN (ethernet) and LAN (wifi) separate networks with separate subents<br />DHCP Server on LAN<br />DHCP Client on WAN</p><p>The main disadvantage is that since the 830 only has one Ethernet port, all your LAN clients will have to be on the wireless side.&nbsp; They would be isolated from anything plugged into the modem/router.&nbsp; If you want to have wired and wireless users all in the same LAN you would instead do the Access Point setup described in the first part.</p>											<p class="post-edited">(Last edited by <strong>mk24</strong> on 14 Nov 2014, 01:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254268">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">federico.gallo</div>
					<div class="post-datetime">
						14 Nov 2014, 01:55					</div>
				</div>
				<div class="post-content content">
					<p>Thanks mk24! <br />it&#039;s the second part, exactly like you said. <br />now it works perfect!</p><p>The configuration now is something like. <br />ISP =&gt; Modem Arris =&gt; Ethernet LAN 192.168.0.x<br />WA830RE with openwrt =&gt; conected from it&#039;s ethernet port to the modem. <br />LAN config for the router is now ipaddr &#039;192.168.1.1&#039;</p><p>i have wifi and internet conection, like a boss.... <br />the problem now, is that the router gave me, ipaddres 192.168.0.x ... so i can&#039;t acces the router anymore.<br />im gona restart the dhcp client, and tell you about it</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254269">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						14 Nov 2014, 01:59					</div>
				</div>
				<div class="post-content content">
					<p>You just need to disconnect and reconnect your PC by wifi, so it will re-DHCP a 192.168.1.x.&nbsp; Then access the TP-Link at 192.168.1.1.</p><p>The default routing table should let you access the modem at 192.168.0.1 (not that you would often need to, if you don&#039;t have admin access to it), but anything else that may be plugged in to other ports on the modem via ethernet will not be accessible over the wifi.</p>											<p class="post-edited">(Last edited by <strong>mk24</strong> on 14 Nov 2014, 02:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254270">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">federico.gallo</div>
					<div class="post-datetime">
						14 Nov 2014, 02:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mk24 wrote:</cite><blockquote><p>You just need to disconnect and reconnect your PC by wifi, so it will re-DHCP a 192.168.1.x.&nbsp; Then access the TP-Link at 192.168.1.1.</p><p>The default routing table should let you access the modem at 192.168.0.1 (not that you would often need to, if you don&#039;t have admin access to it), but anything else that may be plugged in to other ports on the modem via ethernet will not be accessible over the wifi.</p></blockquote></div><p>i did that, i reboot also. <br />i tried </p><div class="codebox"><pre><code> /etc/init.d/dnsmasq restart </code></pre></div><p> to restart dhcp but still didn&#039;t work</p><p>in my /etc/config/network, it says</p><div class="codebox"><pre><code> 
config interface &#039;loopback&#039;
        option ifname &#039;lo&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;127.0.0.1&#039;
        option netmask &#039;255.0.0.0&#039;

config globals &#039;globals&#039;
        option ula_prefix &#039;fddb:db5d:8b43::/48&#039;

config interface &#039;lan&#039;
        option ifname &#039;eth0&#039;
        option force_link &#039;1&#039;
        option type &#039;bridge&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;192.168.1.1&#039;
        option netmask &#039;255.255.255.0&#039;
        option ip6assign &#039;60&#039;

config interface &#039;wan&#039;
        option ifname &#039;wlan0&#039;
        option proto &#039;dhcp&#039;</code></pre></div><p>is it everything ok? <br />how do i set <br />DHCP Server on LAN<br />DHCP Client on WAN <br />???</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254272">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						14 Nov 2014, 02:34					</div>
				</div>
				<div class="post-content content">
					<p>No, that is not right.&nbsp; &#039;lan&#039; should be the wifi and &#039;wan&#039; the eth.&nbsp; Double-check in /etc/config/wireless that the wifi is also option network to lan not wan.&nbsp; You don&#039;t need the option bridge line since there is only going to be one interface on lan but there is probably no harm in leaving it in.</p><p>Since you know your modem is always going to be 192.168.0.1, you can set wan to a static IP in the 192.168.0 range but you also need to configure (in section &#039;wan&#039;) <br />&nbsp; &nbsp; option gateway &#039;192.168.0.1&#039; <br />&nbsp; &nbsp; option dns &#039;192.168.0.1&#039;<br />so that it knows how to get to the Internet.</p><p>I usually do everything possible over luci so command line stuff is pushing the limits of my knowledge.</p><p>I think the key to making a DHCP server is in /etc/config/dhcp, where you should have something like this:</p><p>config dhcp &#039;lan&#039;<br />&nbsp; &nbsp; option interface &#039;lan&#039;<br />&nbsp; &nbsp; option dhcpv6 &#039;server&#039;<br />&nbsp; &nbsp; option ra &#039;server&#039;<br />&nbsp; &nbsp; option ra_management &#039;1&#039;<br />&nbsp; &nbsp; option start &#039;100&#039;<br />&nbsp; &nbsp; option limit &#039;150&#039;<br />&nbsp; &nbsp; option leasetime &#039;12h&#039;</p><p>so it will give your wifi users an address between 192.168.1.100 and 192.168.1.250.&nbsp; Do not have an option ignore line in there, because as the name suggests, that will shut down the server.</p>											<p class="post-edited">(Last edited by <strong>mk24</strong> on 14 Nov 2014, 02:54)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254274">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">federico.gallo</div>
					<div class="post-datetime">
						14 Nov 2014, 02:50					</div>
				</div>
				<div class="post-content content">
					<p>i couldn&#039;t install luci because of lack of memory :&#039;(<br />im gona try what you said... and tell you in a moment</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254276">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">danymarc</div>
					<div class="post-datetime">
						14 Nov 2014, 03:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>federico.gallo wrote:</cite><blockquote><p>OK i did it... i reinstalled the firmware <br />i used this one: <a href="https://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wa830re-v2-squashfs-factory.bin">https://downloads.openwrt.org/barrier_b … actory.bin</a></p></blockquote></div><p>@federico.gallo on post 11 I all ready told you you have LuCi installed, when you did what is quoted</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254644">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">federico.gallo</div>
					<div class="post-datetime">
						17 Nov 2014, 16:22					</div>
				</div>
				<div class="post-content content">
					<p>i&#039;ve had another problem now. i changed &quot;option proto&quot; in wan &amp; lan ... <br />in /etc/config/network ... i set LAN as proto &#039;dhcp&#039; and WAN as &#039;static&#039;. i think i messed things up<br />now i can&#039;t acces the router... my pc is in the same network as the router but won&#039;t acces. </p><p>@danymarc i didn&#039;t install the firmware you said to me, i used the one i found in openwrt...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254660">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">danymarc</div>
					<div class="post-datetime">
						17 Nov 2014, 18:13					</div>
				</div>
				<div class="post-content content">
					<p>PC is 192.168.1.2 and to log into router 192.168.1.1 they have to be in same subnet dif ip as this example if can&#039;t log then<br />Failsafe <a href="http://wiki.openwrt.org/doc/howto/generic.failsafe">http://wiki.openwrt.org/doc/howto/generic.failsafe</a> to enter Failsafe mode No lan cables have to be connected only power, once you get the fast blink then connect LAN cable</p>											<p class="post-edited">(Last edited by <strong>danymarc</strong> on 17 Nov 2014, 21:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266914">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">federico.gallo</div>
					<div class="post-datetime">
						26 Feb 2015, 03:25					</div>
				</div>
				<div class="post-content content">
					<p>Finally i managed to install a new firmware! <br />i compiled my own trunk openwrt with some help of a friend!<br />i uploaded it to dropbox, here is the link: <a href="https://www.dropbox.com/sh/68c27jf6bskooe2/AAAN_b5OMWUn5lyCLsi7KfB7a?dl=0">https://www.dropbox.com/sh/68c27jf6bsko … KfB7a?dl=0</a><br />it&#039;s optimized for a TP Link WA830RE V2 - i added Luci so it&#039;s ready to use with web interface</p><p>Thanks for your help!</p>											<p class="post-edited">(Last edited by <strong>federico.gallo</strong> on 26 Feb 2015, 03:25)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>