<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> UPnP and RC5</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 27 Mar 2018 and 25 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=5171&amp;p=2.html">2</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p24723">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">eatnumber1</div>
					<div class="post-datetime">
						8 Apr 2006, 00:23					</div>
				</div>
				<div class="post-content content">
					<p>Anybody else having problems with UPnP and RC5? I tried both the linksys upnp and the linux-igd versions. Both make entries in the iptables, but the ports don&#039;t open...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p25856">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mulperi</div>
					<div class="post-datetime">
						23 Apr 2006, 19:20					</div>
				</div>
				<div class="post-content content">
					<p>upnp does not work for me either. I had it working with RC4 and upnp-linksys 4.20.7. Now I upgraded to RC5 micro and installed everything but ppp and pppoe that I don&#039;t need. Ok, kmod-bcrm-et is also not installed with RC5, but I think that package does not exist anymore.</p><p>Please keep us updated if you find the solution.</p><p>Rgds Mulperi</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p25858">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">eatnumber1</div>
					<div class="post-datetime">
						23 Apr 2006, 19:23					</div>
				</div>
				<div class="post-content content">
					<p>Try (if your using xp) going to your network connections and going to properties in the ineternet connection then disabling all the upnp opened ports. Then go back into the window and reenable them. That works for me. Not sure why tho.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p25870">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mulperi</div>
					<div class="post-datetime">
						23 Apr 2006, 20:43					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the tip, actually I&#039;m normally using Linux. Running Azureus for a while fixed the problem, at least it gets connected to the DHT database.</p>											<p class="post-edited">(Last edited by <strong>mulperi</strong> on 23 Apr 2006, 20:57)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p26412">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">stcoulon</div>
					<div class="post-datetime">
						2 May 2006, 00:53					</div>
				</div>
				<div class="post-content content">
					<p>Hello, I also had problems with UPnP on whiterussian RC5, both with linksys package and yani&#039;s old port of linux-igd.</p><p>I do not know of other solutions than those packages, according to the wiki, so I googled the web, and found that linux-igd is alive, but only accessible through CVS. It relies on the libupnpd 1.2.1 sdk from Intel, and is now written in C instead of C++.</p><p>I tried to compile both the libupnp and linux-igd packages, and got two ipks that seems to run on my WRT54G v1.0/white russian RC5, at least for a few hours without any problem (where linksys&#039;s upnpd would have crashed two or more times per hour, not better nor worse than linux-igd 0.92). I add that I&#039;m also using shorewall as the firewall of a simple router (one internal lan, both ethernet and wifi, and a wan access).</p><p>If you&#039;re interested in those packages, you&#039;ll be able to download them from here:</p><p><a href="http://perso.wanadoo.fr/Stephane.Coulon/OpenWRT/libupnp_1.2.1a_mipsel.ipk">libupnp_1.2.1a</a><br /><a href="http://perso.wanadoo.fr/Stephane.Coulon/OpenWRT/linux-igd_1.0.1-cvs_mipsel-linux.ipk">linux-igd-CVS</a></p><p>You can compile the packages yourself with the following patches:</p><p><a href="http://perso.wanadoo.fr/Stephane.Coulon/OpenWRT/Patches/libupnp-1.2.1a.patch">libupnp_1.2.1a.patch</a><br /><a href="http://perso.wanadoo.fr/Stephane.Coulon/OpenWRT/Patches/linux-igd.patch">linux-igd.patch</a></p><p>For this you&#039;ll need to setup your environment like this:<br /></p><ul><li><p>A compiled buildroot environment, which will be used both for the toolchain, and also the iptables package. The buildroot will be used as it is, without copying something in some other place.</p></li><li><p>libupnp_1.2.1a sources that you can get from <a href="http://upnp.sourceforge.net">http://upnp.sourceforge.net</a> in the download section. Unpack it somewhere, then apply the provided patch using something like </p><div class="quotebox"><blockquote><p>cd /somewhere/libupnp1.2.1a &amp;&amp; patch -p1 &lt; /some other place/libupnp1.2.1a.patch</p></blockquote></div><p>You may have to customize the main makefile, to reflect the location of your Buildroot and some other details.</p></li><li><p>linux-igd using CVS, go to <a href="http://linux-igd.sourceforge.net">http://linux-igd.sourceforge.net</a> and click on donwload for example, then on CVS and follow the instructions. You may then follow the same direcions than for libupnp, regarding the location of your Buildroot. Notice also that linux-igd has one more dependency which is libupnp of course, you may have to customize the makefile for that.</p></li></ul><p>I&#039;m sorry, but both main makefiles for libupnp and linux-igd aren&#039;t consistent, one was entirely created from scratch while the other one is a modification of the main makefile of the package. I hope that you understand how I did it, if your&#039;re interested in compiling the packages yourself.</p><p>Also, when installed, you may have to customize the <strong>/etc/upnpd.conf</strong> to change some parameters, and create some link or modify some existing script to automatically start the upnpd daemon yourself (only a <strong>/etc/linuxigd/upnpd.rc</strong> startup script is provided, you may have it called from the /etc/init.d directory, or through /etc/ppp/ip-up for example).</p><p>The upnpd.conf seems to support more parameters than the previous 0.92 release. Don&#039;t ask me for support on using linux-igd, I&#039;m not an expert, I may help you to compile the packages yourself if you need it, else I think that you should look forthe support in the forum at sourceforge.</p><p>Please consider this software as early alpha, as it has been tested only for a few hours on my router. If you want to participate, it&#039;s up to you :-D</p><p>Last details, I personnaly used Fedora Core 5 running in vmWare player on my vaio win xp laptop to generate the packages.</p><p>Hope this helps,</p><p>St√©phane</p><p>update 04/05/2006: linux-igd updated to 1.0.1-cvs, the /etc/linuxigd/upnpd.rc provided (was it really provided ???) script needs to be changed a bit, as when it is called from /etc/ppp/ip-up for example, the path isn&#039;t set (and nvram isn&#039;t found).</p>											<p class="post-edited">(Last edited by <strong>stcoulon</strong> on 5 May 2006, 00:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27974">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">loyukfai</div>
					<div class="post-datetime">
						27 May 2006, 19:12					</div>
				</div>
				<div class="post-content content">
					<p>@stcoulon: Thanks for your information.</p><p>However, I have no luck in installing your packges on a WBR2-G54 with RC5. I installed the libupnp package successfully, but when I tried to install the linux-igd package it always resulted in errors.</p><p>Is there any chance that the upnp package will be included officially in RC6?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p28010">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">stcoulon</div>
					<div class="post-datetime">
						28 May 2006, 13:13					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>excuse me because I was out for a while.<br />The packages I generated are running quite correctly on my WRT54G v1.0.<br />What are the errors you got ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p28328">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">BoAustin</div>
					<div class="post-datetime">
						3 Jun 2006, 21:07					</div>
				</div>
				<div class="post-content content">
					<p>stcoulon, I also am having problems with RC5 and upnp (both linksys&#039; and yani&#039;s) and I tried to install the two packages you provided, the libupnp 1.2.1a installed successfully, but the linux-igd failed:</p><div class="quotebox"><blockquote><p>root@OpenWrt:~# ipkg install <a href="http://perso.wanadoo.fr/Stephane.Coulon/OpenWRT/linux-igd_1.0.1-cvs_mipsel-linux.ipk">http://perso.wanadoo.fr/Stephane.Coulon ‚Ä¶ -linux.ipk</a><br />Downloading <a href="http://perso.wanadoo.fr/Stephane.Coulon/OpenWRT/linux-igd_1.0.1-cvs_mipsel-linux.ipk">http://perso.wanadoo.fr/Stephane.Coulon ‚Ä¶ -linux.ipk</a><br />Clearing state_want and state_flag for pkg=linux-igd (arch_priority=0 flag=16 want=2)<br />Nothing to be done<br />An error ocurred, return value: 4.<br />Collected errors:<br />Cannot find package linux-igd.<br />Check the spelling or perhaps run &#039;ipkg update&#039;</p></blockquote></div>											<p class="post-edited">(Last edited by <strong>BoAustin</strong> on 3 Jun 2006, 21:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p28364">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">loyukfai</div>
					<div class="post-datetime">
						4 Jun 2006, 14:54					</div>
				</div>
				<div class="post-content content">
					<p>@stcoulon: IIRC, I encountered the same error as BoAustin&#039;s. Sorry cannot reproduce and check it for that I don&#039;t have access to the WBR2-G54 now.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p28370">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">adooooo</div>
					<div class="post-datetime">
						4 Jun 2006, 17:18					</div>
				</div>
				<div class="post-content content">
					<p>stcoulon,</p><p>I also encountered the same error as BoAustin&#039;s. WRT54gs V1.0 with OpenWRT RC5.<br />ipkg install linux-igd_1.0.1-cvs_mipsel-linux.ipk<br />Clearing state_want and state_flag for pkg=linux-igd (arch_priority=0 flag=16 want=2)<br />Nothing to be done<br />An error ocurred, return value: 4.<br />Collected errors:<br />Cannot find package linux-igd.<br />Check the spelling or perhaps run &#039;ipkg update&#039;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p28574">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">kaldek</div>
					<div class="post-datetime">
						8 Jun 2006, 04:02					</div>
				</div>
				<div class="post-content content">
					<p>Hey folks,</p><p>I put the Linksys IPKG together for UPNP.&nbsp; I&#039;ll grab their latest firmware and do the same for the newer version, to see if that helps.&nbsp; I&#039;ve been a bit lazy (actually spending a lot of time working with Xbox-Linux at home) and I&#039;m still running RC4.&nbsp; I&#039;m actually having issues with the upnp (Linksys) daemon myself, in that ever since I migrated to DSL using PPPoE, my WindowsXP clients report the Internet Gateway as &quot;Disabled&quot; and ports often need to be manually closed.&nbsp; Not sure if this means that the Linksys upnp daemon doesn&#039;t support PPPoE properly, becsause I haven&#039;t investigated it yet.</p><p>I&#039;ll try and get onto it this weekend.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p29033">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">loyukfai</div>
					<div class="post-datetime">
						17 Jun 2006, 11:13					</div>
				</div>
				<div class="post-content content">
					<p>Hello everybody, any update? : )</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p29324">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">combro2k</div>
					<div class="post-datetime">
						22 Jun 2006, 18:34					</div>
				</div>
				<div class="post-content content">
					<p>dohhhhh,</p><p>did something wrong... I installed the upnpsdk but that will be gone as you install<br /><a href="http://perso.wanadoo.fr/Stephane.Coulon/OpenWRT/libupnp_1.2.1a_mipsel.ipk">http://perso.wanadoo.fr/Stephane.Coulon ‚Ä¶ mipsel.ipk</a></p><p>thank you anyway <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p29330">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">combro2k</div>
					<div class="post-datetime">
						22 Jun 2006, 20:02					</div>
				</div>
				<div class="post-content content">
					<p>For those who want to know what I did:</p><p>I installed the mini openwrt, then installed openssh-server, after that installed nas.v<br />Then installed </p><p>libupnp_1.2.1a<br />linux-igd-CVS<br />and needed libpthread</p><p>then it worked <img src="https://forum.openwrt.org/img/smilies/yikes.png" width="15" height="15" alt="yikes" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p29331">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">vkarthik</div>
					<div class="post-datetime">
						22 Jun 2006, 20:21					</div>
				</div>
				<div class="post-content content">
					<p>I got linux-igd working on rc5. I found that I&#039;m supposed to manually add a FORWARD rule, since upnpd adds only a prerouting entry. I added the forward rule and things started working fine.</p>											<p class="post-edited">(Last edited by <strong>vkarthik</strong> on 22 Jun 2006, 20:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p29388">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">combro2k</div>
					<div class="post-datetime">
						23 Jun 2006, 19:16					</div>
				</div>
				<div class="post-content content">
					<p>Hmz strange,</p><p>I use MSN messenger and Windows Vista, somehow it doesn&#039;t open any port... it&#039;s says there is no upnp setup.<br />But when I start BitComet, it says it have upnp.. what do I wrong?</p><p>Greetings</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p29456">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">loyukfai</div>
					<div class="post-datetime">
						25 Jun 2006, 19:16					</div>
				</div>
				<div class="post-content content">
					<p>All in all, is there any tested and proven pre-built UPnP packages that one can install over stock RC5...? <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p29473">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">combro2k</div>
					<div class="post-datetime">
						26 Jun 2006, 01:52					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m just testing this package..</p><p>sometimes it get strange behaviors but it works.<br />It forwards ports... but it seems that MSN doesn&#039;t communicate with it...<br />I found an article about MSN uPNP that says about changing some lines.. I don&#039;t know<br />if the developer changed that (CVS version...)</p><p>Untar the Intel UPnP SDK, but before you compile and install, you will need to make one change for Windows Messenger to work properly. Under the upnpsdk tree, the file src/ssdp/ssdplib.c, on line 406, the following line needs to be changed from:</p><p>SelfAddr.sin_addr.s_addr = inet_addr(SSDP_IP);</p><p>to:</p><p>SelfAddr.sin_addr.s_addr = htonl(INADDR_ANY);</p><p><a href="http://linux-igd.sourceforge.net/documentation.php">http://linux-igd.sourceforge.net/documentation.php</a></p><p>I hope so <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>I can&#039;t recompile it because I&#039;ve no system to do that so..<br />Maybe I&#039;ll later</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p29512">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">loyukfai</div>
					<div class="post-datetime">
						26 Jun 2006, 16:56					</div>
				</div>
				<div class="post-content content">
					<p>Interesting, have you tested it with Remote Assistance...?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p29514">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">obrienj</div>
					<div class="post-datetime">
						26 Jun 2006, 17:01					</div>
				</div>
				<div class="post-content content">
					<p>Will someone be making this a package fro RC5?</p><p>Jim</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p29515">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">combro2k</div>
					<div class="post-datetime">
						26 Jun 2006, 17:01					</div>
				</div>
				<div class="post-content content">
					<p>Not yet, but if windows is fully upnp (* like it says)<br />then it have to work,<br />I&#039;ll try it out if you want <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Later I&#039;ll post it</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p29729">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">loyukfai</div>
					<div class="post-datetime">
						30 Jun 2006, 19:04					</div>
				</div>
				<div class="post-content content">
					<p>That&#039;s good.</p><p>However, I and others are still in need of a pre-packed UPnP package that works... : )</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p30322">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">loyukfai</div>
					<div class="post-datetime">
						11 Jul 2006, 19:16					</div>
				</div>
				<div class="post-content content">
					<p>Helllooooo... Any news for pre-built packages?</p><p>P.S. Eager to test now since I&#039;ve just fixed the WPA-PSK problem of a WBR2-G54. Somehow it just doesn&#039;t work with JFFS2, switching back to the SquashFS solved the problem.</p>											<p class="post-edited">(Last edited by <strong>loyukfai</strong> on 11 Jul 2006, 19:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p30513">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">combro2k</div>
					<div class="post-datetime">
						14 Jul 2006, 23:28					</div>
				</div>
				<div class="post-content content">
					<p>read before,<br />it works, if you follow the procedure of me or others.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p30528">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">loyukfai</div>
					<div class="post-datetime">
						15 Jul 2006, 08:07					</div>
				</div>
				<div class="post-content content">
					<p>So the recap the procedure:</p><p>1. Install <a href="http://perso.wanadoo.fr/Stephane.Coulon/OpenWRT/libupnp_1.2.1a_mipsel.ipk">http://perso.wanadoo.fr/Stephane.Coulon ‚Ä¶ mipsel.ipk</a><br />2. Install <a href="http://perso.wanadoo.fr/Stephane.Coulon/OpenWRT/linux-igd_1.0.1-cvs_mipsel-linux.ipk">http://perso.wanadoo.fr/Stephane.Coulon ‚Ä¶ -linux.ipk</a><br />3. Install <a href="http://downloads.openwrt.org/whiterussian/packages/libpthread_0.9.27-1_mipsel.ipk">http://downloads.openwrt.org/whiterussi ‚Ä¶ mipsel.ipk</a><br />4. Manually add a FORWARD rule...?</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=5171&amp;p=2.html">2</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>