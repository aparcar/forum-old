<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TP-Link TL-MR3020 Support</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 16 Jun 2013 and 7 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 22 of 24</div><nav><ul><li><a href="viewtopic.php%3Fid=33429&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=33429&amp;p=20.html">20</a></li><li><a href="viewtopic.php%3Fid=33429&amp;p=21.html">21</a></li><li class="pagination-current"><span>22</span></li><li><a href="viewtopic.php%3Fid=33429&amp;p=23.html">23</a></li><li><a href="viewtopic.php%3Fid=33429&amp;p=24.html">24</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p261595">
				<div class="post-metadata">
					<div class="post-num">Post #526</div>
					<div class="post-author">metai</div>
					<div class="post-datetime">
						15 Jan 2015, 19:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>omiez wrote:</cite><blockquote><p>In which position must the switch be to flash Openwrt, 3G/4G,WISP or AP?</p></blockquote></div><p>Doesn&#039;t matter at all.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p270839">
				<div class="post-metadata">
					<div class="post-num">Post #527</div>
					<div class="post-author">scottini</div>
					<div class="post-datetime">
						1 Apr 2015, 16:13					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I&#039;ve installed last trunk firmware and everything&#039;s working fine. But I cannot install LUCI, because of lack of free space.<br />How can I free some space or, alternatively, how can I install LUCI?</p><p>TX</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p272611">
				<div class="post-metadata">
					<div class="post-num">Post #528</div>
					<div class="post-author">msnews</div>
					<div class="post-datetime">
						15 Apr 2015, 14:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>scottini wrote:</cite><blockquote><p>Hello,</p><p>I&#039;ve installed last trunk firmware and everything&#039;s working fine. But I cannot install LUCI, because of lack of free space.<br />How can I free some space or, alternatively, how can I install LUCI?</p><p>TX</p></blockquote></div><p>I attached a 4G USB flash drive to the router and use &quot;ExRoot&quot; method to enlarge the flash size. It works very well.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p272651">
				<div class="post-metadata">
					<div class="post-num">Post #529</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						15 Apr 2015, 20:05					</div>
				</div>
				<div class="post-content content">
					<p>It&#039;s called extroot: <a href="http://wiki.openwrt.org/doc/howto/extroot">http://wiki.openwrt.org/doc/howto/extroot</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p272657">
				<div class="post-metadata">
					<div class="post-num">Post #530</div>
					<div class="post-author">metai</div>
					<div class="post-datetime">
						15 Apr 2015, 21:37					</div>
				</div>
				<div class="post-content content">
					<p>... or just go ahead and install the Barrier Breaker 14.07 release image. It comes with LuCI. At this point, the trunk images do not offer any significant advantages for well-supported models with a BB release like the MR3020 (CMIIW).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p273400">
				<div class="post-metadata">
					<div class="post-num">Post #531</div>
					<div class="post-author">MaCacco</div>
					<div class="post-datetime">
						22 Apr 2015, 17:56					</div>
				</div>
				<div class="post-content content">
					<p>Hello everybody.<br />I&#039;m planning to upgrade a MR3020 to OpenWRT and afterwards implement a SOHO PBX with LuCI pbx and voicemail.<br />It&#039;s a small PBX I have in mind, three extensions and some trunks. Very seldom 2 concurrent calls, more often calls between two extensions of the pbx.<br />I&#039;m asking if someone has experience on it, particularly regarding performance.<br />I do hope this question is pertinent here.<br />Thanks!<br />MC</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p281418">
				<div class="post-metadata">
					<div class="post-num">Post #532</div>
					<div class="post-author">cihuafreenet</div>
					<div class="post-datetime">
						26 Jun 2015, 05:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>el_ric wrote:</cite><blockquote><p>Hi:</p><p>I just installed 12.09-RC1 as suggested in 3020 openwrt support page in my MR3020 v1.7 and is working good.<br />I want now to extroot, but in this same topic, there are posts that indicates that it is possible and there are posts that indicates that because it is a stable release that includes luci, there is not free space left to do an extroot.</p><p>¿Can anyone confirm me that it is possible to extroot? I asume I have to install&nbsp; block-mount kmod-usb-storage kmod-fs-ext4, and format in other computer an USB with an ext3/4 partition and an swap partition</p><p>In 12.09-RC1 ¿does the sliding switch have any function?</p></blockquote></div><p>I have been on openwrt for years and my recent experiments have led me to upgrade to the barrier stable 14.07 stable cause the ath9k-htc kmods I needed for my WN-702Ns to turn on didn&#039;t work for me. But maybe I was using insmod instead of modprobe to insert them.</p><p>I currently have 9 bmx6 mesh nodes, 6 with extroot on a sandisk cruzer fit and 3 mesh nodes using just /overlay with many other goodies.</p><p>I boot from /overlay by just removing the usb as a backup to correct errores in my configs on the usb extroot. I keep a working wifi setup on overlay boot on all nodes (8 virtual access points on some nodea just 4 fun, some with VAPs bridged, some not, and some with a combination of both. I like to experiment!</p><p>I&#039;ve hacked openwrt to hell (but not as deeply as I&#039;d like) and have used Imagebuilder and buildroot to optimize the free space on my firmwares, mix and match configs, banners, and binaries from other firmwares like borgbox, interceptor, qmp, minipwn3r, regdb, hostapd and other mods and a freeradius 2 seto on a wrt54gl.</p><p>Lately on 14.07 on a MR3040 I&#039;ve managed to fit on internal flash (overlay filesystem) a lot of stuff.</p><p>1. extroot ready to migrate data of whole root onto extroot</p><p>2. a working bmx6 mesh node based on qmp- system and qmp-tiny-node packages but trimmed down alot removing autoconfiguration system and other useless garbage like AUTHOR , uci hooks, banner etc and stuff not needed for my qmp (er.. bmx6) node since I already modify my own configs.</p><p>3. karma&#039;d hostapd binaries</p><p>4. hacked regdb and modules</p><p>5. multiple virtual ap interfaces.</p><p>6. ath9k-htc and rt2800usb wifi modules for my WN-702N<br />&nbsp; &nbsp; &nbsp;dongle (ath9k-htc) and ralink usb panel antena (rt2800usb)</p><p>7. some iw scripts as a shortcut to writing long commands.</p><p>8. my own profile with ssh alias and environment variables, consolidated openwrt bb 14.07/qmp/borgbox banner (very cool!), node logon welcome<br />message, updated opkg.conf combining directories from openwrt and qmp repos</p><p>9. 140 K freespace left over after cleaning up opkg stuff (taring and backing it up on usb)</p><p>10. a few backup files in /config to quickly change to different non-mesh setup, as wifi client, wardriver or as gateway mesh node.</p><p>I would love to share my config collection that I spent long hours and many sleepless nights perfecting.</p><p>Currently I have the same problem mentioned here about device descriptor errors. I first noticed it when trying to setup 4 radios connected to a MR3020 using an externally powered io-gear usb 2.0 hub. I did a dmesg, cat /sys/class/net/wlanX/address and logread. My radios were being initialized in a different order on each boot or sometimes only 2 radios would power on, or 3 or just the internal radio and wouldn&#039;t setup adhoc interfaces for bmx6 consistantly. If I did a cold boot on the hub and router (kill power and plug back in) If I got all radios working but luck had to be on my side. I tried getting at least the 4 usb radios initialized, change the macs in the config then restarting services, it worked, but the manually configured setup didn&#039;t survive a reboot.</p><p>All diagnostics were done on top of a 15m tower just before a thunderstorm, all for not thinking ahead while I had the gear in the research lab.</p><p>So I will try to get more power to two of my four WN-702N individually using 2 pairs of Y cables in a daisy chain by separating power (2 x 1A) from two 12V-5V converters and forcing the hub to not use the MR3020&#039;s usb port for power. I&#039;m looking into doing the internal usb hub hack too so as yet I haven&#039;t found a reiable solution. </p><p>TODO (on some or all MR-3020/MR-3040 routers):</p><p>AA1, AA2, AA3, AA4<br />BB5 (update old trunk to stable and reinstall everything and move over relevant files.<br />BB6 (Attitude adustment (latest qmp build) works perfectly as a bmx6 mesh node booting from internal overlay root file system and is extroot ready.<br />BB7 / BB8 - newest mesh nodes using newly bought MR-3020 based on openwrt barrier breaker stable 14.07 and latest qmp packages plus all the mods.</p><p> *** fw modding ***</p><p>1)&nbsp; &nbsp; Integrate regulatory.bin/ crda, hacked ath.ko/cfg80211.ko<br />2)&nbsp; &nbsp; rt2800usb, ath9k-htc<br />3)&nbsp; &nbsp; minimum files needed for meshing (ip,bmx6,<br />&nbsp; &nbsp; bmx6-uci-config, bmx6-json, bmx6-sms, bmx6-mdns, gwck-qmp (fping)<br />&nbsp; &nbsp; bmx6health.sh, cronfiles)<br />Add to files/ to add using ImageBuilder) to be<br />&nbsp; &nbsp; included in generated firmware<br />Not necesary:<br />qmp-small-node depends<br />&nbsp; &nbsp; luci-app-bmx6, iwinfo, luci-mod-admin-full,<br />&nbsp; &nbsp; luci-theme-bootstrap, luci-i18n-english, uhttpd,<br />&nbsp; &nbsp; uhttpd-mod-ubus<br />also many files from qmp-system are unneeded and<br />take up too much space thst can be better used to<br />install radio modules.</p><p>Already included in fw image:<br />ip, iw</p><p>4)&nbsp; &nbsp; Set up compile env. (buildroot) for Chaos Calmer<br />5)&nbsp; &nbsp; Set up compile env. for BB, AA<br />5)&nbsp; &nbsp; compile latest airdrop, lorcon, aircrack-ng packages on trunk<br />&nbsp; &nbsp; or extract packages from NSM5<br />6)&nbsp; &nbsp; integrate hostapd, hostap-cli (karma) binaries</p><p>All must fit on /overlay (jffs2 file system on nand flash)</p><p>Stuff to get</p><p>3 coples usb A<br />2 extensiones USB (si es tplink WN702N)<br />2 cables USB tipo A a microUSB de 1.8m (si ea alfa)</p><p>1 cable &quot;Y&quot; de 1 Macho a 2 Hembras y 1 &quot;Y&quot; de 1 M a 2 M<br />(si usas cople H)<br />o simplemente 2 cables &quot;Y&quot; de 1 Macho a 2 Hembras</p><p>Setup for getting enough power to two WiFi radios with 1Watt&nbsp; transmitter power output:<br />M=Male USB type A<br />F=Female USB type A</p><p>&nbsp; R1&nbsp; &nbsp; &nbsp; R2&nbsp; &nbsp; Radios 1 &amp; 2<br />&nbsp; &nbsp;H&nbsp; &nbsp; &nbsp; H<br />&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; | &lt;--&nbsp; cableext. usb (M-H) (2) o microUSB<br />&nbsp; &nbsp;M&nbsp; &nbsp; &nbsp;M<br />&nbsp; &nbsp;H&nbsp; &nbsp; &nbsp;H&nbsp; &nbsp;cople Hembra (2) Female usb coupler<br />&nbsp; &nbsp;M&nbsp; &nbsp; M<br />&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp;|<br /> --=--&nbsp; --=--<br />|&nbsp; &nbsp; &nbsp;||&nbsp; &nbsp; &nbsp;|&lt;---&nbsp; &nbsp; cable &quot;Y&quot; igriega&nbsp; (2) 1M a 2H<br />|&nbsp; &nbsp; &nbsp;||&nbsp; &nbsp; &nbsp;|<br />|&nbsp; &nbsp; &nbsp;||&nbsp; &nbsp; &nbsp;|__ 5V, 1A o &quot;Y&quot; a Convertidor<br />M&nbsp; MM&nbsp; &nbsp; M<br />|&nbsp; &nbsp; &nbsp; Hub&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;=&nbsp; &nbsp; 12V-5V de 2A<br />|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;=&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />5V, 1A o &quot;Y&quot; 2H a 1M=======&nbsp; 5V, 2A&nbsp; &nbsp;&lt;-<br />&nbsp; &nbsp; &nbsp;&quot;Y&quot; 2H a 1M=======&nbsp; 5V, 2A&nbsp; &nbsp;&lt;-<br />charger&nbsp; &nbsp; &nbsp; &nbsp; One 2 amp charger conected to <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; single end of Y cable leading to<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; one of the 2 ends of Y cable powering<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Radio One&nbsp; and the other end to one of<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; the 2 ends of Y cable powering the 2nd<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; radio. Confusibg as hell!</p><br /><p>1)&nbsp; &nbsp; radios ath9k-htc 5GHz (adaptadores usb)</p><p>2) extensión áctiva usb para recortar a 3 metros max.</p><p>3)&nbsp; &nbsp;&nbsp; conectores sma chassis</p><p>4) cruzer fit 8GB</p><p>5) TP-MR3020</p><p>6) cables usb &quot;Y&quot;</p><p>7)&nbsp; &nbsp;&nbsp; cargadores usb p/ encendedor de carro<br />&nbsp; &nbsp; convertidores de 12V-5V<br />&nbsp; &nbsp; marca Acteck y Radox</p><p>8)&nbsp; &nbsp;&nbsp; hub usb 2.0 iogear</p><p>9) conmutador eléctrico en línea (internet-enabled watchdog, power switch)<br />&nbsp; &nbsp; arranque/reinicio en frio de cualquier dispositivo<br />&nbsp; &nbsp; (ej. Torres WiFi o suministro DC)&nbsp; por medio de la red o internet<br />&nbsp; &nbsp; IoT (spark, etc) research internet-enabled power switch</p><p>10)&nbsp; &nbsp; 3 X AWUS036H, AWUS036N, AWUS036NHA</p><p>11)&nbsp; &nbsp; TP link router with fastest CPU, gigabit eth,<br />&nbsp; &nbsp; USB 3.0</p> <br /><p>My last 8th mesh node (MR-3020) died on me. I had cloned it from BB6 and just changed a few files to make it a unique node (/etc/config/wireless system network bmx6, /etc/banner, mac addresses to detect radios, unique mac part of ip6 addesses, brlan, etc.</p><p>I hope I can share my extensive configs (most error-free, some commented, some not).</p><p>I&#039;ve been dormant for some time but just looking to give back to the openwrt community. Since 2007, it&#039;s been so much fun working with openwrt stuff which is the basis for everthing that has been developed since. Thanks to main dev, we owe him all for this wireless freedom. cry.</p>											<p class="post-edited">(Last edited by <strong>cihuafreenet</strong> on 26 Jun 2015, 05:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p284259">
				<div class="post-metadata">
					<div class="post-num">Post #533</div>
					<div class="post-author">illuzionniste</div>
					<div class="post-datetime">
						21 Jul 2015, 03:56					</div>
				</div>
				<div class="post-content content">
					<p>Good morning everyone!,well by mistake, I bricked my MR3020 Rev: 1.2 by flashing my backup mtd2.bin, failsafe mode do not working and even tpl command after autoboot doesnt work with serial, once I keep pressing wps button while plugging in power it ends up inside the TFTP auto update firmware, but I got always the same error with all firmwares i&#039;d tried [product id verify fail!], so any help will be greatly appreciated, thank you in advance!</p><br /><p>Boot Log: </p><div class="codebox"><pre><code>U-Boot 1.1.4-gd0be0bfd (Sep 29 2013 - 10:06:31)

AP121 (ar9330) U-boot

DRAM:  32 MB
led turning on for 1s...
id read 0x100000ff
flash size 4194304, sector count = 64
Flash:  4 MB
Using default environment

In:    serial
Out:   serial
Err:   serial
Net:   ag7240_enet_initialize...
No valid address in Flash. Using fixed address
No valid address in Flash. Using fixed address
: cfg1 0x5 cfg2 0x7114
eth0: 00:03:7f:09:0b:ad
ag7240_phy_setup 
eth0 up
: cfg1 0xf cfg2 0x7214
eth1: 00:03:7f:09:0b:ad
athrs26_reg_init_lan
ATHRS26: resetting s26
ATHRS26: s26 reset done
ag7240_phy_setup 
eth1 up
eth0, eth1
auto update firmware: is_auto_upload_firmware = 0!
Autobooting in 1 seconds
## Booting image at 9f020000 ...
   Uncompressing Kernel Image ... Stream with EOS marker is not supportedLZMA ERROR 1 - must RESET 

U-Boot 1.1.4-gd0be0bfd (Sep 29 2013 - 10:06:31)

AP121 (ar9330) U-boot

DRAM:  32 MB
led turning on for 1s...
id read 0x100000ff
flash size 4194304, sector count = 64
Flash:  4 MB
Using default environment</code></pre></div><p>Boot Log: while pressing wps button</p><div class="codebox"><pre><code>U-Boot 1.1.4-gd0be0bfd (Sep 29 2013 - 10:06:31)

AP121 (ar9330) U-boot

DRAM:  32 MB
led turning on for 1s...
id read 0x100000ff
flash size 4194304, sector count = 64
Flash:  4 MB
Using default environment

In:    serial
Out:   serial
Err:   serial
Net:   ag7240_enet_initialize...
No valid address in Flash. Using fixed address
No valid address in Flash. Using fixed address
: cfg1 0x5 cfg2 0x7114
eth0: 00:03:7f:09:0b:ad
ag7240_phy_setup 
eth0 up
: cfg1 0xf cfg2 0x7214
eth1: 00:03:7f:09:0b:ad
athrs26_reg_init_lan
ATHRS26: resetting s26
ATHRS26: s26 reset done
ag7240_phy_setup 
eth1 up
eth0, eth1
auto update firmware: is_auto_upload_firmware = 1!
eth1 link down
eth0 link down
Using eth1 device
TFTP from server 192.168.0.66; our IP address is 192.168.0.86
Filename &#039;mr3020v1_tp_recovery.bin&#039;.
Load address: 0x80800000
Loading: *#################################################################
     #################################################################
     #################################################################
     #################################################################
     #################################################################
     #################################################################
     #################################################################
     #################################################################
     ###############################
done
Bytes transferred = 2818052 (2b0004 hex)
auto update firmware: product id verify fail!
Autobooting in 1 seconds
## Booting image at 9f020000 ...
   Uncompressing Kernel Image ... Stream with EOS marker is not supportedLZMA ERROR 1 - must RESET </code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p284632">
				<div class="post-metadata">
					<div class="post-num">Post #534</div>
					<div class="post-author">reiwi</div>
					<div class="post-datetime">
						23 Jul 2015, 16:16					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />does anyone have a minimalist sysupgrade image for TL-MR3020 (without the graphical interface maybe)?</p><p>I installed the one in the downloads sections but I have only 404 kB of free space now and I think I cannot install all the required packages to extroot.</p><p>I don&#039;t understand why but the first time I had 416 kB free, now only 404 kB.</p><p>Thanks in advance.</p>											<p class="post-edited">(Last edited by <strong>reiwi</strong> on 23 Jul 2015, 16:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p284651">
				<div class="post-metadata">
					<div class="post-num">Post #535</div>
					<div class="post-author">illuzionniste</div>
					<div class="post-datetime">
						23 Jul 2015, 18:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>reiwi wrote:</cite><blockquote><p>Hi,<br />does anyone have a minimalist sysupgrade image for TL-MR3020 (without the graphical interface maybe)?</p><p>I installed the one in the downloads sections but I have only 404 kB of free space now and I think I cannot install all the required packages to extroot.</p><p>I don&#039;t understand why but the first time I had 416 kB free, now only 404 kB.</p><p>Thanks in advance.</p></blockquote></div><p>hi, try this one </p><p><a href="https://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/openwrt-ar71xx-generic-tl-mr3020-v1-squashfs-sysupgrade.bin">https://downloads.openwrt.org/attitude_ … pgrade.bin</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p284741">
				<div class="post-metadata">
					<div class="post-num">Post #536</div>
					<div class="post-author">reiwi</div>
					<div class="post-datetime">
						24 Jul 2015, 00:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>illuzionniste wrote:</cite><blockquote><div class="quotebox"><cite>reiwi wrote:</cite><blockquote><p>Hi,<br />does anyone have a minimalist sysupgrade image for TL-MR3020 (without the graphical interface maybe)?</p><p>I installed the one in the downloads sections but I have only 404 kB of free space now and I think I cannot install all the required packages to extroot.</p><p>I don&#039;t understand why but the first time I had 416 kB free, now only 404 kB.</p><p>Thanks in advance.</p></blockquote></div><p>hi, try this one </p><p><a href="https://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/openwrt-ar71xx-generic-tl-mr3020-v1-squashfs-sysupgrade.bin">https://downloads.openwrt.org/attitude_ … pgrade.bin</a></p></blockquote></div><p>Thank you. I forgot to mention I&#039;d need a ligthweight BB image, I already had AA.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p284758">
				<div class="post-metadata">
					<div class="post-num">Post #537</div>
					<div class="post-author">illuzionniste</div>
					<div class="post-datetime">
						24 Jul 2015, 03:28					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>reiwi wrote:</cite><blockquote><div class="quotebox"><cite>illuzionniste wrote:</cite><blockquote><div class="quotebox"><cite>reiwi wrote:</cite><blockquote><p>Hi,<br />does anyone have a minimalist sysupgrade image for TL-MR3020 (without the graphical interface maybe)?</p><p>I installed the one in the downloads sections but I have only 404 kB of free space now and I think I cannot install all the required packages to extroot.</p><p>I don&#039;t understand why but the first time I had 416 kB free, now only 404 kB.</p><p>Thanks in advance.</p></blockquote></div><p>hi, try this one </p><p><a href="https://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/openwrt-ar71xx-generic-tl-mr3020-v1-squashfs-sysupgrade.bin">https://downloads.openwrt.org/attitude_ … pgrade.bin</a></p></blockquote></div><p>Thank you. I forgot to mention I&#039;d need a ligthweight BB image, I already had AA.</p></blockquote></div><p><a href="https://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-mr3020-v1-squashfs-sysupgrade.bin">https://downloads.openwrt.org/barrier_b … pgrade.bin</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p284900">
				<div class="post-metadata">
					<div class="post-num">Post #538</div>
					<div class="post-author">Wingman2k</div>
					<div class="post-datetime">
						25 Jul 2015, 01:17					</div>
				</div>
				<div class="post-content content">
					<p>@reiwi had the same problem, you can try to find an image somewhere, maybe without IPv6 or something. But you can do it by yourself too with the ImageBuilder, can build you one when you tell me what you need. btw you can also add stuff you need anyway, the image will get bigger but you less than installing it afterwards.</p><p>@illuzionniste still need help? do you remember what you did or what happen? did you erased config and art? looks like. you should be able to enter u-boot, maybe your serial TX is broken, check it. I have the moded u-boot which looks a bit different. bit i can see this on mine:<br />uboot&gt; printmodel<br />Router model stored in flash at offset 0x9F01FD00: 3020000100000001</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p284908">
				<div class="post-metadata">
					<div class="post-num">Post #539</div>
					<div class="post-author">illuzionniste</div>
					<div class="post-datetime">
						25 Jul 2015, 03:20					</div>
				</div>
				<div class="post-content content">
					<p>After hours and hours of trying, I finally solved the problem, after having tested jumpers one by one I figured out that indeed the TX&nbsp; jumper was broken, I changed it and now i can get easly into uboot with tpl command after &quot;Autobooting in 1 second&quot; line, so I hope this will help people!</p><p>@Wingman2k: I just saw your response after having resolved the problem but you were quite right! thank you so much for your response and your help!</p>											<p class="post-edited">(Last edited by <strong>illuzionniste</strong> on 25 Jul 2015, 03:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p285173">
				<div class="post-metadata">
					<div class="post-num">Post #540</div>
					<div class="post-author">reiwi</div>
					<div class="post-datetime">
						27 Jul 2015, 21:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Wingman2k wrote:</cite><blockquote><p>@reiwi had the same problem, you can try to find an image somewhere, maybe without IPv6 or something. But you can do it by yourself too with the ImageBuilder, can build you one when you tell me what you need. btw you can also add stuff you need anyway, the image will get bigger but you less than installing it afterwards.</p></blockquote></div><p>Well I&#039;d just need to be able to rootfs (extroot) again like I did previuosly with AA, so:<br /> - kmod-usb-core<br /> - kmod-usb2</p><p>which are already in the downloadable image, plus:<br /> - kmod-usb-storage<br /> - kmod-fs-ext4<br /> - kmod-fs-vfat<br /> - block-mount</p><p>Then I can extroot with my USB and install everything else I want.</p><p>I was thinking of removing the graphical interface LuCI and install it after doing rootfs. But anything that is not strictly necessary to set it up works I guess.</p><p>I just didn&#039;t want to risk to brick my router. I&#039;m quite new to OpenWrt and afraid I could do something wrong. Also I don&#039;t have a x64 Linux installed now to be able to use ImageBuilder. So, if you would do that, appreciated <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p285214">
				<div class="post-metadata">
					<div class="post-num">Post #541</div>
					<div class="post-author">Wingman2k</div>
					<div class="post-datetime">
						28 Jul 2015, 00:02					</div>
				</div>
				<div class="post-content content">
					<p>@reiwi, wonder why you need vfat, you can install it later on extroot, BTW if you know (somebody) you can mod your flash to 32Mb which takes most of the fun stuff. Anyway i also prefer a image that comes ready and usable. when loosing the configuration on the router and everything is ready but missing the necessary packages to bring it back.<br />here is your requested image. <a href="https://www.dropbox.com/s/fxkm25yo00zli00/openwrt-ar71xx-generic-tl-mr3020-v1-squashfs-factory.bin?dl=0">openwrt-ar71xx-generic-tl-mr3020-v1-squashfs-factory.bin</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p285260">
				<div class="post-metadata">
					<div class="post-num">Post #542</div>
					<div class="post-author">reiwi</div>
					<div class="post-datetime">
						28 Jul 2015, 11:39					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Wingman2k wrote:</cite><blockquote><p>@reiwi, wonder why you need vfat, you can install it later on extroot, BTW if you know (somebody) you can mod your flash to 32Mb which takes most of the fun stuff. Anyway i also prefer a image that comes ready and usable. when loosing the configuration on the router and everything is ready but missing the necessary packages to bring it back.<br />here is your requested image. <a href="https://www.dropbox.com/s/fxkm25yo00zli00/openwrt-ar71xx-generic-tl-mr3020-v1-squashfs-factory.bin?dl=0">openwrt-ar71xx-generic-tl-mr3020-v1-squashfs-factory.bin</a></p></blockquote></div><p>Thank you man, appreciated but I asked for a sysupgrade image as I wanted to use the sysupgrade procedure:</p><div class="quotebox"><cite>reiwi wrote:</cite><blockquote><p>does anyone have a minimalist sysupgrade image for TL-MR3020</p></blockquote></div><p>I already have OpenWrt on now, but withouth enough free space to install the packages needed to rootfs. Or is there any safe method to upgrade using the standard &#039;factory.bin&#039;?</p><p>And yes I don&#039;t need vfat to extroot you&#039;re right I need it after. You can leave it.</p><p>Thank you.</p>											<p class="post-edited">(Last edited by <strong>reiwi</strong> on 28 Jul 2015, 14:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p285505">
				<div class="post-metadata">
					<div class="post-num">Post #543</div>
					<div class="post-author">Wingman2k</div>
					<div class="post-datetime">
						29 Jul 2015, 19:36					</div>
				</div>
				<div class="post-content content">
					<p><a href="https://www.dropbox.com/s/3422b4xnyb74pfd/openwrt-ar71xx-generic-tl-mr3020-v1-squashfs-sysupgrade.bin?dl=0">openwrt-ar71xx-generic-tl-mr3020-v1-squashfs-sysupgrade.bin</a></p><p>Backup and restore should work too.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p285554">
				<div class="post-metadata">
					<div class="post-num">Post #544</div>
					<div class="post-author">ch0wned</div>
					<div class="post-datetime">
						30 Jul 2015, 01:30					</div>
				</div>
				<div class="post-content content">
					<p>trying to install r46421, but I cannot get</p><p>kmod-fs-ext4 (and dependencies)<br />kmod-usb-storage (and dependencies)<br />block-mount</p><p>installed without running out of space. I can install 2 of the 3, but that damn ext4 package is huge.</p><br /><p> Currently, I cannot do extroot without all three of these packages and their deps...&nbsp; Anyone have any ideas other than &#039;custom image&#039;? Can I upgrade from BB to CC and keep my extroot?&nbsp; Anyone been successful using fat32 as the drive instead of ext4? fs-msdos is a fraction of the size of fs-ext4...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p285555">
				<div class="post-metadata">
					<div class="post-num">Post #545</div>
					<div class="post-author">saravanan_g</div>
					<div class="post-datetime">
						30 Jul 2015, 01:48					</div>
				</div>
				<div class="post-content content">
					<p>could not tftpboot - how to do it</p><p>cisco tftp server is up and running, but could not connect through putty.</p><p>Environmental details as below:<br />=========================================<br />hornet&gt; printenv<br />bootargs=console=ttyS0,115200 root=31:02 rootfstype=squashfs init=/sbin/init mtdparts=ar7240-nor0:256k(u-boot),64k(u-boot-env),2752k(rootfs),896k(uImage),64k(NVRAM),64k(ART)<br />bootcmd=bootm 0x9f020000<br />bootdelay=1<br />baudrate=115200<br />ethaddr=0xba:0xbe:0xfa:0xce:0x07:0x41<br />stdin=serial<br />stdout=serial<br />stderr=serial<br />ipaddr=192.168.1.115<br />serverip=192.168.1.111<br />ethact=eth0</p><p>Environment size: 362/65532 bytes</p><br /><p>Got into this loop<br />======================</p><p>hornet&gt; tftpboot 0x80000000 factory.bin<br />eth1 link down<br />eth0 link down<br />Using eth1 device<br />TFTP from server 192.168.1.111; our IP address is 192.168.1.115<br />Filename &#039;factory.bin&#039;.<br />Load address: 0x80000000<br />Loading: T T<br />Retry count exceeded; starting again</p><p>=======================</p><p>what to be done?</p>											<p class="post-edited">(Last edited by <strong>saravanan_g</strong> on 30 Jul 2015, 01:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p286210">
				<div class="post-metadata">
					<div class="post-num">Post #546</div>
					<div class="post-author">reiwi</div>
					<div class="post-datetime">
						4 Aug 2015, 11:29					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Wingman2k wrote:</cite><blockquote><p><a href="https://www.dropbox.com/s/3422b4xnyb74pfd/openwrt-ar71xx-generic-tl-mr3020-v1-squashfs-sysupgrade.bin?dl=0">openwrt-ar71xx-generic-tl-mr3020-v1-squashfs-sysupgrade.bin</a></p><p>Backup and restore should work too.</p></blockquote></div><p>Thank you again. Tested the other day.</p><p>However the /etc/opkg.conf has the repo links for Chaos Calmer 15.05 RC3 not for Barrier Breaker 14.07. Installing/removing packages from from the Internet will cause some &#039;127&#039; errors when configuring the packages.</p><p>The fix is obviously to change the repo links to 14.07.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p286293">
				<div class="post-metadata">
					<div class="post-num">Post #547</div>
					<div class="post-author">Wingman2k</div>
					<div class="post-datetime">
						5 Aug 2015, 00:38					</div>
				</div>
				<div class="post-content content">
					<p>@reiwi, sorry for that, already testing CC, seems I edited the wrong file. but have no physical access to that machine, so I did not check everything, do you want a fixed image? Will check the /etc/opkg.conf tomorrow, but can&#039;t remember to edit this one. Do you want an fixed image? CC hopefully will be out soon ;-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p287330">
				<div class="post-metadata">
					<div class="post-num">Post #548</div>
					<div class="post-author">reiwi</div>
					<div class="post-datetime">
						12 Aug 2015, 23:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Wingman2k wrote:</cite><blockquote><p>@reiwi, sorry for that, already testing CC, seems I edited the wrong file. but have no physical access to that machine, so I did not check everything, do you want a fixed image? Will check the /etc/opkg.conf tomorrow, but can&#039;t remember to edit this one. Do you want an fixed image? CC hopefully will be out soon ;-)</p></blockquote></div><p>Sorry for the late response. I have BB installed now but... maybe we should wait for CC as you suggested <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>If you&#039;ll manage to build a minimalistic image ready for extroot let me know <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p289214">
				<div class="post-metadata">
					<div class="post-num">Post #549</div>
					<div class="post-author">samri.nasser</div>
					<div class="post-datetime">
						26 Aug 2015, 02:46					</div>
				</div>
				<div class="post-content content">
					<p>Hello If Any One Have Dump For Mr3020 v1 Please Share</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291436">
				<div class="post-metadata">
					<div class="post-num">Post #550</div>
					<div class="post-author">Wingman2k</div>
					<div class="post-datetime">
						12 Sep 2015, 13:12					</div>
				</div>
				<div class="post-content content">
					<p>15.05 is out, here is the image with block-mount kmod-fs-ext4&nbsp; kmod-usb-storage included.<br /><a href="https://www.dropbox.com/s/rn66ev3c8i00z3c/openwrt-15.05-ar71xx-generic-tl-mr3020-v1-squashfs-factory.bin?dl=0">openwrt-15.05-ar71xx-generic-tl-mr3020-v1-squashfs-factory.bin</a><br /><a href="https://www.dropbox.com/s/bxtxw1wjwh3ntat/openwrt-15.05-ar71xx-generic-tl-mr3020-v1-squashfs-sysupgrade.bin?dl=0">openwrt-15.05-ar71xx-generic-tl-mr3020-v1-squashfs-sysupgrade.bin</a></p><p>@samri.nasser did you lost your radio or art? because you are asking for the dump?</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 22 of 24</div><nav><ul><li><a href="viewtopic.php%3Fid=33429&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=33429&amp;p=20.html">20</a></li><li><a href="viewtopic.php%3Fid=33429&amp;p=21.html">21</a></li><li class="pagination-current"><span>22</span></li><li><a href="viewtopic.php%3Fid=33429&amp;p=23.html">23</a></li><li><a href="viewtopic.php%3Fid=33429&amp;p=24.html">24</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>