<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Correct way to use Stack Smashing Protection?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p192245">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">phatgeek</div>
					<div class="post-datetime">
						16 Feb 2013, 22:59					</div>
				</div>
				<div class="post-content content">
					<p>(moved from general discussion to this forum, which I think is more appropriate)</p><p>Compiling Attitude Adjustment branch from SVN r35608.<br />I have errors while compiling several packages after selecting CONFIG_SSP_SUPPORT=y<br />and<br />CONFIG_PACKAGE_libssp=y<br />in menuconfig.</p><p>Importantly for me, PACKAGE_fwknopd fails to compile (although off the top of my head, another example is PACKAGE_avahi-autoipd). The package compile failures issue the following message:</p><p>&quot;Package fwknopd is missing dependencies for the following libraries:<br />libssp.so.0&quot;</p><p>I note that there is a pre-compiled Attitude Adjustment 12.09 Beta package for fwknopd available for download, so what I am I doing wrong? How do you correctly compile with libssp -- especially those packages that require it?</p><p>Am I doing something wrong? Or is there a bug in a/some Makefile(s)? Why does it think I&#039;m missing dependencies when libssp.so.0 is in my toolchain and also compiled as a rootfs package?</p><p>Proof:<br />phatgeek@localhost openwrt-aa-svn]$ find . | grep libssp.so.0<br />./staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/libssp.so.0.0.0<br />./staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/libssp.so.0<br />./staging_dir/target-mips_r2_uClibc-0.9.33.2/root-ar71xx/lib/libssp.so.0.0.0<br />./staging_dir/target-mips_r2_uClibc-0.9.33.2/root-ar71xx/lib/libssp.so.0<br />./build_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/gcc-linaro-4.6-2012.02-final/mips-openwrt-linux-uclibc/libssp/.libs/libssp.so.0.0.0<br />./build_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/gcc-linaro-4.6-2012.02-final/mips-openwrt-linux-uclibc/libssp/.libs/libssp.so.0<br />./build_dir/target-mips_r2_uClibc-0.9.33.2/toolchain/ipkg-ar71xx/libssp/lib/libssp.so.0.0.0<br />./build_dir/target-mips_r2_uClibc-0.9.33.2/toolchain/ipkg-ar71xx/libssp/lib/libssp.so.0<br />./build_dir/target-mips_r2_uClibc-0.9.33.2/OpenWrt-SDK-ar71xx-for-redhat-x86_64-gcc-4.6-linaro_uClibc-0.9.33.2/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/libssp.so.0.0.0<br />./build_dir/target-mips_r2_uClibc-0.9.33.2/OpenWrt-SDK-ar71xx-for-redhat-x86_64-gcc-4.6-linaro_uClibc-0.9.33.2/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/libssp.so.0<br />./build_dir/target-mips_r2_uClibc-0.9.33.2/OpenWrt-SDK-ar71xx-for-redhat-x86_64-gcc-4.6-linaro_uClibc-0.9.33.2/staging_dir/target-mips_r2_uClibc-0.9.33.2/root-ar71xx/lib/libssp.so.0.0.0<br />./build_dir/target-mips_r2_uClibc-0.9.33.2/OpenWrt-SDK-ar71xx-for-redhat-x86_64-gcc-4.6-linaro_uClibc-0.9.33.2/staging_dir/target-mips_r2_uClibc-0.9.33.2/root-ar71xx/lib/libssp.so.0<br />./build_dir/target-mips_r2_uClibc-0.9.33.2/OpenWrt-Toolchain-ar71xx-for-mips_r2-gcc-4.6-linaro_uClibc-0.9.33.2/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/libssp.so.0.0.0<br />./build_dir/target-mips_r2_uClibc-0.9.33.2/OpenWrt-Toolchain-ar71xx-for-mips_r2-gcc-4.6-linaro_uClibc-0.9.33.2/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/libssp.so.0</p><p>Thanks,<br />Phat</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192330">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">phatgeek</div>
					<div class="post-datetime">
						17 Feb 2013, 23:26					</div>
				</div>
				<div class="post-content content">
					<p>An update, for posterity:<br />I manually added +libssp to the DEPENDS: sections in the fwknop and avahi Makefiles. Afterwards, these packages compiled fine. I may have overdone the DEPENDS additions, as I added it to the DEPENDS variable in every name space in the Makefiles. I&#039;ll do some experimenting, especially for avahi, since there are many different packages defined...</p><p>I&#039;ll submit a bug report and a patch in the near future. The way I compiled it was a hack, and I want to figure out the correct way first, then generate patches to fix the bugs. Looks like it&#039;s maybe just the two package makefiles, avahi and fwknop. I didn&#039;t have any other issues when I compiled (but I didn&#039;t try to compile all packages, either).</p><p>I saw in one of the Makefiles a syntax that looks like:<br />&quot;+SSP_SUPPORT:libssp&quot;</p><p>Am I correct in assuming this means, &quot;if SSP_SUPPORT, then add libssp to the DEPENDS variable&quot;? And is the syntax correct?<br />Phat</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>