<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> problem mounting fat filesystems</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p77314">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mark9630</div>
					<div class="post-datetime">
						30 Nov 2008, 23:51					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Using Kamikaze 8.09 RC1 on an Asus WL500G Premium, I can mount ext2 file systems over usb just fine. But for fat32 there seems to be a problem loading the module:</p><p>root@OpenWrt:~# insmod fat<br />insmod: unresolved symbol load_nls<br />root@OpenWrt:~# insmod vfat<br />insmod: unresolved symbol fat_scan</p><p>I have already installed all the kmod-nls-* packages, what could be the problem?</p><p>Thanks!<br />Mark</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p77326">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">routerstacker</div>
					<div class="post-datetime">
						1 Dec 2008, 05:08					</div>
				</div>
				<div class="post-content content">
					<p>kmod-fs-* package?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p77337">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mark9630</div>
					<div class="post-datetime">
						1 Dec 2008, 12:41					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for your reply and you&#039;re right. I forgot to mention I had also installed these packages:</p><p>kmod-fs-ext2 - 2.4.35.4-brcm-2.4-1 -<br />kmod-fs-msdos - 2.4.35.4-brcm-2.4-1 -<br />kmod-fs-vfat - 2.4.35.4-brcm-2.4-1 -</p><p>I can&#039;t see which other packages I could need for mounting fat32 file systems, but just in case I installed all the other kmod-fs-* packages.</p><p>However, the errors remain the same.</p><p>All help appreciated <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>Mark</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p77886">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">ojl</div>
					<div class="post-datetime">
						10 Dec 2008, 15:55					</div>
				</div>
				<div class="post-content content">
					<p>I think you also need to install modules:<br />- nls_cp437 , and<br />- nls_iso8859_1<br />(Kernel modules kmod-nls-cp437 and kmod-nls-iso8859-1)</p><p>Check your dmesg and logread after unsuccessful mount, they should also state it. I got my vfat mount working with these.</p><p>-- <br />kurkku</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p77891">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">mark9630</div>
					<div class="post-datetime">
						10 Dec 2008, 16:57					</div>
				</div>
				<div class="post-content content">
					<p>Johndoe: did you try installing all packages starting with &quot;kmod-nls-&quot; ? That&#039;s basically what I did to solve the &quot;unresolved symbol bla-nls&quot; errors. I think this should be safe, as long as you have the available memory to install all of them.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p84847">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">yarrumretep</div>
					<div class="post-datetime">
						29 Mar 2009, 21:44					</div>
				</div>
				<div class="post-content content">
					<p>johndoe - did you ever solve this?&nbsp; I am seeing the exact problem.&nbsp; Even though I&#039;ve selected to bulid kmod-nls-base as a module, it doesn&#039;t seem to appear in the packages directory - nor is it in on the snapshot download location for opkg.</p><p>Any thoughts anyone?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p88627">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">rjb</div>
					<div class="post-datetime">
						25 May 2009, 02:31					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>yarrumretep wrote:</cite><blockquote><p>Even though I&#039;ve selected to bulid kmod-nls-base as a module, it doesn&#039;t seem to appear in the packages directory - nor is it in on the snapshot download location for opkg.</p></blockquote></div><p>Same problem here.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p88651">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Misuser</div>
					<div class="post-datetime">
						25 May 2009, 11:00					</div>
				</div>
				<div class="post-content content">
					<p>I have a working fat on usb. I remember i&#039;ve installed alot of pkg to get it work right. At some momment it was working but with short file names. And it should have been installed another pkgs. Obviously i don&#039;t remember what i&#039;ve installed for it to work but if you know a method to get the installed pkgs i will do dat.<br />My sistem is x86, if that matter.</p><p>From my memory, there was some OHCIsomething and UHCIsomething for usb. That should be installed too.</p>											<p class="post-edited">(Last edited by <strong>Misuser</strong> on 25 May 2009, 11:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p88675">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">lizby</div>
					<div class="post-datetime">
						25 May 2009, 16:49					</div>
				</div>
				<div class="post-content content">
					<p>For stock k809 firmware, I install the following to make vfat usb drives accessible.</p><p>opkg install kmod-fs-vfat kmod-fs-ext2 kmod-fs-ext3 fdisk e2fsprogs swap-utils dosfstools <br />opkg install kmod-usb-uhci nano kmod-loop kmod-nls-cp437 kmod-nls-iso8859-1<br />opkg install kmod-usb2 kmod-usb-storage usbutils</p><p>Not all may be needed, but in particular, kmod-nls-cp437 and kmod-nls-iso8859-1 are required.&nbsp; I don&#039;t understand why, if they are needed, they are not dependancies of kmod-usb-storage.</p><p>In the build system, select these in &quot;make menuconfig&quot;.&nbsp; usbutils give you lsusb.&nbsp; If you have problems after intstalling the above, provide the output from lsusb and the tail of dmesg after you insert the usb device.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p88703">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">rjb</div>
					<div class="post-datetime">
						26 May 2009, 00:03					</div>
				</div>
				<div class="post-content content">
					<p>Thanks! I got it to work now, but it&#039;s really strange. I used the menuconfig option &quot;Enable all packages by default&quot;. This selects all modules automatically, but this only happens on a fresh tree. Not when I already built it earlier. You can see whether or not the option did its job by checking if all filesystems are enabled as modules (for example).</p><p>Then I built everything, flashed the new image, and now the funny thing: I just did:<br /></p><div class="codebox"><pre><code>opkg install kmod-usb-storage
opkg install kmod-fs-vfat</code></pre></div><p>and after that I was able to mount the USB drive! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>I was expecting that I had to install the other (ohci/uhci/usb2, nls*) modules as well (using opkg). Apparently enabling those modules in menuconfig was enough. Hmmmm....</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>