<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Resetting nvram settings via USB</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 16 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p54224">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">workhn</div>
					<div class="post-datetime">
						20 Aug 2007, 09:54					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve screwed up my ASUS WL-500gP nvram settings. So the router cannot be pinged even in restoration mode.<br />However, it seems that OpenWRT WhiteRussian boots and working.<br />Is it possible somehow to boot from USB and reset nvram network settings to defaults, so device get pinging on 192.168.1.1, and I can use tftp or firmware restoration tool?</p>											<p class="post-edited">(Last edited by <strong>workhn</strong> on 20 Aug 2007, 10:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54225">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mbm</div>
					<div class="post-datetime">
						20 Aug 2007, 09:56					</div>
				</div>
				<div class="post-content content">
					<p>1) What did you do to nvram?</p><p>2) What makes you think openwrt is still booting if you can&#039;t ping it?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54226">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">workhn</div>
					<div class="post-datetime">
						20 Aug 2007, 10:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mbm wrote:</cite><blockquote><p>1) What did you do to nvram?</p></blockquote></div><p>I&#039;ve executed the following commands:<br /></p><div class="codebox"><pre><code>nvram set vlan1ports=&quot;0&quot;
nvram set vlan1hwname=et0

nvram set ksl_ifname=vlan1
nvram set ksl_proto=static
nvram set ksl_ipaddr=192.168.1.1
nvram set ksl_netmask=255.255.255.0
nvram set ksl_gateway=192.168.1.1

nvram set vlan2ports=&quot;1&quot;
nvram set vlan2hwname=et0

nvram set lan1_ifname=vlan2
nvram set lan1_proto=static
nvram set lan1_ipaddr=192.168.1.1
nvram set lan1_netmask=255.255.255.0
nvram set lan1_gateway=192.168.1.1

nvram set vlan3ports=&quot;2&quot;
nvram set vlan3hwname=et0

nvram set lan2_ifname=vlan3
nvram set lan2_proto=static
nvram set lan2_ipaddr=192.168.1.1
nvram set lan2_netmask=255.255.255.0
nvram set lan2_gateway=192.168.1.1

nvram set vlan4ports=&quot;3&quot;
nvram set vlan4hwname=et0

nvram set lan3_ifname=vlan4
nvram set lan3_proto=static
nvram set lan3_ipaddr=192.168.1.1
nvram set lan3_netmask=255.255.255.0
nvram set lan3_gateway=192.168.1.1

nvram set vlan5ports=&quot;4&quot;
nvram set vlan5hwname=et0

nvram set lan4_ifname=vlan5
nvram set lan4_proto=static
nvram set lan4_ipaddr=192.168.1.1
nvram set lan4_netmask=255.255.255.0
nvram set lan4_gateway=192.168.1.1

nvram set ifup_interfaces=&quot;lan ksl lan1 lan2 lan3 lan4&quot;

nvram commit</code></pre></div><p>And rebooted then. I think that it was wrong that I do not written &quot;5*&quot; for each vlan in ports. And also reassiged LAN1 from vlan0.<br /></p><div class="quotebox"><cite>mbm wrote:</cite><blockquote><p>2) What makes you think openwrt is still booting if you can&#039;t ping it?</p></blockquote></div><p>AIR indicator turns on after some seconds.</p>											<p class="post-edited">(Last edited by <strong>workhn</strong> on 22 Aug 2007, 13:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54302">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">gulikoza</div>
					<div class="post-datetime">
						21 Aug 2007, 12:08					</div>
				</div>
				<div class="post-content content">
					<p>did you try openwrt failsafe mode?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54395">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">workhn</div>
					<div class="post-datetime">
						22 Aug 2007, 13:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>gulikoza wrote:</cite><blockquote><p>did you try openwrt failsafe mode?</p></blockquote></div><p>Thanks for the direction! Now I tried, and can perform telnet connection.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>