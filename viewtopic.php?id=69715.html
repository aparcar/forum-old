<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Password Reset Using SSH - Need Detailed Instructions Please</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 14 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p351159">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Spartan81</div>
					<div class="post-datetime">
						5 Feb 2017, 18:17					</div>
				</div>
				<div class="post-content content">
					<p>I recently installed version 15.05.1 of OpenWrt and used Luci to set the root password. I have forgotten the password and need step by step detailed instructions on how to SSH into the router using Mac OS X Terminal please. </p><p>A member of this forum was kind enough to provide the Terminal command: ssh root@192.168.1.1 after typing it in, I hit return but nothing happened. </p><p>I am able to successfully trigger failsafe mode, which is confirmed by the routers rapid LED blink pattern. All I need are detailed instructions on what commands to use and what to expect after entering each command please. Thank you to all who offer instructions and advice. Below are my system settings and setup.</p><p>Using Terminal to SSH into Router<br />Connecting to Router’s LAN port<br />Disabled Firewall<br />Configure IPv4: Manually<br />IPv4 Address: 192.168.1.2<br />Router: 192.168.1.1</p><p>Computer: OS X<br />Router: WRT1900AC v1<br />OpenWrt: 15.05.1</p>											<p class="post-edited">(Last edited by <strong>Spartan81</strong> on 5 Feb 2017, 19:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351165">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						5 Feb 2017, 18:42					</div>
				</div>
				<div class="post-content content">
					<p>I think with 15.05 you use Telnet.&nbsp; At some point it was changed so that ssh works in recovery mode (and telnet is never active), but I think that was after 15.05. Another likely reason it didn&#039;t work is you were using the WAN port.&nbsp; Disconnect the router from everything except to connect one of the LAN ports directly to your Mac.</p><p>telnet access is simply &#039;telnet 192.168.1.1&#039; after setting your addresses.</p><p>Once you have telnet or ssh logged in, do </p><div class="codebox"><pre><code>mount_root
passwd
&lt;type a new password twice&gt;
reboot </code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351168">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Spartan81</div>
					<div class="post-datetime">
						5 Feb 2017, 19:08					</div>
				</div>
				<div class="post-content content">
					<p>Thank you mk24 for your response and advice. I misspoke when listing the WAN port as my connection, I have been connecting to the LAN port on the router, apologizes. </p><p>I understand telnet is disabled once a root password has been set and SSH is another option. So I need step by step instructions on how to log into the router and provide commands to reset&nbsp; the root password. I ask for detailed instructions because I have never used Terminal or SSH, and realize if a command is missed or performed incorrectly, resetting the password will fail. Thank you again for your help!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351173">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						5 Feb 2017, 19:40					</div>
				</div>
				<div class="post-content content">
					<p>When you boot to recovery mode it uses only the default settings, which means there is no password.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351174">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Spartan81</div>
					<div class="post-datetime">
						5 Feb 2017, 19:44					</div>
				</div>
				<div class="post-content content">
					<p>Ok thank you. So using SSH, what are the commands to reset or add a new password?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351179">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						5 Feb 2017, 20:11					</div>
				</div>
				<div class="post-content content">
					<p>What I posted above.</p><p>mount_root = activate the changeable part of the filesystem so your changes will be permanent.<br />passwd = set a new password (encrypts the password you enter and writes it to a file)<br />reboot = bring router up in normal mode</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351185">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Spartan81</div>
					<div class="post-datetime">
						5 Feb 2017, 20:22					</div>
				</div>
				<div class="post-content content">
					<p>Ok thank you again for your response.</p><p>So once Failsafe mode is active I will launch Terminal and type these instructions:</p><p>1. type: mount_root [enter return]<br />2. type: passwd [enter return]<br />3. type new password: [enter return]<br />4. type new password again: [enter return]<br />5. reboot and login with new password</p><p>I assume SSH and IP address 192.168.1.1 does not need to be part of the commands in order to actually reach the router and make the password change via SSH?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351200">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						5 Feb 2017, 21:45					</div>
				</div>
				<div class="post-content content">
					<p>You have to telnet or ssh to the router first.&nbsp; <br />telnet 192.168.1.1<br />ssh root@192.168.1.1<br />Only one of these will work depending on how the router is configured.<br />When the connection is completed, the router will send a banner announcement to your Terminal and a different prompt will appear.&nbsp; This is all coming from the router.&nbsp; The next commands you type will be executed by the router&#039;s CPU not your Mac.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351201">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						5 Feb 2017, 21:49					</div>
				</div>
				<div class="post-content content">
					<p>You absolutely need to type </p><div class="quotebox"><blockquote><p>ssh root@192.168.1.1</p></blockquote></div><p> in terminal first before you type any other commands.</p><p>If you type </p><div class="quotebox"><blockquote><p>ssh root@192.168.1.1</p></blockquote></div><p> in terminal and nothing happens -- it means there&#039;s no connection to the router from the computer you&#039;re typing it on.</p><p>You are hitting enter/return after you&#039;re typing the ssh command, right?</p>											<p class="post-edited">(Last edited by <strong>stangri</strong> on 5 Feb 2017, 21:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351203">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Spartan81</div>
					<div class="post-datetime">
						5 Feb 2017, 21:56					</div>
				</div>
				<div class="post-content content">
					<p>Thank you again. As you have indicated, another member instructed me to enter: ssh root@192.168.1.1 and after hitting enter, all that happen was my cursor dropped down one line. I was not presented with a banner announcement within Terminal. I tried it multiple times and I&#039;m sure I have successfully triggered Failsafe mode and set the computers address to 192.168.1.2. This is the sticking point at this time. I will try this again in the order listed below and hopefully it will work. Thank you again for your help, I will report back the results.</p><p>1. Open Terminal and type: ssh root@192.168.1.1 [enter return]<br />2. type: mount_root [enter return]<br />3. type: passwd [enter return]<br />4. type new password: [enter return]<br />5. type new password again: [enter return]<br />6. reboot and login with new password</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351205">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						5 Feb 2017, 22:05					</div>
				</div>
				<div class="post-content content">
					<p>Try a ping.&nbsp; In the Terminal,<br />ping 192.168.1.1<br />This should produce a line each second showing a response time in milliseconds.&nbsp; The Ethernet lights will flash with each ping. Press ctrl-C to stop it.<br />If that does not work make sure your Mac is configured to 192.168.1.2 with a netmask of 255.255.255.0 (sometimes also called 24).&nbsp; That is usually automatic.&nbsp; Make sure you can ping your own machine at 192.168.1.2.</p>											<p class="post-edited">(Last edited by <strong>mk24</strong> on 5 Feb 2017, 22:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351209">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Spartan81</div>
					<div class="post-datetime">
						5 Feb 2017, 22:10					</div>
				</div>
				<div class="post-content content">
					<p>Ok that&#039;s good advice. I assume if I can ping the router while in Terminal, that suggests I can communicate with it via Terminal commands. Hopefully after confirming this and typing: ssh root@192.168.1.1 I should be presented with a banner announcement within Terminal, letting me know I can proceed with the other commands listed earlier. Thank you again.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351223">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">Spartan81</div>
					<div class="post-datetime">
						6 Feb 2017, 00:11					</div>
				</div>
				<div class="post-content content">
					<p>Using Network utility, I’ve configured IPv4 (Manually) and set the IP Address to (192.168.1.2) Subnet Mask to (225.225.225.0) and Router to (192.168.1.1)</p><p>When I start up the router without trying to go into Failsafe mode, I can ping the router in Terminal at 192.168.1.1 and can see the times in ms, packets sent and returned 100%. When I boot the router into Failsafe mode, “Lights flashing rapidly indicating failsafe mode is triggered” pinging the same IP address in Terminal, I receive “Request timeout”. So I’m unable to ping the router in what appears to be failsafe mode.</p><p>If I restart the router in the normal fashion “not Failsafe mode” and enter Terminal and type the command ssh root@192.168.1.1 I receive a message “The authenticity of host ‘192.168.1.1 (192.168.1.1)’ can’t be established. RSA key fingerprint is [followed by a large sequence of numbers, letters and special characters].</p><p>It appears I can ping and send commands while in Terminal to the router and not in failsafe mode. However, once I trigger failsafe mode while holding down the reset button on the router and waiting for the rapid blinking lights to appear, no form of communication can be made to the router. What could be the issue?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351225">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						6 Feb 2017, 00:31					</div>
				</div>
				<div class="post-content content">
					<p>Maybe in failsafe mode the ip address is different.</p><p>But as you have a router with two partitions, have you tried booting into another partition: <a href="https://wiki.openwrt.org/toh/linksys/wrt_ac_series#firmware_recovery">https://wiki.openwrt.org/toh/linksys/wr … e_recovery</a> ? Maybe that one is stock and/or you&#039;ll remember password for that one.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>