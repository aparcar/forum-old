<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Very slow download speed using Archer C7 v2 router as OpenVPN client</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p306150">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">juanmartinbravo</div>
					<div class="post-datetime">
						4 Jan 2016, 12:26					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><br /><p>I bought an Archer C7 v2 router so I could install OpenWRT and use the router as openvpn client. However my download speed is very slow:</p><p><strong>Speed test without VPN:</strong><br />Ping 6 ms / 75Mbps download / 18 Mbps upload</p><p><strong>Speed test with Windows 10 as openvpn client:</strong><br />Ping 100ms / 58 Mbps download&nbsp; / 14 Mbps download</p><p><strong>Speed test with Archer C7 v2 as openvpn client:</strong><br />Ping 100ms / <span style="color: #FF0000">5mbps download</span> /&nbsp; 7mbps upload</p><br /><p>I&#039;m running openwrt 15.05 on my router.&nbsp; I tried multiple changes on the server.conf and client.conf but&nbsp; the download speed never reach 9 Mbps.</p><p>I&#039;m wondering if the reason for that it&#039;s because that router can&#039;t delvier better speeds as OpenVPn client or if there is something that can be done.</p><p>Does anyone have any idea?</p><p>PS: I will post my current server.conf and client.conf once I&#039;m back home, but as I said I tried different configuration and the results didn&#039;t change much</p><p>thank you</p>											<p class="post-edited">(Last edited by <strong>juanmartinbravo</strong> on 4 Jan 2016, 12:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306151">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">juanmartinbravo</div>
					<div class="post-datetime">
						4 Jan 2016, 12:28					</div>
				</div>
				<div class="post-content content">
					<p>-Maybe this explains something?<br /><a href="https://airvpn.org/topic/12981-very-poor-performance-when-set-up-on-router/">https://airvpn.org/topic/12981-very-poo … on-router/</a> (see comment in green)<br /><a href="https://wiki.openwrt.org/doc/howto/benchmark.openssl">https://wiki.openwrt.org/doc/howto/benchmark.openssl</a></p><p>I&#039;m new to this so I don&#039;t know if that could be related or if the openssl test have to do somethign with the download speed</p><br /><p>-Here one ddwrt user informs that he can get more than 10mbps:<br /><a href="http://dd-wrt.co.id/phpBB2/viewtopic.php?p=999902&amp;sid=78baa785427e0f9af2339c6c89a159e8">http://dd-wrt.co.id/phpBB2/viewtopic.ph … 6c89a159e8</a></p><p>-And here one user mentions that this router can get maximum 10mbps but he could be wrong (although I&#039;m afraid he is not) and he is using ddwrt. See comment from user tigs where he says:</p><p><a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?p=978773&amp;sid=8c15d92980b59c31277c4cb368d97141">http://www.dd-wrt.com/phpBB2/viewtopic. … b368d97141</a></p><p>&quot;If that is the case, I think archer c&amp; will be the bottleneck. You won&#039;t be able to get beyond 12M regardless your ISP service. It is the hardware linitation. I have a netgear R7000 which works way better than archer. I can easily get 25-27 out of the the 30M my ISP provided.</p><p>This also makes me wonder why you had such a big overhead. Archer can handle at least 10M VPN. I guess it is the distance you are from the vpn server that accounts for the difference.&quot;</p><p>Maybe there is a hardware limitation with that router when it works as openvpn client? </p><p>Does anyone know a router that could provide more downlaod speed when its working as openvpn client?</p>											<p class="post-edited">(Last edited by <strong>juanmartinbravo</strong> on 4 Jan 2016, 13:18)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306157">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">maurer</div>
					<div class="post-datetime">
						4 Jan 2016, 13:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>juanmartinbravo wrote:</cite><blockquote><p>Does anyone know a router that could provide more downlaod speed when its working as openvpn client?</p></blockquote></div><p>I quote from <a href="https://forum.openwrt.org/viewtopic.php?pid=306097#p306097">https://forum.openwrt.org/viewtopic.php … 97#p306097</a><br />Over the Christmas holidays we made some tests and the results are: Turris Omnia is able to route 975 Mbps (even with NAT). If you prefer more technical info, it can handle up to 450 000 packets per second. We also measured <strong>VPN throughput</strong>. With Turris Omnia, acting as an <strong>OpenVPN server</strong> with recommended configuration with one client connected, <strong>we measured 100 Mbps in one direction</strong>. We expect this number to be a bit better in the future as we have still the crypto acceleration turned off.<br />so <a href="https://www.indiegogo.com/projects/turris-omnia-hi-performance-open-source-router">https://www.indiegogo.com/projects/turr … rce-router</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306162">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">juanmartinbravo</div>
					<div class="post-datetime">
						4 Jan 2016, 14:05					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>maurer wrote:</cite><blockquote><div class="quotebox"><cite>juanmartinbravo wrote:</cite><blockquote><p>Does anyone know a router that could provide more downlaod speed when its working as openvpn client?</p></blockquote></div><p>I quote from <a href="https://forum.openwrt.org/viewtopic.php?pid=306097#p306097">https://forum.openwrt.org/viewtopic.php … 97#p306097</a><br />Over the Christmas holidays we made some tests and the results are: Turris Omnia is able to route 975 Mbps (even with NAT). If you prefer more technical info, it can handle up to 450 000 packets per second. We also measured <strong>VPN throughput</strong>. With Turris Omnia, acting as an <strong>OpenVPN server</strong> with recommended configuration with one client connected, <strong>we measured 100 Mbps in one direction</strong>. We expect this number to be a bit better in the future as we have still the crypto acceleration turned off.<br />so <a href="https://www.indiegogo.com/projects/turris-omnia-hi-performance-open-source-router">https://www.indiegogo.com/projects/turr … rce-router</a></p></blockquote></div><p>So then you also think that the Archer C7 can&#039;t deliver more than 10mbps download speed when working as openvpn client?</p><p>thank you</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306205">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">PJK</div>
					<div class="post-datetime">
						4 Jan 2016, 20:03					</div>
				</div>
				<div class="post-content content">
					<p><a href="https://forum.openwrt.org/viewtopic.php?id=50914">https://forum.openwrt.org/viewtopic.php?id=50914</a></p><p>Try if Arokh&#039;s build will do any better, it is more optimized.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306216">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">juanmartinbravo</div>
					<div class="post-datetime">
						4 Jan 2016, 21:23					</div>
				</div>
				<div class="post-content content">
					<p>Thanks, but do think I could get more than 10Mbps as download speeds or my hardware isn&#039;t able to deliver that as openvpn client?</p><p>In the meantime I did some tess in the server and client conf files and the results were:<br />Ping 150 ms / 6-8 Mbps download speed / 15-16 Mbps upload speed.</p><p>So I managed to improve the upload speed... but the download is still too bad <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306293">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">PJK</div>
					<div class="post-datetime">
						5 Jan 2016, 14:17					</div>
				</div>
				<div class="post-content content">
					<p>I haven&#039;t tested myself, but compiler etc optimizations could have big difference and Arokhs build is based to trunk version which could also be little better compared to 15.05.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306378">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">juanmartinbravo</div>
					<div class="post-datetime">
						5 Jan 2016, 23:22					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>PJK wrote:</cite><blockquote><p><a href="https://forum.openwrt.org/viewtopic.php?id=50914">https://forum.openwrt.org/viewtopic.php?id=50914</a></p><p>Try if Arokh&#039;s build will do any better, it is more optimized.</p></blockquote></div><p>I tried it and I got even worst speed.... I think it&#039;s time to return my router to amazon and get one more powerful.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p310164">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">diizzy</div>
					<div class="post-datetime">
						3 Feb 2016, 21:17					</div>
				</div>
				<div class="post-content content">
					<p>Based on the hardware of a C7v2 I&#039;d say somewhere around 17mbit or so (AES 192). My TL-WDR3600 pushes roughly ~13mbit over the Internet with 75% CPU load. Kernel HZ=250, mips16 disabled globally and using PolarSSL (mbedtls). <br />You can probably get out about 20 or so using OpenSSL.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>