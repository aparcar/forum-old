<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> SMS access on TPLink 3G routers</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 13 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p191807">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">elaber</div>
					<div class="post-datetime">
						12 Feb 2013, 18:36					</div>
				</div>
				<div class="post-content content">
					<p>is there a way to access SMS profile on usb modems connected to TPLink 3G routers via router&#039;s serial port or via any other way?</p><p>that must be a good project. i hope someone will make a start. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191857">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">nozombian</div>
					<div class="post-datetime">
						13 Feb 2013, 10:36					</div>
				</div>
				<div class="post-content content">
					<p>I don&#039;t know, if there&#039;s a ready to use project, but reading sms messages should be easy even from within ash script, using at commands. A quick google gave me this <a href="http://www.diafaan.com/sms-tutorials/gsm-modem-tutorial/">example</a>.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191859">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">elaber</div>
					<div class="post-datetime">
						13 Feb 2013, 10:51					</div>
				</div>
				<div class="post-content content">
					<p>thanks for the reply nozombian.</p><p>been working with gsm modems for quite a time now. mostly serial interfaced to pc or mcu.<br />for usb modems (same usb modems used in 3G router), gsm profile is accessible via virtual serial port when connected to pc.</p><p>thanks for the tip about accessing usb modem gsm via ash script.<br />i just dont have any idea how that works. never been into linux thing up to now. sorry. <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>anyway, hope to read some more replies to make things simpler.</p><p>thanks</p>											<p class="post-edited">(Last edited by <strong>elaber</strong> on 13 Feb 2013, 10:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191861">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">elaber</div>
					<div class="post-datetime">
						13 Feb 2013, 11:06					</div>
				</div>
				<div class="post-content content">
					<p>btw, when arduino is connected to a 3G router running OpenWrt, arduino is detected as a serial device.<br />is that also true when a 3G usb modem is connected to the router?</p><p>thanks</p>											<p class="post-edited">(Last edited by <strong>elaber</strong> on 13 Feb 2013, 11:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191862">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">robthebrew</div>
					<div class="post-datetime">
						13 Feb 2013, 11:34					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://h-wrt.com/en/doc/gsm">http://h-wrt.com/en/doc/gsm</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191863">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">elaber</div>
					<div class="post-datetime">
						13 Feb 2013, 11:46					</div>
				</div>
				<div class="post-content content">
					<p>wow. thanks man! h-wrt is great. now i need to start reading things i dont know a lot. <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191880">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">elaber</div>
					<div class="post-datetime">
						13 Feb 2013, 16:01					</div>
				</div>
				<div class="post-content content">
					<p>just now, i flashed my TPL MR3020 with &quot;Beta2 with WebGUI&quot; as instructed by this tutorial:<br /><a href="http://ediy.com.my/index.php/blog/item/50-flashing-openwrt-to-tp-link-tl-mr3020-3g-4g-wireless-n-router">http://ediy.com.my/index.php/blog/item/ … s-n-router</a><br />(thanks for the tutorial)</p><p>but on Installed Packages and Available Packages, i did not find the kmod-usb-serial or kmod-usb-serial-wwan.<br />i was hoping to install that as discussed here: <a href="http://h-wrt.com/en/doc/gsm">http://h-wrt.com/en/doc/gsm</a></p><p>and when i did update the packages list, i got this error:<br /><span class="postimg"><img src="http://i45.tinypic.com/2m6wvwy.jpg" alt="http://i45.tinypic.com/2m6wvwy.jpg" /></span></p><p>is it normal or its not just the way to download and install new pakages from the gui?</p><p>thanks for the help</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191885">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">nozombian</div>
					<div class="post-datetime">
						13 Feb 2013, 16:34					</div>
				</div>
				<div class="post-content content">
					<p>Why are you using beta2? There&#039;s a newer version of AA available, rc1. <a href="http://downloads.openwrt.org/attitude_adjustment/12.09-rc1/ar71xx/generic/openwrt-ar71xx-generic-tl-mr3020-v1-squashfs-sysupgrade.bin">http://downloads.openwrt.org/attitude_a … pgrade.bin</a></p><p>Also, if you want to do something that specific like playing with sms, I doubt that there is luci support. I&#039;d suggest to use putty, install packages and edit your config files from a shell:<br />opkg update<br />opkg install kmod-usb-serial kmod-usb-serial-wwan</p><p>Why beta2 repo does not work I have no idea, but rc1 worked for me today.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191897">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">robthebrew</div>
					<div class="post-datetime">
						13 Feb 2013, 18:27					</div>
				</div>
				<div class="post-content content">
					<p>OK, you have Luci. You need to do an update of the firmware.<br />Then try the package install, but as nozombian said, there is no compiled pkg for the&nbsp; sms stuff you want</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191899">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">elaber</div>
					<div class="post-datetime">
						13 Feb 2013, 18:39					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nozombian wrote:</cite><blockquote><p>Why are you using beta2?</p></blockquote></div><p>because i dont know how to use putty by the time of writing my previous post. <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p>but now i know. thanks to you nozombian, i forced my self to install putty in my mac. <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p>i installed usb-serial-ftdi. for my google adk<br />installed usb-serial-cp210x. for silab usb to serial<br />(dont know how it will work)</p><p>but when i installed the 3 packages mention on h-wrt gsm, i got error installing usb-serial-wwan.<br />here is the screenshot:<br /><span class="postimg"><img src="http://i49.tinypic.com/2j64r6f.jpg" alt="http://i49.tinypic.com/2j64r6f.jpg" /></span></p><p>kmod-usb-serial installed ok.<br />kmod-usb-serial-option is dependent on usb-serial-wwan, so not installed also.</p><p>what could be the problem with the kernel 3.7.7.1?</p><p>thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191903">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">elaber</div>
					<div class="post-datetime">
						13 Feb 2013, 18:47					</div>
				</div>
				<div class="post-content content">
					<p>thanks robthebrew. i have a feeling this might not be an easy path to take for a beginner like me. but i will hope that somebody with great knowledge might be encouraged to help us out. <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p>thanks to both of you.</p>											<p class="post-edited">(Last edited by <strong>elaber</strong> on 14 Feb 2013, 04:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191904">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">robthebrew</div>
					<div class="post-datetime">
						13 Feb 2013, 18:49					</div>
				</div>
				<div class="post-content content">
					<p>Don&#039;t make it difficult!<br />On a Mac you have the app called Terminal. Launch that, and then type:<br />ssh root@192.168.1.1 (or whatever)<br />then<br />opkg update</p><br /><p>It does look like you need to update your kernel though.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191908">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">elaber</div>
					<div class="post-datetime">
						13 Feb 2013, 19:29					</div>
				</div>
				<div class="post-content content">
					<p>thanks robthebrew. <br />i dont know the command earlier. now i know. you people are really a big help. <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p><span class="postimg"><img src="http://i48.tinypic.com/iyo0b4.jpg" alt="http://i48.tinypic.com/iyo0b4.jpg" /></span><br />error seems to be the same with the luci gui.</p><p>is it related to my MR3020 internet connection?</p><p>luci gui says it is connected to my HTC hotspot where mac is connected also.<br />and my hotspot listed my MR3020 on its connected devices.</p><p>here is screenshot:<br /><span class="postimg"><img src="http://i46.tinypic.com/2h6sx0j.jpg" alt="http://i46.tinypic.com/2h6sx0j.jpg" /></span></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191911">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						13 Feb 2013, 21:06					</div>
				</div>
				<div class="post-content content">
					<p>post output of<br />ifconfig<br />route<br />ping 8.8.8.8<br />ping <a href="http://www.google.com">www.google.com</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191938">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">elaber</div>
					<div class="post-datetime">
						14 Feb 2013, 04:22					</div>
				</div>
				<div class="post-content content">
					<p>thanks nebbia88.<br />but may i know how can i do that? sorry, really have no idea how to do things for this as of now.</p><p>btw, i tried ping and route from luci gui. it replied bad address.</p><br /><p>my router now is outputting serial data to ADK when ADK board is connected to router&#039;s usb port. horay! <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /><br />here is my hardware set up:<br /><span class="postimg"><img src="http://i47.tinypic.com/atn39t.jpg" alt="http://i47.tinypic.com/atn39t.jpg" /></span></p><p>thanks to you guys.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191944">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">elaber</div>
					<div class="post-datetime">
						14 Feb 2013, 09:08					</div>
				</div>
				<div class="post-content content">
					<p>Is there a way to access the virtual serial port (ttyUSB0) from the serial port on the router board (the port used for uboot)?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192072">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">elaber</div>
					<div class="post-datetime">
						15 Feb 2013, 11:41					</div>
				</div>
				<div class="post-content content">
					<p>problem on post #10 could be due to i first installed Beta2 which could have kernel 3.3.8-1.<br />and i was trying to install 3.7.7.1 packages. that is why am having error on kernel.<br />i then installed 3.3.8-1 packages, and i had no problem installing.</p><p>3.7.7-1 packages were now installed in my MR3020, after i reflashed my router with the lastest build<br /><span class="postimg"><img src="http://i49.tinypic.com/2chukhi.jpg" alt="http://i49.tinypic.com/2chukhi.jpg" /></span></p><p>my problem now is, is there a way to see logs happening in the router without soldering the serial port on the router&#039;s pcb?<br />i was hoping to see something like this:</p><p>usb modem activity from <a href="http://h-wrt.com/en/doc/gsm">http://h-wrt.com/en/doc/gsm</a> <br /></p><div class="codebox"><pre><code>usbcore: registered new interface driver usbserial
USB Serial support registered for generic
usbcore: registered new interface driver usbserial_generic
usbserial: USB Serial Driver core
USB Serial support registered for GSM modem (1-port)
option 1-1.2:1.0: GSM modem (1-port) converter detected
usb 1-1.2: GSM modem (1-port) converter now attached to ttyUSB0
option 1-1.2:1.1: GSM modem (1-port) converter detected
usb 1-1.2: GSM modem (1-port) converter now attached to ttyUSB1
option 1-1.2:1.3: GSM modem (1-port) converter detected
usb 1-1.2: GSM modem (1-port) converter now attached to ttyUSB2
usbcore: registered new interface driver option
option: v0.7.2:USB Driver for GSM modems</code></pre></div><p>thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192073">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">robthebrew</div>
					<div class="post-datetime">
						15 Feb 2013, 11:45					</div>
				</div>
				<div class="post-content content">
					<p>dmesg</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192083">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">elaber</div>
					<div class="post-datetime">
						15 Feb 2013, 14:01					</div>
				</div>
				<div class="post-content content">
					<p>thank for dmesg robthebrew.</p><p>i plugged in 2 usb modems, E1552 and E173. but the usb activity for the 2 doesnt seem to be right:<br /></p><div class="codebox"><pre><code>root@OpenWrt:~# dmesg | grep usb
[    8.440000] usbcore: registered new interface driver usbfs
[    8.440000] usbcore: registered new interface driver hub
[    8.450000] usbcore: registered new device driver usb
[   10.270000] usbcore: registered new interface driver usbserial
[   10.270000] usbcore: registered new interface driver usbserial_generic
[   10.280000] usbserial: USB Serial support registered for generic
[   10.340000] usbcore: registered new interface driver ftdi_sio
[   10.350000] usbserial: USB Serial support registered for FTDI USB Serial Device
[   10.380000] usbcore: registered new interface driver option
[   10.390000] usbserial: USB Serial support registered for GSM modem (1-port)           </code></pre></div><div class="codebox"><pre><code>[  311.110000] usb 1-1: new full-speed USB device number 2 using ehci-platform         
[  311.280000] usb 1-1: Detected FT232RL                                                                  
[  311.280000] usb 1-1: Number of endpoints 2
[  311.290000] usb 1-1: Endpoint 1 MaxPacketSize 16384
[  311.290000] usb 1-1: Endpoint 2 MaxPacketSize 16384
[  311.300000] usb 1-1: Setting MaxPacketSize 64
[  311.310000] usb 1-1: FTDI USB Serial Device converter now attached to ttyUSB0                   
[  384.310000] usb 1-1: USB disconnect, device number 2
[  428.860000] usb 1-1: new high-speed USB device number 3 using ehci-platform                     
[  449.640000] usb 1-1: USB disconnect, device number 3
[  460.340000] usb 1-1: new high-speed USB device number 4 using ehci-platform                          
[  488.440000] usb 1-1: USB disconnect, device number 4
[  553.410000] usb 1-1: new full-speed USB device number 5 using ehci-platform                            
[ 1083.610000] usb 1-1: USB disconnect, device number 5
[ 1131.880000] usbcore: registered new interface driver cp210x                                                      
[ 1131.880000] usbserial: USB Serial support registered for cp210x
[ 1144.890000] usb 1-1: new full-speed USB device number 6 using ehci-platform                     
[ 1145.180000] usb 1-1: reset full-speed USB device number 6 using ehci-platform
[ 1145.330000] usb 1-1: cp210x converter now attached to ttyUSB0                                               </code></pre></div><br /><p>this is when i plugged my usb modem<br /></p><div class="codebox"><pre><code>[  428.860000] usb 1-1: new high-speed USB device number 3 using ehci-platform                     
[  449.640000] usb 1-1: USB disconnect, device number 3
[  460.340000] usb 1-1: new high-speed USB device number 4 using ehci-platform                          
[  488.440000] usb 1-1: USB disconnect, device number 4</code></pre></div><br /><p>i was expecting something like this from: <a href="http://h-wrt.com/en/doc/gsm">http://h-wrt.com/en/doc/gsm</a><br /></p><div class="codebox"><pre><code>usbcore: registered new interface driver usbserial
USB Serial support registered for generic
usbcore: registered new interface driver usbserial_generic
usbserial: USB Serial Driver core
USB Serial support registered for GSM modem (1-port)
option 1-1.2:1.0: GSM modem (1-port) converter detected
usb 1-1.2: GSM modem (1-port) converter now attached to ttyUSB0
option 1-1.2:1.1: GSM modem (1-port) converter detected
usb 1-1.2: GSM modem (1-port) converter now attached to ttyUSB1
option 1-1.2:1.3: GSM modem (1-port) converter detected
usb 1-1.2: GSM modem (1-port) converter now attached to ttyUSB2
usbcore: registered new interface driver option
option: v0.7.2:USB Driver for GSM modems</code></pre></div><p>serial ports on modem getting attached to ttyUSBx</p><br /><p>What could be the problem in my set up?</p><p>thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192084">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">robthebrew</div>
					<div class="post-datetime">
						15 Feb 2013, 14:10					</div>
				</div>
				<div class="post-content content">
					<p>You seem to be missing a kernel module (kmod). <br />Take a look through the wiki and see what you haven&#039;t installed:<br /><a href="http://wiki.openwrt.org/doc/recipes/3gdongle">http://wiki.openwrt.org/doc/recipes/3gdongle</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192085">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">elaber</div>
					<div class="post-datetime">
						15 Feb 2013, 14:22					</div>
				</div>
				<div class="post-content content">
					<p>thank you thank you. ill check now.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192109">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">elaber</div>
					<div class="post-datetime">
						15 Feb 2013, 17:06					</div>
				</div>
				<div class="post-content content">
					<p>usb dongles seemed detected now. thanks for that link.<br /><span class="postimg"><img src="http://i47.tinypic.com/2q0nfb4.jpg" alt="http://i47.tinypic.com/2q0nfb4.jpg" /></span></p><p>i just need to try if i can make it to call a number.<br />&#039;will post result later once i get a second phone.</p><p>thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192120">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">duvi</div>
					<div class="post-datetime">
						15 Feb 2013, 19:49					</div>
				</div>
				<div class="post-content content">
					<p>Did you try gnokii to read sms? It&#039;s in openwrt packages, and I&#039;ve been using it successfully on a TL-MR3420 with a Huaweii E220.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192121">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">elaber</div>
					<div class="post-datetime">
						15 Feb 2013, 19:54					</div>
				</div>
				<div class="post-content content">
					<p>took me hours to figure out why the usb modem is not making a call when in fact, where in fact, it should have.<br />then i plugged it to my mac for a terminal test, and there it is, it is not really making call. maybe because locked to a network. <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p>here is the other usb modem i have, making a call. call command issued from putty:<br /><a href="http://www.youtube.com/watch?v=kzcewmRdU04">http://www.youtube.com/watch?v=kzcewmRdU04</a></p><p>thanks for your help guys. need to read some more.</p>											<p class="post-edited">(Last edited by <strong>elaber</strong> on 15 Feb 2013, 20:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192122">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">elaber</div>
					<div class="post-datetime">
						15 Feb 2013, 19:55					</div>
				</div>
				<div class="post-content content">
					<p>thanks duvi for gnokii. ill try check that.</p><p>but may i know how does gnokii work?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>