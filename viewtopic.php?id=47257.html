<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> How to start support of ASUS RT-AC66U</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 3 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p217145">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Halino</div>
					<div class="post-datetime">
						9 Nov 2013, 22:27					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />i want to try to help to start support for the asus rt-ac66u, where i can start?<br />I found that the device has a simple to access serial port.<br />i tested it and there is what display the bootloader:</p><p>CFE version 6.30.39.29 (r338244) based on BBP 1.0.37 for BCM947XX (32bit,SP,LE)<br />Build Date: ��一 10��月 15 10:41:41 CST 2012 (yau@wireless-pub2)<br />Copyright (C) 2000-2008 Broadcom Corporation.</p><p>Init Arena<br />Init Devs.<br />Boot partition size = 262144(0x40000)<br />Found an ST compatible serial flash with 32 64KB blocks; total size 2MB<br />Found a AMD NAND flash with 2048B pages or 128KB blocks; total size 128MB<br />bcm_robo_enable_switch: EEE is disabled<br />et0: Broadcom BCM47XX 10/100/1000 Mbps Ethernet Controller 6.30.39.29 (r338244)<br />CPU type 0x19749: 600MHz<br />Tot mem: 131072 KBytes</p><p>CFE mem:&nbsp; &nbsp; 0x80700000 - 0x8094EDE0 (2420192)<br />Data:&nbsp; &nbsp; &nbsp; &nbsp;0x80738B70 - 0x8073BE10 (12960)<br />BSS:&nbsp; &nbsp; &nbsp; &nbsp; 0x8073BE10 - 0x8074CDE0 (69584)<br />Heap:&nbsp; &nbsp; &nbsp; &nbsp;0x8074CDE0 - 0x8094CDE0 (2097152)<br />Stack:&nbsp; &nbsp; &nbsp; 0x8094CDE0 - 0x8094EDE0 (8192)<br />Text:&nbsp; &nbsp; &nbsp; &nbsp;0x80700000 - 0x80738B70 (232304)</p><p>Device eth0:&nbsp; hwaddr D8-50-E6-CB-D5-E8, ipaddr 192.168.1.1, mask 255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; gateway not set, nameserver not set<br />Null Rescue Flag.<br />boot the image...</p><p>i compiled and used openwrt on many devices, but this is the first time that i am starting from scratch.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217176">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">rAndy</div>
					<div class="post-datetime">
						10 Nov 2013, 09:12					</div>
				</div>
				<div class="post-content content">
					<p>very interseting device! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>target BCM947xx/953xx has a patch to detect RT-N66U, so it&#039;s likely to boot...<br />try compiling a lzma compressed ramdisk image and netboot it;</p><p>see <a href="http://wiki.openwrt.org/toh/linksys/e3000/3.0.4_bootlog">http://wiki.openwrt.org/toh/linksys/e3000/3.0.4_bootlog</a> in particular<br />&#039;CFE&gt; boot -tftp -elf 192.168.1.2:/incoming/vmlinux.elf&#039; to tftpoot the image</p><p>please post a help message from cfe promt to see compiled in cfe commands and a full boot log of stock kernel too</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217199">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Halino</div>
					<div class="post-datetime">
						10 Nov 2013, 16:56					</div>
				</div>
				<div class="post-content content">
					<p>tryed with openwrt-brcm47xx-vmlinux-initramfs.elf :</p><p>CFE version 6.30.39.29 (r338244) based on BBP 1.0.37 for BCM947XX (32bit,SP,LE)<br />Build Date: ��一 10��月 15 10:41:41 CST 2012 (yau@wireless-pub2)<br />Copyright (C) 2000-2008 Broadcom Corporation.</p><p>Init Arena<br />Init Devs.<br />Boot partition size = 262144(0x40000)<br />Found an ST compatible serial flash with 32 64KB blocks; total size 2MB<br />Found a AMD NAND flash with 2048B pages or 128KB blocks; total size 128MB<br />bcm_robo_enable_switch: EEE is disabled<br />et0: Broadcom BCM47XX 10/100/1000 Mbps Ethernet Controller 6.30.39.29 (r338244)<br />CPU type 0x19749: 600MHz<br />Tot mem: 131072 KBytes</p><p>CFE mem:&nbsp; &nbsp; 0x80700000 - 0x8094EDE0 (2420192)<br />Data:&nbsp; &nbsp; &nbsp; &nbsp;0x80738B70 - 0x8073BE10 (12960)<br />BSS:&nbsp; &nbsp; &nbsp; &nbsp; 0x8073BE10 - 0x8074CDE0 (69584)<br />Heap:&nbsp; &nbsp; &nbsp; &nbsp;0x8074CDE0 - 0x8094CDE0 (2097152)<br />Stack:&nbsp; &nbsp; &nbsp; 0x8094CDE0 - 0x8094EDE0 (8192)<br />Text:&nbsp; &nbsp; &nbsp; &nbsp;0x80700000 - 0x80738B70 (232304)</p><p>Device eth0:&nbsp; hwaddr D8-50-E6-CB-D5-E8, ipaddr 192.168.1.1, mask 255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; gateway not set, nameserver not set<br />Null Rescue Flag.<br />boot the image...<br />Invalid boot block on disk<br />Invalid boot block on disk<br />Check 2 trx result: -31, -31<br />Hello!! Enter Rescue Mode: (Check error)</p><p>tryed with openwrt-brcm47xx-squashfs.trx openwrt-brcm47xx-initramfs.trx :</p><p>CFE version 6.30.39.29 (r338244) based on BBP 1.0.37 for BCM947XX (32bit,SP,LE)<br />Build Date: ��一 10��月 15 10:41:41 CST 2012 (yau@wireless-pub2)<br />Copyright (C) 2000-2008 Broadcom Corporation.</p><p>Init Arena<br />Init Devs.<br />Boot partition size = 262144(0x40000)<br />Found an ST compatible serial flash with 32 64KB blocks; total size 2MB<br />Found a AMD NAND flash with 2048B pages or 128KB blocks; total size 128MB<br />bcm_robo_enable_switch: EEE is disabled<br />et0: Broadcom BCM47XX 10/100/1000 Mbps Ethernet Controller 6.30.39.29 (r338244)<br />CPU type 0x19749: 600MHz<br />Tot mem: 131072 KBytes</p><p>CFE mem:&nbsp; &nbsp; 0x80700000 - 0x8094EDE0 (2420192)<br />Data:&nbsp; &nbsp; &nbsp; &nbsp;0x80738B70 - 0x8073BE10 (12960)<br />BSS:&nbsp; &nbsp; &nbsp; &nbsp; 0x8073BE10 - 0x8074CDE0 (69584)<br />Heap:&nbsp; &nbsp; &nbsp; &nbsp;0x8074CDE0 - 0x8094CDE0 (2097152)<br />Stack:&nbsp; &nbsp; &nbsp; 0x8094CDE0 - 0x8094EDE0 (8192)<br />Text:&nbsp; &nbsp; &nbsp; &nbsp;0x80700000 - 0x80738B70 (232304)</p><p>Device eth0:&nbsp; hwaddr D8-50-E6-CB-D5-E8, ipaddr 192.168.1.1, mask 255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; gateway not set, nameserver not set<br />Null Rescue Flag.<br />boot the image...<br />Check 2 trx result: 0, 0<br />go load<br />Loader:raw Filesys:tftp Dev:eth0 File:: Options:(null)<br />Loading: TFTP Server.<br />Failed.<br />Could not load :: Timeout occured<br />Loader:raw Filesys:raw Dev:nflash0.os File: Options:(null)<br />Loading: .. 3780 bytes read<br />Entry at 0x80001000<br />Closing network.<br />Starting program at 0x80001000</p><p>i think that it loads only .trx images</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217200">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Halino</div>
					<div class="post-datetime">
						10 Nov 2013, 17:05					</div>
				</div>
				<div class="post-content content">
					<p>CFE&gt; help<br />Available commands:</p><p>show devices&nbsp; &nbsp; &nbsp; &nbsp; Display information about the installed devices.<br />show clocks&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Show current values of the clocks.<br />nvram&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;NVRAM utility.<br />reboot&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Reboot.<br />flash&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Update a flash memory device<br />batch&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Load a batch file into memory and execute it<br />go&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Verify and boot OS image.<br />boot&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Load an executable file into memory and execute it<br />load&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Load an executable file into memory without executing it<br />save&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Save a region of memory to a remote file via TFTP<br />ping&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Ping a remote IP host.<br />arp&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Display or modify the ARP Table<br />ifconfig&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Configure the Ethernet interface<br />help&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Obtain help for CFE commands</p><p>For more information about a command, enter &#039;help command-name&#039;<br />*** command status = 0</p><p>here is the help, now i am making a txt of full boot log</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217202">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Halino</div>
					<div class="post-datetime">
						10 Nov 2013, 17:11					</div>
				</div>
				<div class="post-content content">
					<p>Decompressing...done</p><br /><p>CFE version 6.30.39.29 (r338244) based on BBP 1.0.37 for BCM947XX (32bit,SP,LE)<br />Build Date: 一 10月 15 10:41:41 CST 2012 (yau@wireless-pub2)<br />Copyright (C) 2000-2008 Broadcom Corporation.</p><p>Init Arena<br />Init Devs.<br />Boot partition size = 262144(0x40000)<br />Found an ST compatible serial flash with 32 64KB blocks; total size 2MB<br />Found a AMD NAND flash with 2048B pages or 128KB blocks; total size 128MB<br />bcm_robo_enable_switch: EEE is disabled<br />et0: Broadcom BCM47XX 10/100/1000 Mbps Ethernet Controller 6.30.39.29 (r338244)<br />CPU type 0x19749: 600MHz<br />Tot mem: 131072 KBytes</p><p>CFE mem:&nbsp; &nbsp; 0x80700000 - 0x8094EDE0 (2420192)<br />Data:&nbsp; &nbsp; &nbsp; &nbsp;0x80738B70 - 0x8073BE10 (12960)<br />BSS:&nbsp; &nbsp; &nbsp; &nbsp; 0x8073BE10 - 0x8074CDE0 (69584)<br />Heap:&nbsp; &nbsp; &nbsp; &nbsp;0x8074CDE0 - 0x8094CDE0 (2097152)<br />Stack:&nbsp; &nbsp; &nbsp; 0x8094CDE0 - 0x8094EDE0 (8192)<br />Text:&nbsp; &nbsp; &nbsp; &nbsp;0x80700000 - 0x80738B70 (232304)</p><p>Device eth0:&nbsp; hwaddr D8-50-E6-CB-D5-E8, ipaddr 192.168.1.1, mask 255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; gateway not set, nameserver not set<br />Null Rescue Flag.<br />boot the image...<br />Check 2 trx result: 0, 0<br />go load<br />Loader:raw Filesys:tftp Dev:eth0 File:: Options:(null)<br />Loading: TFTP Server.<br />Failed.<br />Could not load :: Timeout occured<br />Loader:raw Filesys:raw Dev:nflash0.os File: Options:(null)<br />Loading: ...... 3330860 bytes read<br />Entry at 0x80001000<br />Closing network.<br />Starting program at 0x80001000<br />Linux version 2.6.22.19 (root@asus) (gcc version 4.2.4) #1 Thu Oct 3 07:16:35 CST 2013<br />CPU revision is: 00019749<br />Found an ST compatible serial flash with 32 64KB blocks; total size 2MB<br />Determined physical RAM map:<br /> memory: 07fff000 @ 00000000 (usable)<br /> memory: 08000000 @ 87fff000 (usable)<br />Built 1 zonelists.&nbsp; Total pages: 585216<br />Kernel command line: root=/dev/mtdblock3 console=ttyS0,115200 init=/sbin/preinit<br />Primary instruction cache 32kB, physically tagged, 4-way, linesize 32 bytes.<br />Primary data cache 32kB, 4-way, linesize 32 bytes.<br />Synthesized TLB refill handler (20 instructions).<br />Synthesized TLB load handler fastpath (32 instructions).<br />Synthesized TLB store handler fastpath (32 instructions).<br />Synthesized TLB modify handler fastpath (31 instructions).<br />PID hash table entries: 2048 (order: 11, 8192 bytes)<br />CPU: BCM5300 rev 1 pkg 0 at 600 MHz<br />Using 300.000 MHz high precision timer.<br />console [ttyS0] enabled<br />Dentry cache hash table entries: 65536 (order: 6, 262144 bytes)<br />Inode-cache hash table entries: 32768 (order: 5, 131072 bytes)<br />Memory: 238608k/131068k available (2542k kernel code, 22660k reserved, 513k data, 196k init, 131072k highmem)<br />Mount-cache hash table entries: 512<br />NET: Registered protocol family 16<br />PCI: Initializing host<br />PCI: Reset RC<br />PCI: Initializing host<br />PCI: Reset RC<br />PCI: Fixing up bus 0<br />PCI/PCIe coreunit 0 is set to bus 1.<br />PCI: Fixing up bridge<br />PCI: Fixing up bridge<br />PCI: Enabling device 0000:01:00.1 (0004 -&gt; 0006)<br />PCI: Fixing up bus 1<br />PCI/PCIe coreunit 1 is set to bus 2.<br />PCI: Fixing up bridge<br />PCI: Fixing up bridge<br />PCI: Enabling device 0000:02:00.1 (0004 -&gt; 0006)<br />PCI: Fixing up bus 2<br />NET: Registered protocol family 2<br />Time: MIPS clocksource has been installed.<br />IP route cache hash table entries: 4096 (order: 2, 16384 bytes)<br />TCP established hash table entries: 16384 (order: 5, 131072 bytes)<br />TCP bind hash table entries: 16384 (order: 4, 65536 bytes)<br />TCP: Hash tables configured (established 16384 bind 16384)<br />TCP reno registered<br />highmem bounce pool size: 64 pages<br />squashfs: version 3.2-r2 (2007/01/15) Phillip Lougher<br />io scheduler noop registered (default)<br />HDLC line discipline: version $Revision: 4.8 $, maxframe=4096<br />N_HDLC line discipline registered.<br />Serial: 8250/16550 driver $Revision: 1.90 $ 4 ports, IRQ sharing disabled<br />serial8250: ttyS0 at MMIO 0x0 (irq = 8) is a 16550A<br />serial8250: ttyS1 at MMIO 0x0 (irq = 8) is a 16550A<br />PPP generic driver version 2.4.2<br />MPPE/MPPC encryption/compression module registered<br />NET: Registered protocol family 24<br />PPPoL2TP kernel driver, V0.18.3<br />PPTP driver version 0.8.5<br />pflash: found no supported devices<br />Boot partition size = 262144(0x40000)<br />Creating 2 MTD partitions on &quot;sflash&quot;:<br />0x00000000-0x00040000 : &quot;pmon&quot;<br />0x001f0000-0x00200000 : &quot;nvram&quot;<br />Found a Zentel NAND flash with 2048B pages or 128KB blocks; total size 128MB<br />lookup_nflash_rootfs_offset: offset = 0x0<br />nflash: squash filesystem with lzma found at block 9<br />Creating 4 MTD partitions on &quot;nflash&quot;:<br />0x00000000-0x02000000 : &quot;linux&quot;<br />0x00132ea0-0x02000000 : &quot;rootfs&quot;<br />0x04000000-0x06000000 : &quot;linux2&quot;<br />0x04132ea0-0x06000000 : &quot;rootfs2&quot;<br />NAND device: Manufacturer ID: 0x92, Chip ID: 0xf1 (Zentel NAND 128MiB 3,3V 8-bit)<br />Creating 3 MTD partitions on &quot;brcmnand&quot;:<br />0x00000000-0x02000000 : &quot;trx&quot;<br />0x02000000-0x04000000 : &quot;jffs2&quot;<br />0x04000000-0x07f00000 : &quot;brcmnand&quot;<br />dev_nvram_init: _nvram_init<br />_nvram_init: allocat size= 65536<br />sdhci: Secure Digital Host Controller Interface driver<br />sdhci: Copyright(c) Pierre Ossman<br />u32 classifier<br />&nbsp; &nbsp; OLD policer on <br />Netfilter messages via NETLINK v0.30.<br />nf_conntrack version 0.5.0 (2048 buckets, 16384 max)<br />ipt_time loading<br />ip_tables: (C) 2000-2006 Netfilter Core Team<br />net/ipv4/netfilter/tomato_ct.c [Oct&nbsp; 3 2013 07:15:57]<br />NET: Registered protocol family 1<br />NET: Registered protocol family 10<br />ip6_tables: (C) 2000-2006 Netfilter Core Team<br />NET: Registered protocol family 17<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />VFS: Mounted root (squashfs filesystem) readonly.<br />Freeing unused kernel memory: 196k freed<br />Warning: unable to open an initial console.<br />Failed to execute /sbin/preinit.&nbsp; Attempting defaults...<br />set_action 0<br />[1 init:init_nvram +4] init_nvram for 23<br />RT-AC66U: swmode: router repeater ap pstanum_of_mssid_support(0x007f): [mssid] support [3] mssid<br />ctf: module license &#039;Proprietary&#039; taints kernel.<br />et_module_init: passivemode set to 0x0<br />et_module_init: et_txq_thresh set to 0x400<br />bcm_robo_enable_switch: EEE is disabled<br />eth0: Broadcom BCM47XX 10/100/1000 Mbps Ethernet Controller 6.30.102.9 (r366174)<br />hotplug net INTERFACE=eth0 ACTION=add<br />PCI: Enabling device 0000:01:01.0 (0000 -&gt; 0002)<br />eth1: Broadcom BCM4331 802.11 Wireless Controller 6.30.102.9 (r366174)<br />PCI: Enabling device 0000:02:01.0 (0000 -&gt; 0002)<br />eth2: Broadcom BCM4360 802.11 Wireless Controller 6.30.102.9 (r366174)<br />hotplug net INTERFACE=eth1 ACTION=add<br />hotplug net INTERFACE=eth2 ACTION=add<br />Algorithmics/MIPS FPU Emulator v1.5<br />/ # [1 init:init_main +8] main loop signal/state=17<br />start_logger:<br />start_usb<br />NTFS (with native replay) support included<br />optimized: speed<br />Build_for__asus_n66u_2011-10-27_U86_r187446_b122</p><p>_ifconfig: name=eth0 flags=1043 IFUP addr=(null) netmask=(null)<br />hotplug net INTERFACE=vlan1 ACTION=add<br />start_lan 1065<br />update_lan_state(lan_, 0, 0)<br />generate_wl_para(0x0a95): unit 0 subunit -1<br />num_of_mssid_support(0x007f): [mssid] support [3] mssid<br />chanspec_fix(0x045a): unit: 0, bw_cap: 3, chanspec: 0<br />generate_wl_para(0x0c9d): bw: 0<br />generate_wl_para(0x0c9f): chanspec: 0<br />generate_wl_para(0x0ca0): bw_cap: 3<br />generate_wl_para(0x0ca6): obss_coex: 1<br />wlconf_pre(0x0269): set vhtmode 1<br />generate_wl_para(0x0a95): unit 1 subunit -1<br />num_of_mssid_support(0x007f): [mssid] support [3] mssid<br />chanspec_fix(0x045a): unit: 1, bw_cap: 7, chanspec: 0<br />generate_wl_para(0x0c9d): bw: 0<br />generate_wl_para(0x0c9f): chanspec: 0<br />generate_wl_para(0x0ca0): bw_cap: 7<br />generate_wl_para(0x0ca6): obss_coex: 1<br />wlconf_pre(0x0269): set vhtmode 1<br />set_wltxpower(0x0550): unit: 0, txpower: 80<br />set_wltxpower(0x0550): unit: 1, txpower: 80<br />start_lan: setting up the bridge br0<br />hotplug net INTERFACE=br0 ACTION=add<br />vlan1: cmd=14: Operation not supported<br />_ifconfig: name=vlan1 flags=1043 IFUP addr=(null) netmask=(null)<br />start_lan: setting MAC of br0 bridge to D8:50:E6:CB:D5:E8<br />_ifconfig: name=eth1 flags=1043 IFUP addr=(null) netmask=(null)<br />generate_wl_para(0x0a95): unit 0 subunit -1<br />num_of_mssid_support(0x007f): [mssid] support [3] mssid<br />chanspec_fix(0x045a): unit: 0, bw_cap: 3, chanspec: 0<br />generate_wl_para(0x0c9d): bw: 0<br />generate_wl_para(0x0c9f): chanspec: 0<br />generate_wl_para(0x0ca0): bw_cap: 3<br />generate_wl_para(0x0ca6): obss_coex: 1<br />generate_wl_para(0x0a95): unit 0 subunit 1<br />generate_wl_para(0x0a95): unit 0 subunit 2<br />generate_wl_para(0x0a95): unit 0 subunit 3<br />wlconf(0x014f): unit: 0, txpower: 80<br />_ifconfig: name=eth2 flags=1043 IFUP addr=(null) netmask=(null)<br />wlc_phy_cal_init_acphy: NOT Implemented<br />generate_wl_para(0x0a95): unit 1 subunit -1<br />num_of_mssid_support(0x007f): [mssid] support [3] mssid<br />chanspec_fix(0x045a): unit: 1, bw_cap: 7, chanspec: 0<br />generate_wl_para(0x0c9d): bw: 0<br />generate_wl_para(0x0c9f): chanspec: 0<br />generate_wl_para(0x0ca0): bw_cap: 7<br />generate_wl_para(0x0ca6): obss_coex: 1<br />generate_wl_para(0x0a95): unit 1 subunit 1<br />generate_wl_para(0x0a95): unit 1 subunit 2<br />generate_wl_para(0x0a95): unit 1 subunit 3<br />wlconf(0x014f): unit: 1, txpower: 80<br />_ifconfig: name=br0 flags=1043 IFUP addr=192.168.1.1 netmask=255.255.255.0<br />_ifconfig: name=lo flags=1043 IFUP addr=127.0.0.1 netmask=255.0.0.0<br />route_manip: cmd=ADD name=lo addr=127.0.0.0 netmask=255.0.0.0 gateway=0.0.0.0 metric=0<br />lan_up(br0)<br />[1 init:stop_dnsmasq +11] begin<br />[1 init:stop_dnsmasq +11] end<br />[1 init:start_dnsmasq +11] begin<br />route_manip: cmd=ADD name=br0 addr=0.0.0.0 netmask=0.0.0.0 gateway=0.0.0.0 metric=0<br />starting ntp...<br />update_lan_state(lan_, 2, 0)<br />start_lan 1436<br />start_services 2907<br /># wanduck: nvram changed: Don&#039;t enable the USB line!<br /># wanduck: Got LAN(-1) information:<br />[1 init:start_dnsmasq +11] begin<br />start_lan_port(0) 1<br />TZ watchdog<br />acsd: scan in progress ...<br />acsd: scan in progress ...<br />acsd: scan in progress ...<br />acsd: scan in progress ...<br />acsd: scan in progress ...<br />acsd: scan in progress ...<br />acsd: scan in progress ...<br />acsd: scan in progress ...<br />acsd: scan in progress ...<br />acsd: scan in progress ...<br />acsd: scan in progress ...<br />acsd: scan in progress ...<br />acsd: selected channel spec: 0x1006 (6)<br />acsd: scan in progress ...<br />acsd: scan in progress ...<br />acsd: scan in progress ...<br />acsd: selected channel spec: 0xe02a (36/80)<br />start_pptpd: getpid= 1<br />disk_monitor: starting...<br />disk_monitor: Disable the disk_monitor.<br />vlan1: cmd=14: Operation not supported<br />[1 init:init_main +16] main loop signal/state=14<br />U2EC starting ...<br />Don&#039;t detect static clients!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217206">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">rAndy</div>
					<div class="post-datetime">
						10 Nov 2013, 17:59					</div>
				</div>
				<div class="post-content content">
					<p>thanks for the bootlogs!</p><p>openwrt-brcm47xx-initramfs.trx ought to be the right one...<br /><a href="http://www.jackslab.org/?p=280">http://www.jackslab.org/?p=280</a> is an good start to get confident with cfe</p><p>got no serial console cfe access to one of my routers atm, so i cannot try directly<br />but i believe the image can boot</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217214">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Halino</div>
					<div class="post-datetime">
						10 Nov 2013, 18:46					</div>
				</div>
				<div class="post-content content">
					<p>tryed with openwrt-brcm47xx-squashfs.trx and openwrt-brcm47xx-initramfs.trx :</p><p>CFE version 6.30.39.29 (r338244) based on BBP 1.0.37 for BCM947XX (32bit,SP,LE)<br />Build Date: ��一 10��月 15 10:41:41 CST 2012 (yau@wireless-pub2)<br />Copyright (C) 2000-2008 Broadcom Corporation.<br />Init Arena<br />Init Devs.<br />Boot partition size = 262144(0x40000)<br />Found an ST compatible serial flash with 32 64KB blocks; total size 2MB<br />Found a AMD NAND flash with 2048B pages or 128KB blocks; total size 128MB<br />bcm_robo_enable_switch: EEE is disabled<br />et0: Broadcom BCM47XX 10/100/1000 Mbps Ethernet Controller 6.30.39.29 (r338244)<br />CPU type 0x19749: 600MHz<br />Tot mem: 131072 KBytes<br />CFE mem:&nbsp; &nbsp; 0x80700000 - 0x8094EDE0 (2420192)<br />Data:&nbsp; &nbsp; &nbsp; &nbsp;0x80738B70 - 0x8073BE10 (12960)<br />BSS:&nbsp; &nbsp; &nbsp; &nbsp; 0x8073BE10 - 0x8074CDE0 (69584)<br />Heap:&nbsp; &nbsp; &nbsp; &nbsp;0x8074CDE0 - 0x8094CDE0 (2097152)<br />Stack:&nbsp; &nbsp; &nbsp; 0x8094CDE0 - 0x8094EDE0 (8192)<br />Text:&nbsp; &nbsp; &nbsp; &nbsp;0x80700000 - 0x80738B70 (232304)<br />Device eth0:&nbsp; hwaddr D8-50-E6-CB-D5-E8, ipaddr 192.168.1.1, mask 255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; gateway not set, nameserver not set<br />Null Rescue Flag.<br />boot the image...<br />Check 2 trx result: 0, 0<br />go load<br />Loader:raw Filesys:tftp Dev:eth0 File:: Options:(null)<br />Loading: TFTP Server.<br />Failed.<br />Could not load :: Timeout occured<br />Loader:raw Filesys:raw Dev:nflash0.os File: Options:(null)<br />Loading: .. 3780 bytes read<br />Entry at 0x80001000<br />Closing network.<br />Starting program at 0x80001000</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217215">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">rAndy</div>
					<div class="post-datetime">
						10 Nov 2013, 18:51					</div>
				</div>
				<div class="post-content content">
					<p>please use openwrt-brcm47xx-initramfs.trx or openwrt-brcm47xx-vmlinux-initramfs.elf<br />openwrt-brcm47xx-squashfs.trx is for flashing only</p><p>what did you try exactly? What cfe commands?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217216">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Halino</div>
					<div class="post-datetime">
						10 Nov 2013, 19:23					</div>
				</div>
				<div class="post-content content">
					<p>with openwrt-brcm47xx-initramfs.trx i tried with put with tftp client to the asus.<br />after successfull transfer and copy to flash there is the boot output:</p><p>Done. 5304320 bytes read<br />Download of 0x50f000 bytes completed<br />Write kernel and filesystem binary to FLASH <br />Programming...copysize=5304320, amtcopy=5304320 <br />done. 5304320 bytes written<br />Programming...copysize=5304320, amtcopy=5304320 <br />done. 5304320 bytes written<br />Decompressing...done</p><br /><p>CFE version 6.30.39.29 (r338244) based on BBP 1.0.37 for BCM947XX (32bit,SP,LE)<br />Build Date: ä¸ 10æ 15 10:41:41 CST 2012 (yau@wireless-pub2)<br />Copyright (C) 2000-2008 Broadcom Corporation.</p><p>Init Arena<br />Init Devs.<br />Boot partition size = 262144(0x40000)<br />Found an ST compatible serial flash with 32 64KB blocks; total size 2MB<br />Found a AMD NAND flash with 2048B pages or 128KB blocks; total size 128MB<br />bcm_robo_enable_switch: EEE is disabled<br />et0: Broadcom BCM47XX 10/100/1000 Mbps Ethernet Controller 6.30.39.29 (r338244)<br />CPU type 0x19749: 600MHz<br />Tot mem: 131072 KBytes</p><p>CFE mem:&nbsp; &nbsp; 0x80700000 - 0x8094EDE0 (2420192)<br />Data:&nbsp; &nbsp; &nbsp; &nbsp;0x80738B70 - 0x8073BE10 (12960)<br />BSS:&nbsp; &nbsp; &nbsp; &nbsp; 0x8073BE10 - 0x8074CDE0 (69584)<br />Heap:&nbsp; &nbsp; &nbsp; &nbsp;0x8074CDE0 - 0x8094CDE0 (2097152)<br />Stack:&nbsp; &nbsp; &nbsp; 0x8094CDE0 - 0x8094EDE0 (8192)<br />Text:&nbsp; &nbsp; &nbsp; &nbsp;0x80700000 - 0x80738B70 (232304)</p><p>Device eth0:&nbsp; hwaddr D8-50-E6-CB-D5-E8, ipaddr 192.168.1.1, mask 255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; gateway not set, nameserver not set<br />Null Rescue Flag.<br />boot the image...<br />Check 2 trx result: 0, 0<br />go load<br />Loader:raw Filesys:tftp Dev:eth0 File:: Options:(null)<br />Loading: TFTP Server.<br />Failed.<br />Could not load :: Timeout occured<br />Loader:raw Filesys:raw Dev:nflash0.os File: Options:(null)<br />Loading: .. 3780 bytes read<br />Entry at 0x80001000<br />Closing network.<br />Starting program at 0x80001000</p><p>then stuck.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217217">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">rAndy</div>
					<div class="post-datetime">
						10 Nov 2013, 19:43					</div>
				</div>
				<div class="post-content content">
					<p>oh man, you flashed it!<br />I clearly stated to *netboot* it and gave a sample of cfe command.</p><p>Again:<br />* get your tftp server configured and put openwrt-brcm47xx-initramfs.trx on the server<br />* on the asus: stop at the prompt CFE&gt;<br />* type &#039;boot -tftp &lt;your tftp server address&gt;:&lt;path to&gt;/openwrt-brcm47xx-initramfs.trx&#039;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217218">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">Halino</div>
					<div class="post-datetime">
						10 Nov 2013, 19:59					</div>
				</div>
				<div class="post-content content">
					<p>CFE&gt; boot -tftp 192.168.1.10:/openwrt-brcm47xx-initramfs.trx<br />Loader:raw Filesys:tftp Dev:eth0 File:192.168.1.10:/openwrt-brcm47xx-initramfs.trx Options:(null)<br />Loading: TFTP Client.</p><p>then stuck, on the tftp server:</p><p>Connection received from 192.168.1.1 on port 1409 [10/11 19:00:43.641]<br />Read request for file &lt;/openwrt-brcm47xx-initramfs.trx&gt;. Mode octet [10/11 19:00:43.641]<br />Using local port 52113 [10/11 19:00:43.641]<br />TIMEOUT waiting for Ack block #1&nbsp; [10/11 19:00:58.643]</p>											<p class="post-edited">(Last edited by <strong>Halino</strong> on 10 Nov 2013, 20:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217219">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">rAndy</div>
					<div class="post-datetime">
						10 Nov 2013, 20:45					</div>
				</div>
				<div class="post-content content">
					<p>it can&#039;t even download the .trx, still something wrong<br />please check tftp server config a/o try &#039;192.168.1.10:openwrt-brcm47xx-initramfs.trx&#039; (without &#039;/&#039;)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217220">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">Halino</div>
					<div class="post-datetime">
						10 Nov 2013, 20:51					</div>
				</div>
				<div class="post-content content">
					<p>CFE&gt; boot -tftp 192.168.1.10:openwrt-brcm47xx-initramfs.trx<br />Loader:raw Filesys:tftp Dev:eth0 File:192.168.1.10:openwrt-brcm47xx-initramfs.trx Options:(null)<br />Loading: TFTP Client.</p><p>stuck, on server:</p><p>Connection received from 192.168.1.1 on port 3022 [10/11 19:51:00.910]<br />Read request for file &lt;openwrt-brcm47xx-initramfs.trx&gt;. Mode octet [10/11 19:51:00.910]<br />Using local port 52987 [10/11 19:51:00.911]<br />TIMEOUT waiting for Ack block #1&nbsp; [10/11 19:51:15.912]</p><p>i am using tftpd32, is the best tftp i used for flashing of embedded devices.</p><p>any suggestion?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217221">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">rAndy</div>
					<div class="post-datetime">
						10 Nov 2013, 20:58					</div>
				</div>
				<div class="post-content content">
					<p>check eth paramaters from CFE&gt; , adjust accordingly to <a href="http://www.jackslab.org/?p=280">http://www.jackslab.org/?p=280</a> section 2.1<br />the gateway must be the ip address of your tftp server</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217341">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">zloop</div>
					<div class="post-datetime">
						12 Nov 2013, 11:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Halino wrote:</cite><blockquote><p>Hi,<br />i want to try to help to start support for the asus rt-ac66u, where i can start?</p></blockquote></div><p>Wifi will be the most difficult:</p><p>According to: <a href="http://wikidevi.com/wiki/ASUS_RT-AC66U">http://wikidevi.com/wiki/ASUS_RT-AC66U</a></p><p>that device has a <strong>BCM4360</strong> (802.11ac) and a <strong>BCM4331</strong> radio</p><p>there was a post in July 2013 on the mailing list about 4331 radio:<br /><a href="https://lists.openwrt.org/pipermail/openwrt-devel/2013-July/020653.html">https://lists.openwrt.org/pipermail/ope … 20653.html</a></p><div class="quotebox"><blockquote><p>b43 is the only driver in OpenWrt&nbsp; supporting the BCM4331, but <br /> b43 just works on 2.4 GHz and with ieee80211g rates</p></blockquote></div><p>4331 support is on the TODO list of brcmfmac: <a href="http://wireless.kernel.org/en/users/Drivers/brcm80211">http://wireless.kernel.org/en/users/Drivers/brcm80211</a></p><p>4360 afaik has no open linux drivers yet</p><p>linux-wireless mailing list (archive: <a href="http://marc.info/?l=linux-wireless)">http://marc.info/?l=linux-wireless)</a> or sublists b43-dev / brcm80211-dev</p><br /><p>Other projects (dd-wrt...) have access to broadcom source code and can support devices with those chips easier</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217342">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">Halino</div>
					<div class="post-datetime">
						12 Nov 2013, 11:53					</div>
				</div>
				<div class="post-content content">
					<p>i imagined that ac will be a big problem for the driver, there is anything that i can do to help the developing?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217345">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">zloop</div>
					<div class="post-datetime">
						12 Nov 2013, 12:19					</div>
				</div>
				<div class="post-content content">
					<p>I don&#039;t know - ask on the mailing list?</p><p>linux-wireless post about:<br /> <a href="http://www.spinics.net/lists/linux-wireless/msg110443.html">http://www.spinics.net/lists/linux-wire … 10443.html</a></p><div class="quotebox"><blockquote><p>unfrotunately there isn&#039;t mmiotrace available for MIPS</p><p>mmiotrace is x86/x86_64 only at this point <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p></blockquote></div><p>-&gt; get mmiotrace to mips (dont know if its possible or if there are limits of architecture/devices)</p><p>or get a BCM4360 on x86</p><p>after dumping mmiotrace: Spec writing (takes time)<br />then another developer have to write a driver from scratch using the spec (clean room design)</p><p>see: <a href="http://bcm-v4.sipsolutions.net/">http://bcm-v4.sipsolutions.net/</a> for the specs used to write b43<br />(current broadcom driver is 6.xx , specs are from 4.xx)</p><div class="quotebox"><blockquote><p>I may think about buying PCE-AC66 at some point.</p></blockquote></div><p>ask on the mailing list of linux-wireless if you can help to speed up development</p>											<p class="post-edited">(Last edited by <strong>zloop</strong> on 12 Nov 2013, 12:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217812">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">Lightsword</div>
					<div class="post-datetime">
						17 Nov 2013, 21:51					</div>
				</div>
				<div class="post-content content">
					<p>I think it may be possible to port the current GPL broadcom driver, although it may involve significant patches to get the hnd abi patched for the newer kernel(maybe look at dd-wrt sources for hints since they use the newer kernel, although a lot of their source is not all that complete so I&#039;m not sure how helpful it would be). Broadcom is moving over the ARM devices which use a newer kernel so this may end up being the latest chipset still on mips.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>