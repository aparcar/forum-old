<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Problem with broadband modem</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 23 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p64698">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Daniel.T</div>
					<div class="post-datetime">
						6 Mar 2008, 15:59					</div>
				</div>
				<div class="post-content content">
					<p>Hello!</p><p>First I want to say hello to everybody on this forum, first topic for me here!</p><p>I have a modem (D-50) that connects to the nordic mobile telephone network (<a href="http://www.nmt.net">www.nmt.net</a>), there is files included for Linux.<br />My friend compiled this for OpenWrt Kamikaze 7.09, but it&#039;s not working! The file runs well but result is &quot;Fail SwitchMode&quot;</p><p>A guess that this light linux version missing something...?<br />Anybody that tested NMT-450 D50 modem on other linux that can help to get it running in openwrt?</p><p>I have a Asus 500gP with Kamikaze 7.09 Kernel 2.6</p><p>Sourcecode of RDEVCHG:<br />#include &lt;stdio.h&gt;<br />#include &lt;unistd.h&gt;<br />#include &lt;string.h&gt;<br />#include &lt;fcntl.h&gt;<br />#include &lt;errno.h&gt;<br />#include &lt;scsi/sg.h&gt;</p><p>typedef struct scsi_ioctl_command {<br />&nbsp; &nbsp; unsigned int inlen;<br />&nbsp; &nbsp; unsigned int outlen;<br />&nbsp; &nbsp; unsigned char data[10];<br />} Scsi_Ioctl_Command;</p><p>#define SCSI_IOCTL_SEND_COMMAND 1<br />#define SCSI_IOCTL_TEST_UNIT_READY 2<br />#define SCSI_IOCTL_BENCHMARK_COMMAND 3<br />#define SCSI_IOCTL_SYNC 4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* Request synchronous parameters */<br />#define SCSI_IOCTL_START_UNIT 5<br />#define SCSI_IOCTL_STOP_UNIT 6</p><p>#define TEST_UNIT_READY&nbsp; &nbsp; &nbsp; &nbsp;0x00<br />#define REZERO_UNIT&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x01<br />#define REQUEST_SENSE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x03<br />#define FORMAT_UNIT&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x04<br />#define READ_BLOCK_LIMITS&nbsp; &nbsp; &nbsp;0x05<br />#define REASSIGN_BLOCKS&nbsp; &nbsp; &nbsp; &nbsp;0x07<br />#define READ_6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x08<br />#define WRITE_6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x0a<br />#define SEEK_6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x0b<br />#define READ_REVERSE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x0f<br />#define WRITE_FILEMARKS&nbsp; &nbsp; &nbsp; &nbsp;0x10<br />#define SPACE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x11<br />#define INQUIRY&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x12<br />#define RECOVER_BUFFERED_DATA 0x14<br />#define MODE_SELECT&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x15<br />#define RESERVE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x16<br />#define RELEASE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x17<br />#define COPY&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x18<br />#define ERASE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x19<br />#define MODE_SENSE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x1a<br />#define START_STOP&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x1b<br />#define RECEIVE_DIAGNOSTIC&nbsp; &nbsp; 0x1c<br />#define SEND_DIAGNOSTIC&nbsp; &nbsp; &nbsp; &nbsp;0x1d<br />#define ALLOW_MEDIUM_REMOVAL&nbsp; 0x1e</p><p>#define SET_WINDOW&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x24<br />#define READ_CAPACITY&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x25<br />#define READ_10&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x28<br />#define WRITE_10&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x2a<br />#define SEEK_10&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x2b<br />#define WRITE_VERIFY&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x2e<br />#define VERIFY&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x2f<br />#define SEARCH_HIGH&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x30<br />#define SEARCH_EQUAL&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x31<br />#define SEARCH_LOW&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x32<br />#define SET_LIMITS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x33<br />#define PRE_FETCH&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x34<br />#define READ_POSITION&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x34<br />#define SYNCHRONIZE_CACHE&nbsp; &nbsp; &nbsp;0x35<br />#define LOCK_UNLOCK_CACHE&nbsp; &nbsp; &nbsp;0x36<br />#define READ_DEFECT_DATA&nbsp; &nbsp; &nbsp; 0x37<br />#define MEDIUM_SCAN&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x38<br />#define COMPARE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x39<br />#define COPY_VERIFY&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x3a<br />#define WRITE_BUFFER&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x3b<br />#define READ_BUFFER&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x3c<br />#define UPDATE_BLOCK&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x3d<br />#define READ_LONG&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x3e<br />#define WRITE_LONG&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x3f<br />#define CHANGE_DEFINITION&nbsp; &nbsp; &nbsp;0x40<br />#define WRITE_SAME&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x41<br />#define READ_TOC&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x43<br />#define LOG_SELECT&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x4c<br />#define LOG_SENSE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x4d<br />#define MODE_SELECT_10&nbsp; &nbsp; &nbsp; &nbsp; 0x55<br />#define RESERVE_10&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x56<br />#define RELEASE_10&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x57<br />#define MODE_SENSE_10&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x5a<br />#define PERSISTENT_RESERVE_IN 0x5e<br />#define PERSISTENT_RESERVE_OUT 0x5f<br />#define MOVE_MEDIUM&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0xa5<br />#define READ_12&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0xa8<br />#define WRITE_12&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0xaa<br />#define WRITE_VERIFY_12&nbsp; &nbsp; &nbsp; &nbsp;0xae<br />#define SEARCH_HIGH_12&nbsp; &nbsp; &nbsp; &nbsp; 0xb0<br />#define SEARCH_EQUAL_12&nbsp; &nbsp; &nbsp; &nbsp;0xb1<br />#define SEARCH_LOW_12&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0xb2<br />#define READ_ELEMENT_STATUS&nbsp; &nbsp;0xb8<br />#define SEND_VOLUME_TAG&nbsp; &nbsp; &nbsp; &nbsp;0xb6<br />#define WRITE_LONG_2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0xea</p><br /><p>int fd;</p><p>int main(void)<br />{<br />&nbsp; Scsi_Ioctl_Command sic = {0};<br />&nbsp; char devname[32];<br />&nbsp; int loop = 0;<br />&nbsp; int nRdevchg = 0;<br />&nbsp; int nCount = 0;<br />&nbsp; int nSwitchMode = 0;<br />&nbsp; <br />&nbsp; &nbsp; &nbsp; <br /> printf(&quot;RDEVCHG Linux Version : 1.0\n&quot;);<br /> printf(&quot;Please, Wait!\n&quot;);<br /> usleep(2000);<br />&nbsp; for(loop = 0; loop &lt; 10 ; loop++ )<br />&nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sprintf(devname,&quot;/dev/sg%d&quot; , (loop) );<br />&nbsp; &nbsp;&nbsp; &nbsp;fd = open(devname, O_RDWR);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; printf(&quot;.&quot; );</p><p>&nbsp; &nbsp;&nbsp; &nbsp;if (fd &gt; 0 ) <br />&nbsp; &nbsp;&nbsp; &nbsp;{<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //fprintf(stderr,&quot;/dev/sg%d - IN\n&quot; , (loop) );<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;sic.inlen = 9;<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;sic.outlen = 0;<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;sic.data[0] = 0xFF;<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;memcpy(sic.data + 1, &quot;RDEVCHG1&quot;, 8);</p><p>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;nRdevchg = ioctl(fd, SCSI_IOCTL_SEND_COMMAND, &amp;sic);<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;close(fd);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if( nRdevchg == 0 )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; usleep(2000);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; nRdevchg = 0;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while( nRdevchg &lt; 100)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; nRdevchg++;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; usleep(1000);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if( system(&quot;lsusb | grep -i \&quot;16D8:\&quot;&quot;) == 0 )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; printf(&quot;\nSuccess SwitchMode.\n&quot;);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return 1;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp;&nbsp; &nbsp;} <br />&nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; printf(&quot;\nFail SwitchMode.\n&quot;);</p><p>&nbsp; return 1;<br />}</p>											<p class="post-edited">(Last edited by <strong>Daniel.T</strong> on 7 Mar 2008, 21:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p64778">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Daniel.T</div>
					<div class="post-datetime">
						7 Mar 2008, 22:02					</div>
				</div>
				<div class="post-content content">
					<p>Want to add some info of tests I made.</p><p>Tried both Kamikaze 2.4 and 2.6 but the file RDEVCHG compiled for openwrt stops really quick, &quot;Fail SwitchMode&quot;.<br />Tested to run files included (original) on USB-Modem in Ubuntu Live-CD, RDEVCHG runs for a while and finds modem and the device is added to /dev/.</p><p>Anybody that can look on the sourcecode in my earlier post, should that work on a OpenWrt??? Or must it be changed?</p><p>Many thanks for help!</p><p>/Daniel</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p64850">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">vlx</div>
					<div class="post-datetime">
						9 Mar 2008, 16:03					</div>
				</div>
				<div class="post-content content">
					<p>Hello Daniel,</p><br /><p> I had a quick look to code what you had sent.<br />It looks like program is just sending SCSI command to all scsi generic device files to perform some kind of switch to modem mode. And then it verifies whether there appeared the requested new USB devices... via lsusb command.<br />Please try to type: lsusb at your command prompt to see whether it is available ( so maybe it successfully performs switch but it just didn&#039;t found the lsusb command)<br />Please post here lsusb &amp; dmesg output. <br />After it performs switch you need to load usbserial kernel module (maybe it will be done autoamticaly). And then you can start PPP to do the internet connection.<br />If the OpenWrt doen&#039;t have automatic support for these devices (I&#039;m really not sure about). You will need to follow few steps. <br />Please check gentoo wiki regarding maybe similiar modem:<br /><a href="http://gentoo-wiki.com/HARDWARE_HUAWEI_E220_HSDPA_USB_MODEM">http://gentoo-wiki.com/HARDWARE_HUAWEI_ … _USB_MODEM</a></p><p>Cheers,<br />Vladimir.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p64911">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Daniel.T</div>
					<div class="post-datetime">
						10 Mar 2008, 21:23					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for help, vlx!</p><p>Now I have done the tests and here is the result. How do I load usbserial?<br />And how to make PPP? Original with the modem it was a file to execute after modem switch but it use wvdial? And that command is not working on openwrt?<br />I put the included code in the bottom of this post!!!</p><p>root@OpenWrt:~# lsusb<br />Bus 003 Device 001: ID 0000:0000<br />Bus 002 Device 001: ID 0000:0000<br />Bus 001 Device 004: ID 16d8:6803<br />Bus 001 Device 001: ID 0000:0000</p><br /><p>------------------</p><br /><p>root@OpenWrt:~# dmesg<br />Linux version 2.6.22 (travis@localhost.localdomain) (gcc version 4.1.2) #18 Wed Mar 5 20:06:13 CST 2008<br />CPU revision is: 00029006<br />ssb: Core 0 found: ChipCommon (cc 0x800, rev 0x03, vendor 0x4243)<br />ssb: Core 1 found: Fast Ethernet (cc 0x806, rev 0x06, vendor 0x4243)<br />ssb: Core 2 found: Fast Ethernet (cc 0x806, rev 0x06, vendor 0x4243)<br />ssb: Core 3 found: USB 1.1 Hostdev (cc 0x808, rev 0x03, vendor 0x4243)<br />ssb: Core 4 found: PCI (cc 0x804, rev 0x08, vendor 0x4243)<br />ssb: Core 5 found: MIPS 3302 (cc 0x816, rev 0x03, vendor 0x4243)<br />ssb: Core 6 found: V90 (cc 0x807, rev 0x02, vendor 0x4243)<br />ssb: Core 7 found: IPSEC (cc 0x80B, rev 0x00, vendor 0x4243)<br />ssb: Core 8 found: MEMC SDRAM (cc 0x80F, rev 0x02, vendor 0x4243)<br />ssb: Initializing MIPS core...<br />ssb: set_irq: core 0x0806, irq 2 =&gt; 2<br />ssb: set_irq: core 0x0806, irq 3 =&gt; 3<br />ssb: set_irq: core 0x0804, irq 0 =&gt; 4<br />ssb: Sonics Silicon Backplane found at address 0x18000000<br />Determined physical RAM map:<br /> memory: 02000000 @ 00000000 (usable)<br />Initrd not found or empty - disabling initrd<br />On node 0 totalpages: 8192<br />&nbsp; Normal zone: 64 pages used for memmap<br />&nbsp; Normal zone: 0 pages reserved<br />&nbsp; Normal zone: 8128 pages, LIFO batch:0<br />Built 1 zonelists.&nbsp; Total pages: 8128<br />Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,jffs2 init=/etc/preinit noinitrd console=ttyS0,115200<br />Primary instruction cache 16kB, physically tagged, 2-way, linesize 16 bytes.<br />Primary data cache 16kB, 2-way, linesize 16 bytes.<br />Synthesized TLB refill handler (20 instructions).<br />Synthesized TLB load handler fastpath (32 instructions).<br />Synthesized TLB store handler fastpath (31 instructions).<br />Synthesized TLB modify handler fastpath (30 instructions).<br />PID hash table entries: 128 (order: 7, 512 bytes)<br />Using 132.000 MHz high precision timer.<br />Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)<br />Memory: 29872k/32768k available (2030k kernel code, 2896k reserved, 297k data, 120k init, 0k highmem)<br />Calibrating delay loop... 263.16 BogoMIPS (lpj=526336)<br />Mount-cache hash table entries: 512<br />NET: Registered protocol family 16<br />ssb: PCIcore in host mode found<br />registering PCI controller with io_map_base unset<br />PCI: fixing up bridge<br />PCI: Setting latency timer of device 0000:00:00.0 to 64<br />PCI: Fixing up device 0000:00:00.0<br />Time: MIPS clocksource has been installed.<br />NET: Registered protocol family 2<br />IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP established hash table entries: 1024 (order: 1, 8192 bytes)<br />TCP bind hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP: Hash tables configured (established 1024 bind 1024)<br />TCP reno registered<br />squashfs: version 3.0 (2006/03/15) Phillip Lougher<br />Registering mini_fo version $Id$<br />JFFS2 version 2.2. (NAND) Ã‚Â© 2001-2006 Red Hat, Inc.<br />io scheduler noop registered<br />io scheduler deadline registered (default)<br />Serial: 8250/16550 driver $Revision: 1.90 $ 2 ports, IRQ sharing enabled<br />serial8250: ttyS0 at MMIO 0x0 (irq = 3) is a 16550A<br />serial8250: ttyS1 at MMIO 0x0 (irq = 3) is a 16550A<br />b44.c:v1.01 (Jun 16, 2006)<br />eth0: Broadcom 10/100BaseT Ethernet 00:1d:60:15:64:8e<br />eth1: Broadcom 10/100BaseT Ethernet 40:10:18:00:00:2d<br />flash init: 0x1c000000 0x02000000<br />Physically mapped flash: Found 1 x16 devices at 0x0 in 16-bit bank<br />Physically mapped flash: Found an alias at 0x800000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x1000000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x1800000 for the chip at 0x0<br /> Amd/Fujitsu Extended Query Table at 0x0040<br />Physically mapped flash: CFI does not contain boot bank location. Assuming top.<br />number of CFI chips: 1<br />cfi_cmdset_0002: Disabling erase-suspend-program due to code brokenness.<br />Flash device: 0x800000 at 0x1fc00000<br />bootloader size: 262144<br />Creating 4 MTD partitions on &quot;Physically mapped flash&quot;:<br />0x00000000-0x00040000 : &quot;cfe&quot;<br />0x00040000-0x007f0000 : &quot;linux&quot;<br />0x000f8000-0x007f0000 : &quot;rootfs&quot;<br />mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-only<br />0x00230000-0x007f0000 : &quot;rootfs_data&quot;<br />0x007f0000-0x00800000 : &quot;nvram&quot;<br />nf_conntrack version 0.5.0 (256 buckets, 2048 max)<br />ip_tables: (C) 2000-2006 Netfilter Core Team<br />TCP vegas registered<br />NET: Registered protocol family 1<br />NET: Registered protocol family 17<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />VFS: Mounted root (squashfs filesystem) readonly.<br />Freeing unused kernel memory: 120k freed<br />Warning: unable to open an initial console.<br />Algorithmics/MIPS FPU Emulator v1.5<br />diag: Detected &#039;ASUS WL-500g Premium&#039;<br />b44: eth0: Link is up at 100 Mbps, full duplex.<br />b44: eth0: Flow control is off for TX and off for RX.<br />Probing device eth0: found!<br />mini_fo: using base directory: /<br />mini_fo: using storage directory: /jffs<br />b44: eth0: Link is up at 100 Mbps, full duplex.<br />b44: eth0: Flow control is off for TX and off for RX.<br />BFL_ENETADM not set in boardflags. Use force=1 to ignore.<br />usbcore: registered new interface driver usbfs<br />usbcore: registered new interface driver hub<br />device eth0.0 entered promiscuous mode<br />usbcore: registered new device driver usb<br />NET: Registered protocol family 8<br />NET: Registered protocol family 20<br />eth0.0: dev_set_promiscuity(master, 1)<br />device eth0 entered promiscuous mode<br />eth0.0: add 01:00:5e:00:00:01 mcast address to master interface<br />br-lan: port 1(eth0.0) entering learning state<br />br-lan: topology change detected, propagating<br />br-lan: port 1(eth0.0) entering forwarding state<br />isofs: Unknown symbol load_nls_default<br />isofs: Unknown symbol load_nls<br />isofs: Unknown symbol utf8_wctomb<br />isofs: Unknown symbol unload_nls<br />PPP generic driver version 2.4.2<br />wlan: 0.8.4.2 (svn r2568)<br />eth0.1: add 01:00:5e:00:00:01 mcast address to master interface<br />ath_hal: module license &#039;Proprietary&#039; taints kernel.<br />ath_hal: 0.9.30.13 (AR5210, AR5211, AR5212, AR5416, RF5111, RF5112, RF2413, RF5413, RF2133, REGOPS_FUNC)<br />ath_rate_minstrel: Minstrel automatic rate control algorithm 1.2 (svn r2568)<br />ath_rate_minstrel: look around rate set to 10%<br />ath_rate_minstrel: EWMA rolloff level set to 75%<br />ath_rate_minstrel: max segment size in the mrr set to 6000 us<br />wlan: mac acl policy registered<br />ath_pci: 0.9.4.5 (svn r2568)<br />ohci_hcd: 2006 August 04 USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver<br />USB Universal Host Controller Interface driver v3.0<br />PCI: Enabling device 0000:00:03.0 (0000 -&gt; 0001)<br />PCI: Fixing up device 0000:00:03.0<br />uhci_hcd 0000:00:03.0: UHCI Host Controller<br />uhci_hcd 0000:00:03.0: new USB bus registered, assigned bus number 1<br />uhci_hcd 0000:00:03.0: irq 6, io base 0x00000100<br />usb usb1: configuration #1 chosen from 1 choice<br />hub 1-0:1.0: USB hub found<br />hub 1-0:1.0: 2 ports detected<br />PCI: Enabling device 0000:00:03.1 (0000 -&gt; 0001)<br />PCI: Fixing up device 0000:00:03.1<br />uhci_hcd 0000:00:03.1: UHCI Host Controller<br />uhci_hcd 0000:00:03.1: new USB bus registered, assigned bus number 2<br />uhci_hcd 0000:00:03.1: irq 6, io base 0x00000120<br />usb usb2: configuration #1 chosen from 1 choice<br />hub 2-0:1.0: USB hub found<br />hub 2-0:1.0: 2 ports detected<br />PCI: Enabling device 0000:00:03.2 (0000 -&gt; 0002)<br />PCI: Fixing up device 0000:00:03.2<br />ehci_hcd 0000:00:03.2: EHCI Host Controller<br />ehci_hcd 0000:00:03.2: new USB bus registered, assigned bus number 3<br />ehci_hcd 0000:00:03.2: irq 6, io mem 0x40000000<br />ehci_hcd 0000:00:03.2: USB 2.0 started, EHCI 1.00, driver 10 Dec 2004<br />usb usb3: configuration #1 chosen from 1 choice<br />hub 3-0:1.0: USB hub found<br />hub 3-0:1.0: 4 ports detected<br />usbcore: registered new interface driver cdc_acm<br />drivers/usb/class/cdc-acm.c: v0.25:USB Abstract Control Model driver for USB modems and ISDN adapters<br />usbcore: registered new interface driver usbserial<br />drivers/usb/serial/usb-serial.c: USB Serial support registered for generic<br />usbcore: registered new interface driver usbserial_generic<br />drivers/usb/serial/usb-serial.c: USB Serial Driver core<br />SCSI subsystem initialized<br />Initializing USB Mass Storage driver...<br />usb 1-1: new full speed USB device using uhci_hcd and address 3<br />usb 1-1: configuration #1 chosen from 1 choice<br />usbcore: registered new interface driver usb-storage<br />USB Mass Storage support registered.<br />Linux video capture interface: v2.00<br />drivers/usb/serial/usb-serial.c: USB Serial support registered for airprime<br />usbcore: registered new interface driver airprime<br />drivers/usb/serial/usb-serial.c: USB Serial support registered for GSM modem (1-port)<br />usbcore: registered new interface driver option<br />drivers/usb/serial/option.c: USB Driver for GSM modems: v0.7.1<br />usbcore: registered new interface driver quickcam<br />usb 1-1: USB disconnect, address 3<br />usb 1-1: new full speed USB device using uhci_hcd and address 4<br />usb 1-1: configuration #1 chosen from 1 choice<br />scsi0 : SCSI emulation for USB Mass Storage devices<br />usb-storage: device found at 4<br />usb-storage: waiting for device to settle before scanning<br />scsi1 : SCSI emulation for USB Mass Storage devices<br />usb-storage: device found at 4<br />usb-storage: waiting for device to settle before scanning<br />scsi 0:0:0:0: CD-ROM&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CMOTECH&nbsp; Mass Storage&nbsp; &nbsp; &nbsp;2.31 PQ: 0 ANSI: 0 CCS<br />scsi 1:0:0:0: Direct-Access&nbsp; &nbsp; &nbsp;CMOTECH&nbsp; Mass Storage&nbsp; &nbsp; &nbsp;2.31 PQ: 0 ANSI: 6<br />usb-storage: device scan complete<br />sd 1:0:0:0: [sda] 102401 512-byte hardware sectors (52 MB)<br />sd 1:0:0:0: [sda] Write Protect is off<br />sd 1:0:0:0: [sda] Mode Sense: 0b 00 00 08<br />sd 1:0:0:0: [sda] Assuming drive cache: write through<br />sd 1:0:0:0: [sda] 102401 512-byte hardware sectors (52 MB)<br />sd 1:0:0:0: [sda] Write Protect is off<br />sd 1:0:0:0: [sda] Mode Sense: 0b 00 00 08<br />sd 1:0:0:0: [sda] Assuming drive cache: write through<br /> sda: unknown partition table<br />sd 1:0:0:0: [sda] Attached SCSI removable disk<br />usb-storage: device scan complete<br />root@OpenWrt:~#</p><br /><br /><br /><p>--------</p><p>execute.sh:</p><p>echo &quot;--&gt; D-50 Linux Connection\n&quot;<br />rm -rf D-50config wvdialconf_log <br />wvdialconf D-50config &gt; wvdialconf_log<br />echo &quot;Carrier Check= no\nStupid Mode= yes&quot; &gt;&gt; D-50config<br />echo &quot;Phone = #777\nUsername = UserID\nPassword = password&quot; &gt;&gt; D-50config<br />rm -rf wvdialconf_log<br />echo &quot;--&gt; Dialing...\n&quot;<br />wvdial --config D-50config</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65253">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Daniel.T</div>
					<div class="post-datetime">
						16 Mar 2008, 22:59					</div>
				</div>
				<div class="post-content content">
					<p>Need more help!</p><p>How do I load usbserial to be used with the found modem?<br />And how to make PPP under OpenWrt?</p><p>Original with the modem it was a file to execute after modem switch but it use wvdial? And that command is not working on openwrt?<br />I put the included code in the bottom of this post!!!</p><p>root@OpenWrt:~# lsusb<br />Bus 003 Device 001: ID 0000:0000<br />Bus 002 Device 001: ID 0000:0000<br />Bus 001 Device 004: ID 16d8:6803&nbsp; &nbsp;&lt;---- Modem<br />Bus 001 Device 001: ID 0000:0000</p><br /><br /><p>execute.sh:</p><p>echo &quot;--&gt; D-50 Linux Connection\n&quot;<br />rm -rf D-50config wvdialconf_log<br />wvdialconf D-50config &gt; wvdialconf_log<br />echo &quot;Carrier Check= no\nStupid Mode= yes&quot; &gt;&gt; D-50config<br />echo &quot;Phone = #777\nUsername = UserID\nPassword = password&quot; &gt;&gt; D-50config<br />rm -rf wvdialconf_log<br />echo &quot;--&gt; Dialing...\n&quot;<br />wvdial --config D-50config</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>