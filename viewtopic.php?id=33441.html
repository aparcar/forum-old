<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WRT54GL -  Guide followed, all good untill installation of brcm-2.4</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 2 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p150872">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">gipsea</div>
					<div class="post-datetime">
						11 Dec 2011, 13:02					</div>
				</div>
				<div class="post-content content">
					<p>Dear all,</p><p>I&#039;m new with this system but I have a bit of a clue about linux that could help me.</p><p>I have a linksys WRT54GL and I read lots posts, guides, howtos to avoid problem during the installation but probably I missed the right one hahaha</p><p>To make it short I decided to install openwrt on my router following your installation howto <a href="http://wiki.openwrt.org/toh/linksys/wrt54g">http://wiki.openwrt.org/toh/linksys/wrt54g</a></p><p>I did follow it untill setting the nvram parameters and still telnet was feasible. I did not set a password for the admin in the luci webinterface.</p><p>after the first reboot, all was nice, the only think was that i could not turn the wifi on. I went to the wifi setting page, turned the power and check any configuration but still nothing going on.</p><p>at this stage, sure of the telnet/ssh way of connectivity, I thought I need to install the openwrt-brcm-2.4-squashfs.trx and I did using Luci utility.</p><p>2 minutes later ... no more chance to connect to the router at all <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>I set manually<br />ip 192.168.1.2<br />mask 255.255.255.0<br />gateway 192.168.1.1</p><p>I did the following tests with linux mint and windows xp<br />when I do connect the cable (still no wifi) the systems acknowledge the connection saying that I&#039;m connect but no succesful ping can be done to the 192.168.1.1</p><p>I did try the hard reset to be able to come back to the default&nbsp; firmware with the 30-30-30 secs procedure but not succesful (I did try only once, I&#039;ll try again later)</p><p>On this page: <a href="http://www.dd-wrt.com/wiki/index.php/Recover_from_a_Bad_Flash">http://www.dd-wrt.com/wiki/index.php/Re â€¦ _Bad_Flash</a> i found the &quot;led messages&quot; how to understand the situation of the router; when I power on the wrt, I have a quick power led flash, after few seconds start the DMZ with a fixed light that will turn off after about 40sec.</p><p>I read about the JTAG but I would like to take it as a really last option cuz it will involve a bit of efforsd to get into it, finding the cables to do all the job but I will do if no other option will arise.</p><p>Does someone know how I can procede to de-brick my router now?</p><p>thanks a lot!!!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p150903">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						11 Dec 2011, 21:18					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://wiki.openwrt.org/doc/howto/generic.flashing.tftp">Installing OpenWrt via TFTP - OpenWrt Wiki</a><br /><a href="http://wiki.openwrt.org/doc/howto/generic.failsafe">Generic Failsafe - OpenWrt Wiki</a><br /><a href="https://forum.openwrt.org/viewtopic.php?id=27520">OpenWrt / Can&#039;t ping router</a><br /><a href="https://forum.openwrt.org/viewtopic.php?id=32437">OpenWrt / disabled switch, access problems</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p150926">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">gipsea</div>
					<div class="post-datetime">
						12 Dec 2011, 01:22					</div>
				</div>
				<div class="post-content content">
					<p>thanks to the Can&#039;t ping router thread I managed using wireshark to enter the failsafe mode of the router.</p><p>Than I did recognize that the souter has as destination the 192.168.1.255 ip so I decided to change mine from xxx.xxx.1.2 to xxx.xxx.1.255</p><p>the message is:<br /> 12&nbsp; &nbsp; &nbsp; 5.43xxxx&nbsp; &nbsp; 192.168.1.1&nbsp; &nbsp; &nbsp;192.168.1.255&nbsp; &nbsp; &nbsp;udp&nbsp; &nbsp; &nbsp;source port: dls-monitor&nbsp; &nbsp; &nbsp; destination port: 4919</p><p>sometime I do also receive message like:<br />23&nbsp; &nbsp; &nbsp; &nbsp;xxxx&nbsp; &nbsp;192.168.1.1&nbsp; &nbsp; &nbsp;192.168.1.255&nbsp; &nbsp; &nbsp; arp&nbsp; &nbsp;who has 192.168.1.1?&nbsp; &nbsp; tell 192.168.1.255<br />che non riesco a decifrare</p><p>unfortunately neither telnet nor tftp (with and&nbsp; without specifying the port 4919) I can connect to the router</p><p>any further hint???</p><p>thanks a lot!!!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p150946">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						12 Dec 2011, 08:23					</div>
				</div>
				<div class="post-content content">
					<p>&quot;xxx.xxx.1.255&quot; is the broadcast address of &quot;xxx.xxx.1.0/24&quot; subnet.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p150950">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">gipsea</div>
					<div class="post-datetime">
						12 Dec 2011, 09:48					</div>
				</div>
				<div class="post-content content">
					<p>xxx.xxx.1.255 is my actual IP address: 192.168.1.255.</p><p>At the beginning of the process I started with a manual IP setting as 192.168.1.2 as stated above</p><p>once I manage to set the failsafe mode on the router I tried to telnet/tftp without any effort.</p><p>Then I tried to interpret the message on wireshark:<br />12&nbsp; &nbsp; &nbsp; 5.43xxxx&nbsp; &nbsp; 192.168.1.1&nbsp; &nbsp; &nbsp;192.168.1.255&nbsp; &nbsp; &nbsp;udp&nbsp; &nbsp; &nbsp;source port: dls-monitor&nbsp; &nbsp; &nbsp; destination port: 4919<br />and I decided to change my IP from 192.168.1.2 to 192.168.1.255 still without any result</p><p>Hope my explanation is better than the description haha</p><p>ciao</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p150953">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						12 Dec 2011, 10:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>gipsea wrote:</cite><blockquote><p>Then I tried to interpret the message on wireshark:<br />12&nbsp; &nbsp; &nbsp; 5.43xxxx&nbsp; &nbsp; 192.168.1.1&nbsp; &nbsp; &nbsp;192.168.1.255&nbsp; &nbsp; &nbsp;udp&nbsp; &nbsp; &nbsp;source port: dls-monitor&nbsp; &nbsp; &nbsp; destination port: 4919<br />and I decided to change my IP from 192.168.1.2 to 192.168.1.255 still without any result</p></blockquote></div><p>Wrong. Anyway, it could be bricked. Try tftp.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p150990">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">gipsea</div>
					<div class="post-datetime">
						12 Dec 2011, 18:32					</div>
				</div>
				<div class="post-content content">
					<p>I finally manage to ping and telnet the system and accordingly to wireshark the router is in a failsafe state (also the DMZ led is flashing)</p><p>if I telnet the router, instead to receive a message like &quot;bla bla, you booted into failsafe mode&quot; (quote from failsafe howto) i receive the regular welcome screen </p><p>I started to follow the tftp how-to, installed the tftpd-hpa and tftp-hpa and moved the openwrt-wrt54g-squashfs.bin into /var/lib/tftpboot; no luck to put the firmware</p><p>Than I try to use atftp and follow the instruction and still no great luck.<br />On wireshark, when I try to put the firmware I receive the following messages:</p><p>15&nbsp; &nbsp; 151.728005&nbsp; &nbsp; 192.168.1.2&nbsp; &nbsp; 192.168.1.1&nbsp; &nbsp; TFTP&nbsp; &nbsp; Write Request, File: openwrt-wrt54g-squashfs.bin\000, Transfer type: octet\000<br />16&nbsp; &nbsp; 151.728328&nbsp; &nbsp; 192.168.1.1&nbsp; &nbsp; 192.168.1.2&nbsp; &nbsp; ICMP&nbsp; &nbsp; Destination unreachable (Port unreachable)<br />17&nbsp; &nbsp; 156.724020&nbsp; &nbsp; Cisco-Li_79:a3:3b&nbsp; &nbsp; CompalIn_ba:ae:24&nbsp; &nbsp; ARP&nbsp; &nbsp; Who has 192.168.1.2?&nbsp; Tell 192.168.1.1<br />18&nbsp; &nbsp; 156.724038&nbsp; &nbsp; CompalIn_ba:ae:24&nbsp; &nbsp; Cisco-Li_79:a3:3b&nbsp; &nbsp; ARP&nbsp; &nbsp; 192.168.1.2 is at 00:1b:38:ba:ae:24</p><p>after that start again as from 15 to 18 until the timeout</p><p>when I&#039;m connected to the router by atftp and I digit &quot;status&quot; this is the answer:<br />Connected:&nbsp; 192.168.1.1 port 69<br />Mode:&nbsp; &nbsp; &nbsp; &nbsp;octet<br />Verbose:&nbsp; &nbsp; off<br />Trace:&nbsp; &nbsp; &nbsp; off<br />Options<br /> tsize:&nbsp; &nbsp; &nbsp;disabled<br /> blksize:&nbsp; &nbsp;disabled<br /> timeout:&nbsp; &nbsp;disabled<br /> multicast: disabled<br />mtftp variables<br /> client-port:&nbsp; &nbsp;76<br /> mcast-ip:&nbsp; &nbsp; &nbsp; 0.0.0.0<br /> listen-delay:&nbsp; 2<br /> timeout-delay: 2<br />Last command: put /var/lib/tftpboot/openwrt-wrt54g-squashfs.bin (in this case i tried to give the absolute path of the .bin file)<br />Last file: /var/lib/tftpboot/openwrt-wrt54g-squashfs.bin<br />&nbsp; Transfer aborted</p><p>At the moment, reading the failsafe how-to, I&#039;m considering to clean the entire JFFS2 partition using:<br />mtd -r erase rootfs_data</p><p>but I don&#039;t know if it is right to do or if I dig myself into the hole</p><p>I can&#039;t see at the moment where and what I do wrongly.</p><p>My only and big concern is about the fact that I can not &quot;hard reset&quot; the router to move back to the default firmware and start again from scratch</p><p>Hope someone has some good suggestions!!!</p><p>thank you all</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p150997">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">gipsea</div>
					<div class="post-datetime">
						12 Dec 2011, 19:48					</div>
				</div>
				<div class="post-content content">
					<p>Problem solved!!!</p><p>just few considerations:</p><p>all the telnet and tftp were successful only using admin rights<br />in failsafe mode I used&nbsp; &nbsp; &nbsp;&quot;mtd -r erase rootfs_data&quot; to set to default openwrt</p><br /><p>now start a new challeng trying to get from openwrt what I do expect I can get!!!!</p><p>enjoy and thanks for helping me out</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>