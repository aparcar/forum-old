<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Help! ath9K how to disable 5GHz channel in ubuntu 3.10.55 kernel??</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p272298">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">elecomes</div>
					<div class="post-datetime">
						13 Apr 2015, 14:22					</div>
				</div>
				<div class="post-content content">
					<p>Hi, </p><p>I am new in Linux, and I am trying to disable the 5GHz wifi channel in my AR9462 card which is using the ath9K driver.</p><p>I have tried to use Country code setting to force it into Country code =KZ. However, there is no effect to our kernel.<br />I can&#039;t change to use other kernel but thinking about to get some assist to change the ath9K driver, so I could disable the 5GHz.</p><p>By the way, if there is any one could help to advise how to do so? I saw that openwrt offer some patch files which claimed it could help to disable 5GHz, but I don&#039;t know how to apply it to our system??? it stated some .h files like ath9k_platform.h, and init.c...etc?</p><p>Does it mean I have to recompilie the driver? or etc?</p><p>Anyway, I hope there is someone could help us in this learning path.</p><p>thanks</p><p>Melvin.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p272415">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">vilpalu</div>
					<div class="post-datetime">
						14 Apr 2015, 08:15					</div>
				</div>
				<div class="post-content content">
					<p>you want disable 5ghz band? just type wifi down radio1 (if you got dual radio router) or disable it in uci configuration file.</p>											<p class="post-edited">(Last edited by <strong>vilpalu</strong> on 14 Apr 2015, 08:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p272446">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">atom</div>
					<div class="post-datetime">
						14 Apr 2015, 12:20					</div>
				</div>
				<div class="post-content content">
					<p>Two bits of information in your post make it difficult to help:<br />- You mention you&#039;re on Ubuntu.&nbsp; These forums generally cover OpenWRT, a completely different distribution with quite different ways of configuring networking<br />- It&#039;s unclear whether you want to prevent a single channel from being used, or the entire 5Ghz band</p><p>Additionally, if you can provide more details (a link) to the driver modifications you mention, it would be easier to commont on its appropriateness or not.</p><p>Can you please clarify?</p>											<p class="post-edited">(Last edited by <strong>atom</strong> on 14 Apr 2015, 12:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p272847">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">elecomes</div>
					<div class="post-datetime">
						17 Apr 2015, 15:40					</div>
				</div>
				<div class="post-content content">
					<p>Hi atom, </p><p>see below link for those driver code, they actually have some boolean sounds like able to disable it. I want the whole 5GHz band disable.</p><p><a href="https://dev.openwrt.org/browser/trunk/package/kernel/mac80211/patches/543-ath9k-allow-to-disable-bands-via-platform-data.patch?rev=37766">https://dev.openwrt.org/browser/trunk/p … ?rev=37766</a></p><p>Actually, I could see this code is implemented in the latest kernel 3.19 or 4.0. I have got another machine upgraded to kernel 4.0 in ubuntu, but I still can&#039;t figure out how to enable this feature so as to disabling the 5GHz? anyone can help?</p><p><a href="http://lxr.free-electrons.com/source/include/linux/ath9k_platform.h?v=3.19">http://lxr.free-electrons.com/source/in … m.h?v=3.19</a></p><p><a href="http://lxr.free-electrons.com/source/drivers/net/wireless/ath/ath9k/init.c?v=3.19">http://lxr.free-electrons.com/source/dr … t.c?v=3.19</a></p><p><a href="http://lxr.free-electrons.com/source/drivers/net/wireless/ath/ath9k/hw.c?v=3.19">http://lxr.free-electrons.com/source/dr … w.c?v=3.19</a></p><p><a href="http://lxr.free-electrons.com/source/drivers/net/wireless/ath/ath9k/hw.h?v=3.19">http://lxr.free-electrons.com/source/dr … w.h?v=3.19</a></p><p>Sorry I am pretty new to linux, so I am not so sure the differences between openwrt and ubuntu?<br />hopefully, anyone can help me to learn more details.</p><p>thanks</p><p>melvin</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p272867">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">atom</div>
					<div class="post-datetime">
						17 Apr 2015, 17:32					</div>
				</div>
				<div class="post-content content">
					<p>Are you trying to configure a dual-band station (client PC/device) in such a way that it doesn&#039;t connect to an access point that has the same SSID on both the 2.4Ghz and 5Ghz bands?</p><p>If so, depending on your reason for doing so and whether or not you have control over the access point, the simplest way might be to either disable the 5Ghz radio on the access point or change its SSID so that it does not match the 2.4Ghz radio&#039;s.</p><p>Failing that, you should be able to force it to a specific BSSID (AP) in the Network Manager, or through iwconfig.&nbsp; The iwconfig manpage is reasonably readible and self-explanatory, you&#039;re probably looking for something like &quot;iwconfig wlan0 ap 00:11:22:33:44:55&quot; or something, where 00:11:22:33:44:55 is the BSSID of your 2.4 Ghz AP.&nbsp; Alternatively, manually specifying the channel using &quot;iwconfig wlan0 freq 1&quot; would force it to use channel 1, which lies in the 2.4 Ghz band.</p><p>For more general cases, the following Google results seemed interesting:<br /><a href="http://unix.stackexchange.com/questions/91308/how-to-disable-the-2-4ghz-band-wireless-adapter">http://unix.stackexchange.com/questions … ss-adapter</a><br /><a href="http://comments.gmane.org/gmane.linux.drivers.ath9k.devel/3439">http://comments.gmane.org/gmane.linux.d … devel/3439</a></p><p>From the latter, it seems you can achieve what you want by modifying wpa_supplicant.conf forcibly set a list of allowable frequencies using the freq_list parameter.&nbsp; You can map channels to frequencies from the Wikipedia 802.11 entry (and many other sources.)</p><p>Unfortunately as I&#039;m not that familiar with Ubuntu, I won&#039;t be of much use in telling you where to find wpa_supplicant.conf or what the considerations are for modifying it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p272911">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">elecomes</div>
					<div class="post-datetime">
						17 Apr 2015, 23:49					</div>
				</div>
				<div class="post-content content">
					<p>atom. </p><p>I will have a look to the wpa_supplicant, but force the AP option is not a point to us. since we can&#039;t just force any AP, also we can&#039;t only have 1 freq available here. that&#039;s why we want to disable the 5GHz by ath9k driver, since the driver should have some part to initalise it.</p><p>anyway, let see if there is any one help on it.</p><p>thanks</p><p>melvin</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>