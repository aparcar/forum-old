<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> How to connect to wireless 802.1X network w/ CA-Certificate &amp; WRT54GL?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 24 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p119130">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">TheJohnny</div>
					<div class="post-datetime">
						15 Oct 2010, 22:04					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I&#039;m new here but working on my problem for quite some time.</p><p>I have a Linksys WRT54GL 1.1 (CL7B) with OpenWRT installed.</p><p>I want to connect to a wireless 802.1x network that need authentification through WPA2/EAP-TTLS/PAP. I also need a certain CA certificate which I have.</p><p>I first installed <strong>Backfire 10.03.1-rc3 brcm47xx</strong>, but couldn&#039;t get the WLAN to work. I read somewhere that with the kernel of this version WLAN will not work with my Broadcom chipset.<br />So I flashed my WRT54GL with <strong>Backfire 10.03.1-rc3 brcm-2.4</strong>. Now the WLAN worked - I could see other AP. But I do not know how to configure the authentification described above.</p><p>The WLAN screen of the kernel 2.4 looks like this in client mode:<br /><span class="postimg"><img src="http://img222.imageshack.us/img222/3433/backfire10031rc3brcm24.jpg" alt="http://img222.imageshack.us/img222/3433/backfire10031rc3brcm24.jpg" /></span><br />But there in no authenfification via EAP.</p><p>The WLAN screen of the kernel 2.6 - is this tight? - looks like this in client mode:<br /><span class="postimg"><img src="http://img706.imageshack.us/img706/8334/backfire10031rc3brcm47x.jpg" alt="http://img706.imageshack.us/img706/8334/backfire10031rc3brcm47x.jpg" /></span><br />There I can select EAP.<br />This is the screen when you select EAP and PAP:<br /><span class="postimg"><img src="http://img524.imageshack.us/img524/1879/backfire10031rc3brcm47xt.jpg" alt="http://img524.imageshack.us/img524/1879/backfire10031rc3brcm47xt.jpg" /></span><br />You can upload the CA certificate.</p><p>There are also coming more Mode options with kernel 2.6:<br /><span class="postimg"><img src="http://img524.imageshack.us/img524/8334/backfire10031rc3brcm47x.jpg" alt="http://img524.imageshack.us/img524/8334/backfire10031rc3brcm47x.jpg" /></span><br />Though I do not know whta WDS stands for.</p><br /><p>I also tried to install the wpa-supplicant from the brcm-2.4 directory but it didn&#039;t work.</p><p>Help is really appreciated. Thank you!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119179">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">krapht</div>
					<div class="post-datetime">
						17 Oct 2010, 12:10					</div>
				</div>
				<div class="post-content content">
					<p>You can&#039;t use the web interface to configure client mode EAP-TLS connections because there isn&#039;t anywhere to write in the &#039;identity&#039; field.</p><p>So you need to SSH into your router and manually setup wpa_supplicant.conf.</p><p>Also, you can&#039;t use kernel 2.4 to do EAP-TLS.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119247">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">TheJohnny</div>
					<div class="post-datetime">
						18 Oct 2010, 17:45					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I was a little bit succesful with kamikaze 8.09 RC1 (brcm47xx - kernel 2.6).<br />I&#039;ve set up the wireless configuration (wpa-supplicant, ca certificates), but I get the following error:</p><p>CTRL-EVENT-EAP-FAILURE EAP authentication failed</p><p>What can be the cause for this failure?</p><p>I copied the wpa-supplicant configuration file from the WLAN provider, so there shouldn&#039;t be the problem.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119301">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">krapht</div>
					<div class="post-datetime">
						19 Oct 2010, 13:06					</div>
				</div>
				<div class="post-content content">
					<p>Does your copy of wpa_supplicant support EAP-TTLS? You may need to compile the package yourself with openssl support.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119527">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">TheJohnny</div>
					<div class="post-datetime">
						22 Oct 2010, 17:03					</div>
				</div>
				<div class="post-content content">
					<p>Yes, EAP-TTLS is supported. At least I think so cause this<br /></p><div class="quotebox"><blockquote><p>2004-05-31 - v0.2.2<br />&nbsp; &nbsp; * added support for new EAP authentication methods:<br />&nbsp; &nbsp;&nbsp; &nbsp;EAP-TTLS/EAP-MD5-Challenge<br />&nbsp; &nbsp;&nbsp; &nbsp;EAP-TTLS/EAP-GTC<br />&nbsp; &nbsp;&nbsp; &nbsp;EAP-TTLS/EAP-MSCHAPv2<br />&nbsp; &nbsp;&nbsp; &nbsp;EAP-TTLS/EAP-TLS<br />&nbsp; &nbsp;&nbsp; &nbsp;EAP-TTLS/MSCHAPv2<br />&nbsp; &nbsp;&nbsp; &nbsp;EAP-TTLS/MSCHAP<br />&nbsp; &nbsp;&nbsp; &nbsp;EAP-TTLS/PAP<br />&nbsp; &nbsp;&nbsp; &nbsp;EAP-TTLS/CHAP<br />&nbsp; &nbsp;&nbsp; &nbsp;EAP-PEAP/TLS<br />&nbsp; &nbsp;&nbsp; &nbsp;EAP-PEAP/GTC<br />&nbsp; &nbsp;&nbsp; &nbsp;EAP-PEAP/MD5-Challenge<br />&nbsp; &nbsp;&nbsp; &nbsp;EAP-GTC</p></blockquote></div><p>is from the wpa_supplicant changelog file.</p>											<p class="post-edited">(Last edited by <strong>TheJohnny</strong> on 22 Oct 2010, 19:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119536">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">TheJohnny</div>
					<div class="post-datetime">
						22 Oct 2010, 19:22					</div>
				</div>
				<div class="post-content content">
					<p>I copied openssl-util_0.9.8i-1_mipsel.ipk (and libopenssl and zlib) to the router and installed it: opkg install openssl etc.</p><p>But it didn&#039;t help. The output is still the same:<br /></p><div class="quotebox"><blockquote><p>root@OpenWrt:~# wpa_supplicant -Dwext -iwlan0 -c/etc/config/wpa_supplicant.conf</p><p>ioctl[SIOCSIWAUTH]: Operation not supported<br />WEXT auth param 4 value 0x0 - CTRL-EVENT-SCAN-RESULTS<br />Trying to associate with 00:12:da:9e:60:00 (SSID=&#039;802.1X&#039; freq=2447 MHz)<br />Associated with 00:12:da:9e:60:00<br />CTRL-EVENT-EAP-STARTED EAP authentication started<br />CTRL-EVENT-EAP-METHOD EAP vendor 0 method 21 (TTLS) selected<br />CTRL-EVENT-EAP-FAILURE EAP authentication failed<br />CTRL-EVENT-DISCONNECTED - Disconnect event - remove keys</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119541">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">krapht</div>
					<div class="post-datetime">
						22 Oct 2010, 21:00					</div>
				</div>
				<div class="post-content content">
					<p>As far as I know the accepted way to have wpa_supplicant use openssl is to specify that specifically when you are compiling openwrt in the &quot;make menuconfig&quot; area.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>