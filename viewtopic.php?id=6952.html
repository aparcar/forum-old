<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Managed to get Kamikazee on the DG834G - nvram and NAS0 help?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p32313">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">marcosscriven</div>
					<div class="post-datetime">
						18 Aug 2006, 18:10					</div>
				</div>
				<div class="post-content content">
					<p>Hi</p><p>Got the Kamikazee running on the DG834G (v1) with the instructions on <a href="http://www.earth.li/~noodles/hardware-dg834g.html">http://www.earth.li/~noodles/hardware-dg834g.html</a></p><p>Instead of building my own AR7 image, I downloaded the one from <a href="http://downloads.openwrt.org/people/nbd/ar7/annex-a/openwrt-ar7-2.4-squashfs.bin">http://downloads.openwrt.org/people/nbd … uashfs.bin</a>&nbsp; </p><p>So now I can SSH an I get a root@OpenWrt:~# prompt </p><p>Version info is BusyBox v1.1.2 (2006.04.13-15:50+0000) Buit-in shell (ash)<br />Kamikaze (bleeding edge, r3629)<br />Plus some helpful instructions on how to make a Kamikaze cocktail.</p><p>So now my problem is I can&#039;t actually get a WAN connection going on this thing. Looking at the docs, one of the first commands it tells you is &#039;nvram&#039;, but I get get nvram not found...</p><p>I suppose something is therefore majorly wrong!</p><p>I also tried editing the /etc/config/network file and rebooting:</p><p>wan_proto=pppoe<br />wan_ifname=ppp0<br />wan_device=nas0<br />atm_vpi=1<br />atm_vci=32<br />ppp_username=xxxx<br />ppp_password=xxxx</p><p>The settings are for Alice DSL (a German ADSL2+ provider). My setting which work on another router are (as at <a href="http://wiki.mhilfe.de/index.php/Bild:Atmvcu-router1.jpg)">http://wiki.mhilfe.de/index.php/Bild:At … uter1.jpg)</a>:</p><p>VPI: 1<br />VCI:32<br />Virtual Circuit: Enabled<br />WAN Setting PPPoE/PPPoA<br />Username:xxxxx<br />Password:xxxxx<br />Connection Type: PPPoE LLC<br />MTU: 1492<br />Authentication: CHAP<br />Obtain DNS Automatically: Enabled<br />Default Route: Enabled<br />NAT: Enabled<br />IGMP: Enabled</p><p>So - any ideas on this please? If I can get the WAN connection going, then I can start downloading the packages with ipkg...</p><p>Thanks</p><p>Marcos</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p32457">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">marcosscriven</div>
					<div class="post-datetime">
						21 Aug 2006, 02:05					</div>
				</div>
				<div class="post-content content">
					<p>Please can someone help me on this, or at least where to look? I spent ages getting this far, and it will be wasted time otherwise! Thanks in advance</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p32509">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">KillaB</div>
					<div class="post-datetime">
						22 Aug 2006, 06:19					</div>
				</div>
				<div class="post-content content">
					<p>You might want to make sure you&#039;re using the right annex.</p><p>See thread here:&nbsp; <a href="http://forum.openwrt.org/viewtopic.php?id=6870">http://forum.openwrt.org/viewtopic.php?id=6870</a></p><p>I too would love to put OpenWrt on my DG834Gv2 but being a Windows user, I couldn&#039;t live without Upnp.&nbsp; That&#039;s why I port forward to my WRT54G on the same subnet <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>											<p class="post-edited">(Last edited by <strong>KillaB</strong> on 22 Aug 2006, 06:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p32515">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">marcosscriven</div>
					<div class="post-datetime">
						22 Aug 2006, 11:14					</div>
				</div>
				<div class="post-content content">
					<p>Thanks - I did see that post, but I&#039;m pretty sure the DG834Gv1 is Annex A (according to specs I&#039;ve seen - not that I know what it means)</p><p>Are you certain that the WRT can manage an ADSL 2+ connection (PPPoE LLC)?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p32585">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">KillaB</div>
					<div class="post-datetime">
						23 Aug 2006, 03:57					</div>
				</div>
				<div class="post-content content">
					<p>Sorry, didn&#039;t notice you where already using an Annex-A image.&nbsp; I think you might want to be using the DG834 image though instead of the AR7 image.&nbsp; Not sure what the differences are between the two, but the DG834 image is much larger.&nbsp; I&#039;m suspecting ADSL functionality is missing from the AR7 image, but don&#039;t quote me on it.</p><p>The WRT can handle PPPoE for sure.&nbsp; ADSL 2+ is handled by the modem not by the router.<br />The DG834G can act like a modem vs. modem/router (on stock firmware), but then you might as well just buy a regular ADSL modem such as the DG632.&nbsp; <a href="http://dg834.grandou.net/index.php?page=TipsandTricks">http://dg834.grandou.net/index.php?page=TipsandTricks</a></p><p>What I meant earlier was that I just run OpenWrt on my WRT behind the ADSL modem and use it for things such as SSH, proxy server, IPv6 routing, etc.&nbsp; I&#039;d love to run OpenWrt right on my DG834G but don&#039;t have the guts as I don&#039;t want to loose UPnP.&nbsp; If you can find a working UPnP implementation for this beast, I&#039;d surely convert.</p><p>Also, you might want to build your own images as nbd&#039;s images are quite old.</p>											<p class="post-edited">(Last edited by <strong>KillaB</strong> on 23 Aug 2006, 03:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p32614">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">marcosscriven</div>
					<div class="post-datetime">
						23 Aug 2006, 14:17					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the advice - I will try out the other image.</p><p>As for building my own, I haven&#039;t the faintest idea how!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p32616">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">marcosscriven</div>
					<div class="post-datetime">
						23 Aug 2006, 14:30					</div>
				</div>
				<div class="post-content content">
					<p>Hmm - also, I&#039;m a bit stuck now - I don&#039;t know how to use the .img file, especially as it&#039;s already running the AR7 version.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p32630">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">KillaB</div>
					<div class="post-datetime">
						23 Aug 2006, 21:18					</div>
				</div>
				<div class="post-content content">
					<p>Someone else is going to have to help out here because I&#039;m no expert.&nbsp; I just looked at the two images in a hex editor to find that much of the DG834 image is just FF and 00 bytes.&nbsp; The only major differences are in the first 20000h bytes, which might just be a header to allow it to be loaded from the original firmware???</p><p>Creating your own images is as simple as following the buildroot instructions providing you&#039;re running linux with the proper devel packages.&nbsp; I&#039;ve found Mandriva 2006 works well.<br /><a href="http://downloads.openwrt.org/docs/buildroot-documentation.html">http://downloads.openwrt.org/docs/build … ation.html</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p33268">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">VinceLe</div>
					<div class="post-datetime">
						4 Sep 2006, 22:50					</div>
				</div>
				<div class="post-content content">
					<p>According to section &quot;2.3. MTD Layout&quot; of <a href="http://wiki.openwrt.org/OpenWrtDocs/Hardware/Netgear/DG834G">http://wiki.openwrt.org/OpenWrtDocs/Har … ear/DG834G</a><br />I would suspect that the first 0x20000 bytes are the mtd partition 2, aka the ADAM2 bootloader itself...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p33388">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">gwf</div>
					<div class="post-datetime">
						7 Sep 2006, 04:26					</div>
				</div>
				<div class="post-content content">
					<p>Also, unless I am wrong the image in NBDs directory is 2.4 based an not kamikazee which is 2.6 based.</p><p>Gary</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p36551">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">Hydra</div>
					<div class="post-datetime">
						4 Nov 2006, 12:56					</div>
				</div>
				<div class="post-content content">
					<p>i&#039;f you&#039;ve got adam2 then reflashing is quite simple.</p><p>first, make sure your mtd4 adam2 env variable is set correctly (it should be cover the entire region used by the the larger areas, there should be two small areas that have a size of 0x10000 (64k) - make sure it does not include them! (they&#039;re the adam2 bootloader and adam2 env+config)</p><p>next figure out what the adam2 my_ipaddress variable is set to. (see adam2 guides on the net, linked to from the wiki)</p><p>second, reboot your router and quickly connect to the ip address, login as adam2/adam2</p><p>then, have your firmware ready which should be a raw image file that just contains the linux kernel and a file system (be it squashfs or jffs)</p><p>then use the following commands</p><p>binary<br />quote MEDIA FLSH<br />put &lt;rom image&gt; &quot;&lt;rom image&gt; mtd&quot;<br />quote REBOOT<br />bye</p><p>^ case sensitive commands, &lt;rom image&gt; is the name of the firmware, e.g. myfirmware.bin</p><p>That works for me anyway.</p><p>I don&#039;t know if you&#039;ve got a serial cable, i would recommend getting one as it makes it much easier to see what&#039;s going on in case you flashed it badly.</p><p>You can basically much about with images to your hearts conent, but just don&#039;t overwrite the bootloader and it&#039;s config!</p><p>I&#039;ve written up a bit on the wiki regarding the ARM8100 using PPPoA, see the wiki.</p><p>Are you using PPPoA or PPPoE ?&nbsp; the setup is quite different. Make sure you also know your VCI/VPI and ENCAPSULATION (vc-mux or llc).&nbsp; Make sure the adam2 environment variable &quot;modulation&quot; is set correct too.<br />have a look in /proc/tiatm and you should be able to see if the dsl is synced (asvar_modem_status will contain SHOWTIME if it&#039;s up)</p><p>Hope this helps.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>