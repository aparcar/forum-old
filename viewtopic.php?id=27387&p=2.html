<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WDS problem</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 31 Mar 2018 and 7 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=27387&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p122234">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">groovy</div>
					<div class="post-datetime">
						29 Nov 2010, 20:41					</div>
				</div>
				<div class="post-content content">
					<p>vplessky, I really appreciate your help.<br />But this sounds to me like:</p><p>A: Hey, i have a problem with my car. It&#039;s a Toyota and it doesn&#039;t start anymore.</p><p>B:&nbsp; Hey, i have Ford and it starts without problems. So you should by a Ford.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122237">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">vplessky</div>
					<div class="post-datetime">
						29 Nov 2010, 21:42					</div>
				</div>
				<div class="post-content content">
					<p>well, this is up to you how to treat my posts.</p><p>Believe me, I tested WDS a lot<br /> <a href="http://vplessky.blogspot.com/2010/11/3com-wer101-wds-sitesurvey-one-wds-link.html">3Com WER101 WDS Site Survey</a><br /> <a href="http://vplessky.blogspot.com/2010/11/3com-wireless-11g-router-wer101-wds.html">3Com WER101 WDS Connected</a><br /> <a href="http://vplessky.blogspot.com/2010/11/3com-ap7760-wds-link-status.html">3Com AP7760 WDS status</a><br /> <a href="http://vplessky.blogspot.com/2010/11/tp-link-tl-wr1043nd-wireless-router.html">WDS running on TP-Link WR1043ND</a></p><p>And I know difference between &quot;bad WDS&quot; and &quot;good WDS&quot;</p><p>My old ASUS WL-500G was very bad in WDS. I never managed to connect it via WDS to any other device. Neither with native firmware nor DD-Wrt.<br />Linksys WRT54GL was much better.&nbsp; I could connect it to 3Com router - but only in WEP mode.<br />TP-Link routers and APs points are very good for WDS.&nbsp; WDS is working with native factory firmware.<br />And it is working on router flashed with OpenWrt.</p><p>What I also learned is that if you really need WDS, and it is not working with some device - I should go and buy different device.<br />It was somewhat difficult 3 years ago, when ASUS WL-500G was about $130.<br />With decent routers available for $40-$80 nowdays, it&#039;s not a problem anymore.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122238">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">groovy</div>
					<div class="post-datetime">
						29 Nov 2010, 21:49					</div>
				</div>
				<div class="post-content content">
					<p>I will try and test further <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />Thank you for your time and support.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122316">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						30 Nov 2010, 23:35					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://www.dd-wrt.com/wiki/index.php/WDS_Linked_router_network">WDS Linked router network - DD-WRT Wiki</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122400">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						2 Dec 2010, 02:20					</div>
				</div>
				<div class="post-content content">
					<p>I managed to create a working 802.11bg wds network.</p><p>USB wireless dongle for testing:<br /></p><div class="quotebox"><blockquote><p>ASUS WL-167g-V2<br />Ralink RT2573<br />HWaddr 00:18:f3:xx:xx:xx</p></blockquote></div><p>ap+wds:<br /></p><div class="quotebox"><blockquote><p>ASUS WL-HDD2.5<br />Backfire 10.03.1-rc4, r24045<br />HWaddr 00:15:f2:xx:xx:xx</p></blockquote></div><div class="codebox"><pre><code>  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 Backfire (10.03.1-rc4, r24045) --------------------
  * 1/3 shot Kahlua    In a shot glass, layer Kahlua
  * 1/3 shot Bailey&#039;s  on the bottom, then Bailey&#039;s,
  * 1/3 shot Vodka     then Vodka.
 ---------------------------------------------------
root@OpenWrt:~# cat /etc/config/wireless

config &#039;wifi-device&#039; &#039;radio0&#039;
    option &#039;type&#039; &#039;mac80211&#039;
    option &#039;channel&#039; &#039;11&#039;
    option &#039;macaddr&#039; &#039;00:15:f2:xx:xx:xx&#039;
    option &#039;txpower&#039; &#039;10&#039;
    option &#039;disabled&#039; &#039;0&#039;
    option &#039;hwmode&#039; &#039;11g&#039;
    option &#039;country&#039; &#039;US&#039;

config &#039;wifi-iface&#039;
    option &#039;device&#039; &#039;radio0&#039;
    option &#039;mode&#039; &#039;ap&#039;
    option &#039;wds&#039; &#039;1&#039;    #ap+wds
    option &#039;network&#039; &#039;lan&#039;
    option &#039;ssid&#039; &#039;wds_link&#039;
    option &#039;encryption&#039; &#039;psk2&#039;
    option &#039;key&#039; &#039;xxxxxxxx&#039;

root@OpenWrt:~# cat /etc/config/network

config &#039;interface&#039; &#039;loopback&#039;
    option &#039;ifname&#039; &#039;lo&#039;
    option &#039;proto&#039; &#039;static&#039;
    option &#039;ipaddr&#039; &#039;127.0.0.1&#039;
    option &#039;netmask&#039; &#039;255.0.0.0&#039;

config &#039;interface&#039; &#039;lan&#039;
    option &#039;type&#039; &#039;bridge&#039;
    option &#039;ifname&#039; &#039;eth1&#039;
    option &#039;proto&#039; &#039;static&#039;
    option &#039;ipaddr&#039; &#039;192.168.1.1&#039;
    option &#039;netmask&#039; &#039;255.255.255.0&#039;
    option &#039;gateway&#039; &#039;192.168.1.2&#039;
    option &#039;dns&#039; &#039;8.8.8.8&#039;
    option &#039;stp&#039; &#039;1&#039;
    option &#039;defaultroute&#039; &#039;0&#039;
    option &#039;peerdns&#039; &#039;0&#039;

root@OpenWrt:~# iwconfig
lo    no wireless extensions.

eth0      no wireless extensions.

eth1      no wireless extensions.

br-lan    no wireless extensions.

wlan0     IEEE 802.11bg  Mode:Master  Frequency:2.462 GHz  Tx-Power=10 dBm
      RTS thr:off   Fragment thr:off
      Power Management:off

mon.wlan0  IEEE 802.11bg  Mode:Monitor  Tx-Power=10 dBm
      RTS thr:off   Fragment thr:off
      Power Management:off

wlan0.sta1  IEEE 802.11bg  Mode:Secondary  Tx-Power=10 dBm
      RTS thr:off   Fragment thr:off
      Power Management:off

root@OpenWrt:~# iw wlan0 station dump
Station 00:18:f3:xx:xx:xx (on wlan0)
    inactive time:  40 ms
    rx bytes:       7592
    rx packets:     77
    tx bytes:       7019
    tx packets:     50
    signal:     -44 dBm
    tx bitrate:     18.0 MBit/s

root@OpenWrt:~# iw wlan0.sta1 station dump
Station 06:18:84:xx:xx:xx (on wlan0.sta1)
    inactive time:  40 ms
    rx bytes:       60955
    rx packets:     499
    tx bytes:       138456
    tx packets:     901
    signal:     -17 dBm
    tx bitrate:     54.0 MBit/s</code></pre></div><p>ap+wds &amp; wds sta:<br /></p><div class="quotebox"><blockquote><p>Fonera+<br />Gargoyle v1.2.5 (Kamikaze 8.09.2)<br />HWaddr 06:18:84:xx:xx:xx</p></blockquote></div><div class="codebox"><pre><code>  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 KAMIKAZE (8.09.2, unknown) -------------------------
  * 10 oz Vodka       Shake well with ice and strain
  * 10 oz Triple sec  mixture into 10 shot glasses.
  * 10 oz lime juice  Salute!
 ---------------------------------------------------
root@OpenWrt:~# uname -a
Linux OpenWrt 2.6.26.8 #1 Mon Sep 6 14:11:14 EDT 2010 mips unknown

root@OpenWrt:~# cat /etc/config/wireless

config &#039;wifi-device&#039; &#039;wifi0&#039;
    option &#039;type&#039; &#039;atheros&#039;
    option &#039;txpower&#039; &#039;10&#039;
    option &#039;channel&#039; &#039;11&#039;
    option &#039;hwmode&#039; &#039;11g&#039;
    option &#039;country&#039; &#039;840&#039;

config &#039;wifi-iface&#039; &#039;cfg2&#039;
    option &#039;device&#039; &#039;wifi0&#039;
    option &#039;mode&#039; &#039;ap&#039;
    option &#039;wds&#039; &#039;1&#039;    #ap+wds
    option &#039;network&#039; &#039;lan&#039;
    option &#039;ssid&#039; &#039;ap_wds&#039;
    option &#039;encryption&#039; &#039;psk2&#039;
    option &#039;key&#039; &#039;xxxxxxxx&#039;

config &#039;wifi-iface&#039; &#039;cfg3&#039;
    option &#039;device&#039; &#039;wifi0&#039;
    option &#039;mode&#039; &#039;sta&#039;    #wds sta
    option &#039;wds&#039; &#039;1&#039;
    option &#039;network&#039; &#039;lan&#039;
    option &#039;ssid&#039; &#039;wds_link&#039;
    option &#039;encryption&#039; &#039;psk2&#039;
    option &#039;key&#039; &#039;xxxxxxxx&#039;

root@OpenWrt:~# cat /etc/config/network

config &#039;interface&#039; &#039;loopback&#039;
    option &#039;ifname&#039; &#039;lo&#039;
    option &#039;proto&#039; &#039;static&#039;
    option &#039;ipaddr&#039; &#039;127.0.0.1&#039;
    option &#039;netmask&#039; &#039;255.0.0.0&#039;

config &#039;interface&#039; &#039;lan&#039;
    option &#039;ifname&#039; &#039;eth0.0 eth0.1&#039;
    option &#039;type&#039; &#039;bridge&#039;
    option &#039;proto&#039; &#039;static&#039;
    option &#039;ipaddr&#039; &#039;192.168.1.254&#039;
    option &#039;netmask&#039; &#039;255.255.255.0&#039;
    option &#039;stp&#039; &#039;1&#039;

config &#039;interface&#039; &#039;wan&#039;
    option &#039;ifname&#039; &#039;br-lan&#039;
    option &#039;proto&#039; &#039;pppoe&#039;
    option &#039;username&#039; &#039;xxxxxxxx@domain.com&#039;
    option &#039;password&#039; &#039;xxxxxxxx&#039;
    option &#039;keepalive&#039; &#039;3 5&#039;
    option &#039;mtu&#039; &#039;1492&#039;

root@OpenWrt:~# iwconfig
lo    no wireless extensions.

eth0      no wireless extensions.

eth0.0    no wireless extensions.

eth0.1    no wireless extensions.

br-lan    no wireless extensions.

imq0      no wireless extensions.

imq1      no wireless extensions.

wifi0     no wireless extensions.

ath0      IEEE 802.11g  ESSID:&quot;ap_wds&quot;  Nickname:&quot;&quot;
      Mode:Master  Frequency:2.462 GHz  Access Point: 00:18:84:xx:xx:xx
      Bit Rate:0 kb/s   Tx-Power=10 dBm   Sensitivity=1/1
      Retry:off   RTS thr:off   Fragment thr:off
      Encryption key:xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx [3]   Security mode:open
      Power Management:off
      Link Quality=69/70  Signal level=-27 dBm  Noise level=-96 dBm
      Rx invalid nwid:65  Rx invalid crypt:0  Rx invalid frag:0
      Tx excessive retries:0  Invalid misc:0   Missed beacon:0

ath1      IEEE 802.11g  ESSID:&quot;wds_link&quot;  Nickname:&quot;&quot;
      Mode:Managed  Frequency:2.462 GHz  Access Point: 00:15:F2:xx:xx:xx
      Bit Rate:36 Mb/s   Tx-Power=10 dBm   Sensitivity=1/1
      Retry:off   RTS thr:off   Fragment thr:off
      Encryption key:xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx   Security mode:restricted
      Power Management:off
      Link Quality=69/70  Signal level=-27 dBm  Noise level=-96 dBm
      Rx invalid nwid:10728  Rx invalid crypt:0  Rx invalid frag:0
      Tx excessive retries:0  Invalid misc:0   Missed beacon:0

ppp0      no wireless extensions.

root@OpenWrt:~# wlanconfig ath0 list sta
ADDR           AID CHAN RATE RSSI  DBM  IDLE  TXSEQ  TXFRAG  RXSEQ  RXFRAG CAPS ACAPS ERP    STATE     MODE
00:18:f3:xx:xx:xx    1   11  36M   55  -40     0      4       5    106       0 EPSs     0    5   Normal RSN

root@OpenWrt:~# wlanconfig ath1 list sta
ADDR           AID CHAN RATE RSSI  DBM  IDLE  TXSEQ  TXFRAG  RXSEQ  RXFRAG CAPS ACAPS ERP    STATE     MODE
00:15:f2:xx:xx:xx    1   11  36M   84  -11     0     23      11   3187       0 EPs      4    3   Normal RSN WME</code></pre></div><p>As you can see though I set hwmode to &quot;11g&quot;, b43 still shows &quot;802.11bg&quot;.</p><p>If I enable power saving mode on the USB dongle, I can see from RaUI (Ralink User Interface) that sometimes TX traffic drops to zero when the connection just established. I have to reconnect several times to get the TX traffic. If there&#039;s continuing TX traffic, the wireless connection becomes nearly stable.</p><p>Though DD-WRT wiki suggest 11g mode only, I found it not necessary. You can remove the option hwmode 11g from the wireless configuration.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122405">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">vplessky</div>
					<div class="post-datetime">
						2 Dec 2010, 08:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>fyi wrote:</cite><blockquote><p>...<br />If I enable power saving mode on the USB dongle, I can see from RaUI (Ralink User Interface) that sometimes TX traffic drops to zero when the connection just established. I have to reconnect several times to get the TX traffic. If there&#039;s continuing TX traffic, the wireless connection becomes nearly stable.</p></blockquote></div><p>I experience same kind of behavior with Ralink RT2500 11g mini-PCI adapter (built-in on my MSI S271 notebook)<br />That&#039;s why I bought couple of USB Wi-Fi sticks, with Atheros chipset.<br />Those are working perfectly with TP-Link routers (Atheros) or old ASUS WL-500G Premium v1 (Broadcom)<br />Connection is stable, and quality and strength of signal is superior comparing to Ralink.</p><p>This <a href="http://vplessky.blogspot.com/2010/11/wa801nd-repeater-to-openwrt-scan.html">screenshot</a> illustrates signal strength you can get.</p><p><a href="http://vplessky.blogspot.com/2010/11/wa801nd-repeater-to-openwrt-scan.html"><span class="postimg"><img src="http://farm2.static.flickr.com/1390/5155391534_84b5cddd9c_z_d.jpg" alt="http://farm2.static.flickr.com/1390/5155391534_84b5cddd9c_z_d.jpg" /></span></a></p><p>Two &#039;OWrt&#039; SSIDs are WR841ND (OpenWrt 10.03.1-RC3) and WA801ND in Repeater mode (factory firmware)<br />&#039;WR1043ND&#039; SSID is TP-Link WR1043ND router, running with factory firmware.</p><p>&#039;dlink&#039;, &#039;homenet&#039;, &#039;pantherx&#039;, &#039;ZXDSL***&#039; are networks from neighbors.</p><p>Top screen (RaUI) is doing scanning using Ralink Rt2500 built-in adapter.<br />Screen below is scanning using TP-Link Atheros-based Wi-Fi USB stick.<br />Operating system for host is Windows XP.</p><p>As you can see, TP-Link (Atheros) adapter can find more networks, comparing to Ralink.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122407">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">vplessky</div>
					<div class="post-datetime">
						2 Dec 2010, 08:44					</div>
				</div>
				<div class="post-content content">
					<p>Hello <strong>fyi</strong>,</p><p>I&#039;d like to ask you question about this part of your setup.</p><div class="quotebox"><cite>fyi wrote:</cite><blockquote><p>root@OpenWrt:~# uname -a<br />Linux OpenWrt 2.6.26.8 #1 Mon Sep 6 14:11:14 EDT 2010 mips unknown</p><p>root@OpenWrt:~# cat /etc/config/network</p><p>config &#039;interface&#039; &#039;loopback&#039;<br />&nbsp; &nbsp; option &#039;ifname&#039; &#039;lo&#039;<br />&nbsp; &nbsp; option &#039;proto&#039; &#039;static&#039;<br />&nbsp; &nbsp; option &#039;ipaddr&#039; &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; option &#039;netmask&#039; &#039;255.0.0.0&#039;</p><p>config &#039;interface&#039; &#039;lan&#039;<br />&nbsp; &nbsp; option &#039;ifname&#039; &#039;eth0.0 eth0.1&#039;<br />&nbsp; &nbsp; option &#039;type&#039; &#039;bridge&#039;<br />&nbsp; &nbsp; option &#039;proto&#039; &#039;static&#039;<br />&nbsp; &nbsp; option &#039;ipaddr&#039; &#039;192.168.1.254&#039;<br />&nbsp; &nbsp; option &#039;netmask&#039; &#039;255.255.255.0&#039;<br />&nbsp; &nbsp; option &#039;stp&#039; &#039;1&#039;</p><p>config &#039;interface&#039; &#039;wan&#039;<br />&nbsp; &nbsp; option &#039;ifname&#039; &#039;br-lan&#039;<br />&nbsp; &nbsp; option &#039;proto&#039; &#039;pppoe&#039;<br />&nbsp; &nbsp; option &#039;username&#039; &#039;xxxxxxxx@domain.com&#039;<br />&nbsp; &nbsp; option &#039;password&#039; &#039;xxxxxxxx&#039;<br />&nbsp; &nbsp; option &#039;keepalive&#039; &#039;3 5&#039;<br />&nbsp; &nbsp; option &#039;mtu&#039; &#039;1492&#039;</p></blockquote></div><p>I have opened thread <a href="https://forum.openwrt.org/viewtopic.php?id=27524">Recommended MTU size for PPPoE connection; PPPoE setup for OpenWrt</a> but there are no answers on it.</p><p>You defined<br />&nbsp; &nbsp;option &#039;mtu&#039; &#039;1492&#039;<br />Is PPPoE connection works fine for you?</p><p>I can connect to my provider using:<br />- TP-Link WR1043ND (kernel 2.6.15) with factory firmware<br />- ASUS WL-500G Premium with DD-Wrt v24 sp2 (10/10/09)</p><p>If I try to connect to provider using WR841ND (With Gargoyle 1.3.8), connection is established.<br />I can ping <a href="http://www.google.com">www.google.com</a>, and open that site.<br />I can ping other sites, but sometimes pings are lost.</p><p>And I can&#039;t open many other sites in web browser. Connection is timeout.<br />Eric&nbsp; recommended to specify for WAN port<br />&nbsp; option &#039;mtu&#039; &#039;1500&#039;</p><p>It&#039;s interesting that I get correct MTU size for eth1 (WAN interface) - 1500<br />And MTU size is 1492 for PPPoE</p><div class="codebox"><pre><code>root@Gargoyle:~# ifconfig
br-lan    Link encap:Ethernet  HWaddr D8:5D:4C:BF:25:B4  
          inet addr:10.10.10.1  Bcast:10.10.10.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:506 errors:0 dropped:0 overruns:0 frame:0
          TX packets:83 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:76473 (74.6 KiB)  TX bytes:34109 (33.3 KiB)

eth0      Link encap:Ethernet  HWaddr D8:5D:4C:BF:25:B4  
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:507 errors:0 dropped:0 overruns:0 frame:0
          TX packets:84 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:83969 (82.0 KiB)  TX bytes:35152 (34.3 KiB)
          Interrupt:5 

eth1      Link encap:Ethernet  HWaddr 00:23:54:62:E0:B6  
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:705 errors:0 dropped:0 overruns:0 frame:0
          TX packets:131 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:80516 (78.6 KiB)  TX bytes:19049 (18.6 KiB)
          Interrupt:4 

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:8 errors:0 dropped:0 overruns:0 frame:0
          TX packets:8 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:1337 (1.3 KiB)  TX bytes:1337 (1.3 KiB)

pppoe-wan Link encap:Point-to-Point Protocol  
          inet addr:95.220.103.200  P-t-P:212.1.254.106  Mask:255.255.255.255
          UP POINTOPOINT RUNNING NOARP MULTICAST  MTU:1492  Metric:1
          RX packets:50 errors:0 dropped:0 overruns:0 frame:0
          TX packets:99 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:3 
          RX bytes:10218 (9.9 KiB)  TX bytes:15809 (15.4 KiB)

root@Gargoyle:~# cat /etc/config/network

config &#039;interface&#039; &#039;loopback&#039;
        option &#039;ifname&#039; &#039;lo&#039;
        option &#039;proto&#039; &#039;static&#039;
        option &#039;ipaddr&#039; &#039;127.0.0.1&#039;
        option &#039;netmask&#039; &#039;255.0.0.0&#039;

config &#039;interface&#039; &#039;lan&#039;
        option &#039;ifname&#039; &#039;eth0&#039;
        option &#039;type&#039; &#039;bridge&#039;
        option &#039;proto&#039; &#039;static&#039;
        option &#039;netmask&#039; &#039;255.255.255.0&#039;
        option &#039;ipaddr&#039; &#039;10.10.10.1&#039;
        option &#039;dns&#039; &#039;212.1.230.111&#039;

config &#039;interface&#039; &#039;wan&#039;
        option &#039;ifname&#039; &#039;eth1&#039;
        option &#039;macaddr&#039; &#039;00:23:54:62:e0:b6&#039;
        option &#039;dns&#039; &#039;212.1.230.111&#039;
        option &#039;proto&#039; &#039;pppoe&#039;
        option &#039;username&#039; &#039;myusername&#039;
        option &#039;password&#039; &#039;mypassword&#039;
        option &#039;keepalive&#039; &#039;3 5&#039;
        option &#039;peerdns&#039; &#039;1&#039;
        option &#039;mtu&#039; &#039;1500&#039;

config &#039;switch&#039; &#039;eth0&#039;
        option &#039;enable_vlan&#039; &#039;1&#039;

config &#039;switch_vlan&#039;
        option &#039;device&#039; &#039;eth0&#039;
        option &#039;vlan&#039; &#039;1&#039;
        option &#039;ports&#039; &#039;0 1 2 3 4&#039;</code></pre></div><p>This allowed my to open say <a href="http://www.gargoyle-router.com">www.gargoyle-router.com</a> in web browser<br />(it was not working before)<br />But many sites are still timeout.<br />And Torrent is not working - despited UPnP is enabled, and Bittorrent client confirms that port is opened.<br />Upload speed in 5KB/sec. to 30KB/sec. range, same as with closed port. I have 15Mbit (~1.3MB/sec. in Torrent) Internet connection to provider.</p><p>After some googling, I came to conclusion that this problem is kind of <a href="http://www.google.ru/search?q=black+hole+router&amp;ie=utf-8&amp;oe=utf-8">&quot;black hole router&quot;</a><br />Some <a href="http://support.microsoft.com/kb/314825">workarounds for Windows</a> are described for Windows XP.<br />Information is aged (July 7, 2005), but still can be useful.<br />But have not found solution or correct setup for OpenWrt so far.<br />I think <a href="http://www.gargoyle-router.com/phpbb/viewtopic.php?f=6&amp;t=958">this thread</a> can be related to this problem.</p><p>Any help would be appreciated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122411">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						2 Dec 2010, 10:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>vplessky wrote:</cite><blockquote><p>You defined<br />&nbsp; &nbsp;option &#039;mtu&#039; &#039;1492&#039;<br />Is PPPoE connection works fine for you?</p></blockquote></div><p>Yes</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122460">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">groovy</div>
					<div class="post-datetime">
						2 Dec 2010, 20:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>fyi wrote:</cite><blockquote><div class="quotebox"><cite>vplessky wrote:</cite><blockquote><p>You defined<br />&nbsp; &nbsp;option &#039;mtu&#039; &#039;1492&#039;<br />Is PPPoE connection works fine for you?</p></blockquote></div><p>Yes</p></blockquote></div><p>works for me too.</p><p>I have another question. I get this when restarting network on the AP:</p><div class="codebox"><pre><code>root@LinkSys:~# /etc/init.d/network restart
vconfig: invalid number &#039;sta&#039;
Configuration file: /var/run/hostapd-phy0.conf</code></pre></div><p>and in /var/run/hostapd-phy0.conf the only line containing &#039;sta&#039; is:</p><div class="codebox"><pre><code>wds_sta=1</code></pre></div><p>So, is there anything wrong with this? I did never edit this config file, i only made my configurations in /etc/config/wireless.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122483">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						2 Dec 2010, 22:52					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>groovy wrote:</cite><blockquote><p>I have another question. I get this when restarting network on the AP:</p><div class="codebox"><pre><code>root@LinkSys:~# /etc/init.d/network restart
vconfig: invalid number &#039;sta&#039;</code></pre></div></blockquote></div><p>Most likely you have something like<br /></p><div class="codebox"><pre><code>option ifname &quot;wlan0 wlan0.sta0&quot;</code></pre></div><p>in your network config. It should not be there.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122516">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">groovy</div>
					<div class="post-datetime">
						3 Dec 2010, 08:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jow wrote:</cite><blockquote><p>Most likely you have something like<br /></p><div class="codebox"><pre><code>option ifname &quot;wlan0 wlan0.sta0&quot;</code></pre></div><p>in your network config. It should not be there.</p></blockquote></div><p>You are right, referring to <a href="https://forum.openwrt.org/viewtopic.php?pid=122047#p122047">this post</a> i added these ifnames.<br />Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122524">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						3 Dec 2010, 09:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>groovy wrote:</cite><blockquote><div class="quotebox"><cite>jow wrote:</cite><blockquote><p>Most likely you have something like<br /></p><div class="codebox"><pre><code>option ifname &quot;wlan0 wlan0.sta0&quot;</code></pre></div><p>in your network config. It should not be there.</p></blockquote></div><p>You are right, referring to <a href="https://forum.openwrt.org/viewtopic.php?pid=122047#p122047">this post</a> i added these ifnames.<br />Thanks.</p></blockquote></div><p>I also did that but generated weird result so I removed it. Brctl show looks fine. One cosmetic behavior is that since it&#039;s a repeater, the ap comes up only when the sta connects to the peer ap. This is sometimes very inconvenient. Even BrainSlayer won&#039;t fix it.</p><p><a href="http://svn.dd-wrt.com:8000/dd-wrt/ticket/193">#193 (FONERA RC-2 Repeater Mode --&gt; VAP Only Shows Up when Client-Mode Connects...) - DD-WRT - Trac</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122544">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">groovy</div>
					<div class="post-datetime">
						3 Dec 2010, 18:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>fyi wrote:</cite><blockquote><p>I managed to create a working 802.11bg wds network.</p></blockquote></div><p>You made my day <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>Though this is completely different as suggested in the HowTo, it seems to work.<br />So actually it is like this:</p><p>AP has two wifi-iface sections. The &#039;normal&#039; AP section and a second STA section only for the WDS-link.<br />STA has only one wifi-iface section as AP for the WDS-link. </p><br /><p>Thanks again and have a nice weekend!</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=27387&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>