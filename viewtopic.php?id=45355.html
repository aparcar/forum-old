<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Increase free space / Not enough space on device</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 19 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p207617">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">enoon</div>
					<div class="post-datetime">
						20 Jul 2013, 11:36					</div>
				</div>
				<div class="post-content content">
					<p>I want to increase the free space on the router since I&#039;ve used up all the available 32mb of RAM.</p><p>My setup is a TL-1043ND with an external USB 3.0 HDD drive with a single partition mounted.</p><p>Is it possible when the router runs out of space in the memory to overflow to that mounted file on the external HDD? <br />Also how the overlay process can be achieved?</p><p># free<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;total&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;used&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;free&nbsp; &nbsp; &nbsp; &nbsp;shared&nbsp; &nbsp; &nbsp; buffers<br />Mem:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;29212&nbsp; &nbsp; &nbsp; &nbsp; 28236&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 976&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2000<br />-/+ buffers:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 26236&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2976<br />Swap:&nbsp; &nbsp; &nbsp; &nbsp;524284&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;6724&nbsp; &nbsp; &nbsp; &nbsp;517560</p><p># mount<br />rootfs on / type rootfs (rw)<br />/dev/root on /rom type squashfs (ro,relatime)<br />proc on /proc type proc (rw,noatime)<br />sysfs on /sys type sysfs (rw,noatime)<br />tmpfs on /tmp type tmpfs (rw,nosuid,nodev,noatime,size=14608k)<br />tmpfs on /dev type tmpfs (rw,noatime,size=512k,mode=755)<br />devpts on /dev/pts type devpts (rw,noatime,mode=600)<br />/dev/mtdblock3 on /overlay type jffs2 (rw,noatime)<br />overlayfs:/overlay on / type overlayfs (rw,relatime,lowerdir=/,upperdir=/overlay)<br />debugfs on /sys/kernel/debug type debugfs (rw,relatime)<br />/dev/sda1 on /mnt/media type ext3 (rw,relatime,user_xattr,barrier=1,nodelalloc,data=ordered)<br />none on /proc/bus/usb type usbfs (rw,relatime)</p><p># df -h<br />Filesystem&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Size&nbsp; &nbsp; &nbsp; Used Available Use% Mounted on<br />rootfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5.1M&nbsp; &nbsp; &nbsp; 4.8M&nbsp; &nbsp; 296.0K&nbsp; 94% /<br />/dev/root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2.0M&nbsp; &nbsp; &nbsp; 2.0M&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 100% /rom<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 14.3M&nbsp; &nbsp; &nbsp; 1.3M&nbsp; &nbsp; &nbsp;13.0M&nbsp; &nbsp;9% /tmp<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;512.0K&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; 512.0K&nbsp; &nbsp;0% /dev<br />/dev/mtdblock3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5.1M&nbsp; &nbsp; &nbsp; 4.8M&nbsp; &nbsp; 296.0K&nbsp; 94% /overlay<br />overlayfs:/overlay&nbsp; &nbsp; &nbsp; &nbsp; 5.1M&nbsp; &nbsp; &nbsp; 4.8M&nbsp; &nbsp; 296.0K&nbsp; 94% /<br />/dev/sda1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1.8T&nbsp; &nbsp; &nbsp;83.0G&nbsp; &nbsp; &nbsp; 1.6T&nbsp; &nbsp;5% /mnt/media</p><p>Thanks in advance for your support!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p207630">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						20 Jul 2013, 16:18					</div>
				</div>
				<div class="post-content content">
					<p>You are searching for</p><p>1) swap -&gt; <a href="http://wiki.openwrt.org/doc/uci/fstab?s">http://wiki.openwrt.org/doc/uci/fstab?s</a>[]=swap#adding.swap.partitions</p><p>2) extroot -&gt; <a href="http://wiki.openwrt.org/doc/howto/extroot">http://wiki.openwrt.org/doc/howto/extroot</a></p><p>Be aware that swap will be extremely slow with USB storage attached.<br />RAM can only be substituted with more RAM ;-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p207639">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">enoon</div>
					<div class="post-datetime">
						20 Jul 2013, 20:43					</div>
				</div>
				<div class="post-content content">
					<p>So, I successfully managed to mess up as follos:</p><p>The overlay is now on the external hdd, which is mounted automatically at startup.<br />I would have like it to have a separate partition, but that&#039;s it. Also I have no idea how to go back to the previous state (in memory root) so I had to reinstall/configure evrything.</p><p>I left with two open things:</p><p>1) minidlna shows only audio files, and one image and no video at all.<br />Seems like a problem I had in the past but back then the drive was NTFS.</p><p>2) installed transmission when opened up in the browser (web interface) it only shows (<a href="http://192.168.1.1/transmission/">http://192.168.1.1/transmission/</a>):<br />No such file or directory </p><p>my transmission configuration:<br />config transmission<br />&nbsp; &nbsp; &nbsp; &nbsp; option alt_speed_enabled &#039;false&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option bind_address_ipv4 &#039;0.0.0.0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option bind_address_ipv6 &#039;::&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option blocklist_enabled &#039;false&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option cache_size_mb &#039;2&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option dht_enabled &#039;true&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option download_queue_enabled &#039;true&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option download_queue_size &#039;4&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option idle_seeding_limit_enabled &#039;false&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option lazy_bitfield_enabled &#039;true&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option lpd_enabled &#039;false&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option message_level &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option peer_limit_global &#039;240&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option peer_limit_per_torrent &#039;60&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option peer_port &#039;51413&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option peer_port_random_on_start &#039;false&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option peer_socket_tos &#039;default&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option pex_enabled &#039;true&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option port_forwarding_enabled &#039;true&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option preallocation &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option queue_stalled_enabled &#039;true&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option queue_stalled_minutes &#039;30&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ratio_limit_enabled &#039;false&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option rpc_authentication_required &#039;false&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option rpc_bind_address &#039;0.0.0.0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option rpc_enabled &#039;true&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option rpc_port &#039;9091&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option rpc_url &#039;/transmission/&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option rpc_whitelist_enabled &#039;true&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option scrape_paused_torrents_enabled &#039;true&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option script_torrent_done_enabled &#039;false&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option seed_queue_enabled &#039;false&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option speed_limit_down_enabled &#039;false&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option speed_limit_up_enabled &#039;false&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option start_added_torrents &#039;true&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option trash_original_torrent_files &#039;false&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option umask &#039;18&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option upload_slots_per_torrent &#039;14&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option utp_enabled &#039;true&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option scrape_paused_torrents &#039;true&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option watch_dir_enabled &#039;false&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option enabled &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option download_dir &#039;/media/Download&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option rename_partial_files &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option config_dir &#039;/etc/config/transmission&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option incomplete_dir_enabled &#039;false&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option rpc_whitelist &#039;127.0.0.1,192.168.1.*,192.168.1.100&#039;</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>