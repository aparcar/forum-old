<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> 4G / LTE USB Modem Setup (Huawei E3276 &amp; R215/E5372)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 7 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p313423">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Dan9550</div>
					<div class="post-datetime">
						3 Mar 2016, 11:06					</div>
				</div>
				<div class="post-content content">
					<p>So i have a TP-Link router with OpenWRT installed (of course) and i have been trying to get these particular 3G dongles to work however after hours of scouring Google and the OpenWRT wiki i haven&#039;t had much luck. The documentation i have found is either incredibly confusing or ill relevant to my hardware.</p><p>So far i have had the E3276 detected by OpenWRT but have not been able to have it connect to the network, the R215 i have not been able to communicate with at all.</p><p>I am very confused with the different communication modes QMI RDIS NCM there was something else i read about.</p><p>Any tips anyone? please??</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313658">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">skfree</div>
					<div class="post-datetime">
						4 Mar 2016, 22:34					</div>
				</div>
				<div class="post-content content">
					<p>Please check following...and use google translate to understand. commands are same <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p><a href="http://eko.one.pl/?p=openwrt-3g">http://eko.one.pl/?p=openwrt-3g</a></p><p><a href="http://eko.one.pl/forum/viewtopic.php?id=7236">http://eko.one.pl/forum/viewtopic.php?id=7236</a></p><p>Generally, when configuring new USB 3G/4G dongle, i start with Linux and check, if Linux works. Recommended is to disable PIN if possible. When linux is working, then SIM+DONGLE is OK and you can proceed on openwrt part.</p><p>Each mode has some plus/minus, so you can read A LOT about each...</p><p>Bye</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315668">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">tristanc</div>
					<div class="post-datetime">
						19 Mar 2016, 13:28					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m also trying to get some clarity on the best way to use these dongles. I agree the info out there is confusing or incorrect or even contradictory. I&#039;ve sent an email to devel@ and contacted some of the contributors - hopefully they&#039;ll provide some guidance and I&#039;ll post back here and update the wiki with the currently accepted way of getting these dongles operational.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315729">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">StratoSnn</div>
					<div class="post-datetime">
						19 Mar 2016, 19:55					</div>
				</div>
				<div class="post-content content">
					<p>I have successfully installed E3276 on several routers.<br />Dongle works very well when used in &#039;ncm&#039; mode (use ncm protocol in interface settings). To install it, look for kernel modules containing &#039;huawei&#039; in the name.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315807">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">tristanc</div>
					<div class="post-datetime">
						20 Mar 2016, 11:16					</div>
				</div>
				<div class="post-content content">
					<p>Yep - I&#039;ve had one running for over a year on a remote router. However, there are niggles. Some of the posts to the devel list indicate the NCM protocol is provided by a couple of packages (ie wwan I think) and that if that is used configuration through Luci should be possible. An extension of this is that signal strength information etc should also be available.</p><p>Key for me is this last part - getting signal strength info and perhaps operational mode (LTE / 3G etc) in an easy to use form. Yes, I can issue the AT command but sometimes that doesn&#039;t work or even something like &quot;comgt sig -d /dev/ttyUSB0&quot; or &quot;comgt sig -d /dev/cdc-wdm0&quot;.</p><p>[As an aside, I need something that returns signal strength so I can power cycle the dongle when it &#039;jumps&#039; to a further away cell tower giving a worse connection. Power cycling of the USB is achieved using a YKUSH board. I could monitor pings and do a power cycle when they are &gt; a set value, but this seems a bit of a dangerous way of doing things. My test setup performs a cycle via a cron job every 24 hours - so the longest the remote location will have super-slow access is 24 hrs.]</p><p>But I still think it would be useful to have the process and capabilities documented on the wiki.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315817">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">tristanc</div>
					<div class="post-datetime">
						20 Mar 2016, 13:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>tristanc wrote:</cite><blockquote><p>I need something that returns signal strength so I can power cycle the dongle when it &#039;jumps&#039; to a further away cell tower giving a worse connection.</p></blockquote></div><p>It seems something changed between my old trunk build (r44497) and the CC 15.05 release (r49007). Issuing</p><p>comgt -d /dev/cdc-wdm0 -s /etc/gcom/getstrength.gcom </p><p>on both systems gives no response on r44497 and +CSQ: 9,99 with r49007. Hopefully this behaviour isn&#039;t a one-off or quirk of current set-up.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316888">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">StratoSnn</div>
					<div class="post-datetime">
						26 Mar 2016, 23:49					</div>
				</div>
				<div class="post-content content">
					<p>There used to be unofficial NCM Luci plugin for BB that had all the info about mobile network state. It didn&#039;t make it to CC. Try to find it - may be it will work with minimal changes.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p317352">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">tristanc</div>
					<div class="post-datetime">
						30 Mar 2016, 12:11					</div>
				</div>
				<div class="post-content content">
					<p>Yeah - I&#039;ve tried patching CC luci with the patch available, except Luci has changed somewhat since it was written... I&#039;ve given up &amp; botched together a commandline alternative using the Luci Custom Commands app which sort of works some of the time.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370205">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">xon</div>
					<div class="post-datetime">
						29 Dec 2017, 20:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>tristanc wrote:</cite><blockquote><p>Yeah - I&#039;ve tried patching CC luci with the patch available, except Luci has changed somewhat since it was written... I&#039;ve given up &amp; botched together a commandline alternative using the Luci Custom Commands app which sort of works some of the time.</p></blockquote></div><p>I&#039;m looking to build something very similiar to what you did (remote router connected over LTE, power cycling modem on &quot;bad reception&quot; events) and I&#039;m looking at this particular LTE stick as a modem option. I&#039;d really like to see your command-line hackjob, if you would be so kind to share <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370429">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">tristanc</div>
					<div class="post-datetime">
						3 Jan 2018, 23:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>xon wrote:</cite><blockquote><p>I&#039;m looking to build something very similiar to what you did (remote router connected over LTE, power cycling modem on &quot;bad reception&quot; events) and I&#039;m looking at this particular LTE stick as a modem option. I&#039;d really like to see your command-line hackjob, if you would be so kind to share <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>A bit has changed since this post - I ended up using a HiLink dongle, so behind double NAT. I VPN out to get a static IP and make it connect on boot and maintain that connection via OpenVPN’s config. I use a cron job to turn the dongle off (completely unpowered) for a minute or so each morning at 3am. The system gets reasonable ‘up’ time - 79days at last check, but I have seen it get to 100. Our electricity goes off fairly regularly so it’s limited by that...</p><p>Anything clever / complex just didn’t work as support for the signal strength reporting / NCM / LTE doesn’t seem to coincide which is a shame.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370495">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">xon</div>
					<div class="post-datetime">
						5 Jan 2018, 13:39					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>tristanc wrote:</cite><blockquote><p>Anything clever / complex just didn’t work as support for the signal strength reporting / NCM / LTE doesn’t seem to coincide which is a shame.</p></blockquote></div><p>It really is. Was hoping for an elegant solution but looks like I&#039;ll be going for something like a script pinging Google&#039;s DNS to determine quality of reception then. I&#039;ve just gotten the dongle in the post so I&#039;ll start experimenting. I&#039;ll probably end up experimenting with a couple more modems before I&#039;m happy. This now is #2 after an interesting bout with a Samsung GT B3740, which has more than a few quirks but that I&#039;ll likely keep to toy around with.</p><p>Guess hostless would be my next step up as well.</p><p>If you still have it available, I&#039;d still like to see your script for reference, but either way many thanks for letting me know that this particular rabbit hole I need not go down.</p>											<p class="post-edited">(Last edited by <strong>xon</strong> on 5 Jan 2018, 13:39)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>