<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Atheros AR7100</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 30 Mar 2018 and 1 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 6 of 15</div><nav><ul><li><a href="viewtopic.php%3Fid=14765&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=14765&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=14765&amp;p=5.html">5</a></li><li class="pagination-current"><span>6</span></li><li><a href="viewtopic.php%3Fid=14765&amp;p=7.html">7</a></li><li><a href="viewtopic.php%3Fid=14765&amp;p=8.html">8</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=14765&amp;p=15.html">15</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p70206">
				<div class="post-metadata">
					<div class="post-num">Post #126</div>
					<div class="post-author">bitbucket</div>
					<div class="post-datetime">
						28 Jun 2008, 11:31					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>acoul wrote:</cite><blockquote><p>Bad news:<br />* no serial console (yet)</p></blockquote></div><p>If using kernel 2.6.22.14, for which there is patch mt mikrotik, serial console works.</p><div class="quotebox"><cite>acoul wrote:</cite><blockquote><p>* network dies on ping with large packet size<br /></p><div class="codebox"><pre><code>ping -s 65507 192.168.1.1</code></pre></div></blockquote></div><p>I&#039;ll try to investigate, where problem is.</p><p>upd, fix:<br />ag7100.c:<br />-#define AG7100_TX_REAP_THRESH&nbsp; &nbsp; &nbsp; &nbsp; AG7100_TX_DESC_CNT/2<br />+#define AG7100_TX_REAP_THRESH&nbsp; &nbsp; &nbsp; &nbsp; (AG7100_TX_DESC_CNT-AG7100_TX_DESC_CNT/4)</p>											<p class="post-edited">(Last edited by <strong>bitbucket</strong> on 28 Jun 2008, 13:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70215">
				<div class="post-metadata">
					<div class="post-num">Post #127</div>
					<div class="post-author">BrainSlayer</div>
					<div class="post-datetime">
						28 Jun 2008, 18:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>bitbucket wrote:</cite><blockquote><div class="quotebox"><cite>BrainSlayer wrote:</cite><blockquote><p>its a hal one liner. the kernel is not affected in any way</p></blockquote></div><p>As always, atheros hide some special &#039;killer feature&#039; from us. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> We&#039;ll keep searching.</p><p>I think, that card can&#039;t transmit faster than it does when sending self looped TX descriptor with TXDONE IRQ event off. Also, adjusting some interframe timings (sifs, aifs, postbackoff) may boost performance, but not such much. </p><div class="quotebox"><cite>BrainSlayer wrote:</cite><blockquote><p>i compared routeros speed with my solution and mine was faster. about 60 mbit TCP in 802.11a turbo mode was possible without any issues. (usually some more with some tricks)</p></blockquote></div><p>At which platform ? ag7130 @ 300MHz with build in CPU ethernet IC ? <br />Because it is possible get 60Mbit in one way at 36Mbit trubo rate without compression. But I used faster cpu (x86).</p></blockquote></div><p>yes. ag7130 with 300 mhz (ubiquiti litestation x) and kendin phy connected to it. at x86 i get a higher rate. my record with fast framing enabled was much over 70 mbit. (i have no exact value in front of me yet, the test was some months ago)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70220">
				<div class="post-metadata">
					<div class="post-num">Post #128</div>
					<div class="post-author">bitbucket</div>
					<div class="post-datetime">
						28 Jun 2008, 20:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>BrainSlayer wrote:</cite><blockquote><p>yes. ag7130 with 300 mhz (ubiquiti litestation x) and kendin phy connected to it. at x86 i get a higher rate. my record with fast framing enabled was much over 70 mbit. (i have no exact value in front of me yet, the test was some months ago)</p></blockquote></div><p>Sounds very promising for rb411. Next target is to find, where to hack the ath5k driver. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70243">
				<div class="post-metadata">
					<div class="post-num">Post #129</div>
					<div class="post-author">acoul</div>
					<div class="post-datetime">
						30 Jun 2008, 00:58					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://wifi.ozo.com/airo/mirror/ar7100/alex/">update</a>.</p><p>* ethernet works rock solid (bitbucket fix)<br />* mtd/nand/yaffs code included. mounts partitions but does not read MikroTik data<br />* serial code included but still hardware not recognized</p><p>bitbacket Mikrotik 2.6.22.14 patched kernel:<br /></p><div class="codebox"><pre><code>cat /proc/tty/driver/serial

0: uart:16550A mmio:0x00000000 irq:19 tx:732 rx:52 RTS|DTR|DSR|CD
1: uart:unknown port:00000000 irq:0
2: uart:unknown port:00000000 irq:0
3: uart:unknown port:00000000 irq:0</code></pre></div><p>openwrt 2.6.23.17 Mikrotik ported patched kernel:<br /></p><div class="codebox"><pre><code>cat /proc/tty/driver/serial

0: uart:unknown mmio:0x00000000 irq:19
1: uart:unknown port:00000000 irq:0
2: uart:unknown port:00000000 irq:0
3: uart:unknown port:00000000 irq:0</code></pre></div><p>here is the diff of the dmesg from the two kernels above:<br /></p><div class="codebox"><pre><code>&lt; Linux version 2.6.22.14 (root@atlas) (gcc version 4.1.1) #119 Fri Jun 13 13:20:39 MSD 2008
---
&gt; Linux version 2.6.23.17 (alex@extreme) (gcc version 4.2.4) #1 Sun Jun 29 19:33:05 EEST 2008
8,12c8,12
&lt;   DMA zone: 64 pages used for memmap
&lt;   DMA zone: 0 pages reserved
&lt;   DMA zone: 8128 pages, LIFO batch:0
&lt;   Normal zone: 0 pages used for memmap
&lt; Built 1 zonelists.  Total pages: 8128
---
&gt;   Normal zone: 64 pages used for memmap
&gt;   Normal zone: 0 pages reserved
&gt;   Normal zone: 8128 pages, LIFO batch:0
&gt;   Movable zone: 0 pages used for memmap
&gt; Built 1 zonelists in Zone order.  Total pages: 8128
23a24
&gt; console [ttyS0] enabled
26,27c27,28
&lt; Memory: 27580k/32768k available (1930k kernel code, 5188k reserved, 301k data, 1540k init, 0k highmem)
&lt; Calibrating delay loop... 198.65 BogoMIPS (lpj=99328)
---
&gt; Memory: 28140k/32768k available (2070k kernel code, 4628k reserved, 321k data, 804k init, 0k highmem)
&gt; Calibrating delay loop... 199.47 BogoMIPS (lpj=997376)
39c40,43
&lt; yaffs Jun  4 2008 16:41:00 Installing.
---
&gt; squashfs: version 3.0 (2006/03/15) Phillip Lougher
&gt; Registering mini_fo version $Id$
&gt; JFFS2 version 2.2. (NAND) (SUMMARY)  Î’Â© 2001-2006 Red Hat, Inc.
&gt; yaffs Jun 29 2008 19:32:12 Installing.
41c45
&lt; io scheduler anticipatory registered (default)
---
&gt; io scheduler deadline registered (default)
43,45c47,49
&lt; serial8250: ttyS0 at MMIO 0x0 (irq = 19) is a 16550A
&lt; RAMDISK driver initialized: 16 RAM disks of 8192K size 1024 blocksize
&lt; loop: module loaded
---
&gt; ICPlus IP175C: Registered new driver
&gt; Infineon ADM6996: Registered new driver
&gt; Marvell 88E6060: Registered new driver
52,53d55
&lt; tun: Universal TUN/TAP device driver, 1.6
&lt; tun: (C) 1999-2004 Max Krasnyansky &lt;maxk@qualcomm.com&gt;
63c65
&lt; TCP cubic registered
---
&gt; TCP vegas registered</code></pre></div>											<p class="post-edited">(Last edited by <strong>acoul</strong> on 30 Jun 2008, 01:09)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70263">
				<div class="post-metadata">
					<div class="post-num">Post #130</div>
					<div class="post-author">acoul</div>
					<div class="post-datetime">
						30 Jun 2008, 17:27					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://wifi.ozo.com/airo/mirror/ar7100/alex/">update</a>.</p><p>* mtd/nand/yaffs &amp; serial console work fine thanks to Gabor Juhos fixes.</p><p>you may find images and packages here:<br /><a href="http://wifi.ozo.com/airo/openwrt/firmware/kamikaze/2.6/ar7100/11610/">ar7100 images</a> &amp;&nbsp; <a href="http://wifi.ozo.com/airo/openwrt/packages/ar7100/">ar7100 extra packages</a></p>											<p class="post-edited">(Last edited by <strong>acoul</strong> on 1 Jul 2008, 20:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70305">
				<div class="post-metadata">
					<div class="post-num">Post #131</div>
					<div class="post-author">lorenzo.allegrucci</div>
					<div class="post-datetime">
						1 Jul 2008, 18:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>acoul wrote:</cite><blockquote><p><a href="http://wifi.ozo.com/airo/mirror/ar7100/alex/">update</a>.</p><p>* mtd/nand/yaffs &amp; serial console work fine thanks to Gabor Juhos fixes.</p><p>you may find images and packages here:<br /><a href="http://10.2.19.1/airo/openwrt/firmware/kamikaze/2.6/ar7100/11610/">ar7100 images</a> &amp;&nbsp; <a href="http://10.2.19.1/airo/openwrt/packages/ar7100/">ar7100 extra packages</a></p></blockquote></div><p>Hi, I&#039;ve just compiled a kernel but it hangs on ethernet boot at &quot;jumping to kernel code&quot;.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70313">
				<div class="post-metadata">
					<div class="post-num">Post #132</div>
					<div class="post-author">acoul</div>
					<div class="post-datetime">
						1 Jul 2008, 20:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>lorenzo.allegrucci wrote:</cite><blockquote><div class="quotebox"><cite>acoul wrote:</cite><blockquote><p><a href="http://wifi.ozo.com/airo/mirror/ar7100/alex/">update</a>.</p><p>* mtd/nand/yaffs &amp; serial console work fine thanks to Gabor Juhos fixes.</p><p>you may find images and packages here:<br /><a href="http://wifi.ozo.com/airo/openwrt/firmware/kamikaze/2.6/ar7100/11610/">ar7100 images</a> &amp;&nbsp; <a href="http://wifi.ozo.com/airo/openwrt/packages/ar7100/">ar7100 extra packages</a></p></blockquote></div><p>Hi, I&#039;ve just compiled a kernel but it hangs on ethernet boot at &quot;jumping to kernel code&quot;.</p></blockquote></div><p>did you try a netboot?&nbsp; what size had the kernel you tried to boot?</p>											<p class="post-edited">(Last edited by <strong>acoul</strong> on 1 Jul 2008, 20:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70315">
				<div class="post-metadata">
					<div class="post-num">Post #133</div>
					<div class="post-author">lorenzo.allegrucci</div>
					<div class="post-datetime">
						1 Jul 2008, 20:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>acoul wrote:</cite><blockquote><div class="quotebox"><cite>lorenzo.allegrucci wrote:</cite><blockquote><div class="quotebox"><cite>acoul wrote:</cite><blockquote><p><a href="http://wifi.ozo.com/airo/mirror/ar7100/alex/">update</a>.</p><p>* mtd/nand/yaffs &amp; serial console work fine thanks to Gabor Juhos fixes.</p><p>you may find images and packages here:<br /><a href="http://10.2.19.1/airo/openwrt/firmware/kamikaze/2.6/ar7100/11610/">ar7100 images</a> &amp;&nbsp; <a href="http://10.2.19.1/airo/openwrt/packages/ar7100/">ar7100 extra packages</a></p></blockquote></div><p>Hi, I&#039;ve just compiled a kernel but it hangs on ethernet boot at &quot;jumping to kernel code&quot;.</p></blockquote></div><p>did you try a netboot?&nbsp; what size had the kernel you tried to boot?</p></blockquote></div><p>Yes I tried a netboot, the size of vmlinux.elf is 3494892.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70316">
				<div class="post-metadata">
					<div class="post-num">Post #134</div>
					<div class="post-author">acoul</div>
					<div class="post-datetime">
						1 Jul 2008, 20:49					</div>
				</div>
				<div class="post-content content">
					<p>can you try <a href="http://wifi.ozo.com/airo/openwrt/firmware/kamikaze/2.6/ar7100/11610/openwrt-ar7100-vmlinux.elf">this netboot kernel</a>?&nbsp; what hardware are you using?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70333">
				<div class="post-metadata">
					<div class="post-num">Post #135</div>
					<div class="post-author">qyx</div>
					<div class="post-datetime">
						2 Jul 2008, 01:14					</div>
				</div>
				<div class="post-content content">
					<p>acoul: serial console and mounting of mtd partitions works ok now (netbooting openwrt-ar7100-vmlinux.elf)</p><p>but there is still problem after flashing kernel and rootfs, it is unable to find rootfs on mtdblock1<br /></p><div class="codebox"><pre><code>...
VFS: Cannot open root device &quot;&lt;NULL&gt;&quot; or unknown-block(0,0)
Please append a correct &quot;root=&quot; boot option; here are the available partitions:
1f00       3840 mtdblock0 (driver?)
1f01      61440 mtdblock1 (driver?)
1f02        256 mtdblock2 (driver?)
Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0)</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70337">
				<div class="post-metadata">
					<div class="post-num">Post #136</div>
					<div class="post-author">mtvlv</div>
					<div class="post-datetime">
						2 Jul 2008, 04:20					</div>
				</div>
				<div class="post-content content">
					<p>Test in RB450. Compile acoul target/linux/ar7100 in trunk r11571<br />Boot and serial OK.<br />But the ethernet do not work.<br /></p><div class="codebox"><pre><code>jumping to kernel code
Linux version 2.6.23.17 (marcos@nwmt) (gcc version 4.1.2) #1 Tue Jul 1 09:49:13 BRT 2008
CPU revision is: 00019374
Determined physical RAM map:
User-defined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Built 1 zonelists in Zone order.  Total pages: 8128
Kernel command line: console=ttyS0,115200 gpio=4031 mem=32M kmac=00:0C:42:2E:86:45 board=450 boot=1
Primary instruction cache 64kB, physically tagged, 4-way, linesize 32 bytes.
Primary data cache 32kB, 4-way, linesize 32 bytes.
Synthesized TLB refill handler (20 instructions).
Synthesized TLB load handler fastpath (32 instructions).
Synthesized TLB store handler fastpath (32 instructions).
Synthesized TLB modify handler fastpath (31 instructions).
Cache parity protection disabled
PID hash table entries: 128 (order: 7, 512 bytes)
Using 150.000 MHz high precision timer.
Console: colour dummy device 80x25
console [ttyS0] enabled
Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
Memory: 28092k/32768k available (2074k kernel code, 4676k reserved, 325k data, 844k init, 0k highmem)
Mount-cache hash table entries: 512
NET: Registered protocol family 16
Generic PHY: Registered new driver
NET: Registered protocol family 2
Time: MIPS clocksource has been installed.
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 1024 (order: 1, 8192 bytes)
TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
TCP: Hash tables configured (established 1024 bind 1024)
TCP reno registered
squashfs: version 3.0 (2006/03/15) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) (SUMMARY)  .. 2001-2006 Red Hat, Inc.
yaffs Jul  1 2008 09:38:09 Installing.
io scheduler noop registered
io scheduler deadline registered (default)
Serial: 8250/16550 driver $Revision: 1.90 $ 4 ports, IRQ sharing disabled
serial8250: ttyS0 at MMIO 0x0 (irq = 19) is a 16550A
serial8250.0: ttyS1 at I/O 0x3f8 (irq = 4) is a 16450
serial8250.0: ttyS2 at I/O 0x2f8 (irq = 3) is a 16450
serial8250.0: ttyS3 at I/O 0x3e8 (irq = 4) is a 16450
serial8250 serial8250.0: unable to register port at index 3 (IO2e8 MEM0 IRQ3): -28
ICPlus IP175C: Registered new driver
Infineon ADM6996: Registered new driver
Marvell 88E6060: Registered new driver
AG7100: Length per segment 1536
AG7100: Max segments per packet 2
AG7100: Max tx descriptor count    256
AG7100: Max rx descriptor count    128
AG7100: fifo cfg 3 008001ff
AG7100CHH: Mac address for unit 0 &#039;00:0c:42:2e:86:45&#039;
RB400 nand
NAND SPI clock 25000 kHz (AHB 150000 kHz / 6)
FLASH SPI clock 25000 kHz (AHB 150000 kHz / 6)
NAND device: Manufacturer ID: 0xad, Chip ID: 0x76 (Hynix NAND 64MiB 3,3V 8-bit)
Scanning device for bad blocks
Creating 3 MTD partitions on &quot;NAND 64MiB 3,3V 8-bit&quot;:
0x00040000-0x00400000 : &quot;RouterBoard NAND Boot&quot;
0x00400000-0x04000000 : &quot;RouterBoard NAND Main&quot;
0x00000000-0x00040000 : &quot;RouterBoard NAND Booter&quot;
TCP vegas registered
NET: Registered protocol family 1
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
Freeing unused kernel memory: 844k freed                                                                      
Algorithmics/MIPS FPU Emulator v1.5
ag7100_ring_alloc Allocated 3072 at 0x8107c000
ag7100_ring_alloc Allocated 1536 at 0x81098000
AG7100: cfg1 0xf cfg2 0x7014
ksz_phy: autonegotiation does not completed
AG7100: unit 0 phy is up...GMii 10Mbps full duplex
AG7100: pll reg 0x18050010: 0x991099  AG7100: cfg_1: 0x1ff0000
AG7100: cfg_2: 0x3ff
AG7100: cfg_3: 0x8001ff
AG7100: cfg_4: 0xffff
AG7100: cfg_5: 0x7ffef
AG7100: done cfg2 0x7115 ifctl 0x0 miictrl 0x0
Writing 4
[sighandler]: No more events to be processed, quitting.
[cleanup]: Waiting for children.
[cleanup]: All children terminated.
- preinit -                                                                                                   
ag7100_ring_free Freeing at 0x8107c000
ag7100_ring_free Freeing at 0x81098000
ag7100_ring_alloc Allocated 3072 at 0x8107c000
ag7100_ring_alloc Allocated 1536 at 0x81098000
AG7100: cfg1 0xf cfg2 0x7115
ksz_phy: autonegotiation does not completed
AG7100: unit 0 phy is up...GMii 10Mbps full duplex
AG7100: pll reg 0x18050010: 0x991099  AG7100: cfg_1: 0x1ff0000
AG7100: cfg_2: 0x3ff
AG7100: cfg_3: 0x8001ff
AG7100: cfg_4: 0xffff
AG7100: cfg_5: 0x7ffef
AG7100: done cfg2 0x7115 ifctl 0x0 miictrl 0x0
Writing 4</code></pre></div>											<p class="post-edited">(Last edited by <strong>mtvlv</strong> on 2 Jul 2008, 04:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70340">
				<div class="post-metadata">
					<div class="post-num">Post #137</div>
					<div class="post-author">acoul</div>
					<div class="post-datetime">
						2 Jul 2008, 09:02					</div>
				</div>
				<div class="post-content content">
					<p>@qyx: known problem. need to work on the image/Makefile to include the yaffs/mtdblock1 like in rb523 tree, work in progress.</p><p>@mtvlv: rb450 is little different from the rb411 I am working on.&nbsp; I think there is a via gigabit chip in it. can you confirm this?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70343">
				<div class="post-metadata">
					<div class="post-num">Post #138</div>
					<div class="post-author">lorenzo.allegrucci</div>
					<div class="post-datetime">
						2 Jul 2008, 09:20					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>acoul wrote:</cite><blockquote><p>can you try <a href="http://wifi.ozo.com/airo/openwrt/firmware/kamikaze/2.6/ar7100/11610/openwrt-ar7100-vmlinux.elf">this netboot kernel</a>?&nbsp; what hardware are you using?</p></blockquote></div><p>openwrt-ar7100-vmlinux.elf boots fine, I&#039;m using an RB411</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70362">
				<div class="post-metadata">
					<div class="post-num">Post #139</div>
					<div class="post-author">number6</div>
					<div class="post-datetime">
						2 Jul 2008, 17:30					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>acoul wrote:</cite><blockquote><p>@mtvlv: rb450 is little different from the rb411 I am working on.&nbsp; I think there is a via gigabit chip in it. can you confirm this?</p></blockquote></div><p>RB450 has an ICplus IP175C<br /><a href="http://www.icplus.com.tw/pp-IP175C.html">http://www.icplus.com.tw/pp-IP175C.html</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70363">
				<div class="post-metadata">
					<div class="post-num">Post #140</div>
					<div class="post-author">acoul</div>
					<div class="post-datetime">
						2 Jul 2008, 18:43					</div>
				</div>
				<div class="post-content content">
					<p>strange, ADM6996_PHY is compiled in the kernel and from the comments of this driver:<br /></p><div class="quotebox"><blockquote><p>Currently supports the IP175C PHY</p></blockquote></div><p>@mtvlv: can you use <a href="http://wifi.ozo.com/airo/openwrt/firmware/kamikaze/2.6/ar7100/11610/openwrt-ar7100-vmlinux.elf">this netboot image</a>?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70366">
				<div class="post-metadata">
					<div class="post-num">Post #141</div>
					<div class="post-author">number6</div>
					<div class="post-datetime">
						2 Jul 2008, 19:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>number6 wrote:</cite><blockquote><p>RB450 has an ICplus IP175C<br /><a href="http://www.icplus.com.tw/pp-IP175C.html">http://www.icplus.com.tw/pp-IP175C.html</a></p></blockquote></div><p>I&#039;ve been looking into this chip and it looks to be well documented with a full datasheet and app notes.&nbsp; As well, there is a PHY driver for it (added in 2.6.23).&nbsp; The kernel seems to recognize that there is an Ethernet port there, but looking at the driver code (icplus.c in kernel), only basic initialization is done.&nbsp; My guess is that we need to add some IOCTL support into the driver and to put together a user space config tool.&nbsp; I&#039;ll try to contact the author of the original icplus.c code to see if he has done any work in this area.</p>											<p class="post-edited">(Last edited by <strong>number6</strong> on 2 Jul 2008, 19:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70367">
				<div class="post-metadata">
					<div class="post-num">Post #142</div>
					<div class="post-author">mtvlv</div>
					<div class="post-datetime">
						2 Jul 2008, 20:03					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>@mtvlv: can you use <a href="http://wifi.ozo.com/airo/openwrt/firmware/kamikaze/2.6/ar7100/11610/openwrt-ar7100-vmlinux.elf">this netboot image</a>?</p></blockquote></div><p>Boot ok. Ethernet not. As say number6, only basic initialization is done<br /></p><div class="codebox"><pre><code>jumping to kernel code
Linux version 2.6.23.17 (alex@extreme) (gcc version 4.2.4) #2 Mon Jun 30 14:04:06 EEST 2008
CPU revision is: 00019374
...
NET: Registered protocol family 16
Generic PHY: Registered new driver
NET: Registered protocol family 2
Time: MIPS clocksource has been installed.
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
...
ICPlus IP175C: Registered new driver
Infineon ADM6996: Registered new driver
Marvell 88E6060: Registered new driver
AG7100: Length per segment 1536
AG7100: Max segments per packet 2
AG7100: Max tx descriptor count    256
AG7100: Max rx descriptor count    128
AG7100: fifo cfg 3 008001ff
AG7100CHH: Mac address for unit 0 &#039;00:0c:42:2e:86:45&#039;
...
ag7100_ring_alloc Allocated 3072 at 0x81239000
ag7100_ring_alloc Allocated 1536 at 0x8061c800
AG7100: cfg1 0xf cfg2 0x7014
ksz_phy: autonegotiation does not completed
AG7100: unit 0: phy not up carrier 1
Writing 4
[sighandler]: No more events to be processed, quitting.
[cleanup]: Waiting for children.
[cleanup]: All children terminated.
- preinit -

AG7100: unit 0 phy is up...GMii 10Mbps full duplex
AG7100: pll reg 0x18050010: 0x991099  AG7100: cfg_1: 0x1ff0000
AG7100: cfg_2: 0x3ff
AG7100: cfg_3: 0x8001ff
AG7100: cfg_4: 0xffff
AG7100: cfg_5: 0x7ffef
AG7100: done cfg2 0x7115 ifctl 0x0 miictrl 0x0
ag7100_ring_free Freeing at 0x81239000
ag7100_ring_free Freeing at 0x8061c800
ag7100_ring_alloc Allocated 3072 at 0x81239000
ag7100_ring_alloc Allocated 1536 at 0x8061c800
AG7100: cfg1 0xf cfg2 0x7115
ksz_phy: autonegotiation does not completed
Writing 4
ag7100_ring_free Freeing at 0x81239000
ag7100_ring_free Freeing at 0x8061c800
ag7100_ring_alloc Allocated 3072 at 0x81239000
ag7100_ring_alloc Allocated 1536 at 0x8061c800
AG7100: cfg1 0xf cfg2 0x7115
ksz_phy: autonegotiation does not completed
AG7100: unit 0 phy is up...GMii 10Mbps full duplex
AG7100: pll reg 0x18050010: 0x991099  AG7100: cfg_1: 0x1ff0000
AG7100: cfg_2: 0x3ff
AG7100: cfg_3: 0x8001ff
AG7100: cfg_4: 0xffff
AG7100: cfg_5: 0x7ffef
AG7100: done cfg2 0x7115 ifctl 0x0 miictrl 0x0
Writing 4</code></pre></div><p>When I disconnect the rj45 from eth0 port:<br /></p><div class="codebox"><pre><code>unit 0: phy not up carrier 1</code></pre></div><p>When I connect again:<br /></p><div class="codebox"><pre><code>AG7100: unit 0 phy is up...GMii 10Mbps full duplex
AG7100: pll reg 0x18050010: 0x991099  AG7100: cfg_1: 0x1ff0000
AG7100: cfg_2: 0x3ff
AG7100: cfg_3: 0x8001ff
AG7100: cfg_4: 0xffff
AG7100: cfg_5: 0x7ffef
AG7100: done cfg2 0x7115 ifctl 0x0 miictrl 0x0</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70383">
				<div class="post-metadata">
					<div class="post-num">Post #143</div>
					<div class="post-author">acoul</div>
					<div class="post-datetime">
						2 Jul 2008, 23:04					</div>
				</div>
				<div class="post-content content">
					<p>@mtvlv &amp; number6: you may give a try <a href="http://wifi.ozo.com/airo/openwrt/firmware/kamikaze/2.6/ar7100/test/">this netboot image</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70385">
				<div class="post-metadata">
					<div class="post-num">Post #144</div>
					<div class="post-author">number6</div>
					<div class="post-datetime">
						2 Jul 2008, 23:20					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>acoul wrote:</cite><blockquote><p>@mtvlv &amp; number6: you may give a try <a href="http://wifi.ozo.com/airo/openwrt/firmware/kamikaze/2.6/ar7100/test/">this netboot image</a></p></blockquote></div><p>The image boots fine but I am unable to send/receive traffic.&nbsp; I have one Ethernet cable connected to Eth1 (as labeled by Mikrotik, left-most RJ-45).&nbsp; The MAC address returned by &quot;ifconfig eth0&quot; matches that in the Mac swear below.&nbsp; Here are some of the startup swears:</p><p>ICPlus IP175C: Registered new driver&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Infineon ADM6996: Registered new driver&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Marvell 88E6060: Registered new driver&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />AG7100: Length per segment 1536&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />AG7100: Max segments per packet 2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />AG7100: Max tx descriptor count&nbsp; &nbsp; 256&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />AG7100: Max rx descriptor count&nbsp; &nbsp; 128&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />AG7100: fifo cfg 3 008001ff&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />AG7100CHH: Mac address for unit 0 &#039;00:0c:42:2e:9f:4f&#039; <br />..snip..<br />AG7100: unit 0 phy is up...GMii 10M<br />bps full duplex&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />AG7100: pll reg 0x18050010: 0x991099&nbsp; AG7100: cfg_1: 0x1ff0000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />AG7100: cfg_2: 0x3ff&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />AG7100: cfg_3: 0x8001ff&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />AG7100: cfg_4: 0xffff&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />AG7100: cfg_5: 0x7ffef&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />AG7100: done cfg2 0x7115 ifctl 0x0 miictrl 0x0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />ag7100_ring_free Freeing at 0x8039b000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />ag7100_ring_free Freeing at 0x8136a800&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />ag7100_ring_alloc Allocated 3072 at 0x8039b000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />ag7100_ring_alloc Allocated 1536 at 0x8136a800&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />AG7100: cfg1 0xf cfg2 0x7115&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />ksz_phy: autonegotiation does not completed&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Writing 4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />ag7100_ring_free Freeing at 0x8039b000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />ag7100_ring_free Freeing at 0x8136a800&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />ag7100_ring_alloc Allocated 3072 at 0x8039b000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />ag7100_ring_alloc Allocated 1536 at 0x8136a800&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />AG7100: cfg1 0xf cfg2 0x7115&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />ksz_phy: autonegotiation does not completed&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Writing 4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />ag7100_ring_free Freeing at 0x8039b000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />ag7100_ring_free Freeing at 0x8136a800&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />ag7100_ring_alloc Allocated 3072 at 0x8039b000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />ag7100_ring_alloc Allocated 1536 at 0x8136a800&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />AG7100: cfg1 0xf cfg2 0x7115&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />ksz_phy: autonegotiation does not completed&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Writing 4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />AG7100: unit 0 phy is up...GMii 10Mbps full duplex&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />AG7100: pll reg 0x18050010: 0x991099&nbsp; AG7100: cfg_1: 0x1ff0000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />AG7100: cfg_2: 0x3ff&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />AG7100: cfg_3: 0x8001ff&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />AG7100: cfg_4: 0xffff&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />AG7100: cfg_5: 0x7ffef&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />AG7100: done cfg2 0x7115 ifctl 0x0 miictrl 0x0</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70386">
				<div class="post-metadata">
					<div class="post-num">Post #145</div>
					<div class="post-author">number6</div>
					<div class="post-datetime">
						2 Jul 2008, 23:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>number6 wrote:</cite><blockquote><div class="quotebox"><cite>acoul wrote:</cite><blockquote><p>@mtvlv &amp; number6: you may give a try <a href="http://wifi.ozo.com/airo/openwrt/firmware/kamikaze/2.6/ar7100/test/">this netboot image</a></p></blockquote></div><p>The image boots fine but I am unable to send/receive traffic.&nbsp; I have one Ethernet cable connected to Eth1 (as labeled by Mikrotik, left-most RJ-45).&nbsp; The MAC address returned by &quot;ifconfig eth0&quot; matches that in the Mac swear below.&nbsp; Here are some of the startup swears:</p><p>AG7100: unit 0 phy is up...GMii 10M</p></blockquote></div><p>Not sure if this is a red herring or not, but the AG7100 swear is always &quot;10M&quot;, even if I force the link speed to other speeds on the other end of the Ethernet link using ethtool.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70388">
				<div class="post-metadata">
					<div class="post-num">Post #146</div>
					<div class="post-author">mtvlv</div>
					<div class="post-datetime">
						2 Jul 2008, 23:55					</div>
				</div>
				<div class="post-content content">
					<p>Same for me. When make an external ping, I see the led of port blinking. But no RX packages inifconfig. The two leds is up =&gt; 100Mbps PHY connect<br /></p><div class="codebox"><pre><code>Linux version 2.6.23.17 (alex@extreme) (gcc version 4.2.4) #3 Wed Jul 2 22:56:34 EEST 2008</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70390">
				<div class="post-metadata">
					<div class="post-num">Post #147</div>
					<div class="post-author">number6</div>
					<div class="post-datetime">
						3 Jul 2008, 00:19					</div>
				</div>
				<div class="post-content content">
					<p>The original Mikrotik supplied patch created linux/drivers/net/admtek.c which contains the following routines:</p><p>icplus_read_reg<br />icplus_write_reg<br />icplus_dump_regs<br />icplus_stop_engine<br />icplus_init_engine</p><p>One of the first steps performed by the ic175.c standard kernel PHY driver is:<br />err = phydev-&gt;bus-&gt;write(phydev-&gt;bus, 30, 0, 0x175c);<br />err = phydev-&gt;bus-&gt;write(phydev-&gt;bus, 29, 31, 0x175c);</p><p>One of the first steps in icplus_init_engine:<br />icplus_write_reg(29, 31, 0x175C);<br />icplus_write_reg(30, 0, 0x175C);</p><p>Due to this similarity, it may be possible to cut-and-paste the full Mikrotik initialization routine into ic175.c and then modify it to suit by referencing the ic175 datasheet.</p><p>I&#039;ll attempt this tomorrow (UTC-4) if I find cycles.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70419">
				<div class="post-metadata">
					<div class="post-num">Post #148</div>
					<div class="post-author">acoul</div>
					<div class="post-datetime">
						3 Jul 2008, 12:48					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://wifi.ozo.com/airo/mirror/ar7100/alex/">update</a>. this update is the source that creates the netboot images posted yesterday.</p><p>* include some extra ethernet drivers from mikrotik ag7100 released GPL code.&nbsp; work in progress.</p>											<p class="post-edited">(Last edited by <strong>acoul</strong> on 3 Jul 2008, 12:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70426">
				<div class="post-metadata">
					<div class="post-num">Post #149</div>
					<div class="post-author">number6</div>
					<div class="post-datetime">
						3 Jul 2008, 15:04					</div>
				</div>
				<div class="post-content content">
					<p>acoul: I just untarred your latest tree and noticed that you have both an ag7100 and ag7100-old directory.&nbsp; In the ag7100-old directory is ipPhy.c which manages the PHY on the RB450.&nbsp; Any reason why you don&#039;t include this in the ag7100 directory?&nbsp; It would seem to be a necessity to get this working on the RB450.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70430">
				<div class="post-metadata">
					<div class="post-num">Post #150</div>
					<div class="post-author">acoul</div>
					<div class="post-datetime">
						3 Jul 2008, 18:30					</div>
				</div>
				<div class="post-content content">
					<p>my bad.&nbsp; I forgot to transfer the new files from the: <br /></p><div class="codebox"><pre><code>build_dir/linux-ar7100/linux-2.6.23.17/drivers/net/ag7100 
to the 
target/linux/ar7100/files/drivers/net/ag7100</code></pre></div><p>fixed. please checkout again the source code. the ag7100-old directory is where tha mikrotik original files reside.&nbsp; this code does not compile clean.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 6 of 15</div><nav><ul><li><a href="viewtopic.php%3Fid=14765&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=14765&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=14765&amp;p=5.html">5</a></li><li class="pagination-current"><span>6</span></li><li><a href="viewtopic.php%3Fid=14765&amp;p=7.html">7</a></li><li><a href="viewtopic.php%3Fid=14765&amp;p=8.html">8</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=14765&amp;p=15.html">15</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>