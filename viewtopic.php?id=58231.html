<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> USB on NTFS - ntfs-3g</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 7 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p281705">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						29 Jun 2015, 03:33					</div>
				</div>
				<div class="post-content content">
					<p>I am trying to get USB running with NTFS.&nbsp; I am unable to see the device in LuCi Mount Points.&nbsp; I can see the device in the bootlog.&nbsp; I have tried a thumb drive and a USB hard drive.&nbsp; This is the thumb drive.<br /></p><div class="codebox"><pre><code>[    4.540402] scsi 2:0:0:0: Direct-Access     PNY      USB 2.0 FD       1100 PQ: 0 ANSI:             4
[    4.566959] sd 2:0:0:0: [sdc] 127835904 512-byte logical blocks: (65.4 GB/60.9 GiB)
[    4.590924] sd 2:0:0:0: [sdc] Write Protect is off
[    4.606302] sd 2:0:0:0: [sdc] No Caching mode page found
[    4.622346] sd 2:0:0:0: [sdc] Assuming drive cache: write through
[    4.645504]  sdc: sdc1
[    4.656059] sd 2:0:0:0: [sdc] Attached SCSI removable disk</code></pre></div><p>I have USB already running for EXT-[N] and VFAT with no issues.&nbsp; I have been configuring via LuCi.&nbsp; I have installed the following for NTFS<br /></p><div class="codebox"><pre><code>ntfs-3g
libpthread         Installs with ntfs-3g
kmod-fuse          Installs with ntfs-3g
fdisk             
libuuid             Installs with fdisk
libblkid            Installs with fdisk
libsmartcols        Installs with fdisk</code></pre></div><p>Do I need fdisk if I do not plan to format drives through OpenWRT?</p><p>Have read this <a href="http://wiki.openwrt.org/doc/howto/writable_ntfs">http://wiki.openwrt.org/doc/howto/writable_ntfs</a></p><p>I have replaced the script based upon the Wiki in /etc/hotplug.d/block/10-mount, and saved the original as backup.&nbsp; I think this is not relevant at least until I get manual mounting working.</p><p>I do see a file in SCP of /dev/sdc1.</p><p>I have run <br /></p><div class="codebox"><pre><code>mkdir -p /mnt/usb-ntfs
ntfs-3g /dev/sdc1 /mnt/usb-ntfs -o rw,sync</code></pre></div><p>I see a directory called /mnt/usb-ntfs and now can see the device with df<br /></p><div class="codebox"><pre><code>root@OpenWrt:/# df
Filesystem           1K-blocks      Used Available Use% Mounted on
rootfs                   47636     15736     30920  34% /
/dev/root                47636     15736     30920  34% /
tmpfs                   127456       820    126636   1% /tmp
tmpfs                      512         0       512   0% /dev
/dev/sdb1               484643      4748    454449   1% /home1
/dev/sdc1             63916924  45297188  18619736  71% /mnt/usb-ntfs</code></pre></div><p><strong>The device however is not in the mount point section of LuCi, nor can I find the device in the drop downs to edit it.&nbsp; fstab and samba have no related entries.</strong></p><p>I want the device to have a mount point of /home3 and a Windows share name of Share3.&nbsp; The drives are formatted with a single partion.&nbsp; One has files on it with subdirectories, the other is empty.</p><p>I think that I wanted to use<br /></p><div class="codebox"><pre><code>mkdir -p /home3
ntfs-3g /dev/sdc1 /home3 -o rw,sync</code></pre></div><p>Can someone please help me understand what I am missing?</p><p>I&#039;m a Windows user so please type slowly.</p><p>I am running 15.05 RC2 on i386 (ALIX).</p><p>RangerZ</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>