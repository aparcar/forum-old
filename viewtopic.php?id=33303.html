<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TTL &lt;&gt; RS322 does not work</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 7 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p150229">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">OlliL</div>
					<div class="post-datetime">
						4 Dec 2011, 00:31					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I made a TTL &lt;&gt; RS322 adapter for testing out my <a href="http://wiki.openwrt.org/oldwiki/openwrtdocs/hardware/t_com/sinus1054">Sinus 1054</a></p><p>I&#039;m getting the output printed out, but&nbsp; I can not make any input. Because CFE aborts autoboot, I guess some &quot;noise&quot; is sent. When I do not attach my adaptor, the Linux firmware boots up. When I then later attach the adaptor, I can see printouts but still not able to send any keyboard input to the system <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p><strong>What could be the reason that I&#039;m not able to send any keyboard input to the router?</strong></p><div class="codebox"><pre><code>CFE version 1.0.37-5.6 for BCM96345 (32bit,SP,BE)                                                 
Build Date: Tue Nov 16 20:48:23 CST 2004 (root@weiyu.tecom.com.tw)                                                                  
Copyright (C) 2000,2001,2002,2003 Broadcom Corporation.                                                       

Initializing Arena.                   
Initializing Devices.                     
Auto-negotiation timed-out                          
CPU type 0x28000: 140MHz                        

Total memory used by CFE:  0x80401000 - 0x805210D0 (1179856)                                                            
Initialized Data:          0x8041BA80 - 0x8041D4E0 (6752)                                                         
BSS Area:                  0x8041D4E0 - 0x8041F0D0 (7152)                       
Local Heap:                0x8041F0D0 - 0x8051F0D0 (1048576)
Stack Area:                0x8051F0D0 - 0x805210D0 (8192)
Text (code) segment:       0x80401000 - 0x8041BA80 (109184)
Boot area (physical):      0x00522000 - 0x00562000
Relocation Factor:         I:00000000 - D:00000000

Board IP address                : 192.168.1.1:ffffff00
Host IP address                 : 192.168.1.100
Gateway IP address              :
Run from flash/host (f/h)       : f
Default host run file name      : vmlinux
Default host flash file name    : bcm963xx_fs_kernel
Boot delay (0-9 seconds)        : 1
Board Id Name                   : 96345GW2
Psi size in KB                  : 16
Number of MAC Addresses (1-32)  : 11
Base MAC Address                : 00:03:c9:6f:5d:75
Ethernet PHY Type               : Internal
Memory size in MB               : 8

*** Press any key to stop auto run (1 seconds) ***
Auto run second count down: 1
web info: Waiting for connection on socket 0.
CFE&gt;</code></pre></div><p>When I attach the adaptor later (some seconds after power up), I see this output... </p><div class="codebox"><pre><code>Decompression OK!
Entry at 0x8001046c
Closing network.
Starting program at 0x8001046c
Total Flash size: 4096K with 71 sectors
96345GW2 prom init
CPU revision is: 00028000
Primary instruction cache 8kb, linesize 16 bytes (2 ways)
Primary data cache 4kb, linesize 16 bytes (2 ways)
Linux version 2.4.17 (root@linux) (gcc version 3.1) #377 Sun Nov 13 06:38:30 CET 2005
Determined physical RAM map:
 memory: 007a0000 @ 00000000 (usable)
On node 0 totalpages: 1952
zone(0): 1952 pages.
zone(1): 0 pages.
zone(2): 0 pages.
Kernel command line: root=/dev/mtdblock0 rw
bcm_console_setup
Calibrating delay loop... 92.97 BogoMIPS
Memory: 6268k/7808k available (1067k kernel code, 1540k reserved, 76k data, 40k init, 0k highmem)
Dentry-cache hash table entries: 1024 (order: 1, 8192 bytes)
Inode-cache hash table entries: 512 (order: 0, 4096 bytes)
Mount-cache hash table entries: 512 (order: 0, 4096 bytes)
Buffer-cache hash table entries: 1024 (order: 0, 4096 bytes)
Page-cache hash table entries: 2048 (order: 1, 8192 bytes)
Checking for &#039;wait&#039; instruction...  unavailable.
POSIX conformance testing by UNIFIX
Linux NET4.0 for Linux 2.4
Based upon Swansea University Computer Society NET3.039
Initializing RT netlink socket
Starting kswapd
brcmboard: brcm_board_init entry
Module bcm63xx_cons.c v1.1 Apr 30 2005 17:39:52
block: 64 slots per queue, batch=16
PPP generic driver version 2.4.1
NET4: Linux TCP/IP 1.0 for NET4.0
IP Protocols: ICMP, UDP, TCP
IP: routing cache hash table of 512 buckets, 4Kbytes
TCP: Hash tables configured (established 512 bind 1024)
NET4: Unix domain sockets 1.0/SMP for Linux NET4.0.
NET4: Ethernet Bridge 008 for NET4.0
VFS: Mounted root (cramfs filesystem).
Freeing unused kernel memory: 40k freed

init started:  BusyBox v0.60.4 (2005.11.12-18:12+0000) multi-call binary
Algorithmics/MIPS FPU Emulator v1.5
mount: Mounting devpts on /dev/pts failed: No such device
Terminated


BusyBox v0.60.4 (2005.11.12-20:53+0000) Built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

sh: can&#039;t access tty; job control turned off

Loading drivers and kernel modules... 

[28] Jan 01 00:00:06 Running in background
atmapi: init_module entry 0xc0002060
blaadd: blaa_detect entry
adsl: adsl_init entry
var 1.0 initialised
Broadcom BCM6345A0 Ethernet Network Device v0.1 Dec  7 2004 16:50:17 Internal PHY
BCM6345_ENET: Auto-negotiation timed-out
BCM6345_ENET: 10 MB Half-Duplex (assumed)
eth0: MAC Address: 00:03:C9:6F:5D:75
kille
killall: inetd: no process killed
Device
WLAN hardware configuration BE_PCMCIA EBI_DMA 
wl0: Broadcom BCM4320 802.11 Wireless Controller 3.61.13.0
nein
SPI ist nicht da
BcmAdsl_Initialize=0xC00144A8, g_pFnNotifyCallback=0xC0025290
AdslCoreHwReset: AdslOemDataAddr = 0xA07DCC04
atmctl: ATM driver return code, memory allocation error
atmctl: ATM driver return code, state error
atmctl: ATM driver return code, state error
atmctl: invalid vcc address &#039;0.1.32&#039;
S
/bin/inetd
Device
nein
SPI ist nicht da

==&gt;   Bcm963xx Software Version: 2.14L.02DT1650_120704.BA09b6e   &lt;==

S
/bin/inetd
Device
nein
SPI ist nicht da
device wl0 entered promiscuous mode
br0: port 1(wl0) entering listening state
br0: port 1(wl0) entering learning state
br0: port 1(wl0) entering forwarding state
br0: topology change detected, propagating
device eth0 entered promiscuous mode
br0: port 2(eth0) entering listening state
br0: port 2(eth0) entering learning state
br0: port 2(eth0) entering forwarding state
br0: topology change detected, propagating
pvc2684d: Interface &quot;nas33&quot; created sucessfully

atm_connect (TX: cl 1,bw 0-0,sdu 1524; RX: cl 1,bw 0-0,sdu 1524,AAL 5)
blaadd: open error -125
pvc2684d: Communicating over ATM 0.1.32, encapsulation: LLC

device nas33 entered promiscuous mode
br0: port 3(nas33) entering listening state
br0: port 3(nas33) entering learning state
br0: port 3(nas33) entering forwarding state
br0: topology change detected, propagating
S
/bin/inetd
Device
nein
SPI ist nicht da
br0: port 2(eth0) entering disabled state
S
/bin/inetd
Device
nein
SPI ist nicht da
S
/bin/inetd
Device
nein
SPI ist nicht da</code></pre></div>											<p class="post-edited">(Last edited by <strong>OlliL</strong> on 4 Dec 2011, 00:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p150233">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						4 Dec 2011, 01:42					</div>
				</div>
				<div class="post-content content">
					<p>Bad cable? <a href="http://wiki.openwrt.org/doc/hardware/port.serial#level.conversion">http://wiki.openwrt.org/doc/hardware/po â€¦ conversion</a><br />CA-42 cables are reported to work fine.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p150236">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">OlliL</div>
					<div class="post-datetime">
						4 Dec 2011, 02:27					</div>
				</div>
				<div class="post-content content">
					<p>Define &quot;bad cable&quot; - what could be the reason for such a behaviour?<br />I made the same adaptor for my TP-Link 901 and it works there.<br />OK, maybe I made an error during building up the second adaptor but I can&#039;t find any - so it would be cool if there where some &quot;common&quot; errors which are causing such a behaviour and someone knews them <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>											<p class="post-edited">(Last edited by <strong>OlliL</strong> on 4 Dec 2011, 02:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p150256">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						4 Dec 2011, 12:30					</div>
				</div>
				<div class="post-content content">
					<p>bad cable is normally a matter of soldering skills and chipset quality. Some similar behavior was discussed already there: <a href="https://forum.openwrt.org/viewtopic.php?pid=137883#p137883">https://forum.openwrt.org/viewtopic.php â€¦ 83#p137883</a><br />oh, and my bad: it seems dku-5 cables are better choice than ca-42.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>