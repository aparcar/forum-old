<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Best router setup?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 19 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p267866">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">pinus</div>
					<div class="post-datetime">
						6 Mar 2015, 12:44					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m not as system admin and therefor unsure if my ideas of the router setup really work.</p><p>The objectives I have are: <br /></p><ol class="alpha"><li><p>Normal access via ethernet to the LAN resources, no special restrictions accessing my server etc.</p></li><li><p>Restricted access of the internet. The device should be known/configured to have internet access. Neither my printer nor my TV or any other device should be able to access the internet by default.</p></li><li><p>The devices that should have access could be enabled/disabled easily. I also want to be able to block certain ports for a device, e.g. block whattsapp if the kids should learn for shool.</p></li><li><p>Router configuration is only possible vial ethernet, for security reasons.</p></li></ol><p>Since we have ferro concrete ceilings, I need a router for each floor. Connected via ethernet.</p><p>My idea was to configure three interfaces<br />- WAN (one RJ45 port)<br />- LAN (four RJ45 ports)<br />- WIFI (2.5 and 5GHz)</p><p>The WAN should get a static IP from the DSL modem (192.168.0.1) range, e.g. (WAN=192.168.0.2). The zero network.<br />The LAN should get static IP 192.168.1.1, the one network.<br />The WIFI should get a static IP 192.168.2.1, the two network.</p><p>I would like to configure DHCP static leases for the known devices, MAC -&gt; IP from the one or two network, depending on LAN or WIFI.</p><p>That&#039;s the point where I got lost. I have 3 different networks. From my understanding they should not be able to communicate between each other. What I do need are routes between the networks and rules to block traffic for certain IPs/ports. How to configure that? Is it al way to complicated for a home lan? Are there similar setups documented somewere?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267922">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">rumple</div>
					<div class="post-datetime">
						6 Mar 2015, 21:30					</div>
				</div>
				<div class="post-content content">
					<p>I don&#039;t have a &quot;turn key&quot; solution, but some ideas:</p><p>Regarding WiFi APs, I recommend the TL-WA801ND : good price, POE, OpenWRT, external antennas.</p><p>HomeNet Control Protocol ( <a href="http://wiki.openwrt.org/doc/howto/hncp">http://wiki.openwrt.org/doc/howto/hncp</a> ) could be useful.&nbsp; I haven&#039;t tried it.</p><p>Dunno about the filtering &amp; routing questions.&nbsp; You might look at the CeroWRT config files : they are big fans of routing.&nbsp; Filtering sounds painful.</p><p>Search for &quot;Wireless networks David Lang&quot;.&nbsp; He has good ideas for routed WiFi nets.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267925">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">zo0ok</div>
					<div class="post-datetime">
						6 Mar 2015, 22:30					</div>
				</div>
				<div class="post-content content">
					<p>The three different networks... what you really want is to restrict/allow access by client... I think you should focus your effort there, rather than dividing your network into different subnets and solving the problems that come from it.</p><p>I guess you can have a master router connected to the DSL modem that does most everything.<br />On every floor you can have just an access point with no routing/filtering. Perhaps you are better off with tree different WLANs, perhaps it is better to use the same SSID and password for all floors.</p><p>In my network I deny all internet access by default. I make dhcp-entries for every known client, and then I allow all traffic I want explicitely as firewall rules (i find it more useful to define that on MAC level rather than IP level).</p><p>Perhaps you can run privoxy to allow restricted/controlled internet access to some devices (your children). Then they have no internet access - just access via the proxy.</p><p>I dont know if it is very useful to distrust your WiFi network. But you can of course disallow all router access by default, and enable it only from trusted IPs if you want. Just be aware that you can easily lock yourself out from your own router.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>