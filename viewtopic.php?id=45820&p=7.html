<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Transcend WifiSD / PQI AirCard / FluCard Pro</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 29 Mar 2018 and 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 7 of 10</div><nav><ul><li><a href="viewtopic.php%3Fid=45820&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=45820&amp;p=5.html">5</a></li><li><a href="viewtopic.php%3Fid=45820&amp;p=6.html">6</a></li><li class="pagination-current"><span>7</span></li><li><a href="viewtopic.php%3Fid=45820&amp;p=8.html">8</a></li><li><a href="viewtopic.php%3Fid=45820&amp;p=9.html">9</a></li><li><a href="viewtopic.php%3Fid=45820&amp;p=10.html">10</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p223504">
				<div class="post-metadata">
					<div class="post-num">Post #151</div>
					<div class="post-author">ttytt</div>
					<div class="post-datetime">
						22 Jan 2014, 21:56					</div>
				</div>
				<div class="post-content content">
					<p>Hello sjachim,</p><p>Thank for your reply!</p><p>I tried on 4 different computers (3 laptops and a desktop) using the SD-USB adapter that came with the card and also the computer SD slot when it was available but unfortunately it is still the same, the card starts normally and then after a while it&#039;s gone. Tried as well on 2 different routers, same thing.</p><p>I will give a try with your recommendation.</p><p>By the way, is there a reason why when creating a file in the /mnt/sd folder through telnet, it is not shown after on the card on windows side and vice versa? The card need to reboot to show the new file.</p><p>There is a command a refresh command called &quot;refresh_sd&quot; but once I put a file on the windows side, it becomes unable to run the command which gives out a error message; &quot;umount: can&#039;t umout /mnt/sd: Device or ressource busy&quot;. I am sure I am missing something here...</p><p>I&#039;ll keep looking...</p><p>Thank</p>											<p class="post-edited">(Last edited by <strong>ttytt</strong> on 22 Jan 2014, 23:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223521">
				<div class="post-metadata">
					<div class="post-num">Post #152</div>
					<div class="post-author">sjachim</div>
					<div class="post-datetime">
						23 Jan 2014, 01:35					</div>
				</div>
				<div class="post-content content">
					<p>Files and directories that you create on cards side won&#039;t be seen in Windows Explorer due to Windows&#039; cache.<br />Windows dumps it&#039;s write cache as soon as it can, but it doesn&#039;t do anything to reload data from sd card. Why would it change? Nothing else has access to it right? <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> That&#039;s my understanding. Somebody please correct me, if I&#039;m wrong. </p><p>About the other problem. Make sure your working directory (the one in which you are in your shell session, use &quot;pwd&quot; command) is not /mnt/sd. And before doing &quot;refresh_sd&quot; call &quot;sync&quot; to flush the cache on cards side.</p><p>I have something like this in my autorun.sh for diagnostic purposes (that way i can check modification time of works file to check if my card is not working or just wifi...):</p><p>echo works &gt; /mnt/sd/works<br />sync<br />refresh_sd</p><p>Happy hacking!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223532">
				<div class="post-metadata">
					<div class="post-num">Post #153</div>
					<div class="post-author">ttytt</div>
					<div class="post-datetime">
						23 Jan 2014, 05:48					</div>
				</div>
				<div class="post-content content">
					<p>Victory! </p><p>I have been using a different card reader and the card didn&#039;t crashed at all this evening. It&#039;s a first!.</p><p>Here is the link to the adapter that I am using;<br /><a href="http://www.dynexproducts.com/products/computer-accessories/DX-CR121.html">http://www.dynexproducts.com/products/c … CR121.html</a></p><p>Obviously the USB adapter that came with the card doesn&#039;t work or is faulty. <br />I would be interested to know why it doesn&#039;t work properly. It doesn&#039;t make sense since the adapter comes with the card...</p><p>I tried also to connector the card reader to a USB Iphone charger to see if it would work alone but I got nothing. <br />The led is it on the reader adapter but the card doesn&#039;t seem to be working, I not why either.</p><p>I also found a way to refresh the content on the card display in windows when writing/changing a file on the card through a telnet connection. I am not sure if it is a clean way or not to do it but it works! Let say the card is like me mounted on G:. I am using Windows 8.</p><p>Command line ;<br />G:\&gt;fsutil volume dismount g:</p><p>It takes few second to get back the prompt and the folder is refreshed.</p><p>Thank sjachim for your help.</p>											<p class="post-edited">(Last edited by <strong>ttytt</strong> on 23 Jan 2014, 05:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223542">
				<div class="post-metadata">
					<div class="post-num">Post #154</div>
					<div class="post-author">BohemianHacks</div>
					<div class="post-datetime">
						23 Jan 2014, 12:11					</div>
				</div>
				<div class="post-content content">
					<p>Hello everyone,</p><p>I have been playing with my own transcend card recently and was able to compile a couple kernels.&nbsp; Using the GPL toolchain from transcend I was able to comple Dmitry&#039;s config with his patched module.c and a modified version optimized for size. With the size optimization you have a bit of room and&nbsp; I attempted to add netfilter but ran into issues. I am under the 3MB limit but the firmware update does not complete. I have no debug output and wifi doesn&#039;t come back up until I flash with another kernel. I am using dankrause&#039;s buildroot setup and the bootloader never moves to .disabled.</p><p>I have included a link to the 3 compiled kernels, the kbuild config files for those,&nbsp; the initramfs,&nbsp; uboot, and a copy of the GPL release I am using. The module.c patch isn&#039;t in this source so you will need to grab that from dmitry and copy it over.<br /><a href="https://drive.google.com/file/d/0B3k-rYjKYTknQ1M5MXlLcUZTeGc/edit?usp=sharing">https://drive.google.com/file/d/0B3k-rY … sp=sharing</a></p><p>If anyone can even give me a boot log I would appreciate it, still putting off my own hardware mods until I can get a logic level shifter or new usb to serial adapter.</p><p>Thanks,<br />Jeff</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223577">
				<div class="post-metadata">
					<div class="post-num">Post #155</div>
					<div class="post-author">sjachim</div>
					<div class="post-datetime">
						23 Jan 2014, 22:29					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve been looking at sources of ka2000&#039;s uboot. One of the first things called is InitCard() function which in turn calls init_m2(). This guy is interesting in the fact that I couldn&#039;t find anywhere symbolic names for constants used.<br />Does anyone have any idea what these registers are for?</p><p>// GPL code of ka2000 uboot follows:<br />int init_m2(void)<br />{<br />&nbsp; &nbsp; volatile int timeout = 100000;</p><p>&nbsp; &nbsp; word_write(0xa000a01c, 0x8);<br />&nbsp; &nbsp; while ((word_read(0xa000a000) &amp; 0x1) == 0x1)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; word_write(0xa000a01c, 0x8);<br />&nbsp; &nbsp; &nbsp; &nbsp; word_write(0xa000a000, 0x0);</p><p>&nbsp; &nbsp; &nbsp; &nbsp; if (timeout-- &lt;= 0)<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return -1;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; }</p><p>&nbsp; &nbsp; word_write(0xa000a004, 0x1);<br />&nbsp; &nbsp; return 0;<br />}</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223633">
				<div class="post-metadata">
					<div class="post-num">Post #156</div>
					<div class="post-author">generatorglukoff</div>
					<div class="post-datetime">
						24 Jan 2014, 16:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>sjachim wrote:</cite><blockquote><p>I&#039;ve been looking at sources of ka2000&#039;s uboot. One of the first things called is InitCard() function which in turn calls init_m2(). This guy is interesting in the fact that I couldn&#039;t find anywhere symbolic names for constants used.<br />Does anyone have any idea what these registers are for?</p></blockquote></div><p>Imho, 0xa0000000 is a register memory space before MMU remapping, check Linux_KA_2_6/arch/arm/mach-ka2000/include/mach/ka2000_define.h. Therefore, 0xa000a000 is a register of sd switch device.</p><p>Also, I found out, that kcard_app applet from original busybox (and /dev/ka-main dev-node) is needed to trigger some actions in sd-switch mode, otherwise remained dormant. And also, I haven&#039;t found few strings from busybox binary to be present in busybox sources (I haven&#039;t compiled it though, maybe I&#039;m missing something, need to recheck).</p><p>Afterwards, it seems possible to sometimes send CMD48 with response from arm, but that&#039;s not stable though. I&#039;ll clean up things and post a code later.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223975">
				<div class="post-metadata">
					<div class="post-num">Post #157</div>
					<div class="post-author">acaN</div>
					<div class="post-datetime">
						28 Jan 2014, 19:28					</div>
				</div>
				<div class="post-content content">
					<p>Are different KeyASIC cards&#039; firmwares interchangeable? Can I flash i.e. Aircard firmware in my Trascend one?</p>											<p class="post-edited">(Last edited by <strong>acaN</strong> on 28 Jan 2014, 20:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223992">
				<div class="post-metadata">
					<div class="post-num">Post #158</div>
					<div class="post-author">sjachim</div>
					<div class="post-datetime">
						28 Jan 2014, 22:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>moroboshi wrote:</cite><blockquote><p>But if you want to use this standalone to connect it via serial to a microcontroller project, for wifi remote control and data logging to the sd, then it should be usable for that as soon as I can get sd writes to work reliably. <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p></blockquote></div><p>Do you mean that with your drivers I we can get a the card to boot without&nbsp; real host? With just a simple power supply?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224000">
				<div class="post-metadata">
					<div class="post-num">Post #159</div>
					<div class="post-author">moroboshi</div>
					<div class="post-datetime">
						29 Jan 2014, 01:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>sjachim wrote:</cite><blockquote><div class="quotebox"><cite>moroboshi wrote:</cite><blockquote><p>But if you want to use this standalone to connect it via serial to a microcontroller project, for wifi remote control and data logging to the sd, then it should be usable for that as soon as I can get sd writes to work reliably. <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p></blockquote></div><p>Do you mean that with your drivers I we can get a the card to boot without&nbsp; real host? With just a simple power supply?</p></blockquote></div><p>In principle yes, however I haven&#039;t found the time to continue working on that lately... *sigh*</p><p>I suspect that you could also modify the stock firmware to boot without the host:<br />Likely all you need to do is to change the boot sequence so that before the proprietary driver bits (which wait for the host initalizing the card) you initialize the card from within the embedded Linux instead using a custom kernel module (toggle the switch, do SD initialization, continue boot normally).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224002">
				<div class="post-metadata">
					<div class="post-num">Post #160</div>
					<div class="post-author">sjachim</div>
					<div class="post-datetime">
						29 Jan 2014, 02:16					</div>
				</div>
				<div class="post-content content">
					<p>OK I&#039;m gonna try doing this. Is there an quick way to test kernel level (ring-0) code without recompiling kernel?</p><p>Ideally I&#039;d like to write several lines of C, compile for ARM and run on kernel level (so that it would be able to access the switch. <br />Any pointers appreciated. </p><p>Sorry. It&#039;s bit off topic...</p><p>EDIT: OK. I got my knowledge refreshed with this: <a href="http://tldp.org/LDP/lkmpg/2.6/html/x121.html">http://tldp.org/LDP/lkmpg/2.6/html/x121.html</a> and compiled my first kernel module. Gotta setup cross compilation toolkit this week and get hello world module for ARM working... <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>											<p class="post-edited">(Last edited by <strong>sjachim</strong> on 29 Jan 2014, 03:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224279">
				<div class="post-metadata">
					<div class="post-num">Post #161</div>
					<div class="post-author">sjachim</div>
					<div class="post-datetime">
						1 Feb 2014, 20:30					</div>
				</div>
				<div class="post-content content">
					<p>I spent some more time having fun with my Transcend card.<br />Once I got cross compilation working, I created a small kernel module that dumps values of all ka2000 registers (including SDSW switch registers). I&#039;m going to send various commands to the card using microcontroller and look what&#039;s going on in cards&#039; SDSW registers. </p><p>One particularly promising thing is that ka2000 switch saves in registers last commands that were going from the host to flash memory. By sending illegal commands from the host and listening for changes in registers we can transfer data to cards OS.&nbsp; &nbsp;</p><p>If anybody is interested this is a link to a static dump of register values when card is connected to a laptop with a USB reader: <a href="https://gist.github.com/sjachim/8756124">https://gist.github.com/sjachim/8756124</a></p><p>Other thing I did. I got a binary of strace for ARM5 arch and used it on kcard_startup and kcard_app.<br />You can see how these two send values to driver of /dev/ka-main device using ioctl(). For example kcard_app tells the driver&nbsp; it&#039;s pid so that later the driver can notify the application using signals... <a href="https://gist.github.com/sjachim/8756391">https://gist.github.com/sjachim/8756391</a></p>											<p class="post-edited">(Last edited by <strong>sjachim</strong> on 1 Feb 2014, 20:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224582">
				<div class="post-metadata">
					<div class="post-num">Post #162</div>
					<div class="post-author">generatorglukoff</div>
					<div class="post-datetime">
						5 Feb 2014, 02:53					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve did some more research of ka2000_sdhc.ko disassembly and I&#039;ve made proof-of-concept modules (device and host) that communicates with each other over CMD 48 and CMD 49, source <a href="https://bitbucket.org/generatorglukoff/wifisd/src/tip/02_function_extension_cmds/">here</a>. There are still many unknown stuff.</p><p>Few more things:<br />1. SDSW_M1_CMD_FLAG_INTEN_REG* registers are bitfields, where each bit enables/disables use IRQs per corresponding command. Few commands are unavailable for IRQ (their bit are always zero), also CMD48/CMD49 uses another bitmask.<br />2. SDSW_M1_CMD_FLG_REG* register are also bitfields, where each bit shows what command was triggered. Unsupported commands doesn&#039;t trigger bit changes. You need to clear them to acknowledge interrupt. Caveat here, it seems CMD7 uses bitmask 0x800 instead of 0x80.</p><p>What still have to be done:<br />1. if we stick to CMD48/CMD49 transfers, than host need support them in kernel, possibly somewhere around mmc_block module<br />2. on device side, we need to decide, how to use them. SD/MMC spec dictates strict rules for command arguments and make provisions for PnP</p><p>Hope it helps.</p><p>P.S. I use spec named &quot;SD Specifications, Part 1, Physical Layer Simplified Specification, Version 4.10, January 22, 2013&quot;, CMD48/CMD49 is in section &quot;5.7 Function Extension Specification&quot;.</p>											<p class="post-edited">(Last edited by <strong>generatorglukoff</strong> on 5 Feb 2014, 02:54)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224613">
				<div class="post-metadata">
					<div class="post-num">Post #163</div>
					<div class="post-author">fnawothnig</div>
					<div class="post-datetime">
						5 Feb 2014, 15:45					</div>
				</div>
				<div class="post-content content">
					<p>Hello. I&#039;ve been hacking around with my 32GB Transcend for a while now, successfully built and booted my own kernel (by Dmitry&#039;s instructions), unsuccessfully tried to update the SDIO driver inside initramfs (initramfs updates themselves work fine so there must be something wrong with the driver).</p><p>Next I tried to build my own uboot - but it didn&#039;t boot.</p><p>I definitely need my own serial connection; but the plan is to hack uboot so I don&#039;t need it (I want uboot to dump the log to flash) ... so if someone with a serial connection could try my program.bin and tell me what&#039;s going on there I&#039;d be grateful.</p><p><a href="http://flexo.sipsik.net/program.bin">http://flexo.sipsik.net/program.bin</a></p><p>(No risk involved here - reflashing with the old one works fine, but AFAIK you can&#039;t break stuff this way anyway ...)</p><p>If someone has some information on how to build a new u-boot for transcend (or any of the other cards) I&#039;d be grateful for that too.</p><p>(Update: How I tried to built u-boot: I took the released GPL sources from Transcend, removed the hardcoded CROSS_COMPILE from Makefile, took ARCH and CROSS_COMPILE env-vars I used for my kernel compilation (using the toolchain provided by Transcend) and just did a &quot;make clean&quot; and &quot;make&quot; - and got a boot.bin which - in my opinion - should just work (although the binary is quite a bit smaller than the official program.bin...))</p><p>Cheers,<br />Felix</p>											<p class="post-edited">(Last edited by <strong>fnawothnig</strong> on 5 Feb 2014, 15:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224660">
				<div class="post-metadata">
					<div class="post-num">Post #164</div>
					<div class="post-author">fnawothnig</div>
					<div class="post-datetime">
						6 Feb 2014, 12:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>generatorglukoff wrote:</cite><blockquote><p>I&#039;ve did some more research of ka2000_sdhc.ko disassembly and I&#039;ve made proof-of-concept modules (device and host) that communicates with each other over CMD 48 and CMD 49, source <a href="https://bitbucket.org/generatorglukoff/wifisd/src/tip/02_function_extension_cmds/">here</a>. There are still many unknown stuff.</p></blockquote></div><p>Nice.</p><p>Another vector for playing around... I&#039;ll never get the stuff done I&#039;m supposed to be doing. :-)</p><p>Could we maybe wrap around ka2000_sdhc.ko to restore normal SD functionality? (This would also make debugging easier if the wrapper could simply dump what the module is doing...)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224832">
				<div class="post-metadata">
					<div class="post-num">Post #165</div>
					<div class="post-author">sjachim</div>
					<div class="post-datetime">
						8 Feb 2014, 16:08					</div>
				</div>
				<div class="post-content content">
					<p>I spent some time yesterday evening fiddling with Ez Share card&#039;s firmware. <br />What I was able to find on their website was a Windows software (all in Chinease).<br />The real firmware was just one file. Looked briefly at it and it wasn&#039;t in any format known to me.<br />Moved the file to Linux for closer inspection. &quot;hexdump&quot; revealed that there was a stream of 0xFF&#039;s close to start of the file.<br />Negated zeros? I applied quick script in Python to invert all bytes in the file and then run &quot;strings&quot;, &quot;binwalk&quot; etc. on it.</p><p>Some of the strings I could find:</p><p>ictest.bin<br />ishare.bin<br />lZEal eZ-sHAre&lt;&gt;wIFi SD Card<br />athwlan.bin.z77<br />Where are U man?<br />Copyright (c) 1993-2000 ATI - Nucleus PLUS - Version ARM 7/9&nbsp; 1.11.19<br />B:\DCIM\127___02\<br /> and lots of html and javascript...</p><p>OK. It seems like this card is also ARM based and it also has Atheros WiFi chip, but unfortunately power by Nucelus PLUS RTOS, not Linux.</p>											<p class="post-edited">(Last edited by <strong>sjachim</strong> on 9 Feb 2014, 00:29)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225386">
				<div class="post-metadata">
					<div class="post-num">Post #166</div>
					<div class="post-author">Cypher</div>
					<div class="post-datetime">
						15 Feb 2014, 15:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>moroboshi wrote:</cite><blockquote><p>Yes, I&#039;ve been building 3.10/3.11 based kernels for myself so far.</p></blockquote></div><p>That&#039;s awesome! But does the WiFi work? Probably not, because of that closed-source ar6000 module, right?</p><div class="quotebox"><cite>moroboshi wrote:</cite><blockquote><p>I also added a simple cpufreq driver that switches between 196 Mhz (pll on) and 24 Mhz (pll off) to save power, which makes a notable difference in idle temperature.</p></blockquote></div><p>Could you please backport this to the 2.6 kernel?<br />I really want to use 3.10 on that card, but without WiFi and SD access it makes no sense. And the 2.6 kernel heats up the card after a few seconds. So the best solution would probably a backport of that idle-driver to 2.6. I already tried it myself and failed horribly. <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /><br />Thanks a lot!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225501">
				<div class="post-metadata">
					<div class="post-num">Post #167</div>
					<div class="post-author">l1q1d</div>
					<div class="post-datetime">
						16 Feb 2014, 21:11					</div>
				</div>
				<div class="post-content content">
					<p>The atheros 6000 driver is part of the kernel from the 3.2 release. According to <a href="http://wireless.kernel.org/en/users/Drivers/ath6kl/">wireless kernel</a> and probably we can use a <a href="https://www.kernel.org/pub/linux/kernel/projects/backports/">backport driver</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225682">
				<div class="post-metadata">
					<div class="post-num">Post #168</div>
					<div class="post-author">jancotomas</div>
					<div class="post-datetime">
						18 Feb 2014, 19:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>moroboshi wrote:</cite><blockquote><p>you initialize the card from within the embedded Linux instead using a custom kernel module (toggle the switch, do SD initialization, continue boot normally).</p></blockquote></div><p>Have anyone done this successfully? Moroboshi, could you post sources for what you&#039;ve already done, so others could work on?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225684">
				<div class="post-metadata">
					<div class="post-num">Post #169</div>
					<div class="post-author">sjachim</div>
					<div class="post-datetime">
						18 Feb 2014, 20:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jancotomas wrote:</cite><blockquote><div class="quotebox"><cite>moroboshi wrote:</cite><blockquote><p>you initialize the card from within the embedded Linux instead using a custom kernel module (toggle the switch, do SD initialization, continue boot normally).</p></blockquote></div><p>Have anyone done this successfully? Moroboshi, could you post sources for what you&#039;ve already done, so others could work on?</p></blockquote></div><p>I&#039;ve found modified uBoot sources on github that allow booting card without external initialization.</p><p>But to use it for anything useful we need what&#039;s mentioned above (a small sd card initializer kernel module). I want to work on this next, but will be on holidays for three weeks. I will hopefully get it done in second half of March. </p><p>Once you have working cross compilation toolkit making a small kernel module that reads/writes some values to/from registers is trivial. </p><p>I wlll most probably copy CNLohr&#039;s initialization sequence or read SD card specs.</p><p>EDIT: I don&#039;t mean that getting everything working properly is trivial. <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>											<p class="post-edited">(Last edited by <strong>sjachim</strong> on 18 Feb 2014, 20:18)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225768">
				<div class="post-metadata">
					<div class="post-num">Post #170</div>
					<div class="post-author">jancotomas</div>
					<div class="post-datetime">
						19 Feb 2014, 17:40					</div>
				</div>
				<div class="post-content content">
					<p>Yesterday I cracked-open my Transcend card and connected serial terminals to my computer<br />Now i am able to boot up the card without host device by altering boot sequence<br /></p><div class="quotebox"><cite>moroboshi wrote:</cite><blockquote><div class="codebox"><pre><code>KA2000#setenv bootalone &#039;go 208000&#039;
KA2000#setenv bootcmd
KA2000#setenv bootcmd &#039;run set_bootargs; run bootalone&#039;
KA2000#saveenv</code></pre></div></blockquote></div><p>And disabling /etc/init.d/rcS script (just put exit 0 as the second line). To do it you must build new ramdisk ( <a href="http://dmitry.gr/index.php?r=05.Projects&amp;proj=15&amp;proj=15.%20Transcend%20WiFiSD">http://dmitry.gr/index.php?r=05.Project … d%20WiFiSD</a> )</p><p>To enable wifi just do (in console or in /etc/init.d/rcS)<br /></p><div class="codebox"><pre><code>mount -t jffs2 /dev/mtdblock0 /mnt/mtd
insmod /lib/ka2000-sdhc.ko max_sd_blk=8
cp /mnt/mtd/config/wsd.conf /etc
cp /mnt/mtd/config/cimgconf /etc
w3</code></pre></div><p>Now you have card working standalone, except for access to 16GB SD memory.</p><p>------------------------------------------------------------<br />I have also working cross-compiler - download and install the toolchain <a href="http://www.mentor.com/embedded-software/sourcery-tools/sourcery-codebench/editions/lite-edition/">http://www.mentor.com/embedded-software … e-edition/</a></p><p>Now I can compile kernel modules to access the flash controller etc.<br />Do you have any suggestion, what to do next? I think it will be possible to toggle the SDIO switch, initialize the controller and use original ka2000-sdhc &amp; kcardapp to take care of SD storage (no need to provide custom driver). Can someone sum up what we already know about this? What is the initialisation sequence?</p><p><em>Everything I did was already done by someone else, but I hope this nicely sums it up and could help someone new to catch up.</em></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p226054">
				<div class="post-metadata">
					<div class="post-num">Post #171</div>
					<div class="post-author">sjachim</div>
					<div class="post-datetime">
						23 Feb 2014, 14:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jancotomas wrote:</cite><blockquote><p>Do you have any suggestion, what to do next? I think it will be possible to toggle the SDIO switch, initialize the controller and use original ka2000-sdhc &amp; kcardapp to take care of SD storage (no need to provide custom driver). Can someone sum up what we already know about this? What is the initialisation sequence?</p></blockquote></div><p>CNLohr, has made a small AVR microcontroller host that has initialization sequence (4-bit SD) implemented.<br />Video here: <a href="http://www.youtube.com/watch?v=5Rr9kSqjX98">http://www.youtube.com/watch?v=5Rr9kSqjX98</a><br />I think you can find links to his Github repo on previous pages of this thread.<br />I believe that switching SDSW and reusing the same sequence should give us mountable SD card. I think it has to be done before loading original kernel modules.<br />I&#039;m planning to try doing it myself when I get back to home.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p228459">
				<div class="post-metadata">
					<div class="post-num">Post #172</div>
					<div class="post-author">mohnish82</div>
					<div class="post-datetime">
						26 Mar 2014, 07:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pixelk wrote:</cite><blockquote><p>Just for history&#039;s sake, WifiSD first boot with release 0.2 (with factory reset)</p><p>killing hostapd, udhcpd</p><p># wpa_supplicant -c /etc/wpa_supplicant.conf -i mlan0 &amp;<br /># udhcpc -i mlan0</p><p>got access to the internet, woohoow !</p></blockquote></div><p>I&#039;m unable to follow these instructions to connect to client Wifi. When I give the kill command for hostapd or udhcpd, the shell hangs &amp; never comes back. Have to pull the card out.</p><p>@dankrause It would be great if ou could release 0.3 with client AP configuration file. Later on you can add to that and release future releases. </p><p>Thanks to the community and Dan, pixelb in particular.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p229220">
				<div class="post-metadata">
					<div class="post-num">Post #173</div>
					<div class="post-author">chapeau_melon</div>
					<div class="post-datetime">
						4 Apr 2014, 21:01					</div>
				</div>
				<div class="post-content content">
					<p>Greetings...to all of you who have quit some experience meanwhile with these cards...<br />I have a Flucard on which I simply want to permanently change the images used in the admin-web-page. <br />How can I do this ? Can you provide me with some help and guidance ? <br />Thanks in advance, have a nice day...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p229393">
				<div class="post-metadata">
					<div class="post-num">Post #174</div>
					<div class="post-author">gflorez</div>
					<div class="post-datetime">
						6 Apr 2014, 19:43					</div>
				</div>
				<div class="post-content content">
					<p>I rebuilded to the internal web page the hidden option to upload a file. It&#039;s just a link to the page &quot;uploadto.html&quot; that already existed in the stock Trascend WIFISD. I only added the link to the start page, &quot;frame1.html&quot;(fragment):</p><p>&lt;/style&gt;<br />&lt;/head&gt;<br />&lt;body &gt;<br />&lt;div id=&quot;navigation&quot; border=&quot;0&quot; width=&quot;100%&quot;&gt;<br />&lt;table cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%&quot; boder=&quot;0&quot; &gt;<br />&lt;tbody&gt;<br />&lt;tr&gt;&lt;td width=&quot;100%&quot;&gt;&lt;a href=&quot;/page.html&quot; target=&quot;f3&quot;&gt; &amp;#8226; Home Page&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;<br />&lt;tr&gt;&lt;td width=&quot;100%&quot;&gt;&lt;a href=&quot;/cgi-bin/show_pic.cgi&quot; target=&quot;f3&quot;&gt;&amp;#8226; Photos&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;<br />&lt;tr&gt;&lt;td width=&quot;100%&quot;&gt;&lt;a href=&quot;/cgi-bin/show_video.cgi&quot; target=&quot;f3&quot;&gt;&amp;#8226; Videos&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;<br />&lt;tr&gt;&lt;td width=&quot;100%&quot;&gt;&lt;a href=&quot;/cgi-bin/file_list.pl&quot; target=&quot;f3&quot;&gt;&amp;#8226; Files&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;<br />&lt;tr&gt;&lt;td width=&quot;100%&quot;&gt;&lt;a href=&quot;/uploadto.html&quot; target=&quot;f3&quot;&gt;&amp;#8226; Upload&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;<br />&lt;tr&gt;&lt;td width=&quot;100%&quot;&gt;&lt;a href=&quot;/cgi-bin/kcard_edit_config_insup.pl&quot; target=&quot;f3&quot;&gt;&amp;#8226; Settings&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;<br />&lt;tr&gt;&lt;td width=&quot;100%&quot;&gt;&lt;a href=&quot;/cgi-bin/kcard_status.pl&quot; target=&quot;f3&quot;&gt;&amp;#8226; Information&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;<br />&lt;/tbody&gt;&lt;/table&gt;<br />&lt;/div&gt;</p><p>Then I placed the modified &quot;frame1.html&quot; in the root of the WIFISD and added some lines to the &quot;autorun.sh&quot; script:</p><p>cp /mnt/sd/frame1.html /www/frame1.html<br />chmod a+x /www/frame1.html</p><p>That commands copy every boot the modified file to his place inside the card&#039;s system and give it privileges.</p><p>Then you need to reboot, as the current web page is read at run time from some sort of cache, charged at the boot time(copying the modified file by ftp directly to the /www directory doesn&#039;t work for immediate test...).</p><p>I think this method can also be used to change the graphics of the website or make a totally new one.</p>											<p class="post-edited">(Last edited by <strong>gflorez</strong> on 6 Apr 2014, 20:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p229855">
				<div class="post-metadata">
					<div class="post-num">Post #175</div>
					<div class="post-author">gflorez</div>
					<div class="post-datetime">
						10 Apr 2014, 23:23					</div>
				</div>
				<div class="post-content content">
					<p>I`ve found an old(1-June-2013) perl script from Sven that allows &quot;Shoot&amp;View Receiver&quot; on Windows or Linux: <a href="http://sourceforge.net/p/transsvr/wiki/Home/">http://sourceforge.net/p/transsvr/wiki/Home/</a>&nbsp; </p><p>Sven disects the ports&nbsp; and protocols involved in the process.</p><p>But simultaneously I also found some jpeg images on the /www directory of the WIFISD card on update &gt;1.7.</p><p>It seems Transcend gives a complement to the Chrome browser and, that serie of pictures are the instructions to install it. </p><p>The extension is named.... wifisd.crx, and is located in the same directory.</p>											<p class="post-edited">(Last edited by <strong>gflorez</strong> on 13 Apr 2014, 23:48)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 7 of 10</div><nav><ul><li><a href="viewtopic.php%3Fid=45820&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=45820&amp;p=5.html">5</a></li><li><a href="viewtopic.php%3Fid=45820&amp;p=6.html">6</a></li><li class="pagination-current"><span>7</span></li><li><a href="viewtopic.php%3Fid=45820&amp;p=8.html">8</a></li><li><a href="viewtopic.php%3Fid=45820&amp;p=9.html">9</a></li><li><a href="viewtopic.php%3Fid=45820&amp;p=10.html">10</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>