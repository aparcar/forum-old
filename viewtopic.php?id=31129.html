<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> how can i build baresip ?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p140291">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">walkero</div>
					<div class="post-datetime">
						30 Jul 2011, 18:11					</div>
				</div>
				<div class="post-content content">
					<p>1)i tried to build baresip from trunk(r27777).<br />&nbsp; &nbsp; svn checkout svn://svn.openwrt.org/openwrt/trunk<br /> but i can&#039;t find baresip in [make menuconfig].<br />&nbsp; &nbsp;Network ---&gt; Telephony ---&gt; <br />&nbsp; ? ? &lt; &gt; asterisk18............................... Complete open source PBX, v1.8x&nbsp; ---&gt;&nbsp; &nbsp;<br />&nbsp; ? ? &lt; &gt; freeswitch..................... FreeSWITCH open source telephony platform&nbsp; ---&gt;&nbsp; &nbsp; <br />&nbsp; ? ? &lt; &gt; kamailio...................... Mature and flexible open source SIP server&nbsp; ---&gt;&nbsp; &nbsp;<br />&nbsp; ? ? &lt; &gt; miax..................................... A console iax (asterisk) client&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; ? ? &lt; &gt; openser.................................... Configurable, free SIP server&nbsp; ---&gt;&nbsp; &nbsp;<br />&nbsp; ? ? &lt; &gt; opensips................................................. Open SIP Server&nbsp; ---&gt;&nbsp; &nbsp; <br />&nbsp; ? ? &lt; &gt; pcapsipdump.................................... SIP sessions dumping tool&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; ? ? &lt; &gt; rtpproxy......................... RTP (Realtime Transport Protocol) proxy&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; ? ? &lt; &gt; sipp.................. test tool / traffic generator for the SIP protocol&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; ? ? &lt; &gt; siproxd.......................... SIP (Session Initiation Protocol) proxy&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; ? ? &lt; &gt; sipsak.. SIP (Session Initiation Protocol) stress and diagnostics utility&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; ? ? &lt; &gt; smap........................................ A SIP network discovery tool&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; ? ? &lt; &gt; yate......................................... Yet Another Telphony Engine&nbsp; ---&gt;&nbsp; </p><p>how can i make baresip to be built ?</p><p>2) and i can&#039;t find baresip at<br /><a href="http://downloads.openwrt.org/backfire/10.03.1-rc5/ar71xx/packages/">http://downloads.openwrt.org/backfire/1 â€¦ /packages/</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140292">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						30 Jul 2011, 18:15					</div>
				</div>
				<div class="post-content content">
					<p>It is completely broken, therfore it was not built. I do not know who pushed it into the repo but it never built anywhere here, neither with trunk nor backfire, therfore it has been disabled.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140295">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">walkero</div>
					<div class="post-datetime">
						30 Jul 2011, 18:46					</div>
				</div>
				<div class="post-content content">
					<p>Thank you for your kind reply.</p><p>&gt;therfore it has been disabled.<br />How to enable it on my local machine?<br />I want to compile baresip on my local machine.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140309">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						31 Jul 2011, 00:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>walkero wrote:</cite><blockquote><p>How to enable it on my local machine?<br />I want to compile baresip on my local machine.</p></blockquote></div><p>This is a broken package. In order to enable compilation of any broken packages, you need to enable <strong>Show broken platforms / packages</strong> as seen below:</p><div class="codebox"><pre><code>OpenWrt Attitude Adjustment (r27840) Configuration
 ????????????????????????????????????????????????????????????????????????????????????????????????????
  ???????????????????????? Advanced configuration options (for developers) ????????????????????????
  ?  Arrow keys navigate the menu.  &lt;Enter&gt; selects submenus ---&gt;.  Highlighted letters are       ?  
  ?  hotkeys.  Pressing &lt;Y&gt; includes, &lt;N&gt; excludes, &lt;M&gt; builds as package.  Press &lt;Esc&gt;&lt;Esc&gt; to   ?  
  ?  exit, &lt;?&gt; for Help, &lt;/&gt; for Search.  Legend: [*] built-in  [ ] excluded  &lt;M&gt; package  &lt; &gt;    ?  
  ?  package capable                                                                              ?  
  ? ????????????????????????????????????????????????????????????????????????????????????????????? ?  
  ? ? --- Advanced configuration options (for developers)                                       ? ?  
  ? ? [*]   Show broken platforms / packages                                                    ? ?  
  ? ? ()    Download folder                                                                     ? ?  
  ? ? ()    Local mirror for source packages                                                    ? ?  
  ? ? [*]   Automatic rebuild of packages                                                       ? ?  
  ? ? ()    Build suffix to append to the BUILD_DIR variable                                    ? ?  
  ? ? ()    Override the default TARGET_ROOTFS_DIR variable                                     ? ?  
  ? ? [ ]   Use ccache                                                                          ? ?  
  ? ? ()    Use external kernel tree                                                            ? ?  
  ? ? ()    Enter git repository to clone                                                       ? ?  
  ? ? ()    Enter path to local reference repository                                            ? ?  
  ? ??v(+)??????????????????????????????????????????????????????????????????????????????????????? ?  
  ?????????????????????????????????????????????????????????????????????????????????????????????????  
  ?                               &lt;Select&gt;    &lt; Exit &gt;    &lt; Help &gt;                                ?  
  ?????????????????????????????????????????????????????????????????????????????????????????????????</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140323">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">walkero</div>
					<div class="post-datetime">
						31 Jul 2011, 09:47					</div>
				</div>
				<div class="post-content content">
					<p>Thank you !</p><p>I enable baresip and begin to build openwrt with baresip selected ...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140430">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">alfredh</div>
					<div class="post-datetime">
						2 Aug 2011, 01:34					</div>
				</div>
				<div class="post-content content">
					<p>I am the author of baresip/libre, and I did not know that it was @BROKEN in openwrt.</p><p>which targets are failing, and are there any build logs available ?</p><br /><p>/alfred</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140445">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">walkero</div>
					<div class="post-datetime">
						2 Aug 2011, 11:11					</div>
				</div>
				<div class="post-content content">
					<p>alfredh,</p><p>Thank you for your contribution of baresip.</p><p>1) when I built baresip, there is an error:</p><p>---------------------------------------------------------------------------------------------<br />make[3]: Leaving directory `/home/openwrt/openwrt/mr3420/feeds/packages/libs/re&#039;<br />make[3]: Entering directory `/home/openwrt/openwrt/mr3420/feeds/packages/net/baresip&#039;<br />mkdir -p /home/openwrt/openwrt/mr3420/dl<br />/home/openwrt/openwrt/mr3420/scripts/download.pl &quot;/home/openwrt/openwrt/mr3420/dl&quot; &quot;baresip-0.2.0.tar.gz&quot; &quot;c4e160463b2bfb2e326e916089da1c4f&quot; &quot;<a href="http://www.creytiv.com/pub/">http://www.creytiv.com/pub/</a>&quot;<br />--2011-08-02 15:44:46--&nbsp; <a href="http://www.creytiv.com/pub/baresip-0.2.0.tar.gz">http://www.creytiv.com/pub/baresip-0.2.0.tar.gz</a><br />Resolving <a href="http://www.creytiv.com">www.creytiv.com</a>... 208.68.208.201<br />Connecting to <a href="http://www.creytiv.com">www.creytiv.com</a>|208.68.208.201|:80... connected.<br />HTTP request sent, awaiting response... 200 OK<br />Length: 272412 (266K) [application/x-gzip]<br />Saving to: `STDOUT&#039;</p><p>&nbsp; &nbsp; &nbsp;0K .......... .......... .......... .......... .......... 18% 62.2K 3s<br />&nbsp; &nbsp; 50K .......... .......... .......... .......... .......... 37%&nbsp; 162K 2s<br />&nbsp; &nbsp;100K .......... .......... .......... .......... .......... 56% 87.0K 1s<br />&nbsp; &nbsp;150K .......... .......... .......... .......... .......... 75% 48.2K 1s<br />&nbsp; &nbsp;200K .......... .......... .......... .......... .......... 93% 94.0K 0s<br />&nbsp; &nbsp;250K .......... ......&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;100%&nbsp; 668K=3.3s</p><p>2011-08-02 15:44:50 (81.1 KB/s) - written to stdout [272412/272412]</p><p>. /home/openwrt/openwrt/mr3420/include/shell.sh; . /home/openwrt/openwrt/mr3420/include/shell.sh; gzip -dc /home/openwrt/openwrt/mr3420/dl/baresip-0.2.0.tar.gz | /bin/tar -C /home/openwrt/openwrt/mr3420/build_dir/target-mips_r2_uClibc-0.9.32/baresip-0.2.0/.. -xf -<br />touch /home/openwrt/openwrt/mr3420/build_dir/target-mips_r2_uClibc-0.9.32/baresip-0.2.0/.prepared_c313b7e9bf18af502c9d30a8d27d54ce<br />(cd /home/openwrt/openwrt/mr3420/build_dir/target-mips_r2_uClibc-0.9.32/baresip-0.2.0/./; if [ -x ./configure ]; then /usr/bin/find /home/openwrt/openwrt/mr3420/build_dir/target-mips_r2_uClibc-0.9.32/baresip-0.2.0/ -name config.guess | xargs -r chmod u+w; /usr/bin/find /home/openwrt/openwrt/mr3420/build_dir/target-mips_r2_uClibc-0.9.32/baresip-0.2.0/ -name config.guess | xargs -r -n1 cp /home/openwrt/openwrt/mr3420/scripts/config.guess; /usr/bin/find /home/openwrt/openwrt/mr3420/build_dir/target-mips_r2_uClibc-0.9.32/baresip-0.2.0/ -name config.sub | xargs -r chmod u+w; /usr/bin/find /home/openwrt/openwrt/mr3420/build_dir/target-mips_r2_uClibc-0.9.32/baresip-0.2.0/ -name config.sub | xargs -r -n1 cp /home/openwrt/openwrt/mr3420/scripts/config.sub; AR=mips-openwrt-linux-uclibc-ar AS=&quot;mips-openwrt-linux-uclibc-gcc -c -Os -pipe -mips32r2 -mtune=mips32r2 -fno-caller-saves -fhonour-copts -msoft-float&quot; LD=mips-openwrt-linux-uclibc-ld NM=mips-openwrt-linux-uclibc-nm CC=&quot;mips-openwrt-linux-uclibc-gcc&quot; GCC=&quot;mips-openwrt-linux-uclibc-gcc&quot; CXX=&quot;mips-openwrt-linux-uclibc-g++&quot; RANLIB=mips-openwrt-linux-uclibc-ranlib STRIP=mips-openwrt-linux-uclibc-strip OBJCOPY=mips-openwrt-linux-uclibc-objcopy OBJDUMP=mips-openwrt-linux-uclibc-objdump SIZE=mips-openwrt-linux-uclibc-size CFLAGS=&quot;-Os -pipe -mips32r2 -mtune=mips32r2 -fno-caller-saves -fhonour-copts -msoft-float &quot; CXXFLAGS=&quot;-Os -pipe -mips32r2 -mtune=mips32r2 -fno-caller-saves -fhonour-copts -msoft-float &quot; CPPFLAGS=&quot;-I/home/openwrt/openwrt/mr3420/staging_dir/target-mips_r2_uClibc-0.9.32/usr/include -I/home/openwrt/openwrt/mr3420/staging_dir/target-mips_r2_uClibc-0.9.32/include -I/home/openwrt/openwrt/mr3420/staging_dir/toolchain-mips_r2_gcc-linaro_uClibc-0.9.32/usr/include -I/home/openwrt/openwrt/mr3420/staging_dir/toolchain-mips_r2_gcc-linaro_uClibc-0.9.32/include &quot; LDFLAGS=&quot;-L/home/openwrt/openwrt/mr3420/staging_dir/target-mips_r2_uClibc-0.9.32/usr/lib -L/home/openwrt/openwrt/mr3420/staging_dir/target-mips_r2_uClibc-0.9.32/lib -L/home/openwrt/openwrt/mr3420/staging_dir/toolchain-mips_r2_gcc-linaro_uClibc-0.9.32/usr/lib -L/home/openwrt/openwrt/mr3420/staging_dir/toolchain-mips_r2_gcc-linaro_uClibc-0.9.32/lib &quot;&nbsp; &nbsp;./configure --target=mips-openwrt-linux --host=mips-openwrt-linux --build=i686-linux-gnu --program-prefix=&quot;&quot; --program-suffix=&quot;&quot; --prefix=/usr --exec-prefix=/usr --bindir=/usr/bin --sbindir=/usr/sbin --libexecdir=/usr/lib --sysconfdir=/etc --datadir=/usr/share --localstatedir=/var --mandir=/usr/man --infodir=/usr/info --disable-nls&nbsp; &nbsp;; fi; )<br />touch /home/openwrt/openwrt/mr3420/build_dir/target-mips_r2_uClibc-0.9.32/baresip-0.2.0/.configured_<br />make -C /home/openwrt/openwrt/mr3420/build_dir/target-mips_r2_uClibc-0.9.32/baresip-0.2.0 LIBRE_MK=../re-0.2.0/mk/re.mk LIBRE_INC=../re-0.2.0/include LIBRE_SO=/home/openwrt/openwrt/mr3420/staging_dir/target-mips_r2_uClibc-0.9.32/usr/lib/libre.so MOD_AUTODETECT= USE_STDIO=1 USE_CONS=1 USE_EVDEV=1&nbsp; USE_G711=1 USE_OSS=1 USE_SPEEX=1 CC=&quot;mips-openwrt-linux-uclibc-gcc&quot; DESTDIR=&quot;/home/openwrt/openwrt/mr3420/build_dir/target-mips_r2_uClibc-0.9.32/baresip-0.2.0/ipkg-install&quot; EXTRA_CFLAGS=&quot;-Os -pipe -mips32r2 -mtune=mips32r2 -fno-caller-saves -fhonour-copts -msoft-float -DOPENWRT&quot;&nbsp; SYSROOT=&quot;/home/openwrt/openwrt/mr3420/staging_dir/toolchain-mips_r2_gcc-linaro_uClibc-0.9.32&quot; SYSROOT_ALT=&quot;/home/openwrt/openwrt/mr3420/staging_dir/target-mips_r2_uClibc-0.9.32/usr&quot; RELEASE=1 all install<br />make[4]: Entering directory `/home/openwrt/openwrt/mr3420/build_dir/target-mips_r2_uClibc-0.9.32/baresip-0.2.0&#039;<br />&nbsp; CC [M]&nbsp; build-i386/modules/stun/stun.o<br />&nbsp; LD [M]&nbsp; stun.so<br />&nbsp; CC [M]&nbsp; build-i386/modules/turn/turn.o<br />&nbsp; LD [M]&nbsp; turn.so<br />&nbsp; CC [M]&nbsp; build-i386/modules/ice/ice.o<br />&nbsp; LD [M]&nbsp; ice.so<br />&nbsp; CC [M]&nbsp; build-i386/modules/cons/cons.o<br />&nbsp; LD [M]&nbsp; cons.so<br />&nbsp; CC [M]&nbsp; build-i386/modules/evdev/evdev.o<br />&nbsp; CC [M]&nbsp; build-i386/modules/evdev/print.o<br />&nbsp; LD [M]&nbsp; evdev.so<br />&nbsp; CC [M]&nbsp; build-i386/modules/g711/g711.o<br />&nbsp; LD [M]&nbsp; g711.so<br />&nbsp; CC [M]&nbsp; build-i386/modules/oss/oss.o<br />&nbsp; LD [M]&nbsp; oss.so<br />&nbsp; CC [M]&nbsp; build-i386/modules/speex/speex.o<br />modules/speex/speex.c:7:25: fatal error: speex/speex.h: No such file or directory<br />compilation terminated.<br />make[4]: *** [build-i386/modules/speex/speex.o] Error 1<br />make[4]: Leaving directory `/home/openwrt/openwrt/mr3420/build_dir/target-mips_r2_uClibc-0.9.32/baresip-0.2.0&#039;<br />make[3]: *** [/home/openwrt/openwrt/mr3420/build_dir/target-mips_r2_uClibc-0.9.32/baresip-0.2.0/.built] Error 2<br />make[3]: Leaving directory `/home/openwrt/openwrt/mr3420/feeds/packages/net/baresip&#039;<br />make[2]: *** [package/feeds/packages/baresip/compile] Error 2<br />make[2]: Leaving directory `/home/openwrt/openwrt/mr3420&#039;<br />make[1]: *** [/home/openwrt/openwrt/mr3420/staging_dir/target-mips_r2_uClibc-0.9.32/stamp/.package_compile] Error 2<br />make[1]: Leaving directory `/home/openwrt/openwrt/mr3420&#039;<br />make: *** [world] Error 2<br />---------------------------------------------------------------------------------------------------------</p><p>then I checked dl folder,&nbsp; found<br /> re-0.2.0.tar.gz, and baresip-0.2.0.tar.gz<br />in the dl folder, but no speex-1.2rc1.tar.gz, libogg-1.1.4.tar.gz, and libosip2-3.1.0.tar.gz file in the folder.</p><p>2) I unselected baresip(make menuconfig) and built again<br />&nbsp; &nbsp;builder downloaded speex-1.2rc1.tar.gz, libogg-1.1.4.tar.gz, and libosip2-3.1.0.tar.gz file<br />&nbsp; &nbsp;and built is OK</p><p>3) I selected baresip again and built again<br />&nbsp; built is OK and found baresip_0.2.0-1_ar71xx.ipk file in the bin/ar71xx/packages folder.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140461">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						2 Aug 2011, 14:11					</div>
				</div>
				<div class="post-content content">
					<p>So, baresip isn&#039;t broken? Can you try to run it and post back your results here?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140462">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">alfredh</div>
					<div class="post-datetime">
						2 Aug 2011, 14:39					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I think that baresip is working just fine, but there might be some targets failing, we should try to find out which ones.<br />Also I think that the dependencies are not working properly for the baresip modules, please see the file baresip/Config.in:</p><div class="codebox"><pre><code>config BARESIP_MODULE_SPEEX
    bool &quot;Speex audio codec&quot;
    depends PACKAGE_baresip &amp;&amp; PACKAGE_libspeex
    default n</code></pre></div><p>the speex module is optional and can be enable/disabled, and the idea was that build deps<br />to libspeex should be automatically enabled when the module was selected. I am not sure<br />if that is working properly.</p><p>I have tested today building successfully with openwrt trunk r27875:</p><p>Atheros AR71xx/AR7240/...<br />Broadcom BCM947xx/953xx</p><br /><p>also baresip depends on libre, and libre is currently marked as @BROKEN (I am not sure why)</p><br /><p>/alfred</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140508">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">walkero</div>
					<div class="post-datetime">
						3 Aug 2011, 05:40					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m not familiar with openwrt, I guess the problem is the dependencies of baresip modules.</p><p>I will test basesip on openwrt and post the result?built is ok? <br />but have no space left on device to install basesip).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140539">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">walkero</div>
					<div class="post-datetime">
						3 Aug 2011, 19:40					</div>
				</div>
				<div class="post-content content">
					<p>Hi, alfred</p><p>I installed baresip into my tp-link mr3420 router(AR71xx) and run it,<br />I get an error:</p><p>root@OpenWrt:/# baresip<br />baresip v0.2.0 Copyright (C) 2010 - 2011 Alfred E. Heggestad &lt;aeh@db.org&gt;<br />main: configure: No such file or directory<br />main: app_init failed (No such file or directory)<br />main: main exit with error (No such file or directory)</p><p>root@OpenWrt:~# ls -la $HOME<br />drwxr-xr-x&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 40 Mar 27 03:39 .<br />drwxr-xr-x&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;160 Mar 27 02:50 ..</p><p>walkero</p>											<p class="post-edited">(Last edited by <strong>walkero</strong> on 3 Aug 2011, 19:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140592">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">alfredh</div>
					<div class="post-datetime">
						4 Aug 2011, 12:49					</div>
				</div>
				<div class="post-content content">
					<p>the error means that baresip has problems finding the config path. can you please try to specify the<br />config path using the -f option ?</p><p>Example:</p><p>$ baresip -f /tmp/baresip</p><br /><br /><br /><p>/alfred</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140601">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">walkero</div>
					<div class="post-datetime">
						4 Aug 2011, 16:41					</div>
				</div>
				<div class="post-content content">
					<p>Thank you.</p><p>my baresip lanuch success and can make a call to linphone on another pc.<br />I used a yealink usb phone p1k on my router, but there is no sound <br />from the usb phone, I think the problem maybe is yealink driver.<br />I had install the packages:<br />kmod-usb-yealink_2.6.39.2-1_ar71xx.ipk<br />baresip_0.2.0-1_ar71xx.ipk<br />kmod-sound-core_2.6.39.2-1_ar71xx.ipk<br />kmod-usb-audio_2.6.39.2-1_ar71xx.ipk<br />install kmod-hid_2.6.39.2-1_ar71xx.ipk<br />install kmod-usb-hid_2.6.39.2-1_ar71xx.ipk<br />install libogg_1.1.4-2_ar71xx.ipk<br />install libspeex_1.2rc1-1_ar71xx.ipk<br />Does baresip support yealink usb phone?</p><p>root@OpenWrt:/# baresip -f /tmp/baresip<br />&nbsp; &nbsp; baresip v0.2.0 Copyright (C) 2010 - 2011 Alfred E. Heggestad &lt;aeh@db.org&gt;<br />&nbsp; &nbsp; aucodec: PCMA 8000Hz 1ch<br />&nbsp; &nbsp; aucodec: PCMU 8000Hz 1ch<br />&nbsp; &nbsp; ausrc: oss<br />&nbsp; &nbsp; auplay: oss<br />&nbsp; &nbsp; medianat: stun<br />&nbsp; &nbsp; medianat: turn<br />&nbsp; &nbsp; medianat: ice<br />&nbsp; &nbsp; Populated 2 audio codecs<br />&nbsp; &nbsp; Populated 0 video codecs<br />&nbsp; &nbsp; Populated 0 audio filters<br />&nbsp; &nbsp; Local IP address: IPv4=eth1:192.168.0.48 IPv6=:::1<br />&nbsp; &nbsp; dl: mod: /usr/lib/baresip/modules/uuid.so (File not found)<br />&nbsp; &nbsp; conf: module uuid.so: No such file or directory<br />&nbsp; &nbsp; uuid: uuid_load: No such file or directory<br />&nbsp; &nbsp; ua: user@lan<br />&nbsp; &nbsp; Populated 1 account<br />&nbsp; &nbsp; Populated 1 contact<br />&nbsp; &nbsp; ua: user@lan: Register: Destination address required<br />&nbsp; &nbsp; ua: user@lan: Register: Destination address required<br />&nbsp; &nbsp; &gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sip:toto@192.168.1.182<br />&nbsp; &nbsp; connecting to &#039;&lt;sip:toto@192.168.1.182&gt;&#039;..<br />&nbsp; &nbsp; SIP Progress: 100 Trying ()<br />&nbsp; &nbsp; SIP Progress: 101 Dialog Establishement ()<br />&nbsp; &nbsp; oss init: 16 bit 8000 Hz 1 ch, blocksize=128<br />&nbsp; &nbsp; SIP Progress: 180 Ringing ()<br />&nbsp; &nbsp; oss init: 16 bit 8000 Hz 1 ch, blocksize=128<br />&nbsp; &nbsp; Set audio encoder: PCMA 8000Hz 1ch<br />&nbsp; &nbsp; Set audio decoder: PCMA 8000Hz 1ch<br />&nbsp; &nbsp; oss init: 16 bit 8000 Hz 1 ch, blocksize=128<br />&nbsp; &nbsp; oss init: 16 bit 8000 Hz 1 ch, blocksize=128<br />&nbsp; &nbsp; Enable telephone-event: pt_tx=101, pt_rx=101<br />&nbsp; &nbsp; video stream is disabled..<br />&nbsp; &nbsp; user@lan: Call established: sip:toto@192.168.1.182<br />&nbsp; &nbsp; ua: user@lan: Register: Destination address required ]<br />&nbsp; &nbsp; sip:toto@192.168.1.182: session closed: Connection reset by peer<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; user@lan: Call terminated (duration: 38 secs)</p><br /><p>walkero</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140654">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">alfredh</div>
					<div class="post-datetime">
						5 Aug 2011, 11:56					</div>
				</div>
				<div class="post-content content">
					<p>great to see that you got baresip running <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>I think the Yealink driver provides an API for keypad/ringtone control etc. but this API<br />is not supported by baresip. Instead, baresip has a module called &quot;evdev&quot; which can be used<br />as an input module for other USB-devices/Input devices that use the kernel linux/input.h API<br />(such as the CM109 module which I have implemented).</p><p>but the usb-audio should provide a working OSS api which should be enough for<br />audio playback/record. you can perhaps verify if this API is working as it should,<br />either by using the Audio-loop in baresip (Press &#039;a&#039;).</p><p>if you have a local SIP proxy you might add your SIP uri in /tmp/baresip/accounts</p><p>please also check that there are no NAT issues , if you are running all your nodes<br />on the local LAN, there is no need for SIP/Media-nat. otherwise you need to use<br />the medianat parameter. you can also check for incoming RTP packets in the<br />status line which is refreshed while in a call..</p><p>hope this helps!</p><br /><p>/alfred</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141816">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">alfredh</div>
					<div class="post-datetime">
						21 Aug 2011, 22:40					</div>
				</div>
				<div class="post-content content">
					<p>since walkero was able to build baresip for ar71xx, would it be possible to ask that the BROKEN flag is removed from baresip?<br />if there are still issues with building it, please send me the logs and I will have a look.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p151885">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">ccwufu</div>
					<div class="post-datetime">
						23 Dec 2011, 13:50					</div>
				</div>
				<div class="post-content content">
					<p>Hi </p><p>while bairsip lauch, it report alsa.so and avformat.so not found. <br />but it exist.<br />I modify the ~./.baresip/config to enable alsa.<br />test with trunk Dec23 at AR71xx&nbsp; (703n)</p><p>any suggestion?</p><p>dl: mod: /usr/lib/baresip/modules/avformat.so (File not found)</p><p>dl: mod: /usr/lib/baresip/modules/alsa.so (File not found)<br />conf: module alsa.so: No such file or directory</p><p>root@OpenWrt:~# ls /usr/lib/baresip/modules/<br />alsa.so&nbsp; &nbsp; &nbsp; avformat.so&nbsp; evdev.so&nbsp; &nbsp; &nbsp;ice.so&nbsp; &nbsp; &nbsp; &nbsp;sdl.so&nbsp; &nbsp; &nbsp; &nbsp;stun.so&nbsp; &nbsp; &nbsp; uuid.so<br />avcodec.so&nbsp; &nbsp;cons.so&nbsp; &nbsp; &nbsp; g711.so&nbsp; &nbsp; &nbsp; oss.so&nbsp; &nbsp; &nbsp; &nbsp;stdio.so&nbsp; &nbsp; &nbsp;turn.so</p>											<p class="post-edited">(Last edited by <strong>ccwufu</strong> on 23 Dec 2011, 17:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p151908">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">ccwufu</div>
					<div class="post-datetime">
						23 Dec 2011, 17:44					</div>
				</div>
				<div class="post-content content">
					<p>baresip failed after enabling evdev (~/.baresip/config)</p><br /><p>ui: start: alloc fail: evdev (No such file or directory)<br />main: app_start failed (No such file or directory)<br />fd 4 in use: flags=1 fh=0x2b178168 arg=0x5ba078<br />fd 5 in use: flags=1 fh=0x2b178168 arg=0x5ba6c0<br />fd 6 in use: flags=1 fh=0x2b17b620 arg=0x5ba808<br />fd 7 in use: flags=1 fh=0x2b17b620 arg=0x5c1ea8<br />Timers (1):<br />&nbsp; 0x5c2dc0: th=0x2b174790 expire=488ms<br />main: main exit with error (No such file or directory)</p><p>any suggestion?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p151933">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">ccwufu</div>
					<div class="post-datetime">
						24 Dec 2011, 07:38					</div>
				</div>
				<div class="post-content content">
					<p>finally , the call (at lan) success.</p><p>router : 703n with asterisk 1.8 and baresip<br />iphone : netdial softphone<br />usb sound card : at&nbsp; another router</p><br /><p>though the&nbsp; &quot;a&quot; loop failed.<br />Audio-loop: 8000Hz, 1ch<br />auloop: auplay failed: No such file or directory<br />auloop: auloop: No such file or directory</p><br /><p>thanks!</p>											<p class="post-edited">(Last edited by <strong>ccwufu</strong> on 24 Dec 2011, 07:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p151954">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">ccwufu</div>
					<div class="post-datetime">
						24 Dec 2011, 17:10					</div>
				</div>
				<div class="post-content content">
					<p>baresip offen unauthorized with PBX (asterisk) at same LAN.</p><p>ua: 6000@192.168.1.144: 401 Unauthorized (PBX)<br />6000@192.168.1.144: 200 OK (PBX) [1 binding]<br />ua: 6000@192.168.1.144: 401 Unauthorized (PBX)<br />6000@192.168.1.144: 200 OK (PBX) [1 binding]<br />ua: 6000@192.168.1.144: 401 Unauthorized (PBX)<br />6000@192.168.1.144: 200 OK (PBX) [1 binding]<br />ua: 6000@192.168.1.144: 401 Unauthorized (PBX)<br />6000@192.168.1.144: 200 OK (PBX) [1 binding]</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p151989">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">alfredh</div>
					<div class="post-datetime">
						25 Dec 2011, 01:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ccwufu wrote:</cite><blockquote><p>baresip failed after enabling evdev (~/.baresip/config)</p><br /><p>ui: start: alloc fail: evdev (No such file or directory)<br />main: app_start failed (No such file or directory)<br />fd 4 in use: flags=1 fh=0x2b178168 arg=0x5ba078<br />fd 5 in use: flags=1 fh=0x2b178168 arg=0x5ba6c0<br />fd 6 in use: flags=1 fh=0x2b17b620 arg=0x5ba808<br />fd 7 in use: flags=1 fh=0x2b17b620 arg=0x5c1ea8<br />Timers (1):<br />&nbsp; 0x5c2dc0: th=0x2b174790 expire=488ms<br />main: main exit with error (No such file or directory)</p><p>any suggestion?</p></blockquote></div><p>Hi, if you want to use the &quot;evdev&quot; module you need to specify the correct input device.</p><p># Input<br />input_device&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /dev/event0</p><br /><p>BTW, I just released a new version of baresip (v0.4.0) which should also fix the<br />fd/memory leak issues reported above:</p><p>Download from: <a href="http://www.creytiv.com/baresip.html">http://www.creytiv.com/baresip.html</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p151990">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">alfredh</div>
					<div class="post-datetime">
						25 Dec 2011, 01:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ccwufu wrote:</cite><blockquote><p>finally , the call (at lan) success.</p><p>router : 703n with asterisk 1.8 and baresip<br />iphone : netdial softphone<br />usb sound card : at&nbsp; another router</p><br /><p>though the&nbsp; &quot;a&quot; loop failed.<br />Audio-loop: 8000Hz, 1ch<br />auloop: auplay failed: No such file or directory<br />auloop: auloop: No such file or directory</p><br /><p>thanks!</p></blockquote></div><p>the audio-loop is only for local testing, and it is not used in a regular call.</p><p>did you manage to load the audio driver ? (alsa, oss, ..) ?</p><p>please post the complete log</p><br /><p>/alfred</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p152071">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">ccwufu</div>
					<div class="post-datetime">
						26 Dec 2011, 04:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>alfredh wrote:</cite><blockquote><div class="quotebox"><cite>ccwufu wrote:</cite><blockquote><p>baresip failed after enabling evdev (~/.baresip/config)</p><br /><p>ui: start: alloc fail: evdev (No such file or directory)<br />main: app_start failed (No such file or directory)<br />fd 4 in use: flags=1 fh=0x2b178168 arg=0x5ba078<br />fd 5 in use: flags=1 fh=0x2b178168 arg=0x5ba6c0<br />fd 6 in use: flags=1 fh=0x2b17b620 arg=0x5ba808<br />fd 7 in use: flags=1 fh=0x2b17b620 arg=0x5c1ea8<br />Timers (1):<br />&nbsp; 0x5c2dc0: th=0x2b174790 expire=488ms<br />main: main exit with error (No such file or directory)</p><p>any suggestion?</p></blockquote></div><p>Hi, if you want to use the &quot;evdev&quot; module you need to specify the correct input device.</p><p># Input<br />input_device&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /dev/event0</p><br /><p>BTW, I just released a new version of baresip (v0.4.0) which should also fix the<br />fd/memory leak issues reported above:</p><p>Download from: <a href="http://www.creytiv.com/baresip.html">http://www.creytiv.com/baresip.html</a></p></blockquote></div><p>thanks. <br />I can&#039;t build from source. I will test with openwrt when baresip 0.4.0 is available in openwrt.</p><p>here is default input setting in the default config (~/.baresip/config)<br /># Input<br />input_device/dev/event0&nbsp; &nbsp; &nbsp;==&gt;Do I need insert a space between input_device and /dev/event0<br />input_port5555</p><p>but I use the usb sound card. not usb voip phone.<br />so there is no physical evdev device at my router.</p><br /><p>BTW : I order a unknow brand&nbsp; usb voip phone ( I&#039;m not sure the CM109 chip is used on that usb voip phone)<br />how to check which usb chip used at such usb voip phone?<br />something like : cat /proc/bus/usb/0 ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p152096">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">ccwufu</div>
					<div class="post-datetime">
						26 Dec 2011, 14:00					</div>
				</div>
				<div class="post-content content">
					<p>after install kmod-usb-hid and insert a usb mouse ( I don&#039;t get the usb voip phone yet today)<br />evdev loaded successfully.<br />~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br />evdev: evdev device name: PIXART USB OPTICAL MOUSE<br />Supported event types:<br />&nbsp; Event type 0x00&nbsp; (Unknown event type: 0x0000)<br />&nbsp; Event type 0x01&nbsp; (Keys or Buttons)<br />&nbsp; Event type 0x02&nbsp; (Relative Axes)<br />&nbsp; Event type 0x04&nbsp; (Something miscellaneous)<br />Supported Keys:<br />&nbsp; Key&nbsp; 0x110&nbsp; (Left Button)<br />&nbsp; Key&nbsp; 0x111&nbsp; (Right Button)<br />&nbsp; Key&nbsp; 0x112&nbsp; (Middle Button)<br />Supported LEDs:<br />2233487735@sip2sip.info: 200 OK (SIP Thor on OpenSIPS XS 1.4.5) [1 binding]<br />evdev: unhandled key code 272<br />evdev: unhandled key code 273</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p152098">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">ccwufu</div>
					<div class="post-datetime">
						26 Dec 2011, 14:40					</div>
				</div>
				<div class="post-content content">
					<p>I test &quot;a&quot; loopback right after baresip launch , </p><p>it still report <br />Audio-loop: 8000Hz, 1ch<br />auloop: auplay failed: No such file or directory<br />auloop: auloop: No such file or directory</p><p>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~full log~~~~~~~~~~~~~~~</p><p>root@OpenWrt:~/.baresip# baresip<br />baresip v0.3.0 Copyright (C) 2010 - 2011 Alfred E. Heggestad &lt;aeh@db.org&gt;<br />aucodec: PCMA 8000Hz 1ch<br />aucodec: PCMU 8000Hz 1ch<br />ausrc: oss<br />auplay: oss<br />medianat: stun<br />medianat: turn<br />medianat: ice<br />Populated 2 audio codecs<br />Populated 0 video codecs<br />Populated 0 audio filters<br />Local IP address: IPv4=pppoe-wan:nnn.xx.mmm.xx IPv6=:::1<br />ua: 6000@192.168.1.144<br />ua: 22nnnnnnnnnnn@sip2sip.info<br />Populated 2 accounts<br />Populated 1 contact<br />evdev: evdev device name: PIXART USB OPTICAL MOUSE<br />Supported event types:<br />&nbsp; Event type 0x00&nbsp; (Unknown event type: 0x0000)<br />&nbsp; Event type 0x01&nbsp; (Keys or Buttons)<br />&nbsp; Event type 0x02&nbsp; (Relative Axes)<br />&nbsp; Event type 0x04&nbsp; (Something miscellaneous)<br />Supported Keys:<br />&nbsp; Key&nbsp; 0x110&nbsp; (Left Button)<br />&nbsp; Key&nbsp; 0x111&nbsp; (Right Button)<br />&nbsp; Key&nbsp; 0x112&nbsp; (Middle Button)<br />Supported LEDs:<br />22nnnnnnnnnnn@sip2sip.info: 200 OK (SIP Thor on OpenSIPS XS 1.4.5) [1 binding]<br />Audio-loop: 8000Hz, 1ch<br />auloop: auplay failed: No such file or directory<br />auloop: auloop: No such file or directory<br />ua: 6000@192.168.1.144: Register: Connection timed out<br />ua: 6000@192.168.1.144: Register: Connection timed out</p><p>--- Modules (8) ---<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; stdio type=ui&nbsp; &nbsp; &nbsp;ref=1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;cons type=ui&nbsp; &nbsp; &nbsp;ref=1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; evdev type=ui&nbsp; &nbsp; &nbsp;ref=1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;g711 type=codec&nbsp; ref=1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; oss type=audio&nbsp; ref=1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;stun type=mnat&nbsp; &nbsp;ref=1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;turn type=mnat&nbsp; &nbsp;ref=1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ice type=mnat&nbsp; &nbsp;ref=1</p><p>--- Help ---<br /> /&nbsp; &nbsp; &nbsp;- Search contacts<br /> =&nbsp; &nbsp; &nbsp;- Chat mode<br /> a&nbsp; A&nbsp; - Audio-loop toggle<br /> b ESC - Hangup<br /> C&nbsp; &nbsp; &nbsp;- List contacts<br /> SPACE - Toggle UA<br /> ENTER - Accept incoming call<br /> c&nbsp; &nbsp; &nbsp;- Call status<br /> d&nbsp; &nbsp; &nbsp;- Dial<br /> e&nbsp; &nbsp; &nbsp;- Codec status<br /> f&nbsp; &nbsp; &nbsp;- Audio Filter Chain<br /> h&nbsp; &nbsp; &nbsp;- Help menu<br /> i&nbsp; &nbsp; &nbsp;- SIP debug<br /> m&nbsp; &nbsp; &nbsp;- Module debug<br /> M&nbsp; &nbsp; &nbsp;- Main loop debug<br /> n&nbsp; &nbsp; &nbsp;- Network debug<br /> o&nbsp; O&nbsp; - Send OPTIONS to all contacts<br /> P&nbsp; &nbsp; &nbsp;- Polling method toggle<br /> q&nbsp; &nbsp; &nbsp;- Quit<br /> r&nbsp; &nbsp; &nbsp;- Reg status<br /> s&nbsp; &nbsp; &nbsp;- System info<br /> t&nbsp; &nbsp; &nbsp;- Timer debug<br /> u&nbsp; &nbsp; &nbsp;- UA debug<br /> v&nbsp; V&nbsp; - Video-loop toggle<br /> w&nbsp; &nbsp; &nbsp;- Play sine wave<br /> y&nbsp; &nbsp; &nbsp;- Memory status<br /> z&nbsp; &nbsp; &nbsp;- NAT status</p><p>Audio codecs: (2)<br />&nbsp; &nbsp;8 PCMA&nbsp; &nbsp; &nbsp;8000Hz/1<br />&nbsp; &nbsp;0 PCMU&nbsp; &nbsp; &nbsp;8000Hz/1<br />Video codecs: (0)<br />ua: 6000@192.168.1.144: Register: Connection timed out</p><p>--- Modules (8) ---<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; stdio type=ui&nbsp; &nbsp; &nbsp;ref=1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;cons type=ui&nbsp; &nbsp; &nbsp;ref=1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; evdev type=ui&nbsp; &nbsp; &nbsp;ref=1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;g711 type=codec&nbsp; ref=1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; oss type=audio&nbsp; ref=1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;stun type=mnat&nbsp; &nbsp;ref=1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;turn type=mnat&nbsp; &nbsp;ref=1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ice type=mnat&nbsp; &nbsp;ref=1</p><p>re main loop:<br />&nbsp; maxfds:&nbsp; 128<br />&nbsp; nfds:&nbsp; &nbsp; 10<br />&nbsp; method:&nbsp; 3 (epoll)</p><p>--- System info: ---<br /> Machine:&nbsp; mips/linux<br /> Version:&nbsp; 0.3.0<br /> Build:&nbsp; &nbsp; 32-bit little endian<br /> Kernel:&nbsp; &nbsp;Linux OpenWrt 3.0.12 #1 Wed Dec 21 09:43:28 MST 2011 mips<br /> Uptime:&nbsp; &nbsp;3 mins 36 secs<br /> Started:&nbsp; Mon Dec 26 20:03:23 2011<br /> Compiler: 4.5.4 20110808 (prerelease)<br />aufile: alloc: sine.wav: No such file or directory<br />Un-registering 2 useragents..</p><p>root@OpenWrt:~/.baresip# find / -name *.wav<br />/overlay/usr/share/baresip/message.wav<br />/overlay/usr/share/baresip/ringback.wav<br />/overlay/usr/share/baresip/notfound.wav<br />/overlay/usr/share/baresip/ring.wav<br />/overlay/usr/share/baresip/busy.wav<br />/overlay/usr/share/baresip/error.wav<br />/usr/share/baresip/message.wav<br />/usr/share/baresip/ringback.wav<br />/usr/share/baresip/notfound.wav<br />/usr/share/baresip/ring.wav<br />/usr/share/baresip/busy.wav<br />/usr/share/baresip/error.wav<br />root@OpenWrt:~/.baresip# </p><p>root@OpenWrt:~/.baresip# ls /dev/dsp&nbsp; -al<br />crw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp;14,&nbsp; &nbsp;3 Dec 26 20:03 /dev/dsp</p><p>root@OpenWrt:~/.baresip# ls /dev/snd/ -al<br />drwxr-xr-x&nbsp; &nbsp; 2 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;120 Dec 24 14:35 .<br />drwxr-xr-x&nbsp; &nbsp; 6 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1000 Dec 26 20:13 ..<br />crw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; 116,&nbsp; &nbsp;0 Dec 24 14:35 controlC0<br />crw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; 116,&nbsp; 24 Dec 24 14:35 pcmC0D0c<br />crw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; 116,&nbsp; 16 Dec 24 14:35 pcmC0D0p<br />crw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; 116,&nbsp; 33 Dec 24 14:35 timer</p><br /><p>root@OpenWrt:~/.baresip# cat /proc/bus/usb/devices</p><p>T:&nbsp; Bus=01 Lev=00 Prnt=00 Port=00 Cnt=00 Dev#=&nbsp; 1 Spd=480&nbsp; MxCh= 2<br />B:&nbsp; Alloc=&nbsp; 0/800 us ( 0%), #Int=&nbsp; 1, #Iso=&nbsp; 0<br />D:&nbsp; Ver= 2.00 Cls=09(hub&nbsp; ) Sub=00 Prot=00 MxPS=64 #Cfgs=&nbsp; 1<br />P:&nbsp; Vendor=1d6b ProdID=0002 Rev= 3.00<br />S:&nbsp; Manufacturer=Linux 3.0.12 platform-usb-ehci<br />S:&nbsp; Product=Generic Platform EHCI Controller<br />S:&nbsp; SerialNumber=ehci-platform.0<br />C:* #Ifs= 1 Cfg#= 1 Atr=e0 MxPwr=&nbsp; 0mA<br />I:* If#= 0 Alt= 0 #EPs= 1 Cls=09(hub&nbsp; ) Sub=00 Prot=00 Driver=hub<br />E:&nbsp; Ad=81(I) Atr=03(Int.) MxPS=&nbsp; &nbsp;4 Ivl=256ms</p><p>T:&nbsp; Bus=01 Lev=01 Prnt=01 Port=00 Cnt=01 Dev#=&nbsp; 2 Spd=480&nbsp; MxCh= 2<br />D:&nbsp; Ver= 2.00 Cls=09(hub&nbsp; ) Sub=00 Prot=01 MxPS=64 #Cfgs=&nbsp; 1<br />P:&nbsp; Vendor=0000 ProdID=0000 Rev= 0.00<br />C:* #Ifs= 1 Cfg#= 1 Atr=a0 MxPwr=&nbsp; 0mA<br />I:* If#= 0 Alt= 0 #EPs= 1 Cls=09(hub&nbsp; ) Sub=00 Prot=00 Driver=hub<br />E:&nbsp; Ad=81(I) Atr=03(Int.) MxPS=&nbsp; &nbsp;1 Ivl=256ms</p><p>T:&nbsp; Bus=01 Lev=02 Prnt=02 Port=00 Cnt=01 Dev#=&nbsp; 6 Spd=12&nbsp; &nbsp;MxCh= 0<br />D:&nbsp; Ver= 1.10 Cls=00(&gt;ifc ) Sub=00 Prot=00 MxPS=64 #Cfgs=&nbsp; 1<br />P:&nbsp; Vendor=0d8c ProdID=000c Rev= 1.00<br />S:&nbsp; Product=C-Media USB Headphone Set<br />C:* #Ifs= 4 Cfg#= 1 Atr=a0 MxPwr=100mA<br />I:* If#= 0 Alt= 0 #EPs= 0 Cls=01(audio) Sub=01 Prot=00 Driver=snd-usb-audio<br />I:* If#= 1 Alt= 0 #EPs= 0 Cls=01(audio) Sub=02 Prot=00 Driver=snd-usb-audio<br />I:&nbsp; If#= 1 Alt= 1 #EPs= 1 Cls=01(audio) Sub=02 Prot=00 Driver=snd-usb-audio<br />E:&nbsp; Ad=01(O) Atr=09(Isoc) MxPS= 200 Ivl=1ms<br />I:* If#= 2 Alt= 0 #EPs= 0 Cls=01(audio) Sub=02 Prot=00 Driver=snd-usb-audio<br />I:&nbsp; If#= 2 Alt= 1 #EPs= 1 Cls=01(audio) Sub=02 Prot=00 Driver=snd-usb-audio<br />E:&nbsp; Ad=82(I) Atr=05(Isoc) MxPS= 100 Ivl=1ms<br />I:* If#= 3 Alt= 0 #EPs= 1 Cls=03(HID&nbsp; ) Sub=00 Prot=00 Driver=usbhid<br />E:&nbsp; Ad=83(I) Atr=03(Int.) MxPS=&nbsp; &nbsp;4 Ivl=32ms</p><p>T:&nbsp; Bus=01 Lev=02 Prnt=02 Port=01 Cnt=02 Dev#= 13 Spd=1.5&nbsp; MxCh= 0<br />D:&nbsp; Ver= 1.10 Cls=00(&gt;ifc ) Sub=00 Prot=00 MxPS= 8 #Cfgs=&nbsp; 1<br />P:&nbsp; Vendor=093a ProdID=2510 Rev= 1.00<br />S:&nbsp; Manufacturer=PIXART<br />S:&nbsp; Product=USB OPTICAL MOUSE<br />C:* #Ifs= 1 Cfg#= 1 Atr=a0 MxPwr=100mA<br />I:* If#= 0 Alt= 0 #EPs= 1 Cls=03(HID&nbsp; ) Sub=01 Prot=02 Driver=usbhid<br />E:&nbsp; Ad=81(I) Atr=03(Int.) MxPS=&nbsp; &nbsp;4 Ivl=10ms<br />root@OpenWrt:~/.baresip#<br />root@OpenWrt:~/.baresip# cat config<br />#<br /># baresip configuration<br />#</p><p>#------------------------------------------------------------------------------</p><p># Core<br />poll_method&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;epoll</p><p># Input<br />input_device&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /dev/event0<br />input_port&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5555</p><p># SIP<br />sip_trans_bsize&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;128<br />#sip_listen&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;127.0.0.1:5050</p><p># Audio<br />audio_dev<br />audio_srate&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;8000-48000<br />audio_channels&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1-2<br />#audio_aec_length&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;128 # [ms]</p><p># Video<br />video_dev<br />video_size&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 352x288<br />video_bitrate&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;384000<br />video_fps&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;25<br />#video_selfview&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;window # {window,pip}</p><p># Jitter Buffer<br />jitter_buffer_delay&nbsp; &nbsp; &nbsp;5-10&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # frames</p><p># AVT - Audio/Video Transport<br />rtp_tos&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;184<br />#rtp_ports&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 10000-20000<br />#rtp_bandwidth&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 512-1024 # [kbit/s]<br />rtcp_enable&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1<br />rtcp_mux&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0</p><p># NAT Behavior Discovery<br />natbd_interval&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# in seconds</p><p># Network<br />#dns_server&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;10.0.0.1:53</p><p>#------------------------------------------------------------------------------<br /># Modules</p><p>module_path&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/usr/lib/baresip/modules</p><p># UI Modules<br />module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; stdio.so<br />module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cons.so<br />module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; evdev.so</p><p># Audio codec Modules (in order)<br />#module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;g7221.so<br />#module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;g722.so<br />module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; g711.so<br />#module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;gsm.so<br />#module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;l16.so<br />#module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;speex.so<br />#module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;celt.so<br />#module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;bv32.so</p><p># Audio filter Modules (in order)<br /># NOTE: AEC should be before Preproc<br />#module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sndfile.so<br />#module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;speex_aec.so<br />#module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;speex_pp.so<br />#module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;speex_resamp.so<br />#module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;plc.so</p><p># Audio driver Modules<br />module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; oss.so<br />#module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;alsa.so<br />#module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;portaudio.so<br />#module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;gst.so</p><p># Video codec Modules (in order)<br />#module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;avcodec.so<br />#module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;vpx.so</p><p># Video source modules<br />#module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;avformat.so<br />#module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;v4l.so<br />#module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;v4l2.so</p><p># Video display modules<br />#module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sdl.so<br />#module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;x11.so</p><p># Media NAT modules<br />module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; stun.so<br />module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; turn.so<br />module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ice.so</p><p># Media encoding modules<br />#module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;srtp.so</p><p>#------------------------------------------------------------------------------<br /># Module parameters</p><br /><p># Speex codec parameters<br />speex_quality&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;7 # 0-10<br />speex_complexity&nbsp; &nbsp; &nbsp; &nbsp; 7 # 0-10<br />speex_enhancement&nbsp; &nbsp; &nbsp; &nbsp;0 # 0-1<br />speex_vbr&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 # Variable Bit Rate 0-1<br />speex_vad&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 # Voice Activity Detection 0-1<br />speex_agc_level 8000<br />root@OpenWrt:~/.baresip#</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p152506">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">alfredh</div>
					<div class="post-datetime">
						31 Dec 2011, 11:06					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>it looks like the name of the Audio Device is missing for your OSS configuration.<br />can you make sure that the config parameter &quot;audio_dev&quot; is set to a correct value?</p><p>e.g.:</p><p>audio_dev&nbsp; &nbsp; /dev/dsp&nbsp; &nbsp; &nbsp;# for OSS</p><p>or</p><p>audio_dev&nbsp; &nbsp; &nbsp;default&nbsp; &nbsp; &nbsp; &nbsp;# for ALSA</p><br /><br /><p>/alfred</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>