<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Differences in config between the fresh source and downloaded image?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p117085">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">robertchanlist</div>
					<div class="post-datetime">
						14 Sep 2010, 08:56					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,</p><p>Sorry for asking so many beginner questions in this group and thanks for the great help this far.</p><p>I notice that the size of the image built with the fresh source (i.e. built from the SVN check-out without any modification in the configurations) and the size of the pre-built image downloaded from the website are very different (7MB vs. 4MB, based on the same target).&nbsp; </p><p>In fact, the image built from the fresh source doesn’t seem to be correct (Luci won’t load, although failsafe mode still works).&nbsp; </p><p>So what are the major differences in the config files between the fresh source and the pre-built image?&nbsp; If I want to build a working image from the fresh source, what configuration do I need to change (other than changing the target machine)?</p><p>Thanks very much in advance.</p><p>Regards,</p><p>Robert</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p117088">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">eleon216</div>
					<div class="post-datetime">
						14 Sep 2010, 12:25					</div>
				</div>
				<div class="post-content content">
					<p>when building from source only the base-system is selected by default, no other packages are selected. So, you have to select additional packages you need, and you can choose between building them into the image or compiling them as seperate packages (modules) to install them later. Integrating into the image has the advantage, that you save (flash-)space, because the compressionrate is higher.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p117125">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">robertchanlist</div>
					<div class="post-datetime">
						14 Sep 2010, 20:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>eleon216 wrote:</cite><blockquote><p>when building from source only the base-system is selected by default, no other packages are selected. So, you have to select additional packages you need, and you can choose between building them into the image or compiling them as seperate packages (modules) to install them later. Integrating into the image has the advantage, that you save (flash-)space, because the compressionrate is higher.</p></blockquote></div><p>Hi eleon,</p><p>Thanks for the explanation.&nbsp; </p><p>My major problem is that I do want to start from the base-system (I only changed the target to TP-Link tl-wr741nd v1 which is my router).&nbsp; The build and the flashing all went smooth, but Luci doesn&#039;t load (and therefore I cannot connect to 192.168.1.1) after flashing.&nbsp; </p><p>So what else do I need to enable luci?&nbsp; I went through all the config options (through make menuconfig and make kernel_menconfig), there isn&#039;t anything to specify luci though.&nbsp; Any pointer will be greatly appreciated.</p><p>Thanks very much in advance.</p><p>Regards,</p><p>Robert</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p117127">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">CuriousFig</div>
					<div class="post-datetime">
						14 Sep 2010, 20:25					</div>
				</div>
				<div class="post-content content">
					<p>See the LuCI documentation for setting up LuCI: <a href="http://luci.subsignal.org/trac/wiki/Installation">http://luci.subsignal.org/trac/wiki/Installation</a></p><p>If after following those steps Luci is still not visible in menuconfig, try a make package/symlinks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p117194">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">eleon216</div>
					<div class="post-datetime">
						15 Sep 2010, 11:21					</div>
				</div>
				<div class="post-content content">
					<p>make package/symlinks is outdated, </p><p>check out the wiki: <a href="http://wiki.openwrt.org/doc/howto/build">http://wiki.openwrt.org/doc/howto/build</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p117263">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">robertchanlist</div>
					<div class="post-datetime">
						16 Sep 2010, 07:07					</div>
				</div>
				<div class="post-content content">
					<p>Hi Eleon and CuriousFig,</p><p>Thanks very much for the help.</p><p>I followed the instructions on the links and the build completed successfully.&nbsp; However, when I look into the /bin/ar71xx/ directory, I cannot find the target image.&nbsp; That is, I specified TP-Link TL-WR741ND as my target in both menuconfig and kernel_menuconfig, but I only got the following:</p><p>-rw-r--r-- 1 patrick patrick&nbsp; 4027432 2010-09-16 10:28 openwrt-ar71xx-rootfs.tar.gz<br />-rw-r--r-- 1 patrick patrick&nbsp; 5373952 2010-09-16 10:28 openwrt-ar71xx-root.jffs2-128k<br />-rw-r--r-- 1 patrick patrick&nbsp; 5373952 2010-09-16 10:28 openwrt-ar71xx-root.jffs2-64k<br />-rw-r--r-- 1 patrick patrick&nbsp; 3276800 2010-09-16 10:28 openwrt-ar71xx-root.squashfs<br />-rw-r--r-- 1 patrick patrick&nbsp; 3219460 2010-09-16 10:28 openwrt-ar71xx-root.squashfs-4k<br />-rw-r--r-- 1 patrick patrick&nbsp; 1193594 2010-09-16 10:28 openwrt-ar71xx-uImage-gzip.bin<br />-rw-r--r-- 1 patrick patrick&nbsp; &nbsp;860028 2010-09-16 10:28 openwrt-ar71xx-uImage-lzma.bin<br />-rwxr-xr-x 1 patrick patrick&nbsp; 2640456 2010-09-16 10:28 openwrt-ar71xx-vmlinux.bin<br />-rwxr-xr-x 1 patrick patrick&nbsp; 2706848 2010-09-16 10:28 openwrt-ar71xx-vmlinux.elf<br />-rw-r--r-- 1 patrick patrick&nbsp; 1245184 2010-09-16 10:28 openwrt-ar71xx-vmlinux.gz<br />-rw-r--r-- 1 patrick patrick&nbsp; &nbsp;917504 2010-09-16 10:28 openwrt-ar71xx-vmlinux.lzma<br />-rw-r--r-- 1 patrick patrick 26112826 2010-09-16 10:31 OpenWrt-ImageBuilder-ar71xx-for-Linux-i686.tar.bz2<br />-rw-r--r-- 1 patrick patrick 26962227 2010-09-16 10:30 OpenWrt-SDK-ar71xx-for-Linux-i686-gcc-4.3.3+cs_uClibc-0.9.30.1.tar.bz2<br />-rw-r--r-- 1 patrick patrick 13525554 2010-09-16 10:32 OpenWrt-Toolchain-ar71xx-for-mips_r2-gcc-4.3.3+cs_uClibc-0.9.30.1.tar.bz2</p><p>That is, the target image&nbsp; &quot;openwrt-ar71xx-tl-wr1043nd-v1-squashfs-factory.bin&quot; is missing.&nbsp; I did get that in my previous build (without Luci) though.&nbsp; </p><p>I don&#039;t think the addition of Luci is the cause.&nbsp; But what else could I be missing (I am using the latest source from SVN)?</p><p>Thanks again in advance.</p><p>Regards,</p><p>Robert</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p117300">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">eleon216</div>
					<div class="post-datetime">
						16 Sep 2010, 20:17					</div>
				</div>
				<div class="post-content content">
					<p>run make -V99 and look for errors. </p><p>But the compilation seems fine, just combining the kernel-image and rootfs-image to&nbsp; trx- and bin-files fails. <br />I think your rootfs is just to big, I&#039;m not sure whats the real limit, but I experienced something around 6MByte. (the flash has only 8MByte, some space is use for the bootloader, etc. and you need some space for your configuration-changes) so this limit makes probably sense.</p><p>You can try only building the squashfs-rootfs because thats what you will likely flash. If it doesn&#039;t work deselect packages which you don&#039;t need. If you need all of them consider using &quot;mount-extroot&quot;, and move the rootfs to a big usbstick, oder usb-harddrive.</p><p>If you think the limit is nonsense... figure out where you can change it, or how to build a trx yourself <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>ps: I just checked: your device tl-wr741ND has just 4MB flash so, your image is way too big!</p>											<p class="post-edited">(Last edited by <strong>eleon216</strong> on 16 Sep 2010, 20:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p117357">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">robertchanlist</div>
					<div class="post-datetime">
						17 Sep 2010, 07:21					</div>
				</div>
				<div class="post-content content">
					<p>Hi Eleon,</p><p>Thanks so much again for your detailed instructions.&nbsp; I really appreciate it.</p><p>Yeah, I think you are right.&nbsp; I have trimmed many packages and rebuild again, now I got the target image, and it is now flashed perfectly onto my TL-WR741ND.</p><p>By the way, as I just posted as a new topic, I now have problem in configuring mesh networking in Luci.&nbsp; Maybe you can help me again as well.</p><p>Basically, after flashing the image to the router, I just cannot find any mesh (or 802.11s) related menu in Luci.&nbsp; So do I need to configure mesh in Luci at all?&nbsp; </p><p>If so, where in Luci can I find the 802.11s configuration menu?</p><p>Thanks very much in advance.</p><p>Regards,</p><p>Rober</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p117364">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">robertchanlist</div>
					<div class="post-datetime">
						17 Sep 2010, 11:24					</div>
				</div>
				<div class="post-content content">
					<p>OK.&nbsp; .&nbsp; I finally figured out that it is hidden inside the “Mode” field underneath the Network-&gt;Wifi-&gt;Radio menu.</p><p>Now mesh is enabled.&nbsp; I will try it out soon.</p><p>Regards,</p><p>Robert.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>