<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TL-WR841N and OpenVPN</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p117084">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">redflag237</div>
					<div class="post-datetime">
						14 Sep 2010, 08:33					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I&#039;m trying to run openvpn on my WR841N since several days, without success.<br />Support for this Model is given since Backfire. When running the 10.03 including rc&#039;s and beta, no wireless is visible inside luci. Forthermore I can&#039;t find it&#039;s atheros chipset as an adapter configured via telnet. By running 10.03.1 the wireless Section is Visible in Luci and it works fine.</p><p>So my Problem is that this Version takes about 3.5MB of Flash. The free rest of it is not enough for installing openVPN (opkg says that). Does anyone have an idea how do deal with this?</p><p>Redflag237</p>											<p class="post-edited">(Last edited by <strong>redflag237</strong> on 14 Sep 2010, 11:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p117089">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">eleon216</div>
					<div class="post-datetime">
						14 Sep 2010, 12:34					</div>
				</div>
				<div class="post-content content">
					<p>build your own image integrate all packages you need (openvpn, openssl,...) into the image. If you are lucky the image you will get is small enough, cause compression-rate of the image is higher than of the jffs2-partition where you can install additional packages.&nbsp; If it&#039;s still too big, you have to deselect packages you really don&#039;t need, or which are not mandatory (e.g. luci-webinterface)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p117092">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mrii</div>
					<div class="post-datetime">
						14 Sep 2010, 12:52					</div>
				</div>
				<div class="post-content content">
					<p>if you have any server in your local network, that runs 24/7, you could install an nfs-server there and mount nfs on the router. nfs packages are much smaller than openvpn with libopenssl. inside this nfs share you can install as much as you like - including openvpn.</p><p>only downside i see: if your server crashes, your router might, too.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p117384">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">redflag237</div>
					<div class="post-datetime">
						17 Sep 2010, 15:40					</div>
				</div>
				<div class="post-content content">
					<p>Okay seems fine. Where can I get the default package List for my build?<br />Or is there any command to build the default list plus &quot;openvpn chillispot&quot;?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p117686">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">redflag237</div>
					<div class="post-datetime">
						22 Sep 2010, 12:09					</div>
				</div>
				<div class="post-content content">
					<p>How can I get a list of packages, that i need for my system? Actually I&#039;ve created an image via Imagebuilder, but it reboots when i chance the network config. Somethings going wrong with it.<br />I&#039;ve installed the following packages:<br />base-files busybox dnsmasq dropbear firewall hotplug2 iptables kernel kmod-button-hotplug kmod-input-core kmod-input-gpio-buttons kmod-input-polldev kmod-ipt-nathelper kmod-leds-gpio kmod-usb-core kmod-usb-ohci kmod-usb2 libc libgcc mtd opkg ppp ppp-mod-pppoe swconfig uci udevtrigger openvpn chillispot openssl</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p117687">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">eleon216</div>
					<div class="post-datetime">
						22 Sep 2010, 13:00					</div>
				</div>
				<div class="post-content content">
					<p>the imagebuilder for the ar71xx-plattform seems to be broken <a href="https://forum.openwrt.org/viewtopic.php?id=26552">https://forum.openwrt.org/viewtopic.php?id=26552</a></p><p>I would recommend building (compling) everything yourself. check out the Build-HOWTO <a href="http://wiki.openwrt.org/doc/howto/build">http://wiki.openwrt.org/doc/howto/build</a> it&#039;s really quite easy!</p><p>Just select the correct Target System (ar71xx/....) and correct Target Profile (you have to figure out which revision/version of the WR841N you got) If it&#039;s the right Target Profile all your hardware-drivers should be selected (for the wifi, switch, usb etc.) to make sure check if kmod-ath9k, crda and wpad-mini are selected if you want to use wifi.&nbsp; The base-packages are selected by default (firewall, busybox, dnsmasq,... ). I think only the webinterface (luci) is missing. You have to decide which additional packages you will need. you only need to select the packages you what to use (e.g. openvpn) all dependencies (like libssl,...) will be selected automatically.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p117791">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">redflag237</div>
					<div class="post-datetime">
						24 Sep 2010, 16:53					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>My self-build image works really fine. The only disadvantage is that i dowsn&#039;t come along with the wifi config. Following i&#039;ve posted my wireless config. Does anyone see big mistakes? Why does the Wifi Interface don&#039;t come up at startup?</p><p>-----------------------------</p><p>config &#039;wifi-device&#039; &#039;radio0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;type&#039; &#039;mac80211&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;channel&#039; &#039;5&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;macaddr&#039; &#039;00:23:cd:1c:2c:ce&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;hwmode&#039; &#039;11ng&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;htmode&#039; &#039;HT20&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list &#039;ht_capab&#039; &#039;SHORT-GI-40&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list &#039;ht_capab&#039; &#039;TX-STBC&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list &#039;ht_capab&#039; &#039;RX-STBC1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list &#039;ht_capab&#039; &#039;DSSS_CCK-40&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;disabled&#039; &#039;0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;txpower&#039; &#039;5&#039;</p><p>config &#039;wifi-iface&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;device&#039; &#039;radio0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;network&#039; &#039;lan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;mode&#039; &#039;ap&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ssid&#039; &#039;OpenWrt&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;encryption&#039; &#039;psk2&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;key&#039; &#039;X8a4KJu0pQVYRO3Q9VDUnVoDZbzDkIdzFI4De6bBFNoiDxbo1REtCVyoXa&#039;</p><p>config &#039;wifi-iface&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;device&#039; &#039;radio0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ssid&#039; &#039;HOTSPLOTS&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;network&#039; &#039;wan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;mode&#039; &#039;ap&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;encryption&#039; &#039;none&#039;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118174">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">redflag237</div>
					<div class="post-datetime">
						30 Sep 2010, 16:26					</div>
				</div>
				<div class="post-content content">
					<p>Doesn&#039;t anybody know how to bring this atheros chipset up?<br />I&#039;ve built the default Package List with correct Selection of the Platform and Chipset (plus openvpn and chillispot). The command iwconfig only gives me an interface called wlan0.</p><p>I would enjoy reading an answer :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118184">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">oneru</div>
					<div class="post-datetime">
						30 Sep 2010, 19:18					</div>
				</div>
				<div class="post-content content">
					<p>Try replacing &quot;radio0&quot; with &quot;wlan0&quot; in your wireless config.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118340">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">redflag237</div>
					<div class="post-datetime">
						2 Oct 2010, 18:50					</div>
				</div>
				<div class="post-content content">
					<p>Hmmm I think i got the mistake now, but i don&#039;t know how to fix it :-)</p><p>I&#039;ve replaced the radio0 with wlan0, with no effect. Wlan0 doesn&#039;t come up at bootup.<br />I can manually switch wlan0 on by typing &quot;ifconfig wlan0 up&quot;, but this case doesn&#039;t load the config for this Interface &quot;/etc/config/wireless&quot;. Wlan0 relies unconfigured.</p><p>I&#039;ve looked up &quot;/etc/init.d/network&quot;, where i found a reference to call &quot;/sbin/wlan up&quot;.<br />Then I&#039;ve looked up this reference. This script searches for active WLAN interfaces and tries to bring them up, but it seems to fail at startup.</p><p>Maybe the Problem is about the different Name of the Interfaces, because a Router with LuCi installed calls it &quot;radio0&quot;.</p><p>Can anybody help me with this Problem?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118909">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">redflag237</div>
					<div class="post-datetime">
						12 Oct 2010, 07:49					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve solved one of my mistakes. Something seems to was wrong with my config. For anybody else who will has this Problem - i&#039;ve solved it as follows:<br />1. read specific config &quot;/sbin/wifi detect&quot;<br />2. replace old config &quot;/sbin/wifi detect &gt; /etc/config/wireless&quot;<br />3. activate wlan &quot;vi /etc/config/wireless&quot; and delete the disable-flag (set to 1). Furthermore set your own SSID and Encryption.<br />4. &quot;reboot&quot;</p><p>I hope that this will help anybody.</p><p>When I try to set more than one WiFi-Network in AP-Mode, the first will be enabled and the rest of the config is ignored. Any Ideas???</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119228">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">redflag237</div>
					<div class="post-datetime">
						18 Oct 2010, 08:36					</div>
				</div>
				<div class="post-content content">
					<p>My Device wlan0 is in monitor mode. I can&#039;t set it to master mode. Can anybody help me?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161321">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">kiteplans</div>
					<div class="post-datetime">
						19 Mar 2012, 07:11					</div>
				</div>
				<div class="post-content content">
					<p>redflag - I am also trying to setup OPENVPN on this router - were you ever able to get this working?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>