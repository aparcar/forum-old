<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Kamikaze 7.06 on RB532A</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 1 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p54009">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">nathan_vanan</div>
					<div class="post-datetime">
						16 Aug 2007, 16:27					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />I am wondering can I burn kamikaze image on routerboard RB532A.<br />Here is why I am asking. Routerboard povides patches only for <br />2.4.30 and 2.4.31 kernel, and the latest version of kamikaze uses <br />2.6 kernel. So, are there patches available for latest kernel, or <br />I miss something.</p><p>thanks,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54029">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">iam</div>
					<div class="post-datetime">
						16 Aug 2007, 21:05					</div>
				</div>
				<div class="post-content content">
					<p>Just take a look at openwrt site <br />you can download allready compiled for rb532 image</p><p><a href="http://downloads.openwrt.org/kamikaze/7.07/rb532-2.6/">http://downloads.openwrt.org/kamikaze/7.07/rb532-2.6/</a></p><p>You can compile image by yourself with partition size and type <br />you need for your additional packages.</p><p>Just take a closer look at it <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Take CompactFlash and dd choosen image to it...</p><p>It works like a charm .. </p><p>Sincerely</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54034">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">nathan_vanan</div>
					<div class="post-datetime">
						16 Aug 2007, 22:45					</div>
				</div>
				<div class="post-content content">
					<p>Thank you for the link.<br />I took a closer look but I could not figure what those files are for.<br />There is no readme....could you plse give me a quick step-by-step<br />guidenace to compile my own image. Or, are there any docs available <br />for that....thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54038">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Bartman007</div>
					<div class="post-datetime">
						16 Aug 2007, 23:23					</div>
				</div>
				<div class="post-content content">
					<p>I quickly cleaned up the <a href="http://wiki.openwrt.org/OpenWrtDocs/Hardware/Mikrotik/RB532">RB532 wiki page</a>, which provides basic installation instructions.&nbsp; As I do not own a RB532 I cannot confirm that the directions work.&nbsp; They direct you to write OpenWrt to a CF card so it won&#039;t touch any existing OS you have installed in onboard flash.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54039">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">toboz</div>
					<div class="post-datetime">
						16 Aug 2007, 23:35					</div>
				</div>
				<div class="post-content content">
					<p>hello nathan_vanan,</p><p>I also have a rb532a whith openwrt kamikaze 7.07 installed. To buil your own firmware it&#039;s really easy (thanks to the nice OpenWrt developpers work):</p><p>1) create a working directory, for instance :</p><p>$ mkdir /home/your-user-name/openwrt<br />$ cd /home/your-user-name/openwrt</p><p>2) Check out the 7.07 sources</p><p>$ wget <a href="http://downloads.openwrt.org/kamikaze/7.07/kamikaze_7.07.tar.bz2">http://downloads.openwrt.org/kamikaze/7 … 07.tar.bz2</a> &amp;&amp; tar jxvf kamikaze_7.07.tar.bz2</p><p>3) Optional: if you want X-Wrt extension</p><p>$ cd kamikaze_7.07/package<br />$ svn checkout <a href="http://svn.berlios.de/svnroot/repos/xwrt/trunk/package/webif">http://svn.berlios.de/svnroot/repos/xwr … kage/webif</a><br />$ svn checkout <a href="http://svn.berlios.de/svnroot/repos/xwrt/trunk/package/webif-batman">http://svn.berlios.de/svnroot/repos/xwr … bif-batman</a><br />$ svn checkout <a href="http://svn.berlios.de/svnroot/repos/xwrt/trunk/package/webif-mesh">http://svn.berlios.de/svnroot/repos/xwr … webif-mesh</a><br />$ svn checkout <a href="http://svn.berlios.de/svnroot/repos/xwrt/trunk/package/webif-netsukuku">http://svn.berlios.de/svnroot/repos/xwr … -netsukuku</a><br />$ svn checkout <a href="http://svn.berlios.de/svnroot/repos/xwrt/trunk/package/webif-olsr">http://svn.berlios.de/svnroot/repos/xwr … webif-olsr</a></p><p>4) Customize the sources</p><p>$ cd kamikaze_7.07<br />$ make menuconfig<br />(make sure you save changes when exiting)<br />$ make package/symlinks (this enables all packages)<br />$ make menuconfig</p><p>--&gt; it will open a configuration menu as a traditional linux kernel. In this menu you can for instance tweak busybox (the Swiss Army Knife of Embedded Linux), add or remoe specific kernel modules (filesystem, wireless drivers, ...), add or remove some applications (freeradius, chillispot, openvpn, ...). You will see, you have the possibility to really customize your firmware. In my case, I always build a firmware whith a 128 MB parition size (the size of the NAND memory of our rb532a). One time your configuration finished, quit and save the menuconfig.</p><p>5) Run the compilation</p><p>$ make V=99</p><p>and be patient ... the firmware is under the bin directory and the packages are under the bin/package directory (from the kamikaze_7.07 directory)</p><p>6) Install the firmware on a compact flash (suppose your CF is detected under /dev/sdc)</p><p>$ dd if=bin/openwrt-rb532-2.6-jffs2-128k.bin of=/dev/sdc</p><p>7) Put CF into the rb532&#039;s slot</p><p>8) Start the board and see throught a serial cable the startup.</p><p>Note: by default the wan interface is firewalled, you can edit /etc/firewall.user in oder to autorize the ssh traffic. I hope for anything to have forgotten.</p><p>Good luck !</p>											<p class="post-edited">(Last edited by <strong>toboz</strong> on 17 Aug 2007, 14:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54088">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">nathan_vanan</div>
					<div class="post-datetime">
						17 Aug 2007, 15:46					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the great help.<br />I tried both, the pre-built image, and my own image.<br />I use CF 512M. For both images kernel booted OK, but it failed <br />to mount the root file system after a tons of &quot;MAgic bitmask&quot; errors.<br />It unabled to mount root-fs on unknown-block(1,0)...<br />I did search on google, and this forum, not much help...</p><p>thanks again.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54202">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">toboz</div>
					<div class="post-datetime">
						19 Aug 2007, 22:38					</div>
				</div>
				<div class="post-content content">
					<p>You like having a configuration problem. If you want I can send you my .config file which really works fine on my rb532. Do you still use the ext2 filesystem as you said in this topic ? <a href="http://forum.openwrt.org/viewtopic.php?id=9008&amp;p=2">http://forum.openwrt.org/viewtopic.php?id=9008&amp;p=2</a></p><p>t.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54243">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">nathan_vanan</div>
					<div class="post-datetime">
						20 Aug 2007, 16:04					</div>
				</div>
				<div class="post-content content">
					<p>Hi toboz,<br />plse do provide your .config file......I will try that too...<br />thanks,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54244">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">nathan_vanan</div>
					<div class="post-datetime">
						20 Aug 2007, 16:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nathan_vanan wrote:</cite><blockquote><p>Hi toboz,<br />plse do provide your .config file......I will try that too...<br />thanks,</p></blockquote></div><p>No, I am not using ext2 file system, using jffs2.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54255">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">toboz</div>
					<div class="post-datetime">
						20 Aug 2007, 21:51					</div>
				</div>
				<div class="post-content content">
					<p>Hello nathan_vanan,</p><p>You can download my .config file here: <a href="http://mypics.fr/openwrt-firmware/.config">http://mypics.fr/openwrt-firmware/.config</a></p><p>I advise you to use the 7.07 sources as I described you in my previous post. As you will see, I build some packages directly into my firmware (like freeradius, vsftpd, ...), of course you are free to disable them. Don&#039;t forget to make make menuconfig one time (don&#039;t need to save), make package/symlinks, and finally make menuconfig (this will enable the extra packages).</p><p>If the compilations fails (it&#039;s strange, since it works fine for me), you can send me your .config file that I will compile for you if you want.</p><p>Best regards.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54320">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">nathan_vanan</div>
					<div class="post-datetime">
						21 Aug 2007, 16:55					</div>
				</div>
				<div class="post-content content">
					<p>Hi toboz,<br />Thanks for your time.<br />This what I did:<br />- I replaced the .config file with yours <br />- I compiled (7.07) the source code - OK<br />- I cd to /bin<br />- Then I issued this, dd if=openwrt-rb532-2.6-jffs2-128k.bin of=/dev/sdb - sdb is my 512CF<br />- I booted to CF<br />- SAME ERROR - unable to mount rootfs on unknown-block 31,0</p><p>Am I missing steps between, do i need to copy rootfs or anything.</p><p>After the &quot;dd&quot; command my CF look like this,<br />Disk /dev/sdb: 512 MB, 512999424 bytes<br />16 heads, 32 sectors/track, 1956 cylinders<br />Units = cylinders of 512 * 512 = 262144 bytes</p><p>&nbsp; &nbsp;Device Boot&nbsp; &nbsp; &nbsp; Start&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;End&nbsp; &nbsp; &nbsp; Blocks&nbsp; &nbsp;Id&nbsp; System<br />/dev/sdb1&nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 17&nbsp; &nbsp; &nbsp; &nbsp; 4336&nbsp; &nbsp;27&nbsp; Unknown<br />/dev/sdb2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 18&nbsp; &nbsp; &nbsp; &nbsp; 2066&nbsp; &nbsp; &nbsp; 524528&nbsp; &nbsp;83&nbsp; Linux</p><br /><p>I am stuck,<br />Merci</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54330">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">toboz</div>
					<div class="post-datetime">
						21 Aug 2007, 19:12					</div>
				</div>
				<div class="post-content content">
					<p>it&#039;s really strange, can you try my built firmware version in order to know if it does the same issue ...</p><p>you can find it there: <a href="http://mypics.fr/openwrt-firmware/7.07/22-08-07/openwrt-rb532-2.6-jffs2-128k.bin">http://mypics.fr/openwrt-firmware/7.07/ … 2-128k.bin</a></p><p>and try to run the &quot;sync&quot; command after the &quot;dd&quot; command. strange ...</p><p>tu ne crains pas ne t&#039;en fais pas :-)&nbsp; Avec plaisir !</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54405">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">nathan_vanan</div>
					<div class="post-datetime">
						22 Aug 2007, 15:16					</div>
				</div>
				<div class="post-content content">
					<p>Hi toboz,<br />Encore une fois, merci pour votre temps, apprentissage du français <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />Yes, I am getting exactly the same error message....could be my hardware...<br />any ideas....<br />thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54465">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">toboz</div>
					<div class="post-datetime">
						23 Aug 2007, 15:00					</div>
				</div>
				<div class="post-content content">
					<p>I can&#039;t&nbsp; see what I could be else than your hardware. try an other CF, an other rb532 ... The firmware which I gave you the link work perfectly for me and my rb532. What else could I say ? Sorry for you and bonne chance pour ton apprentissage du français <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Sincérement,</p><p>t.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54473">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">nathan_vanan</div>
					<div class="post-datetime">
						23 Aug 2007, 17:51					</div>
				</div>
				<div class="post-content content">
					<p>Hi toboz,<br />Thanks again.<br />I got kamikaze working on my board but with different config.<br />What I did was I used ramdisk option insted of fs. Works fine so far...</p><p>But, I could not get &quot;Bridged client mode&quot; working on the board.<br />Like, if i connect a laptop to one of the LAN ports of the board,<br />I want the laptop to receive a valid IP from the AP...I have <br />this board woking on sta mode....</p><p>any help would be appreciated....</p><p>thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54571">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">toboz</div>
					<div class="post-datetime">
						25 Aug 2007, 19:09					</div>
				</div>
				<div class="post-content content">
					<p>Can you please show me your configuration file:</p><p>- /etc/config/network<br />- /etc/config/wireless<br />- /etc/config/dhcp</p><p>Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54657">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">nathan_vanan</div>
					<div class="post-datetime">
						27 Aug 2007, 22:11					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />The setup I had is working now after I enable wds option <br />on both AP and STA side, &quot;option wds 1&quot;. Could you plse<br />tell me this is the only way to get that mode working or I am <br />doing weired thing. If I use an on-the-shelf router, I can not<br />enable that option in the AP site, is that correct ?</p><p>toboz, I believe you&#039;re using the RB532A board as a wireless<br />router. How can I setup this board as a on-the-shelf router.<br />I mean wan port, local network with the internet....etc.</p><p>thanks,<br />nathan.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54701">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">toboz</div>
					<div class="post-datetime">
						28 Aug 2007, 15:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nathan wrote:</cite><blockquote><p>toboz, I believe you&#039;re using the RB532A board as a wireless<br />router. How can I setup this board as a on-the-shelf router.<br />I mean wan port, local network with the internet....etc.</p></blockquote></div><p>Could you be more precise? Each ethernet port are separated, so the board is already a router. If you want you can bridge them or not, the same with the wireless interface. In my case, I use eth0 as a the wan port, and eth1, eth2, ath0 are bridged togethter. Those three interfaces represent my local network. Show me your configuration file, I will better unterstand what you want to do.</p><p>Good luck <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>t.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54728">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">nathan_vanan</div>
					<div class="post-datetime">
						28 Aug 2007, 22:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>toboz wrote:</cite><blockquote><p>In my case, I use eth0 as a the wan port, and eth1, eth2, ath0 are bridged togethter. Those three interfaces represent my local network. Show me your configuration file, I will better unterstand what you want to do.</p></blockquote></div><p>toboz,<br />It is exactly what I am trying to do. I want eth0 to be my wan port, with static IP settings. And, eth1, eth2, and ath0 to be in<br />a local network with DHCP server running behind. So, the DHCP server will assign IP address to wireless or wired computer <br />and from the computers can access internet.</p><p>This is an exact configuration of a off-the-shelf router, isn&#039;t it ?</p><p>/etc/config/wireless</p><p>config wifi-device&nbsp; wifi0<br />&nbsp; &nbsp; option type&nbsp; &nbsp; &nbsp;atheros<br />&nbsp; &nbsp; option channel&nbsp; 9</p><p>config wifi-iface<br />&nbsp; &nbsp; option device&nbsp; &nbsp; wifi0<br />&nbsp; &nbsp; option network&nbsp; &nbsp; lan<br />&nbsp; &nbsp; option mode&nbsp; &nbsp; ap<br />&nbsp; &nbsp; option ssid&nbsp; &nbsp; milton<br />&nbsp; &nbsp; option encryption none<br />&nbsp; &nbsp; option wds&nbsp; &nbsp; 1</p><br /><p>/etc/config/network</p><p># Copyright (C) 2006 OpenWrt.org</p><p>config interface loopback<br />&nbsp; &nbsp; option ifname&nbsp; &nbsp; lo<br />&nbsp; &nbsp; option proto&nbsp; &nbsp; static<br />&nbsp; &nbsp; option ipaddr&nbsp; &nbsp; 127.0.0.1<br />&nbsp; &nbsp; option netmask&nbsp; &nbsp; 255.0.0.0</p><p>config interface wan<br />&nbsp; &nbsp; option&nbsp; &nbsp; ifname&nbsp; &nbsp; &quot;eth0.1&quot;<br />&nbsp; &nbsp; option&nbsp; &nbsp; proto&nbsp; &nbsp; static<br />&nbsp; &nbsp; option &nbsp; &nbsp; ipaddr &nbsp; &nbsp; x.x.x.x<br />&nbsp; &nbsp; option &nbsp; &nbsp; netmask x.x.x.x<br />&nbsp; &nbsp; option &nbsp; &nbsp; gateway&nbsp; &nbsp; x.x.x.x<br />&nbsp; &nbsp; option&nbsp; &nbsp; dns&nbsp; &nbsp; x.x.x.x</p><p>config interface lan<br />&nbsp; &nbsp; option&nbsp; &nbsp; type&nbsp; &nbsp; bridge<br />&nbsp; &nbsp; option&nbsp; &nbsp; ifname&nbsp; &nbsp; &quot;eth0.0 ath0&quot;<br />&nbsp; &nbsp; option&nbsp; &nbsp; proto&nbsp; &nbsp; dhcp</p><br /><p>/etc/dnsmasq.conf (partial)</p><p>dhcp-range=ath0,192.168.1.10,192.168.1.20,255.255.255.255,10h</p><p>I know something is not right....plse take a look at my config</p><p>thanks.<br />nathan</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54762">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">toboz</div>
					<div class="post-datetime">
						29 Aug 2007, 13:58					</div>
				</div>
				<div class="post-content content">
					<p>Why do you create two virtual interfaces ? You don&#039;t need interfaces like &quot;eth0.1&quot; &quot;eth0.0 ath0&quot;. Here my configuration:</p><div class="codebox"><pre><code>/etc/config/wireless 

config wifi-device  wifi0
        option type     atheros
        option channel  5
        option disable  0

config wifi-iface
        option device   wifi0
        option network  lan
        option mode     ap
        option ssid     My-SSID
        option encryption none
        option hidden   0</code></pre></div><div class="codebox"><pre><code>/etc/config/network 

config interface loopback
        option ifname   lo
        option proto    static
        option ipaddr   127.0.0.1
        option netmask  255.0.0.0

config interface wan
        option ifname   eth0
        option proto    dhcp

config interface lan
        option ifname   &quot;eth1 eth2&quot;
        option type     bridge
        option proto    static
        option ipaddr  192.168.2.254
        option netmask 255.255.255.0
        option dns      &#039;192.168.0.1&#039;
        option gateway  &#039;192.168.0.1&#039;</code></pre></div><div class="codebox"><pre><code>/etc/config/dhcp

config dhcp
        option interface        lan
        option start    2
        option limit    150
        option leasetime        12h

config dhcp
        option interface        wan
        option ignore   1</code></pre></div><p>While hoping to be useful for you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54782">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">nathan_vanan</div>
					<div class="post-datetime">
						29 Aug 2007, 22:54					</div>
				</div>
				<div class="post-content content">
					<p>Hi toboz,<br />It worked. Thanks for your time and help ....</p><p>nathan.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>