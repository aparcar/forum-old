<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WBMR-HP-G300H ... willing to help</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 2 Oct 2014 and 16 Apr 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 7</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=34072&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=34072&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=34072&amp;p=7.html">7</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p154066">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">essele</div>
					<div class="post-datetime">
						13 Jan 2012, 12:14					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I&#039;ve just received a Buffalo WBMR-HP-G300H and would love to get OpenWRT on it, I notice there is some support in trunk, but I can&#039;t figure out how to get it on there, the images don&#039;t seem flashable.</p><p>I&#039;ve got dd-wrt on there ok, but I&#039;m not a great dd-wrt fan ... I really want to get to OpenWRT.</p><p>I&#039;m happy to open it up and solder on a serial console if that&#039;s what&#039;s needed, and very happy to help test etc (it&#039;s purely a test box at this stage.)</p><p>Cheers,</p><p>Lee.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p154077">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">essele</div>
					<div class="post-datetime">
						13 Jan 2012, 15:24					</div>
				</div>
				<div class="post-content content">
					<p>Actually ... given I have dd-wrt on there, could I simply do this?</p><p>mtd -r openwrt-lantiq-ar9-WBMR-jffs2-64k.image linux</p><p>Or would that brick the router?&nbsp; &nbsp;I&#039;ve just ordered a set of the security torx so I can get into the thing and get a console on it.</p><p>Cheers,</p><p>Lee.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p154090">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">essele</div>
					<div class="post-datetime">
						13 Jan 2012, 17:47					</div>
				</div>
				<div class="post-content content">
					<p>I got bored, so I decided to drill out the holes a little bit so I could get my torx bits in there, so it&#039;s now open and has a serial console all working nicely (didn&#039;t need to solder anything, it has a nice header for you) ...</p><div class="codebox"><pre><code>XR9-x chip found
DDR set @ 166.6MHz
Check initial DDR setting...DDR check ok... start booting...



ARCADYAN U-Boot 1.00 (Nov 10 2010 - 17:41:42)

AR9 BOARD
CLOCK CPU 333M RAM 166M
DRAM:  64 MB

 relocate_code start
 relocate_code finish.
Flash: 32 MB
In:    serial
Out:   serial
Err:   serial
Net:   
switch chip id=00001001
AR8316
amazon_s Switch

Copying boot params.....
DONE

Type &quot;run flash_nfs&quot; to mount root filesystem over NFS

Hit any key to stop autoboot:  0 
ARC_BOOT # printenv
bootcmd=run flash_flash
bootdelay=3
baudrate=115200
preboot=echo;echo Type &quot;run flash_nfs&quot; to mount root filesystem over NFS;echo
bootfile=uImage
mem=64M
phym=64M
netdev=eth0
console=ttyS1
baudrate=115200
tftppath=
loadaddr=0x80800000
rootpath=/mnt/full_fs
rootfsmtd=/dev/mtdblock3
nfsargs= setenv bootargs root=/dev/nfs rw nfsroot=$(serverip):$(rootpath)
ramargs=setenv bootargs root=/dev/ram rw
addip=setenv bootargs $(bootargs) ip=$(ipaddr):$(serverip):$(gatewayip):$(netmask):$(hostname):n
mtdparts=ifx_nor0:256k(uboot),128k(ubootconfig),1280k(kernel),30336k(rootfs),256k(firmware),128)
addmisc=setenv bootargs $(bootargs) console=$(console),$(baudrate) ethaddr=$(ethaddr) phym=$(ph 
flash_nfs=run nfsargs addip addmisc;bootm $(kernel_addr)
net_nfs=tftp $(loadaddr) $(tftppath)$(bootfile);run nfsargs addip addmisc;bootm
net_flash=tftp $(loadaddr) $(tftppath)$(bootfile); run flashargs addip addmisc; bootm
net_ram=tftp $(loadaddr) $(tftppath)$(bootfile); run ramargs addip addmisc; bootm
u-boot=u-boot.ifx
rootfs=rootfs.img
firmware=firmware.img
fullimage=fullimage.img
totalimage=totalimage.img
load=tftp $(loadaddr) $(u-boot)
update=protect off 1:0-2;era 1:0-2;cp.b $(loadaddr) B0000000 $(filesize)
flashargs=setenv bootargs root=$(rootfsmtd) ro rootfstype=squashfs
flash_flash=run flashargs addip addmisc; bootm $(kernel_addr)
update_uboot=tftpboot $(loadaddr) $(tftppath)$(u-boot); prot off b0000000 b1fbffff; erase b0000t
update_kernel=tftpboot $(loadaddr) $(tftppath)$(bootfile);upgrade $(loadaddr) $(filesize)
update_rootfs=tftpboot $(loadaddr) $(tftppath)$(rootfs); upgrade $(loadaddr) $(filesize)
update_firmware=tftpboot $(loadaddr) $(tftppath)$(firmware);upgrade $(loadaddr) $(filesize)
update_fullimage=tftpboot $(loadaddr) $(tftppath)$(fullimage);upgrade $(loadaddr) $(filesize)
update_totalimage=tftpboot $(loadaddr) $(tftppath)$(totalimage);upgrade $(loadaddr) $(filesize)
reset_uboot_config=prot off 0xB0040000   0xB005FFFF;  erase 0xB0040000 0xB005FFFF 1
part0_begin=0xB0000000
part1_begin=0xB0040000
part2_begin=0xB0060000
part3_begin=0xB01A0000
part4_begin=0xB1F40000
part5_begin=0xB1F80000
part6_begin=0xB1FA0000
part7_begin=0xB1FC0000
part8_begin=0xB1FE0000
total_part=9
flash_end=0xB1FFFFFF
data_block0=uboot
data_block1=ubootconfig
data_block2=kernel
data_block3=rootfs
data_block4=firmware
data_block5=sysconfig
data_block6=fwdiag
data_block7=boardcfg
data_block8=ddrconfig
data_block9=bparam
data_block10=calibration
total_db=11
f_uboot_addr=0xB0000000
f_uboot_size=0x40000
f_ubootconfig_addr=0xB0040000
f_ubootconfig_size=0x20000
f_ubootconfig_end=0xB005FFFF
f_kernel_end=0xB019FFFF
f_sysconfig_addr=0xB1F80000
f_sysconfig_size=0x20000
f_fwdiag_addr=0xB1FA0000
f_fwdiag_size=0x20000
f_ddrconfig_addr=0xB1FC8000
f_ddrconfig_size=0x8000
f_bparam_addr=0xB1FD0000
f_bparam_size=0x10000
f_calibration_addr=0xB1FE0000
f_calibration_size=0x20000
f_boardcfg_addr=0xB1FC0000
f_boardcfg_size=0x8000
reset_sysconfig=prot off 0xB1F80000   0xB1F9FFFF;  erase 0xB1F80000 0xB1F9FFFF 1
uboot_ethaddr=02:AA:BB:CC:DD:30
fw_eaddr=b0060000 b1fa0000
custom_id=0
tftp_wait=4
melco_id=RD_BB09145
u_fw=erase $(fw_eaddr); cp.b $(fileaddr) b0060000 $(filesize); run bootcmd
bootcmd=bootm b0060000
tmp_ram=82000000
tmp_bottom=83F00000
buf_ver=1.00
build_date=Nov 10 2010 - 17:41:42
ethact=amazon_s Switch
f_rootfs_size=0x007ce000
f_rootfs_addr=0xb01a0000
f_rootfs_end=0xb096e000
f_rootfs_crc=E30C0DBA
f_firmware_size=0x0002a000
f_firmware_addr=0xb1f40000
f_firmware_crc=7EEE9798
filesize=107ebd
fileaddr=80800000
ipaddr=192.168.11.1
serverip=192.168.11.2
f_kernel_size=0x00107ebd
f_kernel_addr=0xb0060000
kernel_addr=0xb0060000
f_kernel_crc=AB4BFA18
ethaddr=00:24:A5:BD:52:50
hw_rev=0
pincode=58117729
region=EU
DEF-p_wireless_ath0_11bg-wpapsk=bhern5iyusyck
DEF-p_wireless_ath0_11bg-crypto=tkip+aes
DEF-p_wireless_ath0_11bg-authmode=psk
DEF-p_wireless_ath0_11bg-authmode_ex=mixed-psk
stdin=serial
stdout=serial
stderr=serial

Environment size: 4125/131068 bytes
ARC_BOOT #</code></pre></div><p>I&#039;m a bit nervous about just flashing the new image given the mismatch in mtd partitions and all that stuff in the uboot settings, but with a serial console, tftp and nfs all being options I should stand a good chance of having some kind of recovery method.</p><p>Lee.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p154097">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">essele</div>
					<div class="post-datetime">
						13 Jan 2012, 19:15					</div>
				</div>
				<div class="post-content content">
					<p>Ok, at the risk of just talking to myself, I thought it was worth a quick follow-up.</p><p>Using dd-wrt I simply wrote the squashfs version of the image to the &quot;linux&quot; mtd partition...</p><p># mtd -r write &lt;squashfs_image_file&gt; linux</p><p>... and it all seems fine.&nbsp; The basic image is a little bare, but I didn&#039;t tweak the config at all.</p><p>I&#039;ll have a play with the DSL bits over the weekend.</p><p>Lee.</p>											<p class="post-edited">(Last edited by <strong>essele</strong> on 13 Jan 2012, 19:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p155203">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">labbe</div>
					<div class="post-datetime">
						24 Jan 2012, 08:24					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I also have this box with DD-WRT installed and I don&#039;t like it. I was wondering, what is the image you flashed with and did you get internet connection working?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p155243">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">essele</div>
					<div class="post-datetime">
						24 Jan 2012, 14:35					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>labbe wrote:</cite><blockquote><p>Hi, I also have this box with DD-WRT installed and I don&#039;t like it. I was wondering, what is the image you flashed with and did you get internet connection working?</p></blockquote></div><p>Hi Labbe,</p><p>I flashed with a squashfs image that I built from trunk and it works really well, including the DSL support.</p><p>The wireless support isn&#039;t included by default, but you just need to select the relevant bits during the menuconfig (I think it was the ath9k wireless driver, and cfg80211) also the LED&#039;s are all off by default.</p><p>I&#039;ve submitted a couple of patches to improve the handling of DSL and to include DSL visibility in LuCI, so hopefully they&#039;ll make their way into trunk fairly soon. I&#039;ll also be looking at the LED&#039;s and generally try to fix up the config of this device so it is more complete out of the default build.</p><p>Lee.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p155262">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">labbe</div>
					<div class="post-datetime">
						24 Jan 2012, 17:57					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for your quick answer, Lee. However, I haven&#039;t built an image before and am also new to all this stuff.&nbsp; I was happy with my previous router, which had Tomato firmware flashed by my friend. Unfortunately I spilled beer on it so here we are.</p><p>I know some basic linux stuff so I managed to get to the LuCI menuconfig, but I decided to stop there, as I have no idea what options I should choose and thought better to ask for more help. </p><p>So, could you give me few basic options i should choose (apart from the previously mentioned wifi drivers) or better yet, provide me with the image you flashed it, if you would be so kind. I don&#039;t care about the LEDs.</p><p>I&#039;m sure other people could also find your tips helpful if they find this topic.</p><p>Thank you.</p><p>Labbe</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p155346">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">essele</div>
					<div class="post-datetime">
						25 Jan 2012, 16:29					</div>
				</div>
				<div class="post-content content">
					<p>Ok, here&#039;s a quick summary to get it working, but you should note that we are dealing with the development branch (trunk) and things change all the time, so things may break.</p><p>What I did....</p><p>1. Check out the code:&nbsp; &nbsp;svn co <a href="http://svn.openwrt.org/openwrt/trunk">http://svn.openwrt.org/openwrt/trunk</a> trunk<br/>2. cd trunk<br/>3. Update the feeds: ./scripts/feeds update<br/>4. Install the feeds: ./scripts/feeds install<br/>4b. make package/symlinks<br/>5. Configure:&nbsp; make menuconfig<br/>&nbsp; - Target System:&nbsp; Lantiq GPON/XWAY<br/>&nbsp; - Subtarget:&nbsp; AR9<br/>&nbsp; - Target Profile:&nbsp; WBMR - Buffalo WMBR-HP-G300H<br/>&nbsp; - Target Images: I use squashfs, I haven&#039;t tested jffs2<br/>&nbsp; - You might want to enable luci (Luci/Collections/Luci)<br/>&nbsp; - Enable wireless:&nbsp; Kernel Modules/Wireless Drivers/kmod-ath9k<br/>&nbsp; - Enable hostapd: Network/hostapd and Network/hostapd-utils<br/>6. Save the config<br/>7. make</p><p>Note: when you select packages make sure they go to &quot;*&quot; and not &quot;M&quot;, that way they will be built into the image and you won&#039;t have to install them separately.</p><p>Then in bin/lantiq you will find &quot;openwrt-lantiq-ar9-WBMR-squashfs.image&quot;</p><p>Copy this to the router (I usually put it in /tmp), then you can login (assuming you already have dd-wrt on it) and change to /tmp and flash it with: mtd -r write openwrt-lantiq-ar9-WBMR-squashfs.image linux</p><p>Please note: it takes a fair amount of time to boot after this as it creates all the filesystem stuff on the remaining flash ... give it 5 - 10 mins before getting worried.</p><p>DISCLAIMER: it worked for me, but I cannot be responsible if you brick your router ... I did a couple of times and had to recover by opening it up and attaching a serial console.</p><p>Cheers,</p><p>Lee.</p>											<p class="post-edited">(Last edited by <strong>essele</strong> on 25 Jan 2012, 16:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p157457">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">taneli</div>
					<div class="post-datetime">
						15 Feb 2012, 11:06					</div>
				</div>
				<div class="post-content content">
					<p>Would any of the ready-made images at <a href="http://downloads.openwrt.org/snapshots/trunk/lantiq/">http://downloads.openwrt.org/snapshots/trunk/lantiq/</a> work? Looking at the NONE and unbranded images right now, but a bit hesitant to try.</p><p>I&#039;m currently running dd-wrt, which works ok, but I&#039;d prefer openwrt. Does openwrt support vlans on the ethernet ports (or better yet, let me separately configure them)?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p157470">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						15 Feb 2012, 12:50					</div>
				</div>
				<div class="post-content content">
					<p>AFAIK the <a href="http://wiki.openwrt.org/toh/buffalo/wbmr-hp-g300h">Buffalo WBMR-HP-G300H</a> is fully supported by OpenWrt by now.</p><p>Please work a bit on the wiki-page.</p><p>Also, sombody please do the <a href="http://wiki.openwrt.org/inbox/benchmark.openssl">OpenSSL Benchmark</a>. I am curious how the MIPS 34Kc performs.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158236">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">crissi</div>
					<div class="post-datetime">
						21 Feb 2012, 19:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>essele wrote:</cite><blockquote><p>I got bored, so I decided to drill out the holes a little bit so I could get my torx bits in there, so it&#039;s now open and has a serial console all working nicely (didn&#039;t need to solder anything, it has a nice header for you) ...</p></blockquote></div><p>How you open the case? It looks that is the second hard part...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158245">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">darkwin</div>
					<div class="post-datetime">
						21 Feb 2012, 21:03					</div>
				</div>
				<div class="post-content content">
					<p>Hello, I have flashed a image on my router &gt;&gt; mtd -r write openwrt-lantiq-ar9-WBMR-squashfs.image linux<br/>After few minutes all leds going out. i wait 10 minutes, plug off and on the power<br/>Now if i plug on the power, the router power led going on for 15 seconds. But der router is not pingable not on 192.168.(1 or 2 or 11).1</p><p>i hope i can debrick the router with the serial console. Can you tell me how i find the right pins?</p><p>I have made Pictures from router.</p><p><a href="http://s1.directupload.net/file/d/2807/75xrcta6_jpg.htm"><span class="postimg"><img src="http://s1.directupload.net/images/120221/temp/75xrcta6.jpg" alt="http://s1.directupload.net/images/120221/temp/75xrcta6.jpg"/></span></a></p><p><a href="http://s14.directupload.net/file/d/2807/acdetwrb_jpg.htm"><span class="postimg"><img src="http://s14.directupload.net/images/120221/temp/acdetwrb.jpg" alt="http://s14.directupload.net/images/120221/temp/acdetwrb.jpg"/></span></a></p><p><a href="http://s1.directupload.net/file/d/2807/6aaei4en_jpg.htm"><span class="postimg"><img src="http://s1.directupload.net/images/120221/temp/6aaei4en.jpg" alt="http://s1.directupload.net/images/120221/temp/6aaei4en.jpg"/></span></a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158439">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">crissi</div>
					<div class="post-datetime">
						23 Feb 2012, 11:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>darkwin wrote:</cite><blockquote><p>Hello, I have flashed a image on my router &gt;&gt; mtd -r write openwrt-lantiq-ar9-WBMR-squashfs.image linux<br/>After few minutes all leds going out. i wait 10 minutes, plug off and on the power<br/>Now if i plug on the power, the router power led going on for 15 seconds. But der router is not pingable not on 192.168.(1 or 2 or 11).1</p><p>i hope i can debrick the router with the serial console. Can you tell me how i find the right pins?</p></blockquote></div><p>See the <a href="http://wiki.openwrt.org/toh/buffalo/wbmr-hp-g300h">wiki entry</a>.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158440">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">crissi</div>
					<div class="post-datetime">
						23 Feb 2012, 11:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Orca wrote:</cite><blockquote><p>Please work a bit on the wiki-page.</p></blockquote></div><p>I just recieved my device. Now entered serial info and added pictures to the wiki entry.</p>											<p class="post-edited">(Last edited by <strong>crissi</strong> on 23 Feb 2012, 11:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158446">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">darkwin</div>
					<div class="post-datetime">
						23 Feb 2012, 13:21					</div>
				</div>
				<div class="post-content content">
					<p>Thx crissi. Is the Jtag port at the right side from serial Port? The 14 Points?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158483">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">crissi</div>
					<div class="post-datetime">
						23 Feb 2012, 21:10					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>essele wrote:</cite><blockquote><p>Copy this to the router (I usually put it in /tmp), then you can login (assuming you already have dd-wrt on it) and change to /tmp and flash it with: mtd -r write openwrt-lantiq-ar9-WBMR-squashfs.image linux</p></blockquote></div><p>Hm, I tried to flash on my device but there is no mtd on this device. Version of FW is:<br/></p><div class="codebox"><pre><code>WBMR-HP-G300H Ver.1.74 (R3.02/B2011/02/03 09:21:07 JST)</code></pre></div><p>Any hints?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158532">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">darkwin</div>
					<div class="post-datetime">
						24 Feb 2012, 09:07					</div>
				</div>
				<div class="post-content content">
					<p>@crissi you can flash a dd-wrt firmware then you have mtd.<br/>I have flashed this over the Webconsole from router.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158591">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">crissi</div>
					<div class="post-datetime">
						24 Feb 2012, 18:51					</div>
				</div>
				<div class="post-content content">
					<p>After compile the image and the HDR0 header using trx from dd-wrt was added I tried to flash via dd-wrt webif. I down like my image and says &#039;invalid image&#039;. Any idea whats wrong on this device?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158607">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">darkwin</div>
					<div class="post-datetime">
						24 Feb 2012, 21:08					</div>
				</div>
				<div class="post-content content">
					<p>Helo, my router is running. The time between start und pingable ist very long. </p><p>@crissi </p><p>at first flash dd-wrt then openwrt via mtd.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158643">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">crissi</div>
					<div class="post-datetime">
						25 Feb 2012, 12:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>darkwin wrote:</cite><blockquote><p>at first flash dd-wrt then openwrt via mtd.</p></blockquote></div><p>There is no mtd on this device.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158646">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">darkwin</div>
					<div class="post-datetime">
						25 Feb 2012, 12:56					</div>
				</div>
				<div class="post-content content">
					<p>Hi, you can flash the dd-wrt firmware over webif, then openwrt via ssh console with mtd.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158648">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">crissi</div>
					<div class="post-datetime">
						25 Feb 2012, 13:05					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>darkwin wrote:</cite><blockquote><p>Hi, you can flash the dd-wrt firmware over webif, then openwrt via ssh console with mtd.</p></blockquote></div><p>There is already dd-wrt on the device, flashing directly the openwrt firmware fails (squashfs image), it tells me its invalid.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p159157">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">mvil</div>
					<div class="post-datetime">
						29 Feb 2012, 23:03					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>essele wrote:</cite><blockquote><p>Ok, here&#039;s a quick summary to get it working, but you should note that we are dealing with the development branch (trunk) and things change all the time, so things may break.</p><p>What I did....</p><p>1. Check out the code:&nbsp; &nbsp;svn co <a href="http://svn.openwrt.org/openwrt/trunk">http://svn.openwrt.org/openwrt/trunk</a> trunk<br/>2. cd trunk<br/>3. Update the feeds: ./scripts/feeds update<br/>4. Install the feeds: ./scripts/feeds install<br/>4b. make package/symlinks<br/>5. Configure:&nbsp; make menuconfig<br/>&nbsp; - Target System:&nbsp; Lantiq GPON/XWAY<br/>&nbsp; - Subtarget:&nbsp; AR9<br/>&nbsp; - Target Profile:&nbsp; WBMR - Buffalo WMBR-HP-G300H<br/>&nbsp; - Target Images: I use squashfs, I haven&#039;t tested jffs2<br/>&nbsp; - You might want to enable luci (Luci/Collections/Luci)<br/>&nbsp; - Enable wireless:&nbsp; Kernel Modules/Wireless Drivers/kmod-ath9k<br/>&nbsp; - Enable hostapd: Network/hostapd and Network/hostapd-utils<br/>6. Save the config<br/>7. make</p><p>Note: when you select packages make sure they go to &quot;*&quot; and not &quot;M&quot;, that way they will be built into the image and you won&#039;t have to install them separately.</p><p>Then in bin/lantiq you will find &quot;openwrt-lantiq-ar9-WBMR-squashfs.image&quot;</p><p>Copy this to the router (I usually put it in /tmp), then you can login (assuming you already have dd-wrt on it) and change to /tmp and flash it with: mtd -r write openwrt-lantiq-ar9-WBMR-squashfs.image linux</p><p>Please note: it takes a fair amount of time to boot after this as it creates all the filesystem stuff on the remaining flash ... give it 5 - 10 mins before getting worried.</p><p>DISCLAIMER: it worked for me, but I cannot be responsible if you brick your router ... I did a couple of times and had to recover by opening it up and attaching a serial console.</p><p>Cheers,</p><p>Lee.</p></blockquote></div><p>Thanks, I was able to get OpenWRT installed on my WBMR-HP-G300H with these instructions! (my first time compiling owrt)</p><p>Only thing I&#039;m missing now are the leds, any way to get them light up?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p159183">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">crissi</div>
					<div class="post-datetime">
						1 Mar 2012, 08:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>crissi wrote:</cite><blockquote><div class="quotebox"><cite>darkwin wrote:</cite><blockquote><p>Hi, you can flash the dd-wrt firmware over webif, then openwrt via ssh console with mtd.</p></blockquote></div><p>There is already dd-wrt on the device, flashing directly the openwrt firmware fails (squashfs image), it tells me its invalid.</p></blockquote></div><p>I was wrong, its stock firmware on this device. Sorry for that. As I read [[http://www.dd-wrt.com/site/content/buffalo-highpower-routers-with-dd-wrt-factory-firmware|DD-Wrt on Buffalo routers]] I assumed it was on it.</p><p>I know that flashing via tftp should work but it should be possible to get the webflash working. I tried to adapt the correct values for buffalo-enc/buffalo-tag and got a image. This image I could upload but the the connection was reset by peer. The console shows me:</p><div class="codebox"><pre><code>cgi.c(3617) UploadCgi :x:btpd STOP-SUCCESS (0 sec)
cgi.c(3859) UploadCgi :x:MEMORY CHECK...
MidLayer.c(2067) ML_CheckMemory :X:MemFree = 23652
MidLayer.c(2071) ML_CheckMemory :X:Buffers = 4000
MidLayer.c(2075) ML_CheckMemory :X:Cached = 12788
MidLayer.c(2079) ML_CheckMemory :X:Active = 11464
MidLayer.c(2083) ML_CheckMemory :X:Inactive = 7520
cgi.c(4416) UploadCgi :DEBUG:### CFH-&gt;mark=WBMR-HP-G300H ###
cgi.c(4460) UploadCgi :DEBUG:### NON-CRYPT ###
cgi.c(4467) UploadCgi :DEBUG:firm_size:2887884  lTotalSize:2887884
cgi.c(4469) UploadCgi :DEBUG:### cyg_posix_crc32 start ###
cgi.c(4471) UploadCgi :DEBUG:### cyg_posix_crc32 end new_CRC32:616818920###
cgi.c(4483) UploadCgi :DEBUG:firm_size:2887884  lCRC32:616818920
cgi.c(4486) UploadCgi :DEBUG:CRC OK !UploadCgi(4486)
cgi.c(4532) UploadCgi :X:ADSL:AnnexB size 1946177280</code></pre></div><p>But thats only partly success.</p><p>Also I want to know where I can get a original FW file (sure I backuped the device, mtd e.g.)? I would help to play with different FW.</p><p>Second, I contacted buffalo for the sourcecode of the router and they told me that this is in progress but no current release date yet.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p159427">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">Daeldo</div>
					<div class="post-datetime">
						3 Mar 2012, 12:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>crissi wrote:</cite><blockquote><div class="quotebox"><cite>essele wrote:</cite><blockquote><p>Copy this to the router (I usually put it in /tmp), then you can login (assuming you already have dd-wrt on it) and change to /tmp and flash it with: mtd -r write openwrt-lantiq-ar9-WBMR-squashfs.image linux</p></blockquote></div><p>Hm, I tried to flash on my device but there is no mtd on this device. Version of FW is:<br/></p><div class="codebox"><pre><code>WBMR-HP-G300H Ver.1.74 (R3.02/B2011/02/03 09:21:07 JST)</code></pre></div><p>Any hints?</p></blockquote></div><p>I just bought my own copy of this modem. I&#039;ve been trying to get OpenWRT to work (trunk version), but so far tftp flashing hasn&#039;t been a success. Also the modem comes with &quot;stock FV&quot;, so updateing FV trough mtd isn&#039;t an option.</p><p>I&#039;va also tried to install dd wrt trough webUI update, but it keeps throwing &quot;Invalid image&quot;. The image has been downloaded from <a href="http://www.dd-wrt.com/site/support/router-database">http://www.dd-wrt.com/site/support/router-database</a>.</p><br/><p>Any ideas? Ultimately, I&#039;d like to get openwrt working, the process is now important. Also, atm I don&#039;t have serial console, so that pretty much leaves webUI and tftp options? I&#039;d appreciate any help I can get.</p><p>--<br/>Daeldo</p><p>EDIT:</p><p>Nevermin, got dd wrt working with another image and then mtd -r write image linux worked perfectly.</p><p>Now trying to figure out how to get RFC 1483 Routed on OpenWRT...</p>											<p class="post-edited">(Last edited by <strong>Daeldo</strong> on 3 Mar 2012, 13:08)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 7</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=34072&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=34072&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=34072&amp;p=7.html">7</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>