<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> OpenWrt irssi + screen users: character encoding issues</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 31 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p133506">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">blunden</div>
					<div class="post-datetime">
						19 Apr 2011, 21:51					</div>
				</div>
				<div class="post-content content">
					<p>After getting everything up and running (using arokh&#039;s trunk build on my WNDR3700v2) I find myself having one remaining issue. One of the reasons I wanted to run OpenWRT was to be able to run irssi in screen on the router. </p><p>The issue I have is that I&#039;m unable to correctly set the character encoding to show the extra swedish letters (åäö). On the server I run irssi now I have it set to ISO-8859-1 with the following settings in .irssi/config:</p><p>recode = ON<br />recode_autodetect_utf8 = ON<br />recode_fallback = iso-8859-1<br />recode_transliterate = ON<br />term_charset = iso-8859-1</p><p>This allows me to correctly see iso-8859-1 encoded text as well as the same letters in UTF-8. However on the router I get a different result. The characters don&#039;t show up at all (if running in screen) or some of them show up but with a white marker behind them but they look fine in the other client, I assume because PuTTY is set to ISO-8859-1 or because they are sent in the encoding defined in term_charset. To try to get screen to act like I want I added &quot;encoding ISO8859-15&quot; (8859-1 is not listed as supported and 8859-15 is almost identical as far as I know). Is it simply because I&#039;m unable to set &quot;recode_transliterate = ON&quot; because iconv doesn&#039;t work as it should/isn&#039;t found or is there some funky encoding set in the locale (I have yet found where the locale is set on this system)?</p><p>Are there any nordic users on here with the same issues who have found a solution?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p134165">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">blunden</div>
					<div class="post-datetime">
						27 Apr 2011, 15:37					</div>
				</div>
				<div class="post-content content">
					<p>Anyone?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p159326">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">blunden</div>
					<div class="post-datetime">
						2 Mar 2012, 15:18					</div>
				</div>
				<div class="post-content content">
					<p>I still don&#039;t know what encoding the router is using. How would I include support for more encodings?</p><p>I saw the post in another thread. I get errors when using recode_transliterate in irssi though that uses iconv to replace characters not in the current charset to something similar.</p><div class="quotebox"><cite>jow wrote:</cite><blockquote><p>Using the stub is fine, it supports Latin1 (ISO-8859-1), Latin 9 (ISO-8859-15) and UTF-8 which is what most people need.<br />By adding &quot;include $(INCLUDE_DIR)/nls.mk&quot; to your OpenWrt Makefile, the appropriate CFLAGS and LDFLAGS for iconv should be added automatically.</p><p>If the autopopulated TARGET_LDFLAGS are not enough use the $(ICONV_LDFLAGS) variable exported by nls.mk to refer to iconv library.</p></blockquote></div>											<p class="post-edited">(Last edited by <strong>blunden</strong> on 2 Mar 2012, 15:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p170813">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">ladoga</div>
					<div class="post-datetime">
						24 Jun 2012, 16:44					</div>
				</div>
				<div class="post-content content">
					<p>Same problem here. </p><p>Using åäö in terminal and then backspace ruins the formatting when logged into OpenWrt. Ofcourse the same problem remains in irssi + accented letters are not even rendered properly.</p><p>Does anyone know how to fix this issue? Or does anyone even know how charachter encoding in OpenWRT works, if so please enlighten us.</p>											<p class="post-edited">(Last edited by <strong>ladoga</strong> on 24 Jun 2012, 17:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p178674">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">blunden</div>
					<div class="post-datetime">
						18 Sep 2012, 23:35					</div>
				</div>
				<div class="post-content content">
					<p>Anyone with more input on this?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>