<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Netgear WNR2200 (OpenWrt isn&#039;t working)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 7 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p215316">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">wrtop</div>
					<div class="post-datetime">
						21 Oct 2013, 15:24					</div>
				</div>
				<div class="post-content content">
					<p>Hello,<br />Recently in the OpenWrt downloads available firmware to <strong>install OpenWrt on WNR2200</strong>.<br />( <a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/openwrt-ar71xx-generic-wnr2200-squashfs-factory.img">http://downloads.openwrt.org/snapshots/ â€¦ actory.img</a> )</p><p><strong>But this firmware is not working.</strong><br />I tried flashing from web interface of original firmware and DD-WRT but always was an error. (Original firmware and dd-wrt don&#039;t accept image from web)<br />I tried flashing from ssh in dd-wrt use:<br /> &quot;mtd -r write factory.img linux&quot;<br />After this router stopped responding and after the restart does not work, only Lan1 led is light.<br />And finally I tried use tftp from recovery mode but it broke router too.</p><p>Them I use tftp from recovery mode and flashed router to DD-WRT. It&#039;s OK. Router is working.<br />(Flashing from web ui, mtd and tftp is working with original firmware and DD-WRT but isn&#039;t working with OpenWrt)</p><p><span class="bbu">Has anyone else tried install OpenWrt on this router?</span></p><p>Ticket: <a href="https://dev.openwrt.org/ticket/14356">https://dev.openwrt.org/ticket/14356</a></p>											<p class="post-edited">(Last edited by <strong>wrtop</strong> on 26 Oct 2013, 20:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p215716">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">lilstevie</div>
					<div class="post-datetime">
						26 Oct 2013, 14:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>wrtop wrote:</cite><blockquote><p><span class="bbu">Has anyone else tried install OpenWrt on this router?</span></p></blockquote></div><p>Yep tried to install it myself, seems to be a problem with the configuration at build time.</p><div class="codebox"><pre><code>## Booting image at 80800000 ...
   Image Name:   MIPS OpenWrt Linux-3.10.17
   Created:      2013-10-25   5:51:53 UTC
   Image Type:   MIPS Linux Kernel Image (lzma compressed)
   Data Size:    1067679 Bytes =  1 MB
   Load Address: 80060000
   Entry Point:  80060000
   Verifying Checksum ... OK
   Uncompressing Kernel Image ... OK
No initrd
## Transferring control to Linux (at address 80060000) ...
## Giving linux memsize in bytes, 67108864

Starting kernel ...

[    0.000000] Linux version 3.10.17 (openwrt@snapon) (gcc version 4.6.4 (OpenWrt/Linaro GCC 4.6-2013.05 r38529) ) #1 Thu Oct 24 22:50:38 PDT 2013
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU revision is: 00019374 (MIPS 24Kc)
[    0.000000] SoC: Atheros AR7241 rev 1
[    0.000000] Clocks: CPU:360.000MHz, DDR:360.000MHz, AHB:180.000MHz, Ref:5.000MHz
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 04000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone ranges:
[    0.000000]   Normal   [mem 0x00000000-0x03ffffff]
[    0.000000] Movable zone start for each node
[    0.000000] Early memory node ranges
[    0.000000]   node   0: [mem 0x00000000-0x03ffffff]
[    0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
[    0.000000] Kernel command line:  board=WNR2200 console=ttyS0,115200 mtdparts=spi0.0:320k(u-boot)ro,128k(u-boot-env)ro,7680k(firmware),64k(art)ro rootfstype=squashfs,jffs2 noinitrd
[    0.000000] PID hash table entries: 256 (order: -2, 1024 bytes)
[    0.000000] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Writing ErrCtl register=00000000
[    0.000000] Readback ErrCtl register=00000000
[    0.000000] Memory: 61204k/65536k available (2314k kernel code, 4332k reserved, 602k data, 216k init, 0k highmem)
[    0.000000] SLUB: HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.000000] NR_IRQS:51
[    0.000000] Calibrating delay loop... 239.61 BogoMIPS (lpj=1198080)
[    0.070000] pid_max: default: 32768 minimum: 301
[    0.070000] Mount-cache hash table entries: 512
[    0.080000] NET: Registered protocol family 16
[    0.090000] MIPS: machine is NETGEAR WNR2200
[    0.490000] registering PCI controller with io_map_base unset
[    0.530000] bio: create slab &lt;bio-0&gt; at 0
[    0.540000] PCI host bridge to bus 0000:00
[    0.540000] pci_bus 0000:00: root bus resource [mem 0x10000000-0x13ffffff]
[    0.550000] pci_bus 0000:00: root bus resource [io  0x0000]
[    0.550000] pci_bus 0000:00: No busn resource found for root bus, will use [bus 00-ff]
[    0.560000] pci 0000:00:00.0: fixup device configuration
[    0.560000] pci 0000:00:00.0: BAR 0: assigned [mem 0x10000000-0x1000ffff 64bit]
[    0.570000] pci 0000:00:00.0: using irq 40 for pin 1
[    0.570000] Switching to clocksource MIPS
[    0.580000] NET: Registered protocol family 2
[    0.580000] TCP established hash table entries: 512 (order: 0, 4096 bytes)
[    0.590000] TCP bind hash table entries: 512 (order: -1, 2048 bytes)
[    0.600000] TCP: Hash tables configured (established 512 bind 512)
[    0.600000] TCP: reno registered
[    0.610000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.610000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.620000] NET: Registered protocol family 1
[    0.640000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.650000] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.660000] msgmni has been set to 119
[    0.670000] io scheduler noop registered
[    0.670000] io scheduler deadline registered (default)
[    0.670000] Serial: 8250/16550 driver, 16 ports, IRQ sharing enabled
[    0.710000] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A
[    0.720000] console [ttyS0] enabled, bootconsole disabled
[    0.720000] console [ttyS0] enabled, bootconsole disabled
[    0.730000] ath79-spi ath79-spi: master is unqueued, this is deprecated
[    0.740000] m25p80 spi0.0: found mx25l6405d, expected m25p80
[    0.740000] m25p80 spi0.0: mx25l6405d (8192 Kbytes)
[    0.750000] 4 cmdlinepart partitions found on MTD device spi0.0
[    0.750000] Creating 4 MTD partitions on &quot;spi0.0&quot;:
[    0.760000] 0x000000000000-0x000000050000 : &quot;u-boot&quot;
[    0.770000] 0x000000050000-0x000000070000 : &quot;u-boot-env&quot;
[    0.770000] 0x000000070000-0x0000007f0000 : &quot;firmware&quot;
[    0.800000] 0x0000007f0000-0x000000800000 : &quot;art&quot;
[    0.820000] libphy: ag71xx_mdio: probed
[    0.820000] eth0: Atheros AG71xx at 0xb9000000, irq 4, mode:MII
[    1.380000] ag71xx ag71xx.0 eth0: connected to PHY at ag71xx-mdio.1:04 [uid=004dd041, driver=Generic PHY]
[    1.390000] eth1: Atheros AG71xx at 0xba000000, irq 5, mode:GMII
[    1.950000] eth1: Found an AR7240/AR9330 built-in switch
[    2.990000] TCP: cubic registered
[    2.990000] NET: Registered protocol family 17
[    2.990000] Bridge firewalling registered
[    3.000000] 8021q: 802.1Q VLAN Support v1.8
[    3.010000] VFS: Cannot open root device &quot;(null)&quot; or unknown-block(0,0): error -6
[    3.010000] Please append a correct &quot;root=&quot; boot option; here are the available partitions:
[    3.020000] 1f00             320 mtdblock0  (driver?)
[    3.030000] 1f01             128 mtdblock1  (driver?)
[    3.030000] 1f02            7680 mtdblock2  (driver?)
[    3.040000] 1f03              64 mtdblock3  (driver?)
[    3.040000] Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0)</code></pre></div><p>error log from uart</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p215738">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">wrtop</div>
					<div class="post-datetime">
						26 Oct 2013, 20:04					</div>
				</div>
				<div class="post-content content">
					<p>Thank you for the error log from uart. <br />It may help developers.<br />I opened ticket (url in the first message)<br />Could you add your log to this ticket?</p>											<p class="post-edited">(Last edited by <strong>wrtop</strong> on 27 Oct 2013, 07:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p215765">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">wrtop</div>
					<div class="post-datetime">
						27 Oct 2013, 08:05					</div>
				</div>
				<div class="post-content content">
					<p><strong>OpenWrt:</strong><br /></p><div class="codebox"><pre><code>[    0.740000] m25p80 spi0.0: found mx25l6405d, expected m25p80
[    0.740000] m25p80 spi0.0: mx25l6405d (8192 Kbytes)
[    0.750000] 4 cmdlinepart partitions found on MTD device spi0.0
[    0.750000] Creating 4 MTD partitions on &quot;spi0.0&quot;:
[    0.760000] 0x000000000000-0x000000050000 : &quot;u-boot&quot;
[    0.770000] 0x000000050000-0x000000070000 : &quot;u-boot-env&quot;
[    0.770000] 0x000000070000-0x0000007f0000 : &quot;firmware&quot;
[    0.800000] 0x0000007f0000-0x000000800000 : &quot;art&quot;

[    3.010000] VFS: Cannot open root device &quot;(null)&quot; or unknown-block(0,0): error -6
[    3.010000] Please append a correct &quot;root=&quot; boot option; here are the available partitions:
[    3.020000] 1f00             320 mtdblock0  (driver?)
[    3.030000] 1f01             128 mtdblock1  (driver?)
[    3.030000] 1f02            7680 mtdblock2  (driver?)
[    3.040000] 1f03              64 mtdblock3  (driver?)
[    3.040000] Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0)</code></pre></div><p><strong>DD-WRT:</strong><br /></p><div class="codebox"><pre><code>&lt;0&gt;[    0.570000] scanning for root partition
&lt;0&gt;[    0.570000] WNR2200 uboot detected
&lt;0&gt;[    0.580000] guessed bootloader size = 50000
&lt;0&gt;[    0.580000]
&lt;0&gt;[    0.580000] found squashfs at 150000
&lt;5&gt;[    0.590000] Creating 8 MTD partitions on &quot;ar7240-nor0&quot;:
&lt;5&gt;[    0.590000] 0x000000000000-0x000000050000 : &quot;RedBoot&quot;
&lt;5&gt;[    0.600000] 0x000000050000-0x000000fe0000 : &quot;linux&quot;
&lt;5&gt;[    0.610000] 0x000000150000-0x000000700000 : &quot;rootfs&quot;
&lt;5&gt;[    0.610000] mtd: partition &quot;rootfs&quot; set to be root filesystem
&lt;5&gt;[    0.620000] 0x000000700000-0x000000fe0000 : &quot;ddwrt&quot;
&lt;5&gt;[    0.630000] 0x000000fe0000-0x000000ff0000 : &quot;nvram&quot;
&lt;5&gt;[    0.630000] 0x000000ff0000-0x000001000000 : &quot;board_config&quot;
&lt;5&gt;[    0.640000] 0x000000000000-0x000001000000 : &quot;fullflash&quot;
&lt;5&gt;[    0.650000] 0x000000000000-0x000000050000 : &quot;fullboot&quot;


&lt;6&gt;[    1.240000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.</code></pre></div>											<p class="post-edited">(Last edited by <strong>wrtop</strong> on 27 Oct 2013, 08:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221025">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">rpsoft</div>
					<div class="post-datetime">
						27 Dec 2013, 22:05					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>if you want I can provide you a working sysupgrade image for the WNR2200.<br />But there are a few pre-requirements:<br />- a running TFTP server<br />- access to the serial console of the router<br />- knowlege about the current MTD partitions on the router</p><p>IMPORTANT: this is only for testing ! I&#039;m not responsible if you brick your router !</p><p>Cheers.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>