<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Failsafe mode in ASus wl500g</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 11 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p8630">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Softy</div>
					<div class="post-datetime">
						22 Jun 2005, 12:36					</div>
				</div>
				<div class="post-content content">
					<p>Hi!</p><p>I crashed my WL500g with OpenWRT.</p><p>I tried to reflash the firmware with OpenWRT, it didnt work. How I get into Fail safe? there is no DMZ light as documented.</p><p>what i did for Failsafe:<br />pressed the reset button upto 5 and 10 second, and tried to get access from WAN port, but didnt work. cant&nbsp; do ping either.</p><br /><p>what should i do now? may be&nbsp; i need a right failsafe sequence ?</p><p>Please, reply</p><p>Regards,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p8632">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">olli</div>
					<div class="post-datetime">
						22 Jun 2005, 12:53					</div>
				</div>
				<div class="post-content content">
					<p>Try it from LAN1</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p8652">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Oleg</div>
					<div class="post-datetime">
						22 Jun 2005, 21:54					</div>
				</div>
				<div class="post-content content">
					<p>Use ASUS firmware restoration tool to reflash firmware.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p8687">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Softy</div>
					<div class="post-datetime">
						24 Jun 2005, 11:13					</div>
				</div>
				<div class="post-content content">
					<p>Thank you very much guys for your reply. I want to mention something here which is a bit contrast from given manual. In my case when I got into fail safe mode, I got telnet reply in LAN port rather than WAN(as it was written in documentation reply will be on WAN port). I am not sure about the exact time to keep the button pressed but anyways it is definetly a 10 sec or a bit longer.&nbsp; According to documentation ASUS router should revert into the LAN ip address, which I set 10.10.10.10, but in this case it reverts into the defualt IP of router 192.168.1.1.</p><p>Regards and thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p10706">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">danversj</div>
					<div class="post-datetime">
						13 Aug 2005, 04:41					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m using WhiteRussian RC2 SquashFS on a WL500g.&nbsp; I seem to be able to get it to go into Failsafe mode - I can see the PWR led flashing, and I can ping the router on it&#039;s LAN_IPADDR (192.168.107.1) address.&nbsp; I can&#039;t ping it on 192.168.1.1 (I set my PCs interface to 192.168.1.2/24) and I can&#039;t telnet into it.&nbsp; I&#039;ve port-scanned it and there are no ports open - nmap reports all ports filtered.</p><p>I can&#039;t ping any IP address on the physical WAN port - but I had it unconfigured anyway.&nbsp; I had the radio in client mode and it still seems to be in client mode when in failsafe mode because I can&#039;t see it pop up as an AP in a wireless network scan.</p><p>I can&#039;t get into the WL500g because I foobar&#039;d the /etc/init.d/S50dnsmasq file.</p><p>I put<br /></p><div class="codebox"><pre><code> args=&quot;-d -l /tmp/dhcp.leases -K -F $(int2ip $start),$(int2ip $end),$(int2ip $netmask),12h 2&gt;&amp;2 &gt;/dev/null &amp;&quot;</code></pre></div><p>in it instead of the usual args line.&nbsp; I was trying to fix the dnsmasq bug described <a href="http://openwrt.org/logs/wrt54g.log.20050530">here</a> and obviously got my shell things mixed up.&nbsp; So now all the init files after S50dnsmasq won&#039;t run at boot - meaning S50dropbear doesn&#039;t get executed.</p><p>But in Failsafe mode, the router should ignore my edited file and use the one in /rom/etc/init.d/ shouldn&#039;t it?&nbsp; And telnet should be enabled, right?</p><p>I&#039;d rather not have to reflash the firmware if I don&#039;t have to, but right now it seems that failsafe mode has failed me.&nbsp; Any suggestions?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p10711">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">danversj</div>
					<div class="post-datetime">
						13 Aug 2005, 14:48					</div>
				</div>
				<div class="post-content content">
					<p>Update:</p><p>The flashing PWR led isn&#039;t Failsafe mode on the WL500g - it&#039;s the firmware recovery mode.&nbsp; If you hold down reset before connecting power, or immediately after, you go into a mode whereby you can upload a new firmware.&nbsp; The router IP address is the LAN_IPADDR that was set by the user - so if you mess up that NVRAM variable you might be in trouble.</p><p>I ended up reflashing WhiteRussian RC2 SquashFS - it didn&#039;t do firstboot after reflashing so I manually rebooted it.&nbsp; I wasn&#039;t able to telnet in straight away - I don&#039;t know why, but after reflashing I was able to get the WL500g into OpenWRT Failsafe mode by the usual method - rebooting, waiting about 3 seconds, and pressing the reset button for a few seconds.&nbsp; The router&#039;s LAN IP came up as 192.168.1.1 and I was able to telnet in.&nbsp; By doing a &quot;df -h&quot; I was able to see that firstboot had not yet run - there was no JFFS2 partition.&nbsp; I ran firstboot manually and rebooted.&nbsp; The router was is now back to normal - minus all the packages and configuration I had put on it.&nbsp; I have found that after firstboot has run I am unable to put the router in Failsafe mode.&nbsp; I have tried waiting various amounts of time after power-on, and tried pressing the reset button for various amounts of time but I can&#039;t get it to work.&nbsp; &nbsp;The only conclusion I can come to is that for some reason, under WhiteRussian SquashFS RC2, Failsafe on a WL500g doesn&#039;t work after firstboot has been run - which sort-of defeats the purpose of Failsafe mode. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />&nbsp; I don&#039;t have any more time to experiment with this, but I&#039;d appreciate it if someone else with a WL500g could have a go at getting Failsafe mode to work.&nbsp; And if you get it to work, please tell me how!</p><p>In the meantime, I&#039;m going to get a USB-serial adaptor to work so I have a backdoor in case I foobar the network init scripts again. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>