<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TP-Link Archer MR200</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 11 Apr 2018 and 6 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 11</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=64293&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=64293&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=64293&amp;p=11.html">11</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p320395">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">bpfabio</div>
					<div class="post-datetime">
						19 Apr 2016, 15:51					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,<br />has someone installed openwrt on TP-Link Archer MR200?<br />Thanks for your answwer.<br />Fabio</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p322231">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">bpfabio</div>
					<div class="post-datetime">
						2 May 2016, 18:49					</div>
				</div>
				<div class="post-content content">
					<p>No one?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p327631">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">arny91</div>
					<div class="post-datetime">
						8 Jun 2016, 14:41					</div>
				</div>
				<div class="post-content content">
					<p>Hi, i need to do the same. Is the image for archer c20i suitable for mr200? In any case i can&#039;t flash it from the web gui, probably because the name does not match. I guess i should try tftp, but if you have more info, you&#039;re welcome.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p330774">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">hadi.farnoud</div>
					<div class="post-datetime">
						7 Jul 2016, 22:00					</div>
				</div>
				<div class="post-content content">
					<p>can anyone please help us with Archer MR200?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p332509">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">rbacon</div>
					<div class="post-datetime">
						23 Jul 2016, 20:00					</div>
				</div>
				<div class="post-content content">
					<p>Hello,<br />I have the same problem... Then, going through the openwrt site I found this:</p><p>[<a href="http://wiki.openwrt.org/doc/howto/obtain.firmware.download">http://wiki.openwrt.org/doc/howto/obtai … e.download</a></p><p>Because in the case of Archer MR200 doesn&#039;t exist a file named &quot;factory&quot; at the following links:</p><p><a href="https://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7620/">https://downloads.openwrt.org/chaos_cal … ps/mt7620/</a></p><p><a href="https://downloads.openwrt.org/chaos_calmer/15.05/ramips/mt7620/">https://downloads.openwrt.org/chaos_cal … ps/mt7620/</a></p><p>and</p><p><a href="https://downloads.openwrt.org/barrier_breaker/14.07/ramips/mt7620a/">https://downloads.openwrt.org/barrier_b … s/mt7620a/</a></p><p>according to this router data that are the following:</p><p><a href="https://wiki.openwrt.org/toh/hwdata/tp-link/tp-link_archermr200v1">https://wiki.openwrt.org/toh/hwdata/tp- … hermr200v1</a></p><p>and in particular:</p><p>Platform:<br />&nbsp; &nbsp; MediaTek MT7620A</p><p>Target:<br />&nbsp; &nbsp; ramips</p><p>that we need of to find the correct version of the firmware; I found that the Archer MR200 is supported from version 14.07 called &quot;Barrier breaker&quot;. So I thought to flash on the OEM firmware to free the modem from that this file:</p><p><a href="https://downloads.openwrt.org/barrier_breaker/14.07/ramips/mt7620a/openwrt-ramips-mt7620a-uImage.bin">https://downloads.openwrt.org/barrier_b … uImage.bin</a></p><br /><p>Done this, I upgrade the firmware with one of the following sysupgrade files to have the full support:</p><p>1) <a href="https://downloads.openwrt.org/barrier_breaker/14.07/ramips/mt7620a/openwrt-ramips-mt7620a-mt7620a_mt7610e-squashfs-sysupgrade.bin">https://downloads.openwrt.org/barrier_b … pgrade.bin</a></p><p>2) <a href="https://downloads.openwrt.org/chaos_calmer/15.05/ramips/mt7620/openwrt-15.05-ramips-mt7620-mt7620a_mt7610e-squashfs-sysupgrade.bin">https://downloads.openwrt.org/chaos_cal … pgrade.bin</a></p><p>or</p><p>3) <a href="https://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7620/openwrt-15.05.1-ramips-mt7620-mt7620a_mt7610e-squashfs-sysupgrade.bin">https://downloads.openwrt.org/chaos_cal … pgrade.bin</a></p><p>In my opinion this should have to be the correct procedure.</p><p>Can someone try and comfirm to me if it works or less?</p><p>Let me know soon...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338251">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Hamy</div>
					<div class="post-datetime">
						14 Sep 2016, 12:41					</div>
				</div>
				<div class="post-content content">
					<p>I would be very interested in running openwrt on this device and i am willing to help on its development but i don&#039;t have much experience (if any) in this matter. all i can see at this point, is that the mtd partitions from original bootlog and openwrt bootlog in the <a href="https://wiki.openwrt.org/toh/tp-link/archer-mr200">wiki page</a>, don&#039;t seem to add up.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338255">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">obsy</div>
					<div class="post-datetime">
						14 Sep 2016, 13:10					</div>
				</div>
				<div class="post-content content">
					<p>Image from Archer c50 runs on this router, without 5GHz.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338257">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Hamy</div>
					<div class="post-datetime">
						14 Sep 2016, 13:28					</div>
				</div>
				<div class="post-content content">
					<p>@obsy<br />Thanks for your reply. that&#039;s great news. what about the LTE? does it work as well?<br />I am also concern about the seemingly mismatch mtd partitions region from original and c50 luci bootlog:</p><p>Original bootlog:<br /></p><div class="quotebox"><blockquote><p>Creating 6 MTD partitions on &quot;raspi&quot;:<br />0x000000000000-0x000000020000 : &quot;boot&quot;<br />0x000000020000-0x000000160000 : &quot;kernel&quot;<br />0x000000160000-0x0000007d0000 : &quot;rootfs&quot;<br />mtd: partition &quot;rootfs&quot; set to be root filesystem<br />0x0000007d0000-0x0000007e0000 : &quot;romfile&quot;<br />0x0000007e0000-0x0000007f0000 : &quot;config&quot;<br />0x0000007f0000-0x000000800000 : &quot;radio&quot;</p></blockquote></div><p>C50 luci image bootlog:<br /></p><div class="quotebox"><blockquote><p>[&nbsp; &nbsp; 0.710000] Creating 6 MTD partitions on &quot;spi32766.0&quot;:<br />[&nbsp; &nbsp; 0.720000] 0x000000000000-0x000000020000 : &quot;u-boot&quot;<br />[&nbsp; &nbsp; 0.730000] 0x000000020000-0x0000007c0000 : &quot;firmware&quot;<br />[&nbsp; &nbsp; 0.820000] 2 tplink-fw partitions found on MTD device firmware<br />[&nbsp; &nbsp; 0.830000] 0x000000020000-0x000000160000 : &quot;kernel&quot;<br />[&nbsp; &nbsp; 0.830000] 0x000000160000-0x0000007c0000 : &quot;rootfs&quot;<br />[&nbsp; &nbsp; 0.840000] mtd: device 3 (rootfs) set to be root filesystem<br />[&nbsp; &nbsp; 0.850000] 1 squashfs-split partitions found on MTD device rootfs<br />[&nbsp; &nbsp; 0.850000] 0x000000690000-0x0000007c0000 : &quot;rootfs_data&quot;<br />[&nbsp; &nbsp; 0.860000] 0x0000007c0000-0x0000007d0000 : &quot;config&quot;<br />[&nbsp; &nbsp; 0.860000] 0x0000007d0000-0x0000007e0000 : &quot;rom&quot;<br />[&nbsp; &nbsp; 0.870000] 0x0000007e0000-0x0000007f0000 : &quot;romfile&quot;<br />[&nbsp; &nbsp; 0.880000] 0x0000007f0000-0x000000800000 : &quot;radio&quot;</p></blockquote></div><p>&quot;firmware&quot; (and hence &quot;rootfs&quot; and &quot;rootfs_data&quot;) should end at 7d0000<br />7d0000 to 7e0000 should be &quot;romfile&quot;<br />7e0000 to 7f0000 should be &quot;config&quot;</p><p>am i wrong? maybe that&#039;s why 5GHz isnt working...?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338262">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">obsy</div>
					<div class="post-datetime">
						14 Sep 2016, 14:25					</div>
				</div>
				<div class="post-content content">
					<p>5GHz - lack of drivers. I&#039;m not owner of mr200, for details ask @Heinz.</p>											<p class="post-edited">(Last edited by <strong>obsy</strong> on 14 Sep 2016, 14:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338306">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Hamy</div>
					<div class="post-datetime">
						15 Sep 2016, 05:01					</div>
				</div>
				<div class="post-content content">
					<p>@obsy<br />Thanks. I have contacted Heinz via email (this was the only way i could find). let&#039;s hope that he replies. I will also try to ask an admin to move this topic to General Discussion as it does not belong here</p>											<p class="post-edited">(Last edited by <strong>Hamy</strong> on 15 Sep 2016, 05:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338311">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">Hamy</div>
					<div class="post-datetime">
						15 Sep 2016, 07:19					</div>
				</div>
				<div class="post-content content">
					<p>Update: Apparently the model that i have, is the EU version. the full model name is &quot;Archer MR200(EU)&quot; and it&#039;s Ver:1.0 . has 3 internal wifi antennas and from the stock firmware size, it&#039;s flash size must be at least 64MB</p>											<p class="post-edited">(Last edited by <strong>Hamy</strong> on 15 Sep 2016, 07:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338344">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Hamy</div>
					<div class="post-datetime">
						15 Sep 2016, 15:41					</div>
				</div>
				<div class="post-content content">
					<p>I just connected to the device via TTL and confirmed the actual flash size is in fact 8MB.</p><p>However, examining the stock firmware, it turns out the rest of the file (after u-boot, kernel and squashfs), is a huge zip file containing all the fancy webpage resources as well as lots of other libraries, executables, modules and stuff.</p><p>It appears to me that there is in fact another embedded storage in this device (likely connected via usb in the form of MMC storage). but i&#039;m not sure how to access it.</p><p>Edit: these lines in the bootlog seem specially interesting:</p><div class="quotebox"><blockquote><p>scsi0 : usb-storage 1-1:1.6<br />scsi 0:0:0:0: Direct-Access&nbsp; &nbsp; &nbsp;TP-LINK&nbsp; MMC Storage&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;PQ: 0 ANSI: 2<br />sd 0:0:0:0: [sda] Attached SCSI removable disk</p></blockquote></div><br /><br /><p>Any ideas?</p>											<p class="post-edited">(Last edited by <strong>Hamy</strong> on 15 Sep 2016, 15:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338355">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">obsy</div>
					<div class="post-datetime">
						15 Sep 2016, 16:51					</div>
				</div>
				<div class="post-content content">
					<p>Mass Storage device from modem. See:<br /></p><div class="codebox"><pre><code>T:  Bus=01 Lev=01 Prnt=01 Port=00 Cnt=01 Dev#=  5 Spd=480  MxCh= 0
D:  Ver= 2.01 Cls=00(&gt;ifc ) Sub=00 Prot=00 MxPS=64 #Cfgs=  1
P:  Vendor=2357 ProdID=000d Rev= 2.28
S:  Manufacturer=TP-LINK Technologies Co., Ltd.
S:  Product=MR200
S:  SerialNumber=b8135db25416
C:* #Ifs= 7 Cfg#= 1 Atr=a0 MxPwr=500mA
A:  FirstIf#= 0 IfCount= 2 Cls=e0(wlcon) Sub=01 Prot=03
I:* If#= 0 Alt= 0 #EPs= 1 Cls=e0(wlcon) Sub=01 Prot=03 Driver=rndis_host
E:  Ad=82(I) Atr=03(Int.) MxPS=   8 Ivl=32ms
I:* If#= 1 Alt= 0 #EPs= 2 Cls=0a(data ) Sub=00 Prot=00 Driver=rndis_host
E:  Ad=81(I) Atr=02(Bulk) MxPS= 512 Ivl=0ms
E:  Ad=01(O) Atr=02(Bulk) MxPS= 512 Ivl=0ms
I:* If#= 2 Alt= 0 #EPs= 2 Cls=ff(vend.) Sub=ff Prot=ff Driver=option
E:  Ad=83(I) Atr=02(Bulk) MxPS= 512 Ivl=0ms
E:  Ad=02(O) Atr=02(Bulk) MxPS= 512 Ivl=0ms
I:* If#= 3 Alt= 0 #EPs= 2 Cls=ff(vend.) Sub=42 Prot=01 Driver=option
E:  Ad=84(I) Atr=02(Bulk) MxPS= 512 Ivl=0ms
E:  Ad=03(O) Atr=02(Bulk) MxPS= 512 Ivl=0ms
I:* If#= 4 Alt= 0 #EPs= 3 Cls=ff(vend.) Sub=00 Prot=00 Driver=option
E:  Ad=86(I) Atr=03(Int.) MxPS=  10 Ivl=32ms
E:  Ad=85(I) Atr=02(Bulk) MxPS= 512 Ivl=0ms
E:  Ad=04(O) Atr=02(Bulk) MxPS= 512 Ivl=0ms
I:* If#= 5 Alt= 0 #EPs= 3 Cls=ff(vend.) Sub=00 Prot=00 Driver=option
E:  Ad=88(I) Atr=03(Int.) MxPS=  10 Ivl=32ms
E:  Ad=87(I) Atr=02(Bulk) MxPS= 512 Ivl=0ms
E:  Ad=05(O) Atr=02(Bulk) MxPS= 512 Ivl=0ms
I:* If#= 6 Alt= 0 #EPs= 2 Cls=08(stor.) Sub=06 Prot=50 Driver=usb-storage
E:  Ad=89(I) Atr=02(Bulk) MxPS= 512 Ivl=0ms
E:  Ad=06(O) Atr=02(Bulk) MxPS= 512 Ivl=125us</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338356">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Hamy</div>
					<div class="post-datetime">
						15 Sep 2016, 16:58					</div>
				</div>
				<div class="post-content content">
					<p>@obsy</p><p>Thanks <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>You are right. The modem seems to be running it&#039;s very own operating system (with actually a webinterface it appears, but not sure how to access it). it seems to be running android, has an android bootloader and everything. so the stock firmware, updates the device firmware as well as the LTE modem firmware. if we manage to successfully run the modem in OpenWRT, we could possibly come up with a solution to update the LTE modem firmware from the stock firmware when a new one comes around.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338366">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">Heinz</div>
					<div class="post-datetime">
						15 Sep 2016, 21:57					</div>
				</div>
				<div class="post-content content">
					<p>Hi @Hamy<br />I tried to prepare proper firmware to install from web interface, but mktplinkfw2 not create valid header.<br />Leds not work correct. I dont know how to change gpio led from switch.<br />You can use <strong>abd</strong> command on stock rom to connect to modem.</p><p>I install openwrt using bootloader, but I forgot commands.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338398">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">Hamy</div>
					<div class="post-datetime">
						16 Sep 2016, 05:27					</div>
				</div>
				<div class="post-content content">
					<p>@Heinz</p><p>Thank you for your response. i was able to get to the LTE modem&#039;s shell by using &#039;adb shell&#039; . it has an ARMv7 processor with about 32MB of ram and lots of mtdblocks:<br /></p><div class="codebox"><pre><code>/ # cat /proc/partitions 
major minor  #blocks  name

   7        6       5120 loop6
  31        0       1280 mtdblock0
  31        1       1280 mtdblock1
  31        2      11264 mtdblock2
  31        3       3456 mtdblock3
  31        4       3456 mtdblock4
  31        5        768 mtdblock5
  31        6       3456 mtdblock6
  31        7      51968 mtdblock7
  31        8        256 mtdblock8
  31        9        896 mtdblock9
  31       10      10496 mtdblock10
  31       11        256 mtdblock11
  31       12      66944 mtdblock12
  31       13       4480 mtdblock13
  31       14      10624 mtdblock14
  31       15       1408 mtdblock15
  31       16        256 mtdblock16
  31       17      37504 mtdblock17
  31       18      52096 mtdblock18</code></pre></div><p>But i suppose that&#039;s not our concern right now.</p><p>I would very much like to take a backup of the current running bootloader (mtd0) before trying to upload openwrt firmware (as i think it&#039;s likely that some u-boot parameters are specific to each device. i&#039;ve seen this before in a tp-link router). but i&#039;m kinda stuck on how to do so. there is a <strong>tftp</strong> command in the stock firmware but it just doesn&#039;t seem to do anything. i suspect that i do not know the exact arguments that it requires. it does not response to -h or --help and the conventional tftp arguments, doesn&#039;t seem to not have any effect here. and there is also no xxd or hexdump command as well.</p><p>I can not seem to be able to get to the bootloader either. getting to the bootloader, would be enough for me to backup the mtd0 and also do lots of other things. but the bootloader doesnt seem to wait for a key press. do you have any special method into getting into bootloader?</p><p>Edit: it was busybox version of tftp. i now have a backup of mtd0. but getting to the bootloader is still an issue</p>											<p class="post-edited">(Last edited by <strong>Hamy</strong> on 16 Sep 2016, 06:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338402">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">Heinz</div>
					<div class="post-datetime">
						16 Sep 2016, 07:28					</div>
				</div>
				<div class="post-content content">
					<p>To break bootloader use <strong>2</strong> or <strong>4</strong>.<br />Please make backup partition mtd 3-5 because this is important.<br />Partition mtd 0 - 2 You can restore by uploading factory firmware from official tplink site. ( cut first 512b, cut all zip file from end of firmware)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338403">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">Hamy</div>
					<div class="post-datetime">
						16 Sep 2016, 07:44					</div>
				</div>
				<div class="post-content content">
					<p>luckily, there is no difference between the device bootloader and the supplied one via stock firmware. so tftp flashing should be straight forward: you remove any tp-link header(if any), you add boot partition at the beginning of the firmware and then use builtin TFTP Recovery method to upload the firmware.</p><p>reverting back to the stock firmware should be almost the same procedure except that you very likely have to remove all the extra data after the kernel and squashfs in the stock firmware.</p><div class="quotebox"><cite>Heinz wrote:</cite><blockquote><p>I tried to prepare proper firmware to install from web interface, but mktplinkfw2 not create valid header.</p></blockquote></div><p>I suspect that&#039;s because of the very special kind of firmware it&#039;s using. after the tp-link header,u-boot, kernel and squashfs, it includes modem&#039;s firmware. the resulting firmware is huge (more than 55MB). i doubt that it could all be fit in the 64MB ram that this device has (while running its own kernel and services). so some specialized procedure could be happening. like saving the whole file in modems MMC storage first and then trying to split it and write it to appropriate locations. or maybe some other dark magic is taking place.</p><div class="quotebox"><cite>Heinz wrote:</cite><blockquote><p>To break bootloader use 2 or 4.<br />Please make backup partition mtd 3-5 because this is important.<br />Partition mtd 0 - 2 You can restore by uploading factory firmware from official tplink site. ( cut first 512b, cut all zip file from end of firmware)</p></blockquote></div><p>Oh, thanks for the notes. will do <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />Awesome. pressing &#039;4&#039; , did actually do the trick. thanks</p>											<p class="post-edited">(Last edited by <strong>Hamy</strong> on 16 Sep 2016, 07:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338428">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">Hamy</div>
					<div class="post-datetime">
						16 Sep 2016, 15:04					</div>
				</div>
				<div class="post-content content">
					<p>Any idea why ArcherC20i and ArcherC50 images are oversized in the trunk?<br />while other images are roughly 3.6MB, these images are 8MB. this is too much for MR200 which only has 8MB:</p><p><a href="https://downloads.openwrt.org/snapshots/trunk/ramips/mt7620/">https://downloads.openwrt.org/snapshots … ps/mt7620/</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338545">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">Hamy</div>
					<div class="post-datetime">
						18 Sep 2016, 15:28					</div>
				</div>
				<div class="post-content content">
					<p>Alright, I&#039;ve added a new DTS profile for MR200, made entries for it in ramips.sh , platform.sh , mt7620.mk and also added it in mktplinkfw2.c . the DTS is pretty much the same as C20i , only the mtds adjusted and spi model corrected. ive managed to upload the image and boot openwrt. But obviously, a lot needs to be adjusted. specially in DTS . i don&#039;t know how or where i should find the correct DTS for this enteries.</p><p>@Heinz<br />looking at your openwrt bootlog, you&#039;ve obviously gone further than me in adjusting things. i would appritiate if you could tell me what needs to be adjusted</p><p>The DTS file:<br /></p><div class="codebox"><pre><code>/dts-v1/;

#include &quot;mt7620a.dtsi&quot;

/ {
    compatible = &quot;ralink,mt7620a-soc&quot;;
    model = &quot;TP-Link Archer MR200&quot;;

    chosen {
        bootargs = &quot;console=ttyS0,115200&quot;;
    };

    gpio-leds {
        compatible = &quot;gpio-leds&quot;;

        lan {
            label = &quot;tp-link:blue:lan&quot;;
            gpios = &lt;&amp;gpio0 1 1&gt;;
        };

        power {
            label = &quot;tp-link:blue:power&quot;;
            gpios = &lt;&amp;gpio0 7 0&gt;;
        };

        usb {
            label = &quot;tp-link:blue:usb&quot;;
            gpios = &lt;&amp;gpio0 9 1&gt;;
        };

        wlan5g {
            label = &quot;tp-link:blue:wlan5g&quot;;
            gpios = &lt;&amp;gpio0 11 1&gt;;
        };

        wlan2g {
            label = &quot;tp-link:blue:wlan2g&quot;;
            gpios = &lt;&amp;gpio3 0 1&gt;;
        };
    };

    gpio-keys-polled {
        compatible = &quot;gpio-keys-polled&quot;;
        #address-cells = &lt;1&gt;;
        #size-cells = &lt;0&gt;;
        poll-interval = &lt;20&gt;;

        reset {
            label = &quot;reset&quot;;
            gpios = &lt;&amp;gpio0 13 1&gt;;
            linux,code = &lt;0x198&gt;;
        };

        rfkill {
            label = &quot;rfkill&quot;;
            gpios = &lt;&amp;gpio0 2 1&gt;;
            linux,code = &lt;0xf7&gt;;
        };    };
};

&amp;gpio2 {
    status = &quot;okay&quot;;
};

&amp;gpio3 {
    status = &quot;okay&quot;;
};

&amp;spi0 {
    status = &quot;okay&quot;;

    m25p80@0 {
        #address-cells = &lt;1&gt;;
        #size-cells = &lt;1&gt;;
        compatible = &quot;jedec,spi-nor&quot;;
        reg = &lt;0&gt;;
        linux,modalias = &quot;m25p80&quot;, &quot;w25q64bv&quot;;
        spi-max-frequency = &lt;10000000&gt;;

        partition@0 {
            label = &quot;u-boot&quot;;
            reg = &lt;0x0 0x20000&gt;;
            read-only;
        };

        partition@20000 {
            label = &quot;firmware&quot;;
            reg = &lt;0x20000 0x7b0000&gt;;
        };

        romfile: partition@7d0000 {
            label = &quot;romfile&quot;;
            reg = &lt;0x7d0000 0x10000&gt;;
            read-only;
        };

        partition@7e0000 {
            label = &quot;config&quot;;
            reg = &lt;0x7e0000 0x10000&gt;;
            read-only;
        };

        radio: partition@7f0000 {
            label = &quot;radio&quot;;
            reg = &lt;0x7f0000 0x10000&gt;;
            read-only;
        };
    };
};

&amp;pinctrl {
    state_default: pinctrl0 {
        gpio {
            ralink,group = &quot;i2c&quot;, &quot;uartf&quot;, &quot;rgmii1&quot;, &quot;rgmii2&quot;, &quot;wled&quot;, &quot;nd_sd&quot;;
            ralink,function = &quot;gpio&quot;;
        };
    };
};

&amp;ethernet {
        pinctrl-names = &quot;default&quot;;
        pinctrl-0 = &lt;&amp;ephy_pins&gt;;
        mtd-mac-address = &lt;&amp;romfile 0xf100&gt;;
        mediatek,portmap = &quot;wllll&quot;;
    };

&amp;ehci {
    status = &quot;okay&quot;;
};

&amp;ohci {
    status = &quot;okay&quot;;
};

&amp;gsw {
    mediatek,port4 = &quot;ephy&quot;;
};

&amp;wmac {
    ralink,mtd-eeprom = &lt;&amp;radio 0&gt;;
};

&amp;pcie {
    status = &quot;okay&quot;;

    pcie-bridge {
        mt76@0,0 {
            reg = &lt;0x0000 0 0 0 0&gt;;
            device_type = &quot;pci&quot;;
            mediatek,mtd-eeprom = &lt;&amp;radio 32768&gt;;
            mediatek,2ghz = &lt;0&gt;;
        };
    };
};</code></pre></div><p>The openwrt bootlog:<br /></p><div class="codebox"><pre><code>U-Boot 1.1.3 (Jan  7 2016 - 17:19:14)

Board: Ralink APSoC DRAM:  64 MB
relocate_code Pointer at: 83fb0000
enable ephy clock...done. rf reg 29 = 5
SSC disabled.   
------------------
  LTE AC750 v1.0.0
------------------
Now running in RAM - U-Boot at: 83fb0000, MONITOR BASE: bc000000

 uboot_end: 00006358   83fcd6ac
spi_wait_nsec: 29
spi device id: ef 40 17 0 0 (40170000)
find flash: W25Q64BV
============================================
Ralink UBoot Version: 4.1.2.0
--------------------------------------------
ASIC 7620_MP (Port5&lt;-&gt;GigaSW)
DRAM component: 512 Mbits DDR, width 16
DRAM bus: 16 bit
Total memory: 64 MBytes
Flash component: SPI Flash
Date:Jan  7 2016  Time:17:19:14
============================================
icache: sets:512, ways:4, linesz:32 ,total:65536
dcache: sets:256, ways:4, linesz:32 ,total:32768

 ##### The CPU freq = 580 MHZ ####
 estimate memory size =64 Mbytes

BootType =
continue to starting system.                                                                                                                                                                  0
disableEthForward(1158):disable switch forward...

3: System Boot system code via Flash.(0xbc020000)
## Booting image at bc020000 ...
   Uncompressing Kernel Image ... OK
No initrd
## Transferring control to Linux (at address 80000000) ...
## Giving linux memsize in MB, 64

Starting kernel ...

[    0.000000] Linux version 4.4.14 (roby@RVB) (gcc version 5.3.0 (OpenWrt GCC 5.3.0 49928) ) #11 Sun Sep 18 11:42:32 UTC 2016
[    0.000000] Board has DDR2
[    0.000000] Analog PMU set to hw control
[    0.000000] Digital PMU set to hw control
[    0.000000] SoC Type: MediaTek MT7620A ver:2 eco:6
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU0 revision is: 00019650 (MIPS 24KEc)
[    0.000000] MIPS: machine is TP-Link Archer MR200
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 04000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone ranges:
[    0.000000]   Normal   [mem 0x0000000000000000-0x0000000003ffffff]
[    0.000000] Movable zone start for each node
[    0.000000] Early memory node ranges
[    0.000000]   node   0: [mem 0x0000000000000000-0x0000000003ffffff]
[    0.000000] Initmem setup node 0 [mem 0x0000000000000000-0x0000000003ffffff]
[    0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, PIPT, no aliases, linesize 32 bytes
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
[    0.000000] Kernel command line: console=ttyS0,115200 rootfstype=squashfs,jffs2
[    0.000000] PID hash table entries: 256 (order: -2, 1024 bytes)
[    0.000000] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Writing ErrCtl register=0007a3fe
[    0.000000] Readback ErrCtl register=0007a3fe
[    0.000000] Memory: 60772K/65536K available (2865K kernel code, 143K rwdata, 696K rodata, 192K init, 195K bss, 4764K reserved, 0K cma-reserved)
[    0.000000] SLUB: HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.000000] NR_IRQS:256
[    0.000000] CPU Clock: 580MHz
[    0.000000] clocksource: systick: mask: 0xffff max_cycles: 0xffff, max_idle_ns: 583261500 ns
[    0.000000] systick: enable autosleep mode
[    0.000000] systick: running - mult: 214748, shift: 32
[    0.000000] clocksource: MIPS: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 6590553264 ns
[    0.000011] sched_clock: 32 bits at 290MHz, resolution 3ns, wraps every 7405115902ns
[    0.007569] Calibrating delay loop... 385.84 BogoMIPS (lpj=1929216)
[    0.070068] pid_max: default: 32768 minimum: 301
[    0.074698] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.081074] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.094236] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604462750000 ns
[    0.103944] pinctrl core: initialized pinctrl subsystem
[    0.109674] NET: Registered protocol family 16
[    0.601308] PCI host bridge /pcie@10140000 ranges:
[    0.605912]  MEM 0x0000000020000000..0x000000002fffffff
[    0.610965]   IO 0x0000000010160000..0x000000001016ffff
[    0.624450] rt2880_gpio 10000600.gpio: registering 24 gpios
[    0.629897] rt2880_gpio 10000600.gpio: registering 24 irq handlers
[    0.636027] rt2880_gpio 10000660.gpio: registering 32 gpios
[    0.641433] rt2880_gpio 10000660.gpio: registering 32 irq handlers
[    0.647548] rt2880_gpio 10000688.gpio: registering 1 gpios
[    0.652860] rt2880_gpio 10000688.gpio: registering 1 irq handlers
[    0.659575] PCI host bridge to bus 0000:00
[    0.663540] pci_bus 0000:00: root bus resource [mem 0x20000000-0x2fffffff]
[    0.670166] pci_bus 0000:00: root bus resource [io  0xffffffff]
[    0.675925] pci_bus 0000:00: root bus resource [??? 0x00000000 flags 0x0]
[    0.682509] pci_bus 0000:00: No busn resource found for root bus, will use [bus 00-ff]
[    0.690692] pci 0000:00:00.0: bridge configuration invalid ([bus 00-00]), reconfiguring
[    0.699626] pci 0000:00:00.0: BAR 0: no space for [mem size 0x80000000]
[    0.706035] pci 0000:00:00.0: BAR 0: failed to assign [mem size 0x80000000]
[    0.712757] pci 0000:00:00.0: BAR 8: assigned [mem 0x20000000-0x201fffff]
[    0.719356] pci 0000:00:00.0: BAR 1: assigned [mem 0x20200000-0x2020ffff]
[    0.725950] pci 0000:01:00.0: BAR 0: assigned [mem 0x20000000-0x200fffff]
[    0.732552] pci 0000:01:00.1: BAR 0: assigned [mem 0x20100000-0x201fffff]
[    0.739128] pci 0000:00:00.0: PCI bridge to [bus 01]
[    0.743957] pci 0000:00:00.0:   bridge window [mem 0x20000000-0x201fffff]
[    0.750551] pci 0000:00:00.0: card - bus=0x0, slot = 0x0 irq=0
[    0.756215] pci 0000:01:00.0: card - bus=0x1, slot = 0x0 irq=4
[    0.761871] pci 0000:01:00.1: card - bus=0x1, slot = 0x0 irq=4
[    0.768545] clocksource: Switched to clocksource systick
[    0.775102] NET: Registered protocol family 2
[    0.780240] TCP established hash table entries: 1024 (order: 0, 4096 bytes)
[    0.786966] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
[    0.793183] TCP: Hash tables configured (established 1024 bind 1024)
[    0.799412] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.805038] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.811435] NET: Registered protocol family 1
[    0.816173] rt-timer 10000100.timer: maximum frequency is 1220Hz
[    0.823017] futex hash table entries: 256 (order: -1, 3072 bytes)
[    0.848497] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.854177] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.866419] io scheduler noop registered
[    0.870239] io scheduler deadline registered (default)
[    0.875438] ralink-usb-phy usbphy: invalid resource
[    0.880866] Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled
[    0.888232] console [ttyS0] disabled
[    0.891735] 10000c00.uartlite: ttyS0 at MMIO 0x10000c00 (irq = 20, base_baud = 2500000) is a Palmchip BK-3103
[    0.901342] console [ttyS0] enabled
[    0.901342] console [ttyS0] enabled
[    0.908387] bootconsole [early0] disabled
[    0.908387] bootconsole [early0] disabled
[    0.921435] spi spi0.0: force spi mode3
[    0.925886] m25p80 spi0.0: s25fl064k (8192 Kbytes)
[    0.930883] 5 ofpart partitions found on MTD device spi0.0
[    0.936479] Creating 5 MTD partitions on &quot;spi0.0&quot;:
[    0.941393] 0x000000000000-0x000000020000 : &quot;u-boot&quot;
[    0.948269] 0x000000020000-0x0000007d0000 : &quot;firmware&quot;
[    1.017655] 2 tplink-fw partitions found on MTD device firmware
[    1.023739] 0x000000020000-0x000000156d58 : &quot;kernel&quot;
[    1.030432] 0x000000156d58-0x0000007d0000 : &quot;rootfs&quot;
[    1.037304] mtd: device 3 (rootfs) set to be root filesystem
[    1.043293] 1 squashfs-split partitions found on MTD device rootfs
[    1.049639] 0x000000350000-0x0000007d0000 : &quot;rootfs_data&quot;
[    1.057034] 0x0000007d0000-0x0000007e0000 : &quot;romfile&quot;
[    1.064102] 0x0000007e0000-0x0000007f0000 : &quot;config&quot;
[    1.071034] 0x0000007f0000-0x000000800000 : &quot;radio&quot;
[    1.081759] gsw: setting port4 to ephy mode
[    1.086076] mtk_soc_eth 10100000.ethernet eth0 (uninitialized): port 0 link up (100Mbps/Full duplex)
[    1.095629] mtk_soc_eth 10100000.ethernet: loaded mt7620 driver
[    1.102482] mtk_soc_eth 10100000.ethernet eth0: mediatek frame engine at 0xb0100000, irq 5
[    1.111524] rt2880_wdt 10000120.watchdog: Initialized
[    1.118233] NET: Registered protocol family 10
[    1.126514] NET: Registered protocol family 17
[    1.131223] bridge: automatic filtering via arp/ip/ip6tables has been deprecated. Update your scripts to load br_netfilter if you need this.
[    1.144128] 8021q: 802.1Q VLAN Support v1.8
[    1.164355] VFS: Mounted root (squashfs filesystem) readonly on device 31:3.
[    1.172660] Freeing unused kernel memory: 192K (803a0000 - 803d0000)
[    3.600519] init: Console is alive
[    3.604215] init: - watchdog -
[    5.328217] usbcore: registered new interface driver usbfs
[    5.333987] usbcore: registered new interface driver hub
[    5.339557] usbcore: registered new device driver usb
[    5.350512] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[    5.358831] ehci-platform: EHCI generic platform driver
[    5.374503] phy phy-usbphy.0: remote usb device wakeup disabled
[    5.380560] phy phy-usbphy.0: UTMI 16bit 30MHz
[    5.385125] ehci-platform 101c0000.ehci: EHCI Host Controller
[    5.391039] ehci-platform 101c0000.ehci: new USB bus registered, assigned bus number 1
[    5.399252] ehci-platform 101c0000.ehci: irq 26, io mem 0x101c0000
[    5.410213] ehci-platform 101c0000.ehci: USB 2.0 started, EHCI 1.00
[    5.417759] hub 1-0:1.0: USB hub found
[    5.422028] hub 1-0:1.0: 1 port detected
[    5.429052] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
[    5.436913] ohci-platform: OHCI generic platform driver
[    5.442602] ohci-platform 101c1000.ohci: Generic Platform OHCI controller
[    5.449597] ohci-platform 101c1000.ohci: new USB bus registered, assigned bus number 2
[    5.457798] ohci-platform 101c1000.ohci: irq 26, io mem 0x101c1000
[    5.488469] hub 2-0:1.0: USB hub found
[    5.492633] hub 2-0:1.0: 1 port detected
[    5.504273] init: - preinit -
[    6.462505] 8021q: adding VLAN 0 to HW filter on device eth0
Press the [f] key and hit [enter] to enter failsafe mode
Press the [1], [2], [3] or [4] key and hit [enter] to select the debug level
[    7.504541] jffs2: notice: (340) jffs2_build_xattr_subsystem: complete building xattr subsystem, 0 of xdatum (0 unchecked, 0 orphan) and 0 of xref (0 dead, 0 orphan) found.
[    7.523380] mount_root: switching to jffs2 overlay
[    7.559715] procd: - early -
[    7.564311] procd: - watchdog -
[    8.001301] procd: - ubus -
[    8.028119] random: ubusd urandom read with 16 bits of entropy available
[    8.036784] procd: - init -
Please press Enter to activate this console.
[    8.214417] usb 1-1: new high-speed USB device number 2 using ehci-platform
[    8.775870] ip6_tables: (C) 2000-2006 Netfilter Core Team
[    8.795429] Loading modules backported from Linux version wt-2016-05-12-0-g7a54796
[    8.803164] Backport generated by backports.git backports-20160216-0-ge3c56e4
[    8.870380] ip_tables: (C) 2000-2006 Netfilter Core Team
[    8.887236] nf_conntrack version 0.5.0 (952 buckets, 3808 max)
[    8.942635] xt_time: kernel timezone is -0000
[    8.960261] PPP generic driver version 2.4.2
[    8.967711] NET: Registered protocol family 24
[    8.990544] ieee80211 phy0: rt2x00_set_rt: Info - RT chipset 5390, rev 0500 detected
[    8.998550] ieee80211 phy0: rt2x00_set_rf: Info - RF chipset 7620 detected
[    9.335460] usb 1-1: USB disconnect, device number 2
[   15.509066] 8021q: adding VLAN 0 to HW filter on device eth0
[   15.534599] device eth0.1 entered promiscuous mode
[   15.539509] device eth0 entered promiscuous mode
[   15.552884] br-lan: port 1(eth0.1) entered forwarding state
[   15.558621] br-lan: port 1(eth0.1) entered forwarding state
[   16.891905] usb 1-1: new high-speed USB device number 3 using ehci-platform
[   17.241545] br-lan: port 1(eth0.1) entered forwarding state



BusyBox v1.24.2 () built-in shell (ash)

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 -----------------------------------------------------
 DESIGNATED DRIVER (Bleeding Edge, 49928)
 -----------------------------------------------------
  * 2 oz. Orange Juice         Combine all juices in a
  * 2 oz. Pineapple Juice      tall glass filled with
  * 2 oz. Grapefruit Juice     ice, stir well.
  * 2 oz. Cranberry Juice
 -----------------------------------------------------
root@OpenWrt:/# </code></pre></div><p>Any help would be greatly appreciated.<br />Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338692">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">Hamy</div>
					<div class="post-datetime">
						20 Sep 2016, 07:48					</div>
				</div>
				<div class="post-content content">
					<p>Alright, i&#039;m gonna give up on this. while i would have loved running openwrt on this device, writing a correct DTS file is too advanced for me to be done on my own and i couldn&#039;t find anyone to help</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338894">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">WINTERZ</div>
					<div class="post-datetime">
						22 Sep 2016, 12:17					</div>
				</div>
				<div class="post-content content">
					<p>Hi, guys! Please help me. Is any possibility to change IMEI in LTE modem in this Archer MR200 router?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338895">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">Hamy</div>
					<div class="post-datetime">
						22 Sep 2016, 13:00					</div>
				</div>
				<div class="post-content content">
					<p>@WINTERZ<br />No, there is not a known way. manufactures make changing IMEI very hard or almost impossible for a good reason. and the fact that you want to change it is suspicious at the very least.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338896">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">WINTERZ</div>
					<div class="post-datetime">
						22 Sep 2016, 13:13					</div>
				</div>
				<div class="post-content content">
					<p>Hamy, thanks for quick reply. My LTE provider allows to use 4G internet only for smartphones and tablet pc. Provider checks IMEIs and blocks devices that have not phones or tablets IMEIs. So I can&#039;t use this router. Changing IMEI will help me to use internet. Nothing criminal or suspicious.</p>											<p class="post-edited">(Last edited by <strong>WINTERZ</strong> on 22 Sep 2016, 13:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338898">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">Hamy</div>
					<div class="post-datetime">
						22 Sep 2016, 13:35					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>WINTERZ wrote:</cite><blockquote><p>Hamy, thanks for quick reply. My LTE provider allows to use 4G internet only for smartphones and tablet pc. Provider checks IMEIs and blocks devices that have not phones or tablets IMEIs. So I can&#039;t use this router. Changing IMEI will help me to use internet. Nothing criminal or suspicious.</p></blockquote></div><p>Alright, sorry. still, this router does not support changing IMEI (at least not officially anyway). my bet is that it&#039;s stored inside the LTE card which runs it&#039;s own OS. it could even be embedded in a seperate readonly chip. unless you&#039;re hacker and willing to take on a challenge, id look elsewhere.</p><p>On a side note, if possible, i would have you changed my provider as a sign of protest against their stupid policy and let them know that (they shouldn&#039;t be deciding or limiting you on this).</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 11</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=64293&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=64293&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=64293&amp;p=11.html">11</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>