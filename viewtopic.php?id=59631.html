<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Help Migrating Google Authenticator to New Package Feed</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p291827">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">rajl</div>
					<div class="post-datetime">
						14 Sep 2015, 18:19					</div>
				</div>
				<div class="post-content content">
					<p><strong>Short summary of the post:</strong> </p><p>I am trying to move the libpam-google-authenticator package from the old packages feed to the new packages feed since it apparently got overlooked when the packages were migrated.&nbsp; Trying to figure out how to do this though has raised a few questions I was hoping someone could answer.&nbsp; Most important, is there any technical reason why I could not reuse the makefile from the old packages feed for libpam-google-authenticator (available <a href="https://dev.openwrt.org/browser/packages/libs/google-authenticator/Makefile?rev=38492">here</a>) with the new packages feed?&nbsp; My gut instinct is to just recycle the makefile, update any broken paths, get it to build, and then submit it as a patch if it does.</p><p><strong>TL;DR Version:</strong></p><p>So I just upgraded from Barrier Breaker to Chaos Calmer, and I want to integrate Google Authenticator into my SSH login process.&nbsp; This was easy to do in Barrier Breaker by installing the openssh-pam, libqrencode, and libpam-google-authenticator packages.&nbsp; Unfortunately, openssh-pam and libqrencode were migrated to the new packages feed, but libpam-google-authenticator was not.&nbsp; So there is no prebuilt package for libpam-google-authenticator for Chaos Calmer.</p><p>One solution appears to be to manually install the libpam-google-authenticator package built for Barrier Breaker manually.&nbsp; <em>See </em> <a href="https://forum.openwrt.org/viewtopic.php?id=38905">here</a>.&nbsp; However, this seems to be a bit of a hack to me, and I prefer clean solutions.&nbsp; The clean solution is to just move libpam-google-authenticator to the new packages feed to make sure it gets included in future builds/releases.&nbsp; Since the old package from Barrier Breaker still works with Chaos Calmer, my first thought was that I could just put together a makefile.&nbsp; </p><p>Boy am I in over my head on that one.&nbsp; Looking at the makefiles for packages in the new package feed as an example of what is required, I noticed that the syntax is unlike anything I have ever seen for makefiles.&nbsp; To quote OpenWRT&#039;s own documentation on creating package makefiles from <a href="http://wiki.openwrt.org/doc/devel/packages">here</a>:</p><div class="quotebox"><blockquote><p>Looking at one of the package makefiles, you&#039;d hardly recognize it as a makefile. Through what can only be described as blatant disregard and abuse of the traditional make format, the makefile has been transformed into an object oriented template which simplifies the entire ordeal.</p></blockquote></div><p>Since I can barely make heads or tails of OpenWRT&#039;s makefiles for packages, I wanted to know if there has been any change between the versions of makefiles used for the old package feed versus the makefiles used for the new packages feed?&nbsp; The documentation is silent on that question.&nbsp; As best I can tell, the difference between the old packages feed and the new one is that the hosting location for the packages was changed.&nbsp; But I could be wrong and wanted to confirm. </p><p>Thanks in advance for any help.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351589">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">djgend</div>
					<div class="post-datetime">
						10 Feb 2017, 14:22					</div>
				</div>
				<div class="post-content content">
					<p>I think you can hack feeds.conf, put the old package feed source url in it, then feed install it. and put old package source code to the correspond folder of newer milestone folder, i have successful compile a deprecated package which called nwan with cc, but it just can be done in the surface, its alot thing to do with its perfect integrated, you have to have the old deprecated kernel dependency in it too. and make sure there is not a error when you open it through luci gui. Its a big chance to try, good luck to you.</p>											<p class="post-edited">(Last edited by <strong>djgend</strong> on 10 Feb 2017, 14:24)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>