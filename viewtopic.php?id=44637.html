<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> wrt54gsv4 test serial port</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 12 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p204177">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">dh1948</div>
					<div class="post-datetime">
						10 Jun 2013, 10:35					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />I would be grateful if someone could explain if it is possible to demonstrate a test for ttys0 and ttys1 on a wrt54gsv4 with openwrt-wrt54gs_v4-squashfs.bin installed.<br />I have read the wiki on that router in openwrt, and understand the modifications required to add a line driver chip, which I have done.<br />My problem seems to be that there is no command built into the &quot;Busybox&quot; that installed to configure/start the serial ports</p><p><span style="color: blue">BusyBox v1.00 (2007.01.30-11:42+0000) Built-in shell (ash)<br />Enter &#039;help&#039; for a list of built-in commands.</span></p><p><span style="color: blue">&nbsp; _______&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;________&nbsp; &nbsp; &nbsp; &nbsp; __<br /> |&nbsp; &nbsp; &nbsp; &nbsp;|.-----.-----.-----.|&nbsp; |&nbsp; |&nbsp; |.----.|&nbsp; |_<br /> |&nbsp; &nbsp;-&nbsp; &nbsp;||&nbsp; _&nbsp; |&nbsp; -__|&nbsp; &nbsp; &nbsp;||&nbsp; |&nbsp; |&nbsp; ||&nbsp; &nbsp;_||&nbsp; &nbsp;_|<br /> |_______||&nbsp; &nbsp;__|_____|__|__||________||__|&nbsp; |____|<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |__| W I R E L E S S&nbsp; &nbsp;F R E E D O M<br /> WHITE RUSSIAN (0.9) -------------------------------<br />&nbsp; * 2 oz Vodka&nbsp; &nbsp;Mix the Vodka and Kahlua together<br />&nbsp; * 1 oz Kahlua&nbsp; over ice, then float the cream or<br />&nbsp; * 1/2oz cream&nbsp; milk on the top.<br /> ---------------------------------------------------<br />root@OpenWrt:~# opkg update<br /><span class="bbu">-ash: opkg: not found </span><br />root@OpenWrt:~# busybox<br />BusyBox v1.00 (2007.01.30-11:42+0000) multi-call binary</span></p><p><span style="color: blue">Usage: busybox [function] [arguments]...<br />&nbsp; &nbsp;or: [function] [arguments]...</span></p><p><span style="color: blue">&nbsp; &nbsp; &nbsp; &nbsp; BusyBox is a multi-call binary that combines many common Unix<br />&nbsp; &nbsp; &nbsp; &nbsp; utilities into a single executable.&nbsp; Most people will create a<br />&nbsp; &nbsp; &nbsp; &nbsp; link to busybox for each function they wish to use, and BusyBox<br />&nbsp; &nbsp; &nbsp; &nbsp; will act like whatever it was invoked as.</span></p><br /><p><span style="color: blue">Currently defined functions:<br />&nbsp; &nbsp; &nbsp; &nbsp; [, arping, ash, awk, basename, bunzip2, busybox, bzcat, cat, chgrp,<br />&nbsp; &nbsp; &nbsp; &nbsp; chmod, chown, chroot, clear, cp, crond, crontab, cut, date, dd,<br />&nbsp; &nbsp; &nbsp; &nbsp; df, dirname, dmesg, du, echo, egrep, env, expr, false, fgrep,<br />&nbsp; &nbsp; &nbsp; &nbsp; find, free, grep, gunzip, gzip, head, hexdump, hostid, httpd,<br />&nbsp; &nbsp; &nbsp; &nbsp; id, ifconfig, init, insmod, kill, killall, killall5, klogd, length,<br />&nbsp; &nbsp; &nbsp; &nbsp; ln, lock, logger, logread, ls, lsmod, md5sum, mesg, mkdir, mkfifo,<br />&nbsp; &nbsp; &nbsp; &nbsp; mknod, mktemp, more, mount, mv, nc, netmsg, netstat, nslookup,<br />&nbsp; &nbsp; &nbsp; &nbsp; passwd, pidof, ping, ping6, pivot_root, printf, ps, pwd, rdate,<br />&nbsp; &nbsp; &nbsp; &nbsp; reboot, reset, rm, rmdir, rmmod, route, sed, seq, sh, sleep, sort,<br />&nbsp; &nbsp; &nbsp; &nbsp; strings, sync, sysctl, syslogd, tail, tar, tee, telnet, telnetd,<br />&nbsp; &nbsp; &nbsp; &nbsp; test, time, top, touch, tr, traceroute, true, udhcpc, umount,<br />&nbsp; &nbsp; &nbsp; &nbsp; uname, uniq, uptime, vconfig, vi, watchdog, wc, wget, which, xargs,<br />&nbsp; &nbsp; &nbsp; &nbsp; yes, zcat </span></p><p>I am able to WinSCP into the router and see all the directories/files.</p><p>Can I install the files to &quot;set serial&quot; with that instead of opkg, which was &quot;not found&quot;</p><br /><p>As you can probably gather, I am new to this, but any help will be much appreciated.<br />Thanks in advance<br />David</p><p>ps <br /><span style="color: blue"><br />login as: root<br />root@192.168.1.1&#039;s password:</span></p><br /><p><span style="color: blue">BusyBox v1.00 (2007.01.30-11:42+0000) Built-in shell (ash)<br />Enter &#039;help&#039; for a list of built-in commands.</span></p><p><span style="color: blue">&nbsp; _______&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;________&nbsp; &nbsp; &nbsp; &nbsp; __<br /> |&nbsp; &nbsp; &nbsp; &nbsp;|.-----.-----.-----.|&nbsp; |&nbsp; |&nbsp; |.----.|&nbsp; |_<br /> |&nbsp; &nbsp;-&nbsp; &nbsp;||&nbsp; _&nbsp; |&nbsp; -__|&nbsp; &nbsp; &nbsp;||&nbsp; |&nbsp; |&nbsp; ||&nbsp; &nbsp;_||&nbsp; &nbsp;_|<br /> |_______||&nbsp; &nbsp;__|_____|__|__||________||__|&nbsp; |____|<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |__| W I R E L E S S&nbsp; &nbsp;F R E E D O M<br /> WHITE RUSSIAN (0.9) -------------------------------<br />&nbsp; * 2 oz Vodka&nbsp; &nbsp;Mix the Vodka and Kahlua together<br />&nbsp; * 1 oz Kahlua&nbsp; over ice, then float the cream or<br />&nbsp; * 1/2oz cream&nbsp; milk on the top.<br /> ---------------------------------------------------<br />root@OpenWrt:~# ipkg install <a href="http://downloads.openwrt.org/backfire/10.03.1/brcm-2.4/packages/setserial_2.17-1_brcm-2.4.ipk">http://downloads.openwrt.org/backfire/1 … cm-2.4.ipk</a><br />Downloading <a href="http://downloads.openwrt.org/backfire/10.03.1/brcm-2.4/packages/setserial_2.17-1_brcm-2.4.ipk">http://downloads.openwrt.org/backfire/1 … cm-2.4.ipk</a><br />wget: downloads.openwrt.org: Unknown host<br />Nothing to be done<br />An error ocurred, return value: 4.<br />Collected errors:<br />ipkg_download: ERROR: Command failed with return value 1: `wget --passive-ftp&nbsp; &nbsp; -q -P /tmp/ipkg-0uIYhp <a href="http://downloads.openwrt.org/backfire/10.03.1/brcm-2.4/packages/setserial_2.17-1_brcm-2.4.ipk">http://downloads.openwrt.org/backfire/10.03.1/brcm-2.4/packages/setserial_2.17-1_brcm-2.4.ipk&#039;</a><br />Cannot find package <a href="http://downloads.openwrt.org/backfire/10.03.1/brcm-2.4/packages/setserial_2.17-1_brcm-2.4.ipk.">http://downloads.openwrt.org/backfire/1 … m-2.4.ipk.</a><br />Check the spelling or perhaps run &#039;ipkg update&#039;<br />root@OpenWrt:~#<br /></span></p>											<p class="post-edited">(Last edited by <strong>dh1948</strong> on 10 Jun 2013, 12:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p204218">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">dh1948</div>
					<div class="post-datetime">
						10 Jun 2013, 19:22					</div>
				</div>
				<div class="post-content content">
					<p>It seems I was able to update after connecting the linksys wan port to my internet router.<br />Cheers though,<br />D<br />ps do I need to implement stty and if so how<br /><span style="color: blue">root@OpenWrt:/usr/sbin# stty -a /dev/tts/1<br />stty: can&#039;t resolve symbol &#039;__uClibc_start_main&#039;<br /></span></p><p>After searching I extracted stty from<br /><a href="http://downloads.openwrt.org/kamikaze/8.09.2/brcm-2.4/packages/coreutils_6.9-1_mipsel.ipk">http://downloads.openwrt.org/kamikaze/8 … mipsel.ipk</a><br />I can execute <br /><span style="color: blue">root@OpenWrt:~# stty -F /dev/tts/1 115200<br />root@OpenWrt:~#</span><br />without any errors,<br />but the big question is how do I test the serial port?</p>											<p class="post-edited">(Last edited by <strong>dh1948</strong> on 10 Jun 2013, 22:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p204232">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">dh1948</div>
					<div class="post-datetime">
						10 Jun 2013, 23:54					</div>
				</div>
				<div class="post-content content">
					<p>I found that with the cat command I could see when my jumper wire&nbsp; connected&nbsp; serial port header TX_1 to RX_1 (loopback). Proof that I am &quot;getting through&quot; to serial port ttyS1 (tx and rx increase by 12). Removing the short, only tx increased by 12.</p><br /><p>root@OpenWrt:~#&nbsp; cat /proc/tty/driver/serial<br />serinfo:1.0 driver:5.05c revision:2001-07-08<br />0: uart:16550A port:B8000300 irq:3 baud:116379 tx:4804 rx:4592 RTS|DTR<br />1: uart:16550A port:B8000400 irq:3 baud:9588 tx:61 rx:53 CTS|DSR|CD<br />root@OpenWrt:~# echo &quot;hello world&quot; &gt; /dev/tts/1<br />root@OpenWrt:~#&nbsp; cat /proc/tty/driver/serial<br />serinfo:1.0 driver:5.05c revision:2001-07-08<br />0: uart:16550A port:B8000300 irq:3 baud:116379 tx:4804 rx:4592 RTS|DTR<br />1: uart:16550A port:B8000400 irq:3 baud:9588 tx:73 rx:65 CTS|DSR|CD<br />root@OpenWrt:~# echo &quot;hello world&quot; &gt; /dev/tts/1<br />root@OpenWrt:~#&nbsp; cat /proc/tty/driver/serial<br />serinfo:1.0 driver:5.05c revision:2001-07-08<br />0: uart:16550A port:B8000300 irq:3 baud:116379 tx:4804 rx:4592 RTS|DTR<br />1: uart:16550A port:B8000400 irq:3 baud:9588 tx:85 rx:65 CTS|DSR|CD</p><br /><p>There must be a simpler way to demonstrate a test though????</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>