<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Asterisk 1.4.16 and Zaptel 1.4.7.1</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 8 Jan 2018 and 23 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=13839&amp;p=2.html">2</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p60713">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						20 Dec 2007, 22:17					</div>
				</div>
				<div class="post-content content">
					<p>Submitted as patch tickets:</p><p>&nbsp; <a href="https://dev.openwrt.org/ticket/2873">https://dev.openwrt.org/ticket/2873</a><br />&nbsp; <a href="https://dev.openwrt.org/ticket/2874">https://dev.openwrt.org/ticket/2874</a></p><p>This means that all of the functionality developed in diverse Asterisk repositories (among which mine) is now available again from the standard OpenWRT source repository in the latest Asterisk release 1.4.16 (once the patch is actually applied...). And actually some more because now non-uhci-usb routers can also run ztdummy thus app_meetme.</p><p>Hans.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60870">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Fall</div>
					<div class="post-datetime">
						26 Dec 2007, 02:49					</div>
				</div>
				<div class="post-content content">
					<p>Hi Zandbelt,</p><p>Found this flite, festival lite verion from Kamikaze repository. Installed it on my USB key, occupied about 11MB. Tested with text string, it was able to create sound file in wave format.<br />Would you please help to add in and publish the app_flite module on your repository?</p><p>Thanks and Happy Holidays!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60927">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						27 Dec 2007, 18:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Fall wrote:</cite><blockquote><p>Would you please help to add in and publish the app_flite module on your repository?</p></blockquote></div><p>I had not seen this app before, but it looks very promising for this type of hardware: I added it to the repository, together with a rebuilt flite package (includes default .so links and compilation without 16bit vox).</p><p>Hans.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60938">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Fall</div>
					<div class="post-datetime">
						28 Dec 2007, 01:10					</div>
				</div>
				<div class="post-content content">
					<p>Unbelievable! Thank you!</p><p>I was expecting openwrt developer might recompile it with 8k sample rate, removing that 16k flag yesterday.</p><p>Tested the 8k flite, it works fine. The output wave file can be playback directly by *.</p><p>flite application seems have some problem, but I dont know what it was.<br />flite(some_words) just didn&#039;t work.<br />Asterisk debug message didn&#039;t help much, only line was parsing flite config file as below,<br />...<br />&nbsp; &nbsp; -- Executing [220@internal:1] Ringing(&quot;SIP/PAP101-00629848&quot;, &quot;&quot;) in new stack<br />&nbsp; &nbsp; -- Executing [220@internal:2] Answer(&quot;SIP/PAP101-00629848&quot;, &quot;&quot;) in new stack<br />&nbsp; &nbsp; -- Executing [220@internal:3] Flite(&quot;SIP/PAP101-00629848&quot;, &quot;girl&quot;) in new stack<br />&nbsp; == Parsing &#039;/etc/asterisk/flite.conf&#039;: Found</p><p>And it stops there forever, no sound produced.</p><p>Zero byte temp file created under /tmp without .wav extension.<br />-rw-------&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 Dec 27 17:22 flite_buf_gnZKty<br />-rw-------&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 Dec 27 17:25 flite_buf_vI1fEQ<br />-rw-------&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 Dec 27 17:26 flite_buf_2SH25S<br />-rw-------&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 Dec 27 17:26 flite_buf_5Kb8rl<br />-rw-------&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 Dec 27 17:44 flite_buf_NIBPhg<br />-rw-------&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 Dec 27 17:48 flite_buf_jBy5hu<br />-rw-------&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 Dec 27 17:49 flite_buf_65PXge</p><p>From source app_flite.c, it was appending .wav extension name. But under /tmp/flite_buf_*, the wav extension was missing from file names.<br />...<br />&nbsp; &nbsp; sprintf(filename, &quot;/tmp/flite_buf_XXXXXX&quot;);<br />&nbsp; &nbsp; mkstemp(filename);<br />&nbsp; &nbsp; strcpy(wavFilename, filename);<br />&nbsp; &nbsp; strcat(wavFilename, &quot;.wav&quot;);<br />&nbsp; &nbsp; /* Invoke Flite */<br />&nbsp; &nbsp; flite_init();<br />&nbsp; &nbsp; v = register_cmu_us_kal();<br />&nbsp; &nbsp; flite_text_to_speech((char *) data, v, wavFilename);</p><p>&nbsp; &nbsp; if (chan-&gt;_state != AST_STATE_UP)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; /* Answer the channel if it is down */<br />&nbsp; &nbsp; &nbsp; &nbsp; ast_answer(chan);<br />&nbsp; &nbsp; }<br />...</p><p>I guess flite_init probably was fine since it was parsing config file.<br />But somewhere inside flite_text_to_speech, something got wrong. Since the temp file got created, so I guess it passed the point ergister_cmu_us_kal.</p><p>If I remove the Answer before flite() in extension.ael setup, the channel never got answered, so I think the function flite_text_to_speech was never return. Thus the ast_answer didn&#039;t work. So was the rest app_flite module and no sound stream into channel.</p><br /><p>Not sure how to fix it, not much debug msg from flite to asterisk console.<br />The work around I can think of is, might be add app_mp3.so into asterisk package and create a dummy mpg123 script that calls flite to create wave file and stream to stdout. So something like MP3Player(some_words) would play the speech sound of &quot;some_words&quot;.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60941">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Fall</div>
					<div class="post-datetime">
						28 Dec 2007, 01:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zandbelt wrote:</cite><blockquote><p><a href="https://dev.openwrt.org/ticket/2873">https://dev.openwrt.org/ticket/2873</a></p><p>Hans.</p></blockquote></div><p>One thought, the mknod in postinstall might not work after reboot since /dev is on tmpfs.</p><p>Might find a way to insert these lines into /etc/hotplug2-init.rules by postinstall, probably by sed. Before &quot;DEVPATH is set {&quot; line.</p><p>DEVICENAME ~~ (zappseudo) {<br />&nbsp; &nbsp; &nbsp; &nbsp; nothrottle<br />&nbsp; &nbsp; &nbsp; &nbsp; makedev /dev/zap/pseudo 0644<br />&nbsp; &nbsp; &nbsp; &nbsp; next<br />}</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60983">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Fall</div>
					<div class="post-datetime">
						28 Dec 2007, 21:45					</div>
				</div>
				<div class="post-content content">
					<p>Hi zandbelt,</p><p>Would you please help to kindly add in chan_oss?<br />I tried chan_alsa on 2.6 Kamikaze, got these error/warning. Was able to call/answer from console, but speaker could only produced some noise, no voice.</p><p>&nbsp; == Parsing &#039;/etc/asterisk/alsa.conf&#039;: Found<br />[Dec 28 19:28:37] WARNING[1151]: chan_alsa.c:389 alsa_card_init: Rate not correct, requested 8000, got 24000<br />[Dec 28 19:28:37] ERROR[1151]: chan_alsa.c:384 alsa_card_init: set_channels failed: Invalid argument<br />[Dec 28 19:28:37] WARNING[1151]: chan_alsa.c:389 alsa_card_init: Rate not correct, requested 8000, got 48000<br />&nbsp; == Registered channel type &#039;Console&#039; (ALSA Console Channel Driver)<br />chan_alsa.so =&gt; (ALSA Console Channel Driver)</p><p>CORRECTION, it was the USB audio chip, Tenx Technology, doesn&#039;t support 8K sample rate. Nothing wrong with chan_alsa.<br />CORRECTION AGAIN, set alsa.conf from hw:0,0 to plughw:0 for sample rate conversion. Got voice from speaker, but delayed for few seconds and voice is broken. Anyone has a working example for asterisk with chan_alsa and a USB sound card?</p>											<p class="post-edited">(Last edited by <strong>Fall</strong> on 28 Dec 2007, 23:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60987">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Fall</div>
					<div class="post-datetime">
						29 Dec 2007, 02:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Fall wrote:</cite><blockquote><p>Would you please help to kindly add in chan_oss?</p></blockquote></div><p>Thank you zandbelt!<br />After repeated tests, I confirmed chan_oss seems better than chan_alsa.<br />1. asterisk will have smaller footprint using oss module, 18.X MB compared to 22MB for alsa.<br />2. alsa causes abour 1 second delay for voice comes out from speaker.</p><p>flite release 3 is using 16k sample rate.</p>											<p class="post-edited">(Last edited by <strong>Fall</strong> on 29 Dec 2007, 04:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p61213">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">baba2s</div>
					<div class="post-datetime">
						3 Jan 2008, 22:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zandbelt wrote:</cite><blockquote><p>Submitted as patch tickets:</p><p>&nbsp; <a href="https://dev.openwrt.org/ticket/2873">https://dev.openwrt.org/ticket/2873</a><br />&nbsp; <a href="https://dev.openwrt.org/ticket/2874">https://dev.openwrt.org/ticket/2874</a></p><p>This means that all of the functionality developed in diverse Asterisk repositories (among which mine) is now available again from the standard OpenWRT source repository in the latest Asterisk release 1.4.16 (once the patch is actually applied...). And actually some more because now non-uhci-usb routers can also run ztdummy thus app_meetme.</p><p>Hans.</p></blockquote></div><p>Hello Hans,</p><p>I tried to compile 1.4.16 in WhiteRussian , but getting following errors..<br />Please help me with this</p><p>ubuntu@ubuntu:~/asterisk_1.4/openwrt-devel/OpenWrt-SDK-Linux-i686-1$ make package/asterisk-1.4.x-compile V=99<br />Collecting package info...<br />make -C package asterisk-1.4.x-compile SDK=1<br />make[1]: Entering directory `/home/ubuntu/asterisk_1.4/openwrt-devel/OpenWrt-SDK-Linux-i686-1/package&#039;<br />Makefile:11: /home/ubuntu/asterisk_1.4/openwrt-devel/OpenWrt-SDK-Linux-i686-1/.pkgdeps: No such file or directory<br />make[1]: Leaving directory `/home/ubuntu/asterisk_1.4/openwrt-devel/OpenWrt-SDK-Linux-i686-1/package&#039;<br />make[1]: Entering directory `/home/ubuntu/asterisk_1.4/openwrt-devel/OpenWrt-SDK-Linux-i686-1/package&#039;<br />mkdir -p /home/ubuntu/asterisk_1.4/openwrt-devel/OpenWrt-SDK-Linux-i686-1/build_mipsel/stamp<br />mkdir -p /home/ubuntu/asterisk_1.4/openwrt-devel/OpenWrt-SDK-Linux-i686-1/build_mipsel/root<br />make -C popt compile<br />Rebuilding /home/ubuntu/asterisk_1.4/openwrt-devel/OpenWrt-SDK-Linux-i686-1/bin/packages/libpopt_1.7-4_mipsel.ipk<br />make[2]: Entering directory `/home/ubuntu/asterisk_1.4/openwrt-devel/packages/libs/popt&#039;<br />mkdir -p /home/ubuntu/asterisk_1.4/openwrt-devel/OpenWrt-SDK-Linux-i686-1/dl<br />/home/ubuntu/asterisk_1.4/openwrt-devel/OpenWrt-SDK-Linux-i686-1/scripts/download.pl &quot;/home/ubuntu/asterisk_1.4/openwrt-devel/OpenWrt-SDK-Linux-i686-1/dl&quot; &quot;popt-1.7.tar.gz&quot; &quot;5988e7aeb0ae4dac8d83561265984cc9&quot; <a href="ftp://ftp.rpm.org/pub/rpm/dist/rpm-4.1.x/">ftp://ftp.rpm.org/pub/rpm/dist/rpm-4.1.x/</a><br />--14:25:23--&nbsp; <a href="ftp://ftp.rpm.org/pub/rpm/dist/rpm-4.1.x//popt-1.7.tar.gz">ftp://ftp.rpm.org/pub/rpm/dist/rpm-4.1. … 1.7.tar.gz</a><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; `-&#039;<br />Resolving <a href="ftp://ftp.rpm.org">ftp.rpm.org</a>... 209.132.176.171<br />Connecting to <a href="ftp://ftp.rpm.org">ftp.rpm.org</a>|209.132.176.171|:21... failed: Connection timed out.<br />Giving up.</p><p>Download failed.<br />--14:25:43--&nbsp; <a href="http://mirror2.openwrt.org/sources/popt-1.7.tar.gz">http://mirror2.openwrt.org/sources/popt-1.7.tar.gz</a><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; `-&#039;<br />Resolving mirror2.openwrt.org... 88.198.39.176<br />Connecting to mirror2.openwrt.org|88.198.39.176|:80... connected.<br />HTTP request sent, awaiting response... 200 OK<br />Length: 574,549 (561K) [application/x-tar]</p><p>100%[====================================&gt;] 574,549&nbsp; &nbsp; &nbsp; 370.49K/s</p><p>14:26:02 (369.75 KB/s) - `-&#039; saved [574549/574549]</p><p>touch /home/ubuntu/asterisk_1.4/openwrt-devel/OpenWrt-SDK-Linux-i686-1/build_mipsel/popt-1.7/.prepared<br />(cd /home/ubuntu/asterisk_1.4/openwrt-devel/OpenWrt-SDK-Linux-i686-1/build_mipsel/popt-1.7/; if [ -x configure ]; then AR=mipsel-linux-uclibc-ar AS=&quot;mipsel-linux-uclibc-gcc -c -Os -pipe -mips32 -mtune=mips32 -funit-at-a-time&quot; LD=mipsel-linux-uclibc-ld NM=mipsel-linux-uclibc-nm CC=&quot;mipsel-linux-uclibc-gcc&quot; GCC=&quot;mipsel-linux-uclibc-gcc&quot; CXX=mipsel-linux-uclibc-g++ RANLIB=mipsel-linux-uclibc-ranlib STRIP=mipsel-linux-uclibc-strip OBJCOPY=mipsel-linux-uclibc-objcopy CFLAGS=&quot;-Os -pipe -mips32 -mtune=mips32 -funit-at-a-time&quot; CXXFLAGS=&quot;-Os -pipe -mips32 -mtune=mips32 -funit-at-a-time&quot; CPPFLAGS=&quot;-I/home/ubuntu/asterisk_1.4/openwrt-devel/OpenWrt-SDK-Linux-i686-1/staging_dir_mipsel/usr/include -I/home/ubuntu/asterisk_1.4/openwrt-devel/OpenWrt-SDK-Linux-i686-1/staging_dir_mipsel/include&quot; LDFLAGS=&quot;-L/home/ubuntu/asterisk_1.4/openwrt-devel/OpenWrt-SDK-Linux-i686-1/staging_dir_mipsel/usr/lib -L/home/ubuntu/asterisk_1.4/openwrt-devel/OpenWrt-SDK-Linux-i686-1/staging_dir_mipsel/lib&quot; PKG_CONFIG_PATH=&quot;/home/ubuntu/asterisk_1.4/openwrt-devel/OpenWrt-SDK-Linux-i686-1/staging_dir_mipsel/usr/lib/pkgconfig&quot; PKG_CONFIG_LIBDIR=&quot;/home/ubuntu/asterisk_1.4/openwrt-devel/OpenWrt-SDK-Linux-i686-1/staging_dir_mipsel/usr/lib/pkgconfig&quot;&nbsp; ./configure --target=mipsel-linux --host=mipsel-linux --build=i486-linux-gnu --program-prefix=&quot;&quot; --program-suffix=&quot;&quot; --prefix=/usr --exec-prefix=/usr --bindir=/usr/bin --sbindir=/usr/sbin --libexecdir=/usr/lib --sysconfdir=/etc --datadir=/usr/share --localstatedir=/var --mandir=/usr/man --infodir=/usr/info --disable-nls&nbsp; --enable-shared --enable-static ; fi; )<br />touch /home/ubuntu/asterisk_1.4/openwrt-devel/OpenWrt-SDK-Linux-i686-1/build_mipsel/popt-1.7/.configured<br />make -C /home/ubuntu/asterisk_1.4/openwrt-devel/OpenWrt-SDK-Linux-i686-1/build_mipsel/popt-1.7 DESTDIR=&quot;/home/ubuntu/asterisk_1.4/openwrt-devel/OpenWrt-SDK-Linux-i686-1/build_mipsel/popt-1.7/ipkg-install&quot; all install<br />make[3]: Entering directory `/home/ubuntu/asterisk_1.4/openwrt-devel/OpenWrt-SDK-Linux-i686-1/build_mipsel/popt-1.7&#039;<br />make[3]: *** No rule to make target `all&#039;.&nbsp; Stop.<br />make[3]: Leaving directory `/home/ubuntu/asterisk_1.4/openwrt-devel/OpenWrt-SDK-Linux-i686-1/build_mipsel/popt-1.7&#039;<br />make[2]: *** [/home/ubuntu/asterisk_1.4/openwrt-devel/OpenWrt-SDK-Linux-i686-1/build_mipsel/popt-1.7/.built] Error 2<br />make[2]: Leaving directory `/home/ubuntu/asterisk_1.4/openwrt-devel/packages/libs/popt&#039;<br />make[1]: *** [popt-compile] Error 2<br />make[1]: Leaving directory `/home/ubuntu/asterisk_1.4/openwrt-devel/OpenWrt-SDK-Linux-i686-1/package&#039;<br />make: *** [package/asterisk-1.4.x-compile] Error 2<br />ubuntu@ubuntu:~/asterisk_1.4/openwrt-devel/OpenWrt-SDK-Linux-i686-1$</p><br /><p>Same type of error for pwlib....<br />make[3]: *** No rule to make target `all&#039;.&nbsp; Stop.<br /> am i missing something ?<br />I am using <br />ZAPTEL=&quot;1.4.7.1&quot;<br />IKSEMEL=&quot;1.2&quot;<br />ASTERISK=&quot;1.4.16&quot;<br />ADDONS=&quot;1.4.2&quot;<br />..<br />...<br />make package/asterisk-1.4.x-compile V=99</p><p>I downloaded both of your patches.. Patch worked.</p><p>$(eval $(call BuildPackage,asterisk14))<br />#$(eval $(call BuildPackage,asterisk14-mini))</p><br /><p>Thanks for all you Great Releases</p>											<p class="post-edited">(Last edited by <strong>baba2s</strong> on 9 Jan 2008, 21:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p64445">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">KillaB</div>
					<div class="post-datetime">
						2 Mar 2008, 23:27					</div>
				</div>
				<div class="post-content content">
					<p>Hi zandbelt,</p><p>What are the chances you&#039;re willing to submit new patch(s) for 1.4.18 since these ones where never integrated into trunk?<br />I&#039;m moving in a couple weeks and would really like to get Asterisk working on my WGT634U so that I can order dry-loop DSL and not have to bother with ordering a PSTN line.</p><p>I&#039;d run with 1.4.11 that&#039;s in trunk right now, but I&#039;m getting this error in Ubuntu 7.10 and can&#039;t seem to fix it:<br /></p><div class="codebox"><pre><code>checking for lt_dlinit in -lltdl... no
configure: ***
configure: *** The libtool installation on this system appears to be broken.
configure: *** Either correct the installation, or run configure
configure: *** without explicitly specifying --with-ltdl
make[3]: *** [/home/OpenWrt/WGT634U/kamikaze_7.09/build_mipsel/asterisk-1.4.11/.configured] Error 1
make[3]: Leaving directory `/home/OpenWrt/WGT634U/packages/net/asterisk-1.4.x&#039;
make[2]: *** [asterisk-1.4.x-compile] Error 2
make[2]: Leaving directory `/home/OpenWrt/WGT634U/kamikaze_7.09/package&#039;
make[1]: *** [package/compile] Error 2
make[1]: Leaving directory `/home/OpenWrt/WGT634U/kamikaze_7.09&#039;
make: *** [world] Error 2</code></pre></div>											<p class="post-edited">(Last edited by <strong>KillaB</strong> on 2 Mar 2008, 23:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p64464">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">KillaB</div>
					<div class="post-datetime">
						3 Mar 2008, 07:31					</div>
				</div>
				<div class="post-content content">
					<p>Huge thanks to Hans for compiling 1.4.18<br />Packages for Kamikaze 7.09 can be found here: <a href="http://members.home.nl/hans.zandbelt/openwrt/kamikaze/7.09/">http://members.home.nl/hans.zandbelt/op … kaze/7.09/</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p64596">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">nik247</div>
					<div class="post-datetime">
						5 Mar 2008, 01:00					</div>
				</div>
				<div class="post-content content">
					<p>I updated to latest ver. 1.4.18 (Kamikaze 7.09 - Asus WL-500gP).<br />root:#ipkg list_installed&nbsp; asterisk14\*<br />asterisk14 - 1.4.18-1 -<br />asterisk14-chan-mobile - 1.4.5-1 -<br />asterisk14-chan-ooh323 - 1.4.5-1 -<br />asterisk14-format-mp3 - 1.4.5-1 -<br />asterisk14-sounds - 1.4.18-1 -<br />Done.</p><p>But when I tried use chan_mobile.so - I have this error and asterisk stoped:</p><p>asterisk: can&#039;t resolve symbol &#039;ast_register_file_version&#039;</p>											<p class="post-edited">(Last edited by <strong>nik247</strong> on 5 Mar 2008, 01:05)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p64646">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">baba2s</div>
					<div class="post-datetime">
						5 Mar 2008, 20:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>KillaB wrote:</cite><blockquote><p>Hi zandbelt,</p><p>What are the chances you&#039;re willing to submit new patch(s) for 1.4.18 since these ones where never integrated into trunk?<br />I&#039;m moving in a couple weeks and would really like to get Asterisk working on my WGT634U so that I can order dry-loop DSL and not have to bother with ordering a PSTN line.</p><p>I&#039;d run with 1.4.11 that&#039;s in trunk right now, but I&#039;m getting this error in Ubuntu 7.10 and can&#039;t seem to fix it:<br /></p><div class="codebox"><pre><code>checking for lt_dlinit in -lltdl... no
configure: ***
configure: *** The libtool installation on this system appears to be broken.
configure: *** Either correct the installation, or run configure
configure: *** without explicitly specifying --with-ltdl
make[3]: *** [/home/OpenWrt/WGT634U/kamikaze_7.09/build_mipsel/asterisk-1.4.11/.configured] Error 1
make[3]: Leaving directory `/home/OpenWrt/WGT634U/packages/net/asterisk-1.4.x&#039;
make[2]: *** [asterisk-1.4.x-compile] Error 2
make[2]: Leaving directory `/home/OpenWrt/WGT634U/kamikaze_7.09/package&#039;
make[1]: *** [package/compile] Error 2
make[1]: Leaving directory `/home/OpenWrt/WGT634U/kamikaze_7.09&#039;
make: *** [world] Error 2</code></pre></div></blockquote></div><p>Hello,<br />You can find the Libtool code here OR other branches too<br /><a href="https://svn.openwrt.org/openwrt/branches/kamikaze-before-brng/package/libtool/">https://svn.openwrt.org/openwrt/branche … e/libtool/</a></p><p>Be carefull while installing because the code is not good and do some mv (MOVE) in the last and you have to copy those files back..<br />Here is the error after installing the Libtool..Can anyone pls tell how to fix this Libtool code </p><p>install -d -m0755 /home/ubuntu/ast1.4/openwrt-devel/OpenWrt-SDK-brcm-2.4-for-Linux-i686/staging_dir_mipsel/usr/lib /home/ubuntu/ast1.4/openwrt-devel/OpenWrt-SDK-brcm-2.4-for-Linux-i686/staging_dir_mipsel/usr/include<br />mv /home/ubuntu/ast1.4/openwrt-devel/OpenWrt-SDK-brcm-2.4-for-Linux-i686/staging_dir_mipsel/lib/* /home/ubuntu/ast1.4/openwrt-devel/OpenWrt-SDK-brcm-2.4-for-Linux-i686/staging_dir_mipsel/usr/lib/<br />mv: cannot overwrite directory `/home/ubuntu/ast1.4/openwrt-devel/OpenWrt-SDK-brcm-2.4-for-Linux-i686/staging_dir_mipsel/usr/lib/gcc&#039;<br />mv: cannot overwrite directory `/home/ubuntu/ast1.4/openwrt-devel/OpenWrt-SDK-brcm-2.4-for-Linux-i686/staging_dir_mipsel/usr/lib/ldscripts&#039;<br />mv: cannot overwrite directory `/home/ubuntu/ast1.4/openwrt-devel/OpenWrt-SDK-brcm-2.4-for-Linux-i686/staging_dir_mipsel/usr/lib/pkgconfig&#039;<br />make[2]: *** [/home/ubuntu/ast1.4/openwrt-devel/OpenWrt-SDK-brcm-2.4-for-Linux-i686/staging_dir_mipsel/stampfiles/.libtool-installed] Error 1<br />make[2]: Leaving directory `/home/ubuntu/ast1.4/openwrt-devel/packages/libs/libtool&#039;<br />make[1]: *** [libtool-compile] Error 2<br />make[1]: Leaving directory `/home/ubuntu/ast1.4/openwrt-devel/OpenWrt-SDK-brcm-2.4-for-Linux-i686/package&#039;<br />make: *** [package/asterisk-1.4.x-compile] Error 2<br />ubuntu@ubuntu:~/ast1.4/openwrt-devel/OpenWrt-SDK-brcm-2.4-for-Linux-i686$ make package/asterisk-1.4.x-compile V=99<br />ubuntu@ubuntu:~/ast1.4/openwrt-devel/OpenWrt-SDK-brcm-2.4-for-Linux-i686$</p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p64648">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">baba2s</div>
					<div class="post-datetime">
						5 Mar 2008, 21:01					</div>
				</div>
				<div class="post-content content">
					<p>Hello Hans,<br />First i like to thanks YOU for the Asterisk support on Openwrt..</p><p>I am able to compile Asterisk 1.4.16, but its failing @ meetme /Zaptell&nbsp; with error</p><p>make -j1 -C zaptel14 compile<br />make[2]: Entering directory `/home/ubuntu/ast1.4/openwrt-devel/packages/libs/zaptel14&#039;<br />/home/ubuntu/ast1.4/openwrt-devel/OpenWrt-SDK-brcm-2.4-for-Linux-i686/include/target.mk:16: /home/ubuntu/ast1.4/openwrt-devel/OpenWrt-SDK-brcm-2.4-for-Linux-i686/tmp/.target.mk: No such file or directory<br />find: /home/ubuntu/ast1.4/openwrt-devel/OpenWrt-SDK-brcm-2.4-for-Linux-i686/build_mipsel/linux--: No such file or directory<br />/home/ubuntu/ast1.4/openwrt-devel/OpenWrt-SDK-brcm-2.4-for-Linux-i686/scripts/metadata.pl target_mk &lt; /home/ubuntu/ast1.4/openwrt-devel/OpenWrt-SDK-brcm-2.4-for-Linux-i686/tmp/.targetinfo &gt; /home/ubuntu/ast1.4/openwrt-devel/OpenWrt-SDK-brcm-2.4-for-Linux-i686/tmp/.target.mk<br />--: /home/ubuntu/ast1.4/openwrt-devel/OpenWrt-SDK-brcm-2.4-for-Linux-i686/tmp/.targetinfo: No such file or directory<br />make[2]: *** [/home/ubuntu/ast1.4/openwrt-devel/OpenWrt-SDK-brcm-2.4-for-Linux-i686/tmp/.target.mk] Error 1<br />make[2]: Leaving directory `/home/ubuntu/ast1.4/openwrt-devel/packages/libs/zaptel14&#039;<br />make[1]: *** [zaptel14-compile] Error 2<br />make[1]: Leaving directory `/home/ubuntu/ast1.4/openwrt-devel/OpenWrt-SDK-brcm-2.4-for-Linux-i686/package&#039;<br />make: *** [package/asterisk-1.4.x-compile] Error 2<br />ubuntu@ubuntu:~/ast1.4/openwrt-devel/OpenWrt-SDK-brcm-2.4-for-Linux-i686$</p><p>I am using your patches.</p><p>The second issue i see is the CODEC_GSM.SO is missing... don&#039;t know why<br />i see the code but mis SO file</p><p>Please help<br />Thanks<br />baba2s</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p64653">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						5 Mar 2008, 22:44					</div>
				</div>
				<div class="post-content content">
					<p>baba2s, killab: I don&#039;t think compiling using a pre-compiled toolchain is supported anymore; please use:</p><p>&nbsp; svn co <a href="https://svn.openwrt.org/openwrt/tags/kamikaze_7.09">https://svn.openwrt.org/openwrt/tags/kamikaze_7.09</a></p><p>for obtaining a build environment.</p><p>nik247: I&#039;ll update asterisk-addons (apparently required after upgrading asterisk core)</p><p>Hans.</p>											<p class="post-edited">(Last edited by <strong>zandbelt</strong> on 5 Mar 2008, 22:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p64663">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">nik247</div>
					<div class="post-datetime">
						6 Mar 2008, 00:35					</div>
				</div>
				<div class="post-content content">
					<p>Hi Hans,<br />BIG thanks you.<br />I&#039;ll wait new files.</p>											<p class="post-edited">(Last edited by <strong>nik247</strong> on 6 Mar 2008, 00:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p64718">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">baba2s</div>
					<div class="post-datetime">
						6 Mar 2008, 21:28					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zandbelt wrote:</cite><blockquote><p>baba2s, killab: I don&#039;t think compiling using a pre-compiled toolchain is supported anymore; please use:</p><p>&nbsp; svn co <a href="https://svn.openwrt.org/openwrt/tags/kamikaze_7.09">https://svn.openwrt.org/openwrt/tags/kamikaze_7.09</a></p><p>for obtaining a build environment.</p><p>nik247: I&#039;ll update asterisk-addons (apparently required after upgrading asterisk core)</p><p>Hans.</p></blockquote></div><p>Thanks hans.</p><p>I compiled&nbsp; the build environment using<br /><a href="https://svn.openwrt.org/openwrt/trunk/">https://svn.openwrt.org/openwrt/trunk/</a></p><p>quick question, after Asterisk 1.4.16 compilation , i don&#039;t see codec GSM&nbsp; (codec_gsm.so is missing).<br />Can you please tell me how to get it .. not sure if its an bug in code.</p><p>Thanks<br />baba2s</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p64719">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">KillaB</div>
					<div class="post-datetime">
						6 Mar 2008, 21:35					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zandbelt wrote:</cite><blockquote><p>baba2s, killab: I don&#039;t think compiling using a pre-compiled toolchain is supported anymore; please use:</p><p>&nbsp; svn co <a href="https://svn.openwrt.org/openwrt/tags/kamikaze_7.09">https://svn.openwrt.org/openwrt/tags/kamikaze_7.09</a></p></blockquote></div><p>If you look closely you will see that libtool is not included in the kamikaze_7.09 package repo, nor the extra package repo, it only exists in trunk.<br />That&#039;s why my build failed....I was trying to use a fresh 7.09 checkout.</p><p>I think a ticket will need to be raised to have it added into the 7.09 branch.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p64720">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						6 Mar 2008, 21:36					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>baba2s wrote:</cite><blockquote><p>quick question, after Asterisk 1.4.16 compilation , i don&#039;t see codec GSM&nbsp; (codec_gsm.so is missing).<br />Can you please tell me how to get it .. not sure if its an bug in code.</p></blockquote></div><p>when the 1.4.11 patch was applied, the option to compile without-gsm was added, I don&#039;t know why<br />but I did not notice when I posted the 1.4.16 patch</p><p>you can correct this yourself by changing &quot;--without-gsm&quot; to &quot;--with-gsm&quot; in the<br />CONFIGURE_ARGS variable in the Makefile</p><p>the next patch for Asterisk 1.4.18-2 or 1.4.19 will include that</p><p>Hans.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p64721">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">baba2s</div>
					<div class="post-datetime">
						6 Mar 2008, 21:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zandbelt wrote:</cite><blockquote><div class="quotebox"><cite>baba2s wrote:</cite><blockquote><p>quick question, after Asterisk 1.4.16 compilation , i don&#039;t see codec GSM&nbsp; (codec_gsm.so is missing).<br />Can you please tell me how to get it .. not sure if its an bug in code.</p></blockquote></div><p>when the 1.4.11 patch was applied, the option to compile without-gsm was added, I don&#039;t know why<br />but I did not notice when I posted the 1.4.16 patch</p><p>you can correct this yourself by changing &quot;--without-gsm&quot; to &quot;--with-gsm&quot; in the<br />CONFIGURE_ARGS variable in the Makefile</p><p>the next patch for Asterisk 1.4.18-2 or 1.4.19 will include that</p><p>Hans.</p></blockquote></div><p>Thanks Hans for quick reply</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p64746">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						7 Mar 2008, 10:06					</div>
				</div>
				<div class="post-content content">
					<p>See ticket #3196 for an all-in-one-patch: asterisk 1.4.18, asterisk-addons-1.4.6 and zaptel-1.4.9.2</p><p>Example build process:</p><p>&nbsp; download: <a href="https://dev.openwrt.org/attachment/ticket/3196/openwrt-packages-asterisk-1.4.18-addons-1.4.6-zaptel-1.4.9.2.patch?format=raw">https://dev.openwrt.org/attachment/tick … format=raw</a><br />&nbsp; as [patchfile]</p><div class="codebox"><pre><code>  svn checkout https://svn.openwrt.org/openwrt/tags/kamikaze_7.09/ mipsel
  cd mipsel
  svn checkout https://svn.openwrt.org/openwrt/packages/ feeds/packages/
  patch -d feeds/packages -p1 &lt; [patchfile]
  cd package
  ln -sf ../feeds/packages/*/*/ .
  cd ..
  make menuconfig
  make</code></pre></div><p>Hans.</p><p>PS: I did see a gnutls build problem on one machine with an existing libgcrypt installation; had to temporarily move /usr/lib/libgrypt.so to something else</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p64903">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">baba2s</div>
					<div class="post-datetime">
						10 Mar 2008, 17:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zandbelt wrote:</cite><blockquote><p>See ticket #3196 for an all-in-one-patch: asterisk 1.4.18, asterisk-addons-1.4.6 and zaptel-1.4.9.2</p><p>Example build process:</p><p>&nbsp; download: <a href="https://dev.openwrt.org/attachment/ticket/3196/openwrt-packages-asterisk-1.4.18-addons-1.4.6-zaptel-1.4.9.2.patch?format=raw">https://dev.openwrt.org/attachment/tick … format=raw</a><br />&nbsp; as [patchfile]</p><div class="codebox"><pre><code>  svn checkout https://svn.openwrt.org/openwrt/tags/kamikaze_7.09/ mipsel
  cd mipsel
  svn checkout https://svn.openwrt.org/openwrt/packages/ feeds/packages/
  patch -d feeds/packages -p1 &lt; [patchfile]
  cd package
  ln -sf ../feeds/packages/*/*/ .
  cd ..
  make menuconfig
  make</code></pre></div><p>Hans.</p><p>PS: I did see a gnutls build problem on one machine with an existing libgcrypt installation; had to temporarily move /usr/lib/libgrypt.so to something else</p></blockquote></div><p>Thanks Hans, i will try building it</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65122">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">sinistermidget</div>
					<div class="post-datetime">
						13 Mar 2008, 21:41					</div>
				</div>
				<div class="post-content content">
					<p>Any idea as to what happened to the kmod-zaptel14 module compiled for 2.6?&nbsp; It seems to have disappeared off of <a href="http://members.home.nl/hans.zandbelt/openwrt/kamikaze/7.09/">http://members.home.nl/hans.zandbelt/op … kaze/7.09/</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65224">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						16 Mar 2008, 13:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>sinistermidget wrote:</cite><blockquote><p>Any idea as to what happened to the kmod-zaptel14 module compiled for 2.6?&nbsp; It seems to have disappeared off of <a href="http://members.home.nl/hans.zandbelt/openwrt/kamikaze/7.09/">http://members.home.nl/hans.zandbelt/op … kaze/7.09/</a></p></blockquote></div><p>re-added</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65381">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						19 Mar 2008, 15:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zandbelt wrote:</cite><blockquote><p>See ticket #3196 for an all-in-one-patch: asterisk 1.4.18, asterisk-addons-1.4.6 and zaptel-1.4.9.2</p></blockquote></div><p>Many thanks Hans! I successfully downloaded/patched to asterisk-1.4.18 using this <strong><em>patch -d feeds/packages -p0 &lt; [patchfile]</em></strong>; however, the compilation spitted out error messages on zaptel as shown below:<br /></p><div class="codebox"><pre><code>checking for tone_zone_find in -ltonezone... yes
checking /opt/tmp/openwrt-svn-trunk/staging_dir/mips/usr/include/zaptel/tonezone.h usability... no
checking /opt/tmp/openwrt-svn-trunk/staging_dir/mips/usr/include/zaptel/tonezone.h presence... no
checking for /opt/tmp/openwrt-svn-trunk/staging_dir/mips/usr/include/zaptel/tonezone.h... no
configure: ***
configure: *** It appears that you do not have the tonezone development package installed.
configure: *** Please install it to include tonezone support, or re-run configure
configure: *** without explicitly specifying --with-tonezone
make[3]: *** [/opt/tmp/openwrt-svn-trunk/build_dir/mips/asterisk-1.4.18/.configured] Error 1
make[3]: Leaving directory `/opt/tmp/openwrt-svn-trunk/feeds/packages/net/asterisk-1.4.x&#039;
make[2]: *** [package/openwrt-packages/net/asterisk-1.4.x/compile] Error 2
make[2]: Leaving directory `/opt/tmp/openwrt-svn-trunk&#039;
make[1]: *** [/opt/tmp/openwrt-svn-trunk/staging_dir/mips/stamp/.package_compile] Error 2
make[1]: Leaving directory `/opt/tmp/openwrt-svn-trunk&#039;
make: *** [world] Error 2</code></pre></div><p>The host, my OpenSuSE v10.3, doesn&#039;t run asterisk nor zaptel. So, it doesn&#039;t have zaptel installed, less the libtonezone. I don&#039;t suppose this is the cause of the above error messages, right?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65382">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						19 Mar 2008, 15:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mazilo wrote:</cite><blockquote><div class="quotebox"><cite>zandbelt wrote:</cite><blockquote><p>See ticket #3196 for an all-in-one-patch: asterisk 1.4.18, asterisk-addons-1.4.6 and zaptel-1.4.9.2</p></blockquote></div><p>Many thanks Hans! I successfully downloaded/patched to asterisk-1.4.18 using this <strong><em>patch -d feeds/packages -p0 &lt; [patchfile]</em></strong>; however, the compilation spitted out error messages on zaptel as shown below:<br /></p><div class="codebox"><pre><code>checking for tone_zone_find in -ltonezone... yes
checking /opt/tmp/openwrt-svn-trunk/staging_dir/mips/usr/include/zaptel/tonezone.h usability... no
checking /opt/tmp/openwrt-svn-trunk/staging_dir/mips/usr/include/zaptel/tonezone.h presence... no
checking for /opt/tmp/openwrt-svn-trunk/staging_dir/mips/usr/include/zaptel/tonezone.h... no
configure: ***
configure: *** It appears that you do not have the tonezone development package installed.
configure: *** Please install it to include tonezone support, or re-run configure
configure: *** without explicitly specifying --with-tonezone
make[3]: *** [/opt/tmp/openwrt-svn-trunk/build_dir/mips/asterisk-1.4.18/.configured] Error 1
make[3]: Leaving directory `/opt/tmp/openwrt-svn-trunk/feeds/packages/net/asterisk-1.4.x&#039;
make[2]: *** [package/openwrt-packages/net/asterisk-1.4.x/compile] Error 2
make[2]: Leaving directory `/opt/tmp/openwrt-svn-trunk&#039;
make[1]: *** [/opt/tmp/openwrt-svn-trunk/staging_dir/mips/stamp/.package_compile] Error 2
make[1]: Leaving directory `/opt/tmp/openwrt-svn-trunk&#039;
make: *** [world] Error 2</code></pre></div><p>The host, my OpenSuSE v10.3, doesn&#039;t run asterisk nor zaptel. So, it doesn&#039;t have zaptel installed, less the libtonezone. I don&#039;t suppose this is the cause of the above error messages, right?</p></blockquote></div><p>no, the build should be at least self-contained (although _conflicts_ with host files can occur if the build process is not&nbsp; prepared to deal with that)</p><p>apparently you selected app_meetme, which requires libtonezone; it looks like the zaptel-libtonezone package was not installed, although it should be selected automatically as a build dependency; can you check whether that is the problem (on my clean checkout it works ok, it selects the zaptel-libtonezone library automatically)</p><p>Hans.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=13839&amp;p=2.html">2</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>