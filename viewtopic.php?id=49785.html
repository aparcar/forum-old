<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [SOLVED] Unable to flash Buffalo WHR-HP-G300N</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 14 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p228764">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">pehjota</div>
					<div class="post-datetime">
						29 Mar 2014, 20:16					</div>
				</div>
				<div class="post-content content">
					<p>I have a <a href="http://wiki.openwrt.org/toh/buffalo/whr-hp-g300n">Buffalo WHR-HP-G300N</a> (router revision A0 A1, board revision A1), which came with &quot;DD-WRT v24SP2-MULTI (05/28/10) std - build 14512&quot;.</p><p>I&#039;ve tried flashing new firmware using the Web UI, but my HTTP connection keeps getting reset when loading &quot;/upgrade.cgi&quot;. I finally managed to flash Buffalo&#039;s &quot;DD-WRT v24SP2-MULTI (06/03/12) std - build 19154&quot; firmware using TFTP.</p><p>But I&#039;ve been unable to flash OpenWrt Attitude Adjustment. I&#039;m sending <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/openwrt-ar71xx-generic-whr-hp-g300n-squashfs-factory.bin">openwrt-ar71xx-generic-whr-hp-g300n-squashfs-factory.bin</a> over TFTP, but the bootloader does nothing with it and I&#039;m still running DD-WRT.</p><p>Does anyone have any suggestions?</p><p>I&#039;m thinking of trying <a href="http://wiki.openwrt.org/doc/techref/mtd">mtd</a> next, but I&#039;m not sure how safe that is (though I assume I can still unbrick the router by sending Buffalo&#039;s firmware over TFTP) or which image I should use. Do I use the same openwrt-ar71xx-generic-whr-hp-g300n-squashfs-factory.bin, or do I use something else?</p><p>Contents of /proc/mtd:</p><div class="codebox"><pre><code>root@DD-WRT:~# cat /proc/mtd
dev:    size   erasesize  name
mtd0: 00040000 00010000 &quot;RedBoot&quot;
mtd1: 003a0000 00010000 &quot;linux&quot;
mtd2: 002c4000 00010000 &quot;rootfs&quot;
mtd3: 00020000 00010000 &quot;ddwrt&quot;
mtd4: 00010000 00010000 &quot;nvram&quot;
mtd5: 00010000 00010000 &quot;board_config&quot;
mtd6: 00400000 00010000 &quot;fullflash&quot;
mtd7: 00040000 00010000 &quot;fullboot&quot;</code></pre></div><p>I assume mtd1 (&quot;linux&quot;) is the device I should use?</p><p>EDIT:<br />Well, I copied the OpenWrt factory image and flashed it with &quot;mtd -r write openwrt-ar71xx-generic-whr-hp-g300n-squashfs-factory.bin linux&quot;, which bricked the router. DIAG flashed with two blinks per cycle, which the manual says is a &quot;Flash ROM error â€“ Cannot read or write to the flash memory&quot;. I unbricked it by flashing back the Buffalo firmware over TFTP. I&#039;m still looking for suggestions to get OpenWrt installed.</p><p>EDIT:<br />Apparently I was trying to flash the wrong file over TFTP. I found <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/openwrt-ar71xx-generic-whr-hp-g300n-squashfs-tftp.bin">openwrt-ar71xx-generic-whr-hp-g300n-squashfs-tftp.bin</a>, and the bootloader flashes that just fine. Newbie mistake. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>pehjota</strong> on 30 Mar 2014, 04:23)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>