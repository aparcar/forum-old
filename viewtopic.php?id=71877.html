<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> It seemed like bufferbloat but can&#039;t be fixed by SQM QoS, pls help</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 24 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p364334">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Neubulae</div>
					<div class="post-datetime">
						25 Aug 2017, 19:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>Sat Aug 26 00:02:56 2017 daemon.info pppd[5707]: CHAP authentication failed<br />Sat Aug 26 00:02:56 2017 daemon.err pppd[5707]: CHAP authentication failed<br />Sat Aug 26 00:02:56 2017 daemon.notice pppd[5707]: Modem hangup<br />Sat Aug 26 00:02:56 2017 daemon.notice pppd[5707]: Connection terminated.<br />Sat Aug 26 00:02:56 2017 daemon.info pppd[5707]: Sent PADT<br />Sat Aug 26 00:02:56 2017 daemon.info pppd[5707]: Exit.<br />Sat Aug 26 00:02:57 2017 daemon.notice netifd: Interface &#039;wan&#039; is now down<br />Sat Aug 26 00:02:57 2017 kern.info kernel: [ 2432.170000] eth1: link down<br />Sat Aug 26 00:02:57 2017 daemon.notice netifd: Interface &#039;wan&#039; is disabled<br />Sat Aug 26 00:02:57 2017 daemon.notice netifd: Interface &#039;wan&#039; is enabled<br />Sat Aug 26 00:02:57 2017 daemon.notice netifd: Interface &#039;wan&#039; is setting up now<br />Sat Aug 26 00:02:57 2017 kern.info kernel: [ 2432.180000] IPv6: ADDRCONF(NETDEV_UP): eth1: link is not ready<br />Sat Aug 26 00:02:57 2017 daemon.notice netifd: Network device &#039;eth1&#039; link is down<br />Sat Aug 26 00:02:57 2017 daemon.notice netifd: Interface &#039;wan&#039; has link connectivity loss<br />Sat Aug 26 00:02:57 2017 kern.debug kernel: [ 2432.920000] ar71xx: pll_reg 0xb8050014: 0x1099<br />Sat Aug 26 00:02:57 2017 kern.info kernel: [ 2432.920000] eth1: link up (100Mbps/Full duplex)<br />Sat Aug 26 00:02:57 2017 kern.info kernel: [ 2432.920000] IPv6: ADDRCONF(NETDEV_CHANGE): eth1: link becomes ready<br />Sat Aug 26 00:02:57 2017 daemon.notice netifd: Network device &#039;eth1&#039; link is up<br />Sat Aug 26 00:02:57 2017 daemon.notice netifd: Interface &#039;wan&#039; has link connectivity <br />Sat Aug 26 00:02:57 2017 daemon.notice netifd: Interface &#039;wan&#039; is setting up now<br />Sat Aug 26 00:02:57 2017 daemon.info pppd[5765]: Plugin rp-pppoe.so loaded.<br />Sat Aug 26 00:02:57 2017 daemon.info pppd[5765]: RP-PPPoE plugin version 3.8p compiled against pppd 2.4.7<br />Sat Aug 26 00:02:57 2017 daemon.notice pppd[5765]: pppd 2.4.7 started by root, uid 0<br />Sat Aug 26 00:02:58 2017 daemon.info pppd[5765]: PPP session is 24731<br />Sat Aug 26 00:02:58 2017 daemon.warn pppd[5765]: Connected to 00:e0:fc:b3:da:04 via interface eth1<br />Sat Aug 26 00:02:58 2017 daemon.info pppd[5765]: Using interface pppoe-wan<br />Sat Aug 26 00:02:58 2017 daemon.notice pppd[5765]: Connect: pppoe-wan &lt;--&gt; eth1<br />Sat Aug 26 00:02:58 2017 kern.info kernel: [ 2433.100000] pppoe-wan: renamed from ppp0<br />Sat Aug 26 00:03:01 2017 daemon.info pppd[5765]: CHAP authentication succeeded: Authentication success,Welcome!<br />Sat Aug 26 00:03:01 2017 daemon.notice pppd[5765]: CHAP authentication succeeded<br />Sat Aug 26 00:03:01 2017 daemon.notice pppd[5765]: peer from calling number 00:E0:FC:B3:DA:04 authorized<br />Sat Aug 26 00:03:01 2017 daemon.notice pppd[5765]: local&nbsp; IP address 100.64.207.52<br />Sat Aug 26 00:03:01 2017 daemon.notice pppd[5765]: remote IP address 100.64.0.1<br />Sat Aug 26 00:03:01 2017 daemon.notice pppd[5765]: primary&nbsp; &nbsp;DNS address 218.85.152.99<br />Sat Aug 26 00:03:01 2017 daemon.notice pppd[5765]: secondary DNS address 218.85.157.99<br />Sat Aug 26 00:03:01 2017 daemon.notice netifd: Network device &#039;pppoe-wan&#039; link is up<br />Sat Aug 26 00:03:01 2017 daemon.notice netifd: Interface &#039;wan&#039; is now up<br />Sat Aug 26 00:03:01 2017 user.notice SQM: /usr/lib/sqm/start-sqm: Starting pppoe-wan<br />Sat Aug 26 00:03:01 2017 user.notice SQM: /usr/lib/sqm/start-sqm: Queue Setup Script: piece_of_cake.qos<br />Sat Aug 26 00:03:01 2017 daemon.err modprobe: act_ipt is already loaded<br />Sat Aug 26 00:03:01 2017 daemon.err modprobe: sch_sfq is already loaded<br />Sat Aug 26 00:03:01 2017 daemon.err modprobe: sch_ingress is already loaded<br />Sat Aug 26 00:03:01 2017 daemon.err modprobe: act_mirred is already loaded<br />Sat Aug 26 00:03:01 2017 daemon.err modprobe: cls_fw is already loaded<br />Sat Aug 26 00:03:01 2017 daemon.err modprobe: cls_flow is already loaded<br />Sat Aug 26 00:03:01 2017 daemon.err modprobe: cls_u32 is already loaded<br />Sat Aug 26 00:03:01 2017 daemon.err modprobe: sch_htb is already loaded<br />Sat Aug 26 00:03:01 2017 daemon.err modprobe: sch_hfsc is already loaded<br />Sat Aug 26 00:03:01 2017 user.notice SQM: QDISC cake is NOT useable.<br />Sat Aug 26 00:03:01 2017 user.notice firewall: Reloading firewall due to ifup of wan (pppoe-wan)</p></blockquote></div><p>The system log looked like this when the problem happens...<br />I am using IDM to download files and every few seconds the speed would suddenly frop to 0, and the connection will be throttled for a few moment until the modem reconnects or the router reboots.<br />Speedtest looked like this<br />dslreports.c*m/speedtest/20774057<br />Please help(too bad I can&#039;t use links...)<br />I am using that WNDR3800, please help</p>											<p class="post-edited">(Last edited by <strong>Neubulae</strong> on 25 Aug 2017, 19:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364352">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">adri</div>
					<div class="post-datetime">
						25 Aug 2017, 23:06					</div>
				</div>
				<div class="post-content content">
					<p>Did you install the cake qdisk (kmod-sched-cake package)?<br />Looking at your logs, it seems the qdisc isn&#039;t installed!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364357">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Neubulae</div>
					<div class="post-datetime">
						26 Aug 2017, 00:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>adri wrote:</cite><blockquote><p>Did you install the cake qdisk (kmod-sched-cake package)?<br />Looking at your logs, it seems the qdisc isn&#039;t installed!</p></blockquote></div><p>How can I install cake package? opkg update &#039;ed but I can&#039;t find it. <br />Is cake far more better than fql?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364418">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">moeller0</div>
					<div class="post-datetime">
						27 Aug 2017, 01:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Neubulae wrote:</cite><blockquote><div class="quotebox"><cite>adri wrote:</cite><blockquote><p>Did you install the cake qdisk (kmod-sched-cake package)?<br />Looking at your logs, it seems the qdisc isn&#039;t installed!</p></blockquote></div><p>How can I install cake package? opkg update &#039;ed but I can&#039;t find it. <br />Is cake far more better than fql?</p></blockquote></div><p>I would ask you to try the current stable LEDE distribution, as lede does include cake in its packet repository, so it should be easy to install; also a future re-merged Openwrt/lede distribution will be based on current lede so that will already hoist your router into the present and will prepare you well for the future.<br />I have no idea what fql is, but cake tries to offer what fqcodel + HTB offer, and IMHO it over-achieve its goals. Have a look at <a href="https://lede-project.org/docs/howto/sqm">https://lede-project.org/docs/howto/sqm</a> for what cake can offer...</p><p>Best Regards</p>											<p class="post-edited">(Last edited by <strong>moeller0</strong> on 27 Aug 2017, 01:50)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>