<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Bad Gateway The process did not produce any response.</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 25 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p210208">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Ramesh_P</div>
					<div class="post-datetime">
						20 Aug 2013, 10:57					</div>
				</div>
				<div class="post-content content">
					<p>Hi ,</p><p>I have following question to understand.</p><p>1. How to enable debugs in luci package ?<br />2. how to debug lua files at run time. say i have xxxx.lua and added some &quot;print&quot; to print some patameter values.<br />&nbsp; &nbsp; for example:</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;local arptable = luci.sys.net.arptable() or {}<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for i, dataset in ipairs(arptable) do<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print(i)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// wanted to print value of i and dataset<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print(dataset)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ip:value(<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dataset[&quot;IP address&quot;],<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;%s (%s)&quot; %{ dataset[&quot;IP address&quot;], dataset[&quot;HW address&quot;] }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br />so when we try to load the page we get error &quot;Bad Gateway The process did not produce any response&quot;&nbsp; but as soon as if we delete the print statement page loads without any issue.</p><p>3. do we have any document to understand complete flow of the luci framework in openWRT .( like how bottons are works, how uci involed from lua to write or read config files etc..,)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210289">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Ramesh_P</div>
					<div class="post-datetime">
						21 Aug 2013, 09:53					</div>
				</div>
				<div class="post-content content">
					<p>any answers ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210291">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">neryba</div>
					<div class="post-datetime">
						21 Aug 2013, 10:06					</div>
				</div>
				<div class="post-content content">
					<p>use .htm files to display parameters</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210292">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Ramesh_P</div>
					<div class="post-datetime">
						21 Aug 2013, 10:13					</div>
				</div>
				<div class="post-content content">
					<p>But my requirement is to debug lua files not htm files. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210293">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">neryba</div>
					<div class="post-datetime">
						21 Aug 2013, 10:25					</div>
				</div>
				<div class="post-content content">
					<p>for examlpe in lua use </p><div class="codebox"><pre><code>uptime     = net:uptime()</code></pre></div><p> and in .htm </p><div class="codebox"><pre><code>html += String.format(&#039;&lt;strong&gt;&lt;%:Uptime%&gt;:&lt;/strong&gt; %t&lt;br /&gt;&#039;, ifc.uptime);
d.innerHTML = html;</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210297">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Ramesh_P</div>
					<div class="post-datetime">
						21 Aug 2013, 10:58					</div>
				</div>
				<div class="post-content content">
					<p>May be the question is not clear to you, my requirement is on dynamically running lua files, if i want print some parameter values as show in above example, is there any mechanism to print those values or its not possible to print the lua files values.<br />may be m not clear with your answer please correct me if m wrong.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210301">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">neryba</div>
					<div class="post-datetime">
						21 Aug 2013, 12:08					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code> ip:value(
                dataset[&quot;IP address&quot;],
                &quot;%s (%s) i=%d, %s, %s&quot; %{ dataset[&quot;IP address&quot;], dataset[&quot;HW address&quot;], i, dataset[&quot;HW type&quot;], dataset[&quot;Device&quot;] }
        )</code></pre></div>											<p class="post-edited">(Last edited by <strong>neryba</strong> on 21 Aug 2013, 12:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210302">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">neryba</div>
					<div class="post-datetime">
						21 Aug 2013, 12:14					</div>
				</div>
				<div class="post-content content">
					<p>arptable ()<br />Returns the current arp-table entries as two-dimensional table.<br />Return value:<br />Table of table containing the current arp entries. The following fields are defined for arp entry objects: { &quot;IP address&quot;, &quot;HW address&quot;, &quot;HW type&quot;, &quot;Flags&quot;, &quot;Mask&quot;, &quot;Device&quot; }</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210307">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Ramesh_P</div>
					<div class="post-datetime">
						21 Aug 2013, 12:50					</div>
				</div>
				<div class="post-content content">
					<p>topic is diverting..., i wanted in genral how one can debug lua files at run time, how we do with C files by putting &quot;printf&quot; similarly do we have any mechnism to do it here. arptable&nbsp; function have taken as example in this post.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210309">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						21 Aug 2013, 13:20					</div>
				</div>
				<div class="post-content content">
					<p>In many contexts you cannot simply print since no http headers have been sent yet so the cgi program will produce invalid output. <br />You can either use nixio.syslog() to write text to logread or you can open a file and write your debug info there, eg. handle = io.open(&quot;/tmp/debug&quot;, &quot;w&quot;) once and then handle:write() to log data.</p><p>A third approach is wrapping the luci cgi-programm in a script:<br /></p><div class="codebox"><pre><code>#!/bin/sh

exec 2&gt;/tmp/debug
exec /www/cgi-bin/luci</code></pre></div><p>Place that in /www/cgi-bin/luci.dbg and chmod it to 0755.<br />Call the gui with <a href="http://192.168.1.1/cgi-bin/luci.dbg">http://192.168.1.1/cgi-bin/luci.dbg</a> and use io.stderr:write() to log data to /tmp/drbug.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>