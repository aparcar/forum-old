<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TL-WA901ND v4 suport</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p293786">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">vilpalu</div>
					<div class="post-datetime">
						28 Sep 2015, 14:25					</div>
				</div>
				<div class="post-content content">
					<p>hello,<br />I just got brand new TL-WA901ND v4. Unfortunately it have new hardware revision. Can it get openwrt support?</p><p>32MB ram<br />4MB flash<br />TP9343</p><p>flash layout:<br /></p><div class="codebox"><pre><code>Creating 5 MTD partitions on &quot;ath-nor0&quot;:
0x000000000000-0x000000020000 : &quot;u-boot&quot;
0x000000020000-0x000000120000 : &quot;kernel&quot;
0x000000120000-0x0000003e0000 : &quot;rootfs&quot;
0x0000003e0000-0x0000003f0000 : &quot;config&quot;
0x0000003f0000-0x000000400000 : &quot;art&quot;</code></pre></div><p><span class="postimg"><img src="https://ktuedu-my.sharepoint.com/personal/vilpalu_ktu_lt/_layouts/15/guestaccess.aspx?guestaccesstoken=hB96Jk%2bCDmPhh2rMsQ9tDQJq%2bvOKvWRC5C6o%2bgTI%2b0M%3d&amp;docid=0157f557f5ebb437996feefecbb4f3fb9" alt="https://ktuedu-my.sharepoint.com/personal/vilpalu_ktu_lt/_layouts/15/guestaccess.aspx?guestaccesstoken=hB96Jk%2bCDmPhh2rMsQ9tDQJq%2bvOKvWRC5C6o%2bgTI%2b0M%3d&amp;amp;docid=0157f557f5ebb437996feefecbb4f3fb9" /></span></p><p>bootlog:<br /></p><div class="codebox"><pre><code> U-Boot 1.1.4 (Apr  8 2015 - 10:25:45)

ap151 - Dragonfly 1.0

DRAM:  32 MB
Top of RAM usable for U-Boot at: 82000000
Reserving 139k for U-Boot at: 81fdc000
Reserving 192k for malloc() at: 81fac000
Reserving 44 Bytes for Board Info at: 81fabfd4
Reserving 36 Bytes for Global Data at: 81fabfb0
Reserving 128k for boot params() at: 81f8bfb0
Stack Pointer at: 81f8bf98
Now running in RAM - U-Boot at: 81fdc000
Flash Manuf Id 0xef, DeviceId0 0x40, DeviceId1 0x16
flash size 4MB, sector count = 64
Flash:  4 MB
Using default environment

In:    serial
Out:   serial
Err:   serial
Net:   ath_gmac_enet_initialize...
No valid address in Flash. Using fixed address
No valid address in Flash. Using fixed address
ath_gmac_enet_initialize: reset mask:c02200
Dragonfly----&gt; S27 PHY *
: cfg1 0x80000000 cfg2 0x7114
eth0: 00:03:7f:09:0b:ad
athrs27_phy_setup ATHR_PHY_CONTROL 4 :1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 4 :10
eth0 up
ATHRS27: resetting s27
ATHRS27: s27 reset done
: cfg1 0x800c0000 cfg2 0x7214
eth1: 00:03:7f:09:0b:ad
athrs27_phy_setup ATHR_PHY_CONTROL 0 :1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 0 :10
athrs27_phy_setup ATHR_PHY_CONTROL 1 :1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 1 :10
athrs27_phy_setup ATHR_PHY_CONTROL 2 :1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 2 :10
athrs27_phy_setup ATHR_PHY_CONTROL 3 :1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 3 :10
eth1 up
eth0, eth1
Setting 0x181162c0 to 0x82
Autobooting in 1 seconds
## Booting image at 9f020000 ...
   Uncompressing Kernel Image ... OK
No initrd
## Transferring control to Linux (at address 80194fe0) ...
## Giving linux memsize in bytes, 33554432

Starting kernel ...

Booting QCA956x
Linux version 2.6.31 (tomcat@buildserver) (gcc version 4.3.3 (GCC) ) #87 Wed Apr 8 10:28:20 CST 2015
Ram size passed from bootloader =32M
flash_size passed from bootloader = 4
CPU revision is: 00019750 (MIPS 74Kc)
ath_sys_frequency: cpu 750 ddr 400 ahb 250
Determined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00002000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00002000
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
Kernel command line: console=ttyS0,115200 root=31:2 rootfstype=squashfs init=/sbin/init mtdparts=ath-nor0:128k(u-boot),1024k(kernel),2816k(rootfs),64k(config),64k(art) mem=32M
PID hash table entries: 128 (order: 7, 512 bytes)
Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
Writing ErrCtl register=00000000
Readback ErrCtl register=00000000
Memory: 25088k/32768k available (1639k kernel code, 7680k reserved, 413k data, 116k init, 0k highmem)
NR_IRQS:128
plat_time_init: plat time init done
r4k_clockevent_init: Ignoring int_usable failure
Calibrating delay loop... 374.78 BogoMIPS (lpj=749568)
Mount-cache hash table entries: 512

****************ALLOC***********************
 Packet mem: 802324a0 (0x500000 bytes)
********************************************

NET: Registered protocol family 16
ath_pcibios_init: bus 0
***** Warning PCIe 0 H/W not found !!!
registering PCI controller with io_map_base unset
bio: create slab &lt;bio-0&gt; at 0
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
net_link: create socket ok.
TCP established hash table entries: 1024 (order: 1, 8192 bytes)
TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
TCP: Hash tables configured (established 1024 bind 1024)
TCP reno registered
NET: Registered protocol family 1
ATH GPIOC major 0
squashfs: version 4.0 (2009/01/31) Phillip Lougher
msgmni has been set to 49
io scheduler noop registered
io scheduler deadline registered (default)
Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
serial8250.0: ttyS0 at MMIO 0xb8020000 (irq = 19) is a 16550A
console [ttyS0] enabled
PPP generic driver version 2.4.2
NET: Registered protocol family 24
5 cmdlinepart partitions found on MTD device ath-nor0
Creating 5 MTD partitions on &quot;ath-nor0&quot;:
0x000000000000-0x000000020000 : &quot;u-boot&quot;
0x000000020000-0x000000120000 : &quot;kernel&quot;
0x000000120000-0x0000003e0000 : &quot;rootfs&quot;
0x0000003e0000-0x0000003f0000 : &quot;config&quot;
0x0000003f0000-0x000000400000 : &quot;art&quot;
-&gt;Oops: flash id 0xef4016 .
Ooops, why the devices couldn&#039;t been initialed?
TCP cubic registered
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
athwdt_init: Registering WDT success
VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
Freeing unused kernel memory: 116k freed
init started:  BusyBox v1.01 (2015.04.08-02:33+0000) multi-call binary
This Board use 2.6.31

xt_time: kernel timezone is -0000
nf_conntrack version 0.5.0 (512 buckets, 5120 max)
ip_tables: (C) 2000-2006 Netfilter Core Team
insmod: cannot open module `/lib/modules/2.6.31/kernel/iptable_raw.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.31/kernel/flashid.ko&#039;: No such file or directory
PPPoL2TP kernel driver, V1.0
PPTP driver version 0.8.3
insmod: cannot open module `/lib/modules/2.6.31/kernel/harmony.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.31/kernel/af_key.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.31/kernel/xfrm_user.ko&#039;: No such file or directory
qca956x_GMAC: Length per segment 1536
956x_GMAC: qca956x_gmac_attach
956x_GMAC: qca956x_set_gmac_caps
GPIO LED SETTINGS ....done
Currently in interrupt mode unit1
qca956x_set_gmac_caps  CHECK DMA STATUS
mac:1 Registering S27....
qca956x_GMAC: RX TASKLET - Pkts per Intr:32
qca956x_GMAC: Max segments per packet :   1
qca956x_GMAC: Max tx descriptor count :   128
qca956x_GMAC: Max rx descriptor count :   128
qca956x_GMAC: Mac capability flags    :   2401
956x_GMAC: qca956x_gmac_attach
956x_GMAC: qca956x_set_gmac_caps
Currently in interrupt mode unit0
qca956x_set_gmac_caps  CHECK DMA STATUS
mac:0 Registering S27....
qca956x_GMAC: RX TASKLET - Pkts per Intr:32
qca956x_GMAC: Max segments per packet :   1
qca956x_GMAC: Max tx descriptor count :   128
qca956x_GMAC: Max rx descriptor count :   128
qca956x_GMAC: Mac capability flags    :   2401

 (none) mips #87 Wed Apr 8 10:28:20 CST 2015 (none)
(none) login: athr_gmac_ring_alloc Allocated 2048 at 0x81c4f000
sram_desc_cnt 1536,mac Unit 1,Tx r-&gt;ring_desc 0xbd000000
athr_gmac_ring_alloc Allocated 2048 at 0x81e67800
sram_desc_cnt 3072,mac Unit 1,Rx r-&gt;ring_desc 0xbd000600
956x_GMAC: eth1 in RGMII MODE
Dragonfly -----&gt; S27 PHY
ATHRS27: resetting s27
ATHRS27: s27 reset done
++++ athrs27_igmp_setup once---
++ PVID: 0x0000000b, bitmap: 0x0000001f
++ PVID: 0x00000003, bitmap: 0x0000001f
++ PVID: 0x00000005, bitmap: 0x0000001f
++ PVID: 0x00000007, bitmap: 0x0000001f
++ PVID: 0x00000009, bitmap: 0x0000001f
vtable vid: 0x00000002, bitmap 0x00000003
vtable vid: 0x00000004, bitmap 0x00000005
vtable vid: 0x00000006, bitmap 0x00000007
vtable vid: 0x00000008, bitmap 0x00000009
vtable vid: 0x0000000a, bitmap 0x0000000b
vtable vid: 0x0000000c, bitmap 0x0000000d
vtable vid: 0x0000000e, bitmap 0x0000000f
vtable vid: 0x00000010, bitmap 0x00000011
vtable vid: 0x00000012, bitmap 0x00000013
vtable vid: 0x00000014, bitmap 0x00000015
vtable vid: 0x00000016, bitmap 0x00000017
vtable vid: 0x00000018, bitmap 0x00000019
vtable vid: 0x0000001a, bitmap 0x0000001b
vtable vid: 0x0000001c, bitmap 0x0000001d
vtable vid: 0x0000001e, bitmap 0x0000001f
vtable vid: 0x00000020, bitmap 0x00000021
Setting Drop CRC Errors, Pause Frames and Length Error frames
Setting PHY...
athr_gmac_ring_alloc Allocated 2048 at 0x81e5f800
sram_desc_cnt 4608,mac Unit 0,Tx r-&gt;ring_desc 0xbd000c00
athr_gmac_ring_alloc Allocated 2048 at 0x81e5f000
sram_desc_cnt 6144,mac Unit 0,Rx r-&gt;ring_desc 0xbd001200
956x_GMAC: eth0 in MII MODE
Dragonfly -----&gt; S27 PHY
Setting Drop CRC Errors, Pause Frames and Length Error frames
Setting PHY...
device eth1 entered promiscuous mode
athr_gmac_ring_free Freeing at 0x81e5f800
athr_gmac_ring_free Freeing at 0x81e5f000
athr_gmac_ring_alloc Allocated 2048 at 0x81e5f000
sram_desc_cnt 6144,mac Unit 0,Tx r-&gt;ring_desc 0xbd000c00
athr_gmac_ring_alloc Allocated 2048 at 0x81e5f800
sram_desc_cnt 6144,mac Unit 0,Rx r-&gt;ring_desc 0xbd001200
956x_GMAC: eth0 in MII MODE
Dragonfly -----&gt; S27 PHY
Setting Drop CRC Errors, Pause Frames and Length Error frames
Setting PHY...
nf_conntrack_rtsp v0.6.21 loading
nf_nat_rtsp v0.6.21 loading
adf: module license &#039;Proprietary&#039; taints kernel.
Disabling lock debugging due to kernel taint
ath_hal: 0.9.17.1 (AR5416, AR9380, REGOPS_FUNC, WRITE_EEPROM, TX_DATA_SWAP, RX_DATA_SWAP, 11D)
ath_rate_atheros: Copyright (c) 2001-2005 Atheros Communications, Inc, All Rights Reserved
ath_dev: Copyright (c) 2001-2007 Atheros Communications, Inc, All Rights Reserved
ath_ahb: 10.2.162.3 (Atheros/multi-bss)
__ath_attach: Set global_scn[0]
Enterprise mode: 0x03bda000
Restoring Cal data from Flash
------read crc is:0x00000000, calculate crc is:0x151ad996.
caldata crc check error.
ath_get_caps[6146] rx chainmask mismatch actual 7 sc_chainmak 0
ath_get_caps[6121] tx chainmask mismatch actual 7 sc_chainmak 0
ATH_RESERVED_TXBUF = 1000
wifi0: Atheros 956X: mem=0xb8100000, irq=2
VAP device ath0 created
Setting Max Stations:32

 DES SSID SET=TP-LINK_AP_C8CA
 ieee80211_ioctl_siwmode: imr.ifm_active=131712, new mode=3, valid=1
athr_gmac_ring_free Freeing at 0x81e5f000
athr_gmac_ring_free Freeing at 0x81e5f800
br0: port 1(eth1) entering disabled state
athr_gmac_ring_alloc Allocated 2048 at 0x81e5f800
sram_desc_cnt 6144,mac Unit 0,Tx r-&gt;ring_desc 0xbd000c00
athr_gmac_ring_alloc Allocated 2048 at 0x81e5f000
sram_desc_cnt 6144,mac Unit 0,Rx r-&gt;ring_desc 0xbd001200
956x_GMAC: eth0 in MII MODE
Dragonfly -----&gt; S27 PHY
Setting Drop CRC Errors, Pause Frames and Length Error frames
Setting PHY...
device ath0 entered promiscuous mode
br0: port 2(ath0) entering forwarding state
 ieee80211_ioctl_siwmode: imr.ifm_active=393856, new mode=3, valid=1
br0: port 2(ath0) entering disabled state

 DES SSID SET=TP-LINK_AP_C8CA
br0: port 2(ath0) entering forwarding state
blockWps_proc_write 861: write value = 0 </code></pre></div><p>serial ports needs soldering, because Tx and Rx holes are not connected to lines:<br /><span class="postimg"><img src="https://ktuedu-my.sharepoint.com/personal/vilpalu_ktu_lt/_layouts/15/guestaccess.aspx?guestaccesstoken=dfFHYIGr%2bISK7GJLMeW%2bTVkX3dLC6glmYf4iGTPoj90%3d&amp;docid=050f5cfd859624b6c96cad70801d40182" alt="https://ktuedu-my.sharepoint.com/personal/vilpalu_ktu_lt/_layouts/15/guestaccess.aspx?guestaccesstoken=dfFHYIGr%2bISK7GJLMeW%2bTVkX3dLC6glmYf4iGTPoj90%3d&amp;amp;docid=050f5cfd859624b6c96cad70801d40182" /></span><br />serial settings: 115200 8N1</p><p>The username/password combination to get a root Shell access is root:sohoadmin</p>											<p class="post-edited">(Last edited by <strong>vilpalu</strong> on 1 Oct 2015, 10:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p294732">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">vilpalu</div>
					<div class="post-datetime">
						5 Oct 2015, 10:19					</div>
				</div>
				<div class="post-content content">
					<p>moved to dev <a href="https://forum.openwrt.org/viewtopic.php?pid=294731#p294731">https://forum.openwrt.org/viewtopic.php … 31#p294731</a></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>