<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Publiv hotspot with advertisements</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 25 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p290627">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mike78</div>
					<div class="post-datetime">
						6 Sep 2015, 01:02					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />I would like to build a public wifi hotspot which interrupts user-surfing after about 15 minutes by showing a commercial. I think I need a transparent proxy to achieve this but dont know which one could do that. Could someone help me with that and give me a hint of the configuration? <br />Thank you in advance <br />Mike</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p290909">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">KHAN85</div>
					<div class="post-datetime">
						8 Sep 2015, 16:41					</div>
				</div>
				<div class="post-content content">
					<p>You don&#039;t need a transparent proxy, only a webserver and a few iptables rules.<br />Use &quot;PREROUTING&quot; in iptables in order to redirect the HTTP traffic of a source ip-address (one user) to the webserver where you have the advertising.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p290961">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">augustus_meyer</div>
					<div class="post-datetime">
						9 Sep 2015, 00:49					</div>
				</div>
				<div class="post-content content">
					<p>This is a &quot;Quick and Dirty&quot; solution, which not even is accurate for a single-user hotspot. <br />For multiple users, you have to track the timer schedule individually, based on IP, for example. <br />Second, sooner or later, you will &quot;interrupt&quot; the loading of various objects for a page with the REDIRECT.</p><p>For a reasonable solution, the beginning is to use &quot;squid&quot;, which has a very basic captive portal functionality.<br />As a commercial solution, best of breed, I developed a special proxy, which modifies html &quot;on-the-fly&quot;, so that the ad is generated within the context of the visited page.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291021">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">KHAN85</div>
					<div class="post-datetime">
						9 Sep 2015, 13:38					</div>
				</div>
				<div class="post-content content">
					<p>The problem with Squid is its high cosumption of hardware resources, what it&#039;s made useless in small devices with low hardware specs.</p><p>You can control the time of every single user, just use the option &quot;-s&quot; (--source) of iptables. and a simple cgi script in the webserver that it control the time of a single ip addr (using the cgi var REMOTE_ADDR).</p><p>A few years ago I developed a HTTP proxy (without use squid, coding it from zero in C) to add html/js code on-the-fly too. The problem nowadays is the high use of HTTPS websites.</p>											<p class="post-edited">(Last edited by <strong>KHAN85</strong> on 9 Sep 2015, 13:38)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>