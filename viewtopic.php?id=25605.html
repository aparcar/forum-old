<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Access problems samba 3</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 2 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p112699">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Bergi84</div>
					<div class="post-datetime">
						8 Jul 2010, 01:22					</div>
				</div>
				<div class="post-content content">
					<p>I have a WRT350N V2.1 from Linksys. Yesterday i installed Backfire 10.03 on it. Now i try to setup a samba server with Luci, but i cant access the share. Windows always ask me after a username and password. I tried to chang &quot;security = user&quot; to &quot;sercurity =&nbsp; share&quot;. Now windows say it have no access to the directory. I use Windows 7. I also try add &quot;public = true&quot; to smb.conf, but always when i restart samba it generate a new smb.conf and delete my changs. Pleas help me.</p><p>/etc/samba/smb.conf.templat:<br /></p><div class="codebox"><pre><code>[global]
        netbios name = |NAME|
        workgroup = |WORKGROUP|
        server string = |DESCRIPTION|
        syslog = 10
        encrypt passwords = true
        passdb backend = smbpasswd
        obey pam restrictions = yes
        socket options = TCP_NODELAY
        unix charset = ISO-8859-1
        preferred master = yes
        os level = 20
        security = share
        guest account = nobody
        invalid users = root
        smb passwd file = /etc/samba/smbpasswd</code></pre></div><p>/etc/samba/smb.conf:<br /></p><div class="codebox"><pre><code>global]
        netbios name = openwrt
        workgroup = openwrt
        server string = openwrt
        syslog = 10
        encrypt passwords = true
        passdb backend = smbpasswd
        obey pam restrictions = yes
        socket options = TCP_NODELAY
        unix charset = ISO-8859-1
        preferred master = yes
        os level = 20
        security = share
        guest account = nobody
        invalid users = root
        smb passwd file = /etc/samba/smbpasswd

[homes]
        comment = Home Directories
        browseable = no
        read only = no
        create mode = 0750

[usb]
        path = /usb
        read only = no
        guest ok = yes
        create mask = 0706
        directory mask = 0706</code></pre></div><p>/etc/config/samba:<br /></p><div class="codebox"><pre><code>config &#039;samba&#039;
        option &#039;name&#039; &#039;openwrt&#039;
        option &#039;workgroup&#039; &#039;openwrt&#039;
        option &#039;description&#039; &#039;openwrt&#039;
        option &#039;homes&#039; &#039;1&#039;

config &#039;sambashare&#039;
        option &#039;read_only&#039; &#039;no&#039;
        option &#039;create_mask&#039; &#039;0706&#039;
        option &#039;dir_mask&#039; &#039;0706&#039;
        option &#039;name&#039; &#039;usb&#039;
        option &#039;path&#039; &#039;/usb&#039;
        option &#039;guest_ok&#039; &#039;yes&#039;</code></pre></div>											<p class="post-edited">(Last edited by <strong>Bergi84</strong> on 8 Jul 2010, 11:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p112720">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Bergi84</div>
					<div class="post-datetime">
						8 Jul 2010, 11:00					</div>
				</div>
				<div class="post-content content">
					<p>I solved the public problem, i changed the /etc/init.d/samba and now there is a entry with public = yes but he still say access denied. Have someone a idea?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p112743">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						8 Jul 2010, 18:16					</div>
				</div>
				<div class="post-content content">
					<p>why not use the openwrt wiki and then the samba wiki?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p112753">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Bergi84</div>
					<div class="post-datetime">
						8 Jul 2010, 20:49					</div>
				</div>
				<div class="post-content content">
					<p>I found nothing about my problem in the wikis or forum. I&#039;am a linux and openwrt noob, the only reason why i&#039;am come to this point are the wiki&#039;s. Without them i coudn&#039;t do any thing. Pleas help me.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p113957">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">robnitro</div>
					<div class="post-datetime">
						29 Jul 2010, 04:24					</div>
				</div>
				<div class="post-content content">
					<p>Look at this&nbsp; <a href="http://www.tomshardware.com/forum/75-63-windows-samba-issue">http://www.tomshardware.com/forum/75-63 … amba-issue</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p113961">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">playdude</div>
					<div class="post-datetime">
						29 Jul 2010, 05:32					</div>
				</div>
				<div class="post-content content">
					<p>Looks like sharing works, but permission doesn&#039;t allow you to access share contents. Add this option to your share and tell smbd to run the config file directly, NOT through /etc/init.d. See if it works.</p><div class="codebox"><pre><code>force user = root</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p114007">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">rahul1023</div>
					<div class="post-datetime">
						29 Jul 2010, 16:32					</div>
				</div>
				<div class="post-content content">
					<p>I had the same problem as you... take a look at my thread: <a href="https://forum.openwrt.org/viewtopic.php?id=25872">https://forum.openwrt.org/viewtopic.php?id=25872</a></p><p>this might fix the issue for you...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p114029">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Bergi84</div>
					<div class="post-datetime">
						29 Jul 2010, 20:07					</div>
				</div>
				<div class="post-content content">
					<p>I have solved the problem but i forgot to post it.</p><p>The problem was you can not share drives with Kmod-fs-ntfs because of access restrictions. You need to mount ntfs drives with ntfs-3g.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p143284">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">zyamb</div>
					<div class="post-datetime">
						10 Sep 2011, 06:10					</div>
				</div>
				<div class="post-content content">
					<p>Hello, </p><p>As per my post here [<a href="https://forum.openwrt.org/viewtopic.php?pid=143283#p143283">https://forum.openwrt.org/viewtopic.php … 83#p143283</a>] I have not gotten this to work. <br />How do you remount (automatically) under the method you mentioned? I am using backfire 10.03. </p><p>Any help is appreciated. </p><p>Thanks!</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>