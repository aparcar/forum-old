<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> ddns-scripts don&#039;t seem to fire</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 4 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p126997">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Comitizer</div>
					<div class="post-datetime">
						31 Jan 2011, 18:05					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m having some trouble with my ddns-scripts in my build of OpenWRT.&nbsp; </p><p>I recently cut a build from trunk (labelled as KAMIKAZE (bleeding edge, r25133)) and now my ddns-scripts don&#039;t seem to be working.&nbsp; </p><p>I ran the tests in the wiki:</p><p><a href="http://wiki.openwrt.org/doc/howto/ddns">http://wiki.openwrt.org/doc/howto/ddns</a></p><p>and I see to remember that I would see an entry for &quot;updating DDNS&quot; when I execute the &quot;ifup wan&quot; command but I&#039;m not seeing that happen.&nbsp; I also see nothing when I issue the &quot;ACTION=ifup INTERFACE=wan /sbin/hotplug-call iface&quot; command.</p><p>How can I check if this is installed correctly?&nbsp; What should I see when I execute the above commands?</p><p>Thanks for the help.&nbsp; </p><p>(BTW, I&#039;m on an WNDR3700 if that matters).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p127001">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">written_direcon</div>
					<div class="post-datetime">
						31 Jan 2011, 19:29					</div>
				</div>
				<div class="post-content content">
					<p>Check &#039;logread&#039;.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p127640">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Comitizer</div>
					<div class="post-datetime">
						8 Feb 2011, 05:47					</div>
				</div>
				<div class="post-content content">
					<p>Ok, so I updated to a recent build that I cut from trunk (bleeding edge, r25368) and I still can&#039;t seem to get the DDNS scripts to fire.&nbsp; </p><p>I can see the daemon running when I do a ps:</p><p>11341 root&nbsp; &nbsp; &nbsp; 1460 S&nbsp; &nbsp; /bin/sh /usr/lib/ddns/dynamic_dns_updater.sh myddns</p><p>but they never fire.&nbsp; Keep in mind, this was working perfectly before I updated and I am using an identical configuration file so I&#039;m not sure what&#039;s different.</p><p>This is what I see when I run the commands mentioned in the wiki:</p><p>. /etc/profile<br />ifup wan</p><p>ifup wan<br />udhcpc (v1.17.3) started<br />Sending discover...<br />Sending discover...<br />Sending select for &lt;IP&gt;...<br />Lease of &lt;IP&gt; obtained, lease time 7200<br />udhcpc: ifconfig eth1 &lt;IP&gt;netmask 255.255.252.0 broadcast +<br />udhcpc: setting default routers: &lt;IP&gt;<br />udhcpc: setting dns servers: &lt;DNS&gt;<br />0.openwrt.pool.ntp.org: Unknown host<br />1.openwrt.pool.ntp.org: Unknown host<br />2.openwrt.pool.ntp.org: Unknown host<br />3.openwrt.pool.ntp.org: Unknown host</p><p>I checked logread after executing the command and I don&#039;t see anything in there either.&nbsp; Is anyone else having this problem?&nbsp; Any ideas on what I can do to diagnose?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p127673">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">janvos</div>
					<div class="post-datetime">
						8 Feb 2011, 15:29					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m using backfire 10.03-rc4 and I&#039;m having exactly the same problem.<br />Have you already found a solution?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p127699">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Comitizer</div>
					<div class="post-datetime">
						8 Feb 2011, 18:38					</div>
				</div>
				<div class="post-content content">
					<p>Nope, and I&#039;m not sure how to diagnose. There&#039;s nothing in logread. I can see that there were a few changes to the scripts in svn but I don&#039;t see anything that would cause a problem (from what i can tell).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p127705">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">janvos</div>
					<div class="post-datetime">
						8 Feb 2011, 18:59					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve just asked the brains on the irc. And they told me this:</p><p>try `. /usr/lib/ddns/dynamic_dns_functions.sh &amp;&amp; start_daemon_for_all_ddns_sections&#039;</p><p>And it works!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p128236">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Comitizer</div>
					<div class="post-datetime">
						13 Feb 2011, 22:12					</div>
				</div>
				<div class="post-content content">
					<p>Ok, I see the service running but when I executed the above command there was nothing output to the screen.&nbsp; Should there be?&nbsp; I seem to remember the script outputting that it was updating when i ran that in past builds.&nbsp; </p><p>Regardless, I let it run for over 72 hours and it never did a force update.&nbsp; How can I diagnose?&nbsp; Anyone else seeing this in trunk?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p128274">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">hvkls</div>
					<div class="post-datetime">
						14 Feb 2011, 07:47					</div>
				</div>
				<div class="post-content content">
					<p>janvos, where would you put that line exactly?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p128400">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Comitizer</div>
					<div class="post-datetime">
						15 Feb 2011, 06:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hvkls wrote:</cite><blockquote><p>janvos, where would you put that line exactly?</p></blockquote></div><p>You type it in on the command line.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p128401">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">hvkls</div>
					<div class="post-datetime">
						15 Feb 2011, 08:08					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m experiencing here (ar71xx, 10.03.1-rc4, r24045) what I thought was the OP&#039;s (your <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> problem: ddns-scripts doesn&#039;t seem to detect when your external IP address changes, which makes it pretty useless for me. Currently, I&#039;ve resorted to a cron job that checks my WAN IP address every 5 minutes, and runs ez-ipupdate when needed, but that&#039;s pretty dumb.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p128440">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">Drolyk</div>
					<div class="post-datetime">
						15 Feb 2011, 15:52					</div>
				</div>
				<div class="post-content content">
					<p>confirm problem on r25443,&nbsp; </p><p>~# opkg list-installed | grep ddns<br />ddns-scripts - 1.0.0-12<br />luci-app-ddns - 0.10+svn6892-1</p><p>hope problem will be fixed in near future</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p128469">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">written_direcon</div>
					<div class="post-datetime">
						15 Feb 2011, 18:51					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>opkg list_installed &quot;*ddns*&quot;</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p128491">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">Comitizer</div>
					<div class="post-datetime">
						15 Feb 2011, 21:36					</div>
				</div>
				<div class="post-content content">
					<p>I have the same.&nbsp; Anyone else able to confirm this?&nbsp; Perhaps a bug needs to be filed:</p><p>root@DRADIS:~# opkg list_installed &quot;*ddns*&quot;<br />ddns-scripts - 1.0.0-12<br />luci-app-ddns - 0.10+svn6841-1</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p128493">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						15 Feb 2011, 21:42					</div>
				</div>
				<div class="post-content content">
					<p>You can try &quot;yaddns&quot; as drop-in replacement, it uses the same configuration file and is compatible to luci-app-ddns.<br /></p><div class="codebox"><pre><code>opkg --force-overwrite install yaddns</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p128629">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">Comitizer</div>
					<div class="post-datetime">
						16 Feb 2011, 22:21					</div>
				</div>
				<div class="post-content content">
					<p>Ok, I filed an issue. </p><p>It&#039;s number 8875. </p><p>Jow, I&#039;ll try your workaround later this week. Thanks for the suggestion.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p128668">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">Comitizer</div>
					<div class="post-datetime">
						17 Feb 2011, 08:12					</div>
				</div>
				<div class="post-content content">
					<p>hmm, can&#039;t seem to install that:</p><div class="codebox"><pre><code>root@DRADIS:~# opkg update
Downloading http://downloads.openwrt.org/backfire/10.03.1-rc4/ar71xx/packages/Packages.gz.
Inflating http://downloads.openwrt.org/backfire/10.03.1-rc4/ar71xx/packages/Packages.gz.
Updated list of available packages in /var/opkg-lists/packages.
root@DRADIS:~# opkg --force-overwrite install yaddns
Unknown package &#039;yaddns&#039;.
Collected errors:
 * opkg_install_cmd: Cannot install package yaddns.
root@DRADIS:~#</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p128669">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">Comitizer</div>
					<div class="post-datetime">
						17 Feb 2011, 08:17					</div>
				</div>
				<div class="post-content content">
					<p>ok, update my opkg to the snapshots repository and it worked.&nbsp; Now, how do I start it?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p128670">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">Comitizer</div>
					<div class="post-datetime">
						17 Feb 2011, 08:54					</div>
				</div>
				<div class="post-content content">
					<p>Alright, I managed to get it started by looking at the hotplug.d script.&nbsp; It turns out that there was an error in my cfg file.&nbsp; Basically, my service name was dyndns.org where it SHOULD have been just dyndns.</p><p>I&#039;m not sure when things changed because I&#039;ve been restoring my cfg file for quite some time.&nbsp; But it looks like a change must have been made.</p><p>Regardless, I have it working now.&nbsp; I&#039;ll have to update the bug tomorrow.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p130967">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">roni261980</div>
					<div class="post-datetime">
						17 Mar 2011, 14:28					</div>
				</div>
				<div class="post-content content">
					<p>i receive this</p><p>root@OpenWrt:~# yaddns<br />Segmentation fault</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p130968">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">roni261980</div>
					<div class="post-datetime">
						17 Mar 2011, 14:32					</div>
				</div>
				<div class="post-content content">
					<p>root@OpenWrt:~# ACTION=ifup INTERFACE=wan /sbin/hotplug-call iface<br />Segmentation fault<br />root@OpenWrt:~#</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132742">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">Crazy</div>
					<div class="post-datetime">
						11 Apr 2011, 23:24					</div>
				</div>
				<div class="post-content content">
					<p>Same problem, no ddns with r26494 <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p136386">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">westbywest</div>
					<div class="post-datetime">
						2 Jun 2011, 00:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Comitizer wrote:</cite><blockquote><p>Alright, I managed to get it started by looking at the hotplug.d script.&nbsp; It turns out that there was an error in my cfg file.&nbsp; Basically, my service name was dyndns.org where it SHOULD have been just dyndns.</p><p>I&#039;m not sure when things changed because I&#039;ve been restoring my cfg file for quite some time.&nbsp; But it looks like a change must have been made.<br />Regardless, I have it working now.&nbsp; I&#039;ll have to update the bug tomorrow.</p></blockquote></div><p>To follow up on Comitizer&#039;s remark, I was able to fix the ddns-scripts on my (self-compiled) copy of backfire rc4 r25206 by changing this line in /etc/config/ddns:<br /></p><div class="codebox"><pre><code>    option &#039;service_name&#039; &#039;dyndns.org&#039;</code></pre></div><p>to this:<br /></p><div class="codebox"><pre><code>    option &#039;service_name&#039; &#039;dyndns&#039;</code></pre></div><p>I&#039;m guessing it is luci-app-ddns which is generating the wrong config value for DynDNS.org?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p139759">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">dash17291</div>
					<div class="post-datetime">
						23 Jul 2011, 14:45					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://patchwork.ozo.com/patch/368/">http://patchwork.ozo.com/patch/368/</a></p><p>OR</p><p>modify the following two functions in</p><p>/usr/lib/ddns/dynamic_dns_functions.sh</p><br /><br /><p>verbose_echo()<br />{<br />if [ &quot;$verbose_mode&quot; = 1 ]<br />then<br />logger -t ddns-scripts $1<br />fi<br />}</p><p>start_daemon_for_all_ddns_sections()<br />{<br />SECTIONS=&quot;&quot;<br />config_cb()<br />{<br />SECTIONS=&quot;$SECTIONS $2&quot;<br />}<br />config_load &quot;ddns&quot;</p><p>for section in $SECTIONS<br />do<br />/usr/lib/ddns/dynamic_dns_updater.sh $section 1 &gt; /dev/null 2&gt;&amp;1 &amp;<br />done<br />}</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p139774">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">medve540</div>
					<div class="post-datetime">
						23 Jul 2011, 19:01					</div>
				</div>
				<div class="post-content content">
					<p>Try with Backfire 10.03.1-rc5! <br />It works for me.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142404">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">stevie7303215</div>
					<div class="post-datetime">
						28 Aug 2011, 21:16					</div>
				</div>
				<div class="post-content content">
					<p>I had the same problem, I have 2 routers, my second router has openwrt and is not directly connected to the net. </p><p>In luci gui&nbsp; service/dyndns <br />source of IP=network <br />network= wan</p><p>It wouldnt update at dyndns.org until i changed the config file in ect/config/ddns (i use winscp)</p><p>This is just part of my config file.</p><p>config &#039;service&#039; &#039;myddns&#039;<br />&nbsp; &nbsp; option &#039;interface&#039; &#039;lan&#039;&nbsp; (&lt;-------here you need to change &#039;wan&#039; to &#039;lan&#039;)<br />&nbsp; &nbsp; option &#039;service_name&#039; &#039;dyndns.org&#039;<br />&nbsp; &nbsp; option &#039;force_interval&#039; &#039;72&#039;</p><p>Then i rebooted router and works every time.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>