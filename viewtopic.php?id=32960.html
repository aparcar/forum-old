<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> rsync+iconv</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 23 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p148414">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">cptdondo</div>
					<div class="post-datetime">
						14 Nov 2011, 03:36					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve been trying to build rsync with iconv support.&nbsp; I need to be able to rsync files with UTF-8 chars to an OpenWRT system that doesn&#039;t have UTF-8 support.</p><p>rsync has the --iconv option for that - but I can&#039;t seem to get it to work.&nbsp; The default build disables it.&nbsp; I have a backfire build system, and I&#039;ve built libiconv, libiconv-full, and rsync, even specified --enable-iconv, and it still fails to build with iconv support.&nbsp; The build tells me that it can&#039;t find iconv.h but libiconv copies it to the include dir....</p><p>Can anyone offer any help?&nbsp; I need to have pure-ascii file names on my AP and I need to rsync them from a UTF-8 system....</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p148415">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						14 Nov 2011, 03:53					</div>
				</div>
				<div class="post-content content">
					<p>Make sure that CONFIG_NLS is set and add &quot;include $(INCLUDE_DIR)/nls.mk&quot; to the rsync openwrt makefile.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p148450">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">cptdondo</div>
					<div class="post-datetime">
						14 Nov 2011, 14:36					</div>
				</div>
				<div class="post-content content">
					<p>OK, thanks.&nbsp; I got it built and it now runs but throws an error.&nbsp; I&#039;ve tried both --iconv=utf-8,iso88591 and --iconv=. and the result is the same:</p><p>[sender] cannot convert filename: Chris Botti _ Michael Bubl\#351 (Invalid argument)<br />[sender] cannot convert filename: Stan Getz/Ballads and Bossa Nova/\#311 Preciso Perdoar.mp3 (Invalid or incomplete multibyte or wide character)<br />[sender] cannot convert filename: Stan Getz/Compact Jazz/So Dan\#347o Samba (I Only Dance S.mp3 (Invalid or incomplete multibyte or wide character)<br />[receiver] cannot convert filename: Unknown Artist/Unknown Album/\#345\#265\#220- Believe (PV).mp3 (Invalid or incomplete multibyte or wide character)<br />[generator] cannot convert filename: Unknown Artist/Unknown Album/\#345\#265\#220- Believe (PV).mp3 (Invalid or incomplete multibyte or wide character)<br />[receiver] cannot convert filename: Yothu Yindi/Tribal Voice/Dj\#303\#244pana.mp3 (Invalid or incomplete multibyte or wide character)<br />[generator] cannot convert filename: Yothu Yindi/Tribal Voice/Dj\#303\#244pana.mp3 (Invalid or incomplete multibyte or wide character) </p><p>Any idea where to look?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212724">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mandrzej</div>
					<div class="post-datetime">
						18 Sep 2013, 22:09					</div>
				</div>
				<div class="post-content content">
					<p>I also need to rsync with iconv. I have no experience in building. I compiled with the default settings for test - OK.<br />But what I have now and where to change things, to have the option of rsync iconv?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>