<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Howto connect to the best Access Point</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p135859">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">sebelk</div>
					<div class="post-datetime">
						23 May 2011, 19:37					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I have an AP per floor with the same SSID. I can&#039;t change the SSID because&nbsp; it&#039;s hardest to understand (please believe me) for&nbsp; users. <br />The problem is that when some people connect (using WPA2 Enterprise) with let&#039;s say an iPhone on 3° floor and then goes to 7° floor. The iPhone keeps on connected on 3°floor&nbsp; AP. Is there a way to prevent that? Does wpa rekey interval decreasing&nbsp; help to solve it?</p><p>any idea, suggestion?</p><p>Thanks in advance!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p135869">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						23 May 2011, 23:07					</div>
				</div>
				<div class="post-content content">
					<p>I think the roaming behavior depends on client, not the ap. Perhaps you can set the option <strong>distance</strong> to disconnect the client when it&#039;s away but I have no idea how it works or will it work.<br /></p><div class="quotebox"><blockquote><p>Distance between the ap and the furthest client in meters. Only supported by madwifi, and the mac80211 type (in trunk)</p></blockquote></div><p><a href="http://wiki.openwrt.org/doc/uci/wireless">Wireless configuration - OpenWrt Wiki</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p135875">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">sebelk</div>
					<div class="post-datetime">
						24 May 2011, 01:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>fyi wrote:</cite><blockquote><p>I think the roaming behavior depends on client, not the ap. Perhaps you can set the option <strong>distance</strong> to disconnect the client when it&#039;s away but I have no idea how it works or will it work.<br /></p><div class="quotebox"><blockquote><p>Distance between the ap and the furthest client in meters. Only supported by madwifi, and the mac80211 type (in trunk)</p></blockquote></div><p><a href="http://wiki.openwrt.org/doc/uci/wireless">Wireless configuration - OpenWrt Wiki</a></p></blockquote></div><p>Hmmm... but that does mean that is not supported on stable releases, doesn&#039;t it?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p135900">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						24 May 2011, 13:04					</div>
				</div>
				<div class="post-content content">
					<p><a href="https://forum.openwrt.org/viewtopic.php?pid=113215">OpenWrt / Distance option on mac80211</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p136487">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">sebelk</div>
					<div class="post-datetime">
						3 Jun 2011, 17:41					</div>
				</div>
				<div class="post-content content">
					<p>Why does a station believe that it keep on connected to an AP?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p136620">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						7 Jun 2011, 01:04					</div>
				</div>
				<div class="post-content content">
					<p>You till don&#039;t want to give up, do you? Maybe you should read the comment from mbm in &quot;<a href="https://forum.openwrt.org/viewtopic.php?pid=49508#p49508">OpenWrt / Handover</a>&quot; and what luminoso had successfully accomplished in &quot;<a href="https://forum.openwrt.org/viewtopic.php?id=26290">OpenWrt / Two routers wireless roaming, or something</a>&quot;. Anyway, I understand that, without proper communication among the associated aps, there could be some cosmetic influence during the handover as described in &quot;<a href="https://forum.openwrt.org/viewtopic.php?pid=99100">OpenWrt / wccp equivalent (ESS roaming) for openwrt?</a>&quot;.</p><p>On my FON2201 with Kamikaze 8.09.2 atheros build, I modify <a href="https://dev.openwrt.org/browser/trunk/package/hostapd/files/hostapd.sh">/lib/wifi/hostapd.sh</a>, <a href="https://dev.openwrt.org/browser/trunk/package/uci/files/lib/config/uci.sh">/lib/config/uci.sh</a> and /etc/config/wireless,<br /></p><div class="codebox"><pre><code>config &#039;wifi-iface&#039; &#039;cfg1&#039;
        option &#039;device&#039; &#039;wifi0&#039;
        option &#039;network&#039; &#039;lan&#039;
        option &#039;key&#039; &#039;xxxxxxxx&#039;
        option &#039;ssid&#039; &#039;xxxxxxxx&#039;
        option &#039;mode&#039; &#039;ap&#039;
        option &#039;encryption&#039; &#039;psk2&#039;
        option &#039;iapp_interface&#039; &#039;lan&#039;</code></pre></div><p>and I get,<br /></p><div class="codebox"><pre><code>Configuration file: /var/run/hostapd-ath0.conf
Mode: IEEE 802.11b  Channel: 1  Frequency: 0 MHz
Using interface ath0 with hwaddr 00:18:84:XX:XX:XX and ssid &#039;xxxxxxxx&#039;
IEEE 802.11F (IAPP) using interface br-lan</code></pre></div><p>Though I have no idea what &quot;<strong>iapp_interface</strong>&quot; being doing, I believe that it should be what you are looking for. But, from the wiki, you have to implement <strong>802.11X authentication</strong> which I have no intention to try.</p><p><a href="http://en.wikipedia.org/wiki/IEEE_802.11f">Inter-Access Point Protocol - Wikipedia, the free encyclopedia</a><br /><a href="http://features.techworld.com/mobile-wireless/435/">WLAN Roaming - the basics - Feature - Techworld.com</a><br /><a href="http://features.techworld.com/mobile-wireless/438/">Make your WLAN roam faster - How-to - Techworld.com</a><br /><a href="http://www.dd-wrt.com/wiki/index.php/Wireless_access_point#Roaming_access">Wireless access point - DD-WRT Wiki</a> - Roaming access</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p136654">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">sebelk</div>
					<div class="post-datetime">
						7 Jun 2011, 20:00					</div>
				</div>
				<div class="post-content content">
					<p>Thanks fyi for your answer!</p><p>It was really useful. I&#039;ve got a partially roaming: </p><p>I&#039;ve changed all channel and set the same lan ip address of every AP&nbsp; in the building and now if I go from one floor to another it reconnects automagically. It tear down the tcp connections, but at least ir reconnects automatically!</p><p>Now, I&#039;ve noted that the main problem was that station (when every A had different lan IP)&nbsp; looked for the previous AP IP address, but it did the roaming, I don&#039;t understand why is the dhcp independent from roaming?</p><p>Below you have the messages on the STA before LAN IP change:</p><div class="codebox"><pre><code>/
Jun  7 10:11:33 peque NetworkManager[770]: &lt;info&gt; (wlan0): supplicant interface state: 4-way handshake -&gt; completed
Jun  7 10:12:23 peque NetworkManager[770]: &lt;info&gt; (wlan0): supplicant interface state: completed -&gt; authenticating
Jun  7 10:12:23 peque lldpad[1030]: vdp_ifup:wlan0 vdp data already exists !
Jun  7 10:12:23 peque NetworkManager[770]: &lt;info&gt; (wlan0): supplicant interface state: authenticating -&gt; associating
Jun  7 10:12:23 peque NetworkManager[770]: &lt;info&gt; (wlan0): supplicant interface state: associating -&gt; associated
Jun  7 10:12:26 peque NetworkManager[770]: &lt;info&gt; (wlan0): supplicant interface state: associated -&gt; 4-way handshake
Jun  7 10:12:26 peque lldpad[1030]: vdp_ifup:wlan0 vdp data already exists !
Jun  7 10:12:26 peque NetworkManager[770]: &lt;info&gt; (wlan0): supplicant interface state: 4-way handshake -&gt; completed
Jun  7 10:12:27 peque NetworkManager[770]: &lt;info&gt; (wlan0): roamed from BSSID D8:5D:4C:AE:40:D4 (UP-PVIII-I) to 00:25:9C:14:06:6E (UP-PVIII-I)
Jun  7 10:13:08 peque NetworkManager[770]: &lt;info&gt; (wlan0): supplicant interface state: completed -&gt; authenticating
Jun  7 10:13:08 peque lldpad[1030]: vdp_ifup:wlan0 vdp data already exists !
Jun  7 10:13:08 peque NetworkManager[770]: &lt;info&gt; (wlan0): supplicant interface state: authenticating -&gt; associating
Jun  7 10:13:08 peque NetworkManager[770]: &lt;info&gt; (wlan0): supplicant interface state: associating -&gt; associated
Jun  7 10:13:08 peque NetworkManager[770]: &lt;info&gt; (wlan0): supplicant interface state: associated -&gt; 4-way handshake
Jun  7 10:13:08 peque lldpad[1030]: vdp_ifup:wlan0 vdp data already exists !
Jun  7 10:13:08 peque NetworkManager[770]: &lt;info&gt; (wlan0): supplicant interface state: 4-way handshake -&gt; completed
Jun  7 10:13:09 peque NetworkManager[770]: &lt;info&gt; (wlan0): roamed from BSSID 00:25:9C:14:06:6E (UP-PVIII-I) to 00:23:69:49:09:BF (UP-PVIII-I)
Jun  7 10:13:22 peque NetworkManager[770]: &lt;info&gt; (wlan0): supplicant interface state: completed -&gt; authenticating
Jun  7 10:13:23 peque lldpad[1030]: vdp_ifup:wlan0 vdp data already exists !
Jun  7 10:13:23 peque NetworkManager[770]: &lt;info&gt; (wlan0): supplicant interface state: authenticating -&gt; associating
Jun  7 10:13:23 peque NetworkManager[770]: &lt;info&gt; (wlan0): supplicant interface state: associating -&gt; associated
Jun  7 10:13:26 peque NetworkManager[770]: &lt;info&gt; (wlan0): supplicant interface state: associated -&gt; 4-way handshake
Jun  7 10:13:26 peque lldpad[1030]: vdp_ifup:wlan0 vdp data already exists !</code></pre></div><p>thanks in advance!</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>