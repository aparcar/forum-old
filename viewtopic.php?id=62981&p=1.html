<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [SOLVED] Asus WL-330N3G: how do I begin with it?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 8 Apr 2018 and 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=62981&amp;p=2.html">2</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p312789">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						27 Feb 2016, 17:26					</div>
				</div>
				<div class="post-content content">
					<p>Thank you very much for the nice firmware!</p><p>I&#039;m a novice and need some help with OpenWRT on WL-330N3G.</p><p>Done so far:<br /></p><ul><li><p>flashed the <a href="https://downloads.openwrt.org/chaos_calmer/15.05/ramips/rt305x/openwrt-15.05-ramips-rt305x-wl-330n3g-squashfs-sysupgrade.bin">Chaos Calmer 15.05</a> - <em>OK</em></p></li><li><p>rebooted the device - <em>OK</em></p></li><li><p>set the root&#039;s password - <em>OK</em></p></li><li><p>used the <strong>uci</strong> to assign the SSID name, the encryption mode (psk2) and the key - <em>OK</em></p></li><li><p>used the <strong>uci</strong> to enable the WiFi - I can see the <strong><em>disabled=0</em></strong> but still WiFi does not come up after a reboot</p></li></ul><p>Here I stuck.</p><p>And that is not my biggest problem yet.</p><p>The WL-330N3G is intended for using an USB-modem as its WAN interface.<br />Right now all I can get is LAN.</p><p>How do I do the <strong>opkg update</strong>?<br />How do I install the USB-dongle support?</p><p>Thank you in advance.</p>											<p class="post-edited">(Last edited by <strong>booBot</strong> on 8 Mar 2016, 19:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313030">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						29 Feb 2016, 09:46					</div>
				</div>
				<div class="post-content content">
					<p>The only way for right now - as I can see it (as a novice) - is to change the routing table in the OS on WL-330N3G to use its LAN (and my notebook&#039;s internet connection in result) to reach the software archives for <strong>opkg</strong>.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313049">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Max Hopper</div>
					<div class="post-datetime">
						29 Feb 2016, 13:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>booBot wrote:</cite><blockquote><ul><li><p>used the uci to enable the WiFi...</p></li></ul></blockquote></div><p>There is no mention of -</p><div class="codebox"><pre><code>uci commit wireless</code></pre></div><p>issued <strong>before</strong> rebooting.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313050">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						29 Feb 2016, 13:26					</div>
				</div>
				<div class="post-content content">
					<p>I did that - and I can see all those settings with the <strong>uci show wireless</strong> after cold restart.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313234">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						1 Mar 2016, 23:13					</div>
				</div>
				<div class="post-content content">
					<p>How do I set the routing?<br />I try the <strong>ip route</strong> (like I do in Lubuntu) - ash reports it does not know &quot;ip&quot;...</p><p>I need to assign the 192.168.1.2 as the default GW.</p><p>Thank you in advance.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313236">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						1 Mar 2016, 23:27					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>route add -net 0.0.0.0 gw 192.168.1.2</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313237">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						1 Mar 2016, 23:28					</div>
				</div>
				<div class="post-content content">
					<p>Now I need to tell OS to use the 208.67.222.222 as my favorite DNS server...<br />How to?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313271">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Max Hopper</div>
					<div class="post-datetime">
						2 Mar 2016, 09:50					</div>
				</div>
				<div class="post-content content">
					<p><a href="https://wiki.openwrt.org/doc/uci/dhcp">DNS configuration</a>.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313340">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						2 Mar 2016, 19:09					</div>
				</div>
				<div class="post-content content">
					<p>Thank you, Max.</p><p>This is my <strong><a href="http://pastebin.com/DML6u5fm">dmesg</a></strong>.<br />This is my <strong><a href="http://pastebin.com/Z4q407T9">/etc/config/network</a></strong>.<br />This is my <strong><a href="http://pastebin.com/u0xXb0zf">logread</a></strong> after I did the <strong><em>ifup wan</em></strong>.</p><p>The modem seems to not come up.</p><p>This is my <strong><a href="http://pastebin.com/1eq2WrUN">uci show wireless</a></strong>.<br />WiFi does not come up either.</p><p>Thank you in advance!</p>											<p class="post-edited">(Last edited by <strong>booBot</strong> on 2 Mar 2016, 19:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313351">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Max Hopper</div>
					<div class="post-datetime">
						2 Mar 2016, 20:29					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>netifd wrote:</cite><blockquote><p>Wed Mar&nbsp; 2 16:51:56 2016 daemon.notice netifd: radio0 (1102): Interface 0 setup failed: INVALID_WPA_PSK<br />Wed Mar&nbsp; 2 16:51:56 2016 daemon.notice netifd: radio0 (1102): WARNING: Variable &#039;interfaces&#039; does not exist or is not an array/object</p></blockquote></div><p>Correct this error.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313361">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						2 Mar 2016, 22:17					</div>
				</div>
				<div class="post-content content">
					<p>The WPA mode is exactly the <strong>psk</strong>, but the actual <em>key</em> value was intentionally garbled for this display.<br />The actual <em>key</em> value is 63 (sixty-three) alpha-numerics.</p><p>I - for the life of me - cannot find where the error is!</p><p>In which configuration file should I look for the <em>interfaces</em> variable?</p>											<p class="post-edited">(Last edited by <strong>booBot</strong> on 2 Mar 2016, 22:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313362">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						2 Mar 2016, 22:39					</div>
				</div>
				<div class="post-content content">
					<p>Yo!<br />I did not touch there ANYTHING - but suddenly the WiFi is up now.<br />OK, one mistery less.<br /><img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Back to my problem with the USB-modem...<br />The <strong>logread</strong> shows that it tries to come up but always fails.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313370">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						2 Mar 2016, 23:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Max Hopper wrote:</cite><blockquote><p><a href="https://wiki.openwrt.org/doc/uci/dhcp">DNS configuration</a>.</p></blockquote></div><p>I could not find there how to force <strong>dnsmasq</strong> to use the 208.67.222.222 and 208.67.220.220 as my upstream DNS servers.<br />That article tells the <strong>dnsmasq</strong> will get DNS addresses from my ISP by DHCP.<br />This is not what I want.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313373">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Max Hopper</div>
					<div class="post-datetime">
						2 Mar 2016, 23:52					</div>
				</div>
				<div class="post-content content">
					<p><em>/etc/config/dhcp</em> -<br />under the section - <em>dnsmasq</em> -<br /></p><div class="codebox"><pre><code>list server 208.67.222.222
list server 208.67.220.220
list server 8.8.8.8 # Google (optional)</code></pre></div><p>&nbsp; &nbsp; <br />Пожалуйста.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313484">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						3 Mar 2016, 19:42					</div>
				</div>
				<div class="post-content content">
					<p>Thanks a lot, Max!</p><p>This is my current <strong><a href="http://pastebin.com/4XLdb8Xw">dmesg</a></strong>.<br />This is my current <strong><a href="http://pastebin.com/GmELgwiX">logread</a></strong>.<br />This is my current <strong><a href="http://pastebin.com/b8gdQEUY">uci show</a></strong>.<br />This is my current <strong><a href="http://pastebin.com/5N0diCFG">/etc/config/network</a></strong>.<br />All are with the USB-modem attached.</p><p>WiFi works now, 3G does not.<br />What could be a problem here?</p><p>Thank you in advance.</p>											<p class="post-edited">(Last edited by <strong>booBot</strong> on 3 Mar 2016, 19:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313744">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						5 Mar 2016, 17:23					</div>
				</div>
				<div class="post-content content">
					<p>Still can&#039;t get my modem to work.</p><p>But!<br />It seems, my previous trouble with getting WiFi up was cause by the wrong options order:<br /></p><ul><li><p><strong>working</strong>: the <strong><em>key</em></strong> declaration <span class="bbu">BEFORE</span> the <strong><em>encryption</em></strong> decraration;</p></li><li><p><strong>not working</strong>:&nbsp; the <strong><em>key</em></strong> declaration <span class="bbu">AFTER</span> the <strong><em>encryption</em></strong> decraration.</p></li></ul><p>Hope that helps someone.</p>											<p class="post-edited">(Last edited by <strong>booBot</strong> on 5 Mar 2016, 17:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313749">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">Max Hopper</div>
					<div class="post-datetime">
						5 Mar 2016, 18:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>booBot wrote:</cite><blockquote><ul><li><p><strong>working</strong>: the <strong><em>key</em></strong> declaration <span class="bbu">BEFORE</span> the <strong><em>encryption</em></strong> decraration;</p></li><li><p><strong>not working</strong>:&nbsp; the <strong><em>key</em></strong> declaration <span class="bbu">AFTER</span> the <strong><em>encryption</em></strong> decraration.</p></li></ul></blockquote></div><p>This (DD) configuration is successfully initialising -<br /></p><div class="codebox"><pre><code>config wifi-iface
    option device &#039;radio0&#039;
    option network &#039;lan&#039;
    option mode &#039;ap&#039;
    option encryption &#039;psk2+ccmp&#039;
    option key &#039;Super Secret Key&#039;
    option ssid &#039;This is MY WiFi&#039;

config wifi-iface
    option device &#039;radio0&#039;
    option network &#039;wwan&#039;
    option mode &#039;sta&#039;
    option encryption &#039;psk2+ccmp&#039;
    option ssid &#039;This is YOUR WiFi&#039;
    option key &#039;Super Secret Key&#039;</code></pre></div><p>Are the EOLs in <em>/etc/config/wireless</em> *nix or MS-DOS (how has the file been edited)?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313753">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						5 Mar 2016, 18:50					</div>
				</div>
				<div class="post-content content">
					<p>Dear Max! Thanks a lot again!</p><p>I am using only <strong>vim</strong> and <strong>uci</strong> to edit things, so I hope all the EOLs have the right format.<br />May be I was too fast to declare that the options order is important indeed - I did not try &quot;breaking&#039; my WiFi by reverting to my &quot;wrong&quot; options order. So, I should possibly appologise for that point.</p><p>&quot;And now for something completely different!&quot; (tm)</p><p>This is my <strong><a href="http://pastebin.com/vw50AcGZ">cat /etc/config/network</a></strong>.<br />My Huawei E3131 is connecting now and I do have WAN access.<br /><img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>The only thing left - the Asus WL-330N3G has a LED named <strong>3G</strong> which (under Asus&#039;s stock firmware) lits up when an USB-modem is on-line.<br />Under the OpenWrt firmware it is NOT lit.</p><p>May be it is a nit-picking, but I&#039;d rather had it working properly.<br />Where should I look?</p>											<p class="post-edited">(Last edited by <strong>booBot</strong> on 5 Mar 2016, 18:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313754">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">Max Hopper</div>
					<div class="post-datetime">
						5 Mar 2016, 18:58					</div>
				</div>
				<div class="post-content content">
					<p>What knowledge I have with LEDs is theoretical (I do not care if they work).&nbsp; Operation of them is managed through the GPIO interface.</p><p>OT - your command of the English vernacular is very good.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313756">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						5 Mar 2016, 19:01					</div>
				</div>
				<div class="post-content content">
					<p>OK<br />Thanks again.</p><p>I&#039;ll report if I succeed at it.</p><p><strong><span class="bbu">Dear OpenWrt Team! Huge THANK YOU for the great job</span>!!!</strong></p><p>OT - I try my best! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>booBot</strong> on 5 Mar 2016, 19:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313795">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						6 Mar 2016, 01:19					</div>
				</div>
				<div class="post-content content">
					<p>I guess I could control the <strong>3G</strong> LED from the <strong>/etc/ppp/ip-up</strong> and <strong>/etc/ppp/ip-down</strong> scripts.</p><p>Now I&#039;m reading <a href="https://wiki.openwrt.org/doc/hardware/port.gpio">these fine pages</a> about the way GPIO pins are managed, but I&#039;m sort of scared...</p><p>Does anybody know which is the GPIO pin number of the <strong>3G</strong> LED?</p>											<p class="post-edited">(Last edited by <strong>booBot</strong> on 6 Mar 2016, 01:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313909">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						7 Mar 2016, 16:22					</div>
				</div>
				<div class="post-content content">
					<p>Seems I cannot assign static DHCP leases.</p><p>I try:<br /></p><ul><li><p><strong>dhcp-host=11:22:33:44:55:66,192.168.1.2</strong> in the <strong><em>/etc/dnsmasq.conf</em></strong>;</p></li><li><p><strong>dhcp-host=11:22:33:44:55:66,192.168.1.2</strong> in the <strong><em>/etc/config/dnsmasq.conf</em></strong>;</p></li><li><p>adding the <strong>config host</strong> section with all the fields (&#039;ip&#039;, &#039;mac&#039; and &#039;name&#039;) in the <strong><em>/etc/config/dhcp</em></strong>.</p></li></ul><p>Nothing seems to work for me.</p><p>What do I do wrong?</p>											<p class="post-edited">(Last edited by <strong>booBot</strong> on 7 Mar 2016, 16:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313962">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						8 Mar 2016, 02:21					</div>
				</div>
				<div class="post-content content">
					<p><img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />After some (significant) meditation looking at Finnish Gulf I attained this stage of enlightement:<br /></p><ul><li><p>my <strong><a href="http://pastebin.com/kErsMXpw">uci show dhcp</a></strong></p></li></ul><p>This configuration example limits the DHCP pool to four IP-addresses, reserves two of them for two certain clients, whereas one of them (namely - <em>someotherhostname</em>) gets the same IP-address regardless of how it connects (via WiFi or via Ethernet).</p>											<p class="post-edited">(Last edited by <strong>booBot</strong> on 8 Mar 2016, 02:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313964">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						8 Mar 2016, 02:28					</div>
				</div>
				<div class="post-content content">
					<p>And now -the funny bit.</p><p>When I attempted to install LuCI - it occured that the web-interface was already there FROM THE VERY BEGINNING!<br /><img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Alas, the built-in control of LEDs is not exactly what I want.<br />The <strong>3G</strong> LED is listed there (even in two colors, blue and red) but the trigger only allows to lit this LED by the presence of an USB device attached.<br />The LED lits up immediately when the USB-modem is recognised by OS - no matter if modem fails to register with a 3G network...</p><p>I&#039;m still to figure out how to control this LED from the <strong>ppp/ip-up</strong> and <strong>ppp/ip-down</strong> scripts.</p>											<p class="post-edited">(Last edited by <strong>booBot</strong> on 8 Mar 2016, 02:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313993">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						8 Mar 2016, 13:24					</div>
				</div>
				<div class="post-content content">
					<p><img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />Hurray!</p><p>There was no need to invent a square wheel - The Mighty Wisdom of The Open Wrt Team has provided us with everything we might ever need. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Just go to the <strong><em>System-&gt;LED Configuration</em></strong> LuCI page, select:<br /></p><ul><li><p><strong>Name</strong>: 3G;</p></li><li><p><strong>LED Name</strong>: scroll to the <strong>asus:blue:3g</strong> list entry;</p></li><li><p><strong>Trigger</strong>: scroll to the <strong>netdev</strong> list entry;</p></li><li><p><strong>Device</strong>: scroll to the <strong>3g-wan</strong> list entry;</p></li><li><p><strong>Trigger Mode</strong>: tick the <strong>Link On</strong> check-box (or any you like).</p></li></ul><p>Now click on the <strong>Add</strong> and then the <strong>Save &amp; Apply</strong> buttons - that&#039;s it!<br />Simple!!!<br /><img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Huge MEGA THANK YOU to the magnificent OpenWrt Team!<br />I&#039;m happy as an elefant now.<br /><img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>booBot</strong> on 8 Mar 2016, 13:54)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=62981&amp;p=2.html">2</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>