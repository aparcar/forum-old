<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Need some help with D-Link DSL 504T</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p78499">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Bemorph</div>
					<div class="post-datetime">
						22 Dec 2008, 22:19					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve been reading around all day about openwrt and everything seems great so I feel I wanna try this out, however I need some help.</p><p>First of I collected some info about my model and found out that it has a Texas Instrument chipset AR7 and 4mb memory.<br /><a href="http://wiki.openwrt.org/Hardware/DLink">http://wiki.openwrt.org/Hardware/DLink</a></p><p>Then I downloaded the Kamikaze 8.09_RC1 release and ran<br /></p><div class="codebox"><pre><code>make menuconfig</code></pre></div><p>After spending some time with the settings I felt satisfied and saved, exited and ran:<br /></p><div class="codebox"><pre><code>make</code></pre></div><p>I let that finish but now I&#039;m stuck, what do I do now?<br />I was expecting to get a .bin or .trx file to upload through the webinterface of my router but I didn&#039;t...<br />So where did I go wrong or have I missed anything?</p><br /><p>Also I would like to check some things with you guys.<br />What are the must haves for the firmware? Are those installed by default? ( I would suppose so but one can never be to sure )</p><p>I was thinking of using the DSL-504T only as a modem with bridging capabillity only, no ppoe, no firewall no nothing as I have a separate router for that stuff ( DLink DGL-4300 ).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78500">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						22 Dec 2008, 22:21					</div>
				</div>
				<div class="post-content content">
					<p>Hi.</p><p>Generated images can be found in the &quot;bin/&quot; subfolder.<br />Yes, sane defaults are selected if nothing (besides the architecture) is changed in menuconfig.</p><p>~ JoW</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78502">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Bemorph</div>
					<div class="post-datetime">
						22 Dec 2008, 22:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jow wrote:</cite><blockquote><p>Hi.</p><p>Generated images can be found in the &quot;bin/&quot; subfolder.<br />Yes, sane defaults are selected if nothing (besides the architecture) is changed in menuconfig.</p><p>~ JoW</p></blockquote></div><p>Hi, and thanks for the insanely quick reply <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Then I must have done something wrong, I have 48 bin files in my bin folder...<br />( If that&#039;s correct which one do I choose? )</p><p>Okey thanks for clearing that up <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>EDIT: The files I have in bin can also be found here: <a href="http://downloads.openwrt.org/kamikaze/8.09_RC1/ar7/">http://downloads.openwrt.org/kamikaze/8.09_RC1/ar7/</a><br />Which one do I pick? :S</p><p>EDIT2: Sorry think I was abit to hasty, if I understod things right I&#039;m supposed to use: openwrt-ar7-squashfs.bin</p><p>EDIT3, Just checking, pppoe isn&#039;t needed if I&#039;m gonna use bridging, right?</p>											<p class="post-edited">(Last edited by <strong>Bemorph</strong> on 23 Dec 2008, 00:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78562">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						24 Dec 2008, 03:15					</div>
				</div>
				<div class="post-content content">
					<p>Hi.</p><p>Yep, it&#039;s safe to remove pppoe support if you don&#039;t need it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78567">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">stonefish</div>
					<div class="post-datetime">
						24 Dec 2008, 03:56					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m not sure if it&#039;s the recommended method, but I used adam2flash-502T.pl to install openwrt on my DSL-504T.&nbsp; All you have to do is remove the line about USB detection that it fails on.&nbsp; Everything else matches.</p><p>Mine&#039;s also a pure bridge.&nbsp; Please let me know if you figure out how to make the DSL connection persist after reboots <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78727">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Bemorph</div>
					<div class="post-datetime">
						28 Dec 2008, 17:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>stonefish wrote:</cite><blockquote><p>I&#039;m not sure if it&#039;s the recommended method, but I used adam2flash-502T.pl to install openwrt on my DSL-504T.&nbsp; All you have to do is remove the line about USB detection that it fails on.&nbsp; Everything else matches.</p><p>Mine&#039;s also a pure bridge.&nbsp; Please let me know if you figure out how to make the DSL connection persist after reboots <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>I tried to use that method too but it stopped and said my router wasn&#039;t a 502T which is true, but you&#039;re saying if I remove the part about usb I should get it working?</p><p>I have another question for you too, did you notice any performance increase?</p><p>EDIT: Should I add support for IPv6 or will that crank the file size way of my charts? (4mb)</p>											<p class="post-edited">(Last edited by <strong>Bemorph</strong> on 28 Dec 2008, 18:29)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78738">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Esvandiary</div>
					<div class="post-datetime">
						29 Dec 2008, 02:08					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I too am trying OpenWRT on a DSL-504T.</p><p>I&#039;ve checked out from SVN, run `make menuconfig&#039; with the settings recommended on the DSL-502T page, and altered the adam2flash-502T.pl script as mentioned above, to disable the USB check.</p><p>However, after the script successfully writes the firmware to the router, on a reboot the router doesn&#039;t load the image; the power LED is on, and any ethernet cables plugged in show up, including activity (which I find odd, given that I&#039;m 99% sure those LEDs are driven in the ethernet driver, not in the hardware). However, the status LED never comes on, and I cannot ping or telnet to the IP. I&#039;ve even tried a broadcast ping, but since I never changed any IP settings in menuconfig I assume it&#039;s just on 192.168.1.1...</p><p>As expected I can still get to the ADAM2 FTP, so I can easily reflash it back to the D-Link firmware, I just wondered if anybody had any blazing insights into why it isn&#039;t working.</p><p>Thanks in advance,<br />Andy</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78740">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Bemorph</div>
					<div class="post-datetime">
						29 Dec 2008, 04:02					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m pretty sure the default router IP with openwrt is 192.168.0.1 <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> Give that a try!</p><p>And then about that status LED isn&#039;t that supposed to blink when it connects to the adsl? If that&#039;s the case then it isn&#039;t that strange if it doesn&#039;t work since you haven&#039;t been able to ssh the router and configure it <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>EDIT: Oh yeah I have a question of my own, would compiling on a 64bit linux system be a bad idea? ( In other words, does the bin file have to be 32bit? )</p>											<p class="post-edited">(Last edited by <strong>Bemorph</strong> on 29 Dec 2008, 04:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78741">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">stonefish</div>
					<div class="post-datetime">
						29 Dec 2008, 04:15					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m pretty sure OpenWRT defaulted to 192.168.1.1 for me.<br />I didn&#039;t bother with that whole &quot;compiling&quot; thing.&nbsp; I&#039;m not even sure what it gets you.&nbsp; I just applied <a href="http://downloads.openwrt.org/kamikaze/8.09_RC1/ar7/openwrt-ar7-squashfs.bin">http://downloads.openwrt.org/kamikaze/8 … uashfs.bin</a> and away it went.</p><p>Yes, Bemorph, I did notice a performance increase.&nbsp; Using the D-link firmware, the box would stop responding to about 50-80% of ethernet packets *after* the internet connection had been established.&nbsp; With OpenWRT, that doesn&#039;t happen.&nbsp; I suppose that counts as a performance increase <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>The &quot;status&quot; light should blink (heartbeat style) as soon as OpenWRT boots.&nbsp; There&#039;s a separate &quot;Sync&quot; light that only comes on once the DSL link is working.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78753">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Esvandiary</div>
					<div class="post-datetime">
						29 Dec 2008, 11:17					</div>
				</div>
				<div class="post-content content">
					<p>Thanks very much for the replies everyone, keeping me wanting to hack it about! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><div class="quotebox"><cite>stonefish wrote:</cite><blockquote><p>The &quot;status&quot; light should blink (heartbeat style) as soon as OpenWRT boots.&nbsp; There&#039;s a separate &quot;Sync&quot; light that only comes on once the DSL link is working.</p></blockquote></div><p>That&#039;s what makes me think it doesn&#039;t like the image: the status light never does anything... When I turn it on, the power LED comes on, it blinks each ethernet light in turn, and then nothing... The status LED never even comes on. <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>I&#039;ll try a default firmware image and see if it&#039;s a problem with my compiling, or this router in general (it&#039;s always been a little &quot;special&quot; <img src="https://forum.openwrt.org/img/smilies/lol.png" width="15" height="15" alt="lol" />)</p><p>Thanks again,<br />Andy</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78755">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">stonefish</div>
					<div class="post-datetime">
						29 Dec 2008, 12:12					</div>
				</div>
				<div class="post-content content">
					<p>Perhaps this isn&#039;t the best place to talk about it, but I still need an answer to my question above.</p><p>I made the DSL link work once on my 504, by typing in a command beginning with &quot;br2684ctl&quot;, which created a device which I then bridged to my ethernet, and all was well.</p><p>However, after a reboot, that device no longer existed.&nbsp; Either there&#039;s a config file I need to update to do it properly, or there&#039;s the openwrt equivalent of &quot;autoexec.bat&quot; that I need to deal with.&nbsp; Can anyone point me towards either of these?</p><p>Also, is the 4 port switch on the 504T &quot;vlan-able&quot; like the one on my WRT54GS is?&nbsp; I need to be able to bridge my DSL only to a single port, while leaving the other three available for regular LAN access.&nbsp; The cabling I&#039;ve got now is...&nbsp; not exactly recommended <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78756">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">t3l3m4k0</div>
					<div class="post-datetime">
						29 Dec 2008, 12:51					</div>
				</div>
				<div class="post-content content">
					<p>see about rc.d and init.d</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78757">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">Esvandiary</div>
					<div class="post-datetime">
						29 Dec 2008, 12:57					</div>
				</div>
				<div class="post-content content">
					<p>OK, it was me being a purist and trying to compile it that made my router hate it. <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p>Seems to be fine and do everything I want with the default one. Not running out of space yet either, which I was a tad worried about (all my images turned out very close to the 4MB limit thanks to me finding more things I wanted).</p><p>Still, running 8.09 RC1 fine now.<br />Thanks to everyone for the help! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Andy</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78761">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Bemorph</div>
					<div class="post-datetime">
						29 Dec 2008, 14:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Esvandiary wrote:</cite><blockquote><p>OK, it was me being a purist and trying to compile it that made my router hate it. <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p>Seems to be fine and do everything I want with the default one. Not running out of space yet either, which I was a tad worried about (all my images turned out very close to the 4MB limit thanks to me finding more things I wanted).</p><p>Still, running 8.09 RC1 fine now.<br />Thanks to everyone for the help! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Andy</p></blockquote></div><p>No don&#039;t give up so easily! <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /></p><p>I&#039;m trying to compile my own version too and I&#039;m gonna need help <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /><br />Running out of space? What were you adding? My images end up around 1 mb <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78764">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">Esvandiary</div>
					<div class="post-datetime">
						29 Dec 2008, 15:22					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m not giving up; my RC1 quickly ran out of space on the JFFS after adding some stuff, so I&#039;m going to try and compile it all in - but this time, starting from the 8.09 RC1 build instead of the head SVN rev. When I&#039;m not at a LAN party. <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>