<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> ZTE MF823 + TL-MR3020 ... Should it be so hard? :|</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 18 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p324207">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">cjhx</div>
					<div class="post-datetime">
						16 May 2016, 23:58					</div>
				</div>
				<div class="post-content content">
					<p>Having great trouble getting a 4g USB (ZTE MF823) to work with a router (TL-MR3020).</p><p><strong>The USB device doesn&#039;t seem to be recognised - I&#039;ve got no ttyUSBx under /dev/.</strong></p><p>I started with the image suggested for the MR3020 (openwrt-15.05-ar71xx-generic-tl-mr3020-v1-squashfs-factory.bin)</p><p>To this I&#039;ve added a few packages:<br /></p><ul><li><p>comgt</p></li><li><p>chat</p></li><li><p>luci-proto-3g</p></li></ul><p>I&#039;ve then added the interface config:<br /></p><div class="codebox"><pre><code>config interface &#039;wan&#039;
        option ifname &#039;ppp0&#039;
        option apn 3internet
        option service umts
        option proto 3g
        option device /dev/ttyUSB0</code></pre></div><p>The device seems to be recognised in some form:<br /></p><div class="codebox"><pre><code>root@OpenWrt:~# cat /sys/kernel/debug/usb/devices

T:  Bus=01 Lev=00 Prnt=00 Port=00 Cnt=00 Dev#=  1 Spd=480  MxCh= 1
B:  Alloc=  0/800 us ( 0%), #Int=  0, #Iso=  0
D:  Ver= 2.00 Cls=09(hub  ) Sub=00 Prot=01 MxPS=64 #Cfgs=  1
P:  Vendor=1d6b ProdID=0002 Rev= 3.18
S:  Manufacturer=Linux 3.18.20 ehci_hcd
S:  Product=EHCI Host Controller
S:  SerialNumber=ehci-platform
C:* #Ifs= 1 Cfg#= 1 Atr=e0 MxPwr=  0mA
I:* If#= 0 Alt= 0 #EPs= 1 Cls=09(hub  ) Sub=00 Prot=00 Driver=hub
E:  Ad=81(I) Atr=03(Int.) MxPS=   4 Ivl=256ms

T:  Bus=01 Lev=01 Prnt=01 Port=00 Cnt=01 Dev#=  2 Spd=480  MxCh= 0
D:  Ver= 2.00 Cls=00(&gt;ifc ) Sub=00 Prot=00 MxPS=64 #Cfgs=  1
P:  Vendor=19d2 ProdID=1225 Rev=f0.70
S:  Manufacturer=ZTE,Incorporated
S:  Product=ZTE WCDMA Technologies MSM
S:  SerialNumber=MF8230ZTED010000
C:* #Ifs= 1 Cfg#= 1 Atr=a0 MxPwr=500mA
I:* If#= 0 Alt= 0 #EPs= 2 Cls=08(stor.) Sub=06 Prot=50 Driver=(none)
E:  Ad=81(I) Atr=02(Bulk) MxPS= 512 Ivl=0ms
E:  Ad=01(O) Atr=02(Bulk) MxPS= 512 Ivl=125us</code></pre></div><p>Though the output from dmesg doesn&#039;t quite match up with what I&#039;m expecting based on <a href="https://wiki.openwrt.org/doc/recipes/3gdongle">https://wiki.openwrt.org/doc/recipes/3gdongle</a><br /></p><div class="codebox"><pre><code>[    4.120000] usbcore: registered new interface driver usbfs
[    4.120000] usbcore: registered new interface driver hub
[    4.130000] usbcore: registered new device driver usb
[    4.140000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[    4.150000] ehci-platform: EHCI generic platform driver
[    4.150000] ehci-platform ehci-platform: EHCI Host Controller
[    4.160000] ehci-platform ehci-platform: new USB bus registered, assigned bus number 1
[    4.170000] ehci-platform ehci-platform: irq 3, io mem 0x1b000000
[    4.190000] ehci-platform ehci-platform: USB 2.0 started, EHCI 1.00
[    4.190000] hub 1-0:1.0: USB hub found
[    4.190000] hub 1-0:1.0: 1 port detected
[    4.520000] usb 1-1: new high-speed USB device number 2 using ehci-platform</code></pre></div><p>The closest I can find is under /dev/bus/usb/001/001 or /002... but subbing that in to the interface config doesn&#039;t work either.</p><p>Pulling my hair out on this one... any suggestions appreciated!</p>											<p class="post-edited">(Last edited by <strong>cjhx</strong> on 17 May 2016, 00:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352236">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">epollari</div>
					<div class="post-datetime">
						17 Feb 2017, 23:34					</div>
				</div>
				<div class="post-content content">
					<p>The ZTE MF823 acts like a network adapter, not like a USB modem. It need RNDIS and/or CDC drivers. It&#039;s all in the 3G Dongle recipe that you quoted.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352239">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						17 Feb 2017, 23:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>To this I&#039;ve added a few packages:<br />&nbsp; &nbsp; comgt<br />&nbsp; &nbsp; chat<br />&nbsp; luci-proto-3g</p></blockquote></div><p>You don&#039;t need any of them with a modern 4G device.&nbsp; Remove those before installing cdc so you don&#039;t overfill the flash.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>