<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Backup through luci</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 27 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p152108">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">cpr</div>
					<div class="post-datetime">
						26 Dec 2011, 16:23					</div>
				</div>
				<div class="post-content content">
					<p>Just setup my new WNDR3800 and am _really_ committed to do proper documentation&amp;backups from the very beginning.</p><p>Unfortunately I do not have enough developer-fu to port bacula-client to OpenWRT. So I need another way to backup my changes.</p><p>I really like the LUCI backup utility. I can easily add files and folders there. Which might at some time become a Bacula fileset.</p><p>In commandlinefu I found <a href="http://www.commandlinefu.com/commands/view/2215/backup-your-openwrt-config-only-the-config-not-the-whole-system">http://www.commandlinefu.com/commands/v … ole-system</a> which can be easily updated to the new luci application:</p><div class="codebox"><pre><code>cleartextpassword=`cat /root/rootpassword.txt`; curl -d &quot;username=root&amp;password=${cleartextpassword}&quot; &quot;http://localhost/cgi-bin/luci/admin/system/flashops?backup=backup&quot; &gt; /mnt/sda3/foobar.tgz</code></pre></div><p>I already have an visudo-enabled user on that router, I will expand this small snippet once it&#039;s proven its usefulness. I think I will create a backup-user, I could even sudo-passwd set a random password before each invocation and enable/disable login before/after a cron-called script.</p><br /><p>Another way to backup is arokh&#039;s way <a href="https://forum.openwrt.org/viewtopic.php?pid=132887#p132887">https://forum.openwrt.org/viewtopic.php … 87#p132887</a> to backup /overlay. I did not use that because of my intention to document-backup my system -- I really like the &quot;fileset&quot;-approach.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>