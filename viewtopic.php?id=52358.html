<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> BT Openreach ECI /r modem - Lantiq VR9 - only 1 eth port?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 13 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p244745">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">iMx</div>
					<div class="post-datetime">
						24 Aug 2014, 16:27					</div>
				</div>
				<div class="post-content content">
					<p>Hi there,</p><p>I&#039;m currently running the latest Barrier Breaker release (rc3) on an Openreach ECI /r modem - being used as a VDSL modem, bridging the PTM and LAN interfaces PPPoE is being done elsewhere - all is working pretty well, however I have one question.&nbsp; I&#039;m not sure if this is a bug, configuration issue or quite simply a limitation of the hardware - if anyone can point me in the direction of how to proceed, it would be much appreciated.</p><p>The issue:&nbsp; I only see one eth0 interface - even though both physical ports are accessible (there are 2 LAN ports on this hardware) - is there any way to split out each physical port to a separate eth interface?&nbsp; Are there any commands to modify the onboard switch (from what I can see it is not supported by swconfig)?&nbsp; Or are the ports simply a hub connected to an internal switch?</p><p>Clearly when I bridge the LAN/PTM interfaces LAN management traffic is seen on the designated &#039;WAN&#039; interface due to the bridge, and vice versa, I&#039;d prefer to have a separate bridge for port 1 -&gt; PTM, then have port 2 for LAN only/management.</p><p>Looking at another users boot logs, albeit on an earlier Barrier Breaker build, it shows the below:</p><div class="codebox"><pre><code>[    0.608000] eth0: attached PHY [Lantiq XWAY XRX PHY22F v1.4] (phy_addr=0:13, irq=-1)
[    0.620000] eth1: attached PHY [Lantiq XWAY XRX PHY22F v1.4] (phy_addr=0:11, irq=-1)</code></pre></div><p>However, I see:</p><div class="codebox"><pre><code>[    1.712000] eth0: attached PHY [Lantiq XWAY XRX PHY22F v1.4] (phy_addr=0:11, irq=-1)
[    1.720000] eth0: attached PHY [Lantiq XWAY XRX PHY22F v1.4] (phy_addr=0:13, irq=-1)</code></pre></div><p>Any pointers gratefully appreciated, I&#039;m including the full bootlog below as well:</p><div class="codebox"><pre><code>[    0.000000] Linux version 3.10.49 (bb@builder1) (gcc version 4.8.3 (OpenWrt/Linaro GCC 4.8-2014.04 r41989) ) #1 Fri Aug 8 02:41:13 CEST 2014
[    0.000000] SoC: VR9 rev 1.1
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU revision is: 00019555 (MIPS 34Kc)
[    0.000000] MIPS: machine is VG3503J - BT OpenReach VDSL Modem
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 02000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone ranges:
[    0.000000]   Normal   [mem 0x00000000-0x01ffffff]
[    0.000000] Movable zone start for each node
[    0.000000] Early memory node ranges
[    0.000000]   node   0: [mem 0x00000000-0x01ffffff]
[    0.000000] On node 0 totalpages: 8192
[    0.000000] free_area_init_node: node 0, pgdat 80418b80, node_mem_map 81002b40
[    0.000000]   Normal zone: 64 pages used for memmap
[    0.000000]   Normal zone: 0 pages reserved
[    0.000000]   Normal zone: 8192 pages, LIFO batch:0
[    0.000000] Primary instruction cache 32kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
[    0.000000] pcpu-alloc: s0 r0 d32768 u32768 alloc=1*32768
[    0.000000] pcpu-alloc: [0] 0
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
[    0.000000] Kernel command line: console=ttyLTQ0,115200 init=/etc/preinit
[    0.000000] PID hash table entries: 128 (order: -3, 512 bytes)
[    0.000000] Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
[    0.000000] Writing ErrCtl register=00012680
[    0.000000] Readback ErrCtl register=00012680
[    0.000000] Memory: 27676k/32768k available (3178k kernel code, 5092k reserved, 1127k data, 228k init, 0k highmem)
[    0.000000] NR_IRQS:256
[    0.000000] CPU Clock: 333MHz
[    0.036000] Calibrating delay loop... 221.18 BogoMIPS (lpj=442368)
[    0.036000] pid_max: default: 32768 minimum: 301
[    0.040000] Mount-cache hash table entries: 512
[    0.048000] pinctrl core: initialized pinctrl subsystem
[    0.052000] NET: Registered protocol family 16
[    0.068000] pinctrl-xway 1e100b10.pinmux: Init done
[    0.072000] dma-xway 1e104100.dma: Init done - hw rev: 7, ports: 7, channels: 28
[    0.080000] dcdc-xrx200 1f106a00.dcdc: Core Voltage : 1016 mV
[    0.084000] arch/mips/pci/ifxmips_pcie_vr9.h:pcie_device_rst_assert[185]
[    0.196000] arch/mips/pci/ifxmips_pcie_vr9.h:pcie_device_rst_deassert[193]
[    0.296000] ifx_pcie_wait_phy_link_up timeout
[    0.300000] arch/mips/pci/ifxmips_pcie_vr9.h:pcie_device_rst_assert[185]
[    0.412000] arch/mips/pci/ifxmips_pcie_vr9.h:pcie_device_rst_deassert[193]
[    0.512000] ifx_pcie_wait_phy_link_up timeout
[    0.516000] arch/mips/pci/ifxmips_pcie_vr9.h:pcie_device_rst_assert[185]
[    0.628000] arch/mips/pci/ifxmips_pcie_vr9.h:pcie_device_rst_deassert[193]
[    0.728000] ifx_pcie_wait_phy_link_up timeout
[    0.732000] arch/mips/pci/ifxmips_pcie_vr9.h:pcie_device_rst_assert[185]
[    0.844000] arch/mips/pci/ifxmips_pcie_vr9.h:pcie_device_rst_deassert[193]
[    0.944000] ifx_pcie_wait_phy_link_up timeout
[    0.948000] arch/mips/pci/ifxmips_pcie_vr9.h:pcie_device_rst_assert[185]
[    1.060000] arch/mips/pci/ifxmips_pcie_vr9.h:pcie_device_rst_deassert[193]
[    1.160000] ifx_pcie_wait_phy_link_up timeout
[    1.164000] pcie_rc_initialize link up failed!!!!!
[    1.184000] bio: create slab &lt;bio-0&gt; at 0
[    1.192000] usbcore: registered new interface driver usbfs
[    1.196000] usbcore: registered new interface driver hub
[    1.200000] usbcore: registered new device driver usb
[    1.204000] Switching to clocksource MIPS
[    1.212000] NET: Registered protocol family 2
[    1.220000] TCP established hash table entries: 512 (order: 0, 4096 bytes)
[    1.224000] TCP bind hash table entries: 512 (order: -1, 2048 bytes)
[    1.232000] TCP: Hash tables configured (established 512 bind 512)
[    1.240000] TCP: reno registered
[    1.240000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    1.248000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    1.256000] NET: Registered protocol family 1
[    1.260000] PCI: CLS 0 bytes, default 32
[    1.260000] gptu: totally 6 16-bit timers/counters
[    1.264000] gptu: misc_register on minor 63
[    1.268000] gptu: succeeded to request irq 126
[    1.272000] gptu: succeeded to request irq 127
[    1.276000] gptu: succeeded to request irq 128
[    1.284000] gptu: succeeded to request irq 129
[    1.288000] gptu: succeeded to request irq 130
[    1.292000] gptu: succeeded to request irq 131
[    1.300000] phy-xrx200 gphy-xrx200.7: requesting lantiq/vr9_phy22f_a1x.bin
[    1.308000] phy-xrx200 gphy-xrx200.7: booting GPHY0 firmware at 18C0000
[    1.316000] phy-xrx200 gphy-xrx200.7: booting GPHY1 firmware at 18C0000
[    1.424000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    1.432000] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    1.440000] msgmni has been set to 54
[    1.444000] io scheduler noop registered
[    1.448000] io scheduler deadline registered (default)
[    1.456000] 1e100c00.serial: ttyLTQ0 at MMIO 0x1e100c00 (irq = 112) is a lantiq,asc
[    1.464000] console [ttyLTQ0] enabled, bootconsole disabled
[    1.480000] ltq_nor: Found 1 x16 devices at 0x0 in 16-bit bank. Manufacturer ID 0x0000c2 Chip ID 0x0022cb
[    1.488000] ltq_nor: Found an alias at 0x800000 for the chip at 0x0
[    1.488000] Amd/Fujitsu Extended Query Table at 0x0040
[    1.492000]   Amd/Fujitsu Extended Query version 1.1.
[    1.500000] number of CFI chips: 1
[    1.500000] 8 ofpart partitions found on MTD device ltq_nor
[    1.508000] Creating 8 MTD partitions on &quot;ltq_nor&quot;:
[    1.512000] 0x000000000000-0x000000020000 : &quot;uboot&quot;
[    1.520000] 0x000000020000-0x0000001a0000 : &quot;kernel&quot;
[    1.528000] 0x0000001a0000-0x000000740000 : &quot;rootfs&quot;
[    1.532000] mtd: device 2 (rootfs) set to be root filesystem
[    1.536000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=0x360000, len=0x3e0000
[    1.544000] 0x000000360000-0x000000740000 : &quot;rootfs_data&quot;
[    1.552000] 0x000000740000-0x0000007c0000 : &quot;btagent&quot;
[    1.560000] 0x0000007c0000-0x0000007d0000 : &quot;pri_bfocus_cfg&quot;
[    1.568000] 0x0000007d0000-0x0000007e0000 : &quot;sec_bfocus_cfg&quot;
[    1.576000] 0x0000007e0000-0x0000007f0000 : &quot;sysconfig&quot;
[    1.580000] 0x0000007f0000-0x000000800000 : &quot;misc_cfg&quot;
[    1.700000] libphy: lantiq,xrx200-mdio: probed
[    1.708000] net-xrx200: invalid MAC, using random
[    1.712000] eth0: attached PHY [Lantiq XWAY XRX PHY22F v1.4] (phy_addr=0:11, irq=-1)
[    1.720000] eth0: attached PHY [Lantiq XWAY XRX PHY22F v1.4] (phy_addr=0:13, irq=-1)
[    1.728000] wdt 1f8803f0.watchdog: Init done
[    1.732000] leds-gpio gpio-leds.6: pins are not configured from the driver
[    1.740000] TCP: cubic registered
[    1.744000] NET: Registered protocol family 17
[    1.748000] Bridge firewalling registered
[    1.752000] 8021q: 802.1Q VLAN Support v1.8
[    1.764000] UBIFS error (pid 1): ubifs_mount: cannot open &quot;ubi0:rootfs&quot;, error -19
[    1.780000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
[    1.784000] Freeing unused kernel memory: 228K (80437000 - 80470000)
[    3.920000] eth0: port 2 got link
[    4.032000] eth0: port 4 got link
[    8.848000] jffs2: notice: (264) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (1 unchecked, 0 orphan) and 13 of xref (0 dead, 4 orphan) found.
[   11.236000] IFXOS, Version 1.5.14 (c) Copyright 2009, Lantiq Deutschland GmbH
[   11.236000] M
[   11.272000] NET: Registered protocol family 10
[   11.288000] nf_conntrack version 0.5.0 (436 buckets, 1744 max)
[   11.300000] ip6_tables: (C) 2000-2006 Netfilter Core Team
[   11.328000] MEI CPE Driver, Version 1.2.0
[   11.328000] M
[   11.332000] (c) Copyright 2009, Infineon Technologies AG
[   11.332000] M### MEI CPE - MEI CPE - MEI CPE - MEI CPE ###
[   11.336000] M
[   11.336000]
[   11.336000] Lantiq CPE API Driver version: DSL CPE API V4.11.4
[   11.360000]
[   11.360000] Predefined debug level: 2
[   11.372000] ip_tables: (C) 2000-2006 Netfilter Core Team
[   11.440000] xt_time: kernel timezone is -0000
[   11.456000] PPP generic driver version 2.4.2
[   11.464000] NET: Registered protocol family 24
[   18.664000] PTM 1.0.27    PTM (E1) firmware version 0.30
[   18.668000] ifxmips_ptm: PTM init succeed
[   20.992000] device eth0 entered promiscuous mode
[   21.172000] br-lan: port 1(eth0) entered forwarding state
[   21.176000] br-lan: port 1(eth0) entered forwarding state
[   21.212000] /BB/build/lantiq/xrx200/build_dir/target-mips_34kc+dsp_uClibc-0.9.33.2/linux-lantiq_xrx200/ltq-ptm-vr9/ifxmips_ptm_vdsl.c:281:ptm_hard_start_xmit: not in showtime
[   21.228000] device ptm0.101 entered promiscuous mode
[   21.232000] device ptm0 entered promiscuous mode
[   21.236000] br-lan: port 2(ptm0.101) entered forwarding state
[   21.244000] br-lan: port 2(ptm0.101) entered forwarding state
[   21.248000] /BB/build/lantiq/xrx200/build_dir/target-mips_34kc+dsp_uClibc-0.9.33.2/linux-lantiq_xrx200/ltq-ptm-vr9/ifxmips_ptm_vdsl.c:281:ptm_hard_start_xmit: not in showtime</code></pre></div>											<p class="post-edited">(Last edited by <strong>iMx</strong> on 24 Aug 2014, 16:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p244750">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">iMx</div>
					<div class="post-datetime">
						24 Aug 2014, 17:20					</div>
				</div>
				<div class="post-content content">
					<p>I assume it is the below file that sets out what is possible:</p><p>openwrt/target/linux/lantiq/dts/VG3503J.dtsi</p><div class="codebox"><pre><code>                eth@E108000 {
                        #address-cells = &lt;1&gt;;
                        #size-cells = &lt;0&gt;;
                        compatible = &quot;lantiq,xrx200-net&quot;;
                        reg = &lt; 0xE108000 0x3000 /* switch */
                                0xE10B100 0x70 /* mdio */
                                0xE10B1D8 0x30 /* mii */
                                0xE10B308 0x30 /* pmac */
                        &gt;;
                        interrupt-parent = &lt;&amp;icu0&gt;;
                        interrupts = &lt;73 72&gt;;

                        interface@0 {
                                compatible = &quot;lantiq,xrx200-pdi&quot;;
                                #address-cells = &lt;1&gt;;
                                #size-cells = &lt;0&gt;;
                                reg = &lt;0&gt;;
                                mac-address = [ 00 11 22 33 44 55 ];
                                ethernet@2 {
                                        compatible = &quot;lantiq,xrx200-pdi-port&quot;;
                                        reg = &lt;2&gt;;
                                        phy-mode = &quot;mii&quot;;
                                        phy-handle = &lt;&amp;phy11&gt;;
                                };
                                ethernet@4 {
                                        compatible = &quot;lantiq,xrx200-pdi-port&quot;;
                                        reg = &lt;4&gt;;
                                        phy-mode = &quot;mii&quot;;
                                        phy-handle = &lt;&amp;phy13&gt;;
                                };
                        };

                        mdio@0 {
                                #address-cells = &lt;1&gt;;
                                #size-cells = &lt;0&gt;;
                                compatible = &quot;lantiq,xrx200-mdio&quot;;
                                phy11: ethernet-phy@11 {
                                        reg = &lt;0x11&gt;;
                                        compatible = &quot;lantiq,phy11g&quot;, &quot;ethernet-phy-ieee802.3-c22&quot;;
                                };
                                phy13: ethernet-phy@13 {
                                        reg = &lt;0x13&gt;;
                                        compatible = &quot;lantiq,phy11g&quot;, &quot;ethernet-phy-ieee802.3-c22&quot;;
                                };
                        };
                };
        };</code></pre></div><p>I see references to the 2 physical ports 11 and 13 that I see in my log files all under interface@0 - does this mean they will only work under 1 eth0 interface? i.e eth0 and eth1 are not possible?</p><p>If so am lost as to why the other users logs I found show eth0 and eth1, hacking required? <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p244800">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">iMx</div>
					<div class="post-datetime">
						25 Aug 2014, 02:10					</div>
				</div>
				<div class="post-content content">
					<p>I checked with the stock unlocked firmware provided by &#039;James&#039; on a Kitz thread, &#039;downgrading&#039; from OpenWRT, when the LAN2 port is enabled on mine it assigns the LAN2 management IP to VLAN interface br0.102 - guess it gives me something to go on.</p><p>Still not sure why some of the other logs from other members showed eth0 and eth1, when I only have eth0 - hardware revisions seem to be the same from what I can see.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p245088">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">vrx200</div>
					<div class="post-datetime">
						27 Aug 2014, 18:32					</div>
				</div>
				<div class="post-content content">
					<p>Hi posted some switch stuff on the other thread if it helps ?<br /><a href="https://forum.openwrt.org/viewtopic.php?id=50860">https://forum.openwrt.org/viewtopic.php?id=50860</a></p>											<p class="post-edited">(Last edited by <strong>vrx200</strong> on 27 Aug 2014, 18:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p245349">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">iMx</div>
					<div class="post-datetime">
						29 Aug 2014, 22:45					</div>
				</div>
				<div class="post-content content">
					<p>Have tried the long-shot hack of enabling the switch in the dtsi file, it sees the switch with swconfig but it is impossible to enable VLANS:</p><div class="codebox"><pre><code>switch0: eth0(Lantiq XRX200 Switch), ports: 7 (cpu @ 6), vlans: 64
     --switch
        Attribute 1 (int): enable_vlan (Enable VLAN mode)
        Attribute 2 (none): apply (Activate changes in the hardware)
        Attribute 3 (none): reset (Reset the switch)
     --vlan
        Attribute 1 (int): vid (VLAN ID (0-4094))
        Attribute 2 (int): enable (Enable VLAN)
        Attribute 3 (ports): ports (VLAN port mapping)
     --port
        Attribute 1 (int): uvr (Unknown VLAN Rule)
        Attribute 2 (int): vsr (VLAN Security Rule)
        Attribute 3 (int): vinr (VLAN Ingress Tag Rule)
        Attribute 4 (int): tvm (Transparent VLAN Mode)
        Attribute 5 (int): pvid (Primary VLAN ID)
        Attribute 6 (string): link (Get port link information)
root@OpenWrt:/# swconfig dev switch0 get enable_vlan
0
root@OpenWrt:/# swconfig dev switch0 set enable_vlan 1
root@OpenWrt:/# swconfig dev switch0 set apply
root@OpenWrt:/# swconfig dev switch0 get enable_vlan
0</code></pre></div><p>Am going to try the other suggestion of enable eth1 again to run some tests, although I understand this was done initially to correct performance issues?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p245409">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">iMx</div>
					<div class="post-datetime">
						30 Aug 2014, 17:20					</div>
				</div>
				<div class="post-content content">
					<p>Have tried with the DTSI hack suggested by vrx200 to re-enable the eth1 port, below, replacing the relevant section:</p><div class="codebox"><pre><code> target/linux/lantiq/dts/VG3503J.dtsi
eth@E108000 {
            #address-cells = &lt;1&gt;;
            #size-cells = &lt;0&gt;;
            compatible = &quot;lantiq,xrx200-net&quot;;
            reg = &lt;    0xE108000 0x3000 /* switch */
                0xE10B100 0x70 /* mdio */
                0xE10B1D8 0x30 /* mii */
                0xE10B308 0x30 /* pmac */
            &gt;;
            interrupt-parent = &lt;&amp;icu0&gt;;
            interrupts = &lt;73 72&gt;;
                        
            lan1: interface@0 {
                compatible = &quot;lantiq,xrx200-pdi&quot;;
                #address-cells = &lt;1&gt;;
                #size-cells = &lt;0&gt;;
                reg = &lt;0&gt;;
                mac-address = [ 00 11 22 33 44 55 ];
                ethernet@4 {
                    compatible = &quot;lantiq,xrx200-pdi-port&quot;;
                    reg = &lt;4&gt;;
                    phy-mode = &quot;mii&quot;;
                    phy-handle = &lt;&amp;phy13&gt;;
                };
            };
                       
                        lan2: interface@1 {
                    compatible = &quot;lantiq,xrx200-pdi&quot;;
                #address-cells = &lt;1&gt;;
                #size-cells = &lt;0&gt;;
                reg = &lt;1&gt;;
                mac-address = [ 00 11 22 33 44 56 ];
                          
                                ethernet@2 {
                        compatible = &quot;lantiq,xrx200-pdi-port&quot;;
                        reg = &lt;2&gt;;
                        phy-mode = &quot;mii&quot;;
                        phy-handle = &lt;&amp;phy11&gt;;
                             };
            };</code></pre></div><p>I now have both eth0 and eth1 and have configured the bridging in theory, not tested on a live line yet, management running on the 2nd port only with IP 192.168.2.1</p><div class="codebox"><pre><code>root@OpenWrt:~# ifconfig
br-wan_bridge Link encap:Ethernet  HWaddr 16:95:C3:06:09:8C
          inet6 addr: fe80::1495:c3ff:fe06:98c/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:4 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:0 (0.0 B)  TX bytes:408 (408.0 B)

eth0      Link encap:Ethernet  HWaddr 16:95:C3:06:09:8C
          UP BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:1 errors:0 dropped:1 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:63 (63.0 B)  TX bytes:0 (0.0 B)

eth1      Link encap:Ethernet  HWaddr 72:93:31:69:7A:30
          inet addr:192.168.2.1  Bcast:192.168.2.255  Mask:255.255.255.0
          inet6 addr: fd01:4e4a:ba34::1/60 Scope:Global
          inet6 addr: fe80::7093:31ff:fe69:7a30/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:114 errors:0 dropped:1 overruns:0 frame:0
          TX packets:35 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:22685 (22.1 KiB)  TX bytes:5604 (5.4 KiB)

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:146 errors:0 dropped:0 overruns:0 frame:0
          TX packets:146 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:10560 (10.3 KiB)  TX bytes:10560 (10.3 KiB)

ptm0      Link encap:Ethernet  HWaddr 00:20:DA:86:23:75
          inet6 addr: fe80::220:daff:fe86:2375/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:8 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

ptm0.101  Link encap:Ethernet  HWaddr 00:20:DA:86:23:75
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:4 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:0 (0.0 B)  TX bytes:364 (364.0 B)

root@OpenWrt:~# brctl show
bridge name    bridge id        STP enabled    interfaces
br-wan_bridge        7fff.1695c306098c    no        eth0
                            ptm0.101

root@OpenWrt:~# cat /etc/config/network

config interface &#039;loopback&#039;
    option ifname &#039;lo&#039;
    option proto &#039;static&#039;
    option ipaddr &#039;127.0.0.1&#039;
    option netmask &#039;255.0.0.0&#039;

config globals &#039;globals&#039;
    option ula_prefix &#039;fd01:4e4a:ba34::/48&#039;

config interface &#039;wan_port&#039;
        option ifname &#039;eth0&#039;
        option force_link &#039;1&#039;
        option type &#039;none&#039;

config interface &#039;mgmt&#039;
    option ifname &#039;eth1&#039;
    option force_link &#039;1&#039;
    option proto &#039;static&#039;
    option ipaddr &#039;192.168.2.1&#039;
    option netmask &#039;255.255.255.0&#039;
    option ip6assign &#039;60&#039;
    option type &#039;none&#039;

config vdsl &#039;dsl&#039;
    option annex &#039;a&#039;
    option firmware &#039;/lib/firmware/vdsl.bin&#039;
    option tone &#039;av&#039;
    option xfer_mode &#039;ptm&#039;

config &#039;interface&#039; &#039;wan_bridge&#039;
        option &#039;type&#039;    &#039;bridge&#039;
        option &#039;proto&#039;   &#039;none&#039;
        option &#039;ifname&#039;  &#039;eth0 ptm0.101&#039;
        option &#039;auto&#039;    &#039;1&#039;</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p245412">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">vrx200</div>
					<div class="post-datetime">
						30 Aug 2014, 18:14					</div>
				</div>
				<div class="post-content content">
					<p>Great.</p><p>If there is put through issues:</p><p>The phy22f might be the reason&nbsp; a quick change to phy11g might fix it.<br /></p><div class="codebox"><pre><code>target/linux/lantiq/dts/VG3503J.dts

Line 8 change 
firmware = &quot;lantiq/vr9_phy22f_a1x.bin&quot;;
to
firmware = &quot;lantiq/vr9_phy11g_a1x.bin&quot;; </code></pre></div>											<p class="post-edited">(Last edited by <strong>vrx200</strong> on 30 Aug 2014, 18:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p247487">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">vrx200</div>
					<div class="post-datetime">
						19 Sep 2014, 15:16					</div>
				</div>
				<div class="post-content content">
					<p>jow has also patched the xrx200 switch from&nbsp; r42574 </p><p><a href="https://dev.openwrt.org/changeset/42574">https://dev.openwrt.org/changeset/42574</a></p><p>Not had much luck yet getting the vlan to enable.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p247573">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">iMx</div>
					<div class="post-datetime">
						20 Sep 2014, 11:45					</div>
				</div>
				<div class="post-content content">
					<p>That patch is the same as the manual patch you pointed me to earlier, isn&#039;t it?&nbsp; i.e nothing else has changed?&nbsp; I couldn&#039;t get VLANs to enable/save at all when I tried</p><div class="codebox"><pre><code>root@OpenWrt:/# swconfig dev switch0 set enable_vlan 1
root@OpenWrt:/# swconfig dev switch0 set apply
root@OpenWrt:/# swconfig dev switch0 get enable_vlan
0</code></pre></div><p>To be honest, I think I&#039;d rather just have separate eth0/eth1 rather than messing around with VLANs - unless this will cause the performance issues - for the dumb modem that I use it as, VLAN just seems over kill when all I need is the PTM/eth bridged, then a separate interface for management. :)</p>											<p class="post-edited">(Last edited by <strong>iMx</strong> on 20 Sep 2014, 11:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p261768">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">jf1976</div>
					<div class="post-datetime">
						16 Jan 2015, 23:28					</div>
				</div>
				<div class="post-content content">
					<p>Did you build your own image or use 3rd party? I ask as I have just installed an image on this device and am starting to hit the same walls as you iMx, I also have led issues but found this for tomorrow&#039;s task of the day. <a href="https://dev.openwrt.org/browser/trunk/target/linux/lantiq/dts/VG3503J.dts?rev=37634&amp;order=name">https://dev.openwrt.org/browser/trunk/t … order=name</a></p><p>From my limited understanding the are a number of target profiles for this device.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p261925">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">jf1976</div>
					<div class="post-datetime">
						18 Jan 2015, 15:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>iMx wrote:</cite><blockquote><p>That patch is the same as the manual patch you pointed me to earlier, isn&#039;t it?&nbsp; i.e nothing else has changed?&nbsp; I couldn&#039;t get VLANs to enable/save at all when I tried</p><div class="codebox"><pre><code>root@OpenWrt:/# swconfig dev switch0 set enable_vlan 1
root@OpenWrt:/# swconfig dev switch0 set apply
root@OpenWrt:/# swconfig dev switch0 get enable_vlan
0</code></pre></div><p>To be honest, I think I&#039;d rather just have separate eth0/eth1 rather than messing around with VLANs - unless this will cause the performance issues - for the dumb modem that I use it as, VLAN just seems over kill when all I need is the PTM/eth bridged, then a separate interface for management. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>Any attempt to use the swconfig command causes the device to hang, also I am correct in using the target system Lantiq subprofile XRX200 target profile BT Openreach ECI VDSL Modem as I have noticed there are a few image using the xway subprofile ?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>