<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Technical Difficulties - PROJECT</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 19 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p373652">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">arti107</div>
					<div class="post-datetime">
						12 Mar 2018, 04:12					</div>
				</div>
				<div class="post-content content">
					<p>Firstly,As Im new to this place, I would like to say a big thanks to all WRT crew for this amazing work!</p><p>Im working on my college project, story short, I want to implement and test the infamous KRACK attack.<br />so the idea is to use 2 Raspberry pi&#039;s as a set up for 802.11r environment and than perform the rest.... and ideally make it happen. </p><p>While setting up the openWrt on Rpi3 I have encountered this problem. Im addressing my WAN interface with DHCP CLIENT&nbsp; and it is picking up the address from my local router (192.168.1.0/24)&nbsp; ... everything works fine, Im updating LEDE and getting all packages as I need, also ssh works fine </p><p>but the minute I add my LAN interface with static 10.10.10.0/24 as DHCP SERVER&nbsp; &nbsp;( I got the usb to rj45 for second lan port connection, it works perfect too) </p><p>when I add the LAN interface to this set up the interfaces are magically&nbsp; (LAN AND WAN)&nbsp; getting swapped, so LEDE sees my LAN as WAN ... </p><br /><p>I cant really change the 192.168.1.0 as this is hooked up to my home box. Anyone knows what could cause this &quot;behaviour&quot;. I was trying to play with iptables/firewalls but with no success.</p><p>and just to mention that Ive hooked up alfa card to LANs DHCP SERVER and It works perfect too.</p><br /><p>Any ideas? Please help! </p><p>P.S Sorry for my English, hope everything make sense.</p><p>A.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p373653">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mikma</div>
					<div class="post-datetime">
						12 Mar 2018, 04:33					</div>
				</div>
				<div class="post-content content">
					<p>It seems someone else also got a problem with network interfaces changing names since I found this github repository. (Not tested by me.)</p><p><a href="https://github.com/borb/openwrt-persistent-net">https://github.com/borb/openwrt-persistent-net</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p373654">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						12 Mar 2018, 04:50					</div>
				</div>
				<div class="post-content content">
					<p>It is an age-old problem of booting up with two USB devices and which one will be detected first.&nbsp; Generally if you keep it plugged into the same port, the naming will stay the same.</p><p>802.11r requires a LAN between the two APs, you can&#039;t do what you are doing by routing them both separately.&nbsp; Also it requires enterprise authentication.&nbsp; When the KRACK story broke, it was noted that 802.11r is basically never found in home equipment.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p373655">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">arti107</div>
					<div class="post-datetime">
						12 Mar 2018, 05:20					</div>
				</div>
				<div class="post-content content">
					<p>The actual naming is fine, eth0 is my LAN and eth1(usb rj45) is my WAN and this corresponds to my physical wiring as it should be (its staying like that every time device gets rebooted)&nbsp; but for some reason LEDE recognises my LAN as WAN so im loosing ssh and web access (this can be worked around but I feel that it shouldnt be need for that).(Also I did try to swap them, used LAN for the usb&gt;rj45 but problem stays same)&nbsp; </p><p>Sorry but I cant post any pictures here. </p><p> When I go to LEDE &gt; STATUS &gt; OVERVIEW &gt; and under connected WAN I see my LAN instead of WAN, <br /> and in my LEDE &gt; NETWORK &gt; INTERFACES everything is correct WAN is WAN and LAN is LAN.&nbsp; </p><p>Would the fact that Im using 192.168.1.0 have impact on this? both of them are private networks tho. </p><p>KRACK: This is exactly what im building, 2 raspberries acting as two separate AP&#039;s hooked up on one lan (10.10.10.0/24) so the &quot;victim&quot; device can roam between the two. I want to try it with 802.11r flavour of KRACK as it doesn&#039;t require the MITM position. Yeah, I noticed that there will be a &quot;another task&quot; with setting up radius with 802.11r . Everything worked fine as far so Im sure that 802.11x should be pretty straight forward.</p>											<p class="post-edited">(Last edited by <strong>arti107</strong> on 12 Mar 2018, 05:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p373670">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						12 Mar 2018, 17:43					</div>
				</div>
				<div class="post-content content">
					<p>In your physical settings wan should be attached to eth0 and lan to eth1 (or vice versa).&nbsp; This should have things always working the same.</p><p>You should have only one connected to the Internet and doing all the routing, the other one would be linked to that first one by a cable on its LAN.&nbsp; The second unit is a so called dumb AP extending the wifi coverage area.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p373685">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">arti107</div>
					<div class="post-datetime">
						13 Mar 2018, 00:13					</div>
				</div>
				<div class="post-content content">
					<p>I had forwarding enabled on both zones. It works perfect now, Thanks a mil! </p><br /><p>For 802.11r RH0KH settings: the 128 bit key value works as &quot;another password&quot;&nbsp; for internal use between the AP&#039;s? and it has nothing to do with actual key (passphrase) ? Im a bit confused here</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p373743">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">arti107</div>
					<div class="post-datetime">
						13 Mar 2018, 23:34					</div>
				</div>
				<div class="post-content content">
					<p>Apparently I had this problem again! My Lan was listed as a Wan in &quot;overview&quot; section and in result it was obstructing the routing. I could not bypass the device with icmps etc.&nbsp; </p><p>I had to delete the lan interface, let wan to &quot;stick&quot; to wan in the overview section and add lan int again to fix this issue.&nbsp; </p><p>######## now ssh is not working <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /> (after adding iptables and other rulez)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p373747">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						14 Mar 2018, 01:26					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m not sure what you are saying and how that would happen.</p><p>Check the physical settings to make sure that one Ethernet port is in wan (and only wan) and the other one is in lan (and only lan).&nbsp; Having both in one network would cause problems.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p373749">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">arti107</div>
					<div class="post-datetime">
						14 Mar 2018, 02:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arti107 wrote:</cite><blockquote><p><strong>Sorry but I cant post any pictures here. </strong> (yet)</p><p> When I go to (browser) LEDE &gt; STATUS &gt; OVERVIEW &gt; and under connected WAN I see my LAN instead of WAN, <br /> and in my LEDE &gt; NETWORK &gt; INTERFACES everything is correct WAN is WAN and LAN is LAN.</p></blockquote></div>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>