<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Backfire on WL700gE</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 26 Apr 2018 and 29 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=25699&amp;p=2.html">2</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p113166">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">bluegold92</div>
					<div class="post-datetime">
						15 Jul 2010, 18:11					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m starting to think I&#039;m the only guy still messing with an old wl700gE.&nbsp; But, I find the box to be very versatile save for the trouble of the 2MB flash ROM.&nbsp; Anyhow, I am going to record my saga of getting backfire up and running on the wl700gE in case it helps anyone else out.</p><p>First, I have anecdotal evidence that the flash image needs to be less than about 1.8 MB to work.&nbsp; All I can say is that ANYTHING I have tried above that won&#039;t boot up for some reason.&nbsp; I have not yet been able to figure out why.&nbsp; However, if I compile an image 1.8 MB or less, it seems to work.</p><p>Second, the above has so far ruled out using the 2.6 kernel in a squashfs image.&nbsp; I can&#039;t get a minimal 2.6 image to be less than 1.8 MB.&nbsp; I managed 1.9 MB, but that image won&#039;t boot.&nbsp; So, for now, I am giving up on 2.6 and using 2.4 instead with the wl700gE profile.&nbsp; I will later try booting to a USB drive with the 2.6 kernel.&nbsp; So, this is just a how-to to get backfire 2.4 kernel working on the wl700gE.&nbsp; That&#039;s easy but it is the pivot_root to the HDD that is the hard part.&nbsp; It took me quite a while to get that working correctly.</p><p>I assume that you have the backfire toolchain and already know how to get that running and compile your firmware image.&nbsp; If not, please reference <a href="http://wl700g.homelinux.net/content/10-compile-firmware-1">http://wl700g.homelinux.net/content/10- … firmware-1</a>.&nbsp; You need a linux box with subversion and any other dependencies installed.&nbsp; I am using Ubuntu 9.</p><p>Open a terminal window and do:<br /></p><div class="codebox"><pre><code>sudo apt-get install subversion

svn co svn://svn.openwrt.org/openwrt/branches/backfire

make menuconfig</code></pre></div><p>note anything it tells you you still need to install, then install those with &quot;sudo apt-get install ... ... ... &quot;. </p><p>I recommend doing the vanilla wl700ge profile on the 2.4 kernel a few times to get familiar with flashing your box.&nbsp; After I figured it out the re-flash works like a charm every time.&nbsp; You need to be connected to your box on the 192.168.1.0 network and LAN port 1 (the others might work too - didn&#039;t try).&nbsp; Unplug the power, hold the EZSetup button in and re-plug the power.&nbsp; Wait 6 seconds and the Ready light should go out.&nbsp; Release the EZSetup button and your router now has a TFTP server running awaiting a push from your computer.&nbsp; On your computer type &quot;tftp -i 192.168.1.1 PUT flash_file_name.trx&quot;&nbsp; It should report back within 5 seconds that it is complete.&nbsp; Wait 20 seconds or so, then push the reset button or pull the power and replace it.&nbsp; The router should power up with the new flash within about 10 seconds.&nbsp; Then the ready light should come on and go out within about 20 seconds.&nbsp; You should now be able to telnet to the router on 192.168.1.1.&nbsp; If not, try resetting one more time.&nbsp; If it still won&#039;t come up or the ready light is flashing - something is wrong and you need to start over with your compile (it doesn&#039;t like something about your flash file).</p><p>So now is where everything departs from the previous gouge on the wl700ge with 8.09 and earlier.&nbsp; On my first 20 tries or so, I blindly followed the cookbook that worked for me on 8.09 located here (many thanks to this individual for getting me going on this last year:&nbsp; <a href="http://wl700g.homelinux.net/content/10-compile-firmware-1)">http://wl700g.homelinux.net/content/10- … irmware-1)</a>&nbsp; The problem is that his scripts do not work in backfire.&nbsp; Fortunately, in backfire they have added the option to compile in the ability to switch root to an external (IDE or USB) drive.&nbsp; Note, I did NOT use the &quot;block-hotplug&quot; package because I&#039;m not compiling in USB support at this point (I&#039;ll try that later).</p><p>Reference the following two pages:<br /><a href="http://wiki.openwrt.org/doc/howto/rootfsonexternalstorage">http://wiki.openwrt.org/doc/howto/rootf … nalstorage</a><br /><a href="http://wiki.openwrt.org/doc/uci/fstab">http://wiki.openwrt.org/doc/uci/fstab</a></p><p>I&#039;m going to just do the IDE drive at this point (I had to go slow, because when I compiled in USB support, I could not get the image to boot).&nbsp; So, go back into &quot;make menuconfig&quot; and select the following additional packages:&nbsp; &quot;block-extroot&quot; and &quot;swap-utils&quot; are located in the disc submenu of the Utilities menu.&nbsp; Don&#039;t get crazy.&nbsp; Like I say, if you make the image too big, it won&#039;t boot.&nbsp; I first tried adding in USB devices, and I could not get it to come up.&nbsp; The baseline wl700ge image should already have the necessary IDE device selected.&nbsp; One more thing I like to do - I like to have the option to do multi-user stuff later on, so I add busybox options for user management, such as adduser, addgroup, delgroup, etc.&nbsp; This comes in handy later when I turn the box into a domain controller.</p><p>Afterwards, execute a &quot;make&quot; and it will build your firmware.&nbsp; You will find the trx file in the &quot;bin&quot; directory.&nbsp; But, we first need to make a few changes to the included files, because you can&#039;t change the image once it is on the device.&nbsp; cd into the build_dir/target-mipsel_uClibc-0.9.30.1/root-brcm-2.4/etc/config directory and edit the file &quot;fstab&quot;</p><p>I modified mine to look like this:</p><div class="codebox"><pre><code>config global automount
        option from_fstab 1
        option anon_mount 1

config global autoswap
        option from_fstab 1
        option anon_swap 0

config mount
        option target   /mnt
        option device   /dev/discs/disc0/part1
        option fstype   ext3
        option options  rw,sync
        option enabled  1
        option enabled_fsck 1
        option is_rootfs 1

config mount
        option target   /hdd
        option device   /dev/discs/disc0/part3
        option fstype   ext3
        option options  rw,sync
        option enabled  1
        option enabled_fsck 1

config mount
        option target   /usb
        option device   /dev/discs/disc1/part1
        option fstype   ext3
        option options  rw,sync
        option enabled  1
        option enabled_fsck 1

config swap
        option device   /dev/discs/disc0/part2
        option enabled  1</code></pre></div><p>I have my HDD partitioned with three partitions, as you can see.&nbsp; part1 is the openwrt root, part 2 is swap, and part 3 is data.&nbsp; We&#039;ll worry about that later, but be sure that your drive has nothing on it that you want (because we&#039;re going to reformat it) or adjust the above to suit your needs.&nbsp; The USB partition will not work at first but we&#039;re going to load all the necessary kernel modules after the first boot (it won&#039;t work if we try now - too big on compile).</p><p>Now cd to the build_dir/target-mipsel_uClibc-0.9.30.1/root-brcm-2.4/etc/init.d directory and edit the fstab file there.&nbsp; Per the instructions here:&nbsp; <a href="http://wiki.openwrt.org/doc/uci/fstab">http://wiki.openwrt.org/doc/uci/fstab</a>, you need to comment out a line:</p><div class="quotebox"><cite>http://wiki.openwrt.org/doc/uci/fstab wrote:</cite><blockquote><p>There is a bug: vim /etc/init.d/fstab&nbsp; and put a # in front of the line echo &#039;# WARNING: this is an auto generated file, please use uci to set defined filesystems&#039; &gt; /etc/fstab. This creates the file /etc/fstab and thus prevents creating a symlink to /tmp/fstab. In order for uci to work, there need to be symlink!</p></blockquote></div><p>Make sure that you leave that file as executable!</p><p>Finally, create empty directories called &quot;hdd&quot; and &quot;usb&quot; in build_dir/target-mipsel_uClibc-0.9.30.1/root-brcm-2.4/ so that we can properly mount the data partitions of your IDE and USB drives.&nbsp; Note, only one partition of the USB drive will mount (the first one).&nbsp; If you want more, you can easily modify the script above.</p><p>Now execute the command &quot;make target/install&quot;&nbsp; This will take your changes above and incorporate them into the trx file without recompiling everything.&nbsp; BTW, if you instead say &quot;make&quot; then the toolchain will wipe out your changes and revert back to the defaults, so save copies of your modified files somewhere else.&nbsp; If you need to recompile, you need to again change those files and execute &quot;make target/install&quot; again.&nbsp; When done, you will have a trx file in your &quot;/bin&quot; folder that you will now flash to the wl700ge per the instructions at the top.&nbsp; Do so now and boot the router.&nbsp; After about 30 second after booting, you should see the Ready light go out and you can telnet in.</p><p>Now we have a few things to do to get ready to reboot with the HDD as root (it is not at this point).&nbsp; With a squashfs system, we have to boot twice to get it to do the pivot_root.&nbsp; After the first boot, we set up the IDE partitions so that the second boot works correctly.&nbsp; First let&#039;s get our partitions correct (assuming that you have none at this point).&nbsp; If you do, you might want to delete what you have or leave them as is - your choice but adjust examples to suit your needs.&nbsp; Everything on the drive will be gone after this, so only do this if you want them wiped.&nbsp; You don&#039;t actually need to touch partition 3 if you don&#039;t want to.&nbsp; You can have data there that survives the process (unless you redid the partition above).&nbsp; We just need partition 1 for root and 2 for swap.&nbsp; Skip this section on fdisk if your drive is already prepared.</p><p>I recommend following the advice from:</p><div class="quotebox"><cite>http://wl700g.homelinux.net/content/1021-change-root-hdd wrote:</cite><blockquote><p>fdisk /dev/ide/host0/bus0/target0/lun0/disc</p><p>n, p, 1, enter, +2048M, t, 83</p><p>n, p, 2, enter, +1024M, t, 2, 82</p><p>n, p, 3, enter, enter, t, 3, 83</p><p>w</p></blockquote></div><p>This creates three partitions as I am using above.&nbsp; It is possible that your drive already had partitions that mounted automatically and the above will fail unless you unmount them first.&nbsp; type &quot;df -h&quot; and see what is mounted, then type umount ~path~ to unmount them first (stuff starting with /dev/discs/disc0/part...)</p><p>Now format the partitions and mount them (partition 3 only if you want to wipe what you have already).&nbsp; Note, depending on how you got here, you may not have the necessary /tmp/root/mnt directory to mount onto.&nbsp; If the drive already had the necessary partitions and was formatted already, then you can skip right to the last step.&nbsp; Worst case, get your drive partitioned and formatted, then reflash the router with the firmware and boot it up, then skip to the last step (copying files) and you should be good.</p><div class="codebox"><pre><code>mkfs.ext3 /dev/ide/host0/bus0/target0/lun0/part1
mount /dev/ide/host0/bus0/target0/lun0/part1 /tmp/root/mnt

mkswap /dev/ide/host0/bus0/target0/lun0/part2
swapon -a

mkfs.ext3 /dev/ide/host0/bus0/target0/lun0/part3</code></pre></div><p>Now, we copy everything from ROM to partition 1:</p><div class="codebox"><pre><code>cp -a /rom/* /tmp/root/mnt</code></pre></div><p>Now issue a &quot;reboot&quot; command and wait about 30 seconds.&nbsp; Now telnet back in.</p><p>You should be good-to-go with the IDE part1 mounted on /.&nbsp; Issue a &quot;df -h&quot; to see the mounts and also &quot;free&quot; to be sure that swap is on.&nbsp; It should look like this:</p><div class="codebox"><pre><code> === IMPORTANT ============================
  Use &#039;passwd&#039; to set your login password
  this will disable telnet and enable SSH
 ------------------------------------------


BusyBox v1.15.3 (2010-07-12 21:50:24 EDT) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 Backfire (10.03, r22127) --------------------------
  * 1/3 shot Kahlua    In a shot glass, layer Kahlua
  * 1/3 shot Bailey&#039;s  on the bottom, then Bailey&#039;s,
  * 1/3 shot Vodka     then Vodka.
 ---------------------------------------------------
root@OpenWrt:/# free
              total         used         free       shared      buffers
  Mem:        62960        11332        51628            0         1120
 Swap:      1004052            0      1004052
Total:      1067012        11332      1055680
root@OpenWrt:/# df -h
Filesystem                Size      Used Available Use% Mounted on
/dev/root                 1.1M      1.1M         0 100% /rom
tmpfs                    30.7M     44.0K     30.7M   0% /tmp
/dev/mtdblock/4          64.0K     64.0K         0 100% /tmp/overlay
/dev/discs/disc0/part1
                          1.9G     39.2M      1.8G   2% /overlay
mini_fo:/overlay          1.1M      1.1M         0 100% /
/dev/discs/disc0/part3
                        148.1G     60.5G     80.1G  43% /hdd</code></pre></div><p>Now let&#039;s get USB working:&nbsp; Note, you may need to adjust your network settings in /etc/config/network in order to get your internet connection working - I am not addressing that problem in this post.</p><div class="codebox"><pre><code>opkg update
opkg install kmod-usb2 kmod-usb-ohci kmod-usb-storage block-hotplug</code></pre></div><p>You can now plug in a USB drive and it will be available for mounting manually now or it should be there on reboot (it&#039;s in our fstab)</p><div class="codebox"><pre><code>mount /dev/discs/disc1/part1 /usb</code></pre></div><p>Now that your / is the HDD, you can have fun upgrading whatever you like!&nbsp; Have fun.&nbsp; The first mystery I&#039;ve been trying to solve is why my Ready light is off.&nbsp; I only know at this point that if it stays on, I cannot contact the telnet server.</p>											<p class="post-edited">(Last edited by <strong>bluegold92</strong> on 16 Jul 2010, 00:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p113419">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">arjo</div>
					<div class="post-datetime">
						20 Jul 2010, 00:25					</div>
				</div>
				<div class="post-content content">
					<p>Great post! Pitty you did not post it one month earlier, it would have saved me some nights without any sleep ;-)</p><p>Do you have any clue how to involve the 2.6 kernel? I read some post on facebook:<br /><a href="http://www.facebook.com/topic.php?topic=13572&amp;post=57306&amp;uid=252874452895#post57306">http://www.facebook.com/topic.php?topic … #post57306</a></p><p>I could not get this to work...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p113422">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">bluegold92</div>
					<div class="post-datetime">
						20 Jul 2010, 00:42					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the feedback.&nbsp; I hoped it might help someone else out.&nbsp; I need to post my latest upgrades, however.</p><p>I gave up on the 2.6 kernel for now.&nbsp; I suspect there may be an error in the build tools - mine seems to incorporate the 2.4 kernel despite selecting the 2.6.&nbsp; Either way, I cannot get pre-init to occur successfully, and after many many attempts I have given up in frustration.&nbsp; As for the Facebook post, I have my doubts that he is really in the 2.6 kernel.&nbsp; I asked him to post the results of &quot;uname -r&quot; to prove he&#039;s in 2.6 but no response to date.&nbsp; I am not sure how one can boot from ROM in 2.4 and then somehow switch to 2.6.&nbsp; I hope I can be proved wrong, but I don&#039;t see it...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p113424">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">arjo</div>
					<div class="post-datetime">
						20 Jul 2010, 01:00					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve read something about kexec, it should allow you to boot another kernel -&gt; 2.6 stored on hdd or usb.<br />I don&#039;t know the details, but kexec is listed as package in the menu when building the image.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p113434">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">bluegold92</div>
					<div class="post-datetime">
						20 Jul 2010, 05:31					</div>
				</div>
				<div class="post-content content">
					<p>Very interesting.&nbsp; I am looking seriously at kexec now...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p113948">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">viking-coyote</div>
					<div class="post-datetime">
						29 Jul 2010, 01:29					</div>
				</div>
				<div class="post-content content">
					<p>Hi. I try make root on hdd (WL-HDD, Backfire 10.03)</p><div class="codebox"><pre><code>~# cat /etc/config/fstab 
config mount
        option target    /mnt
        option device    /dev/ide/host0/bus0/target0/lun0/part2
        option fstype    ext3
        option options   rw,sync
        option enabled   1
        option is_rootfs 1</code></pre></div><p>Result <br /></p><div class="codebox"><pre><code>~# mount
rootfs on / type rootfs (rw)
/dev/root on /rom type squashfs (ro)
none on /dev type devfs (rw)
none on /proc type proc (rw)
tmpfs on /tmp type tmpfs (rw,nosuid,nodev)
devpts on /dev/pts type devpts (rw)
/dev/mtdblock/4 on /overlay type jffs2 (rw)
mini_fo:/overlay on / type mini_fo (rw)
/dev/ide/host0/bus0/target0/lun0/part2 on /mnt type ext3 (rw,sync)</code></pre></div><div class="codebox"><pre><code>~# df -h
Filesystem                Size      Used Available Use% Mounted on
/dev/root                 1.4M      1.4M         0 100% /rom
tmpfs                     7.0M     28.0K      7.0M   0% /tmp
/dev/mtdblock/4           1.8M    332.0K      1.4M  19% /overlay
mini_fo:/overlay          1.4M      1.4M         0 100% /
/dev/ide/host0/bus0/target0/lun0/part2
                        151.9M      8.4M    143.5M   6% /mnt</code></pre></div><p>If i change <br /></p><div class="codebox"><pre><code>        option target    /mnt</code></pre></div><p>to<br /></p><div class="codebox"><pre><code>        option target    /</code></pre></div><p>All bad again:<br /></p><div class="codebox"><pre><code>~# mount
rootfs on / type rootfs (rw)
/dev/root on /rom type squashfs (ro)
none on /dev type devfs (rw)
none on /proc type proc (rw)
tmpfs on /tmp type tmpfs (rw,nosuid,nodev)
devpts on /dev/pts type devpts (rw)
/dev/mtdblock/4 on /overlay type jffs2 (rw)
mini_fo:/overlay on / type mini_fo (rw)
/dev/ide/host0/bus0/target0/lun0/part2 on / type ext3 (rw,sync)</code></pre></div><p>but<br /></p><div class="codebox"><pre><code>~# df -h
Filesystem                Size      Used Available Use% Mounted on
/dev/root                 1.4M      1.4M         0 100% /rom
tmpfs                     7.0M     28.0K      7.0M   0% /tmp
/dev/mtdblock/4           1.8M    332.0K      1.4M  19% /overlay
mini_fo:/overlay          1.4M      1.4M         0 100% /
/dev/ide/host0/bus0/target0/lun0/part2
                        1.4M      1.4M         0 100% /</code></pre></div><p><strong>/dev/ide/host0/bus0/target0/lun0/part2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.4M&nbsp; &nbsp; &nbsp; 1.4M&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 100%</strong> - what the hell? where i mistake?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p113951">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">bluegold92</div>
					<div class="post-datetime">
						29 Jul 2010, 02:18					</div>
				</div>
				<div class="post-content content">
					<p>It&#039;s hard to tell from your post where you were in the process when you encountered these results.&nbsp; Can you be more specific exactly where in my process you had trouble?&nbsp; Were the &quot;df -h&quot; results from the second boot?&nbsp; Did you follow all the other items in my post or did you cut a corner anywhere?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118727">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">bluegold92</div>
					<div class="post-datetime">
						8 Oct 2010, 17:44					</div>
				</div>
				<div class="post-content content">
					<p>Well,</p><p>It is a sad day, but my wl-700ge appears to have completely died.&nbsp; No signs of life at all.&nbsp; I verified that the power supply appears to be good (still getting 12 VDC outputs.&nbsp; When I plug it in, nothing happens - no lights, no nothing.&nbsp; Tried every possible combination of button holding, etc.</p><p>Any ideas?&nbsp; Can I JTAG or serial console to it, or is it probably just fried at an electrical level?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118847">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">unknown</div>
					<div class="post-datetime">
						11 Oct 2010, 12:21					</div>
				</div>
				<div class="post-content content">
					<p>Here: <a href="http://static.freesa.org/WL-700gE/">http://static.freesa.org/WL-700gE/</a> is documentation to<br />access the serial console.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125567">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">hcc23</div>
					<div class="post-datetime">
						15 Jan 2011, 22:02					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>just wanted to let you guys know that there is another one out there (still) messing with the WL700gE...</p><p>As &quot;back2basic&quot; from <a href="http://wl700g.homelinux.net">http://wl700g.homelinux.net</a> apparently has moved on I recently tried my luck with 10.3 myself and (obviously) kinda lost that battle - so thanks for this post which gives me&nbsp; a little hope that it could be done, IF my router wouldn&#039;t show the weirdest of all behaviors:</p><p><strong>The EZ-Setup button doesn&#039;t do the usual when I power up the router. I can&#039;t get the TFTP server up.</strong></p><p>Normally I would expect the router to start blinking with the ready light (and one would stop after this 5th or 6th blink to get to the TFTP mode). Unfortunately, all the EZ setup button does is prevent the router from booting...</p><p>Anybody ever seen this? Does anybody have an alternative way to get the TFTP server back up without the EZ-Setup button?</p><p>What makes the situation actually really weird is the fact that the 8.09 (from <a href="http://wl700g.homelinux.net">http://wl700g.homelinux.net</a>) on the router actually still works.... However, I tried using the &quot;mtd&quot; method to flash the firmware from within OpenWRT 8.09, but that wouldn&#039;t work either. I could flash the 1708032 bytes of the 8.09 image from <a href="http://download.hezik.nl/WL700gE/OpenWrt/8.09.2/">http://download.hezik.nl/WL700gE/OpenWrt/8.09.2/</a> (which seems to be a mirror of <a href="http://wl700g.homelinux.net">http://wl700g.homelinux.net</a>) but mtd would come back with an error message if I tried to flash the 1773568 bytes of the 10.3 image created following the above recipe.</p><p>So anybody out there any ideas?<br />Any hints appreciated... <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Claus</p><p>PS: I will start bypass surgery this afternoon and get the serial console up... maybe that will tell me a little more...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125662">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">hcc23</div>
					<div class="post-datetime">
						16 Jan 2011, 21:37					</div>
				</div>
				<div class="post-content content">
					<p>Quick update:</p><p><strong>1) Serial Port is up and running.</strong><br /><strong>2) Don&#039;t ask me why, but I can now get the TFTP server up with the usual &quot;hold the EZ-Setup button&quot;</strong></p><p>.. well, at least I have a serial port right now <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>Just a quick note for myself/others:<br />- I followed <a href="http://static.freesa.org/WL-700gE/">http://static.freesa.org/WL-700gE/</a> to get to the serial port<br />- I use the FTDI-R232-v3.3 cable to talk to the router. (<a href="http://www.ftdichip.com/Support/Documents/DataSheets/Cables/DS_TTL-232R_CABLES.pdf">http://www.ftdichip.com/Support/Documen … CABLES.pdf</a>)<br />- I can confirm their pin-out: [ ], TX, RX, GND (i.e. connect the routers TX to the yellow Rx lineof the FTDI cable, and the routers RX to the orange Tx line of the FTDI cable)</p><p>Oh, and in case somebody is as careless as I when reassembling the router:<br />Take care not to break of the SMD LED for the READY button. In case you do (well, I did it a total of 5 times...), the LED has a little black triangle on the back that you have to align with the triangle (NOT the sign for the LED though!) on the PCB.&nbsp; </p><p>So far I tried flashing the &quot;vanilla&quot; 10.3 trx image from the OP, but that ends in an infinite reboot on the routers side with this error message:</p><div class="codebox"><pre><code>[...]
Freeing unused kernel memory: 84k freed                                                                                
Warning: unable to open an initial console.                                                                            
Kernel panic: No init found.  Try passing init= option to kernel.                                                      
 &lt;0&gt;Rebooting in 5 seconds..</code></pre></div><p>I&#039;ll keep posting.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125671">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">hcc23</div>
					<div class="post-datetime">
						16 Jan 2011, 22:33					</div>
				</div>
				<div class="post-content content">
					<p>Looking at the serial console during a flashing operation seems to support the &quot;anecdotal&quot; evidence of the OP of a 1.8 MB upper limit for images:</p><div class="codebox"><pre><code>CFE version 1.0.37 for BCM947XX (32bit,SP,LE)                                       
Build Date: ?| 12?? 29 20:36:58 CST 2005 (root@localhost.localdomain)              
Copyright (C) 2000,2001,2002,2003 Broadcom Corporation.                             
                                                                                    
Initializing Arena                                                                  
Initializing Devices.                                                               
et0: Broadcom BCM47xx 10/100 Mbps Ethernet Controller 3.90.23.0                     
rndis0: Broadcom USB RNDIS Network Adapter (P-t-P)                                  
CPU type 0x29006: 264MHz                                                            
Total memory: 67108864 KBytes                                                       
                                                                                    
Total memory used by CFE:  0x80800000 - 0x8089BA00 (637440)                         
Initialized Data:          0x80831B70 - 0x80834250 (9952)                           
BSS Area:                  0x80834250 - 0x80835A00 (6064)                           
Local Heap:                0x80835A00 - 0x80899A00 (409600)                         
Stack Area:                0x80899A00 - 0x8089BA00 (8192)                           
Text (code) segment:       0x80800000 - 0x80831B70 (203632)                         
Boot area (physical):      0x0089C000 - 0x008DC000                                  
Relocation Factor:         I:00000000 - D:00000000                                  
                                                                                    
Device eth0:  hwaddr 00-18-F3-93-A6-24, ipaddr 192.168.1.1, mask 255.255.255.0      
        gateway not set, nameserver not set                                         
Null Rescue Flag.                                                                   
Null Rescue Flag.                                                                   
10 seconds to Rescue mode...                                                        
Null Rescue Flag.                                                                   
9 seconds to Rescue mode...                                                         
Null Rescue Flag.                                                                   
8 seconds to Rescue mode...                                                         
Null Rescue Flag.                                                                   
7 seconds to Rescue mode...                                                         
Null Rescue Flag.                                                                   
6 seconds to Rescue mode...                                                         
Null Rescue Flag.                                                                   
5 seconds to Rescue mode...                                                         
Null Rescue Flag.                                                                   
4 seconds to Rescue mode...                                                         
Null Rescue Flag.                                                                   
3 seconds to Rescue mode...                                                         
Null Rescue Flag.                                                                   
2 seconds to Rescue mode...                                                         
Null Rescue Flag.                                                                   
1 seconds to Rescue mode...                                                         
Null Rescue Flag.                                                                   
Hello!! Enter Rescue Mode: (by Force)                                               
                                                                                    
Reading :: TFTP Server.                                                             
Failed.: Timeout occured                                                            
Reading :: TFTP Server.                                                             
Failed.: Timeout occured                                                            
Reading :: TFTP Server.                                                             
TFTP_BLKLEN!!                                                                       
Done. 1839104 bytes read                                                            
Download of 0x1c1000 bytes completed                                                
Write kernel and filesystem binary to FLASH (0xbfc40000)                            
flash device &#039;flash1.trx&#039;                                                           
Programming...                                                                      
ERROR!! copysize is 1839104, amtcopy is 1802240                                     
Failed.: Unknown error</code></pre></div><p>Looks like the upper limit is 1802240 bytes.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125682">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">hcc23</div>
					<div class="post-datetime">
						17 Jan 2011, 02:32					</div>
				</div>
				<div class="post-content content">
					<p>As an interim solution I followed <a href="https://forum.openwrt.org/viewtopic.php?id=25352">https://forum.openwrt.org/viewtopic.php?id=25352</a> and downloaded the 1.6MB image of 10.3 with a 2.4 kernel. I uploaded that image and am up and running again <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>As a lesson-learned: Don&#039;t be to eager and use the &quot;passwd&quot;&nbsp; to early. In my case I closed the telnet option that way without having a working ssh daemon up yet... I was very happy to having had access to the serial console, that really saved my many times today <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>I will keep messing around with the image builder on order to create an minimalistic image from the svn sources... once working I will follow the OP&#039;s lead and make a write up of my story...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125962">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">bluegold92</div>
					<div class="post-datetime">
						19 Jan 2011, 18:02					</div>
				</div>
				<div class="post-content content">
					<p>Great info.&nbsp; In my case the TFTP server on my device stopped working a few months back and I gave up trying to fix it.&nbsp; I&#039;m really not sure if I&#039;m going to try again.&nbsp; However, your posts give me hope that I might be able to get it up and running again.&nbsp; If I do, I&#039;ll post something.&nbsp; To be honest, I&#039;m at the point where the time spent on is isn&#039;t worth the learning that I was getting out of it.&nbsp; I broke down and bought an Apple Airport so that I could have reliable AFP connections to network drives.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140845">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">dolphine</div>
					<div class="post-datetime">
						8 Aug 2011, 23:42					</div>
				</div>
				<div class="post-content content">
					<p>I have succesfully flashed Backfire image (10.03, r26231 from <a href="http://wl700ge.hezik.nl">http://wl700ge.hezik.nl</a>) onto my WL700, but I can not fid a way to change root to hdd :-(</p><p>I can see both partitions of my hdd mounted fine as:</p><p>/dev/hda1 to /mnt/hda1</p><p>/dev/hda3 to /mnt/hda3</p><p>The script I used on kamikaze (root2sh) isn&#039;t here.</p><p>I tried to use the pivot_root but I do not know which parameters should I issue to make it work.</p><p>I have even tried &quot;brute&quot; method of copying /rom/* to /mnt/hda1 and trying to modify /etc/config/fstab to make it boot from hda1 instead of /dev/sha1 which is default (and probably even disaled), &#039;uci show fstab&#039; seems ok, &#039;uci commit&#039; as well, but on reboot I am back on rom boot with original /etc/config/fstab :-(</p><p>Please advise. Thanks a lot in advance.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141069">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">hcc23</div>
					<div class="post-datetime">
						11 Aug 2011, 16:53					</div>
				</div>
				<div class="post-content content">
					<p>Hi dolphin,</p><p>I am sorry to say, but AFAIK none of the Kamikaze methods will work on Backfire (at least not, if you are running 2.6 Kernel, i.e. using the brcm47xx target for the image creation)...</p><p>All I can say at this point is a) read and b) wait&nbsp; <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>A) Reading: the openwrt community has put in a wonderful effort in writing documentation on the (new) wiki. Read up on extroot as a starting point (and follow all the leads there...)</p><p>B) Waiting: I am currently working on getting 10.3 (with a 2.6.xx Kernel) on the WL-700 and it is looking good (I got the extroot to HDD working, currently fiddling with the root on USB) ..</p><p>So hang tight, I am looking forward to posting a how-to for the WL-700 soon...</p><p>Cheers,</p><p>hcc23</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141084">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">dolphine</div>
					<div class="post-datetime">
						11 Aug 2011, 20:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hcc23 wrote:</cite><blockquote><p>So hang tight, I am looking forward to posting a how-to for the WL-700 soon...</p></blockquote></div><p>This would be very much appreciated. Meanwhile I try the reading :-) (I have actually started before, but was not successful).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142230">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">Gregoire</div>
					<div class="post-datetime">
						26 Aug 2011, 21:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hcc23 wrote:</cite><blockquote><p>B) Waiting: I am currently working on getting 10.3 (with a 2.6.xx Kernel) on the WL-700 and it is looking good (I got the extroot to HDD working, currently fiddling with the root on USB) ..</p><p>So hang tight, I am looking forward to posting a how-to for the WL-700 soon...</p><p>Cheers,</p><p>hcc23</p></blockquote></div><p>Hello hcc23 :-)</p><p>I am really interested in a 2.6 700g because of <a href="https://forum.openwrt.org/viewtopic.php?id=28588">https://forum.openwrt.org/viewtopic.php?id=28588</a> which don&#039;t work on a 2.4 kernel.<br />Any ETA for the howto ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142235">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">hcc23</div>
					<div class="post-datetime">
						26 Aug 2011, 22:30					</div>
				</div>
				<div class="post-content content">
					<p>Hello fellow &quot;I want 2.6 on my WL-700&quot; folks... </p><p>So, I&#039;ve got some good and some bad news:</p><p>1) The Good: I can get 10.3 with 2.6 to flash, boot, do the ext-root to hdd or usb, and run <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />2) The Bad: It is completely useless as &quot;/&quot; is read only... <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>Here is the short story of where I am stuck (and mainly AFAIK - and I could be horribly wrong here as &quot;I ain&#039;t no kernel hacker&quot;):<br />* I can make an image to perform the extroot boot from USB or the HDD<br />* unfortunately when the kernel boots the first time (from flash), it tries to create the &quot;rootfs&quot; in whatever is left of the flash (which is effectively zero/zilch/nothing in our case)...<br />* ... since the kernel is smart (and still lives in the ramdisk) it is not bothered much by this, spits out some error messages and marks this partial &quot;rootfs&quot; as readonly<br />* Then the extroot stuff happens (overlay fs or not, it doesn&#039;t seem to matter), and &quot;/&quot; gets &quot;masked&quot; (AFAIK) with the external stuff.</p><p>Well, and since the original &quot;/&quot; is marked read-only, it doesn&#039;t really matter that it is now GBytes of free space - it can&#039;t be written to, i.e. none of the still missing stuff (like network drivers etc <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> ) can be installed... </p><p>So, any hints on how to avoid this problem?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142323">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">Gregoire</div>
					<div class="post-datetime">
						27 Aug 2011, 21:33					</div>
				</div>
				<div class="post-content content">
					<p>Maybe if you give your .config and tell us what else you did it will be easyer to try and understand what&#039;s going on here :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142769">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">dev</div>
					<div class="post-datetime">
						2 Sep 2011, 22:37					</div>
				</div>
				<div class="post-content content">
					<p>@hcc23: Please give your .config and tell what you did. As requested already.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p143172">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">hcc23</div>
					<div class="post-datetime">
						9 Sep 2011, 05:13					</div>
				</div>
				<div class="post-content content">
					<p>Hello again.</p><p>Please excuse my absence, I was busy with a different project. But that is (nearly) done, so back to work... <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>All the following results were obtained from a fresh checkout of backfire (svn rev 28200 from svn://svn.openwrt.org/openwrt/branches/backfire).</p><p><strong><span class="bbu">Case 1:</span></strong></p><p>In this case I am trying to get a minimal image <span class="bbu">without</span> any block devices (as those seem to trigger my troubles).</p><p>Here the .config (with the unchecked &quot;# CONFIG_xxx&quot; options removed to shorten the file):<br /></p><div class="codebox"><pre><code>#
# Automatically generated make config: don&#039;t edit
# OpenWrt version: Backfire (r27974)
# Sun Aug 14 10:14:57 2011
#
CONFIG_HAVE_DOT_CONFIG=y
CONFIG_TARGET_brcm47xx=y
CONFIG_TARGET_brcm47xx_None=y
CONFIG_TARGET_BOARD=&quot;brcm47xx&quot;
CONFIG_TARGET_ARCH_PACKAGES=&quot;brcm47xx&quot;
CONFIG_DEFAULT_TARGET_OPTIMIZATION=&quot;-Os -pipe -mips32 -mtune=mips32 -funit-at-a-time&quot;
CONFIG_LINUX_2_6_32=y
CONFIG_DEFAULT_base-files=y
CONFIG_DEFAULT_busybox=y
CONFIG_DEFAULT_dnsmasq=y
CONFIG_DEFAULT_dropbear=y
CONFIG_DEFAULT_firewall=y
CONFIG_DEFAULT_hotplug2=y
CONFIG_DEFAULT_iptables=y
CONFIG_DEFAULT_kmod-diag=y
CONFIG_DEFAULT_kmod-ipt-nathelper=y
CONFIG_DEFAULT_kmod-switch=y
CONFIG_DEFAULT_libc=y
CONFIG_DEFAULT_libgcc=y
CONFIG_DEFAULT_mtd=y
CONFIG_DEFAULT_nvram=y
CONFIG_DEFAULT_opkg=y
CONFIG_DEFAULT_ppp=y
CONFIG_DEFAULT_ppp-mod-pppoe=y
CONFIG_DEFAULT_uci=y
CONFIG_DEFAULT_udevtrigger=y
CONFIG_LINUX_2_6=y
CONFIG_AUDIO_SUPPORT=y
CONFIG_GPIO_SUPPORT=y
CONFIG_PCI_SUPPORT=y
CONFIG_PCMCIA_SUPPORT=y
CONFIG_USB_SUPPORT=y
CONFIG_USES_SQUASHFS=y
CONFIG_mipsel=y
CONFIG_ARCH=&quot;mipsel&quot;

#
# Target Images
#

#
# Root filesystem archives
#

#
# Root filesystem images
#
CONFIG_TARGET_ROOTFS_SQUASHFS=y

#
# Image Options
#

#
# Global build settings
#

#
# General build options
#
CONFIG_BUILD_PATENTED=y
CONFIG_LARGEFILE=y
CONFIG_SHADOW_PASSWORDS=y

#
# Kernel build options
#
CONFIG_KERNEL_DEBUG_FS=y

#
# Package build options
#
CONFIG_IPV6=y

#
# Stripping options
#
CONFIG_USE_SSTRIP=y
CONFIG_DOWNLOAD_FOLDER=&quot;&quot;
CONFIG_LOCALMIRROR=&quot;&quot;
CONFIG_AUTOREBUILD=y
CONFIG_BUILD_SUFFIX=&quot;&quot;
CONFIG_TARGET_ROOTFS_DIR=&quot;&quot;
CONFIG_EXTERNAL_KERNEL_TREE=&quot;&quot;
CONFIG_KERNEL_GIT_CLONE_URI=&quot;&quot;
CONFIG_KERNEL_GIT_LOCAL_REPOSITORY=&quot;&quot;
CONFIG_TARGET_OPTIMIZATION=&quot;-Os -pipe -mips32 -mtune=mips32 -funit-at-a-time&quot;
CONFIG_SOFT_FLOAT=y
CONFIG_EXTRA_BINUTILS_CONFIG_OPTIONS=&quot;&quot;
CONFIG_BINUTILS_VERSION=&quot;2.19.1&quot;
CONFIG_GCC_VERSION_4_3_3_CS=y
CONFIG_EXTRA_GCC_CONFIG_OPTIONS=&quot;&quot;
CONFIG_INSTALL_LIBSTDCPP=y
CONFIG_USE_UCLIBC=y
CONFIG_UCLIBC_VERSION_0_9_30_1=y
CONFIG_GCC_VERSION=&quot;4.3.3+cs&quot;
CONFIG_GCC_VERSION_4=y
CONFIG_GCC_VERSION_4_3=y
CONFIG_UCLIBC_VERSION=&quot;0.9.30.1&quot;
CONFIG_LIBC=&quot;uClibc&quot;
CONFIG_LIBC_VERSION=&quot;0.9.30.1&quot;
CONFIG_TARGET_SUFFIX=&quot;uclibc&quot;
CONFIG_UCI_PRECONFIG_network_lan_dns=&quot;&quot;
CONFIG_UCI_PRECONFIG_network_lan_proto=&quot;static&quot;
CONFIG_UCI_PRECONFIG_network_lan_gateway=&quot;&quot;
CONFIG_UCI_PRECONFIG_network_lan_netmask=&quot;255.255.255.0&quot;
CONFIG_UCI_PRECONFIG_network_lan_ipaddr=&quot;192.168.1.1&quot;
CONFIG_TARGET_PREINIT_SUPPRESS_STDERR=y
CONFIG_TARGET_PREINIT_TIMEOUT=2
CONFIG_TARGET_PREINIT_IFNAME=&quot;&quot;
CONFIG_TARGET_PREINIT_IP=&quot;192.168.1.1&quot;
CONFIG_TARGET_PREINIT_NETMASK=&quot;255.255.255.0&quot;
CONFIG_TARGET_PREINIT_BROADCAST=&quot;192.168.1.255&quot;
CONFIG_TARGET_INIT_PATH=&quot;/bin:/sbin:/usr/bin:/usr/sbin&quot;
CONFIG_TARGET_INIT_ENV=&quot;&quot;
CONFIG_TARGET_INIT_CMD=&quot;/sbin/init&quot;
CONFIG_TARGET_INIT_SUPPRESS_STDERR=y

#
# Base system
#
CONFIG_PACKAGE_base-files=y
CONFIG_EXTROOT_SETTLETIME=20
CONFIG_PACKAGE_block-hotplug=y
CONFIG_PACKAGE_block-mount=y
CONFIG_PACKAGE_busybox=y

#
# Configuration
#
CONFIG_BUSYBOX_CONFIG_FEATURE_2_6_MODULES=y
CONFIG_BUSYBOX_CONFIG_HAVE_DOT_CONFIG=y

#
# Busybox Settings
#

#
# General Configuration
#
CONFIG_BUSYBOX_CONFIG_FEATURE_BUFFERS_GO_ON_STACK=y
CONFIG_BUSYBOX_CONFIG_SHOW_USAGE=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VERBOSE_USAGE=y
CONFIG_BUSYBOX_CONFIG_FEATURE_COMPRESS_USAGE=y
CONFIG_BUSYBOX_CONFIG_LONG_OPTS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_DEVPTS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_PIDFILE=y
CONFIG_BUSYBOX_CONFIG_FEATURE_SUID=y
CONFIG_BUSYBOX_CONFIG_FEATURE_PREFER_APPLETS=y
CONFIG_BUSYBOX_CONFIG_BUSYBOX_EXEC_PATH=&quot;/proc/self/exe&quot;
CONFIG_BUSYBOX_CONFIG_FEATURE_SYSLOG=y
CONFIG_BUSYBOX_CONFIG_FEATURE_HAVE_RPC=y

#
# Build Options
#
CONFIG_BUSYBOX_CONFIG_LFS=y
CONFIG_BUSYBOX_CONFIG_CROSS_COMPILER_PREFIX=&quot;&quot;
CONFIG_BUSYBOX_CONFIG_EXTRA_CFLAGS=&quot;&quot;

#
# Debugging Options
#
CONFIG_BUSYBOX_CONFIG_NO_DEBUG_LIB=y
CONFIG_BUSYBOX_CONFIG_INCLUDE_SUSv2=y

#
# Installation Options
#
CONFIG_BUSYBOX_CONFIG_INSTALL_APPLET_SYMLINKS=y
CONFIG_BUSYBOX_CONFIG_PREFIX=&quot;./_install&quot;

#
# Busybox Library Tuning
#
CONFIG_BUSYBOX_CONFIG_PASSWORD_MINLEN=6
CONFIG_BUSYBOX_CONFIG_MD5_SIZE_VS_SPEED=2
CONFIG_BUSYBOX_CONFIG_FEATURE_FAST_TOP=y
CONFIG_BUSYBOX_CONFIG_FEATURE_EDITING=y
CONFIG_BUSYBOX_CONFIG_FEATURE_EDITING_MAX_LEN=512
CONFIG_BUSYBOX_CONFIG_FEATURE_EDITING_HISTORY=256
CONFIG_BUSYBOX_CONFIG_FEATURE_TAB_COMPLETION=y
CONFIG_BUSYBOX_CONFIG_FEATURE_EDITING_FANCY_PROMPT=y
CONFIG_BUSYBOX_CONFIG_FEATURE_NON_POSIX_CP=y
CONFIG_BUSYBOX_CONFIG_FEATURE_COPYBUF_KB=4
CONFIG_BUSYBOX_CONFIG_IOCTL_HEX2STR_ERROR=y

#
# Applets
#

#
# Archival Utilities
#
CONFIG_BUSYBOX_CONFIG_FEATURE_SEAMLESS_GZ=y
CONFIG_BUSYBOX_CONFIG_BUNZIP2=y
CONFIG_BUSYBOX_CONFIG_GUNZIP=y
CONFIG_BUSYBOX_CONFIG_GZIP=y
CONFIG_BUSYBOX_CONFIG_TAR=y
CONFIG_BUSYBOX_CONFIG_FEATURE_TAR_CREATE=y
CONFIG_BUSYBOX_CONFIG_FEATURE_TAR_FROM=y
CONFIG_BUSYBOX_CONFIG_FEATURE_TAR_GNU_EXTENSIONS=y

#
# Coreutils
#
CONFIG_BUSYBOX_CONFIG_BASENAME=y
CONFIG_BUSYBOX_CONFIG_CAT=y
CONFIG_BUSYBOX_CONFIG_CHGRP=y
CONFIG_BUSYBOX_CONFIG_CHMOD=y
CONFIG_BUSYBOX_CONFIG_CHOWN=y
CONFIG_BUSYBOX_CONFIG_CHROOT=y
CONFIG_BUSYBOX_CONFIG_CP=y
CONFIG_BUSYBOX_CONFIG_CUT=y
CONFIG_BUSYBOX_CONFIG_DATE=y
CONFIG_BUSYBOX_CONFIG_FEATURE_DATE_ISOFMT=y
CONFIG_BUSYBOX_CONFIG_DD=y
CONFIG_BUSYBOX_CONFIG_FEATURE_DD_SIGNAL_HANDLING=y
CONFIG_BUSYBOX_CONFIG_DF=y
CONFIG_BUSYBOX_CONFIG_DIRNAME=y
CONFIG_BUSYBOX_CONFIG_DU=y
CONFIG_BUSYBOX_CONFIG_FEATURE_DU_DEFAULT_BLOCKSIZE_1K=y
CONFIG_BUSYBOX_CONFIG_ECHO=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FANCY_ECHO=y
CONFIG_BUSYBOX_CONFIG_ENV=y
CONFIG_BUSYBOX_CONFIG_EXPR=y
CONFIG_BUSYBOX_CONFIG_EXPR_MATH_SUPPORT_64=y
CONFIG_BUSYBOX_CONFIG_FALSE=y
CONFIG_BUSYBOX_CONFIG_HEAD=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FANCY_HEAD=y
CONFIG_BUSYBOX_CONFIG_HOSTID=y
CONFIG_BUSYBOX_CONFIG_ID=y
CONFIG_BUSYBOX_CONFIG_LENGTH=y
CONFIG_BUSYBOX_CONFIG_LN=y
CONFIG_BUSYBOX_CONFIG_LS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_LS_FILETYPES=y
CONFIG_BUSYBOX_CONFIG_FEATURE_LS_FOLLOWLINKS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_LS_RECURSIVE=y
CONFIG_BUSYBOX_CONFIG_FEATURE_LS_SORTFILES=y
CONFIG_BUSYBOX_CONFIG_FEATURE_LS_TIMESTAMPS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_LS_USERNAME=y
CONFIG_BUSYBOX_CONFIG_FEATURE_LS_COLOR=y
CONFIG_BUSYBOX_CONFIG_FEATURE_LS_COLOR_IS_DEFAULT=y
CONFIG_BUSYBOX_CONFIG_MD5SUM=y
CONFIG_BUSYBOX_CONFIG_MKDIR=y
CONFIG_BUSYBOX_CONFIG_MKFIFO=y
CONFIG_BUSYBOX_CONFIG_MKNOD=y
CONFIG_BUSYBOX_CONFIG_MV=y
CONFIG_BUSYBOX_CONFIG_NICE=y
CONFIG_BUSYBOX_CONFIG_PRINTF=y
CONFIG_BUSYBOX_CONFIG_PWD=y
CONFIG_BUSYBOX_CONFIG_RM=y
CONFIG_BUSYBOX_CONFIG_RMDIR=y
CONFIG_BUSYBOX_CONFIG_SEQ=y
CONFIG_BUSYBOX_CONFIG_SLEEP=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FANCY_SLEEP=y
CONFIG_BUSYBOX_CONFIG_SORT=y
CONFIG_BUSYBOX_CONFIG_SYNC=y
CONFIG_BUSYBOX_CONFIG_TAIL=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FANCY_TAIL=y
CONFIG_BUSYBOX_CONFIG_TEE=y
CONFIG_BUSYBOX_CONFIG_FEATURE_TEE_USE_BLOCK_IO=y
CONFIG_BUSYBOX_CONFIG_TEST=y
CONFIG_BUSYBOX_CONFIG_FEATURE_TEST_64=y
CONFIG_BUSYBOX_CONFIG_TOUCH=y
CONFIG_BUSYBOX_CONFIG_TR=y
CONFIG_BUSYBOX_CONFIG_TRUE=y
CONFIG_BUSYBOX_CONFIG_UNAME=y
CONFIG_BUSYBOX_CONFIG_UNIQ=y
CONFIG_BUSYBOX_CONFIG_WC=y
CONFIG_BUSYBOX_CONFIG_YES=y

#
# Common options for cp and mv
#
CONFIG_BUSYBOX_CONFIG_FEATURE_PRESERVE_HARDLINKS=y

#
# Common options for ls, more and telnet
#
CONFIG_BUSYBOX_CONFIG_FEATURE_AUTOWIDTH=y

#
# Common options for df, du, ls
#
CONFIG_BUSYBOX_CONFIG_FEATURE_HUMAN_READABLE=y

#
# Common options for md5sum, sha1sum
#
CONFIG_BUSYBOX_CONFIG_FEATURE_MD5_SHA1_SUM_CHECK=y

#
# Console Utilities
#
CONFIG_BUSYBOX_CONFIG_CLEAR=y
CONFIG_BUSYBOX_CONFIG_RESET=y

#
# Debian Utilities
#
CONFIG_BUSYBOX_CONFIG_MKTEMP=y
CONFIG_BUSYBOX_CONFIG_START_STOP_DAEMON=y
CONFIG_BUSYBOX_CONFIG_WHICH=y

#
# Editors
#
CONFIG_BUSYBOX_CONFIG_AWK=y
CONFIG_BUSYBOX_CONFIG_FEATURE_AWK_LIBM=y
CONFIG_BUSYBOX_CONFIG_DIFF=y
CONFIG_BUSYBOX_CONFIG_SED=y
CONFIG_BUSYBOX_CONFIG_VI=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VI_MAX_LEN=1024
CONFIG_BUSYBOX_CONFIG_FEATURE_VI_COLON=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VI_YANKMARK=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VI_SEARCH=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VI_USE_SIGNALS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VI_DOT_CMD=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VI_READONLY=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VI_SETOPTS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VI_SET=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VI_WIN_RESIZE=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VI_OPTIMIZE_CURSOR=y
CONFIG_BUSYBOX_CONFIG_FEATURE_ALLOW_EXEC=y

#
# Finding Utilities
#
CONFIG_BUSYBOX_CONFIG_FIND=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FIND_PRINT0=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FIND_PERM=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FIND_TYPE=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FIND_XDEV=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FIND_MAXDEPTH=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FIND_EXEC=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FIND_USER=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FIND_GROUP=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FIND_NOT=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FIND_DEPTH=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FIND_PAREN=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FIND_SIZE=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FIND_PRUNE=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FIND_PATH=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FIND_REGEX=y
CONFIG_BUSYBOX_CONFIG_GREP=y
CONFIG_BUSYBOX_CONFIG_FEATURE_GREP_EGREP_ALIAS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_GREP_FGREP_ALIAS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_GREP_CONTEXT=y
CONFIG_BUSYBOX_CONFIG_XARGS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_XARGS_SUPPORT_CONFIRMATION=y
CONFIG_BUSYBOX_CONFIG_FEATURE_XARGS_SUPPORT_QUOTES=y
CONFIG_BUSYBOX_CONFIG_FEATURE_XARGS_SUPPORT_TERMOPT=y
CONFIG_BUSYBOX_CONFIG_FEATURE_XARGS_SUPPORT_ZERO_TERM=y

#
# Init Utilities
#
CONFIG_BUSYBOX_CONFIG_INIT=y
CONFIG_BUSYBOX_CONFIG_FEATURE_USE_INITTAB=y
CONFIG_BUSYBOX_CONFIG_FEATURE_INIT_SYSLOG=y
CONFIG_BUSYBOX_CONFIG_HALT=y
CONFIG_BUSYBOX_CONFIG_MESG=y

#
# Login/Password Management Utilities
#
CONFIG_BUSYBOX_CONFIG_PASSWD=y
CONFIG_BUSYBOX_CONFIG_FEATURE_PASSWD_WEAK_CHECK=y

#
# Linux Ext2 FS Progs
#

#
# Linux Module Utilities
#
CONFIG_BUSYBOX_CONFIG_INSMOD=y
CONFIG_BUSYBOX_CONFIG_RMMOD=y
CONFIG_BUSYBOX_CONFIG_LSMOD=y
CONFIG_BUSYBOX_CONFIG_FEATURE_LSMOD_PRETTY_2_6_OUTPUT=y

#
# Options common to multiple modutils
#
CONFIG_BUSYBOX_CONFIG_FEATURE_CHECK_TAINTED_MODULE=y
CONFIG_BUSYBOX_CONFIG_DEFAULT_MODULES_DIR=&quot;/lib/modules&quot;

#
# Linux System Utilities
#
CONFIG_BUSYBOX_CONFIG_BLKID=y
CONFIG_BUSYBOX_CONFIG_DMESG=y
CONFIG_BUSYBOX_CONFIG_FEATURE_DMESG_PRETTY=y
CONFIG_BUSYBOX_CONFIG_FDISK_SUPPORT_LARGE_DISKS=y
CONFIG_BUSYBOX_CONFIG_HEXDUMP=y
CONFIG_BUSYBOX_CONFIG_HWCLOCK=y
CONFIG_BUSYBOX_CONFIG_MKSWAP=y
CONFIG_BUSYBOX_CONFIG_FEATURE_MKSWAP_UUID=y
CONFIG_BUSYBOX_CONFIG_VOLUMEID=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VOLUMEID_EXT=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VOLUMEID_REISERFS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VOLUMEID_FAT=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VOLUMEID_HFS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VOLUMEID_XFS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VOLUMEID_NTFS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VOLUMEID_ISO9660=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VOLUMEID_UDF=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VOLUMEID_LINUXSWAP=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VOLUMEID_LINUXRAID=y
CONFIG_BUSYBOX_CONFIG_MOUNT=y
CONFIG_BUSYBOX_CONFIG_FEATURE_MOUNT_HELPERS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_MOUNT_NFS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_MOUNT_CIFS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_MOUNT_FLAGS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_MOUNT_FSTAB=y
CONFIG_BUSYBOX_CONFIG_PIVOT_ROOT=y
CONFIG_BUSYBOX_CONFIG_RDATE=y
CONFIG_BUSYBOX_CONFIG_SWAPONOFF=y
CONFIG_BUSYBOX_CONFIG_SWITCH_ROOT=y
CONFIG_BUSYBOX_CONFIG_UMOUNT=y
CONFIG_BUSYBOX_CONFIG_FEATURE_UMOUNT_ALL=y

#
# Common options for mount/umount
#
CONFIG_BUSYBOX_CONFIG_FEATURE_MOUNT_LOOP=y

#
# Miscellaneous Utilities
#
CONFIG_BUSYBOX_CONFIG_CROND=y
CONFIG_BUSYBOX_CONFIG_FEATURE_CROND_DIR=&quot;/var/spool/cron&quot;
CONFIG_BUSYBOX_CONFIG_CRONTAB=y
CONFIG_BUSYBOX_CONFIG_LESS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_LESS_MAXLINES=9999999
CONFIG_BUSYBOX_CONFIG_LOCK=y
CONFIG_BUSYBOX_CONFIG_STRINGS=y
CONFIG_BUSYBOX_CONFIG_TIME=y
CONFIG_BUSYBOX_CONFIG_WATCHDOG=y

#
# Networking Utilities
#
CONFIG_BUSYBOX_CONFIG_FEATURE_IPV6=y
CONFIG_BUSYBOX_CONFIG_FEATURE_PREFER_IPV4_ADDRESS=y
CONFIG_BUSYBOX_CONFIG_VERBOSE_RESOLUTION_ERRORS=y
CONFIG_BUSYBOX_CONFIG_ARPING=y
CONFIG_BUSYBOX_CONFIG_BRCTL=y
CONFIG_BUSYBOX_CONFIG_FEATURE_BRCTL_FANCY=y
CONFIG_BUSYBOX_CONFIG_FEATURE_BRCTL_SHOW=y
CONFIG_BUSYBOX_CONFIG_IFCONFIG=y
CONFIG_BUSYBOX_CONFIG_FEATURE_IFCONFIG_STATUS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_IFCONFIG_HW=y
CONFIG_BUSYBOX_CONFIG_FEATURE_IFCONFIG_BROADCAST_PLUS=y
CONFIG_BUSYBOX_CONFIG_NC=y
CONFIG_BUSYBOX_CONFIG_NETMSG=y
CONFIG_BUSYBOX_CONFIG_NETSTAT=y
CONFIG_BUSYBOX_CONFIG_FEATURE_NETSTAT_WIDE=y
CONFIG_BUSYBOX_CONFIG_FEATURE_NETSTAT_PRG=y
CONFIG_BUSYBOX_CONFIG_NSLOOKUP=y
CONFIG_BUSYBOX_CONFIG_PING=y
CONFIG_BUSYBOX_CONFIG_PING6=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FANCY_PING=y
CONFIG_BUSYBOX_CONFIG_ROUTE=y
CONFIG_BUSYBOX_CONFIG_TELNET=y
CONFIG_BUSYBOX_CONFIG_FEATURE_TELNET_TTYPE=y
CONFIG_BUSYBOX_CONFIG_TELNETD=y
CONFIG_BUSYBOX_CONFIG_FEATURE_TELNETD_STANDALONE=y
CONFIG_BUSYBOX_CONFIG_TRACEROUTE=y
CONFIG_BUSYBOX_CONFIG_FEATURE_TRACEROUTE_VERBOSE=y
CONFIG_BUSYBOX_CONFIG_APP_UDHCPC=y
CONFIG_BUSYBOX_CONFIG_UDHCP_DEBUG=0
CONFIG_BUSYBOX_CONFIG_FEATURE_UDHCP_RFC3397=y
CONFIG_BUSYBOX_CONFIG_UDHCPC_DEFAULT_SCRIPT=&quot;/usr/share/udhcpc/default.script&quot;
CONFIG_BUSYBOX_CONFIG_UDHCPC_SLACK_FOR_BUGGY_SERVERS=80
CONFIG_BUSYBOX_CONFIG_VCONFIG=y
CONFIG_BUSYBOX_CONFIG_WGET=y
CONFIG_BUSYBOX_CONFIG_FEATURE_WGET_STATUSBAR=y
CONFIG_BUSYBOX_CONFIG_FEATURE_WGET_AUTHENTICATION=y
CONFIG_BUSYBOX_CONFIG_FEATURE_WGET_LONG_OPTIONS=y

#
# Print Utilities
#

#
# Mail Utilities
#

#
# Process Utilities
#
CONFIG_BUSYBOX_CONFIG_FREE=y
CONFIG_BUSYBOX_CONFIG_KILL=y
CONFIG_BUSYBOX_CONFIG_KILLALL=y
CONFIG_BUSYBOX_CONFIG_KILLALL5=y
CONFIG_BUSYBOX_CONFIG_PGREP=y
CONFIG_BUSYBOX_CONFIG_PIDOF=y
CONFIG_BUSYBOX_CONFIG_PKILL=y
CONFIG_BUSYBOX_CONFIG_PS=y
CONFIG_BUSYBOX_CONFIG_BB_SYSCTL=y
CONFIG_BUSYBOX_CONFIG_TOP=y
CONFIG_BUSYBOX_CONFIG_FEATURE_TOP_CPU_USAGE_PERCENTAGE=y
CONFIG_BUSYBOX_CONFIG_FEATURE_TOP_CPU_GLOBAL_PERCENTS=y
CONFIG_BUSYBOX_CONFIG_UPTIME=y

#
# Runit Utilities
#

#
# Shells
#
CONFIG_BUSYBOX_CONFIG_FEATURE_SH_IS_ASH=y
CONFIG_BUSYBOX_CONFIG_ASH=y
CONFIG_BUSYBOX_CONFIG_ASH_BASH_COMPAT=y
CONFIG_BUSYBOX_CONFIG_ASH_JOB_CONTROL=y
CONFIG_BUSYBOX_CONFIG_ASH_READ_TIMEOUT=y
CONFIG_BUSYBOX_CONFIG_ASH_ALIAS=y
CONFIG_BUSYBOX_CONFIG_ASH_GETOPTS=y
CONFIG_BUSYBOX_CONFIG_ASH_BUILTIN_ECHO=y
CONFIG_BUSYBOX_CONFIG_ASH_BUILTIN_PRINTF=y
CONFIG_BUSYBOX_CONFIG_ASH_BUILTIN_TEST=y
CONFIG_BUSYBOX_CONFIG_ASH_CMDCMD=y
CONFIG_BUSYBOX_CONFIG_ASH_EXPAND_PRMT=y
CONFIG_BUSYBOX_CONFIG_SH_MATH_SUPPORT=y
CONFIG_BUSYBOX_CONFIG_SH_MATH_SUPPORT_64=y

#
# System Logging Utilities
#
CONFIG_BUSYBOX_CONFIG_SYSLOGD=y
CONFIG_BUSYBOX_CONFIG_FEATURE_ROTATE_LOGFILE=y
CONFIG_BUSYBOX_CONFIG_FEATURE_REMOTE_LOG=y
CONFIG_BUSYBOX_CONFIG_FEATURE_IPC_SYSLOG=y
CONFIG_BUSYBOX_CONFIG_FEATURE_IPC_SYSLOG_BUFFER_SIZE=16
CONFIG_BUSYBOX_CONFIG_LOGREAD=y
CONFIG_BUSYBOX_CONFIG_KLOGD=y
CONFIG_BUSYBOX_CONFIG_LOGGER=y
CONFIG_PACKAGE_hotplug2=y
CONFIG_PACKAGE_libc=y
CONFIG_PACKAGE_libgcc=y
CONFIG_PACKAGE_mtd=y
CONFIG_PACKAGE_nvram=y
CONFIG_PACKAGE_opkg=y
CONFIG_PACKAGE_udevtrigger=y

#
# Network
#

#
# Telephony
#

#
# Libraries
#

#
# Filesystem
#

#
# SSL
#

#
# IPv6
#

#
# Kernel modules
#

#
# Block Devices
#

#
# Cryptographic API modules
#

#
# Filesystems
#

#
# FireWire support
#

#
# Hardware Monitoring Support
#

#
# I2C support
#

#
# Netfilter Extensions
#

#
# Network Devices
#

#
# Network Support
#

#
# OCF Configuration
#

#
# Other modules
#

#
# SPI Support
#

#
# Sound Support
#

#
# USB Support
#

#
# Video Support
#

#
# Voice over IP
#

#
# W1 support
#

#
# Wireless Drivers
#

#
# Xen paravirtualized guest support
#

#
# Boot Loaders
#

#
# Utilities
#

#
# Boot Loaders
#

#
# Filesystem
#

#
# Terminal
#

#
# disc
#

#
# Languages
#

#
# Lua
#</code></pre></div><p>This .config produces a 1511424 byte .trx image. Once this is flashed, I can capture this boot up sequence (and some checking commands at the end):<br /></p><div class="codebox"><pre><code>Done. 1511424 bytes read
Download of 0x171000 bytes completed
Write kernel and filesystem binary to FLASH (0xbfc40000)
flash device &#039;flash1.trx&#039;
Programming...
done. 1511424 bytes written


CFE version 1.0.37 for BCM947XX (32bit,SP,LE)
Build Date: ?| 12?? 29 20:36:58 CST 2005 (root@localhost.localdomain)
Copyright (C) 2000,2001,2002,2003 Broadcom Corporation.

Initializing Arena
Initializing Devices.
et0: Broadcom BCM47xx 10/100 Mbps Ethernet Controller 3.90.23.0
rndis0: Broadcom USB RNDIS Network Adapter (P-t-P)
CPU type 0x29006: 264MHz
Total memory: 67108864 KBytes

Total memory used by CFE:  0x80800000 - 0x8089BA00 (637440)
Initialized Data:          0x80831B70 - 0x80834250 (9952)
BSS Area:                  0x80834250 - 0x80835A00 (6064)
Local Heap:                0x80835A00 - 0x80899A00 (409600)
Stack Area:                0x80899A00 - 0x8089BA00 (8192)
Text (code) segment:       0x80800000 - 0x80831B70 (203632)
Boot area (physical):      0x0089C000 - 0x008DC000
Relocation Factor:         I:00000000 - D:00000000

Device eth0:  hwaddr xx-xx-xx-xx-xx-xx, ipaddr 192.168.1.1, mask 255.255.255.0
        gateway not set, nameserver not set
Null Rescue Flag.
Null Restore Flag.
set pivot_wait = 0
Loader:raw Filesys:raw Dev:flash0.os File: Options:(null)
Loading: .. 4092 bytes read
Entry at 0x80001000
Closing network.
Starting program at 0x80001000
Linux version 2.6.32.27 (claus@hex.site) (gcc version 4.3.3 (GCC) ) #28 Thu Sep 8 20:39:07 EDT 2011
CPU revision is: 00029006 (Broadcom BCM3302)
ssb: chipcommon status is 0x0
ssb: Initializing MIPS core...
ssb: set_irq: core 0x0806, irq 4 =&gt; 4
ssb: set_irq: core 0x0806, irq 5 =&gt; 5
ssb: set_irq: core 0x0808, irq 6 =&gt; 2
ssb: set_irq: core 0x0804, irq 2 =&gt; 6
ssb: after irq reconfiguration
ssb: core 0x0800, irq : 2(S)  3* 4  5  6  D  I 
ssb: core 0x0806, irq : 2(S)  3  4* 5  6  D  I 
ssb: core 0x0806, irq : 2(S)  3  4  5* 6  D  I 
ssb: core 0x0808, irq : 2(S)* 3  4  5  6  D  I 
ssb: core 0x0804, irq : 2(S)  3  4  5  6* D  I 
ssb: core 0x0816, irq : 2(S)* 3  4  5  6  D  I 
ssb: core 0x0807, irq : 2(S)* 3  4  5  6  D  I 
ssb: core 0x080b, irq : 2(S)* 3  4  5  6  D  I 
ssb: core 0x080f, irq : 2(S)  3  4  5  6  D  I*
ssb: Sonics Silicon Backplane found at address 0x18000000
Serial init done.
Determined physical RAM map:
 memory: 04000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00004000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00004000
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,jffs2 noinitrd console=ttyS0,115200
PID hash table entries: 256 (order: -2, 1024 bytes)
Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
Primary instruction cache 16kB, VIPT, 2-way, linesize 16 bytes.
Primary data cache 16kB, 2-way, VIPT, cache aliases, linesize 16 bytes
Memory: 62056k/65536k available (2203k kernel code, 3408k reserved, 345k data, 136k init, 0k highmem)
Hierarchical RCU implementation.
NR_IRQS:128
console [ttyS0] enabled
Calibrating delay loop... 263.16 BogoMIPS (lpj=526336)
Mount-cache hash table entries: 512
NET: Registered protocol family 16
bio: create slab &lt;bio-0&gt; at 0
Switching to clocksource MIPS
ssb: PCIcore in host mode found
PCI: Fixing up bridge 0000:00:00.0
PCI: Fixing up device 0000:00:00.0
PCI: Fixing latency timer of device 0000:00:00.0 to 168
pci 0000:00:03.0: PME# supported from D0 D1 D2 D3hot
pci 0000:00:03.0: PME# disabled
pci 0000:00:03.1: PME# supported from D0 D1 D2 D3hot
pci 0000:00:03.1: PME# disabled
pci 0000:00:03.2: PME# supported from D0 D1 D2 D3hot
pci 0000:00:03.2: PME# disabled
PCI: Enabling device 0000:00:01.0 (0000 -&gt; 0002)
PCI: Fixing up device 0000:00:01.0
ssb: chipcommon status is 0x0
ssb: SPROM offset is 0x1000
ssb: Sonics Silicon Backplane found on PCI device 0000:00:01.0
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 2048 (order: 2, 16384 bytes)
TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
TCP: Hash tables configured (established 2048 bind 2048)
TCP reno registered
NET: Registered protocol family 1
squashfs: version 4.0 (2009/01/31) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) (SUMMARY)  © 2001-2006 Red Hat, Inc.
msgmni has been set to 121
io scheduler noop registered
io scheduler deadline registered (default)
Serial: 8250/16550 driver, 2 ports, IRQ sharing enabled
serial8250: ttyS0 at MMIO 0xb8000300 (irq = 3) is a 16550A
serial8250: ttyS1 at MMIO 0xb8000400 (irq = 3) is a 16550A
serial8250.0: ttyS0 at MMIO 0xb8000300 (irq = 3) is a 16550A
serial8250.0: ttyS1 at MMIO 0xb8000400 (irq = 3) is a 16550A
flash init: 0x1c000000 0x02000000
Physically mapped flash: Found 1 x16 devices at 0x0 in 16-bit bank
 CFI mfr 0x000000c2
 CFI id  0x000022c4
 Amd/Fujitsu Extended Query Table at 0x0040
  Amd/Fujitsu Extended Query version 1.0.
Physically mapped flash: JEDEC Device ID is 0x22C4. Assuming broken CFI table.
Physically mapped flash: Swapping erase regions for broken CFI table.
number of CFI chips: 1
cfi_cmdset_0002: Disabling erase-suspend-program due to code brokenness.
Flash device: 0x200000 at 0x1fc00000
bootloader size: 262144
Updating TRX offsets and length:
old trx = [0x0000001c, 0x00000974, 0x000d0c00], len=0x00171000 crc32=0x9b506ef8
new trx = [0x0000001c, 0x00000974, 0x000d0c00], len=0x000d0c00 crc32=0x142bab0e
Done
Creating 4 MTD partitions on &quot;Physically mapped flash&quot;:
0x000000000000-0x000000040000 : &quot;cfe&quot;
0x000000040000-0x0000001f0000 : &quot;linux&quot;
0x000000110c00-0x0000001f0000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
mtd: partition &quot;rootfs&quot; set to be root filesystem
mtd: partition &quot;rootfs_data&quot; created automatically, ofs=190000, len=60000 
0x000000190000-0x0000001f0000 : &quot;rootfs_data&quot;
0x0000001f0000-0x000000200000 : &quot;nvram&quot;
b44.c:v2.0
eth0: Broadcom 44xx/47xx 10/100BaseT Ethernet 00:18:f3:93:a6:24
b44: eth1: PHY Reset would not complete.
eth1: Broadcom 44xx/47xx 10/100BaseT Ethernet 40:10:18:00:00:2c
BCM47xx Watchdog Timer enabled (30 seconds, nowayout)
TCP westwood registered
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
Freeing unused kernel memory: 136k freed
Please be patient, while OpenWrt loads ...
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
- preinit -
Press the [f] key and hit [enter] to enter failsafe mode
- regular preinit -
jffs2 not ready yet; using ramdisk
mini_fo: using base directory: /
mini_fo: using storage directory: /tmp/root
- init -
b44: eth0: powering down PHY

Please press Enter to activate this console. jffs2_scan_eraseblock(): End of filesystem marker found at 0x0
jffs2_build_filesystem(): unlocking the mtd device... done.
jffs2_build_filesystem(): erasing all blocks after the end marker... done.
mini_fo: using base directory: /
mini_fo: using storage directory: /overlay



BusyBox v1.15.3 (2011-09-06 20:14:10 EDT) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 Backfire (10.03.1-RC6, r28196) --------------------
  * 1/3 shot Kahlua    In a shot glass, layer Kahlua 
  * 1/3 shot Bailey&#039;s  on the bottom, then Bailey&#039;s, 
  * 1/3 shot Vodka     then Vodka.
 ---------------------------------------------------
root@(none):/# mount
rootfs on / type rootfs (rw)
/dev/root on /rom type squashfs (ro,relatime)
none on /proc type proc (rw,relatime)
sysfs on /sys type sysfs (rw,relatime)
tmpfs on /tmp type tmpfs (rw,nosuid,nodev,relatime)
tmpfs on /dev type tmpfs (rw,relatime,size=512k,mode=755)
devpts on /dev/pts type devpts (rw,relatime,mode=600)
root on /tmp/root type tmpfs (rw,relatime,mode=755)
mini_fo:/tmp/root on /tmp/root type mini_fo (rw,relatime)
debugfs on /sys/kernel/debug type debugfs (rw,relatime)
/dev/mtdblock3 on /overlay type jffs2 (rw,relatime)
mini_fo:/overlay on / type mini_fo (rw,relatime)
root@(none):/# df -h
Filesystem                Size      Used Available Use% Mounted on
/dev/root               512.0K    512.0K         0 100% /rom
tmpfs                    30.4M     12.0K     30.4M   0% /tmp
tmpfs                   512.0K         0    512.0K   0% /dev
root                    512.0K    512.0K         0 100% /tmp/root
mini_fo:/tmp/root       512.0K    512.0K         0 100% /tmp/root
/dev/mtdblock3          384.0K    196.0K    188.0K  51% /overlay
mini_fo:/overlay        512.0K    512.0K         0 100% /
root@(none):/# opkg list-installed
base-files - 43.27-r28196
block-hotplug - 0.1.0-2.1
block-mount - 0.1.0-2.1
busybox - 1.15.3-2
hotplug2 - 1.0-beta-3
libc - 0.9.30.1-43.27
libgcc - 4.3.3+cs-43.27
mtd - 13
nvram - 7
opkg - 576-1
udevtrigger - 106-1
root@(none):/# uname -r
2.6.32.27</code></pre></div><p><strong><span class="bbu">Case 2:</span></strong></p><p>This time I try to get the extroot to use a USB stick (plugged into the lower of the two ports on the back of the router).</p><p>Again,&nbsp; the .config (with the unchecked &quot;# CONFIG_xxx&quot; options removed to shorten the file):<br /></p><div class="codebox"><pre><code>#
# Automatically generated make config: don&#039;t edit
# OpenWrt version: Backfire (r28196)
# Thu Sep  8 21:17:45 2011
#
CONFIG_HAVE_DOT_CONFIG=y
CONFIG_TARGET_brcm47xx=y
CONFIG_TARGET_brcm47xx_None=y
CONFIG_TARGET_BOARD=&quot;brcm47xx&quot;
CONFIG_TARGET_ARCH_PACKAGES=&quot;brcm47xx&quot;
CONFIG_DEFAULT_TARGET_OPTIMIZATION=&quot;-Os -pipe -mips32 -mtune=mips32 -funit-at-a-time&quot;
CONFIG_LINUX_2_6_32=y
CONFIG_DEFAULT_base-files=y
CONFIG_DEFAULT_busybox=y
CONFIG_DEFAULT_dnsmasq=y
CONFIG_DEFAULT_dropbear=y
CONFIG_DEFAULT_firewall=y
CONFIG_DEFAULT_hotplug2=y
CONFIG_DEFAULT_iptables=y
CONFIG_DEFAULT_kmod-diag=y
CONFIG_DEFAULT_kmod-ipt-nathelper=y
CONFIG_DEFAULT_kmod-switch=y
CONFIG_DEFAULT_libc=y
CONFIG_DEFAULT_libgcc=y
CONFIG_DEFAULT_mtd=y
CONFIG_DEFAULT_nvram=y
CONFIG_DEFAULT_opkg=y
CONFIG_DEFAULT_ppp=y
CONFIG_DEFAULT_ppp-mod-pppoe=y
CONFIG_DEFAULT_uci=y
CONFIG_DEFAULT_udevtrigger=y
CONFIG_LINUX_2_6=y
CONFIG_AUDIO_SUPPORT=y
CONFIG_GPIO_SUPPORT=y
CONFIG_PCI_SUPPORT=y
CONFIG_PCMCIA_SUPPORT=y
CONFIG_USB_SUPPORT=y
CONFIG_USES_SQUASHFS=y
CONFIG_mipsel=y
CONFIG_ARCH=&quot;mipsel&quot;

#
# Target Images
#

#
# Root filesystem archives
#

#
# Root filesystem images
#
CONFIG_TARGET_ROOTFS_SQUASHFS=y

#
# Image Options
#

#
# Global build settings
#

#
# General build options
#
CONFIG_BUILD_PATENTED=y
CONFIG_LARGEFILE=y
CONFIG_SHADOW_PASSWORDS=y

#
# Kernel build options
#
CONFIG_KERNEL_DEBUG_FS=y

#
# Package build options
#
CONFIG_IPV6=y

#
# Stripping options
#
CONFIG_USE_SSTRIP=y
CONFIG_DOWNLOAD_FOLDER=&quot;&quot;
CONFIG_LOCALMIRROR=&quot;&quot;
CONFIG_AUTOREBUILD=y
CONFIG_BUILD_SUFFIX=&quot;&quot;
CONFIG_TARGET_ROOTFS_DIR=&quot;&quot;
CONFIG_EXTERNAL_KERNEL_TREE=&quot;&quot;
CONFIG_KERNEL_GIT_CLONE_URI=&quot;&quot;
CONFIG_KERNEL_GIT_LOCAL_REPOSITORY=&quot;&quot;
CONFIG_TARGET_OPTIMIZATION=&quot;-Os -pipe -mips32 -mtune=mips32 -funit-at-a-time&quot;
CONFIG_SOFT_FLOAT=y
CONFIG_EXTRA_BINUTILS_CONFIG_OPTIONS=&quot;&quot;
CONFIG_BINUTILS_VERSION=&quot;2.19.1&quot;
CONFIG_GCC_VERSION_4_3_3_CS=y
CONFIG_EXTRA_GCC_CONFIG_OPTIONS=&quot;&quot;
CONFIG_INSTALL_LIBSTDCPP=y
CONFIG_USE_UCLIBC=y
CONFIG_UCLIBC_VERSION_0_9_30_1=y
CONFIG_GCC_VERSION=&quot;4.3.3+cs&quot;
CONFIG_GCC_VERSION_4=y
CONFIG_GCC_VERSION_4_3=y
CONFIG_UCLIBC_VERSION=&quot;0.9.30.1&quot;
CONFIG_LIBC=&quot;uClibc&quot;
CONFIG_LIBC_VERSION=&quot;0.9.30.1&quot;
CONFIG_TARGET_SUFFIX=&quot;uclibc&quot;
CONFIG_UCI_PRECONFIG_network_lan_dns=&quot;&quot;
CONFIG_UCI_PRECONFIG_network_lan_proto=&quot;static&quot;
CONFIG_UCI_PRECONFIG_network_lan_gateway=&quot;&quot;
CONFIG_UCI_PRECONFIG_network_lan_netmask=&quot;255.255.255.0&quot;
CONFIG_UCI_PRECONFIG_network_lan_ipaddr=&quot;192.168.1.1&quot;
CONFIG_TARGET_PREINIT_SUPPRESS_STDERR=y
CONFIG_TARGET_PREINIT_TIMEOUT=2
CONFIG_TARGET_PREINIT_IFNAME=&quot;&quot;
CONFIG_TARGET_PREINIT_IP=&quot;192.168.1.1&quot;
CONFIG_TARGET_PREINIT_NETMASK=&quot;255.255.255.0&quot;
CONFIG_TARGET_PREINIT_BROADCAST=&quot;192.168.1.255&quot;
CONFIG_TARGET_INIT_PATH=&quot;/bin:/sbin:/usr/bin:/usr/sbin&quot;
CONFIG_TARGET_INIT_ENV=&quot;&quot;
CONFIG_TARGET_INIT_CMD=&quot;/sbin/init&quot;
CONFIG_TARGET_INIT_SUPPRESS_STDERR=y

#
# Base system
#
CONFIG_PACKAGE_base-files=y
CONFIG_EXTROOT_SETTLETIME=20
CONFIG_PACKAGE_block-hotplug=y
CONFIG_PACKAGE_block-mount=y
CONFIG_PACKAGE_busybox=y

#
# Configuration
#
CONFIG_BUSYBOX_CONFIG_FEATURE_2_6_MODULES=y
CONFIG_BUSYBOX_CONFIG_HAVE_DOT_CONFIG=y

#
# Busybox Settings
#

#
# General Configuration
#
CONFIG_BUSYBOX_CONFIG_FEATURE_BUFFERS_GO_ON_STACK=y
CONFIG_BUSYBOX_CONFIG_SHOW_USAGE=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VERBOSE_USAGE=y
CONFIG_BUSYBOX_CONFIG_FEATURE_COMPRESS_USAGE=y
CONFIG_BUSYBOX_CONFIG_LONG_OPTS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_DEVPTS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_PIDFILE=y
CONFIG_BUSYBOX_CONFIG_FEATURE_SUID=y
CONFIG_BUSYBOX_CONFIG_FEATURE_PREFER_APPLETS=y
CONFIG_BUSYBOX_CONFIG_BUSYBOX_EXEC_PATH=&quot;/proc/self/exe&quot;
CONFIG_BUSYBOX_CONFIG_FEATURE_SYSLOG=y
CONFIG_BUSYBOX_CONFIG_FEATURE_HAVE_RPC=y

#
# Build Options
#
CONFIG_BUSYBOX_CONFIG_LFS=y
CONFIG_BUSYBOX_CONFIG_CROSS_COMPILER_PREFIX=&quot;&quot;
CONFIG_BUSYBOX_CONFIG_EXTRA_CFLAGS=&quot;&quot;

#
# Debugging Options
#
CONFIG_BUSYBOX_CONFIG_NO_DEBUG_LIB=y
CONFIG_BUSYBOX_CONFIG_INCLUDE_SUSv2=y

#
# Installation Options
#
CONFIG_BUSYBOX_CONFIG_INSTALL_APPLET_SYMLINKS=y
CONFIG_BUSYBOX_CONFIG_PREFIX=&quot;./_install&quot;

#
# Busybox Library Tuning
#
CONFIG_BUSYBOX_CONFIG_PASSWORD_MINLEN=6
CONFIG_BUSYBOX_CONFIG_MD5_SIZE_VS_SPEED=2
CONFIG_BUSYBOX_CONFIG_FEATURE_FAST_TOP=y
CONFIG_BUSYBOX_CONFIG_FEATURE_EDITING=y
CONFIG_BUSYBOX_CONFIG_FEATURE_EDITING_MAX_LEN=512
CONFIG_BUSYBOX_CONFIG_FEATURE_EDITING_HISTORY=256
CONFIG_BUSYBOX_CONFIG_FEATURE_TAB_COMPLETION=y
CONFIG_BUSYBOX_CONFIG_FEATURE_EDITING_FANCY_PROMPT=y
CONFIG_BUSYBOX_CONFIG_FEATURE_NON_POSIX_CP=y
CONFIG_BUSYBOX_CONFIG_FEATURE_COPYBUF_KB=4
CONFIG_BUSYBOX_CONFIG_IOCTL_HEX2STR_ERROR=y

#
# Applets
#

#
# Archival Utilities
#
CONFIG_BUSYBOX_CONFIG_FEATURE_SEAMLESS_GZ=y
CONFIG_BUSYBOX_CONFIG_BUNZIP2=y
CONFIG_BUSYBOX_CONFIG_GUNZIP=y
CONFIG_BUSYBOX_CONFIG_GZIP=y
CONFIG_BUSYBOX_CONFIG_TAR=y
CONFIG_BUSYBOX_CONFIG_FEATURE_TAR_CREATE=y
CONFIG_BUSYBOX_CONFIG_FEATURE_TAR_FROM=y
CONFIG_BUSYBOX_CONFIG_FEATURE_TAR_GNU_EXTENSIONS=y

#
# Coreutils
#
CONFIG_BUSYBOX_CONFIG_BASENAME=y
CONFIG_BUSYBOX_CONFIG_CAT=y
CONFIG_BUSYBOX_CONFIG_CHGRP=y
CONFIG_BUSYBOX_CONFIG_CHMOD=y
CONFIG_BUSYBOX_CONFIG_CHOWN=y
CONFIG_BUSYBOX_CONFIG_CHROOT=y
CONFIG_BUSYBOX_CONFIG_CP=y
CONFIG_BUSYBOX_CONFIG_CUT=y
CONFIG_BUSYBOX_CONFIG_DATE=y
CONFIG_BUSYBOX_CONFIG_FEATURE_DATE_ISOFMT=y
CONFIG_BUSYBOX_CONFIG_DD=y
CONFIG_BUSYBOX_CONFIG_FEATURE_DD_SIGNAL_HANDLING=y
CONFIG_BUSYBOX_CONFIG_DF=y
CONFIG_BUSYBOX_CONFIG_DIRNAME=y
CONFIG_BUSYBOX_CONFIG_DU=y
CONFIG_BUSYBOX_CONFIG_FEATURE_DU_DEFAULT_BLOCKSIZE_1K=y
CONFIG_BUSYBOX_CONFIG_ECHO=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FANCY_ECHO=y
CONFIG_BUSYBOX_CONFIG_ENV=y
CONFIG_BUSYBOX_CONFIG_EXPR=y
CONFIG_BUSYBOX_CONFIG_EXPR_MATH_SUPPORT_64=y
CONFIG_BUSYBOX_CONFIG_FALSE=y
CONFIG_BUSYBOX_CONFIG_HEAD=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FANCY_HEAD=y
CONFIG_BUSYBOX_CONFIG_HOSTID=y
CONFIG_BUSYBOX_CONFIG_ID=y
CONFIG_BUSYBOX_CONFIG_LENGTH=y
CONFIG_BUSYBOX_CONFIG_LN=y
CONFIG_BUSYBOX_CONFIG_LS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_LS_FILETYPES=y
CONFIG_BUSYBOX_CONFIG_FEATURE_LS_FOLLOWLINKS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_LS_RECURSIVE=y
CONFIG_BUSYBOX_CONFIG_FEATURE_LS_SORTFILES=y
CONFIG_BUSYBOX_CONFIG_FEATURE_LS_TIMESTAMPS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_LS_USERNAME=y
CONFIG_BUSYBOX_CONFIG_FEATURE_LS_COLOR=y
CONFIG_BUSYBOX_CONFIG_FEATURE_LS_COLOR_IS_DEFAULT=y
CONFIG_BUSYBOX_CONFIG_MD5SUM=y
CONFIG_BUSYBOX_CONFIG_MKDIR=y
CONFIG_BUSYBOX_CONFIG_MKFIFO=y
CONFIG_BUSYBOX_CONFIG_MKNOD=y
CONFIG_BUSYBOX_CONFIG_MV=y
CONFIG_BUSYBOX_CONFIG_NICE=y
CONFIG_BUSYBOX_CONFIG_PRINTF=y
CONFIG_BUSYBOX_CONFIG_PWD=y
CONFIG_BUSYBOX_CONFIG_RM=y
CONFIG_BUSYBOX_CONFIG_RMDIR=y
CONFIG_BUSYBOX_CONFIG_SEQ=y
CONFIG_BUSYBOX_CONFIG_SLEEP=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FANCY_SLEEP=y
CONFIG_BUSYBOX_CONFIG_SORT=y
CONFIG_BUSYBOX_CONFIG_SYNC=y
CONFIG_BUSYBOX_CONFIG_TAIL=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FANCY_TAIL=y
CONFIG_BUSYBOX_CONFIG_TEE=y
CONFIG_BUSYBOX_CONFIG_FEATURE_TEE_USE_BLOCK_IO=y
CONFIG_BUSYBOX_CONFIG_TEST=y
CONFIG_BUSYBOX_CONFIG_FEATURE_TEST_64=y
CONFIG_BUSYBOX_CONFIG_TOUCH=y
CONFIG_BUSYBOX_CONFIG_TR=y
CONFIG_BUSYBOX_CONFIG_TRUE=y
CONFIG_BUSYBOX_CONFIG_UNAME=y
CONFIG_BUSYBOX_CONFIG_UNIQ=y
CONFIG_BUSYBOX_CONFIG_WC=y
CONFIG_BUSYBOX_CONFIG_YES=y

#
# Common options for cp and mv
#
CONFIG_BUSYBOX_CONFIG_FEATURE_PRESERVE_HARDLINKS=y

#
# Common options for ls, more and telnet
#
CONFIG_BUSYBOX_CONFIG_FEATURE_AUTOWIDTH=y

#
# Common options for df, du, ls
#
CONFIG_BUSYBOX_CONFIG_FEATURE_HUMAN_READABLE=y

#
# Common options for md5sum, sha1sum
#
CONFIG_BUSYBOX_CONFIG_FEATURE_MD5_SHA1_SUM_CHECK=y

#
# Console Utilities
#
CONFIG_BUSYBOX_CONFIG_CLEAR=y
CONFIG_BUSYBOX_CONFIG_RESET=y

#
# Debian Utilities
#
CONFIG_BUSYBOX_CONFIG_MKTEMP=y
CONFIG_BUSYBOX_CONFIG_START_STOP_DAEMON=y
CONFIG_BUSYBOX_CONFIG_WHICH=y

#
# Editors
#
CONFIG_BUSYBOX_CONFIG_AWK=y
CONFIG_BUSYBOX_CONFIG_FEATURE_AWK_LIBM=y
CONFIG_BUSYBOX_CONFIG_DIFF=y
CONFIG_BUSYBOX_CONFIG_SED=y
CONFIG_BUSYBOX_CONFIG_VI=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VI_MAX_LEN=1024
CONFIG_BUSYBOX_CONFIG_FEATURE_VI_COLON=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VI_YANKMARK=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VI_SEARCH=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VI_USE_SIGNALS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VI_DOT_CMD=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VI_READONLY=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VI_SETOPTS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VI_SET=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VI_WIN_RESIZE=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VI_OPTIMIZE_CURSOR=y
CONFIG_BUSYBOX_CONFIG_FEATURE_ALLOW_EXEC=y

#
# Finding Utilities
#
CONFIG_BUSYBOX_CONFIG_FIND=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FIND_PRINT0=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FIND_PERM=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FIND_TYPE=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FIND_XDEV=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FIND_MAXDEPTH=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FIND_EXEC=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FIND_USER=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FIND_GROUP=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FIND_NOT=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FIND_DEPTH=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FIND_PAREN=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FIND_SIZE=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FIND_PRUNE=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FIND_PATH=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FIND_REGEX=y
CONFIG_BUSYBOX_CONFIG_GREP=y
CONFIG_BUSYBOX_CONFIG_FEATURE_GREP_EGREP_ALIAS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_GREP_FGREP_ALIAS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_GREP_CONTEXT=y
CONFIG_BUSYBOX_CONFIG_XARGS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_XARGS_SUPPORT_CONFIRMATION=y
CONFIG_BUSYBOX_CONFIG_FEATURE_XARGS_SUPPORT_QUOTES=y
CONFIG_BUSYBOX_CONFIG_FEATURE_XARGS_SUPPORT_TERMOPT=y
CONFIG_BUSYBOX_CONFIG_FEATURE_XARGS_SUPPORT_ZERO_TERM=y

#
# Init Utilities
#
CONFIG_BUSYBOX_CONFIG_INIT=y
CONFIG_BUSYBOX_CONFIG_FEATURE_USE_INITTAB=y
CONFIG_BUSYBOX_CONFIG_FEATURE_INIT_SYSLOG=y
CONFIG_BUSYBOX_CONFIG_HALT=y
CONFIG_BUSYBOX_CONFIG_MESG=y

#
# Login/Password Management Utilities
#
CONFIG_BUSYBOX_CONFIG_PASSWD=y
CONFIG_BUSYBOX_CONFIG_FEATURE_PASSWD_WEAK_CHECK=y

#
# Linux Ext2 FS Progs
#

#
# Linux Module Utilities
#
CONFIG_BUSYBOX_CONFIG_INSMOD=y
CONFIG_BUSYBOX_CONFIG_RMMOD=y
CONFIG_BUSYBOX_CONFIG_LSMOD=y
CONFIG_BUSYBOX_CONFIG_FEATURE_LSMOD_PRETTY_2_6_OUTPUT=y

#
# Options common to multiple modutils
#
CONFIG_BUSYBOX_CONFIG_FEATURE_CHECK_TAINTED_MODULE=y
CONFIG_BUSYBOX_CONFIG_DEFAULT_MODULES_DIR=&quot;/lib/modules&quot;

#
# Linux System Utilities
#
CONFIG_BUSYBOX_CONFIG_BLKID=y
CONFIG_BUSYBOX_CONFIG_DMESG=y
CONFIG_BUSYBOX_CONFIG_FEATURE_DMESG_PRETTY=y
CONFIG_BUSYBOX_CONFIG_FDISK_SUPPORT_LARGE_DISKS=y
CONFIG_BUSYBOX_CONFIG_HEXDUMP=y
CONFIG_BUSYBOX_CONFIG_HWCLOCK=y
CONFIG_BUSYBOX_CONFIG_MKSWAP=y
CONFIG_BUSYBOX_CONFIG_FEATURE_MKSWAP_UUID=y
CONFIG_BUSYBOX_CONFIG_VOLUMEID=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VOLUMEID_EXT=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VOLUMEID_REISERFS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VOLUMEID_FAT=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VOLUMEID_HFS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VOLUMEID_XFS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VOLUMEID_NTFS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VOLUMEID_ISO9660=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VOLUMEID_UDF=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VOLUMEID_LINUXSWAP=y
CONFIG_BUSYBOX_CONFIG_FEATURE_VOLUMEID_LINUXRAID=y
CONFIG_BUSYBOX_CONFIG_MOUNT=y
CONFIG_BUSYBOX_CONFIG_FEATURE_MOUNT_HELPERS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_MOUNT_NFS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_MOUNT_CIFS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_MOUNT_FLAGS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_MOUNT_FSTAB=y
CONFIG_BUSYBOX_CONFIG_PIVOT_ROOT=y
CONFIG_BUSYBOX_CONFIG_RDATE=y
CONFIG_BUSYBOX_CONFIG_SWAPONOFF=y
CONFIG_BUSYBOX_CONFIG_SWITCH_ROOT=y
CONFIG_BUSYBOX_CONFIG_UMOUNT=y
CONFIG_BUSYBOX_CONFIG_FEATURE_UMOUNT_ALL=y

#
# Common options for mount/umount
#
CONFIG_BUSYBOX_CONFIG_FEATURE_MOUNT_LOOP=y

#
# Miscellaneous Utilities
#
CONFIG_BUSYBOX_CONFIG_CROND=y
CONFIG_BUSYBOX_CONFIG_FEATURE_CROND_DIR=&quot;/var/spool/cron&quot;
CONFIG_BUSYBOX_CONFIG_CRONTAB=y
CONFIG_BUSYBOX_CONFIG_LESS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_LESS_MAXLINES=9999999
CONFIG_BUSYBOX_CONFIG_LOCK=y
CONFIG_BUSYBOX_CONFIG_STRINGS=y
CONFIG_BUSYBOX_CONFIG_TIME=y
CONFIG_BUSYBOX_CONFIG_WATCHDOG=y

#
# Networking Utilities
#
CONFIG_BUSYBOX_CONFIG_FEATURE_IPV6=y
CONFIG_BUSYBOX_CONFIG_FEATURE_PREFER_IPV4_ADDRESS=y
CONFIG_BUSYBOX_CONFIG_VERBOSE_RESOLUTION_ERRORS=y
CONFIG_BUSYBOX_CONFIG_ARPING=y
CONFIG_BUSYBOX_CONFIG_BRCTL=y
CONFIG_BUSYBOX_CONFIG_FEATURE_BRCTL_FANCY=y
CONFIG_BUSYBOX_CONFIG_FEATURE_BRCTL_SHOW=y
CONFIG_BUSYBOX_CONFIG_IFCONFIG=y
CONFIG_BUSYBOX_CONFIG_FEATURE_IFCONFIG_STATUS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_IFCONFIG_HW=y
CONFIG_BUSYBOX_CONFIG_FEATURE_IFCONFIG_BROADCAST_PLUS=y
CONFIG_BUSYBOX_CONFIG_NC=y
CONFIG_BUSYBOX_CONFIG_NETMSG=y
CONFIG_BUSYBOX_CONFIG_NETSTAT=y
CONFIG_BUSYBOX_CONFIG_FEATURE_NETSTAT_WIDE=y
CONFIG_BUSYBOX_CONFIG_FEATURE_NETSTAT_PRG=y
CONFIG_BUSYBOX_CONFIG_NSLOOKUP=y
CONFIG_BUSYBOX_CONFIG_PING=y
CONFIG_BUSYBOX_CONFIG_PING6=y
CONFIG_BUSYBOX_CONFIG_FEATURE_FANCY_PING=y
CONFIG_BUSYBOX_CONFIG_ROUTE=y
CONFIG_BUSYBOX_CONFIG_TELNET=y
CONFIG_BUSYBOX_CONFIG_FEATURE_TELNET_TTYPE=y
CONFIG_BUSYBOX_CONFIG_TELNETD=y
CONFIG_BUSYBOX_CONFIG_FEATURE_TELNETD_STANDALONE=y
CONFIG_BUSYBOX_CONFIG_TRACEROUTE=y
CONFIG_BUSYBOX_CONFIG_FEATURE_TRACEROUTE_VERBOSE=y
CONFIG_BUSYBOX_CONFIG_APP_UDHCPC=y
CONFIG_BUSYBOX_CONFIG_UDHCP_DEBUG=0
CONFIG_BUSYBOX_CONFIG_FEATURE_UDHCP_RFC3397=y
CONFIG_BUSYBOX_CONFIG_UDHCPC_DEFAULT_SCRIPT=&quot;/usr/share/udhcpc/default.script&quot;
CONFIG_BUSYBOX_CONFIG_UDHCPC_SLACK_FOR_BUGGY_SERVERS=80
CONFIG_BUSYBOX_CONFIG_VCONFIG=y
CONFIG_BUSYBOX_CONFIG_WGET=y
CONFIG_BUSYBOX_CONFIG_FEATURE_WGET_STATUSBAR=y
CONFIG_BUSYBOX_CONFIG_FEATURE_WGET_AUTHENTICATION=y
CONFIG_BUSYBOX_CONFIG_FEATURE_WGET_LONG_OPTIONS=y

#
# Print Utilities
#

#
# Mail Utilities
#

#
# Process Utilities
#
CONFIG_BUSYBOX_CONFIG_FREE=y
CONFIG_BUSYBOX_CONFIG_KILL=y
CONFIG_BUSYBOX_CONFIG_KILLALL=y
CONFIG_BUSYBOX_CONFIG_KILLALL5=y
CONFIG_BUSYBOX_CONFIG_PGREP=y
CONFIG_BUSYBOX_CONFIG_PIDOF=y
CONFIG_BUSYBOX_CONFIG_PKILL=y
CONFIG_BUSYBOX_CONFIG_PS=y
CONFIG_BUSYBOX_CONFIG_BB_SYSCTL=y
CONFIG_BUSYBOX_CONFIG_TOP=y
CONFIG_BUSYBOX_CONFIG_FEATURE_TOP_CPU_USAGE_PERCENTAGE=y
CONFIG_BUSYBOX_CONFIG_FEATURE_TOP_CPU_GLOBAL_PERCENTS=y
CONFIG_BUSYBOX_CONFIG_UPTIME=y

#
# Runit Utilities
#

#
# Shells
#
CONFIG_BUSYBOX_CONFIG_FEATURE_SH_IS_ASH=y
CONFIG_BUSYBOX_CONFIG_ASH=y
CONFIG_BUSYBOX_CONFIG_ASH_BASH_COMPAT=y
CONFIG_BUSYBOX_CONFIG_ASH_JOB_CONTROL=y
CONFIG_BUSYBOX_CONFIG_ASH_READ_TIMEOUT=y
CONFIG_BUSYBOX_CONFIG_ASH_ALIAS=y
CONFIG_BUSYBOX_CONFIG_ASH_GETOPTS=y
CONFIG_BUSYBOX_CONFIG_ASH_BUILTIN_ECHO=y
CONFIG_BUSYBOX_CONFIG_ASH_BUILTIN_PRINTF=y
CONFIG_BUSYBOX_CONFIG_ASH_BUILTIN_TEST=y
CONFIG_BUSYBOX_CONFIG_ASH_CMDCMD=y
CONFIG_BUSYBOX_CONFIG_ASH_EXPAND_PRMT=y
CONFIG_BUSYBOX_CONFIG_SH_MATH_SUPPORT=y
CONFIG_BUSYBOX_CONFIG_SH_MATH_SUPPORT_64=y

#
# System Logging Utilities
#
CONFIG_BUSYBOX_CONFIG_SYSLOGD=y
CONFIG_BUSYBOX_CONFIG_FEATURE_ROTATE_LOGFILE=y
CONFIG_BUSYBOX_CONFIG_FEATURE_REMOTE_LOG=y
CONFIG_BUSYBOX_CONFIG_FEATURE_IPC_SYSLOG=y
CONFIG_BUSYBOX_CONFIG_FEATURE_IPC_SYSLOG_BUFFER_SIZE=16
CONFIG_BUSYBOX_CONFIG_LOGREAD=y
CONFIG_BUSYBOX_CONFIG_KLOGD=y
CONFIG_BUSYBOX_CONFIG_LOGGER=y
CONFIG_PACKAGE_hotplug2=y
CONFIG_PACKAGE_libc=y
CONFIG_PACKAGE_libgcc=y
CONFIG_PACKAGE_mtd=y
CONFIG_PACKAGE_nvram=y
CONFIG_PACKAGE_opkg=y
CONFIG_PACKAGE_udevtrigger=y

#
# Network
#

#
# Telephony
#

#
# Libraries
#

#
# Filesystem
#

#
# SSL
#

#
# IPv6
#

#
# Kernel modules
#

#
# Block Devices
#
CONFIG_PACKAGE_kmod-scsi-core=y

#
# Cryptographic API modules
#

#
# Filesystems
#
CONFIG_PACKAGE_kmod-fs-ext2=y
CONFIG_PACKAGE_kmod-fs-mbcache=y
CONFIG_PACKAGE_kmod-nls-base=y

#
# FireWire support
#

#
# Hardware Monitoring Support
#

#
# I2C support
#

#
# Netfilter Extensions
#

#
# Network Devices
#

#
# Network Support
#

#
# OCF Configuration
#

#
# Other modules
#

#
# SPI Support
#

#
# Sound Support
#

#
# USB Support
#
CONFIG_PACKAGE_kmod-usb-core=y
CONFIG_PACKAGE_kmod-usb-storage=y
CONFIG_PACKAGE_kmod-usb2=y

#
# Video Support
#

#
# Voice over IP
#

#
# W1 support
#

#
# Wireless Drivers
#

#
# Xen paravirtualized guest support
#

#
# Boot Loaders
#

#
# Utilities
#

#
# Boot Loaders
#

#
# Filesystem
#

#
# Terminal
#

#
# disc
#

#
# Languages
#

#
# Lua
#</code></pre></div><p>This results in a 1708032 byte .trx image. Before I continue, I edit the fstab file in <strong>backfire/build_dir/target-mipsel_uClibc-0.9.30.1/root-brcm47xx/etc/config/</strong> to reflect my chosen partition layout in my USB stick (two ext2 primary partions) from this <br /></p><div class="codebox"><pre><code>config global automount
    option from_fstab 1
    option anon_mount 1
    
config global autoswap
    option from_fstab 1
    option anon_swap 0
    
config mount
    option target    /home
    option device    /dev/sda1
    option fstype    ext3
    option options    rw,sync
    option enabled    0
    option enabled_fsck 0

config swap
    option device    /dev/sda2
    option enabled    0</code></pre></div><p>to this<br /></p><div class="codebox"><pre><code>config global automount
    option from_fstab 1
    option anon_mount 1
    
config global autoswap
    option from_fstab 1
    option anon_swap 0
    
config mount
    option target    /
    option device    /dev/sda1
    option fstype    ext2
    option options    rw,sync
    option enabled    1
    option enabled_fsck 0
    
config mount
    option target    /home
    option device    /dev/sda2
    option fstype    ext2
    option options    rw,sync
    option enabled    1
    option enabled_fsck 0

config swap
    option device    /dev/sda3
    option enabled    0</code></pre></div><p>I then issue a &quot;make target/install&quot; to reflect the changed root tree and pack it into a new .trx image. (Which curiously enough has the same size, although I kept the olf fstab as fstab.orig just to check that the image actually is the new one).</p><p>After flashing this image I can capture this boot log:<br /></p><div class="codebox"><pre><code>Done. 1708032 bytes read
Download of 0x1a1000 bytes completed
Write kernel and filesystem binary to FLASH (0xbfc40000)
flash device &#039;flash1.trx&#039;
Programming...
done. 1708032 bytes written


CFE version 1.0.37 for BCM947XX (32bit,SP,LE)
Build Date: ?| 12?? 29 20:36:58 CST 2005 (root@localhost.localdomain)
Copyright (C) 2000,2001,2002,2003 Broadcom Corporation.

Initializing Arena
Initializing Devices.
et0: Broadcom BCM47xx 10/100 Mbps Ethernet Controller 3.90.23.0
rndis0: Broadcom USB RNDIS Network Adapter (P-t-P)
CPU type 0x29006: 264MHz
Total memory: 67108864 KBytes

Total memory used by CFE:  0x80800000 - 0x8089BA00 (637440)
Initialized Data:          0x80831B70 - 0x80834250 (9952)
BSS Area:                  0x80834250 - 0x80835A00 (6064)
Local Heap:                0x80835A00 - 0x80899A00 (409600)
Stack Area:                0x80899A00 - 0x8089BA00 (8192)
Text (code) segment:       0x80800000 - 0x80831B70 (203632)
Boot area (physical):      0x0089C000 - 0x008DC000
Relocation Factor:         I:00000000 - D:00000000

Device eth0:  hwaddr xx-xx-xx-xx-xx-xx, ipaddr 192.168.1.1, mask 255.255.255.0
        gateway not set, nameserver not set
Null Rescue Flag.
Null Restore Flag.
set pivot_wait = 0
Loader:raw Filesys:raw Dev:flash0.os File: Options:(null)
Loading: .. 4092 bytes read
Entry at 0x80001000
Closing network.
Starting program at 0x80001000
Linux version 2.6.32.27 (claus@hex.site) (gcc version 4.3.3 (GCC) ) #31 Thu Sep 8 21:18:58 EDT 2011
CPU revision is: 00029006 (Broadcom BCM3302)
ssb: chipcommon status is 0x0
ssb: Initializing MIPS core...
ssb: set_irq: core 0x0806, irq 4 =&gt; 4
ssb: set_irq: core 0x0806, irq 5 =&gt; 5
ssb: set_irq: core 0x0808, irq 6 =&gt; 2
ssb: set_irq: core 0x0804, irq 2 =&gt; 6
ssb: after irq reconfiguration
ssb: core 0x0800, irq : 2(S)  3* 4  5  6  D  I 
ssb: core 0x0806, irq : 2(S)  3  4* 5  6  D  I 
ssb: core 0x0806, irq : 2(S)  3  4  5* 6  D  I 
ssb: core 0x0808, irq : 2(S)* 3  4  5  6  D  I 
ssb: core 0x0804, irq : 2(S)  3  4  5  6* D  I 
ssb: core 0x0816, irq : 2(S)* 3  4  5  6  D  I 
ssb: core 0x0807, irq : 2(S)* 3  4  5  6  D  I 
ssb: core 0x080b, irq : 2(S)* 3  4  5  6  D  I 
ssb: core 0x080f, irq : 2(S)  3  4  5  6  D  I*
ssb: Sonics Silicon Backplane found at address 0x18000000
Serial init done.
Determined physical RAM map:
 memory: 04000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00004000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00004000
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,jffs2 noinitrd console=ttyS0,115200
PID hash table entries: 256 (order: -2, 1024 bytes)
Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
Primary instruction cache 16kB, VIPT, 2-way, linesize 16 bytes.
Primary data cache 16kB, 2-way, VIPT, cache aliases, linesize 16 bytes
Memory: 62056k/65536k available (2203k kernel code, 3408k reserved, 345k data, 136k init, 0k highmem)
Hierarchical RCU implementation.
NR_IRQS:128
console [ttyS0] enabled
Calibrating delay loop... 263.16 BogoMIPS (lpj=526336)
Mount-cache hash table entries: 512
NET: Registered protocol family 16
bio: create slab &lt;bio-0&gt; at 0
Switching to clocksource MIPS
ssb: PCIcore in host mode found
PCI: Fixing up bridge 0000:00:00.0
PCI: Fixing up device 0000:00:00.0
PCI: Fixing latency timer of device 0000:00:00.0 to 168
pci 0000:00:03.0: PME# supported from D0 D1 D2 D3hot
pci 0000:00:03.0: PME# disabled
pci 0000:00:03.1: PME# supported from D0 D1 D2 D3hot
pci 0000:00:03.1: PME# disabled
pci 0000:00:03.2: PME# supported from D0 D1 D2 D3hot
pci 0000:00:03.2: PME# disabled
PCI: Enabling device 0000:00:01.0 (0000 -&gt; 0002)
PCI: Fixing up device 0000:00:01.0
ssb: chipcommon status is 0x0
ssb: SPROM offset is 0x1000
ssb: Sonics Silicon Backplane found on PCI device 0000:00:01.0
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 2048 (order: 2, 16384 bytes)
TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
TCP: Hash tables configured (established 2048 bind 2048)
TCP reno registered
NET: Registered protocol family 1
squashfs: version 4.0 (2009/01/31) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) (SUMMARY)  © 2001-2006 Red Hat, Inc.
msgmni has been set to 121
io scheduler noop registered
io scheduler deadline registered (default)
Serial: 8250/16550 driver, 2 ports, IRQ sharing enabled
serial8250: ttyS0 at MMIO 0xb8000300 (irq = 3) is a 16550A
serial8250: ttyS1 at MMIO 0xb8000400 (irq = 3) is a 16550A
serial8250.0: ttyS0 at MMIO 0xb8000300 (irq = 3) is a 16550A
serial8250.0: ttyS1 at MMIO 0xb8000400 (irq = 3) is a 16550A
flash init: 0x1c000000 0x02000000
Physically mapped flash: Found 1 x16 devices at 0x0 in 16-bit bank
 CFI mfr 0x000000c2
 CFI id  0x000022c4
 Amd/Fujitsu Extended Query Table at 0x0040
  Amd/Fujitsu Extended Query version 1.0.
Physically mapped flash: JEDEC Device ID is 0x22C4. Assuming broken CFI table.
Physically mapped flash: Swapping erase regions for broken CFI table.
number of CFI chips: 1
cfi_cmdset_0002: Disabling erase-suspend-program due to code brokenness.
Flash device: 0x200000 at 0x1fc00000
bootloader size: 262144
Updating TRX offsets and length:
old trx = [0x0000001c, 0x00000974, 0x000d0c00], len=0x001a1000 crc32=0x41fc22be
new trx = [0x0000001c, 0x00000974, 0x000d0c00], len=0x000d0c00 crc32=0x8f4acff6
Done
Creating 4 MTD partitions on &quot;Physically mapped flash&quot;:
0x000000000000-0x000000040000 : &quot;cfe&quot;
0x000000040000-0x0000001f0000 : &quot;linux&quot;
0x000000110c00-0x0000001f0000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
mtd: partition &quot;rootfs&quot; set to be root filesystem
mtd: partition &quot;rootfs_data&quot; created automatically, ofs=1C0000, len=30000 
0x0000001c0000-0x0000001f0000 : &quot;rootfs_data&quot;
0x0000001f0000-0x000000200000 : &quot;nvram&quot;
b44.c:v2.0
eth0: Broadcom 44xx/47xx 10/100BaseT Ethernet 00:18:f3:93:a6:24
b44: eth1: PHY Reset would not complete.
eth1: Broadcom 44xx/47xx 10/100BaseT Ethernet 40:10:18:00:00:2c
BCM47xx Watchdog Timer enabled (30 seconds, nowayout)
TCP westwood registered
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
Freeing unused kernel memory: 136k freed
Please be patient, while OpenWrt loads ...
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
- preinit -
Press the [f] key and hit [enter] to enter failsafe mode
- regular preinit -
jffs2 not ready yet; using ramdisk
mini_fo: using base directory: /
mini_fo: using storage directory: /tmp/root
- init -
b44: eth0: powering down PHY

Please press Enter to activate this console. SCSI subsystem initialized
usbcore: registered new interface driver usbfs
usbcore: registered new interface driver hub
usbcore: registered new device driver usb
ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
PCI: Enabling device 0000:00:03.2 (0000 -&gt; 0002)
PCI: Fixing up device 0000:00:03.2
ehci_hcd 0000:00:03.2: EHCI Host Controller
ehci_hcd 0000:00:03.2: new USB bus registered, assigned bus number 1
ehci_hcd 0000:00:03.2: Enabling legacy PCI PM
ehci_hcd 0000:00:03.2: irq 6, io mem 0x40013000
ehci_hcd 0000:00:03.2: USB 2.0 started, EHCI 1.00
usb usb1: configuration #1 chosen from 1 choice
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 4 ports detected
Initializing USB Mass Storage driver...
usbcore: registered new interface driver usb-storage
USB Mass Storage support registered.
usb 1-1: new high speed USB device using ehci_hcd and address 2
usb 1-1: configuration #1 chosen from 1 choice
scsi0 : SCSI emulation for USB Mass Storage devices
jffs2: Too few erase blocks (3)
scsi 0:0:0:0: Direct-Access     hama     Piko Business2.0 1100 PQ: 0 ANSI: 0 CCS
sd 0:0:0:0: [sda] 3963904 512-byte logical blocks: (2.02 GB/1.88 GiB)
sd 0:0:0:0: [sda] Write Protect is off
sd 0:0:0:0: [sda] Assuming drive cache: write through
sd 0:0:0:0: [sda] Assuming drive cache: write through
 sda: sda1 sda2
sd 0:0:0:0: [sda] Assuming drive cache: write through
sd 0:0:0:0: [sda] Attached SCSI removable disk
EXT2-fs warning: mounting unchecked fs, running e2fsck is recommended
EXT2-fs warning: mounting unchecked fs, running e2fsck is recommended



BusyBox v1.15.3 (2011-09-06 20:14:10 EDT) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 Backfire (10.03.1-RC6, r28196) --------------------
  * 1/3 shot Kahlua    In a shot glass, layer Kahlua 
  * 1/3 shot Bailey&#039;s  on the bottom, then Bailey&#039;s, 
  * 1/3 shot Vodka     then Vodka.
 ---------------------------------------------------
root@(none):/# mount
rootfs on / type rootfs (rw)
/dev/root on /rom type squashfs (ro,relatime)
none on /proc type proc (rw,relatime)
sysfs on /sys type sysfs (rw,relatime)
tmpfs on /tmp type tmpfs (rw,nosuid,nodev,relatime)
tmpfs on /dev type tmpfs (rw,relatime,size=512k,mode=755)
devpts on /dev/pts type devpts (rw,relatime,mode=600)
root on /tmp/root type tmpfs (rw,relatime,mode=755)
mini_fo:/tmp/root on / type mini_fo (rw,relatime)
debugfs on /sys/kernel/debug type debugfs (rw,relatime)
none on /proc/bus/usb type usbfs (rw,relatime)
/dev/sda1 on /mnt/sda1 type ext2 (rw,relatime,errors=continue)
/dev/sda2 on /mnt/sda2 type ext2 (rw,relatime,errors=continue)
root@(none):/# df -h
Filesystem                Size      Used Available Use% Mounted on
/dev/root               768.0K    768.0K         0 100% /rom
tmpfs                    30.4M     12.0K     30.4M   0% /tmp
tmpfs                   512.0K         0    512.0K   0% /dev
root                     30.4M      4.0K     30.4M   0% /tmp/root
mini_fo:/tmp/root       768.0K    768.0K         0 100% /
/dev/sda1               492.9M      4.7M    462.8M   1% /mnt/sda1
/dev/sda2                 1.4G      4.7M      1.3G   0% /mnt/sda2
root@(none):/# opkg list-installed
base-files - 43.27-r28196
block-hotplug - 0.1.0-2.1
block-mount - 0.1.0-2.1
busybox - 1.15.3-2
hotplug2 - 1.0-beta-3
kernel - 2.6.32.27-1
kmod-fs-ext2 - 2.6.32.27-1
kmod-nls-base - 2.6.32.27-1
kmod-scsi-core - 2.6.32.27-1
kmod-usb-core - 2.6.32.27-1
kmod-usb-storage - 2.6.32.27-1
kmod-usb2 - 2.6.32.27-1
libc - 0.9.30.1-43.27
libgcc - 4.3.3+cs-43.27
mtd - 13
nvram - 7
opkg - 576-1
udevtrigger - 106-1
root@(none):/# uname -r
2.6.32.27</code></pre></div><p><strong><span class="bbu">Result:</span></strong></p><p>Well, none of them do what I/we want (extroot on our nice box), as case A has no block devices and case B doesn&#039;t create a writable root on the (ext-)root. Here is a diff of the boot up messages:<br /></p><div class="codebox"><pre><code>--- 7 - no network, no nothing/bootlog    2011-09-08 21:34:53.872898124 -0400
+++ 8 - 7 + USB2 (ehci, storage) &amp; ext2 &amp; scsi/bootlog    2011-09-08 21:28:28.644898124 -0400
@@ -1,9 +1,9 @@
-Done. 1511424 bytes read
-Download of 0x171000 bytes completed
+Done. 1708032 bytes read
+Download of 0x1a1000 bytes completed
 Write kernel and filesystem binary to FLASH (0xbfc40000)
 flash device &#039;flash1.trx&#039;
 Programming...
-done. 1511424 bytes written
+done. 1708032 bytes written
 
 
 CFE version 1.0.37 for BCM947XX (32bit,SP,LE)
@@ -36,7 +36,7 @@
 Entry at 0x80001000
 Closing network.
 Starting program at 0x80001000
-Linux version 2.6.32.27 (claus@hex.site) (gcc version 4.3.3 (GCC) ) #28 Thu Sep 8 20:39:07 EDT 2011
+Linux version 2.6.32.27 (claus@hex.site) (gcc version 4.3.3 (GCC) ) #31 Thu Sep 8 21:18:58 EDT 2011
 CPU revision is: 00029006 (Broadcom BCM3302)
 ssb: chipcommon status is 0x0
 ssb: Initializing MIPS core...
@@ -126,8 +126,8 @@
 Flash device: 0x200000 at 0x1fc00000
 bootloader size: 262144
 Updating TRX offsets and length:
-old trx = [0x0000001c, 0x00000974, 0x000d0c00], len=0x00171000 crc32=0x9b506ef8
-new trx = [0x0000001c, 0x00000974, 0x000d0c00], len=0x000d0c00 crc32=0x142bab0e
+old trx = [0x0000001c, 0x00000974, 0x000d0c00], len=0x001a1000 crc32=0x41fc22be
+new trx = [0x0000001c, 0x00000974, 0x000d0c00], len=0x000d0c00 crc32=0x8f4acff6
 Done
 Creating 4 MTD partitions on &quot;Physically mapped flash&quot;:
 0x000000000000-0x000000040000 : &quot;cfe&quot;
@@ -135,8 +135,8 @@
 0x000000110c00-0x0000001f0000 : &quot;rootfs&quot;
 mtd: partition &quot;rootfs&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
 mtd: partition &quot;rootfs&quot; set to be root filesystem
-mtd: partition &quot;rootfs_data&quot; created automatically, ofs=190000, len=60000 
-0x000000190000-0x0000001f0000 : &quot;rootfs_data&quot;
+mtd: partition &quot;rootfs_data&quot; created automatically, ofs=1C0000, len=30000 
+0x0000001c0000-0x0000001f0000 : &quot;rootfs_data&quot;
 0x0000001f0000-0x000000200000 : &quot;nvram&quot;
 b44.c:v2.0
 eth0: Broadcom 44xx/47xx 10/100BaseT Ethernet 00:18:f3:93:a6:24
@@ -161,11 +161,38 @@
 - init -
 b44: eth0: powering down PHY
 
-Please press Enter to activate this console. jffs2_scan_eraseblock(): End of filesystem marker found at 0x0
-jffs2_build_filesystem(): unlocking the mtd device... done.
-jffs2_build_filesystem(): erasing all blocks after the end marker... done.
-mini_fo: using base directory: /
-mini_fo: using storage directory: /overlay
+Please press Enter to activate this console. SCSI subsystem initialized
+usbcore: registered new interface driver usbfs
+usbcore: registered new interface driver hub
+usbcore: registered new device driver usb
+ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
+PCI: Enabling device 0000:00:03.2 (0000 -&gt; 0002)
+PCI: Fixing up device 0000:00:03.2
+ehci_hcd 0000:00:03.2: EHCI Host Controller
+ehci_hcd 0000:00:03.2: new USB bus registered, assigned bus number 1
+ehci_hcd 0000:00:03.2: Enabling legacy PCI PM
+ehci_hcd 0000:00:03.2: irq 6, io mem 0x40013000
+ehci_hcd 0000:00:03.2: USB 2.0 started, EHCI 1.00
+usb usb1: configuration #1 chosen from 1 choice
+hub 1-0:1.0: USB hub found
+hub 1-0:1.0: 4 ports detected
+Initializing USB Mass Storage driver...
+usbcore: registered new interface driver usb-storage
+USB Mass Storage support registered.
+usb 1-1: new high speed USB device using ehci_hcd and address 2
+usb 1-1: configuration #1 chosen from 1 choice
+scsi0 : SCSI emulation for USB Mass Storage devices
+jffs2: Too few erase blocks (3)
+scsi 0:0:0:0: Direct-Access     hama     Piko Business2.0 1100 PQ: 0 ANSI: 0 CCS
+sd 0:0:0:0: [sda] 3963904 512-byte logical blocks: (2.02 GB/1.88 GiB)
+sd 0:0:0:0: [sda] Write Protect is off
+sd 0:0:0:0: [sda] Assuming drive cache: write through
+sd 0:0:0:0: [sda] Assuming drive cache: write through
+ sda: sda1 sda2
+sd 0:0:0:0: [sda] Assuming drive cache: write through
+sd 0:0:0:0: [sda] Attached SCSI removable disk
+EXT2-fs warning: mounting unchecked fs, running e2fsck is recommended
+EXT2-fs warning: mounting unchecked fs, running e2fsck is recommended
 
 
 
@@ -191,25 +218,33 @@
 tmpfs on /dev type tmpfs (rw,relatime,size=512k,mode=755)
 devpts on /dev/pts type devpts (rw,relatime,mode=600)
 root on /tmp/root type tmpfs (rw,relatime,mode=755)
-mini_fo:/tmp/root on /tmp/root type mini_fo (rw,relatime)
+mini_fo:/tmp/root on / type mini_fo (rw,relatime)
 debugfs on /sys/kernel/debug type debugfs (rw,relatime)
-/dev/mtdblock3 on /overlay type jffs2 (rw,relatime)
-mini_fo:/overlay on / type mini_fo (rw,relatime)
+none on /proc/bus/usb type usbfs (rw,relatime)
+/dev/sda1 on /mnt/sda1 type ext2 (rw,relatime,errors=continue)
+/dev/sda2 on /mnt/sda2 type ext2 (rw,relatime,errors=continue)
 root@(none):/# df -h
 Filesystem                Size      Used Available Use% Mounted on
-/dev/root               512.0K    512.0K         0 100% /rom
+/dev/root               768.0K    768.0K         0 100% /rom
 tmpfs                    30.4M     12.0K     30.4M   0% /tmp
 tmpfs                   512.0K         0    512.0K   0% /dev
-root                    512.0K    512.0K         0 100% /tmp/root
-mini_fo:/tmp/root       512.0K    512.0K         0 100% /tmp/root
-/dev/mtdblock3          384.0K    196.0K    188.0K  51% /overlay
-mini_fo:/overlay        512.0K    512.0K         0 100% /
+root                     30.4M      4.0K     30.4M   0% /tmp/root
+mini_fo:/tmp/root       768.0K    768.0K         0 100% /
+/dev/sda1               492.9M      4.7M    462.8M   1% /mnt/sda1
+/dev/sda2                 1.4G      4.7M      1.3G   0% /mnt/sda2
 root@(none):/# opkg list-installed
 base-files - 43.27-r28196
 block-hotplug - 0.1.0-2.1
 block-mount - 0.1.0-2.1
 busybox - 1.15.3-2
 hotplug2 - 1.0-beta-3
+kernel - 2.6.32.27-1
+kmod-fs-ext2 - 2.6.32.27-1
+kmod-nls-base - 2.6.32.27-1
+kmod-scsi-core - 2.6.32.27-1
+kmod-usb-core - 2.6.32.27-1
+kmod-usb-storage - 2.6.32.27-1
+kmod-usb2 - 2.6.32.27-1
 libc - 0.9.30.1-43.27
 libgcc - 4.3.3+cs-43.27
 mtd - 13
@@ -218,3 +253,4 @@
 udevtrigger - 106-1
 root@(none):/# uname -r
 2.6.32.27
+</code></pre></div><p>My current working assumption is-as previously stated-that the the kernel marks something ro as it apparently runs out of space in the flash after it got unpacked to the ram disk. At that stage I assume the kernel is trying to generate some jffs2 partition somewhere. And, as that fails and hence is getting marked ro (though it doesn&#039;t seem to show that), that trickles down until the extroot is mounted with tons of space-as ro.</p><p>But all that is just AFAIK and I am most certainly wrong.</p><p>So please, if you have <strong>any</strong> hint or idea (or might actually know the solution), PLEASE let me know. Thanks! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p143256">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">Gregoire</div>
					<div class="post-datetime">
						9 Sep 2011, 23:18					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for your post :-)<br />Did you by any chance try something like this diff from your first case (svn&#039;s backfire) :<br /></p><div class="codebox"><pre><code>diff -u .config .config.hcc23.noblockdevice |grep -v &quot;is not set&quot;|grep &quot;^-&quot;|grep -v &quot;#&quot;|grep -v &quot;^-$&quot;
--- .config     2011-09-09 22:11:24.950222304 +0200
-CONFIG_FEATURE_drawing-backend_DirectFB=y
-CONFIG_PACKAGE_block-extroot=y
-CONFIG_PACKAGE_libpthread=y
-CONFIG_PACKAGE_librt=y
-CONFIG_PACKAGE_luci-lib-core_source=y
-CONFIG_PACKAGE_luci-lib-nixio_notls=y
-CONFIG_PACKAGE_kmod-ide-core=y
-CONFIG_PACKAGE_kmod-ide-aec62xx=y
-CONFIG_PACKAGE_kmod-fs-ext3=y
-CONFIG_PACKAGE_kmod-fs-mbcache=y
-CONFIG_PACKAGE_libblkid=y
-CONFIG_PACKAGE_libext2fs=y
-CONFIG_PACKAGE_libuuid=y
-CONFIG_PACKAGE_e2fsprogs=y</code></pre></div><p>I would like to try something like this but if you already did and you say it don&#039;t work I won&#039;t try...<br />At first I&#039;d like to try without the &quot;3. (Optional) Preconfigure the rootfs&quot; from <a href="http://wiki.openwrt.org/doc/howtobuild/extroot.howtobuild">http://wiki.openwrt.org/doc/howtobuild/ … howtobuild</a><br />What I don&#039;t understand with something like this is how to access the box after it boot up as no network as been set ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p143263">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">Gregoire</div>
					<div class="post-datetime">
						10 Sep 2011, 00:19					</div>
				</div>
				<div class="post-content content">
					<p>In case it could help I put <a href="http://www.gycham.vd.ch/greg/backfire/openwrt-brcm47xx-squashfs.config">http://www.gycham.vd.ch/greg/backfire/o … hfs.config</a> and the <a href="http://www.gycham.vd.ch/greg/backfire/openwrt-brcm47xx-squashfs.trx">http://www.gycham.vd.ch/greg/backfire/o … uashfs.trx</a> online (not tested because it&#039;s 1839104 byte and I don&#039;t know if that not too much).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p143372">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">hcc23</div>
					<div class="post-datetime">
						11 Sep 2011, 21:48					</div>
				</div>
				<div class="post-content content">
					<p>@ Gregoire: I am fairly certain that your image will be to large (though I haven&#039;t tested it). If you scroll up you can see my post where I suppose that the max upper limit is actually <strong>1802240 byte</strong>. As to how to access the router: I am using a serial console (also, scroll up to read on the pinout, etc.)</p><p>It seems that there are two size limits. One for actually fitting stuff into the flash and a second for getting that image to work. The later having-AFAIK-to do with all this erase block jffs2 business... (Which I do not yet fully comprehend...)</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=25699&amp;p=2.html">2</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>