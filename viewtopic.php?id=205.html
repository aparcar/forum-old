<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> compiling openwrt</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 7 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p965">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">marcosmas</div>
					<div class="post-datetime">
						3 Jul 2004, 00:30					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I&#039;m trying to compile an openwrt firmware with the buildroots that are specified in the openwrt home page, but without luck.<br />I have already downloaded the linksys sources version 2.02.7 and put them into the sources/dl directory. Also I modified the /make/openwrt.mk to indicate that version of linksys tarball.<br />When I do &quot;make&quot; the patches can&#039;t be applied.<br />-openwrt-wrt54g-router.patch fails in the src/router/nvram/nvram_linux.c file.<br />-openwrt-wrt54g-netfilter.patch fails in the src/linux/linux.stock/net/ipv6/mcast.c file.</p><p>I didn&#039;t continue trying to solve the problems because I imagine there are a lots of errors. So I ask for help. I have the wrt54g v1.1 and the linksys sources wrt54g.2.02.7.tgz.<br />If somebody can help me I will thanks a lot.</p><p>&nbsp; Marcos</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p973">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">marcosmas</div>
					<div class="post-datetime">
						3 Jul 2004, 23:07					</div>
				</div>
				<div class="post-content content">
					<p>Does anybody have a solution to my problem?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p974">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">marcosmas</div>
					<div class="post-datetime">
						3 Jul 2004, 23:07					</div>
				</div>
				<div class="post-content content">
					<p>Does anybody have a solution to my problem?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p975">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mbm</div>
					<div class="post-datetime">
						4 Jul 2004, 00:40					</div>
				</div>
				<div class="post-content content">
					<p>Somebody&#039;s impatient.</p><p><a href="http://openwrt.ksilebo.net/cgi-bin/viewcvs.cgi/buildroot/buildroot.tar.gz">http://openwrt.ksilebo.net/cgi-bin/view â€¦ oot.tar.gz</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1134">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">wutzkachel</div>
					<div class="post-datetime">
						13 Jul 2004, 13:41					</div>
				</div>
				<div class="post-content content">
					<p>Hello!</p><p>I thing I have the same problem. I use the version<br />from cvs.<br />I got the following output:</p><p>patching file release/src/router/nvram/nvram_linux.c<br />Hunk #1 FAILED at 27.<br />Hunk #2 FAILED at 184.<br />Hunk #3 FAILED at 216.<br />Hunk #4 succeeded at 184 with fuzz 2 (offset -105 lines).<br />Hunk #5 FAILED at 231.<br />4 out of 5 hunks FAILED -- saving rejects to file release/src/router/nvram/nvram_linux.c.rej<br />Patch failed!&nbsp; Please fix /home/michael/Software/Linksys/openwrt/buildroot/sources/openwrt-wrt54g-router.patch!<br />make: *** [/home/michael/Software/Linksys/openwrt/buildroot/build_mipsel/WRT54G/.prepared] Error 1</p><p>Could anybody help me?</p><p>Thanks in advance</p><p>cheers</p><p>Michael</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1136">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">marcosmas</div>
					<div class="post-datetime">
						13 Jul 2004, 20:03					</div>
				</div>
				<div class="post-content content">
					<p>I think that the patches were made for the Linksys source wrt54gs.2.07.1.tgz and I have the ver. wrt54gv2_2.00.8.tgz. That&#039;s why I got errors in the patching process. I solved this probles patching &quot;by hand&quot; the files that that the patch specified. In fact I just only apllied the openwrt-linux-patch to make the openwrt partition work. So I made my own firmware based in openwrt to have a read-write partition. That was what I looked for.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1145">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">wutzkachel</div>
					<div class="post-datetime">
						14 Jul 2004, 20:27					</div>
				</div>
				<div class="post-content content">
					<p>Hi <br />Are the patches only made for wrt54gs?<br />How can I change this. I red on the homepage:</p><p>The openwrt-g-code.bin is for the WRT54G, openwrt-gs-code.bin is for the WRT54GS (speedbooster).</p><p>It seems to be that in the &quot;Getting started description&quot;<br />the installation procedure is not completely described.<br />I changed some values in make/openwrt.mk:</p><p>WRT54G_SOURCE=wrt54g.2.02.7.tgz<br />WRT54G_SITE=http://www.linksys.com/support/opensourcecode/wrt54gv2/2.02.7<br />WRT54G_DIR=$(BUILD_DIR)/WRT54G<br />#WRT54G_DIR=$(BUILD_DIR)/WRT54GS</p><p>Maybe I have change other configuration files to get openwrt<br />up and running. I already try to patch the files by hand, but<br />after that other patches went wrong.</p><p>Please help me !</p><br /><p>thanks</p><p>Michael</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2106">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">danversj</div>
					<div class="post-datetime">
						15 Sep 2004, 13:32					</div>
				</div>
				<div class="post-content content">
					<p>I get stuck here:<br /></p><div class="codebox"><pre><code>Applying /usr/src/openwrt/buildroot/sources/uClibc-sigaction.patch using plaintext:
patching file libc/sysdeps/linux/mips/Makefile
Hunk #1 FAILED at 28.
1 out of 1 hunk FAILED -- saving rejects to file libc/sysdeps/linux/mips/Makefile.rej
Patch failed!  Please fix /usr/src/openwrt/buildroot/sources/uClibc-sigaction.patch!
make: *** [/usr/src/openwrt/buildroot/build_mipsel/uClibc/.unpacked] Error 1</code></pre></div><p>This is after I got this error message:<br /></p><div class="codebox"><pre><code>wget --passive-ftp -P /usr/src/openwrt/buildroot/sources/dl http://www.uclibc.org/downloads/snapshots/uClibc-20040807.tar.bz2
--20:16:47--  http://www.uclibc.org/downloads/snapshots/uClibc-20040807.tar.bz2
           =&gt; `/usr/src/openwrt/buildroot/sources/dl/uClibc-20040807.tar.bz2&#039;
Resolving www.uclibc.org... 166.70.99.138, 166.70.154.59
Connecting to www.uclibc.org[166.70.99.138]:80... connected.
HTTP request sent, awaiting response... 404 Not Found
20:16:48 ERROR 404: Not Found.

make: *** [/usr/src/openwrt/buildroot/sources/dl/uClibc-20040807.tar.bz2] Error 1</code></pre></div><p>I edited buildroot/make/uclibc.mk to get it&#039;s snapshot like so:<br /></p><div class="codebox"><pre><code>#ifneq ($(strip $(USE_UCLIBC_SNAPSHOT)),)
# Be aware that this changes daily....
#UCLIBC_DIR:=$(BUILD_DIR)/uClibc
#UCLIBC_SOURCE:=uClibc-$(strip $(USE_UCLIBC_SNAPSHOT)).tar.bz2
#UCLIBC_SITE:=http://www.uclibc.org/downloads/snapshots
#else
#UCLIBC_DIR:=$(BUILD_DIR)/uClibc-0.9.26
#UCLIBC_SOURCE:=uClibc-0.9.26.tar.bz2
#UCLIBC_SITE:=http://www.uclibc.org/downloads
#endif
UCLIBC_DIR:=$(BUILD_DIR)/uClibc
UCLIBC_SOURCE:=uClibc-snapshot.tar.bz2
UCLIBC_SITE:=http://www.uclibc.org/downloads/snapshots</code></pre></div><p>On the whole I&#039;m finding the make procedure for compiling OpenWRT VERY VERY VERY frustrating at this point.&nbsp; It seems that when I fix one thing, another problem pops up - is there someplace I can look to find out a complete list of which tarballs I should download and where I should save or untar them to?&nbsp; I&#039;m quite sick and tired of having to guess at fixes for compilation errors.&nbsp; I tried using CVS and that doesn&#039;t seem to work either.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2107">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">chimpanzee</div>
					<div class="post-datetime">
						15 Sep 2004, 13:46					</div>
				</div>
				<div class="post-content content">
					<p>tradeoff we get to have the newest packages :-(</p><p>Because it uses links from other packages and many are also &#039;latest&#039; experimental ones, it will continue to break like this.</p><p>Hopefully, it will stablize to &#039;released&#039; version of packages and that upstreams don&#039;t remove them at will.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2109">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">sam</div>
					<div class="post-datetime">
						15 Sep 2004, 14:07					</div>
				</div>
				<div class="post-content content">
					<p>to compile cvs</p><p>1. update the main Makefile (the one at the root level of the buildroot) so that SNAPSHOT is defined as something recent.&nbsp; i just used 091304 and it compiled with no problem.</p><p>2. comment out this line from make/uclibc.mk</p><div class="codebox"><pre><code>$(SOURCE_DIR)/patch-kernel.sh $(UCLIBC_DIR) $(SOURCE_DIR) uClibc-sigaction.patch</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2157">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">danversj</div>
					<div class="post-datetime">
						19 Sep 2004, 13:42					</div>
				</div>
				<div class="post-content content">
					<p>Thank you very much Sam, I did that and it worked like a treat.&nbsp; Now to get on with some real dev work. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>