<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Build for WNDR3700/WNDR3800</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 9 Jul 2013 and 6 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 45 of 63</div><nav><ul><li><a href="viewtopic.php%3Fid=28392&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=43.html">43</a></li><li><a href="viewtopic.php%3Fid=28392&amp;p=44.html">44</a></li><li class="pagination-current"><span>45</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=46.html">46</a></li><li><a href="viewtopic.php%3Fid=28392&amp;p=47.html">47</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=63.html">63</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p249980">
				<div class="post-metadata">
					<div class="post-num">Post #1101</div>
					<div class="post-author">Romulus</div>
					<div class="post-datetime">
						10 Oct 2014, 13:06					</div>
				</div>
				<div class="post-content content">
					<p>hnyman, thank you for building these great fw&#039;s.<br />I was wondering if your last BB build is the official BB build? <br />Will you still be buidling BB updates?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249982">
				<div class="post-metadata">
					<div class="post-num">Post #1102</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						10 Oct 2014, 13:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Romulus wrote:</cite><blockquote><p>I was wondering if your last BB build is the official BB build? <br />Will you still be buidling BB updates?</p></blockquote></div><p>It is almost the official build. I think it is one odhcp6c fix ahead the official build.<br />I will be building BB every now and then, maybe once per 1-2 weeks, a bit depending on changes made. So far there has not been &quot;interesting changes&quot;, yet. Just some fixes to odhcp6c and fixes to not-included packages:<br /><a href="http://git.openwrt.org/?p=14.07/openwrt.git;a=shortlog">http://git.openwrt.org/?p=14.07/openwrt.git;a=shortlog</a><br /><a href="https://github.com/openwrt/packages/commits/for-14.07">https://github.com/openwrt/packages/commits/for-14.07</a></p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 10 Oct 2014, 13:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250004">
				<div class="post-metadata">
					<div class="post-num">Post #1103</div>
					<div class="post-author">Beaker1024</div>
					<div class="post-datetime">
						10 Oct 2014, 16:19					</div>
				</div>
				<div class="post-content content">
					<p>hnyman - I&#039;m intrigued with the new Qos add-in that you are including in the Trunk build.&nbsp; I&#039;ve only ever gone with the stable release so I&#039;m&nbsp; using BB right now.</p><p>I looked at the Wiki for OpenWRT &quot;Choosing an OpenWRT Version&quot; and it mentions the trunk builds don&#039;t include the Luci GUI interface.</p><p>Do you compile your trunk builds with Luci?&nbsp; Basically wondering if I can easily test CC w/Qos or not.&nbsp; Also do you think you will do a BB build with the SQM Qos in it?&nbsp; Or can it simply be downloaded as a package and installed like other OpenWRT apps after flashing the firmware?</p><p>Thank you for your assistance and time in building us updated OpenWRT firmware!</p>											<p class="post-edited">(Last edited by <strong>Beaker1024</strong> on 10 Oct 2014, 16:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250011">
				<div class="post-metadata">
					<div class="post-num">Post #1104</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						10 Oct 2014, 17:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Beaker1024 wrote:</cite><blockquote><p>Do you compile your trunk builds with Luci?&nbsp; Basically wondering if I can easily test CC w/Qos or not.&nbsp; Also do you think you will do a BB build with the SQM Qos in it?</p></blockquote></div><p>Luci is included, as is indicated in the message #1 of this thread.<br />I will probably do a BB build with SQM QoS built in, at some point. Not quite sure yet, when.</p><p>EDIT 12 Oct 14: <br />I added SQM to the BB build.</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 12 Oct 2014, 20:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250165">
				<div class="post-metadata">
					<div class="post-num">Post #1105</div>
					<div class="post-author">sergiosatellite</div>
					<div class="post-datetime">
						12 Oct 2014, 00:33					</div>
				</div>
				<div class="post-content content">
					<p>Hello hnyman,<br />I would like to buy another router like my WNDR3700v2, but unfortunately now it seems impossible to find a v2 on the market.<br />Only v3 available, but v3 is a completely different board with different processor.<br />WNDR3800 also impossible to find on the market.<br />What about WNDR4300? is your build working on it?<br />Actually on the market there is WNDR4300-100PES. As far as I can understand there is only one version of this model and seems to be similar to the WNDR3700 V1/V2<br />What about other routers?<br />Awaiting your comments.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250243">
				<div class="post-metadata">
					<div class="post-num">Post #1106</div>
					<div class="post-author">drawz</div>
					<div class="post-datetime">
						12 Oct 2014, 18:19					</div>
				</div>
				<div class="post-content content">
					<p>WNDR4300 and WNDR3700v4 are pretty much the same hardware, but somewhat different than WNDR3700v1/v2/WNDR3800. Different enough that you can&#039;t use the same firmware files (different SoC, NAND flash, etc.).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250307">
				<div class="post-metadata">
					<div class="post-num">Post #1107</div>
					<div class="post-author">robnitro</div>
					<div class="post-datetime">
						13 Oct 2014, 04:24					</div>
				</div>
				<div class="post-content content">
					<p>Look for wndr3800 on ebay, a lot of them are wndr3800ch.&nbsp; First flash you need to use a 3800ch image, but after that you can use regular 3800 for sysupgrades</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250395">
				<div class="post-metadata">
					<div class="post-num">Post #1108</div>
					<div class="post-author">sergiosatellite</div>
					<div class="post-datetime">
						13 Oct 2014, 20:17					</div>
				</div>
				<div class="post-content content">
					<p>@drawz<br />thanks I saw that there is a specific directory /snapshots/trunk/ar71xx.nand/ where is stored firmware for WNDR4300 </p><p>@robnitro<br />I found only very high prices.<br />In this case I would prefer to migrate to a TP-LINK Archer C7. Think this is, in my opinion, one of the best ar71xx quality/price at the moment. It seems that now is fully supported both 2.4 and 5 ghz.<br />Thel I&#039;ll try to compile the hnyman build making right changes to .config file.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250464">
				<div class="post-metadata">
					<div class="post-num">Post #1109</div>
					<div class="post-author">robnitro</div>
					<div class="post-datetime">
						14 Oct 2014, 04:37					</div>
				</div>
				<div class="post-content content">
					<p>How can we set SQM to throttle uplink only?&nbsp; I don&#039;t see an option for &#039;half duplex&#039; like qos-scripts had.</p><p>I don&#039;t have enough cpu to do both and uplink is where latency can spike badly if saturated. </p><br /><p>@Sergio<br />Nice choice and not a bad price.&nbsp; 74kc cpu at 720 mhz is a bit faster than the 24kc in wndr3800/3700 overclocked to 800 mhz.<br />Hopefully yours comes with more than 8MB flash.&nbsp; I don&#039;t understand why they are so cheap with flash!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250484">
				<div class="post-metadata">
					<div class="post-num">Post #1110</div>
					<div class="post-author">The_Decryptor</div>
					<div class="post-datetime">
						14 Oct 2014, 09:13					</div>
				</div>
				<div class="post-content content">
					<p>I think that if you set the downstream limit to a value greater than your actual downstream it will basically ignore it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250511">
				<div class="post-metadata">
					<div class="post-num">Post #1111</div>
					<div class="post-author">moeller0</div>
					<div class="post-datetime">
						14 Oct 2014, 13:38					</div>
				</div>
				<div class="post-content content">
					<p>Hi Rob,</p><div class="quotebox"><cite>robnitro wrote:</cite><blockquote><p>How can we set SQM to throttle uplink only?&nbsp; I don&#039;t see an option for &#039;half duplex&#039; like qos-scripts had.</p><p>I don&#039;t have enough cpu to do both and uplink is where latency can spike badly if saturated. </p><br /><p>@Sergio<br />Nice choice and not a bad price.&nbsp; 74kc cpu at 720 mhz is a bit faster than the 24kc in wndr3800/3700 overclocked to 800 mhz.<br />Hopefully yours comes with more than 8MB flash.&nbsp; I don&#039;t understand why they are so cheap with flash!</p></blockquote></div><p>&nbsp; &nbsp; &nbsp; If you set the bandwidth for either ingress or egress to 0, no shaping will happen on that device. Have a look at logread or call &quot;/etc/init.d/sqm stop ; /etc/init.d/sqm start&quot; and/or &quot;tc -d qdisc&quot; and &quot;tc class show dev wan ; tc class show dev ifb4wan&quot; (not sure about that device names), to get some information about the effective shaper setup. Unfortunately this is not well documented in luci-app-sqm... (zero was used as that is not a viable option fr shaping, if you truly shape one direction to zero, no useful tcp connections are possible...)<br />&nbsp; &nbsp; &nbsp; &nbsp;Note, the SQM developers should be more responsible to questions/issues raised on <a href="https://github.com/dtaht/ceropackages-3.10/issues">https://github.com/dtaht/ceropackages-3.10/issues</a> or posted to <a href="https://lists.bufferbloat.net/listinfo/cerowrt-devel.">https://lists.bufferbloat.net/listinfo/cerowrt-devel.</a></p><p>Best Regards<br />&nbsp; &nbsp; &nbsp; &nbsp; M.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250512">
				<div class="post-metadata">
					<div class="post-num">Post #1112</div>
					<div class="post-author">moeller0</div>
					<div class="post-datetime">
						14 Oct 2014, 13:41					</div>
				</div>
				<div class="post-content content">
					<p>Hi The_Decryptor, </p><div class="quotebox"><cite>The_Decryptor wrote:</cite><blockquote><p>I think that if you set the downstream limit to a value greater than your actual downstream it will basically ignore it.</p></blockquote></div><p>&nbsp; &nbsp; &nbsp; This will not help too much with Rob&#039;s issue as the shaper is then still running and consuming CPU (I think it is soft-irqs), so setting it to zero should be better.</p><p>Best Regards<br />&nbsp; &nbsp; &nbsp; &nbsp; M.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250595">
				<div class="post-metadata">
					<div class="post-num">Post #1113</div>
					<div class="post-author">robnitro</div>
					<div class="post-datetime">
						15 Oct 2014, 03:37					</div>
				</div>
				<div class="post-content content">
					<p>Thanks... it didn&#039;t help much,&nbsp; just FYI:<br />800 mhz OC WNDR3800ch<br />Fiber that tests stably to 80/90 (can dl more with video on demand through cablebox).<br />I used 2 speed tests simultaneously, starting the second one DL when the first one starts UL.<br />Used task manager and hwinfo to see the network speeds (listed in MB/s)</p><p>SQM simplest or simple - same speeds maxed out.&nbsp; Max DL set to 74Mbit&nbsp; UL to 78Mbit</p><p>Both directions qos, UL and DL same time:&nbsp; &nbsp;50/50 or so, varied.</p><p>DL qos set to 0- turning off the qdisc for downlink:&nbsp; &nbsp; 63 down/&nbsp; 60 up on avg.</p><p>Similar results for openwrt qos-scripts, despite them using hsfc instead of HTB.</p><p>I returned to using my Verizon Fios router double NAT, use that router for the speed limiting.&nbsp; </p><p>I know I tested stock buffalo firmware on a ag300h (same cpu as wndr) with stock cpu speed of 680... it only had UL limiting, and allowed speedtests to run&nbsp; 80 down/ 78 up (up being limited to 78).<br />Shame that even buffalo&#039;s official dd-wrt couldnt match that!</p>											<p class="post-edited">(Last edited by <strong>robnitro</strong> on 15 Oct 2014, 03:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250637">
				<div class="post-metadata">
					<div class="post-num">Post #1114</div>
					<div class="post-author">moeller0</div>
					<div class="post-datetime">
						15 Oct 2014, 11:31					</div>
				</div>
				<div class="post-content content">
					<p>Hi Robnitro,</p><div class="quotebox"><cite>robnitro wrote:</cite><blockquote><p>Thanks... it didn&#039;t help much,&nbsp; just FYI:<br />800 mhz OC WNDR3800ch<br />Fiber that tests stably to 80/90 (can dl more with video on demand through cablebox).<br />I used 2 speed tests simultaneously, starting the second one DL when the first one starts UL.<br />Used task manager and hwinfo to see the network speeds (listed in MB/s)</p><p>SQM simplest or simple - same speeds maxed out.&nbsp; Max DL set to 74Mbit&nbsp; UL to 78Mbit</p><p>Both directions qos, UL and DL same time:&nbsp; &nbsp;50/50 or so, varied.</p><p>DL qos set to 0- turning off the qdisc for downlink:&nbsp; &nbsp; 63 down/&nbsp; 60 up on avg.</p><p>Similar results for openwrt qos-scripts, despite them using hsfc instead of HTB.</p><p>I returned to using my Verizon Fios router double NAT, use that router for the speed limiting.&nbsp; </p><p>I know I tested stock buffalo firmware on a ag300h (same cpu as wndr) with stock cpu speed of 680... it only had UL limiting, and allowed speedtests to run&nbsp; 80 down/ 78 up (up being limited to 78).<br />Shame that even buffalo&#039;s official dd-wrt couldnt match that!</p></blockquote></div><p>&nbsp; &nbsp; &nbsp;Yeah, the wndr3700/3800 seem to be capable of shaping around 50 to 60 Mbps total (sum of downlink and uplink shaping rates). And HTB and HFSC are equally costly, so shaping a 100/100 connection is pushing well beyond the hardware&#039;s capabilities (with the current software stack). If you ssh into the router while running your tests run &quot;top&quot; and look at the %idle and %sirq, I would assume idle to be close to 0% and sirq close to 100% while testing, which basically shows that your router is running against a hard computation limit.<br />&nbsp; &nbsp; &nbsp; I would recommend to use netperf-wrapper&#039;s RRUL test for quantification of the results as that is easily repeatable (you do need a linux or macosx machine to run netperf-wrapper though).<br />Here are three command lines to test shaping and latency under load against three more or less public netperf servers on the net, just pick the closest to you (the one with shortest ping RTT)<br />date ; ping -c 10 netperf-west.bufferbloat.net ; ./netperf-wrapper --ipv4 -l 300 -H netperf-west.bufferbloat.net rrul -p all_scaled --disable-log -t noAQM_noLLA_16M2M_hms-beagle_2_netperf-west<br />date ; ping -c 10 netperf-east.bufferbloat.net ; ./netperf-wrapper --ipv4 -l 300 -H netperf-east.bufferbloat.net rrul -p all_scaled --disable-log -t noAQM_noLLA_16M2M_hms-beagle_2_netperf-east<br />date ; ping -c 10 netperf-eu.bufferbloat.net ; ./netperf-wrapper --ipv4 -l 300 -H netperf-eu.bufferbloat.net rrul -p all_scaled --disable-log -t noAQM_noLLA_16M2M_hms-beagle_2_netperf-eu</p><p>With that out of the way, you could try to just set the shaping speed much higher and see how that affects achievable shaping rates. Or if you are willing to test I could send you a modified SQM script that might improve things a bit (or might not, I have a 16M/2.5M connection, so I can not saturate my link <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> ).</p><p>Best Regards<br />&nbsp; &nbsp; &nbsp; &nbsp;M.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250794">
				<div class="post-metadata">
					<div class="post-num">Post #1115</div>
					<div class="post-author">ceri</div>
					<div class="post-datetime">
						16 Oct 2014, 15:58					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m planning to upgrade from the AA builds to the stable/BB one soon. </p><p>Is it worth resetting my config before upgrading? I first set up OpenWRT about a year ago and I heard the config might miss some stuff if I just upgrade it as is.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250798">
				<div class="post-metadata">
					<div class="post-num">Post #1116</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						16 Oct 2014, 17:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ceri wrote:</cite><blockquote><p>I&#039;m planning to upgrade from the AA builds to the stable/BB one soon. </p><p>Is it worth resetting my config before upgrading? I first set up OpenWRT about a year ago and I heard the config might miss some stuff if I just upgrade it as is.</p></blockquote></div><p>You should build at least the network config again, especially regarding ipv6 defaults. Otherwise, I think that e.g. firewall config has not changed much. Also wifi config options have changed slightly etc.</p><p>In general, configuring everything up from scratch is good to do every now and then.</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 16 Oct 2014, 17:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250834">
				<div class="post-metadata">
					<div class="post-num">Post #1117</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						16 Oct 2014, 20:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>moeller0 wrote:</cite><blockquote><p>the wndr3700/3800 seem to be capable of shaping around 50 to 60 Mbps total (sum of downlink and uplink shaping rates).&nbsp; ... the hardware&#039;s capabilities (with the current software stack). If you ssh into the router while running your tests run &quot;top&quot; and look at the %idle and %sirq, I would assume idle to be close to 0% and sirq close to 100% while testing, which basically shows that your router is running against a hard computation limit.</p></blockquote></div><p>I just tested with WNDR3700v2 and my 100/~15 Mb/s connection:<br />router was able to do 8 MB/s in while 1 MB/s out. Load was generated with Ubuntu torrents with about 200 simultaneous connections. Surfing was still possible ;-)<br />Like you said, sirq was 100%.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250872">
				<div class="post-metadata">
					<div class="post-num">Post #1118</div>
					<div class="post-author">moeller0</div>
					<div class="post-datetime">
						17 Oct 2014, 00:02					</div>
				</div>
				<div class="post-content content">
					<p>Hi Hnyman, </p><div class="quotebox"><cite>hnyman wrote:</cite><blockquote><div class="quotebox"><cite>moeller0 wrote:</cite><blockquote><p>the wndr3700/3800 seem to be capable of shaping around 50 to 60 Mbps total (sum of downlink and uplink shaping rates).&nbsp; ... the hardware&#039;s capabilities (with the current software stack). If you ssh into the router while running your tests run &quot;top&quot; and look at the %idle and %sirq, I would assume idle to be close to 0% and sirq close to 100% while testing, which basically shows that your router is running against a hard computation limit.</p></blockquote></div><p>I just tested with WNDR3700v2 and my 100/~15 Mb/s connection:<br />router was able to do 8 MB/s in while 1 MB/s out. Load was generated with Ubuntu torrents with about 200 simultaneous connections. Surfing was still possible ;-)<br />Like you said, sirq was 100%.</p></blockquote></div><p>&nbsp; &nbsp; &nbsp;Well that equals a combined 72Mbps, pretty much in the ballpark the wndr3700 seems capable of handling... If I may ask what limits did you put into SQM?</p><p>Best Regards<br />&nbsp; &nbsp; &nbsp; &nbsp;M.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250875">
				<div class="post-metadata">
					<div class="post-num">Post #1119</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						17 Oct 2014, 00:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>moeller0 wrote:</cite><blockquote><p>&nbsp; &nbsp; &nbsp;Well that equals a combined 72Mbps, pretty much in the ballpark the wndr3700 seems capable of handling... If I may ask what limits did you put into SQM?</p></blockquote></div><p>I think that I had 105000/12000 as settings during that stress test, when I was just testing the max. throughput. Normally I use 85000/10000 as the everyday settings.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250941">
				<div class="post-metadata">
					<div class="post-num">Post #1120</div>
					<div class="post-author">ceri</div>
					<div class="post-datetime">
						17 Oct 2014, 11:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hnyman wrote:</cite><blockquote><div class="quotebox"><cite>ceri wrote:</cite><blockquote><p>I&#039;m planning to upgrade from the AA builds to the stable/BB one soon. </p><p>Is it worth resetting my config before upgrading? I first set up OpenWRT about a year ago and I heard the config might miss some stuff if I just upgrade it as is.</p></blockquote></div><p>You should build at least the network config again, especially regarding ipv6 defaults. Otherwise, I think that e.g. firewall config has not changed much. Also wifi config options have changed slightly etc.</p><p>In general, configuring everything up from scratch is good to do every now and then.</p></blockquote></div><p>I see, thanks for the clarification</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250989">
				<div class="post-metadata">
					<div class="post-num">Post #1121</div>
					<div class="post-author">robnitro</div>
					<div class="post-datetime">
						17 Oct 2014, 18:58					</div>
				</div>
				<div class="post-content content">
					<p>Yep, when sqm/qos-scripts is on the sirq in htop is maxed out.&nbsp; If I use the actiontec mi424wr as qos, max I see if 45% sirq.&nbsp; It has a kirkwood cpu, I believe 1.4 ghz?</p><p>From a second openwrt router, which is acting as a client (wifi access point) to eliminate cpu use by netperf.<br />No QOS at all:&nbsp; &nbsp;{ping to first hop on desktop had 150 ms spikes}<br />#/etc# ./netperfrunner.sh -t 45<br />2014-10-17 11:30:30 Testing netperf.bufferbloat.net (ipv4) with 4 streams down and up while pinging gstatic.com. Takes about 45 seconds.<br /> Download:&nbsp; 64.26 Mbps<br />&nbsp; &nbsp;Upload:&nbsp; 88.27 Mbps<br />&nbsp; Latency: (in msec, 46 pings, 0.00% packet loss)<br />&nbsp; &nbsp; &nbsp; Min: 30.296<br />&nbsp; &nbsp; 10pct: 77.105<br />&nbsp; &nbsp;Median: 120.852<br />&nbsp; &nbsp; &nbsp; Avg: 117.349<br />&nbsp; &nbsp; 90pct: 146.180<br />&nbsp; &nbsp; &nbsp; Max: 158.932</p><p>SQM- 0 down (disabled)&nbsp; &nbsp;78000 up&nbsp; {ping to first hop on desktop had 150 ms spikes}<br />#/etc# ./netperfrunner.sh -t 45<br />2014-10-17 11:33:05 Testing netperf.bufferbloat.net (ipv4) with 4 streams downnd up while pinging gstatic.com. Takes about 45 seconds.<br /> Download:&nbsp; 80.62 Mbps<br />&nbsp; &nbsp;Upload:&nbsp; 48.94 Mbps<br />&nbsp; Latency: (in msec, 46 pings, 0.00% packet loss)<br />&nbsp; &nbsp; &nbsp; Min: 29.874<br />&nbsp; &nbsp; 10pct: 58.908<br />&nbsp; &nbsp;Median: 70.479<br />&nbsp; &nbsp; &nbsp; Avg: 77.985<br />&nbsp; &nbsp; 90pct: 106.114<br />&nbsp; &nbsp; &nbsp; Max: 111.192</p><p>SQM 75000 down&nbsp; 78000 up&nbsp; &nbsp;{desktop ping first hop around 10-40 ms}<br />#/etc# ./netperfrunner.sh -t 45<br />2014-10-17 11:35:06 Testing netperf.bufferbloat.net (ipv4) with 4 streams down and up while pinging gstatic.com. Takes about 45 seconds.<br /> Download:&nbsp; 59.09 Mbps<br />&nbsp; &nbsp;Upload:&nbsp; 61.34 Mbps<br />&nbsp; Latency: (in msec, 46 pings, 0.00% packet loss)<br />&nbsp; &nbsp; &nbsp; Min: 29.937<br />&nbsp; &nbsp; 10pct: 30.267<br />&nbsp; &nbsp;Median: 31.142<br />&nbsp; &nbsp; &nbsp; Avg: 31.309<br />&nbsp; &nbsp; 90pct: 32.100<br />&nbsp; &nbsp; &nbsp; Max: 35.308</p><p>Qos-scripts&nbsp; half duplex,&nbsp; 78000 up&nbsp; &nbsp;{desktop had around 40-70 ms pings first hop}<br />#/etc# ./netperfrunner.sh -t 45<br />2014-10-17 11:37:25 Testing netperf.bufferbloat.net (ipv4) with 4 streams down and up while pinging gstatic.com. Takes about 45 seconds.<br /> Download:&nbsp; 82.57 Mbps<br />&nbsp; &nbsp;Upload:&nbsp; 16.89 Mbps<br />&nbsp; Latency: (in msec, 46 pings, 0.00% packet loss)<br />&nbsp; &nbsp; &nbsp; Min: 41.955<br />&nbsp; &nbsp; 10pct: 54.745<br />&nbsp; &nbsp;Median: 73.377<br />&nbsp; &nbsp; &nbsp; Avg: 78.529<br />&nbsp; &nbsp; 90pct: 104.058<br />&nbsp; &nbsp; &nbsp; Max: 114.809</p><p>qos-scripts full duplex, 75000 dn&nbsp; 78000 up&nbsp; {10-30 pings from desktop to first hop}<br />#/etc# ./netperfrunner.sh -t 45<br />2014-10-17 11:39:04 Testing netperf.bufferbloat.net (ipv4) with 4 streams down and up while pinging gstatic.com. Takes about 45 seconds.<br /> Download:&nbsp; 55.47 Mbps<br />&nbsp; &nbsp;Upload:&nbsp; 59.41 Mbps<br />&nbsp; Latency: (in msec, 46 pings, 0.00% packet loss)<br />&nbsp; &nbsp; &nbsp; Min: 29.934<br />&nbsp; &nbsp; 10pct: 30.671<br />&nbsp; &nbsp;Median: 31.713<br />&nbsp; &nbsp; &nbsp; Avg: 32.119<br />&nbsp; &nbsp; 90pct: 33.524<br />&nbsp; &nbsp; &nbsp; Max: 37.133</p><p>NOW WITH ACTIONTEC AS QOS MANAGER set to 75 dn&nbsp; 78 up (openwrt no qos/sqm):&nbsp; {desktop 10-30ms random 100 spike}<br />#/etc# ./netperfrunner.sh -t 45<br />2014-10-17 11:43:02 Testing netperf.bufferbloat.net (ipv4) with 4 streams dow and up while pinging gstatic.com. Takes about 45 seconds.<br /> Download:&nbsp; 71.41 Mbps<br />&nbsp; &nbsp;Upload:&nbsp; 74.5 Mbps<br />&nbsp; Latency: (in msec, 46 pings, 0.00% packet loss)<br />&nbsp; &nbsp; &nbsp; Min: 30.646<br />&nbsp; &nbsp; 10pct: 33.643<br />&nbsp; &nbsp;Median: 35.780<br />&nbsp; &nbsp; &nbsp; Avg: 36.779<br />&nbsp; &nbsp; 90pct: 40.423<br />&nbsp; &nbsp; &nbsp; Max: 45.587</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250992">
				<div class="post-metadata">
					<div class="post-num">Post #1122</div>
					<div class="post-author">moeller0</div>
					<div class="post-datetime">
						17 Oct 2014, 19:23					</div>
				</div>
				<div class="post-content content">
					<p>Hi Robnitro,</p><div class="quotebox"><cite>robnitro wrote:</cite><blockquote><p>Yep, when sqm/qos-scripts is on the sirq in htop is maxed out.&nbsp; If I use the actiontec mi424wr as qos, max I see if 45% sirq.&nbsp; It has a kirkwood cpu, I believe 1.4 ghz?</p><p>From a second openwrt router, which is acting as a client (wifi access point) to eliminate cpu use by netperf.<br />No QOS at all:&nbsp; &nbsp;{ping to first hop on desktop had 150 ms spikes}<br />#/etc# ./netperfrunner.sh -t 45<br />2014-10-17 11:30:30 Testing netperf.bufferbloat.net (ipv4) with 4 streams down and up while pinging gstatic.com. Takes about 45 seconds.<br /> Download:&nbsp; 64.26 Mbps<br />&nbsp; &nbsp;Upload:&nbsp; 88.27 Mbps<br />&nbsp; Latency: (in msec, 46 pings, 0.00% packet loss)<br />&nbsp; &nbsp; &nbsp; Min: 30.296<br />&nbsp; &nbsp; 10pct: 77.105<br />&nbsp; &nbsp;Median: 120.852<br />&nbsp; &nbsp; &nbsp; Avg: 117.349<br />&nbsp; &nbsp; 90pct: 146.180<br />&nbsp; &nbsp; &nbsp; Max: 158.932</p><p>SQM- 0 down (disabled)&nbsp; &nbsp;78000 up&nbsp; {ping to first hop on desktop had 150 ms spikes}<br />#/etc# ./netperfrunner.sh -t 45<br />2014-10-17 11:33:05 Testing netperf.bufferbloat.net (ipv4) with 4 streams downnd up while pinging gstatic.com. Takes about 45 seconds.<br /> Download:&nbsp; 80.62 Mbps<br />&nbsp; &nbsp;Upload:&nbsp; 48.94 Mbps<br />&nbsp; Latency: (in msec, 46 pings, 0.00% packet loss)<br />&nbsp; &nbsp; &nbsp; Min: 29.874<br />&nbsp; &nbsp; 10pct: 58.908<br />&nbsp; &nbsp;Median: 70.479<br />&nbsp; &nbsp; &nbsp; Avg: 77.985<br />&nbsp; &nbsp; 90pct: 106.114<br />&nbsp; &nbsp; &nbsp; Max: 111.192</p><p>SQM 75000 down&nbsp; 78000 up&nbsp; &nbsp;{desktop ping first hop around 10-40 ms}<br />#/etc# ./netperfrunner.sh -t 45<br />2014-10-17 11:35:06 Testing netperf.bufferbloat.net (ipv4) with 4 streams down and up while pinging gstatic.com. Takes about 45 seconds.<br /> Download:&nbsp; 59.09 Mbps<br />&nbsp; &nbsp;Upload:&nbsp; 61.34 Mbps<br />&nbsp; Latency: (in msec, 46 pings, 0.00% packet loss)<br />&nbsp; &nbsp; &nbsp; Min: 29.937<br />&nbsp; &nbsp; 10pct: 30.267<br />&nbsp; &nbsp;Median: 31.142<br />&nbsp; &nbsp; &nbsp; Avg: 31.309<br />&nbsp; &nbsp; 90pct: 32.100<br />&nbsp; &nbsp; &nbsp; Max: 35.308</p><p>Qos-scripts&nbsp; half duplex,&nbsp; 78000 up&nbsp; &nbsp;{desktop had around 40-70 ms pings first hop}<br />#/etc# ./netperfrunner.sh -t 45<br />2014-10-17 11:37:25 Testing netperf.bufferbloat.net (ipv4) with 4 streams down and up while pinging gstatic.com. Takes about 45 seconds.<br /> Download:&nbsp; 82.57 Mbps<br />&nbsp; &nbsp;Upload:&nbsp; 16.89 Mbps<br />&nbsp; Latency: (in msec, 46 pings, 0.00% packet loss)<br />&nbsp; &nbsp; &nbsp; Min: 41.955<br />&nbsp; &nbsp; 10pct: 54.745<br />&nbsp; &nbsp;Median: 73.377<br />&nbsp; &nbsp; &nbsp; Avg: 78.529<br />&nbsp; &nbsp; 90pct: 104.058<br />&nbsp; &nbsp; &nbsp; Max: 114.809</p><p>qos-scripts full duplex, 75000 dn&nbsp; 78000 up&nbsp; {10-30 pings from desktop to first hop}<br />#/etc# ./netperfrunner.sh -t 45<br />2014-10-17 11:39:04 Testing netperf.bufferbloat.net (ipv4) with 4 streams down and up while pinging gstatic.com. Takes about 45 seconds.<br /> Download:&nbsp; 55.47 Mbps<br />&nbsp; &nbsp;Upload:&nbsp; 59.41 Mbps<br />&nbsp; Latency: (in msec, 46 pings, 0.00% packet loss)<br />&nbsp; &nbsp; &nbsp; Min: 29.934<br />&nbsp; &nbsp; 10pct: 30.671<br />&nbsp; &nbsp;Median: 31.713<br />&nbsp; &nbsp; &nbsp; Avg: 32.119<br />&nbsp; &nbsp; 90pct: 33.524<br />&nbsp; &nbsp; &nbsp; Max: 37.133</p><p>NOW WITH ACTIONTEC AS QOS MANAGER set to 75 dn&nbsp; 78 up (openwrt no qos/sqm):&nbsp; {desktop 10-30ms random 100 spike}<br />#/etc# ./netperfrunner.sh -t 45<br />2014-10-17 11:43:02 Testing netperf.bufferbloat.net (ipv4) with 4 streams dow and up while pinging gstatic.com. Takes about 45 seconds.<br /> Download:&nbsp; 71.41 Mbps<br />&nbsp; &nbsp;Upload:&nbsp; 74.5 Mbps<br />&nbsp; Latency: (in msec, 46 pings, 0.00% packet loss)<br />&nbsp; &nbsp; &nbsp; Min: 30.646<br />&nbsp; &nbsp; 10pct: 33.643<br />&nbsp; &nbsp;Median: 35.780<br />&nbsp; &nbsp; &nbsp; Avg: 36.779<br />&nbsp; &nbsp; 90pct: 40.423<br />&nbsp; &nbsp; &nbsp; Max: 45.587</p></blockquote></div><br /><p>&nbsp; &nbsp; &nbsp; Thanks a lot, this nicely shows:<br />a) there is a lot of value in shaping egress and ingress if possible, for both SQM and QOS bi-directional shaping halved the ping RTTs (rough estimation looking at Median and Mean)</p><p>b) Both SQM and QOS are more or less CPU bound to similar combined rates (actually I wonder how you achieved 110 to 120 Mbps, typically I think the wndrs run out of steam around 60 to 70 Mbps, maybe this is your over clocking?)</p><p>c) both QOS and SQM seem to keep latency under load under tighter control than the actiontec (judged from the 90pct and max), but the proprietary? actiontec QOS looks quite useable.</p><p>d) it would be interesting to repeat the same experiments with IPv6 <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><br /><p>Many thanks<br />&nbsp; &nbsp; &nbsp; &nbsp;M.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250993">
				<div class="post-metadata">
					<div class="post-num">Post #1123</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						17 Oct 2014, 19:23					</div>
				</div>
				<div class="post-content content">
					<p>If I read robnitro&#039;s results correctly, they match pretty much my own observations: when the connection bandwidth is wide enough (I have 100/15), both qos-scripts and sqm are able to manage nice latency and their outcome does not differ much. I guess that the possible difference is shown with the more constrained conditions.</p><p>EDIT:<br />just adding that for wndr3700v2 running sqm, netperf-wrapper gives me about 86 Mb/s down + 11 Mb/s up without overclocking, and the test was ran from Ubuntu running inside Virtualbox running in PC.</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 17 Oct 2014, 19:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p251004">
				<div class="post-metadata">
					<div class="post-num">Post #1124</div>
					<div class="post-author">moeller0</div>
					<div class="post-datetime">
						17 Oct 2014, 20:57					</div>
				</div>
				<div class="post-content content">
					<p>Hi Hnyman,</p><div class="quotebox"><cite>hnyman wrote:</cite><blockquote><p>If I read robnitro&#039;s results correctly, they match pretty much my own observations: when the connection bandwidth is wide enough (I have 100/15), both qos-scripts and sqm are able to manage nice latency and their outcome does not differ much. I guess that the possible difference is shown with the more constrained conditions.</p><p>EDIT:<br />just adding that for wndr3700v2 running sqm, netperf-wrapper gives me about 86 Mb/s down + 11 Mb/s up without overclocking, and the test was ran from Ubuntu running inside Virtualbox running in PC.</p></blockquote></div><p>&nbsp; &nbsp; &nbsp;So one thing that is interesting in judging SQM and QOS is how bad is the latency under load increase without any shaper. For example, while using SQM on a secondary router latency under load increase was bound to ~300ms as that is what my ISPs modem-router enforced. Getting that router out of the link, by running a ppoe client on the router immediately resulted in worse latency spikes (1000ms and larger). In your case I assume the link itself is not too bad to start out with, just like in Robnitro&#039;s case the worst case was ~160ms without QOS.</p><p>Best Regards<br />&nbsp; &nbsp; &nbsp; &nbsp; M.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p251013">
				<div class="post-metadata">
					<div class="post-num">Post #1125</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						17 Oct 2014, 22:13					</div>
				</div>
				<div class="post-content content">
					<p>Previous tests were with yesterday&#039;s BB14.07 build.<br />I flashed today&#039;s CC trunk build, and tested netperf-wrapper again with no shaping, with SQM and with QoS:<br />Nothing: 50 ms latency, about 98/11 Mb speed&nbsp; (ellipsis center).<br />SQM 100/11 Mb: 18 ms and 82/9 Mb speed.<br />QoS 100/11 Mb: 18 ms and 95/9 Mb speed</p><p>So, both SQM and QoS decrease nicely latency, but there is some speed hit. Still a good tradeoff.</p><p>I have sent the data to your email.</p>									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 1126 to 1125 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 45 of 63</div><nav><ul><li><a href="viewtopic.php%3Fid=28392&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=43.html">43</a></li><li><a href="viewtopic.php%3Fid=28392&amp;p=44.html">44</a></li><li class="pagination-current"><span>45</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=46.html">46</a></li><li><a href="viewtopic.php%3Fid=28392&amp;p=47.html">47</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=63.html">63</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>