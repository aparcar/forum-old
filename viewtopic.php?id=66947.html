<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [Closed].Client VPN router setup will not go through VPN</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 23 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p334914">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Opy</div>
					<div class="post-datetime">
						18 Aug 2016, 11:27					</div>
				</div>
				<div class="post-content content">
					<p>VPN newb here.<br />Trying to setup my Linksys WRT1900ACS as a VPN client through PIA.<br />I can get internet fine, but I can&#039;t get PC to go through the VPN.</p><p>Hopefully this is something as simple as a firewall setup I&#039;ve done wrong.<br />With my latest fiddling, I&#039;m now getting TLS handshake failures again.<br /></p><div class="codebox"><pre><code>Thu Aug 18 17:27:51 2016 daemon.notice openvpn(pia_openvpn)[1188]: Socket Buffers: R=[163840-&gt;163840] S=[163840-&gt;163840]
Thu Aug 18 17:27:51 2016 daemon.notice openvpn(pia_openvpn)[1188]: TCP/UDP: Preserving recently used remote address: [AF_INET]168.1.6.61:1194
Thu Aug 18 17:27:51 2016 daemon.notice openvpn(pia_openvpn)[1188]: UDPv4 link local: [undef]
Thu Aug 18 17:27:51 2016 daemon.notice openvpn(pia_openvpn)[1188]: UDPv4 link remote: [AF_INET]168.1.6.61:1194
Thu Aug 18 17:27:51 2016 daemon.notice openvpn(pia_openvpn)[1188]: TLS: Initial packet from [AF_INET]168.1.6.61:1194, sid=e667dbf5 37c23b62
Thu Aug 18 17:28:51 2016 daemon.err openvpn(pia_openvpn)[1188]: TLS Error: TLS key negotiation failed to occur within 60 seconds (check your network connectivity)
Thu Aug 18 17:28:51 2016 daemon.err openvpn(pia_openvpn)[1188]: TLS Error: TLS handshake failed
Thu Aug 18 17:28:51 2016 daemon.notice openvpn(pia_openvpn)[1188]: SIGUSR1[soft,tls-error] received, process restarting
Thu Aug 18 17:28:51 2016 daemon.notice openvpn(pia_openvpn)[1188]: Restart pause, 2 second(s)</code></pre></div><p>OpenWrt Designated Driver 49876 / LuCI Master (git-16.217.35130-6a11f71) </p><p>I&#039;ll provide screenies of what I think may be relevant. </p><p><span class="postimg"><img src="http://users.datarealm.com/opy/stuff/VPN_Help/2016_08_18_17_43_05_OpyWrt_General_Settings_LuCI.png" alt="General_Settings" /></span></p><p><span class="postimg"><img src="http://users.datarealm.com/opy/stuff/VPN_Help/2016_08_18_17_45_15_PIAVPN_FirewallZone.png" alt="PIAVPN_FirewallZone" /></span></p><p><span class="postimg"><img src="http://users.datarealm.com/opy/stuff/VPN_Help/2016_08_18_17_46_35_TUN_FirewallZone.png" alt="TUN_FirewallZone" /></span></p><p><span class="postimg"><img src="http://users.datarealm.com/opy/stuff/VPN_Help/2016_08_18_17_49_45_VPN_FW_FirewallZone.png" alt="VPN_FW_FirewallZone" /></span></p><p><span class="postimg"><img src="http://users.datarealm.com/opy/stuff/VPN_Help/2016_08_18_17_52_02_WAN_FirewallZone.png" alt="WAN_FirewallZone" /></span></p><p><span class="postimg"><img src="http://users.datarealm.com/opy/stuff/VPN_Help/2016_08_18_17_52_51_LAN_FirewallZone.png" alt="LAN_FirewallZone" /></span></p>											<p class="post-edited">(Last edited by <strong>Opy</strong> on 21 Aug 2016, 10:29)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p334915">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Opy</div>
					<div class="post-datetime">
						18 Aug 2016, 11:27					</div>
				</div>
				<div class="post-content content">
					<p><span class="postimg"><img src="http://users.datarealm.com/opy/stuff/VPN_Help/2016_08_18_17_53_42_OpyWrt_Interfaces_LuCI.png" alt="Interfaces" /></span></p><p><span class="postimg"><img src="http://users.datarealm.com/opy/stuff/VPN_Help/2016_08_18_17_55_01_Interface_PIA_VPN.png" alt="Interface_PIA_VPN" /></span></p><p><span class="postimg"><img src="http://users.datarealm.com/opy/stuff/VPN_Help/2016_08_18_17_59_43_Interfaces_TUN_General.png" alt="Interfaces_TUN_General" /></span></p><p><span class="postimg"><img src="http://users.datarealm.com/opy/stuff/VPN_Help/2016_08_18_18_00_56_Interfaces_WAN.png" alt="Interfaces_WAN" /></span></p><p><span class="postimg"><img src="http://users.datarealm.com/opy/stuff/VPN_Help/2016_08_18_18_01_59_Interfaces_WAN.png" alt="Interfaces_WAN" /></span></p><p><span class="postimg"><img src="http://users.datarealm.com/opy/stuff/VPN_Help/2016_08_18_18_04_10_Interfaces_LAN_General.png" alt="Interfaces_LAN_General" /></span></p><p><span class="postimg"><img src="http://users.datarealm.com/opy/stuff/VPN_Help/2016_08_18_18_05_08_Interfaces_LAN_Phys.png" alt="Interfaces_LAN_Phys" /></span></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p334916">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Opy</div>
					<div class="post-datetime">
						18 Aug 2016, 11:28					</div>
				</div>
				<div class="post-content content">
					<p><span class="postimg"><img src="http://users.datarealm.com/opy/stuff/VPN_Help/2016_08_18_18_06_10_OpenVPN.png" alt="OpenVPN" /></span></p><p><span class="postimg"><img src="http://users.datarealm.com/opy/stuff/VPN_Help/2016_08_18_18_07_57_OpenVPN_Service.png" alt="OpenVPN_Service" /></span></p><p><span class="postimg"><img src="http://users.datarealm.com/opy/stuff/VPN_Help/2016_08_18_18_09_14_OpenVPN_Networking.png" alt="OpenVPN_Networking" /></span></p><p><span class="postimg"><img src="http://users.datarealm.com/opy/stuff/VPN_Help/2016_08_18_18_10_27_OpenVPN_VPN.png" alt="OpenVPN_VPN" /></span></p><p><span class="postimg"><img src="http://users.datarealm.com/opy/stuff/VPN_Help/2016_08_18_18_11_30_OpenVPN_Cryptography.png" alt="OpenVPN_Cryptography" /></span></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p334917">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Opy</div>
					<div class="post-datetime">
						18 Aug 2016, 11:29					</div>
				</div>
				<div class="post-content content">
					<p>Is there something obvious that I&#039;ve done wrong here?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p335142">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Opy</div>
					<div class="post-datetime">
						20 Aug 2016, 07:35					</div>
				</div>
				<div class="post-content content">
					<p>As a note for anybody getting errors running /sbin/fan_ctrl.sh on a WRT1900ACS, you can simply empty the file.&nbsp; This unit has no fan, so it will error when trying to control the fan.</p><p>I opened it from WinSCP and deleted everything and saved it.<br />I assume something is calling the file, so I recommend not just deleting the file altogether.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p335155">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						20 Aug 2016, 11:00					</div>
				</div>
				<div class="post-content content">
					<p>Screenshots are a waste of screen real estate, files from /etc/config should work better.</p><p>Why do you have not only WAN and WAN6 but a mysterious TUN on eth0? </p><p>Your log shows the TLS handshake error, so while Luci might show the OpenVPN status is running I doubt it&#039;s connected. I&#039;m pretty sure I&#039;ve posted the UCI commands to get PIA working *if you started on the clean router*. Search I guess and start anew. Or just follow the VPN recipe from wiki, it worked for me a while back.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p335169">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Opy</div>
					<div class="post-datetime">
						20 Aug 2016, 14:33					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the reply Stangri.<br />I&#039;ve rebuilt a few times now. As a few things pointed at a tun entry, so I tried to make one to see if that would get the connection going.&nbsp; That&#039;s probably where the TLS errors started.<br />Most guides are find are directed at server setup. As it&#039;s all new to me, I am pretty sure I&#039;ve confused myself even more along the way. <br />I&#039;ll see how I go on the next attempt.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p335283">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Opy</div>
					<div class="post-datetime">
						21 Aug 2016, 10:29					</div>
				</div>
				<div class="post-content content">
					<p>Working now via a Chaos Calmer image.<br />Not certain what was my last step to get it functioning, unfortunately.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>