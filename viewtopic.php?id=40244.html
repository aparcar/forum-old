<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> how to config snmp  on OpenWrt to support v3 and trap</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p182068">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">hu851211</div>
					<div class="post-datetime">
						1 Nov 2012, 03:22					</div>
				</div>
				<div class="post-content content">
					<p>hello， I installed the snmpd on OpenWrt，but how to config snmp&nbsp; on OpenWrt to support v3 and trap？</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p182220">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">luizluca</div>
					<div class="post-datetime">
						3 Nov 2012, 06:45					</div>
				</div>
				<div class="post-content content">
					<p>If you installed net-snmp stuff, just follow the tutorials as if it were in a Linux box.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p182387">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">hu851211</div>
					<div class="post-datetime">
						5 Nov 2012, 03:51					</div>
				</div>
				<div class="post-content content">
					<p>hi, luizluca!<br />There is no information can refer to, and the configuration on openwrt is different from Linux.OpenWRT uses UCI (/etc/config/snmpd) to generate the /etc/snmp/snmpd.conf , so need to edit this file.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p182480">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">luizluca</div>
					<div class="post-datetime">
						5 Nov 2012, 20:59					</div>
				</div>
				<div class="post-content content">
					<p>The UCI config might not include all avaiable options. The wiki page is very limited. <a href="http://wiki.openwrt.org/doc/howto/snmp.server">http://wiki.openwrt.org/doc/howto/snmp.server</a><br />Generally, it is the startup script that generates the configuration file. Take a look at your /etc/init.d/*snmp*</p><p>In some cases, one of UCI option allow you to include a external configuration. In the worst case, modify the snmpd init.d script and use a normal snmpd.conf file, as you would do in Linux.</p><p>Sorry, I do not have snmpd installed on my router (I have no more space). However, if you need more help, I could install OpenWRT in a VM with plenty of space to try to help you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p182502">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">hu851211</div>
					<div class="post-datetime">
						6 Nov 2012, 02:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>luizluca wrote:</cite><blockquote><p>The UCI config might not include all avaiable options. The wiki page is very limited. <a href="http://wiki.openwrt.org/doc/howto/snmp.server">http://wiki.openwrt.org/doc/howto/snmp.server</a><br />Generally, it is the startup script that generates the configuration file. Take a look at your /etc/init.d/*snmp*</p><p>In some cases, one of UCI option allow you to include a external configuration. In the worst case, modify the snmpd init.d script and use a normal snmpd.conf file, as you would do in Linux.</p><p>Sorry, I do not have snmpd installed on my router (I have no more space). However, if you need more help, I could install OpenWRT in a VM with plenty of space to try to help you.</p></blockquote></div><p>Thank you very much.Now I first configure with linux method, if there are problems, we re-explore.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p183213">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">hu851211</div>
					<div class="post-datetime">
						14 Nov 2012, 10:13					</div>
				</div>
				<div class="post-content content">
					<p>Why snmp do not supports DES encryption and decryption？</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p183237">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">luizluca</div>
					<div class="post-datetime">
						14 Nov 2012, 16:17					</div>
				</div>
				<div class="post-content content">
					<p>Maybe it was compiled without the support for it. It is common to remove features in order to save some resources. DES might depend on some crypt library that wasn&#039;t available or it was too space to spend.</p><p>The 12.09beta net-snmp package uses this configuration options:</p><p>CONFIGURE_ARGS += \<br />&nbsp; &nbsp; &nbsp; &nbsp; --enable-mfd-rewrites \<br />&nbsp; &nbsp; &nbsp; &nbsp; --enable-shared \<br />&nbsp; &nbsp; &nbsp; &nbsp; --enable-static \<br />&nbsp; &nbsp; &nbsp; &nbsp; --with-endianness=little \<br />&nbsp; &nbsp; &nbsp; &nbsp; --with-logfile=/var/log/snmpd.log \<br />&nbsp; &nbsp; &nbsp; &nbsp; --with-persistent-directory=/usr/lib/snmp/ \<br />&nbsp; &nbsp; &nbsp; &nbsp; --with-default-snmp-version=1 \<br />&nbsp; &nbsp; &nbsp; &nbsp; --with-sys-contact=root@localhost \<br />&nbsp; &nbsp; &nbsp; &nbsp; --with-sys-location=Unknown \<br />&nbsp; &nbsp; &nbsp; &nbsp; --enable-applications \<br />&nbsp; &nbsp; &nbsp; &nbsp; --disable-debugging \<br />&nbsp; &nbsp; &nbsp; &nbsp; --disable-manuals \<br />&nbsp; &nbsp; &nbsp; &nbsp; --disable-mibs \<br />&nbsp; &nbsp; &nbsp; &nbsp; --disable-scripts \<br />&nbsp; &nbsp; &nbsp; &nbsp; --with-out-mib-modules=&quot;$(SNMP_MIB_MODULES_EXCLUDED)&quot; \<br />&nbsp; &nbsp; &nbsp; &nbsp; --with-mib-modules=&quot;$(SNMP_MIB_MODULES_INCLUDED)&quot; \<br />&nbsp; &nbsp; &nbsp; &nbsp; --with-out-transports=&quot;$(SNMP_TRANSPORTS_EXCLUDED)&quot; \<br />&nbsp; &nbsp; &nbsp; &nbsp; --with-transports=&quot;$(SNMP_TRANSPORTS_INCLUDED)&quot; \<br />&nbsp; &nbsp; &nbsp; &nbsp; --without-openssl \<br />&nbsp; &nbsp; &nbsp; &nbsp; --without-libwrap \<br />&nbsp; &nbsp; &nbsp; &nbsp; --without-rpm \<br />&nbsp; &nbsp; &nbsp; &nbsp; --without-zlib \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(call autoconf_bool,CONFIG_IPV6,ipv6) \</p><p>And the &quot;--without-openssl&quot; might result in the absence of DES encryption.</p><p>If you really need this, you can download the source, change the Makefile and recompile yourself. Wiki has some docs of how to do it. Afer that, just install the new ipk into your router.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p183843">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">hu851211</div>
					<div class="post-datetime">
						21 Nov 2012, 11:13					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for your help!&nbsp; And are you familiar with qos? <br /></p><div class="quotebox"><cite>luizluca wrote:</cite><blockquote><p>Maybe it was compiled without the support for it. It is common to remove features in order to save some resources. DES might depend on some crypt library that wasn&#039;t available or it was too space to spend.</p><p>The 12.09beta net-snmp package uses this configuration options:</p><p>CONFIGURE_ARGS += \<br />&nbsp; &nbsp; &nbsp; &nbsp; --enable-mfd-rewrites \<br />&nbsp; &nbsp; &nbsp; &nbsp; --enable-shared \<br />&nbsp; &nbsp; &nbsp; &nbsp; --enable-static \<br />&nbsp; &nbsp; &nbsp; &nbsp; --with-endianness=little \<br />&nbsp; &nbsp; &nbsp; &nbsp; --with-logfile=/var/log/snmpd.log \<br />&nbsp; &nbsp; &nbsp; &nbsp; --with-persistent-directory=/usr/lib/snmp/ \<br />&nbsp; &nbsp; &nbsp; &nbsp; --with-default-snmp-version=1 \<br />&nbsp; &nbsp; &nbsp; &nbsp; --with-sys-contact=root@localhost \<br />&nbsp; &nbsp; &nbsp; &nbsp; --with-sys-location=Unknown \<br />&nbsp; &nbsp; &nbsp; &nbsp; --enable-applications \<br />&nbsp; &nbsp; &nbsp; &nbsp; --disable-debugging \<br />&nbsp; &nbsp; &nbsp; &nbsp; --disable-manuals \<br />&nbsp; &nbsp; &nbsp; &nbsp; --disable-mibs \<br />&nbsp; &nbsp; &nbsp; &nbsp; --disable-scripts \<br />&nbsp; &nbsp; &nbsp; &nbsp; --with-out-mib-modules=&quot;$(SNMP_MIB_MODULES_EXCLUDED)&quot; \<br />&nbsp; &nbsp; &nbsp; &nbsp; --with-mib-modules=&quot;$(SNMP_MIB_MODULES_INCLUDED)&quot; \<br />&nbsp; &nbsp; &nbsp; &nbsp; --with-out-transports=&quot;$(SNMP_TRANSPORTS_EXCLUDED)&quot; \<br />&nbsp; &nbsp; &nbsp; &nbsp; --with-transports=&quot;$(SNMP_TRANSPORTS_INCLUDED)&quot; \<br />&nbsp; &nbsp; &nbsp; &nbsp; --without-openssl \<br />&nbsp; &nbsp; &nbsp; &nbsp; --without-libwrap \<br />&nbsp; &nbsp; &nbsp; &nbsp; --without-rpm \<br />&nbsp; &nbsp; &nbsp; &nbsp; --without-zlib \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(call autoconf_bool,CONFIG_IPV6,ipv6) \</p><p>And the &quot;--without-openssl&quot; might result in the absence of DES encryption.</p><p>If you really need this, you can download the source, change the Makefile and recompile yourself. Wiki has some docs of how to do it. Afer that, just install the new ipk into your router.</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p183895">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">luizluca</div>
					<div class="post-datetime">
						21 Nov 2012, 17:32					</div>
				</div>
				<div class="post-content content">
					<p>Sorry, my knowledge of QOS is not enough for helping others :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p183950">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">hu851211</div>
					<div class="post-datetime">
						22 Nov 2012, 03:46					</div>
				</div>
				<div class="post-content content">
					<p>I have a question about snmp trap.<br />I wrote in the configuration file &quot;trap2sink 192.168.1.100&quot;.<br />If the cpu exceeds the threshold, will snmp send a trap?Does it require a specific configuration?</p><div class="quotebox"><cite>luizluca wrote:</cite><blockquote><p>Sorry, my knowledge of QOS is not enough for helping others :-)</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p199448">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">banglang.huang</div>
					<div class="post-datetime">
						24 Apr 2013, 06:21					</div>
				</div>
				<div class="post-content content">
					<p>I meet this problem now, and I found that openwrt use UCI to generated snmp.conf either(after modifying /etc/snmp/snmp.conf, it will not take efftect when execute /etc/init.d/snmpd restart), so how can I make the snmpd work like this?</p><p>edit your snmpd.conf and add<br />rouser noAuthUser<br />rouser MD5User<br />rwuser MD5DESUser<br />stop snmpd and edit your persistent snmpd.conf and add<br />createUser NoAuthUser<br />createUser MD5User MD5 &quot;The Net-SNMP Demo Password&quot;<br />createUser MD5DESUser MD5 &quot;The Net-SNMP Demo Password&quot; DES<br />start snmpd again.<br />Commands<br />Here is a completely unauthenticated request (which still needs a user name, nonetheless):<br /> % snmpgetnext -v 3 -n &quot;&quot; -u noAuthUser -l noAuthNoPriv test.net-snmp.org sysUpTime<br /> system.sysUpTime.0 = Timeticks: (83467131) 9 days, 15:51:11.31</p><p>Here is an authenticated request:<br /> % snmpgetnext -v 3 -n &quot;&quot; -u MD5User -a MD5 -A &quot;The Net-SNMP Demo Password&quot; -l authNoPriv test.net-snmp.org sysUpTime<br /> system.sysUpTime.0 = Timeticks: (83491735) 9 days, 15:55:17.35</p><p>And finally, here is an authenticated and encrypted request:<br /> % snmpgetnext -v 3 -n &quot;&quot; -u MD5DESUser -a MD5 -A &quot;The Net-SNMP Demo Password&quot; -x DES -X &quot;The Net-SNMP Demo Password&quot; -l authPriv test.net-snmp.org system<br /> system.sysUpTime.0 = Timeticks: (83493111) 9 days, 15:55:31.11</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212072">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">hu851211</div>
					<div class="post-datetime">
						11 Sep 2013, 09:42					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for your help<br /></p><div class="quotebox"><cite>banglang.huang wrote:</cite><blockquote><p>I meet this problem now, and I found that openwrt use UCI to generated snmp.conf either(after modifying /etc/snmp/snmp.conf, it will not take efftect when execute /etc/init.d/snmpd restart), so how can I make the snmpd work like this?</p><p>edit your snmpd.conf and add<br />rouser noAuthUser<br />rouser MD5User<br />rwuser MD5DESUser<br />stop snmpd and edit your persistent snmpd.conf and add<br />createUser NoAuthUser<br />createUser MD5User MD5 &quot;The Net-SNMP Demo Password&quot;<br />createUser MD5DESUser MD5 &quot;The Net-SNMP Demo Password&quot; DES<br />start snmpd again.<br />Commands<br />Here is a completely unauthenticated request (which still needs a user name, nonetheless):<br /> % snmpgetnext -v 3 -n &quot;&quot; -u noAuthUser -l noAuthNoPriv test.net-snmp.org sysUpTime<br /> system.sysUpTime.0 = Timeticks: (83467131) 9 days, 15:51:11.31</p><p>Here is an authenticated request:<br /> % snmpgetnext -v 3 -n &quot;&quot; -u MD5User -a MD5 -A &quot;The Net-SNMP Demo Password&quot; -l authNoPriv test.net-snmp.org sysUpTime<br /> system.sysUpTime.0 = Timeticks: (83491735) 9 days, 15:55:17.35</p><p>And finally, here is an authenticated and encrypted request:<br /> % snmpgetnext -v 3 -n &quot;&quot; -u MD5DESUser -a MD5 -A &quot;The Net-SNMP Demo Password&quot; -x DES -X &quot;The Net-SNMP Demo Password&quot; -l authPriv test.net-snmp.org system<br /> system.sysUpTime.0 = Timeticks: (83493111) 9 days, 15:55:31.11</p></blockquote></div>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>