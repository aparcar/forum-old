<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Barrier Breaker can&#039;t break 160+ Mbps down</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 4 Apr 2018 and 22 Apr 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 10</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=51726&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=51726&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=51726&amp;p=10.html">10</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p240852">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">devinus</div>
					<div class="post-datetime">
						20 Jul 2014, 13:32					</div>
				</div>
				<div class="post-content content">
					<p>Just flashed my WNDR3800 from Attitude Adjustment (where I could reach 300+ Mbps down on speedtest.net) to Barrier Breaker, where I can&#039;t break 160 Mbps. I&#039;ve done no configuration and this is on my wired connection (NOT wireless).</p><p>Why could Barrier Breaker be that much slower?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240853">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">written_direcon</div>
					<div class="post-datetime">
						20 Jul 2014, 13:40					</div>
				</div>
				<div class="post-content content">
					<p>All those &quot;speed tests&quot; e.g. speedtest.net are crap..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240854">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						20 Jul 2014, 13:41					</div>
				</div>
				<div class="post-content content">
					<p>Try disabling odhcpd: /etc/init.d/odhcpd stop</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240857">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">devinus</div>
					<div class="post-datetime">
						20 Jul 2014, 13:51					</div>
				</div>
				<div class="post-content content">
					<p>@jow that brought me up to 200 Mbps, but I&#039;m assuming that&#039;s just a temporary fix? Is it possible to regain the other 100 Mbps?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240858">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">devinus</div>
					<div class="post-datetime">
						20 Jul 2014, 13:52					</div>
				</div>
				<div class="post-content content">
					<p>@written_direcon I know they&#039;re not accurate, but it&#039;s indicative of something, I&#039;m sure.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240863">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">alphasparc</div>
					<div class="post-datetime">
						20 Jul 2014, 15:10					</div>
				</div>
				<div class="post-content content">
					<p>Well seems like the barrier,barrier breaker needs to break is 300Mbps...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240864">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">devinus</div>
					<div class="post-datetime">
						20 Jul 2014, 15:33					</div>
				</div>
				<div class="post-content content">
					<p>@alphasparc Unfortunately the only barrier I need it to break is 160 Mbps...</p>											<p class="post-edited">(Last edited by <strong>devinus</strong> on 20 Jul 2014, 15:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240865">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">pwr22</div>
					<div class="post-datetime">
						20 Jul 2014, 15:59					</div>
				</div>
				<div class="post-content content">
					<p>Which version is Barrier Breaker?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240928">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">devinus</div>
					<div class="post-datetime">
						21 Jul 2014, 06:50					</div>
				</div>
				<div class="post-content content">
					<p>@pwr22 14.07 RC1</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240938">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						21 Jul 2014, 11:27					</div>
				</div>
				<div class="post-content content">
					<p>@devinus</p><p>Have you tried an older attitude adjustment build for comparison? I know some users have reported a quite noticable throughput degradation from AA to BB (I&#039;m thinking it&#039;s kernel 3.8 -&gt; 3.10 that caused it).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240942">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">hnsr</div>
					<div class="post-datetime">
						21 Jul 2014, 12:02					</div>
				</div>
				<div class="post-content content">
					<p>See also <a href="https://forum.openwrt.org/viewtopic.php?id=45864">https://forum.openwrt.org/viewtopic.php?id=45864</a> (was just reading that myself)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240962">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">CyrusFF</div>
					<div class="post-datetime">
						21 Jul 2014, 16:39					</div>
				</div>
				<div class="post-content content">
					<p>odhcpd performance issues are fixed now. So RC2 and later should be fine regarding this issue.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240975">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">devinus</div>
					<div class="post-datetime">
						21 Jul 2014, 18:13					</div>
				</div>
				<div class="post-content content">
					<p>@arokh That&#039;s exactly that happened. AA was able to utilize the full 300 Mbps, switching to BB brings that down to 160 Mbps.</p><p>@CyrusFF My only concern is that even when I stopped odhcpd, I was only able to get 200 Mbps.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p241018">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">devinus</div>
					<div class="post-datetime">
						22 Jul 2014, 02:05					</div>
				</div>
				<div class="post-content content">
					<p>Another anecdote: while running the speed test, the CPU utilization on BB is way higher than on AA.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p241045">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						22 Jul 2014, 11:16					</div>
				</div>
				<div class="post-content content">
					<p>@CyrusFF</p><p>odhcpd is not the only source of performance degradation. The fix for odhcpd is to not open packet socket unless needed, I think if you actually use IPv6 you will have the same problem but not sure.</p><p>Did someone try to connect any equipment to their WAN port and do a transfer without NAT?</p><p>I wonder if 3.14 is any better, guess we will have to wait and see. I gave it a shot updating the patches but some important ones were a bit complicated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p242332">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">devinus</div>
					<div class="post-datetime">
						1 Aug 2014, 03:35					</div>
				</div>
				<div class="post-content content">
					<p>@CyrusFF It seems RC2 hasn&#039;t fixed all the sources of performance degradation as @arokh predicted. I&#039;m never able to break 200 Mbps while on Attitude Adjustment I get 300+ Mbps.</p>											<p class="post-edited">(Last edited by <strong>devinus</strong> on 1 Aug 2014, 03:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p242344">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">alphasparc</div>
					<div class="post-datetime">
						1 Aug 2014, 05:18					</div>
				</div>
				<div class="post-content content">
					<p>This was my latest result after the odhcpd was fixed,<br /><span class="postimg"><img src="http://i.imgur.com/uk8gbkh.png" alt="http://i.imgur.com/uk8gbkh.png" /></span><br />I did tried /etc/init.d/odhcpd stop and the speed remains the same meaning it was fixed.<br />Note that the test I ran was with all my installed services disabled out of box.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p242348">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">tmcg</div>
					<div class="post-datetime">
						1 Aug 2014, 06:28					</div>
				</div>
				<div class="post-content content">
					<p>My ISP now offers 300Mbps service in my area.&nbsp; Does anyone know of any Barrier Breaker compat router hardware that will keep up with 300Mbps down?&nbsp; I don&#039;t care about doing wifi or even LAN switching on same router as I used a dedicated switch and separate dedicated openwrt wifi router for those tasks -- I just need a fast BB router to connect my cable modem to my LAN for firewall purposes.&nbsp; I don&#039;t even care about IPV6, at least not yet.</p><p>Thx.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p242350">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">alphasparc</div>
					<div class="post-datetime">
						1 Aug 2014, 06:47					</div>
				</div>
				<div class="post-content content">
					<p>To be honest I don&#039;t think there is any.<br />On Attitude Adjustment my WR1043ND could hit 300+Mbps and the WDR4300 could hit ~400Mbps<br />On Barrier Breaker as above WR1043ND could only hit 200+Mbps and WDR4300 could only hit ~250+Mbps<br />And keep in mind my WR1043ND is overclocked at 430MHZ (+30MHZ from stock) and my WDR4300 is overclocked at 710MHZ(+ 150MHZ from stock).<br />I even tried renicing the softirq (the process which has the most activity during software NAT) to -19 (the max priority) but it was no use.<br />The outcome was that the NAT graph was smoother and unlike the default priority the system locked up during NAT just like Attitude Adjusment was but there was zero performance difference.<br />So I believe the problem was something else limiting the NAT performance.</p>											<p class="post-edited">(Last edited by <strong>alphasparc</strong> on 1 Aug 2014, 06:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p242359">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">Middling</div>
					<div class="post-datetime">
						1 Aug 2014, 08:48					</div>
				</div>
				<div class="post-content content">
					<p>I haven&#039;t tested it recently but my WDR4900 hit <a href="http://forums.thinkbroadband.com/dslrouter/t/4251838-dual-band-router.html">416Mbps</a> using a BB snapshot last July.</p><p>There have been substantial code changes since so i don&#039;t know if it still performs that well.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p242370">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">alphasparc</div>
					<div class="post-datetime">
						1 Aug 2014, 10:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>According to the CeroWRT developers routing does increase performance over bridging, but i had assumed it would only be noticeable on the WLAN. Seems not.</p></blockquote></div><p>Interesting will test when i get home.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p242391">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">tmcg</div>
					<div class="post-datetime">
						1 Aug 2014, 16:05					</div>
				</div>
				<div class="post-content content">
					<p>I know some of the primary devs have dismissed hardware nat acceleration as &quot;messy&quot;, but that seems to be the trend in new hardware handling these higher speeds instead of faster CPUs.&nbsp; I would think that hardware accelerated nat for the bulk of traffic over established TCP connections would be a huge perf gain while software nat could still be used for negotiating TCP connections and everything else (UDP, IGMP, DHCP, etc).&nbsp; Or maybe I completely misunderstand the performance bottleneck.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p242397">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						1 Aug 2014, 16:28					</div>
				</div>
				<div class="post-content content">
					<p>The devs dismissed *the existing software implementation of* hardware nat accelleration as messy. Thats a difference to dismissing the entire approach.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p242398">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">qasdfdsaq</div>
					<div class="post-datetime">
						1 Aug 2014, 16:30					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>alphasparc wrote:</cite><blockquote><p>To be honest I don&#039;t think there is any.<br />On Attitude Adjustment my WR1043ND could hit 300+Mbps and the WDR4300 could hit ~400Mbps<br />On Barrier Breaker as above WR1043ND could only hit 200+Mbps and WDR4300 could only hit ~250+Mbps<br />And keep in mind my WR1043ND is overclocked at 430MHZ (+30MHZ from stock) and my WDR4300 is overclocked at 710MHZ(+ 150MHZ from stock).</p></blockquote></div><p>WRT1900AC</p><p>1.2Ghz dual core.</p><p>Runs Openwrt. Wireless is f***ed but hey the guy said he didn&#039;t care about switch or wireless :-P</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p242400">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">qasdfdsaq</div>
					<div class="post-datetime">
						1 Aug 2014, 16:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>tmcg wrote:</cite><blockquote><p>I know some of the primary devs have dismissed hardware nat acceleration as &quot;messy&quot;, but that seems to be the trend in new hardware handling these higher speeds instead of faster CPUs.&nbsp; I would think that hardware accelerated nat for the bulk of traffic over established TCP connections would be a huge perf gain while software nat could still be used for negotiating TCP connections and everything else (UDP, IGMP, DHCP, etc).&nbsp; Or maybe I completely misunderstand the performance bottleneck.</p></blockquote></div><p>It&#039;s the trend because it&#039;s faster and more efficient to produce dedicated hardware to do a job than doing it on a general purpose CPU.</p><p>Personally I took the brute force approach and shoved a dual-core 2.26Ghz x86 CPU in my router.</p>									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 26 to 25 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 10</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=51726&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=51726&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=51726&amp;p=10.html">10</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>