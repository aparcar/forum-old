<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TTL help please.</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p56925">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">baubau</div>
					<div class="post-datetime">
						3 Oct 2007, 11:19					</div>
				</div>
				<div class="post-content content">
					<p>How can i change the ttl to the outgoing packages, and to the incoming packages ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p57015">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">sioux</div>
					<div class="post-datetime">
						4 Oct 2007, 14:22					</div>
				</div>
				<div class="post-content content">
					<p>ipkg install iptables-mod-ipopt kmod-ipt-ipopt<br />be sure ipt_TTL is loaded on startup</p><p>add this two lines to /etc/firewall.user<br />### mangle<br />## ttl<br />iptables -t mangle -A PREROUTING -j TTL --ttl-inc 1<br />iptables -t mangle -A POSTROUTING -j TTL --ttl-inc 1</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p102963">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">gogu_beb</div>
					<div class="post-datetime">
						15 Feb 2010, 13:12					</div>
				</div>
				<div class="post-content content">
					<p>Hi everyone<br /></p><div class="quotebox"><cite>sioux wrote:</cite><blockquote><p>ipkg install iptables-mod-ipopt kmod-ipt-ipopt<br />be sure ipt_TTL is loaded on startup</p></blockquote></div><p>I have an wrt160nl and i use this firmware: <a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/openwrt-ar71xx-wrt160nl-squashfs.bin">http://downloads.openwrt.org/snapshots/ … uashfs.bin</a><br />I installed iptables-mod-ipopt kmod-ipt-ipopt but there is no ipt_TTL</p><p>I used lsmod:<br /></p><div class="codebox"><pre><code>Module                  Size  Used by    Not tainted
nf_nat_tftp              432  0
nf_conntrack_tftp       2400  1 nf_nat_tftp
nf_nat_irc               816  0
nf_conntrack_irc        2512  1 nf_nat_irc
nf_nat_ftp              1328  0
nf_conntrack_ftp        4704  1 nf_nat_ftp
xt_HL                   1280  0
xt_hl                    896  0
xt_MARK                  496  0
ipt_ECN                 1312  0
xt_CLASSIFY              496  0
xt_time                 1552  0
xt_tcpmss                992  0
xt_statistic             816  0
xt_mark                  512  0
xt_length                672  0
ipt_ecn                  976  0
xt_DSCP                 1392  0
xt_dscp                 1008  0
ipt_MASQUERADE           992  2
iptable_nat             2256  1
nf_nat                 10160  5 nf_nat_tftp,nf_nat_irc,nf_nat_ftp,ipt_MASQUERADE          ,iptable_nat
xt_NOTRACK               544  0
iptable_raw              656  1
xt_state                 768  3
nf_conntrack_ipv4       7408  6 iptable_nat,nf_nat
nf_defrag_ipv4           624  1 nf_conntrack_ipv4
nf_conntrack           37424 12 nf_nat_tftp,nf_conntrack_tftp,nf_nat_irc,nf_conn          track_irc,nf_nat_ftp,nf_conntrack_ftp,ipt_MASQUERADE,iptable_nat,nf_nat,xt_NOTRA          CK,xt_state,nf_conntrack_ipv4
ehci_hcd               31120  0
ipt_REJECT              1680  2
xt_TCPMSS               1856  2
ipt_LOG                 4176  0
xt_multiport            1792  0
xt_mac                   576  0
xt_limit                1008  1
iptable_mangle           992  0
iptable_filter           768  1
ip_tables               8480  4 iptable_nat,iptable_raw,iptable_mangle,iptable_f          ilter
xt_tcpudp               1760 13
x_tables                9296 25 xt_HL,xt_hl,xt_MARK,ipt_ECN,xt_CLASSIFY,xt_time,          xt_tcpmss,xt_statistic,xt_mark,xt_length,ipt_ecn,xt_DSCP,xt_dscp,ipt_MASQUERADE,          iptable_nat,xt_NOTRACK,xt_state,ipt_REJECT,xt_TCPMSS,ipt_LOG,xt_multiport,xt_mac          ,xt_limit,ip_tables,xt_tcpudp
ppp_async               6400  0
ath9k                  63264  0
ath9k_common            1840  1 ath9k
ath9k_hw              201024  2 ath9k,ath9k_common
ath                     6944  2 ath9k,ath9k_hw
usbcore                97424  2 ehci_hcd
nls_base                4800  1 usbcore
mac80211              148480  2 ath9k,ath9k_common
cfg80211              111088  4 ath9k,ath9k_common,ath,mac80211
compat_firmware_class     5152  0
compat                   432  0
crc_ccitt                976  1 ppp_async
arc4                     816  2
aes_generic            30256  2
deflate                 1360  0
ecb                     1328  2
cbc                     2016  0
pppoe                   8304  2
pppox                   1216  1 pppoe
ppp_generic            18848  7 ppp_async,pppoe,pppox
slhc                    4176  1 ppp_generic
leds_gpio               1456  0
button_hotplug          2544  0
gpio_buttons            1968  0
input_polldev           1360  1 gpio_buttons
input_core             16896  4 button_hotplug,gpio_buttons,input_polldev</code></pre></div><p>Can someone advise me how to increase TTL?<br />Thanks</p>											<p class="post-edited">(Last edited by <strong>gogu_beb</strong> on 15 Feb 2010, 13:13)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p102982">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">obsy</div>
					<div class="post-datetime">
						15 Feb 2010, 18:23					</div>
				</div>
				<div class="post-content content">
					<p>Recompile yourself with this patch <a href="https://dev.openwrt.org/attachment/ticket/6000/100-ttl_fixes.patch">https://dev.openwrt.org/attachment/tick … ixes.patch</a></p><p>or use mine package: </p><p><a href="http://eko.one.pl/openwrt/kamikaze/trunk/wrt160nl/packages/iptables-mod-ipopt_1.4.6-1_ar71xx.ipk">http://eko.one.pl/openwrt/kamikaze/trun … ar71xx.ipk</a><br /><a href="http://eko.one.pl/openwrt/kamikaze/trunk/wrt160nl/packages/kmod-ipt-ipopt_2.6.32.8-1_ar71xx.ipk">http://eko.one.pl/openwrt/kamikaze/trun … ar71xx.ipk</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p102983">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">gogu_beb</div>
					<div class="post-datetime">
						15 Feb 2010, 18:25					</div>
				</div>
				<div class="post-content content">
					<p>Can you tell me how to recompile with that patch please.<br />What are the steps to compile the patch<br />Thanks</p>											<p class="post-edited">(Last edited by <strong>gogu_beb</strong> on 15 Feb 2010, 18:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p102986">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">obsy</div>
					<div class="post-datetime">
						15 Feb 2010, 18:57					</div>
				</div>
				<div class="post-content content">
					<p>Full system with patch, not just a patch.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p102991">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">obsy</div>
					<div class="post-datetime">
						15 Feb 2010, 19:18					</div>
				</div>
				<div class="post-content content">
					<p>patch -p0 &lt; 100-ttl_fixes.patch</p><p>in the main source directory</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p120047">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">HuTPaT</div>
					<div class="post-datetime">
						30 Oct 2010, 22:03					</div>
				</div>
				<div class="post-content content">
					<p>The patch works great on backfire 10.03, but gives some errors on trunk version.<br />If someone can help ...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p149860">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">dash17291</div>
					<div class="post-datetime">
						29 Nov 2011, 15:06					</div>
				</div>
				<div class="post-content content">
					<p>The TTL target is still not included in Backfire 10.03.1-RC5...</p><p>I&#039;m unhappy.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p150301">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Olipro</div>
					<div class="post-datetime">
						4 Dec 2011, 20:59					</div>
				</div>
				<div class="post-content content">
					<p>I created a patch for trunk, it provides you with TTL match+target and CT target.</p><p><a href="https://dev.openwrt.org/ticket/10527">https://dev.openwrt.org/ticket/10527</a></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>