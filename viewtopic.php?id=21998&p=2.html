<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Belkin  F5D8235-4 N router with gigabit switch</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 15 Apr 2018 and 25 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=21998&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p120603">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">dpeterson3</div>
					<div class="post-datetime">
						8 Nov 2010, 06:57					</div>
				</div>
				<div class="post-content content">
					<p>Just got to start working on mine again as well. The latest trunk build of Openwrt boots just fine on this router, but I can&#039;t even see the ethernet devices much less use them. I know I read somewhere that the drivers for the wireless are proprietary, so you can only get them in binary form from the stock firmware source. However, there is a driver listed for the switch chip in the kernel configuration. I don&#039;t quite understand why I can&#039;t see the switch device when I boot. Maybe it has something to do with the initialization DorianGrey mentioned in his last post.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p121522">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">roman</div>
					<div class="post-datetime">
						20 Nov 2010, 05:10					</div>
				</div>
				<div class="post-content content">
					<p>Hi all</p><p>This board looks very interesting, so..<br />I&#039;ve been working on this board lately and have it running openwrt now (well few months ago..).<br />Patches are submitted to openwrt-devel list (I hope they will be commited soon) and also available here: <a href="http://advem.lv/openwrt/">http://advem.lv/openwrt/</a><br />Last patch in the directory is not submitted (configs) as I didn&#039;t understand how to profile configuration files for different boards.<br />Also there is no support for USB now but I hope I&#039;ll have time to add it or maybe someone else will do it.<br />Patches are tested but it would be good to be tested by others also.</p><p>Waiting for comments...</p><p>Regards,<br />Roman Yeryomin</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p121581">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">MASSEY</div>
					<div class="post-datetime">
						20 Nov 2010, 23:51					</div>
				</div>
				<div class="post-content content">
					<p>Wow.... that looks complicated.....</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p121983">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">roman</div>
					<div class="post-datetime">
						26 Nov 2010, 00:54					</div>
				</div>
				<div class="post-content content">
					<p>Patches 01 and 03 where commited (Belkin board support and rtl8366rb switch mods) to trunk so I&#039;ve deleted them.<br />Profile patches reworked and new versions sent to the list, so I expect them to be commited soon.</p><p>But there is question with ramips_esw.c patch - it partially breaks ramips target. Without this change all other patches are useless - ethernet simply won&#039;t work.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p121986">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">Xander</div>
					<div class="post-datetime">
						26 Nov 2010, 03:05					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m working on USB support right now. It&#039;s mostly done but not tested yet. I&#039;ll publish what I have soon.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122012">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">roman</div>
					<div class="post-datetime">
						26 Nov 2010, 12:33					</div>
				</div>
				<div class="post-content content">
					<p>Xander, I can help testing!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122190">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">Xander</div>
					<div class="post-datetime">
						29 Nov 2010, 04:01					</div>
				</div>
				<div class="post-content content">
					<p>Well, it is not very easy in fact...</p><p>I&#039;ve modified some recent drivers that were published on linuxppc-dev in October. I had to convert them to using platform bus instead of of_platform and fix several bugs and arch-specific things. BTW the driver requires at least kernel 2.6.35. I&#039;m using it on 2.6.36. It&#039;s still missing some rt305x/board specific initialization because it can&#039;t even initialize AHB. At least I fixed some terrible bugs. I&#039;m diving into docs.</p><p>The code is here: <a href="https://github.com/ago/openwrt">https://github.com/ago/openwrt</a><br />Don&#039;t forget to add rt305x_register_usb() call to your machine type initialization function.</p><p>Can you please test the code? I&#039;d want to know if my problems are board specific (proboably not) or rt305x specific. If the latter is true I have some ideas for further testing.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122235">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">Xander</div>
					<div class="post-datetime">
						29 Nov 2010, 20:58					</div>
				</div>
				<div class="post-content content">
					<p>I made AHB working but now it lockups. WIll publish the code soon.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122252">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">Xander</div>
					<div class="post-datetime">
						30 Nov 2010, 04:33					</div>
				</div>
				<div class="post-content content">
					<p>Ok, found the problem. If I don&#039;t enable interrupts from the usb controller it doesn&#039;t hang. But the problem is not in the interrupt hander of the driver because it doesn&#039;t ever take control (it doesn&#039;t printk). So the problem is in the board specific irq code related/INTC code. Any thoughts?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122254">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">Xander</div>
					<div class="post-datetime">
						30 Nov 2010, 06:43					</div>
				</div>
				<div class="post-content content">
					<p>It works!!!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122285">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">roman</div>
					<div class="post-datetime">
						30 Nov 2010, 17:35					</div>
				</div>
				<div class="post-content content">
					<p>Just noticed your messages.. cool!<br />Can you make a patch which can be applied to openwrt trunk?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122287">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">Xander</div>
					<div class="post-datetime">
						30 Nov 2010, 17:39					</div>
				</div>
				<div class="post-content content">
					<p>Yes, it&#039;s in progress. I&#039;ll send it to openwrt-devel and publish in my git repo.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123484">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">ffboy2009</div>
					<div class="post-datetime">
						19 Dec 2010, 10:40					</div>
				</div>
				<div class="post-content content">
					<p>any progress on this unit?<br />i got this machine,but really don&#039;t like the official firmware<br />hope can supported by OpenWrt.<br />thx!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123668">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">DorianGrey</div>
					<div class="post-datetime">
						22 Dec 2010, 04:35					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys. I see you went deeper than my superficial attempts for doing something with this router. Kudos for that.<br />I&#039;ve recently noticed I cannot put this router into bridge mode (no options for doing it), and thus I would be interested to switch to openwrt firmware, and reading above I understand you guys made it work <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> I mean does it fully work really? It seems like a dream come true xD</p><p>As I understand it the working code is here ? <a href="https://github.com/ago/openwrt">https://github.com/ago/openwrt</a><br />Can anyone say what doesn&#039;t work? <br />I&#039;m assuming everything works.. ?<br />Anyway I&#039;m not sure how to burn that yet, any help would be appreciated.. I still have 2.01.07 official firmware</p><p>Thanks a bunch!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123669">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">Xander</div>
					<div class="post-datetime">
						22 Dec 2010, 04:39					</div>
				</div>
				<div class="post-content content">
					<p>No, the published code is not fully functional yet. I fixed some bugs but not all of them, I think. And it&#039;s still a mess. I&#039;m quite busy now but I&#039;ll publish everything soon. I&#039;ll have to fix bugs and rebase it against the current trunk.</p>											<p class="post-edited">(Last edited by <strong>Xander</strong> on 22 Dec 2010, 04:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123671">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">DorianGrey</div>
					<div class="post-datetime">
						22 Dec 2010, 04:48					</div>
				</div>
				<div class="post-content content">
					<p>Hey, ok, thanks for the uber quick reply <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />That sounds good.<br />I was reading some of earlier posts and I guess I&#039;ll have to use this config that herb mentioned <a href="http://olecam.online.fr/dir-300-b2/rt305x.config">http://olecam.online.fr/dir-300-b2/rt305x.config</a><br />since I don&#039;t see a(n obvious) config file in your repo <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />I think I&#039;ll try to compile something, not sure which (your repo or current openwrt one)<br />Hope to hear from you soon.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123733">
				<div class="post-metadata">
					<div class="post-num">Post #42</div>
					<div class="post-author">roman</div>
					<div class="post-datetime">
						22 Dec 2010, 20:00					</div>
				</div>
				<div class="post-content content">
					<p>Actually the only thing which wasn&#039;t working was usb until Xander appeared <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />I&#039;m using this router with openwrt for about 4-5 months already (without usb).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123757">
				<div class="post-metadata">
					<div class="post-num">Post #43</div>
					<div class="post-author">DorianGrey</div>
					<div class="post-datetime">
						23 Dec 2010, 02:31					</div>
				</div>
				<div class="post-content content">
					<p>Could you give a link to your config please roman ?<br />I got side-tracked and forgot to build anything, was trying to make windows 7&#039;s tree folding expand/collapse icons not fade away when not mover over or focused (seems almost impossible probably have to modify DirectUI XML inside shell32.dll or shellstyle.dll or somewhere - no luck yet). <br />Anyway, if anyone could give a few hints on how to build openwrt for F5D8235-4 v2000 would be greatly appreciated.<br />Thanks in advance <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124386">
				<div class="post-metadata">
					<div class="post-num">Post #44</div>
					<div class="post-author">roman</div>
					<div class="post-datetime">
						3 Jan 2011, 09:06					</div>
				</div>
				<div class="post-content content">
					<p>sorry for delay and happy New Year to everybody! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>I&#039;ve put my .config to the same folder with patches. It&#039;s from revision 24146. I&#039;ve seen that there were changes to ramips, so it could be that this .config can&#039;t be applied directly. But you always can checkout 24146.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124408">
				<div class="post-metadata">
					<div class="post-num">Post #45</div>
					<div class="post-author">ahmak</div>
					<div class="post-datetime">
						3 Jan 2011, 17:16					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />&nbsp; &nbsp; &nbsp; Looking for a RT305x port that can have network support. Has anybody been able to support even 1 Ethernet ? I could do a ping with one image but nothing beyond ping (and even ping took loong time). </p><p>I am now trying Xanders build if I could get something better. My hardware is a typical OEM with RT3052 (8M/32M) with 4+1 Ethernet ports and the PHY used is from the SoC.</p><p>Please advice,</p><p>-Happy New Year and happy hacking. :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124410">
				<div class="post-metadata">
					<div class="post-num">Post #46</div>
					<div class="post-author">ahmak</div>
					<div class="post-datetime">
						3 Jan 2011, 17:52					</div>
				</div>
				<div class="post-content content">
					<p>Xander&#039;s build gave&nbsp; same results as standard openwrt -- OS is up but no network and no USB</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124436">
				<div class="post-metadata">
					<div class="post-num">Post #47</div>
					<div class="post-author">roman</div>
					<div class="post-datetime">
						3 Jan 2011, 21:54					</div>
				</div>
				<div class="post-content content">
					<p>Xanders build (and mine also) is for Belkin F5D8235 which has external gigabit switch - of cause it&#039;s not working for you. You should try other images (whr-g300n or fonera for example) which are using internal switch (I suppose this is your case).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124485">
				<div class="post-metadata">
					<div class="post-num">Post #48</div>
					<div class="post-author">ahmak</div>
					<div class="post-datetime">
						4 Jan 2011, 15:22					</div>
				</div>
				<div class="post-content content">
					<p>Thanks - I could flash the fon firmware. Strange thing now is I can ping but ssh/telnet/web access are all disabled. <br />Can you please advice what could be the reason ? I can ping another machine and it can get ping response both ways.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124711">
				<div class="post-metadata">
					<div class="post-num">Post #49</div>
					<div class="post-author">DanaG</div>
					<div class="post-datetime">
						6 Jan 2011, 23:46					</div>
				</div>
				<div class="post-content content">
					<p>Last time I tried to build OpenWrt, Xander&#039;s build didn&#039;t have a target for this Belkin, and the stock OpenWRT didn&#039;t have the ramips external-switch patches.&nbsp; Oh, and those patches... are they against Xander&#039;s tree, or the stock tree?&nbsp; They seem to have missed the change from ramips_esw_wr to rt305x_esw_wr, in recent stock OpenWRT.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p127056">
				<div class="post-metadata">
					<div class="post-num">Post #50</div>
					<div class="post-author">Xander</div>
					<div class="post-datetime">
						1 Feb 2011, 14:58					</div>
				</div>
				<div class="post-content content">
					<p>I finally rebased and tested my patchset with USB support against the latest trunk. Just sent it to openwrt-devel.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=21998&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>