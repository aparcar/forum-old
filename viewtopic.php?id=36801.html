<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Option Icon 515m / GI1515 / TL-WR703N / OpenWRT trunk r31650</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 24 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p167175">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">600cc</div>
					<div class="post-datetime">
						12 May 2012, 17:00					</div>
				</div>
				<div class="post-content content">
					<p>So I&#039;m trying to get an Option Icon 515m to work with my shiny new TP-Link TL-WR703N running OpenWRT trunk r31650.</p><p>I&#039;ve read <a href="http://wiki.openwrt.org/doc/recipes/3gdongle">http://wiki.openwrt.org/doc/recipes/3gdongle</a> and followed the steps therein, but without complete success.</p><p>This is what I see in dmesg:<br /></p><div class="codebox"><pre><code>[   10.110000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[   10.120000] ehci-platform ehci-platform: Generic Platform EHCI Controller
[   10.130000] ehci-platform ehci-platform: new USB bus registered, assigned bus number 1
[   10.160000] ehci-platform ehci-platform: irq 3, io mem 0x1b000000
[   10.180000] ehci-platform ehci-platform: USB 2.0 started, EHCI 1.00
[   10.180000] hub 1-0:1.0: USB hub found
[   10.180000] hub 1-0:1.0: 1 port detected
[   10.210000] nf_conntrack version 0.5.0 (455 buckets, 1820 max)
[   10.560000] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
[   10.570000] usb 1-1: new high-speed USB device number 2 using ehci-platform
[   10.730000] usbcore: registered new interface driver usbserial
[   10.730000] USB Serial support registered for generic
[   10.770000] usb 1-1: config 1 interface 1 altsetting 0 bulk endpoint 0x89 has invalid maxpacket 64
[   10.770000] usb 1-1: config 1 interface 1 altsetting 0 bulk endpoint 0x2 has invalid maxpacket 64
[   10.790000] usbcore: registered new interface driver usbserial_generic
[   10.790000] usbserial: USB Serial Driver core
[   10.890000] USB Serial support registered for GSM modem (1-port)
[   10.890000] usbcore: registered new interface driver option
[   10.900000] option: v0.7.2:USB Driver for GSM modems</code></pre></div><p>This is the contents of /dev <em>without </em>the 515m connected:<br /></p><div class="codebox"><pre><code>root@OpenWrt:~# ls /dev
console    mtd1ro     mtd5ro     port       ttyS0      ttyS2      urandom
full       mtd2       mtdblock0  ppp        ttyS1      ttyS3      usb1
kmsg       mtd2ro     mtdblock1  ptmx       ttyS10     ttyS4      watchdog
log        mtd3       mtdblock2  pts        ttyS11     ttyS5      zero
mem        mtd3ro     mtdblock3  random     ttyS12     ttyS6
mtd0       mtd4       mtdblock4  shm        ttyS13     ttyS7
mtd0ro     mtd4ro     mtdblock5  tty        ttyS14     ttyS8
mtd1       mtd5       null       ttyATH0    ttyS15     ttyS9</code></pre></div><p>And with the 515m connected:<br /></p><div class="codebox"><pre><code>root@OpenWrt:~# ls /dev
1-1        mtd1       mtd5       null       ttyATH0    ttyS15     ttyS9
console    mtd1ro     mtd5ro     port       ttyS0      ttyS2      urandom
full       mtd2       mtdblock0  ppp        ttyS1      ttyS3      usb1
kmsg       mtd2ro     mtdblock1  ptmx       ttyS10     ttyS4      watchdog
log        mtd3       mtdblock2  pts        ttyS11     ttyS5      zero
mem        mtd3ro     mtdblock3  random     ttyS12     ttyS6
mtd0       mtd4       mtdblock4  shm        ttyS13     ttyS7
mtd0ro     mtd4ro     mtdblock5  tty        ttyS14     ttyS8</code></pre></div><p>This appears in /proc/bus/usb/devices:<br /></p><div class="codebox"><pre><code>T:  Bus=01 Lev=01 Prnt=01 Port=00 Cnt=01 Dev#=  4 Spd=480  MxCh= 0
D:  Ver= 2.00 Cls=ff(vend.) Sub=ff Prot=ff MxPS=64 #Cfgs=  1
P:  Vendor=0af0 ProdID=d157 Rev= 1.00
S:  Manufacturer=Option Wireless Technology
S:  Product=GlobeTrotter GI1515
C:* #Ifs= 6 Cfg#= 1 Atr=80 MxPwr=500mA
I:* If#= 0 Alt= 0 #EPs= 2 Cls=ff(vend.) Sub=ff Prot=ff Driver=(none)
E:  Ad=81(I) Atr=02(Bulk) MxPS= 512 Ivl=0ms
E:  Ad=01(O) Atr=02(Bulk) MxPS= 512 Ivl=0ms
I:* If#= 1 Alt= 0 #EPs= 2 Cls=ff(vend.) Sub=ff Prot=ff Driver=(none)
E:  Ad=89(I) Atr=02(Bulk) MxPS=  64 Ivl=0ms
E:  Ad=02(O) Atr=02(Bulk) MxPS=  64 Ivl=0ms
I:* If#= 2 Alt= 0 #EPs= 3 Cls=ff(vend.) Sub=ff Prot=ff Driver=(none)
E:  Ad=8a(I) Atr=02(Bulk) MxPS= 512 Ivl=0ms
E:  Ad=03(O) Atr=02(Bulk) MxPS= 512 Ivl=0ms
E:  Ad=8b(I) Atr=03(Int.) MxPS=  10 Ivl=32ms
I:* If#= 3 Alt= 0 #EPs= 2 Cls=ff(vend.) Sub=ff Prot=ff Driver=(none)
E:  Ad=8c(I) Atr=02(Bulk) MxPS= 512 Ivl=0ms
E:  Ad=04(O) Atr=02(Bulk) MxPS= 512 Ivl=0ms
I:* If#= 4 Alt= 0 #EPs= 2 Cls=ff(vend.) Sub=ff Prot=ff Driver=(none)
E:  Ad=8d(I) Atr=02(Bulk) MxPS= 512 Ivl=0ms
E:  Ad=05(O) Atr=02(Bulk) MxPS= 512 Ivl=0ms
I:* If#= 5 Alt= 0 #EPs= 2 Cls=08(stor.) Sub=06 Prot=50 Driver=(none)
E:  Ad=8e(I) Atr=02(Bulk) MxPS= 512 Ivl=0ms
E:  Ad=06(O) Atr=02(Bulk) MxPS= 512 Ivl=0ms</code></pre></div><p>The 515m works out of the box with a Zoom 4506 (apparently based on Linux, judging by the system log entries which mention Busybox, but unable to confirm this since Zoom denies using any open-source code in its product)</p><p>What am I missing? What have I overlooked?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167186">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">maurer</div>
					<div class="post-datetime">
						12 May 2012, 20:37					</div>
				</div>
				<div class="post-content content">
					<p>for Option Icon you need hso modules.<br />Please install <a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/kmod-usb-net-hso_3.3.5-1_ar71xx.ipk">http://downloads.openwrt.org/snapshots/ â€¦ ar71xx.ipk</a><br />and post again dmesg<br />if it&#039;s still doesn&#039;t work you might need to apply this patch to trunk sources and follow: <a href="https://dev.openwrt.org/ticket/6995">https://dev.openwrt.org/ticket/6995</a></p>											<p class="post-edited">(Last edited by <strong>maurer</strong> on 12 May 2012, 20:41)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167223">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">600cc</div>
					<div class="post-datetime">
						13 May 2012, 08:15					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the suggestion. I installed kmod-usb-net-hso (v3.3.5-1) and this is what dmesg looks like now:<br /></p><div class="codebox"><pre><code>[    9.610000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[    9.620000] ehci-platform ehci-platform: Generic Platform EHCI Controller
[    9.630000] ehci-platform ehci-platform: new USB bus registered, assigned bus number 1
[    9.660000] ehci-platform ehci-platform: irq 3, io mem 0x1b000000
[    9.680000] ehci-platform ehci-platform: USB 2.0 started, EHCI 1.00
[    9.680000] hub 1-0:1.0: USB hub found
[    9.680000] hub 1-0:1.0: 1 port detected
[    9.710000] nf_conntrack version 0.5.0 (455 buckets, 1820 max)
[   10.050000] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
[   10.070000] usb 1-1: new high-speed USB device number 2 using ehci-platform
[   10.250000] usbcore: registered new interface driver usbserial
[   10.250000] USB Serial support registered for generic
[   10.260000] usb 1-1: config 1 interface 1 altsetting 0 bulk endpoint 0x89 has invalid maxpacket 64
[   10.270000] usb 1-1: config 1 interface 1 altsetting 0 bulk endpoint 0x2 has invalid maxpacket 64
[   10.280000] usbcore: registered new interface driver usbserial_generic
[   10.280000] usbserial: USB Serial Driver core
[   10.330000] hso: Unknown symbol rfkill_unregister (err 0)
[   10.340000] hso: Unknown symbol rfkill_destroy (err 0)
[   10.340000] hso: Unknown symbol rfkill_alloc (err 0)
[   10.350000] hso: Unknown symbol rfkill_register (err 0)
[   10.400000] USB Serial support registered for GSM modem (1-port)
[   10.400000] usbcore: registered new interface driver option
[   10.410000] option: v0.7.2:USB Driver for GSM modems</code></pre></div><p>I&#039;ve never done any development work, so the thought of setting up toolchains and cross-compilers is a wee bit daunting. My provider is sending me a Huawei E367 (should arrive on Tuesday) so I may just wait for that. If that also doesn&#039;t work then I&#039;ll grab the bit between my teeth and start learning how to compile.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167346">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">aport</div>
					<div class="post-datetime">
						14 May 2012, 20:18					</div>
				</div>
				<div class="post-content content">
					<p>Only a handful of Option cards use the HSO driver.</p><p>Try this:<br /></p><div class="codebox"><pre><code>echo &quot;0af0 d157&quot; &gt;/sys/bus/usb-serial/drivers/option1/new_id</code></pre></div><p>This tells the option driver about your device and gives it a chance to claim it.</p><p>Run dmesg again to see if it worked.</p><p>edit: Yuck, it looks like this card does use the HSO driver and the hsoconnect scripts.</p>											<p class="post-edited">(Last edited by <strong>aport</strong> on 14 May 2012, 20:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167522">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">600cc</div>
					<div class="post-datetime">
						16 May 2012, 21:05					</div>
				</div>
				<div class="post-content content">
					<p>The Huawei E367 worked straight away. Guess I&#039;ll stick with that one, then.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>