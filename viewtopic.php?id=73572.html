<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> qmi, mbim, ncm, rndis</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 13 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p373951">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">balanga</div>
					<div class="post-datetime">
						18 Mar 2018, 09:41					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m trying to follow <a href="https://openwrt.org/docs/guide-user/network/wan/wwan/3gdongle?s">https://openwrt.org/docs/guide-user/net â€¦ 3gdongle?s</a>[]=usb&amp;s[]=modem for setting up Internet access via a USB modem and am immediately presented with three options:-</p><p>qmi and mbim, see How To Use LTE modem in QMI mode for WAN connection<br />ncm, see How To Use LTE modem in NCM mode for WAN connection<br />rndis, see How To Use LTE modem in RNDIS mode for WAN connection</p><br /><p>Unfortunately I don&#039;t know which I want or how to choose.</p><p>Any guidance would be appreciated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p373966">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						18 Mar 2018, 15:04					</div>
				</div>
				<div class="post-content content">
					<p>Plug the modem into a full Linux desktop or laptop.&nbsp; &nbsp;Confirm that it can connect to the Internet, and check dmesg to see which driver(s) it uses.</p><p>This will save a lot of headache trying to get the modem working on OpenWrt.</p>											<p class="post-edited">(Last edited by <strong>mk24</strong> on 18 Mar 2018, 15:05)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p373980">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">balanga</div>
					<div class="post-datetime">
						18 Mar 2018, 17:36					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve booted up Arch Linux to a command prompt, and have a choice of four USB modems.</p><p>What program should I try to connect to the Internet with?</p><p>The one I&#039;ve plugged in at the moment is attached to ttyUSB3, ttyUSB4, ttyUSB5</p><p>lsusb tells me it&#039;s a </p><p>12d1:1001 Huawei Technologies E161/E169/E620/E800 HSDPA Modem.</p><p>Using Minicom on a different system ATI showed it was a Model K3520.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p373982">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">balanga</div>
					<div class="post-datetime">
						18 Mar 2018, 17:49					</div>
				</div>
				<div class="post-content content">
					<p>Another modem I just tried shows it is attached to ttyUSB3, ttyUSB4, ttyUSB5, but in addition dmesg says:-<br /></p><div class="codebox"><pre><code>usbcore: registered new interface driver cdc_ether
usbcore: registered new interface driver rndis_host
usbcore: registered new interface driver rndis_wlan</code></pre></div><p>lsusb says<br />12d1:1c05 Huawei Technologies Broadband stick (modem on)</p><p>Under minicom ATI shows<br />Model: E173</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p373986">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						18 Mar 2018, 18:10					</div>
				</div>
				<div class="post-content content">
					<p>Try to use ROOter (<a href="http://ofmodemsandmen.com">http://ofmodemsandmen.com</a>).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p373989">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">balanga</div>
					<div class="post-datetime">
						18 Mar 2018, 18:58					</div>
				</div>
				<div class="post-content content">
					<p>Using a Hilink Huawei E3372....</p><p>Dnesg:-<br /></p><div class="codebox"><pre><code>usb 2-1.2: new high-speed USB device number 11 using ehci-pci
usb 2-1.2: New USB device found, idVendor=12d1, idProduct=14dc
usb 2-1.2: New USB device strings: Mfr=1, Product=2, SerialNumber=0
usb 2-1.2: Product: HUAWEI_MOBILE
usb 2-1.2: Manufacturer: HUAWEI_MOBILE
cdc_ether 2-1.2:1.0 eth0: register &#039;cdc_ether&#039; at usb-0000:00:1d.0-1.2, CDC Ethernet Device, c:5b:8f:27:9a:64
usb-storage 2-1.2:1.2: USB Mass Storage device detected
scsi host6: usb-storage 2-1.2:1.2
cdc_ether 2-1.2:1.0 enp0s29u1u2: renamed from eth0
scsi 6:0:0:0: Direct-Access     HUAWEI   TF CARD Storage  2.31 PQ: 0 ANSI: 2
sd 6:0:0:0: Power-on or device reset occurred
sd 6:0:0:0: [sdb] Attached SCSI removable disk
sd 6:0:0:0: [sdb] 62521344 512-byte logical blocks: (32.0 GB/29.8 GiB)
sd 6:0:0:0: [sdb] Write cache: enabled, read cache: enabled, doesn&#039;t support DPO or FUA
sdb: sdb1 sdb2</code></pre></div><p>lsusb says:<br /> 011: ID 12d1:14dc Huawei Technologies Co., Ltd. E33372 LTE/UMTS/GSM HiLink Modem/Networkcard</p><p>ip a shows these entries which I&#039;m not familiar with, which may be related to this modem:<br /></p><div class="codebox"><pre><code>3: wlp3s0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc mq state DOWN group default qlen 1000
    link/ether 8c:70:5a:64:e5:dc brd ff:ff:ff:ff:ff:ff
4: wwp0s29u1u4: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UNKNOWN group default qlen 1000
    link/ether f2:13:8c:df:ff:22 brd ff:ff:ff:ff:ff:ff
    inet6 fe80::8374:fc45:50e8:e529/64 scope link 
       valid_lft forever preferred_lft forever
7: enp0s29u1u2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 0c:5b:8f:27:9a:64 brd ff:ff:ff:ff:ff:ff
    inet 192.168.3.10/24 brd 192.168.3.255 scope global noprefixroute enp0s29u1u2
       valid_lft forever preferred_lft forever
    inet6 fe80::5d63:365c:6034:add5/64 scope link 
       valid_lft forever preferred_lft forever</code></pre></div>											<p class="post-edited">(Last edited by <strong>balanga</strong> on 18 Mar 2018, 19:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p374055">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						19 Mar 2018, 16:47					</div>
				</div>
				<div class="post-content content">
					<p>It&#039;s a RNDIS device then.</p><p>These don&#039;t work by creating /dev/ttyUSB ports.&nbsp; Instead you get an Ethernet-like port tied into the kernel&#039;s networking system.&nbsp; I believe that under the new naming system, it&#039;s the wwp port.&nbsp; OpenWrt will name it usb0.</p><p>Install kmod-usb-net-rndis and plug in the modem.&nbsp; You should see a usb0 port with <strong>ifconfig -a</strong>.&nbsp; Then edit your networks to link usb0 to a WAN.&nbsp; Generally you can start with the default configuration and just change the WAN physical settings from the Ethernet port to usb0.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>