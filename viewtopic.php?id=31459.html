<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [RedBoot] VFS: Cannot open root device &quot;31:0N&quot; or unknown-block(31,N)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 7 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p141730">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">lumm</div>
					<div class="post-datetime">
						20 Aug 2011, 09:38					</div>
				</div>
				<div class="post-content content">
					<p>I have tried OpenWrt 10.03 / 10.03.1-rc5 / trunk versions on two boards(may be Atheros pb44) with different flash partitions.<br />Boot loader is redboot, built-in with the boards, and I can not modify it or get more informations form vendor. <br />Kernel can be loaded successfully, but it seems rootfs can not be found.<br />I have no idea with this problem, I tried root=31:0N, root=/dev/mtdblockN, root=1f0N, and I am sure kernel option MTD has been selected.<br />Please point me a way to think or solve this problem, thank you.</p><p>Boot message as below:<br /></p><div class="codebox"><pre><code>+VSC8601: did not find unit 1
Ethernet eth0: MAC address 00:03:7f:ff:ff:fe
IP: 172.1.0.2/255.255.255.0, Gateway: 172.1.0.1
Default server: 172.1.0.1
RedBoot(tm) bootstrap and debug environment [ROMRAM]
Non-certified release, version UNKNOWN - built 18:49:43, Dec 25 2010
Copyright (C) 2000, 2001, 2002, 2003, 2004 Red Hat, Inc.
Board: pb44 
RAM: 0x80000000-0x88000000, [0x80050a30-0x80fe1000] available
FLASH: 0xbf000000 - 0xbfff0000, 256 blocks of 0x00010000 bytes each.
== Executing boot script in 3.000 seconds - enter ^C to abort
RedBoot&gt; fis load -l vmlinux
Image loaded from 0x80060000-0x802e499c
RedBoot&gt; exec
Now booting linux kernel:
 Base address 0x80050000 Entry 0x80060000
 Cmdline : console=ttyS0,115200 root=31:04 rootfstype=jffs2 init=/sbin/init mem=60M@0
Linux version 2.6.32.27 (root@wsa) (gcc version 4.3.3 (GCC) ) #5 Thu Aug 18 11:42:03 EDT 2011
bootconsole [early0] enabled
CPU revision is: 00019374 (MIPS 24Kc)
Atheros AR7161 rev 2, CPU:680.000 MHz, AHB:170.000 MHz, DDR:340.000 MHz
Determined physical RAM map:
 memory: 04000000 @ 00000000 (usable)
User-defined physical RAM map:
 memory: 03c00000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00003c00
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00003c00
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 15240
Kernel command line: console=ttyS0,115200 root=31:04 rootfstype=jffs2 init=/sbin/init mem=60M@0 board=PB44 ethaddr=00.03.7f.ff.ff.fe
PID hash table entries: 256 (order: -2, 1024 bytes)
Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
Writing ErrCtl register=0007f802
Readback ErrCtl register=0007f802
Memory: 57760k/61440k available (2064k kernel code, 3612k reserved, 376k data, 136k init, 0k highmem)
SLUB: Genslabs=7, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
Hierarchical RCU implementation.
NR_IRQS:56
Calibrating delay loop... 452.19 BogoMIPS (lpj=2260992)
Mount-cache hash table entries: 512
NET: Registered protocol family 16
MIPS: machine is Atheros PB44
registering PCI controller with io_map_base unset
bio: create slab &lt;bio-0&gt; at 0
i2c-gpio i2c-gpio.0: using pins 1 (SDA) and 0 (SCL)
pci 0000:00:00.0: PME# supported from D0 D1 D2 D3hot
pci 0000:00:00.0: PME# disabled
pci 0000:00:11.0: PME# supported from D0 D3hot
pci 0000:00:11.0: PME# disabled
pci 0000:00:12.0: PME# supported from D0 D3hot
pci 0000:00:12.0: PME# disabled
PCI: mapping irq 48 to pin1@0000:00:11.0
PCI: mapping irq 49 to pin1@0000:00:12.0
Switching to clocksource MIPS
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 2048 (order: 2, 16384 bytes)
TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
TCP: Hash tables configured (established 2048 bind 2048)
TCP reno registered
NET: Registered protocol family 1
squashfs: version 4.0 (2009/01/31) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) (SUMMARY)  ? 2001-2006 Red Hat, Inc.
yaffs Aug 18 2011 11:41:56 Installing. 
msgmni has been set to 112
io scheduler noop registered
io scheduler deadline registered (default)
Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A
console [ttyS0] enabled, bootconsole disabled
console [ttyS0] enabled, bootconsole disabled
Atheros AR71xx SPI Controller driver version 0.2.4
m25p80 spi0.0: s25sl12801 (16384 Kbytes)
Searching for RedBoot partition table in spi0.0 at offset 0xfe0000
8 RedBoot partitions found on MTD device spi0.0
Creating 8 MTD partitions on &quot;spi0.0&quot;:
0x000000000000-0x000000040000 : &quot;RedBoot&quot;
0x000000040000-0x000000050000 : &quot;Reserved&quot;
0x000000050000-0x000000150000 : &quot;Config&quot;
0x000000150000-0x000000230000 : &quot;vmlinux&quot;
0x0000002a0000-0x000000fe0000 : &quot;filesystem&quot;
0x000000fe0000-0x000000fef000 : &quot;FIS directory&quot;
0x000000fef000-0x000000ff0000 : &quot;RedBoot config&quot;
0x000000ff0000-0x000001000000 : &quot;boardconfig&quot;
pb44-spi pb44-spi: can&#039;t setup spi0.1, status -22
ag71xx_mdio: probed
eth0: Atheros AG71xx at 0xb9000000, irq 4
eth0: no PHY found with phy_mask=00000001
eth0: Atheros AG71xx at 0xba000000, irq 5
Atheros AR71xx hardware watchdog driver version 0.1.0
TCP westwood registered
NET: Registered protocol family 17
Bridge firewalling registered
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
Cowardly refusing to erase blocks on filesystem with no valid JFFS2 nodes
empty_blocks 0, bad_blocks 0, c-&gt;nr_blocks 212
VFS: Cannot open root device &quot;31:04&quot; or unknown-block(31,4)
Please append a correct &quot;root=&quot; boot option; here are the available partitions:
1f00             256 mtdblock0 (driver?)
1f01              64 mtdblock1 (driver?)
1f02            1024 mtdblock2 (driver?)
1f03             896 mtdblock3 (driver?)
1f04           13568 mtdblock4 (driver?)
1f05              60 mtdblock5 (driver?)
1f06               4 mtdblock6 (driver?)
1f07              64 mtdblock7 (driver?)
Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(31,4)</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141747">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">aerodyne</div>
					<div class="post-datetime">
						20 Aug 2011, 15:49					</div>
				</div>
				<div class="post-content content">
					<p>Did you try any of the squashfs variant for your device?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141749">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">lumm</div>
					<div class="post-datetime">
						20 Aug 2011, 15:58					</div>
				</div>
				<div class="post-content content">
					<p>Thank you for your reply.<br />I ever tried rootfstype=squashfs,jffs2,yaffs2?the same problem and panic yet.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141750">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">aerodyne</div>
					<div class="post-datetime">
						20 Aug 2011, 16:16					</div>
				</div>
				<div class="post-content content">
					<p>Oh, ... I think people would want to know how and which file you have flashed your unit with.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>