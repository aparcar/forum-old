<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Tp-Link td-w8970</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 26 Mar 2018 and 7 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 6 of 16</div><nav><ul><li><a href="viewtopic.php%3Fid=42380&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42380&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=42380&amp;p=5.html">5</a></li><li class="pagination-current"><span>6</span></li><li><a href="viewtopic.php%3Fid=42380&amp;p=7.html">7</a></li><li><a href="viewtopic.php%3Fid=42380&amp;p=8.html">8</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42380&amp;p=16.html">16</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p271376">
				<div class="post-metadata">
					<div class="post-num">Post #126</div>
					<div class="post-author">gupetulya</div>
					<div class="post-datetime">
						5 Apr 2015, 19:24					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys, I am writing through an interpreter, please help to restore the native firmware of TP-Link. do everything according to instructions but he always goes to reboot, if not difficult to lay out detailed instructions</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p271379">
				<div class="post-metadata">
					<div class="post-num">Post #127</div>
					<div class="post-author">gupetulya</div>
					<div class="post-datetime">
						5 Apr 2015, 19:27					</div>
				</div>
				<div class="post-content content">
					<p>TD-W8970 ver 1.2</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p271389">
				<div class="post-metadata">
					<div class="post-num">Post #128</div>
					<div class="post-author">gupetulya</div>
					<div class="post-datetime">
						5 Apr 2015, 21:16					</div>
				</div>
				<div class="post-content content">
					<p>Hit any key to stop autoboot:&nbsp; 0<br />VR9 # tftpboot 0x80800000 TD-W8970v1_0.6.0_2.1_up(130415).bin<br />8192 KiB W25Q64 at 0:3 is now current device<br />Using vr9 Switch device<br />TFTP from server 192.168.1.100; our IP address is 192.168.1.1<br />Filename &#039;TD-W8970v1_0.6.0_2.1_up(130415).bin&#039;.<br />Load address: 0x80800000<br />Loading: #################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#########################<br />done<br />Bytes transferred = 7995392 (7a0000 hex)<br />VR9 # sf erase 0x20000 0x7a0000</p><p>................................................................................&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;..........................................<br />Successfully erased 7995392 bytes @ 0x20000<br />VR9 # sf write 0x80800000 0x20000 0x680004</p><p>................................................................................&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;........................<br />Successfully programmed 6815748 bytes @ 0x20000<br />VR9 # reset<br />ROM VER: 1.1.4<br />CFG 05</p><p>DDR autotuning Rev 0.3d<br />DDR size from 0xa0000000 - 0xa3ffffff<br />DDR check ok... start booting...</p><br /><br /><p>U-Boot 2010.06-LANTIQ-v-2.0.40-svn3131 (Apr 08 2013 - 11:13:09)</p><p>CLOCK CPU 500M RAM 250M<br />DRAM:&nbsp; 64 MiB<br />Using default environment</p><p>In:&nbsp; &nbsp; serial<br />Out:&nbsp; &nbsp;serial<br />Err:&nbsp; &nbsp;serial<br />Net:&nbsp; &nbsp;Internal phy(GE) firmware version: 0x841d<br />vr9 Switch8192 KiB W25Q64 at 0:3 is now current device</p><br /><p>Type &quot;run flash_nfs&quot; to mount root filesystem over NFS</p><p>Hit any key to stop autoboot:&nbsp; 0<br />8192 KiB W25Q64 at 0:3 is now current device<br />8192 KiB W25Q64 at 0:3 is now current device<br />&nbsp; &nbsp; &nbsp; &nbsp; Uncompressing ...<br />Starting kernel ...</p><p>Lantiq xDSL CPE VR9<br />mips_hpt_frequency = 250000000, counter_resolution = 2<br />Linux version 2.6.32.32 (wuzhiqin@localhost.localdomain) (gcc version 4.3.3 (GCC&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) ) #15 Mon Apr 8 16:02:07 CST 2013<br />phym = 04000000, mem = 04000000, max_pfn = 00004000<br />Reserving memory for CP1 @0xa4000000, size 0x00000000<br />CPU revision is: 00019556 (MIPS 34Kc)<br />Determined physical RAM map:<br />User-defined physical RAM map:<br /> memory: 04000000 @ 00000000 (usable)<br />Initrd not found or empty - disabling initrd<br />Zone PFN ranges:<br />&nbsp; Normal&nbsp; &nbsp;0x00000000 -&gt; 0x00004000<br />Movable zone start PFN for each node<br />early_node_map[1] active PFN ranges<br />&nbsp; &nbsp; 0: 0x00000000 -&gt; 0x00004000<br />Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 16256<br />Kernel command line: root=/dev/mtdblock2 rw rootfstype=squashfs ip=192.168.1.1:1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;92.168.1.2::::eth0:on console=ttyS0,115200 ethaddr=AC:9A:96:F0:28:39 phym=64M me&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;m=64M panic=1 mtdparts=ifx_sflash:128k(boot),1280k(kernel),6528k(rootfs),64k(con&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;fig),64k(romfile),64k(rom),64k(radio) init=/sbin/init ethwan=<br />PID hash table entries: 256 (order: -2, 1024 bytes)<br />Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)<br />Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Primary instruction cache 32kB, VIPT, 4-way, linesize 32 bytes.<br />Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes<br />Writing ErrCtl register=00040610<br />Readback ErrCtl register=00040610<br />Memory: 60632k/65536k available (2855k kernel code, 4832k reserved, 820k data, 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;84k init, 0k highmem)<br />Hierarchical RCU implementation.<br />NR_IRQS:185<br />Lantiq ICU driver, version 3.0.1, (c) 2001-2011 Lantiq Deutschland GmbH<br />console [ttyS0] enabled<br />Calibrating delay loop... 332.59 BogoMIPS (lpj=1662976)<br />Mount-cache hash table entries: 512<br />NET: Registered protocol family 16<br />Lantiq PCIe Root Complex driver, version 1.5.3, (c) 2001-2011 Lantiq Deutschland&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; GmbH<br />bio: create slab &lt;bio-0&gt; at 0<br />ifx_pcie_rc_class_early_fixup: fixed pcie host bridge to pci-pci bridge<br />pci 0000:00:00.0: PME# supported from D0 D3hot<br />pci 0000:00:00.0: PME# disabled<br />pci 0000:01:00.0: PME# supported from D0 D1 D3hot<br />pci 0000:01:00.0: PME# disabled<br />pci 0000:00:00.0: PCI bridge, secondary bus 0000:01<br />pci 0000:00:00.0:&nbsp; &nbsp;IO window: disabled<br />pci 0000:00:00.0:&nbsp; &nbsp;MEM window: 0x1c000000-0x1c0fffff<br />pci 0000:00:00.0:&nbsp; &nbsp;PREFETCH window: 0x1c100000-0x1c1fffff<br />NET: Registered protocol family 8<br />NET: Registered protocol family 20<br />Switching to clocksource MIPS<br />NET: Registered protocol family 2<br />IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP established hash table entries: 2048 (order: 2, 16384 bytes)<br />TCP bind hash table entries: 2048 (order: 1, 8192 bytes)<br />TCP: Hash tables configured (established 2048 bind 2048)<br />TCP reno registered<br />NET: Registered protocol family 1<br />gptu: totally 6 16-bit timers/counters<br />gptu: misc_register on minor 63<br />gptu: succeeded to request irq 118<br />gptu: succeeded to request irq 119<br />gptu: succeeded to request irq 120<br />gptu: succeeded to request irq 121<br />gptu: succeeded to request irq 122<br />gptu: succeeded to request irq 123<br />IFX DMA driver, version ifxmips_dma_core.c:v1.0.17<br />,(c)2009 Infineon Technologies AG<br />Lantiq CGU driver, version 1.1.27, (c) 2001-2011 Lantiq Deutschland GmbH<br />vpe1_mem = 0<br />Wired TLB entries for Linux read_c0_wired() = 0<br />squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />Registering mini_fo version $Id$<br />fuse init (API version 7.13)<br />msgmni has been set to 118<br />Line: 127, function: deu_init<br />DMA Referenced PAGE_SIZE = 4096<br />Infineon Technologies DEU driver version 2.0.0<br />IFX DEU DES initialized (multiblock) (DMA).<br />IFX DEU AES initialized (multiblock) (DMA).<br />IFX DEU ARC4 initialized (multiblock) (DMA).<br />IFX DEU SHA1 initialized (DMA).<br />IFX DEU MD5 initialized (DMA).<br />IFX DEU SHA1_HMAC initialized (DMA).<br />IFX DEU MD5_HMAC initialized (DMA).<br />io scheduler noop registered (default)<br />ifx_pmu_init: Major 252<br />Lantiq PMU driver, version 1.2.2, (c) 2001-2011 Lantiq Deutschland GmbH<br />Lantiq GPIO driver, version 1.2.14, (c) 2001-2011 Lantiq Deutschland GmbH<br />Infineon Technologies RCU driver version 1.0.8<br />Lantiq LED Controller driver, version 1.0.6, (c) 2001-2011 Lantiq Deutschland Gm&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;bH<br />MEI CPE Driver, Version 1.2.0</p><p>(c) Copyright 2009, Infineon Technologies AG</p><p>### MEI CPE - MEI CPE - MEI CPE - MEI CPE ###</p><p>ttyS0 at MMIO 0xbe100c00 (irq = 105) is a IFX_ASC<br />Register ASC (UART) to PMCU.<br />Lantiq ASC (UART) driver, version 1.0.9, (c) 2001-2011 Lantiq Deutschland GmbH<br />brd: module loaded<br />loop: module loaded<br />Lantiq SSC driver, version 2.2.6, (c) 2001-2011 Lantiq Deutschland GmbH<br />Register flash device:flash0<br />7 cmdlinepart partitions found on MTD device ifx_sflash<br />Creating 7 MTD partitions on &quot;ifx_sflash&quot;:<br />0x000000000000-0x000000020000 : &quot;boot&quot;<br />0x000000020000-0x000000160000 : &quot;kernel&quot;<br />0x000000160000-0x0000007c0000 : &quot;rootfs&quot;<br />mtd: partition &quot;rootfs&quot; set to be root filesystem<br />0x0000007c0000-0x0000007d0000 : &quot;config&quot;<br />0x0000007d0000-0x0000007e0000 : &quot;romfile&quot;<br />0x0000007e0000-0x0000007f0000 : &quot;rom&quot;<br />0x0000007f0000-0x000000800000 : &quot;radio&quot;<br />Lantiq SPI flash driver, version 1.1.9, (c) 2001-2011 Lantiq Deutschland GmbH<br />ifxmips_gpio: Pin ID 10 (port 0, pin 10) has been reserved by module SFLASH from&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; kernel module!<br />ifx_dataflash_init status error 255<br />PPP generic driver version 2.4.2<br />NET: Registered protocol family 24<br />IFX SWITCH API, Version 1.1.7.2<br />SWAPI: Registered character device [switch_api] with major no [81]<br />Switch API: PCE MicroCode loaded !!<br />Init IFX_ETHSW_Switch_API_procModule successfully.<br />Switch Auto Polling value = 0<br />GPHY FW load for A2x !!<br />GPHY FIRMWARE LOAD SUCCESSFULLY AT ADDR : 400000<br />IFX GPHY driver GE Mode, version ifxmips_vr9_gphy: V0.9 - Firmware: 841d<br />Registered led device: broadband_led<br />Registered led device: internet_led<br />Registered led device: usb1_link_led<br />Registered led device: usb2_link_led<br />Lantiq LED driver, version 1.0.17, (c) 2001-2011 Lantiq Deutschland GmbH<br />Mirror/redirect action on<br />u32 classifier<br />&nbsp; &nbsp; Actions configured<br />Netfilter messages via NETLINK v0.30.<br />nf_conntrack version 0.5.0 (948 buckets, 5120 max)<br />CONFIG_NF_CT_ACCT is deprecated and will be removed soon. Please use<br />nf_conntrack.acct=1 kernel parameter, acct=1 nf_conntrack module option or<br />sysctl net.netfilter.nf_conntrack_acct=1 to enable it.<br />GRE over IPv4 tunneling driver<br />ip_tables: (C) 2000-2006 Netfilter Core Team<br />TCP cubic registered<br />NET: Registered protocol family 10<br />ip6_tables: (C) 2000-2006 Netfilter Core Team<br />IPv6 over IPv4 tunneling driver<br />NET: Registered protocol family 17<br />NET: Registered protocol family 15<br />Bridge firewalling registered<br />Ebtables v2.0 registered<br />NET: Registered protocol family 8<br />atmpvc_init() failed with -17<br />KOAM is loaded successfully.<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />SQUASHFS error: squashfs_read_data failed to read block 0x5ae492<br />SQUASHFS error: Unable to read metadata cache entry [5ae492]<br />SQUASHFS error: Unable to read inode 0x10b1027e<br />------------[ cut here ]------------<br />WARNING: at fs/inode.c:712 unlock_new_inode+0x34/0x5c()<br />Modules linked in:<br />Call Trace:<br />[&lt;8000b828&gt;] dump_stack+0x8/0x34<br />[&lt;8002d558&gt;] warn_slowpath_common+0x70/0xb0<br />[&lt;8009b77c&gt;] unlock_new_inode+0x34/0x5c<br />[&lt;8009d9d8&gt;] iget_failed+0x1c/0x30<br />[&lt;800d9e28&gt;] squashfs_fill_super+0x5a4/0x678<br />[&lt;80089a58&gt;] get_sb_bdev+0x134/0x1ac<br />[&lt;800d97b4&gt;] squashfs_get_sb+0x20/0x2c<br />[&lt;80088620&gt;] vfs_kern_mount+0x68/0xfc<br />[&lt;80088718&gt;] do_kern_mount+0x54/0x124<br />[&lt;800a214c&gt;] do_mount+0x654/0x708<br />[&lt;800a2294&gt;] sys_mount+0x94/0xe4<br />[&lt;80399df4&gt;] mount_block_root+0x144/0x318<br />[&lt;8039a24c&gt;] prepare_namespace+0x208/0x23c<br />[&lt;80399388&gt;] kernel_init+0x124/0x148<br />[&lt;80015e84&gt;] kernel_thread_helper+0x10/0x18</p><p>---[ end trace e92530010580f6fb ]---<br />VFS: Cannot open root device &quot;mtdblock2&quot; or unknown-block(31,2)<br />Please append a correct &quot;root=&quot; boot option; here are the available partitions:<br />1f00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;128 mtdblock0 (driver?)<br />1f01&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1280 mtdblock1 (driver?)<br />1f02&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6528 mtdblock2 (driver?)<br />1f03&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 64 mtdblock3 (driver?)<br />1f04&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 64 mtdblock4 (driver?)<br />1f05&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 64 mtdblock5 (driver?)<br />1f06&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 64 mtdblock6 (driver?)<br />Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(31,2)<br />Rebooting in 1 seconds..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p271405">
				<div class="post-metadata">
					<div class="post-num">Post #129</div>
					<div class="post-author">Wingman2k</div>
					<div class="post-datetime">
						5 Apr 2015, 22:21					</div>
				</div>
				<div class="post-content content">
					<p>Hi gupetulya,<br />would you mind to explain why you want to go back?<br />it is easy and you could figure it out by yourself, maybe you did already.<br />Bytes transferred = 7995392 (7a0000 hex) TP-Link Image<br />Bytes transferred = 6815748 (680004 hex) OpenWRT-BB Image<br />I wonder why your erase command is correct but the write is not.<br />&quot;sf write 0x80800000 0x20000 0x680004&quot; should be &quot;sf write 0x80800000 0x20000 0x7a0000&quot;<br />so some bits are missing at the end ;-)<br />did you had rebooting issues with OpenWRT? it is not totally clear from your first post, maybe you can send the console output for your OpenWRT flashed device too, you can switch between the versions as you like.</p>											<p class="post-edited">(Last edited by <strong>Wingman2k</strong> on 5 Apr 2015, 22:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p271414">
				<div class="post-metadata">
					<div class="post-num">Post #130</div>
					<div class="post-author">gupetulya</div>
					<div class="post-datetime">
						5 Apr 2015, 23:03					</div>
				</div>
				<div class="post-content content">
					<p>the fact is that I am almost 2 days sitting and could not understand what I&#039;m doing wrong ... but you&#039;re a genius, all done without any problem, for it thank you, and why did you decide to flash back, I like to experiment)))</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p271459">
				<div class="post-metadata">
					<div class="post-num">Post #131</div>
					<div class="post-author">gupetulya</div>
					<div class="post-datetime">
						6 Apr 2015, 08:58					</div>
				</div>
				<div class="post-content content">
					<p>now not working wifi</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p271460">
				<div class="post-metadata">
					<div class="post-num">Post #132</div>
					<div class="post-author">gupetulya</div>
					<div class="post-datetime">
						6 Apr 2015, 09:14					</div>
				</div>
				<div class="post-content content">
					<p>Hit any key to stop autoboot:&nbsp; 0<br />VR9 # tftpboot 0x80800000 TD-W8970v1_0.6.0_2.1_up(130415).bin<br />8192 KiB W25Q64 at 0:3 is now current device<br />MAC: 00-00-a0-bb-cc-ff<br />Using vr9 Switch device<br />TFTP from server 192.168.1.100; our IP address is 192.168.1.1<br />Filename &#039;TD-W8970v1_0.6.0_2.1_up(130415).bin&#039;.<br />Load address: 0x80800000<br />Loading: T #################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#########################<br />done<br />Bytes transferred = 7995392 (7a0000 hex)<br />VR9 # sf erase 0x20000 0x7a0000<br />Erasing SPI flash...<br />..........................................................................................................................<br />Successfully erased 7995392 bytes @ 0x20000<br />Done<br />VR9 # sf write 0x80800000 0x20000 0x7a0000</p><p>..........................................................................................................................<br />Successfully programmed 7995392 bytes @ 0x20000<br />VR9 # reset<br />ROM VER: 1.1.4<br />CFG 05</p><p>DDR autotuning Rev 1.0<br />DDR size from 0xa0000000 - 0xa3ffffff<br />DDR check ok... start booting...</p><br /><br /><p>U-Boot 2010.06-svn4806-LANTIQ-v-2.3.08 (Sep 29 2014 - 11:32:13)</p><p>CLOCK CPU 500M RAM 250M<br />DRAM:&nbsp; 64 MiB<br />Using default environment</p><p>In:&nbsp; &nbsp; serial<br />Out:&nbsp; &nbsp;serial<br />Err:&nbsp; &nbsp;serial<br />Net:&nbsp; &nbsp;Internal phy(GE) firmware version: 0x8434<br />vr9 Switch8192 KiB W25Q64 at 0:3 is now current device<br />MAC: 00-00-a0-bb-cc-ff</p><br /><p>run &quot;flash_flash&quot; to bring up the kernel</p><p>Hit any key to stop autoboot:&nbsp; 0<br />8192 KiB W25Q64 at 0:3 is now current device<br />8192 KiB W25Q64 at 0:3 is now current device<br />&nbsp; &nbsp; &nbsp; &nbsp; Uncompressing ...<br />Starting kernel ...</p><p>Lantiq xDSL CPE VR9<br />mips_hpt_frequency = 250000000, counter_resolution = 2<br />Linux version 2.6.32.32 (wuzhiqin@localhost.localdomain) (gcc version 4.3.3 (GCC) ) #15 Mon Apr 8 16:02:07 CST 2013<br />phym = 04000000, mem = 04000000, max_pfn = 00004000<br />Reserving memory for CP1 @0xa4000000, size 0x00000000<br />CPU revision is: 00019556 (MIPS 34Kc)<br />Determined physical RAM map:<br />User-defined physical RAM map:<br /> memory: 04000000 @ 00000000 (usable)<br />Initrd not found or empty - disabling initrd<br />Zone PFN ranges:<br />&nbsp; Normal&nbsp; &nbsp;0x00000000 -&gt; 0x00004000<br />Movable zone start PFN for each node<br />early_node_map[1] active PFN ranges<br />&nbsp; &nbsp; 0: 0x00000000 -&gt; 0x00004000<br />Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 16256<br />Kernel command line: root=/dev/mtdblock2 rw rootfstype=squashfs ip=192.168.1.1:192.168.1.2::::eth0:on console=ttyS0,115200 ethaddr=AC:9A:96:F0:28:39 phym=64M mem=64M panic=1 mtdparts=ifx_sflash:128k(boot),1280k(kernel),6528k(rootfs),64k(config),64k(romfile),64k(rom),64k(radio) init=/sbin/init ethwan=<br />PID hash table entries: 256 (order: -2, 1024 bytes)<br />Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)<br />Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Primary instruction cache 32kB, VIPT, 4-way, linesize 32 bytes.<br />Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes<br />Writing ErrCtl register=0004161c<br />Readback ErrCtl register=0004161c<br />Memory: 60632k/65536k available (2855k kernel code, 4832k reserved, 820k data, 184k init, 0k highmem)<br />Hierarchical RCU implementation.<br />NR_IRQS:185<br />Lantiq ICU driver, version 3.0.1, (c) 2001-2011 Lantiq Deutschland GmbH<br />console [ttyS0] enabled<br />Calibrating delay loop... 332.59 BogoMIPS (lpj=1662976)<br />Mount-cache hash table entries: 512<br />NET: Registered protocol family 16<br />Lantiq PCIe Root Complex driver, version 1.5.3, (c) 2001-2011 Lantiq Deutschland GmbH<br />bio: create slab &lt;bio-0&gt; at 0<br />ifx_pcie_rc_class_early_fixup: fixed pcie host bridge to pci-pci bridge<br />pci 0000:00:00.0: PME# supported from D0 D3hot<br />pci 0000:00:00.0: PME# disabled<br />pci 0000:01:00.0: PME# supported from D0 D1 D3hot<br />pci 0000:01:00.0: PME# disabled<br />pci 0000:00:00.0: PCI bridge, secondary bus 0000:01<br />pci 0000:00:00.0:&nbsp; &nbsp;IO window: disabled<br />pci 0000:00:00.0:&nbsp; &nbsp;MEM window: 0x1c000000-0x1c0fffff<br />pci 0000:00:00.0:&nbsp; &nbsp;PREFETCH window: 0x1c100000-0x1c1fffff<br />NET: Registered protocol family 8<br />NET: Registered protocol family 20<br />Switching to clocksource MIPS<br />NET: Registered protocol family 2<br />IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP established hash table entries: 2048 (order: 2, 16384 bytes)<br />TCP bind hash table entries: 2048 (order: 1, 8192 bytes)<br />TCP: Hash tables configured (established 2048 bind 2048)<br />TCP reno registered<br />NET: Registered protocol family 1<br />gptu: totally 6 16-bit timers/counters<br />gptu: misc_register on minor 63<br />gptu: succeeded to request irq 118<br />gptu: succeeded to request irq 119<br />gptu: succeeded to request irq 120<br />gptu: succeeded to request irq 121<br />gptu: succeeded to request irq 122<br />gptu: succeeded to request irq 123<br />IFX DMA driver, version ifxmips_dma_core.c:v1.0.17<br />,(c)2009 Infineon Technologies AG<br />Lantiq CGU driver, version 1.1.27, (c) 2001-2011 Lantiq Deutschland GmbH<br />vpe1_mem = 0<br />Wired TLB entries for Linux read_c0_wired() = 0<br />squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />Registering mini_fo version $Id$<br />fuse init (API version 7.13)<br />msgmni has been set to 118<br />Line: 127, function: deu_init<br />DMA Referenced PAGE_SIZE = 4096<br />Infineon Technologies DEU driver version 2.0.0<br />IFX DEU DES initialized (multiblock) (DMA).<br />IFX DEU AES initialized (multiblock) (DMA).<br />IFX DEU ARC4 initialized (multiblock) (DMA).<br />IFX DEU SHA1 initialized (DMA).<br />IFX DEU MD5 initialized (DMA).<br />IFX DEU SHA1_HMAC initialized (DMA).<br />IFX DEU MD5_HMAC initialized (DMA).<br />io scheduler noop registered (default)<br />ifx_pmu_init: Major 252<br />Lantiq PMU driver, version 1.2.2, (c) 2001-2011 Lantiq Deutschland GmbH<br />Lantiq GPIO driver, version 1.2.14, (c) 2001-2011 Lantiq Deutschland GmbH<br />Infineon Technologies RCU driver version 1.0.8<br />Lantiq LED Controller driver, version 1.0.6, (c) 2001-2011 Lantiq Deutschland GmbH<br />MEI CPE Driver, Version 1.2.0</p><p>(c) Copyright 2009, Infineon Technologies AG</p><p>### MEI CPE - MEI CPE - MEI CPE - MEI CPE ###</p><p>ttyS0 at MMIO 0xbe100c00 (irq = 105) is a IFX_ASC<br />Register ASC (UART) to PMCU.<br />Lantiq ASC (UART) driver, version 1.0.9, (c) 2001-2011 Lantiq Deutschland GmbH<br />brd: module loaded<br />loop: module loaded<br />Lantiq SSC driver, version 2.2.6, (c) 2001-2011 Lantiq Deutschland GmbH<br />Register flash device:flash0<br />7 cmdlinepart partitions found on MTD device ifx_sflash<br />Creating 7 MTD partitions on &quot;ifx_sflash&quot;:<br />0x000000000000-0x000000020000 : &quot;boot&quot;<br />0x000000020000-0x000000160000 : &quot;kernel&quot;<br />0x000000160000-0x0000007c0000 : &quot;rootfs&quot;<br />mtd: partition &quot;rootfs&quot; set to be root filesystem<br />0x0000007c0000-0x0000007d0000 : &quot;config&quot;<br />0x0000007d0000-0x0000007e0000 : &quot;romfile&quot;<br />0x0000007e0000-0x0000007f0000 : &quot;rom&quot;<br />0x0000007f0000-0x000000800000 : &quot;radio&quot;<br />Lantiq SPI flash driver, version 1.1.9, (c) 2001-2011 Lantiq Deutschland GmbH<br />ifxmips_gpio: Pin ID 10 (port 0, pin 10) has been reserved by module SFLASH from kernel module!<br />ifx_dataflash_init status error 255<br />PPP generic driver version 2.4.2<br />NET: Registered protocol family 24<br />IFX SWITCH API, Version 1.1.7.2<br />SWAPI: Registered character device [switch_api] with major no [81]<br />Switch API: PCE MicroCode loaded !!<br />Init IFX_ETHSW_Switch_API_procModule successfully.<br />Switch Auto Polling value = 0<br />GPHY FW load for A2x !!<br />GPHY FIRMWARE LOAD SUCCESSFULLY AT ADDR : 400000<br />IFX GPHY driver GE Mode, version ifxmips_vr9_gphy: V0.9 - Firmware: 841d<br />Registered led device: broadband_led<br />Registered led device: internet_led<br />Registered led device: usb1_link_led<br />Registered led device: usb2_link_led<br />Lantiq LED driver, version 1.0.17, (c) 2001-2011 Lantiq Deutschland GmbH<br />Mirror/redirect action on<br />u32 classifier<br />&nbsp; &nbsp; Actions configured<br />Netfilter messages via NETLINK v0.30.<br />nf_conntrack version 0.5.0 (948 buckets, 5120 max)<br />CONFIG_NF_CT_ACCT is deprecated and will be removed soon. Please use<br />nf_conntrack.acct=1 kernel parameter, acct=1 nf_conntrack module option or<br />sysctl net.netfilter.nf_conntrack_acct=1 to enable it.<br />GRE over IPv4 tunneling driver<br />ip_tables: (C) 2000-2006 Netfilter Core Team<br />TCP cubic registered<br />NET: Registered protocol family 10<br />ip6_tables: (C) 2000-2006 Netfilter Core Team<br />IPv6 over IPv4 tunneling driver<br />NET: Registered protocol family 17<br />NET: Registered protocol family 15<br />Bridge firewalling registered<br />Ebtables v2.0 registered<br />NET: Registered protocol family 8<br />atmpvc_init() failed with -17<br />KOAM is loaded successfully.<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />VFS: Mounted root (squashfs filesystem) readonly on device 31:2.<br />Freeing unused kernel memory: 184k freed<br />starting pid 187, tty &#039;&#039;: &#039;/etc/init.d/rcS&#039;<br />SCSI subsystem initialized<br />usbcore: registered new interface driver usbfs<br />usbcore: registered new interface driver hub<br />usbcore: registered new device driver usb<br />Initializing USB Mass Storage driver...<br />usbcore: registered new interface driver usb-storage<br />USB Mass Storage support registered.<br />IFXUSB: ifxusb_hcd: version 3.2 B120208<br />Chip Version :0002 BurstSize=4<br />IFXUSB: USB core #0 soft-reset<br />IFXUSB: USB core #0 soft-reset<br />ifxusb_hcd ifxusb_hcd: IFX USB Controller<br />ifxusb_hcd ifxusb_hcd: new USB bus registered, assigned bus number 1<br />ifxusb_hcd ifxusb_hcd: irq 54, io mem 0xbe101000<br />IFXUSB: Init: Power Port (0)<br />hotplug, argusb usb1: configuration #1 chosen from 1 choice<br />s:usb<br />hotplug, args:usb<br />.....pidhub 1-0:1.0: USB hub found<br />hub 1-0:1.0: 1 port detected<br /> 228: wait the running hotplug to end itself.......<br />IFXUSB: USB core #1 soft-reset<br />IFXUSB: USB core #1 soft-reset<br />ifxusb_hcd ifxusb_hcd: IFX USB Controller<br />ifxusb_hcd ifxusb_hcd: new USB bus registered, assigned bus number 2<br />ifxusb_hcd ifxusb_hcd: irq 83, io mem 0xbe106000<br />IFXUSB: Init: Power Port (0)<br />hotplug, argsusb usb2: configuration #1 chosen from 1 choice<br />hub 2-0:1.0: USB hub found<br />hub 2-0:1.0: 1 port detected<br />:usb<br />hotplug, args:usb</p><p>Please press Enter to activate this console. .....pid 228: wait the running hotplug to end itself.......<br />[ dm_readFile ] 2042:&nbsp; can not open xml file /var/tmp/pc/reduced_data_model.xml!, about to open file /etc/reduced_data_model.xml<br />[ parseConfigNode ] 526:&nbsp; Meet unrecognized parameter node &quot;X_TPLINK_IsFD&quot;, skip the node<br />Loading A5 (MII0/1 + ATM) driver ...... MAC-0: 00-00-a0-bb-cc-ff<br />MAC-1: 00-00-a0-bb-cd-00<br />Succeeded!<br />PPE datapath driver info:<br />&nbsp; Version ID: 64.3.7.1.0.1.4<br />&nbsp; Family&nbsp; &nbsp; : VR9<br />&nbsp; DR Type&nbsp; &nbsp;: Normal Data Path | Indirect-Fast Path<br />&nbsp; Interface : MII0 | MII1 | ATM<br />&nbsp; Mode&nbsp; &nbsp; &nbsp; : Routing<br />&nbsp; Release&nbsp; &nbsp;: 0.1.4<br />PPE firmware info:<br />&nbsp; Version ID: 7.2.4.6.2.0<br />&nbsp; Family&nbsp; &nbsp; : VR9<br />&nbsp; FW Type&nbsp; &nbsp;: Acceleration<br />&nbsp; Interface : MII0/1 + ATM<br />&nbsp; Mode&nbsp; &nbsp; &nbsp; : Bridging + IPv4 Routing<br />&nbsp; Release&nbsp; &nbsp;: 2.0<br />IFXOS, Version 1.5.14 (c) Copyright 2009, Lantiq Deutschland GmbH</p><br /><p>Lantiq CPE API Driver version: DSL CPE API V4.11.4</p><p>Predefined debug level: 3<br />ifx_ppa_api: module license &#039;unspecified&#039; taints kernel.<br />Disabling lock debugging due to kernel taint<br />PPA API --- init successfully<br />.....pid 228: wait the running hotplug to end itself.......<br />ifx_ppa_init - init succeeded<br />sendto: No such file or directory<br />send 2001 error 244, -1<br />ath0&nbsp; &nbsp; &nbsp; no private ioctls.</p><p>ath1&nbsp; &nbsp; &nbsp; no private ioctls.</p><p>ioctl: No such device<br />device eth0.2 entered promiscuous mode<br />device eth0 entered promiscuous mode<br />br0: port 1(eth0.2) entering forwarding state<br />device eth0.3 entered promiscuous mode<br />br0: port 2(eth0.3) entering forwarding state<br />device eth0.4 entered promiscuous mode<br />br0: port 3(eth0.4) entering forwarding state<br />device eth0.5 entered promiscuous mode<br />br0: port 4(eth0.5) entering forwarding state<br />[ rsl_initLanIgmpSnoopObj ] 181:&nbsp; We need vlan if we want igmp snooping<br />*********cal_data*******<br />020500023537707500000000*********end*******<br />.....pid 228: ath_hal: 0.9.17.1 (AR5212, AR5416, AR9380, RF5111, RF5112, RF2413, RF5413, RF2316, RF2317, REGOPS_FUNC, WRITE_EEPROM, 11D)<br />wait the running hotplug to end itself.......<br />ath_rate_atheros: Copyright (c) 2001-2005 Atheros Communications, Inc, All Rights Reserved<br />ath_dfs: Version 2.0.0<br />Copyright (c) 2005-2006 Atheros Communications, Inc. All Rights Reserved<br />ath_dev: Copyright (c) 2001-2007 Atheros Communications, Inc, All Rights Reserved<br />ath_pci: 9.2.0_U10.1020 (Atheros/multi-bss)<br />PCI: Enabling device 0000:01:00.0 (0000 -&gt; 0002)<br />__ath_attach: Set global_scn[0]<br />ACBKMinfree = 48<br />ACBEMinfree = 32<br />ACVIMinfree = 16<br />ACVOMinfree = 0<br />CABMinfree = 48<br />UAPSDMinfree = 0<br />Restoring Cal data from Flash<br />dfs_attach: use DFS enhancements<br />DFS min filter rssiThresh = 18<br />DFS max pulse dur = 151 ticks<br />ath_get_caps[5105] rx chainmask mismatch actual 7 sc_chainmak 0<br />ath_get_caps[5080] tx chainmask mismatch actual 7 sc_chainmak 0<br />.....pid 228: wait the running hotplug to end itself.......<br />Register wlan WPS function, dev=0x82ed4000<br />Register wlan button on function<br />Register wlan button off function<br />wifi0: Atheros ???: mem=0x1c000000, irq=136 hw_base=0xbc000000<br />ath_netdev_set_macaddr: ffffffff:ffffffff:ffffffff:ffffffff:ffffffff:ffffffff<br />wlan_vap_create : enter. devhandle=0x82ed42c0, opmode=IEEE80211_M_HOSTAP, flags=0x1<br />wlan_vap_create : exit. devhandle=0x82ed42c0, opmode=IEEE80211_M_HOSTAP, flags=0x1.<br />VAP device ath0 created<br />ath0<br />DFS min filter rssiThresh = 15<br />DFS max pulse dur = 151 ticks<br />ath_netdev_set_macaddr: ffffffff:ffffffff:ffffffff:ffffffff:ffffffff:ffffffff<br />WARNING: Fragmentation with HT mode NOT ALLOWED!!<br />Error for wireless request &quot;Set Fragmentation Threshold&quot; (8B24) :<br />&nbsp; &nbsp; SET failed on device ath0 ; Invalid argument.<br />wlan_setAllCfgFile bridgeName br0<br />Reading topology file /var/Wireless/topology.conf ...<br />014.513: Reading radio configuration file /var/Wireless/80211g.ap_radio ...</p><p>014.514: Reading bss configuration file /var/Wireless/ath0.ap_bss ...</p><p> ieee80211_ioctl_siwmode: imr.ifm_active=131712, new mode=3, valid=1<br />014.545: upnp_wps_device_init called<br />l2_packet_receive - recvfrom: Network is down<br />ni aponly is null!<br />ni aponly is null!<br />.....pid 228: wait the running hotplug to end itself.......<br />ni aponly is null!<br />.....pid 228: wait the running hotplug to end itself.......<br />.....pid 228: wait the running hotplug to end itself.......<br />l2_packet_receive - recvfrom: Network is down<br />Before hook ppa<br />PPA REG DONE, if_id=3, dev_if_index = 15<br />ath1&nbsp; &nbsp; &nbsp; no private ioctls.</p><p>device ath0 entered promiscuous mode<br />device ath0 left promiscuous mode<br />brctl: bridge br0: Invalid argument<br />brctl: iface ath1: No such device<br />sendto: No such file or directory<br />send 2030 error 244, -1<br />ni aponly is null!<br />.....pid 228: wait the running hotplug to end itself.......<br />[ apiSetAdslTypeAndAnnexType ] 1369:&nbsp; /firmware/dsl_cpe_pipe.sh g997xtusecs 05 00 04 00 04 01 00 00<br />nReturn=0</p><p>nReturn=0</p><p>nReturn=0 nDirection=0</p><p>nReturn=0 nDirection=1</p><p>nReturn=4 nDirection=0</p><p>nReturn=0 nDirection=1</p><p>nReturn=0</p><p>iptables: Bad rule (does a matching rule exist in that chain?)<br />radvd starting<br />[ oal_dsl_createMainAtmIf ] 2209:&nbsp; br2684ctl -b -p 1 -c 0 -e 0 -q ubr,aal5:max_pcr=0,min_pcr=0 -a 0.8.35<br />.....pid 228: wait the running hotplug to end itself.......<br />........pid 226: pPlugDevId[0]=, plugDevClass[0]=, plugAction[0]=.........<br />[ oal_dsl_createMainAtmIf ] 2253:&nbsp; ifconfig nas0 hw ether 7F:FF:FF:FF:FF:00<br />Interface &quot;nas0&quot; created sucessfully<br />ifconfig: SIOCSIFHWADDR: Cannot assign requested address<br />[ oal_dsl_addAtmIf ] 2038:&nbsp; br2684ctl -b -p 1 -x 1 -c 0 -e 0 -q ubr,aal5:max_pcr=0,min_pcr=0 -a 0.8.35<br />optarg : ubr,aal5:max_pcr=0,min_pcr=0Interface &quot;nas0_1&quot; created sucessfully<br />ifconfig: SIOCSIFHWADDR: Cannot assign requested address<br />ifconfig: SIOCSIFHWADDR: Cannot assign requested address<br />ifconfig: ioctl 0x8914 failed: Cannot assign requested address<br />device nas0_1 entered promiscuous mode<br />device nas0_1 left promiscuous mode<br />brctl: bridge br0: Invalid argument<br />iptables: Bad rule (does a matching rule exist in that chain?)<br />iptables: Bad rule (does a matching rule exist in that chain?)<br />[ getPidFromPidFile ] 112:&nbsp; Cann&#039;t open file: /var/run/zebra.pid.<br />[ getPidFromPidFile ] 112:&nbsp; Cann&#039;t open file: /var/run/ripd.pid.<br />ifx_ppa_init - init succeeded<br />iptables: Bad rule (does a matching rule exist in that chain?)<br />ifx_ppa_init - init succeeded<br />iptables: Bad rule (does a matching rule exist in that chain?)<br />ifx_ppa_init - init succeeded<br />iptables: Bad rule (does a matching rule exist in that chain?)<br />ip6tables: Bad rule (does a matching rule exist in that chain?)<br />[ rsl_setStorageServiceObj ] 1140:&nbsp; mountFlag is 3,We start usb server</p><p>killall: ushare: no process killed<br />........pid 228: pPlugDevId[0]=, plugDevClass[0]=, plugAction[0]=.........<br />uShare (version 1.1a), a lightweight UPnP A/V and DLNA Media Server.<br />Benjamin Zores (C) 2005-2007, for GeeXboX Team.<br />See <a href="http://ushare.geexbox.org/">http://ushare.geexbox.org/</a> for updates.<br />iptables: Bad rule (does a matching rule exist in that chain?)<br />iptables: Bad rule (does a matching rule exist in that chain?)<br /> GPL NetUSB up!<br />kc&nbsp; &nbsp;86 : run_telnetDBGDServer start<br />kc&nbsp; 223 : init_DebugD end<br />INFO176C: NetUSB 1.02.06, 00020620 : Jun 13 2012 16:37:47<br />INFO176E:&nbsp; AUTH ISOC<br />INFO176F:&nbsp; filterAudio<br />usbcore: registered new interface driver KC NetUSB General Driver<br />INFO0076:&nbsp; init proc : PAGE_SIZE 4096<br />INFO17C8: Check mac address<br />INFO1640:&nbsp; infomap c13e0994<br />INFO1643:&nbsp; sleep to wait br0 to wake up<br />INFO02D0:&nbsp; use dev Name br0<br />INFO164C:&nbsp; sleep to wait br0 end.<br />INFO1665:&nbsp; UDP_BROAD 7437 tcpPort:625868800<br />INFO02D0:&nbsp; use dev Name br0<br />Enable forwarding<br />INFO154C: tcpConnector() started...<br />INFO1429: Bind to br0</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p271461">
				<div class="post-metadata">
					<div class="post-num">Post #133</div>
					<div class="post-author">gupetulya</div>
					<div class="post-datetime">
						6 Apr 2015, 09:22					</div>
				</div>
				<div class="post-content content">
					<p>router works but Wi fi does not work, I&#039;m doing wrong?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p271497">
				<div class="post-metadata">
					<div class="post-num">Post #134</div>
					<div class="post-author">Wingman2k</div>
					<div class="post-datetime">
						6 Apr 2015, 18:56					</div>
				</div>
				<div class="post-content content">
					<p>Maybe nothing, but maybe you did already. First question is, did you erase the radio partition by accident?<br />it holds necessary data for the wifi chips, this is atheros related. you might have an backup of your chip stored somewhere.<br />0x0000007f0000-0x000000800000 : &quot;radio&quot;<br />without this there is no wifi unless you put valid data back into the radio partition.<br /></p><div class="codebox"><pre><code>root@TD-W8970:~# hexdump  /dev/mtdblock6 -C
00000000  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|
*
0000f100  XX XX XX XX XX XX ff ff  ff ff ff ff ff ff ff ff  |................|
0000f110  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|
*
0000f200  02 a5 6e 9e 00 00 00 00  ff ff ff ff ff ff ff ff  |..n.............|
0000f210  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|
*
00010000  88 88 88 88 00 14 22 04  00 14 21 04 00 56 65 04  |......&quot;...!..Ve.|
00010010  00 56 66 04 00 00 00 28  00 00 00 28 00 00 00 00  |.Vf....(...(....|
00010020  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|
*
00021000  02 05 00 02 03 04 05 06  00 30 3a 30 32 3a 30 33  |.........0:02:03|
00021010  3a 30 34 3a 30 35 3a 30  36 00 72 6f 00 00 1f 00  |:04:05:06.ro....|
00021020  77 03 00 00 00 00 05 00  00 00 0d 14 06 00 08 ff  |w...............|
00021030  01 00 00 00 00 10 01 00  00 22 22 02 00 50 01 50  |.........&quot;&quot;..P.P|
00021040  01 50 01 00 00 00 00 00  00 32 00 a4 00 00 00 00  |.P.......2......|
00021050  ff 00 00 00 00 00 00 00  00 00 00 00 00 00 cd 00  |................|
00021060  0e 0e 03 00 2c e2 01 02  0e 1c 80 c0 80 0c 80 c0  |....,...........|
00021070  80 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00021080  00 00 00 00 00 00 00 00  de de 70 89 a2 f1 00 93  |..........p.....|
00021090  00 00 00 f0 00 93 00 00  00 ee 00 93 00 00 00 f5  |................|
000210a0  00 90 00 00 00 f5 00 92  00 00 00 f5 00 92 00 00  |................|
000210b0  00 f8 00 93 00 00 00 f7  00 94 00 00 00 f5 00 93  |................|
000210c0  00 00 00 70 ac 70 8e ac  70 8e ac 7a 93 a2 1e 1e  |...p.p..p..z....|
000210d0  1e 1e 1e 1e 1e 1e 1e 1e  1c 1a 1e 1e 1c 1a 1e 1e  |................|
000210e0  1c 1a 1e 1e 1e 1e 1e 1c  1c 1a 1a 1a 1a 1a 1a 18  |................|
000210f0  1e 1e 1e 1e 1e 1c 1c 1a  1a 1a 1a 1a 1a 18 1e 1e  |................|
00021100  1e 1e 1e 1c 1c 1a 1a 1a  1a 1a 1a 18 1e 1e 1e 1e  |................|
00021110  1c 1a 1a 1a 1a 1a 1a 1a  1a 18 1e 1e 1e 1e 1c 1a  |................|
00021120  1a 1a 1a 1a 1a 1a 1a 18  1e 1e 1e 1e 1c 1a 1a 1a  |................|
00021130  1a 1a 1a 1a 1a 18 11 12  15 17 41 42 45 47 31 32  |..........ABEG12|
00021140  35 37 70 75 a2 b8 70 75  a2 b8 70 75 a2 b8 70 75  |57pu..pu..pu..pu|
00021150  a2 b8 70 75 ac b8 70 75  ac b8 70 75 ac b8 70 75  |..pu..pu..pu..pu|
00021160  ac b8 70 75 ac b8 70 75  ac b8 70 75 ac b8 70 75  |..pu..pu..pu..pu|
00021170  ac b8 22 62 22 62 18 5c  1a 5a 18 5c 1a 5a 11 55  |..&quot;b&quot;b.\.Z.\.Z.U|
00021180  15 55 3c 7c 3c 7c 3c 7c  3c 7c 3c 7c 3c 7c 3c 7c  |.U&lt;|&lt;|&lt;|&lt;|&lt;|&lt;|&lt;||
00021190  3c 7c 18 58 18 58 18 58  18 58 18 58 18 58 18 58  |&lt;|.X.X.X.X.X.X.X|
000211a0  18 58 10 01 00 00 22 22  02 00 00 00 00 00 00 00  |.X....&quot;&quot;........|
000211b0  00 00 00 00 00 00 44 0f  50 58 00 00 00 ff 00 00  |......D.PX......|
000211c0  00 00 00 00 00 00 00 00  00 00 00 de 00 0e 0e 03  |................|
000211d0  00 2d e2 00 02 0e 1c e0  e0 f0 0c e0 e0 f0 6c 00  |.-............l.|
000211e0  00 00 00 00 00 00 00 00  00 43 53 00 00 00 00 00  |.........CS.....|
000211f0  00 00 00 00 00 00 00 4c  54 68 78 8c a0 b4 c5 00  |.......LThx.....|
00021200  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
00021280  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 4c  |...............L|
00021290  5c 68 8c a0 b4 bd cd 4c  5c 68 8c a0 b4 bd cd 4e  |\h.....L\h.....N|
000212a0  5e 66 8e 9e ae bf c7 20  20 1c 1a 20 20 1c 1a 20  |^f.....  ..  .. |
000212b0  20 1c 1a 20 20 1a 18 20  20 1a 18 20 20 18 16 1e  | ..  ..  ..  ...|
000212c0  1e 18 16 1e 1e 18 16 20  20 20 20 1c 1a 20 1c 1a  |.......    .. ..|
000212d0  18 18 18 16 16 20 20 20  20 1c 1a 20 1c 1a 18 18  |.....    .. ....|
000212e0  18 16 16 20 20 20 20 1c  1a 20 1c 1a 18 18 18 16  |...    .. ......|
000212f0  16 20 20 20 20 1c 1a 20  1a 18 16 16 16 14 14 20  |.    .. ....... |
00021300  20 20 20 1c 1a 20 1a 18  16 14 12 10 10 20 20 20  |   .. .......   |
00021310  20 1c 1a 20 18 14 10 12  10 0e 0e 1e 1e 1e 1e 1c  | .. ............|
00021320  1a 1e 18 14 10 12 10 0e  0e 1e 1e 1e 1e 1c 1a 1e  |................|
00021330  18 14 10 12 10 0e 0e 20  20 20 1e 1c 1a 1e 1c 1a  |.......   ......|
00021340  18 18 18 16 16 20 20 20  1e 1c 1a 1e 1c 1a 18 18  |.....   ........|
00021350  18 16 16 20 20 20 1e 1c  1a 1e 1c 1a 18 18 18 16  |...   ..........|
00021360  16 20 20 20 1e 1c 1a 1e  1a 18 16 16 16 14 14 20  |.   ........... |
00021370  20 20 1e 1c 1a 1e 1a 18  16 14 12 10 10 20 20 20  |  ...........   |
00021380  1e 1c 1a 1e 16 14 10 12  10 0e 0e 1e 1e 1e 1e 1c  |................|
00021390  1a 1e 16 14 10 12 10 0e  0e 1e 1e 1e 1e 1c 1a 1e  |................|
000213a0  16 14 10 12 10 0e 0e 10  16 18 40 46 48 30 36 38  |..........@FH068|
000213b0  4c 54 68 78 8c a0 b9 cd  4c 54 68 78 8c a0 b9 cd  |LThx....LThx....|
*
000213f0  4c 54 68 78 8c a0 b9 cd  3c 7c 3c 7c 3c 7c 3c 7c  |LThx....&lt;|&lt;|&lt;|&lt;||
00021400  3c 7c 3c 7c 3c 7c 3c 7c  3c 7c 3c 7c 3c 7c 3c 7c  |&lt;|&lt;|&lt;|&lt;|&lt;|&lt;|&lt;|&lt;||
*
00021440  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|
*
00030000</code></pre></div><p>mine is looking like this, hope it is ok to post it that way, the MAC is stored in there too masked mine with XX XX XX XX XX XX</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p271501">
				<div class="post-metadata">
					<div class="post-num">Post #135</div>
					<div class="post-author">gupetulya</div>
					<div class="post-datetime">
						6 Apr 2015, 20:02					</div>
				</div>
				<div class="post-content content">
					<p>I did not specifically erased, this router has given me my friend request on his openvrt not right here, and I had to restore .. I&#039;m not good at these things so much. so if you can help me how to get it back in full operation</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p272093">
				<div class="post-metadata">
					<div class="post-num">Post #136</div>
					<div class="post-author">hecatae</div>
					<div class="post-datetime">
						11 Apr 2015, 23:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Wingman2k wrote:</cite><blockquote><p>Hi gupetulya,<br />would you mind to explain why you want to go back?<br />it is easy and you could figure it out by yourself, maybe you did already.<br />Bytes transferred = 7995392 (7a0000 hex) TP-Link Image<br />Bytes transferred = 6815748 (680004 hex) OpenWRT-BB Image<br />I wonder why your erase command is correct but the write is not.<br />&quot;sf write 0x80800000 0x20000 0x680004&quot; should be &quot;sf write 0x80800000 0x20000 0x7a0000&quot;<br />so some bits are missing at the end ;-)<br />did you had rebooting issues with OpenWRT? it is not totally clear from your first post, maybe you can send the console output for your OpenWRT flashed device too, you can switch between the versions as you like.</p></blockquote></div><p>that incorrect write command is here <a href="http://www.pierovdfn.it/2014/08/09/tp-link-td-w8970-openwrt/">http://www.pierovdfn.it/2014/08/09/tp-l … 0-openwrt/</a> which is very high in google searches for openwrt w8970</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p273340">
				<div class="post-metadata">
					<div class="post-num">Post #137</div>
					<div class="post-author">Hank</div>
					<div class="post-datetime">
						21 Apr 2015, 23:19					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m a little lost with my new TD-W8970B. I connected a serial console and I&#039;m able to tftpboot images.</p><p>My problem now is, that I can&#039;t find the image &#039;openwrt-lantiq-xrx200-TDW8970-uImage-initramfs&#039; for the method described in the openwrt wiki. I can&#039;t find an image with initramfs/ramdisk support at all :-(</p><p>I tried&nbsp; W8970.img and luci-lantiq-xrx200-TDW8970-sysupgrade.image from here <a href="http://tplink-forum.pl/porady-serwisowe/w8970-openwrt/">http://tplink-forum.pl/porady-serwisowe/w8970-openwrt/</a></p><p>.. but they also seem to be just sysupgrade images and without initramfs support, because both end up after bootm with:<br />[...]<br />[&nbsp; &nbsp; 1.972000] Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0)</p><p>Do people exist on this planet, that had success in finding an initramfs-image&nbsp; and using the method from the wiki??<br /><a href="http://wiki.openwrt.org/toh/tp-link/td-w8970">http://wiki.openwrt.org/toh/tp-link/td-w8970</a></p><p>Thanks</p><p>Firmware Version:0.6.0 2.5 v000d.0 Build 140320 Rel.67818n<br />Hardware Version:TD-W8970B v1 00000000</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p273487">
				<div class="post-metadata">
					<div class="post-num">Post #138</div>
					<div class="post-author">asc</div>
					<div class="post-datetime">
						23 Apr 2015, 00:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Hank wrote:</cite><blockquote><p>Do people exist on this planet, that had success in finding an initramfs-image&nbsp; and using the method from the wiki??<br /><a href="http://wiki.openwrt.org/toh/tp-link/td-w8970">http://wiki.openwrt.org/toh/tp-link/td-w8970</a></p></blockquote></div><p>I&#039;ve never found or used the &quot;initramfs-image&quot;. I was using the boot loader for flashing, described with <br />the rylos image (load image to ram, erase flash, copy image to flash).</p>											<p class="post-edited">(Last edited by <strong>asc</strong> on 23 Apr 2015, 00:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p273504">
				<div class="post-metadata">
					<div class="post-num">Post #139</div>
					<div class="post-author">Hank</div>
					<div class="post-datetime">
						23 Apr 2015, 01:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>asc wrote:</cite><blockquote><div class="quotebox"><cite>Hank wrote:</cite><blockquote><p>Do people exist on this planet, that had success in finding an initramfs-image&nbsp; and using the method from the wiki??<br /><a href="http://wiki.openwrt.org/toh/tp-link/td-w8970">http://wiki.openwrt.org/toh/tp-link/td-w8970</a></p></blockquote></div><p>I&#039;ve never found or used the &quot;initramfs-image&quot;. I was using the boot loader for flashing, described with <br />the rylos image (load image to ram, erase flash, copy image to flash).</p></blockquote></div><p>Ok, thank you, then it obviously does not exist in public. I will try to build/compile&nbsp; an &quot;initramfs-image&quot; for 14.07 by myself (allthough I never tried that before).&nbsp; If it fails, then I&#039;ll try the procedure with the &quot;rylos-image&quot;. I had read about it, but it seemed to be a little dated (2013?), so I wasn&#039;t aware, that rylos is still the only available image for the first flash.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p273628">
				<div class="post-metadata">
					<div class="post-num">Post #140</div>
					<div class="post-author">Wingman2k</div>
					<div class="post-datetime">
						23 Apr 2015, 19:51					</div>
				</div>
				<div class="post-content content">
					<p>you can flash the openwrt-lantiq-xrx200-TDW8970-sysupgrade.image standard image via ftp<br /></p><div class="codebox"><pre><code>#setenv ipaddr 192.168.1.1    #IP of Router
#setenv serverip 192.168.1.254    #IP of tftp Server
#tftpboot 0x80800000 openwrt-lantiq-xrx200-TDW8970-sysupgrade.image
#sf erase 0x20000 0x7a0000    #size of image is 680004 but erase 7a0000
#sf write 0x80800000 0x20000 0x680004    #write image to flash</code></pre></div><p>you can flash the sysupgrade image directly to your router no need for rylos-image for me.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p273631">
				<div class="post-metadata">
					<div class="post-num">Post #141</div>
					<div class="post-author">Hank</div>
					<div class="post-datetime">
						23 Apr 2015, 20:52					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Wingman2k wrote:</cite><blockquote><p>you can flash the openwrt-lantiq-xrx200-TDW8970-sysupgrade.image standard image via ftp<br /></p><div class="codebox"><pre><code>#setenv ipaddr 192.168.1.1    #IP of Router
#setenv serverip 192.168.1.254    #IP of tftp Server
#tftpboot 0x80800000 openwrt-lantiq-xrx200-TDW8970-sysupgrade.image
#sf erase 0x20000 0x7a0000    #size of image is 680004 but erase 7a0000
#sf write 0x80800000 0x20000 0x680004    #write image to flash</code></pre></div><p>you can flash the sysupgrade image directly to your router no need for rylos-image for me.</p></blockquote></div><p>Thank you very much, Wingman2k, for me it comes a little too late, because I build an image with initramfs today and was able to follow the wiki-method. But to other users your howto will be a big simplification and a great help!</p><p>Personally&nbsp; I&#039;m now at the point of searching the firmware-blob vdsl.bin for Annex B. I found a script on my new openwrt-router (BB14.07) named /sbin/vdsl_fw_install.sh, which seems to be a good starting point:</p><div class="codebox"><pre><code>#!/bin/sh
. /lib/functions.sh

FW=&quot;/tmp/Firmware_Speedport_W921V_1.20.000.bin&quot;
URL=&quot;http://hilfe.telekom.de/dlp/eki/downloads/Speedport/Speedport%20W%20921V/Firmware_Speedport_W921V_1.20.000.bin&quot;
FW_TAPI=&quot;vr9_tapi_fw.bin&quot;
FW_DSL=&quot;vr9_dsl_fw_annex_b.bin&quot;
MD5_FW=&quot;4d812f2c3476dadd738b022c4767c491&quot;
MD5_TAPI=&quot;06b6ab3481b8d3eb7e8bf6131f7f6b7f&quot;
MD5_DSL=&quot;59dd9dc81195c6854433c691b163f757&quot;

[ -f /lib/firmware/vdsl.bin] &amp;&amp; exit 0
[...]</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p273668">
				<div class="post-metadata">
					<div class="post-num">Post #142</div>
					<div class="post-author">asc</div>
					<div class="post-datetime">
						24 Apr 2015, 01:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Hank wrote:</cite><blockquote><p>Personally&nbsp; I&#039;m now at the point of searching the firmware-blob vdsl.bin for Annex B. I found a script on my new openwrt-router (BB14.07) named /sbin/vdsl_fw_install.sh, which seems to be a good starting point:</p></blockquote></div><p>Seems that your &quot;vdsl_fw_install.sh&quot; script is not up to date, the current one is downloading and installing &quot;Firmware_Speedport_W921V_1.21.000.bin&quot; (which is downloadable at the referenced URL). The modem firmware is the same in both versions (same md5sum).</p><p>&nbsp; <a href="http://hilfe.telekom.de/dlp/eki/downloads/Speedport/Speedport%20W%20921V/Firmware_Speedport_W921V_1.21.000.bin">http://hilfe.telekom.de/dlp/eki/downloa … 21.000.bin</a></p><p>MD5 (vr9_dsl_fw_annex_b.bin) = 59dd9dc81195c6854433c691b163f757</p><p>It&#039;s also possible to extract the dsl firmware with your PC and put it manually to the router.</p><p>If you are interested, you can join the IRC channel #openwrt-td-w8970 at freenode. It&#039;s a try to establish this channel (dedicated to TD-W8970).</p>											<p class="post-edited">(Last edited by <strong>asc</strong> on 24 Apr 2015, 01:29)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p273767">
				<div class="post-metadata">
					<div class="post-num">Post #143</div>
					<div class="post-author">Hank</div>
					<div class="post-datetime">
						24 Apr 2015, 17:49					</div>
				</div>
				<div class="post-content content">
					<p>Thank you, asc, you pushed me in the right direction. I had success with the excellent work of member s7a7ic here in the thread:<br /><a href="https://forum.openwrt.org/viewtopic.php?pid=261864#p261864">https://forum.openwrt.org/viewtopic.php … 64#p261864</a></p><p>In short: I fetched Firmware_Speedport_W921V_1.21.000.bin from the telekom site and copied it with scp on my router under the fake name /tmp/Firmware_Speedport_W921V_1.20.000.bin, so that the tool /sbin/w921v_fw_cutter on the router can find it (the 1.20-filename is hardcoded in that tool in BB 14.07).</p><p>It cuts the vdsl-firmware:<br /></p><div class="codebox"><pre><code> root@OpenWrt:/tmp# w921v_fw_cutter
Arcadyan Firmware cutter v0.1
-----------------------------
This tool extracts the different parts of an arcadyan firmware update file
This tool is for private use only. The Firmware that gets extracted has a license that forbids redistribution
Please only run this if you understand the risks

I understand the risks ? (y/N)
y
Found partition at 0x00000000 with size 2884608
        This is not lzma
Found partition at 0x002C0400 with size 704512
        This is not lzma
Found partition at 0x0036C400 with size 346112
        Wrote 761108 bytes to /tmp/vr9_dsl_fw_annex_b.bin
Found partition at 0x003C0C00 with size 364544
        Wrote 526476 bytes to /tmp/vr9_tapi_fw.bin</code></pre></div><p>I checked the checksum and copied it in place:<br /></p><div class="codebox"><pre><code>root@OpenWrt:/tmp# md5sum vr9_dsl_fw_annex_b.bin
59dd9dc81195c6854433c691b163f757  vr9_dsl_fw_annex_b.bin

root@OpenWrt:/tmp# cp vr9_dsl_fw_annex_b.bin /lib/firmware/vdsl.bin</code></pre></div><p>For annex b I edited the default /etc/config/network to:<br /></p><div class="codebox"><pre><code>config vdsl &#039;dsl&#039;
        option annex &#039;b&#039;
        option firmware &#039;/lib/firmware/vdsl.bin&#039;
        option tone &#039;bv&#039;
        option xfer_mode &#039;atm&#039;</code></pre></div><p>I can&#039;t test an ADSL connection before monday, but everything looks ok at the moment, the pppd is waiting for responding PADO packets:<br /></p><div class="codebox"><pre><code>logread
[...]
Wed Oct  1 14:21:39 2014 daemon.warn pppd[2300]: Timeout waiting for PADO packets
Wed Oct  1 14:21:39 2014 daemon.err pppd[2300]: Unable to complete PPPoE Discovery
Wed Oct  1 14:21:39 2014 daemon.info pppd[2300]: Exit.</code></pre></div><p>By the way, I found a newer firmware 1.22 at telekom (Firmware_Speedport_W921V_1.22.000.bin) and the contained blob has the same checksum as in 1.20 and 1.21:<br />59dd9dc81195c6854433c691b163f757&nbsp; vr9_dsl_fw_annex_b.bin</p><p>Great forum, thanks to all!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p273860">
				<div class="post-metadata">
					<div class="post-num">Post #144</div>
					<div class="post-author">asc</div>
					<div class="post-datetime">
						25 Apr 2015, 07:25					</div>
				</div>
				<div class="post-content content">
					<p>Hey Hank,<br />you are one of the few Annex B users here, it would be nice to hear if you are successful.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p273905">
				<div class="post-metadata">
					<div class="post-num">Post #145</div>
					<div class="post-author">Wingman2k</div>
					<div class="post-datetime">
						25 Apr 2015, 13:40					</div>
				</div>
				<div class="post-content content">
					<p>Hi Hank, good news so far, depending on your Country or ISP you have either atm or ptm if you have ptm (Germany-Telekom) you need to install kmod-ltq-ptm-vr9 and set &quot;option xfer_mode &#039;ptm&#039;. Maybe also VLAN settings for the pppoe connection later on (Telekom-VDSL), try to check it before to prevent headache.<br />Good Luck</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274158">
				<div class="post-metadata">
					<div class="post-num">Post #146</div>
					<div class="post-author">Hank</div>
					<div class="post-datetime">
						27 Apr 2015, 16:53					</div>
				</div>
				<div class="post-content content">
					<p>It works. I had the W8970B on an annex b line today (plain ADSL based on ATM from a german city carrier).</p><p>A summary of my first settings:<br /></p><div class="codebox"><pre><code>/etc/config/network:
[...]
config atm-bridge &#039;atm&#039;                        
        option vpi &#039;1&#039;                         
        option vci &#039;32&#039;                   
        option encaps &#039;llc&#039;               
        option payload &#039;bridged&#039;
[...]
config interface &#039;wan&#039;                    
        option ifname &#039;nas0&#039;              
        option proto &#039;pppoe&#039;              
        option ipv6 &#039;1&#039;                   
        option macaddr &#039;e8:de:27:2e:XX:XX&#039;
        option username &#039;XXXXXX&#039;      
        option password &#039;XXXXXX&#039;
[...]
config vdsl &#039;dsl&#039;                         
        option annex &#039;b&#039;                  
        option firmware &#039;/lib/firmware/vdsl.bin&#039;
        option tone &#039;bv&#039;                        
        option xfer_mode &#039;atm&#039;</code></pre></div><p>The LuCI GUI shows:<br />TP-LINK TD-W8970<br />Firmware Version&nbsp; &nbsp; OpenWrt Barrier Breaker 14.07 / LuCI Trunk (0.12+svn-r10530)<br />Kernel Version&nbsp; &nbsp; 3.10.49 </p><p>The sync-LED is on and status-page shows:<br />ADSL Status&nbsp; &nbsp; </p><p>ADSL &nbsp; &nbsp; Status: UP<br />Line State: showtime_tc_sync [0x801]<br />Line Speed: 4.096 Mb/s / 544 Kb/s<br />Line Attenuation: 38.4 dB / 27 dB<br />Noise Margin: 6.2 dB / 9 dB</p><p>Although it seems to be synced with 4096 kbps, a first download-test gave me just 1280 kbps, so eventually there is space for some tweaking.</p><p>cheers</p><p>PS: 28.04.2015<br />On a high-quality ADSL2+ line I get full speed, so everything is OK with the modem:<br />ADSL&nbsp; &nbsp; Status: UP<br />Line State: showtime_tc_sync [0x801]<br />Line Speed: 23.608 Mb/s / 1.456 Mb/s<br />Line Attenuation: 1.1 dB / 0.1 dB<br />Noise Margin: 9 dB / 10.2 dB</p><p>wget: 20mb-testfile.bin&nbsp; &nbsp; &nbsp; &nbsp; 100%[=======================&gt;]&nbsp; 20.00M&nbsp; 2.38MB/s&nbsp; &nbsp;in 8.5s</p>											<p class="post-edited">(Last edited by <strong>Hank</strong> on 28 Apr 2015, 16:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274884">
				<div class="post-metadata">
					<div class="post-num">Post #147</div>
					<div class="post-author">int0x13</div>
					<div class="post-datetime">
						2 May 2015, 16:08					</div>
				</div>
				<div class="post-content content">
					<p>Hello there, so far still No One has managed to tweak the SNR margin? All my attempts has failed so far and i dont find any good documentation about that. Same about tweaking interleaving delay. There must be a way to do it, maybe through the Modem CLI shell but the documentation is poor about that.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p276503">
				<div class="post-metadata">
					<div class="post-num">Post #148</div>
					<div class="post-author">hecatae</div>
					<div class="post-datetime">
						16 May 2015, 21:25					</div>
				</div>
				<div class="post-content content">
					<p>is there anyone using Ambrosa&#039;s w8970 chaos calmer builds <a href="https://github.com/ambrosa/openwrt-TPLINK8970/tree/master/BUILD">https://github.com/ambrosa/openwrt-TPLI … ster/BUILD</a> , I cant get it to authenticate using PPPoA, sync is perfect, but the lack of authentication means I cant get online</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p276829">
				<div class="post-metadata">
					<div class="post-num">Post #149</div>
					<div class="post-author">joseba_g</div>
					<div class="post-datetime">
						20 May 2015, 09:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>int0x13 wrote:</cite><blockquote><p>Hello there, so far still No One has managed to tweak the SNR margin? All my attempts has failed so far and i dont find any good documentation about that. Same about tweaking interleaving delay. There must be a way to do it, maybe through the Modem CLI shell but the documentation is poor about that.</p></blockquote></div><p>Not a secret, for a &quot;correct&quot; use take a look to&nbsp; <a href="https://dev.openwrt.org/browser/trunk/target/linux/lantiq/base-files/lib/functions/lantiq_dsl.sh"> lantiq_dsl.sh </a>&nbsp; and get the idea.</p><p>For a complete list ssh to your router and type</p><div class="codebox"><pre><code>  /sbin/vdsl_cpe_control --help </code></pre></div><p> </p><p>and </p><div class="codebox"><pre><code>  # /sbin/vdsl_cpe_control --console </code></pre></div><p> <br />(it opens a cli for parameter management, type help)</p><div class="codebox"><pre><code> DSL_CPE#&gt;help</code></pre></div><p> </p><p>i try long time ago several ways to change snr, i belive is something like</p><div class="codebox"><pre><code> DSL_CPE#&gt; locs 0 -20
 DSL_CPE#&gt;acs 2
 DSL_CPE#&gt;quit </code></pre></div><p> </p><p>and take a look</p><div class="codebox"><pre><code>  /etc/init.d/dsl_control lucistat </code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p277739">
				<div class="post-metadata">
					<div class="post-num">Post #150</div>
					<div class="post-author">magum72</div>
					<div class="post-datetime">
						27 May 2015, 19:33					</div>
				</div>
				<div class="post-content content">
					<p>hi joseba_g</p><p>I have a router with firmware openwrt w8971 but I can not change the value snr<br />I ask you, please, if you can make a more detailed guide, thanks for your help.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 6 of 16</div><nav><ul><li><a href="viewtopic.php%3Fid=42380&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42380&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=42380&amp;p=5.html">5</a></li><li class="pagination-current"><span>6</span></li><li><a href="viewtopic.php%3Fid=42380&amp;p=7.html">7</a></li><li><a href="viewtopic.php%3Fid=42380&amp;p=8.html">8</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42380&amp;p=16.html">16</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>