<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> New Broadcom BCM63xx codebase with GPL&#039;d Ethernet and USB support</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 8 Feb 2018 and 7 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 10 of 30</div><nav><ul><li><a href="viewtopic.php%3Fid=17370&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=17370&amp;p=8.html">8</a></li><li><a href="viewtopic.php%3Fid=17370&amp;p=9.html">9</a></li><li class="pagination-current"><span>10</span></li><li><a href="viewtopic.php%3Fid=17370&amp;p=11.html">11</a></li><li><a href="viewtopic.php%3Fid=17370&amp;p=12.html">12</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=17370&amp;p=30.html">30</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p80774">
				<div class="post-metadata">
					<div class="post-num">Post #226</div>
					<div class="post-author">martonmiklos</div>
					<div class="post-datetime">
						30 Jan 2009, 21:09					</div>
				</div>
				<div class="post-content content">
					<p>Hi MisteroX!</p><p>I have just uploaded something like a tutorial it to the wiki.</p><p><a href="http://wiki.openwrt.org/OpenWrtDocs/Hardware/Netgear/DG834GT">http://wiki.openwrt.org/OpenWrtDocs/Har … ar/DG834GT</a></p><p>I have loaded the UHCI module, which is seems to be working, but it does not detect any USB device at the /proc/bus/usb/devices. </p><p>Best regards,<br />MiklÃ³s MÃ¡rton</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80781">
				<div class="post-metadata">
					<div class="post-num">Post #227</div>
					<div class="post-author">misteroX</div>
					<div class="post-datetime">
						30 Jan 2009, 21:43					</div>
				</div>
				<div class="post-content content">
					<p>Hi martonmiklos,<br />&nbsp; &nbsp; <br />I will buy the components and try.</p><p>Thank<br />MisteroX</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80785">
				<div class="post-metadata">
					<div class="post-num">Post #228</div>
					<div class="post-author">mototun</div>
					<div class="post-datetime">
						30 Jan 2009, 22:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>oes anyone have experiences with the USB port, with any router based on BCM6348?</p><p>I have a Netgear DG834GT.<br />I have soldered the missing parts to USB port.<br />But at the /proc/bus/usb/devices there is only the host controller is listed.</p></blockquote></div><p>I&#039;ve tried to upgrade the USB port on my DG834GBT just after the 63xx port was released (exactly in the same way you descrbe it on wiki), unfortunately with no success;kernel loads the drivers reporting two USB ports but there is no reaction when I put a stick or usb-souncard into the socket <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> <br />are any usb-devices recognized in &#039;dmesg&#039; by you? I guess there should be another missing component (resistor or junction) which controls BCM6348 usb-mode (device or host)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80787">
				<div class="post-metadata">
					<div class="post-num">Post #229</div>
					<div class="post-author">t3l3m4k0</div>
					<div class="post-datetime">
						30 Jan 2009, 23:40					</div>
				</div>
				<div class="post-content content">
					<p>@ mototum<br />@ misteroX<br />@ martonmiklos</p><p>USB in 6348 devices are 1.1. It works ok. I have a 6348GW-11 board and i moded my board at similar way than yours. With openWRT, it plays music on a USB sound device, and i have connected usb memory styck, usb hardisk, usb hp1220c printer. I use a USB hub.</p><p>You must have to acivate kernel modules from make menuconfig before compiling openWRT, for example usblp for printers, usb_storage, sd_mod, scsi_mod, ... for usb sticks.</p><br /><p>And most important, only use ohci_hcd, because is 1.1 USB compliant and ehci and uhci not works.</p><p>Greetings</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80797">
				<div class="post-metadata">
					<div class="post-num">Post #230</div>
					<div class="post-author">mototun</div>
					<div class="post-datetime">
						31 Jan 2009, 01:12					</div>
				</div>
				<div class="post-content content">
					<p>2 t3l3m4k0: certainly it works, but we are trying to retrofit an usb port on DG834GT which is not soldered and as for me I tried really hard with different resistor values and connections: kernel reports 2 available usb ports, but no usb devices are recognized when plugged in<br />I will be very happy when someone gets it worked on DG834 and shares it with us <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80802">
				<div class="post-metadata">
					<div class="post-num">Post #231</div>
					<div class="post-author">falcorn</div>
					<div class="post-datetime">
						31 Jan 2009, 11:19					</div>
				</div>
				<div class="post-content content">
					<p>will there be an openwrt firmware for netgear DG834G?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80803">
				<div class="post-metadata">
					<div class="post-num">Post #232</div>
					<div class="post-author">obsy</div>
					<div class="post-datetime">
						31 Jan 2009, 11:42					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />USR 9108. I added new board def (96348GW-A) to board_bcm963xx.c, CFEOLD build to Makefiles.</p><p>So this image can be loaded by www. But now:<br /></p><div class="codebox"><pre><code>CFE version 1.0.37-4.3 for BCM96348 (32bit,SP,BE)
Build Date: Tue Jan 17 07:46:56 CST 2006 (root@new-host-2)
Copyright (C) 2000-2005 Broadcom Corporation.

Boot Address 0xbfc00000

Initializing Arena.
Initializing Devices.
Parallel flash device: name M29W320ET, id 0x2256, size 4096KB
CPU type 0x29107: 256MHz, Bus: 128MHz, Ref: 32MHz
Total memory: 16777216 bytes (16MB)

Total memory used by CFE:  0x80401000 - 0x805252C0 (1196736)
Initialized Data:          0x8041C590 - 0x8041EA50 (9408)
BSS Area:                  0x8041EA50 - 0x804232C0 (18544)
Local Heap:                0x804232C0 - 0x805232C0 (1048576)
Stack Area:                0x805232C0 - 0x805252C0 (8192)
Text (code) segment:       0x80401000 - 0x8041C590 (112016)
Boot area (physical):      0x00526000 - 0x00566000
Relocation Factor:         I:00000000 - D:00000000

Board IP address                  : 192.168.1.1  
Host IP address                   : 192.168.1.100  
Gateway IP address                :   
Run from flash/host (f/h)         : f  
Default host run file name        : vmlinux  
Default host flash file name      : bcm963xx_fs_kernel  
Boot delay (0-9 seconds)          : 1  
Board Id Name                     : 96348GW-A  
Psi size in KB                    : 24
Number of MAC Addresses (1-32)    : 11  
Base MAC Address                  : 00:14:c1:1f:c0:e9  
Ethernet PHY Type                 : External Switch Using Reverse MII
Memory size in MB                 : 16
Country code                      : FR

*** Press any key to stop auto run (1 seconds) ***
Auto run second count down: 0
Code Address: 0x80010000, Entry Address: 0x80010000
Decompression OK!
Entry at 0x80010000
Closing network.
Starting program at 0x80010000
Linux version 2.6.27.13 (user@debian) (gcc version 4.1.2) #4 Sat Jan 31 10:26:41 CET 2009
Detected Broadcom 0x6348 CPU revision b0
CPU frequency is 256000000 Hz
16MB of RAM installed
board_bcm963xx: CFE version: 1.0.37-4.3
console [early0] enabled
CPU revision is: 00029107 (Broadcom BCM6348)
board_bcm963xx: board name: 96348GW-A
Determined physical RAM map:
 memory: 01000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00001000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00001000
Built 1 zonelists in Zone order, mobility grouping off.  Total pages: 4064
Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,jffs2 init=/etc/preinit noinitrd console=ttyS0,115200
Primary instruction cache 16kB, VIPT, 2-way, linesize 16 bytes.
Primary data cache 8kB, 2-way, VIPT, no aliases, linesize 16 bytes
PID hash table entries: 64 (order: 6, 256 bytes)
Dentry cache hash table entries: 2048 (order: 1, 8192 bytes)
Inode-cache hash table entries: 1024 (order: 0, 4096 bytes)
Memory: 13720k/16384k available (1867k kernel code, 2664k reserved, 321k data, 120k init, 0k highmem)
Calibrating delay loop... 254.97 BogoMIPS (lpj=509952)
Mount-cache hash table entries: 512
net_namespace: 592 bytes
NET: Registered protocol family 16
registering 37 GPIOs
registering PCI controller with io_map_base unset
bus: 00 index 0 io port: [8000000, 800ffff]
bus: 00 index 1 mmio: [30000000, 37ffffff]
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 512 (order: 0, 4096 bytes)
TCP bind hash table entries: 512 (order: -1, 2048 bytes)
TCP: Hash tables configured (established 512 bind 512)
TCP reno registered
NET: Registered protocol family 1
audit: initializing netlink socket (disabled)
type=2000 audit(0.277:1): initialized
squashfs: version 3.0 (2006/03/15) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) (SUMMARY)  Â© 2001-2006 Red Hat, Inc.
msgmni has been set to 26
io scheduler noop registered
io scheduler cfq registered (default)
bcm63xx_uart.0: ttyS0 at MMIO 0xfffe0300 (irq = 10) is a bcm63xx_uart
console handover: boot [early0] -&gt; real [ttyS0]
bcm63xx_enet MII bus: probed
bcm963xx_flash: 0x00400000 at 0x1fc00000
bcm963xx: Found 1 x16 devices at 0x0 in 16-bit bank
 Amd/Fujitsu Extended Query Table at 0x0040
bcm963xx: Swapping erase regions for broken CFI table.
number of CFI chips: 1
cfi_cmdset_0002: Disabling erase-suspend-program due to code brokenness.
bcm963xx_flash: Read Signature value of CFE1CFE1
bcm963xx_flash: CFE bootloader detected
bcm963xx_flash: CFE boot tag found with version 6 and board type 96348GW-A.
bcm963xx_flash: Partition 0 is CFE offset 0 and length 10000
bcm963xx_flash: Partition 1 is kernel offset 1010c and length 2430d7
bcm963xx_flash: Partition 2 is rootfs offset 10100 and length 19000c
bcm963xx_flash: Partition 3 is nvram offset 3f0000 and length 10000
Creating 4 MTD partitions on &quot;bcm963xx&quot;:
0x00000000-0x00010000 : &quot;CFE&quot;
0x0001010c-0x002531e3 : &quot;kernel&quot;
mtd: partition &quot;kernel&quot; doesn&#039;t start on an erase block boundary -- force read-only
0x00010100-0x001a010c : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-only
mtd: partition &quot;rootfs&quot; set to be root filesystem
split_squashfs: no squashfs found in &quot;bcm963xx&quot;
0x003f0000-0x00400000 : &quot;nvram&quot;
TCP bic registered
NET: Registered protocol family 17
jffs2: Flash size not aligned to erasesize, reducing to 1600KiB
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00000000: 0x674f instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00000004: 0x000b instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00000008: 0x0019 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0000000c: 0x8001 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00000010: 0x8001 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00000014: 0x000b instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00000018: 0x5d00 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00000020: 0x0833 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00000024: 0xfd76 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00000028: 0x0848 instead
(lots of)
Further such events for this erase block will not be printed
Old JFFS2 bitmask found at 0x0017c47c
You cannot use older JFFS2 filesystems with newer kernels
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00180000: 0x9c29 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00180004: 0x6f34 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00180008: 0x8590 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0018000c: 0x1cc7 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00180010: 0x905d instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00180014: 0x5f94 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00180018: 0x6348 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0018001c: 0x7864 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00180020: 0xdbc7 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00180024: 0x8a89 instead
Further such events for this erase block will not be printed
Cowardly refusing to erase blocks on filesystem with no valid JFFS2 nodes
empty_blocks 0, bad_blocks 0, c-&gt;nr_blocks 25
VFS: Cannot open root device &quot;mtdblock2&quot; or unknown-block(31,2)
Please append a correct &quot;root=&quot; boot option; here are the available partitions:
1f00         64 mtdblock0 (driver?)
1f01       2316 mtdblock1 (driver?)
1f02       1600 mtdblock2 (driver?)
1f03         64 mtdblock3 (driver?)
Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(31,2)</code></pre></div><p>Any help?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80808">
				<div class="post-metadata">
					<div class="post-num">Post #233</div>
					<div class="post-author">martonmiklos</div>
					<div class="post-datetime">
						31 Jan 2009, 14:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mototun wrote:</cite><blockquote><p>I&#039;ve tried to upgrade the USB port on my DG834GBT just after the 63xx port was released (exactly in the same way you descrbe it on wiki), unfortunately with no success;kernel loads the drivers reporting two USB ports but there is no reaction when I put a stick or usb-souncard into the socket <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> <br />are any usb-devices recognized in &#039;dmesg&#039; by you? I guess there should be another missing component (resistor or junction) which controls BCM6348 usb-mode (device or host)</p></blockquote></div><p>Unfortunatelly same issues at to me. The dmesg says nothing after plugging various devices. I have tried a few webcams, a flash disk. Under the /proc/bus/usb/devices only the root hub is visible. </p><p>t3l3m4k0:</p><p>Of course I have selected the ohci_hci module, which is loaded fine, and the other modules for the usb storage too.</p><p>So you have 6348GW-11 board, which has no populated USB port in factory model, and you soldered the missing parts?</p><p>Were these resistors and capacitors missing from your board too?<br /><a href="http://wiki.openwrt.org/OpenWrtDocs/Hardware/Netgear/DG834GT?action=AttachFile&amp;do=get&amp;target=usb.png">http://wiki.openwrt.org/OpenWrtDocs/Har … et=usb.png</a></p><p>If yes please share with us the values of these parts.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80809">
				<div class="post-metadata">
					<div class="post-num">Post #234</div>
					<div class="post-author">obsy</div>
					<div class="post-datetime">
						31 Jan 2009, 15:10					</div>
				</div>
				<div class="post-content content">
					<p>Ok, usr9108 now is working. It does not work if the image is generated by CFEOLD but you can flash via web. It works if image is generated by CFE&nbsp; and flashed via CFE.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80813">
				<div class="post-metadata">
					<div class="post-num">Post #235</div>
					<div class="post-author">t3l3m4k0</div>
					<div class="post-datetime">
						31 Jan 2009, 18:10					</div>
				</div>
				<div class="post-content content">
					<p>@osby,<br />Nice to see other model. <br />@martonmiklos,<br />yes i soldered missing parts. The only relevants for your board are:<br />R515, R514, ( can be a wire, R=0 Ohms)<br />R517, R516, (R=15 kOhms)</p><p>BRCM96348 SoC has 2 ports USB 1.1, one Host, other Slave.<br />I don&#039;t know your board but you must use (identify, of course), usb host port.<br />Finaly there is a input pin on BRCM6348 chip to validate (enable ) USB port status. You must identify it and pullup with a 15kOhms resistor to 3&#039;3V.</p><p>My board has space for a unpopulate chip to detect overcurrent on usb&nbsp; port, (to protect it) . Is there where i found and pullup the pin to enable and validate USB port.</p><p>Good luck to all.</p>											<p class="post-edited">(Last edited by <strong>t3l3m4k0</strong> on 31 Jan 2009, 18:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80814">
				<div class="post-metadata">
					<div class="post-num">Post #236</div>
					<div class="post-author">t3l3m4k0</div>
					<div class="post-datetime">
						31 Jan 2009, 18:22					</div>
				</div>
				<div class="post-content content">
					<p>You can see pictures of USB mod at 96348GW-11 board ( Comtrend 536+ router):</p><p>mod made<br /><a href="http://img517.imageshack.us/my.php?image=imagen176ew2.jpg">http://img517.imageshack.us/my.php?imag … 176ew2.jpg</a></p><p>unpopulated board<br /><a href="http://img505.imageshack.us/my.php?image=comtrend18bpnv7.jpg">http://img505.imageshack.us/my.php?imag … 8bpnv7.jpg</a></p><p>mod to do in my board<br /><a href="http://img530.imageshack.us/img530/2545/usb2comtrend536v2xp2.gif">http://img530.imageshack.us/img530/2545 … 6v2xp2.gif</a></p><p>pullup to enable usb, can see 8 pins DIP chip to limitate overcurrent <br /><a href="http://img509.imageshack.us/my.php?image=detallbb0.jpg">http://img509.imageshack.us/my.php?image=detallbb0.jpg</a></p>											<p class="post-edited">(Last edited by <strong>t3l3m4k0</strong> on 31 Jan 2009, 18:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80819">
				<div class="post-metadata">
					<div class="post-num">Post #237</div>
					<div class="post-author">cshore</div>
					<div class="post-datetime">
						31 Jan 2009, 20:35					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m not sure the USB driver is working as advertised.&nbsp; I have a USB device already included on the board and I can&#039;t get it recognized, but maybe I&#039;m using the wrong module(s).&nbsp; The USB device appears as a cdc-ether device on the host computer and has been tested and works with the original firmware, but with the current OpenWRT the device doesn&#039;t appear on OpenWRT (as usb0, like the original firmware, or anything else for that matter) nor the host computer.</p><p>I&#039;ve tried the usb-net kernel modules and the ohci-hcd modules to no avail.&nbsp; Any ideas?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80849">
				<div class="post-metadata">
					<div class="post-num">Post #238</div>
					<div class="post-author">falcorn</div>
					<div class="post-datetime">
						1 Feb 2009, 12:25					</div>
				</div>
				<div class="post-content content">
					<p>excuse me all what&#039;s the actual situation of openwrt on Alice Gate Voip 2 plus business and Netgear DG834G?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80853">
				<div class="post-metadata">
					<div class="post-num">Post #239</div>
					<div class="post-author">martonmiklos</div>
					<div class="post-datetime">
						1 Feb 2009, 14:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>t3l3m4k0 wrote:</cite><blockquote><p>@osby,<br />Nice to see other model. <br />@martonmiklos,<br />yes i soldered missing parts. The only relevants for your board are:<br />R515, R514, ( can be a wire, R=0 Ohms)<br />R517, R516, (R=15 kOhms)</p><p>BRCM96348 SoC has 2 ports USB 1.1, one Host, other Slave.<br />I don&#039;t know your board but you must use (identify, of course), usb host port.<br />Finaly there is a input pin on BRCM6348 chip to validate (enable ) USB port status. You must identify it and pullup with a 15kOhms resistor to 3&#039;3V.</p><p>My board has space for a unpopulate chip to detect overcurrent on usb&nbsp; port, (to protect it) . Is there where i found and pullup the pin to enable and validate USB port.</p><p>Good luck to all.</p></blockquote></div><p>Thank for the answer and the pictures. <br />Of course we are using a host port of the device.<br />I think the&nbsp; problem will be with the USB enable resistor. I will look after that tomorrow.</p>											<p class="post-edited">(Last edited by <strong>martonmiklos</strong> on 1 Feb 2009, 14:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80892">
				<div class="post-metadata">
					<div class="post-num">Post #240</div>
					<div class="post-author">protocold</div>
					<div class="post-datetime">
						2 Feb 2009, 09:23					</div>
				</div>
				<div class="post-content content">
					<p>Hi t3l3m4k0 and martonmiklos,</p><p>I also have a router that is based on BCM6348. However, it already has the USB slave port populated(It already has a USB-B connector). Do you know if there is a way to rewire it to use the Host port??</p><p>If not, can you give some hint on how to locate the host port?? </p><p>Regards,<br />ProtoColD</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80900">
				<div class="post-metadata">
					<div class="post-num">Post #241</div>
					<div class="post-author">martonmiklos</div>
					<div class="post-datetime">
						2 Feb 2009, 11:57					</div>
				</div>
				<div class="post-content content">
					<p>I think the host and the slave port&#039;s data lines are separated phisically, but I am not sure in it. <br />According to the product brief overview picture, it should be in this way. <br />In this case, I think the host data lines are not wired out, but it is not 100%.</p><p>BTW. If it possible please send me a picture of your board.</p><p>Best regards,<br />MÃ¡rton MiklÃ³s</p>											<p class="post-edited">(Last edited by <strong>martonmiklos</strong> on 2 Feb 2009, 12:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80924">
				<div class="post-metadata">
					<div class="post-num">Post #242</div>
					<div class="post-author">t3l3m4k0</div>
					<div class="post-datetime">
						2 Feb 2009, 15:41					</div>
				</div>
				<div class="post-content content">
					<p>There is no much information about BCM SoC.<br />I&nbsp; have found only this info about chip pinout:<br /><a href="http://www.f-x.fr/wikini/wakka.php?wiki=Bcm6348PinOut">http://www.f-x.fr/wikini/wakka.php?wiki=Bcm6348PinOut</a></p><p>As you can see, there are 2 independent USB inputs ports.</p><p>Salutacions</p>											<p class="post-edited">(Last edited by <strong>t3l3m4k0</strong> on 2 Feb 2009, 15:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80958">
				<div class="post-metadata">
					<div class="post-num">Post #243</div>
					<div class="post-author">LinuxInside</div>
					<div class="post-datetime">
						2 Feb 2009, 23:39					</div>
				</div>
				<div class="post-content content">
					<p>Yes! , I have solved the mystery of running kernels without the need for flashing.</p><p>I always wondered why I could not do:</p><p>r 192.168.1.100:vmlinuz</p><br /><p>Now I figured out why, the CFE loads the lzma compressed image to 0x80000000 afterwards it then tries to uncompress&nbsp; the kernel to 0x800010000. Thus overwriting the compressed image with the uncompressed image.</p><p>I now have patched the CFE to use an other TFTP load address, with the result I now can load kernels without the need for reflashing!</p><p>Also I have managed to disable the &quot;dual&quot; image check so no more backups to the lower half of flash which makes another 4M of flash space usable. (this has been tested with the Davolink router)</p><div class="codebox"><pre><code>...
*** Press any key to stop auto run (1 seconds) ***
Auto run second count down: 1
web info: Waiting for connection on socket 0.
CFE&gt;
CFE&gt; r 192.168.1.100:vmlinuz
Retry loading it as a compressed image.
Loading 192.168.1.100:vmlinuz ...
Finished loading 768252 bytes
Code Address: 0x80010000, Entry Address: 0x80010000
Decompression OK!
Entry at 0x80010000
Closing network.
Starting program at 0x80010000
Linux version 2.6.27.13 (henk@fx41) (gcc version 4.1.2) #6 Mon Feb 2 16:22:16 C9
...</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80959">
				<div class="post-metadata">
					<div class="post-num">Post #244</div>
					<div class="post-author">LinuxInside</div>
					<div class="post-datetime">
						2 Feb 2009, 23:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>t3l3m4k0 wrote:</cite><blockquote><p>There is no much information about BCM SoC.<br />I&nbsp; have found only this info about chip pinout:<br /><a href="http://www.f-x.fr/wikini/wakka.php?wiki=Bcm6348PinOut">http://www.f-x.fr/wikini/wakka.php?wiki=Bcm6348PinOut</a></p><p>As you can see, there are 2 independent USB inputs ports.</p><p>Salutacions</p></blockquote></div><p>Great info thanx! I will check to see if I can uncover an extra host usb port.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80967">
				<div class="post-metadata">
					<div class="post-num">Post #245</div>
					<div class="post-author">Pavel</div>
					<div class="post-datetime">
						3 Feb 2009, 06:23					</div>
				</div>
				<div class="post-content content">
					<p>Somebody compile firmware for asus wl-600g on openwrt?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81036">
				<div class="post-metadata">
					<div class="post-num">Post #246</div>
					<div class="post-author">goundoulf</div>
					<div class="post-datetime">
						4 Feb 2009, 11:09					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>t3l3m4k0 wrote:</cite><blockquote><p>There is no much information about BCM SoC.<br />I&nbsp; have found only this info about chip pinout:<br /><a href="http://www.f-x.fr/wikini/wakka.php?wiki=Bcm6348PinOut">http://www.f-x.fr/wikini/wakka.php?wiki=Bcm6348PinOut</a></p></blockquote></div><p>there used to be a bsdl file which could be found on internet, but it is no longer available <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81057">
				<div class="post-metadata">
					<div class="post-num">Post #247</div>
					<div class="post-author">cshore</div>
					<div class="post-datetime">
						4 Feb 2009, 15:16					</div>
				</div>
				<div class="post-content content">
					<p>Okay, after debricking my router (not wrt&#039;s fault - I was trying different board types because eth1 is the switch and that doesn&#039;t work for robocfg; I think maybe I&#039;ll have to hack robocfg), I am back to trying to figure out why the usb slave device is not detected.</p><p>Is the USB slave device supported, or it only the usb host?&nbsp; If the usb slave is supposed to be supported what should I see in dmesg and what modules do I need?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81061">
				<div class="post-metadata">
					<div class="post-num">Post #248</div>
					<div class="post-author">cshore</div>
					<div class="post-datetime">
						4 Feb 2009, 16:39					</div>
				</div>
				<div class="post-content content">
					<p>Actually, before I hack on robocfg: do vlan&#039;s work with the new driver?&nbsp; If so is it robocfg I need? vnconfig complains of a mising /proc/&lt;something&gt;/vlan (I forget exactly what) and refuses to do anything.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81090">
				<div class="post-metadata">
					<div class="post-num">Post #249</div>
					<div class="post-author">t3l3m4k0</div>
					<div class="post-datetime">
						4 Feb 2009, 22:10					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>cshore wrote:</cite><blockquote><p>Actually, before I hack on robocfg: do vlan&#039;s work with the new driver?&nbsp; If so is it robocfg I need? vnconfig complains of a mising /proc/&lt;something&gt;/vlan (I forget exactly what) and refuses to do anything.</p></blockquote></div><p>No idea. I not tested anythink about vlans</p><div class="quotebox"><cite>cshore wrote:</cite><blockquote><p>Is the USB slave device supported, or it only the usb host?&nbsp; If the usb slave is supposed to be supported what should I see in dmesg and what modules do I need?</p></blockquote></div><p>I don&#039;t know how to select usb0/usb1 port slave/host mode. Below, you can see kernel log from manufacturer firmware. Acces to switch&nbsp; must be made with SPI protocol (I think Florian_ is working about it) <br /></p><div class="codebox"><pre><code>ohci_hcd: 2004 Feb 02 USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver (PCI)
ohci_hcd: block sizes: ed 64 td 64
PCI: Enabling device 0000:00:09.0 (0000 -&gt; 0002)
ohci_hcd 0000:00:09.0: OHCI Host Controller
PCI: Setting latency timer of device 0000:00:09.0 to 64
ohci_hcd 0000:00:09.0: irq 20, pci mem c0000b00
ohci_hcd 0000:00:09.0: new USB bus registered, assigned bus number 1
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 2 ports detected
usbcore: registered new driver usblp
drivers/usb/class/usblp.c: v0.13: USB Printer Device Class driver
Initializing USB Mass Storage driver...
usbcore: registered new driver usb-storage
USB Mass Storage support registered.
brcmboard: brcm_board_init entry
...
VFS: Mounted root (squashfs filesystem) readonly.
Mounted devfs on /dev
Freeing unused kernel memory: 80k freed
Algorithmics/MIPS FPU Emulator v1.5
atmapi: module license &#039;Proprietary&#039; taints kernel.
blaadd: blaa_detect entry
adsl: adsl_init entry
Broadcom BCMPROCFS v1.0 initialized
Broadcom BCM6348A2 Ethernet Network Device v0.3 Nov 18 2005 16:39:29
....
Config Ethernet Switch Through SPI Slave Select 1
eth0: MAC Address: 00:30:xx:xx:xx:xx
....
Broadcom BCM6348A2 USB Network Device v0.4 Nov 18 2005 16:39:32
usb0: MAC Address: 00 30 xx xx xx FA
usb0: Host MAC Address: 00 30 xx xx xx FB
...
PCI: Setting latency timer of device 0000:00:01.0 to 64
PCI: Enabling device 0000:00:01.0 (0004 -&gt; 0006)
dgasp: kerSysRegisterDyingGaspHandler: wl0 registered
wl0: Broadcom BCM4320 802.11 Wireless Controller 3.91.41.0
eth0 Link UP.
BcmAdsl_Initialize=0xC0057208, g_pFnNotifyCallback=0xC006A374
AdslCoreHwReset: AdslOemDataAddr = 0xA0FF74C4
dgasp: kerSysRegisterDyingGaspHandler: dsl0 registered
device usb0 entered promiscuous mode
br0: port 1(usb0) entering learning state
br0: topology change detected, propagating
br0: port 1(usb0) entering forwarding state
device eth0 entered promiscuous mode
br0: port 2(eth0) entering learning state
br0: topology change detected, propagating
br0: port 2(eth0) entering forwarding state
device wl0 entered promiscuous mode
br0: port 3(wl0) entering learning state
br0: topology change detected, propagating
br0: port 3(wl0) entering forwarding state
br0: port 1(usb0) entering disabled state</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81091">
				<div class="post-metadata">
					<div class="post-num">Post #250</div>
					<div class="post-author">t3l3m4k0</div>
					<div class="post-datetime">
						4 Feb 2009, 22:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>goundoulf wrote:</cite><blockquote><div class="quotebox"><cite>t3l3m4k0 wrote:</cite><blockquote><p>There is no much information about BCM SoC.<br />I&nbsp; have found only this info about chip pinout:<br /><a href="http://www.f-x.fr/wikini/wakka.php?wiki=Bcm6348PinOut">http://www.f-x.fr/wikini/wakka.php?wiki=Bcm6348PinOut</a></p></blockquote></div><p>there used to be a bsdl file which could be found on internet, but it is no longer available <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p></blockquote></div><p>maybe someone has a copy?</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 10 of 30</div><nav><ul><li><a href="viewtopic.php%3Fid=17370&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=17370&amp;p=8.html">8</a></li><li><a href="viewtopic.php%3Fid=17370&amp;p=9.html">9</a></li><li class="pagination-current"><span>10</span></li><li><a href="viewtopic.php%3Fid=17370&amp;p=11.html">11</a></li><li><a href="viewtopic.php%3Fid=17370&amp;p=12.html">12</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=17370&amp;p=30.html">30</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>