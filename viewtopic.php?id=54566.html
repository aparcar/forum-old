<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Did I Brick My TP-LINK TL-WA901ND v3?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p257620">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">pwrmac7100</div>
					<div class="post-datetime">
						13 Dec 2014, 22:00					</div>
				</div>
				<div class="post-content content">
					<p>First off, thank you for helping...</p><p>I installed OpenWRT months ago with the hopes of helping the local homeless shelter with their wireless network...and no good deed goes unpunished! I had everything install without problems. However, I was never able to get the configuration perfect. So the WAP sat on my desk for a while doing nothing. I recently decided to turn it on again and try to finish the configuration. The WAP didn&#039;t start correctly, as if the something was deleted from sitting on my desk unpowered for months. The wireless radio wouldn&#039;t come on, the LAN address was not where I left it, I couldn&#039;t connect, blah blah blah.</p><p>After some reading I assumed the WAP went into fail safe mode. I am able to telnet to 192.168.1.1. At first, I was not able to change the password (was getting a &#039;read-only&#039; error). I then typed &#039;mount_root&quot; and was able to change the password, and then was able to SSH into the unit. I really don&#039;t know what to do beyond this point. I assume that I need to put the WAP on my routers LAN (192.168.5.x) and then do some sort of download from SSH - but I don&#039;t know how to accomplish that. Can someone please point in the right direction to recover this unit?</p><p>Thanks in Advance,</p>											<p class="post-edited">(Last edited by <strong>pwrmac7100</strong> on 13 Dec 2014, 23:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257628">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						13 Dec 2014, 23:36					</div>
				</div>
				<div class="post-content content">
					<p>First try restoring the router to default settings by ssh in and execute:<br />firstboot</p><p>You can also totally reflash.<br />Download a copy of the firmware to your PC if you don&#039;t still have it.&nbsp; Then conect cable from your PC direct to the router so you can again access it at 192.168.1.1.</p><p>On your PC:<br />scp &lt;firmware file&gt; root@192.168.1.1:/tmp<br />You will be asked for the router&#039;s password.&nbsp; When the copy completes, you have a copy of the firmware on the router&#039;s RAMdisk which will persist until you turn it off or reboot. </p><p>Now you can reflash.&nbsp; Before doing this, check for model-specific information, because if this is messed up, it will be bricked for real.</p><p>Standard flashing procedure:&nbsp; SSH to the router again and:<br />cd /tmp&nbsp; (your file is still there from when you scp&#039;d it)<br />mtd -r write &lt;firmware file&gt; firmware</p>											<p class="post-edited">(Last edited by <strong>mk24</strong> on 13 Dec 2014, 23:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257630">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">pwrmac7100</div>
					<div class="post-datetime">
						14 Dec 2014, 00:02					</div>
				</div>
				<div class="post-content content">
					<p>I connected via WinSCP...and I saw a whole file directory that I don&#039;t see when I SSH via Putty. I create the folder tmp and copied the firmware to...but I cannot locate the &#039;tmp&#039; folder in Putty.I tried creating a folder &#039;tmp&#039;. Am I supposed to mount the RAM disk or something?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257632">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						14 Dec 2014, 00:19					</div>
				</div>
				<div class="post-content content">
					<p>It should mount automatically but I don&#039;t know about failsafe mode.&nbsp; The &#039;df&#039; (Disk Free?) command should show you have a tmpfs.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257646">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">pwrmac7100</div>
					<div class="post-datetime">
						14 Dec 2014, 03:42					</div>
				</div>
				<div class="post-content content">
					<p>I was able to find the files (I was forgetting the &#039;/&#039;). However, it does appear that a lot of the files are there. Is there a chance I don&#039;t need to flash but just need to turn on some switch? Or should I just flash and follow the process to be sure I am back to normal?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257648">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">pwrmac7100</div>
					<div class="post-datetime">
						14 Dec 2014, 04:39					</div>
				</div>
				<div class="post-content content">
					<p>Well...I&#039;m a little bit closer to brikin it.</p><p>I followed the flash steps and after a reboot the LAN nic nor the wireless nic turn on. I&#039;m not sure how to talk to it again. When it reboots, there are about 2 secs when I can ping it (192.168.1.1). I know this is supposed to be the time when I can tell it to you go into fail safe mode - but I don&#039;t have a button for that. The only buttons I have are reset and power. Any advice would be appeciated.</p>											<p class="post-edited">(Last edited by <strong>pwrmac7100</strong> on 14 Dec 2014, 04:51)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>