<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> How to load and unload a module in the kamikaze?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p61369">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">kunshao9795</div>
					<div class="post-datetime">
						7 Jan 2008, 17:32					</div>
				</div>
				<div class="post-content content">
					<p>I want to load and unload a module into openwrt but find it very difficult to unload it by using &quot;rmmod&quot;<br />Is there anything to do with the environment variables?&nbsp; <br />Any suggestions?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p61374">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">exobyte</div>
					<div class="post-datetime">
						7 Jan 2008, 19:19					</div>
				</div>
				<div class="post-content content">
					<p>I had absolutely no problems doing &quot;rmmod wlan&quot; last night.&nbsp; Reloading them didn&#039;t quite work, but I was in a position where a reboot was no big deal.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p61754">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">rui</div>
					<div class="post-datetime">
						16 Jan 2008, 12:04					</div>
				</div>
				<div class="post-content content">
					<p>I have a similar problem.</p><p>It doesn&#039;t apply to all drivers, but I am using a script to load a 3d-party driver.</p><p>If I run the script &quot;manually&quot; from bash, the driver is loaded and I can unload it from bash.</p><p>If I run the script from /etc/rc.d/ during startup, or if I run it as a cron-job, I am not able to unload the driver. I even tried to unload the driver in the same script that loads the driver, and it still wouldn&#039;t unload.</p><p>Could it have something to do with the way OpenWRT are running processes and loading modules?</p><p>I have tried the same procedure with another Linux distro using the same kernel and drivers and the driver unloaded successfully. There were some issues on this distro with different c-libraries from the OpenWRT, so I haven&#039;t verified the &quot;success&quot; 100%, but the driver was loaded without error-messages and I was able to unload it.</p><p>Any ideas ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p67370">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">exactt</div>
					<div class="post-datetime">
						24 Apr 2008, 14:24					</div>
				</div>
				<div class="post-content content">
					<p>hi,</p><p>i also have a problem using rmmod. i have i linksys wrt54gl with kamikaze 7.09 and i just wanted to unload the wlcompat and wl module. here rmmod wl did not return. after killing the ssh connection and reconnecting I can now see rmmod taking 100% of my cpu power. lsmod states that wl is not loaded anymore though.</p><p>@edit: dmesg shows: unregister_netdevice: waiting for wl0 to become free. Usage count = 2 . Although wlan should be disabled as of &quot;option disabled 1&quot; in /etc/config/wireless</p>											<p class="post-edited">(Last edited by <strong>exactt</strong> on 24 Apr 2008, 14:28)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>