<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Arcor EasyBox 803A Astoria ARV752DPW22</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 23 Mar 2017 and 13 Apr 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 11</div><nav><ul><li><a href="viewtopic.php%3Fid=44389&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=44389&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=44389&amp;p=4.html">4</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=44389&amp;p=11.html">11</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p223473">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">snk</div>
					<div class="post-datetime">
						22 Jan 2014, 17:04					</div>
				</div>
				<div class="post-content content">
					<p>Ahh, right. Can you write the following on the command line and reboot:<br/></p><div class="codebox"><pre><code>dd if=/dev/mtdblock3 of=/lib/firmware/RT2860.eeprom bs=2 skip=520 count=256 conv=swab</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223475">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">kai4065</div>
					<div class="post-datetime">
						22 Jan 2014, 17:21					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>[   16.460000] ieee80211 phy0: rt2x00lib_request_eeprom_file: Info - Loading EEPROM data from &#039;RT2860.eeprom&#039;.
[   16.512000] ieee80211 phy0: rt2x00_set_rt: Info - RT chipset 3572, rev 0223 detected
[   16.520000] ieee80211 phy0: rt2800_init_eeprom: Error - Invalid RF chipset 0x000a detected
[   16.528000] ieee80211 phy0: rt2x00lib_probe_dev: Error - Failed to allocate device</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223476">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">snk</div>
					<div class="post-datetime">
						22 Jan 2014, 17:52					</div>
				</div>
				<div class="post-content content">
					<p>Ok, now I&#039;m confused. Can you show me the outputs of<br/></p><div class="codebox"><pre><code>dd if=/lib/firmware/RT2860.eeprom bs=2 count=7 | hexdump</code></pre></div><p>and<br/></p><div class="codebox"><pre><code>dd if=/dev/mtdblock3 skip=520 bs=2 count=7 | hexdump</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223478">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">kai4065</div>
					<div class="post-datetime">
						22 Jan 2014, 18:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><div class="codebox"><pre><code>dd if=/lib/firmware/RT2860.eeprom bs=2 count=7 | hexdump</code></pre></div><p>gives<br/></p><div class="codebox"><pre><code>7+0 records in
7+0 records out
0000000 faf0 49bc b77a 5edd b694 a00a 5c4c     
000000e</code></pre></div></blockquote></div><p>and<br/></p><div class="quotebox"><blockquote><div class="codebox"><pre><code>dd if=/dev/mtdblock3 skip=520 bs=2 count=7 | hexdump</code></pre></div></blockquote></div><p>gives </p><div class="codebox"><pre><code>0000000 f0fa bc49 7ab7 dd5e 94b6 0aa0 4c5c     
000000e
7+0 records in
7+0 records out</code></pre></div><br/><p>What should be in the eeprom on this place? The PCI-ID ? Could it be, that a accidentaly overwrote it during flashing the box?</p>											<p class="post-edited">(Last edited by <strong>kai4065</strong> on 22 Jan 2014, 18:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223479">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">snk</div>
					<div class="post-datetime">
						22 Jan 2014, 18:22					</div>
				</div>
				<div class="post-content content">
					<p>Of course, after the automatically generated partitions board_config is partition 5 and not 3! Try this<br/></p><div class="codebox"><pre><code>dd if=/dev/mtdblock5 of=/lib/firmware/RT2860.eeprom bs=2 skip=520 count=256 conv=swab</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223480">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">kai4065</div>
					<div class="post-datetime">
						22 Jan 2014, 18:26					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>[   16.392000] PCI: Enabling device 0000:00:0e.0 (0000 -&gt; 0002)
[   16.396000] rt2800pci 0000:00:0e.0: failed to load eeprom property
[   16.400000] ieee80211 phy0: rt2x00lib_request_eeprom_file: Info - Loading EEPROM data from &#039;RT2860.eeprom&#039;.
[   16.456000] ieee80211 phy0: rt2x00_set_rt: Info - RT chipset 3572, rev 0223 detected
[   16.464000] ieee80211 phy0: rt2x00_set_rf: Info - RF chipset 0001 detected</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223483">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">snk</div>
					<div class="post-datetime">
						22 Jan 2014, 19:09					</div>
				</div>
				<div class="post-content content">
					<p>Interesting. So now it&#039;s the same as with my earlier build which also should&#039;ve worked, but didn&#039;t. Can you again post the output of the two dd-hexumps (with mtdblock3 replaced by mtdblock5 in the second command)? I&#039;ll then try to figure out what the driver is actually seeing...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223485">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">kai4065</div>
					<div class="post-datetime">
						22 Jan 2014, 19:18					</div>
				</div>
				<div class="post-content content">
					<p>dd if=/lib/firmware/RT2860.eeprom bs=2 count=7 | hexdump<br/>7+0 records in<br/>7+0 records out<br/>0000000 ffff ffff ffff ffff ffff ffff ffff<br/>000000e</p><p>dd if=/dev/mtdblock5 skip=520 bs=2 count=7 | hexdump<br/>7+0 records in<br/>7+0 records out<br/>0000000 ffff ffff ffff ffff ffff ffff ffff<br/>000000e</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223486">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">snk</div>
					<div class="post-datetime">
						22 Jan 2014, 19:28					</div>
				</div>
				<div class="post-content content">
					<p>Are you sure you have not erased that part of the flash (0xb07f0000 to 0xb07fffff) by accident when you installed OpenWrt? Your bootlog does complain also about an invalid mac-address, which is also located in the same region. If you don&#039;t have it backed up anywhere, I can provide you with a backup of mine.</p>											<p class="post-edited">(Last edited by <strong>snk</strong> on 22 Jan 2014, 19:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223491">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">kai4065</div>
					<div class="post-datetime">
						22 Jan 2014, 20:15					</div>
				</div>
				<div class="post-content content">
					<p>No, i&#039;m not sure. That&#039;s why i asked to posts above. I have a backup, so i will flash it first and then try again.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223508">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">snk</div>
					<div class="post-datetime">
						22 Jan 2014, 22:16					</div>
				</div>
				<div class="post-content content">
					<p>Oh, sorry, I didn&#039;t notice your edit. I updated the image, so download it again. It should work straight away without any commands once you restore the last part of the flash.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223566">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">kai4065</div>
					<div class="post-datetime">
						23 Jan 2014, 19:06					</div>
				</div>
				<div class="post-content content">
					<p>Works. Tested as AP and Client. Thanks snk !</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223569">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">snk</div>
					<div class="post-datetime">
						23 Jan 2014, 20:27					</div>
				</div>
				<div class="post-content content">
					<p>Great! I&#039;ve also sent the patches to the mailing list.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223600">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">qwercu</div>
					<div class="post-datetime">
						24 Jan 2014, 09:58					</div>
				</div>
				<div class="post-content content">
					<p>Hi!<br/>I&#039;ve managed to execute my router, but I&#039;ve got an other one.<br/>On the weekend I&#039;ll will try out these images. All I have to do is flashing snk&#039;s image from 0x40000? How could I set the bootloader to point this address?<br/>Is there any solution to keep the original bootlader, which point to u-boot, which point to this address? Or it makes no sense? I&#039;m not so brave now to replace the original bootloader and brick my device again. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile"/><br/>And finally, how stable this version? It is ready for everyday use? Does this image contain LuCi or other web-based admin ui?</p><p>Thank you for your efforts!</p><p>Cheers, qwercu</p>											<p class="post-edited">(Last edited by <strong>qwercu</strong> on 24 Jan 2014, 09:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223603">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">snk</div>
					<div class="post-datetime">
						24 Jan 2014, 10:59					</div>
				</div>
				<div class="post-content content">
					<p>Unfortunately you need to replace the original bootloader, as the &quot;brnboot&quot;-variant (which chainloads from the original bootloader) of U-Boot is not available anymore. The image contains luci and quite a lot of other packages.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223611">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">qwercu</div>
					<div class="post-datetime">
						24 Jan 2014, 12:29					</div>
				</div>
				<div class="post-content content">
					<p>Thank you very much!<br/>Sorry for my incompetency, but for sure a step-by-step procedure would be something like this:</p><p>0. backup th whole flash with brnboot<br/>1. 3 space at boot to enter command mode, than &#039;!&#039; to enter admin mode<br/>2. \[U\] Upload to Flash at 0xB0000000 the <a href="http://downloads.openwrt.org/snapshots/trunk/lantiq/uboot-lantiq-arv7518pw_nor/openwrt-lantiq-arv7518pw_nor-u-boot.img">http://downloads.openwrt.org/snapshots/ … u-boot.img</a><br/>3. wait....wait...wait<br/>4.&nbsp; \[U\] Upload to Flash at 0x40000 the <a href="http://downloads.openwrt.org/snapshots/trunk/lantiq/openwrt-lantiq-xway-ARV4525PW-squashfs.image">http://downloads.openwrt.org/snapshots/ … shfs.image</a><br/>5. wait....wait...wait...wait...wait...wait<br/>6. reboot and happy ever after?</p><p>Thank you in advance!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223619">
				<div class="post-metadata">
					<div class="post-num">Post #42</div>
					<div class="post-author">snk</div>
					<div class="post-datetime">
						24 Jan 2014, 14:20					</div>
				</div>
				<div class="post-content content">
					<p>Yes, although I would reboot after flashing U-Boot and upload the squashfs image with TFTP from the freshly installed U-Boot. TFTP is a lot faster than serial line. I&#039;m also not sure if you even can upload to 0xb0040000 in the original bootloader, since the original layout doesn&#039;t coincide with the new one.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223629">
				<div class="post-metadata">
					<div class="post-num">Post #43</div>
					<div class="post-author">qwercu</div>
					<div class="post-datetime">
						24 Jan 2014, 15:49					</div>
				</div>
				<div class="post-content content">
					<p>ok, thanks.<br/>So, I don&#039;t need to erase flash (to protect WLAN), simply overwrite flash?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223631">
				<div class="post-metadata">
					<div class="post-num">Post #44</div>
					<div class="post-author">snk</div>
					<div class="post-datetime">
						24 Jan 2014, 15:55					</div>
				</div>
				<div class="post-content content">
					<p>You do need to erase areas 0 and 1 from the original bootloader before flashing U-Boot, and then in the U-Boot you must do<br/></p><div class="codebox"><pre><code>erase 0xb0040000 0xb07f0000</code></pre></div><p>before writing the squashfs image to flash.</p><p>Edit: actually, I don&#039;t remember if flashing to area 5 will also erase that entirely (including the WLAN EEPROM). In any case, you can restore the EEPROM later from backup with U-Boot if that is the case.</p>											<p class="post-edited">(Last edited by <strong>snk</strong> on 24 Jan 2014, 15:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223642">
				<div class="post-metadata">
					<div class="post-num">Post #45</div>
					<div class="post-author">kai4065</div>
					<div class="post-datetime">
						24 Jan 2014, 17:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>snk wrote:</cite><blockquote><div class="codebox"><pre><code>erase 0xb0040000 0xb07f0000</code></pre></div><p>before writing the squashfs image to flash.</p><p>Edit: actually, I don&#039;t remember if flashing to area 5 will also erase that entirely (including the WLAN EEPROM). In any case, you can restore the EEPROM later from backup with U-Boot if that is the case.</p></blockquote></div><p>That&#039;s what i did first and it erased the eeprom. I transfered the image via loady, which displays the exact size of the image after the transfer is complete. So i erased exactly this area with:</p><div class="codebox"><pre><code>erase 0xb0040000 +0x640004 </code></pre></div><p>&quot;+0x640004&quot; is the size of the image.</p><p>If you flash another image, the correct size must be inserted after the &quot;+&quot;.</p>											<p class="post-edited">(Last edited by <strong>kai4065</strong> on 24 Jan 2014, 17:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223662">
				<div class="post-metadata">
					<div class="post-num">Post #46</div>
					<div class="post-author">qwercu</div>
					<div class="post-datetime">
						24 Jan 2014, 22:51					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve download this image: <a href="http://downloads.openwrt.org/snapshots/trunk/lantiq/uboot-lantiq-arv7518pw_nor/openwrt-lantiq-arv7518pw_nor-u-boot.img">http://downloads.openwrt.org/snapshots/ … u-boot.img</a> and uploaded to the memory, but when I press &#039;Go to memory&quot; it does nothing but</p><p> </p><div class="codebox"><pre><code>[DANUBE Boot]:y

Go to Memory Address: (default:0x80002000) : 0x
Jump to address 0x80002000 ...</code></pre></div><p>So, I&#039;m afraid of overwrite the bootloader with this...or this is how it works, and I sould take a deep breath and flash?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223667">
				<div class="post-metadata">
					<div class="post-num">Post #47</div>
					<div class="post-author">qwercu</div>
					<div class="post-datetime">
						24 Jan 2014, 23:12					</div>
				</div>
				<div class="post-content content">
					<p>OK, I&#039;ve erased partition 0 and 1.<br/>Then I [ U ] Upload to Flash at 0xb0000000 <a href="http://downloads.openwrt.org/snapshots/trunk/lantiq/uboot-lantiq-arv7518pw_nor/openwrt-lantiq-arv7518pw_nor-u-boot.img">http://downloads.openwrt.org/snapshots/ … u-boot.img</a></p><div class="codebox"><pre><code>&gt;&gt;&gt;  sx openwrt-lantiq-arv7518pw_nor-u-boot.img &lt; /dev/ttyUSB0 &gt; /dev/ttyUSB0  
Sending openwrt-lantiq-arv7518pw_nor-u-boot.img, 1414 blocks: Give your local XMODEM receive command now.
Bytes Sent: 181120   BPS:9637                             </code></pre></div><p>and can&#039;t boot<br/>What I&#039;ve missed? Any ideas?</p><p>Thank you in advance!</p>											<p class="post-edited">(Last edited by <strong>qwercu</strong> on 24 Jan 2014, 23:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223673">
				<div class="post-metadata">
					<div class="post-num">Post #48</div>
					<div class="post-author">snk</div>
					<div class="post-datetime">
						24 Jan 2014, 23:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>qwercu wrote:</cite><blockquote><p>OK, I&#039;ve erased partition 0 and 1.<br/>Then I [ U ] Upload to Flash at 0xb0000000 <a href="http://downloads.openwrt.org/snapshots/trunk/lantiq/uboot-lantiq-arv7518pw_nor/openwrt-lantiq-arv7518pw_nor-u-boot.img">http://downloads.openwrt.org/snapshots/ … u-boot.img</a><br/>and cant boot<br/>What I&#039;ve missed? Any ideas?</p><p>Thank you in advance!</p></blockquote></div><p>Did you flash to partition 5?</p>											<p class="post-edited">(Last edited by <strong>snk</strong> on 24 Jan 2014, 23:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223676">
				<div class="post-metadata">
					<div class="post-num">Post #49</div>
					<div class="post-author">qwercu</div>
					<div class="post-datetime">
						24 Jan 2014, 23:31					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>[0] Boot            0xB0000000     128K
[1] Configuration   0xB0020000     512K</code></pre></div><p>I&#039;ve flashed to 0.<br/>Is this was the error? But partition 5 starts from 0xB0000000 as well. Or I don&#039;t understabd something...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223677">
				<div class="post-metadata">
					<div class="post-num">Post #50</div>
					<div class="post-author">qwercu</div>
					<div class="post-datetime">
						24 Jan 2014, 23:33					</div>
				</div>
				<div class="post-content content">
					<p>Or I&#039;ve flashed only the first 128K of my image?<br/>It seems I need a stupid-safe description. <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile"/></p>											<p class="post-edited">(Last edited by <strong>qwercu</strong> on 24 Jan 2014, 23:35)</p>
									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 51 to 50 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 2 of 11</div><nav><ul><li><a href="viewtopic.php%3Fid=44389&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=44389&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=44389&amp;p=4.html">4</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=44389&amp;p=11.html">11</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>