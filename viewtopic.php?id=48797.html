<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Trouble setting up buildroot under Arch Linux</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Jul 2016.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p224583">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">john636</div>
					<div class="post-datetime">
						5 Feb 2014, 02:57					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m trying to set up my first buildroot, and I&#039;m running into problems at the &#039;make prereq&#039; step.&nbsp; I get a long list of error messages like the following: </p><div class="codebox"><pre><code>$ make prereq
bash: mtdparts=spi0.0:256k(u-boot),64k(u-boot-env),6272k(firmware),1536k(failsafe),64k(art) * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot),64k(u-boot-env),6272k(firmware),1536k(failsafe),64k(art) * 1024&quot;)
bash: mtdparts=spi0.0:256k(u-boot),64k(u-boot-env),6272k(firmware),1536k(failsafe),64k(art) * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot),64k(u-boot-env),6272k(firmware),1536k(failsafe),64k(art) * 1024&quot;)
bash: mtdparts=spi0.0:256k(u-boot)ro,256k(u-boot-env),13568k(firmware),2048k(failsafe),256k(art)ro * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot)ro,256k(u-boot-env),13568k(firmware),2048k(failsafe),256k(art)ro * 1024&quot;)</code></pre></div><p>Any ideas what I&#039;m doing wrong?</p><p>I&#039;m hoping it&#039;s an unmet dependency, but I can&#039;t tell what it might be.&nbsp; I don&#039;t have jikes yet, but it seems unlikely that would be causing this problem.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224646">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">john636</div>
					<div class="post-datetime">
						6 Feb 2014, 04:44					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve just set up Debian in a VirtualBox VM, followed the wiki installation steps within the VM, and I&#039;m hitting the same problem at the &#039;make prereq&#039; step!&nbsp; </p><p>Any ideas?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224725">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">horlagold</div>
					<div class="post-datetime">
						7 Feb 2014, 06:35					</div>
				</div>
				<div class="post-content content">
					<p>Am having same similar issues i think it has to do with running <span style="color: #FF0000">&nbsp; svn update </span>.&nbsp; some days ago i did my first compilation for&nbsp; DIR 632- A1&nbsp; <a href="http://wiki.openwrt.org/doc/howtobuild/dir-632-a1.build">http://wiki.openwrt.org/doc/howtobuild/dir-632-a1.build</a> (YaaY&nbsp; &nbsp;<img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile"/> <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile"/>)&nbsp; worked flawlessly with the old REV=36487.The firmware had some issues especially with Luci and a custom <strong><span class="bbu"> Reaver ui .cgi&nbsp; scprit</span></strong> running with <span style="color: blue">Haserl </span> ( by the way have read all the wiki i could find about <span style="color: blue">haserl</span> still dont get or know what am doing wrong . Long story short i tried doing svn update to the latest trunk (Updated to revision 39522.)<br/> may it could fix&nbsp; luci clashing firewall,but&nbsp; instead i got this error..Any help </p><p>horlagold@kali:~/work/openwrt/trunk$ make prereq<br/>bash: mtdparts=spi0.0:256k(u-boot),64k(u-boot-env),6272k(firmware),1536k(failsafe),64k(art) * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot),64k(u-boot-env),6272k(firmware),1536k(failsafe),64k(art) * 1024&quot;)<br/>bash: mtdparts=spi0.0:256k(u-boot),64k(u-boot-env),6272k(firmware),1536k(failsafe),64k(art) * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot),64k(u-boot-env),6272k(firmware),1536k(failsafe),64k(art) * 1024&quot;)<br/>bash: mtdparts=spi0.0:256k(u-boot)ro,256k(u-boot-env),13568k(firmware),2048k(failsafe),256k(art)ro * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot)ro,256k(u-boot-env),13568k(firmware),2048k(failsafe),256k(art)ro * 1024&quot;)<br/>bash: mtdparts=spi0.0:256k(u-boot)ro,256k(u-boot-env),13568k(firmware),2048k(failsafe),256k(art)ro * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot)ro,256k(u-boot-env),13568k(firmware),2048k(failsafe),256k(art)ro * 1024&quot;)<br/>bash: mtdparts=spi0.0:64k(u-boot),3008k(rootfs),896k(uImage),64k(NVRAM),64k(ART),3904k@0x10000(firmware) * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:64k(u-boot),3008k(rootfs),896k(uImage),64k(NVRAM),64k(ART),3904k@0x10000(firmware) * 1024&quot;)<br/>bash: mtdparts=spi0.0:256k(u-boot)ro,64k(u-boot-env)ro,15936k(firmware),64k(nvram),64k(art)ro * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot)ro,64k(u-boot-env)ro,15936k(firmware),64k(nvram),64k(art)ro * 1024&quot;)<br/>bash: mtdparts=spi0.0:256k(u-boot)ro,64k(u-boot-env)ro,15936k(firmware),64k(nvram),64k(art)ro * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot)ro,64k(u-boot-env)ro,15936k(firmware),64k(nvram),64k(art)ro * 1024&quot;)<br/>bash: mtdparts=spi0.0:256k(u-boot)ro,64k(u-boot-env)ro,1408k(kernel),8448k(rootfs),6016k(user),64k(cfg),64k(oem),64k(art)ro * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot)ro,64k(u-boot-env)ro,1408k(kernel),8448k(rootfs),6016k(user),64k(cfg),64k(oem),64k(art)ro * 1024&quot;)<br/>bash: mtdparts=spi0.0:256k(u-boot)ro,16000k(firmware),64k(config)ro,64k(art)ro * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot)ro,16000k(firmware),64k(config)ro,64k(art)ro * 1024&quot;)<br/>bash: mtdparts=spi0.0:256k(u-boot)ro,16000k(firmware),64k(config)ro,64k(art)ro * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot)ro,16000k(firmware),64k(config)ro,64k(art)ro * 1024&quot;)<br/>bash: mtdparts=spi0.0:256k(u-boot)ro,64k(u-boot-env),3712k(firmware),64k(art) * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot)ro,64k(u-boot-env),3712k(firmware),64k(art) * 1024&quot;)<br/>bash: mtdparts=spi0.0:256k(u-boot)ro,64k(u-boot-env),3712k(firmware),64k(art) * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot)ro,64k(u-boot-env),3712k(firmware),64k(art) * 1024&quot;)<br/>bash: mtdparts=spi0.0:256k(u-boot)ro,64k(u-boot-env),3712k(firmware),64k(art) * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot)ro,64k(u-boot-env),3712k(firmware),64k(art) * 1024&quot;)<br/>bash: mtdparts=spi0.0:256k(u-boot)ro,64k(u-boot-env),3712k(firmware),64k(art) * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot)ro,64k(u-boot-env),3712k(firmware),64k(art) * 1024&quot;)<br/>bash: mtdparts=spi0.0:256k(u-boot)ro,64k(u-boot-env)ro,15936k(firmware),64k(nvram),64k(art)ro * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot)ro,64k(u-boot-env)ro,15936k(firmware),64k(nvram),64k(art)ro * 1024&quot;)<br/>bash: mtdparts=spi0.0:256k(u-boot)ro,64k(u-boot-env)ro,15936k(firmware),64k(nvram),64k(art)ro * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot)ro,64k(u-boot-env)ro,15936k(firmware),64k(nvram),64k(art)ro * 1024&quot;)<br/>bash: mtdparts=spi0.0:256k(u-boot),64k(u-boot-env),6272k(firmware),1536k(failsafe),64k(art) * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot),64k(u-boot-env),6272k(firmware),1536k(failsafe),64k(art) * 1024&quot;)<br/>bash: mtdparts=spi0.0:256k(u-boot),64k(u-boot-env),6272k(firmware),1536k(failsafe),64k(art) * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot),64k(u-boot-env),6272k(firmware),1536k(failsafe),64k(art) * 1024&quot;)<br/>bash: mtdparts=spi0.0:256k(u-boot)ro,256k(u-boot-env),13568k(firmware),2048k(failsafe),256k(art)ro * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot)ro,256k(u-boot-env),13568k(firmware),2048k(failsafe),256k(art)ro * 1024&quot;)<br/>bash: mtdparts=spi0.0:256k(u-boot)ro,256k(u-boot-env),13568k(firmware),2048k(failsafe),256k(art)ro * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot)ro,256k(u-boot-env),13568k(firmware),2048k(failsafe),256k(art)ro * 1024&quot;)<br/>bash: mtdparts=spi0.0:64k(u-boot),3008k(rootfs),896k(uImage),64k(NVRAM),64k(ART),3904k@0x10000(firmware) * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:64k(u-boot),3008k(rootfs),896k(uImage),64k(NVRAM),64k(ART),3904k@0x10000(firmware) * 1024&quot;)<br/>bash: mtdparts=spi0.0:256k(u-boot)ro,64k(u-boot-env)ro,15936k(firmware),64k(nvram),64k(art)ro * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot)ro,64k(u-boot-env)ro,15936k(firmware),64k(nvram),64k(art)ro * 1024&quot;)<br/>bash: mtdparts=spi0.0:256k(u-boot)ro,64k(u-boot-env)ro,15936k(firmware),64k(nvram),64k(art)ro * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot)ro,64k(u-boot-env)ro,15936k(firmware),64k(nvram),64k(art)ro * 1024&quot;)<br/>bash: mtdparts=spi0.0:256k(u-boot)ro,64k(u-boot-env)ro,1408k(kernel),8448k(rootfs),6016k(user),64k(cfg),64k(oem),64k(art)ro * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot)ro,64k(u-boot-env)ro,1408k(kernel),8448k(rootfs),6016k(user),64k(cfg),64k(oem),64k(art)ro * 1024&quot;)<br/>bash: mtdparts=spi0.0:256k(u-boot)ro,16000k(firmware),64k(config)ro,64k(art)ro * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot)ro,16000k(firmware),64k(config)ro,64k(art)ro * 1024&quot;)<br/>bash: mtdparts=spi0.0:256k(u-boot)ro,16000k(firmware),64k(config)ro,64k(art)ro * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot)ro,16000k(firmware),64k(config)ro,64k(art)ro * 1024&quot;)<br/>bash: mtdparts=spi0.0:256k(u-boot)ro,64k(u-boot-env),3712k(firmware),64k(art) * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot)ro,64k(u-boot-env),3712k(firmware),64k(art) * 1024&quot;)<br/>bash: mtdparts=spi0.0:256k(u-boot)ro,64k(u-boot-env),3712k(firmware),64k(art) * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot)ro,64k(u-boot-env),3712k(firmware),64k(art) * 1024&quot;)<br/>bash: mtdparts=spi0.0:256k(u-boot)ro,64k(u-boot-env),3712k(firmware),64k(art) * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot)ro,64k(u-boot-env),3712k(firmware),64k(art) * 1024&quot;)<br/>bash: mtdparts=spi0.0:256k(u-boot)ro,64k(u-boot-env),3712k(firmware),64k(art) * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot)ro,64k(u-boot-env),3712k(firmware),64k(art) * 1024&quot;)<br/>bash: mtdparts=spi0.0:256k(u-boot)ro,64k(u-boot-env)ro,15936k(firmware),64k(nvram),64k(art)ro * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot)ro,64k(u-boot-env)ro,15936k(firmware),64k(nvram),64k(art)ro * 1024&quot;)<br/>bash: mtdparts=spi0.0:256k(u-boot)ro,64k(u-boot-env)ro,15936k(firmware),64k(nvram),64k(art)ro * 1024: syntax error: invalid arithmetic operator (error token is &quot;.0:256k(u-boot)ro,64k(u-boot-env)ro,15936k(firmware),64k(nvram),64k(art)ro * 1024&quot;)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224731">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">zloop</div>
					<div class="post-datetime">
						7 Feb 2014, 08:58					</div>
				</div>
				<div class="post-content content">
					<p>This &quot;annoyance&quot; happens with Fedora20 and Debian Sid too.<br/>It was only recently introduced</p><p>The &quot;bad commit&quot; is&nbsp; aef343213848230c86e11e4f3056c05ea9bb3c5e or SVN r39384<br/>( git-svn-id: svn://svn.openwrt.org/openwrt/trunk@39384 3c298f89-4303-0410-b956-a3cf2f4a3e73 )</p><div class="codebox"><pre><code>-       $(call Sysupgrade/$(7),$(1),$(2),$(5),$(6))
+       $(eval fwsize=$(call mtdpartsize,firmware,$(4)))
+       $(eval rootsize=$(call mtdpartsize,rootfs,$(4)))
+       $(eval kernsize=$(call mtdpartsize,kernel,$(4)))
+       $(call Sysupgrade/$(5),$(1),$(2),$(if $(6),$(6),$(kernsize)),$(if $(rootsize),$(rootsize),$(fwsize)))</code></pre></div><p>possibly something wrong with eval and &quot;=&quot; missing some &#039; or &quot; ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224897">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">hello_world.c</div>
					<div class="post-datetime">
						9 Feb 2014, 15:01					</div>
				</div>
				<div class="post-content content">
					<p>A &quot;me, too&quot; post.&nbsp; Just following the wiki with setting up the build environment in VirtualBox with latest Debian 64bit.</p><p>A show stopper. Anybody knows how to fix it?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225080">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">misc</div>
					<div class="post-datetime">
						11 Feb 2014, 17:58					</div>
				</div>
				<div class="post-content content">
					<p>I reported the issue <a href="https://dev.openwrt.org/ticket/14961">here</a>. The fix posted by jow works for me (also Arch); I&#039;m currently running firmware compiled with it on my WNDR3700v2.</p>											<p class="post-edited">(Last edited by <strong>misc</strong> on 11 Feb 2014, 17:58)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>