<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Kingston Mobilelite MLW221</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 14 Apr 2018 and 27 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 4</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=48401&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=48401&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=48401&amp;p=4.html">4</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p222600">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">ldpinney</div>
					<div class="post-datetime">
						13 Jan 2014, 18:53					</div>
				</div>
				<div class="post-content content">
					<p>The Kingston Mobilelite &quot;Wireless Drive&quot;</p><p><a href="http://www.kingston.com/us/usb/wireless#mlw221">http://www.kingston.com/us/usb/wireless#mlw221</a></p><p>This Device can run OpenWrt.</p><p>It has a MediaTek MT7620N SoC with 16M Flash and 64M DDR2 RAM</p><p>OpenWrt Wiki : </p><p><a href="http://wiki.openwrt.org/toh/kingston/mlw221">http://wiki.openwrt.org/toh/kingston/mlw221</a></p>											<p class="post-edited">(Last edited by <strong>ldpinney</strong> on 10 Feb 2014, 15:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224975">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">x3ss</div>
					<div class="post-datetime">
						10 Feb 2014, 09:52					</div>
				</div>
				<div class="post-content content">
					<p>Hello!<br /> I just bought myself this new toy also and am looking to teach it some tricks for the hardware.<br />I was checking <a href="http://wiki.openwrt.org/toh/kingston/mlw221">this page</a> and saw an error and i don&#039;t know where to report it; the MLW221 actually has 16MB of flash storage.<br />It can be seen on the actual pictures on the page that the flash chip is marked FL128S... which is 128Mbit flash. Even in software the flash chip is identified as FL129P which is the old version of 128Mbit chip.<br /><a href="http://www.spansion.com/Support/Datasheets/S25FL129P_00.pdf">FL129P</a><br /><a href="http://www.spansion.com/Support/Datasheets/S25FL128S_256S_00.pdf"> FL128S</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224996">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">ldpinney</div>
					<div class="post-datetime">
						10 Feb 2014, 15:31					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the report. Wiki updated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240747">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">ldpinney</div>
					<div class="post-datetime">
						19 Jul 2014, 02:43					</div>
				</div>
				<div class="post-content content">
					<p>Patch v3 submitted for this device.</p><p><a href="http://patchwork.openwrt.org/patch/6000/">http://patchwork.openwrt.org/patch/6000/</a></p><p><span style="color: #FF0000"><strong>WARNING : </strong></span><br />If you want to play with OpenWrt on this toy...<br />You will need to have access to the serial port.</p>											<p class="post-edited">(Last edited by <strong>ldpinney</strong> on 26 Jul 2014, 17:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p241535">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">mihneapop</div>
					<div class="post-datetime">
						26 Jul 2014, 00:17					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />&nbsp; &nbsp; &nbsp;I&#039;ve too recently came into possesion of an MLW221 unit for about $37, knowing well that the software support will be a bit modest (proprietary Android client, no API) . I&#039;m too interested in expanding the capabilities of this device (which can be considered as a battery-operated MIPS-powered portable router with USB host). But because I do not have all the required knowledge (and time) to develop my own firmware, I&#039;ve searched the web for other people who are working on this seemingly not-so popular apparatus. The only info I found is this forum (and the device&#039;s OpenWRT wiki page) and <a href="http://devchaotic.blogspot.ro/,">http://devchaotic.blogspot.ro/,</a> which is the only source for details for installing OpenWrt, but seems to have paused his work.<br />&nbsp; &nbsp; &nbsp;I&#039;ve managed to open the device simply and cleanly by inserting a plastic clip, so I have fully working access to the UART port. So if there is anything I can help, I&#039;m more than glad to do (i.e. test firmware).<br />&nbsp; &nbsp; &nbsp;So my question is: will someone post the settings that they chose in menuconfig for this device, or additional settings/steps taken that are specific to this board/processor? Thank you!</p>											<p class="post-edited">(Last edited by <strong>mihneapop</strong> on 26 Jul 2014, 00:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p241540">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">ldpinney</div>
					<div class="post-datetime">
						26 Jul 2014, 00:54					</div>
				</div>
				<div class="post-content content">
					<p>Hi mihneapop:</p><p>Sure send me an e-mail....I&#039;m working on patch v3 for this device</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p241634">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">ldpinney</div>
					<div class="post-datetime">
						27 Jul 2014, 02:03					</div>
				</div>
				<div class="post-content content">
					<p>Device is supported in trunk @r41841</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p241691">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">mihneapop</div>
					<div class="post-datetime">
						27 Jul 2014, 16:00					</div>
				</div>
				<div class="post-content content">
					<p>Thank you for your work, ldpinney! It&#039;s good to know we can use our MLW221 to it&#039;s full potential!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249410">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">katho</div>
					<div class="post-datetime">
						6 Oct 2014, 19:47					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />I got me an MobileLite G2 some weeks ago and I would like to connect a Voltcraft K402 Datalogger to get the temperature from my coffee roaster to my iPad. But there fore I have to &quot;update&quot; the MobileLite with the linux driver from Silicon Labs (CP210 USB to UART Bridge VCP Driver)&nbsp; <a href="http://www.silabs.com/products/mcu/pages/usbtouartbridgevcpdrivers.aspx">http://www.silabs.com/products/mcu/page … ivers.aspx</a><br />Will there be a way to modify the ML G2 so that I can use it?<br />I am only a Mac user und have some very low experience with Linux (from 1990).<br />Can anyone help me?<br />Thanks<br />Peter</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249453">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">mihneapop</div>
					<div class="post-datetime">
						6 Oct 2014, 23:50					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>katho wrote:</cite><blockquote><p>Hi,<br />I got me an MobileLite G2 some weeks ago and I would like to connect a Voltcraft K402 Datalogger to get the temperature from my coffee roaster to my iPad. But there fore I have to &quot;update&quot; the MobileLite with the linux driver from Silicon Labs (CP210 USB to UART Bridge VCP Driver)&nbsp; <a href="http://www.silabs.com/products/mcu/pages/usbtouartbridgevcpdrivers.aspx">http://www.silabs.com/products/mcu/page … ivers.aspx</a><br />Will there be a way to modify the ML G2 so that I can use it?<br />I am only a Mac user und have some very low experience with Linux (from 1990).<br />Can anyone help me?<br />Thanks<br />Peter</p></blockquote></div><p>Hi,<br />Unfortunately OpenWRT has been ported so far only for the first generation of MobileLiteWireless, and not the second (G2). I&#039;m not sure if you can use the same image file because it may not have the same hardware configuration (cpu, bootloader, leds, etc.). But you could share some pictures with the internals, maybe you&#039;re in luck and it&#039;s the same. It doesn&#039;t appear to be a lot of info on the internet regarding your model, but judging by it&#039;s datasheet and photos, it looks the same in terms of hardware design (three LEDs, 2 buttons, usb host and charge ports, SD card port and it also includes an ethernet port, which on the first generation isn&#039;t installed, but can be accessed via some test pads on the board), and has a richer software (ability to work as a router is useful).<br />If you do manage to put OpenWRT on it, there are already kernel mods available for a multitude of USB-to-Serial adapters.<br />So it would help a lot if you do a quick disassemble (only if you wish) and post some photos. Even better, if you could get access to it&#039;s serial port, you could dump it&#039;s bootloader output (as seen on <a href="http://wiki.openwrt.org/toh/kingston/mlw221)">http://wiki.openwrt.org/toh/kingston/mlw221)</a> and it could confirm if it is the same (heck, maybe I&#039;ll buy one too if it would work with OpenWRT out of the box).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249524">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">katho</div>
					<div class="post-datetime">
						7 Oct 2014, 12:14					</div>
				</div>
				<div class="post-content content">
					<p>Just opened it :-)<br />How can I upload Fotos?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249539">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">mihneapop</div>
					<div class="post-datetime">
						7 Oct 2014, 14:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>katho wrote:</cite><blockquote><p>Just opened it :-)<br />How can I upload Fotos?</p></blockquote></div><p>Hi,<br />You could use some online photo sharing service and post the link to it (for ex. Flickr). You can&#039;t upload images on this forum website, only embbed images as online links (HTML code).<br />Best regards,<br />mihneapop</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249543">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">katho</div>
					<div class="post-datetime">
						7 Oct 2014, 15:09					</div>
				</div>
				<div class="post-content content">
					<p>Hope that that will help to solve my problem</p><p><span class="postimg"><img src="http://up.picr.de/19745415oh.jpg" alt="http://up.picr.de/19745415oh.jpg" /></span></p><p><span class="postimg"><img src="http://up.picr.de/19745994ij.jpg" alt="http://up.picr.de/19745994ij.jpg" /></span></p><p><span class="postimg"><img src="http://up.picr.de/19745980tv.jpg" alt="http://up.picr.de/19745980tv.jpg" /></span></p><p><span class="postimg"><img src="http://up.picr.de/19745981jn.jpg" alt="http://up.picr.de/19745981jn.jpg" /></span></p><p><span class="postimg"><img src="http://up.picr.de/19745982ys.jpg" alt="http://up.picr.de/19745982ys.jpg" /></span></p><p><span class="postimg"><img src="http://up.picr.de/19745983cv.jpg" alt="http://up.picr.de/19745983cv.jpg" /></span></p>											<p class="post-edited">(Last edited by <strong>katho</strong> on 7 Oct 2014, 16:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249573">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">mihneapop</div>
					<div class="post-datetime">
						7 Oct 2014, 18:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>katho wrote:</cite><blockquote><p>Hope that that will help to solve my problem</p><p><span class="postimg"><img src="http://up.picr.de/19745982ys.jpg" alt="http://up.picr.de/19745982ys.jpg" /></span></p></blockquote></div><p>Hi,<br />It seems you&#039;re in luck as your generation 2 unit has the same SoC (system-on-chip), only in a different package. But to be 100% sure, it&#039;s best you dump your boot serial output. It looks like the only appropiate pins are the four pads on the main board&#039;s back, in the fifth photo, on the top-left position (next to the cut-out for the ethernet port, the middle two pads have a pull-up and a pull-down resistor). The pinout should be GND-RX-TX-VCC. Be sure to measure a voltage of 3.3V on the left-most and right-most pin before connecting your USB-to-Serial adapter (3.3V and not 5V compliant, of course). If at boot (startup_ you don&#039;t get anything, swap the RX and TX pin. Do a cold-boot (i.e. completely turn off then turn on the device) and paste the console output here.<br />Best regards,<br />mihneapop</p>											<p class="post-edited">(Last edited by <strong>mihneapop</strong> on 9 Oct 2014, 18:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p251965">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">laird.bedore</div>
					<div class="post-datetime">
						24 Oct 2014, 23:34					</div>
				</div>
				<div class="post-content content">
					<p>Hey everyone, I figured out how to install OpenWRT on the MLW221 without opening the case or soldering anything.</p><p>Kingston&#039;s factory firmware has a very rudimentary upgrade process... Place a firmware file with the name of &quot;mlwfw_v*.*.*.*.bin&quot; on the root of a FAT32 USB flash drive, insert the flash drive and power on the unit. The factory firmware searches on boot for a file matching this name and if found it launches its firmware update process. </p><p>Kingston released a firmware update, version 1.1.5.2, which is <a href="http://www.kingston.com/us/support/technical/downloads?product=MLW221&amp;filename=mlwfw_v1">available on their website</a>. Here&#039;s what it looks like once the file is found:</p><div class="codebox"><pre><code>We&#039;re now doing FW upgrade...
rm -rf /media/USB1/mlwfw_v1.1.5.2.bin;reboot;
CRC check is OK!
fw_model is WMTM-169N
fw_version is 0.0
FW model is correct!
Start to run nvram_upgrade function
nvram_upgrade start to sleep...
nvram_upgrade sleep done...
ifconfig: ioctl 0x8913 failed: No such device
ifconfig: ioctl 0x8913 failed: No such device
ifconfig: ioctl 0x8913 failed: No such device
killall: udhcpc: no process killed
killall: wifidetect: no process killed

-------Start Image Upgrade--------
INFO:Blinking DIAG LED...
INFO:Erasing kernel partition...
INFO:Burning Kernel&amp;root...
INFO:nLeft = 5510481
INFO:Wrote 64 KB

(..... lather, rinse, repeat ...)

INFO:Wrote 5 KB
Upgrade /media/USB1/mlwfw_v1.1.5.2.bin(5381 KB) successfully
The system is going down NOW!
Sending SIGTERM to all processes
Sending SIGKILL to all processes
Requesting system reboot
Restarting system.</code></pre></div><p>So I tried copying the openwrt firmware binary to a USB drive as &quot;mlwfw_v1.1.5.0.bin&quot;... it ran the firmware update process and the CRC check failed. Next I set off to compare the factory firmware update file to the image stored on the flash (available via /dev/mtd3). I discovered that the file contains a 52-byte header not found on the flash, and the flash has 52 bytes worth of zeroes at the end of the image. I figured this 52-byte header had to either contain a CRC checksum of the image or a static CRC signature used to authenticate the image source.</p><p>I tried the easy route - I took the 52 byte header from Kingston&#039;s firmware, inserted it at the start of the openwrt image using a hex editor, and slapped it on a USB disk. Sure enough it passed the CRC check and flashed the image! Here&#039;s the process at work:</p><div class="codebox"><pre><code>We&#039;re now doing FW upgrade...
rm -rf /media/USB1/mlwfw_v1.1.5.0.bin;reboot;
CRC check is OK!
fw_model is WMTM-169N
fw_version is 0.0
FW model is correct!
Start to run nvram_upgrade function
nvram_upgrade start to sleep...
nvram_upgrade sleep done...
ifconfig: ioctl 0x8913 failed: No such device
ifconfig: ioctl 0x8913 failed: No such device
ifconfig: ioctl 0x8913 failed: No such device
killall: udhcpc: no process killed
killall: wifidetect: no process killed

-------Start Image Upgrade--------
INFO:Blinking DIAG LED...
INFO:Erasing kernel partition...
INFO:Burning Kernel&amp;root...
INFO:nLeft = 3407928
INFO:Wrote 64 KB

(again, lather, rinse, repeat...)

INFO:Wrote 0 KB
Upgrade /media/USB1/mlwfw_v1.1.5.0.bin(3328 KB) successfully
The system is going down NOW!
Sending SIGTERM to all processes
Sending SIGKILL to all processes
Requesting system reboot
Restarting system.</code></pre></div><p>It boots right up with OpenWRT!</p><p>Unfortunately the OpenWRT release image has the wireless interface disabled by default, which means you DO have to open the thing up and solder on the wired ethernet header to perform the initial configuration. It would be nice in a future release if the OpenWRT image had a wireless network enabled by default.</p><p>That&#039;s all for now!</p><p>-Laird</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p251979">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">ldpinney</div>
					<div class="post-datetime">
						25 Oct 2014, 05:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>laird.bedore wrote:</cite><blockquote><p>Kingston&#039;s factory firmware has a very rudimentary upgrade process...CUT...</p><p>Unfortunately the OpenWRT release image has the wireless interface disabled by default, which means you DO have to open the thing up and solder on the wired ethernet header to perform the initial configuration. It would be nice in a future release if the OpenWRT image had a wireless network enabled by default.</p><p>That&#039;s all for now!</p><p>-Laird</p></blockquote></div><p>Hello Laird :</p><p><span style="color: green"><strong>Nice find...Thanks!</strong></span></p><p>The factory firmware upgrade process uses a 52-byte header.<br />Perhaps one could replace this factory header with the OpenWrt header to revert to the factory firmware?<br />Like I would do that <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Yes...OpenWrt has the wireless interface disabled by default...but you can change that when you compile it.<br />I used the Serial/TTL port to enable the wifi...</p><p><strong><span style="color: fuchsia">IMHO</span></strong> enabling OpenWrt to build the &quot;mlw221-squashfs-factory.bin&quot;<span style="color: red"><strong> could be considered a bit reckless for this device.</strong></span><br />Also note that currently no MT762* based devices have the *-factory.bin built by the OpenWrt build bot(s).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p251994">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">ldpinney</div>
					<div class="post-datetime">
						25 Oct 2014, 10:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>katho wrote:</cite><blockquote><p>Hope that that will help to solve my problem<br />...Pix CUT...</p></blockquote></div><p><strong><span style="color: forestgreen">Hi katho </span></strong></p><p>If you can post the serial output from your G2 I might be able to help get it running OpenWrt.</p><p>You can also send me forum email by clicking on my username.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p252906">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">laird.bedore</div>
					<div class="post-datetime">
						3 Nov 2014, 01:44					</div>
				</div>
				<div class="post-content content">
					<p>Here&#039;s the USB-based firmware installation process in a nutshell.</p><p>1. Download an OpenWRT image for the MLW221.<br />2. <a href="https://drive.google.com/file/d/0B5mGI6tparJYX2VDdlpuXy1WU1U/view?usp=sharing">Download the 52-byte header</a> for Kingston&#039;s factory images.<br />3. Insert the header into the OpenWRT image for the MLW221.<br />4. Save the file to a FAT32-formatted USB flash drive as &quot;mlwfw_v1.1.5.0.bin&quot;.<br />5. Insert USB drive, then power on the MLW221.<br />6. Wait. Quite a while. It has to flash, then it has to boot, then OpenWRT has to do its magic.<br />7. Connect to serial console (see the <a href="http://wiki.openwrt.org/toh/kingston/mlw221">hardware wiki page</a>) to do your initial configuration.</p><p>-Laird</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p253105">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">jumphog</div>
					<div class="post-datetime">
						4 Nov 2014, 18:27					</div>
				</div>
				<div class="post-content content">
					<p>Thanks everyone for the useful info here. Id been looking for something like the kingston as a travel appliance, so when I found this thread and the openwrt wiki entry I got a cheap one on ebay and began playing. Im aiming for something I can use to share the connection from a public network and also serve files via samba. The last couple of posts about the usb flash have been great, and Ive got things going now and thought Id put some notes and questions here.</p><p>Further to laird&#039;s post above you can join the header on with just a simple<br /></p><div class="codebox"><pre><code>cat mlw221-firmwareupdate-header.bin openwrt-ramips-mt7620n-mlw221-squashfs-sysupgrade.bin &gt; mlwfw_v1.1.5.0.bin</code></pre></div><p>Once it was flashed I went on the serial console and got a wireless repeater setup with method 2 from <a href="https://forum.openwrt.org/viewtopic.php?id=39077">this thread</a>. I needed to copy the generic settings in /etc/config/dhcp and /etc/config/wireless for things to work.</p><p>I then setup automounting as in <a href="http://wiki.openwrt.org/doc/uci/fstab">this page</a> - still a couple of issues to fix here.</p><p>Samba setup was <a href="http://wiki.openwrt.org/doc/uci/samba">from here</a> - also an issue to sort out.</p><p>So far it seems to be working OK, Im getting about 2mb/s from the sd card on whilst connected to the other network as well. Questions Ive got so far:</p><p>* How would I save my config as a base for a failsafe boot? Does that need to be done with the flash image instead of the installed image?<br />* I cant see anything much in /proc about battery or charging, is this in the kernel at all?<br />* reboot seems to get stuck, need to power cycle by hand</p><p>These arent really MLW221 realted, but if anyone knows:</p><p>automounting<br />*Ive got it set on anon_mount=1 but its picking up the mtd partitions as well as usb/sd cards, is there an &#039;ignore partition&#039; option?<br />*Can I set general mount options for anon_mount, specifically something like flush for vfat?</p><p>samba<br />*Im sharing /mnt so that any automounted device shows up, but this means that free space being reported by samba is the ~9mb on the flash, not the 128gb on the sd card. Is there a bodge to get samba report free space for the current mount instead of the base filesystem?</p>											<p class="post-edited">(Last edited by <strong>jumphog</strong> on 4 Nov 2014, 18:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p253112">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">ldpinney</div>
					<div class="post-datetime">
						4 Nov 2014, 20:12					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jumphog wrote:</cite><blockquote><p>* I cant see anything much in /proc about battery or charging, is this in the kernel at all?<br />* reboot seems to get stuck, need to power cycle by hand</p></blockquote></div><p>Confirmed...My unit has the same behavior ... seems to be hardware related, but I&#039;m not certain.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p253116">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">jumphog</div>
					<div class="post-datetime">
						4 Nov 2014, 20:51					</div>
				</div>
				<div class="post-content content">
					<p>It&#039;d be nice to have a way of doing a clean shutdown when the battery goes flat but I guess that only matters for the mounted devices - root should be OK?</p><p>Ive got a bodge for free space and extra directories: Have two shares, sda1 &amp; sdb1, it does mean that devices which arent partitioned wont show up, but thats probably an edge case.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p253131">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">laird.bedore</div>
					<div class="post-datetime">
						5 Nov 2014, 00:44					</div>
				</div>
				<div class="post-content content">
					<p>Initially I had awful I/O performance with a class 10 SD card... it was formatted VFAT and mounted with the default options. I switched it to EXT4 and changed the mounting options to &quot;async,noatime&quot; and the performance is great now. My SD card holds a squid cache which isn&#039;t that critical, so I have a cron job that runs every 5 minutes and performs a sync, just in case the power dies.</p><p>Same experience with the battery, I haven&#039;t found a way to interface with it. Would&#039;ve been smart to take a look at how they&#039;re doing it on the stock firmware. Power off and reboot don&#039;t work at all on Barrier Breaker but the current chaos calmer trunk reboots gracefully.</p><p>-Laird</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p253931">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">jumphog</div>
					<div class="post-datetime">
						11 Nov 2014, 15:28					</div>
				</div>
				<div class="post-content content">
					<p>After using the setup for a while its actually pretty workable. It&#039;d be nice to have a better shutdown system but it doesnt seem to have caused any problems so far.</p><p>The only usability bug is that writes to the SD card via samba sometimes timeout. Ive put in the recommended firewall rules to stop it tracking smb packets which has helped, but occasionally it will stall. It doesnt seem to be an issue with putting the data on the card, as its only about 2mb/s and top doesnt show lots of sys time when the stalls happen. Ive had the same issues with all 3 of the cards Ive tried but reads are fine. Anyone else come across similar problems?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254848">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">secondplant</div>
					<div class="post-datetime">
						18 Nov 2014, 23:44					</div>
				</div>
				<div class="post-content content">
					<p>Been playing around with stock firmware before trying openwrt. Came up with a way to get a shell without opening the device up. It&#039;s a shell command injection exploiting the firmware upgrade script (/sbin/upgrade.sh)</p><p>on the root of a USB drive create a file called &quot;mlwfw_v;telnetd; .x.x.bin&quot; without the quotes</p><p>From a linux CLI:<br />$ touch &#039;mlwfw_v;telnetd; .x.x.bin&#039;</p><p>Insert in the MLW221 and then boot/reboot. Give it a while and you should now be able to get a shell using a standard telnet client and the username &#039;admin&#039;. The default IP is 192.168.200.254.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258206">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">simon.stonge</div>
					<div class="post-datetime">
						20 Dec 2014, 03:57					</div>
				</div>
				<div class="post-content content">
					<p>Hello, I just received the G2. (Sadly only to find out that the Android app won&#039;t work on Android 5 or, at least, this is what I think is the problem since many are reporting this but it could be something else in my case since I have never seen it working otherwise. I can connect to the G2&#039;s wireless network but the app won&#039;t find it...)</p><p>In anycase, the reason I&#039;m posting here is not so much about this issue, but rather that reading this forum, I was getting to the conclusion that given the hardware for the G2 is the same as the first generation with the addition of an Ethernet port, that it was highly probable that installing openwrt on this device would not require that I open it. Anyone with more experience willing to concur with my conclusions?</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 4</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=48401&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=48401&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=48401&amp;p=4.html">4</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>