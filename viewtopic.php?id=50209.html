<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TX power show on Web as 15dBm</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 25 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p230843">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">nikhillife11</div>
					<div class="post-datetime">
						20 Apr 2014, 20:33					</div>
				</div>
				<div class="post-content content">
					<p>Hello All,</p><p>I am using MR3020 router and my current country code is set to India IN. I can see tx power maximum is 18 in iw list. But I am unable to see that value on my webpage<br />In file packages/kernel/mac80211/files/regdb.txt it show 20dBm for India as show below</p><p>country IN: DFS-JP<br />&nbsp; &nbsp; (2402 - 2482 @ 40), (20)<br />&nbsp; &nbsp; (5170 - 5250 @ 80), (20)<br />&nbsp; &nbsp; (5250 - 5330 @ 80), (20), DFS<br />&nbsp; &nbsp; (5735 - 5835 @ 80), (20)<br />I have read in Smörgåsbord » WiFi regulatory compliance, and how to fix it.html, that because tp-link sets all its devices to US, we have this problem. I was not able to work out the solution given in above webpage</p><p>Here is my wireless config also</p><p>config wifi-device &#039;radio0&#039;<br />&nbsp; &nbsp; option type &#039;mac80211&#039;<br />&nbsp; &nbsp; option hwmode &#039;11ng&#039;<br />&nbsp; &nbsp; option country &#039;IN&#039;<br />&nbsp; &nbsp; option path &#039;platform/ar933x_wmac&#039;<br />&nbsp; &nbsp; list ht_capab &#039;SHORT-GI-20&#039;<br />&nbsp; &nbsp; list ht_capab &#039;SHORT-GI-40&#039;<br />&nbsp; &nbsp; list ht_capab &#039;RX-STBC1&#039;<br />&nbsp; &nbsp; list ht_capab &#039;DSSS_CCK-40&#039;<br />&nbsp; &nbsp; option htmode &#039;HT20&#039;<br />&nbsp; &nbsp; option disabled &#039;0&#039;<br />&nbsp; &nbsp; option channel &#039;1&#039;<br />&nbsp; &nbsp; option txpower &#039;20&#039;</p><p>Also My channel list from iw list command is</p><p>Frequencies:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2412 MHz [1] (15.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2417 MHz [2] (18.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2422 MHz [3] (18.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2427 MHz [4] (18.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2432 MHz [5] (18.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2437 MHz [6] (18.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2442 MHz [7] (18.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2447 MHz [8] (18.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2452 MHz [9] (18.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2457 MHz [10] (18.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2462 MHz [11] (15.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2467 MHz [12] (disabled)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2472 MHz [13] (disabled)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2484 MHz [14] (disabled)</p><p>Can any one guide me how to change the webpage value to 20 plz.</p><p>Thanks and Regards<br />Nikhil</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p231207">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Context.EAX</div>
					<div class="post-datetime">
						24 Apr 2014, 21:44					</div>
				</div>
				<div class="post-content content">
					<p>Hi.<br />I think I read some place that 18dbm is the max tx-power the MR3020 can transmit at.<br />But I hope I am wrong. Would be really nice if this box can go up to 20.</p><p>Regards</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p231410">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">nikhillife11</div>
					<div class="post-datetime">
						27 Apr 2014, 12:08					</div>
				</div>
				<div class="post-content content">
					<p>Hi Context,</p><p>Even though Tx power is 18dBm, on luci webpage it shows only 15dBm. It takes lower limit. But in India, i Think the TX POWER for all channels is 20dBm and also the same has been mentioned in db.txt / regit.txt, which actually sets your regulatory actions</p><p>So can anyone help me how to change this settings.</p><p>Regards<br />Nikhil</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p231710">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">eeff11</div>
					<div class="post-datetime">
						29 Apr 2014, 15:53					</div>
				</div>
				<div class="post-content content">
					<p>Well,the eeprom of your Atheros chip is set by Qualcom to comply, in this case 18dbm, plus 2dbi antenna, then comply with the regulation of 20db.</p><p>To make the AR9331 to work at 20dbm,use Jow&#039;s patch. Openwrt has an agreement with Qualcom, the ART is locked.<br />Or you can compile yourself with the reg option turned on.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232253">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Context.EAX</div>
					<div class="post-datetime">
						4 May 2014, 03:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>eeff11 wrote:</cite><blockquote><p>Well,the eeprom of your Atheros chip is set by Qualcom to comply, in this case 18dbm, plus 2dbi antenna, then comply with the regulation of 20db.</p><p>To make the AR9331 to work at 20dbm,use Jow&#039;s patch. Openwrt has an agreement with Qualcom, the ART is locked.<br />Or you can compile yourself with the reg option turned on.</p></blockquote></div><p>So there is a way to get it up to 20dbm then?</p><p>I have u-boot_mod on my router now so I can flash new ART section.<br />Do you know what I have to change in the ART data to get it up to 20?<br />Or do you have some link to Jow&#039;s patch?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232261">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">nikhillife11</div>
					<div class="post-datetime">
						4 May 2014, 09:01					</div>
				</div>
				<div class="post-content content">
					<p>Hey Eeff,</p><p>Thanks for the idea.. As Context has said, do you know the address where this is declared. I think I know how to modify it and update, just need the address.</p><p>Regards<br />Nikhil</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232321">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">eeff11</div>
					<div class="post-datetime">
						4 May 2014, 19:03					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Context.EAX wrote:</cite><blockquote><div class="quotebox"><cite>eeff11 wrote:</cite><blockquote><p>Well,the eeprom of your Atheros chip is set by Qualcom to comply, in this case 18dbm, plus 2dbi antenna, then comply with the regulation of 20db.</p><p>To make the AR9331 to work at 20dbm,use Jow&#039;s patch. Openwrt has an agreement with Qualcom, the ART is locked.<br />Or you can compile yourself with the reg option turned on.</p></blockquote></div><p>So there is a way to get it up to 20dbm then?</p><p>I have u-boot_mod on my router now so I can flash new ART section.<br />Do you know what I have to change in the ART data to get it up to 20?<br />Or do you have some link to Jow&#039;s patch?</p></blockquote></div><p>Yes, the AR9331 soc chip is at 20dbM, check qulcomm&#039;s product page.<br />Jow&#039;s patch<br /></p><div class="codebox"><pre><code>ssh root@openwrt

On ar71xx:

cd /tmp/
wget http://luci.subsignal.org/~jow/reghack/reghack.mips.elf
chmod +x reghack.mips.elf
./reghack.mips.elf /lib/modules/*/ath.ko
./reghack.mips.elf /lib/modules/*/cfg80211.ko
reboot</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232330">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Context.EAX</div>
					<div class="post-datetime">
						4 May 2014, 20:19					</div>
				</div>
				<div class="post-content content">
					<p>After running the patch I can see now that I can use some extra channels:<br />Frequencies:<br />* 2412 MHz [1] (30.0 dBm)<br />* 2417 MHz [2] (30.0 dBm)<br />* 2422 MHz [3] (30.0 dBm)<br />* 2427 MHz [4] (30.0 dBm)<br />* 2432 MHz [5] (30.0 dBm)<br />* 2437 MHz [6] (30.0 dBm)<br />* 2442 MHz [7] (30.0 dBm)<br />* 2447 MHz [8] (30.0 dBm)<br />* 2452 MHz [9] (30.0 dBm)<br />* 2457 MHz [10] (30.0 dBm)<br />* 2462 MHz [11] (30.0 dBm)<br />* 2467 MHz [12] (30.0 dBm)<br />* 2472 MHz [13] (30.0 dBm)<br />* 2484 MHz [14] (disabled)</p><p>I tested with channel 13 and it worked fine. However i was not able to set 20dbm txpower. The max value i can use is still 18dbm</p><p>What was this about needing write access to ART section?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232342">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Context.EAX</div>
					<div class="post-datetime">
						4 May 2014, 21:15					</div>
				</div>
				<div class="post-content content">
					<p>After playing with it a bit I changed the region code to my local country and now the list looks like this:</p><p>Frequencies:<br />* 2412 MHz [1] (20.0 dBm)<br />* 2417 MHz [2] (20.0 dBm)<br />* 2422 MHz [3] (20.0 dBm)<br />* 2427 MHz [4] (20.0 dBm)<br />* 2432 MHz [5] (20.0 dBm)<br />* 2437 MHz [6] (20.0 dBm)<br />* 2442 MHz [7] (20.0 dBm)<br />* 2447 MHz [8] (20.0 dBm)<br />* 2452 MHz [9] (20.0 dBm)<br />* 2457 MHz [10] (20.0 dBm)<br />* 2462 MHz [11] (20.0 dBm)<br />* 2467 MHz [12] (20.0 dBm)<br />* 2472 MHz [13] (20.0 dBm)<br />* 2484 MHz [14] (disabled)</p><p>And suddenly now I am able to get 20dbm txpower <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>root@OpenWrt:~# iwconfig<br />lo&nbsp; &nbsp; &nbsp; &nbsp; no wireless extensions.</p><p>wlan0&nbsp; &nbsp; &nbsp;IEEE 802.11bgn&nbsp; Mode:Master&nbsp; Tx-Power=20 dBm<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RTS thr:off&nbsp; &nbsp;Fragment thr:off<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Power Management:on</p><p>eth0&nbsp; &nbsp; &nbsp; no wireless extensions.</p><p>Big thanks for the regpatch tip <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />Imagine now this little thing with a 10-20dbi gain antenna <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> (I have the external antenna mod)</p><p>Regards</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232474">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Context.EAX</div>
					<div class="post-datetime">
						5 May 2014, 20:08					</div>
				</div>
				<div class="post-content content">
					<p>When I reboot my router txpower will beset to 15dbm again. The only way I found to set it back to 20 was to change region and back again. <br />I added some commands to rc.local for it to set 20 after boot.</p><p>wifi down<br />iw reg set JP<br />wifi up</p><p>in my wireless config I have my country as region so wifi up will bring it back to my country code.</p><p>Anyone else have the same problem?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232740">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">eeff11</div>
					<div class="post-datetime">
						7 May 2014, 22:06					</div>
				</div>
				<div class="post-content content">
					<p>no country code,world &quot;00&quot;.<br />It shall stay 20dbm.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>