<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WBMR-HP-G300H and problems with Huawei 3G modems (E173 &amp; E3131)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p199458">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">angelos</div>
					<div class="post-datetime">
						24 Apr 2013, 08:56					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I have a Buffalo WBMR-HP-G300H and I have installed AA 12.09 (RC2/final?).<br />Everything works great except my two 3G USB sticks, <strong>Huawei E173</strong> and <strong>Huawei E3131</strong>.</p><p>The same situation occurs with both of them.</p><p>First of all, if I plug the stick directly to the USB port and power on the device, two things may happen...</p><p>1. The router is not able to boot at all. The led of the USB stick blinks but the router is like dead.<br />2. The router manages to boot somehow but it&#039;s on a &quot;freeze&quot; condition and inaccessible (the led of the stick also blinks in this situation). I assume that it boots because I have configured the leds and I see them come up.</p><p>If I plug the stick while the system is up and running, the router freezes and it&#039;s not accessible any more.</p><p>Now, if I use a USB hub and plug the 3G stick there, the router boots fine or does not freeze (in case the system is already running) and I&#039;m able to establish a connection <strong>BUT</strong>... I have random disconnections with the below messages...</p><div class="codebox"><pre><code>Apr 23 17:15:03 OpenWrt kern.err kernel: [  417.304000] hub 1-0:1.0: port 1 disabled by hub (EMI?), re-enabling...
Apr 23 17:15:03 OpenWrt daemon.notice pppd[2136]: Modem hangup
Apr 23 17:15:03 OpenWrt kern.info kernel: [  417.308000] usb 1-1: USB disconnect, device number 2
Apr 23 17:15:03 OpenWrt kern.info kernel: [  417.312000] usb 1-1.1: USB disconnect, device number 4
Apr 23 17:15:03 OpenWrt kern.err kernel: [  417.316000] option: option_instat_callback: error -143
Apr 23 17:15:03 OpenWrt kern.info kernel: [  417.324000] option1 ttyUSB0: GSM modem (1-port) converter now disconnected from ttyUSB0
Apr 23 17:15:03 OpenWrt kern.info kernel: [  417.332000] option 1-1.1:1.0: device disconnected
Apr 23 17:15:03 OpenWrt kern.info kernel: [  417.336000] option1 ttyUSB1: GSM modem (1-port) converter now disconnected from ttyUSB1
Apr 23 17:15:03 OpenWrt kern.info kernel: [  417.344000] option 1-1.1:1.1: device disconnected
Apr 23 17:15:03 OpenWrt kern.info kernel: [  417.348000] option1 ttyUSB2: GSM modem (1-port) converter now disconnected from ttyUSB2
Apr 23 17:15:03 OpenWrt kern.info kernel: [  417.356000] option 1-1.1:1.2: device disconnected
Apr 23 17:15:03 OpenWrt daemon.info pppd[2136]: Connect time 3.3 minutes.
Apr 23 17:15:03 OpenWrt daemon.info pppd[2136]: Sent 676157 bytes, received 33545275 bytes.
Apr 23 17:15:03 OpenWrt daemon.debug pppd[2136]: Script /lib/netifd/ppp-down started (pid 2490)
Apr 23 17:15:03 OpenWrt daemon.notice pppd[2136]: Connection terminated.
Apr 23 17:15:03 OpenWrt daemon.notice netifd: Interface &#039;wan2&#039; has lost the connection
Apr 23 17:15:03 OpenWrt daemon.debug pppd[2136]: Script /lib/netifd/ppp-down finished (pid 2490), status = 0x1
Apr 23 17:15:04 OpenWrt daemon.info pppd[2136]: Terminating on signal 15
Apr 23 17:15:04 OpenWrt daemon.info pppd[2136]: Exit.
Apr 23 17:15:04 OpenWrt daemon.notice netifd: Interface &#039;wan2&#039; is now down
Apr 23 17:15:06 OpenWrt user.info firewall: removing wan2 (3g-wan2) from zone wan
Apr 23 17:15:06 OpenWrt kern.err kernel: [  420.772000] hub 1-0:1.0: Cannot enable port 1.  Maybe the USB cable is bad?
Apr 23 17:15:10 OpenWrt kern.err kernel: [  424.044000] hub 1-0:1.0: Cannot enable port 1.  Maybe the USB cable is bad?
Apr 23 17:15:13 OpenWrt kern.err kernel: [  427.316000] hub 1-0:1.0: Cannot enable port 1.  Maybe the USB cable is bad?
Apr 23 17:15:16 OpenWrt kern.err kernel: [  430.588000] hub 1-0:1.0: Cannot enable port 1.  Maybe the USB cable is bad?
Apr 23 17:15:16 OpenWrt kern.err kernel: [  430.592000] hub 1-0:1.0: unable to enumerate USB device on port 1</code></pre></div><p>This seems to be a known problem with no solution.<br />I have 3 different USB hubs, two self-powered and one with external power and I have tried all the combinations between the hubs and the 3g sticks. None seems to work.</p><p>Last but not least, if I plug my Samsung Galaxy Mini 2 (GT-S6500) directly to the USB port and use it as a 3G modem, everything works fine! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>So I guess it&#039;s a problem (incompatibility?) with the Huawei 3G modems.<br />Is there a solution or do I have to buy another 3G modem?</p><p>I&#039;m already thinking about the <strong>TP-Link MA180</strong>.<br />Has anyone used it with OpenWrt?</p><p>Thank&#039;s for reading this. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p199465">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">snk</div>
					<div class="post-datetime">
						24 Apr 2013, 10:47					</div>
				</div>
				<div class="post-content content">
					<p>Did you experience this with the original firmware?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p199473">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">angelos</div>
					<div class="post-datetime">
						24 Apr 2013, 11:38					</div>
				</div>
				<div class="post-content content">
					<p>Well, I don&#039;t know how the stock firmware behaves because I flashed the device with dd-wrt a few days after I bought it and during that time didn&#039;t test the USB port...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p199536">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">aport</div>
					<div class="post-datetime">
						24 Apr 2013, 19:48					</div>
				</div>
				<div class="post-content content">
					<p>Same problem here: <a href="https://forum.openwrt.org/viewtopic.php?id=40050">https://forum.openwrt.org/viewtopic.php?id=40050</a></p><br /><p>That router uses the dwc_otg driver, and as far as I know either the driver or the hardware is garbage. Another popular chip (RT305x) which uses that driver has many USB issues as well.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p199545">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">rossini</div>
					<div class="post-datetime">
						24 Apr 2013, 21:10					</div>
				</div>
				<div class="post-content content">
					<p>i had similar issues with my wbmr-hp-g300h and a huawei e372. Now i&#039;m using trunk and i have a better usb connection. <br />But now my pppoa-adsl connection reconnects very often (1-2 per day).</p><p>It would be nice if a developer could sort this things out.&nbsp; usb + adsl. Thats the features&nbsp; why i bought the router. And now both are not quite useable.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p199581">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">angelos</div>
					<div class="post-datetime">
						25 Apr 2013, 07:29					</div>
				</div>
				<div class="post-content content">
					<p>It was too good to be true! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />I&#039;m talking about the Samsung Galaxy Mini 2 which I used as a 3G modem and THOUGHT it worked OK.<br />It does not.<br />It gets disconnected too.</p><p>I also plugged my LevelOne WUA-1610 WLAN adapter into the USB port, installed the necessary packages (kmod-rt2800-usb) and configured it. After using it for a while, same thing happened. It disconnected.</p><p><strong>So the problem seems to affect not only 3G modems but USB devices in general.</strong><br />I believe this is crucial and I hope developers will have a look at it...</p><p>Does anyone know if this is problem affects only the WBMR?<br />I mean...<br />Is this a router specific issue?<br />Is this a platform (lantiq) specific issue?<br />Is this a cross-platform issue?</p><br /><p>The ADSL part of the WBMR seems to be working OK in AA 12.09<br />My PPPoE-WAN connection is stable but I have a high SNR, so I don&#039;t know how the WBMR reacts in low SNR situations.</p>											<p class="post-edited">(Last edited by <strong>angelos</strong> on 25 Apr 2013, 07:34)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>