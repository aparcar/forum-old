<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> VPN Verbindung aufbauen</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 27 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p352607">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">danielalpha007</div>
					<div class="post-datetime">
						21 Feb 2017, 22:56					</div>
				</div>
				<div class="post-content content">
					<p>Guten Tag, <br />ich habe OpenWrt auf einem Banana Pi R1 installiert. <br />Dieser ist hinter einer Fritz Box angeschlossen.<br />Die 4 LAN Anschlüsse sollen nun an das Heimnetzwerk angeschlossen werden und ein VPN zu den Servern aufgebaut werden.<br />Ich habe auf einem Externen Server virtuelle Maschinen mit OPSI und Windows Server am laufen.<br />Ins Heimnetzwerk möchte ich nun meinen AD und den OPSI Server integrieren. Das war der Anschaffungsgrund für den Pi. </p><p>Die Rechner sollten von PXE Booten können. Daher soll die Konfiguration im Router stattfinden.<br />Kann mir bitte jemand auf die Sprünge helfen ? </p><p>MfG</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352641">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">rj-45</div>
					<div class="post-datetime">
						22 Feb 2017, 08:18					</div>
				</div>
				<div class="post-content content">
					<p>Hallo,</p><p>hmm, hast du dir das Forum mal genauer angeguckt, bevor du deinen Post geschrieben hast? Ist dir die Sprache aufgefallen, in der die meisten Beiträge geschrieben sind? </p><p>Da deine Beschreibung für mich etwas verwirrend ist, wäre es vielleicht nicht schlecht, wenn du ein Bild malst bzw. eine Graphik von dem Aufbau erstellst und hier einfügst. Ich glaube, das würde zu einem besseren Verständnis führen. </p><br /><p>Christoph</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352668">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">danielalpha007</div>
					<div class="post-datetime">
						22 Feb 2017, 18:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>rj-45 wrote:</cite><blockquote><p>Hallo,</p><p>hmm, hast du dir das Forum mal genauer angeguckt, bevor du deinen Post geschrieben hast? Ist dir die Sprache aufgefallen, in der die meisten Beiträge geschrieben sind? </p><p>Da deine Beschreibung für mich etwas verwirrend ist, wäre es vielleicht nicht schlecht, wenn du ein Bild malst bzw. eine Graphik von dem Aufbau erstellst und hier einfügst. Ich glaube, das würde zu einem besseren Verständnis führen. </p><br /><p>Christoph</p></blockquote></div><p>Hey, danke für deine Antwort! Und ja habe ich, aber an dir sieht man ja, das es doch deutsche darunter gibt. Und mein Englisch ist nicht perfekt.</p><p>Ich male dir mal ein Bild!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352669">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">danielalpha007</div>
					<div class="post-datetime">
						22 Feb 2017, 18:54					</div>
				</div>
				<div class="post-content content">
					<p>Bild ist gemalt, wo kann ich das nun hochladen ? <br />Links kann ich nicht einfügen.<br />LG</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352678">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						22 Feb 2017, 20:29					</div>
				</div>
				<div class="post-content content">
					<p>Paste links without prefixes http, https.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352689">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">danielalpha007</div>
					<div class="post-datetime">
						22 Feb 2017, 21:46					</div>
				</div>
				<div class="post-content content">
					<p>Hier bitte:<br />pic-upload.de/view-32729385/workstation-147953_960_720-Kopie.png.html</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352691">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">nitroshift</div>
					<div class="post-datetime">
						22 Feb 2017, 22:04					</div>
				</div>
				<div class="post-content content">
					<p>English only please. Thank you.</p><p>nitroshift</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352779">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">danielalpha007</div>
					<div class="post-datetime">
						23 Feb 2017, 18:03					</div>
				</div>
				<div class="post-content content">
					<p>Google translator:</p><p>Good day,<br />I have OpenWrt installed on a Banana Pi R1.<br />This is connected behind a Fritz box.<br />The 4 LAN connections are now to be connected to the home network and a VPN to the servers are built up.<br />I am running virtual machines with OPSI and Windows Server on an external server.<br />In the home network I would now like to integrate my AD and the OPSI server. This was the foundation for the Pi.<br />The computers should be able to boot from PXE. Therefore the configuration in the router should take place.<br />Can someone please help me?<br />MfG</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352784">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">rj-45</div>
					<div class="post-datetime">
						23 Feb 2017, 18:37					</div>
				</div>
				<div class="post-content content">
					<p>first the german version:</p><p>Also es stellen sich mir ein paar Fragen:<br />1) Du willst eine VPN Verbindung zwischen den Servern (AD und OPSI), also den virtuellen Maschinen (irgendwo im Internet) und dem Banana Pie aufbauen? Richtig?<br />2) Über die VPN Verbindung soll dann der, ich sach mal, AD Verkehr laufen und die OPSI Geschichte?<br />3) Einige PCs sollen über diese VPN Verbindung&nbsp; per PXE booten? <br />4) Also liegen auf dem AD oder dem OPSI Server die Dateien für den Bootvorgang, sprich das Betriebssystem für die Clients? Windows oder was?<br />5) Was für eine Bandbreite bzw. Geschwindigkeit hat dein Internetanschluß?<br />6) Da du eine VPN Verbindung aufbauen willst, muß irgendwo der VPN Server laufen und irgendwo der VPN Client oder anders gesagt auf welchen Maschinen laufen die VPN Gegenstellen?<br />7) Mit den 4 Anschlüssen meinst du die Ports des Banana Pies oder der Fritzbox?<br />8) Was genau meinst du damit, daß diese Ports ins Heimnetzwerk integriert werden?<br />9) Welche Software willst du für das VPN nutzen? OpenVPN oder PPTP?</p><p>Christoph</p><p>############################################################################<br />now the english version:</p><p>first of all, I have some questions for a better understanding<br />1) You will create an VPN between the virtual machines somewhere in the internet and your banana pie, right?<br />2)&nbsp; This vpn will be used for the active directory traffic und the OPSI stuff?<br />3) Some PCs should boot via pxe and this vpn?<br />4) The boot images for the PCs are located on the AD or OPSI server?<br />5) What is the bandwidth of your internetconnection?<br />6) Which devices are running the vpn software?<br />7) Which 4 LAN ports do you mean, the Banana Pies ones or the Ports of the FritzBox?<br />8) What do you mean by integrating these ports into the lan?<br />9) Which vpn software you are going touse for the vpn? OpenVPN or PPTP?</p><p>Christoph</p>											<p class="post-edited">(Last edited by <strong>rj-45</strong> on 23 Feb 2017, 18:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352788">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">danielalpha007</div>
					<div class="post-datetime">
						23 Feb 2017, 18:52					</div>
				</div>
				<div class="post-content content">
					<p>Hey, vielen dank für deine ausführliche Antwort ! <br />1) ist richtig. <br />2) Ja genau so ist es !<br />3) Richtig, zur Bereitstellung von Windows und von Wiederherrstellungsprogrammen.<br />4) Nein, nur die Images zur Bereitstellung. Tut mir leid, da habe ich mich undeutlich ausgedrückt !<br />5) 20Mbit hat der Heimnetzanschluss, 600 MBit der Server.<br />6) Auf dem pi wollte ich den Server installieren. Alternativ könnte ich den auch unter Debian oder Server 2008 extern installieren.<br />7) Ich meine die Anschlüsse des pi.<br />8) Von den 4 ports gehen die Leitungen direkt zu den clienten. <br />9) Ich dachte an openVPN, da ich bereits auf die Software gestoßen bin. Ich nehme auch gern alternativen wahr.</p><p>MfG</p><p>Translator:</p><p>Hey, thank you for your detailed answer!<br />1) is correct.<br />2) Yes, that&#039;s how it is!<br />3) Correct, to provide Windows and restoration programs.<br />4) No, only the images for deployment. I&#039;m sorry, I have expressed myself indistinctly!<br />5) 20Mbit has the home network connection, 600 MBit the server.<br />6) On the pi I wanted to install the server. Alternatively, I could install the synonymous under Debian or Server 2008 externally.<br />7) I mean the connections of the pi.<br />8) From the 4 ports the lines go directly to the clients.<br />9) I thought of openVPN, as I have already encountered the software. I also like to perceive alternatives.</p><p>MfG</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352791">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">rj-45</div>
					<div class="post-datetime">
						23 Feb 2017, 19:13					</div>
				</div>
				<div class="post-content content">
					<p>only the german version:<br />to lazy to translate. ...</p><p>Hmm, also das mit den Images und dem pxe booten habe ich noch nicht ganz verstanden. :-D Wenn ich es richtig verstanden habe, liegen auf der VM mit dem AD Server (also ein Domain Controller oder sowas) oder der OPSI VM die Images mit dem Betriebssystem für die erste Installation der PCs? Sprich, wenn sie fertig mit der Installation sind, booten sie wie normale PCs von der Festplatte? Ist dir bewußt, daß bei einer 20Mbit/s Internetanbindung die Installation sehr laaaaange dauern kann und das dauert dann bei jedem PC sehr laaaange.&nbsp; Die 600 Mbit/s sind in diesem Fall egal. Die 600 Mbit/s kommen ja bei dir nicht durch die Tür ... :-D</p><p>Zu der VPN Geschichte. Du weißt, daß du die VPN Software auf drei Rechnern installieren mußt? Also, wenn ich dein Konstrukt richtig verstehe, auf dem Banana Pie und dem AD Server und OPSI Server. Da die pxe Bootgeschichte über dieses vpn laufen soll, muß es ein Layer-2-VPN sein, also kein geroutetes. Sonst klappt, glaube ich, pxe nicht so richtig. </p><p>Die Frage ist auch, wieviel vpn Verkehr/Durchsatz schafft der Banana Pie?!?</p><p>So unter uns, so wie du dir das denkst, wird das _nicht_ sehr performant laufen und eine sehr wackelige Geschichte sein.</p><p>Christoph</p>											<p class="post-edited">(Last edited by <strong>rj-45</strong> on 23 Feb 2017, 19:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352793">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">danielalpha007</div>
					<div class="post-datetime">
						23 Feb 2017, 19:19					</div>
				</div>
				<div class="post-content content">
					<p>Hey, ich weiß das die Installation bei der an Anbindung ewig dauert und ich nehme das in kauf. <br />Und ja genau so habe ich mir das gedacht, beide vms bekommen den vpn clienten.<br />Die PCs sollen danach auch von der Platte booten. </p><p>MfG</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352794">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">rj-45</div>
					<div class="post-datetime">
						23 Feb 2017, 19:36					</div>
				</div>
				<div class="post-content content">
					<p>Hello again,</p><p>ich glaube die &quot;einfachste&quot; Variante ist ein Layer-2-VPN aufzubauen. Halte dich am besten an diese Anleitung<br /><a href="https://wiki.openwrt.org/doc/howto/vpn.openvpn">https://wiki.openwrt.org/doc/howto/vpn.openvpn</a> -&gt; wenn es zwischen TUN und TAP zu unterscheiden gibt, dann mußt du dich für TAP entscheiden.</p><p>Bevor du anfängst würde ich gucken, ob du auf den virtuellen Maschinen OpenVPN installiert bekommst. Dies geht nicht bei allen. </p><p>Die ganze pxe Geschichte muß dann auf den VMs, entweder der Windows (AD) oder der Linux (OPSI) VM installiert werden. Da kann ich nicht weiterhelfen.</p><p>Den Banana Pie würde ich so konfigurieren, daß er als kaskadierter Router hinter der Fritzbox hängt. Sprich WAN Port des BP an einen LAN Port der Fritzbox. Es ist, aus meiner Sicht, die einfachste Variante. Ist zwar dann ein doppeltes NAT. Aber irgendwas ist ja immer :-D Dann darf der LAN IP Bereicht der FritzBox _nicht_ der gleich sein, wie der LAN IP Bereich des BP. Und es muß auf der Fritzbox der OpenVPN Port an den BP weitergeleitet werden und auf der BP OpenWRT Firewall geöffnet. </p><p>Christoph</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352795">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">danielalpha007</div>
					<div class="post-datetime">
						23 Feb 2017, 19:43					</div>
				</div>
				<div class="post-content content">
					<p>Genau so meinte ich das !<br />Vielen Dank, ich sehe mich da mal um! <br />Dann lese ich als erstes mal das Manual von OpenVPN <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /> </p><p>LG</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352796">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">danielalpha007</div>
					<div class="post-datetime">
						23 Feb 2017, 19:49					</div>
				</div>
				<div class="post-content content">
					<p>@rj-45<br />Du hast mir btw sehr sehr weitergeholfen! Genau da stand ich auf dem Schlauch <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /></p><p>MfG</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>