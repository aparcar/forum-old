<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Rb751</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 29 Mar 2018 and 27 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 5</div><nav><ul><li><a href="viewtopic.php%3Fid=32320&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=32320&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=32320&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=32320&amp;p=5.html">5</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p161953">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">chillifire</div>
					<div class="post-datetime">
						23 Mar 2012, 21:15					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for that. Got it to load with a combination dhcpserver and tftp64 (your new one).<br />Needed dhcpserv, as your adjusted ttftp programme did not respond to the immediate dhcp request anymore, it only dished out IP addressses some time after the bootp requests creating a timing issue. It responded fine to the bootp requests though, which is great.<br />What did you do to change the tftfp program?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161986">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">brainsucker</div>
					<div class="post-datetime">
						24 Mar 2012, 09:34					</div>
				</div>
				<div class="post-content content">
					<p>To change the program I downloaded the sources, fixed them and recompiled <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Was the original TFTPD32 version 4.0 working fine with DHCP requests for you? Cause I can&#039;t imagine anything I touched to cause such change in behaviour <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162027">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">chillifire</div>
					<div class="post-datetime">
						24 Mar 2012, 21:02					</div>
				</div>
				<div class="post-content content">
					<p>Yes it was, I could see in the log DHCP request coming through and being responded positively to prior to the bootp requests. So tftp32&#039;s dhcp server did work fine.</p><p>The changed program did not log any dhcp request anymore, just bootp requests.</p><p>Now this could have different reasons than your changes, granted, as I was not using 4.0 of tftpd for starters but quite an old version 3.3</p><p>Out of interest: The same behavior of dhcpsrv and tftpd32 on a rb750gl as on the rb750</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162127">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">chillifire</div>
					<div class="post-datetime">
						26 Mar 2012, 07:12					</div>
				</div>
				<div class="post-content content">
					<p>@ayufan</p><p>Compiled your patches into my source tree and loaded successfully onto the 751G. Everything seems to work with exception of the WLAN LED and WLAN RX. That&#039;s right, I see some TX data but no RX data, although I read you had the opposite effect. Below some data.</p><p>What sticks out is that <br /></p><div class="codebox"><pre><code>[    0.380000] pci 0000:00:00.0: no irq found for pin 1</code></pre></div><p>in dmesg. Your previous 30025 version had<br /></p><div class="codebox"><pre><code>[    0.770000] PCI: mapping irq 72 to pin1@0000:00:00.0</code></pre></div><p>So something something is not happening in the hardware recognition.</p><p>You may know how to fix this (I do not), but if you do not I suggest we submit your patches as preliminary support, highlighting the WLAN issues, which will invite other members of the community to review the code and contribute/fix.</p><p>Your thoughts?</p><br /><br /><br /><br /><div class="codebox"><pre><code>ifconfig
mon.wlan0 Link encap:UNSPEC  HWaddr 00-0C-42-FB-E2-76-00-48-00-00-00-00-00-00-00-00
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:32
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

wlan0     Link encap:Ethernet  HWaddr 00:0C:42:FB:E2:76
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:13 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:32
          RX bytes:0 (0.0 B)  TX bytes:2107 (2.0 KiB)</code></pre></div><div class="codebox"><pre><code>[    0.000000] Linux version 3.2.12 (hanno@CCS1-Linux) (gcc version 4.6.3 20120201 (prerelease) (Linaro GCC 4.6-2012.02) ) #2 Mon Mar 26 00:05:03 NZDT 2012
[    0.000000] MyLoader: sysp=144b8601, boardp=151b1040, parts=1d4834f6
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU revision is: 00019374 (MIPS 24Kc)
[    0.000000] SoC: Atheros AR7242 rev 1
[    0.000000] Clocks: CPU:400.000MHz, DDR:400.000MHz, AHB:200.000MHz, Ref:5.000MHz
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 04000000 @ 00000000 (usable)
[    0.000000] User-defined physical RAM map:
[    0.000000]  memory: 04000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone PFN ranges:
[    0.000000]   Normal   0x00000000 -&gt; 0x00004000
[    0.000000] Movable zone start PFN for each node
[    0.000000] early_node_map[1] active PFN ranges
[    0.000000]     0: 0x00000000 -&gt; 0x00004000
[    0.000000] On node 0 totalpages: 16384
[    0.000000] free_area_init_node: node 0, pgdat 802c46c0, node_mem_map 81000000
[    0.000000]   Normal zone: 128 pages used for memmap
[    0.000000]   Normal zone: 0 pages reserved
[    0.000000]   Normal zone: 16256 pages, LIFO batch:3
[    0.000000] pcpu-alloc: s0 r0 d32768 u32768 alloc=1*32768
[    0.000000] pcpu-alloc: [0] 0
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
[    0.000000] Kernel command line:  no-uart gpio=3911 HZ=200000000 mem=64M kmac=00:0C:42:FB:E2:76 board=751g boot=1 mlc=2 rootfstype=yaffs noinitrd
[    0.000000] PID hash table entries: 256 (order: -2, 1024 bytes)
[    0.000000] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
[    0.000000] Writing ErrCtl register=00000000
[    0.000000] Readback ErrCtl register=00000000
[    0.000000] Memory: 61804k/65536k available (2041k kernel code, 3732k reserved, 409k data, 192k init, 0k highmem)
[    0.000000] SLUB: Genslabs=9, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.000000] NR_IRQS:48
[    0.000000] Calibrating delay loop... 265.42 BogoMIPS (lpj=1327104)
[    0.080000] pid_max: default: 32768 minimum: 301
[    0.080000] Mount-cache hash table entries: 512
[    0.090000] NET: Registered protocol family 16
[    0.100000] MIPS: machine is MikroTik RouterBOARD 751G
[    0.100000] ar71xx: pll_reg 0xb805002c: 0x62000000
[    0.330000] registering PCI controller with io_map_base unset
[    0.340000] rb7xx: calibration data found
[    0.350000] bio: create slab &lt;bio-0&gt; at 0
[    0.360000] pci 0000:00:00.0: [168c:ff1c] type 0 class 0x000200
[    0.360000] pci 0000:00:00.0: fixup device configuration
[    0.360000] pci 0000:00:00.0: reg 10: [mem 0x00000000-0x0000ffff 64bit]
[    0.360000] pci 0000:00:00.0: supports D1
[    0.360000] pci 0000:00:00.0: PME# supported from D0 D1 D3hot
[    0.360000] pci 0000:00:00.0: PME# disabled
[    0.360000] pci 0000:00:00.0: BAR 0: assigned [mem 0x10000000-0x1000ffff 64bit]
[    0.370000] pci 0000:00:00.0: BAR 0: set to [mem 0x10000000-0x1000ffff 64bit] (PCI address [0x10000000-0x1000ffff])
[    0.380000] pci 0000:00:00.0: no irq found for pin 1
[    0.380000] Switching to clocksource MIPS
[    0.390000] NET: Registered protocol family 2
[    0.390000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.390000] TCP established hash table entries: 2048 (order: 2, 16384 bytes)
[    0.400000] TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
[    0.400000] TCP: Hash tables configured (established 2048 bind 2048)
[    0.410000] TCP reno registered
[    0.410000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.420000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.430000] NET: Registered protocol family 1
[    0.430000] PCI: CLS 0 bytes, default 32
[    0.450000] yaffs built Mar 26 2012 00:03:14 Installing.
[    0.450000]
[    0.450000]
[    0.450000]
[    0.450000]
[    0.450000] YAFFS-WARNING CONFIG_YAFFS_ALWAYS_CHECK_CHUNK_ERASED selected.
[    0.450000]
[    0.450000]
[    0.450000]
[    0.450000] msgmni has been set to 120
[    0.460000] io scheduler noop registered
[    0.460000] io scheduler deadline registered (default)
[    0.470000] Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
[    0.490000] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A
[    0.500000] console [ttyS0] enabled, bootconsole disabled
[    0.630000] NAND flash driver for the RouterBOARD 750 version 0.1.0
[    0.710000] NAND device: Manufacturer ID: 0x20, Chip ID: 0x76 (ST Micro NAND 64MiB 3,3V 8-bit)
[    0.810000] Scanning device for bad blocks
[    0.960000] Creating 3 MTD partitions on &quot;NAND 64MiB 3,3V 8-bit&quot;:
[    1.030000] 0x000000000000-0x000000040000 : &quot;booter&quot;
[    1.090000] 0x000000040000-0x000000400000 : &quot;kernel&quot;
[    1.150000] 0x000000400000-0x000004000000 : &quot;rootfs&quot;
[    1.210000] mtd: partition &quot;rootfs&quot; set to be root filesystem
[    1.280000] split_squashfs: no squashfs found in &quot;NAND 64MiB 3,3V 8-bit&quot;
[    1.480000] ag71xx_mdio: probed
[    1.520000] eth0: Atheros AG71xx at 0xb9000000, irq 4
[    2.160000] eth0: AR8327 switch driver attached.
[    2.340000] ag71xx ag71xx.0: eth0: connected to PHY at ag71xx-mdio.0:00 [uid=004dd033, driver=Atheros AR8216/AR8236/AR8316]
[    2.480000] TCP westwood registered
[    2.520000] NET: Registered protocol family 17
[    2.570000] 8021q: 802.1Q VLAN Support v1.8
[    2.620000] yaffs: dev is 32505858 name is &quot;mtdblock2&quot; ro
[    2.690000] yaffs: passed flags &quot;&quot;
[    2.730000] yaffs: Attempting MTD mount of 31.2,&quot;mtdblock2&quot;
[    4.160000] yaffs_read_super: is_checkpointed 0
[    4.160000] VFS: Mounted root (yaffs filesystem) readonly on device 31:2.
[    4.250000] Freeing unused kernel memory: 192k freed
[    6.340000] eth0: link up (100Mbps/Full duplex)
[    8.530000] eth0: link down
[    9.170000] Compat-wireless backport release: compat-wireless-2012-02-27-1-r31059
[    9.260000] Backport based on wireless-testing.git master-2012-02-27
[    9.430000] cfg80211: Calling CRDA to update world regulatory domain
[    9.770000] cfg80211: World regulatory domain updated:
[    9.830000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
[    9.920000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   10.020000] cfg80211:   (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[   10.110000] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[   10.200000] cfg80211:   (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   10.300000] cfg80211:   (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   10.400000] usbcore: registered new interface driver usbfs
[   10.470000] usbcore: registered new interface driver hub
[   10.530000] usbcore: registered new device driver usb
[   11.010000] PCI: Enabling device 0000:00:00.0 (0000 -&gt; 0002)
[   11.080000] PCI: Setting latency timer of device 0000:00:00.0 to 64
[   11.090000] ath: EEPROM regdomain: 0x0
[   11.090000] ath: EEPROM indicates default country code should be used
[   11.090000] ath: doing EEPROM country-&gt;regdmn map search
[   11.090000] ath: country maps to regdmn code: 0x3a
[   11.090000] ath: Country alpha2 being used: US
[   11.090000] ath: Regpair used: 0x3a
[   11.090000] ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;
[   11.090000] Registered led device: ath9k-phy0
[   11.090000] ieee80211 phy0: Atheros AR9280 Rev:2 mem=0xb0000000, irq=0
[   11.170000] cfg80211: Calling CRDA for country: US
[   11.250000] Button Hotplug driver version 0.4.1
[   11.360000] PPP generic driver version 2.4.2
[   11.460000] cfg80211: Regulatory domain changed to country: US
[   11.530000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
[   11.630000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2700 mBm)
[   11.730000] cfg80211:   (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 1700 mBm)
[   11.820000] cfg80211:   (5250000 KHz - 5330000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   11.910000] cfg80211:   (5490000 KHz - 5600000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   12.000000] cfg80211:   (5650000 KHz - 5710000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   12.100000] cfg80211:   (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 3000 mBm)
[   12.220000] tun: Universal TUN/TAP device driver, 1.6
[   12.280000] tun: (C) 1999-2004 Max Krasnyansky &lt;maxk@qualcomm.com&gt;
[   12.440000] ip_tables: (C) 2000-2006 Netfilter Core Team
[   12.680000] NET: Registered protocol family 24
[   12.780000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[   12.860000] ath79-ehci ar724x-ehci: Atheros built-in EHCI controller
[   12.940000] ath79-ehci ar724x-ehci: new USB bus registered, assigned bus number 1
[   13.060000] ath79-ehci ar724x-ehci: irq 3, io mem 0x1b000000
[   13.140000] ath79-ehci ar724x-ehci: USB 2.0 started, EHCI 1.00
[   13.210000] hub 1-0:1.0: USB hub found
[   13.250000] hub 1-0:1.0: 1 port detected
[   13.340000] nf_conntrack version 0.5.0 (968 buckets, 3872 max)
[   13.890000] xt_time: kernel timezone is -0000
[   14.150000] xt_ipp2p: Unknown symbol HX_memmem (err 0)
[   14.260000] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
[   14.390000] usbcore: registered new interface driver cdc_acm
[   14.460000] cdc_acm: USB Abstract Control Model driver for USB modems and ISDN adapters
[   14.600000] usbcore: registered new interface driver usbserial
[   14.670000] USB Serial support registered for generic
[   14.730000] usbcore: registered new interface driver usbserial_generic
[   14.810000] usbserial: USB Serial Driver core
[   14.900000] Error: Driver &#039;gpio-keys-polled&#039; is already registered, aborting...
[   15.020000] USB Serial support registered for GSM modem (1-port)
[   15.090000] usbcore: registered new interface driver option
[   15.160000] option: v0.7.2:USB Driver for GSM modems
[   17.460000] device wlan0 entered promiscuous mode
[   19.340000] eth0: link up (100Mbps/Full duplex)
[   20.230000] device wlan0 left promiscuous mode
[   20.280000] br-lan: port 1(wlan0) entering disabled state
[   20.650000] device wlan0 entered promiscuous mode
[   21.420000] br-lan: port 1(wlan0) entering forwarding state
[   21.490000] br-lan: port 1(wlan0) entering forwarding state
[   23.980000] device eth0.1 entered promiscuous mode
[   24.040000] device eth0 entered promiscuous mode
[   24.090000] br-lan: port 2(eth0.1) entering forwarding state
[   24.160000] br-lan: port 2(eth0.1) entering forwarding state
[   36.520000] br-lan: port 1(wlan0) entering forwarding state
[   39.200000] br-lan: port 2(eth0.1) entering forwarding state</code></pre></div><div class="codebox"><pre><code>lspci -v
00:00.0 Network controller: Atheros Communications Inc. AR928X Wireless Network Adapter (PCI-Express) (rev 01)
        Subsystem: Atheros Communications Inc. Device a093
        Flags: bus master, fast devsel, latency 0
        Memory at 10000000 (64-bit, non-prefetchable) [size=64K]
        Capabilities: [40] Power Management version 2
        Capabilities: [50] MSI: Enable- Count=1/1 Maskable- 64bit-
        Capabilities: [60] Express Legacy Endpoint, MSI 00
        Capabilities: [90] MSI-X: Enable- Count=1 Masked-
        Capabilities: [100] Advanced Error Reporting
        Capabilities: [140] Virtual Channel
        Capabilities: [160] Device Serial Number 00-00-00-00-00-00-00-00
        Kernel driver in use: ath9k</code></pre></div><div class="codebox"><pre><code>lsusb -v

Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            9 Hub
  bDeviceSubClass         0 Unused
  bDeviceProtocol         1 Single TT
  bMaxPacketSize0        64
  idVendor           0x1d6b Linux Foundation
  idProduct          0x0002 2.0 root hub
  bcdDevice            3.02
  iManufacturer           3 Linux 3.2.12 ehci_hcd
  iProduct                2 Atheros built-in EHCI controller
  iSerial                 1 ar724x-ehci
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           25
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0xe0
      Self Powered
      Remote Wakeup
    MaxPower                0mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         9 Hub
      bInterfaceSubClass      0 Unused
      bInterfaceProtocol      0 Full speed (or root) hub
      iInterface              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0004  1x 4 bytes
        bInterval              12
Hub Descriptor:
  bLength               9
  bDescriptorType      41
  nNbrPorts             1
  wHubCharacteristic 0x0009
    Per-port power switching
    Per-port overcurrent protection
    TT think time 8 FS bits
  bPwrOn2PwrGood       10 * 2 milli seconds
  bHubContrCurrent      0 milli Ampere
  DeviceRemovable    0x00
  PortPwrCtrlMask    0xff
 Hub Port Status:
   Port 1: 0000.0100 power
Device Status:     0x0001
  Self Powered</code></pre></div><div class="codebox"><pre><code>config wifi-device &#039;radio0&#039;
        option type &#039;mac80211&#039;
        option macaddr &#039;00:0c:42:fb:e2:76&#039;
        option hwmode &#039;11ng&#039;
        option htmode &#039;HT20&#039;
        list ht_capab &#039;SHORT-GI-40&#039;
        list ht_capab &#039;TX-STBC&#039;
        list ht_capab &#039;RX-STBC1&#039;
        list ht_capab &#039;DSSS_CCK-40&#039;
        option disabled &#039;0&#039;
        option channel &#039;3&#039;
        option country &#039;US&#039;
        option txpower &#039;20&#039;

config wifi-iface
        option device &#039;radio0&#039;
        option ssid &#039;Private Network&#039;
        option mode &#039;ap&#039;
        option isolate &#039;1&#039;
        option network &#039;lan&#039;
        option encryption &#039;none&#039;</code></pre></div><div class="codebox"><pre><code>config interface &#039;loopback&#039;
        option ifname &#039;lo&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;127.0.0.1&#039;
        option netmask &#039;255.0.0.0&#039;

config interface &#039;lan&#039;
        option ifname &#039;eth0.1&#039;
        option type &#039;bridge&#039;
        option proto &#039;static&#039;
        option netmask &#039;255.255.255.0&#039;
        option ipaddr &#039;192.168.12.1&#039;
        option dns &#039;8.8.8.8 8.8.4.4&#039;

config interface &#039;wan&#039;
        option ifname &#039;eth0.2&#039;
        option proto &#039;dhcp&#039;
        option dns &#039;8.8.8.8 8.8.4.4&#039;

config switch
        option name &#039;switch0&#039;
        option reset &#039;1&#039;
        option enable_vlan &#039;1&#039;

config switch_vlan
        option device &#039;switch0&#039;
        option vlan &#039;1&#039;
        option ports &#039;0t 2 3 4 5&#039;

config switch_vlan
        option device &#039;switch0&#039;
        option vlan &#039;2&#039;
        option ports &#039;0t 1&#039;</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162128">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">chillifire</div>
					<div class="post-datetime">
						26 Mar 2012, 07:20					</div>
				</div>
				<div class="post-content content">
					<p>@ayufan</p><p>Just saw your readme:<br /></p><div class="codebox"><pre><code>1. 2012-03-22
New patches for trunk&#039;s rev. 31053 with full support switch chip present in RB751G.
Bugs in r31053:
- not working wireless on RB751 and RB751G, instead package/mac80211 from r30025 is used!</code></pre></div><p>How do you do that?&nbsp; package/mac80211 from r30025 is based on linux 2.6.39, whereas 31053 is based on 3.2.12. opkg refuses to load even 3.2.9 packages onto the 3.2.12 firmware.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162129">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">brainsucker</div>
					<div class="post-datetime">
						26 Mar 2012, 07:35					</div>
				</div>
				<div class="post-content content">
					<p>@chillifire<br />thats probably why ayufan was not announcing new version here <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162132">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">chillifire</div>
					<div class="post-datetime">
						26 Mar 2012, 08:47					</div>
				</div>
				<div class="post-content content">
					<p>That maybe so, but it is perfectly normal to announce &#039;partial support&#039;, publish patches etc, to ensure they do not go &#039;stale&#039;, that is to say they become outdated (like the previous 2.6 patches ayufan did) or clash with subsequent patches of trunk. <br />In short, it is better to publish patches often and use the community to help.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162296">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">ayufan</div>
					<div class="post-datetime">
						28 Mar 2012, 00:19					</div>
				</div>
				<div class="post-content content">
					<p>Ok. Will post update tomorrow. Today I need more sleep, sorry <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162584">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">ayufan</div>
					<div class="post-datetime">
						30 Mar 2012, 14:35					</div>
				</div>
				<div class="post-content content">
					<p>Here you can find the latest compilation:<br /><a href="http://ayufan.eu/local/rb751/r31151/">http://ayufan.eu/local/rb751/r31151/</a><br />and patch:<br /><a href="http://ayufan.eu/local/rb751/trunk-r31151.diff">http://ayufan.eu/local/rb751/trunk-r31151.diff</a></p><p>I couldn&#039;t make to work WLAN module on RB751G. There is some problem with WLAN not transmitting data. So for only ethernet ports work and no WLAN <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>dmesg:<br /></p><div class="quotebox"><blockquote><p>[&nbsp; &nbsp; 0.080000] pid_max: default: 32768 minimum: 301<br />[&nbsp; &nbsp; 0.080000] Mount-cache hash table entries: 512<br />[&nbsp; &nbsp; 0.090000] NET: Registered protocol family 16<br />[&nbsp; &nbsp; 0.090000] MIPS: machine is MikroTik RouterBOARD 751G<br />[&nbsp; &nbsp; 0.100000] ar71xx: pll_reg 0xb805002c: 0x62000000<br />[&nbsp; &nbsp; 0.330000] registering PCI controller with io_map_base unset<br />[&nbsp; &nbsp; 0.330000] rb7xx: calibration data found<br />[&nbsp; &nbsp; 0.340000] bio: create slab &lt;bio-0&gt; at 0<br />[&nbsp; &nbsp; 0.350000] pci 0000:00:00.0: [168c:ff1c] type 0 class 0x000200<br />[&nbsp; &nbsp; 0.350000] pci 0000:00:00.0: fixup device configuration<br />[&nbsp; &nbsp; 0.350000] pci 0000:00:00.0: reg 10: [mem 0x00000000-0x0000ffff 64bit]<br />[&nbsp; &nbsp; 0.350000] pci 0000:00:00.0: supports D1<br />[&nbsp; &nbsp; 0.350000] pci 0000:00:00.0: PME# supported from D0 D1 D3hot<br />[&nbsp; &nbsp; 0.360000] pci 0000:00:00.0: PME# disabled<br />[&nbsp; &nbsp; 0.360000] pci 0000:00:00.0: BAR 0: assigned [mem 0x10000000-0x1000ffff 64bit]<br />[&nbsp; &nbsp; 0.360000] pci 0000:00:00.0: BAR 0: set to [mem 0x10000000-0x1000ffff 64bit] (PCI address [0x10000000-0x1000ffff])<br />[&nbsp; &nbsp; 0.370000] pci 0000:00:00.0: no irq found for pin 1<br />[&nbsp; &nbsp; 0.370000] Switching to clocksource MIPS<br />[&nbsp; &nbsp; 0.380000] NET: Registered protocol family 2<br />[&nbsp; &nbsp; 0.380000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.380000] TCP established hash table entries: 2048 (order: 2, 16384 bytes)<br />[&nbsp; &nbsp; 0.390000] TCP bind hash table entries: 2048 (order: 1, 8192 bytes)<br />[&nbsp; &nbsp; 0.390000] TCP: Hash tables configured (established 2048 bind 2048)<br />[&nbsp; &nbsp; 0.400000] TCP reno registered<br />[&nbsp; &nbsp; 0.400000] UDP hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.410000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.420000] NET: Registered protocol family 1<br />[&nbsp; &nbsp; 0.420000] PCI: CLS 0 bytes, default 32<br />[&nbsp; &nbsp; 0.440000] yaffs built Mar 30 2012 13:08:18 Installing.<br />[&nbsp; &nbsp; 0.440000]<br />[&nbsp; &nbsp; 0.440000]<br />[&nbsp; &nbsp; 0.440000]<br />[&nbsp; &nbsp; 0.440000]<br />[&nbsp; &nbsp; 0.440000] YAFFS-WARNING CONFIG_YAFFS_ALWAYS_CHECK_CHUNK_ERASED selected.<br />[&nbsp; &nbsp; 0.440000]<br />[&nbsp; &nbsp; 0.440000]<br />[&nbsp; &nbsp; 0.440000]<br />[&nbsp; &nbsp; 0.440000] msgmni has been set to 120<br />[&nbsp; &nbsp; 0.450000] io scheduler noop registered<br />[&nbsp; &nbsp; 0.450000] io scheduler deadline registered (default)<br />[&nbsp; &nbsp; 0.460000] Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled<br />[&nbsp; &nbsp; 0.480000] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A<br />[&nbsp; &nbsp; 0.490000] console [ttyS0] enabled, bootconsole disabled<br />[&nbsp; &nbsp; 0.620000] NAND flash driver for the RouterBOARD 750 version 0.1.0<br />[&nbsp; &nbsp; 0.700000] NAND device: Manufacturer ID: 0x20, Chip ID: 0x76 (ST Micro NAND 64MiB 3,3V 8-bit)<br />[&nbsp; &nbsp; 0.800000] Scanning device for bad blocks<br />[&nbsp; &nbsp; 0.950000] Creating 3 MTD partitions on &quot;NAND 64MiB 3,3V 8-bit&quot;:<br />[&nbsp; &nbsp; 1.020000] 0x000000000000-0x000000040000 : &quot;booter&quot;<br />[&nbsp; &nbsp; 1.080000] 0x000000040000-0x000000400000 : &quot;kernel&quot;<br />[&nbsp; &nbsp; 1.140000] 0x000000400000-0x000004000000 : &quot;rootfs&quot;<br />[&nbsp; &nbsp; 1.200000] mtd: partition &quot;rootfs&quot; set to be root filesystem<br />[&nbsp; &nbsp; 1.270000] split_squashfs: no squashfs found in &quot;NAND 64MiB 3,3V 8-bit&quot;<br />[&nbsp; &nbsp; 1.470000] ag71xx_mdio: probed<br />[&nbsp; &nbsp; 1.510000] eth0: Atheros AG71xx at 0xb9000000, irq 4<br />[&nbsp; &nbsp; 2.150000] eth0: AR8327 switch driver attached.<br />[&nbsp; &nbsp; 2.330000] ag71xx ag71xx.0: eth0: connected to PHY at ag71xx-mdio.0:00 [uid=004dd033, driver=Atheros AR8216/AR8236/AR8316]<br />[&nbsp; &nbsp; 2.470000] TCP westwood registered<br />[&nbsp; &nbsp; 2.510000] NET: Registered protocol family 17<br />[&nbsp; &nbsp; 2.560000] Bridge firewalling registered<br />[&nbsp; &nbsp; 2.610000] 8021q: 802.1Q VLAN Support v1.8<br />[&nbsp; &nbsp; 2.660000] yaffs: dev is 32505858 name is &quot;mtdblock2&quot; ro<br />[&nbsp; &nbsp; 2.730000] yaffs: passed flags &quot;&quot;<br />[&nbsp; &nbsp; 2.770000] yaffs: Attempting MTD mount of 31.2,&quot;mtdblock2&quot;<br />[&nbsp; &nbsp; 6.820000] yaffs_read_super: is_checkpointed 0<br />[&nbsp; &nbsp; 6.820000] VFS: Mounted root (yaffs filesystem) readonly on device 31:2.<br />[&nbsp; &nbsp; 6.910000] Freeing unused kernel memory: 196k freed<br />[&nbsp; &nbsp; 9.330000] eth0: link up (100Mbps/Full duplex)<br />[&nbsp; &nbsp;11.290000] eth0: link down<br />[&nbsp; &nbsp;12.190000] Compat-wireless backport release: compat-wireless-2012-02-27-1-r31151<br />[&nbsp; &nbsp;12.280000] Backport based on wireless-testing.git master-2012-02-27<br />[&nbsp; &nbsp;12.490000] cfg80211: Calling CRDA to update world regulatory domain<br />[&nbsp; &nbsp;12.650000] SCSI subsystem initialized<br />[&nbsp; &nbsp;12.810000] cfg80211: World regulatory domain updated:<br />[&nbsp; &nbsp;12.870000] cfg80211:&nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />[&nbsp; &nbsp;12.970000] cfg80211:&nbsp; &nbsp;(2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;13.060000] cfg80211:&nbsp; &nbsp;(2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;13.150000] cfg80211:&nbsp; &nbsp;(2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;13.240000] cfg80211:&nbsp; &nbsp;(5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;13.340000] cfg80211:&nbsp; &nbsp;(5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;13.500000] usbcore: registered new interface driver usbfs<br />[&nbsp; &nbsp;13.570000] usbcore: registered new interface driver hub<br />[&nbsp; &nbsp;13.630000] usbcore: registered new device driver usb<br />[&nbsp; &nbsp;14.140000] PCI: Enabling device 0000:00:00.0 (0000 -&gt; 0002)<br />[&nbsp; &nbsp;14.210000] PCI: Setting latency timer of device 0000:00:00.0 to 64<br />[&nbsp; &nbsp;14.220000] ath: EEPROM regdomain: 0x0<br />[&nbsp; &nbsp;14.220000] ath: EEPROM indicates default country code should be used<br />[&nbsp; &nbsp;14.220000] ath: doing EEPROM country-&gt;regdmn map search<br />[&nbsp; &nbsp;14.220000] ath: country maps to regdmn code: 0x3a<br />[&nbsp; &nbsp;14.220000] ath: Country alpha2 being used: US<br />[&nbsp; &nbsp;14.220000] ath: Regpair used: 0x3a<br />[&nbsp; &nbsp;14.220000] ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;<br />[&nbsp; &nbsp;14.230000] Registered led device: ath9k-phy0<br />[&nbsp; &nbsp;14.230000] ieee80211 phy0: Atheros AR9280 Rev:2 mem=0xb0000000, irq=0<br />[&nbsp; &nbsp;14.310000] cfg80211: Calling CRDA for country: US<br />[&nbsp; &nbsp;14.580000] cfg80211: Regulatory domain changed to country: US<br />[&nbsp; &nbsp;14.650000] cfg80211:&nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />[&nbsp; &nbsp;14.750000] cfg80211:&nbsp; &nbsp;(2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2700 mBm)<br />[&nbsp; &nbsp;14.840000] cfg80211:&nbsp; &nbsp;(5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 1700 mBm)<br />[&nbsp; &nbsp;14.940000] cfg80211:&nbsp; &nbsp;(5250000 KHz - 5330000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;15.030000] cfg80211:&nbsp; &nbsp;(5490000 KHz - 5600000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;15.120000] cfg80211:&nbsp; &nbsp;(5650000 KHz - 5710000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;15.210000] cfg80211:&nbsp; &nbsp;(5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 3000 mBm)<br />[&nbsp; &nbsp;15.350000] PPP generic driver version 2.4.2<br />[&nbsp; &nbsp;15.500000] ip_tables: (C) 2000-2006 Netfilter Core Team<br />[&nbsp; &nbsp;15.750000] NET: Registered protocol family 24<br />[&nbsp; &nbsp;15.900000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver<br />[&nbsp; &nbsp;15.980000] ath79-ehci ar724x-ehci: Atheros built-in EHCI controller<br />[&nbsp; &nbsp;16.060000] ath79-ehci ar724x-ehci: new USB bus registered, assigned bus number 1<br />[&nbsp; &nbsp;16.180000] ath79-ehci ar724x-ehci: irq 3, io mem 0x1b000000<br />[&nbsp; &nbsp;16.260000] ath79-ehci ar724x-ehci: USB 2.0 started, EHCI 1.00<br />[&nbsp; &nbsp;16.330000] hub 1-0:1.0: USB hub found<br />[&nbsp; &nbsp;16.370000] hub 1-0:1.0: 1 port detected<br />[&nbsp; &nbsp;16.460000] nf_conntrack version 0.5.0 (967 buckets, 3868 max)<br />[&nbsp; &nbsp;16.750000] usb 1-1: new high-speed USB device number 2 using ath79-ehci<br />[&nbsp; &nbsp;17.020000] usbcore: registered new interface driver usblp<br />[&nbsp; &nbsp;17.130000] Initializing USB Mass Storage driver...<br />[&nbsp; &nbsp;17.190000] usbcore: registered new interface driver usb-storage<br />[&nbsp; &nbsp;17.260000] USB Mass Storage support registered.<br />[&nbsp; &nbsp;17.320000] hub 1-1:1.0: USB hub found<br />[&nbsp; &nbsp;17.370000] hub 1-1:1.0: 7 ports detected<br />[&nbsp; &nbsp;17.700000] usb 1-1.5: new high-speed USB device number 3 using ath79-ehci<br />[&nbsp; &nbsp;18.030000] scsi0 : usb-storage 1-1.5:1.0<br />[&nbsp; &nbsp;19.080000] scsi 0:0:0:0: Direct-Access&nbsp; &nbsp; &nbsp;WD&nbsp; &nbsp; &nbsp; &nbsp;Ext HDD 1021&nbsp; &nbsp; &nbsp;2002 PQ: 0 ANSI: 4<br />[&nbsp; &nbsp;19.180000] sd 0:0:0:0: [sda] 1953519616 512-byte logical blocks: (1.00 TB/931 GiB)<br />[&nbsp; &nbsp;19.480000] sd 0:0:0:0: [sda] Test WP failed, assume Write Enabled<br />[&nbsp; &nbsp;19.680000] sd 0:0:0:0: [sda] Asking for cache data failed<br />[&nbsp; &nbsp;19.740000] sd 0:0:0:0: [sda] Assuming drive cache: write through<br />[&nbsp; &nbsp;20.110000] sd 0:0:0:0: [sda] Test WP failed, assume Write Enabled<br />[&nbsp; &nbsp;20.270000] sd 0:0:0:0: [sda] Asking for cache data failed<br />[&nbsp; &nbsp;20.330000] sd 0:0:0:0: [sda] Assuming drive cache: write through<br />[&nbsp; &nbsp;20.460000]&nbsp; sda: sda1 sda2 sda3 sda4<br />[&nbsp; &nbsp;20.570000] eth0: link up (100Mbps/Full duplex)<br />[&nbsp; &nbsp;20.650000] sd 0:0:0:0: [sda] Test WP failed, assume Write Enabled<br />[&nbsp; &nbsp;20.830000] sd 0:0:0:0: [sda] Asking for cache data failed<br />[&nbsp; &nbsp;20.890000] sd 0:0:0:0: [sda] Assuming drive cache: write through<br />[&nbsp; &nbsp;20.960000] sd 0:0:0:0: [sda] Attached SCSI disk<br />[&nbsp; &nbsp;21.880000] cfg80211: Calling CRDA for country: PL<br />[&nbsp; &nbsp;25.100000] cfg80211: Calling CRDA to update world regulatory domain<br />[&nbsp; &nbsp;25.420000] wlan0: authenticate with 00:18:39:1e:cc:83<br />[&nbsp; &nbsp;25.500000] wlan0: send auth to 00:18:39:1e:cc:83 (try 1/3)<br />[&nbsp; &nbsp;25.770000] wlan0: send auth to 00:18:39:1e:cc:83 (try 2/3)<br />[&nbsp; &nbsp;26.040000] wlan0: send auth to 00:18:39:1e:cc:83 (try 3/3)<br />[&nbsp; &nbsp;26.380000] wlan0: authentication with 00:18:39:1e:cc:83 timed out<br />[&nbsp; &nbsp;27.990000] cfg80211: World regulatory domain updated:<br />[&nbsp; &nbsp;28.050000] cfg80211:&nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />[&nbsp; &nbsp;28.150000] cfg80211:&nbsp; &nbsp;(2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;28.240000] cfg80211:&nbsp; &nbsp;(2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;28.330000] cfg80211:&nbsp; &nbsp;(2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;28.430000] cfg80211:&nbsp; &nbsp;(5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;28.520000] cfg80211:&nbsp; &nbsp;(5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;28.630000] cfg80211: Calling CRDA for country: PL<br />[&nbsp; &nbsp;28.850000] cfg80211: Regulatory domain changed to country: PL<br />[&nbsp; &nbsp;28.920000] cfg80211:&nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />[&nbsp; &nbsp;29.020000] cfg80211:&nbsp; &nbsp;(2402000 KHz - 2482000 KHz @ 40000 KHz), (N/A, 2000 mBm)<br />[&nbsp; &nbsp;29.110000] cfg80211:&nbsp; &nbsp;(5170000 KHz - 5250000 KHz @ 40000 KHz), (N/A, 2000 mBm)<br />[&nbsp; &nbsp;29.200000] cfg80211:&nbsp; &nbsp;(5250000 KHz - 5330000 KHz @ 40000 KHz), (N/A, 2000 mBm)<br />[&nbsp; &nbsp;29.290000] cfg80211:&nbsp; &nbsp;(5490000 KHz - 5710000 KHz @ 40000 KHz), (N/A, 2700 mBm)<br />[&nbsp; &nbsp;30.850000] wlan0: deauthenticating from 00:18:39:1e:cc:83 by local choice (reason=3)<br />[&nbsp; &nbsp;31.990000] wlan0: authenticate with 00:18:39:1e:cc:83<br />[&nbsp; &nbsp;32.060000] wlan0: send auth to 00:18:39:1e:cc:83 (try 1/3)<br />[&nbsp; &nbsp;32.340000] wlan0: send auth to 00:18:39:1e:cc:83 (try 2/3)<br />[&nbsp; &nbsp;32.610000] wlan0: send auth to 00:18:39:1e:cc:83 (try 3/3)<br />[&nbsp; &nbsp;32.900000] wlan0: authentication with 00:18:39:1e:cc:83 timed out</p></blockquote></div><p>iw list<br /></p><div class="quotebox"><blockquote><p>Wiphy phy0<br />&nbsp; &nbsp; &nbsp; &nbsp; Band 1:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Capabilities: 0x11ce<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HT20/HT40<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SM Power Save disabled<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX HT40 SGI<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX STBC<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX STBC 1-stream<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Max AMSDU length: 3839 bytes<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DSSS/CCK HT40<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Maximum RX AMPDU length 65535 bytes (exponent: 0x003)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Minimum RX AMPDU time spacing: 8 usec (0x06)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HT TX/RX MCS rate indexes supported: 0-15<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Frequencies:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2412 MHz [1] (20.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2417 MHz [2] (20.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2422 MHz [3] (20.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2427 MHz [4] (20.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2432 MHz [5] (20.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2437 MHz [6] (20.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2442 MHz [7] (20.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2447 MHz [8] (20.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2452 MHz [9] (20.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2457 MHz [10] (20.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2462 MHz [11] (20.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2467 MHz [12] (20.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2472 MHz [13] (20.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2484 MHz [14] (disabled)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Bitrates (non-HT):<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 1.0 Mbps<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2.0 Mbps (short preamble supported)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 5.5 Mbps (short preamble supported)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 11.0 Mbps (short preamble supported)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 6.0 Mbps<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 9.0 Mbps<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 12.0 Mbps<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 18.0 Mbps<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 24.0 Mbps<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 36.0 Mbps<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 48.0 Mbps<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 54.0 Mbps<br />&nbsp; &nbsp; &nbsp; &nbsp; max # scan SSIDs: 4<br />&nbsp; &nbsp; &nbsp; &nbsp; max scan IEs length: 2257 bytes<br />&nbsp; &nbsp; &nbsp; &nbsp; Coverage class: 0 (up to 0m)<br />&nbsp; &nbsp; &nbsp; &nbsp; Available Antennas: TX 0x3 RX 0x3<br />&nbsp; &nbsp; &nbsp; &nbsp; Configured Antennas: TX 0x3 RX 0x3<br />&nbsp; &nbsp; &nbsp; &nbsp; Supported interface modes:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* IBSS<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* managed<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* AP<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* AP/VLAN<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* WDS<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* monitor<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* mesh point<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* P2P-client<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* P2P-GO<br />&nbsp; &nbsp; &nbsp; &nbsp; software interface modes (can always be added):<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* AP/VLAN<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* monitor<br />&nbsp; &nbsp; &nbsp; &nbsp; interface combinations are not supported<br />&nbsp; &nbsp; &nbsp; &nbsp; Supported commands:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* new_interface<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* set_interface<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* new_key<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* new_beacon<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* new_station<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* new_mpath<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* set_mesh_params<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* set_bss<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* authenticate<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* associate<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* deauthenticate<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* disassociate<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* join_ibss<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* join_mesh<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* remain_on_channel<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* set_tx_bitrate_mask<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* action<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* frame_wait_cancel<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* set_wiphy_netns<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* set_channel<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* set_wds_peer<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* Unknown command (82)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* Unknown command (81)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* Unknown command (84)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* Unknown command (87)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* Unknown command (85)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* connect<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* disconnect<br />&nbsp; &nbsp; &nbsp; &nbsp; Supported TX frame types:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* IBSS: 0x0000 0x0010 0x0020 0x0030 0x0040 0x0050 0x0060 0x0070 0x0080 0x0090 0x00a0 0x00b0 0x00c0 0x00d0 0x00e0 0x00f0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* managed: 0x0000 0x0010 0x0020 0x0030 0x0040 0x0050 0x0060 0x0070 0x0080 0x0090 0x00a0 0x00b0 0x00c0 0x00d0 0x00e0 0x00f0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* AP: 0x0000 0x0010 0x0020 0x0030 0x0040 0x0050 0x0060 0x0070 0x0080 0x0090 0x00a0 0x00b0 0x00c0 0x00d0 0x00e0 0x00f0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* AP/VLAN: 0x0000 0x0010 0x0020 0x0030 0x0040 0x0050 0x0060 0x0070 0x0080 0x0090 0x00a0 0x00b0 0x00c0 0x00d0 0x00e0 0x00f0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* mesh point: 0x0000 0x0010 0x0020 0x0030 0x0040 0x0050 0x0060 0x0070 0x0080 0x0090 0x00a0 0x00b0 0x00c0 0x00d0 0x00e0 0x00f0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* P2P-client: 0x0000 0x0010 0x0020 0x0030 0x0040 0x0050 0x0060 0x0070 0x0080 0x0090 0x00a0 0x00b0 0x00c0 0x00d0 0x00e0 0x00f0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* P2P-GO: 0x0000 0x0010 0x0020 0x0030 0x0040 0x0050 0x0060 0x0070 0x0080 0x0090 0x00a0 0x00b0 0x00c0 0x00d0 0x00e0 0x00f0<br />&nbsp; &nbsp; &nbsp; &nbsp; Supported RX frame types:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* IBSS: 0x00d0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* managed: 0x0040 0x00d0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* AP: 0x0000 0x0020 0x0040 0x00a0 0x00b0 0x00c0 0x00d0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* AP/VLAN: 0x0000 0x0020 0x0040 0x00a0 0x00b0 0x00c0 0x00d0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* mesh point: 0x00b0 0x00c0 0x00d0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* P2P-client: 0x0040 0x00d0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* P2P-GO: 0x0000 0x0020 0x0040 0x00a0 0x00b0 0x00c0 0x00d0<br />&nbsp; &nbsp; &nbsp; &nbsp; Device supports RSN-IBSS.</p></blockquote></div><div class="quotebox"><blockquote><p>root@atom:/debugfs/ieee80211/phy0/statistics# head *<br />==&gt; dot11ACKFailureCount &lt;==<br />20</p><p>==&gt; dot11FCSErrorCount &lt;==<br />3409</p><p>==&gt; dot11RTSFailureCount &lt;==<br />0</p><p>==&gt; dot11RTSSuccessCount &lt;==<br />0</p><p>==&gt; failed_count &lt;==<br />43</p><p>==&gt; frame_duplicate_count &lt;==<br />0</p><p>==&gt; multicast_received_frame_count &lt;==<br />1483</p><p>==&gt; multicast_transmitted_frame_count &lt;==<br />0</p><p>==&gt; multiple_retry_count &lt;==<br />0</p><p>==&gt; received_fragment_count &lt;==<br />829</p><p>==&gt; retry_count &lt;==<br />0</p><p>==&gt; transmitted_fragment_count &lt;==<br />0</p><p>==&gt; transmitted_frame_count &lt;==<br />0</p></blockquote></div>											<p class="post-edited">(Last edited by <strong>ayufan</strong> on 30 Mar 2012, 14:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162585">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">chillifire</div>
					<div class="post-datetime">
						30 Mar 2012, 14:35					</div>
				</div>
				<div class="post-content content">
					<p>@aryufan</p><p>Thanks for that, great work nevertheless. <br />Sorry to be pushy, but why don&#039;t we publish the diff for commitment as &#039;prelimianry support&#039; and thus make sure your good work does not go &#039;stale&#039;. There is a lot of work going on in the pci, athk and ar71xx area and your chnage set may soon be outdated again. Your thoughts?</p><br /><p>Also, you have the same dmesg message as I had:<br /></p><div class="codebox"><pre><code>[    0.370000] pci 0000:00:00.0: no irq found for pin 1</code></pre></div><p>which did not occur on the earlier version, when ironically only the wireless worked but not the switch. Do you agree that this is likely related? If so, then the maintainers of the athk and pci code in Openwrt should be able to help us. They should know best what changed from 2.6.39 to 3.2.12.</p>											<p class="post-edited">(Last edited by <strong>chillifire</strong> on 30 Mar 2012, 14:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162672">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">ayufan</div>
					<div class="post-datetime">
						31 Mar 2012, 00:24					</div>
				</div>
				<div class="post-content content">
					<p>It may be that. Wait till monday. Will try to check something <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>											<p class="post-edited">(Last edited by <strong>ayufan</strong> on 31 Mar 2012, 01:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162676">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">ayufan</div>
					<div class="post-datetime">
						31 Mar 2012, 00:55					</div>
				</div>
				<div class="post-content content">
					<p>What a nasty bug. Will post patches tomorrow with WLAN working...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162687">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">aleksisj</div>
					<div class="post-datetime">
						31 Mar 2012, 05:10					</div>
				</div>
				<div class="post-content content">
					<p>Here is a quick fix I made - wireless and ethernet switch is working now. </p><p>This is a modified ayufan&#039;s patch. </p><p><a href="http://dl.dropbox.com/u/7198669/trunk-r31152.diff">http://dl.dropbox.com/u/7198669/trunk-r31152.diff</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162688">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">brainsucker</div>
					<div class="post-datetime">
						31 Mar 2012, 05:10					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ayufan wrote:</cite><blockquote><p>What a nasty bug.</p></blockquote></div><div class="quotebox"><blockquote><p>static struct ath79_pci_irq rb751_pci_irqs[] __initdata = {<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; .slot&nbsp; &nbsp; = 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; .pin&nbsp; &nbsp; = 1,<br />&nbsp; &nbsp; &nbsp; &nbsp; .irq&nbsp; &nbsp; = ATH79_PCI_IRQ(0),<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />};</p></blockquote></div><p>? <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Wifi really works fine with this change, at least in ramfs mode (wouldn&#039;t expect normal to be any different).</p><div class="quotebox"><blockquote><p>[&nbsp; &nbsp; 0.370000] pci 0000:00:00.0: no irq found for pin 1</p></blockquote></div><p>Nice spotted, chillifire <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162689">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">brainsucker</div>
					<div class="post-datetime">
						31 Mar 2012, 05:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>aleksisj wrote:</cite><blockquote><p><a href="http://dl.dropbox.com/u/7198669/trunk-r31152.diff">http://dl.dropbox.com/u/7198669/trunk-r31152.diff</a></p></blockquote></div><p>it seems .slots 17,18,19 appeared here by pure error (not sure if they&#039;ll interfere with anything) and present only at ar71xx series.<br />actually default initialization for ar724x contains the same irq_map as we are using for rb751, so possibly we don&#039;t need custom irq map at all.<br />whatever, it works, and this is cool <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162692">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">chillifire</div>
					<div class="post-datetime">
						31 Mar 2012, 08:16					</div>
				</div>
				<div class="post-content content">
					<p>Brilliant stuff everyone.</p><p>@aryufan @aleksisj<br />I will get this submitted as patches to trunk, but will certainly mention the main creator and wlan issue resolver. I am just keen to get things merged ASAP.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162697">
				<div class="post-metadata">
					<div class="post-num">Post #42</div>
					<div class="post-author">ayufan</div>
					<div class="post-datetime">
						31 Mar 2012, 10:02					</div>
				</div>
				<div class="post-content content">
					<p>There is minimalistic working version of latest patch (r.31152 doesn&#039;t change anything in trunk&#039;s):<br /><a href="http://ayufan.eu/local/rb751/trunk-r31151.diff">http://ayufan.eu/local/rb751/trunk-r31151.diff</a></p><p>As always the compilation:<br /><a href="http://ayufan.eu/local/rb751/r31151/">http://ayufan.eu/local/rb751/r31151/</a></p><p>Thanks for great work everyone <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>BTW: My home setup: <a href="https://fbcdn-sphotos-a.akamaihd.net/hphotos-ak-prn1/535004_3319999512839_1053834227_3170189_623454631_n.jpg">https://fbcdn-sphotos-a.akamaihd.net/hp … 4631_n.jpg</a><br />2x RB751G, 1x RB751U <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>ayufan</strong> on 31 Mar 2012, 10:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162706">
				<div class="post-metadata">
					<div class="post-num">Post #43</div>
					<div class="post-author">aleksisj</div>
					<div class="post-datetime">
						31 Mar 2012, 11:22					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>brainsucker wrote:</cite><blockquote><div class="quotebox"><cite>aleksisj wrote:</cite><blockquote><p><a href="http://dl.dropbox.com/u/7198669/trunk-r31152.diff">http://dl.dropbox.com/u/7198669/trunk-r31152.diff</a></p></blockquote></div><p>it seems .slots 17,18,19 appeared here by pure error (not sure if they&#039;ll interfere with anything) and present only at ar71xx series.<br />actually default initialization for ar724x contains the same irq_map as we are using for rb751, so possibly we don&#039;t need custom irq map at all.<br />whatever, it works, and this is cool <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>I thougth exactly the same but wasn&#039;t sure either - last patch from ayufan clears everything up.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162717">
				<div class="post-metadata">
					<div class="post-num">Post #44</div>
					<div class="post-author">chillifire</div>
					<div class="post-datetime">
						31 Mar 2012, 12:48					</div>
				</div>
				<div class="post-content content">
					<p>I have logged the patches with OpenWrt devel for inclusion in trunk. Thanks everyone, but kudos above all to aryufan.</p><p>One small fly in the ointment is the LED for the wireless. That is not yet working, even though the wlan performs great. Suggestions anyone?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162720">
				<div class="post-metadata">
					<div class="post-num">Post #45</div>
					<div class="post-author">ayufan</div>
					<div class="post-datetime">
						31 Mar 2012, 13:10					</div>
				</div>
				<div class="post-content content">
					<p>Will make it work later.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162785">
				<div class="post-metadata">
					<div class="post-num">Post #46</div>
					<div class="post-author">chillifire</div>
					<div class="post-datetime">
						1 Apr 2012, 01:03					</div>
				</div>
				<div class="post-content content">
					<p>Sorry, and two more things. </p><p>1) I cannot seem to get the box to accept more than 22dBm wireless output, when it should be able to deliver 30dBm. I could accept 27dBm as the regulatory limit for US is 27dBm, and OpenWrt enforces that. But 22dBm? Or is there a 5dBm power offset maybe? Thoughts anyone?</p><p>2) could someone run the command </p><div class="codebox"><pre><code> iwinfo wlan0 info</code></pre></div><p>on their RB751U-2HnD box and post their output here? Thanks</p>											<p class="post-edited">(Last edited by <strong>chillifire</strong> on 1 Apr 2012, 01:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162797">
				<div class="post-metadata">
					<div class="post-num">Post #47</div>
					<div class="post-author">Whitelighter</div>
					<div class="post-datetime">
						1 Apr 2012, 03:12					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve been watching this development with interest. I have been searching for another router to run OpenWrt on that has a decent spec and doesn&#039;t cost a fortune. The RB751 series routers appear to be ideal! So I&#039;d like to say a big thank you to those of you involved in getting these routers working on OpenWrt, especially ayufan!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162798">
				<div class="post-metadata">
					<div class="post-num">Post #48</div>
					<div class="post-author">Whitelighter</div>
					<div class="post-datetime">
						1 Apr 2012, 03:45					</div>
				</div>
				<div class="post-content content">
					<p>@chillifire</p><p>From my RB751U-2HnD</p><div class="codebox"><pre><code>iwinfo wlan0 info

wlan0     ESSID: &quot;OpenWrt&quot;
          Access Point: 00:0C:42:xx:xx:xx
          Mode: Master  Channel: 11 (2.462 GHz)
          Tx-Power: 20 dBm  Link Quality: 0/70
          Signal: unknown  Noise: -85 dBm
          Bit Rate: unknown
          Encryption: none
          Type: nl80211  HW Mode(s): 802.11bgn
          Hardware: 168C:002A 168C:A093 [Generic MAC80211]
          TX power offset: unknown
          Frequency offset: unknown
          Supports VAPs: yes</code></pre></div><p>On quick experimentation (it&#039;s getting late here), mine seems to max out at 20 dBm. I cannot force it any higher even though the tx power list would suggest it should be possible.</p><div class="codebox"><pre><code>iwinfo wlan0 txpowerlist
...
  19 dBm (  79 mW)
* 20 dBm ( 100 mW)
  21 dBm ( 125 mW)
  22 dBm ( 158 mW)
  23 dBm ( 199 mW)
  24 dBm ( 251 mW)
  25 dBm ( 316 mW)
  26 dBm ( 398 mW)
  27 dBm ( 501 mW)</code></pre></div><div class="codebox"><pre><code>iwinfo wlan0 countrylist
...
    UM  UM
*   US  US
    UY  UY
...</code></pre></div><p>Interestingly when I set the correct country code (GB) txpowerlist only allows upto 20 dBm</p><div class="codebox"><pre><code>iwinfo wlan0 txpowerlist
...
  17 dBm (  50 mW)
  18 dBm (  63 mW)
  19 dBm (  79 mW)
* 20 dBm ( 100 mW)</code></pre></div><p>Seems to be a bit of a coincidence that it is limiting the output to the correct countries tx power output.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162996">
				<div class="post-metadata">
					<div class="post-num">Post #49</div>
					<div class="post-author">vdias</div>
					<div class="post-datetime">
						2 Apr 2012, 12:54					</div>
				</div>
				<div class="post-content content">
					<p>What is the actual state? Is it working?</p><p>Can we return to routeros after using openwrt on it?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p163003">
				<div class="post-metadata">
					<div class="post-num">Post #50</div>
					<div class="post-author">brainsucker</div>
					<div class="post-datetime">
						2 Apr 2012, 13:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>vdias wrote:</cite><blockquote><p>What is the actual state? Is it working?</p></blockquote></div><p>almost perfectly for me (I&#039;m not considering missing wlan led as a problem <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />.</p><div class="quotebox"><cite>vdias wrote:</cite><blockquote><p>Can we return to routeros after using openwrt on it?</p></blockquote></div><p>Yep, I just did it a few days ago, when mikrotik released a new RouterOS 5.15rc1 with support for my LTE usb stick.<br />You just need to run any netinstall program (available from mikrotik site), set it up (much easier than tftpd32), enter net boot mode in bootloader, and feed any firmware to it. License was in place and everything worked straightaway.</p><p>Still returned to OpenWRT, to have some more fun with it (playing with ideas on limiting skype bandwidth usage).</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 2 of 5</div><nav><ul><li><a href="viewtopic.php%3Fid=32320&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=32320&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=32320&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=32320&amp;p=5.html">5</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>