<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> How To do BONDING several wan interfaces in ONE interface ?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p302934">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">inquba</div>
					<div class="post-datetime">
						8 Dec 2015, 21:41					</div>
				</div>
				<div class="post-content content">
					<p>HI&nbsp; I want to do BONDING 3 wans interface in ONE interface to ADD bandwidth of these 3</p><p>I install the following packages kmod-bonding, mii-tool and ifenslave&nbsp; I am USING openwrt AA 12.09 final.</p><p>so I follow this instrucctions <a href="https://forum.openwrt.org/viewtopic.php?id=34342">https://forum.openwrt.org/viewtopic.php?id=34342</a></p><p>it is said that I should have kmod-ipv6 installed BUT only if were created in the firmware package&nbsp; if not then its not necesary and with only these 3 packages kmod-bonding, mii-tool and ifenslave&nbsp; would be enough.</p><p>so I install and then did the follow</p><p>create vlan for my other 2 wan interfaces that are: eth0.200 and eth0.300 plus the wan interface that is eth1</p><p>then create a interface called bond0&nbsp; with ipadd 192.168.6.10 netmas 255.255.255.0 and broadcast 192.168.6.255 and link to bond0 in physical interfaces</p><p>I then do this command to set mode=3 and miimon=100 <br /></p><div class="codebox"><pre><code>#insmod /lib/modules/3.3.8/bonding.ko mode=3 miimon=100 </code></pre></div><p>and then<br /></p><div class="codebox"><pre><code> #ifenslave bond0 eth1 #ifenslave bond0 eth0.200 #ifenslave bond0 eth0.300 </code></pre></div><p>by the way.. when I did ifenslave the wans interfaces lose their own wan ip assigned from ISP&nbsp; &nbsp;why ?</p><p>since I want that bond0 behave as one wan but with 3 wans inside..... should I remove wan eth1 from firewall zone and only add bond0 to firewall zone ?&nbsp; this because bond0 would have all 3 wans</p><p>here i am stuck since no internet yet from bond0</p><p>any comment and help ?</p>											<p class="post-edited">(Last edited by <strong>inquba</strong> on 8 Dec 2015, 21:46)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p302967">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">makarel</div>
					<div class="post-datetime">
						9 Dec 2015, 01:01					</div>
				</div>
				<div class="post-content content">
					<p>hi</p><p>where did you got 3 isp providers lol<br />try mwan3 <a href="http://wiki.openwrt.org/doc/howto/mwan3">http://wiki.openwrt.org/doc/howto/mwan3</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p302981">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">inquba</div>
					<div class="post-datetime">
						9 Dec 2015, 02:23					</div>
				</div>
				<div class="post-content content">
					<p>I have already mwan3 in production, I am testing different solutions <br />I have used multiwan either. I have test hnet with Babeld too<br />I want to to test with bonding that&#039;s because I asked.</p><p>Hope you dont have problem with that since you appear to be sarcastic</p>											<p class="post-edited">(Last edited by <strong>inquba</strong> on 9 Dec 2015, 02:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p302983">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">makarel</div>
					<div class="post-datetime">
						9 Dec 2015, 02:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>inquba wrote:</cite><blockquote><p>..<br />Hope you dont have problem with that since you appear to be sarcastic</p></blockquote></div><p>my bad.. late night.. my queue for bed<br />gl with your config</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p302997">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">yapoo</div>
					<div class="post-datetime">
						9 Dec 2015, 06:28					</div>
				</div>
				<div class="post-content content">
					<p>Hi.<br />In my case, I use bonding on CC.<br />Ifenslave is replaced with Ip utility in package iproute2.<br />Moreover you can set/change parameters from sysfs. It&#039;s awfully useful.</p><p>You should read this document.<br /><a href="https://www.kernel.org/doc/Documentation/networking/bonding.txt">https://www.kernel.org/doc/Documentatio … onding.txt</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p303012">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">makarel</div>
					<div class="post-datetime">
						9 Dec 2015, 10:35					</div>
				</div>
				<div class="post-content content">
					<p>regarding bondig tuts.. not much just basic config<br /><a href="http://dokuwiki.knallimall.org/openwrt_bonding">http://dokuwiki.knallimall.org/openwrt_bonding</a><br /><a href="https://wiki.opennet-initiative.de/wiki/Link_Aggregation">https://wiki.opennet-initiative.de/wiki … ggregation</a><br /><a href="https://forum.openwrt.org/viewtopic.php?id=34600">https://forum.openwrt.org/viewtopic.php?id=34600</a></p>											<p class="post-edited">(Last edited by <strong>makarel</strong> on 9 Dec 2015, 10:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p303198">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">inquba</div>
					<div class="post-datetime">
						10 Dec 2015, 19:08					</div>
				</div>
				<div class="post-content content">
					<p>thanks YAPOO very nice information</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p303258">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">wazaa</div>
					<div class="post-datetime">
						11 Dec 2015, 03:31					</div>
				</div>
				<div class="post-content content">
					<p>Hello Yapoo, in my area ADSL is very slow and there is no FTTH so I took 4x 4G dongles (with 20Gb/month dataplan each) for our small company. I load balance them with mwan3 (some computers use 4G dongle #1, others use 4G dongle #2, etc...) but I&#039;d like to try bonding. Could you briefly explain how you managed to get bonding work on OpenWRT CC? Thanks for any help!</p>											<p class="post-edited">(Last edited by <strong>wazaa</strong> on 11 Dec 2015, 03:31)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p303690">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">inquba</div>
					<div class="post-datetime">
						15 Dec 2015, 02:53					</div>
				</div>
				<div class="post-content content">
					<p>HI yapoo&nbsp; it seems that iproute2 now is renemed to IP only,&nbsp; <br />for sysfs i install libsysfs and sysfsutils&nbsp; it right ?</p><p>and las could you bried describre how you use it IP (iproute2 ) to enslave NIC interfaces ? and how you use sysfs ?<br />when you achieve bond0 ? do you put in a firewall zone ?&nbsp; example I want to enslave my wan1 wan2 and wan3 interfaces, should I put bond0 in wan zone firewall ?<br />hope you can help us</p><p>thanks a lot</p><p>P.D. in linux distro seems easy.... <a href="https://www.youtube.com/watch?v=-Z8x2v5S58Q">https://www.youtube.com/watch?v=-Z8x2v5S58Q</a></p>											<p class="post-edited">(Last edited by <strong>inquba</strong> on 15 Dec 2015, 03:34)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>