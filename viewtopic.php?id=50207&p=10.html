<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Openwrt support for Huawei HG655b</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 12 Mar 2018 and 5 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 10 of 18</div><nav><ul><li><a href="viewtopic.php%3Fid=50207&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=50207&amp;p=8.html">8</a></li><li><a href="viewtopic.php%3Fid=50207&amp;p=9.html">9</a></li><li class="pagination-current"><span>10</span></li><li><a href="viewtopic.php%3Fid=50207&amp;p=11.html">11</a></li><li><a href="viewtopic.php%3Fid=50207&amp;p=12.html">12</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=50207&amp;p=18.html">18</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p265981">
				<div class="post-metadata">
					<div class="post-num">Post #226</div>
					<div class="post-author">vurulkan</div>
					<div class="post-datetime">
						18 Feb 2015, 02:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>danitool wrote:</cite><blockquote><p>This time I repacked the dutch firmware I mentioned with CFE included<br /><a href="https://drive.google.com/uc?export=download&amp;id=0B-EMoBe-_OdBVlF5anBWR0JYOGM">HG655dV100R001C02B050_upgrade_main-CFE.bin</a><br />It&#039;s exactly the same firmware but with CFE properly inserted. Hoping the tail doesn&#039;t contain any data related with CFE.</p><p>Give it a try. Regards</p></blockquote></div><p>gives, &quot;File Format error&quot;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266190">
				<div class="post-metadata">
					<div class="post-num">Post #227</div>
					<div class="post-author">vurulkan</div>
					<div class="post-datetime">
						20 Feb 2015, 00:18					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I bought fake Altera Usb Blaster. Pinout: <a href="http://www.digital-circuitry.com/IMAGES/webpage/MyLAB/Altera_USB-Blaster_JTAG_pinout.jpg">http://www.digital-circuitry.com/IMAGES … pinout.jpg</a></p><p>And hg655d pinout : <a href="http://oi57.tinypic.com/28wovb8.jpg">http://oi57.tinypic.com/28wovb8.jpg</a></p><p>which pin, which pin belongs to?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266196">
				<div class="post-metadata">
					<div class="post-num">Post #228</div>
					<div class="post-author">danitool</div>
					<div class="post-datetime">
						20 Feb 2015, 00:43					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://s2.postimg.org/5339kf4eh/drawing.jpg">http://s2.postimg.org/5339kf4eh/drawing.jpg</a></p><p>nTRST sometimes is needed, others it doesn&#039;t, first probe without nTRST connected. If it doesn&#039;t work then connect nTRST</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266200">
				<div class="post-metadata">
					<div class="post-num">Post #229</div>
					<div class="post-author">nederfox</div>
					<div class="post-datetime">
						20 Feb 2015, 01:28					</div>
				</div>
				<div class="post-content content">
					<p>OK I soldered the Jtag.&nbsp; Right now it&#039;s saving whole flash using<br /></p><div class="codebox"><pre><code>zjtag -backup:custom /window:18000000 /start:18000000 /length:800000</code></pre></div><p>which is quite tedious.</p><div class="quotebox"><blockquote><p>But if you decide to flash CFE using JTAG use this file<br />CFE_HG655b-OEM_nvr.bin<br />It&#039;s the bare CFE taken from the fratzicus backups, and known to work with OpenWrt.</p></blockquote></div><p>How can I determine the right window, start and lengte parameters for the only the CFE.&nbsp; Am i right to use <br /></p><div class="codebox"><pre><code>zjtag -backup:custom /window:18000000 /start:18000000 /length:20000</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266202">
				<div class="post-metadata">
					<div class="post-num">Post #230</div>
					<div class="post-author">danitool</div>
					<div class="post-datetime">
						20 Feb 2015, 01:48					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nederfox wrote:</cite><blockquote><p>How can I determine the right window, start and lengte parameters for the only the CFE.&nbsp; Am i right to use <br /></p><div class="codebox"><pre><code>zjtag -backup:custom /window:18000000 /start:18000000 /length:20000</code></pre></div></blockquote></div><p>right</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266203">
				<div class="post-metadata">
					<div class="post-num">Post #231</div>
					<div class="post-author">vurulkan</div>
					<div class="post-datetime">
						20 Feb 2015, 01:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>danitool wrote:</cite><blockquote><p><a href="http://s2.postimg.org/5339kf4eh/drawing.jpg">http://s2.postimg.org/5339kf4eh/drawing.jpg</a></p><p>nTRST sometimes is needed, others it doesn&#039;t, first probe without nTRST connected. If it doesn&#039;t work then connect nTRST</p></blockquote></div><p>Thanks danitool ! I will try.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266204">
				<div class="post-metadata">
					<div class="post-num">Post #232</div>
					<div class="post-author">nederfox</div>
					<div class="post-datetime">
						20 Feb 2015, 02:27					</div>
				</div>
				<div class="post-content content">
					<p>Flashing CFE_HG655b-OEM_nvr.bin using Jtag results in a working state. <br />Upgrading to OpenWRT within CFE is still not possible <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> Not clear why.</p><p>I tried erasing CFE flash space, and that resulted in a non working brick. <br />Reflashed CFE and it&#039;s alive again. So I can conclude my cable thingy works.</p><p>Now I try to flash whole OpenWRT binfile using Jtag<br /></p><div class="codebox"><pre><code>zjtag -flash:custom /window:18000000 /start:18000000 /length:800000</code></pre></div><p><strong>edit: don&#039;t do this,&nbsp; command doesn&#039;t work for firmware files</strong></p>											<p class="post-edited">(Last edited by <strong>nederfox</strong> on 20 Feb 2015, 11:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266205">
				<div class="post-metadata">
					<div class="post-num">Post #233</div>
					<div class="post-author">danitool</div>
					<div class="post-datetime">
						20 Feb 2015, 02:36					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nederfox wrote:</cite><blockquote><p>Flashing CFE_HG655b-OEM_nvr.bin using Jtag results in a working state. <br />Upgrading to OpenWRT within CFE is still not possible <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> Not clear why.</p><p>I tried erasing CFE flash space, and that resulted in a non working brick. <br />Reflashed CFE and it&#039;s alive again. So I can conclude my cable thingy works.</p><p>Now I try to flash whole OpenWRT binfile using Jtag<br /></p><div class="codebox"><pre><code>zjtag -flash:custom /window:18000000 /start:18000000 /length:800000</code></pre></div><p>Keep fingers crossed...</p></blockquote></div><p>Is the utility managing correctly the endianness?</p><p>zJTAG is aware of endiannes at least in v1.8, try using the flag /BE, when flashing. Check with the hex editor the backup, you should see some readable strings if the endianness is correct</p><p>Sometimes the previous loaded CFE decides to mess the jtag flashing. Erase CFE before flashing next CFE to avoid this problem.</p><p><strong>Edit</strong>: ok I thought the fratzicu&#039;s CFE didn&#039;t work. It works but still doesn&#039;t flash, this has no sense. BTW that CFE is limited, AFAIK it only allows flashing via web&nbsp; interface.</p>											<p class="post-edited">(Last edited by <strong>danitool</strong> on 20 Feb 2015, 02:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266206">
				<div class="post-metadata">
					<div class="post-num">Post #234</div>
					<div class="post-author">nederfox</div>
					<div class="post-datetime">
						20 Feb 2015, 02:49					</div>
				</div>
				<div class="post-content content">
					<p>Yup I erased before submitting the flash command. Using zjtag 1.5<br />At the beginning of my CFE dump I found something readable like </p><div class="codebox"><pre><code>192.168.1.1 h=192.168.1.100 g=r f=vmlinux i=bcm963xx_fs_kernel d=1 p=0</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266207">
				<div class="post-metadata">
					<div class="post-num">Post #235</div>
					<div class="post-author">danitool</div>
					<div class="post-datetime">
						20 Feb 2015, 02:57					</div>
				</div>
				<div class="post-content content">
					<p>Use the CFE web interface for flashing, this CFE still has some limitations. Use firefox, with a clean cache, it should work.</p><p>Another possiblity is, the problem is at the end of the flash... so erase the end, but not the cal_data.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266210">
				<div class="post-metadata">
					<div class="post-num">Post #236</div>
					<div class="post-author">vurulkan</div>
					<div class="post-datetime">
						20 Feb 2015, 04:05					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>danitool wrote:</cite><blockquote><p><a href="http://s2.postimg.org/5339kf4eh/drawing.jpg">http://s2.postimg.org/5339kf4eh/drawing.jpg</a></p><p>nTRST sometimes is needed, others it doesn&#039;t, first probe without nTRST connected. If it doesn&#039;t work then connect nTRST</p></blockquote></div><p>I have some problems nTRST is connected and not connected.</p><p><span class="postimg"><img src="http://i59.tinypic.com/2m2fcy9.png" alt="http://i59.tinypic.com/2m2fcy9.png" /></span></p><p>but quartus shows device :</p><p><span class="postimg"><img src="http://i57.tinypic.com/2zrno06.jpg" alt="http://i57.tinypic.com/2zrno06.jpg" /></span></p>											<p class="post-edited">(Last edited by <strong>vurulkan</strong> on 20 Feb 2015, 13:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266242">
				<div class="post-metadata">
					<div class="post-num">Post #237</div>
					<div class="post-author">nederfox</div>
					<div class="post-datetime">
						20 Feb 2015, 11:22					</div>
				</div>
				<div class="post-content content">
					<p>To get rid of crap, I erased all flash using Jtag. This resulted in a temporary brick.<br />After that, I flashed again your&nbsp; CFE_HG655b-OEM_nvr.bin file. And...guess now...the transplant CFE is working!<br />Edit: Yes I flashed using CFE web interface</p><p>I can boot OpenWRT BB now. Unfortunately Wifi is yet not functioning. </p><p>Reflashing stock FW results in working Wifi. Any ideas? Missing cal_data?</p>											<p class="post-edited">(Last edited by <strong>nederfox</strong> on 20 Feb 2015, 11:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266243">
				<div class="post-metadata">
					<div class="post-num">Post #238</div>
					<div class="post-author">danitool</div>
					<div class="post-datetime">
						20 Feb 2015, 11:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nederfox wrote:</cite><blockquote><p>To get rid of crap, I erased all flash using Jtag. This resulted in a temporary brick.<br />After that, I flashed again your&nbsp; CFE_HG655b-OEM_nvr.bin file. And...guess now...the transplant CFE is working!<br />Edit: Yes I flashed using CFE web interface</p><p>I can boot OpenWRT BB now. Unfortunately Wifi is yet not functioning. </p><p>Reflashing stock FW results in working Wifi. Any ideas? Missing cal_data?</p></blockquote></div><p>Yes, you destroyed your cal_data partition. For restoring</p><p>- Generete a bin file with the cal_data. At your computer execute </p><div class="codebox"><pre><code>echo &#039;6230010072D15E0DAD6C623014180180000062301418000001006AFF0C00FFFFFFFFFFFFB092FFFFFFFFFFFFFFFFFFFFFFFFFFFF22082400FFFF1601FFFFD9FACC88FFFF0DFF0000030000000000FFFFFFFF0E0F0F0F10101010100F0F0F0F0F0C0C0C0C0C0C0C0C0C0B0B0B0B0BFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF555588887777666666666666666666666666FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF068693&#039; | xxd -r -p &gt; eeprom.bin</code></pre></div><p> - Now transfer the **eeprom.bin** file into your router and flash the **cal_data** partition</p><div class="codebox"><pre><code>mtd write eeprom.bin cal_data</code></pre></div><p> - **Restart** Openwrt and check if wifi works.</p><p>BTW, you should use your original cal data partition. Can you post your backup, I only want to check if the cal data lives in the same offset. Or do it yourself, just check if the you have similar bytes at offset 0x7C0000. You can cut these data from your backup (512 bytes length), and flash it either via JTAG or else in OpenWrt with mtd command.</p>											<p class="post-edited">(Last edited by <strong>danitool</strong> on 20 Feb 2015, 11:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266247">
				<div class="post-metadata">
					<div class="post-num">Post #239</div>
					<div class="post-author">nederfox</div>
					<div class="post-datetime">
						20 Feb 2015, 12:22					</div>
				</div>
				<div class="post-content content">
					<p><strong>Danitool</strong> Great! You are absolutely right cal-data was destroyed. I found back the cal-data at 7c0000 in my full flash backup.<br />I took data from 7c0000&nbsp; to 7c01f0 (last line reads FF 06 86 93). </p><p>In OpenWRT:<br /></p><div class="codebox"><pre><code>cat /dev/mtd4|hexdump</code></pre></div><p>is now starting with <br /></p><div class="codebox"><pre><code>6230 0100 ....</code></pre></div><p>Ans the last 2 lines read:<br /></p><div class="codebox"><pre><code>FFFF FFFF ... FF06 8693
FFFF FFFF ... FFFF FFFF</code></pre></div><p> </p><p>Wifi is still not working.&nbsp; <br />Shoud I cut the last this line, as shown in your example?</p><p>I&#039;l try your latest BB build. Maybe I&#039;m using the previous one without wifi support <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p><strong>Edit</strong> Hint; it seems like <br /></p><div class="codebox"><pre><code> ieee80211 phy0: Selected rate control algorithm ...</code></pre></div><p>is missing from dmesg.</p><p><strong>Edit2: Wifi is working now! using latest build w/ Wifi support</strong></p>											<p class="post-edited">(Last edited by <strong>nederfox</strong> on 20 Feb 2015, 13:13)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266285">
				<div class="post-metadata">
					<div class="post-num">Post #240</div>
					<div class="post-author">danitool</div>
					<div class="post-datetime">
						20 Feb 2015, 16:52					</div>
				</div>
				<div class="post-content content">
					<p>Nice to read it finally worked <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />.</p><p>I&#039;ve built a custom CFE for this router. It might be more friendly for firmware flashing. </p><p><a href="https://drive.google.com/uc?export=download&amp;id=0B-EMoBe-_OdBc0VhSFJVN0N6Y1k">CFE_HG655b-CUSTOM.bin</a></p><p>After flashing you need to set the board ID to <strong>HW65x</strong>, since it has no config in the nvram. Let me know if this bootloader works.</p><br /><p><strong>vurulkan</strong>: no idea about your problem, I never used an altera usb blaster jtag cable. Not sure if supported by zjtag/brjtag. But supported for sure by UrJTAG under linux. You can test if all is connected OK with UrJTAG. The wiki shows an example of working with UrJTAG and the USBLASTER adapter <a href="http://wiki.openwrt.org/toh/huawei/hg655d#urjtag">http://wiki.openwrt.org/toh/huawei/hg655d#urjtag</a><br />just replace the first line by<br /></p><div class="codebox"><pre><code>cable usbblaster</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266286">
				<div class="post-metadata">
					<div class="post-num">Post #241</div>
					<div class="post-author">nederfox</div>
					<div class="post-datetime">
						20 Feb 2015, 16:53					</div>
				</div>
				<div class="post-content content">
					<p><strong>Thanks Danitool !</strong> At least some Huawei 655D modems from Dutch ISP Online contain a heavily restricted CFE bootloader, which won&#039;t let you flash OpenWRT. I wanted to convert this thingy to a wireless access point which didn&#039;t work properly in OEM FW.</p><p>For reference to anybody who wants to flash OpenWRT:</p><p>Make a simple LPT Jtag cable: <a href="http://wiki.openwrt.org/doc/hardware/port.jtag.cable.unbuffered">scheme</a> and connect (solder) it to TDO, TDI, TMS, TCK and GND which are on the PCB. Find the Jtag header at J5. <a href="http://wiki.openwrt.org/_detail/media/toh/huawei/hg655b-board1.jpg?id=toh%3Ahuawei%3Ahg655d">Photo</a> showing those 5 little dots 1cm left to the text HG655... Use zjtag 1.5 mentioned in <a href="http://forums.modem-help.co.uk/viewtopic.php?t=11413&amp;postdays=0&amp;postorder=asc&amp;start=15">this</a> forum and get zjtag <a href="https://www.dropbox.com/s/jr02f7dy4dkzmd0/zjtag.tar.gz">here</a>. Get <a href="https://drive.google.com/uc?export=download&amp;id=0B-EMoBe-_OdBT2syend2SDh5NXM">CFE_HG655b-OEM_nvr.bin</a> mentioned <a href="https://forum.openwrt.org/viewtopic.php?id=50207&amp;p=9">here</a>. Important: make backup of existing cfe. This generates a CUSTOM.BIN.SAVED... file:<br /></p><div class="codebox"><pre><code>zjtag -backup:custom /window:18000000 /start:18000000 /length:20000</code></pre></div><p>For safety, you could make a backup of whole flash: (took me about an hour which is quite a long time)<br /></p><div class="codebox"><pre><code>zjtag -backup:custom /window:18000000 /start:18000000 /length:800000</code></pre></div><p>Erase cfe flash. Do not erase whole flash, or you lose your wifi calibration data.<br /></p><div class="codebox"><pre><code>zjtag -erase:custom /window:18000000 /start:18000000 /length:20000</code></pre></div><p>Rename CFE_HG655b-OEM_nvr.bin to CUSTOM.BIN and Write to flash:<br /></p><div class="codebox"><pre><code>zjtag -flash:custom /window:18000000 /start:18000000 /length:20000</code></pre></div><p>Flashing OpenWRT:<br />Power off the modem. Hold RESET down and power on. Keep holding RESET down until Power led turns off. Give your PC a fixed IP address, e.g. 192.168.1.10 netmask 255.255.255.0 and surf to 192.168.1.1. You should get the CFE web interface asking for new firmware. <a href="https://drive.google.com/uc?export=download&amp;id=0B-EMoBe-_OdBX21TYnRGNTI1SzA">This</a> image worked for me. Mentioned <a href="https://forum.openwrt.org/viewtopic.php?id=50207&amp;p=7">here</a>. Adjust network interface MAC address to the to MAC you can find on the cabinet via Luci: Network, Interfaces, Edit, Advanced settings, Override MAC address. To turn LAN1 port into WAN port: see post <a href="https://forum.openwrt.org/viewtopic.php?id=50207&amp;p=9">204</a>.</p><p><strong>Edit:</strong> Thanks Danitool and small typo</p>											<p class="post-edited">(Last edited by <strong>nederfox</strong> on 20 Feb 2015, 17:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266304">
				<div class="post-metadata">
					<div class="post-num">Post #242</div>
					<div class="post-author">andoru</div>
					<div class="post-datetime">
						20 Feb 2015, 19:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>cornelus2009 wrote:</cite><blockquote><p>Solved with a infrared reflow on wifi chip, now wifi is ok.</p></blockquote></div><p>Where does one do that? Also how does &quot;infrared reflow&quot; translate into romanian? <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266408">
				<div class="post-metadata">
					<div class="post-num">Post #243</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						21 Feb 2015, 19:48					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />It&#039;s nice to see you guys are still working on this device. What usb jtag cable and software do you reccommend for the flashing? I didn&#039;t do this until now, but I would like to learn how to do it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266409">
				<div class="post-metadata">
					<div class="post-num">Post #244</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						21 Feb 2015, 19:50					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nederfox wrote:</cite><blockquote><p><strong>Danitool</strong> Great! You are absolutely right cal-data was destroyed. I found back the cal-data at 7c0000 in my full flash backup.<br />I took data from 7c0000&nbsp; to 7c01f0 (last line reads FF 06 86 93). </p><p>In OpenWRT:<br /></p><div class="codebox"><pre><code>cat /dev/mtd4|hexdump</code></pre></div><p>is now starting with <br /></p><div class="codebox"><pre><code>6230 0100 ....</code></pre></div><p>Ans the last 2 lines read:<br /></p><div class="codebox"><pre><code>FFFF FFFF ... FF06 8693
FFFF FFFF ... FFFF FFFF</code></pre></div><p> </p><p>Wifi is still not working.&nbsp; <br />Shoud I cut the last this line, as shown in your example?</p><p>I&#039;l try your latest BB build. Maybe I&#039;m using the previous one without wifi support <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p><strong>Edit</strong> Hint; it seems like <br /></p><div class="codebox"><pre><code> ieee80211 phy0: Selected rate control algorithm ...</code></pre></div><p>is missing from dmesg.</p><p><strong>Edit2: Wifi is working now! using latest build w/ Wifi support</strong></p></blockquote></div><br /><p>Hi, what do you mean by the last words labeled as &quot;edit2&quot;; what does it mean w/ Wifi support? what packages did you select?<br />Regards</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266410">
				<div class="post-metadata">
					<div class="post-num">Post #245</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						21 Feb 2015, 19:54					</div>
				</div>
				<div class="post-content content">
					<p>In my device that works I have the following lines:<br /></p><div class="codebox"><pre><code>[   11.596000] ieee80211 phy0: rt2x00lib_request_eeprom_file: Info - Loading EEPROM data from &#039;rt2x00.eeprom&#039;.
[   11.604000] ieee80211 phy0: rt2x00_set_rt: Info - RT chipset 3572, rev 0223 detected
[   11.612000] ieee80211 phy0: rt2x00_set_rf: Info - RF chipset 0008 detected
[   11.624000] ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;
....
[   22.668000] ieee80211 phy0: rt2x00lib_request_firmware: Info - Loading firmware file &#039;rt2860.bin&#039;
[   22.896000] ieee80211 phy0: rt2x00lib_request_firmware: Info - Firmware detected - version: 0.34</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266412">
				<div class="post-metadata">
					<div class="post-num">Post #246</div>
					<div class="post-author">danitool</div>
					<div class="post-datetime">
						21 Feb 2015, 20:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>fratzicu wrote:</cite><blockquote><p>Hi,<br />It&#039;s nice to see you guys are still working on this device. What usb jtag cable and software do you reccommend for the flashing? I didn&#039;t do this until now, but I would like to learn how to do it.</p></blockquote></div><p>If you have a parallel port, i recommend a <strong>WIGGLER buffered</strong> cable, a custom made clone, since the original is too expensive. You can also use an unbuffered cable, the typical DLC5 for hairydairymaid, but you are limited to lenghts less than 15 cm. These cables are totally compatible with any software.</p><p>If you don&#039;t have a parallel port, well, the <strong>Altera USB blaster</strong> clone is ok, but some utilities didn&#039;t add support for it. This cable is fantastic and cheap, you can even flash SPI memories. But as I said it lacks support in some popular debricking utilities.</p><p>It&#039;s also possible to use a raspberry pi, there is somewhere in internet a ported Tjtag to rpi. It might be also possible to use another router as a JTAG adapter, but I guess nobody made any attempt in this way.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266432">
				<div class="post-metadata">
					<div class="post-num">Post #247</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						21 Feb 2015, 22:32					</div>
				</div>
				<div class="post-content content">
					<p>Hi, Danitool,<br />I tried to compile a new image from your github branch. Somehow in my kernel log it doesn&#039;t seem to try to detect the wifi chip. I tried in make menuconfig with the target profile broadcom wifi (default) and also with ralink wifi. In my working device it says that enables a pci device: rt2800pci and loads eeprom data from rt2x00.eeprom. After that it detects RT chipset 3572 rev 0223 and RF chipset 0008. So what do I need to select in make menuconfig in kernel modules? Also, in your instructions you write &quot;make kernel_menuconfig&quot;. I didn&#039;t use that before. What entries are most important to be selected?<br />Kind regards.</p><p>Hmmm... I googled a little and I&#039;ll try with rt2x00-lib and debug output enabled and rt2800-pci... and rt61-pci... let&#039;s see...</p><p>Edit: of course... not working. I got in touch with a guy that repairs routers to check if the wifi chip is damaged</p>											<p class="post-edited">(Last edited by <strong>fratzicu</strong> on 22 Feb 2015, 01:09)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266434">
				<div class="post-metadata">
					<div class="post-num">Post #248</div>
					<div class="post-author">danitool</div>
					<div class="post-datetime">
						21 Feb 2015, 22:46					</div>
				</div>
				<div class="post-content content">
					<p>The ralink profile doesn&#039;t include the wifi chip of this router. You need to select manually kmod-rt2800-pci kernel module in the <em>menuconfig</em>, it&#039;s located under the kernel modules submenu, and wireless submenu.</p><p>You don&#039;t need to do anything in the <em>kernel_menuconfig</em>, you can customize your kernel by disabling some stuff, or enabling some features for your requerimentes, or do nothing, just exit.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266442">
				<div class="post-metadata">
					<div class="post-num">Post #249</div>
					<div class="post-author">andoru</div>
					<div class="post-datetime">
						21 Feb 2015, 22:56					</div>
				</div>
				<div class="post-content content">
					<p>Is there a reason why I&#039;m missing packages from the software repo? I can&#039;t install lighttpd due to unsolvable dependencies.</p><p>EDIT: forgot to mention that I&#039;m using the firmware <a href="https://forum.openwrt.org/viewtopic.php?pid=262687#p262687">posted by danitool here</a>.</p>											<p class="post-edited">(Last edited by <strong>andoru</strong> on 22 Feb 2015, 01:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266459">
				<div class="post-metadata">
					<div class="post-num">Post #250</div>
					<div class="post-author">nederfox</div>
					<div class="post-datetime">
						22 Feb 2015, 01:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>Hi what do you mean by the last words labeled as &quot;edit2&quot;; what does it mean w/ Wifi support? what packages did you select?<br />Regards</p></blockquote></div><p>Hi fratzicu, Wifi was probably not working because I used an outdated OpenWRT build. After flashing <a href="https://drive.google.com/uc?export=download&amp;id=0B-EMoBe-_OdBX21TYnRGNTI1SzA">this</a> version, wifi works. And I&#039;m a happy user of a cloned CFE from your device <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 10 of 18</div><nav><ul><li><a href="viewtopic.php%3Fid=50207&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=50207&amp;p=8.html">8</a></li><li><a href="viewtopic.php%3Fid=50207&amp;p=9.html">9</a></li><li class="pagination-current"><span>10</span></li><li><a href="viewtopic.php%3Fid=50207&amp;p=11.html">11</a></li><li><a href="viewtopic.php%3Fid=50207&amp;p=12.html">12</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=50207&amp;p=18.html">18</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>