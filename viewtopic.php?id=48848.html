<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> D-Link DSL-2740B E1</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 2 Sep 2014.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p224821">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Reaper36</div>
					<div class="post-datetime">
						8 Feb 2014, 12:54					</div>
				</div>
				<div class="post-content content">
					<p>Hello guys,<br/>I had a look at the <a href="http://wiki.openwrt.org/toh/d-link/dsl-2740b">wiki</a> and there is no support for the &quot;D-Link DSL-2740B revision E1&quot;.<br/>The only difference I could find to revision C2/3 is the Realtek Switch RTL8306.<br/>There seems to be a driver for the generic openwrt version for the RTL8306.</p><p>What is missing to build a working firmware for this device?<br/>Can I help somehow to get openwrt working for the revision E1?</p>											<p class="post-edited">(Last edited by <strong>Reaper36</strong> on 9 Feb 2014, 21:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224825">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jonttuv</div>
					<div class="post-datetime">
						8 Feb 2014, 13:38					</div>
				</div>
				<div class="post-content content">
					<p>Interested too. Have a DSL-2740B rev.E1 gathering dust in the corner, because with the original firmware i experienced drops in all kinds of connections. Could it be possible to use C2/C3 build from <a href="http://downloads.openwrt.org/snapshots/trunk/brcm63xx/openwrt-DSL274XB-C2-squashfs-cfe.bin">http://downloads.openwrt.org/snapshots/trunk/brcm63xx/openwrt-DSL274XB-C2-squashfs-cfe.bin</a> and modify it to be compatible to rev. E1? Or use everything else from that build and compile a new build with equivalent driver/code to rev. E1.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224908">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">jonttuv</div>
					<div class="post-datetime">
						9 Feb 2014, 16:09					</div>
				</div>
				<div class="post-content content">
					<p>Got it to flash my generated image but no possibility to connect in any way. Didn&#039;t remember to upload ethernet switch (RTL8306) driver file. Wrong drivers?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224923">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">jonttuv</div>
					<div class="post-datetime">
						9 Feb 2014, 19:00					</div>
				</div>
				<div class="post-content content">
					<p>Built a image from scratch, using trunk. Device boots and can be pinged, this means that it is working basically, but i have to add Dropbear.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224935">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Reaper36</div>
					<div class="post-datetime">
						9 Feb 2014, 20:07					</div>
				</div>
				<div class="post-content content">
					<p>Sweet,<br/>my biggest fear was that without the proper switch driver the device would not be reachable at all after flashing openwrt.<br/>What settings did you use to get the switch working? When I select the broadcom 63xx as target with menuconfig I cant find any option for the RTL8306 switch. Or is it already covered with the basic switch driver?</p><p>Also how did you manage to reflash the device after you lost contact?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224970">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">jonttuv</div>
					<div class="post-datetime">
						10 Feb 2014, 07:49					</div>
				</div>
				<div class="post-content content">
					<p>As you may already know, our device has CFE bootloader. This means even if we flash it with wrong image, the bootloader won&#039;t go anywhere. After i flashed the wrong firmware, i managed to get access thru cfe. Access cfe with this. Switch off the device, hold reset on back of the device, switch on, hold the reset button until power and probably internet light turn to red. Then connect to router with ethernet cable, set ip to 192.168.1.2 and gateway and dns to 192.168.1.1. Go with browser to 192.168.1.1. There you have it. You can flash practically everything from there. I will upload my configs here, so you can use them as a reference. It&#039;s quite easy to build to this device. Next weekend i am able to upload them. Sorry for the wait:(</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225032">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Reaper36</div>
					<div class="post-datetime">
						10 Feb 2014, 23:22					</div>
				</div>
				<div class="post-content content">
					<p>Now that I see that the device can be restored that easily I will try to build the firmware myself.<br/>If I manage to build a working configuration and firmware I will post it here.</p><p>Thanks for your help!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225322">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Reaper36</div>
					<div class="post-datetime">
						14 Feb 2014, 18:14					</div>
				</div>
				<div class="post-content content">
					<p>I tried a few builds this week but somehow I had not as much success as you did.<br/>No matter what I try the device does not respond after the firmware upload.<br/>I found in the kernel options the PHY driver for the RTL8306 and enabled it, but somehow it makes no difference.<br/>I tried to create a new device definition for the E1 revision, basically a clone of the C2/C3 revision.</p><p>I am really looking forward to your build settings, it seems I am missing something obvious since you said it was easy to build.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225446">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">jonttuv</div>
					<div class="post-datetime">
						16 Feb 2014, 10:28					</div>
				</div>
				<div class="post-content content">
					<p>Something happened this week. My DSL-2740B E1 doesn&#039;t work. I mean in the hardware way. I will try to fix it, i switched my computer from my laptop to my Desktop PC. Builds 4 times faster:) And that means my config got lost after i reformatted my laptop, and poof. Can&#039;t get it working anymore. I can&#039;t remember the config or anything. I feel myself quite stupid... Oh why, WHY didn&#039;t i make a backup!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225448">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">jonttuv</div>
					<div class="post-datetime">
						16 Feb 2014, 10:31					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m building at the moment. Found the flaw, my girlfriend had sweeped it with a wet towel, and some water had gone in the RJ-45 connectors. Works again! But not with openwrt ATM.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225450">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">jonttuv</div>
					<div class="post-datetime">
						16 Feb 2014, 10:50					</div>
				</div>
				<div class="post-content content">
					<p>What about you? Got it working?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225452">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">jonttuv</div>
					<div class="post-datetime">
						16 Feb 2014, 11:10					</div>
				</div>
				<div class="post-content content">
					<p>Crap. Compiling fails all the time. <a href="http://pastebin.com/07FNZGwF">http://pastebin.com/07FNZGwF</a> , make any sense? BTW, Virhe means error.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225470">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">Reaper36</div>
					<div class="post-datetime">
						16 Feb 2014, 15:28					</div>
				</div>
				<div class="post-content content">
					<p>I did not have enough time to try again,<br/>also I was thinking I will get on the weekend anyway a working configuration so there was no point for me to waste more time. Funny though that you girl friend is watering your router, I guess it is not going to grow any more. <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile"/></p><p>I think there is something wrong with your kernel configuration, anyhow after the warnings there is no further error message.<br/>This week I had also a strange issue because I rebooted the computer in the middle of a build by mistake.<br/>After continuing the build there were always strange error messages, after make clean/dirclean it started working again. </p><p>But be careful with the cleaning operations, distclean deletes lots of stuff! It is almost as if you start from scratch.<br/>Maybe also have a look at the description: <a href="http://wiki.openwrt.org/doc/howto/build">http://wiki.openwrt.org/doc/howto/build</a></p><p>The first images you did build, did you load them to the device with the original web interface or via the CFE restore mode?<br/>Because I only got them to be loaded via the CFE restore mode, the original web interface did not like my images.<br/>Maybe there is a bigger issue with my builded images than not working switch support.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225672">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">jonttuv</div>
					<div class="post-datetime">
						18 Feb 2014, 16:30					</div>
				</div>
				<div class="post-content content">
					<p>I used CFE restore mode. Probably the only way to install anything custom to this device. I will try make clean, if that works, i will install the build to the device and try to ping. If that works, i will upload any config file i find. <br/>Kinda lost with this device, for every other device my builds work?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p239494">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">Reaper36</div>
					<div class="post-datetime">
						6 Jul 2014, 21:16					</div>
				</div>
				<div class="post-content content">
					<p>Better late then never!<br/>After some anger towards a certain &quot;Fritz!-WLAN Repeater&quot; I continued to work on it and managed to get the darn thing to work mostly using the serial port to debug the boot.<br/>After flashing the image via CFE the device is responding on 192.168.1.1.</p><p>For some reason the wireless is not working yet.<br/>Also my device seems to jump back to the previous image I flashed after rebooting.<br/>It is very strange, because it is a image from yesterday that seems to &quot;stick&quot; in the flash.</p><p>I built the image from scratch using the trunk.<br/>All that needed to be done was to enable the driver for the ethernet-switch and to create a board profile.<br/>For the board profile I used basically the definition of revision C2/3 but I added the missing buttons and leds.</p><p>A patch to the changed settings, the changed profile file(It is not tracked with git 0o) and the latest image is all in this archive: <a href="https://www.dropbox.com/s/ievdrane3epujtb/OpenWRT_DSL-2740E1.zip">https://www.dropbox.com/s/ievdrane3epujtb/OpenWRT_DSL-2740E1.zip</a></p><p>And if somebody has any further clues to the problems I am happy for any suggestions.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>