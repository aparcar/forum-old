<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Multiple OpenVPN instances and firewall</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 23 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p96971">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">rony</div>
					<div class="post-datetime">
						6 Nov 2009, 13:51					</div>
				</div>
				<div class="post-content content">
					<p>I have a server on lan interface eth1 of openwrt router.&nbsp; I don&#039;t know access web on this server from laptop that connected to VPN on openwrt router.<br />Here is all my&nbsp; configs<br />laptop ifconfig</p><p>eth0&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:1d:72:d2:36:a2&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST MULTICAST&nbsp; MTU:1500&nbsp; Metric:1&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:0 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:0 (0.0 B)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Interrupt:16&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </p><p>eth0:1&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:1d:72:d2:36:a2&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.250.2&nbsp; Bcast:192.168.250.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST MULTICAST&nbsp; MTU:1500&nbsp; Metric:1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Interrupt:16&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </p><p>lo&nbsp; &nbsp; &nbsp; &nbsp; Link encap:Local Loopback<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:127.0.0.1&nbsp; Mask:255.0.0.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: ::1/128 Scope:Host<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP LOOPBACK RUNNING&nbsp; MTU:16436&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:24721 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:24721 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:2571818 (2.4 MiB)&nbsp; TX bytes:2571818 (2.4 MiB)</p><p>tun0&nbsp; &nbsp; &nbsp; Link encap:UNSPEC&nbsp; HWaddr 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:10.0.4.6&nbsp; P-t-P:10.0.4.5&nbsp; Mask:255.255.255.255<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP POINTOPOINT RUNNING NOARP MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:268 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:304 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:100<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:23152 (22.6 KiB)&nbsp; TX bytes:25488 (24.8 KiB)</p><p>wlan0&nbsp; &nbsp; &nbsp;Link encap:Ethernet&nbsp; HWaddr 00:21:5d:4c:82:3c<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.10.100&nbsp; Bcast:192.168.10.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::221:5dff:fe4c:823c/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:197699 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:215511 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:157616156 (150.3 MiB)&nbsp; TX bytes:42811054 (40.8 MiB)</p><p>wmaster0&nbsp; Link encap:UNSPEC&nbsp; HWaddr 00-21-5D-4C-82-3C-00-00-00-00-00-00-00-00-00-00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP RUNNING&nbsp; MTU:0&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:0 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:0 (0.0 B)<br />&lt;/code&gt;</p><p>Openwrt router ifconfig</p><p>eth0&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:D0:12:0F:E5:2A&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:195.168.11.4&nbsp; Bcast:195.168.11.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:2878 errors:0 dropped:0 overruns:0 frame:0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:1844 errors:0 dropped:0 overruns:0 carrier:0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:100&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:196485 (191.8 KiB)&nbsp; TX bytes:254617 (248.6 KiB)&nbsp; &nbsp; &nbsp; &nbsp; </p><p>eth0:1&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:D0:12:0F:E5:2A&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:195.168.11.9&nbsp; Bcast:195.168.11.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </p><p>eth1&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:D0:12:00:E6:2B<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.1.1&nbsp; Bcast:192.168.1.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:1 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:100<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:402 (402.0 B)</p><p>lo&nbsp; &nbsp; &nbsp; &nbsp; Link encap:Local Loopback<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:127.0.0.1&nbsp; Mask:255.0.0.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP LOOPBACK RUNNING&nbsp; MTU:16436&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:18 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:18 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:1230 (1.2 KiB)&nbsp; TX bytes:1230 (1.2 KiB)</p><p>tun0&nbsp; &nbsp; &nbsp; Link encap:UNSPEC&nbsp; HWaddr 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:10.0.8.1&nbsp; P-t-P:10.0.8.2&nbsp; Mask:255.255.255.255<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP POINTOPOINT RUNNING NOARP MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:0 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:100<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:0 (0.0 B)</p><p>tun2&nbsp; &nbsp; &nbsp; Link encap:UNSPEC&nbsp; HWaddr 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:10.0.4.1&nbsp; P-t-P:10.0.4.2&nbsp; Mask:255.255.255.255<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP POINTOPOINT RUNNING NOARP MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:166 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:195 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:100<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:13920 (13.5 KiB)&nbsp; TX bytes:16532 (16.1 KiB)</p><p>laptop openvpn conf</p><p>dev tun<br />port 1196<br />verb 5<br />comp-lzo<br />keepalive&nbsp; &nbsp; &nbsp; &nbsp;10&nbsp; &nbsp; &nbsp; 30<br />daemon<br />status&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /etc/openvpn/openvpn.status.client<br />log-append&nbsp; &nbsp; &nbsp; /etc/openvpn/openvpn.log.client<br />ca&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /etc/openvpn/ca.crt<br />cert&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /etc/openvpn/roadwarrior.crt<br />key&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/etc/openvpn/roadwarrior.key<br />persist-key<br />persist-tun<br />client<br />remote 195.168.11.4 1196<br />pull</p><p>Openwrt server.conf</p><p>proto udp<br />dev tun0<br />port 1194<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; verb 6<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; comp-lzo<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; keepalive&nbsp; &nbsp; &nbsp; &nbsp;10&nbsp; &nbsp; &nbsp; 30<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; daemon<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; status&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /etc/openvpn/openvpn.status<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; log-append&nbsp; &nbsp; &nbsp; /etc/openvpn/openvpn.log<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; local&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;195.168.11.4<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; server<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; server&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 10.0.8.0&nbsp; &nbsp; &nbsp; &nbsp; 255.255.252.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ca&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /etc/easy-rsa/keys/ca.crt<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cert&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /etc/easy-rsa/keys/gameserver-router-master-serverfarma.nethouse-intra.sk.crt<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; key&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/etc/easy-rsa/keys/gameserver-router-master-serverfarma.nethouse-intra.sk.key<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dh&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /root/game/dh1024.pem<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;dh&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/etc/easy-rsa/keys/dh1024.pem<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; persist-key<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; persist-tun<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; client-to-client<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; client-config-dir /etc/openvpn/ccd<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; route 10.0.8.0 255.255.252.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;push &quot;redirect-gateway&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; push &quot;route 192.168.1.0 255.255.255.0&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tls-server</p><p>Openwrt server2.conf</p><p>proto udp<br />dev tun2<br />port 1196<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; verb 6<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; comp-lzo<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; keepalive&nbsp; &nbsp; &nbsp; &nbsp;10&nbsp; &nbsp; &nbsp; 30<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; daemon<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; status&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /etc/openvpn/openvpn.status.server2<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; log-append&nbsp; &nbsp; &nbsp; /etc/openvpn/openvpn.log.server2<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; local&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;195.168.11.4<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; server<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; server&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 10.0.4.0&nbsp; &nbsp; &nbsp; &nbsp; 255.255.252.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ca&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /etc/easy-rsa/keys/ca.crt<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cert&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /etc/easy-rsa/keys/gameserver-router-master-serverfarma.nethouse-intra.sk.crt<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; key&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/etc/easy-rsa/keys/gameserver-router-master-serverfarma.nethouse-intra.sk.key<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dh&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /root/game/dh1024.pem<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;dh&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/etc/easy-rsa/keys/dh1024.pem<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; persist-key<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; persist-tun<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; client-to-client<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; client-config-dir /etc/openvpn/ccd<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; route 10.0.4.0 255.255.252.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;push &quot;redirect-gateway&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; push &quot;route 192.168.1.0 255.255.255.0&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tls-server<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; duplicate-cn</p><p>Openwrt client.conf<br />proto udp<br />dev tun1<br />port 1195<br />verb 0<br />comp-lzo<br />keepalive&nbsp; &nbsp; &nbsp; &nbsp;10&nbsp; &nbsp; &nbsp; 30<br />daemon<br />status&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /etc/openvpn/openvpn.status.gameserver-router-master-serverfarma.nethouse-intra.sk<br />log-append&nbsp; &nbsp; &nbsp; /etc/openvpn/openvpn.log.gameserver-router-master-serverfarma.nethouse-intra.sk<br />ca&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /etc/openvpn/ca.crt<br />cert&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /etc/openvpn/gameserver-router-master-serverfarma.nethouse-intra.sk.client.crt<br />key&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/etc/openvpn/gameserver-router-master-serverfarma.nethouse-intra.sk.client.key<br />persist-key<br />persist-tun<br />client<br />remote gameserver-router-slave-serverfarma 1195<br />pull</p><p>Openwrt network conf</p><p>config &#039;interface&#039; &#039;loopback&#039;<br />option &#039;ifname&#039; &#039;lo&#039;<br />option &#039;proto&#039; &#039;static&#039;<br />option &#039;ipaddr&#039; &#039;127.0.0.1&#039;<br />option &#039;netmask&#039; &#039;255.0.0.0&#039;</p><p>config &#039;interface&#039; &#039;lan&#039;<br />option &#039;ifname&#039; &#039;eth1&#039;<br />option &#039;proto&#039; &#039;static&#039;<br />option &#039;ipaddr&#039; &#039;192.168.1.1&#039;<br />option &#039;netmask&#039; &#039;255.255.255.0&#039;</p><p>config &#039;interface&#039; &#039;wan&#039;<br />option &#039;ifname&#039; &#039;eth0&#039;<br />option &#039;proto&#039; &#039;static&#039;<br />option &#039;ipaddr&#039; &#039;195.168.11.4&#039;<br />option &#039;netmask&#039; &#039;255.255.255.0&#039;<br />option &#039;gateway&#039; &#039;195.168.11.1&#039;<br />option &#039;dns&#039; &#039;213.215.116.99&#039;</p><p>config &#039;interface&#039; &#039;vpn&#039;<br />option &#039;ifname&#039; &#039;tun+&#039;<br />option &#039;proto&#039; &#039;none&#039;<br />option &#039;auto&#039; &#039;disable&#039;<br />option &#039;defaultroute&#039; &#039;0&#039;<br />option &#039;peerdns&#039; &#039;0&#039;</p><p>config &#039;alias&#039;<br />option &#039;interface&#039; &#039;wan&#039;<br />option &#039;proto&#039; &#039;static&#039;<br />option &#039;ipaddr&#039; &#039;195.168.11.9&#039;<br />option &#039;netmask&#039; &#039;255.255.255.0&#039;</p><p>Openwrt firewall conf</p><p>config defaults<br />&nbsp; &nbsp; &nbsp; &nbsp; option syn_flood&nbsp; &nbsp; &nbsp; &nbsp; 1<br />&nbsp; &nbsp; &nbsp; &nbsp; option input&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ACCEPT<br />&nbsp; &nbsp; &nbsp; &nbsp; option output&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ACCEPT<br />&nbsp; &nbsp; &nbsp; &nbsp; option forward&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; REJECT</p><p>config zone<br />&nbsp; &nbsp; &nbsp; &nbsp; option name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;lan<br />&nbsp; &nbsp; &nbsp; &nbsp; option input&nbsp; &nbsp; ACCEPT<br />&nbsp; &nbsp; &nbsp; &nbsp; option output&nbsp; &nbsp;ACCEPT<br />&nbsp; &nbsp; &nbsp; &nbsp; option forward&nbsp; REJECT</p><p>config zone<br />&nbsp; &nbsp; &nbsp; &nbsp; option name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;wan<br />&nbsp; &nbsp; &nbsp; &nbsp; option input&nbsp; &nbsp; REJECT<br />&nbsp; &nbsp; &nbsp; &nbsp; option output&nbsp; &nbsp;ACCEPT<br />&nbsp; &nbsp; &nbsp; &nbsp; option forward&nbsp; REJECT<br />&nbsp; &nbsp; &nbsp; &nbsp; option masq&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1</p><p>config forwarding<br />&nbsp; &nbsp; &nbsp; &nbsp; option src&nbsp; &nbsp; &nbsp; lan<br />&nbsp; &nbsp; &nbsp; &nbsp; option dest&nbsp; &nbsp; &nbsp;wan<br />&nbsp; &nbsp; &nbsp; &nbsp; option mtu_fix&nbsp; 1</p><p># include a file with users custom iptables rules<br />config include<br />&nbsp; &nbsp; &nbsp; &nbsp; option path /etc/firewall.user</p><p>config rule<br />&nbsp; &nbsp; &nbsp; &nbsp; option src&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; wan<br />&nbsp; &nbsp; &nbsp; &nbsp; option dest_port&nbsp; &nbsp; &nbsp; &nbsp; 22<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;tcp<br />&nbsp; &nbsp; &nbsp; &nbsp; option target&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ACCEPT</p><p>config &#039;rule&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;name&#039; &#039;OpenVPN1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;src&#039; &#039;wan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;target&#039; &#039;ACCEPT&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;proto&#039; &#039;udp&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;dest_port&#039; &#039;1194&#039;</p><p>config &#039;rule&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;name&#039; &#039;OpenVPN2&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;src&#039; &#039;wan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;target&#039; &#039;ACCEPT&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;proto&#039; &#039;udp&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;dest_port&#039; &#039;1195&#039;</p><p>config &#039;rule&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;name&#039; &#039;OpenVPN3&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;src&#039; &#039;wan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;target&#039; &#039;ACCEPT&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;proto&#039; &#039;udp&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;dest_port&#039; &#039;1196&#039;</p><p>config &#039;zone&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;name&#039; &#039;vpn&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;input&#039; &#039;ACCEPT&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;output&#039; &#039;ACCEPT&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;forward&#039; &#039;ACCEPT&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;network&#039; &#039;vpn&#039;</p><p>config &#039;forwarding&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;src&#039; &#039;lan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;dest&#039; &#039;vpn&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;forward&#039; &#039;ACCEPT&#039;</p><p>config &#039;forwarding&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;src&#039; &#039;vpn&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;dest&#039; &#039;lan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;forward&#039; &#039;ACCEPT&#039;</p><p>All routing tables is OK. I know ping from laptop to 192.168.1.1, openwrt router lan interface over vpn tunnel, but don&#039;t know access to 192.168.1.2 server <br />that connected to lan interface on openwrt router. Where is a problem?<br />Please help me</p><p>Thank&#039;s </p><p>Rony</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p96982">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">rony</div>
					<div class="post-datetime">
						6 Nov 2009, 16:31					</div>
				</div>
				<div class="post-content content">
					<p>If I stopping firewall, then all OK. What is bad on my firewall config?</p><p>Thank&#039;s</p><p>Rony</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>