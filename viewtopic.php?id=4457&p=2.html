<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Kamikaze WGT634U Configuration?!</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 20 Jan 2018 and 5 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 5</div><nav><ul><li><a href="viewtopic.php%3Fid=4457&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=4457&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=4457&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=4457&amp;p=5.html">5</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p21088">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">Ydef</div>
					<div class="post-datetime">
						19 Feb 2006, 00:07					</div>
				</div>
				<div class="post-content content">
					<p>Yashi, recompiling into the kernel isn&#039;t necessary, just wondering where the missing enhanced usb module is that handles high speed usb 2.0 which would be: </p><p>ehci_2.6.15.3-brcm-1_mipsel.ipk</p><p>which doesn&#039;t seem to exist in your package list, only ohci and usb-core.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21089">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">Ydef</div>
					<div class="post-datetime">
						19 Feb 2006, 00:15					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;d like to setup networking using vlan1 as the wan IP instead of using br0 that handles WAN and wireless since I want to break up wireless, wan, and lan on 3 seperate subnets.</p><p>vconfig add eth0 0&nbsp; &nbsp;creates my desired lan IP on vlan0 </p><p>however</p><p>vconfig add eth0 1&nbsp; &nbsp;although it creates vlan1, is not transparent with eth0.&nbsp; Doing a udhcpc -i vlan1 will NOT bring up the vlan1 interface on the wan side.</p><p>udhcp will only work on the eth0 interface, which is NOT what i want obviously.</p><p>How would i best set vlan1 as the wan interface device?</p><p>The only way i&#039;m able to do it is create a bridge from vlan1 to eth0 but that&#039;s not what i want either.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21090">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">DeusExMachina</div>
					<div class="post-datetime">
						19 Feb 2006, 00:17					</div>
				</div>
				<div class="post-content content">
					<p>Ok,<br />with latest build ( OpenWrt Kamikaze 3250 compiled Sat Feb 18 16:38:35 EST 2006),<br />and&nbsp; tftp flashing, serial console does work again....<br />But, as it is told,<br />config does not work at all ^^&#039;</p><p>@flyashi<br />Hey, don&#039;t be that sad,<br />you&#039;re doing a great job and we&#039;re really happy that your doing it for us!<br />So, if you got something we could do to help you,<br />just tell us ^^</p><br /><p>CFE version 1.0.34 for BCM95365R (32bit,SP,LE)<br />Build Date: Tue Feb 24 03:21:41 CST 2004 (root@jackylinux)<br />Copyright (C) 2000,2001,2002 Broadcom Corporation.</p><p>Add MAC client version(DNI).<br />Initializing Arena.<br />Initializing Devices.<br />et0: Broadcom BCM47xx 10/100 Mbps Ethernet Controller<br />CPU type 0x29007: 200MHz<br />Total memory: 0x2000000 bytes (32MB)</p><p>Total memory used by CFE:&nbsp; 0x81BB1280 - 0x82000000 (4517248)<br />Initialized Data:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x81BB1280 - 0x81BB3E90 (11280)<br />BSS Area:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x81BB3E90 - 0x81BB45D0 (1856)<br />Local Heap:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x81BB45D0 - 0x81FB45D0 (4194304)<br />Stack Area:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x81FB45D0 - 0x81FB65D0 (8192)<br />Text (code) segment:&nbsp; &nbsp; &nbsp; &nbsp;0x81FB65E0 - 0x81FFFFB0 (301520)<br />Boot area (physical):&nbsp; &nbsp; &nbsp; 0x01B70000 - 0x01BB0000<br />Relocation Factor:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;I:E23B65E0 - D:01BB0280</p><p>configure vlans<br />*****************************************************************<br />*********************** VLAN Driver initial&nbsp; ********************<br />*****************************************************************<br />Process LAN port(2-5) vlan Architecture...<br />SUCCESS: trying to create VLAN 0 for switch<br />SUCCESS: trying to add LAN port</p><p>Process WAN port(2-5) vlan Architecture...<br />SUCCESS: trying to create VLAN 0 for switch<br />SUCCESS: trying to add WAN port<br />SUCCESS: enable ports&nbsp; success<br />configure vlans...done<br />Device eth0:&nbsp; hwaddr 00-0F-B5-0D-B4-85, ipaddr 192.168.1.1, mask 255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; gateway not set, nameserver not set<br />Loader:elf Filesys:raw Dev:flash0.os File: Options:(null)<br />***************************<br />****&nbsp; MAC Client V1.0&nbsp; ****<br />***************************<br />et0macaddr value :flag =0 value=00-0f-b5-0d-b4-85<br />et1macaddr value :flag =0 value=00-0f-b5-0d-b4-86<br />MAC exist at least one<br />system ethernet mac exist and not default....<br />Skip mac client process.....<br />Loading: 0x80001000/3732 Entry at 0x80001000<br />Closing network.<br />et0: link down<br />Starting program at 0x80001000<br />Linux version 2.6.15.3 (root@HOME) (gcc version 3.4.4) #1 Tue Feb 7 23:48:24 ES6<br />CPU revision is: 00029007<br />early_nvram_init: WGT634U NVRAM found.<br />Determined physical RAM map:<br /> memory: 02000000 @ 00000000 (usable)<br />Built 1 zonelists<br />Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,jffs2 init=/etc/pr0<br />Primary instruction cache 8kB, physically tagged, 2-way, linesize 16 bytes.<br />Primary data cache 4kB, 2-way, linesize 16 bytes.<br />Synthesized TLB refill handler (19 instructions).<br />Synthesized TLB load handler fastpath (31 instructions).<br />Synthesized TLB store handler fastpath (31 instructions).<br />Synthesized TLB modify handler fastpath (30 instructions).<br />PID hash table entries: 256 (order: 8, 4096 bytes)<br />Using 100.000 MHz high precision timer.<br />Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)<br />Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Memory: 29904k/32768k available (1992k kernel code, 2848k reserved, 247k data, )<br />Mount-cache hash table entries: 512<br />Checking for &#039;wait&#039; instruction...&nbsp; unavailable.<br />NET: Registered protocol family 16<br />PCI: fixing up bridge<br />PCI: Fixing up device 0000:01:00.0<br />Squashfs 2.2 (released 2005/07/03) (C) 2002-2005 Phillip Lougher<br />devfs: 2004-01-31 Richard Gooch (rgooch@atnf.csiro.au)<br />devfs: boot_options: 0x1<br />JFFS2 version 2.2. (NAND) (C) 2001-2003 Red Hat, Inc.<br />Initializing Cryptographic API<br />io scheduler noop registered<br />io scheduler anticipatory registered<br />Serial: 8250/16550 driver $Revision: 1.90 $ 2 ports, IRQ sharing disabled<br />serial8250: ttyS0 at MMIO 0x0 (irq = 3) is a 16550A<br />serial8250: ttyS1 at MMIO 0x0 (irq = 3) is a 16550A<br />b44.c:v0.97 (Nov 30, 2005)<br />PCI: Enabling device 0000:00:01.0 (0000 -&gt; 0002)<br />eth0: Broadcom 47xx 10/100BaseT Ethernet 00:0f:b5:0d:b4:85<br />Physically mapped flash: Found 1 x16 devices at 0x0 in 16-bit bank<br /> Intel/Sharp Extended Query Table at 0x0031<br />Using buffer write method<br />cfi_cmdset_0001: Erase suspend on write enabled<br />Flash device: 0x800000 at 0x1c000000<br />bootloader size flag: 3<br />Creating 5 MTD partitions on &quot;Physically mapped flash&quot;:<br />0x00000000-0x00060000 : &quot;cfe&quot;<br />0x000a0000-0x007e0000 : &quot;linux&quot;<br />0x00148000-0x00241000 : &quot;rootfs&quot;<br />mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-y<br />0x00060000-0x00080000 : &quot;nvram&quot;<br />0x00260000-0x007e0000 : &quot;OpenWrt&quot;<br />NET: Registered protocol family 2<br />IP route cache hash table entries: 512 (order: -1, 2048 bytes)<br />TCP established hash table entries: 2048 (order: 1, 8192 bytes)<br />TCP bind hash table entries: 2048 (order: 1, 8192 bytes)<br />TCP: Hash tables configured (established 2048 bind 2048)<br />TCP reno registered<br />ip_conntrack version 2.4 (256 buckets, 2048 max) - 244 bytes per conntrack<br />ip_tables: (C) 2000-2002 Netfilter core team<br />TCP vegas registered<br />NET: Registered protocol family 1<br />NET: Registered protocol family 17<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />VFS: Mounted root (squashfs filesystem) readonly.<br />Mounted devfs on /dev<br />Freeing unused kernel memory: 120k freed<br />Algorithmics/MIPS FPU Emulator v1.5<br />insmod: diag.ko: no module by that name found<br />/sbin/mount_root: /sbin/mount_root: 36: mtd: not found<br />/sbin/mount_root: /sbin/mount_root: 36: mtd: not found<br />Partition marked as clean<br />/sbin/mount_root: /sbin/mount_root: 36: mtd: not found<br />jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x002eeed8: 0x3032 id<br />jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x002eeedc: 0x3032 id<br />umount: Couldn&#039;t umount /rom/dev: No such file or directory<br />init started:&nbsp; BusyBox v1.1.0 (2006.02.01-03:48+0000) multi-call binary</p><p>Please press Enter to activate this console. b44: eth0: Link is up at 100 Mbps,.<br />b44: eth0: Flow control is off for TX and off for RX.<br />wlan: 0.8.4.2 (svn 1451)<br />ath_hal: module license &#039;Proprietary&#039; taints kernel.<br />ath_hal: 0.9.16.16 (AR5210, AR5211, AR5212, RF5111, RF5112, RF2413, RF5413)<br />ath_rate_sample: 1.2 (svn 1451)<br />ath_pci: 0.9.4.5 (svn 1451)<br />PCI: Enabling device 0000:01:01.0 (0000 -&gt; 0002)<br />PCI: Fixing up device 0000:01:01.0<br />wifi0: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps<br />wifi0: 11g rates: 1Mbps 2Mbps 5.5Mbps 11Mbps 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 3s<br />wifi0: turboG rates: 6Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps<br />wifi0: H/W encryption support: WEP AES AES_CCM TKIP<br />wifi0: mac 5.9 phy 4.3 radio 4.6<br />wifi0: Use hw queue 1 for WME_AC_BE traffic<br />wifi0: Use hw queue 0 for WME_AC_BK traffic<br />wifi0: Use hw queue 2 for WME_AC_VI traffic<br />wifi0: Use hw queue 3 for WME_AC_VO traffic<br />wifi0: Use hw queue 8 for CAB traffic<br />wifi0: Use hw queue 9 for beacons<br />couldn&#039;t load module &#039;wlan_scan_ap&#039; (-89)<br />unable to load wlan_scan_ap<br />wifi0: Atheros 5212: mem=0x40000000, irq=2<br />wlan: mac acl policy registered<br />device eth0 entered promiscuous mode</p><br /><br /><br /><p>BusyBox v1.1.0 (2006.02.01-03:48+0000) Built-in shell (ash)<br />Enter &#039;help&#039; for a list of built-in commands.</p><p>&nbsp; _______&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;________&nbsp; &nbsp; &nbsp; &nbsp; __<br /> |&nbsp; &nbsp; &nbsp; &nbsp;|.-----.-----.-----.|&nbsp; |&nbsp; |&nbsp; |.----.|&nbsp; |_<br /> |&nbsp; &nbsp;-&nbsp; &nbsp;||&nbsp; _&nbsp; |&nbsp; -__|&nbsp; &nbsp; &nbsp;||&nbsp; |&nbsp; |&nbsp; ||&nbsp; &nbsp;_||&nbsp; &nbsp;_|<br /> |_______||&nbsp; &nbsp;__|_____|__|__||________||__|&nbsp; |____|<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |__| W I R E L E S S&nbsp; &nbsp;F R E E D O M<br /> KAMIKAZE (bleeding edge, r3250) -------------------<br />&nbsp; * 10 oz Vodka&nbsp; &nbsp; &nbsp; &nbsp;Shake well with ice and strain<br />&nbsp; * 10 oz Triple sec&nbsp; mixture into 10 shot glasses.<br />&nbsp; * 10 oz lime juice&nbsp; Salute!<br /> ---------------------------------------------------<br />root@OpenWrt:/#</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21091">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">flyashi</div>
					<div class="post-datetime">
						19 Feb 2006, 00:32					</div>
				</div>
				<div class="post-content content">
					<p>kmod-usb-ehci isn&#039;t in make menuconfig; I used kmod-usb2 and it worked... don&#039;t know if it was actually usb2 or not.</p><p>Glad to see that the OS boots at least. My /etc/config/network modifications seemed to apply after an ifup... i love the name &quot;ifup&quot; too, it&#039;s like a tacit admission, &quot;yea, I f***&#039;ed up&quot; <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p> - me</p><p>P.S. I&#039;m still looking for the complete list; here&#039;s what I can remember:</p><p>To /etc/firewall.user, add:</p><p>iptables -A FORWARD -i br0 -o $WAN -j ACCEPT</p><p>To /etc/config/network, add &quot;ath0&quot; to br0.</p><p>To /etc/modules.d/20-madwifi, to the line:<br />ath_pci<br />add:<br />ath_pci autocreate=ap</p><p>To /etc/init.d/S20madwifi, add:</p><p>wlanconfig ath0 create wlandev wifi0 wlanmode ap<br />iwconfig ath0 essid &quot;w00t it works&quot;<br />ifup ath0</p><p>Now run firewall.user and ifup br0. Some of these may not be necessary on newer Kamikaze&#039;s...this was on a 3178 iirc.</p><p>Good luck to all,</p><p> - Yasha</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21098">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">Ydef</div>
					<div class="post-datetime">
						19 Feb 2006, 04:26					</div>
				</div>
				<div class="post-content content">
					<p>thanks Yasha!&nbsp; You&#039;re the man for providing the only source in town for these builds!&nbsp; Its very much appreciated.</p><p>It looks like maybe your cron script missed rebuilding the kmod-switch package?&nbsp; The version <br />in your repo is for 2.6.15.1.</p><p>That package would seem to have the key network modules for the roboswitch that the kernel complains&nbsp; about not having that i posted earlier.</p><p>In case you don&#039;t see the source, it&#039;s available on the package link on at:</p><p><a href="https://svn.openwrt.org/openwrt/trunk/openwrt/target/linux/package/switch/">https://svn.openwrt.org/openwrt/trunk/o … ge/switch/</a></p><p>Thanx again!</p>											<p class="post-edited">(Last edited by <strong>Ydef</strong> on 19 Feb 2006, 04:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21123">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">DeusExMachina</div>
					<div class="post-datetime">
						19 Feb 2006, 16:16					</div>
				</div>
				<div class="post-content content">
					<p>Just a simple and stupid question:<br />How to make the flash &quot;writeble&quot; for doing these changes, described by yashi?<br />(and how to boot from usb stick as root?)</p><p>^^<br />Thanks,<br />DeusExMachina</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21136">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">flyashi</div>
					<div class="post-datetime">
						19 Feb 2006, 22:30					</div>
				</div>
				<div class="post-content content">
					<p>Images are back!</p><p>I did a make clean; make; hopefully that cleared up any mismatched package problems.</p><p>If you used SquashFS, see <a href="http://wiki.openwrt.org/OpenWrtDocs/Using#head-fda4ef01dd7bcc201e690c5dc65631f1b8be545d">http://wiki.openwrt.org/OpenWrtDocs/Usi … f1b8be545d</a> for editing files. To boot from USB disk, see <a href="http://wiki.openwrt.org/UsbStorageHowto#head-4d459de735f85dda1449558f134e95a50d94382a">http://wiki.openwrt.org/UsbStorageHowto … a50d94382a</a> .</p><p>Let me know if this fixed anything. If not I&#039;ll just give up and shoot myself now.</p><p> - Yasha</p><p>P.S. Just kidding. About the make clean; make ... I actually deleted the entire trunk/openwrt directory. I just hope it was worth it. Lemme know, thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21197">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">Ydef</div>
					<div class="post-datetime">
						20 Feb 2006, 20:36					</div>
				</div>
				<div class="post-content content">
					<p>Excellent!&nbsp; Thanks for recompiling the kmod-switch module for the present kernel.&nbsp; Now I&#039;m finally able at long last to bring up the wan side dhcp IP on vlan1, meaning that as long as you include this package in your default image then networking should work out of the box and mirror the type of default networking found on the wrt units.</p><p>Another suggestion would be to include all usb packages, especially the usb2 package you pointed out to me earlier on the default image, since after all this is a usb storage router so it would make sense to have the usb port work by default. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Haven&#039;t installed your latest image yet, wanna get everything down to a save script like you do so when I reflash I need only run that script to have all my customizations restored.&nbsp; <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Two other modules that the kernel seems to look for but can&#039;t find on bootstrap are diag.ko and sg.ko</p><p>sg.ko should come with one of the usb packages i would think since it&#039;s the scsi generic driver.</p><p>Did you forget to compile the scsi generic as a module in your kernel config?</p><p>Actually, was also wondering if you could make a copy of your kernel config available for download, as that would save me some effort when I go to compile custom modules for this unit.</p><p>Also, any idea about diag.ko as another compile time option that you might have missed to compile as a module?</p><p>Thanks again for your all help!</p>											<p class="post-edited">(Last edited by <strong>Ydef</strong> on 20 Feb 2006, 20:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21199">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">flyashi</div>
					<div class="post-datetime">
						20 Feb 2006, 20:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Ydef wrote:</cite><blockquote><p>Actually, was also wondering if you could make a copy of your kernel config available for download</p></blockquote></div><p>What do you mean, &quot;kernel config&quot;? my .config from menuconfig, or the kernel settings on the router? Well, I can&#039;t send you the latter; I can send you the former if you&#039;d like, but it&#039;s pretty much default + everything else as modules.</p><p>If you really want the USB drivers compiled in, sure; the thing is, only the WGT an asus have USB; on all other routers it would just be wasted space. I&#039;ll try to make a script that compiles a separate, USB-included version, if you REALLY need it in the default image.</p><p>I don&#039;t know why kmod-switch wasn&#039;t included before; hopefully it&#039;s included now; and since it works, networking should *just work* after a reflash, hopefully, possibly, maybe, and if the gods are on our side, and a southernly wind comes after a full moon on the 3rd Friday of next month.</p><p>I recall that during my boot, I also had problems with diag.ko; don&#039;t know why... it seemed to work fine though, so... why fix it if it ain&#039;t broke?</p><p>I don&#039;t see any kmod&#039;s or anything else for that matter relating to SCSI... what do you want me to select?</p><p>So, I&#039;ll make a .config with USB and copy that in and make a separate usb-enabled images, in addition to the regular images.</p><p>Anything else?</p><p> - Yasha</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21206">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">Ydef</div>
					<div class="post-datetime">
						20 Feb 2006, 22:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>flyashi wrote:</cite><blockquote><p>What do you mean, &quot;kernel config&quot;? my .config from menuconfig, or the kernel settings on the router? Well, I can&#039;t send you the latter; I can send you the former if you&#039;d like, but it&#039;s pretty much default + everything else as modules.</p></blockquote></div><p>Yes, your .config from menuconfig is what I meant, sorry for not being more specific.<br /></p><div class="quotebox"><cite>flyashi wrote:</cite><blockquote><p>If you really want the USB drivers compiled in, sure; the thing is, only the WGT an asus have USB; on all other routers it would just be wasted space. I&#039;ll try to make a script that compiles a separate, USB-included version, if you REALLY need it in the default image.</p></blockquote></div><p>Ah, no all I meant is that the usb modules should be included in the default image.&nbsp; Maybe you made this additional already, as I haven&#039;t checked out your most recent images yet so sorry if that&nbsp; request was redundant.&nbsp; <br /></p><div class="quotebox"><cite>flyashi wrote:</cite><blockquote><p>I don&#039;t know why kmod-switch wasn&#039;t included before; hopefully it&#039;s included now; and since it works, networking should *just work* after a reflash, hopefully, possibly, maybe, and if the gods are on our side, and a southernly wind comes after a full moon on the 3rd Friday of next month.</p></blockquote></div><p>As long as switch_robo.ko and switch_core.ko from the kmod-switch package are in /lib/modules/2.6.15.3 on the default image then networking will work out of the box ... which is what it looks like you&#039;ve done so no need to be *that* pessimistic. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><div class="quotebox"><cite>flyashi wrote:</cite><blockquote><p>I recall that during my boot, I also had problems with diag.ko; don&#039;t know why... it seemed to work fine though, so... why fix it if it ain&#039;t broke?</p></blockquote></div><p>No need really, I can just sometimes overly anal ironing all errors out of my bootlog ... a bad habit that i should really get over.&nbsp; For the time being i&#039;ll just comment out the insmod diag.ko line in /etc/preinit. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><div class="quotebox"><cite>flyashi wrote:</cite><blockquote><p>Anything else?</p></blockquote></div><p>Yes, one request specific to the wgt634u that would i think be thoroughly appreciated by the community <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> , i was wondering if you would mind making an image for this router that boots from the usb drive.&nbsp; </p><p>The kernel cmdline args should look something like:</p><p>console=ttyS1,115200 root=/dev/scsi/host0/bus0/target0/lun0/part1 rootdelay=20 rw</p><p>I think the missing sg.ko module is the culprit behind why a hard link from that hellish /dev path is not made to /dev/sda1.&nbsp; The kernel config option should be:</p><p>CONFIG_CHR_DEV_SG=m</p><p>Actually, now that I think about it, since it would be the root filesystem here, i think it would be more prudent to compile all of these options into the image:</p><br /><p>CONFIG_BLK_DEV_SD=y<br />CONFIG_SD_EXTRA_DEVS=40CONFIG_USB=y<br />CONFIG_USB_DEVICEFS=y<br />CONFIG_USB_EHCI_HCD=y<br />CONFIG_USB_OHCI=y<br />CONFIG_USB_STORAGE=y<br />CONFIG_USB_SERIAL=m<br />CONFIG_USB_SERIAL_GENERIC=y<br />CONFIG_CHR_DEV_SG=y</p><p>So if you include that in your config compile time options you could replace that above line with a root=/dev/sda1 if you could possibly make this additonal image available?&nbsp; <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>Ydef</strong> on 20 Feb 2006, 23:05)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21257">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">DeusExMachina</div>
					<div class="post-datetime">
						21 Feb 2006, 16:47					</div>
				</div>
				<div class="post-content content">
					<p>YES O.o<br />An Image with an EASY and FAST option to set on directly &quot;usb boot&quot; would be fantastic!<br />Or just one that does it all the time, doesn&#039;t matter, but that would be great, cause no one would set webserver and so on directly on a FLASH (changing data saving on flash memory is ILL, cause they don&#039;t are done for beeing some kind of webserver hdd for mysql dbs! XD)<br />So, that would be awesome I absolutly agree with Ydef!</p><p>DeusExMachina</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21275">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">flyashi</div>
					<div class="post-datetime">
						21 Feb 2006, 19:10					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m reading the USB Storage Howto and I&#039;ve a few issues with the usb boot script.</p><p>First, I think the WGT uses OHCI, not UHCI. I think I tried UHCI and it didn&#039;t work; OHCI did. Can someone confirm this?</p><p>Also, insmod-usb2 would replace usb-ehci.</p><p>Also, it talks of nvram variables, unavailbe in Kamikaze.</p><p>Also, the scripts for jffs2 and squashfs are different. I&#039;m preferential to squashfs because of it&#039;s failsafe. (Not yet available on WGT though, right? Reset button driver doesn&#039;t work?) Anyway, I&#039;ll make a USB bootable image, sure. But it&#039;s gonna take a lot of testing and modding and stuff.</p><p>Long story short: Sure, I&#039;ll do it this weekend. <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p> - me</p><p>P.S. The differences between the jffs2 and squashfs are going to be a challange to integrate compile-time...but.. i&#039;ll think of something. Or one of you will and email me.... right? Thanks <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21277">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">hitek146</div>
					<div class="post-datetime">
						21 Feb 2006, 19:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>flyashi wrote:</cite><blockquote><p>I&#039;m preferential to squashfs because of it&#039;s failsafe. (Not yet available on WGT though, right? Reset button driver doesn&#039;t work?)</p></blockquote></div><p>FYI, the diag.ko module is supposed to be responsible for the reset button and LEDs, in case you guys didn&#039;t know that obvious fact already.... <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21279">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">DeusExMachina</div>
					<div class="post-datetime">
						21 Feb 2006, 20:42					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hitek146 wrote:</cite><blockquote><div class="quotebox"><cite>flyashi wrote:</cite><blockquote><p>I&#039;m preferential to squashfs because of it&#039;s failsafe. (Not yet available on WGT though, right? Reset button driver doesn&#039;t work?)</p></blockquote></div><p>FYI, the diag.ko module is supposed to be responsible for the reset button and LEDs, in case you guys didn&#039;t know that obvious fact already.... <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>Really Really?! O.o<br />Um well<br />THAT<br />EXPLAINS<br />A LOT!<br />^.^<br />XD</p><p>Nope I didn&#039;t know, and I think the others neither...<br />^^&#039;</p><p>Thanks!!!</p><p>DeusExMachina</p>											<p class="post-edited">(Last edited by <strong>DeusExMachina</strong> on 21 Feb 2006, 23:41)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21296">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">Ydef</div>
					<div class="post-datetime">
						22 Feb 2006, 00:42					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>flyashi wrote:</cite><blockquote><p>I&#039;m reading the USB Storage Howto and I&#039;ve a few issues with the usb boot script.</p><p>First, I think the WGT uses OHCI, not UHCI. I think I tried UHCI and it didn&#039;t work; OHCI did. Can someone confirm this?</p></blockquote></div><p>Actually, I ditched the ohci module altogether and am currently using my usb drive with just the following modules loaded:</p><p>ehci_hcd 25744 0 - Live 0xc020d000<br />uhci_hcd 27792 0 - Live 0xc0205000<br />usb_storage 27440 3 - Live 0xc00a0000<br />sd_mod 12080 4 - Live 0xc0079000<br />scsi_mod 71360 2 usb_storage,sd_mod, Live 0xc0171000<br />usbcore 103584 4 ehci_hcd,uhci_hcd,usb_storage, Live 0xc0226000</p><p>the ohci module would always bring up the low speed crap, which is not what i wanted.</p><div class="quotebox"><cite>flyashi wrote:</cite><blockquote><p>Also, it talks of nvram variables, unavailbe in Kamikaze.</p></blockquote></div><p>Right, although everything is supposed to be configurable now by setting the variables in /etc/config/network that were previously set in nvram.&nbsp; If anyone knows better please correct me on the evolution/update of the /etc/config/network script as the de facto replacement for the nvram in these cfe type routers.</p><div class="quotebox"><cite>flyashi wrote:</cite><blockquote><p>Also, the scripts for jffs2 and squashfs are different. I&#039;m preferential to squashfs because of it&#039;s failsafe. (Not yet available on WGT though, right? Reset button driver doesn&#039;t work?) Anyway, I&#039;ll make a USB bootable image, sure. But it&#039;s gonna take a lot of testing and modding and stuff.</p></blockquote></div><p>Actually, I don&#039;t think that there&#039;s been an adaptable solution to using squashfs with usbdrive root due to pivot_root leaving squashfs symlinks empty to bite the dust, so I wouldn&#039;t sweat worrying about squashfs at all.</p><div class="quotebox"><cite>flyashi wrote:</cite><blockquote><p>Long story short: Sure, I&#039;ll do it this weekend. <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p></blockquote></div><p>Actually, I finally got off my lazy ass an am recompiling the latest svn for the wgt to boot off the usb drive so if i don&#039;t run into any complications i could possibly provide relief duty with an image for you to put up for this functionality. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />&nbsp; Thanks again for all your effort in this, especially in consideration that you don&#039;t even have this router!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21436">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">DeusExMachina</div>
					<div class="post-datetime">
						23 Feb 2006, 18:05					</div>
				</div>
				<div class="post-content content">
					<p>@yashi<br />Hi Yashi, saw your new &#039;lil Server.....<br />AND WAS SHOCKED!<br />Boy, PLEASE DO NOT PUT YOUR HDD UPSIDE DOWN!<br />NEVER,<br />EVER,<br />if you want to power on the thingy.<br />&#039;Cause you can install hdds these days in &quot;normal&quot; position and on the side, but NOT flipped upside down, no hdd will make that very long, so please, flipp it XD</p><p>Thanks<br />DeusExMachina</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21448">
				<div class="post-metadata">
					<div class="post-num">Post #42</div>
					<div class="post-author">flyashi</div>
					<div class="post-datetime">
						23 Feb 2006, 20:55					</div>
				</div>
				<div class="post-content content">
					<p>Yea, well, it&#039;s too small for OpenWrt anyway. Not really good for anything without a bigger HDD. But, if you INSIST, sure, i&#039;ll screw it into one of the drive bays.</p><p> - Yasha</p><p>P.S. Anyone got a small-capacity (4-40GB) IDE lying around and want it to serve a public service (compiling OpenWrt images?) email me <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21468">
				<div class="post-metadata">
					<div class="post-num">Post #43</div>
					<div class="post-author">blue1</div>
					<div class="post-datetime">
						24 Feb 2006, 05:33					</div>
				</div>
				<div class="post-content content">
					<p>Okay...so i flashed my WGT634U using the web interface and the jffs2 image. It rebooted and well...I can&#039;t access it anymore. I&#039;m told I can fix this only with a serial console. How would I go about making this happen? Help? :-/</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21472">
				<div class="post-metadata">
					<div class="post-num">Post #44</div>
					<div class="post-author">flyashi</div>
					<div class="post-datetime">
						24 Feb 2006, 06:35					</div>
				</div>
				<div class="post-content content">
					<p>Yea, you should never try Kamikaze without a serial console.</p><p><a href="http://wiki.openwrt.org/OpenWrtDocs/Hardware/Netgear/WGT634U#head-6128a64e71f6af2e38e2b1e0066d8b3c08d62d2a">http://wiki.openwrt.org/OpenWrtDocs/Har … 3c08d62d2a</a> has the serial pinouts of the WGT; you&#039;ll also need either another router with a serial console, a cell phone serial cable (or similar), or you can make your own using a MAX232 series chip (I used a MAX233, supposed to be 5V level but worked with the 3.3 on the WGT).</p><p>If you use another router, just connect the ground, RX to TX, and TX to RX.<br />If you use a MAX232 series chip, just follow the datasheet.<br />If you use a cell phone serial cable, just follow the pinouts on <a href="http://www.pinouts.ru">http://www.pinouts.ru</a>.</p><p>Good luck,</p><p> - Yasha</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21475">
				<div class="post-metadata">
					<div class="post-num">Post #45</div>
					<div class="post-author">pEEf</div>
					<div class="post-datetime">
						24 Feb 2006, 07:25					</div>
				</div>
				<div class="post-content content">
					<p>What?&nbsp; Are you saying that you can&#039;t mount a HDD upside-down?&nbsp; &nbsp;I have never heard that, and have in fact run servers for many months with upside-down drives without problems.</p><p>If that was the case, there would be a LOT of bad Ipods out there after people set them down face-up? (Drive upside down at this point)</p><p>-Phil</p><br /><div class="quotebox"><cite>DeusExMachina wrote:</cite><blockquote><p>@yashi<br />Hi Yashi, saw your new &#039;lil Server.....<br />AND WAS SHOCKED!<br />Boy, PLEASE DO NOT PUT YOUR HDD UPSIDE DOWN!<br />NEVER,<br />EVER,<br />if you want to power on the thingy.<br />&#039;Cause you can install hdds these days in &quot;normal&quot; position and on the side, but NOT flipped upside down, no hdd will make that very long, so please, flipp it XD</p><p>Thanks<br />DeusExMachina</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21484">
				<div class="post-metadata">
					<div class="post-num">Post #46</div>
					<div class="post-author">Ydef</div>
					<div class="post-datetime">
						24 Feb 2006, 08:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>DeusExMachina wrote:</cite><blockquote><p>@yashi<br />Boy, PLEASE DO NOT PUT YOUR HDD UPSIDE DOWN!</p></blockquote></div><p>Uh, I would have to agree with pEEf,&nbsp; this sounds like one of the more ridiculous things I&#039;ve heard in a long time, although please do prove me wrong if i&#039;m out of line since if there&#039;s any truth to this, it would be a good thing to know.</p>											<p class="post-edited">(Last edited by <strong>Ydef</strong> on 24 Feb 2006, 08:09)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21504">
				<div class="post-metadata">
					<div class="post-num">Post #47</div>
					<div class="post-author">DeusExMachina</div>
					<div class="post-datetime">
						24 Feb 2006, 14:21					</div>
				</div>
				<div class="post-content content">
					<p>Ok well maybe you missunderstood me, &#039;cause I&#039;m not an native English Speaker.... so....<br />Um well, yes I read it in serval newspapers and computer websites,<br />and I&#039;m actually think the same way.</p><p>So um well, I think the c&#039;t mentioned it sometime ago (german computernewspaper for professionals, not such yellow-press-gamer-kiddy-shit) and serval other papers. So um well, and there&#039;s just the question: If you can mount it the right way, why flipping it upside down?</p><p>As I remeber, the &quot;wearout&quot; (damn, this word doesn&#039;t really sound technical ~.~) of the bearings and motor is a lot higher, than in the correct position.</p><p>So um well, heres an quote of pcguide.com &quot;Make sure that you don&#039;t mount the drive upside-down or backwards. The label of the drive goes up, and the circuit board down. The connectors should face into the middle of the case so the interface cable can reach them.&quot;</p><p>Maybe thats a little prove, but actually, at the moment I don&#039;t find many websites about this problem in english (actually, I never find anything if I REALLY NEED IT.... anyone felling similar? XD^^&#039;)</p><p>DeusExMachina</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21549">
				<div class="post-metadata">
					<div class="post-num">Post #48</div>
					<div class="post-author">Harley^</div>
					<div class="post-datetime">
						25 Feb 2006, 16:39					</div>
				</div>
				<div class="post-content content">
					<p>What specifically needs to get done to get Kamikaze working with pppoe, dsl and a static ip ? NVRAM settings don&#039;t seem to be available in Kamikaze. I am using Kamikaze Revision 3254. The LAN part seems to work just fine. Also, clear documentation needs to be put together in the form of a FAQ, once this is up and working. (I&#039;ll volunteer to do this, once its up and running.)<br /><img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21556">
				<div class="post-metadata">
					<div class="post-num">Post #49</div>
					<div class="post-author">Ydef</div>
					<div class="post-datetime">
						25 Feb 2006, 19:52					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>DeusExMachina wrote:</cite><blockquote><p>So um well, heres an quote of pcguide.com &quot;Make sure that you don&#039;t mount the drive upside-down or backwards. The label of the drive goes up, and the circuit board down. The connectors should face into the middle of the case so the interface cable can reach them.&quot;<br />DeusExMachina</p></blockquote></div><p>Hm.&nbsp; Very Interesting.&nbsp; Well thanks for posting that tidbit.&nbsp; I&#039;ve never really paid any attention to whether i&#039;ve had a drive upside down or rightside up before.&nbsp; Maybe that&#039;s the reason behind some unfortunately short lived drives that i&#039;ve had in the past. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21558">
				<div class="post-metadata">
					<div class="post-num">Post #50</div>
					<div class="post-author">Ydef</div>
					<div class="post-datetime">
						25 Feb 2006, 19:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Harley^ wrote:</cite><blockquote><p>What specifically needs to get done to get Kamikaze working with pppoe, dsl and a static ip ? NVRAM settings don&#039;t seem to be available in Kamikaze. I am using Kamikaze Revision 3254. The LAN part seems to work just fine. Also, clear documentation needs to be put together in the form of a FAQ, once this is up and working. (I&#039;ll volunteer to do this, once its up and running.)<br /><img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p></blockquote></div><p>Just set the nvram variables in /etc/config/network.&nbsp; You shouldn&#039;t have a problem bringing up the wan on vlan1.</p><p>Did you install the pppoe packages and insmod the modules?</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 2 of 5</div><nav><ul><li><a href="viewtopic.php%3Fid=4457&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=4457&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=4457&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=4457&amp;p=5.html">5</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>