<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Compile OpenWrt image for Foxboard</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p101039">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">domos</div>
					<div class="post-datetime">
						21 Jan 2010, 00:19					</div>
				</div>
				<div class="post-content content">
					<p>Hi.</p><p>I want to compile OpenWrt for the etrax Foxboard with Kamikaze (r19223) and it&#039;s works.<br />I obtain this two images files.<br />-rw-r--r-- 1 dan dan 4,0M janv. 20 10:25 openwrt-etrax-jffs2-64k-fimage<br />-rw-r--r-- 1 dan dan 4,0M janv. 20 10:25 openwrt-etrax-squashfs-fimage</p><p>I have modified only this parameters:<br />$ make menuconfig<br />&nbsp; &nbsp; OpenWrt Kamikaze (r19223) Configuration<br />&nbsp; &nbsp;&nbsp; &nbsp; Target System (Foxboard (ETRAX 100LX))&nbsp; ---&gt; </p><p>$ make kernel_menuconfig<br />&nbsp; &nbsp; Drivers for built-in interfaces --&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; I2C support<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; I2C uses PB not PB-I2C <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (PB0 = SDA, PB1 = SCL)<br />&nbsp; &nbsp; Hardware setup&nbsp; ---&gt;&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; Processor type (ETRAX-100LX-v2)&nbsp; ---&gt; <br />&nbsp; &nbsp; &nbsp; &nbsp; (16) DRAM size (dec, in MB)<br />&nbsp; &nbsp; &nbsp; &nbsp; (0) FLASH1 size (dec, in MB. 0 = Unknown)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; test with 0 or 8</p><br /><p>How can I say in configuration to make a 8Mo image for my LX816 Foxboard ?</p><p>I change the value of CONFIG_ETRAX_FLASH1_SIZE 0 =&gt; 8 in kernel_menuconfig but nothing change.&nbsp; </p><p>Thanks in advance.</p>											<p class="post-edited">(Last edited by <strong>domos</strong> on 21 Jan 2010, 23:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p101133">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">domos</div>
					<div class="post-datetime">
						21 Jan 2010, 23:09					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>davidlinchi wrote:</cite><blockquote><p>Hi guys,<br />I have a FOX Board which I have flashed the latest daily JFFS2 image of OpenWRT Kamikaze Jan 10, 2010. I installed the USB driver module package, kmod-usb-etrax. This is what happens when a USB device is plugged in:<br />&nbsp; &nbsp;1. As soon as the first USB device is plugged in, the kernel log fills up with a large amount of debug spew. This only occurs the first time a device is inserted after a reboot, not any subsequent times.<br />&nbsp; &nbsp;2. The kernel notices a new device plugged into a USB port.<br />&nbsp; &nbsp;3. A read error occurs<br />&nbsp; &nbsp;4. The port is disabled<br />&nbsp; &nbsp;5. The port is re-enabled, and the process repeats from step 2 until the device is unplugged.<br />I have attached a dmesg dump from before the usb modules are loaded, a dmesg dump from a boot where the usb modules are loaded at boot, and the output<br />from &quot;logread&quot; when a USB mouse (the low-speed device) and then a USB memory stick (the high-speed device) are plugged in. The only kernel modules loaded were hc_crisv10 and usbcore. The USB devices i used in testing are confirmed working with another computer. Any help or hints towards getting USB to work would be greatly appreciated.<br />Thanks!</p></blockquote></div><p>What model of foxboard do you have ?<br />4MB or 8MB flash ?</p><p>If I succeed&nbsp; to flash the fox, I can test the USB ports and give you a return.</p>											<p class="post-edited">(Last edited by <strong>domos</strong> on 21 Jan 2010, 23:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p105779">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">normance</div>
					<div class="post-datetime">
						1 Apr 2010, 12:04					</div>
				</div>
				<div class="post-content content">
					<p>Hi Domos</p><p>you don&#039;t need to create 8 MB image to flash this image in a 8 MB flash.</p><p>the boot_linux perl script has an option -S to specify the flash size<br />so if you do <br />boot_linux -S 8 fimage <br />it&#039;s work but you have to be in commande line and not via web interface.</p><p>Nicolas</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p107163">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">michelinok</div>
					<div class="post-datetime">
						17 Apr 2010, 17:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>davidlinchi wrote:</cite><blockquote><p>Hi guys,<br />I have a FOX Board which I have flashed the latest daily JFFS2 image of OpenWRT Kamikaze Jan 10, 2010. I installed the USB driver module package, kmod-usb-etrax. This is what happens when a USB device is plugged in:<br />&nbsp; &nbsp;1. As soon as the first USB device is plugged in, the kernel log fills up with a large amount of debug spew. This only occurs the first time a device is inserted after a reboot, not any subsequent times.<br />&nbsp; &nbsp;2. The kernel notices a new device plugged into a USB port.<br />&nbsp; &nbsp;3. A read error occurs<br />&nbsp; &nbsp;4. The port is disabled<br />&nbsp; &nbsp;5. The port is re-enabled, and the process repeats from step 2 until the device is unplugged.<br />I have attached a dmesg dump from before the usb modules are loaded, a dmesg dump from a boot where the usb modules are loaded at boot, and the output<br />from &quot;logread&quot; when a USB mouse (the low-speed device) and then a USB memory stick (the high-speed device) are plugged in. The only kernel modules loaded were hc_crisv10 and usbcore. The USB devices i used in testing are confirmed working with another computer. Any help or hints towards getting USB to work would be greatly appreciated.<br />Thanks!</p></blockquote></div><p>Did you find a solution? I&#039;ve just added the &quot;usb&quot; to the makefile, activated the usb support (also kmod-usb-etrax too), but when i plug anything i get a lot of garbage...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p113844">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">domos</div>
					<div class="post-datetime">
						27 Jul 2010, 16:29					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>normance wrote:</cite><blockquote><p>Hi Domos</p><p>you don&#039;t need to create 8 MB image to flash this image in a 8 MB flash.</p><p>the boot_linux perl script has an option -S to specify the flash size<br />so if you do <br />boot_linux -S 8 fimage <br />it&#039;s work but you have to be in commande line and not via web interface.</p><p>Nicolas</p></blockquote></div><p>Belatedly thank you for the information. <br />I have only tested my Fox OpenWrt and it&#039;s work fine.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p113846">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">domos</div>
					<div class="post-datetime">
						27 Jul 2010, 16:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>davidlinchi wrote:</cite><blockquote><p>Hi guys,<br />Did you find a solution? I&#039;ve just added the &quot;usb&quot; to the makefile, activated the usb support (also kmod-usb-etrax too), but when i plug anything i get a lot of garbage...</p></blockquote></div><p>No problem mounting a ext2 formated USB key with SVN Kamikaze (r22286) on Fox board.</p><p>Here is a sample config:</p><p>CONFIG_USB_SUPPORT=y<br />CONFIG_PACKAGE_kmod-usb-core=m<br />CONFIG_PACKAGE_kmod-usb-serial=y<br />CONFIG_PACKAGE_kmod-usb-serial-cp210x=y<br />CONFIG_PACKAGE_kmod-usb-serial-ftdi=y<br />CONFIG_PACKAGE_kmod-usb-serial-pl2303=y<br />CONFIG_PACKAGE_kmod-usb-storage=y<br />CONFIG_PACKAGE_kmod-fs-ext2=y<br />CONFIG_PACKAGE_kmod-fs-ext3=y<br />CONFIG_PACKAGE_kmod-fs-vfat=y</p>											<p class="post-edited">(Last edited by <strong>domos</strong> on 27 Jul 2010, 16:43)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>