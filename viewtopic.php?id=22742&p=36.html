<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TP Link WR1043ND 11n gigabit router</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 20 Jul 2013 and 7 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 36 of 52</div><nav><ul><li><a href="viewtopic.php%3Fid=22742&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=22742&amp;p=34.html">34</a></li><li><a href="viewtopic.php%3Fid=22742&amp;p=35.html">35</a></li><li class="pagination-current"><span>36</span></li><li><a href="viewtopic.php%3Fid=22742&amp;p=37.html">37</a></li><li><a href="viewtopic.php%3Fid=22742&amp;p=38.html">38</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=22742&amp;p=52.html">52</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p121448">
				<div class="post-metadata">
					<div class="post-num">Post #876</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						19 Nov 2010, 00:40					</div>
				</div>
				<div class="post-content content">
					<p>Sorry, I run customized firmware on my router and did not bother about 3g when compiling. So I am unable to eject the virtual CD drive (I could not find a way to do that in sysfs). I can&#039;t help you out on that topic right now.<br />Btw. you should keep in mind that extroot will not work otb with your sd-card in the 3g modem. You would probably need to get into init-scripts and issue the modeswitch of the 3g dongle before init starts extroot.<br />Besides that you could also set up opkg to install packages to the memory card. You will find some older wiki pages covering that topic.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p121465">
				<div class="post-metadata">
					<div class="post-num">Post #877</div>
					<div class="post-author">aruzsi</div>
					<div class="post-datetime">
						19 Nov 2010, 08:36					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>MBS wrote:</cite><blockquote><p>Btw. you should keep in mind that extroot will not work otb with your sd-card in the 3g modem.</p></blockquote></div><p>Why not?</p><p>TIA,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p121474">
				<div class="post-metadata">
					<div class="post-num">Post #878</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						19 Nov 2010, 10:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>aruzsi wrote:</cite><blockquote><p>Why not?</p><p>TIA,</p></blockquote></div><p>As I mentioned, you need to dig into init scripts and make sure your 3g dongle switched to modem and µSD mode before the extroot init script gets launched. The time for switching the mode, until both new devices appear on my pc is about 10 seconds (pretty long).<br />But I do not know how it is with software modified dongles, which anybody mentioned some time earlier in this thread afaik. I have not really messed a lot with my dongle so far.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p121475">
				<div class="post-metadata">
					<div class="post-num">Post #879</div>
					<div class="post-author">aruzsi</div>
					<div class="post-datetime">
						19 Nov 2010, 11:07					</div>
				</div>
				<div class="post-content content">
					<p>OK, I understand.<br />Maybe I will put some sym. links to uSD and install some not-to-important stuffs, like tcpdump, etc.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p121902">
				<div class="post-metadata">
					<div class="post-num">Post #880</div>
					<div class="post-author">Del</div>
					<div class="post-datetime">
						24 Nov 2010, 23:52					</div>
				</div>
				<div class="post-content content">
					<p>Just started testing the 10.03.1 RC4 on this router. There are some rather serious issues. I am very grateful if some of you have experience with these issues to share before I spend more time looking into it.</p><p>After a reboot, the computers connected with wire to the router need to reconnect or wait until the dhcp leases go out before they get net.</p><p>Setting static IP for the WAN interface can only be done after connecting it with DHCP first. This means that with static IP, internet will not reconnect after a reboot. This issue may be connected with the first issue.</p><p>I can of course make hack workarounds for these (don&#039;t need help with that). However, the issues are quite serious, so I would like follow them to a fix.</p><p>BTW, these issues were present on RC3 too.</p>											<p class="post-edited">(Last edited by <strong>Del</strong> on 25 Nov 2010, 17:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122073">
				<div class="post-metadata">
					<div class="post-num">Post #881</div>
					<div class="post-author">KillaB</div>
					<div class="post-datetime">
						27 Nov 2010, 05:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>brifar wrote:</cite><blockquote><div class="quotebox"><cite>KillaB wrote:</cite><blockquote><p>I just found a potentially major bug and was wondering if anyone else is seeing it.<br />When I reboot my router, DHCP kicks in on my client and I&#039;m able to pull an IP from my upstream router!</p><p>Looks like the switch is passing traffic before iptables is able to start.</p></blockquote></div><p>yes i noted this,<br />if i have a client connectedto the router while it restarts the client obtains an IP from my isp.</p><p>I thought it was because my router is messed up at the moment <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>@brifar</p><p>This bug is now plaguing me the same way it is for you.<br />Is there anyone here that has the programming skills to help?<br /><a href="https://dev.openwrt.org/ticket/6819">https://dev.openwrt.org/ticket/6819</a></p><p>As stated previously, the stock firmware appears to disable and re-enable the switch during boot to minimize the leakage. The DHCP process between LAN and WAN devices is therefore interrupted and unable to complete a lease. We need the same to happen within OpenWrt!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122078">
				<div class="post-metadata">
					<div class="post-num">Post #882</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						27 Nov 2010, 08:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>KillaB wrote:</cite><blockquote><div class="quotebox"><cite>brifar wrote:</cite><blockquote><div class="quotebox"><cite>KillaB wrote:</cite><blockquote><p>I just found .... a potentially major bug .... and was wondering if anyone else is seeing it.<br />When I reboot my router, DHCP kicks in on my client and I&#039;m able to pull an IP from my upstream router!</p><p>Looks like the switch is passing traffic before iptables is able to start.</p></blockquote></div><p>yes i noted this,<br />if i have a client connectedto the router while it restarts the client obtains an IP from my isp.</p><p>I thought it was because my router is messed up at the moment <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>@brifar</p><p>This bug is now plaguing me the same way it is for you.<br />Is there anyone here that has the programming skills to help?<br /><a href="https://dev.openwrt.org/ticket/6819">https://dev.openwrt.org/ticket/6819</a></p><p>As stated previously, the stock firmware appears to disable and re-enable the switch during boot to minimize the leakage. The DHCP process between LAN and WAN devices is therefore interrupted and unable to complete a lease. We need the same to happen within OpenWrt!</p></blockquote></div><p>This is nothing new! I stumbled upon this behaviour some time ago now (router behind a router). Since we have a switch, I do not see, what can be done. It was sugested to disable the switch... Or you could write yourself a script to check if the IP fetched with dhcp is not an internal one and if so, make dhclient get a new one?&nbsp; With pppoe, this problem does not occure. IMHO there are more important things to solve. Like the missing tos/match modules for iptables, for example.</p><p>When will 10.03.1 com out anyway? 10.03 was quick. Is help needed?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122280">
				<div class="post-metadata">
					<div class="post-num">Post #883</div>
					<div class="post-author">sebelk</div>
					<div class="post-datetime">
						30 Nov 2010, 15:33					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I am using Backfire (10.03, r20728). </p><p>cat /proc/cpuinfo outputs:</p><div class="codebox"><pre><code>system type             : Atheros AR9132 rev 2
machine                 : TP-LINK TL-WR1043ND
processor               : 0
cpu model               : MIPS 24Kc V7.4
BogoMIPS                : 266.24
wait instruction        : yes
microsecond timers      : yes
tlb_entries             : 16
extra interrupt vector  : yes
hardware watchpoint     : yes, count: 4, address/irw mask: [0x0000, 0x0ff8, 0x0ff8, 0x0ff8]
ASEs implemented        : mips16
shadow register sets    : 1
core                    : 0
VCED exceptions         : not available
VCEI exceptions         : not available</code></pre></div><p>I wonder if I can come back to original firmware with the mtd method, using the firmware wr1043nv1_en_3_12_2_up(100820).bin.</p><br /><p>info as stated on web admin page of TP-Link:</p><p><strong>Firmware Version:&nbsp; <br />3.9.17 Build 091118 Rel.36350n<br />Hardware Version: <br />WR1043N v1 00000000</strong></p><br /><p>I don&#039;t want to brick the AP! My soldering skills are almost null!</p><p>Thanks in advance!</p>											<p class="post-edited">(Last edited by <strong>sebelk</strong> on 30 Nov 2010, 16:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122284">
				<div class="post-metadata">
					<div class="post-num">Post #884</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						30 Nov 2010, 16:42					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://wiki.openwrt.org/toh/tp-link/tl-wr1043nd#back.to.original.firmware">http://wiki.openwrt.org/toh/tp-link/tl- … l.firmware</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122286">
				<div class="post-metadata">
					<div class="post-num">Post #885</div>
					<div class="post-author">sebelk</div>
					<div class="post-datetime">
						30 Nov 2010, 17:36					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>playdude wrote:</cite><blockquote><div class="quotebox"><cite>supertom64 wrote:</cite><blockquote><p>@playdude</p><p>I think earlier version was including u-boot code like &quot;wr1043nv1_en_3_9_17_up_boot(091118).bin&quot; they have a *_boot* in their name.<br />vs. newer versions are &quot;with or without&quot; u-boot code and if they are without they are called &quot;wr1043nv1_en_3_11_5_up(100427).bin&quot; with only *_up* in their name.</p><p>You can control it with a hex editor.<br />Firmware with u-boot code beginn after 20200 with hex &quot;01 00 00 00 54 50 2D 4C 49 4E 4B 20 54 65 63 68&quot; which is &quot;....TP-LINK Tech&quot;<br />vs Firmware without have something else after 20200.</p><p>cu<br />tom</p></blockquote></div><p>Yeah I think I did a dd on an original image without &quot;boot&quot;. That makes sense. I&#039;ve updated the <a href="http://wiki.openwrt.org/toh/tp-link/tl-wr1043nd#back.to.original.firmware">wiki</a> so others won&#039;t fall into the same trap. So now it&#039;s possible to go back and forth between openwrt, original, and ddwrt for those afraid of the serial and soldering.</p></blockquote></div><p>Sorry for the stupid question, but what are you meaning&nbsp; for &quot;20200&quot;? . The first line that I see:</p><p>0000000 0001 0000 5054 4c2d 4e49 204b 6554 6863</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122288">
				<div class="post-metadata">
					<div class="post-num">Post #886</div>
					<div class="post-author">Giordano</div>
					<div class="post-datetime">
						30 Nov 2010, 17:45					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m just the same. I have flashed x-wrt, not satisfied with it (the same load what my asus wl500gp handled, kills the tplink, 95%+ cpu load), I want to change fw, but now I can not. Web firmware update does not work for me. I was digging for solution, I found other people in the same situation, but no solution so far. The only way I see now is to create trx file from the bin.</p><p>This instruction is not enough for me to be honest : <br />&quot;<br />Cut first 0x20200 bytes from original firmware</p><p>dd if=orig.bin of=tplink.bin skip=257 bs=512</p><p>and flash via uboot or mtd <br />&quot;</p><p>Does the second line do the job of cutting the first 0x20200 ? So than I can use mtd ?</p><p>Would this work ?</p><p>Get the original FW : &quot;wr1043nv1_en_3_12_2_up(100820).bin&quot; (from tp-link website as mentioned before)</p><p>do this under linux : dd if=wr1043nv1_en_3_12_2_up(100820).bin of=tplink.bin skip=257 bs=512</p><p>upload and flash it : mtd write tplink.bin linux &amp;&amp; reboot</p><p>?</p><p>Thanks a lot,</p><p>JG</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122289">
				<div class="post-metadata">
					<div class="post-num">Post #887</div>
					<div class="post-author">vplessky</div>
					<div class="post-datetime">
						30 Nov 2010, 17:57					</div>
				</div>
				<div class="post-content content">
					<p>As an option - you can flash it with OpenWrt 10.03.1-RC4.<br />Use &quot;sysupgrade&quot; version of firmware.<br />RC4 was released just few days ago.<br />Many bugs have been fixed since 10.03 release.</p><p>Latest release of X-Wrt was several months ago.<br />It can be that bugs you mentioned above have been fixed in 10.03.1-RC4.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122290">
				<div class="post-metadata">
					<div class="post-num">Post #888</div>
					<div class="post-author">Giordano</div>
					<div class="post-datetime">
						30 Nov 2010, 18:01					</div>
				</div>
				<div class="post-content content">
					<p>I have tried. Throught the web interface (luci or webif) is does not flash. Is stops after copying it to ramdisk (or so, I do not have the device with me now) and than resets.</p><p>:-(</p><p>JG</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122293">
				<div class="post-metadata">
					<div class="post-num">Post #889</div>
					<div class="post-author">vplessky</div>
					<div class="post-datetime">
						30 Nov 2010, 18:05					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Giordano wrote:</cite><blockquote><p>I have tried. Throught the web interface (luci or webif) is does not flash. Is stops after copying it to ramdisk (or so, I do not have the device with me now) and than resets.</p></blockquote></div><p>Strange. And indeed sounds bad.</p><p>I flashed on my WR841ND OpenWrt 10.03.1-RC3 (from original firmware), than re-flashed it with Gargoyle 1.3.7 (via Web interface)<br />And than - with Gargoyle 1.3.8, also via Web interface.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122294">
				<div class="post-metadata">
					<div class="post-num">Post #890</div>
					<div class="post-author">Giordano</div>
					<div class="post-datetime">
						30 Nov 2010, 18:12					</div>
				</div>
				<div class="post-content content">
					<p>I have used openwrt (latest) first, than flashed xwrt (latest) and now web flash does not work.</p><p>I&#039;m very very disappointed. I got this router to replace my asus, because when I was loading 10-16 torrent files, I found problems with the web interface reaction time - it was on the edge. Now I try this tp-link with the same torrents, even vsftp, transmission, firewall config files are the same, the same load kills the tp link. If I manage to see the cpu load before it stops interfacing with me, than I see 90%+ values. Now flashing does not work either. Yet it is a bad purchase for me, the only good point is the giga switch. I have 5+ hours of work in it also for nothing so far. I just gained experience.</p><p>:-(</p><p>JG</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122296">
				<div class="post-metadata">
					<div class="post-num">Post #891</div>
					<div class="post-author">vplessky</div>
					<div class="post-datetime">
						30 Nov 2010, 18:31					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Giordano wrote:</cite><blockquote><p>I have used openwrt (latest) first, than flashed xwrt (latest) and now web flash does not work.</p></blockquote></div><p>Is telnet/ssh working for you?<br />You can flash from command line interface.<br />At least you can move from X-Wrt firmware (UI) to OpenWrt or Gargoyle (which is also based on OpenWrt)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122297">
				<div class="post-metadata">
					<div class="post-num">Post #892</div>
					<div class="post-author">Giordano</div>
					<div class="post-datetime">
						30 Nov 2010, 18:56					</div>
				</div>
				<div class="post-content content">
					<p>yes, as far as I know I need trx for that, not bin, that is why I asked also about how to make trx from bin.</p><p>Thanks,</p><p>JG</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122298">
				<div class="post-metadata">
					<div class="post-num">Post #893</div>
					<div class="post-author">KillaB</div>
					<div class="post-datetime">
						30 Nov 2010, 19:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Giordano wrote:</cite><blockquote><p>yes, as far as I know I need trx for that, not bin, that is why I asked also about how to make trx from bin.</p><p>Thanks,</p><p>JG</p></blockquote></div><p>trx images only apply to Broadcom products.<br />There are two bin images for the WR1043ND. One that covers the entire flash, and a smaller image meant for sysupgrading.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122310">
				<div class="post-metadata">
					<div class="post-num">Post #894</div>
					<div class="post-author">Giordano</div>
					<div class="post-datetime">
						30 Nov 2010, 22:03					</div>
				</div>
				<div class="post-content content">
					<p>so, I should only do : mtd write downloadedopenwrtimage.bin linux &amp;&amp; reboot</p><p>?</p><p>JG</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122313">
				<div class="post-metadata">
					<div class="post-num">Post #895</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						30 Nov 2010, 23:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Giordano wrote:</cite><blockquote><p>so, I should only do : mtd write downloadedopenwrtimage.bin linux &amp;&amp; reboot</p><p>?</p><p>JG</p></blockquote></div><p>I would change the target to firmware instead of linux. At least that is how I always flash new firmwares (though I normally didn&#039;t keep my config settings). And we normally use the -r flag :-)<br />So according to the <a href="http://wiki.openwrt.org/toh/tp-link/tl-wr1043nd#upgrading.openwrt">wiki</a> you should do something like that:<br /></p><div class="codebox"><pre><code>root@OpenWrt:/# mtd -r write /tmp/openwrt-ar71xx-tl-wr1043ndv1-squashfs-sysupgrade.bin firmware</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122385">
				<div class="post-metadata">
					<div class="post-num">Post #896</div>
					<div class="post-author">Del</div>
					<div class="post-datetime">
						1 Dec 2010, 22:40					</div>
				</div>
				<div class="post-content content">
					<p>Giordano, I had the same issue with the x-wrt build, not being able to install via webif. Sysupgrade from commandline as MBS explains works though. You know how to copy the file over and ssh your way in right?</p><p>KillaB, thanks for the clarification. It seems all my IP-address troubles may be related to this issue. Orca, this issue is very serious. My estimate is that it will affect the majority of users, and 90% of them will not know what is going on and give up openwrt altogether. It should be considered release critical imho.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122391">
				<div class="post-metadata">
					<div class="post-num">Post #897</div>
					<div class="post-author">KillaB</div>
					<div class="post-datetime">
						2 Dec 2010, 00:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Del wrote:</cite><blockquote><p>KillaB, thanks for the clarification. It seems all my IP-address troubles may be related to this issue. Orca, this issue is very serious. My estimate is that it will affect the majority of users, and 90% of them will not know what is going on and give up openwrt altogether. It should be considered release critical imho.</p></blockquote></div><p>Del, thanks for agreeing. This problem was compounded for me since libupnpd has a memory leak <a href="https://dev.openwrt.org/ticket/7444">(ticket 7444)</a> and was causing my router to reboot every ~2 hours or so. Fortunately I&#039;ve switched over to miniupnp, so I can live with the initial &quot;Ethernet leak&quot; by booting with the WAN cable disconnected. Newcomers to OpenWrt are likely to be confused by this behaviour without proper warning.</p><p>Sure, one workaround is to just statically address every device on the network, but I think an RTL8366xx specific init script is a much better idea.</p>											<p class="post-edited">(Last edited by <strong>KillaB</strong> on 2 Dec 2010, 00:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122634">
				<div class="post-metadata">
					<div class="post-num">Post #898</div>
					<div class="post-author">Del</div>
					<div class="post-datetime">
						5 Dec 2010, 02:34					</div>
				</div>
				<div class="post-content content">
					<p>Well my upstream router from my ISP only supports dhcp (no binding to mac or anything), so I am pretty much screwed on this one. The other day my kid&#039;s Android phone ran away with the internet connection after a router reboot, leaving the rest of my network including the router without internet. Putting static address on all clients is no solution. This issue needs to be fixed.</p><p>As far as I see the switch driver RTL8366RB is used. I will need to learn more about this module, but please share your ideas for a fix. An init-script doesn&#039;t sound to difficult.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122774">
				<div class="post-metadata">
					<div class="post-num">Post #899</div>
					<div class="post-author">Del</div>
					<div class="post-datetime">
						7 Dec 2010, 12:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>KillaB wrote:</cite><blockquote><p><a href="https://dev.openwrt.org/ticket/6819">https://dev.openwrt.org/ticket/6819</a></p><p>As stated previously, the stock firmware appears to disable and re-enable the switch during boot to minimize the leakage. The DHCP process between LAN and WAN devices is therefore interrupted and unable to complete a lease. We need the same to happen within OpenWrt!</p></blockquote></div><p>Sounds a bit hacky to me, but it should be doable I guess. The source code for the driver doesn&#039;t look too intimidating either, but as far as I can see it does not provide means to communicate with the driver while it is loaded.<br /><a href="https://dev.openwrt.org/browser/trunk/target/linux/generic-2.6/files/drivers/net/phy/rtl8366rb.c?rev=21914">https://dev.openwrt.org/browser/trunk/t … ?rev=21914</a><br />To test your fix I believe we need to compile rtl8366rb as a loadable module, which it currently is not. Then an init-script which loads and unloads the module at the right time may do the trick.</p><p>From Andrew&#039;s comment earlier in the thread it sounds like changing the boot-loader is a more elegant solution. However, he did not give enough information for me to see the connection between the boot loader and our problem.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122807">
				<div class="post-metadata">
					<div class="post-num">Post #900</div>
					<div class="post-author">KillaB</div>
					<div class="post-datetime">
						7 Dec 2010, 21:11					</div>
				</div>
				<div class="post-content content">
					<p>Here&#039;s the timing of a stock boot if it helps any.<br /><a href="https://dev.openwrt.org/attachment/ticket/6819/wr1043.txt">https://dev.openwrt.org/attachment/tick … wr1043.txt</a></p>									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 901 to 900 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 36 of 52</div><nav><ul><li><a href="viewtopic.php%3Fid=22742&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=22742&amp;p=34.html">34</a></li><li><a href="viewtopic.php%3Fid=22742&amp;p=35.html">35</a></li><li class="pagination-current"><span>36</span></li><li><a href="viewtopic.php%3Fid=22742&amp;p=37.html">37</a></li><li><a href="viewtopic.php%3Fid=22742&amp;p=38.html">38</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=22742&amp;p=52.html">52</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>