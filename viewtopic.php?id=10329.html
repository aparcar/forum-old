<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> firmware compilation on bcm963xx</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 21 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p46489">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">aurelbu</div>
					<div class="post-datetime">
						15 Apr 2007, 21:36					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I&#039;m new to openWRT. I would like to try to execute openwrt on my 96348GWV based router (Tecom AH4222 from my ISP).<br />I succeed in compiling kamikaze. But when I flash the image, I have an &quot;Image information not found.&quot; and impossible to boot :<br /></p><div class="codebox"><pre><code>CFE&gt; flashimage 192.168.2.254:firm.trx
Loading 192.168.2.254:firm.trx ...
Finished loading 1609728 bytes
......................................................................

Finished flashing image.
Resetting board...

CFE version 1.0.37-0.7 for BCM96348 (32bit,SP,BE)
Build Date: ?? 10?? 21 09:34:25 CST 2005 (root@hp)
Copyright (C) 2000,2001,2002,2003 Broadcom Corporation.

Initializing Arena.
Initializing Devices.
100 MB Full-Duplex (auto-neg)

** Image information not found. **

CPU type 0x29107: 256MHz, Bus: 128MHz, Ref: 32MHz

Total memory used by CFE:  0x80401000 - 0x80523030 (1187888)
Initialized Data:          0x8041B0E0 - 0x8041C9B0 (6352)
BSS Area:                  0x8041C9B0 - 0x80421030 (18048)
Local Heap:                0x80421030 - 0x80521030 (1048576)
Stack Area:                0x80521030 - 0x80523030 (8192)
Text (code) segment:       0x80401000 - 0x8041B0D8 (106712)
Boot area (physical):      0x00524000 - 0x00564000
Relocation Factor:         I:00000000 - D:00000000

Board IP address                : 192.168.2.1:ffffff00  
Host IP address                 : 192.168.2.100  
Gateway IP address              :   
Run from flash/host (f/h)       : f  
Default host run file name      : vmlinux  
Default host flash file name    : bcm963xx_fs_kernel  
Boot delay (0-9 seconds)        : 5  
Board Id Name                   : 96348GW  
Psi size in KB                  : 24
Number of MAC Addresses (1-32)  : 12  
Base MAC Address                : 00:16:38:xx:xx:xx  
Ethernet PHY Type               : Internal
Memory size in MB               : 16

CFE&gt; 
web info: Waiting for connection on socket 0.

CFE&gt;</code></pre></div><p>What&#039;s wrong?<br />I saw in trunk/target/linux/brcm63xx-2.6/image/Makefile there are variables such as load address and kernel entry. Is it standard for all 963xx boards?<br />Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p46538">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">aurelbu</div>
					<div class="post-datetime">
						16 Apr 2007, 18:45					</div>
				</div>
				<div class="post-content content">
					<p>BTW, is there a difference in the firmware made using trx or using bcmImageBuilder??</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p46549">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">aurelbu</div>
					<div class="post-datetime">
						16 Apr 2007, 23:20					</div>
				</div>
				<div class="post-content content">
					<p>Ok I succeed in booting... but using bcmImageBuilder, cmplzma and mksquashfs from broadcom<br />now the boot process stops with a kernel panic <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> </p><div class="codebox"><pre><code>CFE version 1.0.37-0.7 for BCM96348 (32bit,SP,BE)
Build Date: .- 10.? 21 09:34:25 CST 2005 (root@hp)
Copyright (C) 2000,2001,2002,2003 Broadcom Corporation.

Initializing Arena.
Initializing Devices.
100 MB Full-Duplex (auto-neg)
CPU type 0x29107: 256MHz, Bus: 128MHz, Ref: 32MHz

Total memory used by CFE:  0x80401000 - 0x80523030 (1187888)
Initialized Data:          0x8041B0E0 - 0x8041C9B0 (6352)
BSS Area:                  0x8041C9B0 - 0x80421030 (18048)
Local Heap:                0x80421030 - 0x80521030 (1048576)
Stack Area:                0x80521030 - 0x80523030 (8192)
Text (code) segment:       0x80401000 - 0x8041B0D8 (106712)
Boot area (physical):      0x00524000 - 0x00564000
Relocation Factor:         I:00000000 - D:00000000

Board IP address                : 192.168.2.1:ffffff00  
Host IP address                 : 192.168.2.100  
Gateway IP address              :   
Run from flash/host (f/h)       : f  
Default host run file name      : vmlinux  
Default host flash file name    : bcm963xx_fs_kernel  
Boot delay (0-9 seconds)        : 5  
Board Id Name                   : 96348GW  
Psi size in KB                  : 24
Number of MAC Addresses (1-32)  : 12  
Base MAC Address                : 00:16:38:xx:xx:xx
Ethernet PHY Type               : Internal
Memory size in MB               : 16

*** Press any key to stop auto run (5 seconds) ***
Auto run second count down: 0
Code Address: 0x80010000, Entry Address: 0x80274000
Decompression OK!
Entry at 0x80274000
Closing network.
Starting program at 0x80274000
Linux version 2.6.19.2 (aurelbu@home) (gcc version 4.1.2) #5 Sun Apr 15 21:28:34 CEST 2007
Broadcom BCM963xx prom init
Boot loader is : CFE
CPU revision is: 00029107
Broadcom BCM963xx MPI
mpi: No Card is in the PCMCIA slot
Determined physical RAM map:
 memory: 00fa0000 @ 00000000 (usable)
Built 1 zonelists.  Total pages: 3969
Kernel command line: 
bcm963xx: enabling icache and dcache...
Primary instruction cache 16kB, physically tagged, 2-way, linesize 16 bytes.
Primary data cache 8kB, 2-way, linesize 16 bytes.
Synthesized TLB refill handler (19 instructions).
Synthesized TLB load handler fastpath (31 instructions).
Synthesized TLB store handler fastpath (31 instructions).
Synthesized TLB modify handler fastpath (30 instructions).
PID hash table entries: 64 (order: 6, 256 bytes)
calculating r4koff... 0007d000(512000)
CPU frequency 256.00 MHz
Using 128.000 MHz high precision timer.
Dentry cache hash table entries: 2048 (order: 1, 8192 bytes)
Inode-cache hash table entries: 1024 (order: 0, 4096 bytes)
Memory: 13080k/16000k available (1868k kernel code, 2920k reserved, 575k data, 108k init, 0k highmem)
Mount-cache hash table entries: 512
Checking for &#039;wait&#039; instruction...  unavailable.
NET: Registered protocol family 16
NET: Registered protocol family 2
IP route cache hash table entries: 128 (order: -3, 512 bytes)
TCP established hash table entries: 512 (order: -1, 2048 bytes)
TCP bind hash table entries: 256 (order: -2, 1024 bytes)
TCP: Hash tables configured (established 512 bind 256)
TCP reno registered
audit: initializing netlink socket (disabled)
audit(946684800.200:1): initialized
squashfs: version 3.0 (2006/03/15) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) (SUMMARY)  (C) 2001-2006 Red Hat, Inc.
io scheduler noop registered
io scheduler cfq registered (default)
bcm963xx_serial driver v2.0
BCM963xx flash init: 0x1fc00000 0x00400000
Physically mapped flash: Found 1 x16 devices at 0x0 in 16-bit bank
 Amd/Fujitsu Extended Query Table at 0x0040
Physically mapped flash: Swapping erase regions for broken CFI table.
number of CFI chips: 1
cfi_cmdset_0002: Disabling erase-suspend-program due to code brokenness.
Flash device: 0x400000 at 0x1fc00000
Searching for RedBoot partition table in Physically mapped flash at offset 0x3f0000
No RedBoot partition table detected in Physically mapped flash
Creating 0 MTD partitions on &quot;Physically mapped flash&quot;:
ip_conntrack version 2.4 (125 buckets, 1000 max) - 240 bytes per conntrack
ip_tables: (C) 2000-2006 Netfilter Core Team
TCP bic registered
NET: Registered protocol family 1
NET: Registered protocol family 17
NET: Registered protocol family 15
Bridge firewalling registered
VFS: Cannot open root device &quot;&lt;NULL&gt;&quot; or unknown-block(0,0)
Time: MIPS clocksource has been installed.
Please append a correct &quot;root=&quot; boot option
Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0)</code></pre></div><p>1 - how can I make trx works with my board?<br />2 - Any Idea for the kernel panic?</p><p>Any help is welcome ... ;-)</p>											<p class="post-edited">(Last edited by <strong>aurelbu</strong> on 17 Apr 2007, 00:32)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>