<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [HELP] Porting to a new target (StorLink based NASes)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 1 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p63724">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">lordscaffard</div>
					<div class="post-datetime">
						19 Feb 2008, 21:53					</div>
				</div>
				<div class="post-content content">
					<p>Hi there! I am an OpenWRT newbie. I started working on it about 1 week ago because i&#039;d like to port OpenWRT to my NAS (DUAL HDD NAS and a GIGANAS, two StorLink ARM based products). <br />My NAS producer (MRT Communications) - and others using the same NAS platform (the complete list is here: <a href="http://mrt.nas-central.org/index.php/StorLink_based_products)">http://mrt.nas-central.org/index.php/St â€¦ _products)</a> - released the kernel sources of their firmware. They&#039;re based on the same 2.6.15 kernel patches with very little differences (like GPIO mappings). What i did is creating a new target for OpenWRT, a new directory for generic 2.6.15 kernel with its patches (i only added squashfs support), a new configuration file and then i built all (after some day of happy hacking). I used the little endian standard (no EABI).</p><p>Now i finally got OpenWRT compiling and working but i still have little issues that i dont understand:</p><p>a) is there a way to have a single target (StorLink SL2312 cpu) with different subtargets (products names...) and common patches + separate patches for each of these, including kernel configuration inside the same target? <br />b) is there any issue using that kernel version instead of 2.6.22? are all the generic 2.6.22 patches needed to previous kernels like mine (some packages dont compile like tc, genl and ip)?<br />c) is there a default kernel configuration should i use for starting point of my config to let everything compile fine? <br />d) what does &quot;rootfstype=squashfs, jffs2&quot; mean? i really dont find its use. i only thing about rootfs overlapping using two MTD partitions but i dont find any documentation about that.<br />e) when booting (no matter if root is on NFS or JFFS2) i always have the boot stopped on the first call to hotplug2, and i dont know why. only removing its calls or its binary, the system will startup fine. Is a known strange behaviour or problem?<br />f) what about devfs or udev? i dont see any device on /dev but these i create !!<br />g) how to build a single package or rootfs or kernel from main Makefile (what special target should i use)?</p><p>Thank you all for your precious help. I hope my target - and my packages i am already using (like mtd-utils) could be soon included into the project.</p><p>Bye,<br />Lord Scaffard</p>											<p class="post-edited">(Last edited by <strong>lordscaffard</strong> on 19 Feb 2008, 22:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p63787">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">monnier</div>
					<div class="post-datetime">
						20 Feb 2008, 23:29					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>lordscaffard wrote:</cite><blockquote><p>Thank you all for your precious help. I hope my target - and my packages i am already using (like mtd-utils) could be soon included into the project.</p></blockquote></div><p>Not much help directly, but I suspect you&#039;ll get more useful responses on the openwrt-devel mailing-list.&nbsp; See <a href="http://lists.openwrt.org">http://lists.openwrt.org</a>/</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p64421">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">rabside</div>
					<div class="post-datetime">
						2 Mar 2008, 17:42					</div>
				</div>
				<div class="post-content content">
					<p>Hi!<br />I bought the same NAS. Did you achieve anything?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p64431">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">lordscaffard</div>
					<div class="post-datetime">
						2 Mar 2008, 19:52					</div>
				</div>
				<div class="post-content content">
					<p>I had not help from this forum. I had my NAS working with OpenWRT but i still have &quot;some&quot; little issue:<br />- i got a &quot;division by zero in kernel&quot; when mounting my root jffs2 image (dont matter if using a real or fake MTD device). but that seems not to stop the mounting process.<br />- JFFS2 seems to become corrupted easily when you hard-shutdown the NAS (this is a strange behaviour because of the nature of the JFFS2) <br />- power button is not supported (i have not tried to catch the button to shutdown the host)</p><p>If you can contribute to this project i can extract my patches to OpenWRT and publish somewhere. We have a specific StorLink devices forum here: <a href="http://storlinkdevices.memoriedigitali.com">http://storlinkdevices.memoriedigitali.com</a> We could start talking there, if you want. We also have a wiki here: <a href="http://mrt.nas-central.org/index.php/Main_Page">http://mrt.nas-central.org/index.php/Main_Page</a>.</p><p>Let me know!</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>