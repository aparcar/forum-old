<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [How-To] Compiling NGINX with SSL (or other opts) for your router</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 16 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p352268">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mys5droid</div>
					<div class="post-datetime">
						18 Feb 2017, 11:57					</div>
				</div>
				<div class="post-content content">
					<p>Content has been moved to a Wiki located here: <a href="http://wiki.findrbot.com/compile-package-openwrt">http://wiki.findrbot.com/compile-package-openwrt</a></p><p>Posting was kept for bugs <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /></p>											<p class="post-edited">(Last edited by <strong>mys5droid</strong> on 23 Apr 2017, 20:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352272">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mys5droid</div>
					<div class="post-datetime">
						18 Feb 2017, 13:40					</div>
				</div>
				<div class="post-content content">
					<p>Praise and comments to follow <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p>And bug reports / questions...</p>											<p class="post-edited">(Last edited by <strong>mys5droid</strong> on 18 Feb 2017, 18:46)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352276">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">nitroshift</div>
					<div class="post-datetime">
						18 Feb 2017, 15:21					</div>
				</div>
				<div class="post-content content">
					<p>You will be able to post links after your post count reaches 10.</p><p>nitroshift</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352280">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mys5droid</div>
					<div class="post-datetime">
						18 Feb 2017, 17:39					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nitroshift wrote:</cite><blockquote><p>You will be able to post links after your post count reaches 10.</p><p>nitroshift</p></blockquote></div><p>Thanks... I&#039;ve fixed the SSL and I am updating it now.... Pls stand by....</p><p><strong>Fix Complete!</strong></p><p>I have 7 working servers forwarded using NGINX HTTP/S + RealIP:D</p><p><strong>Someone please test out this method and post if support needed. Thank you!</strong></p>											<p class="post-edited">(Last edited by <strong>mys5droid</strong> on 20 Feb 2017, 03:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352973">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">arthurdented</div>
					<div class="post-datetime">
						26 Feb 2017, 07:55					</div>
				</div>
				<div class="post-content content">
					<p>Hello, I think I was going down the same track as you and wanting to use certificates with nginx so I am glad you have made this guide. <br />I&#039;m not an expert by any means, so I am following your steps but not completely sure what I am doing.</p><p>I was getting stuck at the step<br /></p><div class="codebox"><pre><code>make menuconfig</code></pre></div><p>When I entered this from the SDK root folder I got these errors.</p><div class="codebox"><pre><code>me@ubuntu:~/OpenWrt-SDK-15.05.1-ar71xx-generic_gcc-4.8-linaro_uClibc-0.9.33.2.Linux-x86_64$ make menuconfig
tmp/.config-package.in:8:warning: ignoring type redefinition of &#039;PACKAGE_base-files&#039; from &#039;boolean&#039; to &#039;tristate&#039;
tmp/.config-package.in:54:warning: ignoring type redefinition of &#039;PACKAGE_busybox&#039; from &#039;boolean&#039; to &#039;tristate&#039;
feeds/base/package/utils/busybox/config/Config.in:818: glob failed: No files found &quot;package/utils/busybox/config/libbb/Config.in&quot;
/home/me/OpenWrt-SDK-15.05.1-ar71xx-generic_gcc-4.8-linaro_uClibc-0.9.33.2.Linux-x86_64/include/toplevel.mk:116: recipe for target &#039;menuconfig&#039; failed
make: *** [menuconfig] Error 1</code></pre></div><p>I have resolved this by making a symbolic link in the package folder that points to the feeds/base/package/utils folder as follows:</p><div class="codebox"><pre><code>ln -s ../feeds/base/package/utils package/utils</code></pre></div><p>I noticed that you have this step later on before running &#039;make&#039; on the customised build.</p><p>menuconfig then runs OK</p>											<p class="post-edited">(Last edited by <strong>arthurdented</strong> on 26 Feb 2017, 09:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352974">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">arthurdented</div>
					<div class="post-datetime">
						26 Feb 2017, 09:18					</div>
				</div>
				<div class="post-content content">
					<p>Last problem - which I have also resolved.</p><p>I ended up with a small pile of .ipk files which I was able to scp to the router.</p><p>When I attempt to install them with:</p><div class="codebox"><pre><code>opkg install *.ipk</code></pre></div><p>I ended up with a lot of error messages like this:</p><div class="codebox"><pre><code>Collected errors:
 * opkg_install_pkg: Package ldconfig sha256sum mismatch. Either the opkg or the package index are corrupt. Try &#039;opkg update&#039;.
 * opkg_install_cmd: Cannot install package ldconfig.
 * opkg_install_pkg: Package ldd sha256sum mismatch. Either the opkg or the package index are corrupt. Try &#039;opkg update&#039;.
 * opkg_install_cmd: Cannot install package ldd.
...&lt;snip&gt;.</code></pre></div><p>I used the --force-checksum option with opkg to make it ignore the checksum like this:</p><div class="codebox"><pre><code>opkg install --force-checksum *.ipk</code></pre></div><p>this seems to install all the components but we get this warning at the end which I am going to ignore in the hope that it is something that I can safely ignore.</p><div class="codebox"><pre><code>Collected errors:
 * resolve_conffiles: Existing conffile /etc/ssl/openssl.cnf is different from the conffile in the new package. The new conffile will be placed at /etc/ssl/openssl.cnf-opkg.</code></pre></div>											<p class="post-edited">(Last edited by <strong>arthurdented</strong> on 26 Feb 2017, 09:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p356897">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">mys5droid</div>
					<div class="post-datetime">
						23 Apr 2017, 20:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arthurdented wrote:</cite><blockquote><p>Last problem - which I have also resolved.</p><p>I ended up with a small pile of .ipk files which I was able to scp to the router.</p><p>When I attempt to install them with:</p><div class="codebox"><pre><code>opkg install *.ipk</code></pre></div><p>I ended up with a lot of error messages like this:</p><div class="codebox"><pre><code>Collected errors:
 * opkg_install_pkg: Package ldconfig sha256sum mismatch. Either the opkg or the package index are corrupt. Try &#039;opkg update&#039;.
 * opkg_install_cmd: Cannot install package ldconfig.
 * opkg_install_pkg: Package ldd sha256sum mismatch. Either the opkg or the package index are corrupt. Try &#039;opkg update&#039;.
 * opkg_install_cmd: Cannot install package ldd.
...&lt;snip&gt;.</code></pre></div><p>I used the --force-checksum option with opkg to make it ignore the checksum like this:</p><div class="codebox"><pre><code>opkg install --force-checksum *.ipk</code></pre></div><p>this seems to install all the components but we get this warning at the end which I am going to ignore in the hope that it is something that I can safely ignore.</p><div class="codebox"><pre><code>Collected errors:
 * resolve_conffiles: Existing conffile /etc/ssl/openssl.cnf is different from the conffile in the new package. The new conffile will be placed at /etc/ssl/openssl.cnf-opkg.</code></pre></div></blockquote></div><p>Nice work! I was going to move this off to my wiki and delete the post... But I will keep it! Thanks for replying!</p><p>That last error is telling you that the existing configuration file has modifications, so the package installer has installed the new package configuration file in a different location - /etc/ssl/openssl.cnf-opkg - so you can ignore this unless there are new configuration options you wish to use...</p><p>You might want to:<br /></p><div class="codebox"><pre><code>mv /etc/ssl/openssl.cnf /etc/ssl/openssl.cnf.bak
mv /etc/ssl/openssl.cnf-opkg /etc/ssl/openssl.cnf
nano /etc/ssl/openssl.cnf</code></pre></div><p>and configure it again with the new configuration file.</p>											<p class="post-edited">(Last edited by <strong>mys5droid</strong> on 23 Apr 2017, 20:24)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>