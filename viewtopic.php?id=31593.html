<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> port-based ONLY for wrt54g - request verification</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p142309">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">SamHuang</div>
					<div class="post-datetime">
						27 Aug 2011, 18:14					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />&nbsp; &nbsp; &nbsp; &nbsp; I&#039;ve got wrt54g (v2.2/v3), had read many doc but got confused. Maybe due to intermix used of the terms: 802.1q|tagged|trunk|mac-based with port-based|static vlan. ie &#039;802.1q&#039; is used where &#039;vlan&#039; is referred.<br />&nbsp; &nbsp; &nbsp; &nbsp; Please correct me for my current understanding as follows:<br />(no referrence to ATM/protocal-based vlan)</p><p>1) wrt54g (v2.2/v3) only got port-based vlan<br />&nbsp; &nbsp; &nbsp; &nbsp; - although bcm5325ekqm datasheet mentioned tagged vlan, it is only tagged for transfer __in__ the __only__ internal trunk (between port 5 of the switch and eth0 of the SoC).<br />&nbsp; &nbsp; &nbsp; &nbsp; ----&gt;&nbsp; Tagged when frames enter phy ports, transfer to SoC, tag removed and map to virtual ports (eth0.1, eth0.2 etc as seen by sw side, ie what we seen from openwrt). Tagged when frames leaves SoC (openwrt), transfer to switch, tag removed in switch and send to respective port(s) of the tagged vlan#.<br />&nbsp; &nbsp; &nbsp; &nbsp; ----&gt;&nbsp; ie all tagging is only within the &#039;hardware&#039; section of the device; no tag is seen (other than the driver) on openwrt port or phy port.</p><p>2) due to internal tagging (only):<br />&nbsp; &nbsp; &nbsp; &nbsp; - no 802.1q tag is seen outside the phy device (ie effectively no 802.1q vlan tag from phy port nor on sw side of openwrt).&nbsp; ie effectively can treat wrt54g (v2.2/v3) as port-based __only__ device.</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - therefore used of &#039;u&#039;ntagged and &#039;t&#039;agged hint (even for port 5) when setting nvram is of no effect on wrt54g (v2.2/v3) or similar port-based device.<br />&nbsp; &nbsp; &nbsp; &nbsp; - ports of vlan# other then the default vlan will be auto/always tagged internally, irrespective of stating &#039;u&#039; or &#039;t&#039; in nvram setting.</p><p>3) due to (2) -&gt; no 802.1q tagging<br />&nbsp; &nbsp; &nbsp; &nbsp; - mac flooding/arp attack etc has no effect on such port-based __only__ device.</p><p>Please kindly direct me if there is any table/doc/database that has such list of vlan type (ie only port-based/susceptable to vlan attack etc) for each device.&nbsp; Many of the howto/doc just mentioned their steps on openwrt w/o referring to the device (version) that got me confused.</p><p>Thanks in advances for reading my post, hope to hear from your response soon.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>