<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Asterisk 1.2.14 and 1.4.0-beta4</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 5 Apr 2018 and 19 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=8629&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p39536">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">peng</div>
					<div class="post-datetime">
						24 Dec 2006, 15:45					</div>
				</div>
				<div class="post-content content">
					<p>HI zandbelt,</p><p>Does this Asterisk pointing to the Asterisk.org 1.4 version? If not, what do I need to modify to make it get souce from either asterisk.org 1.2 or 1.4 version?</p><p>thanks<br />peng</p><p>Building from source<br />Update: the source patch does not yet contain the zaptel dummy timer patch (ie. no support for app_meetme or iax2 trunking).</p><p>&nbsp; &nbsp;1. svn co <a href="https://svn.openwrt.org/openwrt/branches/whiterussian/">https://svn.openwrt.org/openwrt/branches/whiterussian/</a><br />&nbsp; &nbsp; &nbsp; (accept the certificate temporarily (t))<br />&nbsp; &nbsp;2. patch -p0 &lt; openwrt-whiterussian-bluez-libs-2.24-asterisk-1.2.13.patch<br />&nbsp; &nbsp;3. cd whiterussian/openwrt<br />&nbsp; &nbsp;4. make menuconfig<br />&nbsp; &nbsp; &nbsp; select asterisk in Networking section and everything except chan-h323 and asterisk-sqlite<br />&nbsp; &nbsp;5. make</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39595">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">ericw12</div>
					<div class="post-datetime">
						26 Dec 2006, 11:55					</div>
				</div>
				<div class="post-content content">
					<p>Could someone cross build zaprtc for 2.4 kernel please. My router WRTSL54GS does not support usb-uhci.... ;(</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39597">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						26 Dec 2006, 12:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ericw12 wrote:</cite><blockquote><p>Could someone cross build zaprtc for 2.4 kernel please. My router WRTSL54GS does not support usb-uhci.... ;(</p></blockquote></div><p>I built and tried this one but think it did not work on my Asus WL-500GX:</p><p>&nbsp; <a href="http://zandbelt.dyndns.org/asterisk/zaprtc.o">http://zandbelt.dyndns.org/asterisk/zaprtc.o</a></p><p>zaprtc-0.0.1, whiterussian kernel 2.4.30, zaptel header from 1.2.12</p><p>I&#039;m very curious to know wether it works for you; if so, I&#039;ll create an ipkg for it.<br />I guess it wouldn&#039;t because your device needs a real time clock for it and I don&#039;t think this is supported on mipsel devices...</p><p>Hans.</p>											<p class="post-edited">(Last edited by <strong>zandbelt</strong> on 26 Dec 2006, 14:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39604">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">peng</div>
					<div class="post-datetime">
						26 Dec 2006, 14:15					</div>
				</div>
				<div class="post-content content">
					<p>HI Zandbelt,<br />I tried your 1.2.14 version with ssl loaded, but it also seems not working without any obvious error.</p><p>hmmm, has no clue about what&#039;s going on.</p><p>peng</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39700">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">peng</div>
					<div class="post-datetime">
						28 Dec 2006, 17:16					</div>
				</div>
				<div class="post-content content">
					<p>HI Zandbelt,</p><p>The follwoing are some caputered info for your info. 1.2.14 doesn&#039;t seem to work in my wrt54gs after I use ImageBuilder to mix your ipk to the existing files.<br />source list.</p><p>base-files<br />base-files-brcm<br />bridge<br />busybox<br />dnsmasq<br />dropbear<br />haserl<br />ipkg<br />iptables<br />iwlib<br />kmod-brcm-wl<br />kmod-diag<br />kmod-switch<br />kmod-wlcompat<br />mtd<br />nvram<br />uclibc<br />wificonf<br />wireless-tools<br />libgcc<br />ip<br />iptables-mod-conntrack<br />iptables-mod-extra<br />iptables-mod-filter<br />iptables-mod-imq<br />iptables-mod-ipopt<br />iptables-mod-ipsec<br />kmod-imq<br />kmod-ipt-conntrack<br />kmod-ipt-extra<br />kmod-ipt-filter<br />kmod-ipt-ipopt<br />kmod-ipt-ipsec<br />kmod-sched<br />kmod-tun<br />qos-scripts<br />tc<br />nas<br />libncurses<br />libpthread<br />asterisk<br />asterisk-sounds<br />asterisk-voicemail<br />asterisk-res-crypto<br />asterisk-pbx-dundi<br />asterisk-mysql<br />asterisk-pgsql<br />ez-ipupdate<br />openntpd<br />openvpn<br />openssl-util<br />libopenssl<br />liblzo<br />ipkg-upgrade-fix<br />webif</p><p>When I issued the &quot;asterisk&quot; command to bring up the asterisk,<br />root@OpenWrt:/$ asterisk <br />root@OpenWrt:/$ ps<br />&nbsp; PID&nbsp; Uid&nbsp; &nbsp; &nbsp;VmSize Stat Command<br />&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp; &nbsp; 356 S&nbsp; &nbsp;init&nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 2 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [keventd]<br />&nbsp; &nbsp; 3 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RWN [ksoftirqd_CPU0]<br />&nbsp; &nbsp; 4 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [kswapd]<br />&nbsp; &nbsp; 5 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [bdflush]<br />&nbsp; &nbsp; 6 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [kupdated]<br />&nbsp; &nbsp; 8 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [mtdblockd]<br />&nbsp; &nbsp;92 root&nbsp; &nbsp; &nbsp; &nbsp; 344 S&nbsp; &nbsp;logger -s -p 6 -t&nbsp; <br />&nbsp; &nbsp;94 root&nbsp; &nbsp; &nbsp; &nbsp; 356 S&nbsp; &nbsp;init&nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp;97 root&nbsp; &nbsp; &nbsp; &nbsp; 316 S&nbsp; &nbsp;klogd <br />&nbsp; 122 root&nbsp; &nbsp; &nbsp; &nbsp; 336 S&nbsp; &nbsp;/sbin/syslogd -C 16 -m 0 <br />&nbsp; 478 root&nbsp; &nbsp; &nbsp; &nbsp; 324 S&nbsp; &nbsp;wifi up <br />&nbsp; 660 root&nbsp; &nbsp; &nbsp; &nbsp; 368 S&nbsp; &nbsp;udhcpc -i vlan1 -r 10.10.10.10 -b -p /var/run/vlan1.p<br />&nbsp; 667 ntp&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;356 S&nbsp; &nbsp;/usr/sbin/ntpd -s <br />&nbsp; 669 root&nbsp; &nbsp; &nbsp; &nbsp; 356 S&nbsp; &nbsp;/usr/sbin/ntpd -s <br />&nbsp; 691 root&nbsp; &nbsp; &nbsp; &nbsp; 412 S&nbsp; &nbsp;/usr/sbin/nas -P /var/run/nas.lan.pid -l br0 -H 34954<br />&nbsp; 705 root&nbsp; &nbsp; &nbsp; &nbsp; 380 S&nbsp; &nbsp;httpd -p 80 -h /www -r OpenWrt <br />&nbsp; 795 root&nbsp; &nbsp; &nbsp; &nbsp; 312 S&nbsp; &nbsp;telnetd -l /bin/login <br />&nbsp; 866 nobody&nbsp; &nbsp; &nbsp; 424 S&nbsp; &nbsp;dnsmasq -l /tmp/dhcp.leases -K -F lan,192.168.15.100,<br />&nbsp; 993 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SWN [jffs2_gcd_mtd4]<br /> 1022 root&nbsp; &nbsp; &nbsp; &nbsp; 384 S&nbsp; &nbsp;/usr/sbin/dropbear <br /> 1023 root&nbsp; &nbsp; &nbsp; &nbsp; 524 S&nbsp; &nbsp;/bin/ash --login <br /> 1048 root&nbsp; &nbsp; &nbsp; &nbsp; 328 R&nbsp; &nbsp;ps <br />root@OpenWrt:/$ </p><p>It&#039;s not up.<br />root@OpenWrt:/$ /etc/init.d/S60asterisk <br />root@OpenWrt:/$ ps<br />&nbsp; PID&nbsp; Uid&nbsp; &nbsp; &nbsp;VmSize Stat Command<br />&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp; &nbsp; 356 S&nbsp; &nbsp;init&nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 2 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [keventd]<br />&nbsp; &nbsp; 3 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RWN [ksoftirqd_CPU0]<br />&nbsp; &nbsp; 4 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [kswapd]<br />&nbsp; &nbsp; 5 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [bdflush]<br />&nbsp; &nbsp; 6 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [kupdated]<br />&nbsp; &nbsp; 8 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [mtdblockd]<br />&nbsp; &nbsp;92 root&nbsp; &nbsp; &nbsp; &nbsp; 344 S&nbsp; &nbsp;logger -s -p 6 -t&nbsp; <br />&nbsp; &nbsp;94 root&nbsp; &nbsp; &nbsp; &nbsp; 356 S&nbsp; &nbsp;init&nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp;97 root&nbsp; &nbsp; &nbsp; &nbsp; 316 S&nbsp; &nbsp;klogd <br />&nbsp; 122 root&nbsp; &nbsp; &nbsp; &nbsp; 336 S&nbsp; &nbsp;/sbin/syslogd -C 16 -m 0 <br />&nbsp; 478 root&nbsp; &nbsp; &nbsp; &nbsp; 324 S&nbsp; &nbsp;wifi up <br />&nbsp; 660 root&nbsp; &nbsp; &nbsp; &nbsp; 368 S&nbsp; &nbsp;udhcpc -i vlan1 -r 10.10.10.10 -b -p /var/run/vlan1.p<br />&nbsp; 667 ntp&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;356 S&nbsp; &nbsp;/usr/sbin/ntpd -s <br />&nbsp; 669 root&nbsp; &nbsp; &nbsp; &nbsp; 356 S&nbsp; &nbsp;/usr/sbin/ntpd -s <br />&nbsp; 691 root&nbsp; &nbsp; &nbsp; &nbsp; 412 S&nbsp; &nbsp;/usr/sbin/nas -P /var/run/nas.lan.pid -l br0 -H 34954<br />&nbsp; 705 root&nbsp; &nbsp; &nbsp; &nbsp; 380 S&nbsp; &nbsp;httpd -p 80 -h /www -r OpenWrt <br />&nbsp; 795 root&nbsp; &nbsp; &nbsp; &nbsp; 312 R&nbsp; &nbsp;telnetd -l /bin/login <br />&nbsp; 866 nobody&nbsp; &nbsp; &nbsp; 424 S&nbsp; &nbsp;dnsmasq -l /tmp/dhcp.leases -K -F lan,192.168.15.100,<br />&nbsp; 993 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SWN [jffs2_gcd_mtd4]<br /> 1022 root&nbsp; &nbsp; &nbsp; &nbsp; 384 S&nbsp; &nbsp;/usr/sbin/dropbear <br /> 1023 root&nbsp; &nbsp; &nbsp; &nbsp; 524 S&nbsp; &nbsp;/bin/ash --login <br /> 1052 root&nbsp; &nbsp; &nbsp; &nbsp; 328 R&nbsp; &nbsp;ps <br />root@OpenWrt:/$ /etc/init.d/S60asterisk restart<br />root@OpenWrt:/$ ps<br />&nbsp; PID&nbsp; Uid&nbsp; &nbsp; &nbsp;VmSize Stat Command<br />&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp; &nbsp; 356 S&nbsp; &nbsp;init&nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 2 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [keventd]<br />&nbsp; &nbsp; 3 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RWN [ksoftirqd_CPU0]<br />&nbsp; &nbsp; 4 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [kswapd]<br />&nbsp; &nbsp; 5 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [bdflush]<br />&nbsp; &nbsp; 6 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [kupdated]<br />&nbsp; &nbsp; 8 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [mtdblockd]<br />&nbsp; &nbsp;92 root&nbsp; &nbsp; &nbsp; &nbsp; 344 S&nbsp; &nbsp;logger -s -p 6 -t&nbsp; <br />&nbsp; &nbsp;94 root&nbsp; &nbsp; &nbsp; &nbsp; 356 S&nbsp; &nbsp;init&nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp;97 root&nbsp; &nbsp; &nbsp; &nbsp; 316 S&nbsp; &nbsp;klogd <br />&nbsp; 122 root&nbsp; &nbsp; &nbsp; &nbsp; 336 S&nbsp; &nbsp;/sbin/syslogd -C 16 -m 0 <br />&nbsp; 478 root&nbsp; &nbsp; &nbsp; &nbsp; 324 S&nbsp; &nbsp;wifi up <br />&nbsp; 660 root&nbsp; &nbsp; &nbsp; &nbsp; 368 S&nbsp; &nbsp;udhcpc -i vlan1 -r 10.10.10.10 -b -p /var/run/vlan1.p<br />&nbsp; 667 ntp&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;356 S&nbsp; &nbsp;/usr/sbin/ntpd -s <br />&nbsp; 669 root&nbsp; &nbsp; &nbsp; &nbsp; 356 S&nbsp; &nbsp;/usr/sbin/ntpd -s <br />&nbsp; 691 root&nbsp; &nbsp; &nbsp; &nbsp; 412 S&nbsp; &nbsp;/usr/sbin/nas -P /var/run/nas.lan.pid -l br0 -H 34954<br />&nbsp; 705 root&nbsp; &nbsp; &nbsp; &nbsp; 380 S&nbsp; &nbsp;httpd -p 80 -h /www -r OpenWrt <br />&nbsp; 795 root&nbsp; &nbsp; &nbsp; &nbsp; 312 S&nbsp; &nbsp;telnetd -l /bin/login <br />&nbsp; 866 nobody&nbsp; &nbsp; &nbsp; 424 S&nbsp; &nbsp;dnsmasq -l /tmp/dhcp.leases -K -F lan,192.168.15.100,<br />&nbsp; 993 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SWN [jffs2_gcd_mtd4]<br /> 1022 root&nbsp; &nbsp; &nbsp; &nbsp; 384 S&nbsp; &nbsp;/usr/sbin/dropbear <br /> 1023 root&nbsp; &nbsp; &nbsp; &nbsp; 524 S&nbsp; &nbsp;/bin/ash --login <br /> 1056 root&nbsp; &nbsp; &nbsp; &nbsp; 328 R&nbsp; &nbsp;ps <br />root@OpenWrt:/$ <br />root@OpenWrt:/$&nbsp; asterisk -vvvvvvvvvvvvr<br />Unable to connect to remote asterisk (does /var/run/asterisk.ctl exist?)<br />root@OpenWrt:/$ more /var/run/asterisk.<br />/var/run/asterisk.ctl&nbsp; &nbsp;/var/run/asterisk.pid <br />root@OpenWrt:/$ more /var/run/asterisk.ctl <br />more: /var/run/asterisk.ctl: No such device or address<br />root@OpenWrt:/$ <br />root@OpenWrt:/$ more /var/run/asterisk.pid <br />1041</p><br /><br /><p>root@OpenWrt:/$ more /var/log/asterisk/messages <br />Dec 28 15:09:12 NOTICE[1041] cdr.c: CDR simple logging enabled.<br />Dec 28 15:09:14 WARNING[1041] res_musiconhold.c: Unable to open pseudo channel for timing...&nbsp; Sound may be choppy.<br />Dec 28 15:09:14 WARNING[1047] res_musiconhold.c: /var/lib/asterisk/mohmp3 is not a valid directory<br />Dec 28 15:09:14 WARNING[1047] res_musiconhold.c: Unable to spawn mp3player<br />Dec 28 15:09:14 WARNING[1041] loader.c: File not found<br />Dec 28 15:09:14 WARNING[1041] loader.c: Loading module pbx_dundi.so failed!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39701">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">peng</div>
					<div class="post-datetime">
						28 Dec 2006, 17:18					</div>
				</div>
				<div class="post-content content">
					<p>root@OpenWrt:/$ more /usr/lib/asterisk/<br />/usr/lib/asterisk/astdb&nbsp; &nbsp; &nbsp; /usr/lib/asterisk/keys/&nbsp; &nbsp; &nbsp; /usr/lib/asterisk/mohmp3/<br />/usr/lib/asterisk/firmware/&nbsp; /usr/lib/asterisk/modules/&nbsp; &nbsp;/usr/lib/asterisk/sounds/<br />root@OpenWrt:/$ more /usr/lib/asterisk/</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39718">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						28 Dec 2006, 20:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>peng wrote:</cite><blockquote><p>root@OpenWrt:/$ /etc/init.d/S60asterisk restart</p></blockquote></div><p>did you modify the /etc/default/asterisk file?<br />you should set &quot;ENABLE_ASTERISK&quot; to &quot;yes&quot; there.</p><p>also make sure in /etc/asterisk/musiconhold.conf to point to /usr/lib/asterisk/mohmp3 instead of /var/lib/asterisk/mohmp3<br />(yes this could be changed in the packages itself, but its just the default asterisk config on non-openwrt machines)</p><p>Hans.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39785">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">ericw12</div>
					<div class="post-datetime">
						29 Dec 2006, 10:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zandbelt wrote:</cite><blockquote><div class="quotebox"><cite>ericw12 wrote:</cite><blockquote><p>Could someone cross build zaprtc for 2.4 kernel please. My router WRTSL54GS does not support usb-uhci.... ;(</p></blockquote></div><p>I built and tried this one but think it did not work on my Asus WL-500GX:</p><p>&nbsp; <a href="http://zandbelt.dyndns.org/asterisk/zaprtc.o">http://zandbelt.dyndns.org/asterisk/zaprtc.o</a></p><p>zaprtc-0.0.1, whiterussian kernel 2.4.30, zaptel header from 1.2.12</p><p>I&#039;m very curious to know wether it works for you; if so, I&#039;ll create an ipkg for it.<br />I guess it wouldn&#039;t because your device needs a real time clock for it and I don&#039;t think this is supported on mipsel devices...</p><p>Hans.</p></blockquote></div><p>That didn&#039;t work... which sort of make sense. Zaprtc is a RTC module replacement, which is something I don&#039;t have in my WRTSL54GS.<br />There is only one thing left according to <a href="http://www.voip-info.org/wiki/view/Asterisk+timer">http://www.voip-info.org/wiki/view/Asterisk+timer</a> --- realzap. Have you ever tried to port that?<br />I don&#039;t get why this thing have to have time source.... that sucks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39787">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">capouch</div>
					<div class="post-datetime">
						29 Dec 2006, 10:16					</div>
				</div>
				<div class="post-content content">
					<p>I hope someone could help me with this.</p><p>I&#039;m working on my own Asterisk package build, trying to do the recently-released 1.4.</p><p>I am almost there, but the build environment recommended by mbm (kamikaze via svn) does not seem to have the libtermcap.so file anywhere in the tree.&nbsp; </p><p>It is needed to build Asterisk, and after three hours of searching the net high and low, I can&#039;t find an openWRT ipkg, nor can I find the sources anywhere for that library.</p><p>If someone could provide me a clue I&#039;d be greatly appreciative.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39800">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						29 Dec 2006, 15:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>capouch wrote:</cite><blockquote><p>I&#039;m working on my own Asterisk package build, trying to do the recently-released 1.4.<br />I am almost there, but the build environment recommended by mbm (kamikaze via svn) does not seem to have the libtermcap.so file anywhere in the tree.</p></blockquote></div><p>You don&#039;t need libtermcap if you provide libncurses instead, which is in the packages repository.</p><p>BTW: I&#039;ll be uploading an enhancement ticket with a patch for asterisk 1.4.0 build support for kamikaze/WR-buildroot-ng later this day/tomorrow and I&#039;ll put up binary packages somewhere else.</p><p>Hans.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39802">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">peng</div>
					<div class="post-datetime">
						29 Dec 2006, 16:16					</div>
				</div>
				<div class="post-content content">
					<p>HI Zandbelt,</p><p>I tried your suggestions , but haven&#039;t got any success. My understanding with that default &quot;enable=yes&quot; is only used to help you boot asterisk when router boots. so, i don&#039;t think it coutns here.</p><p>I am not sure whether there&#039;s something wrong during your make of ipk.</p><p>the followings are some captures.</p><p>thanks<br />peng</p><p>root@OpenWrt:/$ more /var/log/asterisk/messages <br />Dec 29 14:03:50 NOTICE[1001] cdr.c: CDR simple logging enabled.<br />Dec 29 14:03:51 WARNING[1001] res_musiconhold.c: Unable to open pseudo channel for timing...&nbsp; Sound may be choppy.<br />Dec 29 14:03:51 WARNING[1008] res_musiconhold.c: Found no files in &#039;/usr/lib/asterisk/mohmp3&#039;<br />Dec 29 14:03:51 WARNING[1008] res_musiconhold.c: Unable to spawn mp3player<br />Dec 29 14:03:52 WARNING[1001] loader.c: File not found<br />Dec 29 14:03:52 WARNING[1001] loader.c: Loading module pbx_dundi.so failed!<br />Dec 29 14:06:14 NOTICE[1019] cdr.c: CDR simple logging enabled.<br />Dec 29 14:06:14 WARNING[1019] res_musiconhold.c: Unable to open pseudo channel for timing...&nbsp; Sound may be choppy.<br />Dec 29 14:06:14 WARNING[1025] res_musiconhold.c: Found no files in &#039;/usr/lib/asterisk/mohmp3&#039;<br />Dec 29 14:06:14 WARNING[1025] res_musiconhold.c: Unable to spawn mp3player<br />Dec 29 14:06:14 WARNING[1019] loader.c: File not found<br />Dec 29 14:06:14 WARNING[1019] loader.c: Loading module pbx_dundi.so failed!<br />Dec 29 14:06:46 NOTICE[1030] cdr.c: CDR simple logging enabled.<br />Dec 29 14:06:46 WARNING[1030] res_musiconhold.c: Unable to open pseudo channel for timing...&nbsp; Sound may be choppy.<br />Dec 29 14:06:46 WARNING[1030] loader.c: File not found<br />Dec 29 14:06:46 WARNING[1030] loader.c: Loading module pbx_dundi.so failed!<br />root@OpenWrt:/$ date<br />Fri Dec 29 14:07:38 UTC 2006</p><br /><p>root@OpenWrt:/$ more /etc/default/asterisk <br />## startup options for /etc/init.d/asterisk</p><p>root@OpenWrt:/$&nbsp; more /etc/asterisk/musiconhold.conf <br />;<br />; Music on Hold -- Sample Configuration<br />;</p><p>[default]<br />mode=quietmp3<br />directory=/usr/lib/asterisk/mohmp3</p><br /><p>ENABLE_ASTERISK=&quot;yes&quot;<br />OPTIONS=&quot;&quot;<br />root@OpenWrt:/$ </p><br /><p>root@OpenWrt:/$ ps<br />&nbsp; PID&nbsp; Uid&nbsp; &nbsp; &nbsp;VmSize Stat Command<br />&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp; &nbsp; 356 S&nbsp; &nbsp;init&nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 2 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [keventd]<br />&nbsp; &nbsp; 3 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RWN [ksoftirqd_CPU0]<br />&nbsp; &nbsp; 4 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [kswapd]<br />&nbsp; &nbsp; 5 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [bdflush]<br />&nbsp; &nbsp; 6 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [kupdated]<br />&nbsp; &nbsp; 8 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [mtdblockd]<br />&nbsp; &nbsp;69 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SWN [jffs2_gcd_mtd4]<br />&nbsp; &nbsp;93 root&nbsp; &nbsp; &nbsp; &nbsp; 344 S&nbsp; &nbsp;logger -s -p 6 -t&nbsp; <br />&nbsp; &nbsp;95 root&nbsp; &nbsp; &nbsp; &nbsp; 356 S&nbsp; &nbsp;init&nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp;98 root&nbsp; &nbsp; &nbsp; &nbsp; 316 S&nbsp; &nbsp;klogd <br />&nbsp; 123 root&nbsp; &nbsp; &nbsp; &nbsp; 336 S&nbsp; &nbsp;/sbin/syslogd -C 16 -m 0 <br />&nbsp; 484 root&nbsp; &nbsp; &nbsp; &nbsp; 324 S&nbsp; &nbsp;wifi up <br />&nbsp; 534 root&nbsp; &nbsp; &nbsp; &nbsp; 412 S&nbsp; &nbsp;/usr/sbin/nas -P /var/run/nas.lan.pid -l br0 -H 34954<br />&nbsp; 541 root&nbsp; &nbsp; &nbsp; &nbsp; 392 S&nbsp; &nbsp;/usr/sbin/dropbear <br />&nbsp; 547 root&nbsp; &nbsp; &nbsp; &nbsp; 380 S&nbsp; &nbsp;httpd -p 80 -h /www -r OpenWrt <br />&nbsp; 831 nobody&nbsp; &nbsp; &nbsp; 424 S&nbsp; &nbsp;dnsmasq -l /tmp/dhcp.leases -K -F lan,192.168.15.100,<br />&nbsp; 845 root&nbsp; &nbsp; &nbsp; &nbsp; 368 S&nbsp; &nbsp;udhcpc -i vlan1 -r 10.10.10.10 -b -p /var/run/vlan1.p<br />&nbsp; 871 ntp&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;356 S&nbsp; &nbsp;/usr/sbin/ntpd -s <br />&nbsp; 880 root&nbsp; &nbsp; &nbsp; &nbsp; 356 S&nbsp; &nbsp;/usr/sbin/ntpd -s <br />&nbsp; 992 root&nbsp; &nbsp; &nbsp; &nbsp; 596 R&nbsp; &nbsp;/usr/sbin/dropbear <br />&nbsp; 993 root&nbsp; &nbsp; &nbsp; &nbsp; 524 S&nbsp; &nbsp;-ash <br /> 1042 root&nbsp; &nbsp; &nbsp; &nbsp; 328 R&nbsp; &nbsp;ps </p><p>root@OpenWrt:~$ asterisk <br />root@OpenWrt:~$ ps&nbsp; &nbsp;<br />&nbsp; PID&nbsp; Uid&nbsp; &nbsp; &nbsp;VmSize Stat Command<br />&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp; &nbsp; 356 S&nbsp; &nbsp;init&nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 2 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [keventd]<br />&nbsp; &nbsp; 3 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RWN [ksoftirqd_CPU0]<br />&nbsp; &nbsp; 4 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [kswapd]<br />&nbsp; &nbsp; 5 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [bdflush]<br />&nbsp; &nbsp; 6 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [kupdated]<br />&nbsp; &nbsp; 8 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [mtdblockd]<br />&nbsp; &nbsp;69 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SWN [jffs2_gcd_mtd4]<br />&nbsp; &nbsp;93 root&nbsp; &nbsp; &nbsp; &nbsp; 344 S&nbsp; &nbsp;logger -s -p 6 -t&nbsp; <br />&nbsp; &nbsp;95 root&nbsp; &nbsp; &nbsp; &nbsp; 356 S&nbsp; &nbsp;init&nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp;98 root&nbsp; &nbsp; &nbsp; &nbsp; 316 S&nbsp; &nbsp;klogd <br />&nbsp; 123 root&nbsp; &nbsp; &nbsp; &nbsp; 336 S&nbsp; &nbsp;/sbin/syslogd -C 16 -m 0 <br />&nbsp; 483 root&nbsp; &nbsp; &nbsp; &nbsp; 324 S&nbsp; &nbsp;wifi up <br />&nbsp; 591 root&nbsp; &nbsp; &nbsp; &nbsp; 412 S&nbsp; &nbsp;/usr/sbin/nas -P /var/run/nas.lan.pid -l br0 -H 34954<br />&nbsp; 616 root&nbsp; &nbsp; &nbsp; &nbsp; 392 S&nbsp; &nbsp;/usr/sbin/dropbear <br />&nbsp; 628 root&nbsp; &nbsp; &nbsp; &nbsp; 380 S&nbsp; &nbsp;httpd -p 80 -h /www -r OpenWrt <br />&nbsp; 735 root&nbsp; &nbsp; &nbsp; &nbsp; 368 S&nbsp; &nbsp;udhcpc -i vlan1 -r 10.10.10.10 -b -p /var/run/vlan1.p<br />&nbsp; 751 ntp&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;356 S&nbsp; &nbsp;/usr/sbin/ntpd -s <br />&nbsp; 758 root&nbsp; &nbsp; &nbsp; &nbsp; 356 S&nbsp; &nbsp;/usr/sbin/ntpd -s <br />&nbsp; 835 root&nbsp; &nbsp; &nbsp; &nbsp; 596 R&nbsp; &nbsp;/usr/sbin/dropbear <br />&nbsp; 863 nobody&nbsp; &nbsp; &nbsp; 416 S&nbsp; &nbsp;dnsmasq -l /tmp/dhcp.leases -K -F lan,192.168.15.100,<br />&nbsp; 922 root&nbsp; &nbsp; &nbsp; &nbsp; 524 S&nbsp; &nbsp;-ash <br />&nbsp; 938 root&nbsp; &nbsp; &nbsp; &nbsp; 328 R&nbsp; &nbsp;ps <br />root@OpenWrt:~$ asterisk -vvvvvvvvvvvr<br />Unable to connect to remote asterisk (does /var/run/asterisk.ctl exist?)</p><p>root@OpenWrt:~$ ls /var/run/<br />/var/run/asterisk.ctl&nbsp; &nbsp;/var/run/dropbear.pid&nbsp; &nbsp;/var/run/vlan1.pid <br />/var/run/asterisk.pid&nbsp; &nbsp;/var/run/nas.lan.conf&nbsp; &nbsp;/var/run/wifi.pid <br />/var/run/dnsmasq.pid&nbsp; &nbsp; /var/run/nas.lan.pid <br />root@OpenWrt:~$ ls /var/run/</p><p>root@OpenWrt:~$ more /var/run/asterisk.ctl <br />more: /var/run/asterisk.ctl: No such device or address<br />root@OpenWrt:~$ more /var/run/asterisk.pid <br />931</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39805">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						29 Dec 2006, 16:29					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>peng wrote:</cite><blockquote><p>I tried your suggestions , but haven&#039;t got any success.</p></blockquote></div><p>which packages have you installed exactly ?</p><p>Hans.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39806">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">peng</div>
					<div class="post-datetime">
						29 Dec 2006, 16:37					</div>
				</div>
				<div class="post-content content">
					<p>HI Zandbelt,</p><p>The follwoing are some caputered info for your info. 1.2.14 doesn&#039;t seem to work in my wrt54gs after I use ImageBuilder to mix your ipk to the existing files.<br />source list.</p><p>base-files<br />base-files-brcm<br />bridge<br />busybox<br />dnsmasq<br />dropbear<br />haserl<br />ipkg<br />iptables<br />iwlib<br />kmod-brcm-wl<br />kmod-diag<br />kmod-switch<br />kmod-wlcompat<br />mtd<br />nvram<br />uclibc<br />wificonf<br />wireless-tools<br />libgcc<br />ip<br />iptables-mod-conntrack<br />iptables-mod-extra<br />iptables-mod-filter<br />iptables-mod-imq<br />iptables-mod-ipopt<br />iptables-mod-ipsec<br />kmod-imq<br />kmod-ipt-conntrack<br />kmod-ipt-extra<br />kmod-ipt-filter<br />kmod-ipt-ipopt<br />kmod-ipt-ipsec<br />kmod-sched<br />kmod-tun<br />qos-scripts<br />tc<br />nas<br />libncurses<br />libpthread<br />asterisk<br />asterisk-sounds<br />asterisk-voicemail<br />asterisk-res-crypto<br />asterisk-pbx-dundi<br />asterisk-mysql<br />asterisk-pgsql<br />ez-ipupdate<br />openntpd<br />openvpn<br />openssl-util<br />libopenssl<br />liblzo<br />ipkg-upgrade-fix<br />webif</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39810">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						29 Dec 2006, 16:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>peng wrote:</cite><blockquote><p>The follwoing are some caputered info for your info. 1.2.14 doesn&#039;t seem to work in my wrt54gs after I use ImageBuilder to mix your ipk to the existing files.</p></blockquote></div><p>Try without mixing your own image first, by installing a default image (RC6) and just installing additional packages (asterisk-*) from the commandline.<br />I&#039;ve created a package repository for the latest releases now, so you can just add this repository to your /etc/ipkg.conf.</p><p>Hans.</p>											<p class="post-edited">(Last edited by <strong>zandbelt</strong> on 29 Dec 2006, 16:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39811">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">peng</div>
					<div class="post-datetime">
						29 Dec 2006, 17:17					</div>
				</div>
				<div class="post-content content">
					<p>root@OpenWrt:/$ ipkg install asterisk<br />Installing asterisk (1.2.14-2) to root...<br />Downloading <a href="http://members.home.nl/hans.zandbelt/openwrt/whiterussian/packages/asterisk_1.2.14-2_mipsel.ipk">http://members.home.nl/hans.zandbelt/op … mipsel.ipk</a><br />Configuring asterisk<br />Successfully terminated.<br />root@OpenWrt:/$ ipkg install asterisk-voicemail<br />Installing asterisk-voicemail (1.2.14-2) to root...<br />Downloading <a href="http://members.home.nl/hans.zandbelt/openwrt/whiterussian/packages/asterisk-voicemail_1.2.14-2_mipsel.ipk">http://members.home.nl/hans.zandbelt/op … mipsel.ipk</a><br />Configuring asterisk-voicemail<br />Successfully terminated.<br />root@OpenWrt:/$ ipkg install asterisk-sounds&nbsp; &nbsp;<br />Installing asterisk-sounds (1.2.14-2) to root...<br />Downloading <a href="http://members.home.nl/hans.zandbelt/openwrt/whiterussian/packages/asterisk-sounds_1.2.14-2_mipsel.ipk">http://members.home.nl/hans.zandbelt/op … mipsel.ipk</a><br />Configuring asterisk-sounds<br />Successfully terminated.<br />root@OpenWrt:/$ ipkg install asterisk-res-crypto<br />Installing asterisk-res-crypto (1.2.14-2) to root...<br />Downloading <a href="http://members.home.nl/hans.zandbelt/openwrt/whiterussian/packages/asterisk-res-crypto_1.2.14-2_mipsel.ipk">http://members.home.nl/hans.zandbelt/op … mipsel.ipk</a><br />Configuring asterisk-res-crypto<br />Successfully terminated.</p><br /><p>root@OpenWrt:/$ ipkg list_installed<br />asterisk - 1.2.14-2 - An open source PBX<br />asterisk-res-crypto - 1.2.14-2 - Asterisk Crypto module<br />asterisk-sounds - 1.2.14-2 - a sounds collection for Asterisk<br />asterisk-voicemail - 1.2.14-2 - VoiceMail related modules for Asterisk<br />base-files - 9 - OpenWrt filesystem structure and scripts<br />base-files-brcm - 2 - Board/architecture specific files<br />bridge - 1.0.6-1 - Ethernet bridging tools<br />busybox - 1.2.1-6 - Core utilities for embedded Linux systems<br />dnsmasq - 2.35-1 - A lightweight DNS and DHCP server<br />dropbear - 0.48.1-1 - a small SSH 2 server/client designed for small memory environments.<br />ez-ipupdate - 3.0.11b8-2 - Dynamic DNS services client<br />haserl - 0.8.0-1 - a CGI wrapper to embed shell scripts in HTML documents<br />ip - 2.6.11-050330-1 - iproute2 routing control utility<br />ipkg - 0.99.149-2 - lightweight package management system<br />ipkg-upgrade-fix - 0.2-1 - Shows warning about &#039;ipkg upgrade&#039; when user tries to use it.<br />iptables - 1.3.3-2 - The netfilter firewalling software for IPv4<br />iptables-mod-conntrack - 1.3.3-2 - Iptables (IPv4) extensions for connection tracking<br />iptables-mod-extra - 1.3.3-2 - Other extra Iptables (IPv4) extensions<br />iptables-mod-filter - 1.3.3-2 - Iptables (IPv4) extension for packet content inspection<br />iptables-mod-imq - 1.3.3-2 - Iptables (IPv4) extensions for Intermediate Queuing Device QoS-support<br />iptables-mod-ipopt - 1.3.3-2 - Iptables (IPv4) extensions for matching/changing IP packet options<br />iptables-mod-ipsec - 1.3.3-2 - Iptables (IPv4) extensions for matching special IPsec packets<br />iwlib - 29.pre10-1 - Library for setting up WiFi cards using the Wireless Extension<br />kernel - 2.4.30-brcm-5 - <br />kmod-brcm-wl - 2.4.30-brcm-5 - Proprietary driver for Broadcom Wireless chipsets<br />kmod-diag - 2.4.30-brcm-5 - Kernel modules for LEDs and buttons<br />kmod-imq - 2.4.30-brcm-5 - Kernel support for the Intermediate Queueing device<br />kmod-ipt-conntrack - 2.4.30-brcm-5 - Extra Netfilter (IPv4) kernel modules for connection tracking<br />kmod-ipt-extra - 2.4.30-brcm-5 - Other extra Netfilter (IPv4) kernel modules<br />kmod-ipt-filter - 2.4.30-brcm-5 - Netfilter (IPv4) kernel modules for packet content inspection<br />kmod-ipt-ipopt - 2.4.30-brcm-5 - Netfilter (IPv4) kernel modules for matching/changing IP packet options<br />kmod-ipt-ipsec - 2.4.30-brcm-5 - Netfilter (IPv4) kernel modules for matching special IPsec packets<br />kmod-sched - 2.4.30-brcm-5 - Kernel schedulers for IP traffic<br />kmod-switch - 2.4.30-brcm-1 - switch driver for robo/admtek switch<br />kmod-tun - 2.4.30-brcm-5 - Kernel TUN/TAP extension<br />kmod-wlcompat - 2.4.30-brcm-4 - Compatibility module for using the Wireless Extension with broadcom&#039;s wl<br />libgcc - 3.4.4-9 - GCC support library<br />liblzo - 2.02-1 - A real-time data compression library<br />libncurses - 5.2-7 - a terminal handling library and common terminal definitions<br />libopenssl - 0.9.8d-1 - OpenSSL (Secure Socket Layer) libraries<br />libpthread - 0.9.27-1 - POSIX threads library<br />mtd - 4 - Tool for modifying the flash chip<br />nas - 3.90.37-17 - Proprietary Broadcom WPA Authenticator/Supplicant<br />nvram - 1 - NVRAM utility and libraries for Broadcom hardware<br />openntpd - 3.9p1-1 - NTP server<br />openssl-util - 0.9.8d-1 - OpenSSL (Secure Socket Layer) command line tool<br />openvpn - 2.0.8-1 - Open Source VPN solution using SSL<br />qos-scripts - 0.9.3-1 - <br />tc - 2.6.11-050330-1 - iproute2 traffic control utility<br />uclibc - 0.9.27-9 - Standard C library for embedded Linux systems<br />webif - 0.3-2 - An HTTP administrative console for OpenWrt.<br />wificonf - 6 - Replacement utility for wlconf<br />wireless-tools - 29.pre10-1 - Tools for setting up WiFi cards using the Wireless Extension<br />Successfully terminated</p><br /><p>root@OpenWrt:/$ asterisk <br />root@OpenWrt:/$ ps<br />&nbsp; PID&nbsp; Uid&nbsp; &nbsp; &nbsp;VmSize Stat Command<br />&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp; &nbsp; 356 S&nbsp; &nbsp;init&nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 2 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [keventd]<br />&nbsp; &nbsp; 3 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RWN [ksoftirqd_CPU0]<br />&nbsp; &nbsp; 4 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [kswapd]<br />&nbsp; &nbsp; 5 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [bdflush]<br />&nbsp; &nbsp; 6 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [kupdated]<br />&nbsp; &nbsp; 8 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SW&nbsp; [mtdblockd]<br />&nbsp; &nbsp;92 root&nbsp; &nbsp; &nbsp; &nbsp; 344 S&nbsp; &nbsp;logger -s -p 6 -t&nbsp; <br />&nbsp; &nbsp;95 root&nbsp; &nbsp; &nbsp; &nbsp; 356 S&nbsp; &nbsp;init&nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp;97 root&nbsp; &nbsp; &nbsp; &nbsp; 316 S&nbsp; &nbsp;klogd <br />&nbsp; 122 root&nbsp; &nbsp; &nbsp; &nbsp; 336 S&nbsp; &nbsp;/sbin/syslogd -C 16 -m 0 <br />&nbsp; 481 root&nbsp; &nbsp; &nbsp; &nbsp; 324 S&nbsp; &nbsp;wifi up <br />&nbsp; 661 root&nbsp; &nbsp; &nbsp; &nbsp; 368 S&nbsp; &nbsp;udhcpc -i vlan1 -r 10.10.10.10 -b -p /var/run/vlan1.p<br />&nbsp; 667 ntp&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;356 S&nbsp; &nbsp;/usr/sbin/ntpd -s <br />&nbsp; 669 root&nbsp; &nbsp; &nbsp; &nbsp; 356 S&nbsp; &nbsp;/usr/sbin/ntpd -s <br />&nbsp; 691 root&nbsp; &nbsp; &nbsp; &nbsp; 412 S&nbsp; &nbsp;/usr/sbin/nas -P /var/run/nas.lan.pid -l br0 -H 34954<br />&nbsp; 706 root&nbsp; &nbsp; &nbsp; &nbsp; 380 S&nbsp; &nbsp;httpd -p 80 -h /www -r OpenWrt <br />&nbsp; 795 root&nbsp; &nbsp; &nbsp; &nbsp; 316 S&nbsp; &nbsp;telnetd -l /bin/login <br />&nbsp; 863 nobody&nbsp; &nbsp; &nbsp; 424 S&nbsp; &nbsp;dnsmasq -l /tmp/dhcp.leases -K -F lan,192.168.15.100,<br />&nbsp; 988 root&nbsp; &nbsp; &nbsp; &nbsp; 524 S&nbsp; &nbsp;/bin/ash --login <br /> 1012 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SWN [jffs2_gcd_mtd4]<br /> 1098 root&nbsp; &nbsp; &nbsp; &nbsp; 384 S&nbsp; &nbsp;/usr/sbin/dropbear <br /> 1111 root&nbsp; &nbsp; &nbsp; &nbsp;2792 S&nbsp; &nbsp;asterisk <br /> 1112 root&nbsp; &nbsp; &nbsp; &nbsp;2792 S&nbsp; &nbsp;asterisk <br /> 1114 root&nbsp; &nbsp; &nbsp; &nbsp;2792 S&nbsp; &nbsp;asterisk <br /> 1115 root&nbsp; &nbsp; &nbsp; &nbsp;2792 S&nbsp; &nbsp;asterisk <br /> 1116 root&nbsp; &nbsp; &nbsp; &nbsp;2792 S&nbsp; &nbsp;asterisk <br /> 1117 root&nbsp; &nbsp; &nbsp; &nbsp;2792 S&nbsp; &nbsp;asterisk <br /> 1118 root&nbsp; &nbsp; &nbsp; &nbsp;2792 S&nbsp; &nbsp;asterisk <br /> 1119 root&nbsp; &nbsp; &nbsp; &nbsp;2792 S&nbsp; &nbsp;asterisk <br /> 1120 root&nbsp; &nbsp; &nbsp; &nbsp; 328 R&nbsp; &nbsp;ps </p><p>root@OpenWrt:/$ asterisk -vvvvvvvvvvr<br />&nbsp; == Parsing &#039;/etc/asterisk/asterisk.conf&#039;: Found<br />&nbsp; == Parsing &#039;/etc/asterisk/extconfig.conf&#039;: Found<br />Asterisk 1.2.14, Copyright (C) 1999 - 2006 Digium, Inc. and others.<br />Created by Mark Spencer &lt;markster@digium.com&gt;<br />Asterisk comes with ABSOLUTELY NO WARRANTY; type &#039;show warranty&#039; for details.<br />This is free software, with components licensed under the GNU General Public<br />License version 2 and other licenses; you are welcome to redistribute it under<br />certain conditions. Type &#039;show license&#039; for details.<br />=========================================================================<br />Connected to Asterisk 1.2.14 currently running on OpenWrt (pid = 1111)<br />Verbosity was 0 and is now 10</p><br /><br /><p>root@OpenWrt:/$ more /var/log/asterisk/messages <br />Dec 29 15:11:27 NOTICE[1111] cdr.c: CDR simple logging enabled.<br />Dec 29 15:11:27 WARNING[1111] res_musiconhold.c: Unable to open pseudo channel for timing...&nbsp; Sound may be choppy.<br />Dec 29 15:11:27 WARNING[1111] chan_iax2.c: Unable to open IAX timing interface: No such file or directory<br />Dec 29 15:11:27 WARNING[1117] res_musiconhold.c: /var/lib/asterisk/mohmp3 is not a valid directory<br />Dec 29 15:11:27 WARNING[1117] res_musiconhold.c: Unable to spawn mp3player<br />Dec 29 15:11:27 WARNING[1111] app_voicemail.c: Failed to load configuration file. Module not activated.</p><p>root@OpenWrt:/$ more /etc/asterisk/<br />/etc/asterisk/agents.conf&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /etc/asterisk/extconfig.conf&nbsp; &nbsp; &nbsp; &nbsp;/etc/asterisk/misdn.conf <br />/etc/asterisk/alarmreceiver.conf&nbsp; &nbsp;/etc/asterisk/extensions.ael&nbsp; &nbsp; &nbsp; &nbsp;/etc/asterisk/modules.conf <br />/etc/asterisk/asterisk.conf&nbsp; &nbsp; &nbsp; &nbsp; /etc/asterisk/extensions.conf&nbsp; &nbsp; &nbsp; /etc/asterisk/musiconhold.conf <br />/etc/asterisk/cdr.conf&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/etc/asterisk/features.conf&nbsp; &nbsp; &nbsp; &nbsp; /etc/asterisk/osp.conf <br />/etc/asterisk/cdr_custom.conf&nbsp; &nbsp; &nbsp; /etc/asterisk/iax.conf&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/etc/asterisk/privacy.conf <br />/etc/asterisk/cdr_manager.conf&nbsp; &nbsp; &nbsp;/etc/asterisk/iaxprov.conf&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/etc/asterisk/queues.conf <br />/etc/asterisk/codecs.conf&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /etc/asterisk/indications.conf&nbsp; &nbsp; &nbsp;/etc/asterisk/rtp.conf <br />/etc/asterisk/dnsmgr.conf&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /etc/asterisk/logger.conf&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /etc/asterisk/sip.conf <br />/etc/asterisk/enum.conf&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /etc/asterisk/manager.conf&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/etc/asterisk/sip_notify.conf </p><br /><p>root@OpenWrt:/$ more /var/log/asterisk/messages <br />Dec 29 15:11:27 NOTICE[1111] cdr.c: CDR simple logging enabled.<br />Dec 29 15:11:27 WARNING[1111] res_musiconhold.c: Unable to open pseudo channel for timing...&nbsp; Sound may be choppy.<br />Dec 29 15:11:27 WARNING[1111] chan_iax2.c: Unable to open IAX timing interface: No such file or directory<br />Dec 29 15:11:27 WARNING[1117] res_musiconhold.c: /var/lib/asterisk/mohmp3 is not a valid directory<br />Dec 29 15:11:27 WARNING[1117] res_musiconhold.c: Unable to spawn mp3player<br />Dec 29 15:11:27 WARNING[1111] app_voicemail.c: Failed to load configuration file. Module not activated.<br />Dec 29 15:15:30 NOTICE[1135] cdr.c: CDR simple logging enabled.<br />Dec 29 15:15:30 WARNING[1135] res_musiconhold.c: Unable to open pseudo channel for timing...&nbsp; Sound may be choppy.<br />Dec 29 15:15:30 WARNING[1135] chan_iax2.c: Unable to open IAX timing interface: No such file or directory<br />Dec 29 15:15:30 WARNING[1141] res_musiconhold.c: Found no files in &#039;/usr/lib/asterisk/mohmp3&#039;<br />Dec 29 15:15:30 WARNING[1141] res_musiconhold.c: Unable to spawn mp3player<br />Dec 29 15:15:30 WARNING[1135] app_voicemail.c: Failed to load configuration file. Module not activated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39814">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">peng</div>
					<div class="post-datetime">
						29 Dec 2006, 17:22					</div>
				</div>
				<div class="post-content content">
					<p>HI Zandbelt,</p><p>It seems working by directly installing ipkg from your repository.</p><p>but I do find the following errors,</p><p>1. there&#039;s no default /etc/asterisk/voicemail.conf, which leads to the error &quot;Dec 29 15:15:30 WARNING[1135] app_voicemail.c: Failed to load configuration file. Module not activated.:, i guess. Is this something that you missed during your make of ipkg?</p><p>2. I changed the /var/lib/asterisk/mohmp3 to /usr/lib/asterisk/mohmps, but it still shows error &quot;res_musiconhold.c: Found no files in &#039;/usr/lib/asterisk/mohmp3&#039;<br />Dec 29 15:15:30 WARNING[1141] res_musiconhold.c: Unable to spawn mp3player&quot;</p><p>3. What&#039;s the cause of these two errors? &quot;Dec 29 15:15:30 WARNING[1135] res_musiconhold.c: Unable to open pseudo channel for timing...&nbsp; Sound may be choppy.<br />Dec 29 15:15:30 WARNING[1135] chan_iax2.c: Unable to open IAX timing interface: No such file or directory&quot;</p><p>4. Why are there so many Asterisk processes? I thought it&#039;s only one process we are running, i mean one program.<br /> 1135 root&nbsp; &nbsp; &nbsp; &nbsp;2796 S&nbsp; &nbsp;asterisk <br /> 1136 root&nbsp; &nbsp; &nbsp; &nbsp;2796 S&nbsp; &nbsp;asterisk <br /> 1138 root&nbsp; &nbsp; &nbsp; &nbsp;2796 S&nbsp; &nbsp;asterisk <br /> 1139 root&nbsp; &nbsp; &nbsp; &nbsp;2796 S&nbsp; &nbsp;asterisk <br /> 1140 root&nbsp; &nbsp; &nbsp; &nbsp;2796 S&nbsp; &nbsp;asterisk <br /> 1141 root&nbsp; &nbsp; &nbsp; &nbsp;2796 S&nbsp; &nbsp;asterisk <br /> 1142 root&nbsp; &nbsp; &nbsp; &nbsp;2796 S&nbsp; &nbsp;asterisk <br /> 1143 root&nbsp; &nbsp; &nbsp; &nbsp;2796 S&nbsp; &nbsp;asterisk </p><p>5. What would be the difference of installing your ipkg directly from net and installing your ipkg with my ImageBuilder?</p><p>tks<br />peng</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39815">
				<div class="post-metadata">
					<div class="post-num">Post #42</div>
					<div class="post-author">peng</div>
					<div class="post-datetime">
						29 Dec 2006, 17:30					</div>
				</div>
				<div class="post-content content">
					<p>I was trying to use Imagebuilder so I can save more space.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39818">
				<div class="post-metadata">
					<div class="post-num">Post #43</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						29 Dec 2006, 17:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>peng wrote:</cite><blockquote><p>1. there&#039;s no default /etc/asterisk/voicemail.conf, which leads to the error &quot;Dec 29 15:15:30 WARNING[1135] app_voicemail.c: Failed to load configuration file. Module not activated.:, i guess. Is this something that you missed during your make of ipkg?</p></blockquote></div><p>Nope, there&#039;s a default one like that in the asterisk-voicemail package.<br />Double check your config (maybe it overrules the installed one because you had one already and that one is not correct?)</p><div class="quotebox"><cite>peng wrote:</cite><blockquote><p>2. I changed the /var/lib/asterisk/mohmp3 to /usr/lib/asterisk/mohmps, but it still shows error &quot;res_musiconhold.c: Found no files in &#039;/usr/lib/asterisk/mohmp3&#039;</p></blockquote></div><p>Probably because you don&#039;t have mp3 files in that directory?</p><div class="quotebox"><cite>peng wrote:</cite><blockquote><p>Dec 29 15:15:30 WARNING[1141] res_musiconhold.c: Unable to spawn mp3player&quot;</p><p>3. What&#039;s the cause of these two errors? &quot;Dec 29 15:15:30 WARNING[1135] res_musiconhold.c: Unable to open pseudo channel for timing...&nbsp; Sound may be choppy.<br />Dec 29 15:15:30 WARNING[1135] chan_iax2.c: Unable to open IAX timing interface: No such file or directory&quot;</p></blockquote></div><p>Warnings like these can be ignored (output of tests).</p><div class="quotebox"><cite>peng wrote:</cite><blockquote><p>4. Why are there so many Asterisk processes? I thought it&#039;s only one process we are running, i mean one program.</p></blockquote></div><p>Because of the threading implementation on mipsel-linux (LinuxThreads): one process per thread. Google for the details.</p><div class="quotebox"><cite>peng wrote:</cite><blockquote><p>5. What would be the difference of installing your ipkg directly from net and installing your ipkg with my ImageBuilder?</p></blockquote></div><p>Something in the way the image is created...</p><p>Hans.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39820">
				<div class="post-metadata">
					<div class="post-num">Post #44</div>
					<div class="post-author">peng</div>
					<div class="post-datetime">
						29 Dec 2006, 18:04					</div>
				</div>
				<div class="post-content content">
					<p>root@OpenWrt:/$ more /etc/asterisk/<br />/etc/asterisk/agents.conf&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /etc/asterisk/extensions.ael&nbsp; &nbsp; &nbsp; &nbsp;/etc/asterisk/musiconhold.conf <br />/etc/asterisk/alarmreceiver.conf&nbsp; &nbsp;/etc/asterisk/extensions.conf&nbsp; &nbsp; &nbsp; /etc/asterisk/osp.conf <br />/etc/asterisk/asterisk.conf&nbsp; &nbsp; &nbsp; &nbsp; /etc/asterisk/features.conf&nbsp; &nbsp; &nbsp; &nbsp; /etc/asterisk/privacy.conf <br />/etc/asterisk/cdr.conf&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/etc/asterisk/iax.conf&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/etc/asterisk/queues.conf <br />/etc/asterisk/cdr_custom.conf&nbsp; &nbsp; &nbsp; /etc/asterisk/iaxprov.conf&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/etc/asterisk/rtp.conf <br />/etc/asterisk/cdr_manager.conf&nbsp; &nbsp; &nbsp;/etc/asterisk/indications.conf&nbsp; &nbsp; &nbsp;/etc/asterisk/sip.conf <br />/etc/asterisk/codecs.conf&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /etc/asterisk/logger.conf&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /etc/asterisk/sip_notify.conf <br />/etc/asterisk/dnsmgr.conf&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /etc/asterisk/manager.conf&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/etc/asterisk/voicemail.conf <br />/etc/asterisk/enum.conf&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /etc/asterisk/misdn.conf <br />/etc/asterisk/extconfig.conf&nbsp; &nbsp; &nbsp; &nbsp;/etc/asterisk/modules.conf <br />root@OpenWrt:/$ more /var/log/asterisk/messages </p><br /><p>Dec 29 15:48:50 NOTICE[1141] res_musiconhold.c: Request to schedule in the past?!?!<br />Dec 29 15:48:50 WARNING[1141] res_musiconhold.c: Found no files in &#039;/usr/lib/asterisk/mohmp3&#039;<br />Dec 29 15:48:50 WARNING[1141] res_musiconhold.c: Unable to spawn mp3player<br />root@OpenWrt:/$ <br />root@OpenWrt:/$ <br />root@OpenWrt:/$ mv /usr/lib/asterisk/mohmp3/ /usr/lib/asterisk/moh-native</p><p>root@OpenWrt:/$ more /var/log/asterisk/messages <br />Dec 29 16:03:08 NOTICE[1226] cdr.c: CDR simple logging enabled.<br />Dec 29 16:03:08 WARNING[1226] chan_iax2.c: Unable to open IAX timing interface: No such file or directory<br />root@OpenWrt:/$</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39822">
				<div class="post-metadata">
					<div class="post-num">Post #45</div>
					<div class="post-author">peng</div>
					<div class="post-datetime">
						29 Dec 2006, 18:09					</div>
				</div>
				<div class="post-content content">
					<p>HI Zandbelt,</p><p>1. I modified /etc/asterisk/musiconhold.conf and it will use /moh-native instead. I created&nbsp; one for that directory by doing&quot; root@OpenWrt:/$ mv /usr/lib/asterisk/mohmp3/ /usr/lib/asterisk/moh-native&quot;. it resolves the error.</p><p>2. I removed asterisk-voice package and re-installed it again, i got /etc/asterisk/voicemail.conf.</p><p>3. This is the only left out error info. &quot;Dec 29 16:03:08 WARNING[1226] chan_iax2.c: Unable to open IAX timing interface: No such file or directory&quot;. Not sure what&#039;s the cause. but, if you think it&#039;s ok, then should be fine.</p><p>4. I tried to use ImageBuilder with yoru package to save some space on the router. So, if I can install your ipkg directly and it works, what could be the cause of not get it working after imagebulder process?</p><p>thanks<br />peng</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39850">
				<div class="post-metadata">
					<div class="post-num">Post #46</div>
					<div class="post-author">peng</div>
					<div class="post-datetime">
						30 Dec 2006, 00:15					</div>
				</div>
				<div class="post-content content">
					<p>HI Zandbelt,</p><p>Are you going to deep dive in creating 1.4 Asterisk ipkg ? I am really interested in the new feature of h264 passthrough.</p><p>Let me know if you have any roadmaps. One thing that concerns me is that why I cound&#039;t use DTMF after 1.4 is loaded.</p><p>tks<br />peng</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39986">
				<div class="post-metadata">
					<div class="post-num">Post #47</div>
					<div class="post-author">peng</div>
					<div class="post-datetime">
						1 Jan 2007, 18:00					</div>
				</div>
				<div class="post-content content">
					<p>HI Zandbelt,</p><p>Can you explain a bit in detail how we&#039;re going to install this .tar.gz on the router?</p><p>I&nbsp; tar -zxvf asterisk-gui-svn-204.tar.gz in /tmp folder. Then, don&#039;t know what to do next? it seems that &quot;make/make install&quot; doesn&#039;t work on the router&gt;</p><p>tks<br />peng</p><br /><p>Here&#039;s a package for testing the stuff from asterisk-gui project, basically adding a Graphical User Interface to Asterisk 1.4.x through HTTP/HTML/AJAM.<br /># asterisk-gui-svn-204.tar.gz<br />After installation the following steps are needed (at least):</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39999">
				<div class="post-metadata">
					<div class="post-num">Post #48</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						1 Jan 2007, 21:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>peng wrote:</cite><blockquote><p>Can you explain a bit in detail how we&#039;re going to install this .tar.gz on the router?</p><p>I&nbsp; tar -zxvf asterisk-gui-svn-204.tar.gz in /tmp folder. Then, don&#039;t know what to do next? it seems that &quot;make/make install&quot; doesn&#039;t work on the router&gt;</p></blockquote></div><p>Whoops; I mixed up source and binaries here: the tar.gz is used for downloading and compiling in the OpenWRT SDK (source patch is pending).<br />The actual binary ipkg is:</p><p>&nbsp; asterisk14-gui_svn-204-1_mipsel.ipk</p><p>I corrected the webpage at <a href="http://zandbelt.dyndns.org/asterisk.html">http://zandbelt.dyndns.org/asterisk.html</a></p><p>ssokol and capouch have better results in actually configuring it to do what it is supposed to do (could be with another release though).<br />See: <a href="http://forum.openwrt.org/viewtopic.php?pid=39974#p39974">http://forum.openwrt.org/viewtopic.php?pid=39974#p39974</a></p><p>Thanks for checking,</p><p>Hans</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p40056">
				<div class="post-metadata">
					<div class="post-num">Post #49</div>
					<div class="post-author">peng</div>
					<div class="post-datetime">
						2 Jan 2007, 21:10					</div>
				</div>
				<div class="post-content content">
					<p>thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p40485">
				<div class="post-metadata">
					<div class="post-num">Post #50</div>
					<div class="post-author">peng</div>
					<div class="post-datetime">
						8 Jan 2007, 21:45					</div>
				</div>
				<div class="post-content content">
					<p>HI Hans,</p><p>Do you know that whether fax to an internal extension through adapter to a fax machine and send out fax works in the package installed in linksys router?</p><p>Are you aware of any issues? Can I just plug a fax through an adapter to test? any configurations that I need to do prior to that?</p><p>tks<br />peng</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=8629&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>