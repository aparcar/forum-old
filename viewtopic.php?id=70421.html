<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Firmware Partitions Keep Switching Between Every Flash</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 16 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p355311">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">willowen100</div>
					<div class="post-datetime">
						31 Mar 2017, 02:12					</div>
				</div>
				<div class="post-content content">
					<p>I have a Linksys WRT1900AC and I&#039;m currently trying different versions of OpenWRT. However, as I&#039;ve ran into a problem which I haven’t tested yet (to be written up in another post), and I needed the internet to work for other users of the inernet, I&#039;ve had to temporarily revert back to the OEM/factory firmware. </p><p>However, I believe that when I flashed the OEM firmware file from LuCI it just simply switched to the recovery partition without actually overwriting anything. The reason I think this is because when It does go back to the Linksys firmware all of my settings are configured and ready to go. Really I should be expecting a clean slate, asking me set everything back up like I&#039;ve just powered on the router for the first time.&nbsp; </p><p>I did some researching on the internet and I found a discussion about finding out what partition the router is currently using in OpenWRT or DD-WRT. I also discovered a button under the Troubleshooting &gt; Diagnostics page of the stock/Linksys firmware that says ‘restore previous firmware’. I clicked this and the router moved back to OpenWRT as expected. </p><p>However, I typed the command <br /></p><div class="codebox"><pre><code>fw_printenv boot_part</code></pre></div><p> via SSH to find out which partition was being used and it came back as <br /></p><div class="codebox"><pre><code>boot_part=1</code></pre></div><p> <br />I then flashed the Linksys stock firmware via LuCI expecting it to go happily back to Linksys without any hiccups. Unfortunately, the router froze at this point leaving me no choice but to power off the router for three seconds via its power switch. </p><p><strong>N.B. As a side note this happens every time I flash anything from a third-party firmware back to OEM.</strong></p><p>After powering back on, miraculously it came back to the Linksys firmware, but again, still keeping all of my settings. I then proceeded by hitting the ‘restore previous firmware button’ a second time to see if would switch to a Linksys firmware and back to OpenWRT. Annoyingly it went back to OpenWRT, which it too kept all of its settings as I was able to access the internet straight away and the AP’s enabled.</p><p>Lastly I came across the ‘Back to original firmware’ guide on the OpenWRT site and it says you can use a <br /></p><div class="codebox"><pre><code>mtd -r write /tmp/original_firmware.bin firmware</code></pre></div><p><a href="https://wiki.openwrt.org/doc/howto/generic.uninstall">https://wiki.openwrt.org/doc/howto/generic.uninstall</a></p><p>I’m just afraid that If I mess this up, I’ll brick my router. Something I don’t have any idea to fix if it did come to it.</p><br /><p>Many thanks in advanced </p><br /><p>Will</p>											<p class="post-edited">(Last edited by <strong>willowen100</strong> on 31 Mar 2017, 02:13)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p355312">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Villeneuve</div>
					<div class="post-datetime">
						31 Mar 2017, 02:17					</div>
				</div>
				<div class="post-content content">
					<p>If you want to stay on one see <a href="https://forum.openwrt.org/viewtopic.php?pid=338569#p338569">here</a>.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p355348">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">willowen100</div>
					<div class="post-datetime">
						31 Mar 2017, 12:35					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Villeneuve wrote:</cite><blockquote><p>If you want to stay on one see <a href="https://forum.openwrt.org/viewtopic.php?pid=338569#p338569">here</a>.</p></blockquote></div><p>Do I use that script in SSH/telnet?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>