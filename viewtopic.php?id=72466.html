<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> How to get RT5370 wireless chip working</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 11 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p367630">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">darcity</div>
					<div class="post-datetime">
						31 Oct 2017, 20:15					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />I have some issues getting my RT5370 usb wifi card working. Searching through the internet I did not find any applicable solution. </p><p>When I try to scan for APs <br /></p><div class="codebox"><pre><code>root@OpenWrt:~# iwinfo wlan0 scan                                                                                                                                                                     
Scanning not possible                                                                                                                                                                                 </code></pre></div><p>The dmesg output:<br /></p><div class="codebox"><pre><code>[ 1468.524869] hwsim sw_scan request, prepping stuff                              
[ 1468.524894] ieee80211 phy0: mac80211_hwsim_configure_filter                    
[ 1468.524945] ieee80211 phy0: mac80211_hwsim_config (freq=2412(2412 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1468.631441] ieee80211 phy0: mac80211_hwsim_config (freq=2417(2417 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1468.741434] ieee80211 phy0: mac80211_hwsim_config (freq=2422(2422 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1468.851446] ieee80211 phy0: mac80211_hwsim_config (freq=2427(2427 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1468.961434] ieee80211 phy0: mac80211_hwsim_config (freq=2432(2432 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1469.071434] ieee80211 phy0: mac80211_hwsim_config (freq=2437(2437 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1469.181458] ieee80211 phy0: mac80211_hwsim_config (freq=2442(2442 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1469.291438] ieee80211 phy0: mac80211_hwsim_config (freq=2447(2447 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1469.401434] ieee80211 phy0: mac80211_hwsim_config (freq=2452(2452 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1469.511442] ieee80211 phy0: mac80211_hwsim_config (freq=2457(2457 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1469.621438] ieee80211 phy0: mac80211_hwsim_config (freq=2462(2462 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1469.731438] ieee80211 phy0: mac80211_hwsim_config (freq=2467(2467 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1469.841437] ieee80211 phy0: mac80211_hwsim_config (freq=2472(2472 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1469.951439] ieee80211 phy0: mac80211_hwsim_config (freq=2484(2484 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1470.061439] ieee80211 phy0: mac80211_hwsim_config (freq=5180(5180 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1470.171440] ieee80211 phy0: mac80211_hwsim_config (freq=5200(5200 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1470.281442] ieee80211 phy0: mac80211_hwsim_config (freq=5220(5220 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1470.391439] ieee80211 phy0: mac80211_hwsim_config (freq=5240(5240 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1470.501447] ieee80211 phy0: mac80211_hwsim_config (freq=5260(5260 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1470.611443] ieee80211 phy0: mac80211_hwsim_config (freq=5280(5280 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1470.721441] ieee80211 phy0: mac80211_hwsim_config (freq=5300(5300 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1470.831444] ieee80211 phy0: mac80211_hwsim_config (freq=5320(5320 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1470.941445] ieee80211 phy0: mac80211_hwsim_config (freq=5500(5500 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1471.051444] ieee80211 phy0: mac80211_hwsim_config (freq=5520(5520 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1471.161447] ieee80211 phy0: mac80211_hwsim_config (freq=5540(5540 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1471.271444] ieee80211 phy0: mac80211_hwsim_config (freq=5560(5560 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1471.381446] ieee80211 phy0: mac80211_hwsim_config (freq=5580(5580 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1471.491448] ieee80211 phy0: mac80211_hwsim_config (freq=5600(5600 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1471.601447] ieee80211 phy0: mac80211_hwsim_config (freq=5620(5620 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1471.711449] ieee80211 phy0: mac80211_hwsim_config (freq=5640(5640 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1471.821450] ieee80211 phy0: mac80211_hwsim_config (freq=5660(5660 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1471.931450] ieee80211 phy0: mac80211_hwsim_config (freq=5680(5680 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1472.041449] ieee80211 phy0: mac80211_hwsim_config (freq=5700(5700 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1472.151452] ieee80211 phy0: mac80211_hwsim_config (freq=5745(5745 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1472.261483] ieee80211 phy0: mac80211_hwsim_config (freq=5765(5765 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1472.371455] ieee80211 phy0: mac80211_hwsim_config (freq=5785(5785 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1472.481452] ieee80211 phy0: mac80211_hwsim_config (freq=5805(5805 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1472.591457] ieee80211 phy0: mac80211_hwsim_config (freq=5825(5825 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1472.701464] ieee80211 phy0: mac80211_hwsim_config (freq=2412(2412 - 0)/noht idle=0 ps=0 smps=static)                                                             
[ 1472.701485] ieee80211 phy0: mac80211_hwsim_configure_filter                    
[ 1472.701495] hwsim sw_scan_complete    
[ 1472.701539] ieee80211 phy0: mac80211_hwsim_config (freq=2412(2412 - 0)/noht idle=1 ps=0 smps=static)   </code></pre></div><p>##############################################</p><p>I&#039;m using openwrt 15-05.1-brcm2708-bcm2709 image on a raspberry pi 2 and following packages are installed</p><div class="codebox"><pre><code>                                                                                                       
base-files - 157.2-r48532                                                                                                                                                                             
brcm2708-gpu-fw - 20150210-1
busybox - 1.23.2-1
dnsmasq - 2.73-1
dropbear - 2015.67-1
firewall - 2015-07-27
fstools - 2016-01-10-96415afecef35766332067f4205ef3b2c7561d21
hostapd-common - 2015-03-25-1
ip6tables - 1.4.21-1
iptables - 1.4.21-1
iw - 3.17-1
iwinfo - 2015-06-01-ade8b1b299cbd5748db1acf80dd3e9f567938371
jshn - 2015-11-08-10429bccd0dc5d204635e110a7a8fae7b80d16cb
jsonfilter - 2014-06-19-cdc760c58077f44fc40adbbe41e1556a67c1b9a9
kernel - 3.18.23-1-53057a7eaf7678caec0da6075f620e1f
kmod-cfg80211 - 3.18.23+2015-03-09-3
kmod-crypto-aes - 3.18.23-1
kmod-crypto-arc4 - 3.18.23-1
kmod-crypto-core - 3.18.23-1
kmod-hid - 3.18.23-1
kmod-hid-generic - 3.18.23-1
kmod-input-core - 3.18.23-1
kmod-input-evdev - 3.18.23-1
kmod-ip6tables - 3.18.23-1
kmod-ipt-conntrack - 3.18.23-1
kmod-ipt-core - 3.18.23-1
kmod-ipt-nat - 3.18.23-1
kmod-ipv6 - 3.18.23-1
kmod-lib-crc-ccitt - 3.18.23-1
kmod-lib80211 - 3.18.23+2015-03-09-3
kmod-mac80211 - 3.18.23+2015-03-09-3
kmod-mac80211-hwsim - 3.18.23+2015-03-09-3
kmod-nf-conntrack - 3.18.23-1
kmod-nf-conntrack6 - 3.18.23-1
kmod-nf-ipt - 3.18.23-1
kmod-nf-ipt6 - 3.18.23-1
kmod-nf-nat - 3.18.23-1
kmod-nf-nathelper - 3.18.23-1
kmod-nls-base - 3.18.23-1
kmod-ppp - 3.18.23-1
kmod-pppoe - 3.18.23-1
kmod-pppox - 3.18.23-1
kmod-slhc - 3.18.23-1
kmod-sound-arm-bcm2835 - 3.18.23-1
kmod-sound-core - 3.18.23-1
kmod-usb-core - 3.18.23-1
kmod-usb-hid - 3.18.23-1
libblobmsg-json - 2015-11-08-10429bccd0dc5d204635e110a7a8fae7b80d16cb
libc - 0.9.33.2-1
libgcc - 4.8-linaro-1
libip4tc - 1.4.21-1
libip6tc - 1.4.21-1
libiwinfo - 2015-06-01-ade8b1b299cbd5748db1acf80dd3e9f567938371
libiwinfo-lua - 2015-06-01-ade8b1b299cbd5748db1acf80dd3e9f567938371
libjson-c - 0.12-1
libjson-script - 2015-11-08-10429bccd0dc5d204635e110a7a8fae7b80d16cb
liblua - 5.1.5-1
libnl - 3.2.21-1
libnl-tiny - 0.1-4
libpthread - 0.9.33.2-1
libubox - 2015-11-08-10429bccd0dc5d204635e110a7a8fae7b80d16cb
libubus - 2015-05-25-f361bfa5fcb2daadf3b160583ce665024f8d108e
libubus-lua - 2015-05-25-f361bfa5fcb2daadf3b160583ce665024f8d108e
libuci - 2015-08-27.1-1
libuci-lua - 2015-08-27.1-1
libxtables - 1.4.21-1
lua - 5.1.5-1
luci - git-16.018.33482-3201903-1
luci-app-firewall - git-16.018.33482-3201903-1
luci-base - git-16.018.33482-3201903-1
luci-lib-ip - git-16.018.33482-3201903-1
luci-lib-nixio - git-16.018.33482-3201903-1
luci-mod-admin-full - git-16.018.33482-3201903-1
luci-proto-ipv6 - git-16.018.33482-3201903-1
luci-proto-ppp - git-16.018.33482-3201903-1
luci-theme-bootstrap - git-16.018.33482-3201903-1
mtd - 21
netifd - 2015-12-16-245527193e90906451be35c2b8e972b8712ea6ab
odhcp6c - 2015-07-13-024525798c5f6aba3af9b2ef7b3af2f3c14f1db8
odhcpd - 2015-11-19-01d3f9d64486ac1daa144848944e877e7f0cb762
opkg - 9c97d5ecd795709c8584e972bfdf3aee3a5b846d-9
ppp - 2.4.7-6
ppp-mod-pppoe - 2.4.7-6
procd - 2015-10-29.1-d5fddd91b966424bb63e943e789704d52382cc18
rpcd - 2015-01-10-f00890cd6eb47ad9bb5da0fb6c50aedc8406e7c5
ubox - 2015-11-22-c086167a0154745c677f8730a336ea9cf7d71031
ubus - 2015-05-25-f361bfa5fcb2daadf3b160583ce665024f8d108e
ubusd - 2015-05-25-f361bfa5fcb2daadf3b160583ce665024f8d108e
uci - 2015-08-27.1-1
lua - 5.1.5-1                                    
luci - git-16.018.33482-3201903-1                
luci-app-firewall - git-16.018.33482-3201903-1   
luci-base - git-16.018.33482-3201903-1           
luci-lib-ip - git-16.018.33482-3201903-1         
luci-lib-nixio - git-16.018.33482-3201903-1      
luci-mod-admin-full - git-16.018.33482-3201903-1 
luci-proto-ipv6 - git-16.018.33482-3201903-1     
luci-proto-ppp - git-16.018.33482-3201903-1      
luci-theme-bootstrap - git-16.018.33482-3201903-1                                                  
mtd - 21                                         
netifd - 2015-12-16-245527193e90906451be35c2b8e972b8712ea6ab                                       
odhcp6c - 2015-07-13-024525798c5f6aba3af9b2ef7b3af2f3c14f1db8                                      
odhcpd - 2015-11-19-01d3f9d64486ac1daa144848944e877e7f0cb762                                       
opkg - 9c97d5ecd795709c8584e972bfdf3aee3a5b846d-9                                                  
ppp - 2.4.7-6                                    
ppp-mod-pppoe - 2.4.7-6                          
procd - 2015-10-29.1-d5fddd91b966424bb63e943e789704d52382cc18                                      
rpcd - 2015-01-10-f00890cd6eb47ad9bb5da0fb6c50aedc8406e7c5                                         
ubox - 2015-11-22-c086167a0154745c677f8730a336ea9cf7d71031                                         
ubus - 2015-05-25-f361bfa5fcb2daadf3b160583ce665024f8d108e                                         
ubusd - 2015-05-25-f361bfa5fcb2daadf3b160583ce665024f8d108e                                        
uci - 2015-08-27.1-1                             
kmod-slhc - 3.18.23-1                            
kmod-sound-arm-bcm2835 - 3.18.23-1               
kmod-sound-core - 3.18.23-1                      
kmod-usb-core - 3.18.23-1                        
kmod-usb-hid - 3.18.23-1                         
libblobmsg-json - 2015-11-08-10429bccd0dc5d204635e110a7a8fae7b80d16cb                              
libc - 0.9.33.2-1                                
libgcc - 4.8-linaro-1                            
libip4tc - 1.4.21-1                              
libip6tc - 1.4.21-1                              
libiwinfo - 2015-06-01-ade8b1b299cbd5748db1acf80dd3e9f567938371                                    
libiwinfo-lua - 2015-06-01-ade8b1b299cbd5748db1acf80dd3e9f567938371                                
libjson-c - 0.12-1                               
libjson-script - 2015-11-08-10429bccd0dc5d204635e110a7a8fae7b80d16cb                               
liblua - 5.1.5-1                                 
libnl - 3.2.21-1                                 
libnl-tiny - 0.1-4                               
libpthread - 0.9.33.2-1                          
libubox - 2015-11-08-10429bccd0dc5d204635e110a7a8fae7b80d16cb                                      
libubus - 2015-05-25-f361bfa5fcb2daadf3b160583ce665024f8d108e                                      
libubus-lua - 2015-05-25-f361bfa5fcb2daadf3b160583ce665024f8d108e                                  
libuci - 2015-08-27.1-1                          
libuci-lua - 2015-08-27.1-1                      
libxtables - 1.4.21-1                            
lua - 5.1.5-1                                    
luci - git-16.018.33482-3201903-1                
luci-app-firewall - git-16.018.33482-3201903-1   
luci-base - git-16.018.33482-3201903-1           
luci-lib-ip - git-16.018.33482-3201903-1         
luci-lib-nixio - git-16.018.33482-3201903-1      
luci-mod-admin-full - git-16.018.33482-3201903-1 
luci-proto-ipv6 - git-16.018.33482-3201903-1     
luci-proto-ppp - git-16.018.33482-3201903-1      
luci-theme-bootstrap - git-16.018.33482-3201903-1                                                  
mtd - 21                                         
netifd - 2015-12-16-245527193e90906451be35c2b8e972b8712ea6ab                                       
odhcp6c - 2015-07-13-024525798c5f6aba3af9b2ef7b3af2f3c14f1db8                                      
odhcpd - 2015-11-19-01d3f9d64486ac1daa144848944e877e7f0cb762                                       
opkg - 9c97d5ecd795709c8584e972bfdf3aee3a5b846d-9                                                  
ppp - 2.4.7-6                                    
ppp-mod-pppoe - 2.4.7-6                          
procd - 2015-10-29.1-d5fddd91b966424bb63e943e789704d52382cc18                                      
rpcd - 2015-01-10-f00890cd6eb47ad9bb5da0fb6c50aedc8406e7c5                                         
ubox - 2015-11-22-c086167a0154745c677f8730a336ea9cf7d71031                                         
ubus - 2015-05-25-f361bfa5fcb2daadf3b160583ce665024f8d108e                                         
ubusd - 2015-05-25-f361bfa5fcb2daadf3b160583ce665024f8d108e                                        
uci - 2015-08-27.1-1</code></pre></div><p>Did I miss something?</p><p>With kind regards</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p367731">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Antek</div>
					<div class="post-datetime">
						1 Nov 2017, 19:37					</div>
				</div>
				<div class="post-content content">
					<p>It seems you do not have any rt2x00 related packages installed. Are you using a different driver for your wireless card?</p><p>I haven&#039;t used the USB-variants of the rt2x00 project myself, but I <em>think</em> the &#039;kmod-rt2800-usb&#039; package <em>should</em> provide you with everything you need to make your card operational. It might bring in some unnecessary tidbits, too, I&#039;m not sure.</p><p>After installing the packages, you&#039;ll still need to configure the wireless interface. There are instructions on how to generate a skeleton config for your wireless device in the <a href="https://wiki.openwrt.org/doc/uci/wireless#regenerate_configuration">OpenWrt wiki</a>. Then use the remaining sections of the same wiki page to fine-tune your wireless settings.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p367738">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						1 Nov 2017, 21:28					</div>
				</div>
				<div class="post-content content">
					<p>Yes I don&#039;t see how you got that far with no rt kmods installed.</p><p>General wifi troubleshooting includes--<br />read dmesg to see if driver loaded without error<br />run<strong> iw list</strong> to see if driver exists and reports card capabilities.<br />use <strong>wifi config</strong> to initialize /etc/config/wireless.&nbsp; Or reboot with card plugged in</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p367756">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">darcity</div>
					<div class="post-datetime">
						2 Nov 2017, 15:25					</div>
				</div>
				<div class="post-content content">
					<p>Thanks alot. Installing according packages helped. I then used the Web Interface to configure the Interface and it works like a charm.</p><p> Confusingly now there are 4 wifi Interfaces available while only having one card installed. But I can live with that <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>