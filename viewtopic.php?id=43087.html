<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TP-WDR4300 Unstable ever since</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 31 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p195882">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">freaked</div>
					<div class="post-datetime">
						24 Mar 2013, 03:01					</div>
				</div>
				<div class="post-content content">
					<p>Hi there!</p><p>I Want you to know that i only post here becouse i tried to work out the problem i have myself for the last 2 month...</p><p>I had a TP-WDR3600, then replaced it to a WDR4300 becouse i thought it was a hardware fault:</p><p>Currently runing OpenWrt Attitude Adjustment 12.09-rc1<br />but tried countless different snapshots before<br />extendet the FS to 2 different USB Sticks</p><p>Nomatter what i try, the router becomes inaccessable after a few hours uptime<br />No chance to acccess via luci or SSH<br />Also Transmission and Samba Shares stop working<br />The only thing left thats working is the wireless part witch is routed fine as far as i can see</p><p>I really cant imagine what to do, to make the router run stable</p><br /><p>Edit:<br />Just did a fresh install:<br />installed Attitude Adjustment 12.09-rc1 from luci<br />mtd -r erase rootfs_data<br />disconnected all external storage</p><p>and the wdr 4300 keeps freezing in a matter of minutes...<br />Powercycle brings it back up like everytime</p>											<p class="post-edited">(Last edited by <strong>freaked</strong> on 24 Mar 2013, 03:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195885">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">brontide</div>
					<div class="post-datetime">
						24 Mar 2013, 03:55					</div>
				</div>
				<div class="post-content content">
					<p>I just got a wdr4300 as well and put trunk on it with no stability issues.&nbsp; I have not been using the USB and did not try AA first.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195902">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">freaked</div>
					<div class="post-datetime">
						24 Mar 2013, 11:50					</div>
				</div>
				<div class="post-content content">
					<p>Just did a complete factory reset to see if the issues are hardware related - i will keep you informed if the router is stable now</p><p>In the meantime i would appreciate any thoughts on my problem </p><br /><p>btw. excuse my bad english i am not an english native <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195909">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">wjwj</div>
					<div class="post-datetime">
						24 Mar 2013, 14:20					</div>
				</div>
				<div class="post-content content">
					<p>My WDR4300 is also running absolutely stable since I have it (currently AA-rc1), although I do not use USB.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195924">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">flux</div>
					<div class="post-datetime">
						24 Mar 2013, 16:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>freaked wrote:</cite><blockquote><p>In the meantime i would appreciate any thoughts on my problem</p></blockquote></div><p>by updating minidlna database my router with 128M memory always froze because it was out of memory. Solution was to add a 256M swap partition.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p196513">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">freaked</div>
					<div class="post-datetime">
						28 Mar 2013, 13:06					</div>
				</div>
				<div class="post-content content">
					<p>I always had a swap partition of 256mb available</p><p>After a complete factory reset to stock firmware and reinstall of AA i am having really high uptimes without a crash.<br />Atm i only got very few packages install to have my samba share runing</p><p>The system is runing for 24h now and i am observing a constant drain in available memory that most likely will result in a crash when it reaches 0%, even if the swap part is mounted and working - but not really used tough</p><p>Processes that take up all the memory with each 40% are:</p><p>/sbin/hotplug2 --override --persistent --set-rules-file /etc/hotplug2.rules --set-coldplug-cmd /sbin/udevtrigger --max-children 1</p><p>and:</p><p>/sbin/hotplug2 --override --persistent --set-rules-file /etc/hotplug2.rules --set-coldplug-cmd /sbin/udevtrigger --max-children 1</p><br /><p>any idea what this processes do and what i could do to help it?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p196514">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">brontide</div>
					<div class="post-datetime">
						28 Mar 2013, 13:23					</div>
				</div>
				<div class="post-content content">
					<p>Are you sure you are reading it right?&nbsp; Linux will often run with little to no &quot;free ram&quot; but that&#039;s of since there much of that is buffers which can be dumped to make room for dirty pages.</p><p>If you use the free command the important line is +- buffers.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p196515">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">freaked</div>
					<div class="post-datetime">
						28 Mar 2013, 13:37					</div>
				</div>
				<div class="post-content content">
					<p>root@OpenWrt:~# free<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;total&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;used&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;free&nbsp; &nbsp; &nbsp; &nbsp;shared&nbsp; &nbsp; &nbsp; buffers<br />Mem:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 126684&nbsp; &nbsp; &nbsp; &nbsp;123624&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;3060&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1744<br />-/+ buffers:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 121880&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;4804<br />Swap:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;262140&nbsp; &nbsp; &nbsp; &nbsp; 11956&nbsp; &nbsp; &nbsp; &nbsp;250184</p><p>fact is that the hotplug2 processes consume 2x 40% of the machines memory and the values are rising steady</p><p>google told me something about a known memory leak in hotplug2 but since i am not a real &quot;pro&quot; i cant make any sense of the solutions presented there.<br />so i would be very gratefull if anyone could provide me an easy explained solution to that leak</p>											<p class="post-edited">(Last edited by <strong>freaked</strong> on 28 Mar 2013, 13:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p196519">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">brontide</div>
					<div class="post-datetime">
						28 Mar 2013, 14:49					</div>
				</div>
				<div class="post-content content">
					<p>Pouring over the bugs.</p><p><a href="https://dev.openwrt.org/ticket/12436">https://dev.openwrt.org/ticket/12436</a> - fixed in r35857, r35859 aka Trunk</p><p><a href="https://dev.openwrt.org/ticket/12765">https://dev.openwrt.org/ticket/12765</a> - still open</p><p>Combined I think you will be unable to run swap on AA-rc1 with this device.&nbsp; I think the workaround *might* be that you need to upgrade to trunk and use a linux box to mkswap rather than use the built in tool.&nbsp; You want to use a tool that will create the UUID on the swap partition even if you don&#039;t mount the partition by UUID.</p><p>I have the 4300 ( nearly identical hardware ) on trunk and have had a USB stick plugged in, but not mounted, and am not leaking memory.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p196521">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">phuque99</div>
					<div class="post-datetime">
						28 Mar 2013, 14:52					</div>
				</div>
				<div class="post-content content">
					<p>This was patched in AA recently <a href="https://dev.openwrt.org/changeset/35859">https://dev.openwrt.org/changeset/35859</a></p><p>You might want to compile your own AA build from the latest if you need fix it urgently. There isn&#039;t any recent AA nightly or snapshots available for download on this site.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p197169">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">brontide</div>
					<div class="post-datetime">
						4 Apr 2013, 04:48					</div>
				</div>
				<div class="post-content content">
					<p>FYI, I&#039;m on trunk and added swap and extroot to my main router with no stability issues.</p><p>I did the mkswap on a laptop and it created a parition with UUID.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>