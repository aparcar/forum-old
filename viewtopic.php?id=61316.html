<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Slow internet until reboot?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p302372">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Wolfie</div>
					<div class="post-datetime">
						4 Dec 2015, 08:37					</div>
				</div>
				<div class="post-content content">
					<p>Having an interesting issue where, over time (sometimes as little as a couple of hours), my internet speed drops from 180mb/s (max) to under 10mb/s (downlink) and the uplink remains fine (~10mb/s).&nbsp; If I reboot the router, either via power cycle or Luci to issue the reboot option, the problem goes away, at least at first.</p><p>Some info:<br />Router: WRT1200AC<br />OpenWrt Chaos Calmer 15.05<br />Uptime: 2h 8m 2s<br />Load: 0.16 0.25 0.23</p><p>Have plenty of free memory, the load is fine and using &#039;top&#039; via ssh doesn&#039;t show anything unusual such as CPU spikes, etc.&nbsp; I do stream a bit (watching Netflix and/or Twitch streamers) and the problems seem to happen sooner when using those services, so my guess is that there&#039;s something collecting up in memory that after awhile, even if it&#039;s not consuming a lot of memory, it&#039;s enough to lower the incoming traffic.</p><p>Other symptoms I&#039;ve noticed is that when trying to access the router during the issue, it can be laggy, as though the CPU is being maxed out when it isn&#039;t spiking at all.&nbsp; When viewing twitch streams, I get an increase in errors (segments timed out, unreachable, etc).&nbsp; Also the number of UDP ports tends to drop (Status/Realtime Graphics/Connections), where it&#039;s usually 750 or more but will drop to under 600.&nbsp; This isn&#039;t a reliable symptom of the issue though, but it&#039;s noticeable enough to mention it.</p><p>Any ideas what could be causing this?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p302508">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						5 Dec 2015, 14:25					</div>
				</div>
				<div class="post-content content">
					<p>How are you measuring, which packages do you have installed?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p302510">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Wolfie</div>
					<div class="post-datetime">
						5 Dec 2015, 14:52					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>stangri wrote:</cite><blockquote><p>How are you measuring, which packages do you have installed?</p></blockquote></div><p>Measuring what, speed?&nbsp; Speedtest.net and using the same server for testing the speed, which will give me a low result until I reboot, then the speed is much higher.&nbsp; Also I always use the same server, so it&#039;s not like I&#039;m getting slow results with one, rebooting then getting higher results from a different server.&nbsp; It&#039;s the same server, with the speed being faster after I reboot the router.</p><p>Don&#039;t remember which packages I&#039;ve installed post-flash but here&#039;s everything I have installed...<br /></p><div class="codebox"><pre><code>Package name (Version)
base-files (157-r47165)
busybox (1.23.2-1)
chat (2.4.7-6)
collectd (5.4.2-2)
collectd-mod-interface (5.4.2-2)
collectd-mod-iwinfo (5.4.2-2)
collectd-mod-load (5.4.2-2)
collectd-mod-network (5.4.2-2)
collectd-mod-rrdtool (5.4.2-2)
collectd-mod-sensors (5.4.2-2)
comgt (0.32-25)
curl (7.40.0-3)
ddns-scripts (2.4.3-1)
ddns-scripts_cloudflare (2.4.3-1)
dnsmasq (2.73-1)
dropbear (2015.67-1)
firewall (2015-07-27)
fstools (2015-09-15-cc63723d88..83f)
hostapd-common (2015-03-25-1)
htop (1.0.3-1)
ip6tables (1.4.21-1)
iptables (1.4.21-1)
iptables-mod-conntrack-extra (1.4.21-1)
iptables-mod-filter (1.4.21-1)
iptables-mod-ipopt (1.4.21-1)
iptables-mod-nat-extra (1.4.21-1)
iw (3.17-1)
iwinfo (2015-06-01-ade8b1b299..371)
jshn (2015-06-14-d1c66ef113..5f8)
jsonfilter (2014-06-19-cdc760c580..9a9)
kernel (3.18.21-1-a45c302fa9f..9c3)
kmod-ata-ahci (3.18.21-1)
kmod-ata-ahci-platform (3.18.21-1)
kmod-ata-core (3.18.21-1)
kmod-ata-marvell-sata (3.18.21-1)
kmod-ata-mvebu-ahci (3.18.21-1)
kmod-cfg80211 (3.18.21+2015-03-09-3)
kmod-crypto-aead (3.18.21-1)
kmod-crypto-aes (3.18.21-1)
kmod-crypto-arc4 (3.18.21-1)
kmod-crypto-authenc (3.18.21-1)
kmod-crypto-core (3.18.21-1)
kmod-crypto-des (3.18.21-1)
kmod-crypto-ecb (3.18.21-1)
kmod-crypto-hash (3.18.21-1)
kmod-crypto-manager (3.18.21-1)
kmod-crypto-mv-cesa (3.18.21-1)
kmod-crypto-pcompress (3.18.21-1)
kmod-crypto-sha1 (3.18.21-1)
kmod-crypto-test (3.18.21-1)
kmod-fs-ext4 (3.18.21-1)
kmod-fs-vfat (3.18.21-1)
kmod-gpio-button-hotplug (3.18.21-1)
kmod-gre (3.18.21-1)
kmod-hwmon-core (3.18.21-1)
kmod-hwmon-pwmfan (3.18.21-1)
kmod-hwmon-tmp421 (3.18.21-1)
kmod-i2c-core (3.18.21-1)
kmod-i2c-mv64xxx (3.18.21-1)
kmod-ifb (3.18.21-1)
kmod-ip6tables (3.18.21-1)
kmod-ipt-conntrack (3.18.21-1)
kmod-ipt-conntrack-extra (3.18.21-1)
kmod-ipt-core (3.18.21-1)
kmod-ipt-filter (3.18.21-1)
kmod-ipt-ipopt (3.18.21-1)
kmod-ipt-nat (3.18.21-1)
kmod-ipt-nat-extra (3.18.21-1)
kmod-iptunnel (3.18.21-1)
kmod-ipv6 (3.18.21-1)
kmod-leds-pca963x (3.18.21-1)
kmod-leds-tlc59116 (3.18.21-1)
kmod-ledtrig-usbdev (3.18.21-1)
kmod-lib-crc-ccitt (3.18.21-1)
kmod-lib-crc16 (3.18.21-1)
kmod-lib-lzo (3.18.21-1)
kmod-lib-textsearch (3.18.21-1)
kmod-mac80211 (3.18.21+2015-03-09-3)
kmod-mii (3.18.21-1)
kmod-mppe (3.18.21-1)
kmod-mwlwifi (3.18.21+10.3.0.3-2015..4-1)
kmod-nf-conntrack (3.18.21-1)
kmod-nf-conntrack6 (3.18.21-1)
kmod-nf-ipt (3.18.21-1)
kmod-nf-ipt6 (3.18.21-1)
kmod-nf-nat (3.18.21-1)
kmod-nf-nathelper (3.18.21-1)
kmod-nls-base (3.18.21-1)
kmod-nls-cp1250 (3.18.21-1)
kmod-nls-cp437 (3.18.21-1)
kmod-ppp (3.18.21-1)
kmod-pppoe (3.18.21-1)
kmod-pppox (3.18.21-1)
kmod-pptp (3.18.21-1)
kmod-regmap (3.18.21-1)
kmod-rtc-armada38x (3.18.21-1)
kmod-rtc-marvell (3.18.21-1)
kmod-sched-connmark (3.18.21-1)
kmod-sched-core (3.18.21-1)
kmod-scsi-core (3.18.21-1)
kmod-slhc (3.18.21-1)
kmod-thermal (3.18.21-1)
kmod-thermal-armada (3.18.21-1)
kmod-tun (3.18.21-1)
kmod-usb-core (3.18.21-1)
kmod-usb-net (3.18.21-1)
kmod-usb-net-cdc-ether (3.18.21-1)
kmod-usb-net-cdc-mbim (3.18.21-1)
kmod-usb-net-cdc-ncm (3.18.21-1)
kmod-usb-net-qmi-wwan (3.18.21-1)
kmod-usb-net-rndis (3.18.21-1)
kmod-usb-serial (3.18.21-1)
kmod-usb-serial-qualcomm (3.18.21-1)
kmod-usb-serial-sierrawireless (3.18.21-1)
kmod-usb-serial-wwan (3.18.21-1)
kmod-usb-storage (3.18.21-1)
kmod-usb-wdm (3.18.21-1)
kmod-usb2 (3.18.21-1)
kmod-usb3 (3.18.21-1)
libapr (1.5.2-1)
libaprutil (1.5.4-1)
libblobmsg-json (2015-06-14-d1c66ef113..5f8)
libc (0.9.33.2-1)
libcurl (7.40.0-3)
libevent2 (2.0.22-1)
libexpat (2.1.0-3)
libgcc (4.8-linaro-1)
libgcrypt (1.6.1-1)
libgmp (6.0.0-1)
libgnutls (3.4.4.1-1)
libgpg-error (1.12-1)
libip4tc (1.4.21-1)
libip6tc (1.4.21-1)
libiwinfo (2015-06-01-ade8b1b299..371)
libiwinfo-lua (2015-06-01-ade8b1b299..371)
libjson-c (0.12-1)
libjson-script (2015-06-14-d1c66ef113..5f8)
libltdl (2.4-1)
liblua (5.1.5-1)
liblzo (2.08-1)
libmicrohttpd (0.9.38-1.2)
libminiupnpc (1.9-1)
libnatpmp (20140401-1)
libncurses (5.9-2)
libnettle (3.1.1-1)
libnl-tiny (0.1-4)
libopenssl (1.0.2d-1)
libpcre (8.37-2)
libpolarssl (1.3.11-1)
libpthread (0.9.33.2-1)
librrd1 (1.0.50-2)
librt (0.9.33.2-1)
libsensors (3.3.5-1)
libsqlite3 (3081101-1)
libsysfs (2.1.0-2)
libubox (2015-06-14-d1c66ef113..5f8)
libubus (2015-05-25-f361bfa5fc..08e)
libubus-lua (2015-05-25-f361bfa5fc..08e)
libuci (2015-08-27.1-1)
libuci-lua (2015-08-27.1-1)
libusb-1.0 (1.0.19-1)
libustream-polarssl (2015-07-09-c2d73c2261..2d3)
libuuid (2.25.2-4)
libxtables (1.4.21-1)
lighttpd (1.4.36-1)
lighttpd-mod-redirect (1.4.36-1)
lm-sensors (3.3.5-1)
lua (5.1.5-1)
luci (git-15.276.51144-8832d53-1)
luci-app-ddns (2.2.4-1)
luci-app-firewall (git-15.276.51144-8832d53-1)
luci-app-openvpn (git-15.276.51144-8832d53-1)
luci-app-qos (git-15.276.51144-8832d53-1)
luci-app-samba (git-15.276.51144-8832d53-1)
luci-app-statistics (git-15.276.51144-8832d53-1)
luci-base (git-15.276.51144-8832d53-1)
luci-i18n-base-en (git-15.276.51144-8832d53-1)
luci-i18n-firewall-en (git-15.276.51144-8832d53-1)
luci-i18n-openvpn-en (git-15.276.51144-8832d53-1)
luci-i18n-qos-en (git-15.276.51144-8832d53-1)
luci-i18n-samba-en (git-15.276.51144-8832d53-1)
luci-i18n-statistics-en (git-15.276.51144-8832d53-1)
luci-lib-ip (git-15.276.51144-8832d53-1)
luci-lib-nixio (git-15.276.51144-8832d53-1)
luci-mod-admin-full (git-15.276.51144-8832d53-1)
luci-proto-3g (git-15.276.51144-8832d53-1)
luci-proto-ipv6 (git-15.276.51144-8832d53-1)
luci-proto-ppp (git-15.276.51144-8832d53-1)
luci-ssl (git-15.248.30277-3836b45-1)
luci-theme-bootstrap (git-15.276.51144-8832d53-1)
luci-theme-freifunk-bno (git-15.248.30277-3836b45-1)
luci-theme-freifunk-generic (git-15.248.30277-3836b45-1)
luci-theme-openwrt (git-15.276.51144-8832d53-1)
mtd (21)
netifd (2015-09-27-509ffb2247..344)
odhcp6c (2015-07-13-024525798c..db8)
odhcpd (2015-05-21-2ebf6c8216..a7c)
openssl-util (1.0.2d-1)
openvpn-polarssl (2.3.6-5)
opkg (9c97d5ecd795709c8584e..d-8)
ppp (2.4.7-6)
ppp-mod-pppoe (2.4.7-6)
pptpd (1.4.0-2)
procd (2015-09-16-b6618ffab8..462)
procd-nand (2015-09-16-b6618ffab8..462)
px5g (3)
qos-scripts (1.2.1-7)
rpcd (2015-01-10-f00890cd6e..7c5)
rrdtool1 (1.0.50-2)
samba36-server (3.6.25-4)
stress (1.0.4-1)
swconfig (10)
sysfsutils (2.1.0-2)
tc (4.0.0-1)
terminfo (5.9-2)
ubi-utils (1.5.1-2)
uboot-envtools (2015.01-1)
ubox (2015-07-14-907d046c89..ad8)
ubus (2015-05-25-f361bfa5fc..08e)
ubusd (2015-05-25-f361bfa5fc..08e)
uci (2015-08-27.1-1)
uhttpd (2015-10-08-7ed2edc40d..3cd)
uhttpd-mod-tls (2015-08-17-f91788b809..a73)
uhttpd-mod-ubus (2015-10-08-7ed2edc40d..3cd)
umbim (2015-04-09-af9c293c1f..a84)
unixodbc (2.3.4-1)
uqmi (2014-12-03-86bcdb8cca..0a4)
usb-modeswitch (2014-08-26-993a9a5427..37a)
wpad-mini (2015-03-25-1)
wwan (2014-07-17-1)
zlib (1.2.8-1)</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p302624">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Wolfie</div>
					<div class="post-datetime">
						6 Dec 2015, 17:35					</div>
				</div>
				<div class="post-content content">
					<p>Slight update.</p><p>I decided to do a tad more testing and it appears that the issue is with the wireless.&nbsp; I have another computer that is wired and it has no issues.&nbsp; I just did a speedtest on the wireless connection and am getting about 10mb/s but via the wired computer, getting roughly 170mb/s.&nbsp; So seems as though the wireless is getting sluggish over time for some reason.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p302682">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">ericwongcm</div>
					<div class="post-datetime">
						7 Dec 2015, 02:29					</div>
				</div>
				<div class="post-content content">
					<p>Check the router log after WiFi has slowed down to see if it is reporting errors or providing some clues.<br />It is probably problems with the WiFi driver. You will probably find tickets on it if you can find the error your router is reporting.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p302683">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Wolfie</div>
					<div class="post-datetime">
						7 Dec 2015, 02:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ericwongcm wrote:</cite><blockquote><p>Check the router log after WiFi has slowed down to see if it is reporting errors or providing some clues.<br />It is probably problems with the WiFi driver. You will probably find tickets on it if you can find the error your router is reporting.</p></blockquote></div><p>Would that be System or Kernel log?&nbsp; Also, any clues on what to look for?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>