<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Recommendations for Multi SSID (AP+Adhoc) routers needed</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 8 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p128923">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Floh1111</div>
					<div class="post-datetime">
						20 Feb 2011, 12:08					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I´m searching for low cost routers that can do one AP and one Adhoc mode at the same time. And I need to run kernel &gt;2.6.24 for B.A.T.M.A.N advanced kernel module on these devices. Until now I tested the Fonera an the D-Link Dir300 and on these devices it works.</p><p>Which other devices can you recommend me?</p><p>Regards<br />Floh1111</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p128926">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						20 Feb 2011, 12:37					</div>
				</div>
				<div class="post-content content">
					<p>Doesn&#039;t the wiki help you?</p><p>There is a link (somewhere) to this:<br /><a href="http://en.wikipedia.org/wiki/Comparison_of_open_source_wireless_drivers">http://en.wikipedia.org/wiki/Comparison … ss_drivers</a></p><p>I don&#039;t know if this is true, you can update. if you want to. You can also generate some own content.</p><p>This should be more reliable, but not necessarily up-to-date:&nbsp; <a href="http://wireless.kernel.org">http://wireless.kernel.org</a>/ You have to search a bit. They do lack a nice overview like the wikipedia has.</p><p>As for Kernel, I think everything but br 2.4 uses 2.6.32 and newer.</p>											<p class="post-edited">(Last edited by <strong>Orca</strong> on 20 Feb 2011, 12:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p128938">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Floh1111</div>
					<div class="post-datetime">
						20 Feb 2011, 14:23					</div>
				</div>
				<div class="post-content content">
					<p>Thank you, this links where already helpfull to find some information about the status of the drivers. But I can´t find whether special devices can do ap and adhoc mode at the same time. It is only listed whether they can do adhoc or ap mode but not especially adhoc and ap at the same time (some kind of multi ssid).</p><p>So maybe has already tested a setup like this in reallife and experienced good results with some routers and can share his expecience with me?</p><p>Regards<br />Floh1111</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p128940">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						20 Feb 2011, 14:25					</div>
				</div>
				<div class="post-content content">
					<p>Look at <a href="http://downloads.openwrt.org/backfire/10.03.1-rc4/ar71xx/">here</a> for yourself. I think TP-LINK TL-WR741N/D is the cheapest one with 1T1R while TL-WR841N/D is capable of 2T2R.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p128947">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Floh1111</div>
					<div class="post-datetime">
						20 Feb 2011, 16:02					</div>
				</div>
				<div class="post-content content">
					<p>Sorry that I need to ask but what does 1T1R and 2T2R mean?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p128964">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						20 Feb 2011, 19:14					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://en.wikipedia.org/wiki/IEEE_802.11n-2009#Number_of_antennas">IEEE 802.11n-2009 - Wikipedia, the free encyclopedia</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133207">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">sroppon</div>
					<div class="post-datetime">
						16 Apr 2011, 21:27					</div>
				</div>
				<div class="post-content content">
					<p>Thank you all for trying to help, but no one seems to understand what the question is about. None of those links have any information about running multi-SSID with ad-hoc and AP.</p><p>The point is that you can run mesh network with B.A.T.M.A.N or similar protocol in ad-hoc mode, but regular computer, phone etc. clients cannot connect to the mesh network as they understand nothing about the protocol. So you need a regular access point for them. With some chipsets it could be possible to run both with the same hardware simultaneously. That would be easier and less costly than using a second wireless AP or USB stick for regular clients.</p><p>Today I installed OpenWrt on a TP-Link TL-WR741ND rev. 1.9 and it&#039;s NOT POSSIBLE. It didn&#039;t even configure right and this is what I got in dmesg:</p><p>ath: Cannot create ADHOC interface when other interfaces already exist.<br />ath: Cannot create ADHOC interface when other interfaces already exist.<br />ath: Cannot create ADHOC interface when other interfaces already exist.<br />ath: Cannot create ADHOC interface when other interfaces already exist.</p><p>-sami</p>											<p class="post-edited">(Last edited by <strong>sroppon</strong> on 16 Apr 2011, 22:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133243">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						17 Apr 2011, 13:50					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>sroppon wrote:</cite><blockquote><p>Thank you all for trying to help, but no one seems to understand what the question is about. None of those links have any information about running multi-SSID with ad-hoc and AP.</p></blockquote></div><p><a href="http://downloads.openwrt.org/snapshots/trunk/docs/openwrt.html#x1-120001.2.2">OpenWrt manual</a><br /></p><div class="quotebox"><blockquote><p><strong>Limitations</strong>: There are certain limitations when combining modes. Only the following mode combinations are supported:</p><p>&nbsp; &nbsp; * <strong>Broadcom</strong>:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; o <strong>1x</strong> sta, <strong>0-3x</strong> ap<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; o <strong>1-4x</strong> ap<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; o <strong>1x</strong> adhoc<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; o <strong>1x</strong> monitor</p><p>&nbsp; &nbsp; &nbsp; WDS links can only be used in pure AP mode and cannot use WEP (except when sharing the settings with the master interface, which is done automatically).<br />&nbsp; &nbsp; * <strong>Atheros</strong>:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; o <strong>1x</strong> sta, <strong>0-Nx</strong> ap<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; o <strong>1-Nx</strong> ap<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; o <strong>1x</strong> adhoc</p><p>&nbsp; &nbsp; &nbsp; N is the maximum number of VAPs that the module allows, it defaults to 4, but can be changed by loading the module with the maxvaps=N parameter.</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133248">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">sroppon</div>
					<div class="post-datetime">
						17 Apr 2011, 14:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>fyi wrote:</cite><blockquote><p>* <strong>Atheros</strong>:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; o <strong>1x</strong> sta, <strong>0-Nx</strong> ap<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; o <strong>1-Nx</strong> ap<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; o <strong>1x</strong> adhoc</p></blockquote></div><p>Yeah, looking documentation this seems to be some kind of generic assumption. But Atheros AR2315 actually works right with 1 AP + 1 ad-hoc. </p><p>The mesh cell with OpenWrt and multi-SSID:</p><div class="codebox"><pre><code>root@made:~# cat /proc/cpuinfo 
system type        : Atheros AR2315
----8&lt;----

root@made:~# iwconfig 
lo        no wireless extensions.

eth0      no wireless extensions.

br-lan    no wireless extensions.

wifi0     no wireless extensions.

ath0      IEEE 802.11g  ESSID:&quot;batman-ap&quot;  
          Mode:Master  Frequency:2.412 GHz  Access Point: 00:18:84:13:A8:09   
          Bit Rate:0 kb/s   Tx-Power:18 dBm   
          RTS thr:off   Fragment thr:off
          Encryption key:off
          Power Management:off
          Link Quality=36/70  Signal level=-60 dBm  Noise level=-96 dBm
          Rx invalid nwid:670172  Rx invalid crypt:0  Rx invalid frag:0
          Tx excessive retries:0  Invalid misc:0   Missed beacon:0

ath1      IEEE 802.11g  ESSID:&quot;Vaasankatu B.A.T.M.A.N L2-12&quot;  
          Mode:Ad-Hoc  Frequency:2.412 GHz  Cell: 02:C0:FF:EE:CA:11   
          Bit Rate:0 kb/s   Tx-Power:18 dBm   
          RTS thr:off   Fragment thr:off
          Encryption key:off
          Power Management:off
          Link Quality=36/70  Signal level=-60 dBm  Noise level=-96 dBm
          Rx invalid nwid:8044  Rx invalid crypt:0  Rx invalid frag:0
          Tx excessive retries:0  Invalid misc:0   Missed beacon:0

bat0      no wireless extensions.

root@made:~# batctl if
ath1: active

root@made:~# brctl show
bridge name    bridge id        STP enabled    interfaces
br-lan        8000.00188413a808    no        eth0
                            bat0
                            ath0

root@made:~# ifconfig br-lan
br-lan    Link encap:Ethernet  HWaddr 00:18:84:13:A8:08  
          inet addr:10.0.64.11  Bcast:10.0.127.255  Mask:255.255.192.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:24881 errors:0 dropped:0 overruns:0 frame:0
          TX packets:2705 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:2045098 (1.9 MiB)  TX bytes:301843 (294.7 KiB)</code></pre></div><p>The gateway with Debian:</p><div class="codebox"><pre><code>katiska:/etc/awstats# iwconfig wlan0
wlan0     IEEE 802.11bgn  ESSID:&quot;Vaasankatu B.A.T.M.A.N L2-12&quot;  
          Mode:Ad-Hoc  Frequency:2.412 GHz  Cell: 02:C0:FF:EE:CA:11   
          Tx-Power=20 dBm   
          Retry  long limit:7   RTS thr:off   Fragment thr:off
          Encryption key:off
          Power Management:on
          
katiska:/etc/awstats# ifconfig bat0
bat0      Link encap:Ethernet  HWaddr 92:8a:be:d6:80:a3  
          inet addr:10.0.64.1  Bcast:10.0.127.255  Mask:255.255.192.0
          inet6 addr: fe80::908a:beff:fed6:80a3/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:2048796 errors:0 dropped:0 overruns:0 frame:0
          TX packets:3137178 errors:0 dropped:158 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:282185428 (269.1 MiB)  TX bytes:4194987497 (3.9 GiB)</code></pre></div><p>A client computer with Ubuntu:</p><div class="codebox"><pre><code>root@atom:~# iwconfig wlan0
wlan0     IEEE 802.11bg  ESSID:&quot;batman-ap&quot;  
          Mode:Managed  Frequency:2.412 GHz  Access Point: 00:18:84:13:A8:09   
          Bit Rate=48 Mb/s   Tx-Power=20 dBm   
          Retry  long limit:7   RTS thr:off   Fragment thr:off
          Encryption key:off
          Power Management:off
          Link Quality=46/70  Signal level=-64 dBm  
          Rx invalid nwid:0  Rx invalid crypt:0  Rx invalid frag:0
          Tx excessive retries:20  Invalid misc:450   Missed beacon:0

root@atom:~# ping -f 10.0.64.1
PING 10.0.64.1 (10.0.64.1) 56(84) bytes of data.
..........^C    
--- 10.0.64.1 ping statistics ---
274 packets transmitted, 264 received, 3% packet loss, time 2519ms
rtt min/avg/max/mdev = 2.934/14.026/95.504/15.351 ms, pipe 8, ipg/ewma 9.228/14.361 ms</code></pre></div><p>-sami</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p143973">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">CiccioMinnesota</div>
					<div class="post-datetime">
						19 Sep 2011, 10:54					</div>
				</div>
				<div class="post-content content">
					<p>@Floh1111<br />I think you have to narrow your search down between devices that are equipped with Ralink drivers, as the Fonera and D-Link you mentioned. AFAIK, mac80211/ath9k still doesn&#039;t allow simultaneous ad-hoc + AP mode.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>