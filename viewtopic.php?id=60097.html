<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Ubiquiti AirRouter bricks after flashing Chaos Calmer</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 14 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p294640">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">dhani</div>
					<div class="post-datetime">
						4 Oct 2015, 19:17					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I have problem with my Ubnt Air Router, my problem is similar to this <a href="https://forum.openwrt.org/viewtopic.php?id=59973.">https://forum.openwrt.org/viewtopic.php?id=59973.</a> But unfortunately, tftp recovery didn&#039;t help me.</p><p>Several users on this forum reported the same issue with the Air Router, Chaos Calmer bricks the device. So I guess this is a bug with the Chaos Clamer.</p><p>Now my device is bricked and tftp recovery didn&#039;t help. My router previously used Attitude Adjustment, I upgraded using openwrt-15.05-ar71xx-generic-ubnt-airrouter-squashfs-sysupgrade.bin and after flashing, the device won&#039;t boot. I tried to ping 192.168.1.1 and 192.168.1.20 and no reply.</p><p>Then I flashed ubnt firmware XM-5.5.6 using tftp and it&#039;s working ok. From XM-5.5.6 I did upgrade to newest ubnt firmware XM-5.6.2. From XM-5.6.2, I tried to flash Chaos Clamer factory openwrt-15.05-ar71xx-generic-ubnt-airrouter-squashfs-factory.bin but after flashing, the device won&#039;t boot, restart and reset didn&#039;t help.</p><p>Now this is the worst part, I tried to flash ubnt XM-5.6.2 via tftp, and after flashing the firmware, it always crashing on boot. The leds go off every 5 seconds as if power cycled. Fortunate enough, tftp is still working, I can ping to 192.168.1.20.<br />But, from here I couldn&#039;t flash any firmware other than ubnt XM-5.6.2, other versions of ubnt firmware also didn&#039;t work. The tftp message says &quot;Error Code 2: Firmware check failed&quot;.<br />I guess this has something to do with the XM-5.6.2 U-boot bootloader, the bootloader prevents me from flashing another firmware except ubnt XM-5.6.2.</p><p>I have another router, same hardware. I tried flashing Chaos Calmer on this device and the result was the same, it bricked. Now I can confirm that flashing Chaos Calmer on this device will cause the router to brick.<br />I didn&#039;t flash ubnt firmware after this second device bricked, I flashed Barrier Breaker instead and it&#039;s running well.</p><p>If you are having problem like mine, DO NOT flash ubnt XM-5.6.2 or you won&#039;t be able to recover your router.</p><p>And for my first router, I&#039;m afraid that my only option is to use ttl serial cable to access console and do something from there. If anyone here can give me some advice, that would be great.</p>											<p class="post-edited">(Last edited by <strong>dhani</strong> on 4 Oct 2015, 19:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p295428">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">flameflower</div>
					<div class="post-datetime">
						9 Oct 2015, 12:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dhani wrote:</cite><blockquote><p>Hi,</p><p>I have problem with my Ubnt Air Router, my problem is similar to this <a href="https://forum.openwrt.org/viewtopic.php?id=59973.">https://forum.openwrt.org/viewtopic.php?id=59973.</a> But unfortunately, tftp recovery didn&#039;t help me.</p><p>Several users on this forum reported the same issue with the Air Router, Chaos Calmer bricks the device. So I guess this is a bug with the Chaos Clamer.</p><p>Now my device is bricked and tftp recovery didn&#039;t help. My router previously used Attitude Adjustment, I upgraded using openwrt-15.05-ar71xx-generic-ubnt-airrouter-squashfs-sysupgrade.bin and after flashing, the device won&#039;t boot. I tried to ping 192.168.1.1 and 192.168.1.20 and no reply.</p><p>Then I flashed ubnt firmware XM-5.5.6 using tftp and it&#039;s working ok. From XM-5.5.6 I did upgrade to newest ubnt firmware XM-5.6.2. From XM-5.6.2, I tried to flash Chaos Clamer factory openwrt-15.05-ar71xx-generic-ubnt-airrouter-squashfs-factory.bin but after flashing, the device won&#039;t boot, restart and reset didn&#039;t help.</p><p>Now this is the worst part, I tried to flash ubnt XM-5.6.2 via tftp, and after flashing the firmware, it always crashing on boot. The leds go off every 5 seconds as if power cycled. Fortunate enough, tftp is still working, I can ping to 192.168.1.20.<br />But, from here I couldn&#039;t flash any firmware other than ubnt XM-5.6.2, other versions of ubnt firmware also didn&#039;t work. The tftp message says &quot;Error Code 2: Firmware check failed&quot;.<br />I guess this has something to do with the XM-5.6.2 U-boot bootloader, the bootloader prevents me from flashing another firmware except ubnt XM-5.6.2.</p><p>I have another router, same hardware. I tried flashing Chaos Calmer on this device and the result was the same, it bricked. Now I can confirm that flashing Chaos Calmer on this device will cause the router to brick.<br />I didn&#039;t flash ubnt firmware after this second device bricked, I flashed Barrier Breaker instead and it&#039;s running well.</p><p>If you are having problem like mine, DO NOT flash ubnt XM-5.6.2 or you won&#039;t be able to recover your router.</p><p>And for my first router, I&#039;m afraid that my only option is to use ttl serial cable to access console and do something from there. If anyone here can give me some advice, that would be great.</p></blockquote></div><p>Hi,<br />I have the same issue.<br />Have you tried to flash XM-5.5.6 after upgrade to XM-5.6.2?<br />Is it stil says &quot;Error Code 2: Firmware check failed&quot;?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p295436">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">dhani</div>
					<div class="post-datetime">
						9 Oct 2015, 13:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>flameflower wrote:</cite><blockquote><p>Hi,<br />I have the same issue.<br />Have you tried to flash XM-5.5.6 after upgrade to XM-5.6.2?<br />Is it stil says &quot;Error Code 2: Firmware check failed&quot;?</p></blockquote></div><p>Yes, after flashing XM-5.6.2, I couldn&#039;t tftp any firmware other than XM-5.6.2. I tried XM-5.5.6 and gave me the same result, Error Code 2.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p296320">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">flameflower</div>
					<div class="post-datetime">
						16 Oct 2015, 21:52					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dhani wrote:</cite><blockquote><div class="quotebox"><cite>flameflower wrote:</cite><blockquote><p>Hi,<br />I have the same issue.<br />Have you tried to flash XM-5.5.6 after upgrade to XM-5.6.2?<br />Is it stil says &quot;Error Code 2: Firmware check failed&quot;?</p></blockquote></div><p>Yes, after flashing XM-5.6.2, I couldn&#039;t tftp any firmware other than XM-5.6.2. I tried XM-5.5.6 and gave me the same result, Error Code 2.</p></blockquote></div><p>I hope this topic will be helpfull for you<br /><a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=285332&amp;sid=aeec8655af7967577eb42f124be1f61f">http://www.dd-wrt.com/phpBB2/viewtopic. … 124be1f61f</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p304880">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">chessman</div>
					<div class="post-datetime">
						24 Dec 2015, 08:19					</div>
				</div>
				<div class="post-content content">
					<p>To fix this you need to use a USB to TTL 3.3v adapter and flash XM-v5.5.6.build17762.bin through the console using tftp.</p><p>I had exactly the same problem as described by the OP.</p><p>Details on this page:<br /><a href="http://community.ubnt.com/t5/airRouter/AirRouter-HP-upgrade-failed/td-p/1307929">http://community.ubnt.com/t5/airRouter/ … -p/1307929</a><br />right at the very bottom, post #6</p><p>You have to flash using command &quot;urescue -f -e&quot; and using XM-v5.5.6.build17762.bin, this will force it to overwrite the bootloader.</p><p>Then you need to flash once more with same firmware but using the standard tftp recovery precedure as documented on the ubiquiti site, holding reset in for 10secs while powering on etc...&nbsp; then you can proceed to flash openwrt in the normal way using the AirOS web gui.</p><p>This as far as I know affects all Ubiquiti XM devices, AirRouters, Picostations, NanoStations etc... that use XM firmware.</p><p>If you haven&#039;t bricked your device or tried to load openwrt yet, then you must downgrade the firmware to 5.5.6 first before loading openwrt.&nbsp; This can be done safely through the AirOS gui using the above firmware file, it will also downgrade the bootloader.&nbsp; The system will also warn you about the downgrade and losing settings, just ignore it and proceed.</p><p>Pages like this:<br /><a href="https://wiki.openwrt.org/toh/ubiquiti/airmaxm">https://wiki.openwrt.org/toh/ubiquiti/airmaxm</a><br />Need to be updated</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>