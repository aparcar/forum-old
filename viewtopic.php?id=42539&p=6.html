<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> 1043nd 12.09rc1 WIFI drops.</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 7 Oct 2014 and 27 Apr 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 6 of 7</div><nav><ul><li><a href="viewtopic.php%3Fid=42539&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42539&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=42539&amp;p=5.html">5</a></li><li class="pagination-current"><span>6</span></li><li><a href="viewtopic.php%3Fid=42539&amp;p=7.html">7</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p217003">
				<div class="post-metadata">
					<div class="post-num">Post #126</div>
					<div class="post-author">rcmc_ronny</div>
					<div class="post-datetime">
						7 Nov 2013, 23:38					</div>
				</div>
				<div class="post-content content">
					<p>Hope it helps <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><div class="codebox"><pre><code>Version of your WR1043ND: 1.6
Type of the Connection: Ethernet (only used as Accesspoint)
Type of your Modem: I have no modem
Speed of the tests: iperf and normal Android play store downloading, normal browsing 
Type of the Tests: WiFi-to-LAN and reverse
Type of WiFi encryption: WPA2-PSK with AES Encryption (tested also TKIP, issues stays the same, but AES is the latest and should work)
WiFi Channel width/htmode: forced 40Mhz ( because i have to ) / also tested with 20/40 and 20, issues persist, no difference visible
wireless protocol/hwmode: n-mode (with n mode disabled, there are no issues, but a n mode ap, should do N without any flaws)
Type of the WiFi Mode: AP
Speed of the connection:  ~30 Mbps up/down (Samsung Galaxy S2 / S4)
Signal Strength: 80-90%
Which Firmware: openWRT (12.09 and newer), Stock crashes wifi, but with 10.03.1 it&#039;s a bit more stable, but sometimes i get failed to stop dma failues with one wifi client.
Firmware Version: with stock firmware every of them crashes, with openwrt 12.09 and newer ones are crap.
U-Boot Version: U-Boot 1.1.4 (Nov 17 2009 - 11:56:26)
What do you do against the problem: only reboot / or powercycle helps
How often does it appear: 2-3 times a week or more in one day, downloading big fils triggers it faster i think, then i got this more than once daily
When does it not appear: doing nothing with it.
changing channels helps: does not help
any other information: no 
any other details: no</code></pre></div>									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 127 to 125 are missing from our archive.</p>
			</div>
		
		
		
			<article class="post" id="p216980">
				<div class="post-metadata">
					<div class="post-num">Post #126</div>
					<div class="post-author">mastertje</div>
					<div class="post-datetime">
						7 Nov 2013, 15:54					</div>
				</div>
				<div class="post-content content">
					<p>My problem is that WiFi randomly dissapears or you cant connect.</p><p>Version of your WR1043ND: 1.11<br/>Type of the Connection: PPPOE<br/>Type of your Modem: Ubee Modem<br/>Speed of the tests: Speed is fine.<br/>Type of the Tests: Wan-to-WiFi<br/>Type of WiFi encryption: mixed WPA/WPA2 PSK (TKIP, CCMP)<br/>WiFi Channel width/htmode: auto, 40MHz above (doesnt matter if I chose a channel)<br/>wireless protocol/hwmode: n-mode<br/>Type of the WiFi Mode: AP<br/>Speed of the connection: Dont know. Fast enough when it works!<br/>Signal Strength: 60-90%<br/>Which Firmware: openWRT<br/>Firmware Version: 12.09 latest<br/>U-Boot Version: U-Boot 1.1.4 (Nov 17 2009 - 11:56:26)<br/>What do you do against the problem: reboot or just press SCAN in the web module.<br/>How often does it appear: 2-3 times a week or more in one day, mostly at night (not at high speeds).<br/>When does it not appear: always appearsa.<br/>changing channels helps: Doesn&#039;t help<br/>any other information: no<br/>any other details: no</p>											<p class="post-edited">(Last edited by <strong>mastertje</strong> on 7 Nov 2013, 16:05)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217507">
				<div class="post-metadata">
					<div class="post-num">Post #127</div>
					<div class="post-author">FREDY</div>
					<div class="post-datetime">
						14 Nov 2013, 12:17					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I was about to buy one of these devices, so it&#039;s good to see all this discussion and have it in mind.</p><p>However one thing I&#039;ve noticed and I wanted to point, despite if it&#039;s related or not with the issue, is that most of you are using HT40 with 2.4Ghz.<br />Did you guys check your neighborhood to find out what other people are using and how you are interfering with their signal ?<br />I see HT40 to be used more in places like a Warehouse, a Point to Point link, Farm area or even in a house where you don&#039;t have many neighbors using 2.4Ghz too.</p><p>I find it quiet selfish people who try to force the use HT40(disabling wifi scan) without doing a proper survey of what is around them and how they are interfering with others&#039; signals.<br />Yes, everybody wants their routers to operate at full speed and get the most throughput out of their radios, but I think we are all technical enough to understand what the effects of using HT40 in a dense area are.<br />Be considerate with people around you and only use it when it is really possible, otherwise I suggest buying a 5Ghz capable router and you will find a much more free spectrum to get higher throughput.</p>											<p class="post-edited">(Last edited by <strong>FREDY</strong> on 14 Nov 2013, 12:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217516">
				<div class="post-metadata">
					<div class="post-num">Post #128</div>
					<div class="post-author">rcmc_ronny</div>
					<div class="post-datetime">
						14 Nov 2013, 14:12					</div>
				</div>
				<div class="post-content content">
					<p>speaking for me, there is no interference from any neighbors. The nearest neighbor&nbsp; wlan has a very very poor signal and is on channel 10, i am on channel 1, so this should not affect any, the no scan option was a suggestion some time ago, before, i did not have it enabled.</p><p>But your point is good, everybody should check this on his self, perhaps it helps 1 or 2 people.</p><p>Ronny</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219891">
				<div class="post-metadata">
					<div class="post-num">Post #129</div>
					<div class="post-author">alphasparc</div>
					<div class="post-datetime">
						13 Dec 2013, 12:58					</div>
				</div>
				<div class="post-content content">
					<p>I don&#039;t know anymore.<br />I changed all my clients to atheros adapters.<br />And saturate the connection using Bittorrent as usual.<br />But no errors yet.<br />Edit: Got the errors again...</p>											<p class="post-edited">(Last edited by <strong>alphasparc</strong> on 14 Dec 2013, 14:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220154">
				<div class="post-metadata">
					<div class="post-num">Post #130</div>
					<div class="post-author">adrinux</div>
					<div class="post-datetime">
						17 Dec 2013, 00:24					</div>
				</div>
				<div class="post-content content">
					<p>I have&nbsp; v1.8 that&#039;s been ok since I bought it...2 years ago? But over the last week or so started having real problems with the wireless&nbsp; dropping out at the edge of the range. Had been able to watch streamed video on my iPad2 for months and then suddenly and then suddenly not.</p><p>Played about with channels etc all to no avail. Then this evening I decided to try reverting the only thing that had physically changed – i&#039;d bought a new modem and its power cable was shorter so I&#039;d moved the router all of 4 inches to the right horizontally and put the modem where the router was – moved it back and boom! problems have gone away again. From 1 bar on the ipad back to 4 and streaming movies is working again.</p><p>I&#039;m happy but somewhat dumbfounded. Moving router 4 inches closer to the windowsill we&#039;d been sitting the iPad on = wireless dropouts and wireless dying just as other people in the thread describe. Move the router 4 inches further away from the windowsill that&#039;s on the far side of the house all of 10 metres away and its fine again.</p><p>Conclusion: Wireless is weird.</p><p>All can say is yes, the wr1043nd v1.8 running AA does have issues moving a lot of data when the signal gets weak and that does seem to cause the wireless to stop entirely for a few seconds. &lt;cough&gt; Try moving the router....</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223055">
				<div class="post-metadata">
					<div class="post-num">Post #131</div>
					<div class="post-author">moroboshi</div>
					<div class="post-datetime">
						18 Jan 2014, 12:23					</div>
				</div>
				<div class="post-content content">
					<p>For me, putting this into /etc/rc.local seems to help in preventing the client connections from dropping:</p><div class="codebox"><pre><code>watch_wlan() {
        while true; do
                iw dev wlan0 scan | grep SSID:
                sleep 5m
        done
}

watch_wlan &amp;</code></pre></div><p>See <a href="https://forum.openwrt.org/viewtopic.php?pid=223053,">https://forum.openwrt.org/viewtopic.php?pid=223053,</a> the symptoms I was seeing were:<br /></p><div class="quotebox"><blockquote><p>So after 3 hours suddenly all stations timed out.<br />Even more interestingly when I do a wireless scan on the web UI, immediately all stations reconnect.</p></blockquote></div><p>So the workaround now does a scripted wireless scan every 5 minutes and I haven&#039;t seen any further client timeout issues.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223362">
				<div class="post-metadata">
					<div class="post-num">Post #132</div>
					<div class="post-author">asantaga</div>
					<div class="post-datetime">
						21 Jan 2014, 13:37					</div>
				</div>
				<div class="post-content content">
					<p>Hey all,</p><p>Whats the latest with this?? Im currently running an old version of the stock firmware, which for some weird reason, needs rebooting every day....</p><p>Any progress on this? Does the above workaround work for all?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225675">
				<div class="post-metadata">
					<div class="post-num">Post #133</div>
					<div class="post-author">Ronar85</div>
					<div class="post-datetime">
						18 Feb 2014, 17:29					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>i&#039;ve also same troubles with the WLAN connection, like it&#039;s described in this thread.</p><p>My Wireless Config is this one:<br /></p><div class="codebox"><pre><code>config wifi-device &#039;radio0&#039;
        option type &#039;mac80211&#039;
        option macaddr &#039;a0:f3:c1:3c:df:c2&#039;
        option hwmode &#039;11ng&#039;
        list ht_capab &#039;SHORT-GI-40&#039;
        list ht_capab &#039;DSSS_CCK-40&#039;
        option txpower &#039;20&#039;
        option country &#039;US&#039;
        option channel &#039;9&#039;
        option noscan &#039;1&#039;
        option bursting &#039;1&#039;
        option ff &#039;1&#039;
        option compression &#039;1&#039;
        option xr &#039;1&#039;
        option ar &#039;1&#039;
        option htmode &#039;HT40+&#039;</code></pre></div><p>I&#039;ve just implemented moroboshi&#039;s workarroud - let&#039;s see if this helps.</p><p>As anyone updated his 1043nd from the rc1 to the final release version?<br />Is there the problem solved?</p><p>cu<br />Ronar</p>											<p class="post-edited">(Last edited by <strong>Ronar85</strong> on 18 Feb 2014, 17:31)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225680">
				<div class="post-metadata">
					<div class="post-num">Post #134</div>
					<div class="post-author">Ronar85</div>
					<div class="post-datetime">
						18 Feb 2014, 18:59					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>ok - just implemented the workarround... and now... WLAN drops again ... <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>System Log says the following:<br /></p><div class="codebox"><pre><code>Feb 18 17:53:48 Router kern.err kernel: [ 6184.520000] ath: phy0: DMA failed to stop in 10 ms AR_CR=0x00000024 AR_DIAG_SW=0x42000020 DMADBG_7=0x000084c0
Feb 18 17:53:48 Router kern.err kernel: [ 6184.530000] ath: phy0: Could not stop RX, we could be confusing the DMA engine when we start RX up
Feb 18 17:53:48 Router kern.err kernel: [ 6185.010000] ath: phy0: Failed to stop TX DMA, queues=0x008!
Feb 18 17:53:49 Router kern.err kernel: [ 6185.260000] ath: phy0: Failed to stop TX DMA, queues=0x100!
Feb 18 17:53:49 Router kern.err kernel: [ 6185.730000] ath: phy0: Failed to stop TX DMA, queues=0x100!
Feb 18 17:53:50 Router kern.err kernel: [ 6186.670000] ath: phy0: Failed to stop TX DMA, queues=0x004!
Feb 18 17:53:50 Router kern.err kernel: [ 6187.140000] ath: phy0: Failed to stop TX DMA, queues=0x100!
Feb 18 17:53:52 Router kern.err kernel: [ 6188.310000] ath: phy0: Failed to stop TX DMA, queues=0x008!
Feb 18 17:53:52 Router kern.err kernel: [ 6188.570000] ath: phy0: Failed to stop TX DMA, queues=0x10c!
Feb 18 17:53:53 Router kern.err kernel: [ 6189.510000] ath: phy0: Failed to stop TX DMA, queues=0x108!
Feb 18 17:53:54 Router kern.err kernel: [ 6190.910000] ath: phy0: Failed to stop TX DMA, queues=0x008!
Feb 18 17:53:55 Router kern.err kernel: [ 6191.150000] ath: phy0: Failed to stop TX DMA, queues=0x008!
Feb 18 17:53:55 Router kern.err kernel: [ 6191.400000] ath: phy0: Failed to stop TX DMA, queues=0x100!
Feb 18 17:53:55 Router kern.err kernel: [ 6191.870000] ath: phy0: Failed to stop TX DMA, queues=0x100!
Feb 18 17:53:55 Router kern.err kernel: [ 6192.110000] ath: phy0: Failed to stop TX DMA, queues=0x008!
Feb 18 17:53:57 Router kern.err kernel: [ 6193.280000] ath: phy0: Failed to stop TX DMA, queues=0x100!
Feb 18 17:53:58 Router kern.err kernel: [ 6194.220000] ath: phy0: Failed to stop TX DMA, queues=0x008!
Feb 18 17:53:58 Router kern.err kernel: [ 6194.470000] ath: phy0: Failed to stop TX DMA, queues=0x008!
Feb 18 17:53:58 Router kern.err kernel: [ 6194.710000] ath: phy0: Failed to stop TX DMA, queues=0x100!
Feb 18 17:53:59 Router kern.err kernel: [ 6195.180000] ath: phy0: Failed to stop TX DMA, queues=0x100!
Feb 18 17:53:59 Router kern.err kernel: [ 6195.430000] ath: phy0: Failed to stop TX DMA, queues=0x008!
Feb 18 17:54:01 Router kern.err kernel: [ 6197.520000] ath: phy0: Failed to stop TX DMA, queues=0x100!
Feb 18 17:54:03 Router kern.err kernel: [ 6199.150000] ath: phy0: Failed to stop TX DMA, queues=0x004!
Feb 18 17:54:03 Router kern.err kernel: [ 6199.400000] ath: phy0: Failed to stop TX DMA, queues=0x104!
Feb 18 17:54:04 Router kern.err kernel: [ 6200.350000] ath: phy0: Failed to stop TX DMA, queues=0x10c!
Feb 18 17:54:04 Router kern.err kernel: [ 6200.830000] ath: phy0: Failed to stop TX DMA, queues=0x100!
Feb 18 17:54:04 Router kern.err kernel: [ 6201.070000] ath: phy0: Failed to stop TX DMA, queues=0x004!
Feb 18 17:54:05 Router kern.err kernel: [ 6201.320000] ath: phy0: Failed to stop TX DMA, queues=0x104!
Feb 18 17:54:06 Router kern.err kernel: [ 6202.260000] ath: phy0: Failed to stop TX DMA, queues=0x104!
Feb 18 17:54:06 Router kern.err kernel: [ 6202.740000] ath: phy0: Failed to stop TX DMA, queues=0x100!
Feb 18 17:54:07 Router kern.err kernel: [ 6203.210000] ath: phy0: Failed to stop TX DMA, queues=0x100!
Feb 18 17:54:07 Router kern.err kernel: [ 6203.690000] ath: phy0: Failed to stop TX DMA, queues=0x100!
Feb 18 17:54:08 Router kern.err kernel: [ 6204.620000] ath: phy0: Failed to stop TX DMA, queues=0x100!
Feb 18 17:54:09 Router kern.err kernel: [ 6205.560000] ath: phy0: Failed to stop TX DMA, queues=0x100!
Feb 18 17:54:10 Router kern.err kernel: [ 6206.500000] ath: phy0: Failed to stop TX DMA, queues=0x100!
Feb 18 17:54:10 Router kern.err kernel: [ 6206.970000] ath: phy0: Failed to stop TX DMA, queues=0x100!
Feb 18 17:54:11 Router kern.err kernel: [ 6207.450000] ath: phy0: Failed to stop TX DMA, queues=0x100!
Feb 18 17:54:12 Router kern.err kernel: [ 6208.390000] ath: phy0: Failed to stop TX DMA, queues=0x100!
Feb 18 17:54:13 Router kern.err kernel: [ 6209.320000] ath: phy0: Failed to stop TX DMA, queues=0x100!</code></pre></div><p>any ideas?</p><p>cu</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225685">
				<div class="post-metadata">
					<div class="post-num">Post #135</div>
					<div class="post-author">snk</div>
					<div class="post-datetime">
						18 Feb 2014, 20:24					</div>
				</div>
				<div class="post-content content">
					<p>Using HT40 in a crowded environment will definitely make things worse. Try HT20.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225690">
				<div class="post-metadata">
					<div class="post-num">Post #136</div>
					<div class="post-author">Ronar85</div>
					<div class="post-datetime">
						18 Feb 2014, 21:09					</div>
				</div>
				<div class="post-content content">
					<p>hi,</p><p>ok - i&#039;ll try it with HT20 - i&#039;ll give it a chance ;-)</p><p>and - my Router is rev. 1.10... i&#039;ve bought the router Nov. 2012... i believe there was no rev. 2.0 available... <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>Which revision are you using? Are you using the same or likely same configuration?</p><p>cu</p>											<p class="post-edited">(Last edited by <strong>Ronar85</strong> on 18 Feb 2014, 21:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p226000">
				<div class="post-metadata">
					<div class="post-num">Post #137</div>
					<div class="post-author">kisssandoradam</div>
					<div class="post-datetime">
						22 Feb 2014, 15:24					</div>
				</div>
				<div class="post-content content">
					<p>Good news for every people who still have waranty (on paper)!</p><p>I have reinstalled the original firmware on my router, sent back to the shop where i bought it, and now i&#039;m using a new TP-LINK TL-WR-1043ND V2 (2.1) router. TP-LINK has just replaced the 1.8 model with a 2.1 model <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> Now i have two of the 2.1 model and they have no problem at all. They are running 24 hours every day. Before you send back the router, you should reinstall a firmware with non boot word, and then do a hard reset on it. It is worth it, even without internet connection for a week...</p><p>Good Luck!</p>											<p class="post-edited">(Last edited by <strong>kisssandoradam</strong> on 22 Feb 2014, 15:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p226016">
				<div class="post-metadata">
					<div class="post-num">Post #138</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						22 Feb 2014, 20:31					</div>
				</div>
				<div class="post-content content">
					<p>Finally!<br /><a href="https://dev.openwrt.org/ticket/14767#comment:7">Ticket #14767 (TP-LINK 1043ND wifi performance)</a> closed (fixed) for nbd<br /><a href="https://dev.openwrt.org/changeset/39684">ath9k: add a tx locking fix</a><br /><a href="https://dev.openwrt.org/changeset/39685">ath9k: enable u-apsd support</a><br /><a href="https://dev.openwrt.org/changeset/39686">mac80211: merge some upstream fixes</a><br /><a href="https://dev.openwrt.org/changeset/39687">ath9k: show more reset causes in debugfs</a><br /><a href="https://dev.openwrt.org/changeset/39688">ath9k: fix issues that have been plaguing some powersave clients since the … </a><br />Compiling... <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p226804">
				<div class="post-metadata">
					<div class="post-num">Post #139</div>
					<div class="post-author">raz123</div>
					<div class="post-datetime">
						4 Mar 2014, 20:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Nilfred wrote:</cite><blockquote><p>Finally!<br /><a href="https://dev.openwrt.org/ticket/14767#comment:7">Ticket #14767 (TP-LINK 1043ND wifi performance)</a> closed (fixed) for nbd<br /><a href="https://dev.openwrt.org/changeset/39684">ath9k: add a tx locking fix</a><br /><a href="https://dev.openwrt.org/changeset/39685">ath9k: enable u-apsd support</a><br /><a href="https://dev.openwrt.org/changeset/39686">mac80211: merge some upstream fixes</a><br /><a href="https://dev.openwrt.org/changeset/39687">ath9k: show more reset causes in debugfs</a><br /><a href="https://dev.openwrt.org/changeset/39688">ath9k: fix issues that have been plaguing some powersave clients since the … </a><br />Compiling... <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>How&#039;s it been performing for you?</p><p>EDIT: Looks like this could be interesting: <a href="https://dev.openwrt.org/changeset/39767">https://dev.openwrt.org/changeset/39767</a></p>											<p class="post-edited">(Last edited by <strong>raz123</strong> on 4 Mar 2014, 20:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p226814">
				<div class="post-metadata">
					<div class="post-num">Post #140</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						4 Mar 2014, 23:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>moroboshi wrote:</cite><blockquote><p>For me, putting this into /etc/rc.local seems to help in <strong>preventing</strong> the client connections from dropping:<br /></p><div class="codebox"><pre><code>watch_wlan() {
        while true; do
                iw dev wlan0 scan | grep SSID:
                sleep 5m
        done
}

watch_wlan &amp;</code></pre></div><p>So the workaround now does a scripted wireless scan every 5 minutes and I haven&#039;t seen any further client timeout issues.</p></blockquote></div><p>For me, It doesn&#039;t <strong>prevent</strong> nor <strong>resolve</strong> the problem, but I sightly modified the script based on a previous discussed symptom:&nbsp; <br /></p><div class="codebox"><pre><code>watch_wlan() {
        while true; do
if ! iw dev wlan0 station dump | grep -q Station; then
    iw dev wlan0 scan | grep &quot;^BSS\|SSID\|signal\|DS \|WPS&quot;
fi
                sleep 5m
        done
}

watch_wlan &amp;</code></pre></div><p>The modified script only perform the scan if there are nobody connected.</p><p>First I will resume what doesn&#039;t work so far:<br /></p><div class="codebox"><pre><code>/sbin/wifi down
/sbin/wifi up</code></pre></div><div class="codebox"><pre><code>iw dev wlan0 scan | grep &quot;^BSS\|SSID\|signal\|DS \|WPS&quot;</code></pre></div><p>I found a way to restore functionality without rebooting:<br /></p><div class="codebox"><pre><code>/sbin/wifi down
/sbin/rmmod ath9k
/sbin/insmod ath9k
/sbin/lsmod | grep ath9k
/sbin/wifi up</code></pre></div><p>But, the downside is that it generate a wlan1 instead of wlan0. Anyways it&#039;s just works for me.</p><p>Reading the reports of times vs. speed, looks like a traffic of around 8 GiB is what we are seeing.<br />I just installed vnstat to confirm. But could be as easy as add to the report the output of:</p><div class="quotebox"><cite>cat /proc/net/dev | awk &#039;/wlan/ {print $1,$2,$3,$10,$11}&#039; wrote:</cite><blockquote><p>wlan0: 20218801 187028 106390993 405873</p></blockquote></div><p>(This sample output is not a bug one)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p233702">
				<div class="post-metadata">
					<div class="post-num">Post #141</div>
					<div class="post-author">a3827642</div>
					<div class="post-datetime">
						17 May 2014, 05:46					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;d say this workaround is doing well on my device, at least for the last month.</p><div class="quotebox"><cite>moroboshi wrote:</cite><blockquote><p>For me, putting this into /etc/rc.local seems to help in preventing the client connections from dropping:</p><div class="codebox"><pre><code>watch_wlan() {
        while true; do
                iw dev wlan0 scan | grep SSID:
                sleep 5m
        done
}

watch_wlan &amp;</code></pre></div><p>See <a href="https://forum.openwrt.org/viewtopic.php?pid=223053,">https://forum.openwrt.org/viewtopic.php?pid=223053,</a> the symptoms I was seeing were:<br /></p><div class="quotebox"><blockquote><p>So after 3 hours suddenly all stations timed out.<br />Even more interestingly when I do a wireless scan on the web UI, immediately all stations reconnect.</p></blockquote></div><p>So the workaround now does a scripted wireless scan every 5 minutes and I haven&#039;t seen any further client timeout issues.</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p233717">
				<div class="post-metadata">
					<div class="post-num">Post #142</div>
					<div class="post-author">Hausmeister</div>
					<div class="post-datetime">
						17 May 2014, 12:42					</div>
				</div>
				<div class="post-content content">
					<p>This workaround does the trick with the newest version of OpenWRT. I even don&#039;t need to reboot the device every day. </p><p>Just of curiosity, why do &quot;grep SSID:&quot;? We don&#039;t see the results, so why filter something?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p242543">
				<div class="post-metadata">
					<div class="post-num">Post #143</div>
					<div class="post-author">raz123</div>
					<div class="post-datetime">
						3 Aug 2014, 02:50					</div>
				</div>
				<div class="post-content content">
					<p>Looks like <a href="https://dev.openwrt.org/changeset/38486">https://dev.openwrt.org/changeset/38486</a> might have reversed wifi unstability that was introduced about 10 months ago.</p><p>Full investigative process here: <a href="https://dev.openwrt.org/ticket/9654#comment:512">https://dev.openwrt.org/ticket/9654#comment:512</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p242709">
				<div class="post-metadata">
					<div class="post-num">Post #144</div>
					<div class="post-author">cave</div>
					<div class="post-datetime">
						4 Aug 2014, 16:48					</div>
				</div>
				<div class="post-content content">
					<p>by nbd <br />please try r41952</p><p><a href="https://dev.openwrt.org/changeset/41952">https://dev.openwrt.org/changeset/41952</a><br />Message: ath9k: disable periodic entropy gathering (keep initial) to fix some stability issues</p><br /><p>Has anyone tested this release on WR1043ND v1.0 ? with success?</p>											<p class="post-edited">(Last edited by <strong>cave</strong> on 4 Aug 2014, 16:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p245785">
				<div class="post-metadata">
					<div class="post-num">Post #145</div>
					<div class="post-author">cave</div>
					<div class="post-datetime">
						2 Sep 2014, 23:46					</div>
				</div>
				<div class="post-content content">
					<p>bump</p><p>i am now trying&nbsp; BARRIER BREAKER (14.07-rc3, r42056) on my WR1043ND v1.10 <br /><a href="http://downloads.openwrt.org/barrier_breaker/14.07-rc3/ar71xx/generic/openwrt-ar71xx-generic-tl-wr1043nd-v1-squashfs-sysupgrade.bin">http://downloads.openwrt.org/barrier_br … pgrade.bin</a></p><p>configured as a dumb Access point to make a longer test, keeping my regular Wi-Fi as a Backup. </p><p>150KiB Tx and 150KiB Rx are transfered and i watch with bmon on both ends and run pings to the device. </p><p>no drop yet. but i want to run longer tests. </p><p>Ping seems to drop sometimes. but this is maybe unrelated. </p><br /><p><a href="https://dev.openwrt.org/changeset/42010/branches/barrier_breaker">https://dev.openwrt.org/changeset/42010 … er_breaker</a> <br />r42010 BB contains Backport from r41952 trunk<br /><a href="https://dev.openwrt.org/changeset/41952">https://dev.openwrt.org/changeset/41952</a></p><br /><p>-------<br />update/warning , WR1043nd v1.10 with BBrc3&nbsp; r42056 contains DMA Errors</p><p>[&nbsp; 969.550000] ath: phy0: Failed to stop TX DMA, queues=0x004!<br />[ 1067.340000] ath: phy0: Failed to stop TX DMA, queues=0x00c!<br />[ 1070.000000] ath: phy0: Failed to stop TX DMA, queues=0x004!<br />[ 1087.710000] ath: phy0: Failed to stop TX DMA, queues=0x004!<br />[ 1092.220000] ath: phy0: Failed to stop TX DMA, queues=0x00c!<br />[ 1101.950000] ath: phy0: Failed to stop TX DMA, queues=0x004!<br />[ 1110.040000] ath: phy0: Failed to stop TX DMA, queues=0x004!<br />[ 1127.040000] ath: phy0: Failed to stop TX DMA, queues=0x00c!</p><p>and </p><p>Wed Sep&nbsp; 3 00:22:14 2014 daemon.info hostapd: wlan0: STA 4c:eb:42:52:51:d9 IEEE 802.11: disconnected due to excessive missing ACKs<br />Wed Sep&nbsp; 3 00:22:15 2014 daemon.info hostapd: wlan0: STA 4c:eb:42:52:51:d9 IEEE 802.11: authenticated<br />Wed Sep&nbsp; 3 00:22:15 2014 daemon.info hostapd: wlan0: STA 4c:eb:42:52:51:d9 IEEE 802.11: associated (aid 1)<br />Wed Sep&nbsp; 3 00:22:15 2014 daemon.info hostapd: wlan0: STA 4c:eb:42:52:51:d9 WPA: pairwise key handshake completed (RSN)</p><p>Wed Sep&nbsp; 3 20:06:39 2014 kern.err kernel: [71901.600000] ath: phy0: Failed to stop TX DMA, queues=0x004!<br />Wed Sep&nbsp; 3 20:08:09 2014 daemon.info hostapd: wlan0: STA 4c:eb:42:52:51:d9 IEEE 802.11: disconnected due to excessive missing ACKs<br />Wed Sep&nbsp; 3 20:08:10 2014 daemon.info hostapd: wlan0: STA 4c:eb:42:52:51:d9 IEEE 802.11: authenticated<br />Wed Sep&nbsp; 3 20:08:10 2014 daemon.info hostapd: wlan0: STA 4c:eb:42:52:51:d9 IEEE 802.11: associated (aid 1)<br />Wed Sep&nbsp; 3 20:08:10 2014 daemon.info hostapd: wlan0: STA 4c:eb:42:52:51:d9 WPA: pairwise key handshake completed (RSN)<br />Wed Sep&nbsp; 3 20:08:40 2014 daemon.info hostapd: wlan0: STA 4c:eb:42:52:51:d9 WPA: group key handshake completed (RSN)<br />Wed Sep&nbsp; 3 20:12:01 2014 kern.err kernel: [72223.960000] ath: phy0: Failed to stop TX DMA, queues=0x004!<br />Wed Sep&nbsp; 3 20:12:33 2014 kern.err kernel: [72255.800000] ath: phy0: Failed to stop TX DMA, queues=0x004!<br />Wed Sep&nbsp; 3 20:17:46 2014 daemon.info dnsmasq[962]: read /etc/hosts - 1 addresses<br />Wed Sep&nbsp; 3 20:17:46 2014 daemon.info dnsmasq[962]: read /tmp/hosts/dhcp - 0 addresses<br />Wed Sep&nbsp; 3 20:17:46 2014 daemon.info dnsmasq[962]: read /tmp/hosts/odhcpd - 0 addresses<br />Wed Sep&nbsp; 3 20:17:48 2014 daemon.info dnsmasq[962]: read /etc/hosts - 1 addresses<br />Wed Sep&nbsp; 3 20:17:48 2014 daemon.info dnsmasq[962]: read /tmp/hosts/dhcp - 0 addresses<br />Wed Sep&nbsp; 3 20:17:48 2014 daemon.info dnsmasq[962]: read /tmp/hosts/odhcpd - 1 addresses</p>											<p class="post-edited">(Last edited by <strong>cave</strong> on 3 Sep 2014, 21:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248163">
				<div class="post-metadata">
					<div class="post-num">Post #146</div>
					<div class="post-author">supermaik</div>
					<div class="post-datetime">
						26 Sep 2014, 06:17					</div>
				</div>
				<div class="post-content content">
					<p>So are there any stable versions of OpenWRT (or anything for that matter?) that work without issues?&nbsp; I&#039;ve even tried restoring the latest stock firmware and am experiencing the exact same problems (connection drops and extremely slow wireless speeds).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259449">
				<div class="post-metadata">
					<div class="post-num">Post #147</div>
					<div class="post-author">makarel</div>
					<div class="post-datetime">
						1 Jan 2015, 23:00					</div>
				</div>
				<div class="post-content content">
					<p>found out a solution;<br />modify &#039;Fragmentation Threshold&#039; and &#039;RTS/CTS Threshold&#039; to same value; default they have no value; <br />i tested with 400 and 1000; for the value of 400 the wifi speed was lower then expected; 1000 seems ok;<br />also added 30 to &#039;Distance Optimization&#039;</p><p>on my setup i had frequent disconnects with distance; near router is ok but 2 rooms apart is bad; before finding this solution i had signal power to 100mW.. now only 39mW is all thats needed</p><p>ps: strange thing on router i get Signal: -65 to -69 dBm | Noise: -95 dBm (2 rooms apart) both with 100mW and 39mW; shouldn&#039;t signal increase with power?</p><br /><p>my current setup tp-link 1043nd fw 1.8 / attitude adj 12.09-rc2 / Atheros AR5007EG adapter @ wifi-g</p><p>edit: still disconnects but less</p>											<p class="post-edited">(Last edited by <strong>makarel</strong> on 5 Mar 2015, 22:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262368">
				<div class="post-metadata">
					<div class="post-num">Post #148</div>
					<div class="post-author">cave</div>
					<div class="post-datetime">
						22 Jan 2015, 00:21					</div>
				</div>
				<div class="post-content content">
					<p>hi all</p><p>i am now running on my TP-Link TL-WR1043N Version 1.10 <br />Firmware Version&nbsp; &nbsp; OpenWrt Chaos Calmer r44017 / LuCI (git-15.017.51462-30d45d0) Kernel Version&nbsp; &nbsp; 3.14.28</p><p>running modem on WAN, WIFI with WPA2 </p><p>Pushing traffic through the wifi and pings keep around at 10ms without drops or problems for 2 hours. so no longtime test, but longest positive result. </p><div class="quotebox"><cite>KernelLog wrote:</cite><blockquote><p>[&nbsp; &nbsp;19.820000] device eth0.1 entered promiscuous mode<br />[&nbsp; &nbsp;19.820000] device eth0 entered promiscuous mode<br />[&nbsp; &nbsp;19.850000] br-lan: port 1(eth0.1) entered forwarding state<br />[&nbsp; &nbsp;19.850000] br-lan: port 1(eth0.1) entered forwarding state<br />[&nbsp; &nbsp;21.190000] cfg80211: Calling CRDA for country: AT<br />[&nbsp; &nbsp;21.190000] cfg80211: Regulatory domain changed to country: AT<br />[&nbsp; &nbsp;21.200000] cfg80211:&nbsp; DFS Master region: ETSI<br />[&nbsp; &nbsp;21.200000] cfg80211:&nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (dfs_cac_time)<br />[&nbsp; &nbsp;21.210000] cfg80211:&nbsp; &nbsp;(2402000 KHz - 2482000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)<br />[&nbsp; &nbsp;21.220000] cfg80211:&nbsp; &nbsp;(5170000 KHz - 5250000 KHz @ 80000 KHz, 160000 KHz AUTO), (N/A, 2000 mBm), (N/A)<br />[&nbsp; &nbsp;21.230000] cfg80211:&nbsp; &nbsp;(5250000 KHz - 5330000 KHz @ 80000 KHz, 160000 KHz AUTO), (N/A, 2000 mBm), (0 s)<br />[&nbsp; &nbsp;21.240000] cfg80211:&nbsp; &nbsp;(5490000 KHz - 5710000 KHz @ 160000 KHz), (N/A, 2700 mBm), (0 s)<br />[&nbsp; &nbsp;21.250000] cfg80211:&nbsp; &nbsp;(57000000 KHz - 66000000 KHz @ 2160000 KHz), (N/A, 4000 mBm), (N/A)<br />[&nbsp; &nbsp;21.850000] br-lan: port 1(eth0.1) entered forwarding state<br />[&nbsp; &nbsp;22.940000] IPv6: ADDRCONF(NETDEV_UP): wlan0: link is not ready<br />[&nbsp; &nbsp;22.960000] device wlan0 entered promiscuous mode<br />[&nbsp; &nbsp;24.650000] br-lan: port 2(wlan0) entered forwarding state<br />[&nbsp; &nbsp;24.660000] br-lan: port 2(wlan0) entered forwarding state<br />[&nbsp; &nbsp;24.670000] IPv6: ADDRCONF(NETDEV_CHANGE): wlan0: link becomes ready<br />[&nbsp; &nbsp;26.660000] br-lan: port 2(wlan0) entered forwarding state</p></blockquote></div><br /><br /><div class="quotebox"><cite>SystemLog wrote:</cite><blockquote><p>Wed Jan 21 23:11:05 2015 daemon.info hostapd: wlan0: STA 18:e2:c2:97:33:fa WPA: group key handshake completed (RSN)<br />Wed Jan 21 23:11:05 2015 daemon.info hostapd: wlan0: STA 50:46:5d:7c:fc:cb WPA: group key handshake completed (RSN)<br />Wed Jan 21 23:11:06 2015 daemon.info hostapd: wlan0: STA 04:46:65:c9:a0:44 WPA: group key handshake completed (RSN)</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267796">
				<div class="post-metadata">
					<div class="post-num">Post #149</div>
					<div class="post-author">makarel</div>
					<div class="post-datetime">
						5 Mar 2015, 22:22					</div>
				</div>
				<div class="post-content content">
					<p>hello again</p><p>found this post <a href="http://www.gargoyle-router.com/phpbb/viewtopic.php?f=11&amp;t=4667">http://www.gargoyle-router.com/phpbb/vi … amp;t=4667</a></p><p>in /etc/rc.local, add the line: echo 1 &gt;/sys/kernel/debug/ieee80211/phy0/ath9k/disable_ani <br />(check the path; you should have a disable_any with 0 inside)</p><p>in /etc/config/wireless, add the following option to your wifi-iface section:<br />(i added the 2 lines at the end of wireless file, didnt have wifi-iface section)</p><p>&nbsp; &nbsp; config wifi-iface &#039;ap_g&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp;option disassoc_low_ack 0</p><p>reboot<br />im watching for a weak now and no disconnects or wifi errors of any kind</p><br /><br /><p>edit1: 3 months later...</p><p>after some weaks of peaceful coexistence it got worse </p><p>before it just dropped the connection and reconnected right after but now it just drops the connection<br />i have installed wifitoggle and can disable/enable wifi from QSS button, this being the only way to restore wifi besides reboot after dropping<br />it seems wifi has a problem if its activated for too long</p><p>edit2: one month later..<br />ive put a script to restart wifi every day and have some observations to make<br />- wifi doesnt drop anymore except when (i guess) laptop wifi card goes to standby (laptop goes to screensaver..)<br />- router ram doesnt drop anymore: at the moment i have 7.5M free.. wo wifi restart i usually had ~1M free at times ~3M free but dropped during access(id say wifi driver memory leak)</p>											<p class="post-edited">(Last edited by <strong>makarel</strong> on 20 Jul 2015, 15:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267876">
				<div class="post-metadata">
					<div class="post-num">Post #150</div>
					<div class="post-author">ckm</div>
					<div class="post-datetime">
						6 Mar 2015, 14:13					</div>
				</div>
				<div class="post-content content">
					<p>hey everybody i have .v1.10 and v1.11 all work perfect&nbsp; no problem with wifi after i put this build on all of them&nbsp; work better than new.Before i was ready to throw all of them in the trash and bye something other than TP-LINK but now WOW, i was using DDWRT now im a openwrt man now.If you want to give it a try here it is.</p><p><a href="http://s000.tinyupload.com/?file_id=80446127931370373525">http://s000.tinyupload.com/?file_id=804 … 1370373525</a></p><p>If you don&#039;t like the failsafe default&nbsp; luci go to system/software remove luci-mod-failsafe the ead will work just fine.</p><p>This one is new no failsafe luci.</p><p><a href="http://s000.tinyupload.com/?file_id=96304283793677047846">http://s000.tinyupload.com/?file_id=963 … 3677047846</a></p>											<p class="post-edited">(Last edited by <strong>ckm</strong> on 16 May 2015, 17:30)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 6 of 7</div><nav><ul><li><a href="viewtopic.php%3Fid=42539&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42539&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=42539&amp;p=5.html">5</a></li><li class="pagination-current"><span>6</span></li><li><a href="viewtopic.php%3Fid=42539&amp;p=7.html">7</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>