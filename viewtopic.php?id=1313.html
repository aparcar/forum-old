<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Possible problems when creating big firmwareq</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p6310">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">tosuja</div>
					<div class="post-datetime">
						20 Apr 2005, 15:40					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,<br />I&#039;m working on some firmware with everything I need compiled in. I ended with quite a big firmware - 4.75MiB. To build it I had to edit target/utils/src/trx.c source file (changed TRX_MAX_LEN to something close to 5MiB). I have GS devices with 8MiBs of FLASH memory thus the firmware should fit in.</p><p>The question is - where (what address) is located NVRAM part of the flash memory? Is there any possibility that I&#039;ll rewrite it with this firmware? And even if I would, would it brick my WRT?</p><p>Thanks in advance<br />Tosuja</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p6328">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">wbx</div>
					<div class="post-datetime">
						21 Apr 2005, 01:15					</div>
				</div>
				<div class="post-content content">
					<p>The limit for flashing your router via TFTP is 3 MB. <br />You can install your big image with &quot;mtd&quot;. <br />And mtd will only write or erase the partition you say. It will not erase your nvram.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p6335">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">tosuja</div>
					<div class="post-datetime">
						21 Apr 2005, 09:25					</div>
				</div>
				<div class="post-content content">
					<p>I know about TFTP limit.<br />I was just curious about position of NVRAM in FLASH because I have found some error message in trx.c source code saying something like &quot;Firmware too big, there is a danger of writing over NVRAM&quot;. I suspect that NVRAM part is last 32kB from FLASH and in this case everything is OK. I&#039;ll give it a try....</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>