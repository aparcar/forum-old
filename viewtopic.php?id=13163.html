<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Kmz 7.09 on dwl-7100</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 27 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p58085">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Gig_tmb</div>
					<div class="post-datetime">
						26 Oct 2007, 19:42					</div>
				</div>
				<div class="post-content content">
					<p>Hi all!!<br />Have DWL-7100 A1 (board name 8WAPD15..6A1G) // mem S29GL032M90TFIR4 // netc IP101A<br />&nbsp; IC42S16800-7TG&nbsp; &nbsp;&nbsp; &nbsp;4(2)M x 8(16) Bits x 4 Banks (128-MBIT) SYNCHRONOUS DYNAMIC RAM</p><p>Readed many posts about 2100 but can&#039;t find any about 7100 &amp; becouse do all like 2100</p><p>See owrt support hardwr<br />DWL-7100AP &nbsp; &nbsp; Atheros 5312 @ 220MHz &nbsp; &nbsp; 4MB &nbsp; &nbsp; Atheros (integrated)&nbsp; IP101? N/A Yes Yes No WiP <br />DWL-2100AP&nbsp; A2 &nbsp; &nbsp; Atheros 2313 @ 180MHz &nbsp; &nbsp; 4MB &nbsp; &nbsp; Atheros (integrated)&nbsp; N/A&nbsp; N/A &nbsp; &nbsp; Yes Yes No WiP</p><p>hhhx WiP ....</p><p>i don&#039;t build jtag ... tftp + vmWorkx bootloader</p><p>next-&gt;<br />download &amp; compile kmz by default<br />booting &amp; get <br />AHB interrupt: PROCADDR=0x18201000&nbsp; PROC1=0x80000a16&nbsp; DMAADDR=0x00000000&nbsp; DMA1=0x00000000</p><p>so_next-&gt; <br />see posts .... thinking... may bee<br />TARGET= ap43, BUS=ahb<br />remove &quot;-EB&quot; option from COPTS in ap43.inc<br />booting &amp; get <br />AHB interrupt: PROCADDR=0x18201000&nbsp; PROC1=0x80000a16&nbsp; DMAADDR=0x00000000&nbsp; DMA1=0x00000000</p><p>full-&gt;</p><p>Attached TCP/IP interface to ae0.<br />Attaching network interface lo0... done.<br />Loading... 2218152 + 1186528<br />Starting at 0x80274000...</p><p>Linux version 2.6.21.5 (root@alex) (gcc version 4.2.0) #3 Fri Oct 26 18:23:21 MSD 2007<br />CPU revision is: 00018009<br />Determined physical RAM map: memory: 01000000 @ 00000000 (usable)<br />Initrd not found or empty - disabling initrd<br />Built 1 zonelists.&nbsp; Total pages: 4064<br />Kernel command line: console=ttyS0,9600 rootfstype=squashfs,jffs2 init=/etc/preinit<br />Primary instruction cache 16kB, physically tagged, 4-way, linesize 16 bytes.<br />Primary data cache 16kB, 4-way, linesize 16 bytes.<br />Synthesized TLB refill handler (20 instructions).<br />Synthesized TLB load handler fastpath (32 instructions).<br />Synthesized TLB store handler fastpath (32 instructions).<br />Synthesized TLB modify handler fastpath (31 instructions).<br />PID hash table entries: 64 (order: 6, 256 bytes)<br />Using 110.000 MHz high precision timer.<br />Dentry cache hash table entries: 2048 (order: 1, 8192 bytes)<br />Inode-cache hash table entries: 1024 (order: 0, 4096 bytes)<br />Memory: 12644k/16384k available (1953k kernel code, 3740k reserved, 295k data, 976k init, 0k highmem)<br />Mount-cache hash table entries: 512<br />NET: Registered protocol family 16<br />Radio config found at offset 0x10000(0x100)<br />Time: MIPS clocksource has been installed.<br />NET: Registered protocol family 2<br />IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP established hash table entries: 512 (order: 0, 4096 bytes)<br />TCP bind hash table entries: 512 (order: -1, 2048 bytes)<br />TCP: Hash tables configured (established 512 bind 512)<br />TCP reno registered<br />squashfs: version 3.0 (2006/03/15) Phillip Lougher<br />Registering mini_fo version $Id$<br />JFFS2 version 2.2. (NAND) (C) 2001-2006 Red Hat, Inc.<br />io scheduler noop registered<br />io scheduler deadline registered (default)<br />Serial: 8250/16550 driver $Revision: 1.90 $ 1 ports, IRQ sharing disabled<br />serial8250: ttyS0 at MMIO 0xbc000003 (irq = 37) is a 16550A<br />eth0: Dropping NETIF_F_SG since no checksum feature.<br />eth0: Atheros AR231x: 00:17:9a:07:58:bd, irq 3<br />AHB interrupt: PROCADDR=0x18201000&nbsp; PROC1=0x80000a16&nbsp; DMAADDR=0x00000000&nbsp; DMA1=0x00000000</p><br /><p>Please !!! open my eyes &amp; mind <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>Gig_tmb</strong> on 27 Oct 2007, 11:29)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p58101">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Gig_tmb</div>
					<div class="post-datetime">
						27 Oct 2007, 11:25					</div>
				</div>
				<div class="post-content content">
					<p>Dont help compil with<br />TARGET= ap30, BUS=ahb<br />remove &quot;-EB&quot; option from COPTS in ap30.inc<br />error stay! ..... fu..!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p58105">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">afgain</div>
					<div class="post-datetime">
						27 Oct 2007, 13:48					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I&#039;ve got 7.09 working on two DWL-7100ap, same hardware as yours. </p><p>Here are a couple of diffs showing my changes.</p><p>The madwifi target set to ap43</p><div class="codebox"><pre><code>--- kamikaze_7.09_working/package/madwifi/Makefile   2007-10-01 16:48:57.000000000 +0100
+++ kamikaze_7.09/package/madwifi/Makefile    2007-10-01 16:48:57.000000000 +0100
@@ -45,7 +45,7 @@
 BUS:=PCI
 ifneq ($(CONFIG_LINUX_2_6_ATHEROS),)
   BUS:=AHB
-  HAL_TARGET:=ap48
+  HAL_TARGET:=ap43
 endif</code></pre></div><p>I had to add a line in ar2313.c to stop it looking for a second serial port.<br />Might be a more elegant way to do this...</p><div class="codebox"><pre><code>--- kamikaze_7.09_working/target/linux/atheros-2.6/files/drivers/net/ar2313/ar2313.c        2007-10-01 13:39:06.000000000 +0100
+++ kamikaze_7.09/target/linux/atheros-2.6/files/drivers/net/ar2313/ar2313.c        2007-09-20 09:54:09.000000000 +0100
@@ -182,9 +182,6 @@
        sp-&gt;dev = dev;
        sp-&gt;cfg = pdev-&gt;dev.platform_data;

-       if (pdev-&gt;id == 1)
-               return 0;
-
        sprintf(buf, &quot;eth%d_membase&quot;, pdev-&gt;id);
        res = platform_get_resource_byname(pdev, IORESOURCE_MEM, buf);
        if (!res)</code></pre></div><p>And that&#039;s all I did.</p><p>Hope that helps or at least encourages you that it is possible!<br />Jason</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p58113">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Gig_tmb</div>
					<div class="post-datetime">
						27 Oct 2007, 19:08					</div>
				</div>
				<div class="post-content content">
					<p>Thank you!<br />Right work.</p><p>If see in root of question .... point goes down after twise detecting com port. <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>Do u know what is it?<br />irq 32, desc: 80271840, depth: 1, count: 0, unhandled: 0-&gt;handle_irq():&nbsp; 80087db8, -&gt;chip(): 80263fb0, <br />-&gt;action(): 00000000&nbsp; IRQ_DISABLED set unexpected IRQ # 32</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p58153">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">afgain</div>
					<div class="post-datetime">
						28 Oct 2007, 13:28					</div>
				</div>
				<div class="post-content content">
					<p>I did see an IRQ error when using the serial port.<br />Typing quickly would cause it to occur.<br />I ignored it as I now telnet into the devices and don&#039;t use the serial port.</p><p>So something is not quite right with serial port detection and irq handling.</p><p>Jason</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p58187">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Gig_tmb</div>
					<div class="post-datetime">
						29 Oct 2007, 11:21					</div>
				</div>
				<div class="post-content content">
					<p>Hi Jason!<br />&amp; how u build redboot...?</p><p>from what i start -&gt;</p><p>i&#039;ll build JTAG Tools 0.6-cvs-20051228 without any modifications like u recomend in <a href="http://forum.openwrt.org/viewtopic.php?id=12627">http://forum.openwrt.org/viewtopic.php?id=12627</a></p><p>yea! it truthly work ... // for other _ do not use includes from brecis for build it from cvs. Download it fresh!</p><p>i&#039;ll download redboot sources from <a href="http://downloads.openwrt.org/sources/">http://downloads.openwrt.org/sources/</a><br />making with platform_gen -&gt; ap43 ...&nbsp; size of my redboot -&gt; ~260K ... why?<br />&amp; when i flash it ... in boot sector not space left ... needed some bites <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />if i&#039;ll see what do /ramchek &amp; ramponis/ in <a href="http://forum.openwrt.org/viewtopic.php?id=6357&amp;p=5">http://forum.openwrt.org/viewtopic.php?id=6357&amp;p=5</a><br />they in the end build redboot with support lzma images...do u know somw about it?</p><p>their redboot.bin not lager then 180K &amp; when i flash it .... &amp; at the end, becouse it 2100, <br /> after boot: fis init -f ill get <br />FLASH: driver init failed: Driver does not support device</p><p>ill lay on flash_am29xxxxx_parts.inl diff for support memory .... but 1 trable ... size !<br />what a u do?</p><p>My regards, Dmitry.</p><p>|| fo example ..... <br />size of redboot.bin 268.368 byte or 0x3fc41850<br />when flash it, get -&gt; <br />writen 268.368 byte or 0x3fc41850<br />checked 268.336 byte or 0x3fc4184e</p><p>not write last some bytes ....<br />if see guida .... size of boot stack 0x41690<br />&amp; on idea its not possable write this retboot in !</p><p>how a u with this problem?</p>											<p class="post-edited">(Last edited by <strong>Gig_tmb</strong> on 29 Oct 2007, 15:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p58190">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Gig_tmb</div>
					<div class="post-datetime">
						29 Oct 2007, 11:29					</div>
				</div>
				<div class="post-content content">
					<p>&amp; in redboot when startup<br />Ethernet eth0: MAC address<br />IP: 192.168.0.50/255.255.255.0, Gateway: 192.168.0.1<br />but net not up? do u have that problem?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p58197">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">afgain</div>
					<div class="post-datetime">
						29 Oct 2007, 16:08					</div>
				</div>
				<div class="post-content content">
					<p>I made quite a few changes to redboot, too many to remember. I *think* the crucial ones are here.</p><p>These are all hacks to get it working, nothing too subtle or clever.</p><p>1 - Fix ethernet.<br /></p><div class="codebox"><pre><code>diff -U 3 -H -d -r -N -x &#039;*.o&#039; -x &#039;bin*&#039; -x &#039;*.ko&#039; -x &#039;.*&#039; -x &#039;autoconf*&#039; -x &#039;*.log&#039; -x &#039;*.cdl&#039; -x &#039;*~&#039; -x &#039;*.html&#039; -x &#039;*.cdle&#039; -- redboot_undiffed/ecos-2.0/packages/devs/eth/mips/ar531x/current/src/ae531xecos.c redboot/ecos-2.0/packages/devs/eth/mips/ar531x/current/src/ae531xecos.c
--- redboot_undiffed/ecos-2.0/packages/devs/eth/mips/ar531x/current/src/ae531xecos.c    2004-06-09 23:07:48.000000000 +0100
+++ redboot/ecos-2.0/packages/devs/eth/mips/ar531x/current/src/ae531xecos.c    2007-09-27 11:56:57.000000000 +0100
@@ -186,7 +186,9 @@
 
     sc = (struct eth_drv_sc *)tab-&gt;device_instance;
     ae531x_priv = (ae531x_priv_data_t *)sc-&gt;driver_private;
-    unit = ae531x_priv-&gt;enetUnit;
+//    unit = ae531x_priv-&gt;enetUnit;
+
+unit=0;
 
     /* Get ethernet&#039;s MAC address from board configuration data */
     mac_addr = enet_mac_address_get(unit);</code></pre></div><p>2 - Define S29GL032M (the 16 bit flash part is what we use)</p><div class="codebox"><pre><code>diff -U 3 -H -d -r -N -x &#039;*.o&#039; -x &#039;bin*&#039; -x &#039;*.ko&#039; -x &#039;.*&#039; -x &#039;autoconf*&#039; -x &#039;*.log&#039; -x &#039;*.cdl&#039; -x &#039;*~&#039; -x &#039;*.html&#039; -x &#039;*.cdle&#039; -- redboot_undiffed/ecos-2.0/packages/devs/flash/amd/am29xxxxx/v2_0/include/flash_am29xxxxx_parts.inl redboot/ecos-2.0/packages/devs/flash/amd/am29xxxxx/v2_0/include/flash_am29xxxxx_parts.inl
--- redboot_undiffed/ecos-2.0/packages/devs/flash/amd/am29xxxxx/v2_0/include/flash_am29xxxxx_parts.inl    2004-06-09 23:07:50.000000000 +0100
+++ redboot/ecos-2.0/packages/devs/flash/amd/am29xxxxx/v2_0/include/flash_am29xxxxx_parts.inl    2007-10-07 22:25:43.000000000 +0100
@@ -79,6 +79,30 @@
 //
 #define _LAST_BOOTBLOCK (-1)
 
+
+    {   // S29GL032M, model R4 - boot blocks on the bottom
+        long_device_id: true,
+        device_id  : FLASHWORD(0x7e),
+        device_id2 : FLASHWORD(0x1a),
+        device_id3 : FLASHWORD(0x00),
+        block_size : 0x10000 * CYGNUM_FLASH_INTERLEAVE,
+        block_count: 64,
+        device_size: 0x400000 * CYGNUM_FLASH_INTERLEAVE,
+        base_mask  : ~(0x400000 * CYGNUM_FLASH_INTERLEAVE - 1),
+        bootblock  : true,
+        bootblocks : { 0x000000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       _LAST_BOOTBLOCK
+                     },
+        banked     : false
+    },
 #if CYGNUM_FLASH_WIDTH == 8
 #ifdef CYGHWR_DEVS_FLASH_AMD_AM29F040B
     {   // AM29F040B
@@ -473,6 +497,30 @@
 
 #else // 16 bit devices
 
+    {   // S29GL032M, model R4 - boot blocks on the bottom
+        long_device_id: true,
+        device_id  : FLASHWORD(0x227e),
+        device_id2 : FLASHWORD(0x221a),
+        device_id3 : FLASHWORD(0x2200),
+        block_size : 0x10000 * CYGNUM_FLASH_INTERLEAVE,
+        block_count: 64,
+        device_size: 0x400000 * CYGNUM_FLASH_INTERLEAVE,
+        base_mask  : ~(0x400000 * CYGNUM_FLASH_INTERLEAVE - 1),
+        bootblock  : true,
+        bootblocks : { 0x000000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       _LAST_BOOTBLOCK
+                     },
+        banked     : false
+    },
+
 #ifdef CYGHWR_DEVS_FLASH_AMD_AM29LV160
     {   // MBM29LV160-T | AM29LV160-T
         device_id  : FLASHWORD(0x22c4),</code></pre></div><p>3 - Force flash to be used in 16bit mode by setting register value to one we know works.<br /></p><div class="codebox"><pre><code>diff -U 3 -H -d -r -N -x &#039;*.o&#039; -x &#039;bin*&#039; -x &#039;*.ko&#039; -x &#039;.*&#039; -x &#039;autoconf*&#039; -x &#039;*.log&#039; -x &#039;*.cdl&#039; -x &#039;*~&#039; -x &#039;*.html&#039; -x &#039;*.cdle&#039; -- redboot_undiffed/ecos-2.0/packages/hal/mips/ar5312/v2_0/src/plf_misc.c redboot/ecos-2.0/packages/hal/mips/ar5312/v2_0/src/plf_misc.c
--- redboot_undiffed/ecos-2.0/packages/hal/mips/ar5312/v2_0/src/plf_misc.c    2004-06-09 23:08:14.000000000 +0100
+++ redboot/ecos-2.0/packages/hal/mips/ar5312/v2_0/src/plf_misc.c    2007-10-07 22:15:19.000000000 +0100
@@ -232,13 +269,15 @@
      * find configuration data.  The flash drivers know how big the flash
      * really is.
      */
-    flash_ctl = FLASHCTL_E |
+/*    flash_ctl = FLASHCTL_E |
                 FLASHCTL_AC_8M |
                 FLASHCTL_RBLE |
+//                FLASHCTL_MWx16 |
                 (0x01 &lt;&lt; FLASHCTL_IDCY_S) |
                 (0x07 &lt;&lt; FLASHCTL_WST1_S) |
                 (0x07 &lt;&lt; FLASHCTL_WST2_S) |
-                flash_ctl;
+                flash_ctl; */
+    flash_ctl = 0x100e3ce1;
 
     HAL_WRITE_UINT32(AR531X_FLASHCTL0, flash_ctl);</code></pre></div><p>These are the only changes I&#039;ve found.<br />Hope they help!</p><p>Jason</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p58258">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Gig_tmb</div>
					<div class="post-datetime">
						30 Oct 2007, 18:19					</div>
				</div>
				<div class="post-content content">
					<p>Hi! Jason!<br />May be u tired from my questions? <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>but......................... - &gt;<br />ill apply all &amp; something else ....<br />.... load rams via tftp .... <br />&amp; get thet -&gt;</p><div class="codebox"><pre><code>... Resetting.
+

RedBoot startup</code></pre></div><div class="codebox"><pre><code>FLASH configuration checksum error or invalid key</code></pre></div><p>may by it incorrectly defined blocks?<br />size of rom &gt; 0x41890 -&gt;i applyed diff on flash_ctl = 0x100e3ce1; plf_misc.c</p><div class="codebox"><pre><code>Ethernet eth1: MAC address 00:17:9a:07:58:bd
IP: 192.168.0.52/255.255.255.0, Gateway: 192.168.0.1
Default server: 0.0.0.0, DNS server IP: 0.0.0.0
RedBoot(tm) bootstrap and debug environment [ROM]
Non-certified release, version v2_0 - built 14:38:23, Oct 30 2007

Copyright (C) 2000, 2001, 2002, Red Hat, Inc.

RAM: 0x80000400-0x80800000, 0x80000400-0x807e1000 available
FLASH: 0xbe000000 - 0xbe3e0000, 62 blocks of 0x00010000 bytes each.</code></pre></div><p>ill like u, appled diff on flash_am29xxxxx_parts.inl but with other dev&#039;s id &amp; get</p><br /><div class="codebox"><pre><code>RedBoot&gt; fis init -f
About to initialize [format] FLASH image system - continue (y/n)? y
*** Initialize FLASH Image System
   initialization failed 0xbe050000: Device/region is write-protected
Error erasing FIS directory at 0xbe3d0000: Device/region is write-protected</code></pre></div><p>in what including protect? &amp; what it delete?</p><div class="codebox"><pre><code>RedBoot&gt; fis -list
Name              FLASH addr  Mem addr    Length      Entry point
AR531Xae(0,0):vmlinux.e e=192.168.0.50:0xffffff00 h=192.168.0.2 f=0x80 o=ae  0x6C696E75  0x782E6520  0x653D3139  0x322E3136</code></pre></div><p>what it means? it somthing from vxWorks</p><div class="codebox"><pre><code>RedBoot&gt; fconfig -i
Initialize non-volatile configuration - continue (y/n)? y
Run script at boot: false
Use BOOTP for network configuration: true false
Gateway IP address: 
Local IP address: 192.168.0.1..50
Local IP address mask: 
Default server IP address: 
Console baud rate: 9600
DNS server IP address: 
GDB connection port: 9000
Force console for special debug messages: false
Network debug at boot time: false
Update RedBoot non-volatile configuration - continue (y/n)? y
Error erasing FIS directory at 0xbe3d0000: Device/region is write-protected</code></pre></div><p>save configuration .... Error !</p><p>Help! With regards Dmitry</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p58269">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">afgain</div>
					<div class="post-datetime">
						30 Oct 2007, 21:13					</div>
				</div>
				<div class="post-content content">
					<p>Not too tired of questions yet <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /><br />It&#039;s a pleasure to try and help.<br />With luck the next person to try this should some of the answers here!</p><div class="quotebox"><blockquote><p>FLASH configuration checksum error or invalid key</p></blockquote></div><p>This is to be expected until you initialise flash.<br />&quot;fis -list&quot; shows nonsense until the fis has been init&#039;ed.</p><p>I didn&#039;t run &quot;fis init -f&quot; until the device had booted from flash.<br />I am guessing that the flash has been protected by the redboot ram version... which doesn&#039;t really make sense as we use it to write the flash.</p><p>If I detail the steps I used to get redboot and linux onto the DWL7100ap you might spot something you can use. *WARNING* Obviously there is a strong possibility you could brick the device. I had taken a backup of the original firmware via jtag so I was happy to erase the flash.<br />But I did my second one in under an hour including disassembly and soldering so I&#039;m confident it works.</p><p><strong>Bold</strong> items are what you need to type in. </p><p>Set vxworks to grab redboot.bin (version running from ram) from tftp server<br />Change the file name, inet on ethernet and host inet addresses as needed or you wont get far :-) </p><p>Power up!<br />Press ESC down until you see the Boot prompt<br /></p><div class="quotebox"><blockquote><p><strong>c</strong> - change boot params</p><p>boot device&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : tffs:0 <strong>ae0</strong><br />processor number&nbsp; &nbsp; &nbsp;: 0<br />host name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :<br />file name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : /fl/APIMG1 <strong>redboot.bin</strong><br />inet on ethernet (e) : 192.168.1.20:0xffffff00 <strong>192.168.0.50:0xffffff00</strong><br />inet on backplane (b):<br />host inet (h)&nbsp; &nbsp; &nbsp; &nbsp; : <strong>192.168.0.13</strong><br />gateway inet (g)&nbsp; &nbsp; &nbsp;:<br />user (u)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;:<br />ftp password (pw) (blank = use rsh):<br />flags (f)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 0x0 <strong>0x80</strong><br />target name (tn)&nbsp; &nbsp; &nbsp;:<br />startup script (s)&nbsp; &nbsp;:<br />other (o)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : ae<br /><strong>@</strong></p></blockquote></div><p>The <strong>@</strong> reboots the device.<br />redboot.bin should be pulled from the tftp server and you should be at the redboot command prompt. Ignore the warnings about FLASH configuration!</p><p>Write a version of redboot into flash</p><p>Again change the IP addresses (X.X.X.X) to suit. -l = dwl7100ap address -h = tftp server address.<br />The file redboot.rom is the version designed to run from rom. Change the name to whatever you called yours.&nbsp; The option -l 269072 refers to the size of the file. Change the value to match your filesize.</p><p>I&#039;ve not shown much of the output from redboot.<br />It should flash and verify in a few seconds.<br />The reset command will reboot. redboot will then be loaded directly from flash.<br /></p><div class="quotebox"><blockquote><p><strong>ip_address -l X.X.X.X -h X.X.X.X<br />load -r -b %{FREEMEMLO} redboot.rom<br />fis write -b %{FREEMEMLO} -l 269072 -f 0xbfc00000<br />reset<br /></strong></p></blockquote></div><p>Setup redboot and install openwrt<br />As ever, IP addresses to be changed to fit your setup.<br /></p><div class="quotebox"><blockquote><p><strong>fis init -f</strong>&nbsp; (Say yes to this!)<br /><strong><br />ip_address -l X.X.X.X -h X.X.X.X</strong></p></blockquote></div><p>Load and flash the compressed kernel<br /></p><div class="quotebox"><blockquote><p><strong>load -r -v -b 0x80041000 openwrt-atheros-2.6-vmlinux.gz<br />fis create -r 0x80041000 -e 0x80041000 vmlinux.bin.gz<br /></strong></p></blockquote></div><p>Load and flash the rootfs<br /></p><div class="quotebox"><blockquote><p><strong>load -r -v -b 0x80041000 openwrt-atheros-2.6-root.squashfs<br />fis create -b 0x80041000 -l 0x00220000 -e 0x00000000 rootfs<br /></strong></p></blockquote></div><p>Configure redboot to start linux after a ten second pause.<br />Replace the x.x.x.x&#039;s as appropriate... <br /></p><div class="quotebox"><blockquote><p>RedBoot&gt; <strong>fconfig</strong><br />Run script at boot: <strong>true</strong><br />Boot script:<br />Enter script, terminate with empty line<br />&gt;&gt; <strong>fis load -b 0x80041000 -d vmlinux.bin.gz</strong><br />&gt;&gt; <strong>go</strong><br />&gt;&gt;<br />Boot script timeout (1000ms resolution): <strong>10</strong><br />Use BOOTP for network configuration: <strong>false</strong><br />Gateway IP address:&nbsp; <strong>X.X.X.X</strong><br />Local IP address: <strong>X.X.X.X</strong><br />Local IP address mask:&nbsp; <strong>X.X.X.X</strong><br />Default server IP address:&nbsp; <strong>X.X.X.X</strong><br />Console baud rate: 9600<br />DNS server IP address: <strong>X.X.X.X</strong><br />GDB connection port: 9000<br />Force console for special debug messages: false<br />Network debug at boot time: false<br />Update RedBoot non-volatile configuration - continue (y/n)? <strong>y</strong></p><p><strong>reset</strong></p></blockquote></div><p>Sorry, I&#039;ve used your thread to dump all this into. Consider it the first cut of a howto <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /><br />Let me know how you get on, more questions might get me remembering more of what I&#039;ve done.<br />Good luck!</p><p>Jason</p>											<p class="post-edited">(Last edited by <strong>afgain</strong> on 31 Oct 2007, 22:54)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p58310">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">Gig_tmb</div>
					<div class="post-datetime">
						31 Oct 2007, 16:19					</div>
				</div>
				<div class="post-content content">
					<p>Hi! Jason!</p><p>It&#039;s me again <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Redboot i load by jtag (redboot.rom from build.ROM_ap43 folder)</p><div class="codebox"><pre><code>jtag&gt; cable ...
jtag&gt; detect
jtag&gt; poke 0x58400000 0x100e3ce1
jtag&gt; detectflash 0x3fc00000
jtag&gt; flashmem 0x3fc00000 redboot.rom</code></pre></div><p>i don&#039;t do redmem <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> &amp; my original boot lost!</p><p>but if u wirite booting via vmworx .... <br />&nbsp; ... ill boot from rom .... then via rom ill loading ram from ftp<br /> i think is look like u do!</p><p>rom:<br /></p><div class="codebox"><pre><code>ip_address -l 192.168.0.50 -h 192.168.0.1
load redboot.img                                       ///// redboot.img from build.RAM_ap43 folder</code></pre></div><p>ram:<br /></p><div class="codebox"><pre><code>ip_address -l 192.168.0.50 -h 192.168.0.1
load -r -b %{FREEMEMLO} redboot.rom
fis write -b %{FREEMEMLO} -l 268432 -f 0xbfc00000   ///// our size of file 268432</code></pre></div><p>on fis write got this -&gt;<br /></p><div class="codebox"><pre><code>Invalid FLASH address 0xbfc00000: Invalid FLASH address valid range is 0xbe000000-0xbe3dffff</code></pre></div><p>on start fis write from valid range<br /></p><div class="codebox"><pre><code>fis write -b %{FREEMEMLO} -l 268432 -f 0xbe000000  ///// our size of file 268432
Device/region is write-protected again!</code></pre></div><p>Someone, ramponis may be, don&#039;t remember, write about error like that,<br />..... it&#039;s looks like -&gt; Device/region is write-protected again! Ill remove protection &amp; rebuild redboot....<br />may be problem in that?<br />I searching in google &amp; yahoo &amp; and other something about this, but nothing found ... may be i look not there <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> </p><br /><p>With my regards, Dmitry.</p>											<p class="post-edited">(Last edited by <strong>Gig_tmb</strong> on 31 Oct 2007, 17:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p58332">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">afgain</div>
					<div class="post-datetime">
						31 Oct 2007, 23:13					</div>
				</div>
				<div class="post-content content">
					<p>Hi Dmitri,</p><p>I found another file I changed... It should make a big difference!</p><p>openwrt/redboot/ecos-2.0/packages/hal/mips/dwl7100ap/v2_0/src/plf_flash.c</p><p>Sorry not a patch this time just an extract of the file.<br />It changes how the flash is used, memory base and bus width. <br />And I remd the ifdef for reasons I don&#039;t recall!</p><div class="codebox"><pre><code>#define CYGNUM_FLASH_WIDTH      (16)
#define CYGNUM_FLASH_16AS8      0
#define CYGNUM_FLASH_BASE       (0xbfc00000)

//#ifdef CYGINT_DEVS_FLASH_AMD_AM29XXXXX_REQUIRED
#include &quot;cyg/io/flash_am29xxxxx.inl&quot;
//#endif</code></pre></div><p>If you have jtag working I strongly encourage you to make a backup of the last 128K of the flash as it contains vital data. Wipe this out and it will not boot.</p><p>Jason</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p58524">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">Gig_tmb</div>
					<div class="post-datetime">
						5 Nov 2007, 17:20					</div>
				</div>
				<div class="post-content content">
					<p>Hi Jason!</p><p>We have next problem:</p><p>ath0 not work<br />ath1 work</p><p>boot:<br /></p><div class="codebox"><pre><code>wlan: 0.8.4.2 (svn r2568)
ath_hal: module license &#039;Proprietary&#039; taints kernel.
ath_hal: 0.9.30.13 (AR5212, AR5312, RF5111, RF5112)
ath_rate_minstrel: Minstrel automatic rate control algorithm 1.2 (svn r2568)
ath_rate_minstrel: look around rate set to 10%
ath_rate_minstrel: EWMA rolloff level set to 75%
ath_rate_minstrel: max segment size in the mrr set to 6000 us
wlan: mac acl policy registered
ath_ahb: 0.9.4.5 (svn r2568)
ath_pci: switching rfkill capability off
ath_pci: switching per-packet transmit power control off
wifi0: 11a rates: 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps
wifi0: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps
wifi0: 11g rates: 1Mbps 2Mbps 5.5Mbps 11Mbps 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps
wifi0: turboA rates: 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps
wifi0: turboG rates: 6Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps
wifi0: H/W encryption support: WEP AES AES_CCM TKIP
wifi0: mac 5.7 phy 4.2 radio 3.6
wifi0: Use hw queue 1 for WME_AC_BE traffic
wifi0: Use hw queue 0 for WME_AC_BK traffic
wifi0: Use hw queue 2 for WME_AC_VI traffic
wifi0: Use hw queue 3 for WME_AC_VO traffic
wifi0: Use hw queue 8 for CAB traffic
wifi0: Use hw queue 9 for beacons
wifi0: Atheros 5312 WiSoC: mem=0xb8000000, irq=2
ath_pci: switching rfkill capability off
ath_pci: switching per-packet transmit power control off
wifi1: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps
wifi1: 11g rates: 1Mbps 2Mbps 5.5Mbps 11Mbps 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps
wifi1: turboG rates: 6Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps
wifi1: H/W encryption support: WEP AES AES_CCM TKIP
wifi1: mac 5.7 phy 4.2 radio 4.6
wifi1: Use hw queue 1 for WME_AC_BE traffic
wifi1: Use hw queue 0 for WME_AC_BK traffic
wifi1: Use hw queue 2 for WME_AC_VI traffic
wifi1: Use hw queue 3 for WME_AC_VO traffic
wifi1: Use hw queue 8 for CAB traffic
wifi1: Use hw queue 9 for beacons
wifi1: Atheros 5312 WiSoC: mem=0xb8500000, irq=5</code></pre></div><p>we see:<br /></p><div class="codebox"><pre><code>ath0      IEEE 802.11g  ESSID:&quot;OpenWrt1&quot;  Nickname:&quot;&quot;
          Mode:Master  Frequency:2.412 GHz  Access Point: 00:17:9A:07:58:BD
          Bit Rate:0 kb/s   Tx-Power:18 dBm   Sensitivity=1/1
          Retry:off   RTS thr:off   Fragment thr:off
          Encryption key:off
          Power Management:off
          Link Quality=0/70  Signal level=-96 dBm  Noise level=-96 dBm
          Rx invalid nwid:0  Rx invalid crypt:0  Rx invalid frag:0
          Tx excessive retries:0  Invalid misc:0   Missed beacon:0

ath1      IEEE 802.11g  ESSID:&quot;OpenWrt2&quot;  Nickname:&quot;&quot;
          Mode:Master  Frequency:2.412 GHz  Access Point: 00:17:9A:07:58:BD
          Bit Rate:0 kb/s   Tx-Power:18 dBm   Sensitivity=1/1
          Retry:off   RTS thr:off   Fragment thr:off
          Encryption key:off
          Power Management:off
          Link Quality=62/70  Signal level=-34 dBm  Noise level=-96 dBm
          Rx invalid nwid:30  Rx invalid crypt:0  Rx invalid frag:0
          Tx excessive retries:0  Invalid misc:0   Missed beacon:0</code></pre></div><p>wi-fi client see ESSID:&quot;OpenWrt2&quot;</p><p>in terminal (com):<br /></p><div class="codebox"><pre><code>wifi0: stuck beacon; resetting (bmiss count 11)</code></pre></div><div class="codebox"><pre><code>wlanconfig ath0 list active

Channel   1 : 2412  Mhz 11g          Channel  48 : 5240  Mhz 11a Dynamic
Channel   2 : 2417  Mhz 11g          Channel  50 : 5250  Mhz 11a Static
Channel   3 : 2422  Mhz 11g          Channel  52 : 5260  Mhz 11a
Channel   4 : 2427  Mhz 11g          Channel  56 : 5280  Mhz 11a Dynamic
Channel   5 : 2432  Mhz 11g          Channel  58 : 5290  Mhz 11a Static
Channel   6 : 2437  Mhz 11g Dynamic  Channel  60 : 5300  Mhz 11a
Channel   7 : 2442  Mhz 11g          Channel  64 : 5320  Mhz 11a
Channel   8 : 2447  Mhz 11g          Channel 149 : 5745  Mhz 11a
Channel   9 : 2452  Mhz 11g          Channel 152 : 5760  Mhz 11a Static
Channel  10 : 2457  Mhz 11g          Channel 153 : 5765  Mhz 11a Dynamic
Channel  11 : 2462  Mhz 11g          Channel 157 : 5785  Mhz 11a
Channel  36 : 5180  Mhz 11a          Channel 160 : 5800  Mhz 11a Static
Channel  40 : 5200  Mhz 11a Dynamic  Channel 161 : 5805  Mhz 11a Dynamic
Channel  42 : 5210  Mhz 11a Static   Channel 165 : 5825  Mhz 11a</code></pre></div><p>manipulations:<br /></p><div class="codebox"><pre><code>iwconfig ath0 channel 36

iwconfig

ath0      IEEE 802.11g  ESSID:&quot;OpenWrt1&quot;  Nickname:&quot;&quot;
          Mode:Master  Frequency:2.412 GHz  Access Point: 00:17:9A:07:58:BD
          Bit Rate:0 kb/s   Tx-Power:18 dBm   Sensitivity=1/1
          Retry:off   RTS thr:off   Fragment thr:off
          Encryption key:off
          Power Management:off
          Link Quality=0/70  Signal level=-96 dBm  Noise level=-96 dBm
          Rx invalid nwid:0  Rx invalid crypt:0  Rx invalid frag:0
          Tx excessive retries:0  Invalid misc:0   Missed beacon:0</code></pre></div><p>What is problem?</p><p>Can frequency be above than 5825Mhz? For example: 5925Mhz (802.11a) (up to 6100Mhz?)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p58528">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">LEE</div>
					<div class="post-datetime">
						5 Nov 2007, 18:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Gig_tmb wrote:</cite><blockquote><p>Hi Jason!</p><p>We have next problem:</p><p>ath0 not work<br />ath1 work</p><p>boot:<br /></p><div class="codebox"><pre><code>wlan: 0.8.4.2 (svn r2568)
ath_hal: module license &#039;Proprietary&#039; taints kernel.
ath_hal: 0.9.30.13 (AR5212, AR5312, RF5111, RF5112)
ath_rate_minstrel: Minstrel automatic rate control algorithm 1.2 (svn r2568)
ath_rate_minstrel: look around rate set to 10%
ath_rate_minstrel: EWMA rolloff level set to 75%
ath_rate_minstrel: max segment size in the mrr set to 6000 us
wlan: mac acl policy registered
ath_ahb: 0.9.4.5 (svn r2568)
ath_pci: switching rfkill capability off
ath_pci: switching per-packet transmit power control off
wifi0: 11a rates: 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps
wifi0: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps
wifi0: 11g rates: 1Mbps 2Mbps 5.5Mbps 11Mbps 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps
wifi0: turboA rates: 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps
wifi0: turboG rates: 6Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps
wifi0: H/W encryption support: WEP AES AES_CCM TKIP
wifi0: mac 5.7 phy 4.2 radio 3.6
wifi0: Use hw queue 1 for WME_AC_BE traffic
wifi0: Use hw queue 0 for WME_AC_BK traffic
wifi0: Use hw queue 2 for WME_AC_VI traffic
wifi0: Use hw queue 3 for WME_AC_VO traffic
wifi0: Use hw queue 8 for CAB traffic
wifi0: Use hw queue 9 for beacons
wifi0: Atheros 5312 WiSoC: mem=0xb8000000, irq=2
ath_pci: switching rfkill capability off
ath_pci: switching per-packet transmit power control off
wifi1: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps
wifi1: 11g rates: 1Mbps 2Mbps 5.5Mbps 11Mbps 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps
wifi1: turboG rates: 6Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps
wifi1: H/W encryption support: WEP AES AES_CCM TKIP
wifi1: mac 5.7 phy 4.2 radio 4.6
wifi1: Use hw queue 1 for WME_AC_BE traffic
wifi1: Use hw queue 0 for WME_AC_BK traffic
wifi1: Use hw queue 2 for WME_AC_VI traffic
wifi1: Use hw queue 3 for WME_AC_VO traffic
wifi1: Use hw queue 8 for CAB traffic
wifi1: Use hw queue 9 for beacons
wifi1: Atheros 5312 WiSoC: mem=0xb8500000, irq=5</code></pre></div><p>we see:<br /></p><div class="codebox"><pre><code>ath0      IEEE 802.11g  ESSID:&quot;OpenWrt1&quot;  Nickname:&quot;&quot;
          Mode:Master  Frequency:2.412 GHz  Access Point: 00:17:9A:07:58:BD
          Bit Rate:0 kb/s   Tx-Power:18 dBm   Sensitivity=1/1
          Retry:off   RTS thr:off   Fragment thr:off
          Encryption key:off
          Power Management:off
          Link Quality=0/70  Signal level=-96 dBm  Noise level=-96 dBm
          Rx invalid nwid:0  Rx invalid crypt:0  Rx invalid frag:0
          Tx excessive retries:0  Invalid misc:0   Missed beacon:0

ath1      IEEE 802.11g  ESSID:&quot;OpenWrt2&quot;  Nickname:&quot;&quot;
          Mode:Master  Frequency:2.412 GHz  Access Point: 00:17:9A:07:58:BD
          Bit Rate:0 kb/s   Tx-Power:18 dBm   Sensitivity=1/1
          Retry:off   RTS thr:off   Fragment thr:off
          Encryption key:off
          Power Management:off
          Link Quality=62/70  Signal level=-34 dBm  Noise level=-96 dBm
          Rx invalid nwid:30  Rx invalid crypt:0  Rx invalid frag:0
          Tx excessive retries:0  Invalid misc:0   Missed beacon:0</code></pre></div><p>wi-fi client see ESSID:&quot;OpenWrt2&quot;</p><p>in terminal (com):<br /></p><div class="codebox"><pre><code>wifi0: stuck beacon; resetting (bmiss count 11)</code></pre></div><div class="codebox"><pre><code>wlanconfig ath0 list active

Channel   1 : 2412  Mhz 11g          Channel  48 : 5240  Mhz 11a Dynamic
Channel   2 : 2417  Mhz 11g          Channel  50 : 5250  Mhz 11a Static
Channel   3 : 2422  Mhz 11g          Channel  52 : 5260  Mhz 11a
Channel   4 : 2427  Mhz 11g          Channel  56 : 5280  Mhz 11a Dynamic
Channel   5 : 2432  Mhz 11g          Channel  58 : 5290  Mhz 11a Static
Channel   6 : 2437  Mhz 11g Dynamic  Channel  60 : 5300  Mhz 11a
Channel   7 : 2442  Mhz 11g          Channel  64 : 5320  Mhz 11a
Channel   8 : 2447  Mhz 11g          Channel 149 : 5745  Mhz 11a
Channel   9 : 2452  Mhz 11g          Channel 152 : 5760  Mhz 11a Static
Channel  10 : 2457  Mhz 11g          Channel 153 : 5765  Mhz 11a Dynamic
Channel  11 : 2462  Mhz 11g          Channel 157 : 5785  Mhz 11a
Channel  36 : 5180  Mhz 11a          Channel 160 : 5800  Mhz 11a Static
Channel  40 : 5200  Mhz 11a Dynamic  Channel 161 : 5805  Mhz 11a Dynamic
Channel  42 : 5210  Mhz 11a Static   Channel 165 : 5825  Mhz 11a</code></pre></div><p>manipulations:<br /></p><div class="codebox"><pre><code>iwconfig ath0 channel 36

iwconfig

ath0      IEEE 802.11g  ESSID:&quot;OpenWrt1&quot;  Nickname:&quot;&quot;
          Mode:Master  Frequency:2.412 GHz  Access Point: 00:17:9A:07:58:BD
          Bit Rate:0 kb/s   Tx-Power:18 dBm   Sensitivity=1/1
          Retry:off   RTS thr:off   Fragment thr:off
          Encryption key:off
          Power Management:off
          Link Quality=0/70  Signal level=-96 dBm  Noise level=-96 dBm
          Rx invalid nwid:0  Rx invalid crypt:0  Rx invalid frag:0
          Tx excessive retries:0  Invalid misc:0   Missed beacon:0</code></pre></div><p>What is problem?</p><p>Can frequency be above than 5825Mhz? For example: 5925Mhz (802.11a) (up to 6100Mhz?)</p></blockquote></div><p>I think ath0 is only 11a</p><p>bmiss count 11 -&gt; 802.11b miss ?</p><div class="codebox"><pre><code>HW watchdog [y]
memcap valid [n]
wlan0 mac address [00:19:5b:xx:xx:xx]: 
wlan1 mac address [00:19:5b:xx:xx:xx]: 
enet0 mac address [00:19:5b:xx:xx:xx]: 
enet1 mac address [00:19:5b:xx:xx:xx]:
major [1]:
minor [0]:
pciid [0013]:
wlan0 enabled [y]:
wlan0 5G enabled [y]:
wlan0 2G enabled [n]:
wlan1 enabled [y]: 
wlan1 5G enabled [n]:
wlan1 2G enabled [y]: 
enet0 enabled [y]:
enet1 enabled [n]:
uart0 (console) enabled [y]:
sysled enabled [y]
sysled gpio [7]
factory reset enabled [y]
factory reset gpio [6]</code></pre></div><p>Lee</p>											<p class="post-edited">(Last edited by <strong>LEE</strong> on 5 Nov 2007, 19:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p58533">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">afgain</div>
					<div class="post-datetime">
						5 Nov 2007, 21:13					</div>
				</div>
				<div class="post-content content">
					<p>Setting ath0 to channel 60 an 11a frequency stopped the beacon messages.<br />Can&#039;t confirm that ath0 is working on my devices as my wifi snooping card is only good for 2.4ghz.<br />Will try and disable ath1 and see if it still works...</p><p>Interesting list of hardware settings LEE what command did you use to produce it?<br />I&#039;ll also try running ath0 on 11g and disabling ath1 to see if I can confirm that ath0 is 11a only.<br />I haven&#039;t seen anything to say it is, everything I&#039;ve read about the chipset makes me believe it should be b,g &amp; a capable. However the antennas might not be good for anything other than 11a.</p><p>Jason</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p58558">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">Gig_tmb</div>
					<div class="post-datetime">
						6 Nov 2007, 11:39					</div>
				</div>
				<div class="post-content content">
					<p>Hi!</p><p>ath0 is working only 11a</p><p>Solution has found here: <a href="http://madwifi.org/ticket/1003">http://madwifi.org/ticket/1003</a></p><p>I did so:<br /></p><div class="codebox"><pre><code>wlanconfig ath0 destroy
wlanconfig ath1 destroy
wlanconfig ath create wlandev wifi0 wlanmode ap
wlanconfig ath create wlandev wifi1 wlanmode ap
iwpriv ath0 mode 11a /////with: iwpriv ath0 mode 11g error: wifi0: stuck beacon; resetting (bmiss count 11)
iwpriv ath1 mode 11g 
iwconfig ath0 essid &quot;1&quot; channel 36
iwconfig ath1 essid &quot;2&quot; channel 11
ifconfig ath0 up
ifconfig ath1 up</code></pre></div><p>wi-fi client see ESSID:&quot;1&quot;; ESSID:&quot;2&quot;</p><p>Where it to search?<br /></p><div class="quotebox"><cite>Lee wrote:</cite><blockquote><p>bmiss count 11 -&gt; 802.11b miss ?</p><p>Code:<br />HW watchdog [y]<br />memcap valid [n]<br />wlan0 mac address [00:19:5b:xx:xx:xx]: <br />wlan1 mac address [00:19:5b:xx:xx:xx]: <br />enet0 mac address [00:19:5b:xx:xx:xx]: <br />enet1 mac address [00:19:5b:xx:xx:xx]:<br />major [1]:<br />minor [0]:<br />pciid [0013]:<br />wlan0 enabled [y]:<br />wlan0 5G enabled [y]:<br />wlan0 2G enabled [n]:<br />wlan1 enabled [y]: <br />wlan1 5G enabled [n]:<br />wlan1 2G enabled [y]: <br />enet0 enabled [y]:<br />enet1 enabled [n]:<br />uart0 (console) enabled [y]:<br />sysled enabled [y]<br />sysled gpio [7]<br />factory reset enabled [y]<br />factory reset gpio [6]</p><p>Lee</p></blockquote></div><p>With my regards, Dmitry.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p58566">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">Gig_tmb</div>
					<div class="post-datetime">
						6 Nov 2007, 16:40					</div>
				</div>
				<div class="post-content content">
					<p>ath0 11a enable<br />/etc/config/wireless</p><div class="codebox"><pre><code>option channel 36
option agmode 11a</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p59083">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">NMI</div>
					<div class="post-datetime">
						16 Nov 2007, 11:27					</div>
				</div>
				<div class="post-content content">
					<p>You guys rock! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Unfortunately it appears that I don&#039;t, because I&#039;m still stuck at square one (i.e. post #1). <img src="https://forum.openwrt.org/img/smilies/roll.png" width="15" height="15" alt="roll" /></p><p>Iâ€™ve tried everything in this thread and all that seemed even remotely applicable from the large dwl-2100ap thread, but Iâ€™m still getting the same<br />â€œAHB interrupt: PROCADDR=0x18201000&nbsp; PROC1=0x80000a16&nbsp; DMAADDR=0x00000000&nbsp; DMA1=0x00000000â€&nbsp; error exactly as described in Dmitry initial post.</p><p>I have a dwl-7100ap A1, board revision 8WAPD15..5A1 with the same ICâ€™s as Dmitryâ€™s except it has an Atmel AT49BV322A flash chip. (But since Iâ€™m still only tftp-booting openwrt the fash difference shouldnâ€™t matter, should it?)</p><br /><p>Any hints or ideas on what I might be doing wrong (or try next), please?<br />Or, could anybody send me a tar-file with a patched openwrt-source tree that should work?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p59131">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">Gig_tmb</div>
					<div class="post-datetime">
						17 Nov 2007, 13:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>NMI wrote:</cite><blockquote><p>You guys rock! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>â€œAHB interrupt: PROCADDR=0x18201000&nbsp; PROC1=0x80000a16&nbsp; DMAADDR=0x00000000&nbsp; DMA1=0x00000000â€&nbsp; error exactly as described in Dmitry initial post.</p></blockquote></div><p>Look better!</p><p>download src-&gt;find </p><p>kamikaze_7.09/target/linux/atheros-2.6/files/drivers/net/ar2313/ar2313.c</p><p>find same strings -&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; sp-&gt;dev = dev;<br />&nbsp; &nbsp; &nbsp; &nbsp; sp-&gt;cfg = pdev-&gt;dev.platform_data;</p><p>&amp; add under this strings<br />&nbsp; &nbsp; <br />&nbsp; &nbsp;if (pdev-&gt;id == 1)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return 0;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p59133">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">NMI</div>
					<div class="post-datetime">
						17 Nov 2007, 16:04					</div>
				</div>
				<div class="post-content content">
					<p>Thanks, I found the problem. I was assuming that the build environment would be clever enough to recognize the updated file and recompile everything that needed to be recompiled after my change without me having to &quot;make clean&quot;.</p><p>I have now booted OpenWrt! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><br /><p>I was also able to tftp-boot a working version of redboot, and proceeded to flash the ROM-version as per Jasonâ€™s instructions. <br />The write to flash went without a hitch, but when the AP rebooted nothing happened and I realized I had bricked it. </p><p>Iâ€™m currently trying to reflash my backup of the original FW, but JTAG just gives me a â€œflash errorâ€ . So Iâ€™ll try to use OCD commander to erase the flash as suggested in the â€œBootloader/Image for a DLink DWL-2100APâ€ , but since I have a different flash chip than in the examples I havenâ€™t nailed the right command sequence just yet. But Im working on it!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p59136">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">NMI</div>
					<div class="post-datetime">
						17 Nov 2007, 21:10					</div>
				</div>
				<div class="post-content content">
					<p>But trying to use OCD Commander turned ot to be a lenghty process.<br />(The linux version of OCD donâ€™t support the wiggler interface and my windows workstation donâ€™t have anything as antiquated as a parallel port. The parallel port on my old laptop didnâ€™t work correctly with OCD commander, etc, etc).</p><p>So I ended up fixing the problem in jtag-brecis-ok that prevented it from erasing my AT49BV322A flash instead!<br />(Warning code butchery below.)</p><div class="codebox"><pre><code>--- libbrux/flash/amd.c.orig    2007-11-17 20:50:52.000000000 +0100
+++ libbrux/flash/amd.c 2007-11-17 20:30:59.000000000 +0100
@@ -239,10 +239,10 @@
        /*      printf(&quot;protected: %d\n&quot;, amdisprotected(ps, adr)); */
 
        bus_write( bus, address + (0x0555 &lt;&lt; o), 0x00aa00aa ); /* autoselect p29, sector erase */
-       bus_write( bus, address + (0x02aa &lt;&lt; o), 0x00550055 );
+       bus_write( bus, address + (0x0aaa &lt;&lt; o), 0x00550055 );
        bus_write( bus, address + (0x0555 &lt;&lt; o), 0x00800080 );
        bus_write( bus, address + (0x0555 &lt;&lt; o), 0x00aa00aa );
-       bus_write( bus, address + (0x02aa &lt;&lt; o), 0x00550055 );
+       bus_write( bus, address + (0x0aaa &lt;&lt; o), 0x00550055 );
        bus_write( bus, adr, 0x00300030 );
 
        if (amdstatus( bus, adr, 0xffff )) {</code></pre></div><p>Now on to the task of creating a working redboot.rom! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><br /><p>Jason appears to have this file:<br />openwrt/redboot/ecos-2.0/packages/hal/mips/dwl7100ap/v2_0/src/plf_flash.c</p><p>That implies to me that he is not using the default ap43 platform but has created his own dwl7100ap platform? <br />If so, how was that done, gen_platform? What options?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p59142">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">Gig_tmb</div>
					<div class="post-datetime">
						18 Nov 2007, 00:48					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>NMI wrote:</cite><blockquote><p>Jason appears to have this file:<br />openwrt/redboot/ecos-2.0/packages/hal/mips/dwl7100ap/v2_0/src/plf_flash.c</p></blockquote></div><p>its setup use memory in 16bit mode nothing more....]<br />..... for amtel see...<br />guida del....V2 &amp; wiki for dwl-2100</p><p>in gen_platform i use ap43</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p59236">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">NMI</div>
					<div class="post-datetime">
						19 Nov 2007, 19:41					</div>
				</div>
				<div class="post-content content">
					<p>SUCCESS!!!!!!!!<br /></p><div class="quotebox"><blockquote><p>BusyBox v1.8.1 (2007-11-19 10:27:24 CET) built-in shell (ash)<br />Enter &#039;help&#039; for a list of built-in commands.</p><p>&nbsp; _______&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;________&nbsp; &nbsp; &nbsp; &nbsp; __<br /> |&nbsp; &nbsp; &nbsp; &nbsp;|.-----.-----.-----.|&nbsp; |&nbsp; |&nbsp; |.----.|&nbsp; |_<br /> |&nbsp; &nbsp;-&nbsp; &nbsp;||&nbsp; _&nbsp; |&nbsp; -__|&nbsp; &nbsp; &nbsp;||&nbsp; |&nbsp; |&nbsp; ||&nbsp; &nbsp;_||&nbsp; &nbsp;_|<br /> |_______||&nbsp; &nbsp;__|_____|__|__||________||__|&nbsp; |____|<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |__| W I R E L E S S&nbsp; &nbsp;F R E E D O M<br /> KAMIKAZE (bleeding edge, r9579) -------------------<br />&nbsp; * 10 oz Vodka&nbsp; &nbsp; &nbsp; &nbsp;Shake well with ice and strain<br />&nbsp; * 10 oz Triple sec&nbsp; mixture into 10 shot glasses.<br />&nbsp; * 10 oz lime juice&nbsp; Salute!<br /> ---------------------------------------------------<br />root@OpenWrt:~#</p></blockquote></div><p>Hope you donâ€™t mind me highjacking your tread Dmitry, but I do believe Iâ€™m still on &lt;topic&gt;, so Iâ€™ll dump some random ramblings here in case somebody else like me without any prior knowledge of OpenWrt decides to try to install it on their 7100. </p><p>Now where&#039;s that how-to/wiki page? <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><br /><p><strong>Pinout of the serial port JP2:</strong></p><p>( ) TX<br />( ) GND<br />( ) Vcc</p><p>( ) RX</p><br /><p><strong>Redboot:</strong><br />The redboot.tar.bz2 archive doesnâ€™t appear to have the write flag set for the owner?!?!?<br />So initially I got a lot of strange permissioned denied errors, but <strong>Chmod â€“R u+w</strong> fixed that problem.</p><br /><p>To add support for the AT49BV322A to redboot, follow the instructions for the dwl-2100ap. I.e:</p><div class="codebox"><pre><code>--- ecos-2.0/packages/devs/flash/amd/am29xxxxx/v2_0/include/flash_am29xxxxx.inl.orig    2007-11-19 18:17:04.000000000 +0100
+++ ecos-2.0/packages/devs/flash/amd/am29xxxxx/v2_0/include/flash_am29xxxxx.inl2007-11-17 23:06:41.000000000 +0100
@@ -64,6 +64,8 @@
 //
 //==========================================================================
 
+#define CYGHWR_FLASH_AM29XXXXX_NO_WRITE_PROTECT
+
 #include &lt;pkgconf/hal.h&gt;
 #include &lt;pkgconf/devs_flash_amd_am29xxxxx.h&gt;
 #include &lt;cyg/hal/hal_arch.h&gt;</code></pre></div><div class="codebox"><pre><code>--- ecos-2.0/packages/devs/flash/amd/am29xxxxx/v2_0/include/flash_am29xxxxx_parts.inl.orig      2007-11-19 18:16:51.000000000 +0100
+++ ecos-2.0/packages/devs/flash/amd/am29xxxxx/v2_0/include/flash_am29xxxxx_parts.inl   2007-11-17 23:04:27.000000000 +0100
@@ -79,6 +79,27 @@
 //
 #define _LAST_BOOTBLOCK (-1)
 
+{   // AT49BV322A
+        device_id  : FLASHWORD(0xc8),
+        block_size : 0x10000 * CYGNUM_FLASH_INTERLEAVE,
+        block_count: 64,
+        device_size: 0x400000 * CYGNUM_FLASH_INTERLEAVE,
+        base_mask  : ~(0x400000 * CYGNUM_FLASH_INTERLEAVE - 1),
+        bootblock  : true,
+        bootblocks : { 0x000000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       _LAST_BOOTBLOCK
+                     },
+        banked     : false
+    },
+
 #if CYGNUM_FLASH_WIDTH == 8
 #ifdef CYGHWR_DEVS_FLASH_AMD_AM29F040B
     {   // AM29F040B
@@ -473,6 +494,27 @@
 
 #else // 16 bit devices
 
+ {   // AT49BV322A
+        device_id  : FLASHWORD(0x00c8),
+        block_size : 0x10000 * CYGNUM_FLASH_INTERLEAVE,
+        block_count: 64,
+        device_size: 0x400000 * CYGNUM_FLASH_INTERLEAVE,
+        base_mask  : ~(0x400000 * CYGNUM_FLASH_INTERLEAVE - 1),
+        bootblock  : true,
+        bootblocks : { 0x000000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       0x002000 * CYGNUM_FLASH_INTERLEAVE,
+                       _LAST_BOOTBLOCK
+                     },
+        banked     : false
+    },
+
 #ifdef CYGHWR_DEVS_FLASH_AMD_AM29LV160
     {   // MBM29LV160-T | AM29LV160-T
         device_id  : FLASHWORD(0x22c4),</code></pre></div><p>Trying to use gen_platform failed for me due to: tail: cannot open +2 for reading: No such file or directory.</p><p>But adding the the following lines to gen_platform fixes that (borrowed from ramcheck in the 2100 thread):</p><div class="codebox"><pre><code>@@ -137,6 +137,7 @@
 ecosconfig new atheros_$AP redboot
 ecosconfig import $ECOS_REPOSITORY/hal/mips/$AP/v2_0/misc/redboot_RAM.ecm
 ecosconfig tree
+sed -ie &#039;s/tail +2/tail -n 2/&#039; $(grep -rl &quot;tail +2&quot; *)
 make
 
 cd ..
@@ -148,6 +149,7 @@
 ecosconfig new atheros_$AP redboot
 ecosconfig import $ECOS_REPOSITORY/hal/mips/$AP/v2_0/misc/redboot_ROM.ecm
 ecosconfig tree
+sed -ie &#039;s/tail +2/tail -n 2/&#039; $(grep -rl &quot;tail +2&quot; *)
 make
 cd install/bin
 mipsisa32-elf-objcopy -O binary redboot.elf redboot.rom</code></pre></div><p>Other than that I just followed your and Jasons excellent instructions, with one slight alteration; checking the flash layout afterwards I came to realise that I had 320KB flash unused (i.e. wasted!), that could be added to the rootfs.</p><p>So at least for me a better command where:<br /></p><div class="quotebox"><blockquote><p>load -r -v -b 0x80041000 openwrt-atheros-2.6-root.squashfs<br />fis create -b 0x80041000 -l <strong>0x00270000</strong> -e 0x00000000 rootfs</p></blockquote></div><p>that gave me an additional 320KB of badly needed &quot;disk space&quot;.</p><br /><p>Now for the next step:</p><p>Has anyone been able to locate any GPIO-lines other than the power-led and reset-button on the 7100?</p><p>I really, really, really want to add a MMC (SD) card to my 7100, but even though the power-led and the reset-button works exactly as on the 2100 I havenâ€™t been able to find any trace (pun intended) of the other GPIO-ports. <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>											<p class="post-edited">(Last edited by <strong>NMI</strong> on 19 Nov 2007, 19:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p59240">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">Gig_tmb</div>
					<div class="post-datetime">
						19 Nov 2007, 20:12					</div>
				</div>
				<div class="post-content content">
					<p>Going will master road ! <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>.... I really, really, really want to add a MMC (SD) card to my 7100 to .... but<br />.... cant find anything about it</p><p>.... In redboot everyone went his own way, all apply many diff&#039;s 2100 topic ...<br />.... one of there patching gen_platform...</p><p>may be find some about SD/MMC/CF on 7100 together?<br />mm? NMI!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p59243">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">NMI</div>
					<div class="post-datetime">
						19 Nov 2007, 21:10					</div>
				</div>
				<div class="post-content content">
					<p>OK! </p><p>To be able to utilize a MMC card we need four GPIO-pins and so far I confirmed two (power-led and reset-button), but we need two more (preferably four more since Iâ€™d prefer to use the power-led and reset-button for other matters). <br />This is how far my investigation has gotten (and where it might end):</p><p>My start off point was erebus post in the 2100 thread:<br /></p><div class="quotebox"><cite>erebus wrote:</cite><blockquote><p>Besides patched linux it&#039;s possible to operate them from RedBoot using mfill command. The output register is located at 0xbc002000 and only 8 least significant bits has meaning (so it is actually located at 0xbc002003). The same holds true for the input register located at 0xbc002004. Control register is located at 0xbc002008 and 8 least significant bits control IO direction (0 stands for output and 1 for input). It looks like other bits in control register has some meaning but I&#039;ve not tested them.<br />The way to light up Power LED from RedBoot is:<br /></p><div class="codebox"><pre><code>mfill -b 0xbc002008 -l 0x04 -p 0x0000007f -4  // set seventh bit direction to output
mfill -b 0xbc002000 -l 0x04 -p 0x00000080 -4  // set seventh bit</code></pre></div><p>You can also watch Reset Button state with dump -b 0xbc002004 command.</p></blockquote></div><p>This holds true for the 7100 also; I can toggle the power-led and watch the reset button on the 7100 just as he did on the 2100.</p><p>Unfortunately it appears that the similarity ends there.<br /></p><div class="quotebox"><cite>erebus wrote:</cite><blockquote><p>But that&#039;s not all <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> After some poking with multimeter I&#039;ve found five more GPIO pins. All of these were vias but had larger pads and were marked with TP* signs. Here&#039;s the bit-to-pin correspondence that&#039;s true for rev.A4 device:<br /></p><div class="codebox"><pre><code>bit  pin
 0    ?
 1   TP1
 2   TP4
 3   TP6
 4   TP5
 5   TP2
 6   Reset Button
 7   Power LED</code></pre></div></blockquote></div><p>There are no pads marked TP1-TP5 on the 7100 board. There is a marking TP6 with a pad nearby, but it does not appear to be a GPIO-pad. <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>Making all 7 GPIOs outputs and toggling them using mfill in redboot in an effort to locate them on the circuit board has not appeared to damage my 7100, but I canâ€™t give any guaranties.</p><p>(Of course there is the possibility that none of the other GPIOs have been given lines out from the BGA making any effort to find them fruitless, but lets hope that is not the case!)</p>											<p class="post-edited">(Last edited by <strong>NMI</strong> on 19 Nov 2007, 21:11)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>