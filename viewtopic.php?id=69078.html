<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> OpenVPN reverse tunnell incomplete page load via HTTP over VPN (solved</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p347565">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						24 Dec 2016, 10:28					</div>
				</div>
				<div class="post-content content">
					<p>I set up OpenVPN (server and client) on two OpenWRT C.C. routers to obtain a reverse tunnelling because one of the two point was under NAT firewalling and I needed to reach from Internet some services via HTTP (mjpg-streamer cams and the router itself) on the remote LAN that was under firewall.</p><p>Basicaly the client router connects to the server router via OpenVPN, then, as soon as the connection is established, the server router redirects some internet ports back to the client trough the VPN tunnel.</p><p>Everything worked well, but after an internet blackout on the openvpn server side, I experienced a weird problem:<br />Incomplete page load of resources via HTTP over VPN. only the page title was loaded in the browser.</p><p>Finally I discovered that it was a MTU problem, VPN connections are sensitive to incorrect/low MTU set, if the MTU value is not correct you might experience packets loss (MTU too high) or slow VPN speed (MTU too low)</p><p>I solved the issue by setting the MTU value of the Tun0 device to 1310.</p><p><span style="color: red">To discover the correct value of MTU to be used for your VPN, you need to give the command:<br />&quot;ping -s 1500 remote_ip&quot; (change remote_ip with the remote VPN ip address, ex: 10.8.0.6)<br />and decrease the 1500 value by 10 each time, until the ping succeeds. Once the ping succeeds, the value used is the MTU you should use on both sides of the VPN.<br /></span><br />I don&#039;t know why the VPN tunnell worked well for some time with the default MTU (1500) <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 24 Dec 2016, 19:40)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>