<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WDS repeater mode cant be set up</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 3 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p161720">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Lubomir</div>
					<div class="post-datetime">
						22 Mar 2012, 11:07					</div>
				</div>
				<div class="post-content content">
					<p>Hello. I have tried this now for some times on some devices (all atheros) and never got that working.<br />I install actual trunk, install luci on both devices (both same hardware revision, same openwrt, ...). Set the first on WDS Master AP in luci. Set the second on WDS Client mode. WPA2-AES, DHCP disabled on WDS client. It work great. They connect to each other and everything works fine. BUT i have only one AP running. The client is just a client and does not extend the range of the main AP.<br />When i then set up a second interface in AP/master mode, the WDS client interface broke up and turns into master mode like the second one. Nothing work any more. I also cant see the new setted up interface in a running wlan-scanner on my phone.</p><p> cat /etc/config/wireless</p><p>config wifi-device &#039;radio0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option type &#039;mac80211&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option channel &#039;11&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option macaddr &#039;XXXXXXXXXXX&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option hwmode &#039;11ng&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option htmode &#039;HT20&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list ht_capab &#039;SHORT-GI-20&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list ht_capab &#039;SHORT-GI-40&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list ht_capab &#039;RX-STBC1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list ht_capab &#039;DSSS_CCK-40&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option txpower &#039;20&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option country &#039;DE&#039;</p><p>config wifi-iface<br />&nbsp; &nbsp; &nbsp; &nbsp; option device &#039;radio0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option network &#039;lan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid &#039;OpenWrt&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option wds &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption &#039;psk2+ccmp&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option key &#039;XXXXXXXXXX&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode &#039;sta&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option bssid &#039;XXXXXXXXXXX&#039;</p><p>config wifi-iface<br />&nbsp; &nbsp; &nbsp; &nbsp; option device &#039;radio0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode &#039;ap&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid &#039;OpenWrt&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option network &#039;lan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption &#039;psk2+ccmp&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option key &#039;XXXXXXXXX&#039;</p>											<p class="post-edited">(Last edited by <strong>Lubomir</strong> on 22 Mar 2012, 11:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162145">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Lubomir</div>
					<div class="post-datetime">
						26 Mar 2012, 13:43					</div>
				</div>
				<div class="post-content content">
					<p>Anyone an idea?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162255">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Lubomir</div>
					<div class="post-datetime">
						27 Mar 2012, 14:17					</div>
				</div>
				<div class="post-content content">
					<p>Help?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162534">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">j8soot</div>
					<div class="post-datetime">
						30 Mar 2012, 01:56					</div>
				</div>
				<div class="post-content content">
					<p>On the wiki it says to do as you did:</p><div class="quotebox"><blockquote><p>To have an AP to AP WDS simply set an ap on the client in addition to the sta (with the same ssid and key, or not).</p></blockquote></div><p>It should work but maybe something is broken in OpenWRT? I will try it later and report back.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162958">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">j8soot</div>
					<div class="post-datetime">
						2 Apr 2012, 03:31					</div>
				</div>
				<div class="post-content content">
					<p>I am using WDS between two WR1043ND routers running trunk r31152:</p><p>Main router:</p><div class="codebox"><pre><code>config wifi-device &#039;radio0&#039;
        option type &#039;mac80211&#039;
        option macaddr &#039;11:22:33:44:55:66&#039;
        option hwmode &#039;11ng&#039;
        option htmode &#039;HT20&#039;
        list ht_capab &#039;SHORT-GI-40&#039;
        list ht_capab &#039;DSSS_CCK-40&#039;
        option txpower &#039;20&#039;
        option country &#039;GB&#039;
        option channel &#039;1&#039;

config wifi-iface
        option device &#039;radio0&#039;
        option network &#039;lan&#039;
        option mode &#039;ap&#039;
        option ssid &#039;wr1043nd&#039;
        option wds &#039;1&#039;
        option key &#039;password&#039;
        option encryption &#039;psk2&#039;</code></pre></div><p>Client router:</p><div class="codebox"><pre><code>config wifi-device &#039;radio0&#039;
        option type &#039;mac80211&#039;
        option macaddr &#039;99:88:77:66:55:44&#039;
        option hwmode &#039;11ng&#039;
        option htmode &#039;HT20&#039;
        list ht_capab &#039;SHORT-GI-40&#039;
        list ht_capab &#039;DSSS_CCK-40&#039;
        option txpower &#039;20&#039;
        option country &#039;GB&#039;
        option channel &#039;1&#039;

config wifi-iface
        option device &#039;radio0&#039;
        option network &#039;lan&#039;
        option key &#039;password&#039;
        option mode &#039;ap&#039;
        option encryption &#039;psk2&#039;
        option ssid &#039;wr1043nd&#039;

config wifi-iface
        option device &#039;radio0&#039;
        option network &#039;lan&#039;
        option key &#039;password&#039;
        option ssid &#039;wr1043nd&#039;
        option wds &#039;1&#039;
        option mode &#039;sta&#039;
        option bssid &#039;11:22:33:44:55:66&#039;
        option encryption &#039;psk2&#039;</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162990">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">johan666</div>
					<div class="post-datetime">
						2 Apr 2012, 12:35					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>j8soot wrote:</cite><blockquote><p>I am using WDS between two WR1043ND routers running trunk r31152:</p></blockquote></div><p>In WDS mode, it is so easy.<br />Moreover, you can also add AP in client router which is Different SSID and also use different security.</p><p>And, where did you get r31152 ?<br />tks.</p>											<p class="post-edited">(Last edited by <strong>johan666</strong> on 2 Apr 2012, 12:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162998">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">j8soot</div>
					<div class="post-datetime">
						2 Apr 2012, 13:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>johan666 wrote:</cite><blockquote><div class="quotebox"><cite>j8soot wrote:</cite><blockquote><p>I am using WDS between two WR1043ND routers running trunk r31152:</p></blockquote></div><p>In WDS mode, it is so easy.<br />Moreover, you can also add AP in client router which is Different SSID and also use different security.</p><p>And, where did you get r31152 ?<br />tks.</p></blockquote></div><p>It is easy but sometimes a device or version of OpenWRT has problems and then it is not so easy.</p><p>I know and it&#039;s great that we have the freedom to configure with different settings as we like.</p><p>I built the source code to get r31152.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p163040">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						2 Apr 2012, 17:27					</div>
				</div>
				<div class="post-content content">
					<p>The BSSID setting has no effect in the kind of lazy wds used by mac80211.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p163050">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">towolf</div>
					<div class="post-datetime">
						2 Apr 2012, 18:25					</div>
				</div>
				<div class="post-content content">
					<p>By the way. What’s trelay? Is it a replacement for relayd?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>